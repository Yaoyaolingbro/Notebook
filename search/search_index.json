{"config":{"lang":["zh"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to Yaoyaoling's notebook","text":""},{"location":"#_1","title":"\u524d\u8a00","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u7528\u4e8e\u8bb0\u5f55\u81ea\u5df1\u8ba1\u7b97\u673a\u5b66\u4e60\u751f\u6daf\u7684\u4e00\u4e2a\u7b14\u8bb0\u672c\u3002\u4f1a\u4e0d\u5b9a\u671f\u7684\u66f4\u65b0\u91cc\u9762\u7684\u5185\u5bb9\u3002\u6bcf\u4e2a\u677f\u5757\u5177\u4f53\u7684\u5185\u5bb9\u53ef\u4ee5\u5206\u522b\u70b9\u51fb\u8fdb\u53bb\u4f1a\u6709\u603b\u4f53\u7684\u4ecb\u7ecd\uff0c\u5f53\u7136\u4f60\u4e5f\u53ef\u4ee5\u901a\u8fc7\u641c\u7d22\u6765\u627e\u5230\u4f60\u60f3\u8981\u7684\u8d44\u6e90\u3002\u5e0c\u671b\u8be5\u7b14\u8bb0\u5bf9\u5927\u5bb6\u80fd\u591f\u6709\u6240\u5e2e\u52a9\u3002</p> <p>\u5982\u679c\u91cc\u9762\u7684\u5185\u5bb9\u5927\u5bb6\u6709\u8865\u5145\u8bf4\u660e\u7684\u5730\u65b9\uff0c\u6b22\u8fce\u548c\u7b14\u8005\u6c9f\u901a\uff1aDuzz816@163.com \u6216\u8005\u63d0\u4ea4Issue\u3002</p> <p>\u611f\u8c22\u6bcf\u4e00\u4f4d\u6211\u6240\u9047\u89c1\u7684\u6d59\u5927\u5b66\u957f\u540c\u5b66\u7684\u5e2e\u52a9\uff0c\u4ee5\u53cacsdiy\u5bf9\u6211\u7684\u6307\u5bfc\u3002\u6211\u4e5f\u4f1a\u6839\u636e\u6211\u7684\u5b66\u4e60\u8fc7\u7a0b\u628a\u4e00\u4e9b\u597d\u7684\u91cd\u8981\u7684\u7f51\u7ad9\u653e\u5728\u6211\u7684\u7b14\u8bb0\u91cc\u3002\uff08\u5982\u82e5\u53ef\u4ee5\uff0c\u8bf7\u70b9\u4e0b\u53f3\u4e0a\u89d2\u7684\u5c0f\u661f\u661f\u54df\u2728\uff09</p> <p>\u7b14\u8bb0\u8fd1\u51b5</p> <p>\u7531\u4e8e\u4e2a\u4eba\u539f\u56e0\uff0c\u5176\u5b9e\u4e0d\u5c11\u7b14\u8bb0\u90fd\u662f\u6709\u6240\u6401\u7f6e\u7684\uff0c\u5173\u4e8e\u79d1\u7814\u65b9\u9762\u7684\u5185\u5bb9\uff0c\u6211\u4f1a\u5c3d\u5feb\u66f4\u65b0\uff0c\u4f46\u662f\u5173\u4e8e\u8bfe\u7a0b\u5b66\u4e60\u7684\u5185\u5bb9\uff0c\u53ef\u80fd\u4f1a\u6709\u6240\u5ef6\u8fdf\u3002\u6b22\u8fce\u968f\u65f6\u548c\u7b14\u8005\u8054\u7cfb\uff0c\u8c22\u8c22\u54df\uff5e</p> <p>\u6700\u8fd1\u53d1\u73b0\u4e2a\u5b9d\u85cf\u7f51\u7ad9\uff1ahttps://github.com/kamranahmedse/developer-roadmap?tab=readme-ov-file</p> <p>List</p> <p>\u54c8\u54c8\u54c8\u54c8\u54c8\u54c8\u54c8\uff0c\u771f\u7684\u610f\u8bc6\u5230\u60f3\u505a\u7684\u4e8b\u60c5\u597d\u591a\uff0c\u4f46\u2026\u2026\u5fc3\u529b\u6194\u60b4</p> <ul> <li> \u86cb\u767d\u8d28\u76f8\u5173\u79d1\u7814</li> <li> \u8bba\u6587\u9605\u8bfb\u4e0e\u57fa\u7840\u6a21\u578b\u66f4\u65b0</li> <li> ZJUCST(\u6d59\u6c5f\u5927\u5b66\u8d85\u7b97\u961f) LLM inference</li> <li> \u5927\u4e8c\u4e0b\u5b66\u671f\u7684\u8bfe\u7a0b\u5b66\u4e60</li> <li> python\u8fdb\u9636\uff1f\u4f8b\u5982pytorch\u5e93\u7684\u5b66\u4e60\u7b49</li> </ul>"},{"location":"friend/","title":"\u53cb\u94fe","text":"<ul> <li>zicx note</li> </ul>"},{"location":"AI/","title":"AI\u5165\u95e8","text":"<ol> <li>\u7b2c\u4e00\u6691\u5047\u4ee5\u53ca\u5927\u4e8c\u4e0a\u5b66\u671f\u901a\u8fc7CS50\u7684\u5b66\u4e60\u5165\u95e8AI\u3002\u8be6\u60c5\u8bf7\u8df3\u8f6cCS50</li> <li>Pytorch\u4e2d\u6587\u624b\u518c</li> <li>\u57fa\u672c\u64cd\u4f5c\u30013b1b\u6216\u8005tensorflow playground\u53ef\u4ee5\u8ba9\u4f60\u6709\u4e9b\u76f4\u89c2\u7406\u89e3</li> </ol>"},{"location":"AI/#_1","title":"\u7b80\u5355\u7684\u4e00\u4e9b\u6982\u5ff5","text":"<p>\u5efa\u8bae\u5165\u95e8\u53ef\u4ee5\u770b\u4e9b3b1b\u7684\u76f4\u89c2\u89c6\u9891\uff0c\u518d\u53bb\u5b66\u4e60cs50\u7b49\u8bfe\u7a0b\u5185\u5bb9</p> <ol> <li>\u4ee5\u6700\u7b80\u5355\u7684\u624b\u5199\u6570\u5b57\u4e3a\u4f8b\uff0c\u5bf9\u4e8e\u7b80\u5355\u795e\u7ecf\u7f51\u7edc\u7684\u6570\u5b66\u800c\u8a00\uff0c\u6bcf\u4e2a\u795e\u7ecf\u5143\u53ef\u4ee5\u770b\u4f5c\u4e00\u4e2a\u6570\u5b57\u5177\u6709\u6fc0\u6d3b\u503c\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u8f93\u5165\uff08\u4f8b\u5982\u628a\u4e8c\u7ef4\u7070\u5ea6\u503c\u8f6c\u6362\u6210\u4e00\u7ef4\uff09\u770b\u6210\u4e00\u4e2a\u5217\u5411\u91cf\uff0c\u6743\u91cd\u503c\u770b\u4e3a\u77e9\u9635\uff0cbias\u4e3a\u9644\u52a0\u5217\u5411\u91cf\uff0c\u4ee5\u53ca\u6700\u540e\u9644\u52a0\u5230\u6574\u4f53\u7684\u6fc0\u6d3b\u51fd\u6570\u3002\u6700\u540e\u901a\u8fc7\u4ee3\u4ef7\u51fd\u6570loss\u6765\u8ba1\u7b97\u7ed3\u679c\u4e0a\u7684\u504f\u5dee\uff0c\u8fd9\u4fbf\u662f\u4e00\u6b21\u7f51\u7edc\u8bad\u7ec3\u7684\u8fc7\u7a0b\u3002</li> </ol> <p>\u68af\u5ea6\u4e0b\u964d\u548c\u53cd\u5411\u4f20\u64ad:\u6839\u636e\u4e00\u6b21\u8bad\u7ec3\u6211\u4eec\u5373\u53ef\u6307\u5bfc\u521d\u59cb\u8bbe\u5b9a\u7684weight\u548cbias\u7684\u597d\u574f\uff0c\u4f46\u5982\u4f55\u8be5\u6539\u8fdb\u662f\u4e2a\u95ee\u9898\uff1f</p> <ol> <li>\u68af\u5ea6\u4e0b\u964d\uff1a\u627e\u5230\u5c40\u90e8\u6700\u5c0f\u503c\uff0c\u5b66\u4e60\u7387\u5373\u4e3a\u6b65\u957f\u3002\u5982\u4f55\u627e\u5230\u4e0b\u964d\u7684\u65b9\u5411\u4fbf\u662f\u53cd\u5411\u4f20\u64ad\u7684\u3002\u53cd\u5411\u4f20\u64ad\u4f1a\u5728\u5f88\u591a\u5730\u65b9\u6c42\u5e73\u5747\u6765\u8fdb\u884c\u5fae\u8c03\u3002\u662f\u6765\u6c42\u5355\u4e2a\u8bad\u7ec3\u6837\u672c\u60f3\u600e\u6837\u4fee\u6539\u6743\u91cd\u548c\u504f\u7f6e\u3002</li> </ol>"},{"location":"AI/DL/","title":"\u6df1\u5ea6\u5b66\u4e60","text":"<p>\u8fd9\u91cc\u662f\u6211\u6df1\u5ea6\u5b66\u4e60\u76f8\u5173\u77e5\u8bc6\u7684\u5b66\u4e60\u8bb0\u5f55\uff0c\u6211\u4e5f\u4f1a\u4e4b\u540e\u4e0d\u65ad\u66f4\u65b0\u5b66\u4e60\u8def\u7ebf\u3002</p>"},{"location":"AI/DL/#_2","title":"\u52a8\u624b\u5b66\u6df1\u5ea6\u5b66\u4e60","text":"<p>Github repo Book-pages \u8bfe\u7a0b\u89c6\u9891 GAN\u7684loss\u5206\u6790</p>"},{"location":"AI/LLM/","title":"LLM","text":"<p>llama3-scratch LLM-visualize [\u5206\u5e03\u5f0f\u8bad\u7ec3]\uff08https://zhuanlan.zhihu.com/p/688873027?utm_psn=1783111476774580224</p>"},{"location":"AI/machine%20learning/","title":"\u673a\u5668\u5b66\u4e60","text":"<p>\u8fd9\u91cc\u662f\u6211\u673a\u5668\u5b66\u4e60\u7684\u76f8\u5173\u8bb0\u5f55\u3002</p> <p>\u8d44\u6e90</p> <p>numpy-ml</p>"},{"location":"AI/machine%20learning/introduction/","title":"\u673a\u5668\u5b66\u4e60\u57fa\u7840","text":""},{"location":"AI/machine%20learning/introduction/#_2","title":"\u57fa\u672c\u6982\u5ff5\u300a\u673a\u5668\u5b66\u4e60\u300b","text":"<ol> <li>\u6a21\u578b\u6307\u5168\u5c40\u6027\u7ed3\u679c\uff0c\u6a21\u5f0f\u6307\u5c40\u90e8\u7ed3\u679c\u3002</li> <li>\u8bb0\u5f55\u7684\u96c6\u5408\u79f0\u4e3a\u4e00\u4e2a\"\u6570\u636e\u96c6\" (data set) \uff0c\u5176\u4e2d\u6bcf\u6761\u8bb0\u5f55\u662f\u5173\u4e8e\u4e00\u4e2a\u4e8b\u4ef6\u6216\u5bf9\u8c61(\u8fd9\u91cc\u662f\u4e00\u4e2a\u897f\u74dc)\u7684\u63cf\u8ff0\uff0c\u79f0\u4e3a\u4e00\u4e2a\"\u793a\u4f8b\" (instance) \u6216\"\u6837\u672c\" (sample). \u53cd\u6620\u4e8b\u4ef6\u6216\u5bf9\u8c61\u5728\u67d0\u65b9\u9762\u7684\u8868\u73b0\u6216\u6027\u8d28\u7684\u4e8b\u9879\uff0c\u4f8b\u5982\"\u8272\u6cfd\"\"\u6839\u8482\" \"\u6572\u58f0\"\uff0c\u79f0\u4e3a\"\u5c5e\u6027\" (attribute) \u6216\"\u7279\u5f81\" (feature); \u5c5e\u6027\u4e0a\u7684\u53d6\u503c\uff0c\u4f8b\u5982\"\u9752\u7eff\" \"\u4e4c\u9ed1\"\uff0c\u79f0\u4e3a\"\u5c5e\u6027\u503c\" (attribute value). \u5c5e\u6027\u5f20\u6210\u7684\u7a7a\u95f4\u79f0\u4e3a\"\u5c5e\u6027\u7a7a\u95f4\" (attribute space) \"\u6837\u672c\u7a7a\u95f4\" (sample space) \u6216\"\u8f93\u5165\u7a7a\u95f4\"\u4f8b\u5982\u6211\u4eec\u628a\"\u8272\u6cfd\" \"\u6839\u8482\" \"\u6572\u58f0\"\u4f5c\u4e3a\u4e09\u4e2a\u5750\u6807\u8f74\uff0c\u5219\u5b83\u4eec\u5f20\u6210\u4e00\u4e2a\u7528\u4e8e\u63cf\u8ff0\u897f\u74dc\u7684\u4e09\u7ef4\u7a7a\u95f4\uff0c\u6bcf\u4e2a\u897f\u74dc\u90fd\u53ef\u5728\u8fd9\u4e2a\u7a7a\u95f4\u4e2d\u627e\u5230\u81ea\u5df1\u7684\u5750\u6807\u4f4d\u7f6e.\u7531\u4e8e\u7a7a\u95f4\u4e2d\u7684\u6bcf\u4e2a\u70b9\u5bf9\u5e94\u4e00\u4e2a\u5750\u6807\u5411\u91cf\uff0c\u56e0\u6b64\u6211\u4eec\u4e5f\u628a\u4e00\u4e2a\u793a\u4f8b\u79f0\u4e3a\u4e00\u4e2a\"\u7279\u5f81\u5411\u91cf\" (feature vector). <code>\u4ee5\u897f\u74dc\u4e3a\u4f8b</code></li> <li>\u4ece\u6570\u636e\u4e2d\u5b66\u5f97\u6a21\u578b\u7684\u8fc7\u7a0b\u79f0\u4e3a\u201d\u5b66\u4e60\u201c\u6216\u8005\u201d\u8bad\u7ec3\u201c\u3002\u8981\u5efa\u7acb\u201d\u9884\u6d4b\u201c\uff08prediction\uff09\u6a21\u578b\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u201d\u6807\u8bb0\u201c\uff08label\uff09\uff0c\u62e5\u6709\u6807\u8bb0\u4fe1\u606f\u7684\u793a\u4f8b\u53eb\u505a\u201d\u6837\u4f8b\u201c\u3002\u6211\u4eec\u82e5\u9884\u6d4b\u7684\u662f\u79bb\u6563\u503c\uff0c\u5219\u662f\u201d\u5206\u7c7b\u201c\uff08classification\uff09\uff1b\u82e5\u662f\u8fde\u7eed\u503c\uff0c\u5219\u662f\u201c\u56de\u5f52\u201d\u3002\u5176\u4e2d\u5173\u4e8e\u201c\u4e8c\u5206\u7c7b\u4efb\u52a1\uff1a\u901a\u5e38\u79f0\u5176\u4e2d\u4e00\u7c7b\u4e3a\u201d\u6b63\u7c7b\u201c\uff08positive class\uff09\uff0c\u53e6\u5916\u4e00\u7c7b\u4e3a\u201d\u53cd\u7c7b\u201c\u6216\u201d\u8d1f\u7c7b\u201c\uff08negative class\uff09\u3002\u5bf9\u4e8e\u5206\u7c7b\u548c\u56de\u5f52\u800c\u8a00\u662f\u76d1\u7763\u5b66\u4e60.\uff08supervised learning\uff09</li> <li>\u5f53\u7136\u6211\u4eec\u4e5f\u53ef\u4ee5\u5bf9\u5bf9\u8c61\u505a\u201d\u805a\u7c7b\u201c\uff08clustering\uff09\uff0c\u5373\u5bf9\u5bf9\u8c61\u8fdb\u884c\u5206\u7ec4\uff0c\u6bcf\u7ec4\u79f0\u4e3a\u201d\u7c07\u201c\uff08cluster\uff09\u5982\uff1a\u6d45\u8272\u74dc\u3001\u6df1\u8272\u74dc\u3001\u5927\u74dc\u5c0f\u74dc\u7b49\u7b49\u3002 \u901a\u5e38\u6765\u8bf4\u505a\u805a\u7c7b\u7684\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u65e0\u6807\u8bb0\u4fe1\u606f\uff0c\u6211\u4eec\u79f0\u4e3a\u65e0\u76d1\u7763\u5b66\u4e60\uff08unsupervised learning\uff09</li> <li>\u673a\u5668\u5b66\u4e60\u7684\u76ee\u7684\u662f\u4e3a\u4e86\u66f4\u597d\u9002\u7528\u4e8e\u201d\u65b0\u6837\u672c\u201c\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u5728\u5df2\u6709\u6837\u672c\u4e0a\u5f97\u5230\u597d\u7684\u7ed3\u679c\u3002\u8fd9\u79cd\u80fd\u529b\u6211\u4eec\u79f0\u4e3a\u201d\u6cdb\u5316\u201c\uff08generalization\uff09\u80fd\u529b\uff0c\u5177\u6709\u5f3a\u6cdb\u5316\u80fd\u529b\u7684\u6a21\u578b\u901a\u5e38\u5728\u6574\u4e2a\u6837\u672c\u7a7a\u95f4\u4e0a\u90fd\u5de5\u4f5c\u5f97\u5f88\u597d\u3002\u6211\u4eec\u4e00\u822c\u5047\u8bbe\u6837\u672c\u7a7a\u95f4\u5168\u4f53\u6837\u672c\u670d\u4ece\u4e00\u4e2a\u672a\u77e5\u201d\u5206\u5e03\u201c\uff08distribution\uff09\u3002\u6211\u4eec\u83b7\u5f97\u7684\u6bcf\u4e2a\u6837\u672c\u90fd\u662f\u72ec\u7acb\u5730\u4ece\u8fd9\u4e2a\u5206\u5e03\u4e0a\u91c7\u6837\u83b7\u5f97\u7684\uff0c\u5373\u72ec\u7acb\u540c\u5206\u5e03\uff08independent and identically distributed\uff0c\u7b80\u79f0\\(i,i,d\\).)\u4e00\u822c\u800c\u8a00\u8bad\u7ec3\u6837\u672c\u8d8a\u591a\uff0c\u6211\u4eec\u901a\u8fc7\u5b66\u4e60\u5f97\u5230\u7684\u6a21\u578b\u6cdb\u5316\u80fd\u529b\u8d8a\u5f3a\u3002</li> <li>\u5f52\u7eb3\u504f\u597d\uff1a\u76f8\u5f53\u4e8e\u627e\u5230\u4e00\u6761\u7a7f\u8fc7\u6240\u6709\u8bad\u7ec3\u6837\u672c\u70b9\u7684\u533a\u7ebf\u3002\u6211\u4eec\u66f4\u504f\u597d\u5149\u6ed1\u7684\u533a\u7ebf\u3002\u4f46\u6211\u4eec\u6839\u636e\u5df2\u6709\u7684\u6570\u636e\u5f97\u5230\u7684\u66f2\u7ebf\u5e76\u4e0d\u4e00\u5b9a\u5bf9\u6240\u6709\u7a7a\u95f4\u5185\u6240\u6709\u6837\u672c\u9002\u7528\uff0c\u6bd4\u5982\uff1a</li> </ol> <p>\u7b80\u79f0\uff1aNFL\uff08no free lunch theorem\uff09\u5b9a\u5f8b\u3002\u6240\u4ee5\u4e5f\u8bf4\u660e\u6211\u4eec\u8981\u9488\u5bf9\u5b66\u4e60\u7684\u95ee\u9898\u6765\u8c08\u8bba\u7b97\u6cd5\u7684\u4f18\u52a3</p>"},{"location":"AI/machine%20learning/introduction/#markov","title":"Markov","text":"<p>\u5bfc\u8bed</p> <p>\u9a6c\u5c14\u53ef\u592b\u94fe\u53ef\u8c13\u662f\u5728\u592a\u591a\u5730\u65b9\u51fa\u73b0\u4e86\uff0c\u7531\u4e8e\u5728b\u7ad9\u4e0a\u5237\u5230\u4e86\u4e00\u4e2a\u7b80\u660e\u6709\u8da3\u7684\u89c6\u9891\uff08\u4e0d\u51fa\u610f\u5916\u662fYouTube\u4e0a\u642c\u8fd0\u7684\uff0c\u89c6\u9891\u539f\u5730\u5740\uff09\u6545\u800c\u8bb0\u5f55\u4e0b\u6765\u3002</p>"},{"location":"AI/machine%20learning/method/","title":"Basic Method","text":"<p>\u6458\u8981</p> \u76ee\u5f55\u8d44\u6e90 <ul> <li>Basic Method<ul> <li>1. \u51b3\u7b56\u6811\u548c\u968f\u8bb0\u68ee\u6797<ul> <li>1.1.1 decision tree classification</li> <li>1.1.2 decision tree regression</li> <li>1.2.1 random forest classification</li> </ul> </li> <li>2. Markov<ul> <li>2.1.1 Markov Chain</li> <li>2.1.2 Hidden Markov Model</li> <li>2.1.3 HMM\uff1aForward Algorithm</li> <li>2.2.1 Markov Decision Process</li> <li>2.2.2 Q-Learning</li> <li>2.2.3 Deep Q-Learning</li> </ul> </li> <li>3. SVM</li> </ul> </li> </ul> <ul> <li>YouTube \u535a\u4e3b</li> <li>code</li> </ul>"},{"location":"AI/machine%20learning/method/#1","title":"1. \u51b3\u7b56\u6811\u548c\u968f\u8bb0\u68ee\u6797","text":""},{"location":"AI/machine%20learning/method/#111_decision_tree_classification","title":"1.1.1 decision tree classification","text":"<p>\u673a\u5668\u5b66\u4e60\u4e2d\u7684\u51b3\u7b56\u6811\u5c31\u597d\u4f3c\u641c\u7d22\u6811\u4e00\u6837\uff08\u8bf7\u4e0efds\u4e2d\u5b66\u5230\u7684\u51b3\u7b56\u6811\u533a\u5206\uff09\uff0c\u80fd\u591f\u5bf9\u975e\u7ebf\u6027\u5206\u5272\u7684\u76ee\u6807\u8fdb\u884c\u9010\u6b65\u62c6\u5206\u3002\u5982\u56fe\uff1a</p> <p>\u800c\u5f53\u6211\u4eec\u63a2\u8ba8\uff0c\\(\\text{which split is better?}\\) \u8fd9\u4e2a\u95ee\u9898\u7684\u65f6\u5019, \u6211\u4eec\u9700\u8981<code>information gain</code>\u548c <code>entropy</code>\u4e24\u4e2a\u6982\u5ff5</p> \\[ Entropy = \\sum{-p_i log(p_i)} \\\\ IG = E(parent) - \\sum w_i E(child) \\] <p>\u7531\u6b64\u6211\u4eec\u4fbf\u53ef\u4ee5\u8ba1\u7b97\u51fa\u54ea\u79cd\u5206\u7c7b\u65b9\u5f0f\u66f4\u597d\u3002\u6700\u540e\uff0c\u6211\u4eec\u786e\u4fdd\u6bcf\u4e2a\u53f6\u8282\u70b9\u90fd\u53ea\u8981\u5355\u4e00\u7c7b\u578b\u7684\u5143\u7d20\u3002</p> <p>\u4ee3\u7801\u5efa\u8bae\u9605\u8bfb\u6e90\u7801\u770b\u770b\uff01</p>"},{"location":"AI/machine%20learning/method/#112_decision_tree_regression","title":"1.1.2 decision tree regression","text":"<p>\u51b3\u7b56\u6811\u56de\u5f52\u7684\u539f\u7406\u4e0e\u5206\u7c7b\u7c7b\u4f3c\uff0c\u53ea\u662f\u6211\u4eec\u9700\u8981\u7528\u5230<code>MSE</code>\u6765\u8ba1\u7b97<code>IG</code>\uff0c\u5e76\u4e14\u6700\u540e\u7684\u53f6\u8282\u70b9\u4e0d\u518d\u662f\u5355\u4e00\u7c7b\u578b\u7684\u5143\u7d20\uff0c\u800c\u662f\u4e00\u4e2a\u5e73\u5747\u503c\u3002\uff08\u5c0f\u7ed3\uff1aregression\u66f4\u504f\u5411\u89e3\u51b3\u8fde\u7eed\u8fde\u7eed\u578b\u7684\u95ee\u9898\uff0c\u800cclassification\u66f4\u504f\u5411\u89e3\u51b3\u79bb\u6563\u578b\u7684\u95ee\u9898\uff09 $$ Var = \\frac{1}{n} \\sum (y_i - \\hat{y_i})^2 $$ \u4e3a\u4e86\u4f7f\u53f6\u8282\u70b9\u66f4\u7eaf\u51c0\uff0c\u6211\u4eec\u8981\u8ba9\u65b9\u5dee\u5c3d\u53ef\u80fd\u5c0f\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u627e\u5230\u4e00\u4e2a\u6700\u4f18\u7684\u5207\u5206\u70b9\uff0c\u4f7f\u5f97\u5207\u5206\u540e\u7684\u4e24\u4e2a\u5b50\u96c6\u7684\u65b9\u5dee\u4e4b\u548c\u6700\u5c0f\u3002\u4e0e\u4e0a\u9762IG\u7684\u8ba1\u7b97\u76f8\u4f3c\uff1a $$ Var_{target} = Var_{parent} - \\sum w_i Var_{child} $$</p> <p>\u8fd9\u4e2a\u95ee\u9898\u8fd8\u53ef\u4ee5\u901a\u8fc7\u904d\u5386\u6240\u6709\u7684\u7279\u5f81\u548c\u7279\u5f81\u503c\u6765\u89e3\u51b3\uff0c\u4f46\u662f\u8fd9\u6837\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u592a\u9ad8\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u968f\u673a\u9009\u53d6\u7279\u5f81\u548c\u7279\u5f81\u503c\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u8fd9\u5c31\u662f\u968f\u673a\u68ee\u6797\u7684\u539f\u7406\u3002</p>"},{"location":"AI/machine%20learning/method/#121_random_forest_classification","title":"1.2.1 random forest classification","text":"<p>\u968f\u673a\u68ee\u6797\u662f\u4e00\u79cd\u96c6\u6210\u5b66\u4e60\u65b9\u6cd5\uff0c\u5b83\u901a\u8fc7\u96c6\u6210\u591a\u4e2a\u51b3\u7b56\u6811\u6765\u89e3\u51b3\u5206\u7c7b\u95ee\u9898\u3002\u5b83\u7684\u539f\u7406\u662f\u901a\u8fc7\u968f\u673a\u9009\u53d6\u7279\u5f81\u548c\u7279\u5f81\u503c\uff08Bootstrapping &amp; Feature Selection\uff09\u6765\u6784\u5efa\u591a\u4e2a\u51b3\u7b56\u6811\uff0c\u7136\u540e\u901a\u8fc7\u6295\u7968\u7684\u65b9\u5f0f\u6765\u51b3\u5b9a\u6700\u7ec8\u7684\u5206\u7c7b\u7ed3\u679c\u3002\u8fd9\u6837\u505a\u7684\u597d\u5904\u662f\uff0c\u65e2\u80fd\u591f\u51cf\u5c11\u8fc7\u62df\u5408\uff0c\u53c8\u80fd\u591f\u51cf\u5c11\u8ba1\u7b97\u91cf\u3002</p> <p>\u4e24\u4e2a\u968f\u8bb0\u8fc7\u7a0b\uff1a 1. Bootstrapping\uff1a\u4fdd\u8bc1\u6bcf\u4e2a\u6811\u4f7f\u7528\u4e0d\u540c\u7684\u6570\u636e\uff0c\u8ba9\u6a21\u578b\u5bf9\u539f\u59cb\u6570\u636e\u7684\u5206\u5e03\u4e0d\u654f\u611f\u3002 2. Feature Selection\uff1a\u4fdd\u8bc1\u6bcf\u4e2a\u6811\u4f7f\u7528\u4e0d\u540c\u7684\u7279\u5f81\uff0c\u8ba9\u6a21\u578b\u5bf9\u7279\u5f81\u7684\u9009\u62e9\u4e0d\u654f\u611f\uff0c\u51cf\u5c11\u4e86\u4e0d\u540c\u6811\u4e4b\u95f4\u7684\u76f8\u5173\u6027\u3002</p> <p>\u4f2a\u4ee3\u7801\u5982\u4e0b\uff1a <pre><code>def fit(self, X, y):\n    for i in range(self.n_estimators):\n        X_subset, y_subset = self._get_random_subsets(X, y)\n        tree = DecisionTree()\n        tree.fit(X_subset, y_subset)\n        self.trees.append(tree)\n</code></pre></p> <p>\u5c0f\u7ed3</p> <ul> <li>\u7814\u7a76\u53d1\u73b0\uff0c\u7279\u5f81\u5b50\u96c6\u7684\u4e2a\u6570\u63a5\u8fd1\\(\\sqrt{m}\\)\u6216\u8005\\(log^{m}\\)\u65f6\uff0c\u6a21\u578b\u7684\u6027\u80fd\u6700\u597d(\u5176\u4e2d\uff0c\\(m\\)\u662f\u7279\u5f81\u7684\u4e2a\u6570)\u3002</li> <li>\u7528\u4e8eregression\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u5e73\u5747\u503c\u6765\u4ee3\u66ff\u6295\u7968\u7684\u65b9\u5f0f\u3002</li> </ul>"},{"location":"AI/machine%20learning/method/#2_markov","title":"2. Markov","text":""},{"location":"AI/machine%20learning/method/#211_markov_chain","title":"2.1.1 Markov Chain","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u7ecf\u5178\u7684\u6982\u7387\u63a8\u65ad\u6a21\u578b\uff0c\u5176\u4e2d\u89c2\u770bNormal Nerd\u7684\u89c6\u9891\u4f60\u5c06\u4f1a\u6709\u4e2a\u6e05\u6670\u7684\u8ba4\u77e5\u3002\u8fd9\u91cc\u6211\u53ea\u662f\u7b80\u5355\u7684\u8bb0\u5f55\u4e00\u4e0b\u3002</p> <p>\u9ad8\u9636\u8f6c\u79fb\u77e9\u9635\u548c\u7279\u5f81\u503c\u6c42\u7a33\u5b9a\u6982\u7387\u5206\u5e03\u7684\u65b9\u6cd5\u3002</p>"},{"location":"AI/machine%20learning/method/#212_hidden_markov_model","title":"2.1.2 Hidden Markov Model","text":""},{"location":"AI/machine%20learning/method/#213_hmmforward_algorithm","title":"2.1.3 HMM\uff1aForward Algorithm","text":""},{"location":"AI/machine%20learning/method/#221_markov_decision_process","title":"2.2.1 Markov Decision Process","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u7ecf\u5178\u7684\u5f3a\u5316\u5b66\u4e60\u6a21\u578b\u3002</p>"},{"location":"AI/machine%20learning/method/#222_q-learning","title":"2.2.2 Q-Learning","text":""},{"location":"AI/machine%20learning/method/#223_deep_q-learning","title":"2.2.3 Deep Q-Learning","text":""},{"location":"AI/machine%20learning/method/#3_svm","title":"3. SVM","text":"<p>SVM\u662f\u4e00\u79cd\u76d1\u7763\u5b66\u4e60\u7b97\u6cd5\uff0c\u5b83\u7684\u76ee\u6807\u662f\u627e\u5230\u4e00\u4e2a\u8d85\u5e73\u9762\uff0c\u5c06\u4e0d\u540c\u7c7b\u522b\u7684\u6570\u636e\u5206\u5f00\u3002</p>"},{"location":"English/","title":"English","text":"<p>\u8fd9\u91cc\u8bb0\u5f55\u4e0b\u6211\u4e2a\u4eba\u7684\u82f1\u8bed\u5b66\u4e60\u7684\u4e00\u4e9b\u8bb0\u5f55</p> <p>\u76ee\u5f55</p> <ul> <li> \u65b0\u5de5\u79d1\u5b66\u672f\u82f1\u8bed</li> </ul>"},{"location":"English/CET6/","title":"\u4e00\u4e9b\u4e9b\u5355\u8bcd","text":"\u5355\u8bcd \u4e2d\u6587 \u7528\u6cd5 vital \u91cd\u8981\u7684 cling clung, clung, clinging trim \u6709\u5f88\u591a\u610f\u601d\u548c\u7528\u6cd5 viel \u9762\u7eb1\u3001\u501f\u53e3 We lift the viel. \u6211\u4eec\u63ed\u5f00\u4e86\u771f\u76f8\u3002 applaud v.\u9f13\u638c\uff1b\u8d5e\u8d4f\uff1b\u79f0\u8d5e\uff1b\u8d5e\u8bb8 applaud sb. for sth. \u53ef\u4ee5\u5f15\u7533\u4e3a\u8ba4\u540c municipal \u5e02\u653f\u7684 a municipal government evolve \u8fdb\u5316 an evolving conversation. \u4e00\u4e2a\u4e0d\u65ad\u53d1\u5c55\u7684\u5bf9\u8bdd\u3002(\u8bf7\u4f1a\u610f) neglect \u5ffd\u89c6 neglect to do sth. involve \uff5cYou don't involve me in your plan. \u4f60\u4e0d\u628a\u6211\u7eb3\u5165\u4f60\u7684\u8ba1\u5212\u3002(\u4f1a\u610f\u5427) livid \u9752\u7070\u8272\u7684;\u6124\u6012\u7684 livid with anger retribution \u62a5\u5e94 errand boy \u5080\u5121 humility \u8c26\u900a good in sack \u5e8a\u4e0a\u529f\u592b\u597d be over the moon \u975e\u5e38\u9ad8\u5174 pledge v.\u4fdd\u8bc1\uff1bn.\u8a93\u8a00 vocally anti \u516c\u5f00\u53cd\u5bf9 carve out some room/time \u817e\u51fa\u4e00\u4e9b\u7a7a\u95f4/\u65f6\u95f4 plateaued \u74f6\u9888 foreplay \u524d\u620f sloppiness \u7c97\u5fc3 discretion \u8c28\u614e discreet adj.\u8c28\u614e\u7684 battle cry \u6218\u6597\u53e3\u53f7 Do the math \u7b97\u4e00\u4e0b legitimacy \u6743\u5a01 counting on \u4f9d\u9760 esteem n.\u5c0a\u91cd\uff1bv.\u5c0a\u91cd for the sake of conscience \u4e3a\u4e86\u826f\u5fc3 dismanting \u62c6\u9664 screw it up \u641e\u7838\u4e86 wheeler dealer \u6295\u673a\u5546\u4eba fulfill the destiny \u5b9e\u73b0\u547d\u8fd0 make it dignified \u4f7f\u4e4b\u4f53\u9762 trickle down \u6ef4\u6ef4\u7b54\u7b54 ludicrous adj.\u8352\u5510\u7684 rancid adj.\u8150\u81ed\u7684 prelude n.\u5e8f\u5e55,\u524d\u594f suffocating adj.\u4ee4\u4eba\u7a92\u606f\u7684 This is cut and dry. \u8fd9\u662f\u8001\u751f\u5e38\u8c08\u3002 intrube v.\u6253\u6270 imposition n.\u5f3a\u52a0,\u6b3a\u9a97,\u6253\u6270 discard v.\u4e22\u5f03 tension n.\u7d27\u5f20 water under the bridge \u8fc7\u53bb\u7684\u4e8b\u60c5 quarrelsome adj.\u597d\u4e89\u5435\u7684 diet n.\u996e\u98df for the time being \u6682\u65f6 flagship n.\u65d7\u8230 rub shoulders with \u4e0e...\u4ea4\u5f80 defy v.\u8fdd\u6297 caucus n.\u653f\u515a\u4f1a\u8bae testimony n.\u8bc1\u8bcd scapgoat n.\u66ff\u7f6a\u7f8a badger v.\u7ea0\u7f20"},{"location":"English/IELTS%20words/","title":"IELTS \u8bcd\u6c47\u771f\u7ecf","text":"<p>\u672c\u6587\u8bb0\u5f55\u81ea\u5df1\u80cc\u8bf5\u8fc7\u7a0b\u4e2d\u4e0d\u4f1a\u7684\u751f\u8bcd\uff0c\u4ee5\u53ca\u4e00\u4e9b\u9ad8\u9891\u8bcd\u6c47</p>"},{"location":"English/IELTS%20words/chapter1/","title":"\u81ea\u7136\u5730\u7406","text":"Word Pronunciation Meaning Example lithosphere /\u02c8l\u026a\u03b8\u0259\u02ccsf\u026a\u0259r/ n. \u5730\u7403\u5ca9\u77f3\u5708 The lithosphere is the outer part of the Earth, consisting of the crust and upper mantle. crust /kr\u028cst/ n. \u5730\u58f3 The crust on the snow was thick enough to walk on. mantle /\u02c8m\u00e6ntl/ n. \u5730\u5e54\uff0c\u6597\u7bf7\uff0c\u62ab\u98ce\uff1bvt. \u8986\u76d6 The mantle of the Earth is made up of solid rock. \uff5cmishap\uff5c/\u02c8m\u026ash\u00e6p/\uff5cn. \u4e0d\u5e78\u4e4b\u4e8b\uff0c\u707e\u7978\uff5cA mishap prevented him form attending the routine company meeting.\uff5c calamity /k\u0259\u02c8l\u00e6m\u0259ti/ n. \u707e\u96be\uff0c\u4e0d\u5e78 \u3010\u642d\u3011cause a calamity \u917f\u6210\u707e\u7978 \uff5cjeopardise\uff5c/\u02c8d\u0292ep\u0259da\u026az/\uff5cvt. \u5371\u53ca\uff0c\u5371\u5bb3\uff5c\u3010\u642d\u3011jeopardise one's life \u5371\u53ca\u67d0\u4eba\u7684\u751f\u547d\uff5c EI Nino /\u02cce\u026a \u02c8ni\u02d0njo\u028a/ \u5384\u5c14\u5c3c\u8bfa\u73b0\u8c61 The El Nino phenomenon is a natural event that occurs every few years. pebble /\u02c8pebl/ n. \u5c0f\u5706\u77f3\uff0c\u9e45\u5375\u77f3 The beach was covered with pebbles. magnet /\u02c8m\u00e6\u0261n\u026at/ n. \u78c1\u94c1\uff0c\u78c1\u77f3 The magnet attracted the iron filings. ore /\u0254\u02d0r/ n. \u77ff\u77f3 The mine produces copper(\u94dc) ore. mineral /\u02c8m\u026an\u0259r\u0259l/ n. \u77ff\u7269\uff0c\u77ff\u77f3 The mineral is found in the earth."},{"location":"English/research/","title":"\u65b0\u5de5\u79d1\u5b66\u672f\u82f1\u8bed","text":"<p>\u8fd9\u91cc\u662f\u6d59\u6c5f\u5927\u5b66\u65b0\u5de5\u79d1\u5b66\u672f\u82f1\u8bed\u8bfe\u7a0b\u3002\u8be5\u8bfe\u7a0b\u4e3a23\u5b66\u5e74\u7684\u65b0\u5f00\u8bfe\uff0c\u76ee\u7684\u65e8\u5728\u63d0\u9ad8\u5b66\u751f\u5728\u8bba\u6587\u76f8\u5173\u7684academic English\u5b66\u4e60\u3002</p>"},{"location":"English/research/note/","title":"Week1","text":""},{"location":"English/research/note/#_1","title":"\u8bcd\u6c47","text":"<ul> <li>IELTS(International English Language Testing System)</li> <li>TOEFL(Test of English as a Foreign Language)</li> <li>GRE(Graduate Record Examinations)</li> <li>CET(College English Test)</li> <li>interdiscipline(\u8de8\u5b66\u79d1)</li> <li>formative assessment(\u5f62\u6210\u6027\u8bc4\u4ef7) summative assessment(\u603b\u7ed3\u6027\u8bc4\u4ef7)</li> <li>literal comprehension(\u5b57\u9762\u7406\u89e3) figurative comprehension(\u6bd4\u55bb\u7406\u89e3)</li> <li>interactive alignment(\u4ea4\u4e92\u5bf9\u9f50)</li> <li>butter him up(\u5949\u627f\u4ed6) </li> <li>pedagogical(\u6559\u80b2\u7684)</li> <li>deworming(\u9a71\u866b) detrain(\u4e0b\u706b\u8f66) decelerate(\u51cf\u901f) defame(\u8bfd\u8c24)</li> <li>combat\uff08\u6218\u6597\uff09</li> <li>gemine\uff08\u53cc\u5b50\u5ea7\uff09</li> <li>fashion merchandising\uff08\u65f6\u88c5\u8425\u9500\uff09</li> <li>freshman\uff08\u5927\u4e00\u65b0\u751f\uff09sophomore\uff08\u5927\u4e8c\u5b66\u751f\uff09junior\uff08\u5927\u4e09\u5b66\u751f\uff09senior\uff08\u5927\u56db\u5b66\u751f\uff09</li> </ul>"},{"location":"English/research/note/#_2","title":"\u53e5\u5b50","text":"<p>\u65e0\u77e5\u662f\u6050\u60e7\u7684\u6839\u6e90\uff0c\u4e5f\u662f\u503e\u6155\u7684\u6839\u6e90\u3002</p> <p>ignorance is the mother of fear as well as the root of admiration.</p> <p>\u4ed6\u4eec\u6bcf\u5929\u957f\u65f6\u95f4\u5de5\u4f5c\uff0c\u5403\u7684\u662f\u7c97\u8336\u6de1\u996d\uff0c\u4f4f\u7684\u662f\u51b0\u51b7\u7684\u7a91\u6d1e\uff0c\u70b9\u7684\u662f\u6697\u6de1\u7684\u6cb9\u706f\u3002</p> <p>They work long hours every day, eat coarse food, live in cold caves, and light dim oil lamps.</p> <p>\u8d44\u91d1\u77ed\u7f3a\u53ef\u80fd\u4f1a\u4f7f\u6211\u4eec\u7684\u8ba1\u5212\u843d\u7a7a</p> <p>A shortage of funds may sink out plan.</p>"},{"location":"English/research/note/#_3","title":"\u52a8\u8bcd\u4e0e\u540d\u8bcd","text":"<p>Make your Language more formal.</p>"},{"location":"English/research/note/#what_is_communication","title":"what is communication?","text":"<ul> <li>communication is the process of exchanging information, ideas, thoughts, feelings, and emotions through speech, signals, writing, or behavior.</li> </ul>"},{"location":"English/research/note/#self-introduction_in_an_academic_scenario","title":"self-introduction in an academic scenario","text":"<ol> <li>Say your name</li> <li>where you are from</li> <li>education background</li> <li>talk about your research </li> <li>ask other person</li> </ol>"},{"location":"English/research/note/#week2","title":"Week2","text":"<p>\u672c\u5468\u5b66\u4e60\u5982\u4f55\u4f7f\u7528webofscience\u8fdb\u884c\u6587\u732e\u68c0\u7d22\uff0c\u5982\u4f55\u4f7f\u7528antconc\u8fdb\u884c\u6587\u672c\u5206\u6790\u3002</p>"},{"location":"English/research/note/#week3","title":"Week3","text":"<p>\u672c\u5468\u5b66\u4e60\u5982\u4f55\u9605\u8bfb\u5b66\u672f\u6587\u7ae0</p>"},{"location":"English/research/note/#_4","title":"\u8bcd\u6c47","text":"<ul> <li>skull\uff08\u5934\u9aa8\uff09</li> <li>context\uff08\u4e0a\u4e0b\u6587\uff09</li> <li>microphone\uff08\u9ea6\u514b\u98ce\uff09</li> <li>metabolism\uff08\u65b0\u9648\u4ee3\u8c22\uff09</li> <li>disrupt\uff08\u6253\u65ad\uff09(disrupt the body's metabolism)</li> <li>versatile\uff08\u591a\u624d\u591a\u827a\u7684\uff09</li> </ul>"},{"location":"English/research/note/#week4","title":"Week4","text":""},{"location":"English/research/note/#_5","title":"\u8bcd\u6c47","text":"\u5355\u8bcd \u91ca\u4e49"},{"location":"English/research/word/","title":"\u5b66\u672f\u8bcd\u6c47","text":""},{"location":"Language/Advanced%20C%20Language/","title":"Advanced C Language","text":""},{"location":"Language/Advanced%20C%20Language/#c_gccgdbmakefile","title":"C \u4e2d\u7684\u4e00\u4e9b\u5de5\u5177\uff08gcc\u3001gdb\u3001makefile\uff09","text":"<p>\u6211\u653e\u5728\u4e86\u8fd9\u91cc</p>"},{"location":"Language/Advanced%20C%20Language/#_1","title":"\u8ddf\u6c47\u7f16\u76f8\u5173","text":"<ol> <li>\u5185\u8054\u6c47\u7f16\uff08\u5982\u4f55\u6269\u5145\u51fd\u6570\u7684\u6808\u7684\u5927\u5c0f\uff09</li> </ol>"},{"location":"Language/Advanced%20C%20Language/#_2","title":"\u5de6\u53f3\u503c","text":""},{"location":"Language/Advanced%20C%20Language/#sort","title":"\u4e2d\u7684sort\u51fd\u6570 <pre><code>#include &lt;stdio.h&gt;\n#include &lt;stdlib.h&gt;\n\n// \u6bd4\u8f83\u51fd\u6570\nint compare(const void *a, const void *b) {\n    return (*(int*)a - *(int*)b);\n}\n\nint main() {\n    int arr[] = {3, 1, 4, 1, 5, 9, 2, 6, 5, 3, 5};\n    int n = sizeof(arr) / sizeof(arr[0]);\n\n    qsort(arr, n, sizeof(int), compare);\n\n    for (int i = 0; i &lt; n; i++) {\n        printf(\"%d \", arr[i]);\n    }\n\n    return 0;\n}\n</code></pre>","text":""},{"location":"Language/Advanced%20C%20Language/#_3","title":"++\u7684\u524d\u7f00\u548c\u540e\u7f00 <pre><code>C:\ncounter++;\n\nassembly:\n mov [addr], &amp;eax\n add $0x1, &amp;eax\n mov &amp;eax, [addr]\n</code></pre>","text":""},{"location":"Language/C%2B%2B/","title":"C++","text":""},{"location":"Language/C%2B%2B/#_1","title":"\u7b80\u4ecb","text":""},{"location":"Language/C%2B%2B/#_2","title":"\u5b66\u4e60\u8d44\u6e90","text":"<p>Hacking Cpp</p> <p>Cpp Guideline</p> <p>STL</p> <p>perf:\u6027\u80fd\u5206\u6790\u5de5\u5177</p>"},{"location":"Language/C%2B%2B/experience/","title":"cpp\u7f16\u7a0b\u7ecf\u9a8c","text":""},{"location":"Language/C%2B%2B/experience/#_1","title":"\u7ecf\u9a8c","text":"<ul> <li>\u4e3a\u4e86\u51fd\u6570\u6548\u7387\uff0c\u5c3d\u91cf\u4f7f\u7528\u5f15\u7528\u4f20\u9012\uff0c\u907f\u514d\u4f7f\u7528\u503c\u4f20\u9012\u3002\u53ef\u4ee5\u4f7f\u7528<code>const &amp;</code>\u6765\u907f\u514d\u4fee\u6539\u4f20\u5165\u7684\u53c2\u6570\u3002</li> </ul>"},{"location":"Language/C%2B%2B/stl/","title":"STL","text":""},{"location":"Language/C%2B%2B/stl/#string","title":"String","text":"<ol> <li>npos\u662f\u4e00\u4e2a\u5e38\u91cf\uff0c\u5b83\u7684\u503c\u662f-1\uff0c\u7528\u4e8e\u8868\u793a\u4e00\u4e2a\u4e0d\u5b58\u5728\u7684\u4f4d\u7f6e\u3002 <pre><code>std::string s = \"Hello, world!\";\nstd::cout &lt;&lt; s.find(\"world\") &lt;&lt; std::endl; // 7\nchar c = 'c';\n\nbool find = s.find(c) != std::string::npos;\n</code></pre></li> </ol>"},{"location":"Language/C%2B%2B/stl/#vector","title":"vector","text":"<ol> <li>\u83b7\u53d6\u5f53\u524d\u7d22\u5f15\u4e24\u79cd\u65b9\u5f0f\uff1a <pre><code>for (auto it = vec.begin(); it != vec.end(); ++it) {\n    std::cout &lt;&lt; \"Index: \" &lt;&lt; std::distance(vec.begin(), it) &lt;&lt; \", Value: \" &lt;&lt; *it &lt;&lt; std::endl;\n}\n</code></pre> <pre><code>size_t index = 0;\nfor (const auto&amp; element : vec) {\n    std::cout &lt;&lt; \"Index: \" &lt;&lt; index &lt;&lt; \", Value: \" &lt;&lt; element &lt;&lt; std::endl;\n    index++;\n}\n</code></pre></li> </ol>"},{"location":"Language/CUDA/","title":"Index","text":""},{"location":"Language/CUDA/#cuda","title":"CUDA","text":"<p>CUDA\u7f16\u7a0b\u7684\u7ecf\u9a8c\u4e3b\u8981\u6765\u81ea\u4e8e\u8d85\u7b97\u7684\u6bd4\u8d5b\u4ee5\u53ca\u81ea\u5df1\u7684\u5b66\u4e60\u3002  </p> <p>\u4f17\u6240\u5468\u77e5\uff0c\u8001\u9ec4\u7684N\u5361\u4ee5\u53ca\u57fa\u672c\u5784\u65ad\u4e86\u5f53\u4e0bAI\u5b66\u4e60\u6d6a\u6f6e\u3002\u4e2a\u4eba\u8ba4\u4e3a\u5982\u679c\u8bfb\u8005\u6709\u5fd7\u5411\u4e0d\u4ec5\u4ec5\u505apytorch\u7b49framework\u7684\u6389\u5305\u4fa0\uff0c\u5176\u5b9e\u5b66\u4e60CUDA\u662f\u4ef6\u633a\u4e0d\u9519\u7684\u4e8b\u60c5\u3002</p> <p>\u6458\u8981</p> \u4f20\u9001\u95e8 <ul> <li>Basic tutor</li> <li>Cutlass</li> <li>GEMM</li> </ul> \u8d44\u6e90 <ul> <li>Nvidia\u5b98\u7f51</li> <li>\u4e00\u4e2a\u975e\u5e38\u4e0d\u9519\u7684\u77e5\u4e4e\u7b14\u8bb0</li> </ul>"},{"location":"Language/CUDA/GEMM/","title":"GEMM","text":""},{"location":"Language/CUDA/Sparse%20Matrix/","title":"\u7a00\u758f\u77e9\u9635\u8ba1\u7b97","text":"<p>note</p> <p>\u7531\u4e8e\u770b\u5230\u4e00\u7bc7\u77e5\u4e4e\uff0c\u56e0\u800c\u60f3\u628a\u5b83\u8bb0\u5f55\u4e0b\u6765</p> <p>\u5982\u4f55\u5728GPU\u4e0a\u9ad8\u6548\u5730\u8fdb\u884c\u7a00\u758f\u77e9\u9635\u8fd0\u7b97\uff1f</p>"},{"location":"Language/CUDA/Sparse%20Matrix/#-_httpssafariethzchprojects_and_seminarsfall2021dokuphpidheterogeneous_systems","title":"- https://safari.ethz.ch/projects_and_seminars/fall2021/doku.php?id=heterogeneous_systems","text":""},{"location":"Language/CUDA/cutlass/","title":"Cutlass \u7814\u7a76","text":""},{"location":"Language/CUDA/cutlass/#cute","title":"CuTe","text":"<p>\u8fd9\u662f\u4e2a\u975e\u5e38\u6709\u8da3\u7684\u4e1c\u897f~</p>"},{"location":"Language/CUDA/note/","title":"CUDA\u5165\u95e8\u57fa\u7840","text":"<p>\u5bfc\u8bfb</p> <p>\u672c\u7ad9\u5c06\u8bb0\u5f55CUDA\u8bed\u6cd5\u7684\u57fa\u7840\u7528\u6cd5\uff0c\u4ee5\u53ca\u4e00\u5b9a\u7684\u4e3e\u4f8b\u3002\u5177\u4f53\u95ee\u9898\u7684\u7814\u7a76\u53ef\u4ee5\u89c1\u5176\u4ed6\u677f\u5757\u3002 [TOC]</p>"},{"location":"Language/CUDA/note/#1","title":"1. \u73af\u5883\u642d\u5efa","text":"<p>\u5f85\u642d\u5efa</p> linux <pre><code>sudo apt install nvidia-driver-515 # \u7248\u672c\u9700\u8981\u67e5\u8be2\nsudo apt install nvidia-cuda-toolkit\nsudo reboot\n</code></pre> windows <p>\u5176\u4e2d\u7f16\u8bd1\u65f6\u6211\u4eec\u91c7\u7528<code>nvcc</code>\u7f16\u8bd1\uff0c\u7528\u6cd5\u7c7b\u4f3cgcc/g++\u3002 <pre><code>nvcc main.cu -o outpot_filename\n</code></pre></p> <p>\u5982\u679c\u53ea\u662f\u7f16\u8bd1\u591a\u4e2a\u6e90\u6587\u4ef6\uff0c\u5373CUDA\u4ee3\u7801\u5199\u5230\u5176\u4ed6\u6e90\u6587\u4ef6\u91cc\u7136\u540einclude\u5230main\u6587\u4ef6\u65f6\uff0c\u9700\u8981\u6dfb\u52a0\u7f16\u8bd1\u9009\u9879 <pre><code>nvcc main.cu -o output_filname -x cu\n</code></pre></p> <p>Attention: \u6709\u65f6\u5019\u53ef\u80fd\u56e0\u4e3anvcc\u9ed8\u8ba4\u4f7f\u7528g++/gcc\u7f16\u8bd1\u5668\u4e0d\u517c\u5bb9\uff0c\u53ef\u4ee5\u5229\u7528<code>--compiler-bindir</code>\u8bbe\u5b9a</p>"},{"location":"Language/CUDA/note/#2_cuda","title":"2. CUDA \u57fa\u7840\u77e5\u8bc6","text":""},{"location":"Language/CUDA/note/#21","title":"2.1 \u7b80\u5355\u7684\u4ee3\u7801\u7ed3\u6784\u4ee5\u53ca\u793a\u4f8b","text":"<p>\u4f5c\u4e3a\u5f00\u59cb\uff0c\u8fd9\u91cc\u4ee5\u4e00\u4e2a\u7b80\u5355\u7684\u6570\u7ec4\u76f8\u52a0\u4e3a\u4f8b\u5b50\uff0c\u6765\u4ecb\u7ecdCUDA\u7684\u4ee3\u7801\u7ed3\u6784\uff0c\u7136\u540e\u518d\u9010\u4e2a\u672f\u8bed\u53ca\u8bed\u6cd5\u505a\u89e3\u91ca\u3002\u5728\u8fd9\u4e4b\u524d\uff0c\u5148\u9884\u89c8CPU\u7248\u7684\u6570\u7ec4\u76f8\u52a0\u4ee3\u7801\uff1a <pre><code>/*\nCPU\u7248\u4ee3\u7801\n*/\nvoid arrayAdd(float* dst, float* src1, float* src2, int n_data)\n{\n    for (int i = 0; i &lt; n_data; i++) \n    { \n        dst[i] = src1[i] + src2[i]; \n    }\n}\n</code></pre></p> <p>CUDA\u7684\u6574\u4f53\u4ee3\u7801\u6bd4CPU\u4ee3\u7801\u5197\u957f\u8bb8\u591a\uff0c\u4f46\u662f\u771f\u6b63\u53c2\u4e0e\u8ba1\u7b97\u7684\u53ea\u6709addKernel\u51fd\u6570\u53ca\u5176\u8c03\u7528\u3002\u4e00\u4e2a\u7b80\u5355\u4e14\u5b8c\u6574\u7684CUDA\u4ee3\u7801\u5206\u4e3a\uff1a</p> <p>\u8bbe\u7f6e\u53c2\u4e0e\u8fd0\u7b97\u7684GPU cudaSetDevice \u7533\u8bf7\u663e\u5b58 cudaMalloc \u590d\u5236\u6570\u636e cudaMemcpy\uff08\u53c2\u6570cudaMemcpyHostToDevice\uff09 \u8c03\u7528kernel\u51fd\u6570\u505a\u8fd0\u7b97 xxxKernel \u7b49\u5f85\u8fd0\u7b97\u7ed3\u675f\u540e\u540c\u6b65 cudaDeviceSynchronize\uff08kernel\u51fd\u6570\u7684\u8c03\u7528\u662f\u5f02\u6b65\u7684\uff09 \u590d\u5236\u8fd0\u7b97\u7ed3\u679c\u5230\u5230\u5185\u5b58 cudaMemcpy \uff08\u53c2\u6570cudaMemcpyDeviceToHost\uff09 \u91ca\u653e\u663e\u5b58 cudaFree <pre><code>/*\nCUDA\u7248\u4ee3\u7801\n*/\n#include &lt;iostream&gt;\n#include &lt;cuda.h&gt;\n\n__global__ void addKernel(float *dst, float *src1, float *src2, int n_data)\n{// kernel\u51fd\u6570\uff0c\u5177\u4f53\u8ba1\u7b97\u5b9e\u73b0\n    int i = threadIdx.x;\n    if (i &lt; n_data) { dst[i] = src1[i] + src2[i]; }\n}\n\nbool arrayAddCuda(float* dst, float* src1, float* src2, int n_data)\n{\n    cudaError_t cudaStatus = cudaSuccess;\n\n    // \u8bbe\u7f6e\u8fd0\u7b97GPU\n    cudaStatus = cudaSetDevice(0);\n    if (cudaStatus != cudaSuccess) \n    {\n        std::cout &lt;&lt; \"Unable to set CUDA device \" &lt;&lt; cuda_dev_id &lt;&lt; \", \" &lt;&lt; cudaGetErrorString(cudaStatus) &lt;&lt;\".\" &lt;&lt; std::endl;\n        cudaDeviceReset();\n        return false;\n    }\n\n    // \u7533\u8bf7\u663e\u5b58\n    float *_d_src1 = nullptr;\n    float *_d_src2 = nullptr;\n    float *_d_dst = nullptr;\n    cudaStatus = cudaMalloc((void**)&amp;_d_dst, n_data * sizeof(float));\n    if (cudaStatus != cudaSuccess) \n    {\n        std::cout &lt;&lt; \"Failed to allocate CUDA memory, \" &lt;&lt; cudaGetErrorString(cudaStatus) &lt;&lt; \".\" &lt;&lt; std::endl;\n        cudaDeviceReset();\n        return false;\n    }\n    cudaStatus = cudaMalloc((void**)&amp;_d_src1, n_data * sizeof(float));\n    if (cudaStatus != cudaSuccess) \n    {\n        std::cout &lt;&lt; \"Failed to allocate CUDA memory, \" &lt;&lt; cudaGetErrorString(cudaStatus) &lt;&lt; \".\" &lt;&lt; std::endl;\n        cudaDeviceReset();\n        return false;\n    }\n    cudaStatus = cudaMalloc((void**)&amp;_d_src2, n_data * sizeof(float));\n    if (cudaStatus != cudaSuccess) \n    {\n        std::cout &lt;&lt; \"Failed to allocate CUDA memory, \" &lt;&lt; cudaGetErrorString(cudaStatus) &lt;&lt; \".\" &lt;&lt; std::endl;\n        cudaDeviceReset();\n        return false;\n    }\n\n    // \u628a\u6570\u636e\u4ece\u5185\u5b58\u590d\u5236\u5230\u663e\u5b58\n    cudaStatus = cudaMemcpy(_d_src1, src1, n_data * sizeof(float), cudaMemcpyHostToDevice);\n    if (cudaStatus != cudaSuccess)\n    {\n        std::cout &lt;&lt; \"Failed to copy memory from host to device, \" &lt;&lt; cudaGetErrorString(cudaStatus) &lt;&lt; \".\" &lt;&lt; std::endl;\n        cudaDeviceReset();\n        return false;\n    }\n    cudaStatus = cudaMemcpy(_d_src2, src2, n_data * sizeof(float), cudaMemcpyHostToDevice);\n    if (cudaStatus != cudaSuccess) \n    {\n        std::cout &lt;&lt; \"Failed to copy memory from host to device, \" &lt;&lt; cudaGetErrorString(cudaStatus) &lt;&lt; \".\" &lt;&lt; std::endl;\n        cudaDeviceReset();\n        return false;\n    }\n\n    // \u8c03\u7528kernel\u51fd\u6570\u505a\u8fd0\u7b97\n    int block_dim = n_data;\n    int grid_dim = 1;\n    addKernel &lt;&lt; &lt;grid_dim, block_dim &gt;&gt; &gt;(_d_dst, _d_src1, _d_src2, n_data);\n\n    // \u7b49\u5f85GPU\u8fd0\u7b97\u7ed3\u675f\u540e\u540c\u6b65\n    cudaStatus = cudaDeviceSynchronize();\n    if (cudaStatus != cudaSuccess) \n    {\n        std::cout &lt;&lt; \"Failed to synchronized, \" &lt;&lt; cudaGetErrorString(cudaStatus) &lt;&lt; \".\" &lt;&lt; std::endl;\n        cudaDeviceReset();\n        return false;\n    }\n\n    // \u628a\u8fd0\u7b97\u7ed3\u679c\u4ece\u663e\u5b58\u590d\u5236\u5230\u5185\u5b58\n    cudaStatus = cudaMemcpy(dst, _d_dst, n_data * sizeof(float), cudaMemcpyDeviceToHost);\n    if (cudaStatus != cudaSuccess) \n    {\n        std::cout &lt;&lt; \"Failed to copy memory from host to device, \" &lt;&lt; cudaGetErrorString(cudaStatus) &lt;&lt; \".\" &lt;&lt; std::endl;\n        cudaDeviceReset();\n        return false;\n    }\n\n    //\u91ca\u653e\u663e\u5b58\n    cudaFree(_d_src1);\n    cudaFree(_d_src2);\n    cudaFree(_d_dst);\n    cudaDeviceReset();\n    return true;\n}\n</code></pre></p> <p>\u4ece\u4e0a\u8ff0\u4f8b\u5b50\u53ef\u4ee5\u53d1\u73b0\uff0cCUDA\u4ee3\u7801\u6709\u4e24\u4e2a\u90e8\u5206\u3002\u5176\u4e2darrayAddCuda\u79f0\u4e3a<code>host code</code>\uff0c\u65e2\u7531CPU\u6765\u6267\u884c\u3002\u800caddKernel\u4e3a<code>device code</code>\uff0c\u4e00\u822c\u90fd\u4f1a\u4ee5xxxkernel\u7684\u65b9\u5f0f\u547d\u540d\uff0c\u7531GPU\u8d1f\u8d23\u6267\u884c\u3002\u9664\u4e86\u62ec\u53f7\u91cc\u7684\u6570\u7ec4\u4f5c\u4e3a\u53c2\u6570\uff0ckernel\u51fd\u6570\u7684\u8c03\u7528\u8fd8\u5e26\u4e86\u4e09\u91cd\u5c16\u62ec\u53f7<code>&lt;&lt;&lt;grid_dim, block_dim&gt;&gt;&gt;</code>\u3002\u5c16\u62ec\u53f7\u91cc\u8fb9\u7684\u4e24\u4e2a\u53c2\u6570\u58f0\u660e\u4e86GPU\u91cc\u53c2\u4e0e\u8ba1\u7b97\u7684\u7ebf\u7a0b\u6570\u3002\u800ckernel\u51fd\u6570\u91cc\u8fb9\u5c31\u8d1f\u8d23\u5b9a\u4e49\u6bcf\u4e2a\u7ebf\u7a0b\u5982\u4f55\u5b8c\u6210\u8fd0\u7b97\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u901a\u8fc7\u7ebf\u7a0bID threadIdx.x \u6765\u51b3\u5b9a\u6bcf\u4e2a\u5176\u6240\u8d1f\u8d23\u7684\u6570\u7ec4\u7684\u4e0b\u6807\u3002</p>"},{"location":"Language/CUDA/note/#22_cuda","title":"2.2 CUDA\u672f\u8bed\u53ca\u8bed\u6cd5","text":""},{"location":"Language/CUDA/note/#221_cudathreadblockgrid","title":"2.2.1 CUDA\u7ebf\u7a0b\u5206\u914d\uff08Thread\uff0cBlock\uff0cGrid\uff09","text":"<p>\u5229\u7528GPU\u505a\u5e76\u884c\u8fd0\u7b97\u7684\u6838\u5fc3\u662f\u628a\u4efb\u52a1\u6d3e\u53d1\u5230\u6bcf\u4e2a\u7ebf\u7a0b\u3002\u6211\u4eec\u9700\u8981\u6839\u636e\u4efb\u52a1\u6765\u786e\u5b9a\u5e76\u884c\u7684\u7ebf\u7a0b\u6570\u53ca\u4efb\u52a1\u5206\u914d\u7ec6\u8282\u3002\u5728\u6b64\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u7406\u89e3CUDA\u91cc\u7684Thread\uff0cBlock\u548cGrid\u8fd9\u4e09\u4e2a\u6982\u5ff5\u3002\u8fd9\u4e09\u4e2a\u6982\u5ff5\u90fd\u662f\u7f16\u7a0b\u5c42\u9762\u4e0a\u7684\u62bd\u8c61\uff0c\u548c\u786c\u4ef6\u4e0a\u7684\u8054\u7cfb\u4f1a\u5728\u4f18\u5316\u90e8\u5206\u8865\u5145\u3002</p> <p></p> <ul> <li> <p>Thread\u2014\u2014\u6700\u5c0f\u7684\u8fd0\u7b97\u5355\u5143\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3aCPU\u5e76\u884c\u8fd0\u7b97\u7684\u7ebf\u7a0b\u3002\u8d1f\u8d23\u8fd0\u884ckernel\u51fd\u6570\u91cc\u8fb9\u6240\u5b9a\u4e49\u7684\u8fd0\u7b97\u3002</p> </li> <li> <p>Block\u2014\u2014\u7531\u591a\u4e2aThread\u6240\u7ec4\u6210\u7684\u8fd0\u7b97\u5355\u5143\u3002\u6bcf\u4e2ablock\u53ea\u80fd\u7531GPU\u7684\u5355\u4e2a\u7531\u6d41\u5904\u7406\u5668\uff08Streaming Multiprocessor, SM\uff09\u6267\u884c\u3002\u5355\u4e2aBlock\u6700\u5927\u652f\u63011024\u4e2aThread\u3002\u540c\u4e00\u4e2aBlock\u7684Thread\u53ef\u4ee5\u901a\u8fc7\u5171\u4eab\u5185\u5b58\uff08shared memory\uff09\u6c9f\u901a\u53ca\u4ea4\u6362\u6570\u636e\u3002</p> </li> <li> <p>Grid\u2014\u2014\u7531\u591a\u4e2aBlock\u6240\u7ec4\u6210\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2aGPU\u3002\u4e00\u4e2aGrid\u53ef\u4ee5\u6709\u6700\u591a655366553665536\u4e2aBlock\u3002</p> </li> </ul> <p>\u4e0a\u9762\u4e09\u4e2a\u6982\u5ff5\u53ef\u4ee5\u7b80\u5355\u6982\u62ec\u4e3a\uff1a\u6574\u4e2aGrid\uff08GPU\uff09\u7531\u8bb8\u591a\u7684Block\u7ec4\u6210\uff0c\u800cBlock\u91cc\u8fb9\u53c8\u6709\u8bb8\u591a\u7684Thread\uff0c\u6bcf\u4e2aThread\u90fd\u4f1a\u6267\u884c\u6211\u4eec\u6240\u5b9a\u4e49\u7684kernel\u51fd\u6570\u3002kernel\u51fd\u6570\u7684\u8c03\u7528\u662f\u901a\u8fc7\u5c16\u62ec\u53f7\u91cc\u7684\u4e24\u4e2a\u53c2\u6570&lt;&lt;&gt;&gt;\u6765\u8bbe\u7f6e\u53c2\u4e0e\u8fd0\u7b97\u7684\u7ebf\u7a0b\u6570\u3002\u7b2c\u4e00\u4e2a\u53c2\u6570\u4e3aBlock\u7684\u6570\u91cf\uff08\u4e00\u822c\u547d\u540d\u7528num_block, grid_size\u6216grid_dim\uff09\uff0c\u7b2c\u4e8c\u4e2a\u53c2\u6570\u4e3aThread\u7684\u6570\u91cf\uff08\u4e00\u822c\u547d\u540d\u7528num_thread, block_size\u6216block_dim\uff09\u3002\u7406\u8bba\u4e0a\uff0c\u6bcf\u4e2aGrid\u662f\u4e09\u7ef4\u7684Block\u6240\u7ec4\u6210\uff0c\u6bcf\u4e2aBlock\u4e5f\u662f\u4e09\u7ef4\u7684Thread\u6240\u7ec4\u6210\uff08\u56fe8\uff09\uff0c\u56e0\u6b64\u6700\u5927\u53ef\u4ee5\u5728\u516d\u4e2a\u62bd\u8c61\u7ef4\u5ea6\u4e0a\u505a\u5e76\u884c\u3002 <p></p> <p>\u56fe\u6e90 http://harmanani.github.io/classes/csc447/Notes/Lecture15.pdf</p> <p>\u4f46\u662f\u5b9e\u9645\u5e94\u7528\u4e2d\u4e0d\u4e00\u5b9a\u9700\u8981\u7528\u5230\u516d\u7ef4\uff0c\u56e0\u6b64\u53ef\u4ee5\u8ba9\u5176\u4ed6\u7ef4\u5ea6\u7684\u5927\u5c0f\u53d6\u4e3a1\uff0c\u6bd4\u5982\u4e00\u7ef4\u6570\u7ec4\u76f8\u52a0\u7684\u4f8b\u5b50\u3002\u53c2\u6570grid_dim\u548cblock_dim\u53ef\u4ee5\u662fCUDA\u5b9a\u4e49\u7684dim3\u7ed3\u6784\uff0c\u4e5f\u53ef\u4ee5\u662f\u6574\u6570\u578bint\u3002 <pre><code>dim3 block_dim(5,4,3); // x=5, y=4, z=3\ndim3 block_dim(5,4);   // x=5, y=4, z=1\ndim3 block_dim(5);     // x=5, y=1, z=1\nint block_dim = 5;     // x=5, y=1, z=1\n</code></pre></p> <p>\u786e\u5b9a\u4e86\u9700\u8981\u8c03\u7528\u7684\u7ebf\u7a0b\u6570\u540e\uff0c\u63a5\u4e0b\u6765\u5c31\u662f\u4efb\u52a1\u5206\u914d\u7684\u7ec6\u8282\u3002\u5728kernel\u51fd\u6570\u91cc\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u6709\u5bf9\u5e94\u7684threadIdx.x\u3001threadIdx.y\u3001threadIdx.z\u3001blockIdx.x\u3001blockIdx.y\u3001blockIdx.z\u516d\u4e2a\u53d8\u91cf\u6765\u552f\u4e00\u786e\u5b9a\u3002\u540c\u65f6Grid\u548cBlock\u7684\u5927\u5c0f\u4e5f\u53ef\u4ee5\u901a\u8fc7blockDim.x\u3001blockDim.y\u3001blockDim.z\u3001gridDim.x\u3001gridDim.y\u3001gridDim.z\u6765\u83b7\u53d6\u3002</p> <p>\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5f88\u5c11\u7528\u52306\u7ef4\u5ea6\u3002\u4ee5\u4e0a\u8ff0\u6570\u7ec4\u76f8\u52a0\u7684\u4f8b\u5b50\uff0c\u6211\u4eec\u53ea\u7528\u4e86\u4e00\u7ef4\u7684Block\uff0c\u5373\u53ea\u6709threadIdx.x\u662f\u6709\u610f\u4e49\u7684\uff0c\u5e76\u4e14\u7528\u4e8e\u5bf9\u5e94\u6570\u7ec4\u4e2d\u4e2a\u522b\u5143\u7d20\u7684\u4f4d\u7f6e\u3002\u6b64\u5916\uff0c\u8fd9\u6bb5\u4ee3\u7801\u8fd8\u6709\u4e00\u4e2a\u95ee\u9898\u3002\u7531\u4e8e\u5355\u4e2aBlock\u6700\u591a\u53ea\u80fd\u67091024\u4e2athread\uff0c\u5f53\u6570\u7ec4\u5927\u4e8e1024\u65f6\u4f1a\u7cfb\u7edf\u4f1a\u62a5\u9519\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u589e\u52a0\u4e00\u7ef4\u7684grid\u6765\u5904\u7406\u5927\u4e8e1024\u7684\u6570\u7ec4\u3002\u4e3a\u4e86\u4f7f\u6bcf\u4e2aThread\u5355\u72ec\u5bf9\u5e94\u5230\u6570\u7ec4\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u6211\u4eec\u9700\u8981threadIdx.x\u3001blockIdx.x\u53cablockDim.x\u3002 </p> <p>\u4e00\u7ef4\u6570\u7ec4\u5143\u7d20\u4e0b\u6807\u6240\u5bf9\u5e94\u7684threadIdx.x\u548cblockIdx.x\u3002 <pre><code>__global__ void addKernel(float *dst, float *src1, float *src2, int n_data)\n{// kernel\u51fd\u6570\uff0c\u5177\u4f53\u8ba1\u7b97\u5b9e\u73b0\n    int i = threadIdx.x + blockDim.x*blockIdx.x;\n    if (i &lt; n_data) { dst[i] = src1[i] + src2[i]; }\n}\n\nbool arrayAddCuda(float* dst, float* src1, float* src2, int n_data)\n{\n    ...\n\n    // \u8c03\u7528kernel\u51fd\u6570\u505a\u8fd0\u7b97\n    int max_block_dim = 1024; \n    int block_dim = max_block_dim ;\n    int grid_dim = n_data/1024 + (int)((n_data%max_block_dim )&gt;0);\n    addKernel &lt;&lt; &lt;grid_dim, block_dim &gt;&gt; &gt;(_d_dst, _d_src1, _d_src2, n_data);\n\n    ...\n}\n</code></pre></p> <p>\u5982\u679c\u662f\u5904\u7406\u66f4\u9ad8\u7ef4\u7684\u6570\u636e\uff0c\u5e76\u4e14\u9700\u8981\u6620\u5c04\u5230\u4e00\u7ef4\u6570\u7ec4\uff0c\u53ef\u4ee5\u53c2\u8003\uff1aCUDA Indexing Cheatsheet</p>"},{"location":"Language/CUDA/note/#222_cuda","title":"2.2.2 CUDA\u51fd\u6570\u53ca\u53d8\u91cf\u4fee\u9970\u8bed\u6cd5","text":"<p>CUDA\u51fd\u6570\u7684\u4fee\u9970\uff1a</p> <ul> <li><code>__global__</code> \u58f0\u660ekernel\u51fd\u6570\uff0c\u7531host\uff08CPU\uff09\u8c03\u7528\uff0cdevice\uff08GPU\uff09\u6267\u884c\u3002</li> <li><code>__device__</code> \u58f0\u660edevice\u51fd\u6570\uff0c\u7531device\u8c03\u7528\uff0cdevice\u6267\u884c\u3002</li> <li><code>__host__</code> \u58f0\u660ehost\u51fd\u6570\uff0c\u7531host\u8c03\u7528\uff0chost\u6267\u884c\u3002</li> <li><code>__device____host__</code> \u7531device\u8c03\u7528\uff0cdevice\u6267\u884c\uff1b\u6216\u8005\u7531host\u8c03\u7528\uff0chost\u6267\u884c\uff0c\u4e3b\u8981\u7528\u4e8e\u6d4b\u8bd5\u548cdebug\u3002</li> </ul> <p>CUDA\u53d8\u91cf\u7684\u4fee\u9970\uff1a</p> <ul> <li><code>__device__</code> \u58f0\u660e\u53d8\u91cf\uff0c\u5b58\u5728global memory\u3002</li> <li><code>__shared__</code> \u58f0\u660e\u5171\u4eab\u53d8\u91cf\uff0c\u5b58\u5728shared memory\uff0c\u540c\u4e00\u4e2abblock\u91cc\u7684thread\u90fd\u53ef\u662f\u6709\u610f\u4e49\u7684\uff0c\u5e76\u4e14\u7528\u4e8e\u5bf9\u5e94\u6570\u7ec4\u4e2d\u4e2a\u522b\u5143\u7d20\u7684\u4f4d\u7f6e\u3002\u6b64\u5916\uff0c\u8fd9\u6bb5\u4ee3\u7801\u8fd8\u6709\u4e00\u4e2a\u95ee\u9898\u3002\u7531\u4e8e\u5355\u4e2ablock\u6700\u591a\u53ea\u80fd\u67091024\u4e2aThread\uff0c\u5f53\u6570\u7ec4\u5927\u4e8e1024\u65f6\u4f1a\u7cfb\u7edf\u4f1a\u62a5\u9519\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u589e\u52a0\u4e00\u7ef4\u7684Grid\u6765\u5904\u7406\u5927\u4e8e1024\u7684\u6570\u7ec4\u3002\u4e3a\u4e86\u4f7f\u6bcf\u4e2aThread\u5355\u72ec\u5bf9\u5e94\u5230\u6570\u7ec4\u7684\u6bcf\u4e2a\u5143\u7d20\uff0c\u6211\u4eec\u9700\u8981</li> <li><code>__constant__</code> \u58f0\u660e\u5e38\u91cf\uff0c \u5b58\u5728global memory\u3002</li> </ul>"},{"location":"Language/CUDA/note/#23_cuda","title":"2.3 CUDA\u7ebf\u7a0b\u7684\u5e76\u884c\u53ca\u540c\u6b65","text":"<p>\u5f53\u6267\u884c\u4e00\u4e2aCUDA\u7a0b\u5e8f\u65f6\uff0c\u5e76\u975e\u6240\u6709\u7684thread\u90fd\u662f\u540c\u65f6\u5e76\u884c\u7684\u3002\u7406\u8bba\u4e0a\uff0c\u540c\u4e00\u4e2ablock\u91cc\u7684\u6240\u6709thread\u662f\u5e76\u884c\u7684\u3002\u800c\u4e0d\u540cblock\u4e4b\u95f4\u7684\u5e76\u884c\u53d6\u51b3\u4e8e\u786c\u4ef6\u7684\u53c2\u6570\uff0c\u5373\u6d41\u5904\u7406\u5668\uff08SM\uff09\u7684\u6570\u91cf\u51b3\u5b9a\u3002\u56fe10\u663e\u793a\u4e00\u6bb5\u9700\u89818\u4e2ablock\u7684CUDA\u4ee3\u7801\uff0c\u662f\u5982\u4f55\u7531\u4e24\u4e2a\u4e0d\u540cGPU\uff082vs4\u6d41\u5904\u7406\u5668\uff09\u6240\u6267\u884c\u7684\u3002\u5de6\u8fb9\u7684GPU\u53ea\u67092\u4e2a\u6d41\u5904\u7406\u5668\uff0c\u6700\u591a\u53ea\u80fd\u67092\u4e2ablock\u540c\u65f6\u8fd0\u884c\uff1b\u800c\u53f3\u8fb9GPU\u67094\u4e2a\u6d41\u5904\u7406\u5668\uff0c\u6700\u591a\u80fd\u67094\u4e2ablock\u540c\u65f6\u8fd0\u884c\u3002 </p> <p>\u56fe\u6e90 http://harmanani.github.io/classes/csc447/Notes/Lecture15.pdf</p> <p>\u53ea\u6709\u540c\u4e00\u4e2ablock\u91cc\u7684thread\u624d\u80fd\u540c\u6b65\u3002\u5982\u679c\u4efb\u52a1\u9700\u8981\u4e0d\u540cthread\u4e4b\u95f4\u7684\u534f\u540c\uff0c\u9700\u8981\u5728kernel\u51fd\u6570\u91cc\u5bf9\u5e94\u4f4d\u7f6e\u52a0__syncthreads()\u3002\u8fd9\u91cc\u4ee5\u4e00\u4e2a\u56fe\u50cf\u7684\u5de6\u53f3\u98a0\u5012\u4e3a\u4f8b\u5b50\u3002\u6bcf\u4e2ablock\u8d1f\u8d23\u4e00\u884c\uff0c\u6bcf\u4e2athread\u8d1f\u8d23\u4e00\u4e2a\u50cf\u7d20\u70b9\u3002\u8be5thread\u8d1f\u8d23\u8bfb\u53d6\u5bf9\u9762\u50cf\u7d20\u70b9\u7684\u503ca\uff0c\u7136\u540e\u628a\u81ea\u5df1\u50cf\u7d20\u70b9\u7684\u503c\u6539\u6210a\u3002\u5982\u679c\u6ca1\u6709__syncthreads()\uff0c\u67d0\u4e2athread\u53ef\u80fd\u8fd8\u6765\u4e0d\u53ca\u8bfb\u53d6\u5bf9\u9762\u7684\u503c\u5c31\u88ab\u4fee\u6539\u4e86\uff0c\u5176\u7ed3\u679c\u5982\u56fe\u6240\u793a\u3002</p> <p><pre><code>__global__ void flipHorizontalKernel(float* src_dst, int nx, int ny)\n{\n    int i = blockIdx.x;\n    int j = threadIdx.x;\n    int loc1 = i*nx + j;\n    int loc2 = i*nx + (nx - 1 - j);\n    float tmp = src_dst[loc2];\n    __syncthreads();\n    src_dst[loc1] = tmp;\n}\n\nbool flipHorizontalCuda(float* src_dst, int nx, int ny)\n{\n    ...\n\n    int block_dim = nx;\n    int grid_dim = ny;\n    // \u8c03\u7528kernel\u51fd\u6570\u505a\u8fd0\u7b97\n    flipHorizontalKernel &lt;&lt; &lt;grid_dim, block_dim &gt;&gt; &gt;(_d_src_dst, nx, ny)\n\n    ...\n}\n</code></pre> </p>"},{"location":"Language/CUDA/note/#3","title":"3. \u4f18\u5316","text":""},{"location":"Language/CUDA/note/#31","title":"3.1 \u67b6\u6784\u4f18\u5316","text":""},{"location":"Language/CUDA/note/#32","title":"3.2 \u5e76\u884c\u4f18\u5316","text":""},{"location":"Language/CUDA/note/#33","title":"3.3 \u8bbf\u5b58\u4f18\u5316","text":""},{"location":"Language/CUDA/note/#34_cuda_stream","title":"3.4 CUDA stream","text":""},{"location":"Language/Python/","title":"Python","text":"<p>python\u53ef\u8c13\u662f\u73b0\u5728\u9700\u8981\u5927\u5bb6\u4eba\u624b\u638c\u63e1\u7684\u4e00\u4e2a\u7f16\u7a0b\u8bed\u8a00\u4e86\uff0c\u51c6\u786e\u6765\u8bb2\u6211\u4eec\u628a\u5b83\u66f4\u504f\u5411\u5b9a\u4e49\u4e3a\u89e3\u91ca\u578b\u8bed\u8a00\u3002\uff08\u4ea4\u4e92\u6027\u66f4\u5f3a\u4f46\u540c\u65f6\u8fd0\u884c\u901f\u5ea6\u8f83\u6162\uff09</p> <p>\u5f53\u7136python\u6700\u5927\u7684\u597d\u5904\u5728\u4e8e\u5176\u8bed\u6cd5\u7684\u6613\u61c2\u6027\u4ee5\u53ca\u4e30\u5bcc\u7684\u201c\u5305\u201d\uff01\uff01\uff01</p> <p>\u6211\u4f1a\u5c06\u6211\u4f7f\u7528\u7684\u4e00\u4e9b\u7ecf\u9a8c\u8bb0\u5f55\u5728\u4e0b\u65b9\u3002</p> <p>\u8d44\u6e90</p> \u5b66\u4e60\u8d44\u6e90 <ol> <li>\u4e00\u4e2a\u7b80\u660e\u7684\u4ecec\u5b66\u4e60python\u8bed\u6cd5\u7684\u89c6\u9891</li> </ol> \u5b89\u88c5 <p>\u5f3a\u70c8\u5efa\u8bae\u5927\u5bb6\u4ece\u4e00\u5f00\u59cb\u4fbf\u4f7f\u7528conda\uff08\u6700\u597d\u662fminiconda\uff09\u6765\u7ba1\u7406\u73af\u5883 \uff08ZJUers\u8bf7\u4e0d\u8981\u5fd8\u8bb0\u4ecemirror\u4e0a\u6362\u6e90\u54df\uff09 \uff08windows\u4e0b\u7684\u7528\u6237\u4e5f\u4e0d\u5fc5\u90a3\u4e48\u9ebb\u70e6\uff0c\u73b0\u5728\u53ef\u4ee5\u901a\u8fc7winget\u6765\u5feb\u901f\u4e0b\u8f7d\u5566\uff09</p>"},{"location":"Language/Python/enviroment/","title":"python\u73af\u5883\u7ba1\u7406","text":"<p>\u4e2a\u4eba\u5efa\u8bae\u53ef\u4ee5\u76f4\u63a5\u4f7f\u7528conda\u4e0a\u624bpython\u3002</p>"},{"location":"Language/Python/enviroment/#pip","title":"pip","text":"<ol> <li>\u5982\u679c\u9700\u8981\u66f4\u65b0\u6240\u6709pip\u7684\u5305\u53ef\u4ee5\u4f7f\u7528<code>pip3 list --outdated --format=freeze | grep -v '^\\-e' | cut -d = -f 1 | xargs -n1 pip3 install -U</code></li> <li>\u60f3\u8981\u5bfc\u51fa\u6240\u6709pip\u8d44\u6e90\u5230requirement.txt\u4e2d\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528<code>pip freeze &gt; requirements.txt</code></li> </ol>"},{"location":"Language/Python/enviroment/#conda","title":"conda","text":"<ol> <li><code>conda install --yes --file requirements.txt</code> \u53ef\u4ee5\u5b89\u88c5\u6240\u9700\u8981\u7684\u5305</li> </ol>"},{"location":"Language/Python/enviroment/#venv","title":"venv","text":""},{"location":"Language/Python/fastpython/","title":"Fastpython","text":""},{"location":"Language/Python/fastpython/#python","title":"Python \u5feb\u901f\u4e0a\u624b","text":"<p>\u672c\u7ae0\u8282\u5c06\u8bb0\u5f55python\u7684\u57fa\u672c\u8bed\u6cd5\uff0c\u901a\u8fc7\u9605\u8bfb\uff0c\u4f60\u53ef\u4ee5\u5feb\u901f\u4e0a\u624b\u8bfb\u61c2\u7b80\u5355\u4ee3\u7801\u3002\uff08\u5f53\u7136gpt\u4e5f\u662f\u5927\u5bb6\u7684\u597d\u5e2e\u624b\uff09</p> <p>\u4f46\u975e\u5e38\u5efa\u8bae\u5927\u5bb6\u5728\u6709\u7cbe\u529b\u65f6\u53ef\u4ee5\u4f53\u7cfb\u5316\u7684\u5b66\u4e60\u5b66\u4e60\u8fd9\u95e8\u8bed\u8a00</p>"},{"location":"Language/Python/fastpython/#_1","title":"\u5224\u65ad\u8bed\u53e5","text":"<p>and \u6216\u8005 or\uff0c\u540e\u9762\u7528\u5192\u53f7\uff0ctab\u5206\u5c42\uff0c<code>elif</code></p> <pre><code>if course_num == 50:\n    # code block1\nelif not course_num == 51:\n    # code block2\n</code></pre> <p>we dont have to use the exclamation point symbol\uff01, the vertical bar|, ampersand&amp;</p>"},{"location":"Language/Python/fastpython/#bool","title":"bool\u53d8\u91cf\uff08\u4e8c\u5143\u5224\u65ad\u7b26\uff09","text":"<pre><code>letter = True if input().isalpha() else False\n</code></pre>"},{"location":"Language/Python/fastpython/#loop","title":"Loop\u5faa\u73af","text":"<pre><code>counter = 0\nwhile counter &lt; 100:\n    print(counter)\n    counter += 1\n\nfor x in range(100):\n    print(x)\nfor x in range(0, 100, 2)\n    print(x)\n# not include 100\n</code></pre>"},{"location":"Language/Python/fastpython/#loopredux","title":"Loop(redux)","text":"<pre><code>pizza = {\n    \"cheese\": 9,\n    \"pepperoni\": 10,\n    \"vegetable\": 11,\n    \"chicken\": 12\n}\n\nfor pie in pizza:\n    print(pie)\n\nfor pie,price in pizza.items():\n    print(price)\n    print(\"A whole {} pizza costs ${}\".format(pie,price))\n    print(\"A whole\"+ pie + \"pizza costs $\" + str(price))\n    print(\"A whole %s pizza costs $%2d\" % (pie,price)) # deprecated in python3\n</code></pre>"},{"location":"Language/Python/fastpython/#list","title":"List\u5217\u8868","text":"<pre><code>nums = [x for x in range (10)]\nnums.append(11)\nnums.insert(10,11)\nnums[len(nums):] = [11]\n</code></pre>"},{"location":"Language/Python/fastpython/#tuple","title":"Tuple\u5143\u7ec4","text":"<pre><code>for prez,year in presidents:\n    print(\"In {1}, {0} took office\".format(prez,year))\n</code></pre>"},{"location":"Language/Python/fastpython/#dictionary","title":"Dictionary","text":""},{"location":"Language/Python/fastpython/#function","title":"Function","text":"<pre><code>def square(x):\n    return x * x || return x**2\n</code></pre>"},{"location":"Language/Python/fastpython/#object","title":"Object","text":"<p>It's similar to c++.</p> <pre><code>class Student():\n\n    def __init__(self, name, id):\n        self.name = name\n        self.id = id\n\n    def change_ID(self, id):\n        self.id = id\n\n    def print(self):\n        print(\"{} - {}\".format(self.name, self.id))\n\njane = Student(\"Jane\", 10)\njane.print()\njane.change_ID(11)\njane.print()\n</code></pre>"},{"location":"Language/Python/fastpython/#data_structure","title":"Data structure","text":"<p>runoob</p> <p>\u904d\u5386\u6280\u5de7\u7684\u51fd\u6570\uff1aitems\u3001enumerate\u3001zip\u3001reverse\u3001sorted</p>"},{"location":"Language/Python/pytorch/","title":"For a full pytorch tutorial, see notebook","text":""},{"location":"Language/Python/pytorch/#detach","title":"Detach","text":"<ul> <li><code>t.detach()</code> return a tensor which is detached from the computation graph. However, this tensor is a reference to the original tensor <code>t</code>.</li> <li>just calling <code>detach()</code> won't destroy the computational graph.</li> </ul> <pre><code>x = torch.tensor([1.,2.],requires_grad=True)\nxfang = x * x\nxlifang = x * xfang\nxfang_detached = xfang.detach()\nloss = xlifang.sum()\nloss.backward()\nprint(x.grad) # Not None\n</code></pre>"},{"location":"Language/Python/pytorch/#clone","title":"Clone","text":"<ul> <li>If you want to mutate <code>t</code> after detaching it from the graph, you should use <code>t.detach().clone()</code>, so that the mutation won't affect <code>t</code> in the graph.</li> </ul>"},{"location":"Language/Python/pytorch/#backward","title":"Backward","text":"<ul> <li>Can backward twice for one leaf tensor <code>x</code>, but can't backward for one non-leaf tensor <code>y</code> twice. For example, this is possible <pre><code>x = torch.tensor([1.,2.],requires_grad=True)\ny = (x * x).sum()\nz = (x * x).sum()\ny.backward()\nz.backward()\n</code></pre></li> </ul>"},{"location":"Language/Python/skill/","title":"python\u4f7f\u7528\u6280\u5de7","text":"<p>\u6bcf\u4e2a\u8bed\u8a00\u90fd\u6709\u7740\u5176\u81ea\u5df1\u7684\u7279\u6027\uff0c\u5f53\u7136python\u4e5f\u4e0d\u4f8b\u5916\u3002\u6211\u5c06\u5206\u6210\u4e0b\u9762\u51e0\u4e2a\u5927\u7c7b\u8fdb\u884c\u8bb0\u5f55\u3002</p> <p>catalogue</p> <ul> <li> \u57fa\u672c\u6280\u5de7</li> <li> OS\u4f7f\u7528</li> <li> matplotlib\u76f8\u5173</li> <li> \u6742\u9879</li> </ul>"},{"location":"Language/Python/skill/#basic","title":"Basic","text":""},{"location":"Language/Python/skill/#_1","title":"\u6b63\u5219\u8868\u8fbe\u5f0f","text":"<ol> <li><code>re.findall(r\"&lt;a\\s+(?:[^&gt;]*?)href=\\\"([^\\\"]*)\\\"\", contents)</code>    \u4e0a\u8ff0\u4ee3\u7801\u662f\u7528\u6765\u5339\u914dhtml\u4e2d\u7684\u94fe\u63a5\u7684\uff0c\u5176\u4e2d<code>r</code>\u8868\u793a\u539f\u59cb\u5b57\u7b26\u4e32\uff0c<code>[^&gt;]*?</code>\u8868\u793a\u5339\u914d\u4efb\u610f\u5b57\u7b26\uff0c<code>*?</code>\u8868\u793a\u975e\u8d2a\u5a6a\u5339\u914d\uff0c<code>[^\\\"]*</code>\u8868\u793a\u5339\u914d\u4efb\u610f\u5b57\u7b26\uff0c<code>()</code>\u8868\u793a\u5206\u7ec4\uff0c<code>[]</code>\u8868\u793a\u5339\u914d\u5176\u4e2d\u7684\u4efb\u610f\u4e00\u4e2a\u5b57\u7b26\u3002</li> </ol>"},{"location":"Language/Python/skill/#os","title":"OS\u4f7f\u7528","text":"<ol> <li> <p><code>python    for filename in os.listdir(directory):            if not filename.endswith(\".html\"):                continue            with open(os.path.join(directory, filename)) as f:                contents = f.read()                links = re.findall(r\"&lt;a\\s+(?:[^&gt;]*?)href=\\\"([^\\\"]*)\\\"\", contents)                pages[filename] = set(links) - {filename}</code></p> </li> <li></li> </ol>"},{"location":"Language/Python/skill/#_2","title":"\u6742\u9879","text":"<ol> <li>python \u4e2d\u7684\u4e09\u5143\u8fd0\u7b97\u7b26\uff1a<code>return X if X_count == O_count else O</code></li> <li>\u8fd4\u56de\u6700\u5927\u503c\u7684\u7d22\u5f15\uff1a<code>max_score_index = max(enumerate(scores), key=lambda x: x[1])[0]</code></li> <li><code>with open(os.path.join(directory, filename)) as f:</code>\u4f7f\u7528with\u5904\u7406\u5f02\u5e38\u60c5\u51b5</li> </ol>"},{"location":"Language/Verilog/","title":"Index","text":""},{"location":"Language/Verilog/#verilog","title":"Verilog\u57fa\u7840\u8bed\u6cd5","text":"<p>\u5f15\u8a00</p> <p>\u672c\u7b14\u8bb0\u53c2\u8003Runoob\u7684\u6559\u7a0b\u4ee5\u53ca\u5176\u4ed6\u8d44\u6599\u53c2\u8003\u5b66\u4e60\u8bb0\u5f55\uff0c\u4e3a\u786c\u4ef6\u8bfe\u7a0b\u5b66\u4e60\u7684\u57fa\u7840\u8bed\u8a00\u3002</p>"},{"location":"Language/Verilog/#verilog_1","title":"Verilog\u4e2d\u7684\u4e00\u4e9b\u7279\u6027","text":"<ol> <li>\u4e00\u822c\u6765\u8bf4\uff0c\u5f53\u4f4d\u5bbd\u4e0d\u5339\u914d\u65f6\uff0c\u5411\u5de6\u88650\u6269\u5c55.</li> </ol>"},{"location":"Language/Verilog/#_1","title":"\u521d\u7aa5","text":"<p>Verilog\u662f\u4e00\u79cd\u786c\u4ef6\u7f16\u7a0b\u8bed\u8a00\uff0c\u53ef\u4ee5\u62d3\u5199\u5230FPGA\u4e0a\u53bb\u8fd0\u884c\u3002</p> <p>\u57fa\u672c\u7279\u6027\uff1aVerilog\u533a\u5206\u5927\u5c0f\u5199\uff0c\u8bed\u53e5\u4ee5\u5206\u53f7\u4e3a\u7ed3\u675f\uff0c\u7a7a\u767d\u7b26\u65e0\u610f\u4e49\uff0c\u6ce8\u91ca\u65b9\u6cd5\u540cC\u3002</p>"},{"location":"Language/Verilog/#_2","title":"\u8bbe\u8ba1\u6d41\u7a0b","text":"<p>\u4e00\u822c\u7684\u8bbe\u8ba1\u601d\u8def\u5982\u4e0b\u56fe\uff1a</p> <p></p>"},{"location":"Language/Verilog/#_3","title":"\u6807\u8bc6\u7b26","text":"<p>\u6807\u8bc6\u7b26\uff08identifier\uff09\u53ef\u4ee5\u662f\u4efb\u610f\u4e00\u7ec4\u5b57\u6bcd\u3001\u6570\u5b57\u3001$ \u7b26\u53f7\u548c _(\u4e0b\u5212\u7ebf)\u7b26\u53f7\u7684\u5408\uff0c\u4f46\u6807\u8bc6\u7b26\u7684\u7b2c\u4e00\u4e2a\u5b57\u7b26\u5fc5\u987b\u662f\u5b57\u6bcd\u6216\u8005\u4e0b\u5212\u7ebf\uff0c\u4e0d\u80fd\u4ee5\u6570\u5b57\u6216\u8005\u7f8e\u5143\u7b26\u5f00\u59cb\u3002\u4e00\u822c\u66f4\u504f\u5411\u4e8e\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\u3002</p>"},{"location":"Language/Verilog/#_4","title":"\u6570\u503c","text":""},{"location":"Language/Verilog/#_5","title":"\u6570\u503c\u79cd\u7c7b","text":"<p>Verilog HDL \u6709\u4e0b\u5217\u56db\u79cd\u57fa\u672c\u7684\u503c\u6765\u8868\u793a\u786c\u4ef6\u7535\u8def\u4e2d\u7684\u7535\u5e73\u903b\u8f91\uff1a</p> <ul> <li>0\uff1a\u903b\u8f91 0 \u6216 \"\u5047\"</li> <li>1\uff1a\u903b\u8f91 1 \u6216 \"\u771f\"</li> <li>x \u6216 X\uff1a\u672a\u77e5</li> <li>z \u6216 Z\uff1a\u9ad8\u963b</li> </ul> <p>x \u610f\u5473\u7740\u4fe1\u53f7\u6570\u503c\u7684\u4e0d\u786e\u5b9a\uff0c\u5373\u5728\u5b9e\u9645\u7535\u8def\u91cc\uff0c\u4fe1\u53f7\u53ef\u80fd\u4e3a 1\uff0c\u4e5f\u53ef\u80fd\u4e3a 0\u3002</p> <p>z \u610f\u5473\u7740\u4fe1\u53f7\u5904\u4e8e\u9ad8\u963b\u72b6\u6001\uff0c\u5e38\u89c1\u4e8e\u4fe1\u53f7\uff08input, reg\uff09\u6ca1\u6709\u9a71\u52a8\u65f6\u7684\u903b\u8f91\u7ed3\u679c\u3002\u4f8b\u5982\u4e00\u4e2a pad \u7684 input \u5448\u73b0\u9ad8\u963b\u72b6\u6001\u65f6\uff0c\u5176\u903b\u8f91\u503c\u548c\u4e0a\u4e0b\u62c9\u7684\u72b6\u6001\u6709\u5173\u7cfb\u3002\u4e0a\u62c9\u5219\u903b\u8f91\u503c\u4e3a 1\uff0c\u4e0b\u62c9\u5219\u4e3a 0 \u3002</p>"},{"location":"Language/Verilog/#_6","title":"\u6570\u503c\u8868\u793a","text":"<p>\u6307\u660e\u4f4d\u5bbd\uff1a</p> <pre><code>4'b1011 \u00a0 \u00a0 \u00a0 \u00a0 // 4bit \u6570\u503c\n32'h3022_c0de \u00a0 // 32bit \u7684\u6570\u503c\n-6'd15      //negative number\n4'd-2 //\u975e\u6cd5\u8bf4\u660e invalid\n</code></pre> <p>\u4e0d\u6307\u660e\u4f4d\u5bbd:</p> <p>\u4e00\u822c\u76f4\u63a5\u5199\u6570\u5b57\u65f6\uff0c\u9ed8\u8ba4\u4e3a\u5341\u8fdb\u5236\u8868\u793a\uff0c\u4f8b\u5982\u4e0b\u9762\u7684 3 \u79cd\u5199\u6cd5\u662f\u7b49\u6548\u7684\uff1a</p> <pre><code>counter = 'd100 ; //\u4e00\u822c\u4f1a\u6839\u636e\u7f16\u8bd1\u5668\u81ea\u52a8\u5206\u9891\u4f4d\u5bbd\uff0c\u5e38\u89c1\u7684\u4e3a32bit*\ncounter = 100 ;\ncounter = 32'h64 ;\n</code></pre>"},{"location":"Language/Verilog/#_7","title":"\u6570\u636e\u7c7b\u578b","text":"<p>Verilog \u6700\u5e38\u7528\u7684 2 \u79cd\u6570\u636e\u7c7b\u578b\u5c31\u662f\u7ebf\u7f51\uff08wire\uff09\u4e0e\u5bc4\u5b58\u5668\uff08reg\uff09\uff0c\u5176\u4f59\u7c7b\u578b\u53ef\u4ee5\u7406\u89e3\u4e3a\u8fd9\u4e24\u79cd\u6570\u636e\u7c7b\u578b\u7684\u6269\u5c55\u6216\u8f85\u52a9\u3002</p>"},{"location":"Language/Verilog/#wire","title":"\u7ebf\u7f51\uff08wire\uff09","text":"<p>wire \u7c7b\u578b\u8868\u793a\u786c\u4ef6\u5355\u5143\u4e4b\u95f4\u7684\u7269\u7406\u8fde\u7ebf\uff0c\u7531\u5176\u8fde\u63a5\u7684\u5668\u4ef6\u8f93\u51fa\u7aef\u8fde\u7eed\u9a71\u52a8\u3002\u5982\u679c\u6ca1\u6709\u9a71\u52a8\u5143\u4ef6\u8fde\u63a5\u5230 wire \u578b\u53d8\u91cf\uff0c\u7f3a\u7701\u503c\u4e00\u822c\u4e3a \"Z\"\u3002\u4e3e\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>wire  interrupt ;\nwire  flag1, flag2 ;\nwire  gnd = 1'b0 ; \n</code></pre> <p>\u7ebf\u7f51\u578b\u8fd8\u6709\u5176\u4ed6\u6570\u636e\u7c7b\u578b\uff0c\u5305\u62ec wand\uff0cwor\uff0cwri\uff0ctriand\uff0ctrior\uff0ctrireg \u7b49\u3002\u8fd9\u4e9b\u6570\u636e\u7c7b\u578b\u7528\u7684\u9891\u7387\u4e0d\u662f\u5f88\u9ad8\uff0c\u8fd9\u91cc\u4e0d\u505a\u4ecb\u7ecd\u3002</p>"},{"location":"Language/Verilog/#reg","title":"\u5bc4\u5b58\u5668\uff08reg\uff09","text":"<p>\u5bc4\u5b58\u5668\uff08reg\uff09\u7528\u6765\u8868\u793a\u5b58\u50a8\u5355\u5143\uff0c\u5b83\u4f1a\u4fdd\u6301\u6570\u636e\u539f\u6709\u7684\u503c\uff0c\u76f4\u5230\u88ab\u6539\u5199\u3002\u58f0\u660e\u4e3e\u4f8b\u5982\u4e0b\uff1a</p> <pre><code>reg   clk_temp;\nreg  flag1, flag2 ;\n</code></pre> <p>\u4f8b\u5982\u5728 always \u5757\u4e2d\uff0c\u5bc4\u5b58\u5668\u53ef\u80fd\u88ab\u7efc\u5408\u6210\u8fb9\u6cbf\u89e6\u53d1\u5668\uff0c\u5728\u7ec4\u5408\u903b\u8f91\u4e2d\u53ef\u80fd\u88ab\u7efc\u5408\u6210 wire \u578b\u53d8\u91cf\u3002\u5bc4\u5b58\u5668\u4e0d\u9700\u8981\u9a71\u52a8\u6e90\uff0c\u4e5f\u4e0d\u4e00\u5b9a\u9700\u8981\u65f6\u949f\u4fe1\u53f7\u3002\u5728\u4eff\u771f\u65f6\uff0c\u5bc4\u5b58\u5668\u7684\u503c\u53ef\u5728\u4efb\u610f\u65f6\u523b\u901a\u8fc7\u8d4b\u503c\u64cd\u4f5c\u8fdb\u884c\u6539\u5199\u3002\u4f8b\u5982\uff1a</p> <pre><code>reg rstn ;\ninitial begin\n\u00a0 \u00a0 rstn = 1'b0 ;\n\u00a0 \u00a0 #100 ; //\u5ef6\u65f6\u64cd\u4f5c\n\u00a0 \u00a0 rstn = 1'b1 ;\nend\n</code></pre> <p>\u5411\u91cf\u5316\u591a\u4f4d\u5bbd\uff1a</p> <p>[a:b]\uff1aa\u662f\u6307\u6700\u9ad8\u4f4d\u7d22\u5f15\uff0cb\u662f\u6307\u6700\u4f4e\u4f4d\u7d22\u5f15\u3002</p> <pre><code>reg [3:0] \u00a0 \u00a0 \u00a0counter ;\u00a0\u00a0\u00a0 //\u58f0\u660e4bit\u4f4d\u5bbd\u7684\u5bc4\u5b58\u5668counter\nwire [32-1:0] \u00a0gpio_data;\u00a0\u00a0 //\u58f0\u660e32bit\u4f4d\u5bbd\u7684\u7ebf\u578b\u53d8\u91cfgpio_data\nwire [8:2]\u00a0\u00a0\u00a0\u00a0\u00a0addr ;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 //\u58f0\u660e7bit\u4f4d\u5bbd\u7684\u7ebf\u578b\u53d8\u91cfaddr\uff0c\u4f4d\u5bbd\u8303\u56f4\u4e3a8:2\nreg [0:31]\u00a0\u00a0\u00a0\u00a0\u00a0data ;\u00a0\u00a0\u00a0\u00a0\u00a0\u00a0 //\u58f0\u660e32bit\u4f4d\u5bbd\u7684\u5bc4\u5b58\u5668\u53d8\u91cfdata, \u6700\u9ad8\u6709\u6548\u4f4d\u4e3a0\n</code></pre> <p>\u4ee5\u53ca\u4e8c\u7ef4\u5411\u91cf\u5bc4\u5b58\u5668\uff1a</p> <pre><code>reg [7:0][3:0] reg_matrix;   // 8x4\u7684\u4e8c\u7ef4\u5411\u91cf\u5bc4\u5b58\u5668\uff0c\u6bcf\u4e2a\u5143\u7d20\u4e3a8\u4f4d\nreg [7:0]      byte1 [3:0];  //\u6548\u679c\u540c\u4e0a\n</code></pre> <p>Verilog\u652f\u6301bit\u4f4d\u540e\u56fa\u5b9a\u4f4d\u5bbd\u7684\u5411\u91cf\u57df\u9009\u62e9\u8bbf\u95ee\uff1a</p> <pre><code>//\u4e0b\u9762 2 \u79cd\u8d4b\u503c\u662f\u7b49\u6548\u7684\nA = data1[31-: 8] ;\nA = data1[31:24] ;\n\n//\u4e0b\u9762 2 \u79cd\u8d4b\u503c\u662f\u7b49\u6548\u7684\nB = data1[0+ : 8] ;\nB = data1[0:7] ;\n</code></pre>"},{"location":"Language/Verilog/#_8","title":"\u6574\u6570\u3001\u5b9e\u6570\u3001\u65f6\u95f4\u5bc4\u5b58\u5668","text":"<p>interger\u8868\u793a\u6574\u6570\u7533\u660e\uff1breal\u7533\u660e\u5b9e\u6570\uff1btime\u7533\u660e\u65f6\u95f4\uff0c\u53ef\u901a\u8fc7<code>time current_time;#100; current_time=$time</code>\u83b7\u5f97\u5f53\u524d\u7cfb\u7edf\u65f6\u95f4\uff0c\u6b64\u4ee3\u7801\u4e2d\u4e3a100\u4e2a\u65f6\u95f4\u5355\u4f4d\u3002</p>"},{"location":"Language/Verilog/#_9","title":"\u5b57\u7b26\u4e32","text":"<p>\u5b57\u7b26\u4e32\u4e2d\u4e0d\u80fd\u5305\u542b\u56de\u8f66\u7b26,\u540c\u6837\u5982c\u8bed\u8a00\u4e2d\u7684\u2018\\n\u2019\u3002\u5982\u679c\u5bc4\u5b58\u5668\u53d8\u91cf\u7684\u5bbd\u5ea6\u5927\u4e8e\u5b57\u7b26\u4e32\u7684\u5927\u5c0f\uff0c\u5219\u4f7f\u7528 0 \u6765\u586b\u5145\u5de6\u8fb9\u7684\u7a7a\u4f59\u4f4d\uff1b\u5982\u679c\u5bc4\u5b58\u5668\u53d8\u91cf\u7684\u5bbd\u5ea6\u5c0f\u4e8e\u5b57\u7b26\u4e32\u5927\u5c0f\uff0c\u5219\u4f1a\u622a\u53bb\u5b57\u7b26\u4e32\u5de6\u8fb9\u591a\u4f59\u7684\u6570\u636e\u901a\u5e38\u5b57\u7b26\u4e32\u4e00\u4e2a\u5b57\u7b26\u4e3a8bits\u3002</p> <p><code>reg [0:14*8-1] str; str=\"run.runoob.com\"</code></p> <p>Verilog\u540c\u6837\u4f7f\u7528\\\u6765\u8f6c\u4e49\u5b57\u7b26\u8868\u793a\u8f93\u51fa\u3002</p>"},{"location":"Language/Verilog/#_10","title":"\u8868\u8fbe\u5f0f","text":"<p>\u8868\u8fbe\u5f0f\u7531\u64cd\u4f5c\u7b26\u548c\u64cd\u4f5c\u6570\u7ec4\u6210\u3002</p>"},{"location":"Language/Verilog/#_11","title":"\u64cd\u4f5c\u6570","text":"<p>\u64cd\u4f5c\u6570\u53ef\u4ee5\u662f\u4efb\u610f\u6570\u636e\u7c7b\u578b\uff0c\u53ea\u6709\u67d0\u4e9b\u7279\u5b9a\u8bed\u6cd5\u7ed3\u6784\u4f7f\u7528\u7279\u5b9a\u7c7b\u578b\u7684\u64cd\u4f5c\u6570\u3002</p> <pre><code>module test;\n\n//\u5b9e\u6570\nreal a, b, c;\nc = a + b ;\n\n//\u5bc4\u5b58\u5668\nreg \u00a0[3:0] \u00a0 \u00a0 \u00a0 cprmu_1, cprmu_2 ;\nbegin\n\u00a0 \u00a0 \u00a0 \u00a0 cprmu_2 = cprmu_1 ^ cprmu_2 ;\nend\n\u00a0 \u00a0 \u00a0 \u00a0 \u00a0\n//\u51fd\u6570\nreg \u00a0flag1 ;\nflag = calculate_result(A, B);\n\u00a0\n//\u975e\u6cd5\u64cd\u4f5c\u6570\nreg [3:0] \u00a0 \u00a0 \u00a0 \u00a0 res;\nwire [3:0] \u00a0 \u00a0 \u00a0 \u00a0temp;\nalways@ \uff08*\uff09begin\n\u00a0 \u00a0 res \u00a0 \u00a0= cprmu_2 \u2013 cprmu_1 ;\n\u00a0 \u00a0 //temp = cprmu_2 \u2013 cprmu_1 ; //\u4e0d\u5408\u6cd5\uff0calways\u5757\u91cc\u8d4b\u503c\u5bf9\u8c61\u4e0d\u80fd\u662fwire\u578b\nend\n\nendmodule\n</code></pre>"},{"location":"Language/Verilog/#_12","title":"\u64cd\u4f5c\u7b26","text":"<p>Verilog \u4e2d\u63d0\u4f9b\u4e86\u5927\u7ea6 9 \u79cd\u64cd\u4f5c\u7b26\uff0c\u5206\u522b\u662f\u7b97\u672f\u3001\u5173\u7cfb\u3001\u7b49\u4ef7\u3001\u903b\u8f91\u3001\u6309\u4f4d\u3001\u5f52\u7ea6\u3001\u79fb\u4f4d\u3001\u62fc\u63a5\u3001\u6761\u4ef6\u64cd\u4f5c\u7b26\u3002</p> <p>\u5927\u90e8\u5206\u64cd\u4f5c\u7b26\u4e0e C \u8bed\u8a00\u4e2d\u7c7b\u4f3c\u3002\u540c\u7c7b\u578b\u64cd\u4f5c\u7b26\u4e4b\u95f4\uff0c\u9664\u6761\u4ef6\u64cd\u4f5c\u7b26\u4ece\u53f3\u5f80\u5de6\u5173\u8054\uff0c\u5176\u4f59\u64cd\u4f5c\u7b26\u90fd\u662f\u81ea\u5de6\u5411\u53f3\u5173\u8054\u3002\u5706\u62ec\u53f7\u5185\u8868\u8fbe\u5f0f\u4f18\u5148\u6267\u884c\u3002\u4f8b\u5982\u4e0b\u9762\u6bcf\u7ec4\u7684 2 \u79cd\u5199\u6cd5\u90fd\u662f\u7b49\u4ef7\u7684:</p> <pre><code>//\u81ea\u53f3\u5411\u5de6\u5173\u8054\uff0c\u4e24\u79cd\u5199\u6cd5\u7b49\u4ef7\nA+B-C ;\n(A+B\uff09-C ;\n\n//\u81ea\u53f3\u5411\u5de6\u5173\u8054\uff0c\u4e24\u79cd\u5199\u6cd5\u7b49\u4ef7\uff0c\u7ed3\u679c\u4e3a B\u3001D \u6216 F\nA ? B : C ? D : F ;\nA ? B : (C ? D : F) ;\n\n//\u81ea\u53f3\u5411\u5de6\u5173\u8054\uff0c\u4e24\u79cd\u5199\u6cd5\u4e0d\u7b49\u4ef7\n(A ? B : C) ? D : F ;  //\u7ed3\u679c D \u6216 F\nA ? B : C ? D : F ; //\u7ed3\u679c\u4e3a B\u3001D \u6216 F\n</code></pre> \u64cd\u4f5c\u7b26 \u64cd\u4f5c\u7b26\u53f7 \u4f18\u5148\u7ea7 \u5355\u76ee\u8fd0\u7b97 + - ! ~ \u6700\u9ad8 \u4e58\u3001\u9664\u3001\u53d6\u6a21 * / % \u52a0\u51cf + - \u79fb\u4f4d &lt;&lt;  &gt;&gt; \u5173\u7cfb &lt; &lt;= &gt; &gt;= \u7b49\u4ef7 == != \\(===\\) \\(!===\\)\u5168\u7b49\u64cd\u4f5c\uff1f \u5f52\u7ea6 &amp; ~&amp; ^ ~^ | ~| \u903b\u8f91 &amp;&amp; || \u6761\u4ef6 ?: \u6700\u4f4e"},{"location":"Language/Verilog/#_13","title":"\u5173\u7cfb\u64cd\u4f5c\u7b26","text":"<p>\u5173\u7cfb\u64cd\u4f5c\u7b26\u6709\u5927\u4e8e\uff08&gt;\uff09\uff0c\u5c0f\u4e8e\uff08&lt;\uff09\uff0c\u5927\u4e8e\u7b49\u4e8e\uff08&gt;=\uff09\uff0c\u5c0f\u4e8e\u7b49\u4e8e\uff08&lt;=\uff09\u3002</p> <p>\u5173\u7cfb\u64cd\u4f5c\u7b26\u7684\u6b63\u5e38\u7ed3\u679c\u6709 2 \u79cd\uff0c\u771f\uff081\uff09\u6216\u5047\uff080\uff09\u3002</p>"},{"location":"Language/Verilog/#_14","title":"\u7b97\u672f\u64cd\u4f5c\u7b26","text":"<p>\u7b97\u672f\u64cd\u4f5c\u7b26\u5305\u62ec\u5355\u76ee\u64cd\u4f5c\u7b26\u548c\u53cc\u76ee\u64cd\u4f5c\u7b26\u3002</p> <p>\u53cc\u76ee\u64cd\u4f5c\u7b26\u5bf9 2 \u4e2a\u64cd\u4f5c\u6570\u8fdb\u884c\u7b97\u672f\u8fd0\u7b97\uff0c\u5305\u62ec\u4e58\uff08\uff09\u3001\u9664\uff08/\uff09\u3001\u52a0\uff08+\uff09\u3001\u51cf\uff08-\uff09\u3001\u6c42\u5e42\uff08*\uff09\u3001\u53d6\u6a21\uff08%\uff09</p> <pre><code>reg [3:0] \u00a0a, b;\nreg [4:0] \u00a0c ;\na = 4'b0010 ;\nb = 4'b1001 ;\nc = a+b; \u00a0 \u00a0 \u00a0 \u00a0//\u7ed3\u679c\u4e3ac=b'b1011\nc = a/b; \u00a0 \u00a0 \u00a0 \u00a0 \u00a0//\u7ed3\u679c\u4e3ac=4\uff0c\u53d6\u6574\nb = 4'b100x ;\nc = a+b ; \u00a0 \u00a0 \u00a0 //\u7ed3\u679c\u4e3ac=4'bxxxx\n</code></pre> <p>\u6570\u636e\u5982\u679c\u6ea2\u51fa\u4f1a\u88ab\u9ad8\u4f4d\u622a\u65ad\u3002</p>"},{"location":"Language/Verilog/#_15","title":"\u7b49\u4ef7\u64cd\u4f5c\u7b26","text":"<p>\u7b49\u4ef7\u64cd\u4f5c\u7b26\u5305\u62ec\u903b\u8f91\u76f8\u7b49<code>==</code>\uff0c\u903b\u8f91\u4e0d\u7b49<code>!=</code>\uff0c\u5168\u7b49<code>===</code>\uff0c\u975e\u5168\u7b49<code>!==</code>\u3002</p> <p>\u7b49\u4ef7\u64cd\u4f5c\u7b26\u7684\u6b63\u5e38\u7ed3\u679c\u6709 2 \u79cd\uff1a\u4e3a\u771f\uff081\uff09\u6216\u5047\uff080\uff09\u3002</p> <p>\u903b\u8f91\u76f8\u7b49/\u4e0d\u7b49\u64cd\u4f5c\u7b26\u4e0d\u80fd\u6bd4\u8f83 x \u6216 z\uff0c\u5f53\u64cd\u4f5c\u6570\u5305\u542b\u4e00\u4e2a x \u6216 z\uff0c\u5219\u7ed3\u679c\u4e3a\u4e0d\u786e\u5b9a\u503c\u3002</p>"},{"location":"Language/Verilog/#_16","title":"\u903b\u8f91\u64cd\u4f5c\u7b26","text":"<p>\u903b\u8f91\u64cd\u4f5c\u7b26\u4e3b\u8981\u6709 3 \u4e2a\uff1a&amp;&amp;\uff08\u903b\u8f91\u4e0e\uff09, ||\uff08\u903b\u8f91\u6216\uff09\uff0c!\uff08\u903b\u8f91\u975e\uff09\u3002</p> <p>\u903b\u8f91\u64cd\u4f5c\u7b26\u7684\u8ba1\u7b97\u7ed3\u679c\u662f\u4e00\u4e2a 1bit \u7684\u503c\uff0c0 \u8868\u793a\u5047\uff0c1 \u8868\u793a\u771f\uff0cx \u8868\u793a\u4e0d\u786e\u5b9a\u3002</p>"},{"location":"Language/Verilog/#_17","title":"\u6309\u4f4d\u64cd\u4f5c\u7b26","text":"<p>\u6309\u4f4d\u64cd\u4f5c\u7b26\u5305\u62ec\uff1a\u53d6\u53cd\uff08 ~ \uff09\uff0c\u4e0e\uff08 &amp; \uff09\uff0c\u6216\uff08 | \uff09\uff0c\u5f02\u6216\uff08^\uff09\uff0c\u540c\u6216\uff08~^\uff09\u3002</p> <p>\u6309\u4f4d\u64cd\u4f5c\u7b26\u5bf9 2 \u4e2a\u64cd\u4f5c\u6570\u7684\u6bcf 1bit \u6570\u636e\u8fdb\u884c\u6309\u4f4d\u64cd\u4f5c\u3002</p> <p>\u5982\u679c 2 \u4e2a\u64cd\u4f5c\u6570\u4f4d\u5bbd\u4e0d\u76f8\u7b49\uff0c\u5219\u7528 0 \u5411\u5de6\u6269\u5c55\u8865\u5145\u8f83\u77ed\u7684\u64cd\u4f5c\u6570\u3002</p> <p>\u53d6\u53cd\u64cd\u4f5c\u7b26\u53ea\u6709\u4e00\u4e2a\u64cd\u4f5c\u6570\uff0c\u5b83\u5bf9\u64cd\u4f5c\u6570\u7684\u6bcf 1bit \u6570\u636e\u8fdb\u884c\u53d6\u53cd\u64cd\u4f5c\u3002</p> <p>\u4e0b\u56fe\u7ed9\u51fa\u4e86\u6309\u4f4d\u64cd\u4f5c\u7b26\u7684\u903b\u8f91\u89c4\u5219\u3002</p> &amp;(\u4e0e\uff09 0 1 x |(\u6216) 0 1 x 0 0 0 0 0 0 1 x 1 0 1 x 1 1 1 1 x 0 x x x x 1 x ^(\u5f02\u6216) 0 1 x ~^(\u540c\u6216) 0 1 x 0 0 1 x 0 1 0 x 1 1 0 x 1 0 1 x x x x x x x x x"},{"location":"Language/Verilog/#_18","title":"\u5f52\u7ea6\u64cd\u4f5c\u7b26","text":"<p>\u5f52\u7ea6\u64cd\u4f5c\u7b26\u5305\u62ec\uff1a\u5f52\u7ea6\u4e0e\uff08&amp;\uff09\uff0c\u5f52\u7ea6\u4e0e\u975e\uff08<sub>&amp;\uff09\uff0c\u5f52\u7ea6\u6216\uff08|\uff09\uff0c\u5f52\u7ea6\u6216\u975e\uff08</sub>|\uff09\uff0c\u5f52\u7ea6\u5f02\u6216\uff08^\uff09\uff0c\u5f52\u7ea6\u540c\u6216\uff08~^\uff09\u3002</p> <p>\u5f52\u7ea6\u64cd\u4f5c\u7b26\u53ea\u6709\u4e00\u4e2a\u64cd\u4f5c\u6570\uff0c\u5b83\u5bf9\u8fd9\u4e2a\u5411\u91cf\u64cd\u4f5c\u6570\u9010\u4f4d\u8fdb\u884c\u64cd\u4f5c\uff0c\u6700\u7ec8\u4ea7\u751f\u4e00\u4e2a 1bit \u7ed3\u679c\u3002</p> <p>\u903b\u8f91\u64cd\u4f5c\u7b26\u3001\u6309\u4f4d\u64cd\u4f5c\u7b26\u548c\u5f52\u7ea6\u64cd\u4f5c\u7b26\u90fd\u4f7f\u7528\u76f8\u540c\u7684\u7b26\u53f7\u8868\u793a\uff0c\u56e0\u6b64\u6709\u65f6\u5019\u5bb9\u6613\u6df7\u6dc6\u3002\u533a\u5206\u8fd9\u4e9b\u64cd\u4f5c\u7b26\u7684\u5173\u952e\u662f\u5206\u6e05\u64cd\u4f5c\u6570\u7684\u6570\u76ee\uff0c\u548c\u8ba1\u7b97\u7ed3\u679c\u7684\u89c4\u5219\u3002</p> <pre><code>A = 4'b1010 ;\n&amp;A ;      //\u7ed3\u679c\u4e3a 1 &amp; 0 &amp; 1 &amp; 0 = 1'b0\uff0c\u53ef\u7528\u6765\u5224\u65ad\u53d8\u91cfA\u662f\u5426\u51681\n~|A ;     //\u7ed3\u679c\u4e3a ~(1 | 0 | 1 | 0) = 1'b0, \u53ef\u7528\u6765\u5224\u65ad\u53d8\u91cfA\u662f\u5426\u4e3a\u51680\n^A ;      //\u7ed3\u679c\u4e3a 1 ^ 0 ^ 1 ^ 0 = 1'b0\n</code></pre>"},{"location":"Language/Verilog/#_19","title":"\u79fb\u4f4d\u64cd\u4f5c\u7b26","text":"<p>\u79fb\u4f4d\u64cd\u4f5c\u7b26\u5305\u62ec\u5de6\u79fb\uff08&lt;&lt;\uff09\uff0c\u53f3\u79fb\uff08&gt;&gt;\uff09\uff0c\u7b97\u672f\u5de6\u79fb\uff08&lt;&lt;&lt;\uff09\uff0c\u7b97\u672f\u53f3\u79fb\uff08&gt;&gt;&gt;\uff09\u3002</p> <p>\u79fb\u4f4d\u64cd\u4f5c\u7b26\u662f\u53cc\u76ee\u64cd\u4f5c\u7b26\uff0c\u4e24\u4e2a\u64cd\u4f5c\u6570\u5206\u522b\u8868\u793a\u8981\u8fdb\u884c\u79fb\u4f4d\u7684\u5411\u91cf\u4fe1\u53f7\uff08\u64cd\u4f5c\u7b26\u5de6\u4fa7\uff09\u4e0e\u79fb\u52a8\u7684\u4f4d\u6570\uff08\u64cd\u4f5c\u7b26\u53f3\u4fa7\uff09\u3002</p> <p>\u7b97\u672f\u5de6\u79fb\u548c\u903b\u8f91\u5de6\u79fb\u65f6\uff0c\u53f3\u8fb9\u4f4e\u4f4d\u4f1a\u8865 0\u3002</p> <p>\u903b\u8f91\u53f3\u79fb\u65f6\uff0c\u5de6\u8fb9\u9ad8\u4f4d\u4f1a\u8865 0\uff1b\u800c\u7b97\u672f\u53f3\u79fb\u65f6\uff0c\u5de6\u8fb9\u9ad8\u4f4d\u4f1a\u8865\u5145\u7b26\u53f7\u4f4d\uff0c\u4ee5\u4fdd\u8bc1\u6570\u636e\u7f29\u5c0f\u540e\u503c\u7684\u6b63\u786e\u6027\u3002</p> <pre><code>A = 4'b1100 ;\nB = 4'b0010 ;\nA = A &gt;&gt; 2 ;     *//\u7ed3\u679c\u4e3a 4'b0011*\nA = A &lt;&lt; 1;     *//\u7ed3\u679c\u4e3a 4'b1000*\nA = A &lt;&lt;&lt; 1 ;    *//\u7ed3\u679c\u4e3a 4'b1000*\nC = B + (A&gt;&gt;&gt;2);   *//\u7ed3\u679c\u4e3a 2 + (-4/4) = 1, 4'b0001*\n</code></pre>"},{"location":"Language/Verilog/#_20","title":"\u62fc\u63a5\u64cd\u4f5c\u7b26","text":"<p>\u62fc\u63a5\u64cd\u4f5c\u7b26\u7528\u5927\u62ec\u53f7 {\uff0c} \u6765\u8868\u793a\uff0c\u7528\u4e8e\u5c06\u591a\u4e2a\u64cd\u4f5c\u6570\uff08\u5411\u91cf\uff09\u62fc\u63a5\u6210\u65b0\u7684\u64cd\u4f5c\u6570\uff08\u5411\u91cf\uff09\uff0c\u4fe1\u53f7\u95f4\u7528\u9017\u53f7\u9694\u5f00\u3002</p> <p>\u62fc\u63a5\u7b26\u64cd\u4f5c\u6570\u5fc5\u987b\u6307\u5b9a\u4f4d\u5bbd\uff0c\u5e38\u6570\u7684\u8bdd\u4e5f\u9700\u8981\u6307\u5b9a\u4f4d\u5bbd\u3002\u4f8b\u5982\uff1a</p> <pre><code>A = 4'b1010 ;\nB = 1'b1 ;\nY1 = {B, A[3:2], A[0], 4'h3 }; *//\u7ed3\u679c\u4e3aY1='b1100_0011*\nY2 = {4{B}, 3'd4}; *//\u7ed3\u679c\u4e3a Y2=7'b111_1100*\nY3 = {32{1'b0}}; *//\u7ed3\u679c\u4e3a Y3=32h0\uff0c\u5e38\u7528\u4f5c\u5bc4\u5b58\u5668\u521d\u59cb\u5316\u65f6\u5339\u914d\u4f4d\u5bbd\u7684\u8d4b\u521d\u503c\n</code></pre>"},{"location":"Language/Verilog/#_21","title":"\u6761\u4ef6\u64cd\u4f5c\u7b26","text":"<p>\u6761\u4ef6\u8868\u8fbe\u5f0f\u6709 3 \u4e2a\u64cd\u4f5c\u7b26\uff0c\u7ed3\u6784\u63cf\u8ff0\u5982\u4e0b\uff1a</p> <pre><code>condition_expression ? true_expression : false_expression\n</code></pre> <p>\u8ba1\u7b97\u65f6\uff0c\u5982\u679c condition_expression \u4e3a\u771f\uff08\u903b\u8f91\u503c\u4e3a 1\uff09\uff0c\u5219\u8fd0\u7b97\u7ed3\u679c\u4e3a true_expression\uff1b\u5982\u679c condition_expression \u4e3a\u5047\uff08\u903b\u8f91\u503c\u4e3a 0\uff09\uff0c\u5219\u8ba1\u7b97\u7ed3\u679c\u4e3a false_expression\u3002</p> <pre><code>assign hsel    = (addr[9:8] == 2'b0) ? hsel_p1 : hsel_p2 ;\n//\u5f53\u4fe1\u53f7 addr \u9ad8 2bit \u4e3a 0 \u65f6\uff0chsel \u8d4b\u503c\u4e3a hsel_p1; \u5426\u5219\uff0c\u5c06 hsel_p2 \u8d4b\u503c\u7ed9 hsel\u3002\n</code></pre> <p>\u5176\u5b9e\uff0c\u6761\u4ef6\u8868\u8fbe\u5f0f\u7c7b\u4f3c\u4e8e 2 \u8def\uff08\u6216\u591a\u8def\uff09\u9009\u62e9\u5668\uff0c\u5176\u63cf\u8ff0\u65b9\u5f0f\u5b8c\u5168\u53ef\u4ee5\u7528 if-else \u8bed\u53e5\u4ee3\u66ff\u3002</p> <p>\u5f53\u7136\u6761\u4ef6\u64cd\u4f5c\u7b26\u4e5f\u80fd\u8fdb\u884c\u5d4c\u5957\uff0c\u5b8c\u6210\u4e00\u4e2a\u591a\u6b21\u9009\u62e9\u7684\u903b\u8f91\u3002\u4f8b\u5982\uff1a</p> <pre><code>assign  hsel = (addr[9:8] == 2'b00) ? hsel_p1 :\n        (addr[9:8] == 2'b01) ? hsel_p2 :\n        (addr[9:8] == 2'b10) ? hsel_p3 :\n        (addr[9:8] == 2'b11) ? hsel_p4 ;\n</code></pre>"},{"location":"Language/Verilog/#_22","title":"\u7f16\u8bd1\u547d\u4ee4","text":"<p>C\u8bed\u8a00\u4e2d\u7684#\u90fd\u88ab`\u6240\u66ff\u6362\uff08define typdef</p> <p><code>`timescale</code>\uff1a\u5728 Verilog \u6a21\u578b\u4e2d\uff0c\u65f6\u5ef6\u6709\u5177\u4f53\u7684\u5355\u4f4d\u65f6\u95f4\u8868\u8ff0\uff0c\u5e76\u7528 <code>``timescale</code>\u7f16\u8bd1\u6307\u4ee4\u5c06\u65f6\u95f4\u5355\u4f4d\u4e0e\u5b9e\u9645\u65f6\u95f4\u76f8\u5173\u8054\u3002\u8be5\u6307\u4ee4\u7528\u4e8e\u5b9a\u4e49\u65f6\u5ef6\u3001\u4eff\u771f\u7684\u5355\u4f4d\u548c\u7cbe\u5ea6\uff0c\u683c\u5f0f\u4e3a\uff1a</p> <p><code>timescale      time_unit / time_precision</code></p> <p>\u5728\u7f16\u8bd1\u8fc7\u7a0b\u4e2d\uff0c<code>timescale** \u6307\u4ee4\u4f1a\u5f71\u54cd\u540e\u9762\u6240\u6709\u6a21\u5757\u4e2d\u7684\u65f6\u5ef6\u503c\uff0c\u76f4\u81f3\u9047\u5230\u53e6\u4e00\u4e2a **</code>timescale \u6307\u4ee4\u6216 `resetall \u6307\u4ee4\u3002</p> <p>\u7531\u4e8e\u5728 Verilog \u4e2d\u6ca1\u6709\u9ed8\u8ba4\u7684 <code>timescale**\uff0c\u5982\u679c\u6ca1\u6709\u6307\u5b9a **</code>timescale\uff0cVerilog \u6a21\u5757\u5c31\u6709\u4f1a\u7ee7\u627f\u524d\u9762\u7f16\u8bd1\u6a21\u5757\u7684 `timescale \u53c2\u6570\u3002\u6709\u53ef\u80fd\u5bfc\u81f4\u8bbe\u8ba1\u51fa\u9519\u3002</p>"},{"location":"Missing%20semester/","title":"Index","text":""},{"location":"Missing%20semester/#_1","title":"\u672c\u7ae0\u7b80\u4ecb","text":"<p>\u8fd9\u91cc\u662f\u7c7b\u4f3c\u4e8eMIT\u7684<code>missing semester</code>\uff0c\u7528\u6765\u8bb0\u5f55\u4e00\u4e9b\u8ba1\u7b97\u673a\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u4f1a\u7528\u5230\u7684\u4e00\u4e9b\u5de5\u5177\u3002</p>"},{"location":"Missing%20semester/NAS/","title":"\u81ea\u7ec4NAS\u6307\u5357","text":""},{"location":"Missing%20semester/NAS/#_1","title":"\u52a0\u88c5\u673a\u68b0\u786c\u76d8","text":"<p>\u4e00\u822c\u6211\u4eec\u4e3b\u673a\u80cc\u677f\u540e\u9762\u4f1a\u6709\u4e24\u4e2a\u673a\u68b0\u786c\u76d8\u7684\u5361\u69fd\u5982\u4e0b\uff1a </p> <p>\u73b0\u5728\u4f60\u9700\u8981\u627e\u5230\u6240\u9700\u7684\u786c\u4ef6\uff0c\u5de6\u8fb9\u662f\u7535\u6e90\u7ebf\uff0c\u53f3\u8fb9\u662fSATA\u7ebf\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a </p> <p>\u6ce8\u610f\u6307\u5357</p> <p>\u5c3d\u91cf\u65ad\u7535\u64cd\u4f5c\uff0c\u63d2\u5165\u540e\u9700\u8981\u91cd\u542f\uff08\u5426\u5219\u53ef\u80fd\u8bc6\u522b\u4e0d\u5230\uff09\u3002</p> <p>\u5728\u547d\u4ee4\u884c\u4f7f\u7528<code>sudo fdisk -l</code>\u67e5\u770b\u786c\u76d8\u662f\u5426\u88ab\u8bc6\u522b\uff0c\u5982\u679c\u6ca1\u6709\u8bc6\u522b\u5230\uff0c\u53ef\u80fd\u662f\u786c\u76d8\u6ca1\u6709\u63d2\u597d\u6216\u8005\u786c\u76d8\u635f\u574f\u3002</p>"},{"location":"Missing%20semester/NAS/#_2","title":"\u81ea\u52a8\u6302\u8f7d","text":"<p>\u53ef\u4ee5\u901a\u8fc7\u7f16\u8f91/etc/fstab\u6587\u4ef6\u6765\u5b9e\u73b0\u5f00\u673a\u81ea\u52a8\u6302\u8f7d\u8bbe\u5907\u3002\u4ee5\u4e0b\u662f\u5177\u4f53\u6b65\u9aa4\uff1a</p> <ol> <li> <p>\u67e5\u770b\u5206\u533a\u7684UUID\uff1a\u4f7f\u7528UUID\u6765\u8bc6\u522b\u5206\u533a\uff0c\u8fd9\u6837\u5373\u4f7f\u786c\u76d8\u8bbe\u5907\u540d\u6539\u53d8\u4e5f\u4e0d\u4f1a\u5f71\u54cd\u6302\u8f7d\u3002     <pre><code>sudo blkid\n</code></pre></p> <p>\u627e\u5230/dev/sda2\u548c/dev/sdb2\u5bf9\u5e94\u7684UUID\uff0c\u4f8b\u5982\uff1a <pre><code>/dev/sda2: UUID=\"xxxx-xxxx\" ...\n/dev/sdb2: UUID=\"yyyy-yyyy\" ...\n</code></pre></p> <p>/mnt/sda2\u548c/mnt/sdb2\u662f\u6302\u8f7d\u70b9\uff0c\u786e\u4fdd\u5b83\u4eec\u5df2\u5b58\u5728\uff1a<code>sudo mkdir -p /mnt/sda2 /mnt/sdb2</code></p> </li> <li> <p>\u7f16\u8f91/etc/fstab\u6587\u4ef6\uff1a     \u6253\u5f00/etc/fstab\u6587\u4ef6\u5e76\u6dfb\u52a0\u4ee5\u4e0b\u5185\u5bb9\uff08\u7528\u5b9e\u9645\u7684UUID\u66ff\u6362xxxx-xxxx\u548cyyyy-yyyy\uff09\uff1a     <pre><code>sudo vim /etc/fstab\n\n# \u5728\u6587\u4ef6\u672b\u5c3e\u6dfb\u52a0\uff1a\n\nUUID=xxxx-xxxx  /mnt/sda2  ext4  defaults  0  2\nUUID=yyyy-yyyy  /mnt/sdb2  ext4  defaults  0  2\n</code></pre></p> <p>ext4\u662f\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b\uff0c\u8bf7\u6839\u636e\u5b9e\u9645\u6587\u4ef6\u7cfb\u7edf\u7c7b\u578b\uff08\u5982ext4\u3001ntfs\u7b49\uff09\u8c03\u6574\u3002 defaults\u9009\u9879\u53ef\u4ee5\u6307\u5b9a\u9ed8\u8ba4\u6302\u8f7d\u53c2\u6570\uff0c0\u8868\u793a\u4e0d\u8fdb\u884c\u5907\u4efd\uff0c2\u8868\u793a\u6587\u4ef6\u7cfb\u7edf\u68c0\u67e5\u7684\u987a\u5e8f\u3002</p> </li> <li> <p>\u6d4b\u8bd5\u6302\u8f7d\uff1a     \u6267\u884c\u4ee5\u4e0b\u547d\u4ee4\uff0c\u786e\u4fdd\u6ca1\u6709\u9519\u8bef\u4fe1\u606f\u8f93\u51fa\uff0c\u6765\u6d4b\u8bd5\u6302\u8f7d\u914d\u7f6e\u662f\u5426\u6b63\u786e\u3002     <pre><code>sudo mount -a\n</code></pre></p> </li> <li> <p>\u91cd\u542f\u7cfb\u7edf\uff1a     \u91cd\u542f\u7cfb\u7edf\uff0c\u68c0\u67e5\u8bbe\u5907\u662f\u5426\u5df2\u81ea\u52a8\u6302\u8f7d\u5230/mnt/sda2\u548c/mnt/sdb2\u3002</p> <p>\u8fd9\u6837\u914d\u7f6e\u540e\uff0c/dev/sda2\u548c/dev/sdb2\u4f1a\u5728\u6bcf\u6b21\u5f00\u673a\u65f6\u81ea\u52a8\u6302\u8f7d\u5230\u6307\u5b9a\u7684\u76ee\u5f55\u4e0b\u3002</p> </li> </ol>"},{"location":"Missing%20semester/NAS/#nfs","title":"NFS \u6307\u5357","text":"<p>\u98de\u4e66NAS\u6307\u5357\u5373\u53ef</p>"},{"location":"Missing%20semester/NAS/#sshfs","title":"\u4f7f\u7528sshfs\u6302\u8f7d\u8fdc\u7a0b\u6587\u4ef6\u5939","text":"<p>\u4f7f\u7528 sshfs \u6302\u8f7d\u8fdc\u7a0b\u6587\u4ef6\u5939\u53ef\u4ee5\u8ba9\u60a8\u50cf\u5728\u672c\u5730\u8bbf\u95ee\u4e00\u6837\u8bbf\u95ee\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u7684\u6587\u4ef6\u3002\u4e0b\u9762\u662f\u4f7f\u7528 sshfs \u6302\u8f7d\u6587\u4ef6\u5939\u7684\u6b65\u9aa4\uff1a</p>"},{"location":"Missing%20semester/NAS/#sshfs_1","title":"\u5b89\u88c5 sshfs","text":"<p>\u5728\u5927\u591a\u6570 Linux \u53d1\u884c\u7248\u4e0a\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u5305\u7ba1\u7406\u5668\u5b89\u88c5 sshfs\u3002\u4f8b\u5982\uff1a <pre><code>sudo apt update\nsudo apt install sshfs\n</code></pre></p> <p>\u6ce8\u610f\uff1a\u5982\u679c\u60a8\u6ca1\u6709 sudo \u6743\u9650\uff0c\u53ef\u80fd\u9700\u8981\u8054\u7cfb\u7cfb\u7edf\u7ba1\u7406\u5458\u5b89\u88c5 sshfs\u3002</p>"},{"location":"Missing%20semester/NAS/#_3","title":"\u521b\u5efa\u6302\u8f7d\u76ee\u5f55","text":"<p>\u5728\u672c\u5730\u521b\u5efa\u4e00\u4e2a\u76ee\u5f55\u7528\u4e8e\u6302\u8f7d\u8fdc\u7a0b\u6587\u4ef6\u5939\u3002\u8fd9\u4e2a\u76ee\u5f55\u6700\u597d\u653e\u5230\u5927\u5bb6\u81ea\u5df1\u7684\u5bb6\u76ee\u5f55\u4e0b\uff1a <pre><code>mkdir ~/remote_folder\nsshfs username@remote_host:/remote/path/to/folder ~/remote_folder\n\n\u2022   username\uff1a\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u7684\u7528\u6237\u540d\n\u2022   remote_host\uff1a\u8fdc\u7a0b\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u6216\u57df\u540d\n\u2022   /remote/path/to/folder\uff1a\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u60a8\u5e0c\u671b\u6302\u8f7d\u7684\u6587\u4ef6\u5939\u8def\u5f84\n\u2022   ~/remote_folder\uff1a\u672c\u5730\u6302\u8f7d\u70b9\u76ee\u5f55\n</code></pre></p>"},{"location":"Missing%20semester/NAS/#_4","title":"\u5378\u8f7d\u76ee\u5f55","text":"<pre><code>fusermount -u ~/remote_folder\n</code></pre> <p>\u6ce8\u610f\u4e8b\u9879</p> <p>\u2022   \u786e\u4fdd\u7f51\u7edc\u8fde\u63a5\u7a33\u5b9a\uff0c\u5426\u5219\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6302\u8f7d\u5931\u8d25\u6216\u4e2d\u65ad\u3002 \u2022   \u5982\u679c\u60a8\u4f7f\u7528\u5bc6\u94a5\u8ba4\u8bc1\uff0c\u53ef\u4ee5\u914d\u7f6e\u514d\u5bc6\u7801\u767b\u5f55\uff0c\u4ee5\u51cf\u5c11\u8f93\u5165\u5bc6\u7801\u7684\u6b21\u6570\u3002</p>"},{"location":"Missing%20semester/NAS/#_5","title":"\u5f00\u673a\u81ea\u52a8\u6302\u8f7d","text":"<ol> <li> <p>\u8bbe\u7f6e SSH \u5bc6\u94a5\u767b\u5f55</p> <p>\u9996\u5148\uff0c\u786e\u4fdd\u914d\u7f6e\u4e86\u514d\u5bc6\u7801\u7684 SSH \u5bc6\u94a5\u8ba4\u8bc1\uff0c\u4ee5\u907f\u514d\u7cfb\u7edf\u5728\u542f\u52a8\u65f6\u9700\u8981\u624b\u52a8\u8f93\u5165\u5bc6\u7801\u3002\u4ee5\u4e0b\u662f\u751f\u6210\u5e76\u914d\u7f6e SSH \u5bc6\u94a5\u7684\u65b9\u6cd5\uff08\u5982\u679c\u5df2\u7ecf\u8bbe\u7f6e\u597d\uff0c\u53ef\u4ee5\u8df3\u8fc7\uff09\uff1a</p> <p><pre><code># ssh-keygen -t rsa\nssh-copy-id username@remote_host # \u7528\u6765\u76f4\u63a5\u590d\u5236\u4f60\u7684\u516c\u94a5\u5230\u76ee\u7684\u4e3b\u673a\n</code></pre> \u8fd9\u6837\u5728\u542f\u52a8\u65f6\uff0c\u7cfb\u7edf\u53ef\u4ee5\u81ea\u52a8\u4f7f\u7528 SSH \u5bc6\u94a5\u767b\u5f55\u3002</p> </li> <li> <p>\u6dfb\u52a0\u6302\u8f7d\u914d\u7f6e\u5230 /etc/fstab</p> <p>\u7f16\u8f91 /etc/fstab \u6587\u4ef6\uff0c\u6dfb\u52a0\u4e00\u884c\u6302\u8f7d\u914d\u7f6e\u3002\u60a8\u9700\u8981\u4f7f\u7528 sudo \u6743\u9650\u6765\u7f16\u8f91\u6b64\u6587\u4ef6\uff1a</p> <pre><code>sudo vim /etc/fstab\n\n# \u5c06\u4e00\u4e0b\u5185\u5bb9\u6dfb\u52a0\nsshfs#username@remote_host:/remote/path/to/folder /local/mount/point fuse.sshfs _netdev,users,idmap=user,IdentityFile=/home/your_username/.ssh/id_rsa,allow_other,reconnect 0 0\n\n\u2022   username\uff1a\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u7684\u7528\u6237\u540d\n\u2022   remote_host\uff1a\u8fdc\u7a0b\u670d\u52a1\u5668\u7684 IP \u5730\u5740\u6216\u57df\u540d\n\u2022   /remote/path/to/folder\uff1a\u8fdc\u7a0b\u670d\u52a1\u5668\u4e0a\u5e0c\u671b\u6302\u8f7d\u7684\u6587\u4ef6\u5939\u8def\u5f84\n\u2022   /local/mount/point\uff1a\u672c\u5730\u6302\u8f7d\u76ee\u5f55\u8def\u5f84\n\u2022   IdentityFile=/home/your_username/.ssh/id_rsa\uff1a\u6307\u5b9a\u4f7f\u7528\u7684 SSH \u79c1\u94a5\u8def\u5f84\n\u2022   allow_other\uff1a\u5141\u8bb8\u5176\u4ed6\u7528\u6237\u8bbf\u95ee\u6302\u8f7d\u7684\u76ee\u5f55\n\u2022   reconnect\uff1a\u5982\u679c\u8fde\u63a5\u4e2d\u65ad\uff0c\u5c1d\u8bd5\u91cd\u65b0\u8fde\u63a5\n</code></pre> <p><code>sudo mount -a</code>\u6d4b\u8bd5\u662f\u5426\u6210\u529f\u6302\u8f7d</p> <p>\u5982\u679c\u6302\u8f7d\u6210\u529f\uff0c\u5219\u8bf4\u660e\u914d\u7f6e\u65e0\u8bef\u3002\u91cd\u542f\u7cfb\u7edf\u540e\uff0csshfs \u5c06\u4f1a\u81ea\u52a8\u6302\u8f7d\u8fdc\u7a0b\u6587\u4ef6\u5939\u3002</p> </li> </ol>"},{"location":"Missing%20semester/copilot/","title":"Github Copilot","text":"<p>\u6458\u8981</p> <p>\u4e2a\u4eba\u8ba4\u4e3aAI\u7b97\u662f21\u4e16\u7eaa\u7684\u4e00\u4e2a\u798f\u7949\u4e86\uff0c\u5ba2\u89c2\u6765\u8bf4\u6211\u4eec\u6709\u5f88\u591a\u6ca1\u6709\u610f\u4e49\u7684\u6587\u7ae0\u6216\u8005\u6587\u5b57\u9700\u8981\u7f16\u5199\u3002\u4e8e\u6b64\u540c\u65f6\uff0cAI\u4e5f\u80fd\u6210\u4e3a\u4e00\u4e2a\u975e\u5e38\u8010\u5fc3\u7684\u8001\u5e08\u6307\u5bfc\u4f60\u7f16\u7a0b\u3002\u5f53\u7136\u5b66\u751f\u8ba4\u8bc1\u7684\u8bdd\uff0c\u4f60\u53ef\u4ee5\u514d\u8d39\u4f7f\u7528AI\u7f16\u7a0b\u5de5\u5177Github Copilot\u3002\u8fd9\u91cc\u5c31\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u5982\u4f55\u6ce8\u518c\u3002</p> <p>Attention\uff1a AI\u4e0d\u662f\u4e07\u80fd\u7684\uff0c\u5b83\u53ea\u662f\u4e00\u4e2a\u5de5\u5177\uff0c\u5b83\u7684\u8f93\u51fa\u9700\u8981\u4f60\u81ea\u5df1\u53bb\u5224\u65ad\u662f\u5426\u6b63\u786e\u3002\u4f60\u7684\u91cd\u8981\u4ee3\u7801\u4e5f\u8bf7\u4e0d\u8981\u901a\u8fc7copilot\u7f16\u5199\uff0c\u56e0\u4e3a\u5b83\u53ef\u80fd\u4f1a\u6cc4\u9732\u4f60\u7684\u4ee3\u7801\uff01</p> <ul> <li>Github Copilot</li> <li>Github Copilot\u6ce8\u518c\u77e5\u4e4e\u6559\u7a0b</li> </ul>"},{"location":"Missing%20semester/copilot/#1","title":"1. \u6ce8\u518c","text":"<ol> <li>\u4e2a\u4eba\u8ba4\u4e3a\u65e0\u8bba\u9605\u8bfb\u4efb\u4f55\u4e00\u4e2a\u535a\u4e3b\u7684\u6559\u7a0b,\u4f60\u90fd\u9700\u8981\u7ed3\u5408\u81ea\u5df1\u7684\u5b9e\u9645\u60c5\u51b5\u6765\u505a\u7684</li> <li>\u6211\u662f\u7ed3\u5408\u4e0a\u65b9\u77e5\u4e4e\u7684\u6559\u7a0b\u8ba4\u8bc1\u7684,\u6545\u5e95\u4e0b\u53ea\u662f\u4e00\u4e2a\u7b80\u77ed\u7684\u6307\u5f15.</li> </ol> <ol> <li>\u9996\u5148\u4f60\u9700\u8981\u4e00\u4e2aGitHub\u8d26\u53f7\uff0c\u5982\u679c\u4f60\u6ca1\u6709\u7684\u8bdd\u53ef\u4ee5\u53bb\u6ce8\u518c\u4e00\u4e2a\u3002(\u521a\u6ce8\u518c\u5b8c\u7684\u7528\u6237\u597d\u50cf\u5f97\u7b49\u51e0\u5929\u624d\u80fd\u7533\u8bf7)</li> <li>\u7136\u540e\u4f60\u9700\u8981\u4e00\u4e2a\u5b66\u751f\u8ba4\u8bc1\uff0c\u4f60\u53ef\u4ee5\u901a\u8fc7\u5b66\u6821\u90ae\u7bb1\u8ba4\u8bc1\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u5b66\u751f\u8bc1\u8ba4\u8bc1\u3002\u5982\u679c\u4f60\u662f\u56fd\u5185\u7684\u8bdd\uff0c\u5efa\u8bae\u4f60\u4f7f\u7528\u5b66\u751f\u8bc1\u8ba4\u8bc1\uff0c\u56e0\u4e3a\u56fd\u5185\u7684\u5b66\u6821\u90ae\u7bb1\u5f88\u591a\u90fd\u662f\u4e0d\u652f\u6301\u7684\u3002</li> <li>\u6211\u524d\u4e24\u6b21\u90fd\u6ca1\u6709\u901a\u8fc7, \u6700\u540e\u5c06\u5b66\u4fe1\u7f51\u4e0a\u7684\u62a5\u544a\u7ffb\u8bd1\u6210\u82f1\u6587(\u6ce8\u610f\u53ef\u4ee5\u6dfb\u52a0remote study),\u5373\u53ef\u901a\u8fc7</li> <li>\u5927\u6982\u7b49\u4e2a\u4e09\u56db\u5929\u7684\u65f6\u95f4\u4f60\u4f1a\u6536\u5230\u8ba4\u8bc1\u6210\u529f\u7684\u90ae\u7bb1\u6d88\u606f,\u7136\u540e\u6253\u5f00github plans and usage\u53bbenable \u4f60\u7684copilot\u5c31\u597d\u5566!</li> </ol>"},{"location":"Missing%20semester/copilot/#2","title":"2. \u4f7f\u7528\u6280\u5de7","text":"<ol> <li>\u4f60\u53ef\u4ee5\u81ea\u884c\u7f16\u5199\u6ce8\u91ca\uff0c\u5b83\u4f1a\u6839\u636e\u4f60\u7684\u6ce8\u91ca\u751f\u6210\u4ee3\u7801\u3002</li> <li>\u4f60\u53ef\u4ee5\u7f16\u5199markdown\u6587\u4ef6\u65f6\u8c03\u7528copilot\uff0c\u4ed6\u771f\u7684\u76f8\u5f53\u667a\u80fd\uff08\u6bd4\u5982\u6211\u7f16\u5199\u79bb\u6563\u8d44\u6599\u7684\u65f6\u5019\u5b83\u4f1a50%\u4ee5\u4e0a\u7684\u5185\u5bb9\u90fd\u53ef\u4ee5\u63a8\u65ad\u6b63\u786e\uff0c\u5927\u5e45\u5ea6\u52a0\u5feb\u4f60\u7684\u6548\u7387\uff09\u3002\u5f53\u7136\u4e00\u4e9b\u65e0\u610f\u4e49\u7684\u5b9e\u9a8c\u62a5\u544a\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8fd9\u79cd\u65b9\u5f0f\u7f16\u5199\u3002</li> <li>\u6b64\u5916\u4f60\u53ef\u4ee5\u4e0b\u8f7dGitHub copilot chat\u63d2\u4ef6\uff0c\u53ef\u4ee5\u5f53\u4f5c\u4e00\u4e2agpt\u6765\u4f7f\u7528\u3002\u540c\u65f6\u4e00\u4e2a\u5c0f\u6280\u5de7\u5c31\u662f\u4f60\u53ef\u4ee5\u6dfb\u52a0 <code>@workspace</code>, \u5b83\u4f1a\u5bfc\u5165\u4f60\u6574\u4e2a\u9879\u76ee\u4f5c\u4e3a\u53c2\u8003\u8d44\u6599</li> <li>\u4e8e\u6b64\u540c\u65f6\uff0c\u5982\u679c\u4f60\u4f7f\u7528vscode\uff0c\u76f8\u4fe1\u4f60\u4e00\u5b9a\u662f\u4f1a\u4f7f\u7528terminal\u7684\u3002\u5f53\u4f60\u7684terminal\u51fa\u73b0\u62a5\u9519\uff0c\u4f60\u53ef\u4ee5\u70b9\u51fb\u5de6\u8fb9\u7684\u661f\u661f\uff0c\u4ed6\u4f1a\u5e2e\u4f60\u5206\u6790\u95ee\u9898\u3002</li> <li>\u52fe\u9009\u4ee3\u7801\u5e76\u6309\u4e0b<code>ctrl+I</code>\uff0c\u8f93\u5165<code>/doc</code>\u5b83\u4f1a\u5e2e\u4f60\u81ea\u52a8\u6dfb\u52a0\u6ce8\u91ca\u3002</li> </ol>"},{"location":"Missing%20semester/ssh/","title":"Ssh","text":"<p>\u8981\u914d\u7f6eSSH\u4ec5\u5141\u8bb8\u901a\u8fc7\u5bc6\u94a5\u8ba4\u8bc1\u800c\u7981\u6b62\u5bc6\u7801\u767b\u5f55\uff0c\u53ef\u4ee5\u6309\u7167\u4ee5\u4e0b\u6b65\u9aa4\u64cd\u4f5c\uff1a</p> <pre><code>1.  \u751f\u6210SSH\u5bc6\u94a5\u5bf9\uff08\u5982\u679c\u8fd8\u6ca1\u6709\u5bc6\u94a5\uff09\uff1a\n</code></pre> <p>\u5728\u5ba2\u6237\u7aef\u673a\u5668\u4e0a\u8fd0\u884c\u4ee5\u4e0b\u547d\u4ee4\u751f\u6210SSH\u5bc6\u94a5\u5bf9\uff1a</p> <p>ssh-keygen -t rsa -b 4096</p> <p>\u6309\u63d0\u793a\u9009\u62e9\u5bc6\u94a5\u5b58\u653e\u8def\u5f84\uff08\u9ed8\u8ba4\u662f ~/.ssh/id_rsa\uff09\u5e76\u8bbe\u7f6e\u5bc6\u94a5\u7684\u5bc6\u7801\uff08\u53ef\u9009\uff09\u3002</p> <pre><code>2.  \u5c06\u516c\u94a5\u4e0a\u4f20\u5230\u670d\u52a1\u5668\uff1a\n</code></pre> <p>\u4f7f\u7528\u4ee5\u4e0b\u547d\u4ee4\u5c06\u516c\u94a5\u4e0a\u4f20\u5230\u670d\u52a1\u5668\uff1a</p> <p>ssh-copy-id username@server_ip</p> <p>\u6216\u8005\u624b\u52a8\u5c06<sub>/.ssh/id_rsa.pub\u5185\u5bb9\u6dfb\u52a0\u5230\u670d\u52a1\u5668\u7684</sub>/.ssh/authorized_keys\u6587\u4ef6\u4e2d\u3002</p> <pre><code>3.  \u4fee\u6539SSH\u914d\u7f6e\u6587\u4ef6\uff1a\n</code></pre> <p>\u5728\u670d\u52a1\u5668\u4e0a\u7f16\u8f91SSH\u914d\u7f6e\u6587\u4ef6 /etc/ssh/sshd_config\uff1a</p> <p>sudo nano /etc/ssh/sshd_config</p> <p>\u7136\u540e\uff0c\u786e\u4fdd\u4ee5\u4e0b\u9009\u9879\u7684\u8bbe\u7f6e\uff1a</p> <p>PasswordAuthentication no PubkeyAuthentication yes</p> <p>\u8fd9\u4e9b\u8bbe\u7f6e\u5c06\u7981\u7528\u5bc6\u7801\u8ba4\u8bc1\uff0c\u4ec5\u5141\u8bb8\u516c\u94a5\u8ba4\u8bc1\u3002</p> <pre><code>4.  \u91cd\u542fSSH\u670d\u52a1\uff1a\n</code></pre> <p>\u4fee\u6539\u914d\u7f6e\u6587\u4ef6\u540e\uff0c\u91cd\u542fSSH\u670d\u52a1\u4ee5\u4f7f\u66f4\u6539\u751f\u6548\uff1a     \u2022   \u5728Debian/Ubuntu\u4e0a\uff1a</p> <p>sudo systemctl restart ssh</p> <pre><code>\u2022   \u5728CentOS/Fedora\u4e0a\uff1a\n</code></pre> <p>sudo systemctl restart sshd</p> <pre><code>5.  \u6d4b\u8bd5\u8fde\u63a5\uff1a\n</code></pre> <p>\u5728\u5ba2\u6237\u7aef\u6d4b\u8bd5\u901a\u8fc7\u5bc6\u94a5\u7684SSH\u8fde\u63a5\uff0c\u4ee5\u786e\u4fdd\u914d\u7f6e\u6210\u529f\u3002</p>"},{"location":"Missing%20semester/toolbox/","title":"\u5de5\u5177\u7bb1\uff08\u4e00\u4e9b\u597d\u7528\u7684\u7f51\u7ad9or\u5206\u4eab\uff09","text":""},{"location":"Missing%20semester/toolbox/#_1","title":"\u5b66\u4e60\u7f51\u7ad9","text":"<ol> <li>CS\u81ea\u5b66\u6307\u5357</li> <li>\u4e00\u4e2a\u67e5\u627e\u624b\u518c</li> <li>\u4e00\u4e2a\u597d\u7528\u7684ChatGPT\u7f51\u7ad9</li> <li>\u540d\u6821\u516c\u5f00\u8bfe\u7a0b\u8bc4\u4ef7\u7f51\u7ad9 </li> <li>LaTex\u6587\u6863\u5206\u4eab</li> <li>\u7535\u5b50\u4e66\u7f51\u7ad9</li> <li>\u5173\u4e8eckc\u4ee5\u53cazju\u7684\u4e00\u4e9b\u8bfe\u7a0b\u8bc4\u4ef7\uff08\u6765\u81eawkx\u5b66\u957f\uff09</li> <li>\u4e00\u4e2a\u5fc5\u987b\u63a8\u8350\u7684\u535a\u4e3b3b1b\uff01\uff01\uff01\uff08\u771f\u7684\u53ef\u89c6\u5316\u6559\u5b66\u975e\u5e38\u975e\u5e38\u597d</li> <li>Git\u56fe\u5f62\u5316\u5b66\u4e60</li> <li>The Algorithm</li> <li>Algorithm &amp; datastructure</li> </ol>"},{"location":"Missing%20semester/toolbox/#_2","title":"\u79d1\u7814","text":"<ol> <li>\u52a8\u624b\u5b66\u6df1\u5ea6\u5b66\u4e60</li> <li>\u6982\u7387\u8bba\u53ef\u89c6\u5316</li> <li>Pytorch chinese version</li> <li>Paper with code</li> <li>paper weekly</li> <li>CCF-deadline</li> <li>Introduction to MLsys</li> <li>\u8bba\u6587AI</li> <li>latex\u8bc6\u522b</li> </ol>"},{"location":"Missing%20semester/toolbox/#_3","title":"\u7f16\u7a0b","text":"<ol> <li>snippet</li> </ol>"},{"location":"Missing%20semester/Docker/","title":"Docker \u7684\u4f7f\u7528","text":""},{"location":"Missing%20semester/Ladder/","title":"\u5899","text":"<p>\u5982\u679c\u4f60\u80fd\u770b\u5230\u8fd9\u91cc\uff0c\u8bf4\u660e\u4f60\u4e5f\u6df1\u77e5\u5229\u5bb3\u4ee5\u53ca\u91cd\u8981\u6027\u4e86\u3002\u4e3e\u4e00\u4e2a\u6211\u81ea\u8eab\u7684\u7b80\u5355\u7684\u4f8b\u5b50\u6765\u8bf4\uff0c\u5f53\u6211\u5927\u4e00\u5bd2\u5047\u60f3\u8981\u5728WSL\u4e0a\u914d\u5236TexLive\u7684\u73af\u5883\u7684\u65f6\u5019\uff0c\u6211\u914d\u7f6e\u4e86\u6574\u6574\u4e09\u5929\uff0c\u53ef\u7531\u4e8e\u5404\u79cd\u539f\u56e0\u5e76\u6ca1\u6709\u914d\u7f6e\u6210\u529f\u3002\u53ef\u5f53\u6211\u5047\u671f\u56de\u53bb\u62e5\u6709ladder\u4e4b\u540e\uff0c\u4f60\u4f1a\u53d1\u73b0\u5916\u9762\u7684\u4e16\u754c\u662f\u5168\u65b0\u7684\u3002Goggle\u7684\u597d\u5904\u8c01\u7528\u8c01\u77e5\u9053\uff08\u6ce8\u610f\u6700\u597d\u82f1\u6587\u641c\u7d22\uff09</p>"},{"location":"Missing%20semester/Ladder/#_2","title":"\u8f6f\u4ef6\u9009\u62e9","text":"<p>\u7531\u4e8e\u6211\u81ea\u5df1\u4e5f\u6ca1\u6709\u8fc7\u591a\u7684\u6bd4\u8f83\u8fc7\uff0c\u6211\u53ea\u8bb0\u5f55\u4e00\u4e9b\u6211\u89c1\u5230\u6216\u8005\u4f7f\u7528\u7684\u3002</p> <p>\u6709\u4e00\u4e2a\u6bd4\u8f83\u957f\u7684\u522b\u7684\u535a\u4e3b\u5199\u7684\u94fe\u63a5\uff0c\u53ef\u4ee5\u53c2\u8003\u3002</p>"},{"location":"Missing%20semester/Ladder/#_3","title":"\u8ff7\u96fe\u901a","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u6211\u820d\u53cb\u63a8\u8350\u77e5\u9053\u7684\u3002\u597d\u5904\u5c31\u662f\u514d\u8d39\uff0c\u574f\u5904\u5c31\u662f\u7f51\u901f\u5f88\u6162\u65e0\u6cd5\u770b\u89c6\u9891\uff08\u4f46\u8c01\u8ba9\u4ed6\u514d\u8d39\u5462\uff1f\uff09\u5982\u679c\u4f60\u6ca1\u6709\u522b\u7684\u592a\u591a\u9700\u6c42\u53ea\u662f\u7b80\u5355\u7684\u641c\u7d22\u4ee5\u53cachatgpt\u7684\u8bdd\uff0c\u8bf7\u4f7f\u7528\u5b83\uff01\u94fe\u63a5</p>"},{"location":"Missing%20semester/Ladder/#clash_glados","title":"Clash + Glados","text":"<p>Clash\u662f\u4e00\u4e2a\u975e\u5e38\u597d\u7528\u7684\u673a\u573a\u8f6f\u4ef6\u4e86\u3002\u800cGlados\u662f\u522b\u4eba\u7ed9\u6211\u63a8\u8350\u7684\uff0c\u597d\u5904\u5c31\u662f\u5927\u578b\u7a33\u5b9a\u4e14\u4ef7\u683c\u5b9e\u60e0\uff08\u5982\u679c\u4f60\u6709edu\u90ae\u7bb1\u751a\u81f3\u53ef\u4ee5\u514d\u8d39\u7528\u4e00\u5e74\uff0c\u6559\u80b2\u4f18\u60e0\uff09\u3002\u81f3\u4e8e\u673a\u573a\u4e0eVPN\u7684\u533a\u522b\u6709\u5f85\u63a2\u7d22\u3002</p> <p>\u4f46\u8fd9\u4e2a\u7684\u95ee\u9898\u5728\u4e8eGlados\u7684\u5b98\u7f51\u662f\u9700\u8981\u5916\u7f51\u624d\u80fd\u767b\u5f55\u7684\u3002\u6240\u4ee5\u4f60\u53ef\u4ee5\u5148\u4e0b\u4e2a\u8ff7\u96fe\u901a\u518d\u4f7f\u7528\u672c\u65b9\u6848\u3002</p> <p>Glados\u7684\u65b9\u6848\u662f\u4e00\u59290.5\u5143\uff0c\u4e00\u4e2a\u6708200G\uff08\u53ef\u4ee5\u770b\u4e00\u4e9b\u7f51\u8bfe\u89c6\u9891\uff0c\u6216\u8005\u662fYoutube\u7b49\u7b49\uff09\uff0c\u7f51\u901f\u7b97\u662f\u6bd4\u8f83\u7a33\u5b9a\u7684\u3002\u63a8\u8350\u5927\u5bb6\u4f7f\u7528\u3002\u4f60\u5145\u503c\u6216\u8005\u6559\u80b2\u4f18\u60e0\u6fc0\u6d3b\u540e\u4f1a\u83b7\u5f97\u4e00\u4e2aURL\uff0c\u4f60\u5c06URL\u590d\u5236\u5230Clash\u7684Profile\u5f53\u4e2d\u5373\u53ef\u3002</p> <p>\u94fe\u63a5\uff1aClash\u4e0b\u8f7d\u5b98\u7f51</p>"},{"location":"Missing%20semester/Ladder/#_4","title":"\u6ce1\u8299\u4e91","text":"<p>\u94fe\u63a5 \u8fd9\u4e2a\u4e5f\u662f\u6211\u53e6\u4e00\u4e2a\u540c\u5b66\u5728\u7528\u7684\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u3002</p>"},{"location":"Missing%20semester/Ladder/#_5","title":"\u624b\u673a\u7aef","text":"<p>\u56e0\u4e3a\u6211\u4e00\u76f4\u662fios\u7528\u6237\uff0c\u5982\u679c\u4f60\u4e5f\u662f\u7684\u8bdd\u53ef\u4ee5\u8003\u8651\u641e\u4e00\u4e2a\u56fd\u5916\u7684\u82f9\u679cid\u8d26\u53f7\u4e0b\u8f7d<code>shadowrockect</code>\u3002\uff08\u8f6f\u4ef6\u5927\u6982\u9700\u898120\u5143\u5de6\u53f3\uff09\uff0c\u7136\u540e\u4f60\u4fbf\u53ef\u4ee5\u4f7f\u7528\u4e86\u3002</p>"},{"location":"Missing%20semester/Latex/","title":"Latex","text":"<p>\u8fd9\u662f\u4e00\u79cd\u7528\u4e8e\u6392\u7248\u7684\u8bed\u8a00\uff0c\u4e13\u4e1a\u8bba\u6587\u5927\u591a\u662f\u7531\u5b83\u7f16\u5199\u5b8c\u6210\u7684\uff0c\u5176\u4e2d\u4e00\u4e9b\u6570\u5b66\u8bed\u6cd5\u4e5f\u53ef\u4ee5\u5d4c\u5957\u5728markdown\u4e2d\u4f7f\u7528\u3002</p> <p>\u7b14\u8bb0</p> note <p>\u4e00\u4e2a\u535a\u4e3b\u7684\u7b80\u660e\u7b14\u8bb0  \u4ee5\u53ca\u672c\u5730\u6709\u4e2a\u6587\u6863</p> Tips <ol> <li>latex\u5199\u4f5c\u6280\u5de7</li> <li>latex\u8bba\u6587\u5199\u4f5c\u6307\u5357</li> </ol> tool <ol> <li>overleaf</li> <li>latex\u8bc6\u522b</li> </ol>"},{"location":"Missing%20semester/Linux/","title":"\u4e00\u4e9b\u7b80\u5355\u7684Linux\u4f7f\u7528","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u5728github\u4e0a\u8d85100k star\u7684\u6559\u7a0b</p> <p>\u6709\u65f6\u95f4\u5efa\u8bae\u53cd\u590d\u9605\u8bfb</p>"},{"location":"Missing%20semester/Linux/#_1","title":"\u73af\u5883","text":"<ol> <li>\u4f60\u53ef\u4ee5\u9009\u62e9\u865a\u62df\u673a\u6765\u4f7f\u7528(\u5efa\u8bae\u4f7f\u7528VMware Station\uff1b\u53ef\u4ee5\u4f7f\u7528Ubuntu\uff1b \u8bb0\u5f97\u6700\u597d\u66f4\u6362\u4e0b\u4e0b\u8f7d\u6e90\uff0c\u53ef\u4ee5\u662fzuj_mirrorsor\u6e05\u534e\u6e90)</li> <li>\u6216\u8005\u4f7f\u7528WSL\u6765\u64cd\u4f5c</li> </ol>"},{"location":"Missing%20semester/Linux/#_2","title":"\u5b66\u4e60\u5efa\u8bae","text":"<p>\u5173\u4e8eLinux\u7684\u5b66\u4e60\uff0c\u9996\u5148\u5173\u4e8e\u4e66\u7c4d\uff0c\u6211\u63a8\u8350\u4e00\u672cLinux\u7a0b\u5e8f\u8bbe\u8ba1\uff08\u6682\u672a\u627e\u5230\u7535\u5b50\u4e66\uff09\u3002\u8fd9\u672c\u6bd4\u8f83\u6982\u62ec\u6027\u7684\u8bb2\u5230\u4e86\u4f60\u6240\u9700\u8981\u5b66\u4e60\u7684\u5927\u591a\u6570linux\u7684\u77e5\u8bc6\u3002\u6709\u793a\u4f8b\uff0c\u6bd4\u8f83\u5165\u95e8\uff0c\u5927\u6982\u4e24\u4e09\u5929\u5c31\u53ef\u4ee5\u6709\u4e2a\u521d\u6b65\u7684\u5b66\u4e60\uff0c\u4f46\u662f\u5341\u5206\u6d45\u5c1d\u8f84\u6b62\u3002</p> <p>\u8fdb\u9636\u4e00\u70b9\u7684\u4e66\u7c4d\u7684\u8bdd\u63a8\u8350linux\u5c31\u8be5\u8fd9\u6837\u5b66\u548c\u9e1f\u54e5\u7684Linux\u79c1\u623f\u83dc</p>"},{"location":"Missing%20semester/Linux/#_3","title":"\u4e00\u4e9b\u4e9b\u57fa\u7840\u77e5\u8bc6","text":"<ul> <li><code>man + \u5e26\u67e5\u8be2\u5185\u5bb9</code>\u4e00\u4e2a\u975e\u5e38\u597d\u7528\u7684\u547d\u4ee4\uff0c\u53ef\u4ee5\u5e2e\u52a9\u4f60\u67e5\u8be2\u624b\u518c\u3002\uff08\u4e0d\u5149\u662f\u4e00\u4e9b\u547d\u4ee4\uff0c\u8fd8\u6709\u4e00\u4e9bc\u8bed\u8a00\u7684\u4e1c\u897f\uff09</li> <li><code>info</code>\u5728\u7ebf\u6587\u6863\u7cfb\u7edf\u3002\uff08\u57fa\u7840\u64cd\u4f5c\uff1a \u7528shift+h\u5524\u9192\u5e2e\u52a9\u3002space \u548c ctrl+h\u53ef\u4ee5\u4e0a\u4e0b\u7ffb\u9875\u7b49\u7b49\uff09</li> <li>\u6587\u4ef6\u7cfb\u7edf\u662f\u5728<code>/</code>\u76ee\u5f55\u4e0b\u7684\uff0c\u8fdb\u5165\u7cfb\u7edf\u4f1a\u9ed8\u8ba4\u8fdb\u5165<code>/home/user</code>\u3002</li> <li><code>apt \u6216 brew</code>\u662fUbuntu\u548cMacOS\u4e0b\u7684\u5305\u7ba1\u7406\u5668\uff0c\u7528\u6765\u4e0b\u8f7d\u548c\u5b89\u88c5</li> <li>\u6709\u4e00\u4e9b\u7528\u6237\u4e0a\u7684\u64cd\u4f5c\u6211\u4eec\u4e4b\u540e\u8865\u5145\u3002</li> <li><code>alias</code>\u53ef\u4ee5\u81ea\u5b9a\u4e49\u6587\u4ef6\u64cd\u4f5c\u7684\u522b\u79f0\u3002</li> <li>\u4e0b\u8f7d\u8f6f\u4ef6\uff08tar\u538b\u7f29\u5305\u7248\uff09\uff08snap\u6216\u8005\u5e94\u7528\u5546\u5e97\uff09(<code>cur</code>l \u6216\u8005 <code>wget</code>)</li> <li>su\u7528\u6237\u4f1a\u662f'#';\u666e\u901a\u7528\u6237\u662f'$'</li> </ul>"},{"location":"Missing%20semester/Linux/#_4","title":"\u6587\u4ef6\u64cd\u4f5c","text":"<ul> <li>\u6d89\u53ca\u5230\u76ee\u5f55\u7684\u64cd\u4f5c\uff0c\u6211\u4eec\u4f1a\u7528<code>ls</code>\u6765\u663e\u793a\u5f53\u524d\u6587\u4ef6\u5939\u4e0b\u7684\u6240\u6709\u5185\u5bb9\u3002\uff08-a\u663e\u793a\u6240\u6709\uff1b-l \u4e3a\u957f\u683c\u5f0f\u663e\u793a\uff0c\u53ef\u53e0\u52a0\u4f7f\u7528\uff0c\u5982\uff1a<code>ls -hla</code>\uff09</li> <li>\u7528<code>mkdir</code>\u521b\u5efa\u6587\u4ef6\u5939\uff08\u7528 -m \u8bbe\u7f6e\u53c2\u6570\uff0c\u4f8b\u5982\uff1a<code>mkdir -m 777 tsk</code>,777\u8868\u793a\u6240\u6709\u7684\u7528\u6237\u6597\u9c7crwx\u7684\u6743\u9650\uff09</li> <li><code>chmod</code>\u53ef\u4ee5\u7528\u6765\u66f4\u6539\u6743\u9650\u3002\uff08r\u4ee3\u8868read\uff0cw\u4ee3\u8868write\uff0cx\u4ee3\u8868\u53ef\u6267\u884c\uff09<code>chgrp</code>\u7528\u6765\u66f4\u6539\u6587\u4ef6\u6216\u76ee\u5f55\u7684\u6240\u5c5e\u7ec4\u3002</li> <li><code>rmdir</code>\u662f\u5220\u9664\u6587\u4ef6\u5939\u3002\u6216\u8005<code>rm</code>\uff08\u7528-r\u53ef\u4ee5\u5220\u9664\u975e\u7a7a\u6587\u4ef6\u5939\uff09</li> <li><code>cd</code>\u5207\u6362\u76ee\u5f55\uff08<code>..</code>\u662f\u4e0a\u4e00\u7ea7\u76ee\u5f55\uff0c\u6216\u8005\u76f4\u63a5\u4ece<code>/</code>\u76ee\u5f55\u5f00\u59cb\u7684\u7edd\u5bf9\u8def\u5f84\u53bb\u64cd\u4f5c\uff09</li> <li><code>gedit</code>\u6216\u8005<code>vim</code>\u662f\u4e24\u79cd\u6587\u672c\u7f16\u8f91\u5668\u3002\u7b2c\u4e00\u79cd\u53ef\u4ee5\u53ef\u89c6\u5316\uff0c\u7b2c\u4e8c\u4e2a\u4f1a\u6709\u8bb8\u591a\u5feb\u6377\u952e\u64cd\u4f5c\u3002vim\u7684\u64cd\u4f5c\u4f1a\u5728\u53e6\u4e00\u4e2a\u6587\u4ef6\u8bb0\u5f55\u3002</li> <li><code>mv</code> \u4ee3\u8868\u4e3a\u6587\u4ef6\u6478\u7740\u76ee\u5f55\u6539\u540d\u3002\u6216\u8005\u5c06\u6587\u4ef6\u79fb\u52a8\u4f4d\u7f6e\u3002\uff08\u7c7b\u4f3cctrl+x\uff09\uff08<code>*</code>\u53ef\u4ee5\u4ee3\u8868\u7740\u6587\u4ef6\u5939\u4e0b\u6240\u6709\u4e1c\u897f\uff0c\u6216\u8005<code>*.c</code>\u610f\u5473\u7740\u5f53\u524d\u6587\u4ef6\u5939\u4e0b\u6240\u6709.c\u6587\u4ef6</li> <li><code>cp</code>\u662f\u5c06\u6587\u4ef6\u6216\u76ee\u5f55\u590d\u5236\u5230\u5176\u4ed6\u76ee\u5f55\u4e0b\u9762  </li> <li><code>grep anon *.conf</code>\u4ee3\u8868\u5728\u5f53\u524d\u6587\u4ef6\u5939\u4e0b\uff0c\u6240\u6709.conf\u6587\u4ef6\u4e2d\u641c\u7d22anon\u5b57\u7b26\u4e32\u7684\u4e1c\u897f\u3002</li> <li><code>find / -name hello.c</code>\u5728\u6240\u6709\u76ee\u5f55\u4e0b\u5bfb\u627e\u540d\u5b57\u662fhello.c\u7684\u6587\u4ef6\u3002</li> <li><code>head  tail</code>\u53ef\u4ee5\u7528\u6765\u67e5\u770b\u6587\u4ef6\u7684\u5934\u548c\u5c3e\u90e8\u7684\u5185\u5bb9</li> <li><code>wc</code>\u7528\u6765\u7edf\u8ba1\u6587\u4ef6\u884c\u6570\u5355\u8bcd\u6570\u7b49\uff08\u5982-m\u5b57\u7b26\u6570\uff0c-l\u6587\u4ef6\u884c\u6570\uff09</li> <li><code>gzip</code>\u538b\u7f29\uff08-d\u662f\u89e3\u538b\u7f29\uff09\uff08\u6ce8\u610f\uff01\uff1agzip\u538b\u7f29\u6587\u4ef6\u540e\u6e90\u6587\u4ef6\u4f1a\u81ea\u52a8\u5220\u9664\uff09</li> <li><code>tar</code>\u4e5f\u662f\u4e00\u4e2a\u975e\u5e38\u5e38\u7528\u7684\u547d\u4ee4\uff0c\u7528\u6765\u6253\u5305\u6587\u4ef6\uff0c\u51e0\u4e4e\u53ef\u4ee5\u5de5\u4f5c\u4e8e\u4efb\u4f55\u73af\u5883\u3002</li> </ul> <p>\uff08\u7b80\u5355\u7684\u547d\u4ee4<code>tar -cvf home.tar ./home</code>\u628a\u6839\u76ee\u5f55\u4e0b\u7684home\u6587\u4ef6\u5939\u6253\u5305\u6210home.tar\uff1b<code>-xvf</code>\u5c31\u662f\u89e3\u538b\uff09</p> <ul> <li><code>mount \u548cumount</code>\u4e00\u822c\u6765\u8bf4\u662f\u914d\u5408u\u76d8\u4f7f\u7528\u3002\u4f60\u4e5f\u53ef\u4ee5\u5728<code>wsl</code>\u4e0b\u770b\u5230\u6211\u4eecwindows\u672c\u673a\u7684\u4e1c\u897f\u90fd\u6302\u8f7d\u5230/mnt\u6587\u4ef6\u5939\u4e0b\uff09</li> </ul>"},{"location":"Missing%20semester/Linux/#_5","title":"\u7ed3\u8bed","text":"<p>Linux\u53ef\u4ee5\u8bf4\u662f\u65e0\u8bba\u4f60\u8eab\u5904\u4f55\u5730\uff0c\u5f88\u591a\u4eba\u90fd\u4f1a\u9ed8\u8ba4\u4f60\u4f1a\u4f46\u662f\u5b66\u6821\u53c8\u4e0d\u4f1a\u600e\u4e48\u6559\u4f60\u53bb\u4f7f\u7528\u5b83\u3002 \u76f8\u4fe1\u4f60\u6709\u4ee5\u4e0a\u8fd9\u4e9b\u77e5\u8bc6\u4f60\u5c31\u53ef\u4ee5\u8fdb\u884c\u4e00\u4e9b\u57fa\u7840\u7684\u4f7f\u7528\u4e86\uff0c\u5feb\u53bb\u5f00\u542f\u4f60\u7684Linux\u63a2\u7d22\u4e4b\u65c5\u5427\uff01 \u6211\u59cb\u7ec8\u575a\u4fe1\u5b9e\u8df5\u624d\u662f\u6700\u5feb\u7684\u5b66\u4e60\u65b9\u6cd5\uff0c\u5728\u6211\u5b66\u4e60\u7684\u8fc7\u7a0b\u5f53\u4e2d\uff0c\u5f88\u591a\u547d\u4ee4\u90fd\u662f\u8fb9\u67e5\u5e76\u4e14\u4e0d\u65ad\u4f7f\u7528\u4f60\u5c31\u81ea\u7136\u800c\u7136\u5c31\u5b66\u4f1a\u4e86\u3002 \u4e00\u4e9b\u66f4\u9ad8\u7ea7\u7684\u7528\u6cd5\u8bf7\u770b\u672c\u7ae0\u5176\u4ed6\u5185\u5bb9\u3002</p>"},{"location":"Missing%20semester/Linux/C/","title":"Linux\u4e2d\u5e38\u89c1\u7684C\u8bed\u8a00\u7f16\u7a0b\u6280\u5de7","text":"<ul> <li>Linux\u4e2d\u5e38\u89c1\u7684C\u8bed\u8a00\u7f16\u7a0b\u6280\u5de7<ul> <li>The C program under linux</li> <li>Makefile</li> <li>GDB</li> </ul> </li> </ul>"},{"location":"Missing%20semester/Linux/C/#the_c_program_under_linux","title":"The C program under linux","text":"<ol> <li>\u6211\u4eec\u4e00\u822c\u4f7f\u7528\u7684C\u8bed\u8a00\u7f16\u8bd1\u5668\u662f<code>gcc</code>\uff0c\u5e38\u89c1\u7684\u683c\u5f0f\u662f<code>gcc -o hello hello.c</code>\uff08<code>-o</code>\u7684\u610f\u601d\u662f\u6307\u5b9a\u751f\u6210\u6587\u4ef6\u7684\u547d\u540d\uff1b\u672a\u6307\u5b9a\u7684\u8bdd\u662f\u4ea7\u751f\u7684\u6587\u4ef6\u540d\u662f<code>a.out</code>\uff09\u3002Linux\u73af\u5883\u4e0b\u6211\u4eec\u662f\u7528<code>./hello</code>\u7528\u6765\u6267\u884c\u6587\u4ef6.</li> </ol> <p>\u9759\u6001\u94fe\u63a5\u5e93\uff08.a)\u3001\u6c47\u7f16\u8bed\u8a00\u6e90\u6587\u4ef6\uff08.s)\u3001\u9884\u5904\u7406\u8f93\u51fa\u6587\u4ef6\uff08.i\uff09\u3001 \u76ee\u6807\u4ee3\u7801(.o)\u3001 \u5171\u4eab\u51fd\u6570\u5e93\uff08.so)</p> <p>\u5e76\u4e14gcc\u5728\u7f16\u8bd1\u7684\u65f6\u5019\u9ed8\u8ba4\u4f7f\u7528\u52a8\u6001\u94fe\u63a5\u5e93\uff0c\u7f16\u8bd1\u94fe\u63a5\u65f6\u5e76\u4e0d\u628a\u5e93\u6587\u4ef6\u7684\u4ee3\u7801\u52a0\u5165\u5230\u5176\u4e2d\uff0c\u800c\u662f\u5728\u7a0b\u5e8f\u6267\u884c\u7684\u65f6\u5019\u5e26\u592a\u52a0\u8f7d\u94fe\u63a5\u5e93\uff0c\u8fd9\u6837\u53ef\u4ee5\u8282\u7ea6\u7cfb\u7edf\u5f00\u9500\u3002</p> \u9009\u9879 \u4f5c\u7528 -g \u521b\u5efa\u7528\u4e8egdb\u7684\u7b26\u53f7\u8868\u548c\u8c03\u8bd5\u4fe1\u606f -I/-lm \u8fde\u63a5\u5e93\u6587\u4ef6/\u4f1a\u81ea\u52a8\u9009\u62e9\u5171\u4eab\u5e93 -m \u6839\u636e\u6307\u5b9a\u7684cpu\u4f18\u5316\u4ee3\u7801 -w \u5ffd\u7565\u8b66\u544a -O \u5927\u5199\u7684O\uff0c\u662f\u6307\u7f16\u8bd1\u5668\u81ea\u5df1\u5bf9\u4ee3\u7801\u8fdb\u884c\u4f18\u5316\uff08\u4f46\u8fd9\u4e2a\u4f18\u5316\u6709\u4e9b\u65f6\u5019\u53ef\u80fd\u4f1a\u6539\u53d8\u539f\u6709\u4ee3\u7801\u7684\u5b9e\u9645\u76ee\u7684\uff09 -Wall \u5141\u8bb8\u53d1\u51fagcc\u63d0\u4f9b\u7684\u6240\u6709\u6709\u7528\u7684\u8b66\u544a\u4fe1\u606f -E \u53ea\u8fdb\u884c\u9884\u7f16\u8bd1 -S \u8df3\u8fc7\u6c47\u7f16\u548c\u94fe\u63a5\u7684\u9636\u6bb5\uff0c\u5e76\u4fdd\u7559\u4ea7\u751f\u7684\u6c47\u7f16\u4ee3\u7801\uff08.s file) -v \u4ea7\u751f\u5c3d\u53ef\u80fd\u591a\u7684\u4fe1\u606f\uff08\u5e38\u7528\uff09 -c \u8df3\u8fc7\u94fe\u63a5\u6b65\u9aa4\uff0c\u7f16\u8bd1\u6210\u76ee\u6807\u6587\u4ef6\uff08.o) (\u53ef\u4ee5\u7528\u4e8e\u591a\u6587\u4ef6\u7f16\u8bd1) -I \u5728\u5934\u6587\u4ef6\u4e2d\u6dfb\u52a0dir\u76ee\u5f55 -L \u5728\u5e93\u6587\u4ef6\u7684\u641c\u7d22\u8def\u5f84\u5217\u8868\u4e2d\u6dfb\u52a0dir\u76ee\u5f55 -static \u94fe\u63a5\u9759\u6001\u5e93 - library \u8fde\u63a5\u540d\u4e3alibrary\u7684\u5e93\u6587\u4ef6 <p>gcc \u53ef\u4ee5\u5f00 -march=native \u6765\u907f\u514d\u901a\u7528\u6027\uff0c\u9002\u7528\u4e8e\u672c\u5730\u3002 2. \u5177\u4f53\u7684\u5199\u5e93\u7684\u8fc7\u7a0b\u53ef\u4ee5\u770b\u300aLinux\u7a0b\u5e8f\u8bbe\u8ba1\u300bp118.</p>"},{"location":"Missing%20semester/Linux/C/#makefile","title":"Makefile","text":"<p>\u6211\u4eec\u5e38\u8bf4\u7684Makefile\u5c31\u662fGNU make.\u5b83\u80fd\u591f\u5e2e\u52a9\u6211\u4eec\u5feb\u901f\u5b8c\u6210\u7f16\u8bd1\uff08\u4f7f\u5df2\u7ecf\u7f16\u8bd1\u8fc7\u4e14\u672a\u6539\u52a8\u7684\u6587\u4ef6\u4e0d\u518d\u7f16\u8bd1\uff09\u3002\u591a\u6570\u540c\u5b66\u5728c\u7a0b\u5e8f\u8bbe\u8ba1\u4e13\u9898\u4e2d\u5df2\u7ecf\u6709\u6240\u4e86\u89e3\u4e86\u3002\u8fd9\u91cc\u6709\u4e00\u4e2a\u6df1\u5165\u6d45\u51fa\u7684\u624b\u518c\u653e\u5728\u8fd9\u91cc\u3002\u6211\u4f1a\u628a\u4e00\u4e9b\u91cd\u8981\u7684\u5185\u5bb9\u8bb0\u5f55\u5728\u4e0b\u9762\u3002</p> <ol> <li>\u547d\u4ee4\u683c\u5f0f\uff1a</li> </ol> <p><code>make [\u9009\u9879] [make\u5de5\u7a0b\u6587\u4ef6]</code></p> \u9009\u9879 \u4f5c\u7528 -d \u663e\u793a\u8c03\u8bd5\u4fe1\u606f -f \u4f7f\u7528\u6307\u5b9a\u6587\u4ef6\u4f5c\u4e3a\u4f9d\u8d56\u5173\u7cfb\u6587\u4ef6 -n \u4e0d\u6267\u884cmakefile\u7684\u547d\u4ee4\uff0c\u53ea\u662f\u663e\u793a\u8f93\u51fa\u8fd9\u4e9b\u547d\u4ee4 <ol> <li>\u7f16\u5199makefile</li> </ol> <p>\u200b   makefile\u6587\u4ef6\u4e2d\u901a\u5e38\u5305\u542b\u4ee5\u4e0b\u7684\u4fe1\u606f\uff1a</p> <p>\u200b   \uff081\uff09 \u9700\u8981\u7531make\u5de5\u5177\u521b\u5efa\u7684\u76ee\u6807\u4f53\uff08target\uff09\uff0c\u901a\u5e38\u662f\u76ee\u6807\u6587\u4ef6\u6216\u53ef\u6267\u884c\u6587\u4ef6\u3002</p> <p>\u200b   \uff082\uff09\u8981\u521b\u5efa\u76ee\u6807\u6240\u4f9d\u8d56\u7684\u6587\u4ef6\u3002</p> <p>\u200b   \uff083\uff09\u521b\u5efa\u6bcf\u4e2a\u76ee\u6807\u4f53\u65f6\u9700\u8981\u7684\u547d\u4ee4\u3002</p> <p>\u200b   makefile\u7684\u4e66\u5199\u89c4\u5219\uff1a</p> <p>\u76ee\u6807\u6587\u4ef6\uff1a\u4f9d\u8d56\u6587\u4ef6</p> <p>\uff08Tab\uff09\u4ea7\u751f\u76ee\u6807\u6587\u4ef6\u7684\u547d\u4ee4</p> <ol> <li> <p><code>\u5e38\u7528\u6e05\u9664\u4e2d\u95f4\u7684\u6587\u4ef6\uff1a    clean:     rm -f *.o</code></p> </li> <li> <p>Makefile\u4e2d\u4e3a\u4e86\u4f7f\u53ef\u7ef4\u62a4\u6027\u8f83\u9ad8\uff0c\u6211\u4eec\u901a\u5e38\u4f1a\u8bbe\u7f6e\u73af\u5883\u53d8\u91cf\u3002\u4e00\u822c\u662f\u7528\u5927\u5199\u3002</p> </li> <li> <p>makefile\u4e2d\u5e38\u89c1\u9884\u5b9a\u4e49\u53d8\u91cf\uff08\u56e0\u4e3a\u8fd8\u6ca1\u7528\u5230\uff0c\u6240\u4ee5\u5148\u4e0d\u5199\u4e86\uff0c\u4e4b\u540e\u518d\u8865\u5145\uff09</p> </li> <li> <p>makefile\u4e2d\u5e38\u89c1\u7684\u81ea\u52a8\u53d8\u91cf</p> </li> </ol> \u547d\u4ee4\u683c\u5f0f \u542b\u4e49 $* \u4e0d\u5305\u542b\u6269\u5c55\u540d\u7684\u76ee\u6807\u6587\u4ef6\u540d\u79f0 $+ \u6240\u6709\u7684\u4f9d\u8d56\u6587\u4ef6\uff0c\u4ee5\u7a7a\u683c\u5206\u5f00\uff0c\u4ee5\u51fa\u73b0\u7684\u5148\u540e\u4e3a\u5e8f\uff0c\u53ef\u80fd\u91cd\u590d $&lt; \u7b2c\u4e00\u4e2a\u4f9d\u8d56\u6587\u4ef6\u7684\u540d\u79f0 $? \u6240\u6709\u65f6\u95f4\u6233\u6bd4\u76ee\u6807\u6587\u4ef6\u665a\u7684\u4f9d\u8d56\u6587\u4ef6 $@ \u76ee\u6807\u6587\u4ef6\u7684\u5b8c\u6574\u540d\u79f0 $^ \u6240\u6709\u4e0d\u91cd\u590d\u7684\u4f9d\u8d56\u6587\u4ef6\uff0c\u4ee5\u7a7a\u683c\u9694\u5f00 $% \u5982\u679c\u76ee\u6807\u662f\u5f52\u6863\u6210\u5458\uff0c\u5219\u8be5\u53d8\u91cf\u8868\u793a\u76ee\u6807\u7684\u5f52\u6863\u6210\u5458\u540d\u79f0 <pre><code>SRC = ..\\..\\src\\acllib.c\nINCLUDE_DIR = ..\\..\\src\nLIB = gdi32 ole32 oleaut32 uuid winmm msimg32\n\nall : keyboard mouse_move \n\nkeyboard :\n    gcc $(SRC) $@.c -I$(INCLUDE_DIR) $(LIB:%=-l%) -DWINVER=0x0501 -o $@\n\nmouse_move :\n    gcc $(SRC) $@.c -I$(INCLUDE_DIR) $(LIB:%=-l%) -DWINVER=0x0501 -o $@\n</code></pre> <pre><code>main: main.o a.o b.o\n    gcc -o main.o a.o b.o\nmain.o: main.c a.h b.h\n    gcc -c main.c\na.o: a.c a.h\n    gcc -c a.c\nb.o: b.c b.h\n    gcc -c b.c\n\n# simple version\nmain: main.o a.o b.o\n    gcc  -o $@ $^\n..c.o: \n    gcc -c $&lt;\n</code></pre> <ol> <li>\u5c0f\u7ed3\uff1amakefile\u6587\u4ef6\u4e3b\u8981\u5305\u542b\u4e94\u90e8\u5206\u5185\u5bb9\uff1a\u663e\u793a\u89c4\u5219\u3001\u996e\u98df\u89c4\u5219\u3001\u53d8\u91cf\u5b9a\u4e49\u3001\u6587\u4ef6\u53ea\u662f\u548c\u6ce8\u91ca\u3002</li> </ol>"},{"location":"Missing%20semester/Linux/C/#gdb","title":"GDB","text":"<p>GDB\u7684\u5168\u79f0\u662f\uff08GNU Debugger\uff09\uff0c\u7528\u4e8e\u8c03\u8bd5c\u3001c++\u7b49\u6587\u4ef6\u3002\u5f53\u7136\u547d\u4ee4\u884c\u4e0a\u7684\u4e1c\u897f\u5bf9\u4e8e\u521d\u5b66\u8005\u4e00\u5b9a\u662f\u4e0d\u600e\u4e48\u597d\u7528\u7684\uff0c\u6211\u4e5f\u8ba4\u4e3a\u5bf9\u4e8e\u521a\u5165\u95e8\u7684\u540c\u5b66\u6765\u8bf4\u4e0d\u5fc5\u6025\u7740\u53bb\u5b66\u4e60\u8fd9\u4e9b\u5de5\u5177\uff08vscode\u4e2d\u7684\u8c03\u8bd5\u6709\u5185\u5d4cgdb\uff09\u3002\u5f53\u4f60\u771f\u6b63\u6709\u8fd9\u4e9b\u9700\u6c42\u7684\u65f6\u5019\u4f60\u81ea\u7136\u800c\u7136\u4f1a\u81ea\u5df1\u53bb\u5b66\u4e60\u3002</p>"},{"location":"Missing%20semester/Linux/WSL/","title":"WSL\u5b89\u88c5\u8bb0\u5f55","text":"<p>\u8be6\u60c5\u53ef\u4ee5\u89c1\u5b98\u7f51\uff0c\u57fa\u672c\u4e0a\u7167\u7740\u505a\u5c31\u6ca1\u4ec0\u4e48\u95ee\u9898\uff0c\u6211\u4f1a\u5c06\u8fc7\u7a0b\u4ee5\u53ca\u5176\u4e2d\u78b0\u5230\u7684\u4e00\u4e9b\u95ee\u9898\u8bb0\u5f55\u5728\u4e0b\u9762\u3002</p> <p>\u6211\u5efa\u8bae\u5b89\u88c5<code>WSL2</code>\uff0c\u5176\u4e2d\u4e00\u4e9b\u529f\u80fd\u9700\u8981windows10\u4ee5\u4e0a\u7684\u4e13\u4e1a\u7248\u3002</p>"},{"location":"Missing%20semester/Linux/WSL/#gui","title":"GUI","text":"<p>\u5982\u679c\u4f60\u662fwin10\u4ee5\u4e0a\u7684\u8bdd\uff0c<code>WSL2</code>\u73b0\u5728\u914d\u7f6e\u4e86GUI\u3002(\u4f60\u53ef\u4ee5\u4e00\u4e9bmatplotlib\u753b\u56fe\u4e4b\u7c7b\u7684)</p> <p></p>"},{"location":"Missing%20semester/Linux/WSL/#wslverilog","title":"WSL\u6269\u5bb9\u548c\u66f4\u6539\u5730\u5740\uff08\u542bVerilog\u5b89\u88c5\uff09","text":"<p>https://www.eet-china.com/mp/a109854.html</p>"},{"location":"Missing%20semester/Linux/advanced%20Linux/","title":"\u4e00\u4e9blinux\u8fdb\u9636\u64cd\u4f5cor\u6280\u5de7","text":"<ol> <li><code>./configure --prefix=</code>\u4f1a\u6709\u5f88\u591a\u597d\u5904\uff0c\u5927\u5bb6\u53ef\u4ee5\u81ea\u884c\u641c\u7d22\u3002</li> </ol>"},{"location":"Missing%20semester/Linux/shell/","title":"Linux\u4e0b\u7684shell\u7f16\u7a0b","text":"<p>link</p>"},{"location":"Missing%20semester/Linux/tmux/","title":"tmux\u4f7f\u7528\u4ee5\u53ca\u914d\u7f6e","text":""},{"location":"Missing%20semester/Linux/tmux/#tmux_-_plugin","title":"tmux - plugin","text":"<p>\u5b98\u65b9\u7f51\u5740: tmux-plugins</p>"},{"location":"Missing%20semester/Linux/tmux/#_1","title":"\u5b89\u88c5","text":"<pre><code>git clone git@github.com:tmux-plugins/tpm.git ~/.tmux/plugins/tpm\nvim ~/.tmux.conf\n</code></pre> <p>\u5e76\u5c06\u4e0b\u9762\u7684\u5185\u5bb9\u6dfb\u52a0\u5230<code>~/.tmux.conf</code>\u4e2d <pre><code># List of plugins\nset -g @plugin 'tmux-plugins/tpm'\nset -g @plugin 'tmux-plugins/tmux-sensible'\n\n# Other examples:\n# set -g @plugin 'github_username/plugin_name'\n# set -g @plugin 'github_username/plugin_name#branch'\n# set -g @plugin 'git@github.com:user/plugin'\n# set -g @plugin 'git@bitbucket.com:user/plugin'\nset -g @plugin 'catppuccin/tmux'\nset -g @catppuccin_flavour 'mocha'\n\n\n# Initialize TMUX plugin manager (keep this line at the very bottom of tmux.conf)\nrun '~/.tmux/plugins/tpm/tpm'\n\nset -g default-terminal 'tmux-256color'\n</code></pre></p> <p>\u6700\u540e\u4f7f\u7528\u5feb\u6377\u952e<code>ctrlb(prefix) + shift I</code>\u5b89\u88c5\u63d2\u4ef6</p>"},{"location":"Missing%20semester/Linux/vim/","title":"Vim \u7b80\u4ecb","text":""},{"location":"Missing%20semester/Linux/vim/#_1","title":"\u7b80\u4ecb","text":""},{"location":"Missing%20semester/Linux/vim/#_2","title":"\u4e00\u4e9b\u57fa\u672c\u7684\u4f7f\u7528","text":""},{"location":"Missing%20semester/Markdown/","title":"Index","text":""},{"location":"Missing%20semester/Markdown/#markdown","title":"Markdown\u76f8\u5173\u8bb0\u5f55","text":""},{"location":"Missing%20semester/Markdown/#_1","title":"\u5f15\u8a00","text":"<p>\u5173\u4e8emarkdown\u7684\u4ecb\u7ecd\u5462\uff0c\u611f\u89c9\u786e\u5b9e\u6ca1\u4ec0\u4e48\u53ef\u8bf4\u7684\u3002\u5c31\u662f\u4e00\u79cd\u6bd4\u8f83\u901a\u7528\u7684\u8bed\u8a00\uff08\u4e00\u4e9b\u7f51\u9875\u4e0a\u4e5f\u901a\u7528\uff09\uff0c\u7136\u540e\u80fd\u591f\u4fbf\u4e8e\u6211\u4eec\u8fdb\u884c\u4e00\u4e2a\u5feb\u901f\u7684\u6392\u7248\u3002\u81f3\u4e8e\u7f8e\u89c2\u4e0e\u5426\uff0c\u611f\u89c9\u8fd8\u662f\u56e0\u4eba\u800c\u5f02\u7684\u3002\u597d\u5904\u5c31\u662f\u8f7b\u91cf\u7ea7\u7684\u8bed\u6cd5\uff0c\u4f60\u751a\u81f3\u53ef\u4ee5\u57281h\u5185\u901f\u901a\uff0c\u4f46\u4e0e\u6b64\u540c\u65f6\u4fbf\u662f\u4ed6\u7684\u786e\u6ca1\u6709<code>latex</code>\u90a3\u4e48\u597d\u770b\uff0c\uff08\u4f46latex\u7684\u5b66\u4e60\u6210\u672c\u5bf9\u4e8e\u4e00\u4e2afreshman\u6765\u8bf4\u662f\u6709\u70b9\u70b9\u9ad8\u7684\uff09\u3002\u6240\u4ee5\u4efb\u4f55\u4e8b\u60c5\u90fd\u662f\u5229\u5f0a\u517c\u5177\u7684\uff0c\u4f46\u6211\u8fd8\u662f\u63a8\u8350\u5927\u5bb6\u4e0d\u59a8\u7b80\u5355\u5b66\u4e60\u4e00\u4e0b\u3002</p> <p>\u81f3\u4e8e\u5b66\u4e60\u8def\u7ebf\u7684\u8bdd\u6309\u7167\u76ee\u524d\u7684\u4e2a\u4eba\u7ecf\u9a8c\u6765\u8bf4\uff0c\u5e94\u8be5\u662f\uff1a<code>\u57fa\u7840\u8bed\u6cd5 --&gt; \u8fdb\u9636\uff08html\u548ccss\u8bed\u6cd5\u79ef\u7d2f\u548cmermaid\u753b\u7b80\u5355\u6d41\u7a0b\u56fe\uff09</code>\uff0c\u5982\u679c\u6709\u6570\u5b66\u8981\u6c42\uff0c\u53ef\u4ee5\u9009\u5b66latex\u7684\u6570\u5b66\u516c\u5f0f\u3002\u8fd9\u6837\u5927\u62b5\u662f\u591f\u7528\u7684\u3002\u6211\u4e5f\u4f1a\u6839\u636e\u8fd9\u4e2a\u7ed3\u6784\u5728\u8fd9\u7bc7\u6587\u6863\u91cc\u8bb0\u5f55\u76f8\u5173\u4fe1\u606f\u3002</p> <p>\u8fd9\u91cc\u662f\u5b98\u7f51 \u5b66\u4e60\u7684\u65f6\u5019\u76f4\u63a5\u7167\u4e2a\u5b98\u7f51\u6bcf\u4e2a\u81ea\u5df1\u6572\u4e00\u904d\u5c31\u5b66\u4f1a\u4e86\u3002</p>"},{"location":"Missing%20semester/Markdown/#_2","title":"\u57fa\u7840\u8bed\u6cd5","text":"<p>\u4e0d\u7ba1\u751a\u4e48\u8bed\u8a00\uff0c\u9996\u5148\u8bf4\u7684\u662f\uff1a\u8bf7\u4e0d\u8981\u4fdd\u517b\u4f60\u7684space\u548center\u952e\uff01\uff01\uff01</p>"},{"location":"Missing%20semester/Markdown/#_3","title":"\u6807\u9898","text":"<p>\u6807\u9898\u603b\u800c\u8a00\u4e4b\u5c31\u662f\u6839\u636e\u4f60\u7684<code>#</code>\u4e2a\u6570\u51b3\u5b9a\u5c42\u7ea7\u7684\u3002\u4f60\u53ef\u4ee5\u8bfb\u8fd9\u7bc7\u6587\u6863\u7684\u6e90\u4ee3\u7801\u5c31\u662f\u770b\u5230\u6807\u9898\u7684\u5199\u6cd5\u3002</p> <p>\u9664\u6b64\u4e4b\u5916\u8fd8\u6709\u4e00\u79cd\u5199\u6807\u9898\u7684\u65b9\u5f0f\u662f\uff1a 1. \u5927\u6807\u9898\u5728\u4f60\u6587\u5b57\u7684\u4e0b\u4e00\u884c\u52a0\"------\"(\u4e0d\u77e5\u9053\u591a\u5c11\u4e2a) 2. \u5c0f\u6807\u9898\u5728\u6587\u5b57\u4e0b\u4e00\u884c\u52a0\"===\"\uff08\u663e\u7136\u6bd4\u4e0a\u9762\u591a\uff09</p>"},{"location":"Missing%20semester/Markdown/#_4","title":"\u5206\u5272\u7ebf","text":"<p>\u4e09\u4e2a'-'\u6216\u8005'='\uff0c\u4e0a\u4e0b\u4e0d\u8981\u6709\u591a\u4f59\u7684\u6587\u5b57\u5373\u53ef\u3002</p>"},{"location":"Missing%20semester/Markdown/#_5","title":"\u4e0d\u540c\u5b57\u578b","text":"<pre><code>*\u659c\u4f53*  \n_\u659c\u4f53\u6587\u672c_  \n**\u7c97\u4f53\u6587\u672c**  \n__\u7c97\u4f53\u6587\u672c__  \n&lt;strong&gt;\u7c97\u4f53&lt;/strong&gt;\uff08\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\uff0c\u6709\u65f6\u5019\u6211\u7684\u7c97\u4f53\u4e0d\u80fd\u7528\uff09\n***\u7c97\u659c\u4f53\u6587\u672c***  \n___\u7c97\u659c\u4f53\u6587\u672c___  \n~~\u5bf9\u6574\u4e2a\u6587\u5b57\u753b\u6a2a\u7ebf~~ \n&lt;u&gt;\u5e26\u4e0b\u5212\u7ebf\u6587\u672c&lt;/u&gt; \n</code></pre>"},{"location":"Missing%20semester/Markdown/#_6","title":"\u5217\u8868","text":"<p>\u65e0\u5e8f\u5217\u8868\u4f7f\u7528\u661f\u53f7(*)\u3001\u52a0\u53f7(+)\u6216\u662f\u51cf\u53f7(-)\u4f5c\u4e3a\u5217\u8868\u6807\u8bb0\uff0c\u8fd9\u4e9b\u6807\u8bb0\u540e\u9762\u8981\u6dfb\u52a0\u4e00\u4e2a\u7a7a\u683c\uff0c\u7136\u540e\u518d\u586b\u5199\u5185\u5bb9\uff1a</p> <pre><code>* \u7b2c\u4e00\u9879\n* \u7b2c\u4e8c\u9879\n* \u7b2c\u4e09\u9879\n\n+ \u7b2c\u4e00\u9879\n+ \u7b2c\u4e8c\u9879\n+ \u7b2c\u4e09\u9879\n\n\n- \u7b2c\u4e00\u9879\n- \u7b2c\u4e8c\u9879\n- \u7b2c\u4e09\u9879\n</code></pre> <p>\u6709\u5e8f\u5217\u8868\u4f7f\u7528\u6570\u5b57\u5e76\u52a0\u4e0a . \u53f7\u6765\u8868\u793a\uff0c\u5982\uff1a</p> <pre><code>1. \u7b2c\u4e00\u9879\n2. \u7b2c\u4e8c\u9879\n3. \u7b2c\u4e09\u9879\n</code></pre> <p>\u5217\u8868\u5d4c\u5957\u53ea\u9700\u5728\u5b50\u5217\u8868\u4e2d\u7684\u9009\u9879\u524d\u9762\u6dfb\u52a0\u4e24\u4e2a\u6216\u56db\u4e2a\u7a7a\u683c\u5373\u53ef\uff1a</p> <ol> <li>\u7b2c\u4e00\u9879\uff1a   - \u7b2c\u4e00\u9879\u5d4c\u5957\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20<ul> <li>\u7b2c\u4e00\u9879\u5d4c\u5957\u7684\u7b2c\u4e8c\u4e2a\u5143\u7d20</li> </ul> </li> <li>\u7b2c\u4e8c\u9879\uff1a   - \u7b2c\u4e8c\u9879\u5d4c\u5957\u7684\u7b2c\u4e00\u4e2a\u5143\u7d20<ul> <li>\u7b2c\u4e8c\u9879\u5d4c\u5957\u7684\u7b2c\u4e8c\u4e2a\u5143\u7d20</li> </ul> </li> </ol>"},{"location":"Missing%20semester/Markdown/#_7","title":"\u811a\u6ce8","text":"<p>\u521b\u5efa\u811a\u6ce8\u683c\u5f0f\u7c7b\u4f3c\u8fd9\u6837 </p> <pre><code>[^RUNNOB]\u3002  \n[^RUNOOB]: \u83dc\u9e1f\u6559\u7a0b -- \u5b66\u7684\u4e0d\u4ec5\u662f\u6280\u672f\uff0c\u66f4\u662f\u68a6\u60f3\uff01\uff01\uff01\uff08\u8fd9\u4e2a\u7f51\u7ad9\u6709\u5229\u6709\u5f0a\uff0c\u65b0\u624b\u5165\u95e8\u76f8\u5bf9\u8fd8\u662f\u6bd4\u8f83\u53cb\u597d\u7684\uff09\n</code></pre>"},{"location":"Missing%20semester/Markdown/#_8","title":"\u4ee3\u7801","text":"<pre><code>    #include &lt;stdio.h&gt;\n    int main (void)\n    {\n        return 0;\n    }\n</code></pre>"},{"location":"Missing%20semester/Markdown/#_9","title":"\u533a\u5757","text":"<p>Markdown \u533a\u5757\u5f15\u7528\u662f\u5728\u6bb5\u843d\u5f00\u5934\u4f7f\u7528 &gt; \u7b26\u53f7 \uff0c\u7136\u540e\u540e\u9762\u7d27\u8ddf\u4e00\u4e2a\u7a7a\u683c\u7b26\u53f7\uff1a</p> <p>\u533a\u5757\u5f15\u7528 \u83dc\u9e1f\u6559\u7a0b \u5b66\u7684\u4e0d\u4ec5\u662f\u6280\u672f\u66f4\u662f\u68a6\u60f3</p> <p>\u6216\u8005\u53ef\u4ee5\u8fd9\u6837\u64cd\u4f5c * \u7b2c\u4e00\u9879     &gt; \u83dc\u9e1f\u6559\u7a0b     &gt; \u5b66\u7684\u4e0d\u4ec5\u662f\u6280\u672f\u66f4\u662f\u68a6\u60f3 * \u7b2c\u4e8c\u9879</p>"},{"location":"Missing%20semester/Markdown/#_10","title":"\u94fe\u63a5","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u94fe\u63a5 \u83dc\u9e1f\u6559\u7a0b \u6216\u8005http://www.runoob.com\u7684\u5f62\u5f0f\u8868\u793a\u94fe\u63a5\u3002</p> <p>\u8fd9\u4e2a\u94fe\u63a5\u7528 1 \u4f5c\u4e3a\u7f51\u5740\u53d8\u91cf Google \u8fd9\u4e2a\u94fe\u63a5\u7528 runoob \u4f5c\u4e3a\u7f51\u5740\u53d8\u91cf Runoob \u7136\u540e\u5728\u6587\u6863\u7684\u7ed3\u5c3e\u4e3a\u53d8\u91cf\u8d4b\u503c\uff08\u7f51\u5740\uff09  </p> <p>\u6587\u6863\u5185\u8df3\u8f6c\u7684\u793a\u4f8b\uff1a\u793a\u4f8b</p>"},{"location":"Missing%20semester/Markdown/#_11","title":"\u56fe\u7247","text":"<p>\u56fe\u7247\u662f\u7c7b\u4f3c\u7f51\u5740\u7684\uff1a <pre><code>![alt \u5c5e\u6027\u6587\u672c](\u56fe\u7247\u5730\u5740)  \n![alt \u5c5e\u6027\u6587\u672c](\u56fe\u7247\u5730\u5740 \"\u53ef\u9009\u6807\u9898\")  \n</code></pre></p> <p>\u4f8b\u5982\uff1a </p>"},{"location":"Missing%20semester/Markdown/#_12","title":"\u8868\u683c","text":"\u5de6\u5bf9\u9f50 \u53f3\u5bf9\u9f50 \u5c45\u4e2d\u5bf9\u9f50 \u5355\u5143\u683c \u5355\u5143\u683c \u5355\u5143\u683c \u5355\u5143\u683c \u5355\u5143\u683c \u5355\u5143\u683c"},{"location":"Missing%20semester/Markdown/#_13","title":"\u6570\u5b66\u516c\u5f0f","text":"<p>\u4e00\u4e2a\u4e0d\u9519\u7684\u535a\u4e3b\u7684\u6c47\u603b $$ \\begin{Bmatrix}    a &amp; b \\    c &amp; d \\end{Bmatrix} $$</p> \\[ \\begin{CD}    A @&gt;a&gt;&gt; B \\\\ @VbVV @AAcA \\\\    C @= D \\end{CD} \\] <p>\\(f(x) = sin(x)+12\\)</p> \\[ f(x) = \\begin{cases} x,  &amp; x\\ge0 \\\\ -x, &amp; x&lt;0 \\end{cases} \\] \\[  \\sum_{n=1}^{100}x! \\]"},{"location":"Missing%20semester/Markdown/#_14","title":"\u8fdb\u9636\u5185\u5bb9","text":""},{"location":"Missing%20semester/Markdown/#mermaid","title":"Mermaid","text":"<p>\u5b98\u65b9\u6587\u6863</p> <p>mermaid \u56fe\u5f62\uff1a</p>    sequenceDiagram        Alice-&gt;&gt;Bob: Hello Bob, how are you?        Bob--&gt;&gt;Alice: I'm good, thanks!     gantt        title \u9879\u76ee\u8ba1\u5212        section \u9879\u76eeA        \u4efb\u52a11 :a1, 2023-10-21, 3d        \u4efb\u52a12 :after a1, 2d        section \u9879\u76eeB        \u4efb\u52a13 :2023-10-25, 2d        \u4efb\u52a14 : 2d      classDiagram        class Animal {            +name: string            +eat(): void        }        class Dog {            +bark(): void        }        Animal &lt;|-- Dog"},{"location":"Missing%20semester/Markdown/#html","title":"HTML","text":"<p>\u9664\u4e86\u4e4b\u524d\u63d0\u5230\u7684\u5e38\u7528HTML\u8bed\u6cd5\uff0cMarkdown\u8fd8\u652f\u6301\u5176\u4ed6\u4e00\u4e9b\u6269\u5c55\u7684HTML\u8bed\u6cd5\uff0c\u8fd9\u4e9b\u8bed\u6cd5\u53ef\u4ee5\u5e2e\u52a9\u4f60\u66f4\u7075\u6d3b\u5730\u5b9a\u5236\u548c\u7f8e\u5316\u4f60\u7684\u6587\u6863\u3002\u4ee5\u4e0b\u662f\u4e00\u4e9b\u5e38\u89c1\u7684\u6269\u5c55HTML\u8bed\u6cd5\u5728Markdown\u4e2d\u7684\u4f7f\u7528\u793a\u4f8b\uff1a</p> <ol> <li> <p><code>&lt;div&gt;</code>\u548c<code>&lt;span&gt;</code>\u6807\u7b7e\uff1a\u53ef\u4ee5\u7528\u4e8e\u81ea\u5b9a\u4e49\u6837\u5f0f\u548c\u5e03\u5c40\u3002    <pre><code>&lt;div style=\"background-color: #f1f1f1; padding: 10px;\"&gt;\n    \u8fd9\u662f\u4e00\u4e2a\u5e26\u80cc\u666f\u989c\u8272\u7684\u533a\u5757\n&lt;/div&gt;\n\n&lt;span style=\"color: red;\"&gt;\u8fd9\u662f\u7ea2\u8272\u6587\u672c&lt;/span&gt;\n</code></pre></p> </li> <li> <p><code>&lt;iframe&gt;</code>\u6807\u7b7e\uff1a\u53ef\u4ee5\u5d4c\u5165\u5176\u4ed6\u7f51\u9875\u6216\u591a\u5a92\u4f53\u5185\u5bb9\u3002    <pre><code>&lt;iframe src=\"https://www.example.com\" width=\"500\" height=\"300\"&gt;&lt;/iframe&gt;\n</code></pre></p> </li> <li> <p><code>&lt;audio&gt;</code>\u548c<code>&lt;video&gt;</code>\u6807\u7b7e\uff1a\u53ef\u4ee5\u63d2\u5165\u97f3\u9891\u548c\u89c6\u9891\u6587\u4ef6\u3002    <pre><code>&lt;audio controls&gt;\n    &lt;source src=\"audio.mp3\" type=\"audio/mpeg\"&gt;\n&lt;/audio&gt;\n\n&lt;video controls width=\"500\" height=\"300\"&gt;\n    &lt;source src=\"video.mp4\" type=\"video/mp4\"&gt;\n&lt;/video&gt;\n</code></pre></p> </li> <li> <p><code>&lt;mark&gt;</code>\u6807\u7b7e\uff1a\u7528\u4e8e\u7a81\u51fa\u663e\u793a\u6587\u672c\u3002</p> </li> </ol> <pre><code>&lt;mark&gt;\u8fd9\u6bb5\u6587\u5b57\u5c06\u88ab\u7a81\u51fa\u663e\u793a&lt;/mark&gt;\n</code></pre> <ol> <li><code>&lt;blockquote&gt;</code>\u6807\u7b7e\uff1a\u7528\u4e8e\u5f15\u7528\u6587\u672c\u5757\u3002</li> </ol> <pre><code>H&lt;sub&gt;2&lt;/sub&gt;O \u662f\u6c34\u7684\u5316\u5b66\u5f0f\u3002\nE = mc&lt;sup&gt;2&lt;/sup&gt; \u662f\u76f8\u5bf9\u8bba\u4e2d\u7684\u8457\u540d\u516c\u5f0f\u3002\n</code></pre> <ol> <li><code>&lt;del&gt;</code>\u548c<code>&lt;ins&gt;</code>\u6807\u7b7e\uff1a\u7528\u4e8e\u8868\u793a\u5220\u9664\u548c\u63d2\u5165\u7684\u6587\u672c\u3002</li> </ol> <pre><code>&lt;del&gt;\u8fd9\u6bb5\u6587\u5b57\u88ab\u5220\u9664\u4e86&lt;/del&gt;\n&lt;ins&gt;\u8fd9\u6bb5\u6587\u5b57\u88ab\u63d2\u5165\u4e86&lt;/ins&gt;\n</code></pre> <ol> <li><code>&lt;pre&gt;</code>\u6807\u7b7e\uff1a\u7528\u4e8e\u663e\u793a\u9884\u683c\u5f0f\u5316\u7684\u6587\u672c\uff0c\u4fdd\u7559\u7a7a\u683c\u548c\u6362\u884c\u7b26\u3002</li> </ol> <pre><code>&lt;pre&gt;\n\u8fd9\u662f\u9884\u683c\u5f0f\u5316\u7684\u6587\u672c\u3002\n    \u4fdd\u7559\u7a7a\u683c\u548c\u6362\u884c\u7b26\u3002\n&lt;/pre&gt;\n</code></pre> <ol> <li><code>&lt;details&gt;</code>\u548c<code>&lt;summary&gt;</code>\u6807\u7b7e\uff1a\u7528\u4e8e\u521b\u5efa\u53ef\u6298\u53e0\u7684\u5185\u5bb9\u3002</li> </ol> <pre><code>&lt;details&gt;\n    &lt;summary&gt;\u70b9\u51fb\u5c55\u5f00&lt;/summary&gt;\n    \u8fd9\u662f\u53ef\u6298\u53e0\u7684\u5185\u5bb9\u3002\n&lt;/details&gt;\n</code></pre> <p>\u8fd9\u4e9b\u662f\u66f4\u591a\u7684HTML\u8bed\u6cd5\u793a\u4f8b\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u9700\u8981\u4f7f\u7528\u5b83\u4eec\u6765\u6269\u5c55\u4f60\u7684Markdown\u6587\u6863\u3002\u8bf7\u8bb0\u4f4f\uff0c\u5728\u4f7f\u7528\u8fd9\u4e9b\u6269\u5c55\u8bed\u6cd5\u65f6\uff0c\u8981\u786e\u4fdd\u5b83\u4eec\u5728Markdown\u89e3\u6790\u5668\u4e2d\u5f97\u5230\u6b63\u786e\u652f\u6301\uff01\uff01\uff01</p>"},{"location":"Missing%20semester/Mkdocs%20material/","title":"Mkdocs material\u4f7f\u7528\u6559\u7a0b","text":"<p>\u6ce8\uff1amkdocs material\u662fmarkdown\u7684\u4e00\u4e2a\u63d2\u4ef6\uff0c\u53ef\u4ee5\u57fa\u4e8egithub-pages\u5e03\u7f6e\uff0c\u672c\u6559\u7a0b\u4f7f\u7528\u7684\u65b9\u6cd5\u662f\u6700\u7b80\u5355\u7684\u57fa\u4e8egit\u672c\u5730\u90e8\u7f72\u914d\u5236</p>"},{"location":"Missing%20semester/Mkdocs%20material/#windows","title":"\u73af\u5883\u914d\u5236(windows \u7248)","text":"<ol> <li>\u4f60\u9700\u8981\u5b89\u88c5python\uff0c\u8fde\u63a5\u70b9\u8fdb\u53bb\u4e0b\u8f7d\u5373\u53ef\uff0c\u5b89\u88c53.10\u5373\u4ee5\u4e0b\uff08\u6700\u65b0\u7248\u53ef\u80fd\u4f1a\u6709bug\uff09</li> <li>\u5176\u6b21\u4f60\u9700\u8981\u5b89\u88c5pip\uff0c\u8be6\u60c5\u8bf7\u770b\u6559\u7a0b</li> <li>\u6b64\u5916\u4f60\u9700\u8981\u5b89\u88c5git(\u9009\u62e964-bits\u7684standalone\u7248\u672c\uff0c\u76f4\u63a5\u4e00\u8defnext\u5373\u53ef)</li> </ol> <ol> <li>\u4f60\u9700\u8981\u4e00\u4e2aGithub\u8d26\u53f7</li> <li>\u6700\u597d\u4e0b\u8f7d\u4e00\u4e2aVscode\u6559\u7a0b</li> <li>\u5b89\u88c5mkdocs\uff0c\u5728\u7535\u8111\u7ec8\u7aef\u4f7f\u7528<code>pip install mkdocs</code>&amp;<code>pip install mkdocs-material</code></li> <li>markdown\u5efa\u8bae\u4f7f\u7528Typora\u7f16\u8f91\u5668\uff0c\u53ef\u4ee5\u4eceb\u7ad9\u4e0a\u641c\u7d22\u5b89\u88c5\u6559\u7a0b\uff08\u9009\u505a\uff09</li> </ol>"},{"location":"Missing%20semester/Mkdocs%20material/#_1","title":"\u4f7f\u7528","text":"<ol> <li>\u9996\u5148\u4f60\u9700\u8981\u5efa\u7acb\u4e00\u4e2aGithub\u4e0a\u7684\u8fdc\u7a0b\u4ed3\u5e93\uff0c\u53ef\u4ee5\u5177\u4f53\u770b\u6211\u53e6\u5916\u4e00\u4e2a\u5feb\u901f\u4e0a\u624b\u8fdc\u7a0b\u4ed3\u5e93\u6559\u7a0b</li> <li> <p>\u6b64\u5916\uff0c\u4f60\u9700\u8981\u5b66\u4e60markdown\u7684\u8bed\u6cd5\uff0c\u8be6\u60c5\u8bf7\u770b\u6211\u7684\u8bb0\u5f55\uff08\u5982\u679c\u60f3\u8981\u63d2\u5165\u56fe\u7247,\u8bf7\u5728\u6587\u4ef6\u5939\u4e0b\u5efa\u7acb\u4e00\u4e2agraph\u6587\u4ef6\u5939\uff0c\u5e76\u5728markdown\u6587\u4ef6\u4e2d\u4f7f\u7528\u76f8\u5bf9\u8def\u5f84\uff09</p> </li> <li> <p>\u8bf7\u5728\u547d\u4ee4\u884c\u4e0a\u4f7f\u7528<code>mkdocs new</code>, \u4f1a\u81ea\u52a8\u751f\u6210\u4e00\u4e2adocs\u6587\u4ef6\u5939\uff0csite\u6587\u4ef6\u5939\u4ee5\u53ca\u4e00\u4e2amkdocs.yml</p> </li> <li> <p>\u91cd\u8981\u7684\u914d\u5236\u4e1c\u897f\u90fd\u5728mkdocs.yml\u4e2d\uff0c\u5927\u5bb6\u53bb\u6211\u4ed3\u5e93\u770b\u5427\uff0c\u6700\u597d\u662f\u80fd\u7406\u89e3\u4f60\u5199\u7684\u6bcf\u884c\u4ee3\u7801\u7684\u542b\u4e49\u3002</p> </li> <li> <p>\u5982\u679c\u60f3\u8981\u50cf\u6211\u4e00\u6837\u5077\u61d2\u7684\u8bdd\uff0c\u53ef\u4ee5\u624b\u5199\u4e2aupdate.sh\u5373\u53ef\uff0c\u6bcf\u6b21\u5728git bash\u4e2d\u64cd\u4f5c\u5c31\u597d\u3002</p> </li> </ol> <pre><code>#\u7ed9\u51fa\u4e00\u4e2a\u9ed8\u8ba4\u7684\u9879\u76ee\u8def\u5f84\npath=\"F:\\Note of computer\"\n\n#\u5148\u8fdb\u5165\u9879\u76ee\u5f53\u4e2d\n\ncd $path\n\necho \"####### \u8fdb\u5165\u81ea\u5df1\u7684\u9879\u76ee #######\"\n\nls\n\necho \"\u5f00\u59cb\u6267\u884c\u547d\u4ee4\"\n\ngit add .\n\ngit status\n\n#\u5199\u4e2asleep 1s \u662f\u4e3a\u4e86\u89e3\u51b3\u5e76\u53d1\u5bfc\u81f4\u5361\u58f3\n\nsleep 1s\n\necho \"####### \u6dfb\u52a0\u6587\u4ef6 #######\"\n\nls_date=`date +%Y%m%d`\n\ngit commit -m \"${ls_date}\"\n\necho \"####### commit #######\"\n\nsleep 1s\n\necho \"####### \u5f00\u59cb\u63a8\u9001 #######\"\n\ngit push\n\nmkdocs gh-deploy\n\necho \"####### \u63a8\u9001\u5e76\u9875\u9762\u90e8\u7f72\u6210\u529f #######\"\n</code></pre> <p>\u606d\u559c\u4f60\uff0c\u5982\u679c\u80fd\u6309\u6b65\u9aa4\u5b8c\u6210\u4f60\u57fa\u672c\u4e0a\u5c31\u80fd\u4f7f\u7528\u4e86</p>"},{"location":"Missing%20semester/Mkdocs%20material/#_2","title":"\u4f7f\u7528\u6280\u5de7","text":""},{"location":"Missing%20semester/Mkdocs%20material/#_3","title":"\u63d0\u793a\u5757\u63d2\u4ef6","text":"<pre><code>markdown_extensions:\n    - admonition  # \u63d0\u793a\u5757\n    - pymdownx.details  # \u63d0\u793a\u5757\u53ef\u6298\u53e0\n</code></pre> <p>\u4f60\u53ef\u4ee5\u5199vscode\u7684snippet\u5e2e\u52a9\u4f60\u7f16\u5199\uff0c\u540c\u65f6\u4ed6\u652f\u6301\u7684\u63d0\u793a\u5757\u5982\u4e0b\uff1a - note, seealso - abstract, summary, tldr - info, todo - tip, hint, important - success, check, done - question, help, faq - warning, caution, attention - failure, fail, missing - danger, error - bug - example - quote, cite ps\uff1a\u8fd9\u4e2d\u95f4\u6240\u9700\u8981\u7684\u5c0f\u6280\u5de7\u6709\u70b9\u591a\uff0c\u6211\u4e5f\u5728\u4e0d\u65ad\u6478\u7d22\uff0c\u5982\u679c\u60f3\u8981\u914d\u7f6e\u7684\u540c\u5b66\u53ef\u4ee5\u6309\u7167\u6211\u8fd9\u4e2a\u6559\u7a0b\u6765\u5199\u5c31\u597d\u3002</p>"},{"location":"Missing%20semester/Mkdocs%20material/#_4","title":"\u6570\u5b66\u516c\u5f0f","text":"<p>\u5982\u4f55\u8ba9\u4f60\u7684\u9875\u9762\u652f\u6301latex\u5462? link</p>"},{"location":"Missing%20semester/Zotero/","title":"Zotero","text":"<p>\u8fd9\u53ef\u80fd\u662ffreshman\u4f1a\u9009\u62e9\u7684\u8bba\u6587\u9605\u8bfb\u5de5\u5177\u5566\uff01\u8ba9\u6211\u4eec\u5728\u672c\u7ae0\u6765\u770b\u770b\u5982\u4f55\u4f7f\u7528\u5b83\u5427\u3002</p>"},{"location":"Missing%20semester/Zotero/#_1","title":"\u4e0b\u8f7d","text":""},{"location":"Missing%20semester/Zotero/use/","title":"How to use","text":"<p>Guide Video</p>"},{"location":"Missing%20semester/git/","title":"Index","text":""},{"location":"Missing%20semester/git/#_1","title":"\u7b80\u4ecb","text":"<p>Git\u662f\u4e00\u4e2a\u5206\u5e03\u5f0f\u7248\u672c\u63a7\u5236\u8f6f\u4ef6\uff0c\u6700\u521d\u7531\u6797\u7eb3\u65af\u00b7\u6258\u74e6\u5179\u521b\u4f5c\uff0c\u4e8e2005\u5e74\u4ee5GPL\u8bb8\u53ef\u534f\u8bae\u53d1\u5e03\u3002\u6700\u521d\u76ee\u7684\u662f\u4e3a\u4e86\u66f4\u597d\u5730\u7ba1\u7406Linux\u5185\u6838\u5f00\u53d1\u800c\u8bbe\u8ba1\u3002\u5e94\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e0eGNU Interactive Tools[4]\uff08\u4e00\u4e2a\u7c7b\u4f3cNorton Commander\u754c\u9762\u7684\u6587\u4ef6\u7ba1\u7406\u5668\uff09\u4e0d\u540c\u3002</p>"},{"location":"Missing%20semester/git/#_2","title":"\u5b89\u88c5\u65b9\u5f0f","text":"<p>\u5177\u4f53\u8be6\u60c5\u53ef\u4ee5\u53c2\u8003\u5b98\u7f51git <code>windows</code> \u53ef\u76f4\u63a5\u70b9\u51fbhere\uff0c\u4e0b\u8f7d64\u4f4d\u7684<code>standalone</code>\u5373\u53ef. (\u81f3\u4e8estandalone\u548cportable\u7684\u533a\u522b\u53ef\u4ee5\u81ea\u5df1\u641c\u7d22) <code>linux</code> or <code>mac</code> \u4f7f\u7528\u81ea\u5df1\u7cfb\u7edf\u4e0a\u7684\u5305\u7ba1\u7406\u5668\u5c31\u597d\u4e86\uff08\u672c\u4eba\u76ee\u524d\u65e0mac\uff0c\u6709\u4e86\u7684\u8bdd\u4f1a\u518d\u66f4\u65b0\uff09</p>"},{"location":"Missing%20semester/git/#_3","title":"\u4f7f\u7528\u624b\u518c","text":"<p>\u6211\u4eec\u4e0d\u5f97\u4e0d\u63d0\u5982\u679c\u60f3\u5728windows\u4e0b\u4f7f\u7528\u6216\u8005\u7f16\u5199shell\u811a\u672c\uff0cgit bash\u53ef\u4ee5\u5f88\u597d\u7684\u8ba9\u4f60\u4f7f\u7528linux\u4e0b\u7684\u4e00\u4e9b\u811a\u672c\u8bed\u6cd5\u800c\u4e0d\u7528\u8fdb\u884c\u989d\u5916\u7684\u5b66\u4e60\u3002</p> <p>\u5b98\u7f51\u6216\u8005\u770bpro_git\u5f53\u7136\u662f\u975e\u5e38\u597d\u7684\u8d44\u6599\u3002\u4f46\u5c5e\u5b9e\u592a\u591a\u5566</p> <p>\u8865\u5145</p> <ol> <li> <p>\u53d1\u73b0\u4e86\u4e00\u4e2a\u975e\u5e38\u597d\u7528\u7684git\u56fe\u5f62\u5316\u5b66\u4e60\u7684\u7f51\u7ad9 </p> </li> <li> <p>\u7528GIF\u89e3\u91caGit\u7684\u57fa\u672c\u64cd\u4f5c</p> </li> <li> <p>\u4e3a\u4e86\u901a\u8fc7<code>log</code>\u66f4\u597d\u7684\u67e5\u770b\u5de5\u4f5c\uff0c\u4f60\u4e5f\u8bb8\u9700\u8981\u5199\u51fa\u66f4\u4f18\u79c0\u7684commit\u4fe1\u606f (angular\u89c4\u8303)</p> </li> <li> <p>\u6b64\u5916\uff0cmissing semester\u548cCS61B\u7684\u8bfe\u7a0b\u6307\u5bfc\u4e5f\u53ef\u4ee5\u4f5c\u4e3a\u5f88\u597d\u7684\u6458\u8981\u3002</p> </li> </ol>"},{"location":"Missing%20semester/git/fastGit/","title":"fastGit","text":""},{"location":"Missing%20semester/git/fastGit/#_1","title":"\u5feb\u901f\u4e0a\u624b","text":"<p>\u6211\u59cb\u7ec8\u8ba4\u4e3a\u5b66\u4e60\u5e94\u5f53\u662f\u4e00\u4e2a\u5faa\u5e8f\u6e10\u8fdb\u7684\u8fc7\u7a0b\u3002\u5982\u679c\u4f60\u7b2c\u4e00\u6b21\u5b66\u4e60git\u4e00\u5b9a\u4f1a\u662f\u4e00\u5934\u96fe\u6c34\u7684\uff0c\u4e0d\u59a8\u5728\u914d\u7f6e\u5b8c\u73af\u5883\u540e\u8ddf\u7740\u672c\u6559\u7a0b\u505a\u505a\u770b\u57f9\u517b\u4e00\u79cd\u2026\u2026\u76f4\u89c9\uff1f\uff08bushi</p>"},{"location":"Missing%20semester/git/fastGit/#github","title":"\u4e0b\u8f7d\u522b\u4ebaGithub\u4e0a\u7684\u9879\u76ee","text":"<ul> <li>\u4e00\u5b9a\u4e00\u5b9a\u5148\u53bb\u770b\u522b\u4eba\u4ed3\u5e93\u7684README\u7684\u63d0\u793a\u548c\u64cd\u4f5c\u3002\u53ef\u4ee5\u6709\u52a9\u4e8e\u4f60\u4e86\u89e3\u522b\u4eba\u9879\u76ee\u7684\u4f7f\u7528\u65b9\u6cd5\u548c\u4e00\u4e9b\u533a\u522b\u7684\u5730\u65b9\u3002</li> <li>\u4e00\u822c\u6765\u8bf4\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u5728\u672c\u5730\u8f93\u5165<code>git clone</code>+<code>repository address</code>\uff0c\u5982\uff1a <code>git clone git@github.com:Yaoyaolingbro/notebook.git</code></li> </ul>"},{"location":"Missing%20semester/git/fastGit/#githubrepository","title":"Github\u4e0a\u521b\u5efa\u4e00\u4e2a\u4ed3\u5e93\uff08repository\uff09","text":"<p>ps\uff1a\u4efb\u4f55\u4e1c\u897f\u4e00\u5b9a\u90fd\u662f\u4ee5\u5b98\u65b9\u6587\u6863\u4e3a\u51c6\u3002\u6211\u7684\u8bb0\u5f55\u53ea\u80fd\u7528\u4f5c\u53c2\u8003\u3002\u6b64\u5916\u547d\u4ee4\u884c\u4e0a\u7684\u63d0\u793a\u6216\u8005<code>--help</code>\u4e5f\u662f\u4e2a\u597d\u4e1c\u897f\u54df\uff01\uff01\uff01</p> <ul> <li> <p>\u9996\u5148\u6211\u4eec\u9700\u8981\u5efa\u7acb\u81ea\u5df1\u672c\u5730\u7684<code>SSH</code>\u7684\u5bc6\u94a5\u3002 <code>ssh-keygen -t ed25519 -C \"youremail@example.com\"</code>   \u540e\u9762\u7684 your_email@youremail.com \u6539\u4e3a\u4f60\u5728 Github \u4e0a\u6ce8\u518c\u7684\u90ae\u7bb1\uff0c\u4e4b\u540e\u4f1a\u8981\u6c42\u786e\u8ba4\u8def\u5f84\u548c\u8f93\u5165\u5bc6\u7801\uff0c\u6211\u4eec\u8fd9\u4f7f\u7528\u9ed8\u8ba4\u7684\u4e00\u8def\u56de\u8f66\u5c31\u884c\u3002   \u6210\u529f\u7684\u8bdd\u4f1a\u5728<code>~/</code>\u6216\u8005<code>C:/user</code>\u4e0b\u751f\u6210 .ssh \u6587\u4ef6\u5939\uff0c\u8fdb\u53bb\uff0c\u6253\u5f00 id_rsa.pub\uff0c\u590d\u5236\u91cc\u9762\u7684 key\u3002</p> </li> <li> <p>\u56de\u5230 github \u4e0a\uff0c\u8fdb\u5165 <code>Account =&gt; Settings</code>\uff08\u8d26\u6237\u914d\u7f6e\uff09\u3002\u7136\u540e\u5de6\u8fb9\u8fb9\u6846\u9009\u62e9 <code>SSH and GPG keys</code>\uff0c\u7136\u540e\u70b9\u51fb <code>New SSH key</code>\u6309\u94ae,<code>title</code> \u8bbe\u7f6e\u6807\u9898\uff0c\u53ef\u4ee5\u968f\u4fbf\u586b\uff0c\u7c98\u8d34\u5728\u4f60\u7535\u8111\u4e0a\u751f\u6210\u7684 key\u3002</p> </li> <li> <p>\u4e3a\u4e86\u9a8c\u8bc1\u662f\u5426\u6210\u529f\uff0c\u6211\u4eec\u5728\u672c\u5730\u8f93\u5165\uff1a <pre><code>$ ssh -T git@github.com\nThe authenticity of host 'github.com (52.74.223.119)' can't be established.\nRSA key fingerprint is SHA256:nThbg6kXUpJWGl7E1IGOCspRomTxdCARLviKw6E5SY8.\nAre you sure you want to continue connecting (yes/no/[fingerprint])? yes                   # \u8f93\u5165 yes\nWarning: Permanently added 'github.com,52.74.223.119' (RSA) to the list of known hosts.\nHi tianqixin! You've successfully authenticated, but GitHub does not provide shell access. # \u6210\u529f\u4fe1\u606f\n</code></pre></p> </li> <li> <p>\u4ee5\u4e0a\u547d\u4ee4\u8bf4\u660e\u6211\u4eec\u5df2\u7ecf\u6210\u529f\u8fde\u63a5github\u4e86\uff01</p> </li> <li> <p>\u63a5\u4e0b\u6765\u5728\u4e3b\u754c\u9762\u4e0a\u8fdb\u5165\u5230<code>Your repositories</code>or<code>New repository</code>\u540e\u521b\u5efa\u65b0\u7684\u4ed3\u5e93\u3002\u5982\u679c\u60f3\u4e0a\u4f20\u672c\u5730\u6587\u6863\u5148\u4e0d\u8981\u52fe\u9009<code>Initialize this repositories</code>\u8fd9\u4e2a\u9009\u9879\u3002</p> </li> <li> <p>\u521b\u5efa\u6210\u529f\u540e\u5b83\u4f1a\u7ed9\u4f60\u7ed9\u51fa\u63d0\u793a\u5982\u4e0b</p> </li> <li> <p>\u5728\u8fd9\u4e4b\u540e\uff0c\u6211\u4eec\u4ecd\u9700\u8981\u8bbe\u7f6e\u672c\u5730\u7684<code>git</code>\u7528\u6237 <pre><code>$ git config --global user.name \"your name\"\n$ git config --global user.email \"your_email@youremail.com\"\n</code></pre>   \u5e73\u65f6\u6211\u4eec\u53ef\u4ee5\u7528<code>git config --list</code>\u6765\u68c0\u67e5\u81ea\u5df1\u7684\u7528\u6237\u8bbe\u7f6e\u3002</p> </li> </ul>"},{"location":"Missing%20semester/git/fastGit/#_2","title":"\u5e38\u89c4\u56db\u90e8\u66f2","text":"<ol> <li> <p>\u521d\u59cb\u5316\uff08initialize\uff09    \u7b2c\u4e00\u6b21\u4f7f\u7528\u65f6\u4f60\u5148\u9700\u8981\u5efa\u7acb\u5206\u652f\u3002\u5728\u547d\u4ee4\u884c\u8f93\u5165<code>git init --initial-branch=main</code>\u6216\u8005<code>git init</code>\u3002\u6709\u65f6<code>git init</code>\u4e4b\u540e\u4f1a\u62a5\u9519\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u4ed6\u7684\u63d0\u793a\u8fdb\u884c\u64cd\u4f5c\u3002    \u6b64\u5916\u4f60\u9700\u8981\u6dfb\u52a0\u8fdc\u7a0b\u4ed3\u5e93\u7684\u201c\u5730\u5740\u201d\uff0c\u8fd9\u91cc\u6211\u4eec\u5efa\u8bae\u6dfb\u52a0\u4f60\u4ed3\u5e93\u7684SSH\u5bc6\u94a5\uff0c\u4f8b\u5982<code>git remote add origin git@github.com:Yaoyaolingbro/secrete.git</code></p> <p>\u5173\u4e8egit remote   \u4e00\u822c\u6765\u8bf4\u6211\u4eec\u53ef\u4ee5\u7528<code>git remote -v</code>\u6765\u68c0\u67e5\u6211\u4eec\u5f53\u524d\u7684\u72b6\u6001 \u6b64\u5916\u5982\u679c\u66f4\u6539remote\u7684URL\u7684\u8bdd\u6211\u4eec\u4e5f\u6709\u4e24\u79cd\u65b9\u5f0f <code>git remote set-url origin git://new.url.here</code> \u6216\u8005<code>git remote remove origin</code>\u540e\u4f7f\u7528<code>git remote add origin yourRemoteUrl</code>\u90fd\u53ef\u4ee5\u3002</p> </li> <li> <p>\u6dfb\u52a0\u9879\u76ee    \u7136\u540e\u6dfb\u52a0\u4f60\u60f3\u8981\u5047\u5982\u4ed3\u5e93\u7684\u9879\u76ee<code>git add ./project_name</code> \u6216\u8005\u7701\u4e8b\u76f4\u63a5\u8f93\u5165<code>git add .</code></p> </li> <li>\u67e5\u770b\u72b6\u6001    \u5728\u547d\u4ee4\u884c\u8f93\u5165<code>git status</code></li> <li>\u63d0\u4ea4\u9879\u76ee    \u5728\u547d\u4ee4\u884c\u8f93\u5165<code>git commit -m \"commit message\"</code></li> <li>\u5c06\u4ed3\u5e93\u63a8\u9001\u5230\u8fdc\u7a0b\u4ed3\u5e93\uff08github\u7b49\uff09    \u7b2c\u4e00\u6b21\u4f7f\u7528\u65f6\u8f93\u5165<code>git push -u origin main</code>.\u4e4b\u540e\u518d\u63d0\u4ea4\u7684\u8bdd\u53ef\u4ee5\u76f4\u63a5\u8f93\u5165<code>git push</code>\u5373\u53ef\u3002</li> </ol> <p>\u606d\u559c\u4f60\uff01\u53ef\u4ee5\u62e5\u6709\u81ea\u5df1\u7684\u4ed3\u5e93\u5566\uff01</p>"},{"location":"Missing%20semester/git/fastGit/#git","title":"Git\u9644\u6ce8","text":"<p>\u4f60\u60f3\u67e5\u770b\u4e00\u4e0b\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u90fd\u505a\u4e86\u4ec0\u4e48\u5b58\u6863\uff0c\u4f7f\u7528 <code>git log</code> \u5373\u53ef\uff0c\u5b83\u4f1a\u63d0\u4f9b\u81f3\u4eca\u4e3a\u6b62\u6240\u6709\u7684 <code>commit</code> \u4fe1\u606f\uff08\u65f6\u95f4\uff0c\u63d0\u4ea4\u8005\uff0c\u63cf\u8ff0\uff0chashcode\uff09\uff0c\u4e3a\u4e86\u901a\u8fc7<code>log</code>\u66f4\u597d\u7684\u67e5\u770b\u5de5\u4f5c\uff0c\u4f60\u4e5f\u8bb8\u9700\u8981\u5199\u51fa\u66f4\u4f18\u79c0\u7684commit\u4fe1\u606f (angular\u89c4\u8303)\u3002</p> <p>\u5982\u679c\u4f60\u60f3\u56de\u5230\u8fc7\u53bb\u7684\u67d0\u4e2a <code>commit</code>\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>git reset --hard &lt;commit&gt;</code>\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u4f60\u4f7f\u7528\u4e86 <code>--hard</code>\uff0c\u5728\u56de\u5230\u4f60\u6307\u5b9a\u7684commit\u540e\uff0c\u4f60\u5c06\u65e0\u6cd5\u524d\u5f80\u8fd9\u4e2acommit\u4e4b\u540e\u7684\u4efb\u4f55\u4e00\u4e2acommit\uff0c\u56e0\u6b64\u5728\u64cd\u4f5c\u524d\u8bf7\u614e\u91cd\u3002</p> <p>\u66f4\u8be6\u7ec6\u7684\u5185\u5bb9\u8bf7\u770bnote</p>"},{"location":"Missing%20semester/git/note/","title":"\u6df1\u7a76git","text":"<p>\u4e00\u4e2a\u7bc7\u9519\u7684\u601d\u8def\u6c47\u603b\uff0c\u89c6\u9891\u8d44\u6e90\u8fd8\u662f\u6bd4\u8f83\u591a\u7684\uff0c\u6211\u4f1a\u628a\u4e00\u4e9b\u91cd\u8981\u7684\u547d\u4ee4\u6216\u8005\u5de5\u4f5c\u6d41\u7a0b\u8bb0\u5f55\u5728\u8fd9\u91cc</p>"},{"location":"Missing%20semester/git/note/#how_to_do_team_work","title":"How to do team work.","text":"<p>\u5b66\u4f1a\u4f7f\u7528git pull\u662f\u5341\u5206\u91cd\u8981\u7684\uff0c\u4ee5\u53ca\u5206\u652f\u7ba1\u7406\uff0c\u521b\u5efa\u5c5e\u4e8e\u81ea\u5df1\u7684feature-name\u5206\u652f\u3002</p> <p>\u6458\u8981</p> <ol> <li>ZJU-git \u4e2d\u7684group\u4e00\u5b9a\u662f\u4f60\u6821\u5185\u5408\u4f5c\u975e\u5e38\u4fbf\u6377\u7684\u4e00\u79cd\u65b9\u5f0f\u4e86\u3002\uff08\u5f53\u7136Github\u4e0a\u4e5f\u6709\u5bf9\u5370\u7684\uff0c\u4f46\u4e2a\u4eba\u89c9\u5f97\u4e0d\u5982\u524d\u8005\u65b9\u4fbf\uff09</li> <li>\u6bcf\u6b21\u5728\u66f4\u6539\u524d\u8bf7\u5148\u4f7f\u7528<code>git pull --all</code>\u6765\u62c9\u53d6\u5b8c\u6574\u4ed3\u5e93\u66f4\u65b0\u3002</li> </ol>"},{"location":"Missing%20semester/git/note/#git_1","title":"Git\u5e38\u7528\u547d\u4ee4\u6307\u5357","text":"<ol> <li>git commit</li> <li>git branch  <li>git checkout  <p>2&amp;3\u53ef\u4ee5\u5408\u5e76\u4e3a\uff1agit checkout -b  <li>git merge(\u5982\u679c\u6211\u4eec\u73b0\u5728\u5728main\u5206\u652f\u60f3\u8981\u5c06checkout\u5206\u652f\u7684\u5408\u5e76\u8fc7\u6765\uff0c\u6211\u4eec\u4f7f\u7528 git merge checkout)</li> <li>git rebase(\u4e0emerge\u76f8\u6bd4\u4e5f\u6709\u5b83\u7684\u597d\u5904),\u4f1a\u4f7f\u63d0\u4ea4\u8bb0\u5f55\u7ebf\u6027\u5316\u66f4\u7b80\u4ecb\uff0c\u6e05\u6670\uff1f</li> <li>git -&gt; main -&gt; c1 or git checkout c1</li> <li>git checkout HEAD^ | bugFix^(\u5411\u4e0a\u79fb\u52a8\u4e00\u6b21)</li> <li>git branch -f main HEAD~3</li>"},{"location":"Online%20CS%20Courses/CS106L/","title":"CS106L - 24 winter","text":"<p>\u8fd9\u91cc\u662fCS106L\u7684\u8bfe\u7a0b\u8d44\u6599\uff0c\u5305\u62ec\u8bfe\u7a0b\u5927\u7eb2\u3001\u8bfe\u7a0b\u4f5c\u4e1a\u3001\u8bfe\u7a0b\u8bb2\u4e49\u7b49\u3002</p>"},{"location":"Online%20CS%20Courses/CS106L/#slide_note","title":"Slide Note","text":""},{"location":"Online%20CS%20Courses/CS106L/#lec3_initialization_referrence","title":"lec3 Initialization &amp; referrence","text":"<ol> <li>\u521d\u59cb\u5316</li> <li>referrence</li> <li>cv-type</li> <li>You can\u2019t declare a non-const reference to a const variable    </li> </ol>"},{"location":"Online%20CS%20Courses/CS106L/#lec4_stream","title":"lec4 Stream","text":"<ol> <li> <p>cerr and clog</p> <p>cerr: used to output errors clog: used for non-critical event logging</p> </li> <li> <p>getline    </p> <p>\u6ce8\u610fgetline\u51fd\u6570\u7684\u4f7f\u7528\uff0c\u6700\u597d\u4e0d\u8981\u548ccin\u6df7\u7528\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u95ee\u9898\u3002</p> </li> </ol>"},{"location":"Online%20CS%20Courses/CS106L/#lec5_class","title":"lec5 Class","text":"<ol> <li>How to write .h and .cpp file</li> <li>To make alias    <pre><code>Private:\n   /// An example of type aliasing\n   using String = std::string;\n   String name;\n   String state;\n   int age;\n</code></pre></li> <li>How to use <code>this</code> pointer    <pre><code>void Person::set_name(const std::string&amp; name) {\n   this-&gt;name = name;\n}\n</code></pre></li> <li> <p>Container adapters\uff1a\u4f8b\u5982queue\u4e2d\u7684deque\u548clist    <pre><code>std::queue&lt;int, std::list&lt;int&gt;&gt; q;\n</code></pre></p> </li> <li> <p>virtual \u5173\u952e\u8bcd \u7528\u4e8e\u58f0\u660e\u865a\u51fd\u6570\u3002\u865a\u51fd\u6570\u662f\u5728\u57fa\u7c7b\u4e2d\u4f7f\u7528 virtual \u5173\u952e\u5b57\u58f0\u660e\u7684\u6210\u5458\u51fd\u6570\uff0c\u5b83\u53ef\u4ee5\u5728\u6d3e\u751f\u7c7b\u4e2d\u88ab\u91cd\u5199\uff08\u8986\u76d6\uff09\u3002\uff1a    <pre><code>class Base {\npublic:\n   virtual void show() {\n      std::cout &lt;&lt; \"Base::show() called\" &lt;&lt; std::endl;\n   }\n};\n\nclass Derived : public Base {\npublic:\n   void show() override {\n      std::cout &lt;&lt; \"Derived::show() called\" &lt;&lt; std::endl;\n   }\n};\n</code></pre></p> </li> </ol> <p>\u800c\u5982\u679c\u4f7f\u7528\u7eaf\u865a\u51fd\u6570\uff0c\u90a3\u4e48\u6bcf\u4e2a\u57fa\u7c7b\u4f7f\u7528\u90fd\u4e00\u5b9a\u8981\u91cd\u5199\u8fd9\u4e2a\u51fd\u6570\uff0c\u5426\u5219\u4f1a\u62a5\u9519\u3002    <pre><code>virtual double area() const = 0;\n</code></pre></p> <p>\u4e00\u6bb5\u793a\u4f8b\u4ee3\u7801\uff1a</p> <p>\u8bf7\u6ce8\u610fconstructor\u53d8\u91cf\u540d\u7684\u547d\u540d\u6280\u5de7\uff0c\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u548c\u6210\u5458\u53d8\u91cf\u91cd\u540d\u3002</p>"},{"location":"Online%20CS%20Courses/CS106L/#lec6_template_class","title":"lec6 Template class","text":"<ol> <li> <p>\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528\u6a21\u677f\u7c7b\uff1f    - \u4ee3\u7801\u590d\u7528    - \u7c7b\u578b\u5b89\u5168    - \u6027\u80fd\u4f18\u5316    </p> </li> <li> <p>\u5728.h\u6587\u4ef6\u4e2d\u5fc5\u987b\u5305\u542b.h\u548c.cpp\u6587\u4ef6    <pre><code>#include \"source.cpp\"\n</code></pre></p> </li> <li> <p>const \u7684\u4f7f\u7528    <pre><code>std::string stringify(const Student&amp; s){\n   return s.getName() + \" is \" + std::to_string(s.getAge()) +\n   \" years old.\" ;\n}\n</code></pre>    \u7531\u4e8e\u7f16\u8bd1\u5668\u5e76\u4e0d\u77e5\u9053<code>getName()</code>&amp;<code>getAge()</code>\u51fd\u6570\u662f\u5426\u4f1a\u6539\u53d8s\u7684\u503c\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5728\u51fd\u6570\u540e\u9762\u52a0\u4e0aconst\u5173\u952e\u8bcd\u3002     </p> </li> <li> <p>throw exception    <pre><code>void Student::setAge(int age) {\n   if (age &lt; 0) {\n      throw std::invalid_argument(\"Age cannot be negative\");\n   }\n   this-&gt;age = age;\n}\n</code></pre> </p> </li> <li> <p>const_cast \u4f7f\u7528\u6280\u5de7    </p> </li> </ol>"},{"location":"Online%20CS%20Courses/CS106L/#lec7_template_function","title":"lec7 template function","text":"<ol> <li>An example    </li> <li>Constraints and concepts    </li> </ol> Complex Reference <p> 3. \u4f7f\u7528template\u53ef\u4ee5\u66f4\u6709\u6548\u7387\uff1a    <pre><code>template&lt;unsigned1&gt;\nstruct Factorial {\n   enum value =n * Factorial&lt;n - 1&gt;::value };\n};\ntemplate&lt;&gt;// template class \"specializationstruct \nFactorial&lt;0&gt;{enum fvalue=1};\nstd::cout &lt;&lt;Factorial&lt;10&gt;::value &lt;&lt; endl;//prints 3628800, but run duringcompile time!\n</code></pre> 4. constexpr: \u7528\u4e8e\u5728\u7f16\u8bd1\u65f6\u8ba1\u7b97\u503c    <pre><code>constexpr int factorial(int n) {\n   return n &lt;= 1 ? 1 : n * factorial(n - 1);\n}\n</code></pre></p>"},{"location":"Online%20CS%20Courses/CS106L/#lec8_function_and_lambda","title":"lec8 function and lambda","text":"<ol> <li>function pointer    </li> <li>lambda expression    <pre><code>int limit = 5;\nauto is_greater_than_limit = [limit](int value) {\n   return value &gt; limit;\n};\n</code></pre> </li> <li>Functor    </li> <li>virtual function: can be overrided by derived class    </li> <li>The STL implements tons of cool algorithms that we can use without rewriting them! </li> </ol>"},{"location":"Online%20CS%20Courses/CS106L/#lec9_operator_overloading","title":"lec9 Operator Overloading","text":"<ol> <li> <p>fraction example\uff1a https://replit.com/@havenw/simplefraction </p> </li> <li> <p>friend\u5173\u952e\u8bcd\u53ef\u4ee5\u8ba9\u4e00\u4e2a\u51fd\u6570\u8bbf\u95ee\u7c7b\u7684\u79c1\u6709\u6210\u5458\uff0c\u5b83\u6709\u52a9\u4e8e\u5b9e\u73b0\u91cd\u8f7d\u8fd0\u7b97\u7b26\uff0c\u4f46\u8bf7\u6ce8\u610f\u4ed6\u4f1a\u7834\u574f\u5c01\u88c5\u6027\u3002    <pre><code>class Fraction {\npublic:\n   friend std::ostream&amp; operator&lt;&lt;(std::ostream&amp; os, const Fraction&amp; f);\n};\n</code></pre> </p> </li> </ol> <p></p>"},{"location":"Online%20CS%20Courses/CS106L/#lec10_special_member_function","title":"lec10 Special Member Function","text":"<p>Class has three main part: the constructor and destructor, member variables, and functions.</p> <p>Totaly, there are 6 special member functions: - Default constructor - Copy constructor - Copy assignment operator - Move constructor - Move assignment operator - Destructor</p> <p>The compiler will generate these functions for you if you don't define them yourself. However, if you define any of these functions, the compiler will not generate the others for you.</p> <p>Example:</p> <ol> <li>\u6d45\u62f7\u8d1d\u548c\u6df1\u62f7\u8d1d    <pre><code>#include &lt;iostream&gt;\n\nclass ShallowCopyExample {\nprivate:\n   int* data;\n\npublic:\n   // \u6d45\u62f7\u8d1d\u7684\u6784\u9020\u51fd\u6570\n   ShallowCopyExample(const ShallowCopyExample&amp; other) {\n      data = other.data;  // \u53ea\u662f\u590d\u5236\u6307\u9488\uff0c\u800c\u4e0d\u662f\u590d\u5236\u6307\u9488\u6307\u5411\u7684\u6570\u636e\n   }\n\n   // \u6df1\u62f7\u8d1d\u7684\u6784\u9020\u51fd\u6570\n   DeepCopyExample(const DeepCopyExample&amp; other) {\n      data = new int(*other.data);  // \u5206\u914d\u65b0\u7684\u5185\u5b58\uff0c\u5e76\u590d\u5236\u6570\u636e\n   }\n\n   // \u6790\u6784\u51fd\u6570\n   ~ShallowCopyExample() {\n      delete data;  // \u91ca\u653e\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58\n   }\n};\n\nint main() {\n   ShallowCopyExample original;\n   ShallowCopyExample shallowCopy = original;  // \u6d45\u62f7\u8d1d\n\n   DeepCopyExample deepCopy = original;  // \u6df1\u62f7\u8d1d\n\n   return 0;\n}\n</code></pre></li> </ol> <p>attention</p> <p>If you have to define a destructor, copy constructor, or copy assignment operator, you should define all three!    - Needing one signifies you\u2019re handling certain resources manually.    - We then should handle the creation, assignment, use, and destruction of those resources ourselves!    </p>"},{"location":"Online%20CS%20Courses/CS106L/#lec_raii_smart_pointer","title":"lec RAII &amp; smart pointer","text":"<ol> <li>\u4e00\u6bb5\u4ee3\u7801\u4e2d\u5b58\u5728\u8bb8\u591a\u79cd\u53ef\u80fd\u7684code path\uff0c \u6211\u4eec\u9700\u8981\u7559\u610f\u662f\u5426\u4f1a\u9020\u6210\u5185\u5b58\u6cc4\u6f0f\u3002    \uff5c \uff5c Acquire \uff5c Release\uff5c    \uff5cHeap Memory | new | delete|    | Files | open | close|    | Locks | try_lock | unlock|    | Socket | socket | close |</li> <li> <p>Exception: </p> </li> <li> <p>Unique_pointer: can not be copied.    </p> </li> </ol>"},{"location":"Online%20CS%20Courses/CS106L/note/","title":"Assignment Note","text":"<p>\u8fd9\u91cc\u662f\u5bf9\u6bcf\u6b21\u4f5c\u4e1a\u7684\u4e00\u4e9b\u8981\u70b9\u548c\u597d\u7684\u7f16\u7a0b\u4e60\u60ef\u7684\u8bb0\u5f55</p>"},{"location":"Online%20CS%20Courses/CS106L/note/#assignment_1","title":"Assignment 1","text":"<ol> <li> <p>\u91cd\u8f7d\u8fd0\u7b97\u7b26 <pre><code>bool operator==(const Course &amp;other) const {\n    return title == other.title &amp;&amp; number_of_units == other.number_of_units &amp;&amp;\n           quarter == other.quarter;\n  }\n</code></pre></p> </li> <li> <p>auto \u5173\u952e\u5b57\u4f7f\u7528 <pre><code>void delete_elem_from_vector(std::vector&lt;Course&gt; &amp;v, Course &amp;elem) {\n  auto it = std::find(v.begin(), v.end(), elem);\n  v.erase(it);\n}\n</code></pre></p> </li> <li> <p>C\u4e2d\u5d4c\u5957python\u8fdb\u7a0b\u7684\u65b9\u6cd5 <pre><code>FILE *pipe = popen(\"python3 utils/autograder.py\", \"r\");\n  if (!pipe)\n    return -1;\n\n  char buffer[128];\n  while (!feof(pipe)) {\n    if (fgets(buffer, 128, pipe) != NULL)\n      std::cout &lt;&lt; buffer;\n  }\n  pclose(pipe);\n</code></pre></p> </li> <li> <p>vector \u7684\u4e09\u79cd\u904d\u5386\u65b9\u5f0f <pre><code>// \u4e0b\u6807\nstd::vector&lt;int&gt; vec = {1, 2, 3, 4, 5};\nfor (int i = 0; i &lt; vec.size(); ++i) {\n    std::cout &lt;&lt; vec[i] &lt;&lt; \" \"; // \u8f93\u51fa\u6bcf\u4e2a\u5143\u7d20\u7684\u503c\n}\n\n// \u8fed\u4ee3\u5668\nfor (std::vector&lt;int&gt;::iterator it = vec.begin(); it != vec.end(); ++it) {\n    std::cout &lt;&lt; *it &lt;&lt; \" \"; // \u8f93\u51fa\u6bcf\u4e2a\u5143\u7d20\u7684\u503c\n}\n\n// \u8303\u56f4for\u5faa\u73af\nfor (int i : vec) {\n    std::cout &lt;&lt; i &lt;&lt; \" \"; // \u8f93\u51fa\u6bcf\u4e2a\u5143\u7d20\u7684\u503c\n}\n</code></pre></p> </li> </ol>"},{"location":"Online%20CS%20Courses/CS106L/note/#assignment_2_marriage_pact","title":"Assignment 2 Marriage pact","text":""},{"location":"Online%20CS%20Courses/CS106X/","title":"CS106X","text":"<p>\u8fd9\u91cc\u662fCS106X\uff0c\u6211\u771f\u7684\u597d\u6c14\u611f\u89c9\u81ea\u5df1\u60f3\u5b66\u7684\u8bfe\u7a0b\u592a\u591a\u4f46\u6ca1\u6709\u7cbe\u529b\u9762\u9762\u4ff1\u5230\uff0cCS61B\u7ecf\u8fc7\u4e00\u5b9a\u7684\u5c1d\u8bd5\u89c9\u5f97\u548c\u672c\u5b66\u671f\u7684\u8bfe\u7a0b\u5185\u5bb9\u504f\u5dee\u7565\u5927\uff0c\u53ef\u80fd\u66f4\u9002\u5408\u5728\u5047\u671f\u7684\u65f6\u5019\u5b66\u4e60\uff0c\u6545\u5728\u7f51\u4e0a\u770b\u5230\u8fd9\u95e8\u4e0eZJU-FDS\u6bd4\u8f83\u76f8\u4f3c\u7684\u8bfe\u7a0b\u4f5c\u4e3a\u4e00\u4e2a\u8bfe\u5916\u8865\u5145\u7684\u5b66\u4e60\u53c2\u8003\u3002</p> <p>\u7f51\u7ad9\u8fde\u63a5\uff1ahttp://web.stanford.edu/class/cs106x/handouts.html</p>"},{"location":"Online%20CS%20Courses/CS285/","title":"CS285 Deep Reinforcement Learning","text":"<p>Resource</p>"},{"location":"Online%20CS%20Courses/CS285/#table_of_contents","title":"Table Of Contents","text":"<p>\u8fd9\u91cc\u662f\u7b14\u8bb0\u7684\u76ee\u5f55\uff0c\u548cTutorial\u65e0\u5173\u3002</p> <p>Takeaway/Cheatsheet: Here</p> <ol> <li>Preliminaries (just this file)</li> <li>What is RL (not implemented)</li> <li>Imitation Learning Here</li> <li>Pytorch Basics (Not complete)</li> <li>Introduction to RL Here</li> <li>Policy Gradients Here</li> <li>Actor Critic Algorithms Here</li> <li>Value Function Methods Here</li> <li>Q Learning (advanced) Here</li> <li>Advanced Policy Gradients Here</li> <li>Optimal Control and Planning Here</li> <li>Model-based RL Here</li> <li>Model-based RL with a Policy Here</li> <li>Exploration (1) Here</li> <li>Exploration (2) Here</li> <li>Offline RL (1) Here</li> <li>Offline RL (2) Here</li> <li>RL Theory Here</li> <li>Variational AutoEncoder Here</li> <li>Soft Optimality Here</li> <li>Inverse RL Here</li> <li>RL and Language Models Here</li> <li>Transfer Learning and Meta Learning Here</li> <li>Challenges &amp; Open Problems Here</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/#preliminaries","title":"Preliminaries","text":"<p>\u5b66\u4e60RL\uff0c\u6211\u4eec\u9700\u8981\u4ec0\u4e48\uff1f</p> <ol> <li> <p>\u4e00\u4e9bDL\u7684\u57fa\u672c\u77e5\u8bc6\u3002 </p> </li> <li> <p>\u505a\u597d\u8bb0\u53f7\u6df7\u4e71\u7684\u5fc3\u7406\u51c6\u5907\u3002\u5982\u679c\u5b66\u4e60\u8fc7DL\uff0c\u5c31\u5e94\u8be5\u53d1\u73b0\u4ee5\u4e0b\u7684\u573a\u666f\u662f\u5341\u5206\u5e38\u89c1\u7684\uff1a</p> <ul> <li>\u4e00\u4e2a\u7b26\u53f7\u6709\u591a\u4e2a\u5b8c\u5168\u4e0d\u540c\u7684\u542b\u4e49\uff1b</li> <li>\u591a\u4e2a\u7b26\u53f7\u4ee3\u8868\u5b8c\u5168\u76f8\u540c\u7684\u542b\u4e49\uff1b</li> <li>\u524d\u4e00\u9875\u7684\u7b26\u53f7\u5728\u540e\u4e00\u9875\u53d8\u4e86\uff1b</li> <li>\u671f\u5f85\u503c\u4e0d\u8bf4\u660e\u4ece\u54ea\u4e2a\u5206\u5e03\u91c7\u6837\uff1b</li> <li>\u591a\u4e2a\u4e0d\u540c\u7684\u6982\u7387\u5206\u5e03\u5168\u90e8\u7528\u8bb0\u53f7 \\(p\\) \u8868\u793a\uff1b</li> <li>\u8fd8\u6709\u6700\u5e38\u89c1\u7684\uff1a\u516c\u5f0f\u5b58\u5728\u91cd\u8981\u7684typo\u3002\u6bd4\u5982\uff0c\u5728\u67d0\u4e9b\u5730\u65b9\uff0c \\(p^\\star\\) \u548c \\(p_\\star\\) \u4ee3\u8868\u4e24\u4e2a\u5b8c\u5168\u4e0d\u540c\u7684\u610f\u601d\uff0c\u4f46\u53c8\u5728\u67d0\u4e00\u5904\u4e00\u4e0d\u5c0f\u5fc3\u5199\u53cd\u4e86\u3002</li> </ul> </li> </ol> <p>\u6211\u4eec\u4f1a\u5c3d\u91cf\u907f\u514d\u8fd9\u4e9b\u73b0\u8c61\u53d1\u751f\uff0c\u4f46\u5fc5\u987b\u5148\u6253\u597d\u8fd9\u4e00\u9884\u9632\u9488\u3002\u8fd9\u4e5f\u4e0d\u662f\u4efb\u4f55\u4eba\u7684\u95ee\u9898\u2014\u2014\u5f88\u591a\u8bd5\u56fe\u628a\u8fd9\u4e9b\u8bb0\u53f7\u53d8\u5f97\u6e05\u695a\u6574\u6d01\u7684\u5c1d\u8bd5\u90fd\u4f1a\u5927\u6982\u7387\u56e0\u4e3a\u53d1\u73b0\u516c\u5f0f\u53d8\u5f97\u957f\u5f97\u79bb\u8c31\u4ee5\u81f3\u4e8e\u4ee4\u4eba\u65e0\u6cd5\u5fcd\u53d7\u800c\u544a\u7ec8\u3002\u6240\u4ee5\uff0c\u5728\u6df7\u4e71\u7684\u8bb0\u53f7\u4e2d\u7406\u89e3\u5b83\u4eec\u7684\u201c\u6df1\u610f\u201d\uff0c\u8fd9\u4e00\u80fd\u529b\u4e5f\u662fRL\u5373\u5c06\u4e3a\u6211\u4eec\u57f9\u8bad\u7684\uff0c\u5341\u5206\u91cd\u8981\u7684\u6280\u80fd\u4e4b\u4e00:)</p> <p>tl;dr: \u63a5\u4e0b\u6765\uff0c\u662f\u51e0\u4e2a\u5341\u5206\u57fa\u7840\u7684\u4ecb\u7ecd\u6216\u95ee\u9898\uff0c\u65e8\u5728\u4ecb\u7ecdRL\u7684\u57fa\u672c\u6982\u5ff5\uff0c\u5efa\u7acb\u8d77\u4e00\u4e2a\u201c\u5f62\u8c61\u201d\u3002\u5982\u679c\u60a8\u5df2\u7ecf\u4e86\u89e3RL\u7684\u57fa\u672c\u4efb\u52a1\uff0c\u5b8c\u5168\u53ef\u4ee5\u8df3\u8fc7\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/#what_is_reinforcement_learning","title":"What is Reinforcement Learning?","text":"<p>Reinforcement learning (RL) is an interdisciplinary area of machine learning and optimal control concerned with how an intelligent agent ought to take actions in a dynamic environment in order to maximize the cumulative reward. Reinforcement learning is one of three basic machine learning paradigms, alongside supervised learning and unsupervised learning. (Wikipedia)</p> <p>Wikipedia\u7ed9\u51fa\u7684\u5bf9RL\u7684\u5b9a\u4e49\u5341\u5206\u76f4\u89c2\u3002\u6211\u4eec\u6765\u603b\u7ed3\u4e00\u4e0b\uff0c\u4e00\u4e2a\u4e00\u822c\u7684RL\u95ee\u9898\u7531\u662fagent\uff08\u6216\u8005\u79f0\u4e3apolicy\uff09\u548c\u73af\u5883environment\u6784\u6210\uff1a - agent\u80fd\u505a\u7684\u662f\u5728\u67d0\u4e2a\u7ed9\u5b9a\u7684\u72b6\u6001\uff08state\uff09\u4e0b\u9762\u7ed9\u51fa\u64cd\u4f5c\uff08action\uff09\uff1b - \u6bcf\u4f5c\u51fa\u4e00\u4e2aaction\uff0c\u73af\u5883\u4f1a\u7ed9\u51fa\u4e00\u4e2a\u53cd\u5e94\uff0c\u4e5f\u5c31\u662f\u73af\u5883\u4f1a\u8fdb\u5165\u4e0b\u4e00\u4e2a\u72b6\u6001\uff1b\u540c\u65f6\uff0c\u6211\u4eec\u8ba4\u4e3aagent\u4f1a\u5f97\u5230\u4e00\u4e2a\u73af\u5883\u8d4b\u4e88\u7684reward\uff1b - agent\u7684\u76ee\u6807\u662f\u6700\u5927\u5316\u65e0\u9650\u8f6e\u8fd9\u6837\u7684\u64cd\u4f5c\u4e4b\u540e\u7684cumulative reward\uff08\u5f53\u7136\uff0c\u5b9e\u9645\u4e2d\u53ef\u80fd\u4f1a\u5728\u82e5\u5e72\u8f6e\u540e\u505c\u6b62\uff09\u3002\u8fd9\u4e00reward\u901a\u5e38\u7531\u73af\u5883\u7ed9\u51fa\u3002 - \u73af\u5883\u7684\u7279\u6027\u662f\u5982\u4f55\u6839\u636estate,action\u7ed9\u51fa\u4e0b\u4e00\u4e2astate\u548creward\u3002\u8fd9\u79f0\u4e3a\u73af\u5883\u7684\u52a8\u529b\u5b66\uff08dynamics\uff09\u3002</p> <p>\u6211\u4eec\u4e3a\u4ec0\u4e48\u8981\u5b9a\u4e49\u8fd9\u6837\u7684\u4e00\u4e2a\u95ee\u9898\uff1f\u5f53\u7136\u662f\u56e0\u4e3a\uff0c\u8fd9\u4e00\u62bd\u8c61\u5f88\u597d\u5730\u63cf\u8ff0\u4e86\u751f\u6d3b\u4e2d\u7684\u8bb8\u591a\u548c\u4eba\u4eec\u6240\u8ba4\u540c\u7684\u201c\u667a\u80fd\u201d\u76f8\u5173\u7684\u73b0\u8c61\u3002 - \u4eba\u4eec\u53ef\u4ee5\u8bad\u7ec3\u52a8\u7269\uff0c\u4f7f\u5f97\u5b83\u4eec\u505a\u51fa\u4e00\u4e9b\u7279\u5b9a\u7684\u52a8\u4f5c\u3002\u5982\u4f55\u8bad\u7ec3\u5462\uff1f\u6bd4\u5982\uff0c\u5c0f\u72d7\u7ad9\u8d77\u6765\uff0c\u5c31\u5582\u5b83\u4e00\u628a\u72d7\u7cae\u5403\uff0c\u5426\u5219\u5c31\u5413\u552c\u5b83\u4e00\u4e0b\uff1b\u4e45\u800c\u4e45\u4e4b\uff0c\u5c0f\u72d7\u5c31\u4f1a\u5b66\u4f1a\u7ad9\u8d77\u6765\u3002\u4eba\u4eec\u4f1a\u8bf4\uff0c\u201c\u8fd9\u4e2a\u5c0f\u72d7\u771f\u806a\u660e\uff01\u201d\u2014\u2014\u4e3a\u4ec0\u4e48\uff1f\u56e0\u4e3a\uff0c\u5b83\u5176\u5b9e\u5904\u7406\u4e86\u4e00\u4e2a\u5f88\u590d\u6742\u7684RL\u95ee\u9898\uff1a     - \u5b83\u7684action\u662f\u5341\u5206\u590d\u6742\u7684\uff0c\u4e5f\u8bb8\u53ef\u4ee5\u5efa\u6a21\u4e3a\u5927\u8111\u4e2d\u6210\u5343\u4e0a\u4e07\u795e\u7ecf\u5143\u7684\u523a\u6fc0\u4fe1\u53f7\uff1b     - \u5b83\u7684dynamics\u66f4\u662f\u590d\u6742\u3002\u4ece\u795e\u7ecf\u5143\u5982\u4f55\u5c06\u4fe1\u53f7\u4f20\u8f93\u5230\u4e00\u6839\u6839\u795e\u7ecf\u4e0a\uff0c\u8fdb\u4e00\u6b65\u63a7\u5236\u808c\u8089\u7684\u6536\u7f29\uff1b\u8fd9\u518d\u8fdb\u4e00\u6b65\u548c\u590d\u6742\u7684\u7269\u7406\u4e16\u754c\u4ea4\u4e92\uff0c\u7531\u5f39\u529b\u3001\u6469\u64e6\u529b\u3001\u91cd\u529b\u7b49\u7b49\u63a7\u5236\u7684\u4e00\u4e2a\u6781\u5ea6\u8026\u5408\u3001\u975e\u7ebf\u6027\u7684\u504f\u5fae\u5206\u65b9\u7a0b\u8fdb\u884c\u65f6\u95f4\u6f14\u5316\uff1b\u6700\u7ec8\uff0c\u5b83\u5f97\u5230\u7684reward\u53ea\u662f0\u62161\uff1b     - \u5728\u5931\u8d25\u4e00\u6b21\u4e4b\u540e\u5b83\u4e0d\u4f1a\u653e\u5f03\uff0c\u56e0\u4e3a\u5b83\u6700\u5927\u5316\u7684\u662f\u7d2f\u79ef\u7684reward\uff0c\u5b83\u5b66\u4f1a\u5229\u7528\u628a\u5386\u53f2\u7684\u5931\u8d25\u6559\u8bad\u5b58\u5728\u5b83\u7684\u201c\u53c2\u6570\u201d\u91cc\uff0c\u4f5c\u51fa\u66f4\u597d\u7684\u51b3\u7b56\uff0c\u6700\u7ec8\u8fbe\u5230\u76ee\u6807\u3002 - \u4eba\u7c7b\u81ea\u5df1\u5c31\u66f4\u662f\u5982\u6b64\u3002\u6bd4\u5982\u8bf4\uff0c\u5728\u9ad8\u4e2d\uff0c\u6211\u4eec\u4f1a\u6839\u636e\u8003\u8bd5\u7684\u6210\u7ee9\u6216\u6392\u540d\uff08\u67d0\u79cd\u201creward\u201d\uff09\u53cd\u601d\uff0c\u8fdb\u4e00\u6b65\u6539\u8fdb\u81ea\u5df1\u7684\u5b66\u4e60\u65b9\u6cd5\u8fd9\u4e00policy\uff1b\u5728\u4eba\u9645\u4ea4\u5f80\u4e2d\uff0c\u6211\u4eec\u4e5f\u4f1a\u6839\u636e\u5bf9\u65b9\u505a\u7684\u4e8b\u60c5\u6765\u8c03\u6574\u81ea\u5df1\u7684\u884c\u4e3a\uff0c\u7b49\u7b49\u3002</p> <p>\u751a\u81f3\u5bf9\u4e8e\u65b0\u751f\u7684AI\uff0c\u548c\u201c\u73af\u5883\u201d\u7684\u4ea4\u4e92\u4e5f\u662f\u201c\u667a\u80fd\u201d\u6700\u7ec8\u7684\u4f53\u73b0\u3002</p> <p>\u5728OpenAI\u63a8\u51faGPT3\u7684\u65f6\u5019\uff0c\u7814\u7a76\u8005\u4eec\u770b\u4e86\u770b\u5b83\uff0c\u8bf4\uff1a\u201c\u8fd9\u4e2a\u6a21\u578b\u771f\u4e0d\u9519\u201d\uff1b\u5728\u63a8\u51faChatGPT\u7684\u65f6\u5019\uff0c\u8fde\u4f60\u7684\u5976\u5976\u90fd\u8dd1\u8fc7\u6765\u8ddf\u4f60\u8bf4\uff1a\u201c\u8fd9\u4e2a\u6a21\u578b\u771f\u4e0d\u9519\u201d\uff01\u4f60\u4e5f\u770b\u51fa\u6765\u4e86\u2014\u2014\u8fd9\u4e4b\u95f4\u662f\u6709\u5f88\u5927\u7684\u5dee\u8ddd\u7684\u3002\u8fd9\u4e00\u5dee\u8ddd\u662f\u4ec0\u4e48\uff1f\u5c31\u662fRL\u3002\u6b63\u662fRL\u8ba9GPT3\u4ece\u4e00\u4e2a\u666e\u901a\u7684\u5927\u8bed\u8a00\u6a21\u578b\u53d8\u6210\u4e00\u4e2a\u53ef\u4ee5\u548c\u4eba\u5bf9\u8bdd\u3001\u4ea4\u4e92\u5e76\u4e86\u89e3\u4eba\u7684\u559c\u597d\u7684\"chatbot\"\u3002 \u2014\u2014Eric Mitchell, on the guest lecture of CS285</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u66f4\u52a0\u6e05\u695a\u4e86RL\u8fd9\u4e00\u9886\u57df\u7684\u91cd\u8981\u6027\u3002\u5b9e\u9645\u4e0a\uff0c\u5b83\u7684\u53d1\u5c55\u4e5f\u4e3b\u8981\u96c6\u4e2d\u5728\u4e24\u4e2a\u9886\u57df\uff1a - RL\u4f5c\u4e3a\u4e00\u4e2a\u7b97\u6cd5\u95ee\u9898\uff0c\u5982\u4f55\u89e3\u51b3\uff1f - \u6211\u4eec\u662f\u5426\u53ef\u4ee5\u7528RL\u7684\u601d\u60f3\u6765\u89e3\u91ca\u4eba\u7c7b\u6216\u52a8\u7269\u7684\u884c\u4e3a\uff1f</p> <p>\u5f53\u7136\uff0c\u4f5c\u4e3a\u5b66\u4e60\u8ba1\u7b97\u673a\u7684\u4eba\uff0c\u6211\u4eec\u66f4\u5173\u5fc3\u7684\u662f\u7b2c\u4e00\u4e2a\u95ee\u9898\u3002\u672c\u7b14\u8bb0\u5c31\u4f1a\u4ece\u6700\u57fa\u672c\u7684\u601d\u60f3\u51fa\u53d1\uff0c\u5e26\u7740\u5927\u5bb6\u4e00\u8d77\u89e3\u9501\u5404\u4e2a\u7b97\u6cd5\uff0c\u5efa\u7acb\u4e00\u4e2a\u89e3\u51b3RL\u95ee\u9898\u7684\u8f83\u5168\u9762\u7684\u6846\u67b6\u3002\u4f46\u5728\u5f00\u59cb\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u6765\u770b\u51e0\u4e2a\u5e38\u89c1\u7684\u95ee\u9898\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/#we_already_have_physics_why_do_we_need_rl_for_control_anyway","title":"We already have Physics. Why do we need RL (for control) anyway?","text":"<p>Q: \u4f60\u641e\u4e2aRL\u6a21\u578b\u4e0b\u4e0b\u68cb\u73a9\u73a9\u6e38\u620f\u5dee\u4e0d\u591a\u5f97\u4e86\uff0c\u6211\u4e0d\u61c2\u4e0d\u591a\u4f5c\u8bc4\u4ef7\u3002\u8fde\u5f00\u8f66\u3001\u53d1\u5c04\u706b\u7bad\uff0c\u4f60\u4e5f\u8981\u7528\u4f60\u90a3\u4e2a\u4ec0\u4e48\u7b97\u6cd5\u6765\uff1f\u4f60\u6a21\u578b\u51e0\u4ebf\u4e2a\u53c2\u6570\u6211\u4e0d\u61c2\uff0c\u4f46\u7269\u7406\u89c4\u5f8b\u5728\u54ea\u91cc\u5462\uff1f\u4f60\u53d1\u5c04\u706b\u7bad\u7684\u65f6\u5019\uff0c\u5927\u5230\u725b\u987f\u5b9a\u5f8b\u3001\u62c9\u683c\u6717\u65e5\u65b9\u7a0b\uff0c\u5c0f\u5230\u7a7a\u6c14\u963b\u529b\u7cfb\u6570\u751a\u81f3\u706b\u7bad\u7684\u8d28\u91cf\uff0c\u5728\u4f60\u7684\u4e00\u5806\u53ea\u6709\u7ebf\u6027\u51fd\u6570\u548crelu\u7684\u6a21\u578b\u91cc\u54ea\u4e00\u4e2a\u4f53\u73b0\u51fa\u6765\u4e86\uff1f\u6211\u51ed\u4ec0\u4e48\u76f8\u4fe1\u4f60\u7684\u751a\u81f3\u8981\u6307\u660e\u968f\u673a\u6570\u79cd\u5b50\u7684\u7b97\u6cd5\uff0c\u800c\u4e0d\u76f8\u4fe1\u6211\u51e0\u5343\u4e2a\u65b9\u7a0b\u5f0f\u4e25\u683c\u8054\u7acb\u6c42\u89e3\u51fa\u6765\u7684\u7eaf\u7269\u7406\u7684\u63a7\u5236\u65b9\u6cd5\u5462\uff1f</p> <p>A: \u7269\u7406\u7684\u65b9\u6cd5\u5f53\u7136\u5408\u7406\uff0c\u56e0\u4e3a\u5b83\u4eec\u76f8\u5f53\u4e8e\u4eba\u7c7b\u5b8c\u6210\u4e86RL\u7684\"pretraining\"\u3002\u6211\u4eec\u4e5f\u65e0\u6cd5\u5426\u8ba4\u7269\u7406\u65b9\u6cd5\u5728\u5404\u79cd\u9886\u57df\u5e94\u7528\u5e7f\u6cdb\uff0c\u6bd4\u5982\u53d1\u5c04\u706b\u7bad\uff0c\u5c31\u53ef\u4ee5\u5b8c\u5168\u901a\u8fc7\u7269\u7406\u7684\u63a7\u5236\u6765\u5b8c\u6210\u3002</p> <p>\u4f46\u662f\uff0c\u7269\u7406\u65b9\u6cd5\u4e3b\u8981\u6709\u4e24\u4e2a\u95ee\u9898\u3002\u7b2c\u4e00\uff0c\u4f60\u80fd\u5426\u5b8c\u5168\u4fdd\u8bc1\u4e00\u5207\u90fd\u5728\u7269\u7406\u7684\u63a7\u5236\u8303\u56f4\u4e4b\u5185\u5417\uff1f\u6bd4\u5982\uff0c\u5bf9\u4e8e\u81ea\u52a8\u9a7e\u9a76\uff0c\u5f53\u4f60\u83b7\u5f97\u4e00\u5f20\u9a7e\u9a76\u5ea7\u524d\u62cd\u7684\u4e00\u5f20\u7167\u7247\uff0c\u5355\u7eaf\u7684\u7269\u7406\u5b66\u5e76\u4e0d\u80fd\u5e2e\u4f60\u628a\u4f60\u524d\u65b9\u7684\u4eba\u3001\u8f66\u3001\u4ea4\u901a\u6807\u5fd7\u3001\u9053\u8def\u90fd\u5206\u6e05\u695a\uff0c\u786e\u5b9a\u4e0b\u6765\u3002\u6240\u4ee5\uff0c\u8fd9\u91cc\u5fc5\u987b\u5c31\u8981\u6709ML\u7684\u65b9\u6cd5\u4ecb\u5165\u4e86\u3002</p> <p>\u7b2c\u4e8c\uff0c\u5c31\u7b97\u5bf9\u4e8e\u5b8c\u5168\u5b8c\u7f8e\u7684\u7269\u7406\u7cfb\u7edf\uff0c\u7eaf\u7cb9\u7269\u7406\u7684\u65b9\u6cd5\u4e5f\u4e0d\u4e00\u5b9a\u53ef\u884c\u3002\u6bd4\u5982\uff0c\u4f60\u4e3a\u4e00\u53ea\u673a\u5668\u72d7\u88c5\u4e86\u65e0\u6570\u7684\u4f20\u611f\u5668\uff0c\u5b83\u73b0\u5728\u53ef\u4ee5\u7cbe\u51c6\u5730\u5b9a\u4f4d\u5b83\u811a\u4e0b\u6c99\u6ee9\u4e0a\u7684\u6bcf\u4e00\u9897\u6c99\u5b50\u7684\u4f4d\u7f6e\u3001\u5f62\u72b6\u3001\u5927\u5c0f\u548c\u6469\u64e6\u7cfb\u6570\u3002\u518d\u5047\u8bbe\u4f60\u7ecf\u8fc7\u7814\u7a76\u53ef\u4ee5\u9ad8\u6548\u5730\u6c42\u89e3\u8fd9\u4e2a\u590d\u6742\u7684\u7269\u7406\u7cfb\u7edf\u3002\u4f46\u662f\u5047\u5982\u7a81\u7136\u811a\u4e0b\u51fa\u73b0\u4e86\u4e00\u5757\u5c0f\u77f3\u5934\uff0c\u4f60\u7684\u7cfb\u7edf\u5c31\u5b8c\u5168\u9519\u8bef\u4e86\u3002\u53d1\u5c04\u706b\u7bad\u80fd\u6210\u529f\uff0c\u662f\u56e0\u4e3a\u5728\u9ad8\u7a7a\u610f\u5916\u5f88\u5c11\u89c1\uff1b\u800c\u4e00\u65e6\u610f\u5916\u51fa\u73b0\uff0c\u51fa\u4e00\u4e2a\u9519\uff0c\u52a8\u529b\u5b66\u7cfb\u7edf\u7684\u6df7\u6c8c\u6548\u5e94\u5c31\u4f1a\u8ba9\u7269\u7406\u7684\u63a7\u5236\u65b9\u6cd5\u5f88\u96be\u6062\u590d\u3002\u5bf9\u4e8e\u540c\u6837\u7684\u95ee\u9898\uff0c\u76f8\u53cd\uff0c\u5bf9\u4e8e\u5927\u90e8\u5206\u7684RL\u7b97\u6cd5\uff0c\u5b83\u628a\u73af\u5883\u62bd\u8c61\u4e3a\u4e00\u4e2a\u9ed1\u76d2\uff0c\u53d1\u751f\u610f\u5916\u60c5\u51b5\u7684\u65f6\u5019\uff0cagent\u4f1a\u611f\u77e5\uff0c\u5e76\u4e14\u6062\u590d\u3002\u8fd9\u5c31\u662fRL\u7684\u4f18\u52bf\u6240\u5728\u3002</p> <p>\u7269\u7406\u548cRL\u7684\u5173\u7cfb\uff0c\u5c31\u50cf\u56fe\u7247\u8bc6\u522b\u4e2d\u4e13\u5bb6\u65b9\u6cd5\u548c\u5377\u79ef\u7f51\u7edc\u7684\u5173\u7cfb\u4e00\u6837\u3002\u4f5c\u4e3a\u4e8c\u5341\u4e00\u4e16\u7eaa\u7684\u73b0\u4ee3\u5316\u516c\u6c11\uff0c\u6211\u4eec\u5e94\u8be5\u9010\u6e10\u610f\u8bc6\u5230\u795e\u7ecf\u7f51\u7edc\u7684\u53c2\u6570\u91cc\u8574\u542b\u7684\u65e0\u7a77\u80fd\u529b\u4e86\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/#whats_the_difference_between_rl_and_dl_in_the_root","title":"What's the difference between RL and DL (in the root)?","text":"<p>RL\u548cDL\u6709\u4ec0\u4e48\u533a\u522b\u5462\uff1f\u5f53\u7136\uff0c\u6211\u4eec\u77e5\u9053\uff0cRL\u548c\u73af\u5883\u6709\u5173\uff0c\u4e5f\u6709\u968f\u673a\u6027\uff1b\u4f46\u5b83\u6bd5\u7adf\u4e5f\u662f\u4e00\u4e2a\u5bf9\u786e\u5b9a\u7684objective\u8fdb\u884c\u4f18\u5316\u7684\u8fc7\u7a0b\u3002\u90a3\u4e48\uff0cRL\u548c\u6211\u4eec\u4e4b\u524d\u63a5\u89e6\u7684DL\uff08\u6216\u8005\u8bf4\uff0csupervised learning\u548cunsupervised learning\uff09\u5728\u5b9e\u8d28\u6027\u4e0a\u771f\u7684\u6709\u4e0d\u540c\u4e4b\u5904\u5417\uff1f</p>"},{"location":"Online%20CS%20Courses/CS285/#from_the_results","title":"From the results","text":"<p>\u5728\u5177\u4f53\u8be6\u7ec6\u5730\u5206\u6790\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u4ece\u7ed3\u679c\u4e0a\u6765\u770b\uff0c\u7528\u4e00\u53e5\u8bdd\u6765\u5f15\u5165\uff1a</p> <p>Generative models are impressive because the images look like something a person might draw; RL models are impressive because no person had thought of their strategies before. \u2014\u2014Sergey Levine, the instructor of CS285</p> <p>\u8fd9\u53e5\u8bdd\u5f88\u597d\u5730\u6982\u62ec\u4e86RL\u548cDL\uff08\u5728\u76ee\u6807\u4e0a\uff09\u7684\u533a\u522b\u3002 - DL\u6240\u505a\u7684\u662f\u6a21\u4eff\uff0c\u8fd9\u4ef6\u4e8b\u60c5\u6709\u6807\u51c6\u7b54\u6848\u3002\u6bd4\u5982\uff0c\u5bf9\u4e8egenerative model\uff0c\u5b83\u7684\u6700\u7ec8\u4efb\u52a1\u5c31\u662f\u5b66\u4f1a\u6570\u636e\u96c6\u5206\u5e03 \\(p(x)\\) \u3002\u4eba\u4eec\u5938\u8d5e\u5b83\uff0c\u5938\u8d5e\u5b83\u6a21\u4eff\u5730\u60df\u5999\u60df\u8096\uff0c\u5c31\u50cf\u662f\u4eba\u4e00\u6837\u3002 - \u800cRL\u6240\u505a\u7684\u662f\u51b3\u7b56\uff0c\u8fd9\u4ef6\u4e8b\u60c5\u6ca1\u6709\u6807\u51c6\u7b54\u6848\u3002\u6211\u4eec\u4e5f\u5df2\u7ecf\u770b\u5230\uff0cagent\u7684\u76ee\u7684\u662f\u6700\u5927\u5316cumulative reward\u3002\u5982\u4f55\u80fd\u6700\u5927\u5316\u8fd9\u4e00reward\u5462\uff1f\u6bcf\u4e00\u6b65\u53c8\u8be5take\u4ec0\u4e48action\u5462\uff1f\u8fd9\u4e0d\u4ec5\u6ca1\u6709\u7b54\u6848\uff0c\u751a\u81f3\u5728\u7406\u8bba\u4e0a\u90fd\u4e0d\u4e00\u5b9a\u662f\u552f\u4e00\u7684\u3002\u4eba\u4eec\u5938\u8d5eRL agent\uff0c\u5938\u8d5e\u5b83\u4eec\u4f5c\u51fa\u7684\u4e3e\u52a8\u662f\u5982\u6b64\u7684\u201c\u65b0\u9896\u201d\uff0c\u4e0e\u666e\u901a\u4eba\u7684\u65b9\u6cd5\u5b8c\u5168\u4e0d\u540c\uff0c\u751a\u81f3\u4e8e\u8d85\u8d8a\u4e86\u4eba\u7c7b\u7684\u8ba4\u77e5\u3002     - \u6bd4\u5982\uff0c\u5728\u5f53\u5e74AlphaGo\u6218\u80dc\u674e\u4e16\u77f3\u7684\u65f6\u5019\uff0cagent\u7ed9\u51fa\u4e86\u8457\u540d\u7684\"Move 37\"\uff0c\u5f53\u65f6\u6240\u6709\u7684\u56f4\u68cb\u4e13\u5bb6\u90fd\u65e0\u6cd5\u7406\u89e3\u8fd9\u4e00\u6b65\u7684\u610f\u4e49\uff0c\u8fd9\u5c31\u662fRL\u7684\u9b45\u529b\u6240\u5728\u3002</p> <p>\u6b64\u5916\uff0c\u8001\u5e08\u5728\u6211\u5b66\u8fd9\u95e8\u4e0d\u4e45\u7684\u65f6\u5019\u8ddf\u6211\u8bb2\u8bf4\uff0c\u5f3a\u5316\u5b66\u4e60\u7684insight\u662f\u6307\uff0c\u4ed6\u5c06\u4e0d\u53ef\u5bfc\u7684\u4e1c\u897f\u8f6c\u5316\u4e3a\u53ef\u5bfc\u7684\u4e1c\u897f\uff08\u4f8b\u5982RLHF\uff0c\u5c31\u662f\u628a\u4eba\u4eec\u7684preferences\u8f6c\u5316\u4e3a\u4e00\u4e2a\u53ef\u5bfc\u7684\u51fd\u6570\uff09\u3002\u8fd9\u4e2ainsight\u662f\u975e\u5e38\u6709\u610f\u601d\u7684\uff0c\u56e0\u4e3a\u5b83\u662f\u4e00\u4e2a\u5f88\u5927\u7684\u8f6c\u53d8\u771f\u6b63\u80fd\u591f\u5e2e\u52a9\u5230\u6211\u4eec\u3002</p> <p>\u5f53\u7136\uff0c\u4ece\u76ee\u6807\u4e0a\u6765\u770b\uff0c\u8fd8\u6709\u4e00\u4e2a\u66f4\u4e3a\u91cd\u8981\u7684\u533a\u522b\uff1ageneralization\u3002\u6211\u4eec\u5728\u8fd9\u91cc\u6682\u4e14\u4e0d\u63cf\u8ff0\uff0c\u5f53\u6211\u4eec\u53bb\u5b9e\u8df5RL\u7684\u5177\u4f53\u4efb\u52a1\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5c31\u4f1a\u771f\u6b63\u4f53\u4f1a\u5230\u5b83\u4eec\u7684\u5dee\u5f02\u3002\uff08\u5982\u679c\u4f60\u5f88\u597d\u5947\uff0c\u53ef\u4ee5\u76f4\u63a5\u53bb\u770b\u770b\u6700\u540e\u4e00\u8bb2\u7684\u603b\u7ed3\uff09</p>"},{"location":"Online%20CS%20Courses/CS285/#from_the_process","title":"From the process","text":"<p>\u4ece\uff08\u8bad\u7ec3\uff09\u8fc7\u7a0b\u4e0a\uff0cRL\u548cDL\u4e5f\u6709\u5f88\u591a\u7ec6\u8282\u4e0a\u7684\u5dee\u5f02\u3002\u8fd9\u4e9b\u5dee\u5f02\u6216\u591a\u6216\u5c11\u662f\u91cd\u8981\u7684\uff0c\u4f60\u4e5f\u53ef\u4ee5\u53d1\u73b0\uff0c\u5f88\u591aRL\u201c\u7b97\u6cd5\u201d\u5c31\u662f\u4e3a\u4e86\u51cf\u8f7b\u8fd9\u4e9b\u5dee\u5f02\u5e26\u6765\u7684\u95ee\u9898\u800c\u8bbe\u8ba1\u7684\u3002</p> <ul> <li>\u6570\u636e\u6765\u6e90\uff1a<ul> <li>\u5728DL\u4e2d\uff0c\u6211\u4eec\u88ab\u7ed9\u5b9a\u8bad\u7ec3\u6570\u636e\u96c6\uff0c\u6211\u4eec\u5728\u4e0a\u9762\u8bad\u7ec3\u6211\u4eec\u7684\u6a21\u578b\uff1b</li> <li>\u5728RL\u4e2d\uff0c\u5f00\u59cb\u6211\u4eec\u4e00\u65e0\u6240\u6709\u3002\u6211\u4eec\u9700\u8981\u81ea\u5df1\u60f3\u5982\u4f55\u548c\u73af\u5883\u4ea4\u4e92\uff0c\u83b7\u5f97\u6570\u636e\u3002\u6211\u4eec\u8fd8\u8981\u5e73\u8861\u83b7\u5f97\u65b0\u6570\u636e\u7684\u8fc7\u7a0b\u548c\u5728\u8001\u6570\u636e\u4e0a\u9762\u505a\u7c7b\u4f3cDL\u7684\u8bad\u7ec3\u7684\u8fc7\u7a0b\uff0c\u5373\u5e73\u8861exploration\u548cexploitation\u3002</li> </ul> </li> <li>\u6570\u636e\u7684\u5173\u8054\u6027\uff1a\u5373\u4f7f\u6570\u636e\u90fd\u91c7\u96c6\u5b8c\u6210\u4e86\uff0c\u8bad\u7ec3\u4e5f\u5e76\u4e0d\u76f8\u540c\uff1a<ul> <li>\u5728DL\u4e2d\uff0c\u6211\u4eec\u8ba4\u4e3a\u6570\u636e\u662fi.i.d.\u7684\u3002\u53ef\u4ee5\u53d1\u73b0\u5f88\u591aDL\u7b97\u6cd5\u5b9e\u9645\u4e0a\u9690\u5f0f\u5730\u4f9d\u8d56\uff08\u6216\u9ed8\u8ba4\u4e86\uff09\u8fd9\u4e00\u70b9\uff1b</li> <li>\u4f46\u5728RL\u4e2d\uff0c\u6570\u636e\u4e4b\u95f4\u662f\u76f8\u5173\u7684\u3002\u56e0\u4e3a\u6211\u4eec\u548c\u73af\u5883\u7684\u4ea4\u4e92\u65b9\u5f0f\u662f\uff0c\u6bcf\u4e00\u6b21\u73af\u5883\u7ed9\u6211\u4eec\u4e00\u4e2anext state\uff0c\u6211\u4eec\u5c31\u5728\u90a3\u4e00\u4e2astate\u4e0a\u9762\u7ee7\u7eed\u6d3b\u52a8\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u91c7\u96c6\u5230\u7684\u6570\u636e\u662f\u4e00\u6761\u8f68\u8ff9\uff08trajectory\uff09\u3002\u5728\u8fd9\u6837\u7684\u6570\u636e\u91cc\u9762\uff0c\u524d\u540e\u80af\u5b9a\u662f\u6709\u5173\u8054\u7684\u3002</li> </ul> </li> <li>\u989d\u5916\u7684\u548c\u73af\u5883\u4ea4\u4e92\u7684\u4ee3\u4ef7\uff1a<ul> <li>\u4f60\u4e4b\u540e\u8dd1RL\u8bad\u7ec3\u7684\u65f6\u5019\uff0c\u4f60\u4f1a\u53d1\u73b0\u4f60\u7684\u795e\u7ecf\u7f51\u7edc\u51fa\u5947\u7684\u5c0f\uff08\u6bd4\u5982\uff0c\u5c31\u51e0\u5343\u4e2a\u53c2\u6570\uff09\uff0c\u4f46\u8bad\u7ec3\u53c8\u51fa\u5947\u7684\u6162\u3002\u4e3a\u4ec0\u4e48\uff1f\u5b9e\u9645\u4e0a\u5f88\u5927\u7684\u65f6\u95f4\u82b1\u8d39\u5728\u4e86<code>env.step(actions)</code>\u8fd9\u4e00\u51fd\u6570\u4e0a\u3002\u8fd9\u4e00\u51fd\u6570\u7684\u4f5c\u7528\u5c31\u662f\uff0c\u8f93\u5165action\uff0c\u73af\u5883\u8ba1\u7b97\u5e76\u7ed9\u4f60next state\u548creward\u3002\u5982\u679c\u4f60\u4f7f\u7528<code>gym</code>\u8fd9\u4e2a\u5305\uff0c\u90a3\u4e48\u606d\u559c\u4f60\uff0c\u8fd9\u4e00\u8ba1\u7b97\u5fc5\u987b\u5728CPU\u4e0a\u4f7f\u7528<code>np.ndarray</code>\u8fdb\u884c\uff1b\u4f60\u8fd8\u603b\u662f\u9700\u8981\u628a<code>np.ndarray</code>\u548c<code>torch.Tensor</code>\u76f8\u4e92\u8f6c\u5316\uff0c\u8fd9\u90fd\u662f\u4f60\u7684GPU\u5229\u7528\u7387\u5f88\u4f4e\u7684\u539f\u56e0\u3002</li> <li>\u8fd9\u5176\u5b9e\u5df2\u7ecf\u7b97\u597d\u4e86\uff0c\u56e0\u4e3a\u6211\u4eec\u81f3\u5c11\u8fd8\u53ea\u662f\u7528simulator\u5728\u7535\u8111\u4e0a\u64cd\u4f5c\uff1b\u5982\u679c\u8981\u8bad\u7ec3\u5728\u5b9e\u9645\u4e16\u754c\u91cc\u7684\u673a\u5668\u4eba\uff0c\u90a3\u4e00\u79d2\u5c31\u662f\u8d27\u771f\u4ef7\u5b9e\u7684\u4e00\u79d2\uff01</li> <li>\u56e0\u6b64\uff0c\u5728RL\uff0c\u5fc5\u987b\u6ce8\u610f\u4e00\u4ef6\u4e8b\u53eb\u505asample efficiency\uff0c\u4e5f\u5c31\u662f\u548c\u73af\u5883\u4ea4\u4e92\u7684\u6b21\u6570\u4e0d\u5e94\u8be5\u8fc7\u591a\u3002\u8fd9\u53c8\u4f1a\u8fdb\u4e00\u6b65\u548csample\u7684\u8d28\u91cf\u5f62\u6210tradeoff\u2026\u2026</li> </ul> </li> </ul> <p>\u81f3\u6b64\uff0c\u5e94\u8be5\u53ef\u4ee5\u770b\u51faDL\u548cRL\u7684\u591a\u65b9\u9762\u533a\u522b\u4e86\u3002\u5176\u5b9e\uff0c\u8fd9\u91cc\u5217\u4e3e\u7684\u8fd8\u4e0d\u662f\u5168\u90e8\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u5177\u4f53\u7684\u7b97\u6cd5\u4e2d\u8fdb\u4e00\u6b65\u601d\u8003\u5b83\u4eec\u7684\u533a\u522b\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/#wait_so_what_do_you_mean_by_deep_rl","title":"Wait... So what do you mean by \"Deep\" RL?","text":"<p>\u7684\u786e\u2014\u2014RL\u5b9e\u9645\u4e0a\u5177\u6709\u6bd4\u4f60\u7684\u60f3\u8c61\u66f4\u52a0\u60a0\u4e45\u7684\u5386\u53f2\uff0c\u8fdc\u8fdc\u65e9\u4e8e\u795e\u7ecf\u7f51\u7edc\u7684\u53d1\u73b0\u3002\u4f46\u662f\uff0c\u5f53\u65f6\u4eba\u4eec\u7684\u6a21\u578b\u4e00\u822c\u90fd\u662f\u7ebf\u6027\u7684\u3002\u5c31\u662f\u6700\u8fd1\uff0c\u4eba\u4eec\u624d\u60f3\u5230\u628aRL\u548cDL\u7ed3\u5408\u8d77\u6765\uff0c\u7528\u795e\u7ecf\u7f51\u7edc\u6765\u8868\u793apolicy\u3002\u8fd9\u5c31\u662fDeep RL\u3002</p> <p>\u76f4\u89c2\u4e0a\uff0c\u628aRL\u641e\u5f97Deep\u4e00\u4e9b\u80af\u5b9a\u662f\u6709\u76ca\u65e0\u5bb3\uff1b\u4f46\u4e8b\u5b9e\u4e0a\u6709\u5f88subtle\u7684\u4e8b\u60c5\u4f1a\u53d1\u751f\u3002\u6211\u4eec\u4f1a\u5728\u540e\u9762\u7684\u7b14\u8bb0\u4e2d\u8fdb\u4e00\u6b65\u8ba8\u8bba\u8fd9\u4e00\u70b9\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/#anyway_lets_get_started","title":"Anyway... Let's get started!","text":""},{"location":"Online%20CS%20Courses/CS285/chap01/","title":"chap01 Supervised Learning of Behaviors","text":""},{"location":"Online%20CS%20Courses/CS285/chap01/#terminology","title":"Terminology","text":"<p>\u5148\u6765\u56de\u987e\u4e00\u4e0bPreliminaries\u4e2d\u7684\u5185\u5bb9\uff0c\u4ecb\u7ecd\u4e00\u4e9b\u7b26\u53f7\u2014\u2014</p> <ul> <li>\\(o_t\\) : observation at time \\(t\\)</li> <li>\\(a_t\\) : action at time \\(t\\)</li> <li>\\(s_t\\) : state at time \\(t\\)</li> <li>\\(\\pi_\\theta(a_t|o_t)\\) \uff1apolicy</li> </ul> <p>\u4ec0\u4e48\u662fobservation\u5462\uff1f\u8fd9\u5c31\u5f15\u5165\u4e86\u4e00\u4e2a\u8bdd\u9898\u2014\u2014\u6211\u4eec\u6709\u65f6\u5019\u5e76\u4e0d\u80fd\u89c2\u5bdf\u5230\u5168\u90e8\u7684state\u3002</p> <p>\u6bd4\u5982\u8bf4\uff0c\u5728\u5f00\u8f66\u7684\u65f6\u5019\uff0cstate\u5e94\u8be5\u5305\u542b\u5176\u4ed6\u6240\u6709\u8f66\u8f86\u7684\u4f4d\u7f6e\u3001\u901f\u5ea6\u7b49\u7b49\u3002\u4f46\u4ece\u8f66\u7a97\u4e0a\u7684\u6444\u50cf\u5934\u62cd\u4e00\u5f20\u7167\u7247\uff0c\u6211\u4eec\u663e\u7136\u4e0d\u80fd\u83b7\u5f97\u5168\u90e8\u7684\u4fe1\u606f\uff1b\u76f8\u53cd\uff0c\u7ed9\u5b9astate\uff0c\u6211\u4eec\u53ef\u4ee5\u5b8c\u5168\u7ed9\u51fa\u8fd9\u5f20\u7167\u7247\u3002\u8fd9\u6837\u7684\u7167\u7247\u5c31\u662fobservation\u3002</p> <p>\u5728\u672c\u7b14\u8bb0\u7684\u7edd\u5927\u90e8\u5206\u65f6\u5019\uff0c\u6211\u4eec\u603b\u662f\u53ef\u4ee5\u5ffd\u7565state\u548cobservation\u4e4b\u95f4\u7684\u5dee\u522b\uff1b\u4f46\u6709\u5c11\u6570\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u5fc5\u987b\u8981\u533a\u5206\u5b83\u4eec\uff0c\u5230\u65f6\u5019\u4f1a\u660e\u786e\u5730\u8bf4\u660e\u3002</p> <p>\u6211\u4eec\u8ba4\u4e3astate\u662f\u5b8c\u5907\u7684\u3002\u4ec0\u4e48\u53eb\u505a\u5b8c\u5907\uff1f\u5176\u5b9e\u5c31\u662f\u8bf4\uff0c\u5728\u5df2\u77e5 \\(s_t\\) \u7684\u65f6\u5019\uff0c \\(s_{t-1}\\) \u4e0d\u80fd\u63d0\u4f9b\u5173\u4e8e \\(s_{t+1}\\) \u7684\u66f4\u591a\u4fe1\u606f\u3002\u4e5f\u5c31\u662f</p> \\[ s_{t-1}\\perp s_{t+1}|s_t \\] <p>\u6ee1\u8db3\u8fd9\u6837\u7684\u6761\u4ef6\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u53d1\u73b0\uff0c \\(s_{t+1}\\) \u53ea\u4e0e \\(s_t,a_t\\) \u6709\u5173\uff0c\u800c\u8fd9\u53c8\u53ea\u548c\u73af\u5883\u6709\u5173\uff08\u6ce8\u610f\u548cpolicy\u65e0\u5173\uff0c\u56e0\u4e3a \\(a_t\\) \u5df2\u7ecf\u7ed9\u51fa\u4e86\uff09\u3002\u8fd9\u53ef\u4ee5\u53eb\u505adynamics\uff0c\u4e5f\u53ef\u4ee5\u53eb\u505atransition probability\uff1a</p> \\[ s_{t+1}\\sim p(s_{t+1}|s_t,a_t) \\qquad (\\text{determined by env}) \\] <p>\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u5728\u8fd9\u6837\u7684\u4e00\u7cfb\u5217\u5047\u8bbe\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u6784\u9020\u4e00\u4e2aMarkov Chain\uff0c\u6ee1\u8db3Markov Property\u3002\u5982\u56fe\u6240\u793a\u3002</p> <p></p> <p>\u6ce8\u610f\uff0c\u5728\u7ed9\u5b9a\\(a_2\\)\u7684\u65f6\u5019\uff0c\\(a_3\\)\u662f\u72ec\u7acb\u4e8e\\(a_1\\)\u7684\uff0c\u5e76\u4e14\\(s_1\\)\u4e0d\u4f1a\u63d0\u4f9b\u989d\u5916\u7684\u4fe1\u606f\u3002</p> <p>\u8bf7\u4e0d\u8981confounding \\(O \\&amp; S\\), \\(O\\)\u662fagent\u7684\u89c2\u5bdf\uff0c\\(S\\)\u662fagent\u7684\u72b6\u6001\u3002</p> <p>\u65e9\u671f\u7684\u5355\u7eaf\u7684\u76d1\u7763\u5b66\u4e60\u5e76\u4e0d\u80fd\u5f88\u597d\u7684\u5728\u81ea\u52a8\u9a7e\u9a76\u573a\u666f\u4e0a\u5e94\u7528\u7684\u539f\u56e0\u662f\uff1aIID(Independent and Identically Distributed)\u5047\u8bbe\u4e0d\u6210\u7acb.</p> <p>\u5373\u5f53\u524d\u8f93\u51fa\u7ed3\u679c\u53ef\u80fd\u5f71\u54cd\u7740\u4e0b\u4e00\u6b21\u8f93\u51fa\u7ed3\u679c\u7684\u51c6\u786e\u6027\u3002</p> <p></p> <p>\u4f46\u662f\u5f53\u82f1\u4f1f\u8fbe\u628a\u6570\u636e\u5806\u7684\u8db3\u591f\u591a\u7684\u65f6\u5019\uff0c\u8fd8\u662fwork\u4e86\u7684\u3002</p> <p>\u89e3\u51b3\u7684\u529e\u6cd5\u53ef\u4ee5\u662f\uff1a\u589e\u52a0\u6570\u636e\u91cf\uff0c\u5f3a\u5927\u7684\u6a21\u578b\uff0cmulti-task learning\uff08exotic\uff09\u3002 </p>"},{"location":"Online%20CS%20Courses/CS285/chap01/#imitation_learning","title":"Imitation Learning","text":"<p>\u6211\u4eec\u6765\u4ecb\u7ecd\u6211\u4eec\u7684\u7b2c\u4e00\u4e2aRL\u201c\u7b97\u6cd5\u201d\u2014\u2014Imitation Learning\u3002</p> <p>Imitation Learning \u7684\u601d\u8def\u5f88\u7b80\u5355\uff1a\u6211\u4eec\u627e\u4e00\u4e2a\u4e13\u5bb6\u6765label data\uff0c\u6784\u5efa\u4e00\u4e2a\u6570\u636e\u96c6 $$ \\mathcal{D}={s,a} $$ \u7136\u540e\uff0c\u6211\u4eec\u8bad\u7ec3\u4e00\u4e2a\u6a21\u578b\uff0c\u4f7f\u5f97 $$ \\theta^\\star = \\argmax_{\\theta}\\log \\pi_\\theta(a=\\pi^\\star(s)|s) $$ \u5176\u4e2d\uff0c \\(\\pi^\\star\\) \u662f\u4e13\u5bb6\u7684\u7b56\u7565\u3002\u9700\u8981\u6ce8\u610f\uff0c\u8fd9\u91cc\u5b8c\u5168\u6ca1\u6709RL\u7684\u77e5\u8bc6\uff0c\u53ea\u662f\u666e\u901a\u7684DL\u95ee\u9898\u3002\u8fd9\u4e5f\u6709\u65f6\u5019\u88ab\u53eb\u505abehavior cloning\u3002</p> <p>\u6a21\u578b\u7684\u5b9e\u73b0\u53ef\u4ee5\u662fDL\u4e2d\u7684\u5f88\u591a\u7c7b\u578b\u7684\u7f51\u7edc\u3002\u6bd4\u5982\u8bf4CNN,VAE,\u751a\u81f3diffusion models\u3002\u66f4\u8fdb\u4e00\u6b65\uff0c\u6709\u4e9b\u7814\u7a76\u8003\u8651\u4e13\u5bb6\u7684Non-Markov\u6027\u8d28\uff0c\u56e0\u6b64\u4f7f\u7528RNN\u6765\u5efa\u6a21\u3002\u5f53\u7136\uff0c\u5f88\u591a\u7ecf\u9a8c\u8bc1\u660e\u6709\u201c\u5386\u53f2\u201d\u7684\u6a21\u578b\u4e0d\u4e00\u5b9a\u6bd4\u201c\u65e0\u5386\u53f2\u201d\u7684\u6a21\u578b\u597d\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap01/#behavior_cloning_analysis","title":"Behavior Cloning Analysis","text":"<p>\u76f4\u89c2\u4e0a\uff0cbahavior cloning\u5e94\u8be5\u5931\u8d25\u3002</p> <p>\u6bd4\u5982\u8bf4\uff0c\u4e00\u4e2a\u6a21\u578b\u5728\u201c\u8d70\u94a2\u4e1d\u201d\uff0c\u5b83\u6bcf\u4e00\u6b65\u670998%\u7684\u6982\u7387\u8d70\u5728\u6b63\u786e\u7684\u9053\u8def\u4e0a\u3002\u8fd9\u6837\u7684\u6a21\u578b\u5982\u679c\u4ece\u6211\u4eec\u8bad\u7ec3\u6570\u636e\u7684\u89d2\u5ea6\u6765\u770b\uff0c\u5df2\u7ecf\u662f\u4e00\u4e2a\u5f88\u4e0d\u9519\u7684DL\u6a21\u578b\u4e86\u3002\u4f46\u662f\u5047\u8bbe\u6a21\u578b\u51b3\u7b56100\u6b65\uff0c\u90a3\u4e48\u53ea\u670913%\u5de6\u53f3\u7684\u6982\u7387\u5b83\u4f9d\u7136\u4fdd\u6301\u5728\u4e13\u5bb6\u7684\u9053\u8def\u4e0a\uff01</p> <p>\u4e0b\u9762\u7ed9\u51fa\u4e86\u4e00\u4e9b\u6570\u5b66\u4e0a\u7684\u5206\u6790\u3002\u5b83\u4eec\u7684\u4e3b\u8981\u76ee\u7684\u90fd\u662f\u4e3a\u4e86bound\u4f4fbehavior cloing\u7684\u6a21\u578b\u548c\u4e13\u5bb6\u4e4b\u95f4\u7684\u5dee\u8ddd\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap01/#notations","title":"Notations","text":"<ul> <li>\\(a=\\pi^{\\star}(s)\\) : the expert policy gives \\(a\\) when the state is \\(s\\)</li> <li>\\(\\pi_\\theta\\) : the policy we are trying to learn</li> <li>\\(p_{\\pi_\\theta}(s_t)\\) : the probability of being at state \\(s_t\\) at time \\(t\\) if we follow \\(\\pi_\\theta\\) . <ul> <li>\u91cd\u8981\u63d0\u793a: \\(p_{\\pi_\\theta}(s_t)\\) \u7684\u8fd9\u4e2a \\(p_{\\pi_\\theta}\\) \u5206\u5e03\u548c \\(p_{\\pi_\\theta}(s_{t+1})\\) \u7684\u8fd9\u4e2a \\(p_{\\pi_\\theta}\\) \u5206\u5e03\u53ef\u4e0d\u662f\u4e00\u4e2a\u5206\u5e03\uff01\u4e00\u4e2a\u662f\u5728 \\(t\\) \u65f6\u7684\u5206\u5e03\uff0c\u4e00\u4e2a\u662f\u5728 \\(t+1\\) \u65f6\u7684\u5206\u5e03\u3002 \u7684\u786e\u2014\u2014you are on the road \ud83d\ude08</li> </ul> </li> <li>Use \\(|p_1-p_2|\\) to denote the total variance distance between \\(p_1\\) and \\(p_2\\) : \\(|p_1-p_2|=\\sum_{x}|p_1(x)-p_2(x)|\\)</li> </ul>"},{"location":"Online%20CS%20Courses/CS285/chap01/#distribution_distance","title":"Distribution Distance","text":"<p>Relax\uff0c\u53ea\u662f\u4e3a\u4e86\u8bc1\u660e\u4e0a\u754c\u7684\u95ee\u9898\u3002</p> <p>Assumptions.</p> <ul> <li>\\(\\forall (a,s), \\pi_\\theta(a\\ne \\pi^{\\star}(s)|s)\\le \\epsilon\\)</li> </ul> <p>Conclusion: \u5bf9\u4efb\u610f\u7684 \\(t\\) ,</p> \\[ \\sum_{s_t}|p_{\\pi_\\theta}(s_t)-p_{\\pi^{\\star}}(s_t)|\\le 2\\epsilon t. \\] <p>Proof. \u5f52\u7eb3\u5728\u8fd9\u7c7b\u95ee\u9898\u662f\u5f88\u5e38\u89c1\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u8bd5\u7740\u628a \\(t+1\\) \u65f6\u523b\u548c \\(t\\) \u65f6\u523b\u7684\u8868\u8fbe\u5f0f\u8054\u7cfb\u8d77\u6765\uff1a</p> \\[ \\left|p_{\\pi_\\theta}(s_{t+1})-p_{\\pi^\\star}(s_{t+1})\\right|=\\left|\\sum_{s_t,a_t}p(s_{t+1}|s_t,a_t)\\pi_\\theta(a_t|s_t)p_{\\pi_\\theta}(s_t)-\\sum_{s_t}p(s_{t+1}|s_t,\\pi^\\star(s_t))p_{\\pi^\\star}(s_t)\\right|. \\] \\[ =\\left|\\sum_{s_t}\\left(\\sum_{a_t\\ne \\pi^\\star(s_t)}p(s_{t+1}|s_t,a_t)\\pi_\\theta(a_t|s_t)+p(s_{t+1}|s_t,\\pi^\\star(s_t))\\pi_\\theta(\\pi^\\star(s_t)|s_t)\\right)p_{\\pi_\\theta}(s_t)-\\sum_{s_t}p(s_{t+1}|s_t,\\pi^\\star(s_t))p_{\\pi^\\star}(s_t)\\right|. \\] \\[ \\le \\epsilon \\sum_{s_t}p_{\\pi_\\theta}(s_t)+\\sum_{s_t}p(s_{t+1}|s_t,\\pi^\\star(s_t))p_{\\pi_\\theta}(s_t)\\cdot \\epsilon+\\sum_{s_t}p(s_{t+1}|s_t,\\pi^\\star(s_t))\\left|p_{\\pi_\\theta}(s_t)-p_{\\pi^\\star}(s_t)\\right| \\] \\[ =\\epsilon+\\epsilon \\sum_{s_t}p_{\\pi_\\theta}(s_t)p(s_{t+1}|s_t,\\pi^\\star(s_t))+\\sum_{s_t}p(s_{t+1}|s_t,\\pi^\\star(s_t))\\left|p_{\\pi_\\theta}(s_t)-p_{\\pi^\\star}(s_t)\\right|. \\] <p>\u5bf9 \\(s_{t+1}\\) \u6c42\u548c\u5373\u8bc1\u3002</p> <p>Side Note. Homework 1 \u7684 Problem 1 \u5b9e\u9645\u4e0a\u7ed9\u51fa\u4e86\u4e00\u4e2a\u5f31\u5316\u7684\u6761\u4ef6\uff0c\u4f9d\u7136\u53ef\u4ee5\u7ed9\u51fa\u540c\u6837\u7684\u7ed3\u8bba\uff1a</p> \\[ \\mathbb{E}_{s_t\\sim p_{\\pi^\\star}}[\\pi_\\theta(a_t\\ne \\pi^{\\star}(s_t)|s_t)]\\le \\epsilon. \\]"},{"location":"Online%20CS%20Courses/CS285/chap01/#the_total_cost","title":"The total cost","text":"<p>Assumptions. - \\(\\mathbb{E}_{s_t\\sim p_{\\pi^\\star}}[\\pi_\\theta(a_t\\ne \\pi^{\\star}(s_t)|s_t)]\\le \\epsilon.\\)</p> <p>\u5982\u679c\u6211\u4eec\u5b9a\u4e49 \\(c_t\\) \u662f cost function\uff1a $$ c_t(s_t,a_t)=\\begin{cases}0&amp;,a_t=\\pi^{\\star}(s_t)\\1&amp;,\\text{otherwise}\\end{cases}. $$</p> <p>Conclusion: </p> \\[ S=\\sum_{t\\le T} E_{s_t\\sim p_{\\pi_\\theta}}[c_t(s_t,a_t)]=\\mathcal{O}(\\epsilon T^2). \\] <p>\uff08\u76f4\u89c2\u4e0a\u8bf4\uff0c\u8fd9\u662f\u6307\u6211\u4eec\u7684\u6a21\u578b\u5931\u8d25\u7684\u6b65\u6570\u662f \\(\\mathcal{O}(T^2)\\) \u7684\u3002\u867d\u7136\u8fd9\u53ea\u662f\u4e00\u4e2a\u4e0a\u754c\uff0c\u4f46 intuitively \u5b83\u5e94\u8be5\u662f\u6bd4\u8f83\u51c6\u786e\u7684\u3002\uff09</p> <p>Proof. </p> \\[ S=\\sum_{t\\le T} E_{s_t\\sim p_{\\pi_\\theta}}[c_t(s_t,a_t)]=\\sum_{t\\le T} \\sum_{s_t}p_{\\pi_\\theta}(s_t)c_t(s_t,a_t) \\] \\[ \\le \\sum_{t\\le T} \\sum_{s_t}p_{\\pi^\\star}(s_t)\\pi_\\theta(a_t\\ne \\pi^\\star(s_t)|s_t)+\\sum_{t\\le T} \\sum_{s_t}|p_{\\pi_\\theta}(s_t)-p_{\\pi^{\\star}}(s_t)|c_t(s_t,a_t) \\] <p>\u4f7f\u7528\u4e0a\u4e00\u4e2a\u7ed3\u679c\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230</p> \\[ S\\le \\sum_{t\\le T} \\epsilon+\\sum_{t\\le T} 2\\epsilon t = \\mathcal{O}(\\epsilon T^2). \\] Tips <p>Take away\uff0cvideo\u4e2d\u6709\u8bb2\u5230\uff0c\u5176\u5b9ereward\u51fd\u6570\u548ccost\u51fd\u6570\u662f\u53ef\u4ee5\u4e92\u6362\u7684\uff0c\u53ea\u8981\u628areward\u51fd\u6570\u53d6\u8d1f\u5c31\u884c\u4e86\u3002 </p>"},{"location":"Online%20CS%20Courses/CS285/chap01/#make_bahavior_cloning_work","title":"Make Bahavior Cloning Work","text":"<p>\u4ecb\u7ecd\u51e0\u4e2a\u5e38\u89c1\u7684\u65b9\u6cd5\uff0c\u89e3\u51b3bahavior cloning\u7684\u8fd9\u4e2a\u95ee\u9898\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap01/#adding_mistakes","title":"Adding Mistakes","text":"<p>\u5047\u8bbe\u6211\u4eec\u7684\u6a21\u578b\u5b66\u4f1a\u6539\u6b63\u81ea\u5df1\u7684\u9519\u8bef\uff08\u6bd4\u5982\uff0c\u5728\u8d70\u94a2\u4e1d\u7684\u65f6\u5019\uff0c\u8eab\u4f53\u5411\u5de6\u503e\u5012\u7684\u65f6\u523b\uff0c\u6211\u4eec\u7684\u6a21\u578b\u80fd\u591f\u81ea\u52a8\u8c03\u6574\u8eab\u4f53\u5411\u53f3\u503e\u5012\uff09\u3002\u8fd9\u6837\u7684\u8bdd\uff0c\u6210\u529f\u7684\u6982\u7387\u4f1a\u5927\u5f88\u591a\u3002</p> <p>\u4e00\u4e2a\u5178\u578b\u7684\u5b9e\u9a8c\u662f\uff0c\u6211\u4eec\u505a\u4e00\u4e2a\u9a7e\u9a76\u7684\u6a21\u578b\uff0c\u7136\u540e\u505a\u4e09\u4e2a\u6444\u50cf\u5934\uff1a\u4e00\u4e2a\u6b63\u5e38\u7684\u6444\u50cf\u5934\uff0c\u4e00\u4e2a\u5411\u5de6\u504f\u79fb\u7684\u6444\u50cf\u5934\uff0c\u4e00\u4e2a\u5411\u53f3\u504f\u79fb\u7684\u6444\u50cf\u5934\u3002\u5728\u8bad\u7ec3\u7684\u65f6\u5019\uff0c\u5de6\u8fb9\u6444\u50cf\u5934\u7684\u56fe\u7247\u88ab\u6807\u8bb0\u4e3a\u201c\u53f3\u8f6c\u201d\uff0c\u53f3\u8fb9\u6444\u50cf\u5934\u7684\u56fe\u7247\u88ab\u6807\u8bb0\u4e3a\u201c\u5de6\u8f6c\u201d\u3002\u8fd9\u6837\u7684\u8bdd\uff0c\u6211\u4eec\u7684\u6a21\u578b\u5c31\u80fd\u591f\u5b66\u4f1a\u81ea\u52a8\u8c03\u6574\u3002</p> latest\u6a21\u578b\u7684\u4e00\u4e9b\u4ee3\u8868\u5de5\u4f5c <p> </p>"},{"location":"Online%20CS%20Courses/CS285/chap01/#multi-task_learning","title":"Multi-task Learning","text":"<p>\u8fd8\u8bb0\u5f97\u6211\u4eec\u4e4b\u524d\u7684\u95ee\u9898\uff1a\u53ea\u8981\u6a21\u578b\u4e00\u6b65\u8bef\u5165\u6b67\u9014\uff0c\u63a5\u4e0b\u6765\u5c31\u518d\u4e5f\u6ca1\u6709\u633d\u56de\u7684\u4f59\u5730\u3002\u56de\u987e\u4e00\u4e0b\uff0c\u4e4b\u524d\u7684\u6a21\u578b\u5931\u8bef\u7684\u65f6\u5019\u4f1a\u8d70\u5411\u4e00\u6761\u5168\u65b0\u7684\u9053\u8def\uff0c\u662f\u5b8c\u5168\u6ca1\u6709\u8bad\u7ec3\u8fc7\u7684\uff1b\u4f46 multi-task learning \u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u2014\u2014\u5b83\u901a\u8fc7\u5de7\u5999\u7684\u8bbe\u8ba1\u6536\u96c6\u5927\u91cf\u7684 trajectory \u4fe1\u606f\uff0c\u4f7f\u5f97\u6a21\u578b\u5728\u54ea\u91cc\u90fd\u4e0d\u81f3\u4e8e\u5b8c\u5168\u4e0d\u77e5\u6240\u63aa\u3002</p> <p></p> <p>\u5177\u4f53\u5730\uff0c\u6211\u4eec\u5728\u8bad\u7ec3\u7684\u65f6\u5019\u8ba9\u4e13\u5bb6\u5e76\u975e\u5411\u5f80\u4e00\u4e2a\u76ee\u6807 \\(s_T\\) \u524d\u8fdb\uff1b\u76f8\u53cd\uff0c\u8ba9\u5b83\u5bf9\u5f88\u591a\u4e2a \\(s_T\\) \u8d70\u591a\u6761\u8fd9\u6837\u7684\u8def\u5f84\uff1a</p> \\[ s_1,a_1,\\cdots,s_{T-1},a_{T-1},s_T \\] <p>\u7136\u540e\uff0c\u6211\u4eec\u7684\u6570\u636e\u96c6\u6536\u96c6</p> \\[ \\{(a_t|s_t,g_t=s_T)\\}\\in \\mathcal{D} \\] <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u6a21\u578b\u77e5\u9053\u4e86\u5bf9\u4e8e\u6bcf\u4e00\u4e2a \u76ee\u6807 \\(s_T\\) \u5e94\u8be5\u6bcf\u4e00\u6b65\u600e\u6837\u8d70\u3002\u8fd9\u6837\u7684\u64cd\u4f5c\u4e5f\u53eb\u505a Goal-conditioned behavior cloning\u3002</p> \u4e00\u4e9b\u73b0\u5728\u7684\u5de5\u4f5c <p> </p>"},{"location":"Online%20CS%20Courses/CS285/chap01/#dagger","title":"DAgger","text":"<p>DAgger\u4e5f\u8bd5\u7740\u89e3\u51b3\u539f\u6765\u7684\u95ee\u9898\u3002\u5b83\u7684\u601d\u8def\u662f\uff0c\u4e3a\u4e86\u9632\u6b62\u6a21\u578b\u8d70\u9519\u4e4b\u540e\u4e0d\u77e5\u9053\u8be5\u600e\u4e48\u8d70\uff0c\u6211\u4eec\u5c31\u5728\u6bcf\u4e00\u4e2a\u8bad\u7ec3 iteration \u5b8c\u6210\u4e4b\u540e\u8ba9\u6a21\u578b\u81ea\u5df1\u8dd1\u4e00\u6b21\uff0c\u5e76\u8ba9\u4e13\u5bb6\u6765\u6807\u8bb0\u6b63\u786e\u7b54\u6848\u3002\u5177\u4f53\u5730\uff0c\u6211\u4eec\u4ece \\(\\pi_\\theta\\) \u4e2d\u91c7\u6837</p> \\[ s_1,a_1\\sim \\pi_\\theta(\\cdot|s_1),\\cdots,s_T,a_T\\sim \\pi_\\theta(\\cdot|s_T) \\] <p>\u7136\u540e\u628a\u8fd9\u4e9b\u65b0\u7684\u6570\u636e\u52a0\u5165\u6570\u636e\u96c6\u4e2d\uff1a</p> \\[ \\mathcal{D}= \\mathcal{D}\\cup \\left\\{(s_t,a_t^\\star=\\pi^{\\star}(s_t))|t=1,2,\\cdots,T\\right\\} \\] <p>\u5f53\u7136\uff0c\u5b9e\u9645\u4e0a\u53ef\u80fd\u91c7\u7528\u4e00\u4e9b\u5176\u4ed6\u7b56\u7565\uff0c\u6bd4\u5982\u6bcf\u4e00\u6b21\u4e0d\u662f\u5728\u8d8a\u6765\u8d8a\u5927\u7684\u6570\u636e\u96c6\u4e0a\u5b8c\u6574\u5730\u8bad\u7ec3\u4e00\u8f6e\uff0c\u800c\u662f\u628a\u6240\u6709\u8bad\u7ec3\u7684\u6570\u636e\u5b58\u5230\u4e00\u4e2a buffer \u5185\u90e8\uff0c\u7136\u540e\u4ece\u4e2d\u968f\u673a\u5730\u91c7\u6837\u3002</p> <p>\u5f53\u7136\uff0c DAgger \u4e5f\u6709\u5f88\u663e\u8457\u7684\u95ee\u9898\uff1a\u9700\u8981\u5f88\u591a\u6b21\u4e13\u5bb6\u8fdb\u884c\u6570\u636e\u7684\u6807\u6ce8\uff0c\u56e0\u6b64\u8fd9\u90e8\u5206\u7684\u4ee3\u4ef7\u53ef\u80fd\u4f1a\u5f88\u6602\u8d35\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap01/#reference_papers","title":"Reference Papers","text":"<ol> <li>A Reduction of Imitation Learning and Structured Prediction to No-Regret Online Learning</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap02/","title":"chap02 Introduction to Reinforcement Learning","text":"<p>\u5bfc\u8a00</p> <p>\u7b80\u5355\u6765\u8bf4\uff0c\u5f3a\u5316\u5b66\u4e60\u662f\u6307\u6839\u636ereward\u51fd\u6570\uff0c\u901a\u8fc7\u4e0e\u73af\u5883\u7684\u4ea4\u4e92\uff0c\u5b66\u4e60\u4e00\u4e2apolicy\uff0c\u4f7f\u5f97\u5728\u8fd9\u4e2apolicy\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u83b7\u5f97\u6700\u5927\u7684reward\uff08\u66f4\u5e0c\u671b\u7684\u662f\u5728\u672a\u6765\u7684reward\u66f4\u597d\uff09\u3002\u8fd9\u4e00\u7ae0\u8282\u4e3b\u8981\u4ecb\u7ecd\u4e86\u5f3a\u5316\u5b66\u4e60\u7684\u57fa\u672c\u6982\u5ff5\uff0c\u4ece\u9a6c\u5c14\u53ef\u592b\u51b3\u7b56\u8fc7\u7a0b\uff08MDP\uff09\u5f00\u59cb\uff0c\u5230value function\u548cQ function\uff0c\u518d\u5230RL\u7b97\u6cd5\u7684\u6982\u89c8\u3002\u8fd9\u4e00\u7ae0\u8282\u662f\u6574\u4e2a\u8bfe\u7a0b\u7684\u57fa\u7840\uff0c\u540e\u7eed\u7684\u7ae0\u8282\u4f1a\u56f4\u7ed5\u8fd9\u4e9b\u6982\u5ff5\u5c55\u5f00\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap02/#markov_decision_process_mdp","title":"Markov Decision Process (MDP)","text":""},{"location":"Online%20CS%20Courses/CS285/chap02/#basic_concepts","title":"Basic Concepts","text":"<p>Markov Chain\uff1a</p> \\[ \\mathcal{M}=\\{S,T\\} \\] <p>\u5176\u4e2d\uff0c \\(S\\) \u88ab\u79f0\u4e3astate space\uff1b \\(T\\) \u88ab\u79f0\u4e3atransition matrix\u3002 \u6211\u4eec\u53ef\u4ee5\u5199\u51fa\u7a33\u6001\u7684\u5206\u5e03\uff1a $$ p_{t+1}(s')=\\sum_{s\\in S}T(s',s)p_t(s) $$</p> <p>\u8fd9\u5c31\u662f\u4e00\u4e2a\u7b80\u5355\u7684\u77e9\u9635\u4e58\u6cd5\u3002</p> <p>Markov Decision Process\uff1a</p> \\[ \\mathcal{M}=\\{S,A,T,r\\} \\] <p>\u5176\u4e2d\uff0c \\(S\\) \u662fstate space\uff0c \\(A\\) \u662faction space\uff0c \\(T\\) \u662ftransition matrix\u3002\u6211\u4eec\u6709</p> \\[ p_{t+1}(s')=\\sum_{s,a}T(s',s,a)p_t(s)p^{(A)}_t(a) \\] <p>\u8fd9\u91cc \\(p^{(A)}_t(a)\\) \u4ee3\u8868\u5728\u65f6\u523b \\(t\\) \u6765take action \\(a\\) \u7684\u6982\u7387\u3002</p> <p>\\(r\\) \u662f reward function\uff0c\u5bf9\u4e8e\u4efb\u610f(state,action)\u5bf9\uff0c\u5b83\u7ed9\u51fa</p> \\[ r(s,a)\\in \\mathbb{R} \\] <p>\u5728 Partially Observed MDP (POMDP) \u4e2d\uff0c\u6211\u4eec\u8fd8\u5fc5\u987b\u5f15\u5165observation \\(o_t\\) \u3002\u4f46\u5728\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5747\u4e0d\u8003\u8651\u8fd9\u4e00\u60c5\u51b5\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap02/#goal","title":"Goal","text":"<p>\u6211\u4eec\u7684\u76ee\u6807\u662f\u6700\u5927\u5316 cumulative reward: $$ \\theta^\\star=\\arg\\max_\\theta \\mathbb{E}{\\tau\\sim p\\theta(\\tau)}\\left[\\sum_{t=0}^T r(s_t,a_t)\\right] $$</p> <p>\u5176\u4e2d \\(\\tau\\) \u4ee3\u8868\u8f68\u8ff9 \\((s_0,a_0,s_1,a_1,\\ldots)\\) , \\(p_\\theta(\\tau)\\) \u4ee3\u8868\u5728\u7b56\u7565 \\(\\pi_\\theta\\) \u4e0b\u5f97\u5230\u8be5\u8f68\u8ff9\u7684\u6982\u7387\u3002</p> <p>\u6211\u4eec\u8fd8\u5e0c\u671b\u628a\u8fd9\u4e00\u8868\u8fbe\u5f0f\u6269\u5c55\u5230 \\(T=\\infty\\) \u3002(\u6ce8\u610f\u73b0\u5728\u7684\u60c5\u51b5\u4e2d\u6709\u4e9b\u95ee\u9898\uff0c\u56e0\u4e3a \\(T\\to \\infty\\) \u65f6 \\(\\tau\\) \u7684probability space\u8d8b\u4e8e\u65e0\u9650\u5927\u3002) \u4e3a\u6b64\uff0c\u5b9a\u4e49 \\(p_{\\theta}(s_t,a_t)\\) \uff0c\u5b83\u662f\u5728\u65f6\u95f4 \\(t\\) \u83b7\u5f97 \\((s_t,a_t)\\) \u7684\u6982\u7387\u3002 \uff08\u6ce8\uff1a\u53c2\u89c1\u7b2c\u4e8c\u8bb2Notation\u90e8\u5206\u7684\u91cd\u8981\u6ce8\u610f\u4e8b\u9879\uff0c \\(p_\\theta\\) \u5bf9\u4e8e\u4e0d\u540c\u7684 \\(t\\) \u4e0d\u662f\u4e00\u4e2a\u5206\u5e03\uff09</p> <p>\u6211\u4eec\u6709 $$ p_{\\pi_\\theta}((s_{t+1},a_{t+1})|(s_t,a_t))=p(s_{t+1}|s_t,a_t){\\pi_\\theta}(a_{t+1}|s_{t+1}) $$</p> <p>\u56e0\u6b64\uff0c\u53ef\u4ee5\u91cd\u5199goal\u4e3a $$ \\theta^\\star=\\argmax_\\theta \\sum_{t=0}^T\\mathbb{E}{(s,a)\\sim p(s_t,a_t)}\\left[ r(s,a)\\right] $$</p> <p>\u8fd9\u4ee5\u8868\u8fbe\u5c31\u5f88\u5bb9\u6613\u6269\u5c55\u5230 \\(T\\to \\infty\\) \u7684\u65f6\u5019\u4e86\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap02/#value_function_and_q_function","title":"Value Function and Q Function","text":"<p>Value function\u662f\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u6982\u5ff5\u3002\u5b83\u5b9a\u4e49\u4e86\u4e00\u4e2astate\u7684\u4ef7\u503c\uff0c\u5373\u5728\u8fd9\u4e2astate\u4e0b\uff0c\u6211\u4eec\u53ef\u4ee5\u83b7\u5f97\u7684\u6700\u5927reward\u3002\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49Value Function\u4e3a</p> \\[ J=\\sum_{t=0}^T\\mathbb{E}_{(s_t,a_t)\\sim p_{\\pi_\\theta}(s_t,a_t)}\\left[ r(s_t,a_t)\\right] \\] \\[ =\\mathbb{E}_{s_0\\sim p(s_0)}\\left[\\mathbb{E}_{a_0\\sim \\pi_\\theta(a_0|s_0)}\\left[r(s_0,a_0)+\\sum_{t= 1}^T\\mathbb{E}_{(s_t,a_t)\\sim p_{\\pi_\\theta}(s_t,a_t|s_0,a_0)}\\left[ r(s_t,a_t)\\right]\\right]\\right] \\] <p>\u6211\u4eec\u4e5f\u53ef\u4ee5\u4ece\u4e2d\u5b9a\u4e49\u8457\u540d\u7684Q-Function\uff1a</p> \\[ Q^{\\pi_\\theta}(s_t,a_t)=r(s_t,a_t)+\\sum_{i={t+1}}^T\\mathbb{E}_{(s_i,a_i)\\sim p_{\\pi_\\theta}(s_i,a_i|s_{t},a_{t})}\\left[ r(s_i,a_i)\\right] \\] <p>\uff08\u6ce8\u610f\uff0c\u8fd9\u91cc\u8fd8\u662f\u4e00\u6837\u7684\u95ee\u9898\uff1a\u5982\u679c \\(T\\) \u6709\u9650\uff0c\u90a3\u4e48 \\(Q^{\\pi_\\theta}(\\cdot,\\cdot)\\) \u5bf9\u4e8e\u4e0d\u540c\u7684 \\(t\\) \u5f88\u53ef\u80fd\u4e0d\u662f\u4e00\u4e2a\u51fd\u6570\uff0c\u4f46\u8fd9\u4e00\u70b9\u4ece\u8bb0\u53f7\u4e0a\u6ca1\u6709\u663e\u793a\u51fa\u6765\u3002\u53ef\u4ee5\u53d1\u73b0\u5f88\u591aRL\u7684\u8bb0\u53f7\u90fd\u5b58\u5728\u8fd9\u79cd\u95ee\u9898\uff0c\u9700\u8981\u81ea\u5df1\u610f\u4f1a\u3002\uff09</p> <p>\u548cValue Function\uff1a</p> \\[ V^{\\pi_\\theta}(s_t)=\\mathbb{E}_{a_{t}\\sim \\pi_\\theta(a_t|s_t)}\\left[Q^{\\pi_\\theta}(s_t,a_t)\\right] \\] <p>\u8fd9\u6837\u6211\u4eec\u7684\u76ee\u6807\u5c31\u53d8\u6210\u4e86</p> \\[ J=\\mathbb{E}_{s_0\\sim p(s_0)}\\left[V^{\\pi_\\theta}(s_0)\\right]=\\mathbb{E}_{(s_0,a_0)\\sim p_{\\pi_\\theta}(s_0,a_0)}\\left[Q^{\\pi_\\theta}(s_0,a_0)\\right] \\] <p>\u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u6709\u4e00\u4e2a\u91cd\u8981\u7684\uff0c\u8054\u7cfb \\(Q\\) \u548c \\(V\\) \u7684\u5173\u7cfb\uff1a</p> \\[ Q^{\\pi_\\theta}(s_t,a_t)=r(s_t,a_t)+\\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}\\left[V^{\\pi_\\theta}(s_{t+1})\\right] \\] <p>\u8fd9\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528Dynamic Programming\u7684\u65b9\u6cd5\u8ba1\u7b97 \\(Q\\) \u548c \\(V\\) \u3002\u4e4b\u540e\uff0c\u6211\u4eec\u4f1a\u8ba8\u8bba\u8fd9\u4e00\u65b9\u6cd5\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap02/#planing_with_q_and_v","title":"Planing with Q and V","text":"<p>\\(Q,V\\) \u7684\u91cd\u8981\u6027\u5728\u4e8e\uff0c\u5b83\u4eec\u53ef\u4ee5\u5f88\u597d\u5730\u8868\u8fbe\u51fa\u6211\u4eec\u7684goal\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u5982\u679c\u6211\u4eec\u6709\u4e86 \\(Q,V\\) \uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u4f18\u5316policy\u3002</p> <p>\u6bd4\u5982\u8bf4\uff0c\u5982\u679c\u6211\u4eec\u6709 \\(Q^{\\pi}(s,a)\\) \uff0c\u6211\u4eec\u5c31\u6709\u4e00\u4e2a\u6700\u597d\u7684\u7b56\u7565\uff1a</p> \\[ \\pi(a^\\star,s)\\leftarrow 1, a^\\star=\\argmax_a Q^{\\pi}(s,a) \\] <p>\u9664\u6b64\u4e4b\u5916\uff0c\u7531\u4e8e \\(V\\) \u662f \\(Q\\) \u7684\u671f\u5f85\u503c\uff0c\u6211\u4eec\u4e5f\u5c31\u77e5\u9053\u6211\u4eec\u7684policy\u5e94\u8be5\u9009\u62e9\u4e00\u4e2a\u597d\u7684 \\(a\\) \uff0c\u4f7f\u5f97 \\(Q(s,a)\\ge V(s)\\) \u3002\u8fd9\u4e9b\u76f4\u89c9\u662f\u5f88\u91cd\u8981\u7684\uff0c\u4e4b\u540e\u4f1a\u8ba8\u8bba\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap02/#rl_algorithms_overview","title":"RL Algorithms Overview","text":"<p>\u6240\u6709\u7684RL\u7b97\u6cd5\u90fd\u9075\u5faa\u8fd9\u5f20\u56fe\u7684\u7ed3\u6784\uff1a</p> <p></p> <p>\"Generating Samples\" \u901a\u5e38\u662f\u6bd4\u8f83\u5bb9\u6613\u7684\uff0c\u56e0\u4e3a\u53ea\u9700\u8981\u73af\u5883\u5b8c\u6210\u3002\u6700\u5173\u952e\u7684\u90e8\u5206\u662f\u7eff\u8272\u548c\u84dd\u8272\u7684\u90e8\u5206\uff1aReward Evaluation \u548c Policy Improvement\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e9b\u5e38\u89c1\u7684RL\u7b97\u6cd5\uff1a\uff08\u6211\u4eec\u4f1a\u5728\u63a5\u4e0b\u6765\u7684\u51e0\u8bb2\u4ecb\u7ecd\u5b83\u4eec\uff09</p> Algorithm Reward Evaluation Policy Improvement Policy Gradients \\(J\\) is sum of rewards Gradient Descent on \\(J\\) Value-based Learn \\(V,Q\\) of the optimal policy Improve policy using \\(V,Q\\) (with the intuition discussed above) Acter-Critic Learn \\(V,Q\\) of the current policy Improve policy using \\(V,Q\\) Model-based Learn \\(f_\\phi\\) , \\(s_{t+1}=f_\\phi(s_t,a_t)\\) (Simulate the env) Backprop onto \\(\\pi_\\theta\\) using \\(f_\\phi\\)"},{"location":"Online%20CS%20Courses/CS285/chap02/#tradeoff","title":"Tradeoff","text":"<ul> <li>sample efficiency: <ul> <li>\u8fd9\u4e5f\u88ab\u79f0\u4e3a\u662f\u5426 \"off-policy\" \uff1f\"off-policy\" \u6307\u7684\u662f\uff0c\u5c31\u7b97policy\u6539\u53d8\u4e86\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5229\u7528\u4e4b\u524d\u7684\u6570\u636e\u3002\u8fd9\u6837\u7684\u7b97\u6cd5\u66f4\u52a0sample efficient\u3002</li> <li>\u6211\u4eec\u4ec0\u4e48\u65f6\u5019\u8981care sample efficiency\u5462\uff1f\u53ef\u4ee5\u53d1\u73b0\uff0c\u5982\u679c\u6211\u4eec\u7684\u73af\u5883\u662f\u4e00\u4e2a\u771f\u5b9e\u7684\u7269\u7406\u73af\u5883\uff0c\u90a3\u4e48sample efficiency\u5c31\u5f88\u91cd\u8981\u4e86\u3002\u4f46\u5982\u679c\u6211\u4eec\u7684\u73af\u5883\u662f\u4e00\u4e2a\u6a21\u62df\u73af\u5883\uff0c\u6211\u4eec\u5c31\u4e0d\u7528\u7ba1\u8fd9\u4e2a\u3002</li> <li>\u53ef\u4ee5\u53d1\u73b0\uff0c\u6700\u9700\u8981sample\u7684\u5f53\u7136\u662fpolicy gradient\uff1b\u800cmodel-based \u548c value-based \u9700\u8981\u7684sample\u6570\u662f\u6700\u5c11\u7684\u3002</li> </ul> </li> <li>wall clock time:\u8fd9\u662f\u8ba1\u7b97\u590d\u6742\u5ea6\u7684\u4e00\u4e2a\u7b80\u79f0\u3002\u5982\u679c\u6211\u4eec\u7684\u6a21\u578b\u8981\u9ad8\u9891\u5730\u4e0e\u73af\u5883\u4ea4\u4e92\uff0c\u90a3\u4e48\u8ba1\u7b97\u590d\u6742\u5ea6\u5c31\u5f88\u91cd\u8981\u4e86\u3002</li> <li>stability:\u8fd9\u662f\u6307\u7b97\u6cd5\u7684\u7a33\u5b9a\u6027\u3002policy gradient\u4f5c\u4e3a\u4e00\u4e2a\u68af\u5ea6\u4e0b\u964d\u7b97\u6cd5\uff0c\u603b\u662f\u53ef\u4ee5\u4fdd\u8bc1convergence\uff1b\u4f46\u5176\u4ed6\u5927\u90e8\u5206\u7684RL\u7b97\u6cd5\u7684convergence\u8fd8\u662fopen question\u3002</li> </ul>"},{"location":"Online%20CS%20Courses/CS285/chap03/","title":"Policy Gradient Algorithm","text":"<p>\u6211\u4eec\u76f4\u63a5\u4f18\u5316\u76ee\u6807</p> \\[ J(\\theta)=\\mathbb{E}_{\\tau\\sim p_{\\pi_\\theta}(\\tau)}\\left[\\sum_t r(s_t,a_t)\\right] \\] <p>\u6211\u4eec\u8ba1\u7b97\u68af\u5ea6\uff0c\u5e76\u4f7f\u7528\u4e00\u4e2a\u5c0f\u7684\u6570\u5b66\u6280\u5de7\uff1a</p> \\[ \\nabla_\\theta J(\\theta)=\\nabla_\\theta\\left[\\int p_{\\pi_\\theta}(\\tau)\\sum_t r(s_t,a_t)d\\tau\\right] \\] \\[ =\\int p_{\\pi_\\theta}(\\tau) \\nabla_\\theta \\log p_{\\pi_\\theta}(\\tau)\\sum_t r(s_t,a_t)d\\tau \\] \\[ =\\mathbb{E}_{\\tau\\sim p_{\\pi_\\theta}(\\tau)}\\left[\\nabla_\\theta \\log p_{\\pi_\\theta}(\\tau)\\sum_t r(s_t,a_t)\\right] \\] \\[ =\\mathbb{E}_{\\tau\\sim p_{\\pi_\\theta}(\\tau)}\\left[\\left(\\sum_t \\nabla_\\theta\\log \\pi_\\theta(a_t|s_t)\\right)\\left(\\sum_t r(s_t,a_t)\\right)\\right] \\] <p>\u5f53\u7136\uff0c\u5728\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u4e00\u822c\u901a\u8fc7\u91c7\u6837 \\(N\\) \u6761\u8f68\u8ff9\u6765\u4f30\u8ba1\u68af\u5ea6\uff1a</p> \\[ \\nabla_\\theta J(\\theta)\\approx \\frac{1}{N}\\sum_{n=1}^N \\left(\\sum_t \\nabla_\\theta\\log \\pi_\\theta(a_t|s_t)\\right)\\left(\\sum_t r(s_t,a_t)\\right) \\] <p>\u8fd9\u4e00\u7b97\u6cd5\u4e5f\u53eb\u505aREINFORCE algorithm\u3002 \u5b83\u5305\u542b\u4e09\u6b65\uff08\u5c31\u50cf\u7b2c\u56db\u8bb2\u63d0\u5230\u7684\u90a3\u6837\uff09\uff1a</p> <ol> <li>Sample \\(N\\) trajectories \\(\\tau_n\\) by \\(\\pi_\\theta\\) .</li> <li>Compute the gradient of \\(J(\\theta)\\) approximately</li> <li>Update \\(\\theta\\) by gradient descent.</li> </ol> <p>Comments. \u76f4\u89c2\u4e0a\u770b\uff0c\u5bf9\u4e8e\u4f7f\u5f97reward \\(\\sum r(s_t,a_t)\\) \u5f88\u5927\u7684 \\(a_t\\) \uff0c\u68af\u5ea6 \\(\\nabla \\log \\pi_\\theta(a_t|s_t)\\) \u7684\"learning rate\"\u66f4\u5927\uff0c\u6240\u4ee5\u6a21\u578b\u4f1a\u503e\u5411\u4e8e\u628a\u66f4\u5927\u7684\u6982\u7387\u7ed9\u8fd9\u4e2aaction\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap03/#issues_with_the_vanilla_policy_gradient","title":"Issues with the vanilla Policy Gradient","text":"<p>\u8fd9\u4e2a\u7b97\u6cd5\u542c\u8d77\u6765\u5f88\u76f4\u89c2\u5e76\u4e14\u5f88\u597d\u5b9e\u73b0\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u4f1a\u53d1\u73b0\u6709\u4e00\u5b9a\u7684\u95ee\u9898\uff1areward\u51fa\u73b0\u7684\u65b9\u5f0f\u4e0d\u5bf9\u3002</p> <p>\u8bbe\u60f3\u73b0\u5728\u6211\u4eec\u628a\u6bcf\u4e00\u4e2areward\u52a0\u4e00\u4e2a\u5e38\u6570\uff0c\u8fd9\u4e2a\u4f53\u7cfb\u672c\u8eab\u4e0d\u5e94\u8be5\u53d7\u5f71\u54cd\uff1b\u4f46\u73b0\u5728\u7684\u5f62\u5f0f\u4e2dreward\u4f5c\u4e3a\u4e00\u4e2a\u7c7b\u4f3c\u4e8e\"learning rate\"\u7684\u5f62\u5f0f\u4e58\u5728\u4e0a\u9762\uff0c\u8fd9\u5c31\u5bfc\u81f4\u4e86\u53ef\u80fd\u7684\u95ee\u9898\u3002</p> <ul> <li>\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u5047\u8bbe\u73b0\u5728\u6211\u4eec\u53d63\u6761\u8f68\u8ff9\uff0c\u4ed6\u4eec\u7684reward\u5206\u522b\u4e3a-2,1,1\uff0c\u90a3\u4e48\uff08\u7c97\u7565\u6765\u8bf4\uff09\u7b2c\u4e00\u6761\u7684\u6982\u7387\u4f1a\u4e0b\u964d\uff0c\u7b2c\u4e8c\u3001\u4e09\u6761\u7684\u6982\u7387\u4f1a\u4e0a\u5347\u3002\u4f46\u662f\u5047\u8bbe\u73b0\u5728reward\u5168\u5c40\u589e\u52a0\u4e00\u4e2a\u5e38\u6570\uff0c\u5bfc\u81f4\u5b83\u4eec\u53d8\u6210\u4e86100,103,103,\u90a3\u4e48\u53ef\u4ee5\u60f3\u5230\u5b83\u4eec\u4e09\u6761\u8f68\u8ff9\u7684\u6982\u7387\u90fd\u4f1a\u4e0a\u5347\uff0c\u8fd9\u660e\u663e\u662f\u4e0d\u5bf9\u7684\uff08\u56e0\u4e3a\u7b2c\u4e00\u6761\u8f68\u8ff9\u5728\u53d6\u6837\u7684\u4e09\u6761\u4e2d\u90fd\u662f\u6700\u5dee\u7684\uff0c\u5f88\u96be\u8bf4\u4ed6\u662f\u4e00\u6761\u5f88\u597d\u7684\u8f68\u8ff9\uff09\uff01</li> <li>\u4f46\u662f\u53e6\u4e00\u65b9\u9762\uff0c\u5982\u679c\u6837\u672c\u8db3\u591f\u591a( \\(N\\to\\infty\\) )\uff0c\u6839\u636e\u7406\u8bba\u6211\u4eec\u77e5\u9053\u6574\u4f53reward\u7684\u5e73\u79fb\u4e0d\u4f1a\u5f71\u54cdpolicy\u7684gradient\u3002<ul> <li>\u6ce8\u610f\u4e0a\u9762\u7684\u89e3\u91ca\u53ea\u4e0d\u8fc7\u662fintuition\uff1b\u5047\u8bbe\u73b0\u5728\u6211\u4eec\u6bcf\u4e00\u4e2areward\u90fd\u52a0\u4e86\u4e00\u4e2a100\u5bfc\u81f4\u5168\u90e8\u662f\u6b63\u7684\u4e86\uff0c\u8fd9\u5e76\u4e0d\u4f1a\u5bfc\u81f4\u6240\u6709\u6982\u7387\u90fd\u589e\u52a0\uff08\u56e0\u4e3a\u6700\u540e\u7684\u68af\u5ea6\u5e76\u4e0d\u662f\u4f20\u5230\u6982\u7387\u4e0a\uff0c\u800c\u662f\u4f20\u5230\u6982\u7387\u5206\u5e03\u7684parameters\u4e0a\uff01\uff09\u3002\u53ef\u4ee5\u60f3\u8c61\uff0c\u5982\u679c\u6240\u6709reward\u90fd\u7b49\u4e8e100\uff0c\u90a3\u4e48\u5c31\u50cf\u6240\u6709\u90fd\u662f0\u4e00\u6837\u4e0d\u4f1a\u6709\u4efb\u4f55update\u53d1\u751f\u3002</li> <li>\u56e0\u6b64\uff0c\u8fd9\u5b9e\u9645\u4e0a\u662fpolicy gradient\u7684\u4e00\u4e2a\u5178\u578b\u95ee\u9898\uff1a\u4f30\u8ba1\u672c\u8eab\u662funbiased\u7684\uff0c\u4f46\u5728sample\u6570\u91cf\u4e0d\u591f\u7684\u65f6\u5019\u4f1a\u4ea7\u751f\u5f88\u5927\u7684variance\uff0c\u4ece\u800c\u5bfc\u81f4\u4f30\u8ba1\u5177\u6709\u5f88\u5927\u7684bias\u3002</li> </ul> </li> </ul> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u5f15\u5165\u4e86\u91cd\u8981\u7684\u4e24\u4e2a\u65b9\u6cd5\uff1abaseline\u548ccausality\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap03/#baseline","title":"Baseline","text":"<p>Baseline\u76f4\u63a5\u5bf9\u4e0a\u9762\u7684\u95ee\u9898\u5f00\u5200\uff1a\u65e2\u7136reward\u4e0a\u53e0\u52a0\u7684uniform constant\u4e0d\u5f71\u54cdgradient\uff0c\u90a3\u6211\u4eec\u4e0d\u59a8\u4fee\u6539\u4e00\u4e0b\u68af\u5ea6\u7684\u8868\u8fbe\u5f0f:</p> \\[ \\nabla_\\theta J(\\theta)\\approx \\frac{1}{N}\\sum_{n=1}^N \\nabla_\\theta\\log p_{\\pi_\\theta}(\\tau_n)\\left(r(\\tau_n)-b\\right) \\] <p>\u8fd9\u91cc\u7684 \\(b\\) \uff08\u79f0\u4e3abaseline\uff09\u5e94\u8be5\u662f\u4efb\u610f\u7684\uff0c\u56e0\u4e3a $$ \\mathbb{E}{\\tau\\sim p(\\tau)}\\left[\\nabla_\\theta\\log p_{\\pi_\\theta}(\\tau)\\right]=0 $$</p> <p>\u4f46\u662f\u53e6\u4e00\u65b9\u9762\uff0c\u5c31\u50cf\u6211\u4eec\u524d\u9762\u63d0\u5230\u7684\u90a3\u6837\uff0c\u6837\u672c\u6709\u9650\u7684\u65f6\u5019\u53ef\u4e0d\u80fd\u4e71\u641e\u2014\u2014\u6211\u4eec\u5fc5\u987b\u9009\u53d6 \\(b\\) \u4f7f\u5f97variance\u6700\u5c0f\u3002\u4f46\u8fd9\u4e2a\u8ba1\u7b97\u590d\u6742\u5ea6\u592a\u9ad8\u4e86\uff0c\u5b9e\u9645\u4e0a\u4e00\u822c\u4e0d\u4f1a\u4f7f\u7528\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap03/#causality","title":"Causality","text":"<p>Causality\u5173\u6ce8\u5230\u4e86\u4e00\u4e2a\u4e0d\u6613\u5bdf\u89c9\u7684\u95ee\u9898\uff1a\u6211\u4eec\u539f\u6765\u7684\u8868\u8fbe\u5f0f\u5176\u542b\u4e49\u662f\uff0c \\(\\pi_\\theta(a_t|s_t)\\) \u7684\u68af\u5ea6\u4f9d\u8d56\u4e8e\u6574\u4e2a\u8fc7\u7a0b\u7684reward\u5927\u5c0f \\(\\sum_{t}r(s_t,a_t)\\) \uff1b\u4f46\u5b9e\u9645\u4e0a\u8fd9\u5e76\u4e0d\u5408\u7406\u2014\u2014\u6839\u636e\u56e0\u679c\u6027\uff0c \\(t\\) \u65f6\u523b\u7684\u51b3\u7b56\u4e0d\u4f1a\u5f71\u54cd \\(t'&lt;t\\) \u65f6\u523b\u7684reward\u3002\u56e0\u6b64\uff0c\u5373\u4f7f\u524d\u9762\u51e0\u6b65\u8d70\u7684\u6bd4\u8f83\u5dee\uff0c\u4f60\u4e0d\u80fd\u8ba9\u540e\u9762\u8d70\u7684\u5f88\u597d\u7684\u6b65\u9aa4\u4e5f\u8499\u53d7\u8fd9\u4e2a\u60e9\u7f5a\u3002</p> <p>\u6309\u7167\u8fd9\u4e2a\u601d\u8def\uff0c\u6211\u4eec\u76f4\u63a5\u6539\u5199</p> \\[ \\nabla_\\theta J(\\theta)\\approx \\frac{1}{N}\\sum_{n=1}^N \\sum_{t=1}^T \\nabla_\\theta\\log \\pi_\\theta(a_t|s_t)\\left(\\sum_{t'=t}^T r(s_{t'},a_{t'})\\right)=\\frac{1}{N}\\sum_{n=1}^N \\sum_{t=1}^T \\nabla_\\theta\\log \\pi_\\theta(a_t|s_t)\\hat{Q}^{\\pi_\\theta}_{n,t} \\] <p>\u5176\u4e2d\u7684 \\(\\hat{Q}^{\\pi_\\theta}_{n,t}\\) \u6709\u70b9\u7c7b\u4f3c\u4e8eQ-function\u4f46\u5e76\u4e0d\u662f\u2014\u2014\u5b83\u662f\u4f9d\u8d56\u4e8e\u8def\u5f84\u7684\uff0c\u201c\u672a\u6765\u6240\u6709reward\u4e4b\u548c\u201d\u3002</p> <p>\u6570\u5b66\u4e0a\uff0c\u4e5f\u53ef\u4ee5\u76f4\u63a5\u8bc1\u660e\u8fd9\u6837\u7684causality\u8868\u8fbe\u5f0f\u548c\u539f\u5148\u7684\u8868\u8fbe\u5f0f\u5728 \\(N\\to\\infty\\) \u65f6\u662f\u7b49\u4ef7\u7684\uff0c\u56e0\u4e3a</p> \\[ \\mathbb{E}_{\\tau\\sim p_{\\pi_\\theta}(\\tau)}\\left[\\nabla \\log \\pi_\\theta(a_t|s_t)\\left(\\sum_{t'&lt;t}r(s_{t'},a_{t'})\\right)\\right]=0 \\] <p>\u53ea\u4e0d\u8fc7\uff0c\u5c31\u5982\u6211\u4eec\u4e4b\u524d\u8bf4\u7684\u90a3\u6837\uff0c\u901a\u8fc7\u51cf\u5c0f\u4e0d\u5e94\u8be5\u51fa\u73b0\u7684\u9879\u8fdb\u884c\u7ea6\u5316\uff0c\u8fd9\u4e2a\u5229\u7528\u4e86causality\u7684\u8868\u8fbe\u5f0f\u4f1a\u51cf\u5c0fvariance\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap03/#off-policy_policy_gradients","title":"Off-Policy Policy Gradients","text":"<p>\u9664\u4e86\u5de8\u5927\u7684variance\u4e4b\u5916\uff0cpolicy gradient\u7684on-policy\u7279\u6027\uff08\u89c1\u7b2c4\u8bb2\uff09\u4e5f\u9020\u6210\u4e86sample efficiency\u7684\u95ee\u9898\u3002\u5f53\u7136\uff0c\u4e00\u822cpolicy gradient\u90fd\u662f\u7528\u5728sample efficiency\u4e0d\u9700\u8981\u7279\u522b\u8003\u8651\u7684\u5730\u65b9\uff0c\u4f46\u662f\u6211\u4eec\u8fd8\u662f\u8ba8\u8bba\u4e00\u7c7b\u7279\u522b\u7684\u65b9\u5f0f\uff0c\u628aoff-policy\u7684\u601d\u60f3\u5f15\u5165policy gradient\u3002</p> <p>\u5173\u952e\u5728\u4e8e\u91c7\u7528Importance Sampling\u3002\u5047\u8bbe\u73b0\u5728\u6211\u4eec\u6709 \\(p_{\\pi_{\\bar{\\theta}}}\\) \u8fd9\u4e2a\u5206\u5e03\u4e2d\u53d6\u6837\u7684\u82e5\u5e72\u6837\u672c\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u7528importance sampling\u5229\u7528\u8fd9\u4e9b\u6837\u672c\u6765\u4f30\u8ba1 \\(p_{\\pi_\\theta}\\) \u5206\u5e03\u4e2d\u67d0\u4e9b\u4e1c\u897f\u7684\u671f\u671b\u3002\u5177\u4f53\u5730\uff0c\u6211\u4eec\u5199\u51fa</p> \\[ \\nabla_{\\theta}J(\\theta)=\\mathbb{E}_{\\tau\\sim p_{\\pi_\\theta}(\\tau)}\\left[\\nabla_{\\theta}\\log p_{\\pi_\\theta}(\\tau)\\sum_t r(s_t,a_t)\\right] \\] \\[ =\\mathbb{E}_{\\tau\\sim p_{\\pi_{\\bar{\\theta}}}(\\tau)}\\left[\\frac{p_{\\pi_\\theta}(\\tau)}{p_{\\pi_{\\bar{\\theta}}}(\\tau)}\\nabla_{\\theta}\\log p_{\\pi_\\theta}(\\tau)\\sum_t r(s_t,a_t)\\right] \\] \\[ =\\mathbb{E}_{\\tau\\sim p_{\\pi_{\\bar{\\theta}}}(\\tau)}\\left[\\prod_{t=1}^T\\frac{{\\pi_\\theta}(a_t|s_t)}{{\\pi_{\\bar{\\theta}}}(a_t|s_t)} \\left(\\sum_{t=1}^T \\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t) \\right)\\left(\\sum_{t=1}^T r(s_t,a_t)\\right)\\right] \\] <p>\u8fd9\u6837\uff0c\u5728\u8fde\u7eed\u51e0\u8f6e\u5bf9policy\u7684\u8bad\u7ec3\u4e2d\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5728\u4e00\u5f00\u59cb\u5bf9\u7b56\u7565 \\(\\pi_{\\bar{\\theta}}\\) \u8fdb\u884c\u4e00\u4e2a\u91c7\u6837\uff0c\u5c31\u53ef\u4ee5\u7528\u4e8e\u51e0\u8f6e\u7684\u8bad\u7ec3\u3002\u6211\u4eec\u6210\u529f\u628aoff-policy\u7684\u601d\u60f3\u5f15\u5165\u4e86policy gradient\u3002</p> <p>\u4f46\u662f\u8fd9\u6837\u4ecd\u7136\u5b58\u5728\u95ee\u9898\uff1a\u6211\u4eec\u6ce8\u610f\u5230\uff0c\u8fd9\u91cc\u6709\u4e00\u4e2a \\(T\\) \u4e2a\u6570\u7684\u8fde\u4e58\u79ef\uff0c\u5982\u679c\u7f51\u7edc\u7684\u8f93\u51fa\u6bd4\u8f83\u5927\u6216\u8005\u5c0f\uff0c\u8fd9\u5c31\u5f88\u5bb9\u6613\u5bfc\u81f4\u7b49\u5f0f\u5de6\u8fb9\uff08\u4e5f\u5c31\u662f\u68af\u5ea6\uff09\u8fc7\u5927\u6216\u8fc7\u5c0f\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u8fdb\u884c\u4e00\u4e9b\u8fd1\u4f3c\uff08\u6216\u4e25\u683c\u53d8\u5f62\uff09\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap03/#with_causality","title":"With Causality","text":"<p>\u8fd9\u4e2a\u8ba1\u7b97\u6709\u4e9b\u590d\u6742\u3002\u6211\u4eec\u9996\u5148\u4ece\u65e7\u7684causality\u8868\u8fbe\u5f0f\u5f00\u59cb\uff08\u4e0d\u505aimportance sampling\uff09\uff1a</p> \\[ \\nabla_\\theta J(\\theta)=\\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[ \\sum_{t=1}^T \\nabla_\\theta\\log \\pi_\\theta(a_t|s_t)\\left(\\sum_{t'=t}^T r(s_{t'},a_{t'})\\right)\\right] \\] \\[ =\\sum_{t=1}^T\\sum_{t'=t}^T \\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[r(s_{t'},a_{t'}) \\nabla_\\theta\\log \\pi_\\theta(a_t|s_t) \\right] \\] \\[ =\\sum_{t=1}^T\\sum_{t'=t}^T \\sum_{s_1,a_1,\\cdots,s_T,a_T}p(s_1)\\pi_\\theta(a_1|s_1)\\cdots p(s_T|a_{T-1},s_{T-1})\\pi_\\theta (a_T|s_T)r(s_{t'},a_{t'}) \\nabla_\\theta\\log \\pi_\\theta(a_t|s_t) \\] <p>\uff08\u63a5\u4e0b\u6765\u8fd9\u4e00\u6b65\u7684\u601d\u60f3\u662f\u5bf9\u6982\u7387\u5206\u5e03\u4f7f\u7528causality\uff0c\u4f46\u6570\u5b66\u4e0a\u662f\u4e25\u683c\u7b49\u7684\uff09</p> \\[ =\\sum_{t=1}^T\\sum_{t'=t}^T \\sum_{s_1,a_1,\\cdots,s_{t'},a_{t'}}p(s_1)\\pi_\\theta(a_1|s_1)\\cdots p(s_{t'}|a_{{t'}-1},s_{{t'}-1})\\pi_\\theta (a_{t'}|s_{t'})r(s_{t'},a_{t'}) \\nabla_\\theta\\log \\pi_\\theta(a_t|s_t) \\] \\[ =\\sum_{t=1}^T\\sum_{t'=t}^T\\mathbb{E}_{\\tau_{\\le t'}\\sim p_{\\bar{\\theta}}(\\tau_{\\le t'})}\\left[\\prod_{t''=1}^{t'}\\frac{{\\pi_\\theta}(a_{t''}|s_{t''})}{{\\pi_{\\bar{\\theta}}}(a_{t''}|s_{t''})}r(s_{t'},a_{t'})\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\right] \\] \\[ =\\sum_{t=1}^T\\sum_{t'=t}^T\\mathbb{E}_{\\tau \\sim p_{\\bar{\\theta}}(\\tau)}\\left[\\prod_{t''=1}^{t'}\\frac{{\\pi_\\theta}(a_{t''}|s_{t''})}{{\\pi_{\\bar{\\theta}}}(a_{t''}|s_{t''})}r(s_{t'},a_{t'})\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\right] \\] \\[ =\\sum_{t=1}^T\\mathbb{E}_{\\tau \\sim p_{\\bar{\\theta}}(\\tau)}\\left[\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\cdot \\prod_{t''=1}^{t}\\frac{{\\pi_\\theta}(a_{t''}|s_{t''})}{{\\pi_{\\bar{\\theta}}}(a_{t''}|s_{t''})}\\sum_{t'=t}^T\\left(r(s_{t'},a_{t'})\\prod_{t''=t+1}^{t'}\\frac{{\\pi_\\theta}(a_{t''}|s_{t''})}{{\\pi_{\\bar{\\theta}}}(a_{t''}|s_{t''})}\\right)\\right] \\]"},{"location":"Online%20CS%20Courses/CS285/chap03/#with_first-order_approximation","title":"With First-order Approximation","text":"<p>First-order approximation\u662f\u6307\uff0c\u6211\u4eec\u4e22\u6389 \\(t'\\ne t\\) \u7684importance weight\u9879\uff0c\u7ed9\u51fa</p> \\[ \\nabla_\\theta J(\\theta)=\\sum_{t=1}^T\\mathbb{E}_{\\tau \\sim p_{\\bar{\\theta}}(\\tau)}\\left[\\frac{{\\pi_\\theta}(a_{t}|s_{t})}{{\\pi_{\\bar{\\theta}}}(a_{t}|s_{t})}\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\sum_{t'=t}^Tr(s_{t'},a_{t'})\\right] \\] <p>\u4e4d\u4e00\u770b\uff0c\u8fd9\u6beb\u65e0\u9053\u7406\uff1a\u4e3a\u4ec0\u4e48\u6211\u4eec\u53ef\u4ee5\u4e22\u6389\u8fd9\u4e48\u591a\u9879\uff1f\u5b9e\u9645\u4e0a\uff0c\u8fd9\u4e00\u65b9\u6cd5\u66f4\u591a\u5730\u6765\u81ea\u4e00\u4e2a\u66f4\u9ad8\u7684\u89c6\u89d2\u3002\u6211\u4eec\u4f1a\u5728\u7b2c9\u8bb2\u8fdb\u884c\u4ecb\u7ecd\u3002\u4e0d\u7ba1\u5982\u4f55\uff0c\u8fd9\u6837\u663e\u7136\u51cf\u5c11\u4e86\u5de8\u91cf\u7684\u8ba1\u7b97\u91cf\u2014\u2014\u5c31\u7b97\u5b83\u6ca1\u6709\u4ec0\u4e48\u9053\u7406\uff0c\u5982\u679c\u5b83work\u4e86\uff0c\u4eba\u4eec\u4e5f\u60f3\u5fc5\u4f1a\u5341\u5206\u5668\u91cd\u5b83\u3002</p> <p>\u4f46\u5728\u63a5\u53d7\u540e\u9762\u66f4\u9ad8\u7ea7\u7684\u77e5\u8bc6\u4e4b\u524d\uff0c\u4e0d\u59a8\u8ba9\u6211\u4eec\u5148\u6765\u4ece\u76f4\u89c9\u4e0a\u7406\u89e3\u4e00\u4e0b\u4e0a\u9762\u7684\u8868\u8fbe\u5f0f\u7684\u539f\u7406\u3002\u4ee5\u4e0b\u5185\u5bb9\u662f\u6765\u81eajzc\u7684\u4e00\u4e2a\u975e\u5e38\u4e0d\u9519\u7684\u7406\u89e3</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u4e0a\u9762\u7684\u8868\u8fbe\u5f0f\u76f8\u6bd4\u4e8e\u539f\u5148\u6700\u5f00\u59cb\u7684\u6570\u5b66\u4e0a\u4e25\u683c\u7684\u8868\u8fbe\uff0c\u76f8\u5f53\u4e8e\u53bb\u9664\u4e86\u9664\u4e86 \\(t\\) \u65f6\u523b\u4e4b\u5916\u7684\u6240\u6709importance weight\u3002\u4e3a\u4ec0\u4e48\u8fd9\u662f\u5408\u7406\u7684\u5462\uff1f</p> <p></p> <p>\u6211\u4eec\u8003\u8651\u8fd9\u6837\u4e00\u5f20\u56fe\uff1a\u5047\u8bbe\u73af\u5883\u662f\u51b3\u5b9a\u6027\u7684\uff0c\u800c\u7ea2\u8272\u6807\u51fa\u7684\u662f\u6211\u4eec\u7684policy\u7684\u6982\u7387\u3002\u90a3\u4e48\u6839\u636e\u4e24\u6b65\u5f97\u5230\u7684\u6b63\u786e\u6982\u7387\uff0c\u6211\u4eecpolicy gradient\u5bfc\u81f4\u7684policy\u6982\u7387\u5206\u5e03\u7684\u68af\u5ea6\u5c31\u53ef\u4ee5\u7528\u56fe\u4e2d\u7684\u84dd\u7ebf\u7684\u8868\u793a\uff08\u8fd9\u91cc\u84dd\u7ebf\u8d8a\u7c97\u4ee3\u8868\u68af\u5ea6\u8d8a\u5927\uff09\u3002\u6bd4\u5982\u8bf4\uff0c\u4ece\u4e0a\u5230\u4e0b\u7b2c\u4e8c\u4e2a\u70b9\u7684reward\u5c31\u6bd4\u7b2c\u4e00\u4e2a\u70b9\u5bf9policy\u7684\u68af\u5ea6\u5f71\u54cd\u66f4\u5927\u3002</p> <p>\u90a3\u4e48\u73b0\u5728\u6211\u4eec\u79fb\u53bb\u524d\u9762\uff08\u4e5f\u5c31\u662f \\(t'&lt;t\\) \u7684\uff09importance sampling\u7684\u9879\uff0c\u76f8\u5f53\u4e8e\u4e27\u5931\u4e86\u7b2c\u4e00\u6b65\u7684\u4fe1\u606f\uff08\u6807\u4e3a\u7070\u8272\uff0c\u8fd9\u91cc\u5047\u8bbeproposal\u5c31\u662f\u7b80\u5355\u7684\u5747\u5300\u5206\u5e03\uff0c50%\u6982\u7387\uff09\uff0c\u4e5f\u5c31\u662f\u8bad\u7ec3\u7684\u6570\u636e\u96c6\u4e2d\u7b2c\u4e00\u6b65\u7684\u6982\u7387\u5206\u5e03\u5b8c\u5168\u7531proposal \\(\\pi_{\\bar{\\theta}}\\) \u63d0\u4f9b\u3002\u4f46\u662f\u5373\u4fbf\u5982\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\u8fd9\u4e2a\u6a21\u578b\u4e5f\u53ef\u4ee5\u5b66\u4f1a\u7b2c\u4e8c\u6b65\u7684\u6b63\u786e\u64cd\u4f5c\uff1a\u6bcf\u4e00\u4e2a\u70b9\u5904policy\u7684\u9009\u53d6\u8fd8\u662f\u51b3\u5b9a\u4e8e\u6982\u7387\u66f4\u5927\u7684\u90a3\u4e2a\u7684reward\u3002</p> <p>\u7c7b\u4f3c\u5730\uff0c\u524d\u9762\u79fb\u9664\u540e\u9762\u7684importance weight\u7684\u5f71\u54cd\u4e5f\u53ea\u662f\u5728\u4e8e\u66f4\u4e45\u8fdc\u7684reward\u76f8\u5dee\u4e86\u4e00\u5b9a\u7684\u500d\u6570\u3002\uff08\u539f\u6765\u7684\u65f6\u5019\u5bf9\u4e8e\u4e0d\u540c\u7684 \\(t'&gt;t\\) \uff0c \\(r(s_{t'},a_{t'})\\) \u6709\u7740\u4e0d\u540c\u7684importance weight\uff0c\u4f46\u73b0\u5728\u76f4\u63a5\u662f\u52a0\u8d77\u6765\uff09\u3002\u53ea\u8981 \\(t\\) \u65f6\u523b\u7684importance weight\u8fd8\u5728\uff0c\u6574\u4f53\u7684\u4f18\u5316\u65b9\u5411\u5c31\u5927\u6982\u4ecd\u7136\u662f\u5bf9\u7684\u3002</p> <p>\u4f60\u53ef\u80fd\u4f1aargue\uff0c\u8fd9\u5f20\u56fe\u7247\u91cc\u7684\u60c5\u51b5\u662f\u56e0\u4e3a\u6570\u5b57\u4e0a\u7684\u5de7\u5408\uff08\u66f4\u6539\u8fd9\u51e0\u4e2a\u6982\u7387\u7684\u6570\u503c\u4f1a\u4f7f\u5f97\u7ed3\u8bba\u53d8\u7684\u4e0d\u662f\u8fd9\u6837\uff09\u3002\u4f46\u662f\u6211\u5e76\u4e0d\u662f\u8bd5\u56fe\u8bba\u8bc1\u5b83\u662f\u201c\u5b8c\u5168\u6b63\u786e\u7684\u201d\uff1b\u76f8\u53cd\uff0c\u6211\u4eec\u5374\u53ea\u9700\u8981\u8bf4\u660e\u8fd9\u4e2a\u65b0\u7684loss\u662f\u5408\u7406\u7684\uff1a\u8fd9\u4e2a\u65b0\u7684loss\u53ef\u4ee5\u7406\u89e3\u4e3a\u524d\u9762\u548c\u540e\u9762\u90fd\u6309\u7167importance sampling\u7684\u65b9\u5f0f\u8d70\uff0c\u53ea\u6709\u7b2ct\u6b65\u6309\u7167\u73b0\u6709\u7684policy\u6765\u8d70\uff0c\u8fd9\u6837\u4e00\u4e2a\u65b0\u7684\"hybridized policy\"\u3002\u76f4\u89c2\u4e0a\u53ef\u4ee5\u60f3\u8c61\uff0c\u4f18\u5316\u8fd9\u4e2apolicy\u4e5f\u53ef\u4ee5\u5e26\u7740\u539f\u6765\u7684policy\u5f80\u6b63\u786e\u7684\u65b9\u5411\u524d\u8fdb\u3002</p> <p>\u8fd9\u91cc\uff0c\u8fd8\u900f\u9732\u51fa\u4e00\u4e2a\u81f3\u6df1\u7684\u601d\u60f3\uff1a</p> <p>\u5c0f\u8d34\u58eb</p> <p>RL\u7684\u4e00\u4e2a\u91cd\u8981\u89c2\u70b9\u662f\uff0c\u548cDL\u4e0d\u540c\uff0c\u6211\u4eec\u6ca1\u6709\u4e00\u4e2a\u7edd\u5bf9\u7684\u201c\u76ee\u6807\u201d\u7684\u6982\u5ff5\u3002value\u53ea\u662f\u4e00\u4e2aproposed\u7684\u76ee\u6807\uff0c\u5173\u952e\u8fd8\u662f\u8981\u6211\u4eec\u7684\u6a21\u578b\u80fd\u591fwork\u3002</p> <p>\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u6211\u4eec\u5f88\u591a\u65f6\u5019\u4e3a\u4e86\u51cf\u5c11\u8ba1\u7b97\u91cf\u53ef\u4ee5\u505a\u4e00\u4e9b\u6570\u5b66\u4e0a\u4e0d\u5b8c\u5168\u6b63\u786e\u7684\u4e8b\u60c5\uff1a\u4f60\u53ef\u4ee5\u7406\u89e3\u4e3a\u6211\u4eec\u6362\u4e86\u4e00\u4e2a\u65b0\u7684\u76ee\u6807\uff08\u6bd4\u5982\u4e0a\u9762\uff0c\u6539\u6210\u5728\u8fd9\u6837\u7684\u4e00\u4e2a\u201chybridized\u201d\u7684policy\u4e0b\u9762\u6700\u4f18\u5316reward\uff09\uff0c\u53ea\u8981\u8fd9\u4e2a\u76ee\u6807\u4f9d\u7136\u5408\u7406\uff08\u4e0d\u80fd\u6709\u660e\u663e\u7684\u60c5\u51b5\u4f7f\u5f97\u5b83\u8d1f\u4f18\u5316\uff09\uff0c\u5e76\u4e14\u6570\u5b66\u4e0a\u4f7f\u5f97\u8ba1\u7b97\u66f4\u7b80\u5355\uff0c\u90a3\u6211\u4eec\u5c31\u662f\u7a33\u8d5a\u4e0d\u8d54\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap03/#policy_gradient_in_practice","title":"Policy Gradient In Practice","text":""},{"location":"Online%20CS%20Courses/CS285/chap03/#fake_loss_function_for_autograd","title":"Fake Loss Function for Autograd","text":"<p>\u6211\u4eec\u5148\u56de\u5230\u53ea\u8003\u8651causality\u7684policy gradient\u7684\u8868\u8fbe\u5f0f\uff1a</p> \\[ \\nabla_\\theta J(\\theta)\\approx \\frac{1}{N}\\sum_{n=1}^N \\sum_{t=1}^T \\nabla_\\theta\\log \\pi_\\theta(a_t|s_t)\\left(\\sum_{t'=t}^T r(s_{t'},a_{t'})\\right)=\\frac{1}{N}\\sum_{n=1}^N \\sum_{t=1}^T \\nabla_\\theta\\log \\pi_\\theta(a_t|s_t)\\hat{Q}^{\\pi_\\theta}_{n,t} \\] <p>\u4e3a\u4e86\u907f\u514d\u624b\u52a8\u8ba1\u7b97\u68af\u5ea6\uff0c\u6211\u4eec\u53ef\u4ee5\u6784\u9020\u4e00\u4e2a\u6ca1\u6709\u5b9e\u9645\u610f\u4e49\u7684loss\uff0c\u4f46\u8fd9\u4e2aloss\u7684\u68af\u5ea6\u5c31\u662f \\(\\nabla_\\theta J(\\theta)\\) \u3002\u5b83\u53ef\u4ee5\u662f</p> \\[ \\tilde{J}(\\theta)=\\frac{1}{N}\\sum_{n=1}^N \\sum_{t=1}^T \\log \\pi_\\theta(a_t|s_t)\\hat{Q}^{\\pi_\\theta}_{n,t} \\] <p>\uff08\u6ce8\u610f \\(\\hat{Q}^{\\pi_\\theta}_{n,t}\\) \u548c \\(\\theta\\) \u65e0\u5173\uff0c\u53ea\u548c\u8def\u5f84\u6709\u5173\uff09</p>"},{"location":"Online%20CS%20Courses/CS285/chap03/#tune_the_hyperparameters","title":"Tune the Hyperparameters","text":"<ul> <li>Learning rate: hard to tune, so better use Adam.</li> <li>Batch size: as large as possible, since the variance is large.</li> </ul>"},{"location":"Online%20CS%20Courses/CS285/chap03/#further_policy_gradients","title":"Further Policy Gradients","text":"<p>\u6211\u4eec\u4f1a\u5728\u7b2c9\u8bb2\u7ee7\u7eed\u4ecb\u7ecd\u6709\u5173policy gradient\u7684\u77e5\u8bc6\u3002\u5c4a\u65f6\uff0c\u6211\u4eec\u4f1a\u4ece\u53e6\u5916\u4e00\u4e2a\u89d2\u5ea6\u7406\u89e3policy gradient\uff0c\u5e76\u5bf9\u5176\u63d0\u51fa\u4e00\u4e2a\u91cd\u8981\u7684\u6539\u8fdb\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap03/#reference_papers","title":"Reference Papers","text":"<ol> <li>Guided Policy Search\uff08\u4f7f\u7528importance sampling\u7684policy gradient\u65b9\u6cd5\uff09</li> <li>Infinite-horizon policy-gradient estimation \uff08\u4ecb\u7ecd\u4e86temporally decomposed policy gradient\uff09</li> <li>Reinforcement learning of motor skills with policy gradients\uff08\u4ecb\u7ecd\u4e86optimal baselines \u548c natural gradient\uff09</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap04/","title":"Improve Policy Gradient","text":""},{"location":"Online%20CS%20Courses/CS285/chap04/#introduce_qv_into_policy_gradient","title":"Introduce Q,V into Policy Gradient","text":"<p>\u6211\u4eec\u91cd\u65b0\u8003\u8651\u4e4b\u524d\u7684\u8003\u8651causality\u7684 policy gradient\u7684\u8868\u8fbe\u5f0f\uff1a</p> \\[ \\nabla_\\theta J(\\theta)=\\mathbb{E}_{\\tau \\sim p_{\\bar{\\theta}}(\\tau)}\\left[\\sum_{t=1}^T\\left(\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\sum_{t'=t}^Tr(s_{t'},a_{t'})\\right)\\right]=\\mathbb{E}_{\\tau \\sim p_{\\bar{\\theta}}(\\tau)}\\left[\\sum_{t=1}^T\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\hat{Q}^{\\pi_\\theta}_{n,t} \\right] \\] <p>\u4f46\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u5177\u6709\u6bd4\u8f83\u5927\u7684variance\u3002\u4ed4\u7ec6\u4e00\u60f3\uff0c\u662f\u56e0\u4e3a\u5bf9\u4e8e\u6bcf\u4e00\u6b21 \\(\\hat{Q}^{\\pi_\\theta}_{n,t}\\) \u6211\u4eec\u53ea\u8ba1\u7b97\u4e00\u6761\u8f68\u8ff9\uff0c\u8fd9\u4f1a\u5bfc\u81f4variance\u5f88\u5927\u3002\u8bf7\u8bb0\u4f4f\u672c\u8bb2\u7684takeover\uff1a</p> <p>\u91cd\u8981\u601d\u60f3. \u5bf9\u4e8e\u5f88\u591a\u95ee\u9898\uff0c\u6709\u4e24\u79cd\u65b9\u6848\uff1a</p> <ol> <li>\u4e00\u4e2a\u5355\u91c7\u6837\u7684\u4f30\u8ba1\uff0c\u867d\u7136unbiased\u4f46\u65b9\u5dee\u5927\uff1b</li> <li>\u4e00\u4e2a\u6a21\u578b\u7684\u62df\u5408\uff0c\u867d\u7136\u5bf9\u4e0d\u51c6\u786e\u7684model\u6709\u4e00\u5b9abias\uff0c\u4f46\u65b9\u5dee\u5c0f\u3002</li> </ol> <p>\u6211\u4eec\u9700\u8981\u5728\u8fd9\u4e24\u8005\u4e4b\u95f4\u505a\u4e00\u4e2atradeoff\u3002</p> <p>\u672c\u8bb2\u5f88\u591a\u5730\u65b9\u90fd\u8981\u91c7\u7528\u8fd9\u79cd\u601d\u60f3\u3002\u6bd4\u5982\u8fd9\u91cc\uff0c\u6839\u636e\u8fd9\u4e2a\u91cd\u8981\u601d\u60f3\uff0c\u6211\u4eec\u5e0c\u671b\u628a \\(\\hat{Q}^{\\pi_\\theta}_{n,t}\\) \u6362\u6210\u5f88\u591a\u8f68\u8ff9\u7684\u671f\u5f85\u503c\u3002</p> <p>\u90a3\u8fd9\u4e2a\u671f\u5f85\u503c\u662f\u4ec0\u4e48\uff1f\u6211\u4eec\u53d1\u73b0\uff0c\u5176\u5b9e\u5c31\u662f</p> \\[ Q^{\\pi_\\theta}(s_t,a_t)=\\mathbb{E}_{\\tau_{\\ge t} \\sim p_{\\bar{\\theta}}(\\tau_{\\ge t}|s_t,a_t)}\\left[\\sum_{t'=t}^Tr(s_{t'},a_{t'})\\right]=\\mathbb{E}_{\\tau_{\\ge t} \\sim p_{\\bar{\\theta}}(\\tau_{\\ge t}|s_t,a_t)}\\left[\\hat{Q}^{\\pi_\\theta}_{n,t}\\right] \\] <p>\u6240\u4ee5\u4e00\u4e2a\u66f4\u597d\u7684\uff08variance\u66f4\u5c0f\uff09\u7684\u8868\u8fbe\u5f0f\u662f</p> \\[ \\nabla_\\theta J(\\theta)=\\mathbb{E}_{\\tau \\sim p_{\\theta}(\\tau)}\\left[\\sum_{t=1}^T\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)Q^{\\pi_\\theta}(s_t,a_t)\\right] \\]"},{"location":"Online%20CS%20Courses/CS285/chap04/#with_baseline","title":"With Baseline","text":"<p>\u4e3a\u4e86\u8fdb\u4e00\u6b65\u51cf\u5c0fvariance\uff0c\u6211\u4eec\u53ef\u4ee5\u5f15\u5165\u4e00\u4e2abaseline\u3002\u5b83\u7684\u9009\u53d6\u5e94\u8be5\u662f \\(Q^{\\pi_\\theta}(s_t,a_t)\\) \u7684\u67d0\u79cd\u5e73\u5747\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u76f8\u6bd4\u4e8e\u4e4b\u524d\u6700\u666e\u901a\u7684\u76f4\u63a5\u5e73\u5747\uff0c\u6211\u4eec\u53ef\u4ee5\u6709</p> \\[ V^{\\pi_\\theta}(s_t)=\\mathbb{E}_{a_t\\sim \\pi_\\theta(a_t|s_t)}\\left[Q^{\\pi_\\theta}(s_t,a_t)\\right] \\] <p>\u8fd9\u6837\uff0c\u5c31\u6709\u4e86\u4e00\u4e2a\u65b0\u7684\u8868\u8fbe\u5f0f</p> \\[ \\nabla_\\theta J(\\theta)=\\mathbb{E}_{\\tau \\sim p_{\\theta}(\\tau)}\\left[\\sum_{t=1}^T\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\left(Q^{\\pi_\\theta}(s_t,a_t)-V^{\\pi_\\theta}(s_t)\\right)\\right] \\] <p>\u8fd9\u91cc\u7684 \\(Q^{\\pi_\\theta}(s_t,a_t)-V^{\\pi_\\theta}(s_t)\\) \u4e5f\u88ab\u79f0\u4f5cAdvantage Function\uff08\u8bb0\u4f5c \\(A^{\\pi_\\theta}(s_t,a_t)\\) \uff09\uff1a\u5b83\u4ee3\u8868\u505aaction \\(a_t\\) \u76f8\u6bd4\u4e8e\u5e73\u5747\u60c5\u51b5\u7684\u4f18\u52bf\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap04/#fitting_q_and_v","title":"Fitting Q and V","text":"<p>\u663e\u7136\uff0c\u65e2\u7136\u5f15\u5165\u4e86Q\u548cV\uff0c\u6211\u4eec\u5c31\u9700\u8981\u7f51\u7edc\u6765\u4f30\u8ba1 \\(Q\\) \u548c \\(V\\) \u3002\u4e0d\u8fc7\uff0c\u6211\u4eec\u4e00\u5f00\u59cb\u6765\u60f3\uff0c\u5e76\u4e0d\u5e0c\u671b\u540c\u65f6\u5f15\u5165\u4e24\u4e2a\u7f51\u7edc\u6765\u62df\u5408\uff0c\u8fd9\u662f\u56e0\u4e3a\u4ed6\u4eec\u672c\u8eab\u5c31\u6709\u8f83\u7b80\u5355\u7684\u5173\u7cfb\uff0c\u800c\u4e14\u6211\u4eec\u4e5f\u5e0c\u671b\u5c3d\u91cf\u51cf\u5c0f\u7b97\u529b\u7684\u5f00\u9500\u3002\u4e0d\u8fc7\uff0c\u8fd9\u5f88\u597d\u5b9e\u73b0\uff0c\u56e0\u4e3a\u6211\u4eec\u53ef\u4ee5\u8868\u8fbe\uff1a</p> \\[ Q^{\\pi_\\theta}(s_t,a_t)-V^{\\pi_\\theta}(s_t) = Q^{\\pi_\\theta}(s_t,a_t)-\\mathbb{E}_{a_t\\sim \\pi_\\theta(a_t|s_t)}\\left[Q^{\\pi_\\theta}(s_t,a_t)\\right] \\] <p>\u4e5f\u53ef\u4ee5\u5199\u51fa</p> \\[ Q^{\\pi_\\theta}(s_t,a_t)-V^{\\pi_\\theta}(s_t)= r(s_t,a_t)+\\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}[V^{\\pi_\\theta}(s_{t+1})]-V^{\\pi_\\theta}(s_t) \\] <p>\u56e0\u6b64\uff0c\u65e0\u8bba\u662f\u6211\u4eec\u9009\u62e9\u62df\u5408 \\(Q\\) \u8fd8\u662f \\(V\\) \uff0c\u6211\u4eec\u90fd\u53ef\u4ee5\u76f4\u63a5\u5e26\u5165\u5230\u4e4b\u524d\u7684policy gradient\u5e26\u6765\u7684\u8868\u8fbe\u5f0f\u4e2d\uff0c\u8fdb\u884c\u8bad\u7ec3\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u8ba8\u8bba\u7684\u95ee\u9898\u5c31\u662f\u7a76\u7adf\u62df\u5408 \\(Q\\) \u8fd8\u662f \\(V\\) \u4e86\u3002</p> <p>\u6211\u4eec\u4ee5\\(V\\)\u7f51\u7edc\u7684\u62df\u5408\u4e3a\u4f8b\u5b50\u3002\u6211\u4eec\u77e5\u9053\uff0c\\(V^{\\pi_\\theta}(s_{n,t})\\)\u7684\u76ee\u6807\u662f</p> \\[ y_{n,t}=\\sum_{t'=t}^Tr(s_{n,t'},a_{n,t'}) \\] <p>\u4e00\u4e2a\u81ea\u7136\u7684\u60f3\u6cd5\u662f\uff0c\u6211\u4eec\u53bb\u8bad\u7ec3</p> \\[ L(\\phi)=\\frac{1}{N}\\sum_{n=1}^N\\sum_{t=1}^{T}\\left(y_{n,t}-V^{\\pi_\\theta}_{\\phi}(s_{n,t})\\right)^2 \\] <p>\u4f46\u662f\u95ee\u9898\u662f\uff0c\u8fd9\u6837\u76f8\u5f53\u4e8e\u91c7\u96c6\u4e00\u5806\u5355\u91c7\u6837\u7684\u6837\u672c\u5f53\u6210\u8bad\u7ec3\u6570\u636e\uff0c\u53ef\u4ee5\u60f3\u8c61\u5230\u65b9\u5dee\u4f9d\u7136\u5f88\u5927\uff0c\u91c7\u6837\u7684\u6570\u76ee\u4e5f\u6ca1\u6709\u51cf\u5c11\u3002\u4e00\u4e2a\u91cd\u8981\u7684\u601d\u60f3\u662f\uff0c\u6211\u4eec\u5efa\u7acb\u4e00\u4e2a\u9012\u63a8\u5173\u7cfb\u3002\u6bd4\u5982\u73b0\u5728\uff0c\u6211\u4eec\u8fd1\u4f3c\u5730\u7ed9\u51fa</p> \\[ V^{\\pi_\\theta}(s_{n,t})\\leftarrow y_{n,t}=\\sum_{t'=t}^Tr(s_{n,t'},a_{n,t'})\\approx r(s_{n,t},a_{n,t}) + \\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_{n,t},a_{n,t})}[V^{\\pi_\\theta}(s_{t+1})] \\] <p>\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53d6\u5f97\u4e86\u5de8\u5927\u7684\u98de\u8dc3\uff1a\u6211\u4eec\u5355\u91c7\u6837\u7684\u53d8\u91cf\u4ece\u4e00\u7cfb\u5217\\(a_{n,t},s_{n+1,t},\\cdots\\)\u5230\u53ea\u6709\u4e00\u4e2a\\(a_{n,t}\\)\uff01\u8fd9\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u6599\u60f3\u5230\u6211\u4eec\u7684\u65b9\u5dee\u51cf\u5c11\u4e86\uff1b\u4f46\u662f\u6839\u636e\u91cd\u8981\u601d\u60f3\uff0c\u6211\u4eec\u5bf9\u5e94\u7684\u4ee3\u4ef7\u662ftarget\u4e5f\u5305\u542b\u6211\u4eec\u6b63\u5728\u8bad\u7ec3\u7684\u7f51\u7edc\uff0c\u56e0\u6b64\u589e\u5927\u4e86bias\u3002</p> <p>\u7c7b\u4f3c\u5730\uff0c\u5bf9\\(Q\\)\u662f\u4e0d\u662f\u4e5f\u53ef\u4ee5\u505a\u4e00\u6837\u7684\u64cd\u4f5c\u5462\uff1f\u6211\u4eec\u53d1\u73b0\u53ef\u884c\uff1a</p> \\[ Q^{\\pi_\\theta}(s_{n,t},a_{n,t})\\leftarrow r(s_{n,t},a_{n,t})+\\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_{n,t},a_{n,t}),a_{t+1}\\sim \\pi_\\theta(a_{t+1}|s_{t+1})}[Q^{\\pi_\\theta}(s_{t+1},a_{t+1})] \\] <p>\u4f46\u662f\\(Q\\)\u7684\u7f3a\u70b9\u5728\u4e8e\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u91cc\u5fc5\u987b\u505a\u4e24\u4e2a\u91c7\u6837\uff08\\(s_{t+1}\\)\u548c\\(a_{t+1}\\)\uff09\uff0c\u4e5f\u5c31\u662f\u65b9\u5dee\u4f1a\u76f8\u5bf9\u66f4\u5927\u3002</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u9009\u62e9\u62df\u5408 \\(V\\)\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap04/#policy_evaluation","title":"Policy Evaluation","text":"<p>\u6240\u8c13Policy Evaluation\u5c31\u662f\u6307\uff0c\u6211\u4eec\u6839\u636e\u4e00\u4e2apolicy \u7ed9\u51fa\u5176\u5bf9\u5e94\u7684value function\uff0c\u8fdb\u4e00\u6b65\u7ed9\u51faadvantage\u3002\u6839\u636e\u524d\u9762\u7684\u8ba8\u8bba\uff0c\\(V\\) \u7684\u76ee\u6807\u53d8\u6210\u4e86</p> \\[ \\hat{L}(\\phi)=\\frac{1}{N}\\sum_{n=1}^N\\sum_{t=1}^{T}\\left(\\text{SG}[\\hat{y}_{n,t}]-V^{\\pi_\\theta}_{\\phi}(s_{n,t})\\right)^2=\\frac{1}{N}\\sum_{n=1}^N\\sum_{t=1}^{T}\\left(r(s_{n,t},a_{n,t})+\\text{SG}[V^{\\pi_\\theta}_{\\phi}(s_{n,t+1})]-V^{\\pi_\\theta}_{\\phi}(s_{n,t})\\right)^2 \\] <p>\uff08\u6ce8\u610f\u8fd9\u91ccstop gradient\uff0c\u539f\u56e0\u6839\u636e\u6211\u4eec\u7684\u63a8\u7406\u8fc7\u7a0b\uff0c\u524d\u4e00\u4e2a\\(V\\)\u662f\u4f5c\u4e3atarget\u51fa\u73b0\uff0c\u6240\u4ee5\u4e0d\u5e94\u8be5\u88abupdate\uff0c\u4e5f\u5c31\u662f\u8fd9\u91cc\u6211\u4eec\u5c31\u662f\u4e00\u4e2a\u7b80\u5355\u7684MSE loss\u3002\uff09\u8fd9\u4e2a\u6700\u7ec8\u7684\u8868\u8fbe\u5f0f\u5c31\u662f\u6211\u4eec\u7684policy evaluation\u7684\u8bad\u7ec3\u76ee\u6807\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap04/#summary","title":"Summary","text":"<p>\u7b80\u5355\u603b\u7ed3\u4e00\u4e0b\uff0c\u6211\u4eec\u7a76\u7adf\u4f5c\u4e86\u54ea\u4e9b\u4e8b\u60c5\uff1a</p> <ul> <li>\u5f15\u5165Q,V\u6765\u4ee3\u66ffpolicy gradient\u4e2d\u7684reward\u6c42\u548c\uff0c\u51cf\u5c0fvariance\uff1b</li> <li>\u901a\u8fc7\u8fd1\u4f3c\u7684\u65b9\u5f0f\uff0c\u907f\u514d\u4e86\u5bf9Q\u7684\u62df\u5408\uff08\u867d\u7136\u8fd9\u6b65\u4f1a\u589e\u5927variance\uff09\uff1b</li> <li>\u901a\u8fc7\u5de7\u5999\u8bbe\u8ba1\u62df\u5408V\u7684\u76ee\u6807\uff0c\u518d\u6b21\u51cf\u5c0fvariance\u3002</li> </ul>"},{"location":"Online%20CS%20Courses/CS285/chap04/#actor-critic_algorithm","title":"Actor-Critic Algorithm","text":"<p>\u628a\u524d\u9762\u7684\u65b9\u6cd5\u603b\u7ed3\u4e00\u4e0b\uff0c\u6211\u4eec\u5c31\u5f97\u5230\u4e86Actor-Critic\u7b97\u6cd5\uff1a</p> <ol> <li>\u5229\u7528\u73b0\u5728\u7684policy \\(\\pi_\\theta\\) \u53d6 \\(N\\) \u4e2atrajectory\uff1b</li> <li>\u7528\u8fd9\u4e9b\u6570\u636e\u8bad\u7ec3 \\(V^{\\pi_\\theta}_{\\phi}\\) \uff1b</li> <li>\u8ba1\u7b97 \\(A^{\\pi_\\theta}(s_t,a_t)=V_\\phi^{\\pi_\\theta}(s_{t+1})-V_\\phi^{\\pi_\\theta}(s_{t})+r(s_t,a_t)\\)</li> <li>\u8ba1\u7b97 \\(\\nabla_\\theta J(\\theta)=\\frac{1}{N}\\sum_{n}\\left[\\sum_{t=1}^T\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)A^{\\pi_\\theta}(s_t,a_t)\\right]\\)</li> <li>\u7528\u8fd9\u4e2a\u68af\u5ea6\u66f4\u65b0 \\(\\theta\\)</li> </ol> <p>\u7b2c\u4e8c\u6b65\u5c31\u662f\u6211\u4eec\u524d\u9762\u8ba8\u8bba\u7684policy evaluation\uff0c\u53ef\u4ee5\u91c7\u7528\u524d\u9762\u7684\u4e24\u79cd\u65b9\u6cd5\u4e2d\u4efb\u4f55\u4e00\u79cd\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap04/#discount_factor","title":"Discount Factor","text":"<p>\u5982\u679c\u7b80\u5355\u6309\u7167\u524d\u9762\u7684\u65b9\u6cd5\u8bad\u7ec3\uff0c\u6211\u4eec\u7406\u60f3\u60c5\u51b5\u7684 \\(V^{\\pi_\\theta}_\\phi\\) \u5e94\u8be5\u5c31\u662f</p> \\[ V^{\\pi_\\theta}_\\phi(s_t)=\\mathbb{E}_{\\tau_{\\ge t} \\sim p_{\\bar{\\theta}}(\\tau_{\\ge t}|s_t)}\\left[\\sum_{t'=t}^Tr(s_{t'},a_{t'})\\right] \\] <p>\u4f46\u8fd9\u4e2a\u6c42\u548c\u5bf9\u4e8einfinite horizon\u7684\u60c5\u51b5\u662f\u53d1\u6563\u7684\uff01\u56e0\u6b64\u6211\u4eec\u5f15\u5165\u4e00\u4e2adiscount factor \\(\\gamma\\in [0,1)\\) \uff0c\u91cd\u65b0\u5b9a\u4e49\u6211\u4eec\u7684\u76ee\u6807</p> \\[ V^{\\pi_\\theta}_\\phi(s_t):=\\mathbb{E}_{\\tau_{\\ge t} \\sim p_{\\bar{\\theta}}(\\tau_{\\ge t}|s_t)}\\left[\\sum_{t'=t}^T\\gamma^{t'-t}r(s_{t'},a_{t'})\\right] \\] <p>\u8fd9\u4f1a\u5e26\u6765\u5f88\u591a\u5730\u65b9\u7684\u6539\u53d8\u3002</p> <p>\u5c0f\u8d34\u58eb</p> <p>\u672c\u8bb2\u6709\u4e00\u4e9b\u5730\u65b9\u5b8c\u5168\u6539\u53d8\u4e86\u539f\u6765\u7684\u7b97\u6cd5\u3002\u4e3a\u4e86\u4fdd\u8bc1\u7406\u89e3\uff0c\u5efa\u8bae\u6bcf\u4e00\u6b21\u8fd9\u79cd\u5730\u65b9\u90fd\u81ea\u5df1\u5148\u601d\u8003\u4e00\u4e0b\u5f15\u5165\u7684\u65b0\u4fee\u6539\u4f1a\u5bfc\u81f4\u539f\u6765\u7b97\u6cd5\u54ea\u4e9b\u90e8\u5206\u7684\u6539\u53d8\uff0c\u7136\u540e\u518d\u770b\u6211\u4eec\u7684\u89e3\u91ca\u3002</p> <p>\u5728\u8fd9\u91cc\uff1a</p> <ul> <li>\\(V^{\\pi_\\theta}_\\phi\\) \u7684\u8bad\u7ec3\u8981\u6539\u53d8</li> <li>\\(A^{\\pi_\\theta}(s_t,a_t)\\) \u7684\u8ba1\u7b97\u8981\u6539\u53d8</li> </ul>"},{"location":"Online%20CS%20Courses/CS285/chap04/#vpi_theta_phi","title":"\\(V^{\\pi_\\theta}_\\phi\\) \u7684\u8bad\u7ec3","text":"<p>\u5177\u4f53\u5730\uff0c\u6211\u4eec</p> \\[ {y}_{n,t}=r(s_{n,t},a_{n,t})+\\sum_{t'=t+1}^T\\gamma^{t'-t}r(s_{n,t'},a_{n,t'})\\approx r(s_{n,t},a_{n,t})+\\gamma V^{\\pi_\\theta}_{\\phi}(s_{n,t+1}):=\\hat{y}_{n,t} \\] <p>\u56e0\u6b64\u8981\u4fee\u6539\u8bad\u7ec3\u65b9\u5f0f\uff1a</p> \\[ L(\\phi)=\\frac{1}{N}\\sum_{n=1}^N\\sum_{t=1}^{T}\\left(\\hat{y}_{n,t}-V^{\\pi_\\theta}_{\\phi}(s_{n,t})\\right)^2=\\frac{1}{N}\\sum_{n=1}^N\\sum_{t=1}^{T}\\left(r(s_{n,t},a_{n,t})+\\gamma V^{\\pi_\\theta}_{\\phi}(s_{n,t+1})-V^{\\pi_\\theta}_{\\phi}(s_{n,t})\\right)^2 \\]"},{"location":"Online%20CS%20Courses/CS285/chap04/#api_thetas_ta_t","title":"\\(A^{\\pi_\\theta}(s_t,a_t)\\) \u7684\u8ba1\u7b97","text":"\\[ Q^{\\pi_\\theta}(s_t,a_t)=r(s_t,a_t)+\\gamma\\mathbb{E}_{\\tau_{&gt; t} \\sim p_{\\bar{\\theta}}(\\tau_{&gt; t}|s_t,a_t)}\\left[\\sum_{t'=t+1}^Tr(s_{t'},a_{t'})\\right] =r(s_t,a_t)+\\gamma\\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}\\left[V^{\\pi_\\theta}_\\phi(s_{t+1})\\right] \\] <p>\u8fd9\u6837</p> \\[ A^{\\pi_\\theta}(s_t,a_t)=Q^{\\pi_\\theta}(s_t,a_t)-V^{\\pi_\\theta}_\\phi(s_t)=r(s_t,a_t)+\\gamma V^{\\pi_\\theta}_\\phi(s_{t+1})-V^{\\pi_\\theta}_\\phi(s_t) \\]"},{"location":"Online%20CS%20Courses/CS285/chap04/#two_kinds_of_discount_factor_optional","title":"Two Kinds of Discount Factor (Optional)","text":"<p>Warning. \u5982\u679c\u5df2\u7ecf\u611f\u89c9\u6709\u70b9\u6655\u4e86\uff0c\u5343\u4e07\u522b\u770b\u8fd9\u4e00\u8282\u3002</p> <p>\u6211\u4eec\u56de\u987e\u7b2c\u4e00\u6b21\u5f15\u5165discount factor\u7684\u8868\u8fbe\u5f0f</p> \\[ V^{\\pi_\\theta}_\\phi(s_t):=\\mathbb{E}_{\\tau_{\\ge t} \\sim p_{\\bar{\\theta}}(\\tau_{\\ge t}|s_t)}\\left[\\sum_{t'=t}^T\\gamma^{t'-t}r(s_{t'},a_{t'})\\right] \\] <p>\u7a0d\u4f5c\u53d8\u5f62\uff0c\u53ef\u4ee5\u53d1\u73b0\u8fd9\u5bf9\u5e94\u7740\u666e\u901apolicy gradient\u4e2d\uff0c\u6211\u4eec\u8fd9\u6837\u52a0\u5165 \\(\\gamma\\) \uff1a</p> \\[ \\nabla_\\theta J(\\theta)=\\mathbb{E}_{\\tau \\sim p_{\\theta}(\\tau)}\\left[\\sum_{t=1}^T\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\left(\\sum_{t'=t}^T\\gamma^{t'-t}r(s_{t'},a_{t'})\\right)\\right] \\] <p>\u90a3\u5f53\u7136\u4e5f\u4f1a\u6709\u53e6\u5916\u4e00\u79cd\u53ef\u80fd\u7684\u52a0\u5165\u65b9\u5f0f\uff1a</p> \\[ \\nabla_\\theta J'(\\theta)=\\mathbb{E}_{\\tau \\sim p_{\\theta}(\\tau)}\\left[\\sum_{t=1}^T\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\left(\\sum_{t'=t}^T\\gamma^{t'-1}r(s_{t'},a_{t'})\\right)\\right] \\] <p>\u8fd9\u79cd\u52a0\u6487\u53f7\u7684\u65b9\u5f0f\uff08\u79f0\u4e3a\u65b9\u5f0f2\uff09\u4e5f\u6709\u5176\u9053\u7406\uff1a\u6211\u4eec\u76f8\u5f53\u4e8e\u76f4\u63a5\u628areward\u8bb0\u4f5c</p> \\[ R=\\sum_{t=1}^T\\gamma^{t-1}r(s_t,a_t) \\] <p>\u800c\u539f\u5148\u7684\u65b9\u5f0f1\u751a\u81f3\u5199\u4e0d\u51fa\u4e00\u4e2a\u50cf\u8fd9\u6837\u7684\uff0c\u901a\u7528\u7684reward\u5f62\u5f0f\uff01\u8fd9\u5f88\u591a\u65f6\u5019\u4f1a\u9020\u6210\u8bef\u89e3\uff0c\u8ba4\u4e3a\u65b9\u5f0f2\u662f\u6b63\u786e\u7684\u3002\u4f46\u5b9e\u9645\u4e0a\u5b8c\u5168\u4e0d\u662f\uff1a</p> <p>\u5728\u5927\u90e8\u5206\u95ee\u9898\u4e2d\uff0cdiscount factor\u7684\u6b63\u786e\u52a0\u5165\u65b9\u5f0f\u662f\u65b9\u5f0f1\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u6765\u7b80\u5355\u8bba\u8ff0\u4e00\u4e0b\u4e3a\u4ec0\u4e48\u3002\u8fd9\u9700\u8981\u7406\u89e3\u4e24\u79cd\u65b9\u5f0f\u8868\u8fbe\u7684\u610f\u4e49\u3002</p> <p>\u65b9\u5f0f2\u7684\u5f62\u5f0f\u5b9e\u9645\u4e0a\u66f4\u52a0\u76f4\u89c2\uff1a\u8fd9\u53ef\u4ee5\u76f4\u63a5\u7406\u89e3\u4e3aMDP\u52a0\u5165\u4e00\u4e2adead state\uff1a\u6bcf\u4e00\u6b21\u6709 \\(1-\\gamma\\) \u7684\u6982\u7387\u6b7b\u6389\uff0c\u6b7b\u6389\u4e4b\u540e\u53ea\u80fd\u4fdd\u6301\u5728dead state\uff0c\u7136\u540ereward\u5168\u90e8\u4e3a0\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7406\u89e3 \\(R\\) \u7684\u5f62\u5f0f\uff1b\u540c\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u51fa\u5bf9\u5e94\u7684value function\uff1a</p> \\[ V^{\\pi_\\theta}_\\phi(s_t)=\\mathbb{E}_{\\tau_{\\ge t} \\sim p_{\\bar{\\theta}}(\\tau_{\\ge t}|s_t)}\\left[\\sum_{t'=t}^T\\gamma^{t'-1}r(s_{t'},a_{t'})\\right]=\\gamma^{t-1}\\mathbb{E}_{\\tau_{\\ge t} \\sim p_{\\bar{\\theta}}(\\tau_{\\ge t}|s_t)}\\left[\\sum_{t'=t}^T\\gamma^{t'-t}r(s_{t'},a_{t'})\\right] \\] <p>\u53ef\u4ee5\u770b\u51fa\uff0c\u5373\u4f7f\u540e\u9762\u7684\u6b65\u9aa4\uff08 \\(t\\) \u5f88\u5927\uff09\u4f5c\u51fa\u4e86\u6bd4\u8f83\u597d\u7684\u51b3\u7b56\uff0c\u7531\u4e8e \\(\\gamma\\) \u7684\u5b58\u5728\uff0c\u8fd9\u4e2avalue function\u4e5f\u4f1a\u53d8\u5f97\u5f88\u5c0f\u3002\u5728\u8fd9\u79cd\u8bbe\u5b9a\u4e0b\uff0c\u4e5f\u662f\u5408\u7406\u7684\uff0c\u56e0\u4e3a\u6b7b\u4ea1\u7684\u5a01\u80c1\u903c\u8feb\u6a21\u578b\u66f4\u65e9\u5730\u4f5c\u51fa\u597d\u7684\u51b3\u7b56\u3002</p> <p>\u800c\u65b9\u5f0f1\u5219\u4ee3\u8868\u7740\uff0cdiscount factor\u5e76\u4e0d\u771f\u6b63\u5b58\u5728\u4e8eMDP\u4e2d\uff0c\u800c\u53ea\u662fvalue function\u5b9a\u4e49\u7684\u4e00\u90e8\u5206\u3002\u8fd8\u53e5\u8bdd\u8bf4\uff0c\u5b83\u53ea\u662f\u4e00\u4e2a\u6570\u5b66\u5de5\u5177\uff0c\u6ca1\u6709\u592a\u591a\u5b9e\u9645\u4e0a\u7684\u610f\u4e49\uff1b\u751a\u81f3\u53ef\u4ee5\u7406\u89e3\u4e3a\u6211\u4eec\u4e3a\u4e86\u907f\u514d\u53d1\u6563\u4e58\u4e0a\u4e00\u4e2a \\(\\gamma\\) \uff0c\u4f46\u7406\u8bba\u4e0a\u6700\u540e\u5e94\u8be5\u53d6 \\(\\gamma\\to 1\\) \u3002</p> <p>\u5728\u8fd9\u6837\u7684\u8bbe\u5b9a\u4e0b\uff0c\u6bcf\u4e00\u6b65\u7684\u5730\u4f4d\u90fd\u662f\u7b49\u540c\u7684\uff1b\u4f46\u5f53\u4f60\u7ad9\u5728 \\(t\\) \u6b65\u4f30\u8ba1\u4e4b\u540e\u7684value\u7684\u65f6\u5019\uff0c\u6211\u4eec\u7565\u5fae\u51cf\u5c11\u66f4\u9760\u540e\u7684\u6b65\u9aa4\u7684\u6743\u91cd\u3002</p> <p>\u5f53\u7136\uff0c\u4e24\u79cd\u65b9\u5f0f\u7a76\u7adf\u54ea\u79cd\u6b63\u786e\uff0c\u5fc5\u987b\u5177\u4f53\u95ee\u9898\u5177\u4f53\u5206\u6790\u3002\u4f46\u5927\u90e8\u5206\u95ee\u9898\u4e2d\u5e76\u6ca1\u6709\u6240\u8c13\u7684dead state\uff0c\u5e76\u4e14\u5e94\u8be5\u5177\u6709\u65f6\u95f4\u5e73\u79fb\u4e0d\u53d8\u6027\u3002\u56e0\u6b64\uff0c\u5728\u8fd9\u4e9b\u60c5\u51b5\u4e0b\uff0c\u65b9\u5f0f1\u90fd\u662f\u6b63\u786e\u7684\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap04/#actor-critic_in_practice","title":"Actor-Critic in Practice","text":"<p>\u52a0\u5165discount factor\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u5f97\u5230\u4e86\u6700\u57fa\u672c\u7684batch actor-critic\u7b97\u6cd5\u3002</p> <p>Actor-Critic Algorithm 1. \u5229\u7528\u73b0\u5728\u7684policy \\(\\pi_\\theta\\) \u53d6 \\(N\\) \u4e2atrajectory\uff1b 2. \u7528\u8fd9\u4e9b\u6570\u636e\u8bad\u7ec3 \\(V^{\\pi_\\theta}_{\\phi}\\) \uff1b 3. \u8ba1\u7b97 \\(A^{\\pi_\\theta}(s_t,a_t)=\\gamma V_\\phi^{\\pi_\\theta}(s_{t+1})-V_\\phi^{\\pi_\\theta}(s_{t})+r(s_t,a_t)\\) \uff1b 4. \u8ba1\u7b97 \\(\\nabla_\\theta J(\\theta)=\\frac{1}{N}\\sum_{n}\\left[\\sum_{t=1}^T\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)A^{\\pi_\\theta}(s_t,a_t)\\right]\\) \uff1b 5. \u7528\u8fd9\u4e2a\u68af\u5ea6\u66f4\u65b0 \\(\\theta\\) \u3002</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u4ecb\u7ecd\u4e00\u4e9b\u6539\u8fdb\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap04/#online_actor-critic","title":"Online Actor-Critic","text":"<p>\u6211\u4eec\u4e4b\u524d\u7684\u7b97\u6cd5\u662fbatch\u7684\uff0c\u5373\u6bcf\u6b21\u90fd\u8981\u6536\u96c6 \\(N\\) \u6761\u8f68\u8ff9\u3002\u80fd\u5426\u628a\u8fd9\u4e2a\u7b97\u6cd5\u53d8\u6210\u4e00\u4e2aonline\u7684\u7b97\u6cd5\u5462\uff1f\u6ce8\u610f\u7684\uff0c\u666e\u901a\u7684policy gradient\u662f\u7edd\u5bf9\u4e0d\u80fd\u53d8\u6210online\u7684\uff0c\u56e0\u4e3a\u5b83\u5fc5\u987b\u8ba1\u7b97 \\(t'\\ge t\\) \u7684reward\u6c42\u548c\u3002\u4f46\u662f\u73b0\u5728\u6211\u4eec\u7684\u7b97\u6cd5\u662f\u57fa\u4e8eQ,V\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5c1d\u8bd5\u628a\u7b97\u6cd5\u53d8\u4e3a</p> <ol> <li>\u7528\u5f53\u524d\u7684\u7b56\u7565 \\(\\pi_\\theta\\) \u8d70\u4e00\u6b65\uff0c\u8bb0\u4e3a \\(\\{s_t,a_t,s_{t+1},r=r(s_t,a_t)\\}\\) \uff1b</li> <li>\u7528\u4e00\u6b65\u7684\u6570\u636e \\(\\{V_{\\phi}^{\\pi_\\theta}(s_t),V_{\\phi}^{\\pi_\\theta}(s_{t+1}),r\\}\\) \u8bad\u7ec3 \\(V^{\\pi_\\theta}_{\\phi}\\) \uff1b</li> <li>\u8ba1\u7b97 \\(A^{\\pi_\\theta}(s_t,a_t)=\\gamma V_\\phi^{\\pi_\\theta}(s_{t+1})-V_\\phi^{\\pi_\\theta}(s_{t})+r(s_t,a_t)\\)</li> <li>\u8ba1\u7b97 \\(\\nabla_\\theta J(\\theta)=\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)A^{\\pi_\\theta}(s_t,a_t)\\)</li> <li>\u7528\u8fd9\u4e2a\u68af\u5ea6\u66f4\u65b0 \\(\\theta\\)</li> </ol> <p>\u4f46\u6211\u4eec\u5f88\u5feb\u53d1\u73b0\u8fd9\u591a\u4e86\u5f88\u591a\u7684\u5355\u91c7\u6837\uff0cvariance\u4f1a\u5f88\u5927\u3002\u89e3\u51b3\u65b9\u6cd5\u662f\u5e76\u884c\u5730\u8fdb\u884c\u5f88\u591a\u4e2atrajectory\uff0c\u7136\u540e\u7528\u8fd9\u4e9btrajectory\u7684\u5e73\u5747\u6765\u66f4\u65b0\u3002\u5177\u4f53\u5b9e\u73b0\u65b9\u6cd5\u4e0d\u518d\u4ecb\u7ecd\u3002</p> <p>\u5982\u679c\u4e0d\u80fd\u5e76\u884c\uff0c\u90a3\u4e48\u6211\u4eec\u8fd8\u6709\u53e6\u5916\u4e00\u79cd\u65b9\u6cd5\uff0c\u5c31\u662f\u4e0b\u9762\u7684Off-policy Actor-Critic\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap04/#off-policy_actor-critic","title":"Off-policy Actor-Critic","text":"<p>\u91c7\u7528Replay Buffer\u7684\u65b9\u6cd5\u4e5f\u6709\u52a9\u4e8e\u89e3\u51b3\u524d\u9762variance\u8f83\u5927\u7684\u95ee\u9898\u3002\u5177\u4f53\u5730\uff0c\u6211\u4eec\u867d\u7136\u6bcf\u4e00\u6b21\u53ea\u548c\u73af\u5883\u4ea4\u4e92\u4e00\u6b21\uff0c\u4f46\u8fd9\u5e76\u4e0d\u4ee3\u8868\u6211\u4eec\u53ea\u80fd\u7528\u8fd9\u4e00\u6b21\u7684\u6570\u636e\u6765\u8bad\u7ec3\u3002\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u4e9b\u6570\u636e\u5b58\u50a8\u5728\u4e00\u4e2aReplay Buffer\u91cc\u9762\uff0c\u7136\u540e\u6bcf\u6b21\u4ece\u8fd9\u4e2aBuffer\u91cc\u9762\u968f\u673a\u53d6\u4e00\u4e9b\u6570\u636e\u6765\u8bad\u7ec3\u3002</p> <p>\u56e0\u4e3abuffer\u91cc\u9762\u7684\u6570\u636e\u5e76\u975e\u5168\u90e8\u6765\u81ea\u5f53\u524dpolicy\uff0c\u6240\u4ee5\u8fd9\u4e2a\u65b9\u6cd5\u4e5f\u662foff-policy\u7684\u3002\u6211\u4eec\u79f0\u8fd9\u79cd\u65b9\u6cd5\u4e3aOff-policy Actor-Critic\u3002\u4f46\u662f\u5f15\u5165replay buffer\u80af\u5b9a\u8981\u6d89\u53ca\u7b97\u6cd5\u7684\u4fee\u6539\u3002</p> <p>\u73b0\u5728\uff0c\u8bf7\u4f60\u60f3\u4e00\u60f3\uff0c\u6709\u54ea\u4e9b\u5730\u65b9\u9700\u8981\u4fee\u6539\uff1f</p>"},{"location":"Online%20CS%20Courses/CS285/chap04/#2","title":"\u7b2c2\u6b65\u7684\u8bad\u7ec3","text":"<p>\u6211\u4eec\u672c\u6765\u6253\u7b97</p> \\[ L(\\phi)=\\sum_{\\text{batch}}\\left(r(s_{t},a_{t})+\\gamma V^{\\pi_\\theta}_{\\phi}(s_{t+1})-V^{\\pi_\\theta}_{\\phi}(s_{t})\\right)^2 \\] <p>\u4f46\u662f\u6ce8\u610f\u5230\u73b0\u5728\u7684 \\(a_t\\) \u4e0d\u518d\u662f\u4ece \\(\\pi_\\theta\\) \u4e2d\u91c7\u6837\u5f97\u5230\u7684\uff08\u800c\u662f\u4ecereplay buffer\u91cc\u9762\u968f\u673a\u627e\u51fa\u6765\u7684\uff09\u3002\u8fd9\u5c31\u5bfc\u81f4</p> \\[ \\mathbb{E}_{a_t\\sim \\textcolor{red}{\\pi_{\\text{old}}},s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}\\left[r(s_t,a_t)+\\gamma \\hat{V}^{\\pi_\\theta}(s_{t+1})\\right]\\ne \\hat{V} ^{\\pi_\\theta}(s_t) \\] <p>\uff08\u5176\u4e2d \\(\\hat{V}\\) \u4ee3\u8868\u771f\u5b9e\u7684value function\uff09\uff0c\u4e5f\u5c31\u662f\u4e0a\u9762\u7684\u8bad\u7ec3\u76ee\u6807\u5373\u4f7f\u5728\u7406\u60f3\u60c5\u51b5\u4e5f\u4e0d\u5e94\u8be5\u662f0\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\uff0c\u6709\u4e00\u4e2a\u5de7\u5999\u7684\u65b9\u6cd5\uff1a\u6211\u4eec\u4e0d\u7528 \\(V\\) \uff0c\u800c\u662f\u7528 \\(Q\\) \u6765\u8bad\u7ec3\uff01\u7c7b\u4f3c\u5730\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u51fa\u4e00\u4e2a \\(Q\\) \u7684\u76ee\u6807\uff0c\u5e76\u4e14\u8fd9\u65f6\u5019\u662f\u5bf9\u7684\uff1a</p> \\[ \\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t),a_{t+1}\\sim \\pi_\\theta}\\left[r(s_t,a_t)+\\gamma \\hat{Q}^{\\pi_\\theta}(s_{t+1},a_{t+1})\\right]= \\hat{Q} ^{\\pi_\\theta}(s_t,a_t) \\] <p>\u56e0\u6b64\uff0c\u7b2c2\u6b65\u7684\u8bad\u7ec3\u65b9\u6cd5\u53ef\u4ee5\u4fee\u6539\u4e3a\uff1a</p> <p>\u7528\u8fd9\u4e9b\u6570\u636e\u8bad\u7ec3 \\(Q^{\\pi_\\theta}_{\\phi}\\) \uff0c\u5177\u4f53\u5730\uff0c\u6700\u5c0f\u5316</p> \\[ L_{\\text{new}}(\\phi)=\\sum_{\\text{batch}}\\left(r(s_{t},a_{t})+\\gamma Q^{\\pi_\\theta}_{\\phi}(s_{t+1},a_{t+1})-Q^{\\pi_\\theta}_{\\phi}(s_{t},a_t)\\right)^2 \\] <p>\u5176\u4e2d\uff0c \\(a_{t+1}\\) \u4ece \\(\\pi_\\theta\\) \u4e2d\u91c7\u6837\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap04/#3","title":"\u7b2c3\u6b65\u7684\u8ba1\u7b97","text":"<p>\u9996\u5148\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u8ba1\u7b97advantage function\u3002\u7406\u8bba\u4e0a\uff0c\u56e0\u4e3a\u73b0\u5728\u6709\u7684\u662f \\(Q\\) \u800c\u975e \\(V\\) \uff0c\u6211\u4eec\u9700\u8981\u8ba1\u7b97</p> \\[ A^{\\pi_\\theta}(s_t,a_t)=Q^{\\pi_\\theta}_\\phi(s_t,a_t)-V^{\\pi_\\theta}(s_t)=Q^{\\pi_\\theta}_\\phi(s_t,a_t)-\\mathbb{E}_{a_t\\sim \\pi_\\theta}\\left[Q^{\\pi_\\theta}_\\phi(s_t,a_t)\\right] \\] <p>\u4f46\u4f30\u8ba1\u8fd9\u4e2a\u5e73\u5747\u503c\u7a0d\u5fae\u6709\u4e9b\u6602\u8d35\uff1a\u5047\u8bbe\u6211\u4eec\u9009\u53d6\u7684\u6837\u672c\u4e0d\u591f\u591a\uff0c\u5f88\u53ef\u80fd\u5bf9\u4e8e\u6bcf\u4e00\u4e2a \\((s_t,a_t)\\) \u5f97\u5230\u7684baseline\u4e0d\u4e00\u81f4\uff0c\u8fd9\u4f1a\u9020\u6210\u5f88\u5927\u7684bias\uff1b\u4f46\u5982\u679c\u9009\u53d6\u592a\u591a\u7684\u6837\u672c\uff0c\u6bcf\u4e00\u4e2a\u8fc7\u4e00\u6b21\u7f51\u7edc\u7684\u65f6\u95f4\u5c31\u4f1a\u5f88\u957f\u3002</p> <p>\u56e0\u6b64\uff0c\u4e00\u4e2a\u6446\u70c2\u7684\u65b9\u6cd5\u662f\u7528\u5e72\u8106\u4e0d\u8981 \\(V\\) \u4e86\uff0c\u6211\u4eec\u76f4\u63a5\u9009</p> \\[ A^{\\pi_\\theta}(s_t,a_t)=Q^{\\pi_\\theta}_\\phi(s_t,a_t) \\] <p>\u8fd9\u6837\u867d\u7136\u6ca1\u6709baseline\u51cf\u5c0f\u7684variance\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u4ee5\u201c\u8d28\u91cf\u6362\u6570\u91cf\u201d\uff0c\u7528\u66f4\u591a\u7684\u6837\u672c\u6765\u51cf\u5c0fvariance\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap04/#4","title":"\u7b2c4\u6b65\u7684\u8bad\u7ec3","text":"<p>\u6211\u4eec\u539f\u6765\u7684\u8868\u8fbe\u5f0f\u662f</p> \\[ \\nabla_\\theta J(\\theta)=\\sum_{\\text{batch}}\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)A^{\\pi_\\theta}(s_t,a_t) \\] <p>\u4e4d\u4e00\u770b\uff0c\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u4f9d\u7136\u6210\u7acb\u3002\u4f46\u662f\u5b9e\u9645\u4e0a\u5b8c\u5168\u4e0d\u662f\uff1a\u6211\u4eec\u9700\u8981\u56de\u5230\u539f\u5148policy gradient\u7684\u63a8\u5bfc\uff0c\u5c31\u4f1a\u53d1\u73b0\uff0c\u6211\u4eec\u5fc5\u987b\u4fdd\u8bc1 \\((s_t,a_t)\\) \u5bf9\u662f\u4ece \\(\\pi_\\theta\\) \u7684trajectory\u4e2d\u91c7\u6837\u624d\u662f\u5bf9\u7684\u3002\u56e0\u6b64\uff0c\u73b0\u5728\u6709\u4e24\u4e2a\u95ee\u9898\uff1a</p> <ul> <li>\\(s_t\\) \u7684\u5206\u5e03\uff08\u76f8\u5f53\u4e8e\u5f88\u591a\u4e0d\u540c \\(\\pi_{\\text{old}}\\) \u5728\u7b2c \\(t\\) \u6b65\u7684\u5206\u5e03\u7684\u53e0\u52a0\uff09\u548c \\(\\pi_\\theta\\) \u5728\u7b2c \\(t\\) \u6b65\u7684\u7684\u5206\u5e03\u4e0d\u4e00\u81f4\uff1b</li> <li>\\(a_t|s_t\\) \u8fd9\u4e00\u5206\u5e03\u5e76\u4e0d\u662f \\(\\pi_\\theta\\)</li> </ul> <p>\u540e\u8005\u5f88\u660e\u663e\u5f88\u597d\u89e3\u51b3\uff1a\u6211\u4eec\u53ea\u9700\u8981\u4ece \\(\\pi_\\theta\\) \u91cc\u9762\u91cd\u65b0\u91c7\u6837\u4e00\u4e2a \\(\\tilde{a_t}\\) \u5c31\u53ef\u4ee5\u3002\u4f46\u662f\u524d\u8005\u5c31\u6bd4\u8f83\u9ebb\u70e6\u3002\u6211\u4eec\u8fd9\u91cc\u9009\u53d6\u518d\u6b21\u6446\u70c2\u7684\u65b9\u6cd5\uff1a\u6211\u4eec\u76f4\u63a5\u4e0d\u7ba1\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>\u629b\u5f00\u4e00\u4e9b\u7ec6\u8282\u4e0d\u8c08\uff0c\u8fd9\u4e2a\u8fd8\u662f\u5408\u7406\u7684\uff1a\u6211\u4eec\u76f8\u5f53\u4e8e\u8bad\u7ec3\u6211\u4eec\u7684\u7b56\u7565\u8981\u5728\u4e0d\u7ba1\u5982\u4f55\u7684\u521d\u59cb\u5206\u5e03 \\(p_{\\pi}(s_t)\\) \u4e0b\u90fd\u80fd\u505a\u7684\u5f88\u597d\uff0c\u8fd9\u76f8\u5f53\u4e8e\u4e00\u4e2a\u66f4\u96be\u7684\u8981\u6c42\uff0c\u4f46\u662f\u662fsufficient\u7684\u3002\u6211\u4eec\u76f8\u4fe1\u6211\u4eec\u7684\u6a21\u578b\u80fd\u5b8c\u6210\u8fd9\u4e2a\u66f4\u96be\u7684\u4efb\u52a1\ud83d\ude0a</p>"},{"location":"Online%20CS%20Courses/CS285/chap04/#summary_1","title":"Summary","text":"<p>\u6700\u7ec8\uff0c\u6211\u4eec\u7ed9\u51fa\u4e86off-policy\u7684actor-critic\u5b9e\u73b0\u65b9\u5f0f\u3002</p> <p>Off-Policy Actor-Critic Algorithm</p> <ol> <li>\u5229\u7528\u73b0\u5728\u7684policy \\(\\pi_\\theta\\) \u8d70\u4e00\u6b65\uff0c\u5f97\u5230 \\(\\{s_t,a_t,s_{t+1},r(s_t,a_t)\\}\\) \uff0c\u5b58\u5165Replay Buffer\uff1b</li> <li>\u4eceReplay Buffer\u4e2d\u968f\u673a\u53d6\u4e00\u4e2abatch\uff0c\u7528\u8fd9\u4e9b\u6570\u636e\u8bad\u7ec3 \\(Q^{\\pi_\\theta}_{\\phi}\\) \uff08\u89c1\u524d\u9762\u7684\u76ee\u6807\u51fd\u6570\uff09\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u5bf9\u6bcf\u4e00\u7ec4\u6570\u636e\u6211\u4eec\u9700\u8981\u91c7\u6837\u4e00\u4e2a\u65b0\u7684action \\(a_{t+1}\\) \uff1b</li> <li>\u53d6 \\(A^{\\pi_\\theta}(s_t,a_t)=Q^{\\pi_\\theta}_\\phi(s_t,a_t)\\) \uff1b</li> <li>\u8ba1\u7b97 \\(\\nabla_\\theta J(\\theta)=\\sum_{\\text{batch}}\\nabla_{\\theta}\\log \\pi_\\theta(\\tilde{a_t}|s_t)A^{\\pi_\\theta}(s_t,\\tilde{a_t})\\) \uff0c\u5176\u4e2d \\(\\tilde{a_t}\\) \u662f\u4ece \\(\\pi_\\theta\\) \u4e2d\u91c7\u6837\u5f97\u5230\u7684\uff1b</li> <li>\u7528\u8fd9\u4e2a\u68af\u5ea6\u66f4\u65b0 \\(\\theta\\) \u3002</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap04/#implementation_details","title":"Implementation Details","text":"<p>\u65e0\u8bba\u662f\u524d\u9762\u7684batch actor-critic\u8fd8\u662foff-policy actor-critic\uff0c\u90fd\u548c\u5b9e\u8df5\u4e2d\u91c7\u7528\u7684\u7248\u672c\u76f8\u5dee\u751a\u8fdc\u3002\u66f4\u9ad8\u7ea7\u7684\u5904\u7406\u601d\u8def\u4f1a\u5728\u540e\u9762\u4ecb\u7ecd\uff08\u6216\u8005\u4e0d\u4f1a\u88ab\u4ecb\u7ecd\uff09\uff0c\u8fd9\u91cc\u6211\u4eec\u53ea\u4ecb\u7ecd\u4e00\u4e2a\u6709\u8da3\u7684\u5c0f\u7ec6\u8282\u2014\u2014Net Architecture\u3002</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u4e4b\u524d\u7684\u7b97\u6cd5\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u8bad\u7ec3\u4e00\u4e2a \\(V\\) \uff08\u6216 \\(Q\\) \uff09\u7f51\u7edc\u548c\u4e00\u4e2a \\(\\pi\\) \u7f51\u7edc\u3002\u8fd9\u4e24\u4e2a\u7f51\u7edc\u90fd\u8f93\u5165 \\(s_t\\) \u3002\u81ea\u7136\u5730\uff0c\u6211\u4eec\u4f1a\u60f3\u5230\uff0c\u80fd\u4e0d\u80fd\u628a\u8fd9\u4e24\u4e2a\u7f51\u7edc\u5408\u5e76\u6210\u4e00\u4e2a\u7f51\u7edc\u5462\uff1f\u8fd9\u663e\u7136\u662f\u597d\u7684\uff0c\u56e0\u4e3a\u6bd4\u5982 \\(s_t\\) \u662f\u4e00\u5f20\u56fe\u7247\uff0c\u90a3\u4e48\u63d0\u53d6\u4fe1\u606f\u7684\u5377\u79ef\u6838\u5c31\u53ef\u4ee5\u88ab\u5171\u4eab\u3002\u6700\u540e\uff0c\u53ea\u9700\u8981\u52a0\u5165\u4e24\u4e2a\u4e0d\u540c\u7684projection head\u5c31\u53ef\u4ee5\u4e86\u3002\u8fd9\u79f0\u4e3aShared Network Design\u3002</p> <p>\u5f53\u7136\uff0c\u5bb9\u6613\u770b\u51fa\uff0c\u8fd9\u4e24\u4e2a\u7f51\u7edc\u7684\u516c\u5171\u90e8\u5206\u4f1a\u5403\u6765\u81ea\u4e24\u4e2a\u4e0d\u540c\u6765\u6e90\u7684\u68af\u5ea6\u3002\u8fd9\u4f1a\u4f7f\u5f97\u8bad\u7ec3\u4e0d\u7a33\u5b9a\uff0c\u4e5f\u4f7f\u5f97hyperparameter\u7684\u9009\u62e9\u53d8\u5f97\u66f4\u52a0\u56f0\u96be\u3002\u5b9e\u9645\u60c5\u51b5\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u5177\u4f53\u95ee\u9898\u5177\u4f53\u5206\u6790\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap04/#state-dependent_baselines","title":"State-dependent Baselines","text":"<p>\u56de\u987e\u672c\u8bb2\u7684\u5f00\u5934\uff0c\u6211\u4eec\u8fd8\u8bb0\u5f97policy gradient\u7684loss\u8868\u8fbe\u5f0f\u4e3a</p> \\[ J_{\\text{PG}}(\\theta)=\\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[\\sum_{t=1}^T\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\left(\\sum_{t'=t}^T \\gamma^{t'-t} r(s_{t'},a_{t'})\\right)\\right] \\] <p>\u6211\u4eec\u5f53\u65f6\u4f5c\u51fa\u7684\u7b2c\u4e00\u6b65\u662f\u51cf\u5c11variance\uff0c\u56e0\u6b64\u7528\u6a21\u578b\u9884\u6d4b\u7684\u671f\u5f85\u503c \\(Q^{\\pi_\\theta}_\\phi(s_t,a_t)\\) \u53d6\u4ee3\u5355\u91c7\u6837\u7684 \\(\\sum_{t'=t}^T \\gamma^{t'-t} r(s_{t'},a_{t'})\\) \u3002\u4f46\u662f\u56de\u987e\u6211\u4eec\u5f88\u65e9\u4e4b\u524d\u63d0\u5230\u7684\u91cd\u8981\u601d\u60f3\uff0c\u8fd9\u4e8c\u8005\u4e4b\u95f4\u5b58\u5728tradeoff\uff1a\u8fd9\u6837\u5f15\u5165\u4e86\u6a21\u578b\u4e0d\u51c6\u786e\u9020\u6210\u7684bias\u3002</p> <p>\u4e00\u4e2a\u6298\u4e2d\u7684\u65b9\u6cd5\u662f\uff0c\u6211\u4eec\u4f9d\u7136\u4f7f\u7528\u6a21\u578b\uff0c\u4f46\u8fd9\u6b21\u6a21\u578b\u53ea\u662f\u4f5c\u4e3abaseline\u51fa\u73b0\uff1a</p> \\[ \\nabla_\\theta J(\\theta)=\\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[\\sum_{t=1}^T \\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\left[\\left(\\sum_{t'=t}^T \\gamma^{t'-t} r(s_{t'},a_{t'})\\right)-V^{\\pi_\\theta}_\\phi(s_t)\\right]\\right] \\] <p>\u76f8\u6bd4\u4e8e\u7b2c\u4e94\u8bb2\u4ecb\u7ecdpolicy gradient\u7684\u65f6\u5019\u7b80\u5355\u7684\u5e73\u5747baseline\uff0c\u8fd9\u91cc\u6a21\u578b\u4ea7\u751f\u7684\u7684baseline\u663e\u7136\u5f3a\u5927\u591a\u4e86\uff1b\u540c\u65f6\uff0c\u56e0\u4e3a\u6a21\u578b\u4f5c\u4e3abaseline\uff08\u672c\u8eab\u7406\u8bba\u4e0a\u4e0d\u4f1a\u5f71\u54cd\u671f\u671b\uff0c\u53ea\u662f\u51cf\u5c11\u65b9\u5dee\uff09\u51fa\u73b0\uff0c\u5176\u5bf9\u6a21\u578b\u7684bias\u8981\u6c42\u4e5f\u5c0f\u7684\u591a\u3002\u8fd9\u4e2a\u5de7\u5999\u7684\u8bbe\u8ba1\u88ab\u79f0\u4e3aState-dependent Baselines\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap04/#control_variates","title":"Control Variates","text":"<p>\u9664\u4e86\u4f9d\u8d56state\u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u8fdb\u4e00\u6b65\u6709Control Variates\uff1a\u5b83\u6307\u7684\u662f\u540c\u65f6\u4f9d\u8d56action\u548cstate\u7684baseline\u3002\u5b8c\u5168\u7c7b\u4f3c\u5730\uff0c\u6211\u4eec\u53ef\u4ee5\u6709</p> \\[ \\nabla_\\theta J_1(\\theta)=\\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[\\sum_{t=1}^T \\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\left[\\left(\\sum_{t'=t}^T \\gamma^{t'-t} r(s_{t'},a_{t'})\\right)-Q^{\\pi_\\theta}_\\phi(s_t,a_t)\\right]\\right] \\] <p>\u4f46\u8fd9\u91cc\u7565\u6709\u4e00\u4e2a\u5c0f\u95ee\u9898\uff1a\u6839\u636e\u4e4b\u524dpolicy gradient\u7684\u63a8\u5bfc\uff0c\u6211\u4eec\u53ea\u80fd\u589e\u52a0\u4e00\u4e2a\u5e38\u6570\uff0c\u800c\u4e0d\u80fd\u589e\u52a0\u4e00\u4e2a\u548c \\(a_t\\) \u76f8\u5173\u7684\u51fd\u6570\u3002\u56e0\u6b64\uff0c\u771f\u6b63\u7684loss\u5e94\u8be5\u662f</p> \\[ \\nabla_\\theta J(\\theta)=\\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[\\sum_{t=1}^T \\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\left[\\left(\\sum_{t'=t}^T \\gamma^{t'-t} r(s_{t'},a_{t'})\\right)-Q^{\\pi_\\theta}_\\phi(s_t,a_t)\\right]\\right]+\\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[\\sum_{t=1}^T \\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)Q^{\\pi_\\theta}_\\phi(s_t,a_t)\\right] \\] <p>\u5f15\u5165\u4e4b\u524d \\(\\hat{Q}^{\\pi_\\theta}_{t}\\) \u7684\u7b80\u8bb0\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u51fa</p> \\[ \\nabla_\\theta J(\\theta)=\\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[\\sum_{t=1}^T \\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\left(\\hat{Q}^{\\pi_\\theta}_{t}-Q^{\\pi_\\theta}_\\phi(s_t,a_t)\\right)\\right]+\\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[\\sum_{t=1}^T \\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)Q^{\\pi_\\theta}_\\phi(s_t,a_t)\\right] \\] <p>\u76f4\u5230\u8fd9\u91cc\uff0c\u4f60\u4e5f\u8bb8\u8ba4\u4e3a\u8fd9\u53ea\u662f\u6ca1\u6709\u610f\u4e49\u7684\u6052\u7b49\u53d8\u5f62\u2014\u2014\u7b2c\u4e00\u9879\u51cf\u53bb\u4e00\u9879\uff0c\u7b2c\u4e8c\u9879\u53c8\u52a0\u4e0a\u4e00\u9879\u3002\u4f46\u5173\u952e\u4e4b\u5904\u5728\u4e8e\uff0c\u7b2c\u4e00\u9879\u5305\u542b\u671f\u5f85\u503c\u662f0\u7684 \\(\\hat{Q}^{\\pi_\\theta}_{t}-Q^{\\pi_\\theta}_\\phi(s_t,a_t)\\) \uff0c\u56e0\u6b64\u5e94\u8be5\u76f8\u6bd4\u7b2c\u4e8c\u9879\u4f1a\u5c0f\u5f88\u591a\uff1b\u4f46\u5173\u952e\u662f\u7b2c\u4e8c\u9879\u4e0d\u518d\u548c\u73af\u5883\u6709\u5173\u7cfb\u2014\u2014\u8fd9\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u60f3\u53d6\u591a\u5c11sample\u9009\u53d6\u591a\u5c11sample\uff01</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u4fee\u6539 \\(\\nabla_\\theta J(\\theta)\\) \u7684\u8ba1\u7b97\uff1a - \u53d6\u5c11\u91cf\u7684sample\u8ba1\u7b97\u51fa\u7b2c\u4e00\u9879\uff0c\u867d\u7136\u65b9\u5dee\u8f83\u5927\u4f46\u662f\u56e0\u4e3a\u8fd9\u4e00\u9879\u672c\u8eab\u76f8\u5bf9\u7b2c\u4e8c\u9879\u5f88\u5c0f\uff0c\u5f71\u54cd\u4e0d\u5927\uff1b - \u53d6\u5927\u91cf\u7684sample\u8ba1\u7b97\u7b2c\u4e8c\u9879\uff0c\u56e0\u4e3a\u8fd9\u4e00\u9879\u7684\u8ba1\u7b97\u76f8\u6bd4\u4e8e \\(\\hat{Q}^{\\pi_\\theta}_{t}\\) \u800c\u8a00\u53ea\u9700\u8981 \\((s_t,a_t)\\) \uff0c\u4e0d\u9700\u8981\u540e\u9762\u7684\u8f68\u8ff9\uff0c\u6240\u4ee5\u53ef\u4ee5\u53d6\u5f88\u591asample\u540c\u65f6\u4fdd\u6301\u8ba1\u7b97\u7684\u9ad8\u6548\u6027\u3002\u8fd9\u5c31\u662fControl Variates\u7684\u6838\u5fc3\u601d\u60f3\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap04/#hybrid_methods","title":"Hybrid Methods","text":"<p>\u5728\u8fd9\u6700\u540e\u7684\u4e00\u90e8\u5206\uff0c\u6211\u4eec\u8003\u8651\u628apolicy gradient\u548cactor-critic\u7ed3\u5408\u8d77\u6765\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap04/#n-step_returns","title":"N-step returns","text":"<p>\u6211\u4eec\u5bf9\u6bd4\u4e00\u4e0bpolicy gradient\u548cactor-critic\u7684loss\uff1a</p> \\[ \\nabla_\\theta J_{\\text{PG}}(\\theta)=\\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[\\sum_{t=1}^T \\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\left(\\sum_{t'=t}^T \\gamma^{t'-t} r(s_{t'},a_{t'})\\right)\\right] \\] \\[ \\nabla_\\theta J_{\\text{AC}}(\\theta)=\\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[\\sum_{t=1}^T \\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\left(r(s_t,a_t)+\\gamma V_\\phi^{\\pi_\\theta}(s_{t+1})-V^{\\pi_\\theta}_\\phi(s_t)\\right)\\right] \\] <p>\u90a3\u4e48\uff0c\u5f88\u81ea\u7136\u7684\u4e00\u4e2a\u60f3\u6cd5\u5c31\u662f\u53d6</p> \\[ \\nabla_\\theta J(\\theta)=\\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[\\sum_{t=1}^T \\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\left[\\left(\\sum_{t'=t}^{t+n-1} \\gamma^{t'-t} r(s_{t'},a_{t'})\\right)+\\gamma^n V_\\phi^{\\pi_\\theta}(s_{t+n})-V^{\\pi_\\theta}_\\phi(s_t)\\right]\\right] \\] <p>\u8fd9\u4e2a\u65b9\u6cd5\u88ab\u79f0\u4e3aN-step returns\u3002\u5b83\u4e3a\u4ec0\u4e48\u5408\u7406\u5462\uff1f\u6211\u4eec\u770b\u5230\uff0c\u5bf9\u4e8e\u8f83\u8fd1\u7684\u51b3\u7b56\uff08 \\(t'\\approx t\\) \uff09\uff0c\u5373\u4f7f\u662f\u5355\u6b21\u91c7\u6837\u65b9\u5dee\u4e5f\u4e0d\u4f1a\u592a\u5927\uff0c\u5e76\u4e14\u907f\u514d\u4e86bias\uff1b\u800c\u5bf9\u4e8e\u8fdc\u5904\u7684\u51b3\u7b56\uff0c\u6211\u4eec\u4f7f\u7528\u6a21\u578b\u7684\u9884\u6d4b\u7ed3\u679c\u4ee5\u907f\u514d\u91c7\u6837\u3002</p> <p>Q: \u76f4\u89c2\u4e0a\uff0c\u4e3a\u4ec0\u4e48\u8f83\u8fd1\u7684\u51b3\u7b56\u65b9\u5dee\u5c0f\uff1f</p> <p>A: \u4e0d\u59a8\u5e26\u5165\u6211\u4eec\u7684\u4eba\u751f\u3002\u5982\u679c\u8003\u8651\u4f60\u660e\u5929\u4f1a\u505a\u4ec0\u4e48\uff0c\u591a\u5c11\u53ef\u4ee5\u901a\u8fc7\u4f60\u73b0\u5728\u7684\u8ba1\u5212\u6216\u8005\u4ed6\u4eba\uff08\u73af\u5883\uff09\u7684\u4e8b\u60c5\u5b89\u6392\u51b3\u5b9a\u4e0b\u6765\uff1b\u4f46\u5018\u82e5\u95ee\u5230\u4e8c\u5341\u5e74\u540e\u4f60\u4f1a\u505a\u4ec0\u4e48\uff0c\u90a3\u53c8\u6709\u8c01\u771f\u6b63\u80fd\u786e\u5b9a\u5462\uff1f</p>"},{"location":"Online%20CS%20Courses/CS285/chap04/#generalized_advantage_estimation","title":"Generalized Advantage Estimation","text":"<p>Generalized Advantage Estimation\u65b9\u6cd5\u5728\u524d\u9762\u7684N-steps return\u7684\u57fa\u7840\u4e0a\u518d\u8fdb\u4e00\u6b65\u3002\u5982\u679c\u4e4b\u524d\u6211\u4eec\u7ed9\u51fa\u7684advantage function\u662f</p> \\[ A^{\\pi_\\theta}_n(s_t,a_t)=\\left(\\sum_{t'=t}^{t+n-1} \\gamma^{t'-t} r(s_{t'},a_{t'})\\right)+\\gamma^n V_\\phi^{\\pi_\\theta}(s_{t+n})-V^{\\pi_\\theta}_\\phi(s_t) \\] <p>\u90a3\u4e48GAE\u7ed9\u51fa\u7684advantage function\u662f</p> \\[ A_{\\text{GAE}}^{\\pi_\\theta}(s_t,a_t)=\\sum_{n=1}^\\infty \\lambda^{n-1} A^{\\pi_\\theta}_n(s_t,a_t) \\] <p>\u8fd9\u6837\u7684exponential decay\u7684\u65b9\u6cd5\u53ef\u4ee5\u770b\u4f5c\u662f\u5bf9N-step return\u7684\u4e00\u4e2a\u5e73\u6ed1\u3002\u4e5f\u53ef\u4ee5\u5c55\u5f00\uff0c\u4f1a\u53d1\u73b0</p> \\[ A_{\\text{GAE}}^{\\pi_\\theta}(s_t,a_t)=\\sum_{t'\\ge t}(\\gamma\\lambda)^{t'-t}\\left[r(s_{t'},a_{t'})+\\gamma V^{\\pi_\\theta}_\\phi(s_{t'+1})-V^{\\pi_\\theta}_\\phi(s_{t'})\\right] \\] <p>\u56e0\u6b64\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u628a \\(\\gamma\\lambda\\) \u6574\u4f53\u770b\u4f5c\u53c2\u6570\uff1a\u6bcf\u4e00\u9879 \\(r(s_{t'},a_{t'})+\\gamma V^{\\pi_\\theta}_\\phi(s_{t'+1})-V^{\\pi_\\theta}_\\phi(s_{t'})\\) \u4ee3\u8868\u7740\u8fd9\u4e00\u6b65\u662f\u5426\u4f18\u79c0\uff1b\u800c \\(\\gamma\\lambda\\) \u4ee3\u8868\u7740\u6211\u4eec\u5bf9\u6bcf\u4e00\u6b65\u4f5c\u51fa\u91cd\u8981\u6027\u5982\u4f55\u968f\u7740\u65f6\u95f4\u800c\u8870\u51cf\u3002</p> <p>\u6700\u540e\uff0c\u503c\u5f97\u4e00\u63d0\uff1aGAE\u662f\u4e00\u4e2a\u6bd4\u8f83general\u7684\u7b97\u6cd5\uff0c\u4e4b\u524d\u7684\u4e24\u79cd\u65b9\u6cd5\u90fd\u53ef\u4ee5\u88ab\u89c6\u4e3aGAE\u7684\u7279\u4f8b\u3002\u5177\u4f53\u5730\uff0c\u5f53 \\(\\lambda=1\\) \u65f6\uff0c\u53ef\u4ee5\u6d88\u53bb\u4e2d\u95f4\u9879\u53d1\u73b0GAE advantage\u6210\u4e3a\u4e86state-independent baseline\u7684\u5f62\u5f0f\uff1b\u800c\u5f53 \\(\\lambda=0\\) \u65f6\uff0cGAE advantage\u6210\u4e3a\u4e86vanilla actor-critic\u7684\u5f62\u5f0f\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap04/#reference_papers","title":"Reference Papers","text":"<ol> <li>Bias in Natural Actor-Critic Algorithms\uff08\u8ba8\u8bbadiscount\u7684\u95ee\u9898\uff09</li> <li>Q-Prop: Sample-Efficient Policy Gradient with An Off-Policy Critic\uff08\u4e00\u4e2acontrol variates\u7684\u4f8b\u5b50\uff09</li> <li>High-Dimensional Continuous Control Using Generalized Advantage Estimation\uff08GAE\u7b97\u6cd5\uff09</li> <li>Asynchronous methods for deep reinforcement learning\uff08A3C\u7b97\u6cd5\uff0c\u4e00\u79cd\u5e76\u884c\u7684actor-critic\u7b97\u6cd5\uff09</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap05/","title":"Value Function Methods","text":"<p>\u4f5c\u4e3a\u5f15\u5165\uff0c\u6211\u4eec\u8003\u8651\u80fd\u5426\u4e0d\u7ed9\u6a21\u578b\u6307\u5b9a\u4e00\u4e2a\u660e\u786e\u7684policy\uff0c\u800c\u662f\u76f4\u63a5\u9009\u53d6\u5f53\u524d\u6700\u4f18\u7684action\u3002\u8fd9\u6837\u7684\u65b9\u6cd5\u79f0\u4e3avalue function methods\u3002</p> <p>\u5177\u4f53\u5730\uff0c\u5047\u8bbe\u6211\u4eec\u77e5\u9053\u4e86\u4f7f\u7528\u7b56\u7565 \\(\\pi\\) \u65f6\uff0c\u5f53\u524dstate \\(s_t\\) \u4e0b\u9762\u5404\u4e2aaction \\(a_t\\) \u5bf9\u5e94\u7684value \\(Q^\\pi(s_t,a_t)\\) \uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u9009\u53d6\u6700\u4f18\u7684action\uff1a</p> \\[ a_t^\\star=\\arg\\max_{a_t}Q^\\pi(s_t,a_t) \\] <p>\u8fd9\u6837\uff0c\u53ea\u8981\u6211\u4eec\u53ef\u4ee5\u5f97\u5230 Q-function \u7684\u503c\u5c31\u53ef\u4ee5\u4e86\u3002\u5e94\u8be5\u5982\u4f55\u5b9e\u73b0\u8fd9\u4e00\u70b9\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u524d\u9762\u7b2c4\u8bb2\u4e2d\u7ed9\u51fa\u7684\u9012\u63a8\u5173\u7cfb</p> \\[ V^{\\pi}(s_t)=\\mathbb{E}_{a_t\\sim\\pi(a_t|s_t)}\\left[Q^{\\pi}(s_t,a_t)\\right]=\\mathbb{E}_{a_t\\sim\\pi(a_t|s_t)}\\left[r(s_t,a_t)+\\gamma \\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}[V^{\\pi}(s_{t+1})]\\right] \\] <p>\u548c</p> \\[ Q^{\\pi}(s_t,a_t)=r(s_t,a_t)+\\gamma\\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}\\left[V^{\\pi}(s_{t+1})\\right] \\] <p>\u5bf9\u4e8e\u6709\u9650\u5927\u5c0f\u7684state space\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u4e0d\u65ad\u8fed\u4ee3\u7684\u65b9\u6cd5\u8ba1\u7b97\u5b83\u4eec\u3002\u5e94\u7528\u5728V\u4e0a\uff0c\u6211\u4eec\u5c31\u6709\u4ee5\u4e0b\u7684policy iteration\u7b97\u6cd5\uff1a</p> <p>policy iteration</p> <p>\u91cd\u590d: 1. Policy Evaluation: \u8ba1\u7b97 </p> \\[ V^\\pi(s_t)\\leftarrow r(s_t,\\pi(s_t))+\\gamma \\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,\\pi(s_t))}[V^{\\pi}(s_{t+1})] \\] <ol> <li>\u6839\u636e\u65b0\u7684value\u8ba1\u7b97\u6700\u65b0\u7b56\u7565\uff1a $$ \\pi(s_t)=\\arg\\max_{a_t}r(s_t,a_t)+\\gamma \\mathbb{E}{s\\sim p(s_{t+1}|s_t,a_t)}[V^{\\pi}(s_{t+1})] $$</li> </ol> <p>\u8fd9\u5c31\u662fvalue-based\u65b9\u6cd5\u7684\u57fa\u672c\u601d\u8def\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap05/#value_iteration","title":"Value Iteration","text":"<p>\u9996\u5148\uff0c\u4ece\u4e0a\u9762\u7684\u8868\u8fbe\u5f00\u59cb\uff0c\u6211\u4eec\u53ef\u4ee5\u7528Q function\u7b80\u5316\u8bb0\u53f7\uff0c\u628a\u4e24\u6b65\u62c6\u4e3a\u4e09\u6b65\uff1a 1. \\(V^\\pi(s_t)\\leftarrow Q^\\pi(s_t,\\pi(s_t))\\) 2. \\(Q^\\pi(s_t,a_t)\\leftarrow r(s_t,a_t)+\\gamma \\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}[V^{\\pi}(s_{t+1})]\\) 3. \\(\\pi(s_t)\\leftarrow \\arg\\max_{a_t} Q^\\pi(s_t,a_t)\\)</p> <p>\u7136\u540e\uff0c\u628a \\(\\pi\\) \u6d88\u53bb\uff0c\u5c31\u5f97\u5230\u4e86value iteration\u7b97\u6cd5\uff1a</p> \\[ V^\\pi(s_t)\\leftarrow \\max_{a_t}\\left\\{r(s_t,a_t)+\\gamma \\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}[V^{\\pi}(s_{t+1})]\\right\\} \\]"},{"location":"Online%20CS%20Courses/CS285/chap05/#fitting_methods","title":"Fitting Methods","text":"<p>\u524d\u9762\u7684\u65b9\u6cd5\u57fa\u4e8edynamic programming\uff0c\u4e5f\u5c31\u662f\u5fc5\u987b\u5217\u51fa\u6bcf\u4e00\u4e2a\u4f4d\u7f6e\u5904\u7684Q\u6216\u8005V\u3002\u4f46\u662f\u5bf9\u4e8e\u5f88\u9ad8\u7684\u7ef4\u5ea6\uff0c\u6211\u4eec\u5b8c\u5168\u4e0d\u80fd\u8fd9\u6837\u505a\uff0c\u6b64\u65f6\u9700\u8981\u8bad\u7ec3\u4e00\u4e2a\u7f51\u7edc\u6765\u62df\u5408Q\u6216\u8005V\uff0c\u79f0\u4e3afitting methods\u3002</p> <p>\u6700\u7b80\u5355\u7684\u63a8\u5e7f\u662fFitted Value Iteration\uff1a\u6211\u4eec\u4ece\u524d\u9762value iteration\u7b97\u6cd5\u7684\u8868\u8fbe\u5f0f\u51fa\u53d1\uff0c\u4f46\u662f\u628aV\u6362\u6210\u4e00\u4e2a\u7f51\u7edc\u3002</p> <p>Fitted Value Iteration</p> <p>\u91cd\u590d: 1. \u8ba1\u7b97\u65b0\u7684value\uff1a $$ [V^\\pi(s_t)]^\\star=\\max_{a_t}\\left{r(s_t,a_t)+\\gamma \\mathbb{E}{s\\sim p(s_{t+1}|s_t,a_t)}[V^{\\pi}\\phi(s)]\\right} $$</p> <ol> <li>\u6700\u5c0f\u5316\u62df\u5408\u8bef\u5dee\uff1a $$ \\phi\\leftarrow \\arg\\min_\\phi \\sum_{s_t}\\left(V^\\pi_\\phi(s_t)-[V^\\pi(s_t)]^\\star\\right)^2 $$</li> </ol> <p>\u6ce8\u610f\uff0c \\([V^\\pi(s_t)]^\\star\\) \u4e2d\u7684 \\(\\star\\) \u4ee3\u8868\u8fd9\u4e2a\u6570\u662f\u7f51\u7edc\u7684\u8bad\u7ec3\u76ee\u6807\u3002\u6ce8\u610f\u8ba1\u7b97\u7684\u65f6\u5019\u53f3\u8fb9 \\(r(s_t,a_t)+\\gamma \\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}[V^{\\pi}_\\phi(s_{t+1})]\\) \u4e5f\u548c \\(\\phi\\) \u76f8\u5173\uff0c\u56e0\u6b64\u9700\u8981stop-gradient\u3002</p> <p>\u540c\u65f6\uff0c\u4e5f\u5e94\u8be5\u6ce8\u610f\uff0c\u7b2c\u4e8c\u6b65\u5e76\u4e0d\u662f\u4e00\u4e2agradient step\uff0c\u800c\u662f\u5f88\u591a\u6b65\uff0c\u56e0\u4e3a\u8fd9\u4e00\u6b65\u4ee3\u8868\u7740\u8ba9 \\(V^\\pi_\\phi\\) \u63a5\u8fd1\u4e8e\u4e4b\u524d\u201c\u52a8\u6001\u89c4\u5212\u201d\u90a3\u6837\u65b9\u6cd5\u7684\u51c6\u786e\u503c\uff0c\u795e\u7ecf\u7f51\u7edc\u7684\u5b66\u4e60\u5fc5\u987b\u8ddf\u4e0avalue function update\u7684\u8fdb\u5ea6\u3002\u800c1-2\u4f5c\u4e3a\u4e00\u6574\u8f6e\uff0c\u624d\u76f8\u5f53\u4e8e\u4e4b\u524d\u201c\u52a8\u6001\u89c4\u5212\u201d\u65b9\u6cd5\u4e2dupdate \\(V\\) \u7684\u65b9\u5f0f\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap05/#fitting_q_iteration","title":"Fitting Q Iteration","text":"<p>\u6211\u4eec\u5f88\u5bb9\u6613\u53d1\u73b0\u524d\u9762\u7b97\u6cd5\u7684\u91cd\u8981\u95ee\u9898\uff1a\u7b2c\u4e00\u6b65\u5fc5\u987b\u6d89\u53ca\u5bf9\u4e0d\u540c\u7684 \\(a_t\\) \u83b7\u5f97\u5f88\u591areward\u548c \\(s_{t+1}\\) \uff0c\u5e76\u8ba1\u7b97\u6700\u5927\u503c\u3002\u8fd9\u6837\u7684\u64cd\u4f5c\u5bfc\u81f4\u5176\u5fc5\u987b\u548c\u73af\u5883\u8fdb\u884c\u53cd\u590d\u4ea4\u4e92\u3002\u80fd\u5426\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff1f</p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u5982\u679c\u53cd\u8fc7\u6765\u62df\u5408 Q function\uff0c\u5c31\u4e0d\u5b58\u5728\u8fd9\u6837\u7684\u95ee\u9898\u4e86\uff01\u56e0\u4e3a\uff0c\u56de\u987e\u6211\u4eec\u4e4b\u524d\u7684\u4e09\u6b65</p> <ol> <li>\\(V^\\pi(s_t)\\leftarrow Q^\\pi(s_t,\\pi(s_t))\\)</li> <li>\\(Q^\\pi(s_t,a_t)\\leftarrow r(s_t,a_t)+\\gamma \\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}[V^{\\pi}(s_{t+1})]\\)</li> <li>\\(\\pi(s_t)\\leftarrow \\arg\\max_{a_t} Q^\\pi(s_t,a_t)\\)</li> </ol> <p>\u6b64\u65f6\u5982\u679c\u4e0d\u662f\u6d88\u53bbQ\u800c\u662f\u6d88\u53bbV\uff0c\u90a3\u4e48\u5c31\u4f1a\u5f97\u5230</p> \\[ Q^\\pi(s_t,a_t)\\leftarrow r(s_t,a_t)+\\gamma \\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}\\left[\\max_{a_{t+1}}Q^{\\pi}(s_{t+1},a_{t+1})\\right] \\] <p>\u8fd9\u6837\u7684\u66f4\u65b0\u5173\u7cfb\u3002\u6ce8\u610f\u5230\u73b0\u5728\u6700\u5927\u503c\u7684\u4f4d\u7f6e\u8dd1\u5230\u4e86\u5185\u90e8\uff01\u8fd9\u6837\u6211\u4eec\u4e0d\u9700\u8981\u548c\u73af\u5883\u591a\u6b21\u4ea4\u4e92\uff0c\u53ea\u9700\u8981\u591a\u8dd1\u51e0\u6b21\u795e\u7ecf\u7f51\u7edc\u5c31\u53ef\u4ee5\u4e86\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u76f8\u6bd4\u4e8e\u524d\u9762\u7684V\u65b9\u6cd5\uff0c\u6211\u4eec\u7528 \\(Q(s_t,a_t)\\) \u80fd\u591fgeneralize\u5230\u672a\u89c1\u8fc7\u7684 \\(a_t\\) \u4e0a\u9762\u4f5c\u4e3a\u8d4c\u6ce8\uff0c\u6362\u5f97\u4e86\u91c7\u66f4\u5c11\u6837\u672c\u7684\u673a\u4f1a\u3002</p> <p>\u8fd9\u4e2a\u65b9\u6cd5\u5c31\u662f\u8457\u540d\u7684Q Iteration Algorithm\u3002\u5f53\u7136\uff0c\u4ee3\u4ef7\u4e5f\u662f\u660e\u663e\u7684\uff1a\u6211\u4eec\u7684\u7f51\u7edc\u9700\u8981\u8f93\u5165 \\(s_t,a_t\\) \u4e24\u4e2a\u53c2\u6570\uff0c\u56e0\u6b64\u62df\u5408\u7684\u96be\u5ea6\u4e5f\u6bd4\u8f83\u9ad8\u3002\u4f46\u8003\u8651\u5230DL\u7684\u5de8\u5927\u53d1\u5c55\u5df2\u7ecf\u4e3a\u4eba\u4eec\u626b\u5e73\u4e86\u5927\u90e8\u5206\u7684\u969c\u788d\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u5b8c\u5168\u7455\u4e0d\u63a9\u745c\u3002</p> <p>\u6700\u540e\uff0c\u6211\u4eec\u4e5f\u5f88\u5bb9\u6613\u628a\u5b83\u63a8\u5e7f\u5230Fitted Q Iteration\uff0c\u5728\u6b64\u4f5c\u4e00\u603b\u7ed3\uff1a</p> <p>Fitted Q Iteration Algorithm</p> <p>\u91cd\u590d\uff1a 1. \u6536\u96c6\u6570\u636e\u96c6\uff0c\u5305\u542b\u4e00\u7cfb\u5217\u7684 \\(\\{s_t,a_t,s_{t+1},r(s_t,a_t)\\}\\) \uff08\u6709\u65f6\u5019\uff0c\u4e3a\u4e86\u65b9\u4fbf\uff0c\u4e5f\u4f1a\u8bb0\u4e3a \\(\\{s,a,s',r\\}\\) \uff0c\u9700\u8981\u641e\u6e05\u695a\u5b83\u4eec\u7684\u5bf9\u5e94\u5173\u7cfb\uff09\uff1b 2. \u91cd\u590d \\(K\\) \u6b21\uff1a</p> <p>2.1. \u8ba1\u7b97\u65b0\u7684 \\(Q\\) \uff1a</p> \\[ [Q^\\pi(s_t,a_t)]^\\star=r(s_t,a_t)+\\gamma \\max_{a_{t+1}}Q^{\\pi}_\\phi(s_{t+1},a_{t+1}) \\] <p>2.2. \u6700\u5c0f\u5316\u62df\u5408\u8bef\u5dee\uff1a\uff08\u6ce8\u610f\uff0c\u8fd9\u4e00\u6b65\u672c\u8eab\u4e5f\u53ef\u80fd\u5305\u542b\u5f88\u591a\u6b21gradient step\uff0c\u603b\u6570\u8bb0\u4e3a \\(S\\) \uff09</p> \\[ \\phi \\leftarrow \\arg\\min_\\phi \\sum_{s_t,a_t}\\left(Q^\\pi_\\phi(s_t,a_t)-[Q^\\pi(s_t,a_t)]^\\star\\right)^2 \\] <p>\u548c\u524d\u9762\u7684fitted value iteration\u4e00\u6837\uff0c\u5e94\u8be5\u6ce8\u610f \\(K\\) \u548c \\(S\\) \u7684\u533a\u522b\uff1a \\(K\\) \u7684\u8fed\u4ee3\u4f5c\u4e3a\u5916\u5faa\u73af\uff0c\u4ee3\u8868\u7740\u4e4b\u524d\u201c\u52a8\u6001\u89c4\u5212\u201d\u65b9\u6cd5\u4e2dupdate \\(Q\\) \u7684\u65b9\u5f0f\uff0c\u800c \\(S\\) \u7684\u8fed\u4ee3\u4f5c\u4e3a\u5185\u5faa\u73af\uff0c\u662f\u4fdd\u8bc1\u795e\u7ecf\u7f51\u7edc\u80fd\u591f\u8ddf\u4e0aQ function update\u7684\u8fdb\u5ea6\u3002</p> <p>\u6ce8\u610f\u5230\u8fd9\u4e2a\u7b97\u6cd5\u7684\u53e6\u5916\u4e00\u4e2a\u6027\u8d28\u662f\uff0c\u6211\u4eec\u65e0\u8bba\u600e\u6837\u66f4\u65b0 \\(\\pi\\) \uff0c\u6211\u4eec\u539f\u5148\u7528\u6765update \\(Q\\) \u7684\u6570\u636e\u4ecd\u7136\u53ef\u4ee5\u91cd\u590d\u5229\u7528\u3002\u8fd9\u6837\u7684\u6027\u8d28\u5141\u8bb8\u4e86\u4e0a\u9762\u201c\u91cd\u590d \\(K\\) \u8f6e\u201d\u7684\u64cd\u4f5c\uff0c\u4e5f\u4f7f\u5f97\u8fd9\u4e2a\u7b97\u6cd5\u975e\u5e38\u9002\u5408\u4e8eoff-policy\u7684\u4efb\u52a1\u3002\u5f53\u7136\uff0c\u4e5f\u5fc5\u987b\u63d0\u53ca\u53e6\u5916\u4e00\u4e2a\u6781\u7aef\u2014\u2014\u5982\u679c\u6211\u4eec\u8ba9 \\(K\\to \\infty\\) \uff0c\u4e5f\u5c31\u662f\u4e00\u76f4\u53ea\u5728\u5f88\u5c11\u7684\u6837\u672c\u4e0a\u9762\u91cd\u590d\u8bad\u7ec3\uff0c\u5c31\u4f1a\u4ea7\u751f\u95ee\u9898\uff1a\u6211\u4eec\u5e76\u4e0d\u4e86\u89e3\u6ca1\u6709\u91c7\u6837\u5230\u7684\u5730\u65b9\u662f\u5426\u4f1a\u6709\u66f4\u597d\u7684\u7b56\u7565\u3002\u56e0\u6b64\uff0c\u548c\u8fd9\u4e2a\u7b97\u6cd5\u5339\u914d\u7684\u5fc5\u5b9a\u662f\u4e00\u4e9b\u80fd\u591f\u5b9e\u73b0exploration\u7684\u7b97\u6cd5\u3002</p> <p>\u5f53\u7136\uff0c\u5b9e\u9a8c\u7ed9\u51fa\u7684\u6700\u4f18\u65b9\u5f0f\u5c31\u662f\u50cf\u4e0a\u9762\u7684\u7b97\u6cd5\u63cf\u8ff0\u7684\u90a3\u6837\uff1a\u5bf9\u540c\u6837\u7684\u4e00\u7ec4\u6570\u636e\u8bad\u7ec3 \\(K\\) \u8f6e\uff0c\u7136\u540e\u4f5cexploration\uff0c\u518d\u91cd\u65b0\u6839\u636e\u67d0\u79cdpolicy \\(\\pi\\) \u6765\u6536\u96c6\u6570\u636e\uff0c\u518d\u8bad\u7ec3 \\(K\\) \u8f6e\uff0c\u5982\u6b64\u5faa\u73af\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap05/#q_learning_introduction","title":"Q learning: Introduction","text":"<p>Q learning\u662fQ iteration\u7684online\u7248\u672c\u3002\u5177\u4f53\u5730\uff0c\u6211\u4eec\u6bcf\u4e00\u6b21\u548c\u73af\u5883\u4ea4\u4e92\u4e00\u6b21\uff0c\u7acb\u523b\u7528\u4e0a\u9762Q iteration\u7684\u65b9\u6cd5\u5904\u7406\u5f97\u5230\u7684\u6570\u636e\uff0c\u5e76\u6839\u636e\u4e00\u4e2a\u7b56\u7565\u7ee7\u7eed\u4ea4\u4e92\u3002</p> <p>Vanilla Q Learning Algorithm</p> <p>\u91cd\u590d\uff1a 1. \u4ece\u73af\u5883\u4e2d\u6839\u636e\u67d0\u79cdpolicy\u91c7\u6837\u4e00\u4e2a \\((s,a,s',r)\\) \uff1b 2. \u8ba1\u7b97\u4e00\u4e2a \\([Q^\\pi(s,a)]^\\star=r(s,a)+\\gamma\\max_{a'}Q^{\\pi}_\\phi(s',a')\\) 3. \u5bf9 \\(L=([Q^\\pi(s,a)]^\\star-Q^{\\pi}_\\phi(s,a))^2\\) \u4f5c\u4e00\u6b65\u68af\u5ea6\u4e0b\u964d\u3002</p> <p>\u5176\u4e2d\u7b2c\u4e8c\u6b65\u7684\u201c\u4e00\u4e2a\u201d\u662f\u4e3a\u4e86\u4fdd\u8bc1\u5b83\u662f\u4e00\u4e2aonline\u7684\u7b97\u6cd5\u3002\u800c\u7b2c\u4e09\u6b65\u4e4b\u6240\u4ee5\u53ea\u4f5c\u4e00\u4e2agradient step\uff0c\u662f\u56e0\u4e3a\u6211\u4eec\u7684\u8bad\u7ec3\u6570\u636e\u53ea\u6709\u4e00\u4e2a\uff08\u4e5f\u5c31\u662f\u521a\u91c7\u6837\u7684\u90a3\u4e2a\u6570\u636e\uff09\u3002</p> <p>\u53e6\u5916\u503c\u5f97\u4e00\u63d0\u7684\u662f\u7b2c\u4e00\u6b65\u91c7\u6837\u7684policy\u3002\u5c31\u5982\u4e4b\u524d\u6240\u8bf4\uff0c\u56e0\u4e3aoff-policy\u7684\u6027\u8d28\uff0c\u8fd9\u91cc\u91c7\u6837\u7684\u201c\u67d0\u79cdpolicy\u201d\u5e76\u4e0d\u4e00\u5b9a\u662f\u5f53\u524d \\(Q\\) \u503c\u5206\u5e03\u4e0b\u7684\u6700\u4f73policy\uff1b\u4f46\u4ece\u53e6\u4e00\u4e2a\u89d2\u5ea6\u6765\u770b\uff0c\u76f4\u89c9\u4e0a\u8fd9\u4e2apolicy\u591a\u5c11\u5e94\u8be5\u8d34\u8fd1\u73b0\u5728\u7684\u6700\u4f18policy\uff0c\u8fd9\u6837\u6709\u5229\u4e8e\u6a21\u578b\u201c\u52a0\u5f3a\u8bad\u7ec3\u201d\u3002\u4f46\u9664\u6b64\u4e4b\u5916\uff0c\u6211\u4eec\u5fc5\u987b\u6ce8\u610fpolicy\u9700\u8981\u6709\u4e00\u4e2aexploration\u7684\u673a\u5236\uff0c\u5426\u5219\u6211\u4eec\u53ef\u80fd\u4f1a\u9677\u5165\u4e00\u4e2a\u5f88\u5dee\u7684\u89e3\u3002</p> <p>\u8fd9\u4e00\u5207\u90fd\u4f7f\u5f97Q learning\u4e2d\u7684exploration\u6210\u4e3a\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u95ee\u9898\u3002\u6211\u4eec\u5c06\u5728\u4e4b\u540e\u7684\u67d0\u8bb2\u8ba8\u8bba\u8fd9\u4e2a\u95ee\u9898\u3002\u4f46\u5728\u73b0\u5728\uff0c\u53ef\u4ee5\u6839\u636eintuition\u7ed9\u51fa\u4e00\u4e9b\u4ecb\u7ecd\uff1a</p> <ul> <li>\\(\\epsilon\\) -greedy\uff1a\u4ee5 \\(1-\\epsilon\\) \u7684\u6982\u7387\u9009\u62e9\u6700\u4f18\u7684action\uff0c\u4ee5 \\(\\epsilon\\) \u7684\u6982\u7387\u968f\u673a\u9009\u62e9\u5176\u4ed6\u7684\u4e00\u4e2aaction\uff1b</li> <li>Boltzmann\uff1a \\(\\pi(a|s)=\\frac{1}{Z}e^{Q(s,a)/\\tau}\\) \u3002\u6ce8\u610f\u8fd9\u4e2a\u65b9\u6cd5\u76f8\u6bd4\u4e8e \\(\\epsilon\\) -greedy\u7684\u5408\u7406\u6027\uff1a<ul> <li>\u5982\u679c\u6709\u4e24\u4e2aQ\u5f88\u63a5\u8fd1\u7684action\uff0c\u90a3\u4e48\u5b83\u4eec\u88ab\u9009\u4e2d\u7684\u6982\u7387\u5e94\u8be5\u63a5\u8fd1\uff1b</li> <li>\u5982\u679c\u6709\u4e24\u4e2a\u90fd\u4e0d\u662f\u6700\u4f18\uff0c\u4f46\u4eceQ\u4e0a\u80fd\u660e\u786e\u5206\u6e05\u4e3b\u6b21\u7684action\uff0c\u90a3\u4e48\u5b83\u4eec\u88ab\u9009\u4e2d\u7684\u6982\u7387\u5e94\u8be5\u4e5f\u6709\u4e00\u5b9a\u5dee\u8ddd\u3002</li> </ul> </li> </ul>"},{"location":"Online%20CS%20Courses/CS285/chap05/#further_on_q_learning","title":"Further on Q learning","text":"<p>Side Note. \u8fd9\u91cc\u7684\u5185\u5bb9\u5b9e\u9645\u4e0a\u662f\u4ece\u7b2c\u516b\u8bb2\u642c\u8fc1\u8fc7\u6765\u7684\uff0c\u4f7f\u5f97\u5185\u5bb9\u66f4\u8fde\u8d2f\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap05/#issues","title":"Issues","text":"<p>\u5982\u679c\u4f60\u4ed4\u7ec6\u89c2\u5bdf\u4e0a\u9762vanilla Q learning\u7684\u7b97\u6cd5\uff0c\u90a3\u4e48\u5f88\u5927\u6982\u7387\u4f60\u4f1a\u89c9\u5f97\u8fd9\u4e2a\u7b97\u6cd5\u6709\u7740\u5de8\u5927\u7684\u4e0d\u5408\u7406\u4e4b\u5904\u3002</p> <p>\u9996\u5148\uff0cQ learning\u662f\u6bcf\u4e00\u6b21\u8bad\u7ec3\u7684\u6570\u636e\u90fd\u662f\u548c\u73af\u5883\u4ea4\u4e92\u7684\u6700\u65b0\u7ed3\u679c\uff08\u6362\u53e5\u8bdd\u8bf4\uff0c\u5728\u540c\u4e00\u6761trajectory\u4e0a\u9762\uff09\u3002\u8fd9\u5c31\u9020\u6210\u95ee\u9898\u4e86\uff1a\u5982\u679c\u8003\u8651Q learning\u7684\u8fde\u7eed\u51e0\u6b65gradient step\uff0c\u90a3\u4e48\u5c31\u4f1a\u53d1\u73b0\uff0c\u5b83\u7684\u8bad\u7ec3\u6570\u636e\u662f\u76f8\u5173\u7684\u3002\u8fd9\u4f1a\u5bfc\u81f4Q learning\u7684\u6536\u655b\u6027\u53d8\u5f97\u5f88\u96be\u4fdd\u8bc1\u3002</p> <p>\u4e0d\u4ec5\u5982\u6b64\uff0c\u6bcf\u4e00\u6b65\u7684gradient step\u90fd\u4f34\u968f\u7740\u4e00\u4e2avalue\u7684update\uff0c\u8fd9\u5c31\u4f7f\u5f97\u5b83\u7684\u8bad\u7ec3\u76ee\u6807\u662f\u201c\u79fb\u52a8\u7684\u201d\uff0c\u8fd9\u4e5f\u4f1a\u5bfc\u81f4\u6536\u655b\u6027\u7684\u95ee\u9898\u3002</p> <p>\u4e3e\u4e00\u4e2a\u4e0d\u6070\u5f53\u7684\u4f8b\u5b50\uff1a\u6bd4\u5982\u6211\u4eec\u8bad\u7ec3MNIST\u7684\u5206\u7c7b\u6a21\u578b\uff0c\u4e0a\u6765\u7ed9\u4f60\u4e00\u5f20\u56fe\u7247label\u662f1\uff1b\u63a5\u4e0b\u6765\uff0c\u53ea\u8ba9\u4f60\u505a\u4e00\u6b65gradient step\uff0c\u7136\u540e\u7acb\u523b\u628a\u8fd9\u5f20\u56fe\u7247\uff08\u6bd4\u5982\u8bf4\uff09\u52a0\u4e00\u70b9\u566a\u58f0\u6216\u8005\u626d\u8f6c\u4e00\u4e0b\uff08\u5f3a\u76f8\u5173\u6027\uff09\uff0c\u7136\u540e\u628alabel\u6539\u62102\u3002\u8fd9\u6837\u8981\u662f\u80fd\u6536\u655b\uff0c\u90a3\u5c31\u662f\u5947\u8ff9\u4e86\u3002</p> <p>\u56e0\u6b64\uff0c\u8fd9\u4e2a\u7b80\u5355\u7684\u7248\u672c\u7406\u8bba\u4e0a\u5b58\u5728\u5f88\u5927\u7684\u7f3a\u9677\u3002\u6211\u4eec\u9700\u8981\u60f3\u529e\u6cd5\u8ba9\u5b83work\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap05/#avoid_correlation","title":"Avoid Correlation","text":"<p>\u56de\u987e\u4e00\u4e0b\u7b2c\u516d\u8bb2\u7684Online actor-critic algorithm\uff0c\u6211\u4eec\u4e5f\u770b\u5230\u4e86\u7c7b\u4f3c\u7684\u95ee\u9898\uff1a\u5f53\u65f6\u662f\u6211\u4eec\u6bcf\u4e00\u6b21\u91c7\u96c6\u4e00\u7ec4\u6570\u636e\uff0c\u7136\u540eupdate value function approximater \u548c policy function\u3002</p> <p>\u56de\u987e\uff1aOnline actor-critic algorithm 1. \u7528\u5f53\u524d\u7684\u7b56\u7565 \\(\\pi_\\theta\\) \u8d70\u4e00\u6b65\uff0c\u8bb0\u4e3a \\(\\{s_t,a_t,s_{t+1},r=r(s_t,a_t)\\}\\) \uff1b 2. \u7528\u4e00\u6b65\u7684\u6570\u636e \\(\\{V_{\\phi}^{\\pi_\\theta}(s_t),V_{\\phi}^{\\pi_\\theta}(s_{t+1}),r\\}\\) \u8bad\u7ec3 \\(V^{\\pi_\\theta}_{\\phi}\\) \uff1b 3. \u8ba1\u7b97 \\(A^{\\pi_\\theta}(s_t,a_t)=\\gamma V_\\phi^{\\pi_\\theta}(s_{t+1})-V_\\phi^{\\pi_\\theta}(s_{t})+r(s_t,a_t)\\) 4. \u8ba1\u7b97 \\(\\nabla_\\theta J(\\theta)=\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)A^{\\pi_\\theta}(s_t,a_t)\\) 5. \u7528\u8fd9\u4e2a\u68af\u5ea6\u66f4\u65b0 \\(\\theta\\)</p> <p>\u6211\u4eec\u5f53\u65f6\u5c31\u63d0\u51fa\u4e86\u4e24\u79cd\u65b9\u6cd5\uff1a\u7b2c\u4e00\u79cd\u662f\u8fdb\u884c\u5e76\u884c\uff0c\u7528\u591a\u4e2a\u7ebf\u7a0b\u8fdb\u884c\u4ea4\u4e92\uff0c\u7136\u540e\u628a\u6570\u636e\u6536\u96c6\u5230\u4e00\u8d77\u4e00\u8d77update\uff1b\u7b2c\u4e8c\u79cd\u662f\u7528\u4e00\u4e2areplay buffer\uff0c\u628a\u6570\u636e\u5b58\u8d77\u6765\uff0c\u7136\u540e\u6bcf\u6b21\u4ecebuffer\u91cc\u9762sample\u4e00\u4e9b\u6570\u636e\u8fdb\u884cupdate\u3002</p> <p>\u5bf9\u4e8e\u5e76\u884c\u7684\u7248\u672c\uff0c\u548c\u4e4b\u524d\u4e00\u6837\uff0c\u4e3b\u8981\u7684\u96be\u70b9\u6765\u81ea\u4e8e\u5e76\u884c\u7684\u540c\u6b65\u95ee\u9898\uff0c\u8fd9\u91cc\u4e0d\u518d\u8be6\u7ec6\u4ecb\u7ecd\u3002\u6211\u4eec\u63a5\u4e0b\u6765\u4e3b\u8981\u8003\u8651replay buffer\u7684\u65b9\u6cd5\u3002\u6ce8\u610f\u73b0\u5728\u7684\u60c5\u51b5\u6bd4\u4e4b\u524dpolicy gradient\u597d\u5f88\u591a\uff0c\u56e0\u4e3a\u73b0\u5728\u7684\u7b97\u6cd5\u81ea\u52a8\u662foff-policy\u7684\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u65e0\u9700\u505a\u4efb\u4f55\u4fee\u6539\u3002</p> <p>\u7b80\u5355\u5730\u6982\u62ec\u52a0\u5165replay buffer\u540e\u7684\u7b97\u6cd5\u5982\u4e0b\uff1a</p> <p>Q learning with replay buffer</p> <p>\u91cd\u590d\uff1a</p> <ol> <li>\u4ece\u73af\u5883\u4e2d\u6839\u636e\u67d0\u79cdpolicy\u91c7\u6837\u4e00\u4e2a \\(\\{s,a,s',r\\}\\) \uff0c\u5e76\u52a0\u5165buffer \\(B\\) \uff1b</li> <li>\u91cd\u590d \\(K\\) \u6b21\uff1a<ol> <li>\u4ecebuffer \\(B\\) \u4e2dsample\u4e00\u4e2abatch\u7684\u6570\u636e \\(\\{s,a,s',r\\}\\) \uff1b</li> <li>\u5728\u8fd9\u4e2abatch\u4e0a\u8ba1\u7b97\u76ee\u6807Q value\uff0c\u5e76\u68af\u5ea6\u4e0b\u964d\u4e00\u6b21\u3002</li> </ol> </li> </ol> <p>\u8fd9\u91cc\u6ce8\u610f\u6211\u4eec\u8fd8\u662f\u53ea\u5bf9\u8fd9\u4e2abatch\u4e0b\u964d\u4e00\u6b21\uff0c\u5c31\u50cf\u666e\u901a\u7684DL\u4efb\u52a1\u91cc\uff0c\u6bcf\u7ec4batch\u4e5f\u53ea\u4e0b\u964d\u4e00\u6b21\u4e00\u6837\u3002\u8fd9\u6837\u53ef\u4ee5\u907f\u514d\u6a21\u578b\u5728\u4e00\u4e2abatch\u4e0a\u9762\u8fc7\u62df\u5408\u3002\u540c\u65f6\uff0c\u4e0d\u4ec5\u5982\u6b64\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u907f\u514d\u6a21\u578b\u628a\u7cbe\u529b\u6d6a\u8d39\u5728\u6211\u4eec\u4e0d\u5173\u5fc3\u7684Q values\u4e0a\u9762\uff08\u6bd4\u5982\u8bf4\uff0c\u82e5\u5e72Q value\u5206\u522b\u662f1,2,3\uff0c\u4f46\u6709\u4e00\u4e2a\u662f-10000000\u3002\u90a3\u4e48\u6211\u4eec\u5e76\u4e0d\u5e0c\u671b\u6a21\u578b\u8d39\u52b2\u5730\u5b66\u4f1a\u90a3\u4e2a-10000000\uff0c\u56e0\u4e3a\u5c31\u7b97\u5b83\u6709\u70b9\u8bef\u5dee\uff0c\u53d8\u6210\u4e86-5000000\uff0c\u4e5f\u4e0d\u4f1a\u5bf9\u6211\u4eec\u7684\u4efb\u52a1\u4ea7\u751f\u592a\u5927\u5f71\u54cd\uff09\u3002</p> <p>\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u89e3\u51b3\u4e86correlation\u7684\u95ee\u9898\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap05/#fixing_our_target","title":"Fixing our target","text":"<p>\u6211\u4eec\u521a\u624d\u8fd8\u63d0\u5230\u7b2c\u4e8c\u4e2a\u95ee\u9898\uff1a\u62df\u5408\u8fc7\u7a0b</p> \\[ \\arg\\min_\\phi \\left(r(s,a)+\\gamma\\max_{a'}Q^{\\pi}_\\phi(s',a')-Q^{\\pi}_\\phi(s,a)\\right)^2 \\] <p>\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u201c\u6253\u79fb\u52a8\u7684\u9776\u5b50\u201d\u7684\u95ee\u9898\uff1a\u4f60\u6bcf\u4e00\u6b21update\u4e4b\u540e\uff0c\u76ee\u6807\u91cc\u9762\u56e0\u4e3a\u5e26\u6709 \\(\\phi\\) \uff0c\u6240\u4ee5\u4e5f\u4f1a\u53d8\u5316\u3002</p> <p>\u8fd9\u4e2a\u95ee\u9898\u5b9e\u9645\u4e0a\u5f88\u597d\u89e3\u51b3\uff0c\u56e0\u4e3a\u6211\u4eec\u539f\u6765\u7684fitted Q iteration\u662f\u6ca1\u6709\u8fd9\u4e2a\u95ee\u9898\u7684\uff0c\u8fd8\u8bb0\u5f97\u6211\u4eec\u5f53\u65f6\u63d0\u5230\u4e86</p> <p>\u201c\u5e94\u8be5\u6ce8\u610f \\(K\\) \u548c \\(S\\) \u7684\u533a\u522b\uff1a \\(K\\) \u7684\u8fed\u4ee3\u4f5c\u4e3a\u5916\u5faa\u73af\uff0c\u4ee3\u8868\u7740\u4e4b\u524d\u201c\u52a8\u6001\u89c4\u5212\u201d\u65b9\u6cd5\u4e2dupdate \\(Q\\) \u7684\u65b9\u5f0f\uff0c\u800c \\(S\\) \u7684\u8fed\u4ee3\u4f5c\u4e3a\u5185\u5faa\u73af\uff0c\u662f\u4fdd\u8bc1\u795e\u7ecf\u7f51\u7edc\u80fd\u591f\u8ddf\u4e0aQ function update\u7684\u8fdb\u5ea6\u3002\u201d</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u539f\u5148\u7684gradient step\u662f\u4e3a\u4e86\u8ba9\u795e\u7ecf\u7f51\u7edc\u80fd\u591f\u8ddf\u4e0aQ function\u7684update\u8fdb\u5ea6\uff0c\u56e0\u6b64\u76ee\u6807\u662f\u786e\u5b9a\u7684\uff08\u6839\u636e\u4e0a\u4e00\u8f6e\u7684\u53c2\u6570\u51b3\u5b9a\u7684\uff0c\u800c\u5728\u68af\u5ea6\u4e0b\u964d\u7684\u8fc7\u7a0b\u4e2d\u4fdd\u6301\u4e0d\u53d8\uff09\u3002\u73b0\u5728\u6211\u4eec\u53ea\u9700\u8981\u628a\u8fd9\u4e2a\u601d\u8def\u642c\u5230Q learning\u4e0a\u9762\u5c31\u53ef\u4ee5\u4e86\u3002</p> <p>\u8fd9\u4e00\u601d\u60f3\u4e5f\u88ab\u79f0\u4e3aTarget Network\u3002\u5177\u4f53\u5730\uff0c\u6211\u4eec\u76f4\u63a5\u4fee\u6539\u76ee\u6807\u4e3a</p> \\[ \\arg\\min_\\phi \\left(r(s,a)+\\gamma\\max_{a'}Q^{\\pi}_{\\phi_0}(s',a')-Q^{\\pi}_\\phi(s,a)\\right)^2 \\] <p>\u5176\u4e2d \\(\\phi_0\\) \u4ee3\u8868\u7740\u65e7\u7684\u7f51\u7edc\u53c2\u6570\u3002\u8fd9\u6837\uff0c\u68af\u5ea6\u4e0b\u964d\u7684\u8fc7\u7a0b\u4e5f\u5c31\u6210\u4e3a\u4e86\u7ebf\u6027\u56de\u5f52\u7684\u68af\u5ea6\u4e0b\u964d\uff0c\u6211\u4eec\u5fc5\u7136\u53ef\u4ee5\u4fdd\u8bc1\u5b83\u6536\u655b\u3002\u5f53\u6536\u655b\u4e86\uff08\u6216\u8005\u7ecf\u8fc7\u4e86\u4e00\u5b9a\u7684\u6b65\u6570\uff09\uff0c\u6211\u4eec\u518d\u628a \\(\\phi_0\\) \u66f4\u65b0\u4e3a \\(\\phi\\) \uff0c\u7136\u540e\u7ee7\u7eed\u8bad\u7ec3\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap05/#summary_general_q_learning_algorithm","title":"Summary: General Q learning Algorithm","text":"<p>\u6211\u4eec\u53ef\u4ee5\u628a\u4e0a\u9762\u7684\u8ba8\u8bba\u603b\u7ed3\u4e3a\u4e00\u4e2a\u901a\u7528\u7684Q learning\u7b97\u6cd5\uff1b\u4e0d\u4ec5\u5982\u6b64\uff0c\u8fd9\u4e00\u7b97\u6cd5\u5982\u6b64\u7684general\uff0c\u4ee5\u81f3\u4e8e\u8fd8\u53ef\u4ee5\u5305\u542b\u524d\u9762\u4ecb\u7ecd\u7684fitted Q iteration\u7b97\u6cd5\u3002</p> <ul> <li>process 1: \u4ece\u73af\u5883\u4e2d\u6839\u636e\u67d0\u79cdpolicy\u91c7\u6837\u4e00\u4e2a \\(\\{s,a,s',r\\}\\) \uff0c\u5e76\u52a0\u5165buffer \\(B\\) \u3002\u8bb0\u4e3a<code>InteractWithEnv()</code>\uff1b</li> <li>process 2: \u6839\u636ereplay buffer\u4e2d\u7684\u6570\u636e\u548c\u7f51\u7edc \\(Q_{\\phi_0}\\) \u6765\u8ba1\u7b97\u82e5\u5e72Q value\u7684target\u3002\u5176\u4e2d \\(\\phi_0\\) \u4ee3\u8868\u67d0\u65f6\u523b\u7684\u7f51\u7edc\u53c2\u6570\uff0c\u4e0d\u4e00\u5b9a\u662f\u6700\u65b0\u7684\u3002\u8bb0\u4e3a<code>GetTargetFromBuffer()</code>\uff1b</li> <li>process 3: \u6839\u636etarget\u8fdb\u884cregression\uff0c\u66f4\u65b0 \\(\\phi\\) \u3002\u8bb0\u4e3a<code>GradStep()</code>\uff1b</li> <li>process 4: \u66f4\u65b0process 2\u4f7f\u7528\u7684\u53c2\u6570\uff1a \\(\\phi_0\\leftarrow \\phi\\) \u3002\u76f4\u63a5\u8bb0\u4e3a<code>phi_0=phi</code></li> </ul> <p>\u6211\u4eec\u5176\u5b9e\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u4e09\u4e2a\u8fc7\u7a0b\u5b9e\u9645\u4e0a\u662f\u57fa\u672c\u72ec\u7acb\u7684\uff0c\u800c\u5305\u542b\u4e86\u524d\u9762\u5404\u79cdQ-function based method\u7684\u6838\u5fc3\u90e8\u5206\u3002\u6bd4\u5982\u8bf4\uff0cfitted Q iteration\u53ef\u4ee5\u53d9\u8ff0\u4e3a\uff1a</p> <p>Fitted Q Iteration In new language</p> <ul> <li>Buffer size \u6bd4\u8f83\u5c0f\uff0c\u6bcf\u4e00\u6b21\u91c7\u6837\u90fd\u4f1a\u5b8c\u5168\u66f4\u65b0buffer\uff1b</li> <li>\u4f2a\u4ee3\u7801\u5982\u4e0b\uff1a</li> </ul> <pre><code>while True:\n    InteractWithEnv()\n    for _ in range(K):\n        GetTargetFromBuffer()\n        for _ in range(S):\n            GradStep()\n        phi_0=phi\n</code></pre> <p>\u6211\u4eec\u524d\u9762\u6700\u7b80\u5355\u7684Q learning\u7b97\u6cd5\u4e5f\u53ef\u4ee5\u53d9\u8ff0\u4e3a\uff1a - Buffer size \u4e3a1\uff1b - \u4f2a\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>while True:\n    InteractWithEnv()\n    GetTargetFromBuffer()\n    GradStep()\n    phi_0=phi\n</code></pre> <p>\u6700\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u524d\u9762\u7684\u79cd\u79cd\u6539\u8fdb\u7ed3\u5408\u8d77\u6765\uff0c\u5f97\u5230\u8457\u540d\u7684DQN\u7b97\u6cd5\uff0c\u7528\u8fd9\u6837\u7684\u8bed\u8a00\u63cf\u8ff0\uff1a</p> <p>DQN</p> <ul> <li>buffer size\u53ef\u4ee5\u81ea\u7531\u8bbe\u7f6e\uff1b</li> <li>\u4f2a\u4ee3\u7801\u5982\u4e0b\uff1a</li> </ul> <pre><code>while True:\n    for _ in range(N):\n        InteractWithEnv()\n        for _ in range(K):\n            GetTargetFromBuffer()\n            GradStep()\n    phi_0=phi\n</code></pre> <p>\u6211\u4eec\u53ef\u4ee5\u76f4\u89c2\u5730\u7406\u89e3\u8fd9\u4e2a\u7b97\u6cd5\u3002\u7528DL\u7684\u8bed\u8a00\u6765\u53d9\u8ff0\uff0c\u5c31\u662f\uff1a\u6bcf\u4e00\u4e2a \\(\\phi_0\\) \u5bf9\u5e94\u7740\u4e00\u4e2a\u201cregression problem\u201d\uff1b\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8fd9\u6837\u7684problem\uff0c\u6211\u4eec\u8bad\u7ec3 \\(N\\) \u4e2aepoch\uff1b\u5bf9\u4e8e\u6bcf\u4e00\u4e2aepoch\uff0c\u6211\u4eec\u4ecebuffer\u91cc\u9762\u53d6\u51fa \\(K\\) \u4e2abatch\uff0c\u5c31\u50cf\u4ecetrainloader\u53d6\u51fa\u6570\u636e\u90a3\u6837\uff1b\u6700\u540e\uff0cinteract with env\u76f8\u5f53\u4e8e\u6211\u4eec\u7684\u6570\u636e\u96c6\u5728\u4e0d\u65ad\u5730\u66f4\u65b0\u3002</p> <pre><code>while True:\n    problem = NewRegressionProblem() # a regression problem based on phi_0 and the replay buffer\n    for epoch in range(N):\n        for x,y in problem.trainloader: # trainloader has length K\n            optimizer.zero_grad()\n            loss = calc_loss()\n            loss.backward()\n            optimizer.step()\n        problem.add_data_from_env()\n</code></pre> <p>\u5bb9\u6613\u770b\u51fa\uff0c \\(K\\) \u8d8a\u5927\u8fd9\u4e2a\u56de\u5f52\u7684\u8fc7\u7a0b\u8d8a\u7a33\u5b9a\u3002\u4f46\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u4e00\u822c\u53d6 \\(K=1\\) \uff0c\u8fd9\u6837\u4f7f\u5f97\u7b97\u6cd5\u66f4\u52a0online\u4e00\u4e9b\u3002</p> <p>\u53e6\u5916\uff0c\u5bb9\u6613\u770b\u5230\uff0c \\(K=1\\) \u7684\u65f6\u5019\u8fd9\u4e2a\u7b97\u6cd5\u6bd4\u8d77\u524d\u9762\u6700\u5f00\u59cb\u63d0\u51fa\u7684Q learning with replay buffer\u6765\u7684\u4f18\u52bf\u5c31\u662f \\(\\phi_0\\) \u7684update\u6162\u4e86 \\(N\\) \u500d\u3002\u8fd9\u6837\u7684\u505a\u6cd5\u624d\u4fdd\u8bc1\u4e86\u6211\u4eec\u7684\u7f51\u7edc\u80fd\u591f\u8ddf\u4e0aQ function\u7684update\u8fdb\u5ea6\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap05/#modification_alternative_target_network","title":"Modification: Alternative Target network","text":"<p>\u5728\u524d\u9762\u7684general algorithm\u7684\u57fa\u7840\u4e0a\uff0c\u8fd8\u6709\u4e00\u4e2a\u53ef\u80fd\u7684\u4fee\u6539\u9700\u8981\u88ab\u4ecb\u7ecd\u3002\u6211\u4eec\u53d1\u73b0\uff0c\u5927\u90e8\u5206\u65f6\u5019 \\(\\phi_0\\) \u90fd\u662f\u8001\u7684\u6570\u503c\uff0c\u4f46\u67d0\u4e00\u6b21\u7a81\u7136\u53d8\u6210\u4e86\u65b0\u7684\u6570\u503c\u3002\u6362\u53e5\u8bdd\u8bf4\uff0ctarget\u957f\u671f\u4fdd\u6301\u4e0d\u53d8\uff0c\u4f46\u5076\u7136\u7a81\u7136\u53d8\u5316\u4e00\u4e0b\u3002\u8fd9\u6837\u7684\u7a81\u53d8\u53ef\u80fd\u5f71\u54cd\u8bad\u7ec3\u7684\u6548\u679c\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\uff0c\u63d0\u51fa\u4e86\u4e00\u79cd\u65b9\u6cd5\uff0c\u53ef\u4ee5\u4f7f\u5f97\u53c2\u6570\u9010\u6e10\u7684\u53d8\u5316\uff0c\u540c\u65f6\u4f9d\u7136\u907f\u514dmoving target\u3002\u7c7b\u4f3c\u4e8ePolyak averaging\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a\u6ed1\u52a8\u5e73\u5747\u6765\u4ee3\u66ff \\(\\phi_0\\) \uff1a</p> \\[ \\phi_0 \\leftarrow \\alpha \\phi_0 + (1-\\alpha)\\phi \\] <p>\u5176\u4e2d \\(\\alpha\\approx 0.999\\) \u3002\u8fd9\u6837\u7684\u64cd\u4f5c\u4e5f\u57fa\u672c\u907f\u514d\u4e86moving target\uff1atarget\u5728\u79fb\u52a8\uff0c\u4f46\u901f\u5ea6\u5341\u5206\u7684\u7f13\u6162\u3002\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u539f\u6765\u7684target\u662f\u957f\u65f6\u95f4\u4e0d\u53d8\uff0c\u4f46\u662f\u7a81\u7136\u53d8\u5316\u3002</p> <p>\u8fd9\u4e2a\u4fee\u6539\u5728\u5b9e\u9a8c\u4e2d\u53ef\u80fd\u8d77\u5230\u4e00\u5b9a\u7684\u4f5c\u7528\uff0c\u4f46\u7406\u8bba\u4e0aQ-learning\u7684\u6700\u5173\u952e\u7684\u63d0\u5347\u8fd8\u662f\u524d\u9762\u7684DQN\u7b97\u6cd5\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap05/#theoretical_analysis","title":"Theoretical Analysis","text":""},{"location":"Online%20CS%20Courses/CS285/chap05/#optimal_policy","title":"Optimal Policy","text":"<p>\u6211\u4eec\u628aQ iteration\u7684loss\u5199\u51fa\u6765\uff1a</p> \\[ L=\\mathbb{E}_{(s,a)}\\left[\\left(Q^\\pi(s_t,a_t)-r(s_t,a_t)-\\gamma \\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}\\left[\\max_{a_{t+1}}Q^{\\pi}(s_{t+1},a_{t+1})\\right]\\right)^2\\right] \\] <p>\uff08\u8fd9\u91cc\u5148\u5ffd\u7565\u4e86fitting\u7684loss\uff09\u6211\u4eec\u5c31\u53ef\u4ee5\u6ce8\u610f\u5230\u7406\u8bba\u6700\u4f18\u7684\u7b56\u7565 \\(\\pi_\\star\\) \u5fc5\u7136\u6ee1\u8db3 \\(L=0\\) \u3002\u8fd9\u7ed9\u4e86\u6211\u4eec\u5f88\u91cd\u8981\u7684\u5e0c\u671b\uff1a\u7406\u8bba\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8bad\u7ec3\u4e00\u4e2aQ function\u6765\u627e\u5230\u6700\u4f18\u7684policy\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap05/#convergence","title":"Convergence","text":"<p>\u4f46\u662f\u5b9e\u9645\u4e0a\u5fc5\u987b\u8003\u8651\u7684\u95ee\u9898\u5c31\u662fconvergence\u3002\u6211\u4eec\u53ef\u4ee5\u5f15\u5165Bellman operator \\(\\mathcal{B}\\) \u6765\u7814\u7a76\u6536\u655b\u6027\u3002</p> <p>\u6211\u4eec\u8fd8\u662f\u4ee5Q iteration\u4e3a\u4f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u628aQ iteration\u7684\u66f4\u65b0\u5199\u6210\u4e00\u4e2aoperator\u7684\u5f62\u5f0f\uff1a</p> \\[ Q\\leftarrow \\mathcal{B}Q \\] <p>\u5176\u4e2d</p> \\[ \\mathcal{B}Q=r+\\gamma T\\max_{a}Q \\] <p>\u5176\u4e2d \\(T\\) \u662f\u7b2c\u56db\u8bb2\u63d0\u5230\u7684transition matrix\uff0c\u628a \\(Q\\) \u7684 \\(s_{t+1}\\) \u7ef4\u5ea6transform\u5230 \\((s_t,a_t)\\) \u4e24\u4e2a\u7ef4\u5ea6\u3002\u5173\u952e\u5728\u4e8e\uff0c \\(\\mathcal{B}\\) \u8fd9\u4e2aoperator\u5177\u6709\u4e00\u5b9a\u7684\u6027\u8d28\uff1a</p> \\[ |\\mathcal{B}(Q_1-Q_2)|_\\infty=\\gamma |T\\max_{a}(Q_1-Q_2)|_\\infty\\leq \\gamma|Q_1-Q_2|_\\infty \\] <p>\u8fd9\u91cc\u7528\u5230\u4e86 \\(T\\) \u7684\u5f52\u4e00\u6027\u8d28\uff0c\u5176\u4e2d \\(|\\cdot|_\\infty\\) \u4ee3\u8868\u6700\u5927\u5206\u91cf\uff08\u8fd9\u91cc\u53ea\u662f\u4e00\u4e2aproof sketch\uff0c\u5177\u4f53\u7684\u8bc1\u660e\u7ec6\u8282\u6ca1\u6709\u663e\u793a\uff09\u3002\u8fd9\u4e00\u70b9\u7684\u4f5c\u7528\u5728\u4e8e\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u77e5 \\(\\mathcal{B}\\) \u7684\u4e0d\u52a8\u70b9\u662f\u552f\u4e00\u7684\uff0c\u5e76\u4e14\u4efb\u4f55\u521d\u59cb\u7684 \\(Q\\) \u90fd\u4f1a\u6536\u655b\u5230\u8fd9\u4e2a\u4e0d\u52a8\u70b9\u3002</p> <p>\u4f46\u662f\u4e8b\u60c5\u5e76\u975e\u5982\u6b64\u7b80\u5355\u2014\u2014\u6211\u4eec\u5b9e\u9645\u5e94\u7528\u4e2d\u9700\u8981\u8fdb\u884cfitting\u3002\u8003\u8651\u5230\u6211\u4eec\u7684\u795e\u7ecf\u7f51\u7edc\u90fd\u53ea\u5177\u6709\u6709\u9650\u7684representation power\uff0c\u5373\u4f7f\u4e0d\u65ad\u68af\u5ea6\u4e0b\u964d\uff0c\u6700\u7ec8\u4e5f\u53ea\u80fd\u7559\u4e0b\u6709\u9650\u7684\u8bef\u5dee\u3002\u56e0\u6b64\uff0c\u7528\u6a21\u578b\u62df\u5408\u8fd9\u4e00\u6b65\u76f8\u5f53\u4e8e\u505a\u4e00\u4e2a\u5411\u6a21\u578b\u7684\u503c\u57df\u7a7a\u95f4\u7684\u6295\u5f71\uff1a</p> \\[ Q\\leftarrow \\Pi Q \\] <p>\u8fd9\u6837\uff0c\u6574\u4e2a\u7684\u8fc7\u7a0b\u5c31\u6210\u4e3a\u4e86 \\(\\Pi \\mathcal{B}\\Pi \\mathcal{B}\\cdots Q\\) \u3002\u76f4\u89c2\u4e0a\uff0c\u8fd9\u4e2a\u6295\u5f71\u5f88\u53ef\u80fd\u4f1a\u5e72\u6270\u6536\u655b\u3002\u5b9e\u9645\u4e0a\u4e5f\u786e\u5b9e\u5982\u6b64\u2014\u2014\u7406\u8bba\u4e0a\u5df2\u7ecf\u8bc1\u660e\uff0cQ learning\u662f\u4e0d\u4fdd\u8bc1\u6536\u655b\u7684\u3002</p> <p>\u540c\u6837\uff0c\u7528\u8fd9\u6837\u7684\u601d\u8def\uff0c\u8fd8\u53ef\u4ee5\u8bc1\u660efitting value iteration\uff0c\u4ee5\u81f3\u4e8e\u7b2c\u516d\u8bb2\u4ecb\u7ecd\u7684actor-critic\u4e2dcritic\u7684\u8bad\u7ec3\u90fd\u4e0d\u80fd\u6536\u655b\u3002\u8fd9\u65e0\u7591\u662f\u5f88\u7cdf\u7cd5\u7684\u6d88\u606f\uff0c\u4f46\u597d\u5728\u4eba\u4eec\u5e76\u4e0d\u7279\u522b\u5728\u610f\u2014\u2014\u53cd\u6b63\u8fd9\u4e9b\u7b97\u6cd5\u8dd1\u8d77\u6765\u90fd\u4e0d\u9519\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap05/#residual_gradient","title":"Residual Gradient","text":"<p>\u4e00\u4e2a\u5f88\u5947\u602a\u7684\u601d\u8def\u662f\uff0c\u8003\u8651\u6211\u4eec\u7684loss</p> \\[ L(s,a)=\\left(Q^\\pi_\\phi(s_t,a_t)-r(s_t,a_t)-\\gamma \\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}\\left[\\max_{a_{t+1}}\\text{SG}\\left[Q^{\\pi}_\\phi(s_{t+1},a_{t+1})\\right]\\right]\\right)^2 \\] <p>\u6211\u4eec\u4f1a\u53d1\u73b0\u5b83\u57fa\u672c\u4e0a\u5c31\u662f\u4e00\u4e2alinear regression\u7684\u5f62\u5f0f\u3002\u4e3a\u4ec0\u4e48\u4e0d\u6536\u655b\u5462\uff1f\u4e00\u5b9a\u662f\u56e0\u4e3astop gradient\u628a\u539f\u5148\u7684\u540c\u65f6\u4f18\u5316\u53d8\u4e3a\u4e86\u4ea4\u66ff\u4f18\u5316\u3002\u56e0\u6b64\uff0cresidual gradient\u8003\u8651\u53bb\u9664stop gradient\uff0c\u76f4\u63a5\u8bd5\u7740\u4f18\u5316\u8fd9\u4e2a\u65b0\u7684loss\u3002</p> <p>\u7406\u8bba\u4e0a\u542c\u8d77\u6765\u5f88\u5438\u5f15\u4eba\uff0c\u56e0\u4e3a\u6839\u636elinear regression\u7684\u7406\u8bba\uff0c\u5b83\u4e00\u5b9a\u80fd\u6536\u655b\uff1b\u4f46\u5b9e\u9645\u4e0a\uff0c\u5b83\u751a\u81f3\u8dd1\u5f97\u4e0d\u5982\u4e0d\u6536\u655b\u7684Q learning\u3002\u5509\uff0c\u53ef\u80fd\u4f60\u4e5f\u53d1\u73b0\u4e86\uff1a\u7406\u8bba\u4e0a\u7684\u4e1c\u897f\uff0c\u9a97\u9a97\u54e5\u4eec\u5f97\u4e86\uff0c\u522b\u628a\u81ea\u5df1\u4e5f\u7ed9\u9a97\u4e86\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap05/#reference_papers","title":"Reference Papers","text":"<ol> <li>Soft Actor-Critic: Off-Policy Maximum Entropy Deep Reinforcement Learning with a Stochastic Actor\uff08\u5341\u5206\u8457\u540d\u7684\u5bf9Q learning\u6216\u8005actor critic\u7684\u6539\u8fdb\uff0c\u5f3a\u70c8\u5efa\u8bae\u4e86\u89e3\uff09</li> <li>Human-level control through deep reinforcement learning\uff08DQN for games\uff09</li> <li>Deep reinforcement learning with double Q-learning\uff08Double Q-learning\uff09</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap06/","title":"Notice","text":"<p>\u4e3a\u4e86\u524d\u540e\u7684\u8fde\u8d2f\u6027\uff0c\u672c\u8bb2\u7684\u4e00\u90e8\u5206\u5185\u5bb9\uff08\u5305\u62ecQ-learning\u7684\u6539\u8fdb\u7b49\uff09\u88ab\u642c\u8fc1\u5230\u4e86\u524d\u9762\u4e00\u8bb2\uff08\u7b2c\u4e03\u8bb2\uff09\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap06/#advanced_q-learning","title":"Advanced Q-Learning","text":"<p>\u524d\u9762\u4ecb\u7ecd\u7684DQN\u770b\u8d77\u6765\u5df2\u7ecf\u89e3\u51b3\u4e86\u5927\u90e8\u5206\u7b97\u6cd5\u4e2d\u7684\u4e0d\u5408\u7406\u4e4b\u5904\u6216\u53ef\u80fd\u7684\u95ee\u9898\u3002\u5b9e\u9645\u4e0a\uff0cDQN\u4e5f\u6709\u6781\u597d\u7684\u5e94\u7528\u6548\u679c\u3002\u4f46\u662f\u5b83\u8fd8\u6709\u4e00\u5b9a\u7684\u6539\u8fdb\u7a7a\u95f4\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap06/#double_q-learning","title":"Double Q-learning","text":""},{"location":"Online%20CS%20Courses/CS285/chap06/#over-confidenence_of_q_values","title":"Over-confidenence of Q values","text":"<p>\u5927\u91cf\u7684\u5b9e\u9a8c\u7ed3\u679c\u8868\u660e\uff0c\u6211\u4eec\u7684\u6a21\u578b\u5b66\u4e60\u51fa\u7684Q\u503c\u5f80\u5f80\u5728\u591a\u6b21\u8bad\u7ec3\u540e\u9ad8\u4e8e\u5b9a\u4e49\u503c</p> \\[ Q(s_t,a_t)=r(s_t,a_t)+\\mathbb{E}_{s_{t+1},a_{t+1},\\cdots}\\left[\\sum_{t'&gt;t}\\gamma^{t'-t} r(s_{t'},a_{t'})\\right] \\] <p>\u8fd9\u770b\u4f3c\u5f88\u5947\u602a\uff0c\u4f46\u56e0\u4e3a\u5b83\u662f\u7cfb\u7edf\u8bef\u5dee\u800c\u4e0d\u662f\u968f\u673a\u8bef\u5dee\uff0c\u6240\u4ee5\u6211\u4eec\u5fc5\u987b\u8981\u7ed9\u51fa\u4e00\u4e2a\u89e3\u91ca\u3002\u5b9e\u9645\u4e0a\uff0c\u4e5f\u76f8\u5bf9\u76f4\u63a5\u3002\u6211\u4eec\u4ece\u6a21\u578b\u8fed\u4ee3\u7684\u8868\u8fbe\u5f0f\u51fa\u53d1</p> \\[ Q_\\phi(s_t,a_t)\\leftarrow r(s_t,a_t)+\\gamma\\max_{a'}Q_\\phi(s_{t+1},a') \\] <p>\u9996\u5148\u6ce8\u610f\u5230\u4ee5\u4e0b\u7684\u4e8b\u5b9e\uff1a</p> \\[ \\mathbb{E}[\\max\\{x_1,x_2,\\cdots,x_n\\}]\\ge \\max\\{\\mathbb{E}[x_1],\\mathbb{E}[x_2],\\cdots,\\mathbb{E}[x_n]\\} \\] <p>\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u505a\u5982\u4e0b\u7684\u60f3\u8c61\uff1a\u5047\u8bbe\u5f00\u59cb\u7684\u65f6\u5019 \\(Q_\\phi\\) \u503c\u63a5\u8fd1\u4e8e\u771f\u503c\uff0c\u4f46\u5177\u6709\u4e00\u4e2a\u968f\u673a\u8bef\u5dee \\(\\epsilon(s,a)\\) \uff0c\u6ee1\u8db3\u5176\u5bf9 \\((s,a)\\) \u7684\u671f\u671b\u4e3a\u96f6\uff1a</p> \\[ Q_\\phi(s,a)=Q^\\star (s,a)+\\epsilon(s,a) \\] <p>\u90a3\u4e48\uff0c\u6211\u4eec\u5c31\u4f1a\u6709</p> \\[ \\max_{a}Q_\\phi(s,a)=\\max_{a}Q^\\star(s,a)+\\bar{\\epsilon}(s) \\] <p>\u5e76\u4e14 \\(\\mathbb{E}[\\bar{\\epsilon}(s)]\\ge 0\\) \u3002\u8fd9\u6837\uff0c\u5728\u4e0b\u4e00\u6b21\u8fed\u4ee3\u7684\u65f6\u5019\uff0c\u4f4d\u4e8e\u7b49\u5f0f\u5de6\u8fb9\u7684 \\(Q_\\phi(s_t,a_t)\\) \u5c31\u4f1a\u6709\u4e00\u4e2a\u671f\u5f85\u503c\u975e\u8d1f\u7684\u8bef\u5dee\u3002\u8fd9\u6837\uff0c\u53cd\u590d\u7684\u8fed\u4ee3\uff0c\u6211\u4eec\u7684 \\(Q\\) \u5c31\u4f1a\u504f\u79bb\u5730\u8d8a\u6765\u8d8a\u5927\u3002</p> <p>\u8fd9\u4e00\u95ee\u9898\u5b9e\u9645\u4e0a\u662f\u4e0a\u4e00\u6b21\u4ecb\u7ecd\u7684DQN\u5728\u5b9e\u8df5\u4e2d\u7684\u4e3b\u8981\u95ee\u9898\u3002\u4e3a\u4e86\u89e3\u51b3\u5b83\uff0c\u5f15\u5165\u4e86Double Q-learning\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap06/#double_q-learning_1","title":"Double Q-learning","text":"<p>\u5982\u4f55\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u5462\uff1f\u4e00\u4e2a\u6bd4\u8f83\u5173\u952e\u7684\u6b65\u9aa4\u662f\u60f3\u6e05\u695a\u4e3a\u4ec0\u4e48 $$ \\mathbb{E}[\\max{x_1,x_2,\\cdots,x_n}]\\ge \\max{\\mathbb{E}[x_1],\\mathbb{E}[x_2],\\cdots,\\mathbb{E}[x_n]} \\(\u3002\u6211\u4eec\u4f1a\u53d1\u73b0\uff0c\u5b9e\u9645\u4e0a\u662f\u56e0\u4e3a\u5de6\u8fb9\u6bcf\u4e00\u4e2a\u70b9\u53d6\u51faargmax\u518devaluate\uff0c\u8fd9\u5c31\u4f1a\u5bfc\u81f4\u6709\u4e00\u4e2a\u504f\u5927\u7684bias\u3002\u540c\u6837\u5730\uff0c\u5e94\u7528\u5230\u6211\u4eec\u7684\u573a\u666f\u91cc\uff0c\u5c31\u662f\\)</p> \\[ \\max_{a}Q(s,a)=Q(s,\\arg\\max_a Q(s,a)) \\] <p>\u53ef\u4ee5\u770b\u5230\u7b2c\u4e8c\u4e2a\u8868\u8fbe\u5f0f\u51fa\u73b0\u4e86\u4e24\u4e2a \\(Q\\) \uff1b\u4e8c\u8005\u5b9e\u73b0\u4e86\u7c7b\u4f3c\u201c\u6b63\u53cd\u9988\u201d\u7684\u5173\u7cfb\uff0c\u5bfc\u81f4\u8bef\u5dee\u603b\u662f\u504f\u5927\u3002\u4e00\u4e2a\u81ea\u7136\u7684\u60f3\u6cd5\u5c31\u662f\u6211\u4eec\u5f15\u5165\u4e24\u4e2a\u7f51\u7edc\uff1a</p> \\[ Q^{A}_\\phi(s_t,a_t)\\leftarrow r(s_t,a_t)+\\gamma Q^B_\\phi(s_{t+1},\\arg\\max_a Q^A_\\phi(s_{t+1},a)) \\] \\[ Q^{B}_\\phi(s_t,a_t)\\leftarrow r(s_t,a_t)+\\gamma Q^A_\\phi(s_{t+1},\\arg\\max_a Q^B_\\phi(s_{t+1},a)) \\] <p>\u8fd9\u6837\u5c31\u907f\u514d\u4e86\u201c\u6b63\u53cd\u9988\u201d\u7684\u95ee\u9898\u3002\u66f4\u8fdb\u4e00\u6b65\u5730\uff0c\u6211\u4eec\u53d1\u73b0\u8fd9\u4e2a\u65b9\u6cd5\u751a\u81f3\u53ef\u4ee5\u5b9e\u73b0\u201c\u8d1f\u53cd\u9988\u201d\uff0c\u4e5f\u5c31\u662f\u201c\u81ea\u5df1\u7ed9\u81ea\u5df1\u7ea0\u9519\u201d\uff1a\u5982\u679c\u5bf9\u4e8e\u67d0\u4e00\u4e2a \\(a_t\\) \uff0c \\(Q^A\\) \u7684\u8ba1\u7b97\u504f\u5927\u800c \\(Q^B\\) \u7684\u8ba1\u7b97\u76f8\u5bf9\u51c6\u786e\uff0c\u90a3\u4e48 \\(Q^A\\) \u5728\u66f4\u65b0\u7684\u65f6\u5019\u5c31\u4f1a\u88ab \\(Q^B\\) \u7ea0\u6b63\uff08\u6ce8\u610f \\(Q^A\\) \u672c\u8eab\u7684\u6570\u503c\u5728\u7b2c\u4e00\u4e2aupdate\u4e2d\u5e76\u4e0d\u91cd\u8981\uff0c\u56e0\u4e3a\u53ea\u662f\u6c42argmax\uff09\uff1b\u53e6\u4e00\u65b9\u9762\uff0c\u5bf9\u4e8e \\(Q^B\\) \u7684\u66f4\u65b0\u800c\u8a00\uff0c\u5176\u5e76\u4e0d\u4f1a\u5b8c\u5168\u53d7\u5230 \\(Q^A\\) \u7684\u5f71\u54cd\uff0c\u56e0\u4e3a\u5728\u7b2c\u4e8c\u4e2aupdate\u4e2d\uff0c\u53d6\u54ea\u4e2aaction\u662f \\(Q^B\\) \u51b3\u5b9a\u7684\uff0c\u4ece\u800c\u53ef\u4ee5\u5927\u6982\u7387\u907f\u5f00 \\(Q^A\\) \u7684\u9519\u8bef\u70b9\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u907f\u514d\u4e86\u8fc7\u5ea6\u4f30\u8ba1\u7684\u95ee\u9898\u3002</p> <p>\u5f53\u7136\uff0c\u5728\u5b9e\u8df5\u4e0a\uff0c\u6211\u4eec\u5e76\u4e0d\u4f1a\u591a\u53bb\u8bad\u7ec3\u4e00\u4e2a\u7f51\u7edc\uff08\u8bad\u7ec3\u4e24\u4e2a\u7f51\u7edc\u5e72\u4e00\u4ef6\u4e8b\uff0c\u542c\u8d77\u6765\u5c31\u5f88\u9006\u5929\uff09\u3002\u76f8\u53cd\uff0c\u6211\u4eec\u521a\u597d\u5229\u7528\u4e24\u7ec4\u53c2\u6570 \\(\\phi_0\\) \uff08\u8001\u7684\u53c2\u6570\uff09\u548c \\(\\phi\\) \uff0c\u5206\u522b\u5bf9\u5e94 \\(Q^A\\) \u548c \\(Q^B\\) \u3002\u5f53\u7136\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u7a33\u5b9a\u6027\uff0c\u6211\u4eec\u5c31\u4e0d\u5bf9 \\(\\phi_0\\) \u66f4\u65b0\u4e86\uff0c\u4ece\u800c\u53ea\u505a</p> \\[ Q_\\phi(s_t,a_t)\\leftarrow r(s_t,a_t)+\\gamma Q_{\\phi_0}(s_{t+1},\\arg \\max Q_\\phi(s_{t+1},a)) \\] <p>\uff08\u867d\u7136\u7406\u8bba\u4e0a\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u4e0d\u662f\u5b8c\u6574\u7684\uff1b\u4f46\u5b9e\u9a8c\u4e0a\u8dd1\u7684\u8fd8\u4e0d\u9519\uff0c\u6240\u4ee5\u5c31\u4e0d\u7ba1\u4e86\uff01\uff09\u8fd9\u6837\uff0c\u518d\u7ed3\u5408fitting\u7684\u90e8\u5206\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5199\u51fa $$ [Q(s_t,a_t)]^{\\star}=r(s_t,a_t)+\\gamma Q_{\\phi_0}(s_{t+1},\\arg \\max Q_{\\textcolor{red}{\\phi}}(s_{t+1},a)) $$</p> \\[ \\phi\\leftarrow \\arg\\min_{\\phi}\\left([Q(s_t,a_t)]^{\\star}-Q_\\phi(s_t,a_t)\\right)^2 \\] <p>\u5bf9\u6bd4\u539f\u6765\u7684\u7b97\u6cd5\uff0c\u53ef\u4ee5\u770b\u5230\u8fd9\u91cc\u7684\u552f\u4e00\u6539\u52a8\u5c31\u662f\uff0c\u8ba1\u7b97argmax\u5e76\u4e0d\u4f7f\u7528 \\(\\phi_0\\) \uff0c\u800c\u662f\u4f7f\u7528 \\(\\phi\\) \u3002\u53ea\u9700\u8981\u5728\u539f\u6765\u7684\u4ee3\u7801\u91cc\u7a0d\u5fae\u4fee\u6539\u4e00\u70b9\u70b9\uff0c\u5c31\u7acb\u523b\u4f1a\u6709\u5de8\u5927\u7684\u63d0\u5347\u3002Double Q-learning\u7684\u529b\u91cf\u5c31\u5728\u8fd9\u91cc\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap06/#multi-step_returns","title":"Multi-step returns","text":"<p>\u7c7b\u4f3cpolicy gradient\uff0c\u6211\u4eec\u8fd9\u91cc\u4e5f\u9047\u5230\u4e86\u91c7\u6837\u7684variance\u548c\u5f15\u5165\u6a21\u578b\u7684bias\u7684tradeoff\u3002\u56e0\u6b64\u540c\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u591a\u6b65\u7684\u529b\u91cf\uff0c\u51cf\u5c11\u6211\u4eec\u7684\u6a21\u578b\u5e26\u6765\u7684bias\u3002</p> \\[ [Q(s_t,a_t)]^{\\star}=\\mathbb{E}_{s_{t+1},a_{t+1},\\cdots}\\left[\\sum_{t'=t}^{t+N-1}\\gamma^{t'-t}r(s_{t'},a_{t'})\\right]+\\gamma^N \\max_a Q_{\\phi}(s_{t+N},a) \\] <p>\u4f46\u5fc5\u987b\u6ce8\u610f\uff0c\u5728 \\(N&gt;1\\) \u7684\u65f6\u5019\uff0c\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u5c31\u53d8\u6210on-policy\u7684\u4e86\uff01\uff08\u56e0\u4e3a \\(a_{t+1}\\) \u4ece \\(s_{t+1}\\) \u4e2d\u91c7\u6837\u7684\u65b9\u5f0f\u662f\u7531 \\(\\pi\\) \u51b3\u5b9a\u7684\uff09\u4f46\u5982\u679c\u8981on-policy\u5730\u8bad\u7ec3\uff0c\u53c8\u548c\u4e4b\u524d\u7684replay buffer\u7684\u4f18\u5316\u51b2\u7a81\u4e86\u3002\u8fd9\u65f6\u4e5f\u6ca1\u6709\u4ec0\u4e48\u529e\u6cd5\u80fd\u89e3\u51b3\uff0c\u53ea\u80fd\u518d\u6b21\u6446\u70c2\u2014\u2014\u5f3a\u884c\u628a\u8fd9\u4e2aon-policy\u7684\u7b97\u6cd5\u5f53off-policy\u6765\u8dd1\u4e86\u3002\u5b9e\u9a8c\u4e0a\uff0c\u6548\u679c\u4e5f\u8fd8\u4e0d\u9519\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap06/#q_learning_in_continuous_action_space","title":"Q learning in continuous action space","text":"<p>\u548c\u4e4b\u524d\u7684policy gradient\u4e0d\u540c\uff0cQ-learning\u7b97\u6cd5\u5ef6\u4f38\u5230continous action space\u7684\u96be\u5ea6\u7565\u9ad8\u3002\u8fd9\u662f\u56e0\u4e3aupdate\u8fc7\u7a0b\u6709\u4e00\u4e2amax\u64cd\u4f5c\u3002\u5728\u8fde\u7eed\u7684\u7a7a\u95f4\u5982\u4f55\u5b9e\u73b0\u8fd9\u4e2amax\u5462\uff1f\u6709\u4e09\u79cd\u65b9\u6cd5\u3002</p> <ol> <li> <p>optimization\uff1a\u5728\u6bcf\u4e00\u6b21\u9700\u8981\u53d6max\u7684\u65f6\u5019\uff0c\u6211\u4eec\u7528\u4e00\u4e2aoptimizer\uff08\u6bd4\u5982GD\u6216\u8005\u4e0d\u4f7f\u7528\u68af\u5ea6\u7684stochastic optimization\u65b9\u6cd5\u7b49\uff09\u6765\u9009\u53d6 \\(a\\) \u4f7f\u5f97\u6700\u5927\u5316 \\(Q(s,a)\\) \u3002\u95ee\u9898\u4e5f\u5f88\u660e\u663e\u2014\u2014\u8fd9\u4f1a\u5bfc\u81f4\u8ba1\u7b97\u592a\u6162\u4e86\u3002</p> </li> <li> <p>NAF(Normalized Advantage Functions): \u6211\u4eec\u9009\u53d6 \\(Q\\) \u51fd\u6570\u5fc5\u987b\u4e3a\u6307\u5b9a\u7684\u5f62\u5f0f\uff1a \\(Q(s,a)=-\\frac{1}{2}(a-\\mu_\\phi(s))M_\\phi(s)(a-\\mu_\\phi(s))+V_\\phi(s)\\) \uff0c\u5176\u4e2d\u5305\u542b\u4e86\u82e5\u5e72\u795e\u7ecf\u7f51\u7edc\u4f5c\u4e3a\u53c2\u6570\u3002\u8fd9\u6837\u8ba1\u7b97\u786e\u5b9e\u53ef\u4ee5\u5f88\u5feb\uff0c\u4f46\u662f\u8fd9\u4e2a\u65b9\u6cd5\u7684\u95ee\u9898\u4e5f\u6bd4\u8f83\u660e\u663e\uff1a \\(Q\\) \u53ea\u80fd\u662f \\(a\\) \u7684\u4e8c\u6b21\u51fd\u6570\uff01\u8fd9\u6837\u7684\u9650\u5236\u592a\u5927\u4e86\u3002</p> </li> <li> <p>Learn an approximate maximizer: \u6211\u4eec\u5728\u8bad\u7ec3 \\(Q\\) \u7684\u540c\u65f6\u8fd8\u8bad\u7ec3\u53e6\u5916\u4e00\u4e2a\u7f51\u7edc \\(\\pi_\\theta\\) \uff0c\u4f7f\u5f97 \\(\\pi_\\theta(s)\\approx \\arg\\max_a Q(s,a)\\) \u3002\u8bad\u7ec3\u65b9\u6cd5\u4e5f\u5f88\u76f4\u63a5\uff1a\u5bf9 \\(\\theta\\) \u6700\u5927\u5316 \\(Q(s,\\pi_\\theta(a))\\) \u5373\u53ef\u3002\u53ef\u4ee5\u53d1\u73b0\u8fd9\u4e2a\u65b9\u6cd5\u5b9e\u9645\u4e0a\u662f\u6700\u597d\u7684\u3002\u540c\u65f6\uff0c\u6211\u4eec\u8fd8\u80fd\u770b\u5230\uff0c\u6211\u4eec\u4f3c\u4e4e\u53c8\u518d\u4e00\u6b21\u5f15\u5165\u4e86policy \\(\\pi\\) \uff01\u8fd9\u4e00\u65b9\u6cd5\u4e5f\u88ab\u79f0\u4e3a\u201cdeterministic actor critic method\u201d\u3002</p> </li> </ol> <p>\u4f7f\u7528\u4e0a\u9762\u7684\u65b9\u6cd53,\u4eba\u4eec\u5f97\u5230\u4e86\u8457\u540d\u7684DDPG Algorithm\uff1a</p> <p>DDPG Algorithm</p> <p>\u91cd\u590d\uff1a 1. \u4ece\u73af\u5883\u4e2d\u6839\u636e\u67d0\u79cdpolicy\u91c7\u6837\u4e00\u4e2a \\((s,a,s',r)\\) \uff0c\u52a0\u5165replay buffer \\(B\\) \uff1b 2. \u4ecereplay buffer\u53d6\u51fa\u4e00\u4e2abatch(\u76f8\u5f53\u4e8e \\(K=1\\) )\uff0c\u8ba1\u7b97\u76ee\u6807 \\([Q(s,a)]^\\star=r(s,a)+\\gamma Q_{\\phi_0}(s',\\pi_{\\theta_0}(s'))\\) \uff1b 3. \u5bf9 \\(L(\\phi)=\\sum_{(s,a)}([Q(s,a)]^\\star-Q_\\phi(s,a))^2\\) \u4f5c\u4e00\u6b65\u68af\u5ea6\u4e0b\u964d\uff1b 4. \u5bf9 \\(L(\\theta)=-\\sum_s Q_\\phi(s,\\pi_\\theta(s))\\) \u505a\u4e00\u6b65\u68af\u5ea6\u4e0b\u964d\uff1b 5. \u66f4\u65b0 \\(\\phi_0,\\theta_0\\) \uff0c\u53ef\u4ee5\u4f7f\u7528\u9694 \\(N\\) \u6b21\u66f4\u65b0\u4e00\u6b21\u7684\u65b9\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528Polyak\u5e73\u5747\u7684\u65b9\u6cd5\u3002</p> <p>\u800c\u7c7b\u4f3c\u5730\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u5b66\u4e60\u4e00\u4e2a\u4e0d\u662fdeterministic\u7684maximizer\u3002\u8fd9\u5c31\u662f SAC(Soft Actor Critic) \u7b97\u6cd5\u3002\u8fd9\u4e2a\u7b97\u6cd5\u7684\u6838\u5fc3\u601d\u60f3\u662f\uff0c\u6211\u4eec\u4e0d\u518d\u5b66\u4e60\u4e00\u4e2a\u786e\u5b9a\u7684 \\(\\pi\\) \uff0c\u800c\u662f\u5b66\u4e60\u4e00\u4e2a\u6982\u7387\u5206\u5e03 \\(p(a|s)\\) \uff0c\u4f7f\u5f97 \\(Q(s,a)\\) \u7684\u671f\u671b\u6700\u5927\u5316\u3002\u6211\u4eec\u4f1a\u53d1\u73b0\uff0c\u6b64\u65f6\u7684\u95ee\u9898\u5b8c\u5168\u53d8\u6210\u4e86\u4e4b\u524d\u7684policy gradient\u95ee\u9898\uff01\u53ea\u4e0d\u8fc7\u8fd9\u6b21\u6211\u4eec\u7684reward\u662f \\(Q\\) \u503c\u800c\u4e0d\u662fadvantage\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528policy gradient\u7684update\u516c\u5f0f\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u8fd9\u91cc\u51fa\u4e8e\u7b80\u7565\uff0c\u4e0d\u518d\u8be6\u7ec6\u4ecb\u7ecd\u3002\u53ef\u4ee5\u53c2\u8003\u8fd9\u7bc7\u8bba\u6587\u3002</p> <p>\uff08\u6ce8\uff1aSAC\u5b9e\u9645\u4e0a\u5f88\u590d\u6742\uff0c\u8fd8\u5f15\u5165\u4e86\u8bf8\u5982entropy bonus\u7b49\u4f18\u5316\u3002\u867d\u7136\u5982\u6b64\uff0cSAC\u662f\u73b0\u5728\u5341\u5206\u5e38\u89c1\u7684\u4e00\u7c7b\u5904\u7406continous action\u7684\u65b9\u6cd5\uff0c\u57fa\u672c\u4e0a\u662fQ learning\u7684\u6807\u51c6implement\u65b9\u5f0f\uff0c\u56e0\u6b64\u5341\u5206\u91cd\u8981\u3002\u5982\u679c\u8981\u53c2\u8003\u5176\u57fa\u672c\u601d\u60f3\uff0c\u53ef\u4ee5\u53c2\u89c1hw3\uff09</p>"},{"location":"Online%20CS%20Courses/CS285/chap06/#implementing_q_learning","title":"Implementing Q learning","text":"<p>\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\uff0c\u7406\u8bba\u4e0aQ-learning\u662f\u4e0d\u6536\u655b\u7684\u3002\u56e0\u6b64\uff0c\u53c2\u6570\u7684\u8c03\u6574\u5fc5\u987b\u5341\u5206\u5730\u5c0f\u5fc3\u3002\u6709\u4ee5\u4e0b\u7684tip\uff1a - Large replay buffer make training stable\uff1a\u8fd9\u76f8\u5f53\u4e8e\u8bad\u7ec3\u7684\u6570\u636e\u96c6\u5f88\u5927\uff0c\u53ef\u4ee5\u66f4\u597d\u5730\u6536\u655b\uff1b - Gradually reduce exploration\uff1a\u5f00\u59cb\u7684\u65f6\u5019\u5e94\u8be5\u591aexplore\uff0c\u4ee5\u9632\u6b62\u9677\u5165\u4e00\u4e2a\u5c40\u90e8\u6700\u4f18\u89e3\uff1b\u4f46\u6700\u540e\u6478\u6e05\u4e86\u73af\u5883\u7684\u5957\u8def\u540e\uff0c\u5e94\u8be5\u4e13\u6ce8\u5728\u628a\u6700\u597d\u7684 \\(Q\\) \u503c\u505a\u7684\u66f4\u7cbe\u786e\u4e0a\u3002 - Huber loss for training Q network\uff1a<code>huber_loss</code>\u662f \\(\\frac{x^2}{2}\\) \u7684\u201c\u622a\u65ad\u201d\u7248\u672c\uff0c\u4e5f\u5c31\u662f\u5f53 \\(x\\) \u5f88\u5927\u7684\u65f6\u5019loss\u662f\u7ebf\u6027\u800c\u975e\u4e8c\u6b21\u7684\u3002     - \u4e3a\u4ec0\u4e48\u8fd9\u6837\u505a\u6709\u6548\uff1f\u8fd8\u662f\u4e0a\u4e00\u8bb2\u7684\u90a3\u4e2a\u4f8b\u5b50\uff1a\u5982\u679c\u4e00\u4e2abatch\u91cc\u9762\u6709\u4e00\u4e9bQ\u4e3a1,2,3\u7684\u6570\u636e\uff0c\u8fd8\u6709\u4e00\u4e2aQ\u4e3a-1000000\u7684\u6570\u636e\uff0c\u90a3\u4e48\u53c2\u6570\u80af\u5b9a\u4f1a\u88ab\u540e\u8005\u7684\u5de8\u5927\u68af\u5ea6\u62fd\u5230\u4f7f\u5f97\u90a3\u4e2a\u5f88\u5dee\u7684Q\u6700\u7cbe\u786e\u7684\u5730\u65b9\u3002\u4f46\u6211\u4eec\u5b9e\u9645\u4e0a\u5e76\u4e0d\u5173\u5fc3\u90a3\u4e2a\u5f88\u5dee\u7684Q\u5230\u5e95\u662f-1000000\u8fd8\u662f-500000\uff0c\u56e0\u6b64\u8fd9\u4e2a\u622a\u65ad\u7248\u672c\u7684loss\u5f88\u6709\u6548\u3002 - Always use Double Q learning: it has no downsides - Sometimes use multi-step returns (but it has a theoretical error)</p>"},{"location":"Online%20CS%20Courses/CS285/chap06/#reference_papers","title":"Reference Papers","text":"<ol> <li>Continuous control with deep reinforcement learning\uff08DDPG\uff09</li> <li>Continuous deep Q-learning with model-based acceleration\uff08NAF\uff09</li> <li>Dueling network architectures for deep reinforcement learning</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap07/","title":"Goal","text":"<p>\u6211\u4eec\u672c\u8bb2\u4e3b\u8981\u7684\u4e24\u4e2a\u76ee\u6807\uff1a</p> <ul> <li>Policy Gradient\u548cPolicy Iteration\u7b97\u6cd5\u5927\u6982\u7b49\u4ef7\uff1b</li> <li>\u5728\u4e4b\u524d\u7b2c\u4e94\u8bb2\u4ecb\u7ecdPolicy Gradient\u7684\u65f6\u5019\u6211\u4eec\u7ed9\u51fa\u4e86\u4e00\u4e2aFirst Order Approximation\u7248\u672c\u7684\u7b97\u6cd5\uff0c\u5176\u4e2d\u6254\u6389\u4e86\u5f88\u591a\u9879\u3002\u6211\u4eec\u73b0\u5728\u6765\u89e3\u91ca\u4e3a\u4ec0\u4e48\u4e22\u6389\u8fd9\u4e9b\u9879\u662f\u5408\u7406\u7684\u3002</li> </ul>"},{"location":"Online%20CS%20Courses/CS285/chap07/#policy_gradient_as_policy_iteration","title":"Policy Gradient as Policy Iteration","text":"<p>\u8ba9\u6211\u4eec\u56de\u987e\u4e00\u4e0bpolicy gradient\u7684\u8868\u8fbe\u5f0f</p> \\[ \\nabla_\\theta J(\\theta)=\\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[\\sum_{t=0}^{T-1}\\nabla_\\theta\\log\\pi_\\theta(a_t|s_t)\\hat{A}^{\\pi_\\theta}(s_t,a_t)\\right] \\] <p>\u8fd9\u91cc \\(\\hat{A}^{\\pi_\\theta}(s_t,a_t)\\) \u4ee3\u8868\u7740\u53d6\u6837\u4f30\u8ba1\u7684advantage function\u3002\u6bd4\u5982\u5728state-dependent baseline\u4e0b\uff0c\u5b83\u53ef\u4ee5\u5199\u4e3a</p> \\[ \\hat{A}^{\\pi_\\theta}(s_t,a_t)=\\sum_{t'\\ge t}\\gamma^{t'-t} r(s_{t'},a_{t'})-V^{\\pi_\\theta}_\\phi(s_t) \\] <p>\u539f\u6765\u7684policy gradient\u7684\u7b97\u6cd5\u5927\u81f4\u53ef\u4ee5\u5199\u4e3a\uff1a</p> <ol> <li>\u5229\u7528 \\(\\pi_\\theta\\) \u91c7\u96c6\u65b0\u7684\u6570\u636e\uff1b</li> <li>\u6839\u636e\u8fd9\u4e9b\u6570\u636e\u8bad\u7ec3value function network \\(V^{\\pi_\\theta}_\\phi\\) \u3002</li> <li>\u5229\u7528\u6a21\u578b\u8ba1\u7b97advantage function\u5e76\u6839\u636epolicy gradient \u6765 update policy \\(\\pi_\\theta\\) \uff1b</li> </ol> <p>\u5982\u679c\u6574\u7406\u4e00\u4e0b\uff0c\u4f1a\u53d1\u73b0\u7b2c2\u6b65\u5b9e\u9645\u4e0a\u662fEstimate Advantage\uff0c\u800c\u7b2c3\u6b65\u662fImprove Policy Based On Advantage\u3002\u8fd9\u4e24\u6b65\u7684\u601d\u60f3\u548cpolicy iteration\u662f\u5b8c\u5168\u4e00\u81f4\u7684\uff01\u53ea\u4e0d\u8fc7\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\uff0c\u7b2c3\u6b65\u7684improve\u5e76\u4e0d\u662f\u50cfpolicy iteration\u90a3\u6837\u76f4\u63a5argmax\uff0c\u800c\u662f\u91c7\u7528\u4e86\u68af\u5ea6\u4e0a\u5347\u8fd9\u6837\u66f4\u52a0soft\u7684\u65b9\u6cd5\u3002</p> <p>\u8fd9\u5c31\u7ed9\u6211\u4eec\u4e00\u4e2a\u76f4\u89c9\uff0cpolicy gradient\u548cpolicy iteration\u662f\u7b49\u4ef7\u7684\u3002\u6211\u4eec\u63a5\u4e0b\u6765\u5c31\u6765\u6bd4\u8f83\u4e25\u683c\u5730\u8bf4\u660e\u8fd9\u4e00\u70b9\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap07/#directly_optimizing_the_policy_gradient_objective","title":"Directly Optimizing the Policy Gradient Objective","text":"<p>\u6211\u4eec\u8fd8\u8bb0\u5f97\u6700\u5f00\u59cb\u4ecb\u7ecdpolicy gradient\u7684\u65f6\u5019\uff0c\u63d0\u51fa\u4e86\u5176objective\u4e3a\uff1a</p> \\[ J(\\theta)=\\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[\\sum_{t=0}^{T-1}\\gamma^t r(s_t,a_t)\\right] \\] <p>\u73b0\u5728\uff0c\u6211\u4eec\u8003\u8651\u76f4\u63a5\u4f18\u5316\u8fd9\u4e00objective\uff08\u800c\u4e0d\u662f\u8ba1\u7b97\u68af\u5ea6\uff09\u3002\u5177\u4f53\u5730\uff0c\u6211\u4eec\u7528 \\(\\theta_1\\) \u4ee3\u8868\u4f18\u5316\u540e\u7684policy\uff0c \\(\\theta_0\\) \u4ee3\u8868\u4f18\u5316\u524d\u7684policy\u3002\u90a3\u4e48</p> \\[ J(\\theta_1)-J(\\theta_0)=\\mathbb{E}_{\\tau\\sim p_{\\theta_1}(\\tau)}\\left[\\sum_{t=0}^{T-1}\\gamma^t r(s_t,a_t)\\right]-\\mathbb{E}_{\\tau\\sim p_{\\theta_0}(\\tau)}\\left[V^{\\pi_{\\theta_0}}(s_0)\\right] \\] <p>\u6ce8\u610f\u8fd9\u91cc\u5de7\u5999\u7684\u5730\u65b9\u5728\u4e8e\uff0c\u5bf9\u4e8e\u7b2c\u4e8c\u9879\uff0c\u6211\u4eec\u628a\u5b83\u8868\u793a\u4e3avalue function\u7684\u5f62\u5f0f\u3002\u540c\u65f6\uff0c\u6ce8\u610f\u5230</p> \\[ \\mathbb{E}_{\\tau\\sim p_{\\theta_0}(\\tau)}[V^{\\pi_{\\theta_0}}(s_0)]=\\mathbb{E}_{\\tau\\sim p_{\\theta_1}(\\tau)}[V^{\\pi_{\\theta_0}}(s_0)] \\] <p>\u56e0\u4e3a\u4e8c\u8005\u7684\u7b2c\u4e00\u6b65\u5206\u5e03\u90fd\u662f\u4e00\u6837\u7684\u3002\u8fd9\u6837\u5c31\u5141\u8bb8\u6211\u4eec\u5316\u7b80\u51fa</p> \\[ J(\\theta_1)-J(\\theta_0)=\\mathbb{E}_{\\tau\\sim p_{\\theta_1}(\\tau)}\\left[\\sum_{t=0}^{T-1}\\gamma^t r(s_t,a_t)\\right]-\\mathbb{E}_{\\tau\\sim p_{\\theta_1}(\\tau)}[V^{\\pi_{\\theta_0}}(s_0)] \\] \\[ =\\mathbb{E}_{\\tau\\sim p_{\\theta_1}(\\tau)}\\left[\\sum_{t=0}^{T-1}\\gamma^t \\left(r(s_t,a_t)-V^{\\pi_{\\theta_0}}(s_t)+\\gamma V^{\\pi_{\\theta_0}}(s_{t+1})\\right)\\right] \\] \\[ =\\mathbb{E}_{\\tau\\sim p_{\\theta_1}(\\tau)}\\left[\\sum_{t=0}^{T-1}\\gamma^t A^{\\pi_{\\theta_0}}(s_t,a_t)\\right] \\] <p>\u5176\u4e2d\uff0cadvantage function\u8fd8\u662f\u50cf\u539f\u6765\u90a3\u6837\u5730\u5b9a\u4e49:</p> \\[ A^{\\pi_{\\theta_0}}(s_t,a_t):=r(s_t,a_t)-V^{\\pi_{\\theta_0}}(s_t)+\\gamma \\mathbb{E}_{s_{t+1}\\sim p(\\cdot|s_t,a_t)}\\left[V^{\\pi_{\\theta_0}}(s_{t+1})\\right] \\] <p>\u4f46\u73b0\u5728\u6211\u4eec\u9700\u8981\u4f18\u5316\u7684 \\(\\theta_1\\) \u53c8\u8dd1\u5230\u4e86\u5e95\u4e0b\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u8fd8\u662f\u8fdb\u884cimportance sampling</p> \\[ J(\\theta_1)-J(\\theta_0)=\\mathbb{E}_{\\tau\\sim p_{\\theta_1}(\\tau)}\\left[\\sum_{t=0}^{T-1}\\gamma^t A^{\\pi_{\\theta_0}}(s_t,a_t)\\right] \\] \\[ =\\sum_{t=0}^{T-1}\\gamma^t \\mathbb{E}_{s_t\\sim p_{\\theta_1}(s_t)}\\left[\\mathbb{E}_{a_t\\sim \\pi_{\\theta_0}(a_t|s_t)}\\left[A^{\\pi_{\\theta_0}}(s_t,a_t)\\frac{\\pi_{\\theta_1}(a_t|s_t)}{\\pi_{\\theta_0}(a_t|s_t)}\\right]\\right] \\] <p>\u4f46\u95ee\u9898\u6ca1\u6709\u5b8c\u5168\u89e3\u51b3\u2014\u2014\u4ecd\u7136\u6709\u4e00\u90e8\u5206 \\(\\theta_1\\) \u5728\u4e0b\u9762\u7684\u6982\u7387\u5206\u5e03\u91cc\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0c\u6211\u4eec\u5fc5\u987b\u5f15\u5165\u6570\u5b66\u4e0a\u7684\u6027\u8d28\u3002</p> <p>Claim. </p> <p>\u6211\u4eec\u73b0\u5728\u65ad\u8a00\uff0c\u5982\u679c</p> <p>$$ |\\pi_{\\theta_1}(\\cdot|s_t)-\\pi_{\\theta_0}(\\cdot|s_t)|\\le \\epsilon $$ \uff08\u8fd9\u91cc\u4f9d\u7136\u662ftotal variation distance\uff09\uff0c\u90a3\u4e48\u5199</p> \\[ J(\\theta_1)-J(\\theta_0)=\\sum_{t=0}^{T-1}\\gamma^t \\mathbb{E}_{s_t\\sim p_{\\textcolor{red}{\\theta_0}}(s_t)}\\left[\\mathbb{E}_{a_t\\sim \\pi_{\\theta_0}(a_t|s_t)}\\left[A^{\\pi_{\\theta_0}}(s_t,a_t)\\frac{\\pi_{\\theta_1}(a_t|s_t)}{\\pi_{\\theta_0}(a_t|s_t)}\\right]\\right] \\] <p>\u4e0d\u4f1a\u5e26\u6765\u5f88\u5927\u8bef\u5dee\u3002</p> <p>\u8fd9\u4e2a\u8bc1\u660e\u6211\u4eec\u4e3a\u4e86\u8fde\u8d2f\u6027\u653e\u5230\u6700\u540e\u3002\u90a3\u4e48\u4e3a\u4e86\u5229\u7528\u8fd9\u4e2aclaim\uff0c\u6211\u4eec\u5c31\u9700\u8981\u5148\u8fdb\u884c\u7ea6\u675f\u3002\u8fd9\u5c31\u5e26\u6765\u4e86\u4e0b\u9762\u79f0\u4e3a\u201cLittle Step\u201d\u7684\u4f18\u5316\u95ee\u9898\uff1a</p> <p>Little Step:</p> <p>Maximize \\(J(\\theta_1)=\\sum_{t=0}^{T-1}\\gamma^t \\mathbb{E}_{s_t\\sim p_{{\\theta_0}}(s_t)}\\left[\\mathbb{E}_{a_t\\sim \\pi_{\\theta_0}(a_t|s_t)}\\left[A^{\\pi_{\\theta_0}}(s_t,a_t)\\frac{\\pi_{\\theta_1}(a_t|s_t)}{\\pi_{\\theta_0}(a_t|s_t)}\\right]\\right]\\) w.r.t. \\(\\theta_1\\)</p> <p>With Constraint \\(|\\pi_{\\theta_1}(\\cdot|s_t)-\\pi_{\\theta_0}(\\cdot|s_t)|\\le \\epsilon\\)</p> <p>\u73b0\u5728\uff0c\u5047\u8bbe\u6211\u4eec\u89e3\u51b3\u4e86\u8fd9\u4e2a\u4f18\u5316\u95ee\u9898\uff0c\u90a3\u4e48\u76f4\u89c2\u4e0a\u6211\u4eec\u5c31\u53ef\u4ee5\u89e3\u51b3\u4e86\u539f\u6765\u7684 \\(J(\\theta_1)-J(\\theta_0)\\) \u7684\u4f18\u5316\u95ee\u9898\uff1a\u53ea\u8981\u4e0d\u65ad\u5730\u8fed\u4ee3\u8fd9\u4e2aLittle Step\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u9010\u6e10\u4f18\u5316 \\(J(\\theta)\\) \uff01\u8fd9\u6709\u70b9\u50cfgradient step\u4e2d\u9650\u5236\u4e86\u4e00\u4e2agrad norm\uff08\u505agradient clipping\uff09\uff0c\u4f7f\u5f97\u6bcf\u4e00\u6b65\u90fd\u53ea\u80fd\u8d70\u4e0d\u8d85\u8fc7\u4e00\u4e2a\u8ddd\u79bb\uff0c\u4f46\u662f\u6700\u7ec8\u8fd8\u662f\u53ef\u4ee5\u5230\u8fbe\u6700\u4f18\u70b9\u3002</p> <p>\u8fd9\u6837\uff0c\u6211\u4eec\u63a5\u4e0b\u6765\u5c31\u53ea\u9700\u8981\u8003\u8651\u8fd9\u4e2aLittle Step\u7684\u4f18\u5316\u95ee\u9898\u4e86\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap07/#optimization_with_constraints","title":"Optimization With Constraints","text":"<p>\u9996\u5148\uff0c\u6ce8\u610f\u5230total variation\u7684\u6570\u5b66\u6027\u8d28\u4e0d\u662f\u7279\u522b\u597d\uff0c\u6211\u4eec\u7528KL divergence\u6765\u4ee3\u66ff\u5b83\u3002\u8fd9\u91cc\u5f15\u5165\u4e00\u4e2awell-known\u7684\u4e0d\u7b49\u5f0f\uff1a</p> \\[ |p(\\cdot)-q(\\cdot)|\\le \\sqrt{\\frac{1}{2}\\text{KL}(p||q)} \\] <p>\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u628a\u95ee\u9898\u8f6c\u5316\u4e3a\u7ea6\u675f\u5728</p> \\[ \\text{KL}\\left(\\pi_{\\theta_1}(\\cdot|s_t)||\\pi_{\\theta_0}(\\cdot|s_t)\\right)\\le \\epsilon \\] <p>\u7684\u60c5\u51b5\u4e0b\u8fdb\u884c\u4f18\u5316\u3002\u63a5\u4e0b\u6765\uff0c\u6709\u4e24\u79cd\u53ef\u80fd\u7684\u601d\u8def\u3002\u901a\u8fc7\u7b2c\u4e8c\u79cd\u601d\u8def\uff0c\u6211\u4eec\u53ef\u4ee5\u6700\u7ec8\u5efa\u7acb\u8d77\u901a\u5f80policy gradient\u7684\u6865\u6881\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap07/#method_1_add_to_loss","title":"Method 1: Add to loss","text":"<p>\u8fd9\u4e2a\u65b9\u6cd5\u5e76\u4e0d\u5f3a\u5236\u5dee\u8ddd\u4e0d\u8d85\u8fc7 \\(\\epsilon\\) \uff0c\u800c\u53ea\u662f\u5927\u81f4\u5730\u7406\u89e3\u5176\u542b\u4e49\uff1a \\(\\pi_{\\theta_1}\\) \u548c \\(\\pi_{\\theta_0}\\) \u5e94\u8be5\u63a5\u8fd1\u3002\u6839\u636eDL\u7ed9\u6211\u4eec\u7559\u4e0b\u7684\u91cd\u8981\u601d\u60f3\uff0c\u6211\u4eec\u60f3\u8981\u4ec0\u4e48\uff0c\u5c31\u628a\u4ec0\u4e48\u52a0\u5230loss\u91cc\u9762\uff1a</p> \\[ \\tilde{J}=\\sum_{t=0}^{T-1}\\gamma^t \\mathbb{E}_{s_t\\sim p_{{\\theta_0}}(s_t)}\\left[\\mathbb{E}_{a_t\\sim \\pi_{\\theta_0}(a_t|s_t)}\\left[A^{\\pi_{\\theta_0}}(s_t,a_t)\\frac{\\pi_{\\theta_1}(a_t|s_t)}{\\pi_{\\theta_0}(a_t|s_t)}\\right]\\right]-\\beta \\text{KL}\\left(\\pi_{\\theta_1}(\\cdot|s_t)||\\pi_{\\theta_0}(\\cdot|s_t)\\right) \\] <p>\u8fd9\u6837\uff0c\u53ea\u9700\u8981\u6700\u5927\u5316 \\(\\tilde{J}\\) \u5c31\u53ef\u4ee5\u4e86\u3002\u7136\u540e\u53ef\u4ee5\u52a8\u6001\u5730\u8c03\u6574 \\(\\beta\\) \uff1a\u5982\u679cKL divergence\u6bd4 \\(\\epsilon\\) \u5927\u5f88\u591a\uff0c\u90a3\u4e48\u5c31\u589e\u5927 \\(\\beta\\) \uff1b\u5426\u5219\u51cf\u5c0f \\(\\beta\\) \u3002\u8fd9\u53ef\u4ee5\u7ecf\u9a8c\u5730\u7531</p> \\[ \\beta\\leftarrow \\beta+\\alpha(\\text{KL}-\\epsilon) \\] <p>\u51b3\u5b9a\u3002\u4e00\u4e2a\u57fa\u4e8e\u8fd9\u6837\u7684\u601d\u8def\u7684\u8457\u540d\u7b97\u6cd5\u662fPPO\uff08Proximal Policy Optimization\uff09\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap07/#method_2_natural_gradient","title":"Method 2: Natural Gradient","text":"<p>\u6211\u4eec\u8fd8\u662f\u76f4\u63a5\u505a\u68af\u5ea6\u7684\u8ba1\u7b97\uff0c\u4f46\u662f\u4fdd\u8bc1\u68af\u5ea6\u4e0b\u964d\u7684\u6bcf\u4e00\u6b65\u4e0d\u80fd\u592a\u5927\uff0c\u8fdb\u800c\u907f\u514dKL divergence\u8d85\u51fa\u9650\u989d\u3002</p> <p>\u8fd9\u91cc\uff0c\u597d\u73a9\u7684\u4e00\u70b9\u7acb\u523b\u6765\u4e86\uff1a\u6211\u4eec\u5148\u5bf9\u8fd9\u91cc\u7684objective\u6c42\u5bfc\uff1a</p> \\[ \\nabla_{\\theta_1}J(\\theta_1)=\\sum_{t=0}^{T-1}\\gamma^t \\mathbb{E}_{s_t\\sim p_{{\\theta_0}}(s_t)}\\left[\\mathbb{E}_{a_t\\sim \\pi_{\\theta_0}(a_t|s_t)}\\left[A^{\\pi_{\\theta_0}}(s_t,a_t)\\frac{\\nabla_{\\theta_1}\\pi_{\\theta_1}(a_t|s_t)}{\\pi_{\\theta_0}(a_t|s_t)}\\right]\\right] \\] \\[ =\\sum_{t=0}^{T-1}\\gamma^t \\mathbb{E}_{s_t\\sim p_{{\\theta_0}}(s_t)}\\left[\\mathbb{E}_{a_t\\sim \\pi_{\\theta_0}(a_t|s_t)}\\left[A^{\\pi_{\\theta_0}}(s_t,a_t)\\frac{\\pi_{\\theta_1}(a_t|s_t)}{\\pi_{\\theta_0}(a_t|s_t)}\\nabla_{\\theta_1}\\log \\pi_{\\theta_1}(a_t|s_t)\\right]\\right] \\] <p>\u6211\u4eec\u60ca\u5947\u5730\u53d1\u73b0\uff0c\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u5c31\u662f\u4e4b\u524dpolicy gradient\u4e2dFirst Order Approximation\u7684\u8868\u8fbe\u5f0f\uff01\u6362\u53e5\u8bdd\u8bf4\uff0c\u539f\u5148\u7684Policy Gradient\u7684First-order-approximation\u5728\u4e00\u5b9a\u6761\u4ef6\u4e0b\u662f\u5408\u7406\u7684\uff1b\u5b83\u6709\u6548\u7684\u6761\u4ef6\u662fKL divergence\u4e0d\u80fd\u592a\u5927\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u8ba9\u6211\u4eec\u6765\u4e25\u683c\u5730\u5bf9\u5f85\u8fd9\u4e2a\u4f18\u5316\u95ee\u9898\u3002\u9996\u5148\uff0c\u4f5c\u5c0f\u91cf\u8fd1\u4f3c\uff0c\u53ef\u4ee5\u7ed9\u51fa\u7ea6\u675f\u7684\u5f62\u5f0f</p> \\[ \\text{KL}(\\pi_{\\theta_1}(\\cdot|s_t)||\\pi_{\\theta_0}(\\cdot|s_t))\\approx \\frac{1}{2}(\\theta_1-\\theta_0)^T \\mathbf{F} (\\theta_1-\\theta_0) \\le \\epsilon \\] <p>\u8fd9\u91cc \\(\\mathbf{F}\\) \u662fFisher information matrix\uff1a</p> \\[ \\mathbf{F}=\\mathbb{E}_{a\\sim \\pi_\\theta(a|s)}\\left[\\nabla_\\theta \\log \\pi_\\theta(a|s)\\nabla_\\theta \\log \\pi_\\theta(a|s)^T\\right] \\] <p>\u800c\u4f18\u5316\u7684\u76ee\u6807\u5728\u9996\u9636\u8fd1\u4f3c\u4e0b\u53ef\u4ee5\u5199\u4e3a</p> \\[ J(\\theta_1)\\approx J(\\theta_0)+(\\theta_1-\\theta_0)\\nabla_{\\theta_0}J(\\theta_0) \\] <p>\u8fd9\u65f6\uff0c\u56e0\u4e3a\u6709\u4e00\u4e2a\u540c\u9636\u7684\u7ea6\u675f\uff0c\u6211\u4eec\u5c31\u4e0d\u4e00\u5b9a\u6cbf\u7740\u68af\u5ea6\u7684\u65b9\u5411\u524d\u8fdb\uff08\u56e0\u4e3a\u6cbf\u7740\u68af\u5ea6\u867d\u7136\u76ee\u6807\u51fd\u6570\u4e0b\u964d\u5f88\u5feb\uff0c\u4f46\u53ef\u80fd\u6cbf\u7740\u8fd9\u4e2a\u65b9\u5411\u88ab\u7ea6\u675f\u7684\u6bd4\u8f83\u4e25\u91cd\uff0c\u53ef\u80fd\u4e0d\u80fd\u8d70\u5f88\u8fdc\uff09\u3002\u56e0\u6b64\uff0c\u9700\u8981\u4f7f\u7528\u62c9\u683c\u6717\u65e5\u4e58\u6570\u6cd5\uff1a</p> \\[ 0=\\nabla_{\\theta_1}\\left[(\\theta_1-\\theta_0)\\nabla_{\\theta_0}J(\\theta_0)-\\frac{1}{2\\alpha}(\\theta_1-\\theta_0)^T \\mathbf{F} (\\theta_1-\\theta_0)\\right] \\] <p>\u8ba1\u7b97\u53ef\u4ee5\u5f97\u5230</p> \\[ \\theta_1\\leftarrow \\theta_0 + \\sqrt{2\\epsilon} \\frac{F^{-1}g}{\\sqrt{g^TF^{-1}g}} \\] <p>\u5176\u4e2d \\(g=\\nabla_{\\theta_0} J(\\theta_0)\\) \u662f\u539f\u6765\u7684\u68af\u5ea6\u3002\u8fd9\u4e2a\u7b97\u6cd5\u5c31\u88ab\u79f0\u4e3aNatural Gradient\u3002\u8fd8\u6709\u4e00\u4e2a\u66f4\u8457\u540d\u7684\u3001\u57fa\u4e8e\u8fd9\u4e00\u65b9\u6cd5\u7684\u7b97\u6cd5\uff0c\u79f0\u4e3aTRPO\uff08Trust Region Policy Optimization\uff09\u3002</p> <p>Q: \u76f4\u89c2\u5730\u8bf4\uff0cNatural Gradient\u5728\u505a\u4ec0\u4e48\uff1f</p> <p>A: \u6709\u8fd9\u6837\u4e00\u4e2a\u5f88\u597d\u7684\u4f8b\u5b50\uff1a\u5047\u8bbe\u6211\u4eec\u73b0\u5728\u6709\u4e00\u4e2a\u9ad8\u65af\u5206\u5e03 \\(\\log \\pi_\\theta(a|s)=-\\frac{(ks-a)^2}{2\\sigma^2}+\\text{Const}\\) \uff0c\u8bbe \\(\\theta=(\\sigma,k)\\) \uff0c\u90a3\u4e48\u5982\u679c\u76f4\u63a5\u8fdb\u884cpolicy gradient\uff0c\u6211\u4eec\u9700\u8981\u8ba1\u7b97 \\(\\nabla_\\theta \\log \\pi_\\theta(a|s)\\) \u3002\u8fd9\u6837\u7684\u68af\u5ea6\u5f88\u660e\u663e\u5728 \\(\\sigma\\to 0\\) \u7684\u65f6\u5019\uff0c \\(\\sigma\\) \u65b9\u5411\u4e0a\u7684\u68af\u5ea6\u6bd4 \\(k\\) \u4e0a\u7684\u68af\u5ea6\u5927\u4e00\u4e2a\u91cf\u7ea7\uff0c\u5982\u5de6\u8fb9\u7684\u56fe\u6240\u793a\u3002 </p> <p></p> <p>\u4f46\u53e6\u5916\u4e00\u4e2a\u65b9\u9762\uff0c\u5982\u679c\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u70b9\u90fd\u8ba1\u7b97\u4e00\u4e2aFisher matrix\uff0c\u5e76\u91c7\u7528natural gradient\u7684\u68af\u5ea6\u4e0b\u964d\u516c\u5f0f\uff0c\u6211\u4eec\u4f1a\u60ca\u5947\u5730\u53d1\u73b0\u68af\u5ea6\u53d8\u6210\u4e86\u53f3\u8fb9\u7684\u56fe\u7684\u6837\u5b50\uff0c\u8fd9\u6837\u5373\u4f7f\u5728 \\(\\sigma\\) \u5f88\u5c0f\u7684\u65f6\u5019\u68af\u5ea6\u4e5f\u6307\u5411\u4e86\u6b63\u786e\u7684\u65b9\u5411\uff01</p> <p>\u6362\u53e5\u8bdd\u8bf4\uff0cFisher matrix\u672c\u8eab\u53cd\u6620\u7684\u5c31\u662f \\(\\nabla_\\theta \\log \\pi_\\theta\\) \u7684\u4e0d\u540c\u5206\u91cf\u7684\u5927\u5c0f\u5173\u7cfb\uff1b\u539f\u672c \\(\\sigma\\) \u5206\u91cf\u4e0a \\(\\nabla_\\theta J\\) \u6bd4\u8f83\u5927\u5c31\u662f\u56e0\u4e3a \\(\\nabla_\\theta \\pi_\\theta\\) \u6bd4\u8f83\u5927\uff0c\u8fd9\u6837Fisher matrix\u7684\u9006\u5c31\u4f1a\u628a\u5b83\u62c9\u56de\u53bb\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap07/#conclusion","title":"Conclusion","text":"<p>\u6211\u4eec\u603b\u7ed3\u4e00\u4e0b\u524d\u9762\u5f97\u5230\u7684\u4e3b\u8981\u7ed3\u8bba\uff1a - offline policy gradient\u662fpolicy iteration\u7684\u4f18\u5316\u95ee\u9898\u7684\u4e00\u79cd\u89e3\u51b3\u65b9\u6848\u3002 - offline policy gradient\uff08\u7279\u522b\u662ffirst order approximation\uff09\u6210\u7acb\u7684\u6761\u4ef6\u662f\u6bcf\u4e00\u6b65update\u5bf9\u5e94\u7684KL divergence\u4e0d\u80fd\u592a\u5927\u3002\u8fd9\u6307\u51fa\u4e86\u4e4b\u524dpolicy gradient\u672c\u8eab\u96be\u4ee5\u6ce8\u610f\u7684\u95ee\u9898\uff0c\u5e76\u7ed9\u51fa\u4e86\u89e3\u51b3\u65b9\u6848\uff1anatural gradient\u3002</p> <p>\u603b\u800c\u8a00\u4e4b\uff0c\u6211\u4eec\u7ad9\u5728\u4e00\u4e2a\u66f4\u9ad8\u7684\u89c6\u89d2\u5ba1\u89c6policy gradient\uff0c\u5e76\u6700\u7ec8\u89e3\u91ca\u4e86\u5b83\u7684\u5408\u7406\u6027\uff0c\u5e76\u7ed9\u51fa\u4e86\u786e\u4fdd\u5408\u7406\u6027\u7684\u7b97\u6cd5\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap07/#prove_of_the_claim_bounding_the_distribution_mismatch","title":"Prove of the Claim: Bounding the distribution mismatch","text":"<p>\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u8bd5\u7740\u8bc1\u660eclaim\u3002</p> <p>\u8bb0</p> \\[ f(s_t)=\\gamma^t\\mathbb{E}_{a_t\\sim \\pi_{\\theta_0}(a_t|s_t)}\\left[A^{\\pi_{\\theta_0}}(s_t,a_t)\\frac{\\pi_{\\theta_1}(a_t|s_t)}{\\pi_{\\theta_0}(a_t|s_t)}\\right] \\] <p>\u90a3\u4e48\u6211\u4eec\u7684\u76ee\u6807\u662f\u5728\u7ed9\u5b9a</p> \\[ |\\pi_{\\theta_0}(\\cdot|s_t)-\\pi_{\\theta_1}(\\cdot|s_t)|\\le \\epsilon\\quad (\\forall s_t) \\] <p>\u7684\u524d\u63d0\u4e0b\uff0c\u8bba\u8bc1</p> \\[ \\sum_{t=0}^{T-1} \\mathbb{E}_{s_t\\sim p_{{\\theta_0}}(s_t)}\\left[f(s_t)\\right]\\approx \\sum_{t=0}^{T-1} \\mathbb{E}_{s_t\\sim p_{{\\theta_1}}(s_t)}\\left[f(s_t)\\right] \\] <p>\u6211\u4eec\u9996\u5148\u7ea6\u5316\u4e00\u6b65\u3002\u6ce8\u610f\u5230 \\(f(x)\\) \u7684\u503c\u57df\u603b\u662f\u53ef\u4ee5\u88abbound\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u6709</p> \\[ \\left|\\sum_{t=0}^{T-1} \\mathbb{E}_{s_t\\sim p_{{\\theta_0}}(s_t)}\\left[f(s_t)\\right]-\\sum_{t=0}^{T-1} \\mathbb{E}_{s_t\\sim p_{{\\theta_1}}(s_t)}\\left[f(s_t)\\right]\\right|\\le C\\cdot \\sum_{t=0}^{T-1}\\left|p_{\\theta_0}^{(t)}(\\cdot)-p_{\\theta_1}^{(t)}(\\cdot)\\right|=\\mathcal{O}( C\\cdot T^2\\epsilon ) \\] <p>\u8fd9\u6837\uff0c\u6211\u4eec\u53ea\u9700\u8981\u8bba\u8bc1</p> \\[ \\left|p_{\\theta_0}^{(T)}(\\cdot)-p_{\\theta_1}^{(T)}(\\cdot)\\right|\\le T\\epsilon \\]"},{"location":"Online%20CS%20Courses/CS285/chap07/#_1","title":"\u76f4\u89c2\u7684\u7406\u89e3","text":"<p>\u6211\u4eec\u53ef\u4ee5\u76f4\u89c2\u7406\u89e3\u4e3a\u4ec0\u4e48\u8fd9\u4e2atotal variation\u53ef\u4ee5\u88abbound\u5728 \\(T\\epsilon\\) \u3002Markov Chain\u5177\u6709\u4e24\u4e2a\u6b65\u9aa4\uff1a</p> \\[ s\\to a; (s,a)\\to s' \\] <p>\u7b2c\u4e8c\u6b65\u5bf9\u4e8e \\(p_0\\) \u548c \\(p_1\\) \u90fd\u662f\u4e00\u6837\u7684\uff0c\u800c\u7b2c\u4e00\u6b65\u8bef\u5dee\u4e0d\u4f1a\u8d85\u8fc7 \\(\\epsilon\\) \u3002\u6839\u636eMarkov chain\u7684coupling\u7406\u8bba\uff0c\u6211\u4eec\u53ef\u4ee5\u6784\u9020\u4e24\u5217\u968f\u673a\u53d8\u91cf \\(X_s,Y_s\\) \uff0c\u4f7f\u5f97\u5b83\u4eec\u5355\u72ec\u67d0\u4e00\u4e2a\u7684\u8fb9\u7f18\u5206\u5e03\u90fd\u6309\u7167Markov Chain\u8fdb\u884c\u884c\u8d70\uff0c\u4f46 \\(X_s=Y_s\\) \u7684\u6982\u7387\u7279\u522b\u5927\u3002\u518d\u6839\u636etotal variance\u7684\u6027\u8d28</p> \\[ \\frac{1}{2}|p(\\cdot)-q(\\cdot)|=\\inf_{\\varphi\\in \\Pi(p,q)}\\left[\\Pr_{(x,y)\\sim \\varphi}(x\\ne y)\\right] \\] <p>\u6211\u4eec\u5c31\u53ef\u4ee5\u901a\u8fc7\u6784\u9020\u8fd9\u6837\u4e00\u4e2a \\(\\varphi\\) \u6765\u8bc1\u660e \\(|p_{\\theta_0}^{(T)}(\\cdot)-p_{\\theta_1}^{(T)}(\\cdot)|\\) \u53ef\u4ee5\u88abbound\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u5b9a\u91cf\u5730\u5927\u81f4\u53d9\u8ff0\u51fa\u6765\uff1a\u5bf9\u4e8e \\((s,a)\\to s'\\) \u8fd9\u6837\u7684\u6b65\u9aa4\uff0c\u6211\u4eec\u7684coupling\u53ef\u4ee5\u9009\u7684\u662f\u53ea\u8981 \\(X_s=Y_s,a^{(X)}_s=a^{(Y)}_s\\) \u5c31\u80fd\u4fdd\u8bc1 \\(X_{s+1}=Y_{s+1}\\) \uff1b\u800c\u5bf9\u4e8e \\(s\\to a\\) \u8fd9\u6837\u7684\u6b65\u9aa4\uff0c\u6211\u4eec\u53ef\u4ee5\u9009\u7684\u662f\u5bf9\u4e8e \\(X_s=Y_s\\) \uff0caction\u4e0d\u4e00\u81f4\u7684\u6982\u7387\u4e0d\u8d85\u8fc7 \\(\\epsilon\\) \u3002\u8fd9\u6837\uff0c \\(T\\) \u6b65\u4e2d\u51fa\u9519\u7684\u6982\u7387\u5c31\u4e0d\u4f1a\u8d85\u8fc7 \\(T\\epsilon\\) \u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap07/#_2","title":"\u4e25\u683c\u7684\u8bc1\u660e","text":"<p>\u4e8b\u5b9e\u4e0a\uff0c\u6211\u4eec\u5f52\u7eb3\u5730\u8bba\u8bc1</p> \\[ \\left|p_{\\theta_0}^{(t+1)}(\\cdot)-p_{\\theta_1}^{(t+1)}(\\cdot)\\right|\\le \\left|p_{\\theta_0}^{(t)}(\\cdot)-p_{\\theta_1}^{(t)}(\\cdot)\\right|+\\epsilon \\] <p>\u8fd9\u5b9e\u9645\u4e0a\u53ef\u4ee5\u901a\u8fc7total variance\u7684\u4e0d\u7b49\u5f0f\u5b8c\u6210\u3002\u4ee4 \\(A= \\left|p_{\\theta_0}^{(t)}(\\cdot)-p_{\\theta_1}^{(t)}(\\cdot)\\right|\\) \uff0c \u6839\u636e\u524d\u9762\u63d0\u5230\u7684\u91cd\u8981\u6027\u8d28</p> \\[ \\frac{1}{2}|p(\\cdot)-q(\\cdot)|=\\inf_{\\varphi\\in \\Pi(p,q)}\\left[\\Pr_{(x,y)\\sim \\varphi}(x\\ne y)\\right] \\] <p>\u6211\u4eec\u53ef\u4ee5\u6784\u9020\u4e00\u4e2a\u5206\u5e03 \\(\\varphi(\\cdot,\\cdot,\\cdot,\\cdot)\\) \u4f7f\u5f97</p> \\[ \\varphi(s_t,...)=p_{\\theta_0}(s_t),\\quad \\varphi(:,s_t',...)=p_{\\theta_1}(s_t') \\] \\[ \\Pr_{(s_t,s_t')\\in \\varphi(\\cdot,\\cdot,...)}(s_t\\ne s_t')=\\frac{A}{2}. \\] \\[ \\varphi(s_t,\\cdot,a_t,\\cdot|s_t)=\\pi_{\\theta_0}(a_t|s_t),\\quad \\varphi(\\cdot,s_t',\\cdot,a_t'|s_t')=\\pi_{\\theta_1}(a_t'|s_t') \\] \\[ \\varphi(s_t,s_t,a_t\\ne a_t'|s_t)\\le \\frac{\\epsilon}{2} \\] <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u53ef\u4ee5\u628a \\(\\varphi\\) \u62d3\u5c55\u4e24\u7ef4\uff0c\u5177\u4f53\u5730\uff1a</p> <ol> <li>\u82e5 \\(s_t=s_t',a_t=a_t'\\) \uff0c\u90a3\u4e48 \\(s_{t+1}=s'_{t+1}\\) \uff1b</li> <li>\u82e5\u5426\uff0c\u90a3\u4e48 \\(s_{t+1}\\) \u968f\u673a\u6839\u636e \\(p(s_{t+1}|s_t,a_t)\\) \u91c7\u6837\uff0c \\(s'_{t+1}\\) \u968f\u673a\u6839\u636e \\(p(s_{t+1}|s_t',a_t')\\) \u91c7\u6837\u3002</li> </ol> <p>\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u6709\u4e00\u4e2a \\(\\varphi(\\cdot,\\cdot,\\cdot,\\cdot,\\cdot,\\cdot)\\) \uff0c\u4f7f\u5f97</p> \\[ \\varphi(s_t,\\cdot,a_t,\\cdot,s_{t+1},\\cdot|s_t,a_t)=p_{\\theta_0}(s_{t+1}|s_t,a_t) \\] \\[ \\varphi(\\cdot,s_t',\\cdot,a_t',\\cdot,s'_{t+1}|s_t',a_t')=p_{\\theta_1}(s'_{t+1}|s_t',a_t') \\] <p>\u5e76\u4e14\uff0c</p> \\[ \\Pr_{(s_{t+1},s_{t+1}')\\sim \\varphi(...,\\cdot,\\cdot)}(s_{t+1}\\ne s_{t+1}')\\le \\Pr_{(s_{t},s_{t}')\\sim \\varphi(\\cdot,\\cdot,...)}(s_{t}\\ne s_{t}')+ \\Pr_{(s_{t},s_{t},a_t,a_t')\\sim \\varphi(\\cdot,\\cdot,\\cdot,\\cdot,...)}(a_{t}\\ne a_{t}') \\] \\[ \\le \\frac{A}{2}+ \\frac{\\epsilon}{2} \\] <p>\u56e0\u6b64</p> \\[ \\left|p_{\\theta_0}^{(t+1)}(\\cdot)-p_{\\theta_1}^{(t+1)}(\\cdot)\\right|\\le A+\\epsilon \\] <p>\u5f52\u7eb3\u5f97\u8bc1\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap07/#reference_papers","title":"Reference Papers","text":"<ol> <li>Trust Region Policy Optimization</li> <li>Proximal Policy Optimization Algorithms</li> <li>Reinforcement learning of motor skills with policy gradients\uff08\u4ecb\u7ecd\u4e86Natural Gradient\uff09</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap08/","title":"Introduction to Model-Based Learning","text":"<p>\u6ce8\u610f\u5728\u4e4b\u524d\u7684\u6240\u6709\u7b97\u6cd5\u4e2d\uff0c\u6211\u4eec\u90fd\u628a\u73af\u5883\u5f53\u4f5c\u4e00\u4e2a\u9ed1\u76d2\u4f7f\u7528\uff0c\u6211\u4eec\u7684\u6a21\u578b\u5fc5\u987b\u73af\u5883\u4ea4\u4e92\u6765\u83b7\u5f97\u65b0\u7684state\u548creward\u3002\u8fd9\u6837\u7684\u65b9\u6cd5\u79f0\u4e3aModel-Free Methods\u3002</p> <p>\u4f46\u662f\u9700\u8981\u6ce8\u610f\u6211\u4eec\u7684\u95ee\u9898\u90fd\u662f\u6765\u6e90\u4e8e\u771f\u6b63\u751f\u6d3b\u7684\uff0c\u56e0\u6b64\u73af\u5883\u7684\u6f14\u5316\u89c4\u5f8b \\(p(s_{t+1}|s_t,a_t)\\) \u5b9e\u9645\u4e0a\u662f\u53ef\u4ee5\u77e5\u9053\u7684\u3002\uff08\u6bd4\u5982\u8bf4\uff0c\u7269\u7406\u89c4\u5f8b\u53ef\u4ee5\u7ed9\u6211\u4eec\u5f88\u5927\u7684\u4fe1\u606f\uff1b\u800c\u5728\u8bb8\u591a\u6e38\u620f\u4e2d\uff0c\u66f4\u65b0\u7684\u65b9\u5f0f\u4e5f\u662f\u7531\u6e38\u620f\u89c4\u5219\u7ed9\u5b9a\u7684\u3002\uff09\u6b64\u5916\uff0c\u5c31\u7b97\u6f14\u5316\u65e0\u6cd5\u77e5\u9053\uff0c\u6839\u636e\u540e\u9762\u51e0\u8bb2\u4ecb\u7ecd\u7684\u77e5\u8bc6\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7model-based learning\u6765\u5b66\u4e60\u8fd9\u4e2a\u89c4\u5f8b\u3002</p> <p>\u4e0b\u9762\uff0c\u6211\u4eec\u5c31\u6765\u8ba8\u8bba\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\u4e86\u73af\u5883\u7684\u6f14\u5316\u89c4\u5f8b \\(p(s_{t+1}|s_t,a_t)\\) \uff0c\u6211\u4eec\u5982\u4f55\u5229\u7528\u8fd9\u4e2a\u4fe1\u606f\u6765\u63d0\u5347\u6211\u4eec\u7684\u7b97\u6cd5\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap08/#examples","title":"Examples","text":""},{"location":"Online%20CS%20Courses/CS285/chap08/#deterministic_environment","title":"Deterministic Environment","text":"<p>\u6211\u4eec\u9996\u5148\u6765\u8003\u8651\u4e00\u4e2a\u786e\u5b9a\u6027\u7684\u73af\u5883\u3002\u5bf9\u4e8e\u8fd9\u6837\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u7684\u76ee\u6807\u5b9e\u9645\u4e0a\u662f</p> \\[ a_1,a_2,\\cdots,a_T=\\arg\\max_{a_1,\\cdots,a_T}\\sum_{t=1}^T r(s_t,a_t) \\] <p>\u5176\u4e2d\u6839\u636e\u73af\u5883\u7684\u786e\u5b9a\u6027\u7ed9\u51fa\u4e86 \\(s_{t+1}=f(s_t,a_t)\\) \u3002\u6ce8\u610f\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u5b9e\u9645\u4e0a\u4ee3\u8868\u7740\u4e00\u4e2a\u6ca1\u6709\u4efb\u4f55\u7ea6\u675f\u7684\u4f18\u5316\u95ee\u9898\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4f20\u7edf\u7684\u65b9\u6cd5\u5b8c\u6210\u8fd9\u4e2a\u4f18\u5316\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap08/#non-deterministic_environment","title":"Non-deterministic Environment","text":"<p>\u5bf9\u4e8e\u975e\u786e\u5b9a\u6027\u7684\u73af\u5883\uff0c\u95ee\u9898\u53d8\u5f97\u7a0d\u5fae\u590d\u6742\u3002\u4e4d\u4e00\u60f3\uff0c\u53ef\u80fd\u4f1a\u5047\u8bbe\u6211\u4eec\u7684\u76ee\u6807\u662f</p> \\[ a_1,a_2,\\cdots,a_T=\\arg\\max_{a_1,\\cdots,a_T}\\mathbb{E}_{s_1,\\cdots,s_T}\\left[\\sum_{t=1}^T r(s_t,a_t)\\right] \\] <p>\u4f46\u5b9e\u9645\u4e0a\u5e76\u4e0d\u5bf9\u2014\u2014\u8fd9\u6837\u4e27\u5931\u4e86 \\(s_t\\) \u53ef\u80fd\u4e3a\u4f5c\u51fa\u51b3\u7b56 \\(a_t\\) \u5e26\u6765\u7684\u4fe1\u606f\u3002</p> <p>\u4e00\u4e2a\u76f4\u89c2\u7684\u4f8b\u5b50\uff1a\u5047\u8bbe\u4f60\u53c2\u52a0\u8003\u8bd5\uff0c\u5982\u679c\u6309\u7167\u8fd9\u6837\u7684\u5047\u8bbe\uff0c\u4f60\u53ea\u80fd\u57fa\u4e8e\u6700\u57fa\u7840\u7684\u5206\u5e03 \\(s_0\\) \uff08\u6bd4\u5982\u8003\u7eb2\uff09\u4f5c\u51fa\u51b3\u7b56 \\(a_1\\) \u3002\u4f46\u5b9e\u9645\u4e0a\uff0c \\(s_1\\) \u53ef\u80fd\u662f\u8003\u8bd5\u9898\u76ee\uff01\u663e\u7136\uff0c\u6700\u4f18\u7684\u7b56\u7565\u5e76\u4e0d\u662f\u53ea\u57fa\u4e8e \\(s_0\\) \u4f5c\u51fa\u51b3\u7b56\uff0c\u800c\u662f\u5e94\u8be5\u770b\u9898\u76ee\u6765\u7ed9\u51fa\u7b54\u6848\u3002</p> <p>\u4e0a\u9762\u8fd9\u4e00\u65b9\u6cd5\u4e5f\u79f0\u4e3aopen loop\uff1a\u76f8\u5f53\u4e8e\u4f60\u4ece\u73af\u5883\u53ea\u83b7\u5f97\u4e00\u4e2a \\(s_0\\) \u7684\u4fe1\u606f\uff0c\u800c\u4f60\u7684\u4fe1\u606f \\(a_1,\\cdots,a_T\\) \u4f20\u9001\u7ed9\u73af\u5883\u4e4b\u540e\u5c31\u518d\u4e5f\u6ca1\u6709\u6536\u5230\u53cd\u9988\u3002</p> <p>\u4f46\u6211\u4eec\u4e5f\u53ef\u4ee5\u628a\u5b83\u53d8\u4e3aclose loop\uff1a\u6211\u4eec\u6839\u636e \\(s_1\\) \u8f93\u51fa\u7684\u5e76\u4e0d\u662f\u4e00\u7cfb\u5217\u786e\u5b9a\u7684action\uff0c\u800c\u662f\u4e00\u4e2apolicy \\(\\pi_t(a_t|s_t)\\) \u3002\u6ce8\u610f\u8fd9\u91cc\u7684policy\u751a\u81f3\u53ef\u4ee5\u548c \\(t\\) \u76f8\u5173\uff0c\u56e0\u4e3a\u8fd9\u548c\u4e4b\u524d\u6211\u4eec\u5b8c\u5168\u5bf9\u73af\u5883\u7684\u52a8\u529b\u5b66\u4e00\u65e0\u6240\u77e5\u7684\u60c5\u51b5\u4e0d\u540c\uff0c\u6211\u4eec\u53ef\u4ee5\u4f5c\u51fa\u66f4\u52a0\u7cbe\u7ec6\u7684\u51b3\u7b56\u3002</p> <p>\u8fd9\u91cc\u4e00\u4e2a\u6bd4\u8f83\u597d\u73a9\u7684\u4e8b\u60c5\u662f\uff0c\u6211\u4eec\u5982\u4f55\u8868\u8fbe \\(\\pi\\) \u5462\uff1f\u4e4b\u524d\uff0c \\(\\pi\\) \u662f\u4e00\u4e2a\u795e\u7ecf\u7f51\u7edc\uff1b\u4f46\u73b0\u5728\u6211\u4eec\u65ad\u8a00 \\(\\pi\\) \u5b9e\u9645\u4e0a\u53ef\u4ee5\u505a\u6210\u7ebf\u6027\uff1a</p> \\[ \\pi(a_t|s_t)=\\text{Deterministic}(K_ts_t+k_t) \\] <p>\u800c\u5176\u4e2d\u53ea\u6709 \\(K_t,k_t\\) \u662f\u4e00\u4e9b\u6211\u4eec\u9700\u8981\u4f18\u5316\u7684\u53c2\u6570\u3002</p> <p>Q: \u4e3a\u4ec0\u4e48\u53ef\u4ee5\u8fd9\u6837\u505a\u5462\uff1f</p> <p>A: \u56e0\u4e3a\u6211\u4eec\u5df2\u7ecf\u6bd4\u4e4b\u524d\u5f3a\u5927\u4e86\u592a\u591a\uff01\u8bbe\u60f3\u6211\u4eec\u53d1\u5c04\u706b\u7bad\u4e0a\u592a\u7a7a\uff0c\u5728\u4e4b\u524d\u8bb2\u89e3\u7684\u7b97\u6cd5\u4e2d\uff0c\u6211\u4eec\u76f8\u5f53\u4e8e\u5b8c\u5168\u4e0d\u77e5\u9053\u81ea\u5df1\u5728\u505a\u4ec0\u4e48\uff08\u751a\u81f3\u65e0\u6cd5\u533a\u5206\u81ea\u5df1\u662f\u5728\u53d1\u5c04\u706b\u7bad\u8fd8\u662f\u5728\u73a9\u539f\u795e\uff01\uff09\uff0c\u56e0\u6b64\u5f53\u7136\u7ed9\u5b9a\u4e00\u4e2a \\(s\\) \u5bf9\u5e94\u7684\u51b3\u7b56 \\(a\\) \u4e5f\u4f1a\u6781\u5176\u590d\u6742\uff1b\u800c\u73b0\u5728\uff0c\u6211\u4eec\u76f8\u5f53\u4e8e\u5df2\u7ecf\u901a\u6653\u7269\u7406\u89c4\u5f8b\uff0c\u7ed9\u51fa\u4e86\u706b\u7bad\u7684\u8f68\u8ff9\u548c\u5404\u4e2a\u9700\u8981\u7684\u7269\u7406\u53c2\u6570\u3002\u552f\u4e00\u9700\u8981\u505a\u7684\u4e8b\u60c5\u5c31\u662f\u5904\u7406\u4e00\u4e9b\u53ef\u80fd\u7684\u5fae\u6270\uff0c\u6bd4\u5982\u98ce\u901f\u7b49\u7b49\u3002\u8fd9\u6837\uff0c\u5f53\u7136\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u4e00\u4e2a\u7ebf\u6027\u7684\u51fd\u6570\u6765\u8868\u5f81\u6211\u4eec\u5bf9\u4e8e\u5404\u79cd\u5fae\u6270\u5e94\u8be5\u4f5c\u51fa\u600e\u6837\u5fae\u5c0f\u7684\u53cd\u5e94\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap08/#algorithms","title":"Algorithms","text":"<p>\u6211\u4eec\u5148\u8003\u8651open loop\u7684\u95ee\u9898\uff0c\u5e76\u4ecb\u7ecd\u4e00\u4e2a\u7cfb\u7edf\u5316\u7684\u89e3\u51b3\u65b9\u6cd5\u3002\u540c\u6837\uff0c\u7b80\u5355\u8d77\u89c1\uff0c\u6211\u4eec\u5148\u8003\u8651\u4e00\u4e2a\u786e\u5b9a\u6027\u7684\u73af\u5883\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u95ee\u9898\u5c31\u662f\u4e00\u4e2a\u4f18\u5316\u95ee\u9898\uff1a</p> \\[ a_1,a_2,\\cdots,a_T=\\arg\\max_{a_1,\\cdots,a_T}\\sum_{t=1}^T r(s_t,a_t),\\quad  s_{t+1}=f(s_t,a_t) \\]"},{"location":"Online%20CS%20Courses/CS285/chap08/#stochastic_optimization","title":"Stochastic Optimization","text":"<p>\u7b2c\u4e00\u79cd\u65b9\u6cd5\u5341\u5206\u6709\u8da3\u2014\u2014\u6211\u4eec\u5e76\u4e0d\u662f\u7528\u4e4b\u524d\u5e38\u89c1\u7684gradient-based\u7684\u5404\u79cd\u65b9\u6cd5\uff0c\u800c\u662f\u8003\u8651\u4e00\u79cd\u968f\u673a\u5316\u7684\u89e3\u51b3\u65b9\u6848\u3002\u4e00\u822c\u5730\uff0c\u6211\u4eec\u8003\u5bdf\u4e00\u4e2a\u4f18\u5316\u76ee\u6807</p> \\[ \\max_{a_1,\\cdots,a_T} J(a_1,\\cdots,a_T) \\] <p>\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u88ab\u79f0\u4e3a\u201crandom shooting method\u201d\uff0c\u4e5f\u5c31\u50cf\u4e00\u4e2a\u76f2\u4eba\u5c04\u7bad\u4e00\u6837\uff1a\u6211\u4eec\u968f\u673a\u751f\u6210\u4e00\u4e9b \\(a_1,\\cdots,a_T\\) \uff0c\u7136\u540e\u8ba1\u7b97 \\(J\\) \uff0c\u6700\u540e\u9009\u62e9\u6700\u597d\u7684\u90a3\u4e2a\u3002</p> <p>\u8fd9\u663e\u7136\u6bd4\u8f83\u611a\u8822\u2014\u2014\u6700\u597d\u7684\u4e00\u7ec4\u53c2\u6570\u51fa\u73b0\u7684\u6982\u7387\u53ef\u80fd\u5f88\u5c0f\uff0c\u5bfc\u81f4\u6211\u4eec\u5f88\u96besample\u5230\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0cCEM(Cross Entropy Method)\u51fa\u73b0\u4e86\uff1a\u6211\u4eec\u6bcf\u4e00\u6b21\u90fd\u91cd\u65b0\u8bbe\u7f6e\u6211\u4eec\u91c7\u6837\u7684\u5206\u5e03\uff0c\u4f7f\u5f97\u5b83\u201c\u9760\u8fd1\u201d\u6700\u597d\u7684\u6570\u636e\u70b9\u7684\u5206\u5e03\u3002\u5177\u4f53\u5730\uff1a</p> <p>Cross Entropy Method</p> <p>\u91cd\u590d\uff1a 1. \u968f\u673a\u91c7\u6837 \\(\\mathbf{A}_1,\\mathbf{A}_2,\\cdots,\\mathbf{A}_N\\) \uff08\u8fd9\u91cc \\(\\mathbf{A}=(a_1,\\cdots,a_T)\\) \uff09\uff1b 2. \u8ba1\u7b97 \\(J(\\mathbf{A}_1),J(\\mathbf{A}_2),\\cdots,J(\\mathbf{A}_N)\\) \uff1b 3. \u4fdd\u7559\u6700\u597d\u7684 \\(M\\) \u4e2a\u6570\u636e\u70b9\uff0c\u66f4\u65b0 \\(p(\\mathbf{A})\\) \u4f7f\u5f97\u5b83\u66f4\u63a5\u8fd1\u8fd9 \\(M\\) \u4e2a\u6570\u636e\u70b9\u7684\u5206\u5e03\u3002\u4e00\u822c\u5730\uff0c \\(p(\\mathbf{A})\\) \u53d6\u4e3a\u9ad8\u65af\u5206\u5e03\u3002</p> <p>\u4f46\u662f\u524d\u9762\u4ecb\u7ecd\u7684\u8fd9\u4e9b\u65b9\u6cd5\u90fd\u6709\u4e00\u4e2a\u5341\u5206\u4e25\u91cd\u7684\u95ee\u9898\uff1a\u8981\u60f3\u627e\u5230\u6700\u4f18\u89e3\uff0c\u603b\u5f52\u8981\u91c7\u6837\u8986\u76d6\u6240\u6709\u53ef\u80fd\u7684 \\(\\mathbf{A}\\) \u6784\u6210\u7a7a\u95f4\u7684\u4e00\u5927\u90e8\u5206\u624d\u53ef\u4ee5\u3002\u8fd9\u6837\uff0c\u7ef4\u5ea6\u8d8a\u5927\uff0c\u6211\u4eec\u9700\u8981\u7684\u91c7\u6837\u70b9\u5c31\u8d8a\u591a\uff0c\u8ba1\u7b97\u91cf\u5c31\u4f1a\u8d8a\u5927\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap08/#monte_carlo_tree_search","title":"Monte Carlo Tree Search","text":"<p>Monte Carlo Tree Search(MCTS)\u662f\u4e00\u79cd\u66f4\u52a0\u667a\u80fd\u7684\u65b9\u6cd5\uff0c\u53ef\u4ee5\u9002\u5ea6\u7684\u907f\u514d\u8fd9\u4e2a\u95ee\u9898\u3002\u5b83\u7684\u57fa\u672c\u601d\u60f3\u662f\uff0c\u6211\u4eec\u4ece\u6811\u6839\u5f00\u59cb\u5411\u4e0b\u5bfb\u627e\uff0c\u6bcf\u6b21expand\u4e00\u5b9a\u7684\u8282\u70b9\uff0c\u9009\u51fa\u5176\u4e2d\u6700\u6709\u524d\u9014\u7684\uff1b\u63a5\u4e0b\u6765\u4ece\u9009\u51fa\u7684\u8282\u70b9\u8fdb\u4e00\u6b65\u5f00\u59cbexpand\u3002\u8fd9\u6709\u70b9\u7c7b\u4f3c\u4e8ebeam search\uff0c\u5173\u952e\u5728\u4e8e\u6211\u4eec\u65e0\u9700\u5c55\u5f00\u6240\u6709\u7684\u8282\u70b9\uff0c\u540c\u65f6\u4e5f\u6bd4\u8d2a\u5fc3\u505a\u7684\u66f4\u597d\u3002</p> <p>\u4e00\u4e2aMCTS\u7684\u5b9e\u4f8b\u9700\u8981\u5177\u6709\u4ee5\u4e0b\u4e24\u4e2a\u90e8\u5206\uff1a - Tree Policy\uff1a\u7ed9\u5b9a\u5f53\u524d\u6240\u6709\u5df2\u7ecfexpand\u8fc7\u7684\u8282\u70b9\uff0c\u63a5\u4e0b\u6765\u5e94\u8be5expand\u54ea\u4e2a\u8282\u70b9\uff1f - Default Policy\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u8282\u70b9\uff0c\u6211\u4eec\u5982\u4f55\u8bc4\u5224\u5b83\u662f\u5426\u6709\u524d\u9014\uff1f\uff08\u8fd9\u6837\u7684\u8bc4\u5224\u9700\u8981\u57fa\u4e8e\u548c\u73af\u5883\u7684\u4ea4\u4e92\uff1b\u4f46\u6211\u4eec\u5f53\u524d\u5e76\u4e0d\u77e5\u9053\u5e94\u8be5\u5982\u4f55\u548c\u73af\u5883\u4ea4\u4e92\uff0c\u6240\u4ee5\u6211\u4eec\u91c7\u7528\u8fd9\u6837\u4e00\u4e2adefault policy\uff0c\u4ece\u800c\u516c\u5e73\u5730\u8bc4\u5224\u4e0d\u540c\u8282\u70b9\u3002\uff09</p> <p>\u800c\u5176\u7b97\u6cd5\u7684\u601d\u60f3\u548c\u524d\u9762\u7b80\u5355\u4ecb\u7ecd\u7684\u57fa\u672c\u7c7b\u4f3c\uff0c\u4f46\u6ce8\u610f\u5e76\u4e0d\u5b8c\u5168\u548cbeam search\u4e00\u81f4\u3002\u5177\u4f53\u5730:</p> <p>Monte Carlo Tree Search</p> <pre><code>def MCTS(root):\n    while True:\n        # Selection &amp; Expansion\n        node = TreePolicy(root)\n        # Simulation\n        reward = DefaultPolicy(node)\n        # Backpropagation\n        update(node,reward)\n\ndef update(node,reward):\n    while True:\n        node.N += 1\n        node.Q += reward\n        if node.parent is None:\n            break\n        node = node.parent\n</code></pre> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u4ecb\u7ecd\u4e00\u4e0b\u5e38\u89c1\u7684Tree Policy\u2014\u2014UCT Tree Policy\uff1a <pre><code>def UCT(expanded):\n    if not root.fully_expanded():\n        return root.expand()\n    else:\n        best_child = argmax([Score(child) for child in root.children])\n        return UCT(best_child)\n\ndef Score(node):\n    return node.Q/node.N + C*sqrt(log(node.parent.N)/node.N)\n</code></pre></p> <p>\u8fd9\u91cc\uff0c\u5927\u6982\u7684\u601d\u8def\u662f\uff1a\u5982\u679c\u67d0\u4e2a\u6df1\u5ea6\u8f83\u4f4e\u7684\u8282\u70b9\u6ca1\u6709\u88ab\u5b8c\u5168expand\uff0c\u5c31\u4f18\u5148\u5b8c\u5168expand\uff1b\u800c\u5bf9\u4e8e\u5b8c\u5168expand\u7684\u8282\u70b9\uff0c\u5c31\u8003\u8651score\u54ea\u4e2a\u6700\u5927\u3002\u53ef\u4ee5\u770b\u51fa\uff0c\u8fd9\u91cc\u7684score\u51fd\u6570</p> \\[ \\text{Score}(s_t)=\\frac{Q(s_t)}{N(s_t)}+C\\cdot \\sqrt{\\frac{\\log N(s_{t-1})}{N(s_t)}} \\] <p>\u7b2c\u4e00\u9879\u4ee3\u8868\u7740\u8fd9\u4e2a\u70b9\u6574\u4f53\u662f\u5426\u6709\u524d\u9014\uff1b\u800c\u7b2c\u4e8c\u9879\u4ee3\u8868\u4e3a\u6ca1\u6709\u600e\u4e48expand\u8fc7\u7684\u70b9\u7684\u52a0\u5206\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap08/#deterministic_optimization","title":"Deterministic Optimization","text":"<p>\u6211\u4eec\u524d\u9762\u4ecb\u7ecd\u7684\u662f\u968f\u673a\u5316\u7684\u65b9\u6cd5\uff0c\u4e0b\u9762\u5c31\u8ba9\u6211\u4eec\u56de\u5230\u719f\u6089\u7684\u9886\u57df\uff0c\u8003\u5bdf\u548c\u68af\u5ea6\u76f8\u5173\u7684\u65b9\u6848\u3002</p> <p>\u4e00\u4e2a\u76f4\u89c2\u7684\u601d\u60f3\u662f\u6211\u4eec\u76f4\u63a5\u5bf9</p> \\[ a_1,a_2,\\cdots,a_T=\\arg\\max_{a_1,\\cdots,a_T}\\left[r(s_1,a_1)+r(f(s_1,a_1),a_2)+\\cdots+r(f(f(\\cdots),a_{T-1}),a_T)\\right] \\] <p>\u8ba1\u7b97\u68af\u5ea6\u5e76\u4f18\u5316\u3002\u4f46\u5b9e\u9645\u4e0a\u8fd9\u6709\u4e00\u4e2a\u4e0d\u6613\u5bdf\u89c9\u7684\u95ee\u9898\uff1a\u5957\u4e86\u8fc7\u591a\u5c42\u6570\u7684 \\(f\\) \u4e4b\u540e\uff0c\u4f53\u7cfb\u7684\u68af\u5ea6\u5f88\u5bb9\u6613\u7206\u70b8\u3002\u5b9e\u9645\u4e0a\uff0c\u5982\u679c\u662f\u8fd9\u6837\u64cd\u4f5c\uff0c\u4e00\u822c\u4e0d\u80fd\u4f7f\u7528\u68af\u5ea6\u4e0b\u964d\u8fd9\u79cdfirst-order method\uff0c\u800c\u662f\u5fc5\u987b\u91c7\u7528second-order method\u3002</p> <p>\u76f4\u89c2\u4e0a\uff0c\u4e3a\u4ec0\u4e48\u8fd9\u6837\u4f1a\u6709\u95ee\u9898\u5462\uff1f\u56e0\u4e3a\u8003\u8651\u7b2c\u4e00\u6b65\u7684 \\(a_1\\) \uff0c\u5b83\u4f1a\u5f71\u54cd\u5230 \\(s_2\\) \uff0c\u8fdb\u800c\u5f71\u54cd\u5230 \\(s_3,\\cdots,s_T\\) \uff0c\u8fd9\u6837\u4e0d\u65ad\u5411\u540e\u4f20\u64ad\u3002\u5982\u679c\u4e00\u7cfb\u5217 \\(s_i\\) \u8fde\u6210\u4e00\u4e2a\u66f2\u7ebf\uff0c\u90a3\u4e48 \\(a_1\\) \u5c31\u50cf\u8fd9\u4e2a\u66f2\u7ebf\u4e00\u5f00\u59cb\u7684\u65b9\u5411\u90a3\u6837\uff0c\u201c\u7275\u4e00\u53d1\u800c\u52a8\u5168\u8eab\u201d\u3002\u8fd9\u6837\uff0c\u4f46\u51e1 \\(a_1\\) \u7a0d\u5fae\u6709\u4e00\u70b9\u6270\u52a8\uff0c\u6574\u4e2a\u4f53\u7cfb\u5c31\u4f1a\u53d8\u5316\u5de8\u5927\u3002</p> <p>\u8fd9\u6837\u7684\u65b9\u6cd5\u4e5f\u53eb\u505ashooting method\u3002\u4e0e\u4e4b\u76f8\u5bf9\u7684\u662fcollocation method\uff1a\u6211\u4eec\u628a\u95ee\u9898\u8f6c\u5316\u4e3a</p> <p>$$ a_1,\\cdots,a_T,s_1,\\cdots,s_T=\\arg\\max \\left[r(s_1,a_1)+\\cdots+r(s_T,a_T)\\right] $$ \u4f46\u9700\u8981\u589e\u52a0constraint </p> \\[ s_{t+1}=f(s_t,a_t)\\qquad (\\forall t=1,2,\\cdots,T-1) \\] <p>\u8fd9\u6837\u7684\u65b9\u6cd5\u5c31\u89e3\u51b3\u4e86\u4e4b\u524dshooting method\u7684\u95ee\u9898\uff1a\u6bcf\u4e00\u4e2a\u53d8\u91cf\u90fd\u53ea\u5f71\u54cd\u6700\u8fd1\u7684 \\(r\\) \u548c\u7ea6\u675f\u6761\u4ef6\u3002\u5b9e\u9a8c\u4e0a\uff0c\u5bf9\u4e8e\u8fd9\u6837\u7684\u65b9\u6cd5\uff0cfirst order\u5c31\u591f\u4e86\u3002</p> <p>\u4f46\u63a5\u4e0b\u6765\u6211\u4eec\u8fd8\u662f\u6682\u65f6\u5148\u8003\u8651shooting method\u3002\u6211\u4eec\u6765\u4ecb\u7ecd\u4e00\u4e2a\u91cd\u8981\u7684\u65b9\u6cd5\uff1aLQR(Linear Quadratic Regulator)\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap08/#lqr","title":"LQR","text":"<p>\u6211\u4eec\u7684\u76ee\u6807\u662f</p> \\[ J=r(s_1,a_1)+r(f(s_1,a_1),a_2)+\\cdots+r(f(f(\\cdots),a_{T-1}),a_T) \\] <p>\u6211\u4eec\u9996\u5148\u8003\u8651\u5efa\u7acb\u4e00\u4e2a\u7b80\u5316\u7684\u95ee\u9898\u3002\u4e3a\u4e86\u65b9\u4fbf\u8d77\u89c1\uff0c \\(f\\) \u53ef\u4ee5\u9009\u4e3a\u7ebf\u6027\u7684\u5173\u7cfb\uff1a</p> \\[ f(s_t,a_t)=\\mathbf{F_t}\\dbinom{s_t}{a_t}+f_t \\] <p>\u4f46 \\(r\\) \u5e76\u4e0d\u80fd\u7b80\u5355\u5730\u9009\u4f5c\u4e00\u6b21\u51fd\u6570\uff0c\u56e0\u4e3a\u6211\u4eec\u9700\u8981\u628a\u5b83\u6700\u5927\u5316\uff0c\u4e00\u6b21\u51fd\u6570\u4f1a\u5bfc\u81f4\u53d8\u91cf\u5168\u90e8\u8d8b\u4e8e\u65e0\u7a77\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u9009\u53d6</p> \\[ r(s_t,a_t)=\\frac{1}{2}(s_t^TA_ts_t+2s_t^TB_ta_t+a_t^TC_ta_t) +x_t^T s_t+y_t^T a_t \\] <p>\u5176\u4e2d \\(A_T,C_T\\) \u662f\u5bf9\u79f0\u77e9\u9635\u3002\u63a5\u4e0b\u6765\uff0c\u8fd9\u4e2a\u95ee\u9898\u5c31\u5b8c\u5168\u53d8\u6210\u4e86\u4e00\u4e2a\u4ee3\u6570\u95ee\u9898\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap08/#stupid_derivations","title":"Stupid Derivations","text":"<p>\u8fd9\u6bb5\u63a8\u5bfc\u6ca1\u4ec0\u4e48\u6280\u672f\u542b\u91cf\uff0c\u6240\u4ee5\u53ef\u4ee5\u8003\u8651\u8df3\u8fc7\u63a8\u5bfc\uff0c\u76f4\u63a5\u770b\u540e\u9762\u7684Algorithm\u3002\u6211\u4eec\u53ef\u4ee5\u4ece\u6700\u540e\u4e00\u4e2aaction\u5f00\u59cb\uff0c\u6211\u4eec\u7684\u76ee\u6807\u5b9e\u9645\u4e0a\u662f</p> \\[ Q(s_T,a_T)=\\frac{1}{2}(s_T^TA_Ts_T+2s_T^T B_Ta_T+a_T^TC_Ta_T) +x_T^T s_T+y_T^T a_T \\] <p>\uff08\u6ce8\u610f\u8fd9\u91cc\u7684\u8bb0\u53f7\u548c\u4e4b\u524d\u7684\u76f8\u4f3c\u6027\uff1a \\(Q\\) \u5c31\u76f8\u5f53\u4e8e\u4e4b\u524d\u7684Q function\uff09\u7531\u6b64\u53ef\u4ee5\u89e3\u51fa\u7b2c \\(T\\) \u6b65\u6700\u4f18\u7684action\uff1a</p> \\[ a_T=-C_T^{-1}(y_T+B_Ts_T) \\] <p>\u7136\u540e\uff0c\u5e26\u5165\u539f\u6765\u7684\u8868\u8fbe\u5f0f\uff0c\u6211\u4eec\u4f1a\u5f97\u5230\u5173\u4e8e \\(s_T\\) \u7684\u7b49\u6548\u76ee\u6807\uff1a</p> \\[ V(s_T)=\\frac{1}{2}(s_T^TA_Ts_T-s_T^TB_T^TC_T^{-1}B_Ts_T)+x_T^Ts_T-y_T^TC_T^{-1}B_Ts_T \\] <p>\uff08\u6ce8\u610f\u8fd9\u4e2a \\(V\\) \u4e5f\u662f\u7b49\u6548\u7684value function\uff09\u6211\u4eec\u53ef\u4ee5\u8fdb\u4e00\u6b65\u7b80\u5316\u5730\u8bb0</p> \\[ V_T=A_T-B_T^TC_T^{-1}B_T, \\quad v_T=x_T-B_T^TC_T^{-1}y_T \\] <p>\u518d\u4ee3\u5165 \\(s_T\\) \u7528 \\(s_{T-1},a_{T-1}\\) \u7684\u8868\u8fbe\u5f0f\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7ed9\u51fa</p> \\[ V(s_T)=\\frac{1}{2}(s_{T-1},a_{T-1})\\mathbf{F}_{T-1}^TV_T\\mathbf{F}_{T-1}\\dbinom{s_{T-1}}{a_{T-1}}+(s_{T-1},a_{T-1})\\mathbf{F}_{T-1}^T(V_Tf_{T-1}+v_T) \\] <p>\u6b64\u65f6\uff0c\u5c31\u53ef\u4ee5\u6d88\u53bb\u6240\u6709 \\(T\\) \u65f6\u523b\u7684\u53c2\u91cf\uff0c\u5f97\u5230 \\(a_{T-1}\\) \u9700\u8981\u4f18\u5316\u7684\u8868\u8fbe\u5f0f\uff1a</p> \\[ Q(s_{T-1},a_{T-1})=\\frac{1}{2}(s_{T-1}^TA_{T-1}s_{T-1}+2s_{T-1}^T B_{T-1}a_{T-1}+a_{T-1}^TC_{T-1}a_{T-1}) +x_{T-1}^T s_{T-1}+y_{T-1}^T a_{T-1} \\] \\[ Q(s_{T-1},a_{T-1})=\\frac{1}{2}(s_{T-1},a_{T-1})^T \\mathbf{Q}_{T-1}\\dbinom{s_{T-1}}{a_{T-1}}+\\mathbf{q}_{T-1}^T\\dbinom{s_{T-1}}{a_{T-1}} \\] <p>\u5176\u4e2d</p> \\[ \\mathbf{Q}_{T-1}=\\dbinom{A_{T-1}\\quad B_{T-1}}{B_{T-1}^T\\quad C_{T-1}}+\\mathbf{F}_{T-1}^TV_T\\mathbf{F}_{T-1} \\] \\[ \\mathbf{q}_{T-1}= \\dbinom{x_{T-1}}{y_{T-1}}+(f_{T-1}^TV_T^T+v_T^T)\\mathbf{F}_{T-1} \\] <p>\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u5b8c\u6210\u4e86\u4e00\u4e2a\u8f6e\u56de\uff1a\u6211\u4eec\u518d\u4e00\u6b21\u56de\u5230\u4e86\u8981\u4f18\u5316\u8fd9\u6837\u4e00\u4e2a\u4e8c\u6b21\u5f62\u5f0f\u7684\u8868\u8fbe\u3002\u7c7b\u4f3c\u4e4b\u524d\u5730\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6c42\u51fa\u6700\u4f18\u7684 \\(a_{T-1}\\) \uff0c\u7136\u540e\u636e\u6b64\u6211\u4eec\u53ef\u4ee5\u7b97\u51fa \\(V_{T-1},v_{T-1}\\) \uff0c\u7136\u540e\u7ee7\u7eed\u5411\u524d\u63a8\u8fdb\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap08/#lqr_algorithm","title":"LQR Algorithm","text":"<p>\u6211\u4eec\u53ef\u4ee5\u628a\u524d\u9762\u7684\u8ba1\u7b97\u5206\u4e3abackward pass\u548cforward pass\u3002\u5728backward pass\u4e2d\uff0c\u6211\u4eec\u5012\u7740\u8ba1\u7b97\u51fa\u5404\u4e2a\u53c2\u91cf\uff1b\u5728forward pass\u4e2d\uff0c\u6211\u4eec\u6839\u636e\u8fd9\u4e9b\u53c2\u91cf\u548c \\(s_1\\) \u8ba1\u7b97\u51fa\u6700\u4f18\u7684action\u3002</p> <p>LQR Backward Pass</p> <ol> <li>\u521d\u59cb\u5316\uff1a \\(\\mathbf{Q}_T=\\dbinom{A_T\\quad B_T}{B_T^T\\quad C_T},\\mathbf{q}_T=\\dbinom{x_T}{y_T}\\)</li> <li>\u5bf9 \\(t=T,T-1,\\cdots,1\\) \uff1a<ol> <li>\\(a_t=-C_t^{-1}(y_t+B_ts_t)\\)</li> <li>\\(V_t=A_t-B_t^TC_t^{-1}B_t, \\quad v_t=xt-B_t^TC_t^{-1}y_t\\)</li> <li>\\(\\dbinom{A_{t-1}\\quad B_{t-1}}{B_{t-1}^T\\quad C_{t-1}}\\texttt{ += } \\mathbf{F}_{T-1}^TV_{t}\\mathbf{F}_{T-1}\\) \uff08\u5bf9\u5e94 \\(\\mathbf{Q}_{t-1}\\) \uff09\uff1b \\(\\dbinom{x_{t-1}}{y_{t-1}}\\texttt{ += } (\\mathbf{F}_{T-1}^TV_{t}^T+v_{t}^T)\\mathbf{F}_{T-1}\\) \uff08\u5bf9\u5e94 \\(\\mathbf{q}_{t-1}\\) \uff09</li> </ol> </li> </ol> <p>LQR Forward Pass</p> <p>\u5bf9 \\(t=1,2,\\cdots,T\\) :</p> <ol> <li>\\(a_t=-C_t^{-1}(y_t+B_ts_t)\\)</li> <li>\\(s_{t+1}=\\mathbf{F_t}\\binom{s_t}{a_t}+f_t+f_t\\)</li> </ol> <p>\u6700\u540e\uff0c\u4e00\u4e2acomment\u662f\uff0c\u6211\u4eec\u679c\u7136\u770b\u5230\u8fd9\u91cc\u7684policy\u5f88\u7b80\u5355\uff0c\u5c31\u662f\u4e00\u5f00\u59cb\u6211\u4eec\u63d0\u51fa\u7684\u7ebf\u6027\u5f62\u5f0f\u3002\u8fd9\u4e5f\u5370\u8bc1\u4e86\u5728\u6700\u4f4e\u9636\u8fd1\u4f3c\u4e0b\uff0c\u7ebf\u6027\u7684policy\u662f\u4e00\u4e2a\u5408\u7406\u7684\u89e3\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap08/#extend_lqr_to_stochastic_case_but_close_loop","title":"Extend LQR to Stochastic Case (But Close Loop)","text":"<p>\u795e\u5947\u7684\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u8f7b\u677e\u5730\u628aLQR\u63a8\u5e7f\u5230stochastic\u7684\u60c5\u51b5\uff08\u8fd9\u91cc\uff0c\u8003\u8651close loop\u7684\u60c5\u51b5\uff0c\u4e5f\u5c31\u662f\u5728\u505a\u51b3\u7b56 \\(a_t\\) \u7684\u65f6\u5019\u53ef\u4ee5\u83b7\u5f97 \\(s_1,\\cdots,s_t\\) \u7684\u4fe1\u606f\uff09\u3002\u5e76\u4e14\uff0c\u53ea\u8981\u6211\u4eec\u4f5c\u51fa\u5047\u8bbe\uff1a\u73af\u5883\u7684\u6f14\u5316\u662f\u9ad8\u65af\u5206\u5e03</p> \\[ p(s_{t+1}|s_t,a_t)=\\mathcal{N}(f(s_t,a_t),\\Sigma_t) \\] <p>\u5176\u4e2d \\(f(s_t,a_t)=\\mathbf{F_t}\\binom{s_t}{a_t}+f_t\\) \u7684\u5f62\u5f0f\u548c\u4e4b\u524d\u76f8\u540c\u3002\u6211\u4eec\u5b9e\u9645\u4e0a\u53ef\u4ee5\u8bf4\u660e\uff0c\u73b0\u5728\u7684\u60c5\u51b5\u4e0b\u51b3\u5b9a\u6027\u7684\u6700\u4f18\u7b56\u7565\u548c\u539f\u6765\u5b8c\u5168\u76f8\u540c\u3002</p> <p>\u6211\u4eec\u6765\u8bf4\u660e\u8fd9\u4e00\u70b9\u3002\u73b0\u5728\u9700\u8981\u4f18\u5316\u7684\u8868\u8fbe\u5f0f\u662f</p> \\[ J=r(s_1,a_1)+\\mathbb{E}_{s_2\\sim p(\\cdot|s_1,a_1)}\\left[r(s_2,a_2)+\\mathbb{E}_{s_3\\sim p(\\cdot|s_2,a_2)}\\left[\\cdots\\right]\\right] \\] <p>\u8ba9\u6211\u4eec\u6765\u5f52\u7eb3\u5730\u8bba\u8bc1\u8fd9\u4e00\u70b9\u3002\u9996\u5148\uff0c\u5bf9\u4e8e \\(a_T\\) \uff0c\u6211\u4eec\u77e5\u9053\u539f\u5148\u7684\u89e3</p> \\[ a_T=-C_T^{-1}(y_T+B_Ts_T) \\] <p>\u5bf9\u4e8e\u6bcf\u4e00\u4e2a \\(s_T\\) \u90fd\u662f\u6700\u4f18\u89e3\uff0c\u56e0\u6b64\u5b83\u5728\u671f\u5f85\u503c\u4e0b\u4f9d\u7136\u662f\u6700\u4f18\u89e3\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5fc5\u987b\u8ba1\u7b97</p> \\[ \\mathbb{E}_{s_{T}\\sim p(\\cdot|s_{T-1},a_{T-1})}\\left[V(s_T)\\right] \\] <p>\u5176\u4e2d</p> \\[ V(s_T)=\\frac{1}{2}s_T^TV_Ts_T+v_T^Ts_T \\] \\[ p(s_T|s_{T-1},a_{T-1})\\sim \\mathcal{N}\\left(\\mu_{T-1},\\Sigma_{T-1}\\right) \\] \\[ \\mu_{T-1}=\\mathbf{F_{T-1}}\\dbinom{s_{T-1}}{a_{T-1}}+f_{T-1} \\] <p>\u8fd9\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u8ba1\u7b97\u51fa</p> \\[ \\mathbb{E}_{s_{T}\\sim p(\\cdot|s_{T-1},a_{T-1})}\\left[V(s_T)\\right]=\\mathbb{E}_{s_{T}\\sim p(\\cdot|s_{T-1},a_{T-1})}\\left[\\frac{1}{2}s_T^TV_Ts_T+v_T^Ts_T\\right] \\] \\[ =\\frac{1}{2}\\mu_{T-1}^TV_T\\mu_{T-1}+v_T^T\\mu_{T-1}+\\frac{1}{2}\\text{tr}(V_T^T\\Sigma_{T-1}) \\] <p>\u6ce8\u610f\u5230\u7b2c\u4e09\u9879\u662f\u5e38\u6570\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u5220\u6389\u8fd9\u4e00\u9879\u3002\u6b64\u65f6\uff0c\u6211\u4eec\u53d1\u73b0\u53ea\u4fdd\u7559\u4e86\u9ad8\u65af\u5206\u5e03\u7684\u5747\u503c\uff0c\u56e0\u6b64\u73b0\u5728\u7684 \\(V(s_T)\\) \u7684\u671f\u5f85\u503c\u4f9d\u7136\u548c\u4e4b\u524d\u7684\u8868\u8fbe\u5f0f\u4e00\u81f4\u3002\u56e0\u6b64\uff0c \\(\\mathbf{Q}\\) \u51fd\u6570\u548c \\(\\mathbf{q}\\) \u51fd\u6570\u7684\u8868\u8fbe\u5f0f\u4e5f\u548c\u4e4b\u524d\u4e00\u81f4\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53c8\u5b8c\u6210\u4e86\u4e00\u4e2a\u8f6e\u56de\uff0c\u5c31\u8bc1\u660e\u4e86\u5728stochastic\u7684\u60c5\u51b5\u4e0b\uff0cLQR\u4f9d\u7136\u662f\u6700\u4f18\u7684\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap08/#extend_lqr_to_nonlinear_case","title":"Extend LQR to Nonlinear Case","text":"<p>\u6211\u4eec\u53ef\u4ee5\u8fdb\u4e00\u6b65\u63a8\u5e7fLQR\u5230\u975e\u7ebf\u6027\u7684\u60c5\u51b5\u3002\u8fd9\u91cc\uff0c\u51fa\u4e8e\u7b80\u5316\uff0c\u4f9d\u7136\u5047\u8bbe\u73af\u5883\u662f\u51b3\u5b9a\u6027\u7684\u3002\u5341\u5206\u81ea\u7136\u5730\uff0c\u6211\u4eec\u8003\u8651\u628areward\u51fd\u6570\u548c\u6f14\u5316\u51fd\u6570 \\(f\\) \u90fd\u5c55\u5f00\u5230\u9996\u9636\uff1a</p> \\[ f(s_t',a_t')\\approx f(s_t,a_t)+\\nabla f(s_t,a_t)\\binom{s_t'-s_t}{a_t'-a_t} \\] \\[ c(s_t',a_t')\\approx c(s_t,a_t)+\\nabla c(s_t,a_t)\\binom{s_t'-s_t}{a_t'-a_t}+\\frac{1}{2}\\binom{s_t'-s_t}{a_t'-a_t}^T\\nabla\\nabla c(s_t,a_t)\\binom{s_t'-s_t}{a_t'-a_t} \\] <p>\uff08\u6709\u65f6\u5019\u4e5f\u628a \\(\\nabla\\nabla\\) \u8bb0\u4e3a \\(\\nabla^2\\) \uff0c\u5c3d\u7ba1\u8fd9\u5728\u6570\u5b66\u4e0a\u662f\u4e0d\u89c4\u8303\u7684\u8bb0\u53f7\uff0c\u4f46\u53ea\u9700\u8981\u77e5\u9053\u6211\u4eec\u6307\u7684\u662fHessian\u5c31\u597d\uff09\u6709\u4e86\u8fd9\u6837\u7684\u8868\u8fbe\u5f0f\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7ee7\u7eed\u4f7f\u7528LQR\u7684\u65b9\u6cd5\u4e86\u3002</p> <p>\u4f46\u662f\u505a\u4e86\u4e00\u6b65\u4f18\u5316\u540e\uff0c\u6211\u4eec\u7684action\u5c31\u548c\u4e00\u5f00\u59cb\u7684\u89e3\u4ea7\u751f\u4e86\u8ddd\u79bb\u3002\u6b64\u65f6\uff0c\u6211\u4eec\u5fc5\u987b\u91cd\u65b0\u518d\u8ba1\u7b97\u4e00\u6b21\u5404\u4e2a\u5bfc\u6570\uff0c\u5e76\u91cd\u65b0\u8ba1\u7b97\u4e00\u6b21LQR\u3002\u8fd9\u6837\u7684\u7b97\u6cd5\u5c31\u88ab\u79f0\u4e3aiLQR\uff08iterative LQR\uff09\u6216\u8005DDP\uff08Differential Dynamic Programming\uff09\u3002</p> <p>iLQR Algorithm</p> <p>\u91cd\u590d\uff1a 1. \u8ba1\u7b97\u5404\u4e2a\u504f\u5bfc\u6570\uff1b 2. \u8fd0\u884cLQR\u7684backward pass\uff0c\u5f97\u5230 \\(a_t\\) \u5173\u4e8e \\(s_t\\) \u7684\u7ebf\u6027\u5173\u7cfb\u7684\u7cfb\u6570\uff08\u5373\u524d\u9762\u7684 \\(a_t=-C_t^{-1}(y_t+B_ts_t)\\) \uff09\uff1b 3. \u8fd0\u884cLQR\u7684forward pass\u3002\u4f46\u8fd9\u4e00\u6b65\u8ba1\u7b97 \\(s_t\\) \u7684\u65f6\u5019\uff0c\u6211\u4eec\u5fc5\u987b\u91c7\u7528\u771f\u5b9e\u7684\u6f14\u5316\u51fd\u6570 \\(f\\)\uff0c\u800c\u4e0d\u662f\u7ebf\u6027\u8fd1\u4f3c\u3002</p> <p>Q: \u4e3a\u4ec0\u4e48\u5fc5\u987b\u91c7\u7528\u771f\u5b9e\u7684\u6f14\u5316\u51fd\u6570\u5462\uff1f</p> <p>A: \u56e0\u4e3a\u7ebf\u6027\u8fd1\u4f3c\u672c\u8eab\u53ea\u662f\u6211\u4eec\u5904\u7406\u8fd9\u4e2a\u95ee\u9898\u7684\u4e00\u4e2a\u624b\u6bb5\u3002\u73af\u5883\u7684\u53cd\u5e94\u597d\u6bd4\u662f\u771f\u6b63\u7684\u8003\u8bd5\uff0c\u800c\u7ebf\u6027\u8fd1\u4f3c\u597d\u6bd4\u662f\u8003\u524d\u505a\u7684\u6a21\u62df\u5377\u3002\u4f60\u5728\u5f97\u5230\u4e00\u4e2a\u9898\u76ee\uff08 \\(s_t\\) \uff09\u7684\u65f6\u5019\uff0c\u5982\u4f55\u5f97\u5230\u7b54\u6848\uff08 \\(a_t\\) \uff09\uff0c\u8fd9\u4e2a\u65b9\u6cd5\uff08\u76f8\u5f53\u4e8e\u7ebf\u6027policy\u7684\u90a3\u4e2a\u7cfb\u6570\uff09\u53ef\u4ee5\u53c2\u8003\u6a21\u62df\u5377\uff1b\u4f46\u4e0d\u80fd\u8bf4\u4f60\u628a\u9898\u76ee\u4e5f\u5f53\u6210\u6a21\u62df\u5377\u7684\u9898\u76ee\u6765\u505a\uff0c\u5426\u5219\u5c31\u4f1a\u8d8a\u5dee\u8d8a\u8fdc\u554a\uff01</p> <p>\u73b0\u5728\uff0c\u8ba9\u6211\u4eec\u5ba1\u89c6\u4e00\u4e0b\u8fd9\u4e2aiLQR\u7b97\u6cd5\u3002\u5982\u679c\u7528\u4e00\u53e5\u8bdd\u6765\u8bf4\uff0c\u5b83\u6240\u4f5c\u7684\u4e8b\u60c5\u5c31\u662f\uff0c\u5728\u67d0\u4e2a\u70b9\u505a\u4e00\u4e2a\u5c55\u5f00\uff0c\u628a\u51fd\u6570\u8fd1\u4f3c\u4e3a\u4e8c\u6b21\u51fd\u6570\uff0c\u7136\u540e\u627e\u5230\u6700\u4f18\u89e3\u3002\u63a5\u4e0b\u6765\uff0c\u5728\u4e4b\u524d\u7684\u201c\u6700\u4f18\u89e3\u201d\u5904\u518d\u6b21\u5c55\u5f00\uff0c\u627e\u4e00\u4e2a\u65b0\u7684\u201c\u6700\u4f18\u89e3\u201d\u3002</p> <p>\u4ed4\u7ec6\u4e00\u60f3\uff0c\u6211\u4eec\u5ffd\u7136\u89c9\u5f97\u8fd9\u6709\u70b9\u50cf\u5bfb\u627e\u51fd\u6570\u6781\u503c\u7684\u725b\u987f\u6cd5\uff1a\u5728\u6bcf\u4e00\u4e2a\u70b9\u6839\u636e\u4e00\u9636\u5bfc\u6570\u548c\u4e8c\u9636\u5bfc\u6570\u8fd1\u4f3c\u4e3a\u4e8c\u6b21\u51fd\u6570\uff0c\u7136\u540e\u627e\u5230\u8fd9\u4e2a\u4e8c\u6b21\u51fd\u6570\u7684\u6781\u503c\u70b9\u4f5c\u4e3a\u4e0b\u4e00\u8f6e\u8fed\u4ee3\u7684\u76ee\u6807\u3002\u4e8b\u5b9e\u4e0a\uff0c\u4e0a\u9762\u7684\u65b9\u6cd5\u57fa\u672c\u5c31\u662f\u725b\u987f\u6cd5\uff1a\u6211\u4eec\u5bf9</p> \\[ J=r(s_1,a_1)+r(f(s_1,a_1),a_2)+\\cdots \\] <p>\u8fd9\u4e2a\u51fd\u6570\u4e2d\u7684 \\(f\\) \u5c55\u5f00\u5230\u4e00\u9636\uff0c \\(c\\) \u5c55\u5f00\u5230\u4e8c\u9636\u3002\u5982\u679c \\(f\\) \u4e5f\u5c55\u5f00\u5230\u4e8c\u9636\uff0c\u5c31\u5b8c\u5168\u662f\u725b\u987f\u6cd5\u4e86\uff1b\u4f46\u8fd9\u91cc\u76f4\u89c9\u8868\u660e \\(f\\) \u53ea\u5c55\u5f00\u5230\u4e00\u9636\u5c31\u53ef\u4ee5\u4e86\uff0c\u8fd9\u6837\u8fd8\u51cf\u5c11\u4e86\u8ba1\u7b97\u91cf\u3002\u56e0\u6b64\uff0c\u53ef\u4ee5\u8bf4iLQR\u662f\u4e00\u79cd\u8fd1\u4f3c\u7684\u725b\u987f\u6cd5\u3002\u540c\u65f6\uff0c\u8fd9\u4e5f\u63ed\u793a\u4e86\u672c\u8bb2\u5f88\u4e45\u4e4b\u524d\u4ecb\u7ecdshooting method\u7684\u65f6\u5019\u4e3a\u4ec0\u4e48\u8bf4\u4e00\u9636\u7684\u5c55\u5f00\u5fc5\u5b9a\u4e0d\u4f1awork\uff1a\u6211\u4eec\u7684\u6574\u4e2a\u63a8\u5bfc\u6700\u91cd\u8981\u7684\u90e8\u5206\u6b63\u662f\u57fa\u4e8e\u6700\u5927\u5316\u8fd9\u4e2a\u4e8c\u6b21\u51fd\u6570\u3002</p> <p>\u6b64\u5916\uff0c\u4f5c\u4e3a\u4e00\u79cd\u4e8c\u9636\u65b9\u6cd5\uff08\u548cgradient-based\u7684\u4e00\u9636\u65b9\u6cd5\u76f8\u5bf9\uff09\uff0c\u8fd9\u6837\u7684\u65b9\u6cd5\u7684\u4f18\u52bf\u662f\u6ca1\u6709\u50cflearning rate\u8fd9\u6837\u7684\u53ef\u8c03\u53c2\u6570\uff0c\u56e0\u6b64\u907f\u514d\u4e86\u70bc\u4e39\u7684\u75db\u82e6\uff1b\u4f46\u662f\u53e6\u4e00\u65b9\u9762\uff0c\u5b83\u4e5f\u5931\u53bb\u4e86\u7075\u6d3b\u6027\uff0c\u751a\u81f3\u4e0d\u4e00\u5b9a\u6536\u655b\uff01</p> <p>\u4e3a\u6b64\uff0c\u4e00\u4e2a\u8c03\u6574\u7684\u65b9\u6cd5\u662f\u6211\u4eec\u628a\u539f\u6765\u7684\u66f4\u65b0</p> \\[ a_t'-a_t=-C_t^{-1}(y_t+B_t(s_t'-s_t)) \\] <p>\u53d8\u4e3a</p> \\[ a_t'-a_t=-C_t^{-1}(\\alpha y_t+B_t(s_t'-s_t)) \\] <p>\u7136\u540e\u8c03\u6574\u4e00\u4e2a\u5408\u9002\u7684 \\(\\alpha\\) \u3002\u9700\u8981\u6ce8\u610f\uff0c\u5982\u679c \\(\\alpha=0\\) \uff0c\u90a3\u4e48\u56e0\u4e3a \\(s_1'=s_1\\) \u662f\u56fa\u5b9a\u7684\uff0c\u7cfb\u7edf\u5b9e\u9645\u4e0a\u4e0d\u4f1a\u66f4\u65b0\uff1b\u5982\u679c \\(\\alpha=1\\) \uff0c\u90a3\u4e48\u7cfb\u7edf\u76f8\u5f53\u4e8e\u5b8c\u5168\u6309\u7167\u539f\u6765\u7684\u65b9\u6cd5\u66f4\u65b0\u3002\u56e0\u6b64\uff0c \\(\\alpha\\) \u4ee3\u8868\u4f7f\u7528\u8fd9\u4e2a\u4e8c\u9636\u65b9\u6cd5\u66f4\u65b0\u7684\u7a0b\u5ea6\u3002</p> <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u7b80\u5355\u7684demo\uff08\u8bf7\u6ce8\u610f\uff0c\u5176\u539f\u7406\u548c\u8fd9\u4e2a\u7b97\u6cd5\u7684\u539f\u7406\u5e76\u4e0d\u5b8c\u5168\u4e00\u81f4\uff0c\u53ea\u662f\u7ed9\u4e00\u4e2a\u5927\u81f4\u7684\u611f\u53d7\uff09\uff1a\u6211\u4eec\u7528\u725b\u987f\u6cd5\u8bd5\u7740\u627e\u5230\u4e0b\u9762\u8fd9\u4e2a\u51fd\u6570\u7684\u6781\u503c\u3002\u53ef\u4ee5\u770b\u51fa\uff0c\u7528\u666e\u901a\u7684\u65b9\u6cd5\u662f\u4e0d\u6536\u655b\u7684\u3002\u4f46\u662f\u5982\u679c\u7ed9\u51fa\u4e00\u4e2a\u5408\u9002\u7684 \\(\\alpha\\approx 0.98\\) \uff0c\u5c31\u53ef\u4ee5\u6536\u655b\u3002</p> <p></p> <p>\u8fd9\u91cc\u56fe\u4e2d\u7684\u7ea2\u8272\u66f2\u7ebf\u4ee3\u8868\u725b\u987f\u6cd5\u8fd1\u4f3c\u7684\u4e8c\u6b21\u51fd\u6570\uff0c\u9ed1\u8272\u7ad6\u7ebf\u662f\u5bf9\u79f0\u8f74\u3002\u5728\u53f3\u8fb9\u7684\u56fe\u4e2d\uff0c\u84dd\u8272\u4ee3\u8868\u672c\u6765\u6839\u636e\u725b\u987f\u6cd5\u7684\u6b63\u5e38\u8fed\u4ee3\u5173\u7cfb\u5e94\u8be5\u5230\u8fbe\u7684\u4f4d\u7f6e\uff0c\u800c\u7eff\u8272\u4ee3\u8868\u4e86\u6839\u636e \\(\\alpha\\) \u7684\u8fed\u4ee3\u65b9\u6cd5\u4e4b\u540e\u5230\u8fbe\u7684\u4f4d\u7f6e\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap08/#example_nonlinear_model-predictive_control","title":"Example: Nonlinear Model-Predictive Control","text":"<p>Nonlinear Model-Predictive Control\u662f\u4e00\u4e2a\u5f3a\u5927\u7684\u7b97\u6cd5\uff0c\u5b83\u5728\u73af\u5883\u52a8\u529b\u5b66\u5df2\u77e5\u7684\u65f6\u5019\u53ef\u4ee5\u6709\u975e\u5e38\u597d\u7684performance\u3002</p> <p>\u8bbe\u60f3\u73b0\u5728\u548c\u73af\u5883\u7684\u4ea4\u4e92\u5468\u671f \\(T\\) \u53ef\u80fd\u5f88\u957f\uff0c\u6bd4\u5982\u6210\u5343\u4e0a\u4e07\u3002\u90a3\u4e48\u524d\u9762\u7684iLQR\u6548\u7387\u5c31\u663e\u5f97\u6709\u4e9b\u4f4e\u4e86\uff1b\u800c\u8fd9\u4e2a\u7b97\u6cd5\u89e3\u51b3\u4e86\u8fd9\u4e00\u95ee\u9898\u3002\u5177\u4f53\u5730\uff0c\u6211\u4eec\u9009\u53d6\u4e00\u4e2a\u6bd4\u8f83\u5c0f\u7684\uff0c\u6211\u4eec\u7684\u8ba1\u7b97\u91cf\u80fd\u591f\u63a5\u53d7\u7684 \\(T_0&lt;T\\) \uff0c\u7136\u540e\u91cd\u590d\uff1a</p> <ol> <li>\u6839\u636e\u5f53\u524d\u7684state \\(s_t\\) \uff0c\u628a\u5b83\u5f53\u6210\u7b2c\u4e00\u6b65\uff0c\u5bf9 \\(\\sum_{t'=t}^{t+T_0}c(s_{t'},a_{t'})\\) \u8fd0\u884ciLQR\uff0c\u5f97\u5230\u6700\u4f18\u7684\u4e00\u7cfb\u5217action \\(a_t,a_{t+1},\\cdots,a_{t+T_0}\\) \uff1b</li> <li>\u6254\u6389\u540e\u9762\u7684\u6240\u6709action\uff0c\u4fdd\u7559 \\(a_t\\) \uff0c\u5e76\u548c\u73af\u5883\u8fdb\u884c\u4e00\u6b65\u4ea4\u4e92\u3002</li> </ol> <p>\u8fd9\u91cc\u7684\u7b2c\u4e8c\u6b65\u770b\u8d77\u6765\u6254\u6389\u540e\u9762\u7684 \\(a_{t+1},\\cdots,a_{t+T_0}\\) \u6bd4\u8f83\u5947\u602a\uff0c\u800c\u5b9e\u9645\u4e0a\u8fd9\u662f\u56e0\u4e3a\u6211\u4eec\u8dd1iLQR\u53ea\u662f\u4e3a\u4e86\u7528backward pass\u83b7\u5f97\u5bf9\u4e8e \\(a_t\\) \u7684\u7cfb\u6570\uff0c\u5e76\u4e0d\u5173\u5fc3\u540e\u9762\u7684forward pass\u7684\u7ed3\u679c\u3002</p> <p>\u8fd9\u6837\u7684\u7b97\u6cd5\uff0c\u867d\u7136\u6bd4\u8d77\u4e4b\u524d\u7684\u7565\u6709\u201c\u77ed\u89c6\u201d\uff0c\u4f46\u5176\u6781\u5927\u5730\u51cf\u5c0f\u4e86\u8ba1\u7b97\u91cf\uff0c\u4ece\u800c\u6709\u5f88\u5927\u4f18\u52bf\u3002\u5b9e\u9a8c\u4e0a\uff0c\u5176\u6548\u679c\u6781\u5176\u7684\u597d\uff0c\u4e14\u5bf9\u5fae\u6270\u7684robustness\u4ee4\u4eba\u5370\u8c61\u6df1\u523b\u3002</p> <p>\u8fd9\u4e2a\u7b97\u6cd5\u53e6\u5916\u4e00\u4e2a\u503c\u5f97\u4e00\u63d0\u7684\u7279\u70b9\u662f\uff0c\u5176\u5bf9\u52a8\u529b\u5b66\u7684\u6b63\u786e\u6027\u662f\u4e0d\u654f\u611f\u7684\u3002\u5b9e\u9a8c\u4e0a\uff0c\u5728Hopper\u73af\u5883\uff08\u5373\u4e00\u4e2a\u51e0\u4e2a\u5173\u8282\u6784\u6210\u7684\u673a\u68b0\u817f\u505a\u8df3\u8dc3\uff09\u4e2d\uff0c\u5b9e\u9a8c\u4eba\u5458\u4e3a\u52a8\u529b\u5b66\u7cfb\u7edf\u8d4b\u4e86\u4e00\u4e2a\u9519\u8bef\u7684\u53c2\u6570\uff08\u6574\u4f53\u8d28\u91cf\u53d8\u4e3a\u539f\u5148\u76842\u500d\u6216\u4e00\u534a\uff09\u3002\u4f46\u673a\u5668\u4eba\u7684\u8868\u73b0\u53ea\u662f\u5f00\u59cb\u770b\u8d77\u6765\u6709\u4e9b\u7b28\u62d9\uff0c\u800c\u5f88\u5feb\u4e5f\u5c31\u5b8c\u6210\u4e86\u76ee\u6807\u3002</p> <p>\u4e3a\u4ec0\u4e48\u4f1a\u8fd9\u6837\uff1f\u6211\u4eec\u77e5\u9053\uff0c\u57fa\u4e8e\u52a8\u529b\u5b66\u7684\u6a21\u578b\u672c\u8eab\u5e94\u8be5\u662f\u5bf9\u52a8\u529b\u5b66\u654f\u611f\u7684\u3002\u4f46\u8fd9\u4e2a\u7b97\u6cd5\u7684 \u201c\u77ed\u89c6\u201d\u6027 \u6070\u6070\u5e2e\u52a9\u5b83\u5728\u9519\u8bef\u7684\u73af\u5883\u4e0b\u4f9d\u7136\u8d70\u5411\u6b63\u9014\u3002\u6bd4\u5982\u8bf4\uff0c\u867d\u7136\u9519\u8bef\u7684\u53c2\u6570\u53ef\u80fd\u5bfc\u81f4\u51b3\u7b56\u7684\u504f\u5dee\uff0c\u4f46\u7b2c\u4e00\u6b65\u7684\u504f\u5dee\u662f\u6700\u5c0f\u7684\u3002\u800c\u6211\u4eec\u7684\u7b97\u6cd5\u53c8\u53eatake\u4e86\u51b3\u7b56\u51fa\u6765\u7684\u7b2c\u4e00\u6b65\uff0c\u7136\u540e\u91cd\u65b0\u89c2\u5bdf\u5e76\u91cd\u65b0\u51b3\u7b56\u3002\u8fd9\u6837\uff0c\u8fd9\u4e2a\u7b97\u6cd5\u5c31\u53ef\u4ee5\u5728\u9519\u8bef\u7684\u52a8\u529b\u5b66\u4e0b\u4f9d\u7136\u4fdd\u6301robust\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap08/#reference_papers","title":"Reference Papers","text":"<ol> <li>A Survey of Monte Carlo Tree Search Methods\uff08MCTS\u7684\u7efc\u8ff0\uff09</li> <li>Differential dynamic programming\uff08\u4ecb\u7ecd\u548c\u63d0\u51faDDP\u7684\u4e00\u672c\u4e66\uff09</li> <li>Synthesis and Stabilization of Complex Behaviors through Online Trajectory Optimization\uff08\u5b9e\u73b0nonlinear Model Predictive Control\u7684paper\uff09</li> <li>Learning Neural Network Policies with Guided Policy Search under Unknown Dynamics</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap09/","title":"Model-Based RL","text":"<p>\u5728\u4e0a\u4e00\u8bb2\uff0c\u6211\u4eec\u5df2\u7ecf\u4ecb\u7ecd\u4e86\u5982\u679c\u6211\u4eec\u6709\u4e00\u4e2a\u73af\u5883\u7684\u6a21\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5341\u5206\u5f3a\u5927\u7684\u7b97\u6cd5\u6765\u8ba1\u7b97\u6700\u4f18\u7b56\u7565\u3002\u56e0\u6b64\uff0c\u5f88\u591a\u65f6\u5019\u6211\u4eec\u5e0c\u671b\u5efa\u7acb\u4e00\u4e2a\u6a21\u578b\u6a21\u62df\u73af\u5883\u7684\u52a8\u529b\u5b66\uff0c\u8fdb\u800c\u4f7f\u7528\u524d\u9762\u7684\u65b9\u6cd5\u3002</p> <p>\u4e00\u4e2a\u6700\u76f4\u63a5\u7684\u601d\u8def\uff1a</p> <ol> <li>\u8fd0\u884c\u67d0\u79cdbaseline policy \\(\\pi_0\\) \uff08\u6bd4\u5982\u968f\u673a\u91c7\u6837\uff09, \u6536\u96c6\u6570\u636e\u96c6 \\(D=\\{(s,a,s')\\}\\) \uff1b</li> <li>\u5728 \\(D\\) \u4e0a\u5b66\u4e60\u4e00\u4e2a\u52a8\u529b\u5b66\u6a21\u578b \\(f(s,a)\\) \uff0c\u4f7f\u5f97 \\(f(s,a)\\approx s'\\) \uff1b</li> <li>\u4f7f\u7528\u524d\u9762\u4ecb\u7ecd\u7684\u65b9\u6cd5\uff08\u6bd4\u5982LQR\uff09\u6765\u8ba1\u7b97\u6700\u4f18\u7b56\u7565 \\(\\pi^\\star\\) \u3002</li> </ol> <p>\u4f46\u8fd9\u4e2a\u65b9\u6cd5\u6709\u4e00\u5b9a\u7684\u95ee\u9898\uff1a\u524d\u9762\u7684baseline policy \\(\\pi_0\\) \u56e0\u4e3a\u6ca1\u6709\u4efb\u4f55\u7b56\u7565\uff0c\u5f88\u53ef\u80fd\u4e0d\u80fd\u63a2\u7d22\u5230\u5168\u90e8\u7684state\uff1b\u4f46 \\(\\pi^\\star\\) \u56e0\u4e3a\u662f\u66f4\u4f18\u79c0\u7684\uff0c\u5f88\u53ef\u80fd\u5230\u8fbe \\(\\pi_0\\) \u6ca1\u6709\u5230\u8fbe\u7684\u5730\u65b9\uff0c\u56e0\u6b64\u6709\u53ef\u80fd\u4f1a\u4e0d\u77e5\u6240\u63aa\u3002</p> <p>\u6bd4\u5982\u8bf4\uff0c\u4e00\u4e2a\u6e38\u620f\u4e0a\u6765\u5148\u6709\u4e00\u4e9b\u5c0f\u5175\uff0c\u51fb\u8d25\u5b83\u4eec\u540e\u4f1a\u51fa\u73b0\u4e00\u4e2aboss\u3002\u5982\u679c\u6211\u4eec\u7684baseline policy\u53ea\u662f\u968f\u673a\u8d70\u52a8\uff0c\u90a3\u4e48\u7528\u5b83\u6536\u96c6\u51fa\u6765\u7684\u6570\u636e\u8bad\u7ec3\u51fa\u6765\u7684\u6a21\u578b \\(f\\) \u5f88\u53ef\u80fd\u53ea\u80fd\u5b66\u4f1a\u5c0f\u5175\u7684\u52a8\u529b\u5b66\u3002\u8fd9\u6837\uff0c\u7528 \\(f\\) \u8ba1\u7b97\u51fa\u6765\u7684 \\(\\pi^\\star\\) \u867d\u7136\u53ef\u4ee5\u51fb\u8d25\u5c0f\u5175\uff0c\u4f46\u662f\u5b8c\u5168\u4e0d\u53ef\u80fd\u77e5\u9053\u5982\u4f55\u51fb\u8d25boss\u3002</p> <p>\u8fd9\u4e2a\u95ee\u9898\u88ab\u79f0\u4e3adistribution mismatch\u3002\u5f53\u7136\uff0c\u6211\u4eec\u5f88\u5bb9\u6613\u5c31\u53ef\u4ee5\u7ed9\u524d\u9762\u7684\u65b9\u6cd5\u505a\u4e00\u4e2a\u6539\u8fdb\u6765\u51cf\u7f13\u8fd9\u4e2a\u95ee\u9898\u3002\u60f3\u8c61\u4e0a\u9762\u7684\u4f8b\u5b50\uff0c\u53ea\u8981\u6211\u4eec\u6bcf\u4e00\u6b21plan\u5f97\u5230\u65b0\u7684\u7b56\u7565\u4e4b\u540e\u91cd\u65b0\u91c7\u96c6\u6570\u636e\uff0c\u5c31\u53ef\u4ee5\u8986\u76d6\u66f4\u591a\u7684state\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u5f97\u5230\u4e86\u4ee5\u4e0b\u7684\u65b9\u6cd5\uff1a</p> <ol> <li>\u521d\u59cb\u5316\u7b56\u7565\u4e3a\u67d0\u79cdbaseline policy \\(\\pi_0\\) \uff08\u6bd4\u5982\u968f\u673a\u91c7\u6837\uff09\u3002\u5f00\u59cb\u65f6\uff0c\u6570\u636e\u96c6 \\(D=\\emptyset\\) \uff1b</li> <li>\u91cd\u590d\uff1a<ol> <li>\u8fd0\u884c\u5f53\u524d\u7684\u6700\u65b0\u7b56\u7565 \\(\\pi\\) , \u6536\u96c6\u6570\u636e\u96c6 \\(D=D\\cup \\{(s,a,s')\\}\\) \uff1b</li> <li>\u5728 \\(D\\) \u4e0a\u5b66\u4e60\u4e00\u4e2a\u52a8\u529b\u5b66\u6a21\u578b \\(f(s,a)\\) \uff0c\u4f7f\u5f97 \\(f(s,a)\\approx s'\\) \uff1b</li> <li>\u4f7f\u7528\u524d\u9762\u4ecb\u7ecd\u7684\u65b9\u6cd5\uff08\u6bd4\u5982LQR\uff09\u6765\u66f4\u65b0\u6700\u4f18\u7b56\u7565 \\(\\pi\\) \u3002</li> </ol> </li> </ol> <p>\u8fd9\u4e2a\u65b9\u6cd5\u5728\u7406\u60f3\u60c5\u51b5\u4e0b\u611f\u89c9\u53ef\u4ee5\u8dd1\u7684\u5f88\u597d\u3002\u4f46\u518d\u4ed4\u7ec6\u4e00\u60f3\uff0c\u5982\u679c\u5b66\u4e60\u73af\u5883\u7684\u52a8\u529b\u5b66\u6a21\u578b\u51fa\u73b0\u9519\u8bef\uff0c\u90a3\u4e48\u4f7f\u7528\u8fd9\u4e2a\u7b97\u6cd5\u5f88\u53ef\u80fd\u4f1a\u6d6a\u8d39\u5f88\u591a\u6570\u636e\u3002\u5177\u4f53\u5730\uff0c\u6211\u4eec\u7684LQR\u65b9\u6cd5\u662f\u57fa\u4e8e\u6a21\u578b\u7684\uff1b\u5982\u679c\u6a21\u578b\u51fa\u73b0\u4e86\u4e00\u5b9a\u7684\u8bef\u5dee\uff0c\u90a3\u4e48\u8ba1\u7b97\u5f97\u5230\u7684 \\(\\pi\\) \u7684\u7b2c\u4e00\u6b65\u5dee\u5f97\u8fd8\u4e0d\u591a\uff0c\u4f46\u8d8a\u8d70\u5c31\u4f1a\u5dee\u5f97\u8d8a\u8fdc\u3002</p> <p>\u6bd4\u5982\u8bf4\uff0c\u5047\u8bbe\u6211\u4eec\u7684\u6a21\u578b\u8981\u6a21\u62df\u5f00\u8f66\u7684\u52a8\u529b\u5b66\u3002\u6a21\u578b\u672c\u8eab\u5f88\u53ef\u80fd\u53ea\u662f\u6709\u4e00\u4e2a\u5f88\u5c0f\u7684\u8bef\u5dee\uff08\u6bd4\u5982\u8bf4\uff0c\u5b83\u8ba4\u4e3a\u8f66\u8f6e\u5411\u5de6\u504f1\u5ea6\u7684\u65f6\u5019\u624d\u4f1a\u8ba9\u8f66\u76f4\u7740\u8d70\uff09\u3002\u4f46\u662f\u7528\u8fd9\u4e2a\u6a21\u578b\u8ba1\u7b97\u6700\u4f18\u7b56\u7565\uff08\u6bd4\u5982\u8bf4\u76ee\u6807\u5c31\u662f\u8ba9\u8f66\u76f4\u7740\u8d70\uff09\uff0c\u90a3\u4e48\u8fd9\u4e2a\u7b56\u7565\u8d70\u51fa\u6765\u7684\u8f68\u8ff9\u5c31\u4f1a\u8d8a\u6765\u8d8a\u504f\u79bb\u76ee\u6807\u3002</p> <p>\u8fd9\u6837\uff0c\u7528\u5b58\u5728\u5f88\u5c0f\u8bef\u5dee\u7684\u52a8\u529b\u5b66\u8d70\u5f88\u591a\u6b65\uff0c\u4f1a\u628a\u8bef\u5dee\u653e\u5927\uff0c\u91c7\u96c6\u51fa\u6765\u7684\u6570\u636e\u90fd\u5f88\u504f\u79bb\u76ee\u6807\uff0c\u56e0\u6b64\u610f\u4e49\u4e0d\u5927\u3002</p> <p>\u5f88\u5bb9\u6613\u60f3\u5230\uff0c\u6211\u4eec\u4e3a\u4e86\u6539\u53d8\u8fd9\u4e2a\u60c5\u51b5\uff0c\u9700\u8981\u7ed9\u6a21\u578b\u53ca\u65f6\u66f4\u6b63\u81ea\u5df1\u9519\u8bef\u7684\u673a\u4f1a\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u7ec8\u4e8e\u7ed9\u51fa\u4e86Model-Based RL\u7684\u4e00\u4e2a\u57fa\u672c\u601d\u8def\uff1a</p> <p>Model-Based RL Algorithm (a.k.a. Model Predictive Control,MPC)</p> <ol> <li>\u7528\u67d0\u79cdbaseline policy \\(\\pi_0\\) \uff08\u6bd4\u5982\u968f\u673a\u91c7\u6837\uff09\u83b7\u5f97\u4e00\u4e2a\u6570\u636e\u96c6 \\(D=\\{(s,a,s')\\}\\) \uff1b</li> <li>\u91cd\u590d\uff1a<ol> <li>\u5728 \\(D\\) \u4e0a\u5b66\u4e60\u4e00\u4e2a\u52a8\u529b\u5b66\u6a21\u578b \\(f(s,a)\\) \uff0c\u4f7f\u5f97 \\(f(s,a)\\approx s'\\) \uff1b</li> <li>\u4f7f\u7528\u67d0\u79cdplanning\u7684\u65b9\u6cd5\u6765\u66f4\u65b0\u6700\u4f18\u7b56\u7565 \\(\\pi\\) \u3002</li> <li>\u8fd0\u884c\u5f53\u524d\u7684\u6700\u65b0\u7b56\u7565 \\(\\pi\\) \u4ec5\u4e00\u6b65, \u6536\u96c6 \u4e00\u7ec4\uff08\u4e0d\u662f\u4e00\u4e2a\uff09 \u6570\u636e\uff0c\u52a0\u5165\u6570\u636e\u96c6\uff1a \\(D=D\\cup \\{(s,a,s')\\}\\) \uff1b</li> </ol> </li> </ol> <p>\u8fd9\u91cc\u503c\u5f97\u4e00\u63d0\u7684\u662f\u4e00\u4e2a\u6709\u8da3\u7684\u7ec6\u8282\uff1a\u6211\u4eec\u7b2c2\u6b65\u7684planning\u8be5\u600e\u4e48\u505a\uff1f\u5982\u679c\u6700\u4fdd\u5b88\uff0c\u6211\u4eec\u5e94\u8be5\u8fd0\u884c\u4e00\u4e2a\u5b8c\u6574\u7684LQR\uff1b\u4f46\u5b9e\u9645\u4e0a\u6211\u4eec\u53ef\u4ee5\u7a0d\u5fae\u5728\u8fd9\u4e00\u6b65\u4e0a\u653e\u677e\uff0c\u4e5f\u5c31\u662f\u53d6\u4e00\u4e2a\u5c0f\u4e00\u70b9\u7684horizon\uff0c\u800c\u4e0d\u662f\u5b8c\u6574\u7684horizon\u3002\u66f4\u8fdb\u4e00\u6b65\uff0cLQR\u751a\u81f3\u90fd\u4e0d\u662f\u5fc5\u987b\u7684\uff0c\u4f7f\u7528\u4e4b\u524d\u6700\u201c\u7b28\u201d\u7684random shooting\u90fd\u662f\u53ef\u4ee5\u7684\u3002</p> <p>Q: \u4e3a\u4ec0\u4e48\u8fd9\u91ccplanning\u7684\u51c6\u786e\u6027\u5e76\u4e0d\u88ab\u7279\u522b\u8981\u6c42\uff1f</p> <p>A: \u56e0\u4e3a\u548c\u4e4b\u524d\u5df2\u77e5\u73af\u5883\u6f14\u5316\u7684\u8bbe\u5b9a\u4e0d\u540c\uff0c\u8fd9\u91cc\u6211\u4eec\u7684\u6a21\u578b\u8fd8\u6ca1\u6709\u5b8c\u5168\u5b66\u4f1a\u73af\u5883\u7684\u52a8\u529b\u5b66\u3002\u56e0\u6b64\uff0c\u4e0e\u5176\u5728\u8fd9\u4e2a\u4e0d\u5b8c\u5168\u6b63\u786e\u7684\u52a8\u529b\u5b66\u4e0a\u5927\u82b1\u529f\u592b\uff0c\u4e0d\u5982\u8282\u7ea6\u4e00\u4e9b\u65f6\u95f4\uff0c\u591a\u8fd0\u884c\u8fd9\u4e2aloop\u51e0\u6b21\uff0c\u4ece\u800c\u4ece\u73af\u5883\u4e2d\u91c7\u96c6\u66f4\u591a\u7684\u3001\u65b9\u5411\u66f4\u6b63\u786e\u7684\u6570\u636e\u3002\u540c\u65f6\uff0c\u4e0a\u4e00\u8bb2\u7684\u6700\u540e\u4ecb\u7ecdMPC\u7684\u65f6\u5019\u4e5f\u63d0\u5230\u8fc7\uff0c\u8d8a\u662f\u52a8\u529b\u5b66\u4e0d\u51c6\u786e\uff0chorizon\u6bd4\u8f83\u5c0f\u7684\u7b97\u6cd5\u8d8a\u662f\u6709\u4f18\u52bf\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap09/#uncertainty","title":"Uncertainty","text":"<p>Q: Is that the end of the story?</p> <p>A: No! There are a lots of issues that we still need to consider.</p> <p>\u6211\u4eec\u9996\u5148\u6765\u8003\u8651\u4e00\u4e2a\u5b9e\u9645\u7684\u95ee\u9898\uff1a\u6211\u4eec\u5982\u4f55\u9009\u53d6\u8fd9\u4e2a \\(f\\) \u5462\uff1f\u5f53\u7136\uff0c\u57fa\u4e8e\u7269\u7406\u5b9a\u5f8b\u7684\u6a21\u578b\uff08\u52a0\u4e0a\u51e0\u4e2a\u62df\u5408\u7684\u53c2\u6570\uff09\u786e\u5b9e\u53ef\u4ee5\uff0c\u4f46\u4e0d\u591f\u4e00\u822c\uff0c\u4e5f\u4e0d\u4e00\u5b9a\u51c6\u786e\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u80af\u5b9a\u5e0c\u671b\u80fd\u628a \\(f\\) \u9009\u53d6\u4e3a\u4e00\u4e2a\u795e\u7ecf\u7f51\u7edc\u3002</p> <p>\u4f46\u8fd9\u4e2a\u65f6\u5019\u5c31\u51fa\u73b0\u4e86\u4e00\u4e2a\u4e0d\u6613\u5bdf\u89c9\u7684\u95ee\u9898\uff08\u5f53\u7136\uff0c\u5bf9\u4e8e\u975e\u795e\u7ecf\u7f51\u7edc\u4e5f\u6709\u7c7b\u4f3c\u7684\u95ee\u9898\uff0c\u4f46\u662f\u5728\u795e\u7ecf\u7f51\u7edc\u7684\u5730\u65b9\u5b83\u4f53\u73b0\u7684\u5c24\u5176\u4e25\u91cd\uff09\u3002\u6211\u4eec\u7684\u6570\u636e\u96c6\u867d\u7136\u5728\u4e0d\u65ad\u62d3\u5c55\uff0c\u4f46\u4e00\u5f00\u59cb\u7684\u65f6\u5019\u6211\u4eec\u6240\u6709\uff08\u6216\u5927\u90e8\u5206\uff09\u6570\u636e\u90fd\u8fd8\u662f\u6765\u81ea\u90a3\u4e2a\u6700\u539f\u59cb\u7684base policy\uff0c\u4e5f\u5c31\u662f\u57fa\u672c\u662f\u968f\u673a\u9009\u53d6\u7684\u3002\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u7684\u795e\u7ecf\u7f51\u7edc\u5f88\u5bb9\u6613overfit\u3002</p> <p>\u5c31\u6bd4\u5982\uff0c\u6211\u4eec\u8fd8\u662f\u5e0c\u671b\u795e\u7ecf\u7f51\u7edc\u80fd\u65e2\u5b66\u4f1a\u5c0f\u5175\u5982\u4f55\u53cd\u5e94\uff0c\u4e5f\u5b66\u4f1aboss\u5982\u4f55\u53cd\u5e94\u3002\u4f46\u73b0\u5728\u7684\u60c5\u51b5\u662f\uff0c\u6211\u4eec\u6709500\u7ec4 \\((s,a,s')\\) \uff0c\u5b83\u4eec\u90fd\u6765\u81ea\u5c0f\u5175\uff1b\u800c\u6211\u4eec\u53ea\u670910\u7ec4 \\((s,a,s')\\) \u6765\u81eaboss\u3002\u8fd9\u6837\uff0c\u795e\u7ecf\u7f51\u7edc\u5f88\u53ef\u80fd\u5b66\u4f1a\u4e00\u4e2a\u57fa\u672c\u662f\u5c0f\u5175\u7684\u52a8\u529b\u5b66\u7684\u6a21\u578b\uff0c\u53ea\u662f\u5728boss\u7684\u90a310\u7ec4\u6570\u636e\u4e0a\u7a81\u7136overfit\u4e00\u4e0b\u3002\u6bd4\u5982\u4e0b\u9762\u7684\u56fe\u5f62\uff0c\u6211\u4eec\u672c\u6765\u52a0\u5165\u4e86\u4e00\u4e2a\u6570\u636e\u70b9\uff08\u7ea2\u70b9\uff09\uff0c\u4f46\u83ab\u540d\u5176\u5999\u51fa\u73b0\u4e86\u4e00\u4e2a\u4e0d\u8be5\u51fa\u73b0\u7684\u201c\u5047\u201d\u6781\u503c\u70b9\uff08\u4e94\u89d2\u661f\u6807\u8bb0\u7684\u70b9\uff09\u3002</p> <p></p> <p>\u4f60\u4e5f\u8bb8\u4f1a\u8bf4\uff0c\u8fd9\u5e76\u6ca1\u6709\u592a\u5927\u7684\u95ee\u9898\u5440\u2014\u2014\u6bd5\u7adf\u968f\u7740\u7b56\u7565\u7684\u63d0\u5347\uff0cboss\u7684\u6570\u636e\u4f1a\u8d8a\u6765\u8d8a\u591a\uff0c\u4e00\u5207\u90fd\u4f1a\u597d\u8d77\u6765\u7684\u3002\u4f46\u95ee\u9898\u7684\u5173\u952e\u5728\u4e8eplanner\u7684\u7b56\u7565\u548c\u6a21\u578b\u5f62\u6210\u4e00\u4e2a\u6b63\u53cd\u9988\u3002\u5728\u4e00\u5f00\u59cb\u7684\u65f6\u5019\uff0c\u5982\u679c\u63cf\u8ff0\u73af\u5883\u52a8\u529b\u5b66\u7684\u7f51\u7edcoverfit\uff0c\u5c31\u50cf\u662f\u6e38\u620f\u89c4\u5219\u6709\u6f0f\u6d1e\uff0c\u4f1a\u5bfc\u81f4\u6211\u4eec\u7684planner\uff08\u6bd4\u5982LQR\uff09\u4f1a\u5229\u7528\u8fd9\u4e2a\u6f0f\u6d1e\uff0c\u5e26\u7740\u7b56\u7565\u8d70\u5411\u9519\u8bef\u7684\u65b9\u5411\uff1b\u800c\u9519\u8bef\u7684\u7b56\u7565\u53c8\u8fdb\u4e00\u6b65\u4f7f\u5f97\u6a21\u578b\u4e0d\u80fd\u628a\u80fd\u529b\u96c6\u4e2d\u5728\u771f\u6b63reward\u5927\u7684\u5730\u65b9\u3002\u8fd9\u6837\uff0c\u8fed\u4ee3\u6b21\u6570\u8d8a\u591a\uff0c\u8868\u73b0\u8d8a\u5dee\u3002</p> <p>\u90a3\u4e48\uff0c\u95ee\u9898\u7684\u6839\u6e90\u5728\u4e8e\u4f55\u5904\uff1f\u5bb9\u6613\u770b\u51fa\uff0c\u5173\u952e\u5728\u4e8e\u6211\u4eec\u7684planner\u73b0\u5728\u8fc7\u5ea6\u76f8\u4fe1\u6211\u4eec\u7684\u6a21\u578b\u7ed9\u51fa\u7684\u52a8\u529b\u5b66\uff0c\u5b8c\u5168\u6309\u7167\u8fd9\u4e2a\u52a8\u529b\u5b66\u6765\u4f5c\u51fa\u51b3\u7b56\u3002\u4f46\u5b9e\u9645\u4e0a\u7684\u4e8b\u5b9e\u662f\uff1a\u6211\u4eec\u7684\u6a21\u578b\u672c\u8eab\u4ece\u73af\u5883\u83b7\u5f97\u7684\u6570\u636e\u5f88\u5c11\uff0c\u9884\u6d4b\u7684\u52a8\u529b\u5b66\u5f88\u5bb9\u6613\u4e0d\u51c6\u786e\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u6a21\u578b\u7684\u4e0d\u786e\u5b9a\u6027\u6709\u6240\u8003\u8651\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap09/#example_why_uncertainty_matters","title":"Example: Why Uncertainty Matters","text":"<p>\u6211\u4eec\u5148\u6765\u8003\u8651\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u4ece\u76f4\u89c9\u4e0a\u9610\u8ff0\u4e0d\u786e\u5b9a\u5ea6\u7ed9\u4e86\u6211\u4eec\u4ec0\u4e48\u6837\u7684\u4fe1\u606f\u3002</p> <p>\u5047\u8bbe\u73b0\u5728\u6211\u4eec\u7684\u76ee\u6807\u662f\u5230\u8fbe\u60ac\u5d16\u7684\u8fb9\u4e0a\u3002\u79bb\u60ac\u5d16\u7684\u8fb9\u7f18\u8d8a\u8fd1\uff0creward\u5c31\u8d8a\u9ad8\uff1b\u4f46\u662f\u5982\u679c\u6389\u4e0b\u60ac\u5d16\uff0c\u5c31\u4f1a\u53c8\u5f88\u591a\u8d1f\u7684reward\u3002\u6211\u4eec\u5148\u5047\u8bbe\u6211\u4eec\u5b8c\u5168\u4e0d\u8003\u8651\u6a21\u578b\u7684\u4e0d\u786e\u5b9a\u6027\uff0c\u4e5f\u5c31\u662f\u4f7f\u7528\u4e4b\u524d\u7684\u7b97\u6cd5\u3002\u90a3\u4e48\uff0c\u7c7b\u4f3c\u6211\u4eec\u4e4b\u524d\u6240\u8bf4\u7684\u90a3\u6837\uff0c\u6a21\u578b\u5f88\u5bb9\u6613\u5b66\u4f1a\u5411\u60ac\u5d16\u7684\u65b9\u5411\u884c\u8d70\uff0c\u5e76\u4e14\u5728\u63a5\u8fd1\u60ac\u5d16\u8fb9\u7f18\u7684\u65f6\u5019\u6211\u4eec\u4e5f\u80fd\u91c7\u96c6\u5230\u5f88\u591a\u6389\u4e0b\u53bb\u7684\u6570\u636e\u548c\u4fdd\u6301\u5728\u4e0a\u9762\u7684\u6570\u636e\uff0c\u56e0\u6b64\u80fd\u610f\u8bc6\u5230\u60ac\u5d16\u8fb9\u7f18\u7684\u5b58\u5728\u6027\u3002\u4f46\u95ee\u9898\u662f\uff0c\u6211\u4eec\u7684\u6a21\u578b\u6839\u636e\u8fd9\u4e9b\u6570\u636e\u62df\u5408\u51fa\u6765\u7684\u7ed3\u679c\uff08\u60ac\u5d16\u7684\u8fb9\u754c\uff09\u4e0d\u4e00\u5b9a\u5b8c\u5168\u7cbe\u786e\u3002\u8fd9\u5c31\u53ef\u80fd\u4f1a\u5bfc\u81f4\u6211\u4eec\u53ef\u80fd\u4f1a\u8d70\u5411\u4e00\u4e2a\u672c\u6765\u6a21\u578b\u8ba4\u4e3a\u5728\u60ac\u5d16\u4e0a\u9762\u7684\u4f4d\u7f6e\uff0c\u4f46\u5b9e\u9645\u4e0a\u6389\u4e0b\u60ac\u5d16\u3002</p> <p>\u4f46\u8bbe\u60f3\u6211\u4eec\u73b0\u5728\u5bf9\u4e8e\u6bcf\u4e00\u4e2a \\((s,a)\\) \u5bf9\u90fd\u4f30\u8ba1\u4e00\u4e0b\u6a21\u578b\u7ed9\u51fa\u7684\u9884\u6d4b \\(s'\\) \u7684\u4e0d\u786e\u5b9a\u5ea6\u3002\u8fd9\u6837\uff0c\u5728\u60ac\u5d16\u7684\u8fb9\u7f18\uff0c\u4e0d\u786e\u5b9a\u5ea6\u5e94\u8be5\u5f88\u5927\uff0c\u6211\u4eec\u7684planner\u4e5f\u5c31\u4e0d\u4f1a\u8d38\u7136\u524d\u8fdb\u4e86\u3002\u56e0\u6b64\uff0c\u901a\u8fc7\u8fd9\u6837\u5730\u5f15\u5165\u4e0d\u786e\u5b9a\u6027\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u907f\u514d\u8d70\u5411\u60ac\u5d16\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5206\u4e24\u4e2a\u90e8\u5206\u8fdb\u884c\u8ba8\u8bba\uff1a\u7b2c\u4e00\u4e2a\u90e8\u5206\u91cc\uff0c\u6211\u4eec\u8003\u8651\u5982\u4f55\u4f30\u8ba1\u6a21\u578b\u7684\u4e0d\u786e\u5b9a\u6027\uff1b\u7b2c\u4e8c\u4e2a\u90e8\u5206\u91cc\uff0c\u6211\u4eec\u8003\u8651\u5982\u4f55\u5229\u7528\u8fd9\u4e2a\u4e0d\u786e\u5b9a\u6027\u6765\u6539\u8fdb\u6211\u4eec\u7684planner\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap09/#estimating_uncertainty","title":"Estimating Uncertainty","text":"<p>\u5982\u4f55\u4f30\u8ba1\u6a21\u578b\u7684\u4e0d\u786e\u5b9a\u6027\uff1f\u4e00\u4e2a\u76f4\u89c2\u7684\u60f3\u6cd5\u662f\uff0c\u6a21\u578b\u672c\u8eab\u7684\u8f93\u51fa\u662f\u4e00\u4e2a \\(s'\\) \u7684\u5206\u5e03\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u4f30\u8ba1\u4e00\u4e0b\u6a21\u578b\u81ea\u5df1\u5bf9\u8f93\u51fa\u7684confidence\u597d\u4e86\u3002\u6bd4\u5982\u8bf4\uff0c\u5982\u679c\u6a21\u578b\u7684\u4efb\u52a1\u662f\u4e00\u4e2a\u5341\u5206\u7c7b\uff0c\u6211\u4eec\u5c31\u8f93\u51fasoftmax\u4e4b\u540e\u7684 \\(s'\\) \u6982\u7387\u3002\u7136\u540e\uff0c\u6211\u4eec\u7528\u8fd9\u4e2a\u6982\u7387\u6765\u8fdb\u884c\u540e\u9762\u7684\u7b56\u7565\u5b89\u6392\uff08\u6bd4\u5982\u8bf4\uff0c\u5982\u679c49%\u7684\u6982\u7387\u6389\u4e0b\u60ac\u5d16\uff0c51%\u7684\u6982\u7387\u5230\u8fbe\u76ee\u6807\uff0c\u6211\u4eec\u5927\u6982\u8fd8\u662f\u4e0d\u8981\u8fd9\u6837\u505a\uff09\u3002</p> <p>\u4f46\u5fc5\u987b\u6ce8\u610f\uff0c\u8fd9\u4e2a\u76f4\u89c2\u7684\u60f3\u6cd5\u5e76\u4e0d\u6b63\u786e\uff01\u5728DL\u4e2d\uff0c\u4eba\u4eec\u65e9\u5df2\u53d1\u73b0\u6a21\u578b\u5177\u6709\u4e00\u79cdoverconfidence\u7684\u503e\u5411\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5fc5\u987b\u5206\u6e05\u4e24\u79cd\u4e0d\u786e\u5b9a\u6027\uff1a</p> <ul> <li>\u6a21\u578b\u8f93\u51fa\u663e\u793a\u51fa\u6765\u7684\u7684\u4e0d\u786e\u5b9a\u6027\uff08statistical uncertainty\uff09\uff1a\u8fd9\u662f\u56e0\u4e3a\u73af\u5883\u672c\u8eab\u7684\u52a8\u529b\u5b66\u5b58\u5728\u4e0d\u786e\u5b9a\u6027\u9020\u6210\u7684\u90a3\u4e48\u6a21\u578b\u7684\u7f6e\u4fe1\u6982\u7387(confidence)\u4e0d\u9ad8\u3002\u6bd4\u5982\uff0c\u5982\u679c\u7ed9CIFAR\u4e0a\u9762\u7684\u5206\u7c7b\u5668\u6254\u4e00\u5f20\u72d7\u7ad9\u5728\u8f66\u4e0a\u7684\u7167\u7247\uff0c\u90a3\u4e48\u5b83\u7684\u8f93\u51fa\u5f88\u53ef\u80fd\u662f\u201c\u72d7\u201d\u548c\u201c\u8f66\u201d\u4e24\u4e2a\u7c7b\u522b\u7684\u6982\u7387\u63a5\u8fd1\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u8fd9\u662f\u6570\u636e\u672c\u8eab\u9020\u6210\u7684\u95ee\u9898\uff1b</li> <li>\u6a21\u578b\u672c\u8eab\u7684\u4e0d\u786e\u5b9a\u6027\uff08model uncertainty\uff09\uff1a\u8fd9\u624d\u662f\u6211\u4eec\u4e4b\u524d\u63d0\u5230\u7684\uff0c\u56e0\u4e3a\u6a21\u578b\u8bad\u7ec3\u7684\u4e0d\u786e\u5b9a\u6027\u9020\u6210\u7684\u6a21\u578b\u7684bias\u3002\u6bd4\u5982\u8bf4\uff0c\u5728DL\u8bad\u7ec3\u5206\u7c7b\u5668\u7684\u65f6\u5019\uff0c\u5728CIFAR\u4e0a\u9762\u8bad\u7ec3\u51fa\u6765\u7684\u6a21\u578b\u6709\u7684\u5c31\u662f\u5206\u8fa8\u732b\u975e\u5e38\u51c6\uff0c\u6709\u7684\u5c31\u662f\u5206\u8fa8\u72d7\u975e\u5e38\u51c6\u3002\u8fd9\u79cd\u4e0d\u786e\u5b9a\u6027\u662f\u8bad\u7ec3\u8fc7\u7a0b\u9020\u6210\u7684\uff0c\u6a21\u578b\u672c\u8eab\u7684\u95ee\u9898\u3002\u8fd9\u6837\u7684\u4e0d\u786e\u5b9a\u6027\u663e\u7136\u662f\u4e0d\u80fd\u4ece\u6a21\u578b\u7684logits\u4e2d\u770b\u51fa\u6765\u7684\u3002</li> </ul> <p>\u4e00\u79cd\u6570\u5b66\u4e0a\u7684\u8868\u8ff0\u662f\uff0c\u7b2c\u4e00\u79cd\u4e0d\u786e\u5b9a\u6027\u662f</p> \\[ p(y|x,\\theta) \\] <p>\u4e5f\u5c31\u662f\u7ed9\u5b9a\u5f53\u524d\u7684\u6a21\u578b\uff0c\u8f93\u51falabel \\(y\\) \u7684\u6982\u7387\uff08\u6a21\u578b\u81ea\u5df1\u7684confidence\uff09\u6709\u591a\u5927\uff1b\u800c\u7b2c\u4e8c\u79cd\u4e0d\u786e\u5b9a\u6027\u662f</p> \\[ \\mathbb{E}_{\\theta \\sim p(\\theta|D)}[p(y|x,\\theta)] \\] <p>\u4e5f\u5c31\u662f\u7ed9\u5b9a\u6574\u4e2a\u6570\u636e\u96c6\uff0c\u8bad\u7ec3\u51fa\u6765\u7684\u6a21\u578b\u4e0d\u89c1\u5f97\u662f\u56fa\u5b9a\u7684\uff0c\u56e0\u6b64\u9884\u6d4b\u7684\u7ed3\u679c\u4e5f\u4e0d\u4e00\u5b9a\u76f8\u540c\u3002\u6211\u4eec\u8981\u8bbe\u6cd5\u4f30\u8ba1\u7b2c\u4e8c\u79cd\u4e0d\u786e\u5b9a\u6027\uff0c\u5c31\u5fc5\u987b\u77e5\u9053\u8fd9\u4e2a\u5206\u5e03\u7684\u7ec6\u8282\u3002</p> <p>\u4e00\u4e2a\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u7684\u65b9\u6cd5\u5c31\u662fBayesian Neural Networks(BNN)\u3002\u5728\u8fd9\u6837\u7684\u795e\u7ecf\u7f51\u7edc\u4e2d\uff0c\u6bcf\u4e00\u4e2aweight\u4e0d\u518d\u662f\u4e00\u4e2a\u6570\u5b57\uff0c\u800c\u662f\u4e00\u4e2a\u5206\u5e03\uff08\u4ee3\u8868\u8bad\u7ec3\u51fa\u6765\u7684\u795e\u7ecf\u7f51\u7edc\uff09\uff01\u540c\u65f6\uff0c\u5b83\u8fd1\u4f3c\u5730\u8ba4\u4e3a\u5404\u4e2aweight\u662f\u72ec\u7acb\u7684\uff0c\u5e76\u4e14\u9075\u5faa\u9ad8\u65af\u5206\u5e03\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f3a\u884c\u8ba1\u7b97\u51fa \\(p(\\theta|D)\\) \u3002\u8fd9\u4e2atopic\u6bd4\u8f83\u590d\u6742\uff0c\u6211\u4eec\u4f1a\u5728\u4e4b\u540e\u518d\u8be6\u7ec6\u4ecb\u7ecd\u3002</p> <p>\u8fd9\u91cc\uff0c\u6211\u4eec\u6765\u641e\u4e00\u4e2a\u201c\u800d\u8d56\u201d\u7684\u65b9\u6cd5\uff1aEnsemble\u3002\u8fd9\u4e2a\u65b9\u6cd5\u7684\u601d\u8def\u5f88\u7b80\u5355\uff1a\u6211\u4eec\u8bad\u7ec3\u51fa\u6765\u591a\u4e2a\u6a21\u578b\u3002\u7136\u540e\u6211\u4eec\u628a\u6bcf\u4e00\u4e2a\u6a21\u578b\u90fd\u8dd1\u4e00\u904d\uff0c\u5206\u522b\u8ba1\u7b97\u4e00\u4e0b \\(s'\\) \u7684\u5206\u5e03\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u6a21\u578b\u7684\u4e0d\u786e\u5b9a\u6027\u7684\u4f30\u8ba1\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u8fd1\u4f3c</p> \\[ \\mathbb{E}_{\\theta \\sim p(\\theta|D)}[p(y|x,\\theta)]\\approx \\frac{1}{N}\\sum_{i=1}^N p(y|x,\\theta_i) \\] <p>\u53ef\u4ee5\u8ba4\u4e3a\uff0c\u8fd9\u8fd8\u662f\u5408\u7406\u7684\uff0c\u56e0\u4e3a\u6bcf\u4e00\u4e2a \\(\\theta_i\\) \u90fd\u662f\u8bad\u7ec3\u51fa\u6765\u7684\uff0c\u56e0\u6b64\u90fd\u662f\u4ece \\(p(\\theta|D)\\) \u4e2d\u53d6\u6837\u5f97\u5230\u7684\u3002\u800c\u5f97\u5230\u8fd9\u4e9b \\(\\theta_i\\) \u4e5f\u662f\u76f8\u5bf9\u5bb9\u6613\u7684\uff1a\u6211\u4eec\u53ea\u9700\u8981\u8bad\u7ec3\u51fa\u6765\u591a\u4e2a\u6a21\u578b\u5c31\u53ef\u4ee5\u4e86\u3002</p> <p>Q\uff1a\u6211\u4eec\u4ece\u540c\u6837\u7684\u6570\u636e\u96c6 \\(D\\) \u4f7f\u7528\u540c\u6837\u7684\u65b9\u6cd5\u8bad\u7ec3\u591a\u4e2a\u6a21\u578b\uff0c\u4e3a\u4ec0\u4e48\u7ed3\u679c\u4f1a\u4e0d\u4e00\u6837\u5462\uff1f</p> <p>A: \u5f53\u7136\u4e0d\u662f\u3002\u9996\u5148\uff0c\u6211\u4eec\u7684optimizer\uff08\u6bd4\u5982\uff0cSGD\uff09\u672c\u8eab\u5c31\u5177\u6709\u4e00\u5b9a\u7684\u968f\u673a\u6027\u3002\u5176\u6b21\uff0c\u6211\u4eec\u6bcf\u4e00\u6b21\u8bad\u7ec3\u6a21\u578b\u4e4b\u524d\uff0c\u6a21\u578b\u91cc\u7684\u53c2\u6570\u4e5f\u90fd\u662f\u968f\u673a\u521d\u59cb\u5316\u7684\u3002\u6700\u540e\uff0c\u5c31\u7b97\u6ca1\u6709\u968f\u673a\u6027\uff0c\u4e5f\u6709\u4e00\u4e9b\u5904\u7406\u529e\u6cd5\u3002\u6bd4\u5982\uff0c\u5728\u53e4\u8001\u7684\u65f6\u5019\uff0c\u4eba\u4eec\u5148\u641e\u4e00\u4e2a\u6570\u636e\u96c6 \\(D\\) \uff0c\u7136\u540e\u6bcf\u4e00\u4e2a\u8bad\u7ec3 \\(\\theta_i\\) \u7684 \\(D_i\\) \u90fd\u662f\u4ece \\(D\\) \u4e2d\u968f\u673a\uff08\u53ef\u91cd\u590d\uff09\u53d6\u6837\u5f97\u5230\u7684\u3002\u5f53\u7136\uff0c\u73b0\u5728\u6211\u4eec\u65e9\u5df2\u4e0d\u91c7\u7528\u8fd9\u6837\u7684\u65b9\u6cd5\uff0c\u56e0\u4e3aSGD\u7684\u968f\u673a\u6027\u5df2\u7ecf\u8db3\u591f\u4e86\u3002</p> <p>\u5b9e\u9a8c\u4e2d\uff0c\u4e00\u822c\u53d6 \\(N=10\\) \u3002\u4f60\u53ef\u80fd\u53c8\u8981\u62b1\u6028\uff1a\u8fd9\u6837\u65b9\u5dee\u4e5f\u592a\u5927\u4e86\u5427\u3002\u4f46\u5b9e\u9645\u4e0a\u5b83work\uff01</p>"},{"location":"Online%20CS%20Courses/CS285/chap09/#exploiting_uncertainty","title":"Exploiting Uncertainty","text":"<p>\u6211\u4eec\u73b0\u5728\u5df2\u7ecf\u6709\u4e86\u4e00\u4e2a\u65b9\u6cd5\u6765\u4f30\u8ba1\u6a21\u578b\u7684\u4e0d\u786e\u5b9a\u6027\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u8981\u8003\u8651\u5982\u4f55\u5229\u7528\u8fd9\u4e2a\u4e0d\u786e\u5b9a\u6027\u6765\u6539\u8fdb\u6211\u4eec\u7684planner\u3002</p> <p>\u6211\u4eec\u9996\u5148\u6ce8\u610f\u5230\uff0c\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u6709\u4e86 \\(p(\\theta|D)\\) \u6216\u8005\u5176\u8fd1\u4f3c\uff0c\u90a3\u4e48\u8ba1\u7b97\u76ee\u6807\u51fd\u6570 \\(J\\) \u5bf9 \\(\\theta\\) \u7684\u5e73\u5747\u503c\u5c31\u8db3\u591f\u4e86\u3002\u56e0\u4e3a\uff0c\u4e4b\u524d\u6307\u51fa\u7684\u95ee\u9898\u5168\u90e8\u6765\u81ea\u4e8e\u4ece \\(p(\\theta|D)\\) \u53d6\u6837\u51fa\u67d0\u4e00\u4e2a \\(\\theta\\) \u9020\u6210\u7684\u504f\u89c1\uff0c\u8fd9\u5df2\u7ecf\u88ab\u8fd9\u4e00\u65b9\u6cd5\u6d88\u53bb\u4e86\u3002\uff08\u5728\u4e4b\u524d\u60ac\u5d16\u7684\u4f8b\u5b50\u91cc\uff0c\u6211\u4eec\u5982\u679c\u628a\u591a\u4e2a\u6a21\u578b\u5f97\u5230\u7684\u4e0d\u540c\u8fb9\u754c\u7ebf\u5e73\u5747\u4e00\u4e0b\uff0c\u5f88\u53ef\u80fd\u5c31\u4f1a\u5f97\u5230\u4e00\u4e2a\u6bd4\u8f83\u7cbe\u786e\u7684\u8fb9\u754c\u7ebf\uff09</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u4ece\u73b0\u5728\u5f00\u59cb\u53ea\u9700\u8981\u8003\u8651\u5982\u4f55\u8ba1\u7b97 \\(J\\) \u7684\u5e73\u5747\u503c\u3002\u539f\u6765\uff0c\u6211\u4eec\u7684planner\u7684\u76ee\u6807\u662f</p> \\[ J=\\sum_{t=0}^T r(s_t,a_t), \\quad \\text{s.t. } s_{t+1}=f(s_t,a_t) \\] <p>\u4f46\u73b0\u5728\u76f8\u5f53\u4e8e\u51b3\u5b9a\u6027\u7684 \\(f\\) \u4e0d\u518d\u5b58\u5728\uff0c\u800c\u662f\u53d8\u6210\u4e86</p> \\[ p(s_{t+1}|s_t,a_t)=\\mathbb{E}_{\\theta\\sim p(\\theta|D)}[p(s_{t+1}|s_t,a_t;\\theta)] \\] <p>\u76f4\u89c2\u5730\u60f3\uff0c\u6211\u4eec\u8ba1\u7b97 \\(J\\) \u7684\u65b9\u6cd5\u5e94\u8be5\u662f</p> <ol> <li>\u91cd\u590d\u591a\u6b21\uff1a<ol> <li>\u5bf9 \\(t=1,2,\\cdots,T-1\\) :<ol> <li>\u4eceensemble\uff08\u6216\u8005\u66f4\u9ad8\u7ea7\u5730\uff0c\u4ece \\(p(\\theta|D)\\) \uff09\u968f\u673a\u91c7\u6837\u4e00\u4e2a \\(\\theta\\) \uff1b</li> <li>\u7528\u8fd9\u4e2a \\(\\theta\\) \u8ba1\u7b97 \\(s_{t+1}\\) \uff1b</li> </ol> </li> <li>\u8ba1\u7b97 \\(J\\) \u3002</li> </ol> </li> <li>\u8ba1\u7b97\u5404\u4e2a\u5f97\u5230\u7684 \\(J\\) \u7684\u5e73\u5747\u503c\u3002</li> </ol> <p>\u4f46\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u5e76\u4e0d\u8fd9\u6837\u505a\uff0c\u800c\u662f\u91c7\u7528\u4ee5\u4e0b\u7684\u65b9\u6cd5\uff1a</p> <p>Objective with Ensemble</p> <ol> <li>\u5bf9\u6bcf\u4e00\u4e2aensemble\u4e2d\u7684\u6a21\u578b \\(\\theta\\) \uff1a<ol> <li>\u5bf9 \\(t=1,2,\\cdots,T-1\\) \uff0c\u4e0d\u65ad\u7528\u8fd9\u4e00\u4e2a \\(\\theta\\) \u8ba1\u7b97 \\(s_{t+1}\\) \uff1b</li> <li>\u8ba1\u7b97 \\(J\\) \u3002</li> </ol> </li> <li>\u8ba1\u7b97\u5404\u4e2a\u5f97\u5230\u7684 \\(J\\) \u7684\u5e73\u5747\u503c\u3002</li> </ol> <p>\u4e4d\u4e00\u770b\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u5b8c\u5168\u4e0d\u5bf9\u2014\u2014\u6839\u636e\u524d\u9762\u7684\u7406\u8bba\uff0c\u6bcf\u4e2atimestamp \\(t\\) \u5bf9\u5e94\u7684\u7684 \\(\\theta\\) \u5fc5\u987b\u662f\u72ec\u7acb\u53d6\u6837\u7684\uff0c\u56e0\u4e3a\u539f\u5148\u7684</p> \\[ r(s_1,a_1)+\\mathbb{E}_{s_2\\sim p(s_2|s_1,a_1)}\\left[r(s_2,a_2)+\\mathbb{E}_{s_3\\sim p(s_3|s_2,a_2)}[r(s_3,a_3)+\\cdots]\\right] \\] <p>\u5e94\u8be5\u88ab\u5c55\u5f00\u4e3a</p> \\[ r(s_1,a_1)+\\mathbb{E}_{\\theta_1\\sim p(\\theta|D)}\\mathbb{E}_{s_2\\sim p(s_2|s_1,a_1;\\theta_1)}\\left[r(s_2,a_2)+\\mathbb{E}_{\\theta_2\\sim p(\\theta|D)}\\mathbb{E}_{s_3\\sim p(s_3|s_2,a_2;\\theta_2)}[r(s_3,a_3)+\\cdots]\\right] \\] <p>\u800c\u6309\u7167\u73b0\u5728\u7684\u8fd9\u4e2a\u7b97\u6cd5\uff0c\u4e0d\u540c\u65f6\u95f4\u7684 \\(\\theta\\) \u5b8c\u5168\u662f\u4e00\u6837\u7684\u3002\u4f46\u5b9e\u9645\u4e0a\uff0c\u8fd9\u4e2a\u65b9\u6cd5work\uff0c\u800c\u4e14\u8868\u73b0\u7684\u6bd4\u6211\u4eec\u6700\u76f4\u89c2\u7684\u601d\u60f3\u7ed9\u51fa\u7684\u65b9\u6cd5\u66f4\u597d\u4e00\u70b9\uff08\u53ef\u4ee5\u53c2\u89c1hw4\u4e2d\u7684\u5b9e\u9a8c\u6570\u636e\uff09\uff01</p> <p>Q: \u4e3a\u4ec0\u4e48\u4f1a\u8fd9\u6837\uff1f</p> <p>A: \u56e0\u4e3a\u6211\u4eec\u7684\u6a21\u578b\u53ef\u80fd\u4f1a\u5b66\u4f1a\u67d0\u79cd\u76f8\u5173\u6027\u3002\u76f4\u89c2\u4e0a\u8bb2\uff0c\u6211\u4eec\u539f\u5148\u7684\u201c\u76f4\u89c9\u7684\u201d\u65b9\u6cd5\u76f8\u5f53\u4e8e\u5728\u6bcf\u4e00\u6b65\u505a\u5e73\u5747\uff1b\u800c\u73b0\u5728\u7684\u65b9\u6cd5\u76f8\u5f53\u4e8e\u8ba9ensemble\u4e2d\u7684 \\(N\\) \u4e2a\u4e13\u5bb6\u5206\u522b\u72ec\u7acb\u8ba1\u7b97\uff0c\u7136\u540e\u505a\u67d0\u79cd\u201cvoting\u201d\u3002</p> <p>\u8fd9\u6837\uff0c\u5982\u679c\u8fd9 \\(N\\) \u4e2a\u6a21\u578b\u90fd\u662f\u4e13\u5bb6\uff0c\u90a3\u4e48\u540e\u8005\u663e\u7136\u66f4\u597d\u2014\u2014\u5047\u8bbe\u73b0\u5728\u6211\u4eec\u8bf7\u4e00\u7fa4\u7f16\u7a0b\u4e13\u5bb6\u4e00\u8d77\u5199\u4ee3\u7801\u3002\u524d\u4e00\u79cd\u65b9\u6cd5\u76f8\u5f53\u4e8e\u6bcf\u4e00\u6b21\u8f6e\u6d41\u9009\u53d6\u4e00\u4e2a\u4e13\u5bb6\u5199\u4e00\u884c\u4ee3\u7801\uff0c\u8fd9\u6837\u5f88\u53ef\u80fd\u5927\u5bb6\u4ec0\u4e48\u90fd\u505a\u4e0d\u51fa\u6765\uff1b\u800c\u540e\u9762\u4e00\u79cd\u65b9\u6cd5\u5219\u662f\u76f8\u5f53\u4e8e\u8ba9\u6bcf\u4e00\u4efd\u4e13\u5bb6\u72ec\u7acb\u5199\u4e00\u4efd\u4ee3\u7801\uff0c\u6700\u540e\u628a\u8fd9\u4e9b\u4ee3\u7801\u7684\u8fd0\u884c\u7ed3\u679c\u8fdb\u884c\u6295\u7968\u3002\u8fd9\u6837\u6210\u529f\u7684\u53ef\u80fd\u6027\u5c31\u4f1a\u66f4\u9ad8\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap09/#when_not_fully-observable","title":"When Not Fully-observable","text":"<p>\u6211\u4eec\u6700\u540e\u6765\u8ba8\u8bba\u4e00\u4e2atopic\uff1a\u5f53\u73af\u5883\u4e0d\u662f\u5b8c\u5168\u53ef\u89c2\u6d4b\u7684\u65f6\u5019\uff0c\u6211\u4eec\u8be5\u600e\u4e48\u529e\uff1f\u4e4b\u524d\uff0c\u6211\u4eec\u603b\u662f\u6ca1\u6709\u533a\u5206state\uff08\u53ef\u4ee5\u5b8c\u5168\u63cf\u8ff0\u6574\u4e2a\u7cfb\u7edf\uff09\u548cobservation\uff08\u7531state\u552f\u4e00\u51b3\u5b9a\uff0c\u4f46\u4e0d\u4e00\u5b9a\u53ef\u4ee5\u5b8c\u5168\u63cf\u8ff0\u6574\u4e2a\u7cfb\u7edf\uff09\u3002\u73b0\u5728\uff0c\u5c31\u8ba9\u6211\u4eec\u6765\u8003\u8651\u4e00\u4e0b\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>\u5982\u679c\u53ea\u6709observation\uff0c\u4f1a\u4ea7\u751f\u5f88\u591a\u56f0\u96be\u3002\u6bd4\u5982\u8bf4\uff0c\u5982\u679cobservation\u662f\u56fe\u7247\uff0c\u90a3\u4e48\u5b83\u7ef4\u5ea6\u9ad8\uff0c\u4fe1\u606f\u91cf\u5374\u5f88\u4f4e\uff08\u6bd4\u5982\uff0cInverted Pendulum\u73af\u5883\u4e2dstate\u53ea\u67094\u7ef4\uff0c\u4f46\u753b\u6210\u56fe\u7247\u5374\u53ef\u4ee5\u6709\u51e0\u5343\u7ef4\u5ea6\uff09\u3002\u6b64\u5916\uff0cobservation\u4e5f\u4e0d\u76f4\u63a5\u5173\u8054\u5230dynamic\uff0c\u56e0\u6b64\u5f88\u96be\u5728observation\u4e0a\u76f4\u63a5\u5efa\u6a21\u3002</p> <p>\u5904\u7406\u8fd9\u4e00\u95ee\u9898\u6709\u4e24\u79cd\u601d\u8def\u3002\u7b2c\u4e00\u79cd\u601d\u8def\u662f\u6211\u4eec\u89c1\u62db\u62c6\u62db\uff0c\u9664\u4e86\u52a8\u529b\u5b66\u6a21\u578b\u4e4b\u5916\uff0c\u6211\u4eec\u518d\u5b66\u4e60\u4e00\u4e2aObservation Model \\(p(o_t|s_t)\\) \u3002\u7136\u540e\uff0c\u6211\u4eec\u5c31\u9700\u8981\u8bad\u7ec3</p> \\[ \\max_\\phi \\sum_t \\mathbb{E}_{s_t,s_{t+1}\\sim p(s_t,s_{t+1})}\\left[\\log p_\\phi(s_{t+1}|s_t,a_t)+\\log p_\\phi(o_t|s_t)\\right] \\] <p>\u4f46\u73b0\u5728\u95ee\u9898\u5728\u4e8e\uff0c\u6211\u4eec\u4e0d\u77e5\u9053 \\(s_t\\) \uff0c\u4e5f\u4e0d\u77e5\u9053 \\(s_t,s_{t+1}\\) \u5e94\u8be5\u4ece\u54ea\u4e2a\u5206\u5e03\u53d6\u6837\uff08\u8fd9\u4e2a\u5206\u5e03\u5e94\u8be5\u662fstate\u7684\u5206\u5e03\uff0c\u4f46\u6211\u4eec\u5e76\u4e0d\u77e5\u9053\u8fd9\u4e2a\u5206\u5e03\uff09\u3002</p> <p>\u8fd9\u65f6\uff0c\u6211\u4eec\u7a81\u7136\u60f3\u5230\u8fd9\u4e00\u573a\u666f\u5f88\u7c7b\u4f3c\uff1a\u5728DL\u4e2d\u6211\u4eec\u5b66\u4e60\u8fc7Latent Variable Model\u3002\u8fd9\u91cc\u7684state\u5c31\u50cflatent variable\uff1alatent variable\u662f\u5bf9\u9ad8\u7ef4\u5ea6\u4f4e\u4fe1\u606f\u91cf\u56fe\u7247\u7684\u4e00\u4e2a\u201c\u538b\u7f29\u201d\uff1b\u6211\u4eec\u4e0d\u77e5\u9053latent variable\u7684\u5206\u5e03\uff0c\u4f46\u53ef\u4ee5\u5bf9\u5176\u4f5c\u51fa\u5047\u8bbe\uff1b\u6211\u4eec\u4e0d\u77e5\u9053latent variable\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u8f93\u5165\u5177\u4f53\u662f\u591a\u5c11\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u4e00\u4e2aencoder \\(q_\\psi(s_t|o_t)\\) \u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7ed9\u51fa\u65b0\u7684\u76ee\u6807\uff1a</p> \\[ \\max_{\\phi,\\psi} \\sum_t \\mathbb{E}_{o_t\\sim p(o_t),o_{t+1}\\sim p(o_{t+1})}\\mathbb{E}_{s_t\\sim q_\\psi(s_t|o_t),s_{t+1}\\sim q_\\psi(s_{t+1}|o_{t+1})}\\left[\\log p_\\phi(s_{t+1}|s_t,a_t)+\\log p_\\phi(o_t|s_t)\\right] \\] <p>\u4f46\u662f\u8fd9\u91cc\u5b9e\u9645\u4e0a\u6709\u70b9tricky\uff1a\u4e3a\u4ec0\u4e48\u6211\u4eec\u6562\u5047\u8bbe \\(s_t\\) \u53ea\u4f9d\u8d56\u4e8e \\(o_t\\) \u7684\u4fe1\u606f\u5462\uff1f\u5b9e\u9645\u4e0a\uff0c\u5f88\u53ef\u80fd\u5b8c\u5168\u4e0d\u662f\u8fd9\u6837\u7684\uff1a\u4e00\u822c\u6765\u8bf4 \\(s_t\\) \u4f9d\u8d56\u4e8e \\(o_1,\\cdots,o_{t-1},a_1,\\cdots,a_{t-1}\\) \u90fd\u662f\u53ef\u80fd\u7684\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5fc5\u987b\u6839\u636e\u5bf9\u4e8e\u73af\u5883\u7684\u57fa\u672c\u5047\u8bbe\u7ed9\u51faencoder\u7684\u5f62\u5f0f\u3002</p> <p>\u6bd4\u5982\u8bf4\u4e4b\u524d\u8bf4\u5230\u7684Inverted Pendulum\u73af\u5883\uff0c\u6211\u4eec\u7684observation\u662f\u4e00\u4e2a\u56fe\u7247\u3002\u8fd9\u4e2a\u56fe\u7247\u53ea\u5305\u542b\u89d2\u4f4d\u7f6e\uff0c\u4f46\u4e0d\u5305\u542b\u89d2\u901f\u5ea6\u3002\u800c\u5bf9\u4e8eaction\u7684\u4f9d\u8d56\u6027\uff0c\u6211\u4eec\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u5047\u8bbe\u5728\u67d0\u6e38\u620f\u91cc\u53ef\u4ee5\u9009\u62e9\u201c\u5f00\u6302\u201d\u8fd9\u4e00action\u3002\u64cd\u4f5c\u540e\u6ca1\u6709\u4efb\u4f55\u56fe\u7247\u4e0a\u7684\u53d8\u5316\uff0c\u53ea\u662f\u653b\u51fb\u529b\u53d8\u6210\u539f\u6765\u7684\u4e24\u500d\u3002\u8fd9\u6837\uff0c\u5c31\u7b97\u7ed9\u51fa\u6240\u6709observation\u4e5f\u65e0\u6cd5\u83b7\u5f97\u8fd9\u4e00\u4fe1\u606f\u3002</p> <p>\u5f53\u7136\uff0c\u6211\u4eec\u8fd8\u6709\u7b2c\u4e8c\u79cd\u65b9\u6cd5\u3002\u8fd9\u79cd\u65b9\u6cd5\u5c31\u662f\u2014\u2014\u6211\u4eec\u76f4\u63a5\u4e0d\u7ba1\u4e09\u4e03\u4e8c\u5341\u4e00\uff0c\u5c31\u5b66</p> \\[ p(o_{t+1}|o_t,a_t) \\] <p>\u8fd9\u6837\u7b97\u6cd5\u4e0a\u662f\u723d\u4e86\uff0c\u4f46\u76f8\u5bf9\u5e94\u7684\u5c31\u9700\u8981\u795e\u7ecf\u7f51\u7edc\u5904\u7406 \\(o_t\\) \u7684\u6c34\u5e73\u5f88\u9ad8\u3002\u6bd4\u5982\uff0c\u53ef\u80fd\u7ed9\u5b9a \\(o_t\\) \u4e4b\u540e\u8fdb\u884c\u591a\u5c42\u5377\u79ef\uff0c\u8fd8\u53ef\u80fd\u9700\u8981attention\u3002\u8fd9\u4e00\u65b9\u6cd5\u4e5f\u6709\u6210\u529f\u7684\u6848\u4f8b\uff0c\u4f46\u6211\u4eec\u5c31\u4e0d\u505a\u8fc7\u591a\u4ecb\u7ecd\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap09/#reference_papers","title":"Reference Papers","text":"<ol> <li>Neural Network Dynamics for Model-Based Deep Reinforcement Learning with Model-Free Fine-Tuning\uff08\u4ecb\u7ecdmodel-based\u548cmodel-free\u7684\u7ed3\u5408\uff09</li> <li>Deep Reinforcement Learning in a Handful of Trials using Probabilistic Dynamics Models\uff08\u975e\u5e38sample-efficient\u7684model-based RL\u65b9\u6cd5\uff09</li> <li>Sample-Efficient Reinforcement Learning with Stochastic Ensemble Value Expansion\uff08\u4ecb\u7ecd\u4e86model-based RL\u4e2d\u7684ensemble\u65b9\u6cd5\uff09</li> <li>SOLAR: Deep Structured Representations for Model-Based Reinforcement Learning\uff08\u4ecb\u7ecd\u4e86 partially observed model-based RL\u4e2d\u7684latent variable\u65b9\u6cd5\uff09</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap10/","title":"Model Based Learning with Policy","text":"<p>\u4e4b\u524d\uff0c\u6211\u4eec\u4ecb\u7ecd\u7684Model-based\u65b9\u6cd5\u5b8c\u5168\u57fa\u4e8eplanning\u7684\u65b9\u6cd5\uff0c\u800c\u6ca1\u6709\u518d\u4f7f\u7528policy\u3002\u4f46\u5b9e\u9645\u4e0a\uff0ciLQR\u8fd9\u6837\u7684\u65b9\u6cd5\u8ba1\u7b97\u91cf\u5f88\u5927\u5e76\u4e14\u9700\u8981\u91cd\u590d\u8fed\u4ee3\u624d\u80fd\u6536\u655b\uff0c\u800c\u57fa\u4e8e\u91c7\u6837\u7684\u968f\u673a\u65b9\u6cd5\u53c8\u4e0d\u7cbe\u786e\u3002\u6211\u4eec\u56e0\u6b64\u4e0d\u59a8\u8003\u8651\u4e00\u79cd\u65b0\u7684\u65b9\u6cd5\uff1a\u5728Model-based\u7684\u57fa\u7840\u4e0a\uff0c\u52a0\u5165Policy\u3002</p> <p>\u76f4\u89c2\u7684\u60f3\u6cd5\u5f88\u7b80\u5355\uff0c\u6211\u4eec\u73b0\u5728\u53cd\u6b63\u4e5f\u5df2\u7ecf\u6709\u4e86\u6a21\u578b\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u76f4\u63a5\u5bf9</p> \\[ \\theta =\\arg\\max_{\\theta}\\mathbb{E}_{s_1\\sim p(s_1)}\\left[r(s_1,\\pi_\\theta(s_1))+\\mathbb{E}_{s_2\\sim p_\\phi(s_2|s_1,a_1)}\\left[r(s_2,\\pi_\\theta(s_2))+\\cdots\\right]\\right] \\] <p>\u8fdb\u884c\u4f18\u5316\uff1f\uff08\u5176\u4e2d \\(\\phi\\) \u4ee3\u8868\u6211\u4eec\u7684\u6a21\u578b\u7684\u9884\u6d4b\u7ed3\u679c\uff09\u3002\u6ce8\u610f\u8fd9\u91cc\u4e00\u5207\u90fd\u662f\u5df2\u77e5\u7684\u4e86\uff0c\u6ca1\u6709\u4ec0\u4e48\u9700\u8981\u548c\u73af\u5883\u8fdb\u884c\u4ea4\u4e92\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u76f4\u63a5\u5bf9 \\(\\theta\\) \u6c42\u5bfc\u6570\u5373\u53ef\u3002</p> <p>\u4f46\u6211\u4eec\u9a6c\u4e0a\u53c8\u4f1a\u6ce8\u610f\u5230\u8fd9\u91cc\u7684\u95ee\u9898\uff1a\u548c\u4e4b\u524dplanning\u7684\u65f6\u5019\u4e3a\u4ec0\u4e48\u4e0d\u80fd\u76f4\u63a5\u4f7f\u7528\u4e00\u9636\u65b9\u6cd5\u4e00\u6837\uff0c\u73b0\u5728\u5982\u679c\u5bf9 \\(\\theta\\) \u68af\u5ea6\u4e0b\u964d\u5fc5\u7136\u4f1a\u9020\u6210\u68af\u5ea6\u7206\u70b8\u6216\u8005\u6d88\u5931\u7684\u95ee\u9898\u3002\u4e5f\u5c31\u50cfRNN\u4e00\u6837\uff0c\u8fd9\u6837\u666e\u901a\u7684\u8fed\u4ee3\u5f0f\u7f51\u7edc\u662f\u65e0\u6cd5\u8bad\u7ec3\u7684\u3002\u4f46\u8fd9\u91cc\u53c8\u548cLSTM\u4e0d\u540c\uff0c\u6211\u4eec\u4e0d\u80fd\u968f\u610f\u4fee\u6539\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u7684\u5f62\u5f0f\u3002\u56e0\u6b64\uff0c\u8fd9\u4e00\u65b9\u6cd5\u5931\u8d25\u4e86\u3002</p> <p>\u4f46\u6211\u4eec\u7acb\u523b\u53cd\u5e94\u8fc7\u6765\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e00\u4e9b\u524d\u9762Model-free\u7684\u65f6\u5019\u4ecb\u7ecd\u7684\u65b9\u6cd5\u3002\u6bd4\u5982\uff0c\u53ef\u4ee5\u4f7f\u7528policy gradient\u3002\u4e4b\u524d\u6211\u4eec\u63d0\u5230\uff0cpolicy gradient\u6700\u5927\u7684\u7f3a\u9677\u662f\u5b83\u662fon-policy\u7684\uff0c\u6240\u4ee5\u4e0dsample-efficient\u3002\u4f46\u73b0\u5728\u6211\u4eec\u6839\u672c\u4e0dcare\uff01\u56e0\u4e3a\u6f14\u5316\u662fmodel\u7ed9\u51fa\u7684\uff0c\u800c\u975e\u73af\u5883\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u7ed9\u51fa\u4e86\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u65b9\u6cd5\u3002\u7528\u4e00\u4e2a\u6709\u8da3\u7684\u8bed\u8a00\u6765\u8bf4\uff0c\u8fd9\u5c31\u662f \"Model-Free Methods with a Model\" \u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap10/#utilizing_model_in_model-free_methods","title":"Utilizing Model in Model-Free Methods","text":"<p>\u6211\u4eec\u73b0\u5728\u7684\u5173\u952e\u95ee\u9898\u662f\uff0c\u5982\u4f55\u5728model free methods\u4e2d\u4f7f\u7528\u73b0\u5728\u7684\u52a8\u529b\u5b66\u6a21\u578b\u3002\u5982\u679c\u4e0d\u662f\u5f88\u4ed4\u7ec6\uff0c\u7ed9\u51fa\u7684\u7b97\u6cd5\u5f88\u53ef\u80fd\u6709\u6f0f\u6d1e\u3002\u6bd4\u5982\uff0c\u5982\u679c\u6211\u4eec\u5927\u5927\u54a7\u54a7\u5730\u76f4\u63a5\u7ed9\u51fa\u8fd9\u6837\u7684\u65b9\u6cd5\uff1a</p> <p>\"Model Free Method with Model\"(wrong)</p> <ol> <li>\u8fd0\u884c\u4e00\u4e2abase policy \\(\\pi\\) \uff0c\u6536\u96c6\u6570\u636e\u5230buffer \\(B\\) \uff1b</li> <li>\u91cd\u590d\uff1a<ol> <li>\u4ecebuffer\u9009\u62e9\u82e5\u5e72\u6570\u636e\uff0c\u5b66\u4e60\u4e00\u4e2a\u52a8\u529b\u5b66\u6a21\u578b \\(p_\\phi(s_{t+1}|s_t,a_t)\\) \uff1b</li> <li>\u91cd\u590d\uff1a<ol> <li>\u7528\u6a21\u578b\u751f\u6210\u82e5\u5e72trajectory\u7684\u6570\u636e\uff1b</li> <li>\u7528\u67d0\u79cdmodel free\u7684\u7b97\u6cd5\u66f4\u65b0policy \\(\\pi^\\star\\) \u3002</li> </ol> </li> <li>\u7528\u6700\u65b0\u7684policy \\(\\pi^\\star\\) \u6536\u96c6\u6570\u636e\uff0c\u52a0\u5165buffer \\(B\\) \u3002</li> </ol> </li> </ol> <p>\u4e4d\u4e00\u770b\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u5b8c\u5168\u65e0\u61c8\u53ef\u51fb\u3002\u4f46\u5b9e\u9645\u4e0a\u5176\u5b58\u5728\u4e00\u4e2a\u5de8\u5927\u7684\u6f0f\u6d1e\uff1a\u6211\u4eec\u4f7f\u7528\u6a21\u578b\u751f\u6210\u4e00\u4e2afull trajectory\uff0c\u8fd9\u4f1a\u4e25\u91cd\u5730\u653e\u5927\u6a21\u578b\u7684\u8bef\u5dee\u3002\u8fd8\u8bb0\u5f97\u4e4b\u524d\u7528model\u8fdb\u884cplanning\u7684\u65f6\u5019\uff0c\u6211\u4eec\u4f7f\u7528finite horizon\u5e76\u4e14\u4f7f\u7528MPC\uff08\u53ea\u4fdd\u7559plan\u51fa\u6765\u7684\u7b2c\u4e00\u6b65\uff09\u6765\u907f\u514d\u8fd9\u4e2a\u95ee\u9898\u3002\u73b0\u5728\uff0c\u6211\u4eec\u540c\u6837\u8981\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u3002</p> <p>\u90a3\u6211\u4eec\u5e94\u8be5\u600e\u4e48\u529e\u5462\uff1f\u8fd9\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u91c7\u7528\u4e00\u79cd\u201c\u6742\u4ea4\u201d\u6280\u672f\uff1a\u6211\u4eec\u5148\u4ece\u73af\u5883\u641e\u4e00\u6761\u5b8c\u5168\u6b63\u786e\u7684trajectory</p> \\[ \\tau: s_1,a_1\\to s_2,a_2\\to \\cdots \\to s_T,a_T \\] <p>\u7136\u540e\uff0c\u6211\u4eec\u9009\u5b9a\u4e00\u4e2a \\(k\\) \uff1a\u6bd4\u5982\u6211\u4eec\u8ba4\u4e3a\u6a21\u578b\u5728 \\(k\\) \u6b65\u4e4b\u5185\u7d2f\u79ef\u7684\u8bef\u5dee\u8fd8\u53ef\u4ee5\u63a5\u53d7\u3002\u6211\u4eec\u5c31\u53ef\u4ee5\u201c\u6811\u4e0a\u5f00\u82b1\u201d\uff1a</p> \\[ \\tau_k: s_1,a_1\\to s_2,a_2\\to \\cdots \\to s_{T-k},a_{T-k}\\to s_{T-k+1}',a_{T-k+1}'\\to \\cdots \\to s_T',a_T' \\] \\[ \\tau_{k-1}: s_1,a_1\\to s_2,a_2\\to \\cdots \\to s_{T-k+1},a_{T-k+1}\\to s_{T-k+2}',a_{T-k+2}'\\to \\cdots \\to s_T',a_T' \\] \\[ \\cdots \\] \\[ \\tau_1: s_1,a_1\\to s_2,a_2\\to \\cdots \\to s_{T-1},a_{T-1}\\to s_T',a_T' \\] <p>\u5176\u4e2d\u52a0\u201c \\(^\\prime\\) \u201d\u7684\u4ee3\u8868\u4f7f\u7528model\u7684\u9884\u6d4b\u3002\u8fd9\u6837\uff0c\u7ed9\u5b9a\u4e00\u6761\u73af\u5883\u7684\u8def\u5f84\uff0c\u6211\u4eec\u7684\u6a21\u578b\u5c31\u53ef\u4ee5\u751f\u6210 \\(k\\) \u4e2a\u4e0d\u540c\u7684\u8def\u5f84\u3002\u4ece\u800c\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u8fd9 \\(k\\) \u4e2a\u8def\u5f84\u6765\u8fdb\u884cmodel free\u65b9\u6cd5\u7684\u66f4\u65b0\uff0c\u5982\u4e0b\u9762\u7684\u7b97\u6cd5\u6240\u793a\uff1a</p> <p>Model Free Method with Model</p> <ol> <li>\u8fd0\u884c\u4e00\u4e2abase policy \\(\\pi\\) \uff0c\u6536\u96c6\u6570\u636e\u5230buffer \\(B\\) \uff1b</li> <li>\u91cd\u590d\uff1a<ol> <li>\u4ecebuffer\u9009\u62e9\u82e5\u5e72\u6570\u636e\uff0c\u5b66\u4e60\u4e00\u4e2a\u52a8\u529b\u5b66\u6a21\u578b \\(p_\\phi(s_{t+1}|s_t,a_t)\\) \uff1b</li> <li>\u91cd\u590d\uff1a<ol> <li>\u4ecebuffer\u9009\u62e9\u4e00\u6761\u5b8c\u5168\u6b63\u786e\u7684trajectory \\(\\tau\\) \uff1b</li> <li>\u7528\u6a21\u578b\u751f\u6210 \\(k\\) \u4e2a\u65b0\u7684trajectory\u6570\u636e\uff1b</li> <li>\u7528\u67d0\u79cdmodel free\u7684\u7b97\u6cd5\u66f4\u65b0policy \\(\\pi^\\star\\) \u3002</li> </ol> </li> <li>\u7528\u6700\u65b0\u7684policy \\(\\pi^\\star\\) \u6536\u96c6\u6570\u636e\uff0c\u52a0\u5165buffer \\(B\\) \u3002</li> </ol> </li> </ol> <p>\u4f46\u8fd9\u4e00\u65b9\u6cd5\u4e5f\u6709\u5176\u7f3a\u70b9\u3002\u6ce8\u610f\u5230\u8fd9\u6837\u7684\u8def\u5f84\u524d\u9762\u7684 \\(1\\to T-k\\) \u90fd\u662f\u6765\u81ea\u4e8ebuffer\u7684\uff0c\u56e0\u6b64\u5176\u5206\u5e03\u80af\u5b9a\u4e0d\u5bf9\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u518d\u6b21\u5931\u53bb\u4e86\u4f7f\u7528on-policy\u7b97\u6cd5\u7684\u673a\u4f1a\u3002\u56e0\u6b64\uff0c\u8fd9\u4e00\u7b97\u6cd5\u4e2dmodel free\u4e0d\u80fd\u662fpolicy gradient\uff0c\u53ea\u80fd\u662foff-policy\u7684\u65b9\u6cd5\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap10/#q_learning_with_models","title":"Q learning with Models","text":"<p>\u6211\u4eec\u6765\u8ba8\u8bba\u4e00\u4e0b\u4e0a\u9762\u7b97\u6cd5\u7684\u5177\u4f53\u60c5\u51b5\uff1aoff policy\u7b97\u6cd5\u9009\u4e3aQ learning\u3002\u8fd8\u8bb0\u5f97\u6211\u4eec\u4e4b\u524d\u63d0\u51fa\u8fc7\uff0cQ learning\u7684\u4e00\u822c\u8868\u793a\u5f62\u5f0f\uff1a</p> <pre><code>while True:\n    # sample data\n    if q_net is None: # first epoch, random sample\n        env_data = SampleFromEnv(policy=random)\n    else:\n        env_data = SampleFromEnv(policy=ExplorePolicy(q_net))\n    q_buffer.AddData(env_data)\n\n    for _ in range(K):\n        # get Q-learning data\n        train_q_data = q_buffer.sample()\n        for _ in range(S):\n            q_net.GradStep(train_q_data)\n            q_net.Update()\n</code></pre> <p>\uff08\u8fd9\u91cc\u548c\u5f53\u521d\u63d0\u51fa\u7684\u683c\u5f0f\u7565\u6709\u4e0d\u540c\u3002\u540c\u65f6\uff0c<code>Update()</code>\u653e\u5165\u4e86\u5185\u5faa\u73af\u3002\u8fd9\u662f\u56e0\u4e3a\u6211\u4eec\u5f53\u65f6\u8bf4\u7684\u662f\u9694\u4e00\u6bb5\u65f6\u95f4\u8bbe\u7f6e \\(\\phi_0=\\phi\\) \uff0c\u4f46\u540e\u9762\u53c8\u7ed9\u51fa\u4e86\u5b9e\u8df5\u4e2d\u4e00\u822c\u4f7f\u7528\u7684\u5f62\u5f0f\uff0c\u4e5f\u5c31\u662f\u6bcf\u4e00\u6b21\u90fd\u8fdb\u884c \\(\\phi_0\\leftarrow \\alpha\\phi+(1-\\alpha)\\phi_0\\) \u3002\uff09</p> <p>\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0cmodel\u7684\u5f15\u5165\u5c31\u662f\u76f8\u5f53\u4e8e\u7ed9\u8fd9\u4e2a\u8fc7\u7a0b\u52a0\u5165\u53e6\u5916\u4e24\u4e2aprocess\uff1a</p> <ul> <li>\u8bad\u7ec3dynamic\u6a21\u578b\uff1b</li> <li>\u4ecedynamic\u6a21\u578b\u4e2d\u91c7\u6837\u6570\u636e\uff0c\u52a0\u5165Q learning\u7684\u8bad\u7ec3buffer\u3002\u5177\u4f53\u5730\uff0c\u6211\u4eec\u8fd8\u662f\u91c7\u7528\u524d\u9762\u7684\u65b9\u6cd5\uff0c\u6839\u636e\u771f\u5b9e\u73af\u5883\u4e2d\u7684\u4e00\u4e2astate\u91c7\u6837\uff0c\u7136\u540e\u7528model\u6765\u9884\u6d4b\u4e00\u4e2a\u5f88\u77ed\u7684trajectory\uff08\u957f\u5ea6\u8bb0\u4e3a \\(T\\) \uff09\u3002</li> </ul> <p>\u8fd9\u4e24\u4e2a\u8fc7\u7a0b\u5e94\u8be5\u653e\u5728\u4ec0\u4e48\u4f4d\u7f6e\u5462\uff1f\u53ef\u4ee5\u60f3\u8c61\uff0cmodel\u7684\u8bad\u7ec3\u5e94\u8be5\u653e\u5728\u5916\u5c42\uff0c\u56e0\u4e3a\u5176\u76f8\u5bf9\u7b80\u5355\uff0c\u8fd0\u884c\u7684\u6b21\u6570\u4e0d\u9700\u8981\u592a\u591a\uff1b\u800cmodel\u7684\u4f7f\u7528\u5e94\u8be5\u653e\u5728\u5185\u5c42\uff0c\u81f3\u5c11\u8981\u6bd4\u4ece\u73af\u5883\u7684\u91c7\u6837\u6b21\u6570\u591a\u3002</p> <p>\u53e6\u5916\u4e00\u4e2a\u7ec6\u8282\u662f\uff0c\u5c31\u50cf\u4e0a\u4e00\u6b21\u6211\u4eec\u8bf4\u7684\u90a3\u6837\uff0c\u6211\u4eec\u5bf9\u4e8edynamic model\u7684\u8bad\u7ec3\u4e5f\u9700\u8981\u4e00\u4e2abuffer\u3002\u8fd9\u4e2abuffer\u5e94\u8be5\u662f\u4e00\u4e2a\u72ec\u7acb\u7684buffer\uff1b\u4f46\u53e6\u5916\u4e00\u4e2a\u65b9\u9762\uff0c\u8fd9\u4e2abuffer\u91cc\u9762\u7684\u6570\u636e\u90fd\u662f\u4ece\u73af\u5883\u83b7\u5f97\u7684\uff0c\u56e0\u6b64\u5bf9\u4e8eQ learning\u6765\u8bf4\u90fd\u662f\u5b9d\u8d35\u7684\u3002\u56e0\u6b64\uff0c\u53ef\u4ee5\u60f3\u5230\u8fd9\u4e2adynamic buffer\u5e94\u8be5\u5305\u542b\u4e8eQ learning\u7684buffer\u4e2d\u3002</p> <p>\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7ed9\u51fa\u4e00\u4e2a\u4e00\u822c\u7684\u7b97\u6cd5\u63cf\u8ff0\uff1a</p> <pre><code>while True:\n    # sample data\n    if q_net is None: # first epoch, random sample\n        env_data = SampleFromEnv(policy=random)\n    else:\n        env_data = SampleFromEnv(policy=ExplorePolicy(q_net))\n    dynamic_buffer.AddData(env_data)\n    q_buffer.AddData(env_data)\n\n    # train dynamic model\n    dynamic_model.Train(dynamic_buffer.Sample())\n    for _ in range(K):\n        # add additional data to Q learning data buffer\n        start_point = dynamic_buffer.Sample(n)['states'] # n: a hyperparameter, usually = 1\n        path = dynamic_model.GetTrajectories(\n            start=start_point,\n            length=T, \n            policy=q_net\n        )\n        q_buffer.AddData(path)\n\n        # get Q-learning data\n        train_q_data = q_buffer.Sample()\n        for _ in range(S):\n            q_net.GradStep(train_q_data)\n            q_net.Update()\n</code></pre> <p>\u8fd9\u4e2a\u7b97\u6cd5\u4e5f\u6709\u53e6\u5916\u4e00\u4e2a\u540d\u5b57\uff1aMBPO\uff08Model-Based Policy Optimization\uff09\u3002\u5b83\u4e5f\u53ef\u4ee5\u88ab\u6269\u5c55\u5230\u4e0d\u4f7f\u7528Q learning\u7684\u5176\u4ed6\u65b9\u6cd5\u4e2d\uff0c\u53ea\u4e0d\u8fc7\u8be5\u65b9\u6cd5\u5fc5\u987b\u662foff-policy\u7684\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap10/#dyna","title":"Dyna","text":"<p>Dyna\u662f\u4e0a\u9762\u65b9\u6cd5\u7684\u4e00\u4e2a\u7279\u6b8a\u60c5\u51b5\uff1a\u6211\u4eec\u9009\u53d6 \\(T=1\\) \uff0c\u4e5f\u5c31\u662f\u8bf4\u6211\u4eec\u53ea\u7528model\u9884\u6d4b\u4e00\u4e2astep\u3002\u4f46\u662f\uff0c\u76f8\u5e94\u5730\uff0c\u6211\u4eec\u5e76\u4e0d\u662f\u505a\u4e00\u4e2a\u91c7\u6837\uff0c\u800c\u662f\u9009\u53d6\u591a\u4e2a \\(s'\\) \u3002\u8fd9\u548c\u524d\u9762\u7684\u65b9\u6cd5\u5404\u6709\u4f18\u52a3\u3002</p> <p>Dyna\u7684\u7b97\u6cd5\u53ef\u4ee5\u5982\u4e0b\u5199\u51fa\uff08\u5f53\u7136\uff0c\u5176\u7ec6\u8282\u548c\u4e4b\u524d\u53ef\u80fd\u7565\u6709\u51fa\u5165\uff0c\u56e0\u4e3a\u6bd5\u7adf\u662f\u4e24\u4e2a\u72ec\u7acb\u63d0\u51fa\u7684\u7b97\u6cd5\uff09\uff1a</p> <p>Dyna</p> <p>\u91cd\u590d\uff1a</p> <ol> <li>\u8fd0\u884c\u67d0\u79cdpolicy\uff08\u9700\u8981exploration\uff09\u83b7\u5f97\u4e00\u4e9b \\((s,a,s',r)\\) \uff0c\u52a0\u5165replay buffer \\(B\\) \uff1b</li> <li>\u7528\u8fd9\u4e00\u7ec4\u6570\u636e\u66f4\u65b0\u4e00\u6b65dynamic model\uff1b</li> <li>\u7528\u8fd9\u4e00\u7ec4\u6570\u636e\u66f4\u65b0\u4e00\u6b21Q function\uff1b</li> <li>\u91cd\u590d \\(K\\) \u6b21\uff1a<ol> <li>\u4ecebuffer\u4e2d\u53d6\u51fa\u4e00\u7ec4\u6570\u636e \\((s,a)\\) \u3002</li> <li>\u4ecemodel\u7ed9\u51fa\u7684\u6982\u7387 \\(p(s'|s,a)\\) \u4e2d\u91c7\u6837 \u51e0\u4e2a \\(s'\\) \uff0c\u5e76\u7528\u671f\u5f85\u503c\u518d\u6b21\u66f4\u65b0Q function\u3002</li> </ol> </li> </ol> <p>\u5982\u679c\u4f60\u5df2\u7ecf\u5fd8\u8bb0\u4e86Q learning\u7684update\u65b9\u5f0f\uff0c\u6211\u4eec\u8fd9\u91cc\u91cd\u65b0\u5199\u4e00\u6b21\uff1a</p> \\[ Q^\\pi(s_t,a_t)\\leftarrow r(s_t,a_t)+\\gamma \\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}\\left[\\max_{a_{t+1}}Q^{\\pi}(s_{t+1},a_{t+1})\\right] \\] <p>\u4ece\u8fd9\u4e2a\u8868\u8fbe\u5f0f\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u770b\u5230Dyna\u76f8\u6bd4\u4e8e\u666e\u901aQ learning\u7684\u4f18\u52bf\uff1a\u539f\u6765\u6211\u4eec\u5bf9 \\(s_{t+1}\\) \u7684\u671f\u671b\u53ea\u80fd\u901a\u8fc7\u5355\u91c7\u6837\u8fdb\u884c\u3002\u4f46\u73b0\u5728\u76f8\u5f53\u4e8e\u5206\u5e03\u672c\u8eab\u5df2\u7ecf\u88ab\u6211\u4eec\u638c\u63e1\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u91c7\u5f88\u591a\u6837\u6765\u6c42\u671f\u5f85\u503c\uff01\u8fd9\u6837\uff0c\u53f3\u8fb9\u7684\u671f\u671b\u4f30\u8ba1\u7684\u5c31\u4f1a\u66f4\u52a0\u51c6\u786e\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap10/#summary","title":"Summary","text":"<p>\u6211\u4eec\u53ef\u4ee5\u5728\u8fd9\u91cc\u6682\u505c\u4e00\u6b65\uff0c\u601d\u8003\u4e00\u4e0b\u6211\u4eec\u7684\u521d\u5fc3\u3002</p> <p>\u5728\u5f88\u4e45\u4e4b\u524d\uff0c\u6211\u4eec\u63d0\u51fa\u8981\u5b66\u4f1a\u73af\u5883\u7684\u52a8\u529b\u5b66\u3002\u4f46\u5f53\u65f6\u6211\u4eec\u7684\u76ee\u6807\u662f\u76f4\u63a5\u4e25\u683c\u5730\uff08\u6216\u8005\u8fd1\u4f3c\u5730\uff09\u6839\u636e\u8fd9\u4e2a\u52a8\u529b\u5b66\u7684\u6570\u5b66\u8868\u8fbe\u5f0f\u6c42\u89e3\u6700\u4f18\u7b56\u7565\u3002\u6211\u4eec\u8de8\u8d8a\u91cd\u91cd\u56f0\u96be\uff0c\u4ece\u73af\u5883\u52a8\u529b\u5b66\u5df2\u77e5\u7684\u95ee\u9898\u51fa\u53d1\uff0c\u8fdb\u4e00\u6b65\u6269\u5c55\u5230\u52a8\u529b\u5b66\u672a\u77e5\uff0c\u9700\u8981\u624b\u52a8\u5b66\u4e60\u7684\u95ee\u9898\u3002</p> <p>\u4f46\u672c\u8bb2\u53c8\u505a\u4e86\u4e00\u6b65\u5927\u7684\u8f6c\u5f2f\uff0c\u6211\u4eec\u4e0d\u518d\u76f4\u63a5\u4f7f\u7528\u8fd9\u4e2a\u52a8\u529b\u5b66\uff0c\u800c\u662f\u518d\u6b21\u5c06\u5176\u4f5c\u4e3a\u4e00\u4e2a\u5de5\u5177\uff0c\u53ea\u662f\u7528\u6765\u751f\u6210\u6570\u636e\uff0c\u8bad\u7ec3\u539f\u6765\u7684model-free\u65b9\u6cd5\u3002\u8fd9\u771f\u7684\u6709\u610f\u4e49\u5417\uff0c\u6211\u4eec\u771f\u7684\u8fd9\u4e48\u7f3a\u5c11\u6570\u636e\u5417\uff1f\u6bd4\u5982\u8bf4\uff0cQ-learning\u672c\u8eab\u5c31\u662foff-policy\u7684\uff0c\u6211\u4eec\u901a\u8fc7replay buffer\u53cd\u590d\u201c\u69a8\u5e72\u201d\u73af\u5883\u7684\u6570\u636e\uff0c\u4e0d\u662f\u505a\u7684\u4e5f\u5f88\u597d\u5417\uff1f</p> <p>\u4e8e\u662f\u5ba1\u89c6\u6574\u4e2a\u8fc7\u7a0b\u540e\uff0c\u6211\u4eec\u7ec8\u4e8e\u53d1\u73b0\uff1a\u521b\u9020\u6570\u636e\u672c\u8eab\u5e76\u4e0d\u662f\u6211\u4eec\u7684\u76ee\u7684\u3002\u5173\u952e\u5728\u4e8e\u6211\u4eec\u6570\u636e\u7684\u8986\u76d6\u80fd\u529b\u3002\u5728\u9ad8\u7ef4\u7a7a\u95f4\u4e2d\uff0c\u968f\u4fbf\u51e0\u6761trajectory\u57fa\u672c\u4e0a\u662fsparse\u7684\uff0c\u6211\u4eec\u96be\u4ee5\u4ece\u4e2d\u5b66\u5230\u4ec0\u4e48\u3002\u4f46model-based\u7684\u5173\u952e\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece\u4efb\u4f55\u4e00\u4e2astate\uff0c\u751f\u6210\u4efb\u4f55\u4e00\u4e2aaction\u4e4b\u540e\u7684\u7ed3\u679c\u3002\u5c3d\u7ba1\u8fd9\u4e2a\u7ed3\u679c\u53ef\u80fd\u4e0d\u51c6\u786e\uff0c\u4f46\u8fd9\u4e2a\u6570\u636e\u7684\u4ef7\u503c\u662f\u4e0d\u53ef\u4f30\u91cf\u7684\u2014\u2014\u539f\u5148\u4ece\u73af\u5883\u4e2d\u5c31\u7b97\u91c7\u5f88\u591a\u5f88\u591a\u7684\u6570\u636e\uff0c\u4e5f\u5f88\u5c11\u6709\u6982\u7387\u80fd\u5230\u8fbe\u540c\u4e00\u4e2a\u70b9\u5904\u4e24\u6b21\u3002</p> <p></p> <p>\u8fd9\u4e5f\u5c31\u662fmodel-based learning\u80fd\u591fwork\u7684\u539f\u56e0\uff1a\u4ece\u73af\u5883\u4e2d\u83b7\u5f97\u7684\u6570\u636e\u4e1c\u4e00\u6994\u5934\u897f\u4e00\u68d2\u5b50\uff0c\u6a21\u578b\u5f88\u96be\u5feb\u901f\u5b66\u4f1a\u4e00\u4e9b\u7279\u6027\uff1b\u800cmodel\u53ef\u4ee5\u7ed9\u51fa\u6a21\u578b\u60f3\u8981\u7684\u6570\u636e\uff0c\u4ece\u800c\u8ba9\u6211\u4eec\u7684model-free\u65b9\u6cd5\u66f4\u52a0\u6709\u6548\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap10/#multi-step_models_successor_representations","title":"Multi-Step Models &amp; Successor Representations","text":"<p>\u6211\u4eec\u6765\u8ba8\u8bba\u4e00\u4e2a\u7a0d\u5faeadvance\u4e00\u4e9b\u7684\u8bdd\u9898\u3002</p> <p>\u8fd8\u8bb0\u5f97\u4e4b\u524d\u6211\u4eec\u63d0\u51fa\uff0c\u8d70\u4e00\u6b65\u7684model-based\u65b9\u6cd5\u4f1a\u9762\u4e34error accumulation\u7684\u95ee\u9898\u3002\u90a3\u81ea\u7136\u60f3\u5230\uff1a\u4e3a\u4ec0\u4e48\u6211\u4eec\u4e0d\u5b66\u4e60\u4e00\u4e2a\u6a21\u578b\u76f4\u63a5\u8d70\u591a\u6b65\u5462\uff1f\u66f4\u751a\uff0c\u6211\u4eec\u4e3a\u4ec0\u4e48\u4e0d\u76f4\u63a5\u5b66\u4e60\u67d0\u79cd\u4e1c\u897f\uff0c\u4f7f\u5f97\u8f93\u5165\u4e00\u4e2apolicy\uff0c\u5b83\u76f4\u63a5\u8f93\u51fapolicy\u7684reward\uff0c\u800c\u8df3\u8fc7\u4e2d\u95f4\u5927\u90e8\u5206\u7684\u8ba1\u7b97\u5462\uff1f</p> <p>\u5982\u679c\u8fd9\u4e2a\u65b9\u6cd5\u6210\u529f\u4e86\uff0c\u90a3\u4e48\u524d\u9762\u7684\u90a3\u4e00\u5207\u95ee\u9898\u7acb\u523b\u70df\u6d88\u4e91\u6563\uff01\u5e26\u7740\u8fd9\u79cd\u601d\u60f3\uff0c\u6211\u4eec\u4e0d\u59a8\u4ece\u5b9a\u4e49\u51fa\u53d1\uff1a</p> \\[ V^\\pi(s_t)=\\mathbb{E}_{a_t\\sim \\pi(a_t|s_t)}\\left[Q^\\pi(s_t,a_t)\\right] \\] \\[ Q^\\pi(s_t,a_t)=r(s_t,a_t)+\\sum_{t'=t+1}^\\infty \\gamma^{t'-t}\\mathbb{E}_{s_{t'}\\sim p(s_{t'}|s_t),a_{t'}\\sim \\pi(a_{t'}|s_{t'})}[r(s_{t'},a_{t'})] \\] <p>\u4e3a\u4e86\u7b80\u5355\u8d77\u89c1\uff0c\u6211\u4eec\u8bb0</p> \\[ h=(s,a),\\quad p_\\pi(h_{t+1}|h_t)=\\pi(a_{t+1}|s_{t+1})p(s_{t+1}|s_t,a_t) \\] <p>\u8fd9\u6837\uff0c\u4e0a\u9762\u7684\u8868\u8fbe\u5f0f\u5c31\u53d8\u6210\u4e86</p> \\[ Q^\\pi(h_t)=\\sum_{t'=t}^\\infty \\gamma^{t'-t}\\mathbb{E}_{h_{t'}\\sim p(h_{t'}|h_t)}[r(h_{t'})] \\] <p>\u5176\u4e2d \\(p(h_{t'}|h_t)\\) \u4ee3\u8868\u7740 \\(t\\) \u65f6\u523b\u5904\u4e8e \\(h_t\\) \u7684\u60c5\u51b5\u4e0b\uff0c \\(t'\\) \u65f6\u523b\u5904\u4e8e \\(h_{t'}\\) \u7684\u6982\u7387\u3002\u7136\u540e\uff0c\u6211\u4eec\u7a0d\u5fae\u4ea4\u6362\u4e00\u4e0b\u6c42\u548c\u987a\u5e8f\uff1a</p> \\[ Q^\\pi(h_t)=\\sum_{h}r(h)\\cdot \\left[\\sum_{t'=t}^\\infty \\gamma^{t'-t}\\cdot p(h_{t'}=h|h_t)\\right]=\\frac{1}{1-\\gamma}\\sum_h r(h)p_{\\text{fut}}(h|h_t) \\] <p>\u8fd9\u91cc\u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u5206\u5e03 \\(p_{\\text{fut}}\\) \uff08\u4ee3\u8868future\uff09\uff1a</p> \\[ p_{\\text{fut}}(h|h_t)=(1-\\gamma)\\sum_{t'=t}^\\infty \\gamma^{t'-t}p(h_{t'}=h|h_t) \\] <p>\u8fd9\u4e00\u5206\u5e03\u4e5f\u88ab\u79f0\u4e3asuccessor distribution\u3002\u5982\u4f55\u5f97\u5230\u8fd9\u6837\u7684\u4e00\u4e2a\u5206\u5e03\u5462\uff1f\u53ef\u4ee5\u53d1\u73b0\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u6765\u505a\uff1a</p> <ol> <li>\u53d6 \\(t'-t\\sim \\text{Geom}(\\gamma)\\) \uff0c\u4e5f\u5c31\u662f\u4ece\u51e0\u4f55\u5206\u5e03\u4e2d\u91c7\u6837\uff1b</li> <li>\u53d6 \\(h=h_{t'}\\sim p(h_{t'}|h_t)\\) \u3002</li> </ol> <p>\u6211\u4eec\u53d1\u73b0\u4e86\u95ee\u9898\u7684\u5173\u952e\uff1a\u53ea\u8981\u8f93\u5165policy\u540e\uff0c\u6211\u4eec\u80fd\u5b66\u4f1a\u8fd9\u4e2asuccessor\u5206\u5e03\uff0c\u5c31\u7acb\u523b\u53ef\u4ee5\u8f93\u51fareward\u3002</p> <p>\u90a3\u4e48\uff0c\u5982\u4f55\u5b66\u4e60\u5462\uff1f\u6211\u4eec\u8bd5\u7740\u5efa\u7acb\u8d77\u8fd9\u4e2a\u5206\u5e03\u7684\u9012\u5f52\u5173\u7cfb\u3002\u4ece\u5b9a\u4e49\u51fa\u53d1\uff0c\u5c55\u5f00\u4e00\u6b65</p> \\[ p_{\\text{fut}}(h|h_t)=(1-\\gamma)\\left[p(h_{t}=h|h_t)+\\sum_{t'=t+1}^\\infty \\left(\\gamma^{t'-t}\\sum_{h'}p(h_{t'}=h|h_{t+1}=h')p(h_{t+1}=h'|h_t)\\right)\\right] \\] \\[ =(1-\\gamma)\\left[\\delta_{h,h_t}+\\sum_{h'}p(h_{t+1}=h'|h_t)\\cdot \\frac{\\gamma p_{\\text{fut}}(h|h_{t+1}=h')}{1-\\gamma}\\right] \\] \\[ =(1-\\gamma)\\delta_{h,h_t}+\\gamma \\sum_{h'}p_\\pi(h'|h_t)\\cdot {p_{\\text{fut}}(h|h')} \\] <p>\u6211\u4eec\u53ef\u4ee5\u628a \\(p_{\\text{fut}}(\\cdot|h_t)\\) \u770b\u6210\u4e00\u4e2a\u5173\u4e8e \\(h_t\\) \u7684\u5411\u91cf\u503c\u51fd\u6570\u3002\u8fd9\u65f6\uff0c\u8fd9\u4e2a\u5411\u91cf\u503c\u51fd\u6570\u6ee1\u8db3\u4e00\u4e2a\u7c7b\u4f3c\u201cBellman\u65b9\u7a0b\u201d\u7684\uff0c\u4e0d\u540cstate-action pair\u4e4b\u95f4\u6570\u503c\u7684\u5173\u7cfb\u3002\u6ce8\u610f\u5176\u4e2d \\(p_\\pi\\) \u4ee3\u8868\u4e00\u6b65\u7684\u5206\u5e03\uff0c\u56e0\u6b64\u662f\u548cpolicy\u6709\u5173\u7684\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u7684\u4efb\u52a1\u5c31\u662f\uff0c\u7ed9\u5b9a\u4e00\u4e2apolicy\uff0c\u6c42\u89e3\u8fd9\u4e2a\u65b9\u7a0b\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap10/#introducing_representations","title":"Introducing Representations","text":"<p>\u4f46\u662f\u9996\u5f53\u5176\u51b2\u7684\u95ee\u9898\u5728\u4e8e\uff0c\u8fd9\u4e2a\u5411\u91cf\u503c\u51fd\u6570\u7684\u7ef4\u5ea6\u592a\u5927\u4e86\u2014\u2014\u7b49\u4e8e\u6240\u6709\u53ef\u80fd\u7684action\u6570\u76ee\uff08\u4e0d\u662faction\u7ef4\u5ea6\uff09\u4e58\u4ee5\u6240\u6709\u53ef\u80fd\u7684state\u6570\u76ee\uff01\u6211\u4eec\u5b8c\u5168\u6ca1\u6709\u529e\u6cd5\u5904\u7406\u5b83\u3002\u4f46\u53e6\u5916\u4e00\u4e2a\u65b9\u9762\uff0c\u6211\u4eec\u53c8\u53d1\u73b0\u6700\u540e\u7684\u8f93\u51fa\u76f4\u63a5\u662f\u4e00\u4e2a\u6807\u91cf\u7684reward\uff0c\u56e0\u6b64\u8fc7\u91cf\u7684\u4fe1\u606f\u5b9e\u9645\u4e0a\u6ca1\u6709\u7279\u522b\u7684\u7528\u5904\u3002\u7c7b\u4f3c\u7684\u60c5\u666f\u8fd8\u53d1\u751f\u5728\u5f88\u591a\u5730\u65b9\uff0c\u6bd4\u5982\u56fe\u7247\u672c\u8eabpixel\u7684\u4fe1\u606f\u91cf\u8fdc\u8fdc\u5927\u4e8e\u56fe\u7247\u7684\u542b\u4e49\u7684\u4fe1\u606f\u91cf\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u7c7b\u4f3c\u5730\uff0c\u9700\u8981\u63d0\u53d6\u51fa\u4e00\u79cd\u201cfeature\u201d\uff0c\u6216\u8005representation\u3002</p> <p>\u4e3a\u6b64\uff0c\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2aprojection function \\(\\phi\\) \u3002\u5b83\u901a\u5e38\u662f\u5df2\u77e5\u7684\uff0c\u57fa\u4e8e\u4e00\u4e9b\u4e13\u4e1a\u7684\u77e5\u8bc6\uff08\u6216\u8005\u795e\u7ecf\u7f51\u7edc\uff09\u6765\u9009\u53d6\u3002\u5b83\u4ee3\u8868\u7740state-action pair\u4e2d\u7684\u54ea\u4e9b\u6210\u5206\u5bf9reward\u6709\u4e3b\u8981\u7684\u5f71\u54cd\u3002\u5b83\u7684\u4f5c\u7528\u662f\u538b\u7f29\u6389\u8fd9\u4e2a\u5f88\u5927\u7684\u7ef4\u5ea6\uff0c\u7559\u4e0b \\(N\\) \u4e2afeature\uff1a</p> \\[ \\phi(\\cdot): \\mathcal{S}\\times \\mathcal{A}\\to \\mathbb{R}^N \\] <p>\u8fdb\u4e00\u6b65\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u6700\u590d\u6742\u7684future distribution\u4e5f\u7528\u8fd9\u4e2a\u6295\u5f71\u505a\u4e00\u64cd\u4f5c\uff1a</p> \\[ \\psi_j (h_t):=\\sum_h \\phi_j(h)p_{\\text{fut}}(h|h_t),\\quad j=1,2,\\cdots,N \\] <p>\u8fd9\u4e9b \\(\\psi\\) \u5c31\u88ab\u79f0\u4e3asuccessor representations\u3002\u76f4\u89c2\u5730\u8bf4\uff0c\u5b83\u4ee3\u8868\u7740\u5728 \\(h_t\\) \u4e4b\u540e\u7684\u672a\u6765\u4e2d\uff0c\u7b2c \\(j\\) \u4e2afeature\u8d21\u732e\u7684reward\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u9996\u5148\u5047\u8bbe \\(\\phi\\) \u5b8c\u6210\u4e86\u8fd9\u4e2a\u4efb\u52a1\uff0c\u4e5f\u5c31\u662f\u4fdd\u7559\u4e0b\u6765\u4e86reward\u7684\u4e3b\u8981\u4fe1\u606f\u3002\u90a3\u4e48\uff0creward\u5c31\u5e94\u8be5\u53ef\u4ee5\u88ab\u8fd9\u4e9b \\(\\phi\\) \u8868\u793a\uff1a</p> \\[ r(h)=\\sum_j w_j\\phi_j(h) \\] <p>\uff08\u56e0\u6b64\uff0c\u4e5f\u6709</p> \\[ Q^\\pi(h_t)=\\frac{1}{1-\\gamma} \\sum_j w_j\\sum_h \\phi_j(h)p_{\\text{fut}}(h|h_t)=\\frac{1}{1-\\gamma} \\sum_j w_j\\psi_j (h_t) \\] <p>\uff09\uff0c\u5176\u4e2d \\(w_j\\) \u662f\u4e00\u4e9b\u901a\u8fc7\u8bad\u7ec3\u5f97\u5230\u7684\u53c2\u6570\u3002\u73b0\u5728\u7684\u95ee\u9898\u662f\uff0c\u6211\u4eec\u80fd\u5426\u7ed5\u8fc7 \\(p_{\\text{fut}}\\) \u76f4\u63a5\u6c42\u51fa \\(\\psi\\) \u3002\u8fd9\u4e5f\u5f88\u5bb9\u6613\uff0c\u53ea\u9700\u8981\u4ee3\u5165\uff1a</p> \\[ \\psi_j (h_t)=\\sum_h \\phi_j(h)p_{\\text{fut}}(h|h_t)=(1-\\gamma)\\phi_j(h_t)+\\gamma\\sum_h \\phi_j(h)\\left[ \\sum_{h'}p_\\pi(h'|h_t)\\cdot {p_{\\text{fut}}(h|h')}\\right] \\] \\[ =(1-\\gamma)\\phi_j(h_t)+\\gamma\\sum_{h'}p_\\pi(h'|h_t)\\psi_j(h') \\] <p>\u8fd9\u6837\uff0c\u65b0\u7684\u9012\u63a8\u5173\u7cfb\u5c31\u5efa\u7acb\u8d77\u6765\u4e86\uff0c\u800c\u4e14\u5f62\u5f0f\u4e5f\u548c\u539f\u6765\u7c7b\u4f3c\u3002\u6211\u4eec\u4f9d\u6b64\u53ef\u4ee5\u7c7b\u4f3cQ-learning\u7684\u7b97\u6cd5\u5f97\u5230 \\(\\psi\\) \u3002</p> <p>Q: \u4f60\u7684\u8fd9\u4e2a\u65b9\u6cd5\uff0c\u9012\u63a8\u5173\u7cfb\u90fd\u548cQ learning\u662f\u4e00\u6837\u7684\uff0c\u800c\u4e14\u8fd8\u4e0d\u662f\u5b66\u4e60\u4e00\u4e2aQ\u51fd\u6570\u800c\u662f \\(N\\) \u4e2a\u8fd9\u6837\u7684 \\(\\psi\\) \u51fd\u6570\u3002\u90a3\u4e3a\u4ec0\u4e48\u8fd8\u8981\u7528\u4f60\u8fd9\u4e2a\u65b9\u6cd5\u6765\u8ba1\u7b97Q function\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u4f7f\u7528Q learning\u5462\uff1f</p> <p>A: \u8fd9\u662f\u56e0\u4e3a \\(\\phi\\) \u76f8\u5f53\u4e8e\u4e3a\u6211\u4eec\u63d0\u53d6\u597d\u4e86\u7279\u5f81\uff0c\u8fdb\u800c\u6a21\u578b\u62df\u5408 \\(\\psi\\) \u7684\u96be\u5ea6\u6bd4\u76f4\u63a5\u62df\u5408 \\(Q\\) \u5c0f\u5f97\u591a\u3002</p> <p>\u8bbe\u60f3\u6211\u4eec\u73b0\u5728\u7684 \\(s_t\\) \u5c31\u662f\u4e00\u5f20\u56fe\u7247\uff0c\u90a3\u4e48 \\(\\phi(s)\\) \u7684 \\(N\\) \u4e2a\u5206\u91cf\u53ef\u4ee5\u9009\u4e3a\u4e00\u4e2a\u5f3a\u5927\u7684CNN\u8f93\u51fa\u7684 \\(N\\) \u4e2afeature\u3002\u90a3\u4e48\uff0c\u5728\u8fd9\u4e9bfeature\u4e0a\u9762\u5b66\u4e60\uff08\u5efa\u7acb\u9012\u63a8\u5f0f\uff09\uff0c\u663e\u7136\u6bd4\u76f4\u63a5\u5b66\u4e60\u4e00\u4e9breward \\(r(s_t,a_t)\\) \u66f4\u5bb9\u6613\u3002\u6bd4\u5982\uff0c\u4e00\u4e2a\u6e38\u620f\u7684\u9875\u9762\u4e0a\uff0c\u53ef\u80fd\u5230\u5904\u662f\u5b50\u5f39\u3001\u91d1\u5e01\u3001\u548c\u9c9c\u8840\u3002\u8fd9\u4e9b\u6bcf\u4e00\u4e2a\u56e0\u7d20\u90fd\u53ef\u80fd\u8d21\u732e\u5728reward\u91cc\u9762\u3002\u539f\u5148\u7684\u6a21\u578b\u8981\u60f3\u5b66\u4f1a\u597d\u7684Q\uff0c\u5fc5\u987b\u7406\u89e3\u8fd9\u4e9b\u7279\u5f81\u4e4b\u95f4\u7684\u590d\u6742\u5173\u7cfb\uff1b\u800c\u73b0\u5728\uff0c\u9884\u8bad\u7ec3\u597d\u7684 \\(\\phi\\) \u5df2\u7ecf\u5e2e\u6211\u4eec\u63d0\u53d6\u51fa\u6765\u4e86\uff0c\u7b2c\u4e00\u4e2a\u7279\u5f81\u5c31\u4ee3\u8868\u91d1\u5e01\u5728\u56fe\u7247\u4e2d\u7684\u201c\u5f3a\u5ea6\u201d\uff0c\u7b2c\u4e8c\u4e2a\u5c31\u4ee3\u8868\u5b50\u5f39\u7684\u201c\u5f3a\u5ea6\u201d\uff0c\u7b49\u7b49\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u7684 \\(N\\) \u4e2a\u6a21\u578b\u5c31\u53ef\u4ee5\u5404\u53f8\u5176\u804c\uff1a\u7b2c\u4e00\u4e2a\u5c31\u5b66\u4e60\u91d1\u5e01\u5bf9reward\u7684\u5f71\u54cd\uff0c\u7b49\u7b49\u3002\u8fd9\u6837\uff0c\u5b8c\u6210\u62df\u5408\u7684\u4efb\u52a1\u5c31\u5bb9\u6613\u4e86\u8bb8\u591a\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap10/#utilizing_successor_representations","title":"Utilizing Successor Representations","text":"<p>\u6839\u636e\u524d\u9762\u7684\u601d\u8def\uff0c\u6211\u4eec\u5c31\u7acb\u523b\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u65b0\u7684\u7b97\u6cd5\uff1a</p> <p>Algorithm 1</p> <p>\u91cd\u590d\uff1a</p> <ol> <li>\u6839\u636e\u5f53\u524d\u7684\u7b56\u7565 \\(\\pi\\) \uff0c\u4f7f\u7528\u4e0a\u9762\u7684\u9012\u63a8\u5173\u7cfb\uff0c\u7c7b\u4f3cQ-learning\u5730\u8bad\u7ec3 \\(\\psi_j\\) \uff1b</li> <li>\u6536\u96c6\u4e00\u7cfb\u5217\u548c\u73af\u5883\u4ea4\u4e92\u7684\u6570\u636e \\((s,a,r)\\) \uff0c\u8bad\u7ec3\u53c2\u6570\u77e9\u9635 \\(w\\) \u4f7f\u5f97 \\(|r(s,a)-\\sum_j w_j\\phi_j(s,a)|^2\\) \u88ab\u6700\u5c0f\u5316\uff1b</li> <li>\u5229\u7528 \\(\\psi\\) \u548c \\(w\\) \u8ba1\u7b97 \\(Q(s,a)=\\frac{1}{1-\\gamma} \\sum_j w_j\\psi_j (s,a)\\) \u3002</li> <li>\u6839\u636e \\(Q\\) \u66f4\u65b0policy\u3002</li> </ol> <p>\u8fd9\u4e2a\u65b9\u6cd5\u6709\u70b9\u50cfpolicy iteration\u65b9\u6cd5\uff0c\u53ea\u4e0d\u8fc7\u6211\u4eec\u4e0d\u518d\u76f4\u63a5\u5b66\u4e60 \\(Q\\) \uff0c\u800c\u662f\u5b66\u4e60\u4e86\u4e00\u4e2a\u66f4\u52a0\u7b80\u5355\u7684 \\(\\psi\\) \u3002\u4f46\u5bb9\u6613\u770b\u51fa\uff0c\u6211\u4eec\u8fd9\u6837\u505a\u7684\u6210\u672c\u8fd8\u662f\u6bd4\u8f83\u9ad8\u7684\uff0c\u56e0\u4e3a\u6bcf\u4e00\u8f6e\u90fd\u8981\u8bad\u7ec3 \\(N\\) \u4e2a\u50cfQ function\u4e00\u6837\u7684\u4e1c\u897f\u3002\u56e0\u6b64\uff0c\u4e5f\u6709\u53e6\u5916\u4e00\u79cd\u7684\u65b9\u6cd5\uff1a</p> <p>Algorithm 2</p> <ol> <li>\u6536\u96c6\u4e00\u7cfb\u5217\u548c\u73af\u5883\u4ea4\u4e92\u7684\u6570\u636e \\((s,a,r)\\) \uff0c\u8bad\u7ec3\u53c2\u6570\u77e9\u9635 \\(w\\) \u4f7f\u5f97 \\(|r(s,a)-\\sum_j w_j\\phi_j(s,a)|^2\\) \u88ab\u6700\u5c0f\u5316\uff1b</li> <li>\u9009\u5b9a\u5f88\u591a\u5f88\u591a\u4e2apolicy \\(\\pi_1,\\cdots,\\pi_k\\)</li> <li>\u5bf9 \\(i=1,\\cdots,k\\) \uff1a<ol> <li>\u6839\u636e\u5f53\u524d\u7684\u7b56\u7565 \\(\\pi\\) \uff0c\u4f7f\u7528\u4e0a\u9762\u7684\u9012\u63a8\u5173\u7cfb\uff0c\u7c7b\u4f3cQ-learning\u5730\u8bad\u7ec3 \\(\\psi_j\\) \uff1b</li> <li>\u5229\u7528 \\(\\psi\\) \u548c \\(w\\) \u8ba1\u7b97 \\(Q(s,a)=\\frac{1}{1-\\gamma} \\sum_j w_j\\psi_j (s,a)\\) \u3002</li> </ol> </li> <li>\u9009\u51fa\u4e00\u4e2a\u8868\u73b0\u8d85\u8fc7\u524d\u9762\u6240\u6709policy\u7684policy \\(\\pi^\\star\\) \u3002\u5177\u4f53\u5730\uff0c\u4ee4</li> </ol> \\[ \\pi^\\star(s)=\\arg\\max_a \\max_i \\sum_j w^{\\pi_i}_j\\psi^{\\pi_i}_j(s,a)  \\] <p>\u8fd9\u4e2apolicy\u4e3a\u4ec0\u4e48\u66f4\u597d\u5462\uff1f\u56e0\u4e3a\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u4e5f\u53ef\u4ee5\u8fd1\u4f3c\u5199\u4e3a</p> \\[ \\pi^\\star(s)=\\arg\\max_a \\max_i Q^{\\pi_i}(s,a) \\] <p>\u6240\u4ee5</p> \\[ Q(s,\\pi^\\star(s))\\ge Q(s,a)\\ge Q^{\\pi_i}(s,a) (\\forall i,a) \\] <p>\u8fd9\u4e2a\u65b9\u6cd5\u6709\u70b9\u50cf\u201c\u4e09\u4e2a\u81ed\u76ae\u5320\uff0c\u9876\u4e2a\u8bf8\u845b\u4eae\u201d\uff0c\u548c\u4e4b\u524d\u7684\u65b9\u6cd5\u601d\u8def\u90fd\u4e0d\u5c3d\u76f8\u540c\uff0c\u5341\u5206\u6709\u8da3\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap10/#extension_to_continuous_states","title":"Extension to Continuous States","text":"<p>\u524d\u9762\u6211\u4eec\u7684\u65b9\u6cd5\u90fd\u57fa\u4e8e\u5b66\u4e60\u4e00\u4e2a\u6982\u7387\u51fd\u6570 \\(p_{\\text{fut}}(h|h_t)\\) \u3002\u4f46\u8fde\u7eed\u60c5\u51b5\u4e0b\uff0c\u8981\u5b66\u4e60\u7684\u53d8\u6210\u5206\u5e03\uff0c\u95ee\u9898\u5c31\u53d8\u5f97\u56f0\u96be\u4e86\u8d77\u6765\u3002\u4f46\u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u4e00\u4e2a\u6280\u5de7\uff0c\u8fd9\u5728DL\u7684Word2Vec\u7b97\u6cd5\u4e2d\u4e5f\u88ab\u4f7f\u7528\u3002\u539f\u5148\u7684 \\(p_{\\text{fut}}(h|h_t)\\) \u662f\u4e00\u4e2a\u591a\u5206\u7c7b\u95ee\u9898\uff0c\u6211\u4eec\u628a\u5b83\u8f6c\u5316\u4e3a\u4e8c\u5206\u7c7b\u95ee\u9898\uff1a</p> \\[ p_{\\text{fut}}(h|h_t)\\to p(\\text{Y}|h_t,h),p(\\text{N}|h_t,h) \\] <p>\u5176\u4e2dY,N\u4ee3\u8868\u662f\u5426\u7684\u6807\u7b7e\u3002\u6211\u4eec\u7684\u65b0\u76ee\u6807\u662f</p> \\[ J(h_t)=\\sum_{h\\sim D_+}\\log p(\\text{Y}|h_t,h)+\\sum_{h\\sim D_-}\\log p(\\text{N}|h_t,h) \\] <p>\u5176\u4e2d \\(D_+\\) \u662f\u6b63\u4f8b\u6570\u636e\u96c6\uff0c\u7406\u60f3\u60c5\u51b5\u4e0b\u53d6\u6837\u6765\u81ea \\(p_{\\text{fut}}(h|h_t)\\) \uff1b\u800c \\(D_-\\) \u662f\u8d1f\u4f8b\u6570\u636e\u96c6\uff0c\u7406\u60f3\u60c5\u51b5\u4e0b\u53d6\u6837\u6765\u81ea \\(h\\) \u7684\u4efb\u610f\u67d0\u4e2a\u5206\u5e03\uff0c\u6bd4\u5982\u5c31\u8bb0\u4f5c \\(p(h)\\) \u3002\u4e3a\u4ec0\u4e48\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u505a\u5462\uff1f\u56e0\u4e3a\u5728\u8fd9\u6837\u7684\u5047\u8bbe\u4e0b\uff0c\u5bb9\u6613\u6c42\u5f97\u6700\u4f18\u89e3\u6ee1\u8db3</p> \\[ p(\\text{Y}|h_t,h)=\\frac{p_{\\text{fut}}(h|h_t)}{p_{\\text{fut}}(h|h_t)+kp(h)} \\] <p>\u5176\u4e2d \\(k=\\frac{|D_-|}{|D_+|}\\) \u3002\u8fd9\u6837\uff0c\u4ece\u8fd9\u4e2a\u5206\u7c7b\u5668\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5recover\u51fa\u539f\u59cb\u5206\u5e03</p> \\[ p_{\\text{fut}}(h|h_t)=C(h)\\cdot \\frac{p(\\text{Y}|h_t,h)}{1-p(\\text{Y}|h_t,h)} \\] <p>\u5176\u4e2d \\(C(h)\\) \u4e0d\u4f9d\u8d56 \\(h_t\\) \u3002\u8fd9\u4e2a\u5e38\u6570\u5f71\u54cd\u5e76\u4e0d\u5927\uff0c\u56e0\u4e3a\u6bd4\u5982\u8bf4\uff0c\u6211\u4eec\u8981\u5904\u7406</p> \\[ \\arg\\max_{a_t} Q^\\pi(h_t)=\\arg\\max_{a_t}\\frac{1}{1-\\gamma}\\sum_h r(h)p_{\\text{fut}}(h|h_t) \\] <p>\u90a3\u4e48 \\(C(h)\\) \u5c31\u6ca1\u6709\u5f71\u54cd\u3002\u8fd9\u4e00\u601d\u60f3\u88ab\u5e94\u7528\u5230\u6240\u8c13C-learning\uff08C for classifier\uff09\u4e2d\u3002\u4f46C-learning\u7684\u7b97\u6cd5\u672c\u8eab\u6bd4\u8f83\u590d\u6742\uff08\u6d89\u53ca\u5230Goal-conditioned learning\uff09\uff0c\u8fd9\u91cc\u5c31\u4e0d\u518d\u5c55\u5f00\u4e86\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap10/#reference_papers","title":"Reference Papers","text":"<ol> <li>Integrated architectures for learning, planning, and reacting based on approximating dynamic programming\uff08Dyna-style algorithm\uff09</li> <li>Continuous deep Q-learning with model-based acceleration\uff08MBA\uff09</li> <li>Model-Based Value Expansion for Efficient Model-Free Reinforcement Learning\uff08MBVE\uff09</li> <li>When to trust your model: Model-based policy optimization\uff08MBPO\uff09</li> <li>Improving Generalisation for Temporal Difference Learning: The Successor Representation\uff08Successor Representations\uff09</li> <li>Successor Features for Transfer in Reinforcement Learning\uff08Successor Features\uff09</li> <li>C-Learning: Learning to Achieve Goals via Recursive Classification\uff08C-learning\uff09</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap11/","title":"Exploration: Why we need that?","text":"<p>\u5728\u524d\u9762\u7684\u51e0\u8bb2\u4e2d\uff0c\u6211\u4eec\u5df2\u7ecf\u7ed9\u51fa\u4e86\u5f88\u591a\u5e38\u89c1\u7684RL\u7b97\u6cd5\u3002\u5b9e\u9a8c\u4e0a\u4e5f\u53d1\u73b0\uff0c\u8fd9\u4e9b\u7b97\u6cd5\u5728\u8bb8\u591a\u7b80\u5355\u7684\u4efb\u52a1\u548c\u73af\u5883\u4e0a\u9762\u8868\u73b0\u90fd\u5df2\u7ecf\u5341\u5206\u4f18\u79c0\u3002\u4f46\u662f\uff0c\u5f53\u6211\u4eec\u628a\u8fd9\u4e9b\u7b97\u6cd5\u5e94\u7528\u5230\u4e00\u4e9b\u590d\u6742\u7684\u4efb\u52a1\u4e0a\u65f6\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u5b83\u4eec\u7684\u8868\u73b0\u5e76\u4e0d\u5c3d\u5982\u4eba\u610f\u3002</p> <p>\u6bd4\u5982\u8003\u8651\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a\u5728\u4e00\u4e2a\u6e38\u620f\u4e2d\uff0c\u5f00\u59cb\u4f60\u548c\u4e00\u7fa4\u5c0f\u5175\u6218\u6597\uff0c\u4f46\u5f53\u6253\u6b7b\u8fd9\u4e9b\u5c0f\u5175\u4e4b\u540e\uff0c\u4f60\u4f1a\u9047\u5230\u4e00\u4e2a\u5f88\u5f3a\u5927\u7684boss\u3002\u800c\u5982\u679c\u4f60\u88ab\u5c0f\u5175\u51fb\u8d25\uff0c\u4f60\u5c31\u4f1a\u91cd\u65b0\u590d\u6d3b\uff0c\u56de\u5230\u6e38\u620f\u8d77\u70b9\u3002\u5bf9\u4e8e\u6211\u4eec\u7684\u6a21\u578b\u6765\u8bf4\uff0c\u5176\u6700\u597d\u7684\u7b56\u7565\u53ef\u80fd\u548c\u6211\u4eec\u60f3\u8c61\u7684\u4e0d\u592a\u4e00\u6837\u2014\u2014\u5982\u679c\u6253\u8d25\u4e86\u5c0f\u5175\uff0c\u9047\u5230boss\uff0c\u6a21\u578b\u4f1a\u53d1\u73b0\u5f88\u96be\u83b7\u80dc\uff0c\u56e0\u6b64reward\u5f88\u5c0f\uff1b\u4f46\u662f\u5982\u679c\u603b\u662f\u88ab\u5c0f\u5175\u6253\u6b7b\uff0c\u90a3\u4e48\u603b\u662f\u53ef\u4ee5\u590d\u6d3b\uff0c\u4ece\u800c\u53ef\u4ee5\u4e0d\u65ad\u79ef\u7d2f\u8fd9\u4e2a\u6bd4\u8f83\u5c0f\u7684reward\u3002\u8fd9\u6837\u7684\u8bdd\uff0c\u6a21\u578b\u53ef\u80fd\u4f1a\u9009\u62e9\u603b\u662f\u88ab\u5c0f\u5175\u6253\u6b7b\uff0c\u800c\u4e0d\u53bb\u6311\u6218boss\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u6211\u4eec\u7684\u6a21\u578b\u603b\u662f\u559c\u6b22\u201c\u6446\u70c2\u201d\uff0c\u4e0d\u601d\u8fdb\u53d6\u3002\u800c\u4e3a\u4ec0\u4e48\u6211\u4eec\u81ea\u5df1\u5728\u73a9\u8fd9\u79cd\u6e38\u620f\u7684\u65f6\u5019\u4e0d\u4f1a\u8f7b\u6613\u201c\u6446\u70c2\u201d\u5462\uff1f\u5176\u5b9e\u662f\u56e0\u4e3a\u6211\u4eec\u6e05\u695a\u8fd9\u4e2a\u6e38\u620f\u4e2d\u5404\u79cd\u89c4\u5219\u7684\u5b9e\u9645\u542b\u4e49\uff08\u201cwhat these sprites means\u201d\uff09</p> <p>\u90a3\u4e48\uff0c\u5982\u4f55\u907f\u514d\u6211\u4eec\u7684\u6a21\u578b\u51fa\u73b0\u8fd9\u79cd\u60c5\u51b5\u5462\uff1f\u6211\u4eec\u9700\u8981\u8ba9\u6a21\u578b\u53bb\u63a2\u7d22\u73af\u5883\u3002\u6bd4\u5982\uff0c\u6a21\u578b\u4e5f\u8bb8\u901a\u8fc7\u67d0\u79cd\u5de7\u5408\u63a2\u7d22\u5230\u4e86\u51fb\u8d25boss\u4e4b\u540e\u4f1a\u6709\u5de8\u5927\u7684reward\uff0c\u5b83\u5c31\u4f1a\u5b66\u4f1a\u548cboss\u6218\u6597\u7684\u6280\u5de7\u3002\u8fd9\u6837\uff0c\u524d\u9762\u7684\u95ee\u9898\u5c31\u5728\u7406\u8bba\u4e0a\u53ef\u4ee5\u88ab\u89e3\u51b3\u3002</p> <p>\u4f46exploration\u548cexploitation\uff08\u201c\u5265\u524a\u201d\uff0c\u4e5f\u5c31\u662f\u201c\u4e0d\u601d\u8fdb\u53d6\u201d\uff0c\u53ea\u5728\u5df2\u6709\u7684\u77e5\u8bc6\u4e0a\u6700\u5927\u5316reward\uff09\u7684\u5e73\u8861\u662f\u56f0\u96be\u7684\u3002\u53ef\u4ee5\u50cf\u50cf\uff0c\u5982\u679c\u8fc7\u5206\u5730explore\uff0c\u5f88\u53ef\u80fd\u9677\u5165\u6df7\u4e71\uff1b\u800c\u53eaexploit\u66f4\u5bb9\u6613\u9677\u5165\u5c40\u90e8\u6700\u4f18\u3002\u5728\u7406\u8bba\u4e0a\uff0c\u5728\u67d0\u4e9b\u7b80\u5316\u7684\u60c5\u51b5\u4e0b\uff0c\u53ef\u4ee5\u63a8\u5bfc\u51fa\u6700\u4f18\u7684exploration\u7b56\u7565\uff1b\u4f46\u5b9e\u9645\u4e0a\u5bf9\u4e8e\u6211\u4eec\u8fd9\u4e9b\u590d\u6742\u7684\u4efb\u52a1\uff0c\u8fd9\u4e9b\u4e86\u7406\u8bba\u65b9\u6cd5\u5f80\u5f80\u592a\u590d\u6742\u4ee5\u81f3\u4e8e\u65e0\u6cd5\u5b9e\u73b0\u3002\u8fd9\u5c31\u662f\u4e3a\u4f55\u6211\u4eec\u8981\u7814\u7a76exploration\u3002</p> <p>\u4f60\u53ef\u80fd\u8fd8\u8bb0\u5f97\u4e4b\u524d\u6211\u4eec\u5728\u4ecb\u7ecdQ learning\u4e2d\u63d0\u5230\u7684exploration \u7b56\u7565\uff08\u6bd4\u5982 \\(\\epsilon\\) -greedy\u548cBoltzmann\uff09\u3002\u4f46\u90a3\u4e9b\u53ea\u662f\u6700\u7b80\u5355\u7684exploration\u7b56\u7565\u3002\u6211\u4eec\u8fd9\u4e00\u8bb2\u5c31\u6765\u4ecb\u7ecd\u4e00\u4e9b\u7406\u8bba\u80cc\u666f\u66f4\u5f3a\u786c\u7684\uff0c\u66f4\u590d\u6742\u7684exploration\u7b56\u7565\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap11/#toy_model_multi-arm_bandit","title":"Toy Model: Multi-arm Bandit","text":"<p>\u201c\u591a\u624b\u81c2\u571f\u532a\u201d\u6a21\u578b\u662f\u4e00\u4e2a\u76f8\u5bf9\u7b80\u5355\u7684\uff0c\u7528\u6765\u5728\u7406\u8bba\u4e0a\u5206\u6790exploration\u7b56\u7565\u7684\u6a21\u578b\u3002\u5728\u8fd9\u4e00\u6a21\u578b\u4e2d\uff0c\u571f\u532a\u53ef\u4ee5\u91c7\u7528 \\(n\\) \u4e2d\u4e0d\u540c\u7684action\uff1a</p> \\[ \\mathcal{A}= \\{a_1,a_2,\\cdots,a_n\\} \\] <p>\u7ed9\u5b9a\u5176\u4e2d\u7684\u4e00\u4e2aaction\uff0c\u571f\u532a\u4f1a\u7acb\u523b\u83b7\u5f97\u4e00\u4e2areward\uff08\u56e0\u6b64\u8fd9\u4e00\u6a21\u578b\u88ab\u79f0\u4e3astateless\u7684\uff09\u3002\u8fd9\u4e00reward\u662f\u968f\u673a\u7684\uff0c\u670d\u4ece\u67d0\u79cd\u672a\u77e5\u5206\u5e03</p> \\[ r_{i}\\sim p(\\cdot |a_i) \\] <p>\u6211\u4eec\u8fdb\u4e00\u6b65\u8ba4\u4e3a\uff0c\u571f\u532a\u7684 \\(n\\) \u79cd\u64cd\u4f5c\u5177\u6709\u67d0\u79cd\u5171\u6027\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u627e\u5230 \\(n\\) \u4e2a\u53c2\u6570 \\(\\theta_1,\\cdots,\\theta_n\\) \uff0c\u4f7f\u5f97</p> \\[ p(r|a_i)=p_{\\theta_i}(r) \\] <p>\u5176\u4e2d \\(p_{\\theta_i}\\) \u662f\u4e00\u4e2aprobability density model\u3002</p> <p>\u4e00\u4e2a\u7b80\u5355\u7684\u4f8b\u5b50\uff1a \\(p(r|a_i)=\\text{Bernulli}(\\theta_i)\\) \u3002\u5f53\u7136\uff0c\u63a5\u4e0b\u6765\u7684\u7ed3\u679c\u5bf9\u4e8e\u66f4\u4e00\u822c\u7684\u60c5\u5f62\u4e5f\u662f\u6210\u7acb\u7684\u3002</p> <p>\u8fd9\u4e00\u8868\u8ff0\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u79cdPOMDP(Partially Observable Markov Decision Process)\uff1a\u6211\u4eec\u7684observation\u662f\u8fd9\u91cc\u7684reward\uff0c\u800c\u5176\u80cc\u540e\u7684state\u662f \\(\\theta_i\\) \u3002\u4e00\u4e2a\u6982\u5ff5\u53eb\u505abelief state\uff0c\u5b83\u6307\u7684\u662f\u6839\u636e\u6211\u4eec\u76ee\u524d\u7684\u6240\u6709observation\u60c5\u51b5\u4e0b\u63a8\u6d4b\u7684\u6982\u7387\u5206\u5e03 \\(\\hat{p}(\\theta_1,\\cdots,\\theta_n)\\) \uff08\u6ce8\u610f \\(\\hat{p}\\) \u548c \\(p\\) \u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\uff09\u3002</p> <p>\u6211\u4eec\u7684\u76ee\u6807\u662f\uff0c\u6700\u5927\u5316</p> \\[ R=\\sum_{t=1}^T r(a_t) \\] <p>\u6ce8\u610f\u8fd9\u4e2a\u8fc7\u7a0b\u5305\u542b\u4e86\u6211\u4eec\u8bd5\u9519\u7684\u8fc7\u7a0b\u3002\u7b49\u4ef7\u5730\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u628a\u8fd9\u4e00\u76ee\u6807\u5199\u4e3aregret\u7684\u5f62\u5f0f\uff1a</p> \\[ \\text{Reg}=T\\cdot \\mathbb{E}_{r\\sim p(r|a_n)}[r]-\\sum_{t=1}^T r(a_t) \\] <p>\u5b83\u4ee3\u8868\u4e86\u6211\u4eec\u7684\u6a21\u578b\u548c\u6700\u4f18\u6a21\u578b\u4e4b\u95f4\u7684\u5dee\u8ddd\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u4ecb\u7ecd\u4e09\u79cd\u65b9\u6cd5\uff0c\u6765\u6700\u5c0f\u5316\u8fd9\u4e00regret\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap11/#method_1_optimistic_explorationucbupper_confidence_bound","title":"Method 1: Optimistic Exploration/UCB(Upper Confidence Bound)","text":"<p>\u8fd9\u4e00\u65b9\u6cd5\u6709\u70b9\u50cf\u201cmodel free\u201d\uff0c\u5b83\u4e0d\u5bf9reward\u4ea7\u751f\u7684\u5206\u5e03\u505a\u4efb\u4f55\u5047\u8bbe\u3002\u5b83\u7684\u601d\u60f3\u662f\uff0c\u5bf9\u4e8e\u7eaf\u7cb9exploit\u7684\u7b56\u7565\uff0c\u9009\u62e9action\u7684\u65b9\u6cd5\u662f</p> \\[ a=\\arg\\max_{a_i}\\hat{\\mu}_{a_i} \\] <p>\u5176\u4e2d \\(\\hat{\\mu}_{a_i}\\) \u4ee3\u8868\u6211\u4eec\u76ee\u524d\u4f7f\u7528 \\(a_i\\) \u5f97\u5230\u7684\u6240\u6709reward\u7684\u5e73\u5747\u503c\u3002\u4e3a\u4e86\u628aexplore\u52a0\u5165\uff0c\u6211\u4eec\u6ce8\u610f\u5230 \\(\\hat{\\mu}_{a_i}\\) \u5b58\u5728\u8bef\u5dee\u3002\u5176\u5b9e\u9645\u503c\u4f30\u8ba1\u5e94\u8be5\u662f</p> \\[ \\hat{\\mu}_{a_i}\\pm C\\hat{\\sigma}_{a_i} \\] <p>\u8fd9\u79cd\u65b9\u6cd5\u7684\u601d\u60f3\u662f\uff0c\u6211\u4eec\u6700optimistic\uff0c\u56e0\u6b64\u53d6</p> \\[ a=\\arg\\max_{a_i}[\\hat{\\mu}_{a_i}+B(a_i)] \\] <p>\u5176\u4e2d \\(B(a_i)\\) \u4ee3\u8868\u7ed9action \\(a_i\\) \u52a0\u7684bonus\u3002\u7406\u8bba\u4e0a\u53ef\u4ee5\u8bc1\u660e\uff0c\u5982\u679c\u53d6</p> \\[ B(a_i)=\\sqrt{\\frac{2\\log T}{N(a_i)}} \\] <p>\u5176\u4e2d \\(N(a_i)\\) \u4ee3\u8868\u6211\u4eec\u9009\u62e9\u4e86 \\(a_i\\) \u7684\u6b21\u6570\uff0c\u90a3\u4e48\u6211\u4eec\u7684regret\u4f1a\u4ee5 \\(\\log T\\) \u7684\u901f\u5ea6\u589e\u957f\uff0c\u8fd9\u662f\u7406\u8bba\u6700\u4f18\u7684\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap11/#method_2_thompson_samplingposterior_sampling","title":"Method 2: Thompson Sampling/Posterior Sampling","text":"<p>Thompson sampling\u65b9\u6cd5\u7a0d\u5fae\u52a0\u5165\u4e86\u4e00\u4e9bmodel based\u7684\u6210\u5206\uff1a\u6211\u4eec\u6765\u6839\u636e\u73b0\u5728\u7684\u77e5\u8bc6\u9884\u6d4b\u53ef\u80fd\u7684 \\(\\theta_i\\) \u503c\u7684\u5206\u5e03 \\(\\hat{p}(\\theta_1,\\cdots,\\theta_n)\\) \uff08\u5c31\u662f\u4e4b\u524d\u6240\u8bf4\u7684belief state\uff09\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u4ece\u4e2d\u968f\u673a\u91c7\u6837\u4e00\u7ec4 \\((\\theta_1,\\cdots,\\theta_n)\\) \uff0c\u7136\u540e\u57fa\u4e8e\u8fd9\u4e00\u7ec4\u53c2\u6570\u4f5c\u51fa\u6700\u4f18\u7684\u51b3\u7b56\u3002\u5229\u7528\u8fd9\u4e00\u51b3\u7b56\u5e26\u6765\u7684\u6570\u636e\uff0c\u6211\u4eec\u53ef\u4ee5\u91cd\u65b0update\u6211\u4eec\u7684belief model\uff0c\u4ece\u800c\u4e0d\u65ad\u91cd\u590d\u3002</p> <p>\u663e\u7136\uff0c\u8fd9\u4e00\u65b9\u6cd5\u5728\u7406\u8bba\u4e0a\u96be\u4ee5\u5206\u6790\u3002\u4f46\u5b9e\u9645\u4e0a\uff0c\u5b83\u8dd1\u7684\u5f88\u597d\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap11/#method_3_information_gain","title":"Method 3: Information Gain","text":"<p>\u8fd9\u4e00\u65b9\u6cd5\u7684\u601d\u60f3\u662f\uff1a\u6211\u4eec\u8981\u5e73\u8861exploitation\u548cexploration\u3002\u5bf9\u4e8eexploitation\u6211\u4eec\u5df2\u7ecf\u53ef\u4ee5\u7ed9\u51fa\u4e00\u4e2a\u5b9a\u91cf\u7684\u523b\u753b\u2014\u2014reward\uff1b\u4f46\u6211\u4eec\u5e76\u4e0d\u597d\u8bf4\u600e\u4e48\u7684\u65b9\u6cd5\u662f\u4e00\u4e2aexplore\u3002\u5b83\u60f3\u5230\uff0cexplore\u7684\u7a0b\u5ea6\u53ef\u4ee5\u7528\u83b7\u5f97\u4fe1\u606f\u7684\u91cf\u6765\u523b\u753b\u3002\u6839\u636e\u4fe1\u606f\u7406\u8bba\uff0c\u5b9a\u4e49information gain\uff08\u4e5f\u53eb\u505a\u4e92\u4fe1\u606f\uff09</p> \\[ \\text{IG}(a)=\\mathcal{H}(\\hat{p}({\\theta}|h))-\\mathbb{E}_{r\\sim p(\\cdot|a)}\\left[\\mathcal{H}(\\hat{p}(\\theta|h,a,r))\\right] \\] <p>\u5176\u4e2d \\(\\mathcal{H}\\) \u4ee3\u8868\u5206\u5e03\u7684\u71b5\uff0c\u800c \\(h\\) \u4ee3\u8868\u6240\u6709\u7684\u5386\u53f2\uff0c \\(\\hat{p}(\\theta|h)\\) \u548c \\(\\hat{p}(\\theta|h,a,r)\\) \u4ee3\u8868\u6839\u636e\u5386\u53f2\uff08\u540e\u8005\u6bd4\u524d\u8005\u591a\u4e00\u7ec4\u6570\u636e\uff09\u8bad\u7ec3\u51fa\u7684belief state\u5206\u5e03\u3002\u8fd9\u4e00\u8868\u8fbe\u5f0f\u7684\u4ee3\u8868\u4e86\u9009\u62e9action \\(a\\) \u4e4b\u540e\u589e\u52a0\u7684\u4fe1\u606f\u91cf\uff08\u51cf\u5c11\u7684\u4e0d\u786e\u5b9a\u6027\uff09\u3002\u6700\u540e\uff0c\u6211\u4eec\u9009\u53d6action\u7684\u65b9\u5f0f\u662f\uff0c</p> \\[ a=\\arg\\min_a \\frac{\\left(r(a^{\\star})-\\mathbb{E}_{r\\sim p(\\cdot|a)}[r]\\right)^2}{\\text{IG}(a)} \\] <p>\u8fd9\u4e00\u8868\u8fbe\u5f0f\u4e2d\uff0c\u5206\u5b50\u4ee3\u8868\u4e0d\u5e94\u8be5\u9009\u53d6\u592a\u5dee\u7684\u7b56\u7565\uff08\u4ee3\u8868\u9002\u5ea6\u7684exploitation\uff09\uff1b\u800c\u5206\u6bcd\u4ee3\u8868\u6211\u4eec\u5e94\u8be5\u9009\u53d6\u80fd\u591f\u83b7\u5f97\u6700\u591a\u4fe1\u606f\u7684\u7b56\u7565\uff08\u4ee3\u8868\u9002\u5ea6\u7684exploration\uff09\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u8ba9\u6211\u4eec\u628a\u8fd9\u4e9b\u65b9\u6cd5\u4ecemulti-arm bandit\u7684\u6a21\u578b\u63a8\u5e7f\u5230\u66f4\u4e00\u822c\u7684RL\u95ee\u9898\u4e2d\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap11/#exploration_in_deep_rl","title":"Exploration in Deep RL","text":""},{"location":"Online%20CS%20Courses/CS285/chap11/#ucb_in_deep_rl","title":"UCB in Deep RL","text":"<p>\u4e00\u4e2a\u5f88\u76f4\u63a5\u7684\u65b9\u6cd5\u662f\uff0c\u6211\u4eec\u76f4\u63a5\u628abonus\u52a0\u5728reward function\u4e0a\u9762\uff1a</p> \\[ r^{+}(s,a)=r(s,a)+B(s)=r(s,a)+C\\sqrt{\\frac{\\log T}{N(s)}} \\] <p>\u7136\u540e\uff0c\u6211\u4eec\u628a\u8fd9\u4e00reward\u4ee3\u5165\u4efb\u4f55\u4e4b\u524d\u7684\u7b97\u6cd5\uff0c\u7136\u540etune\u4e00\u4e0b\u8fd9\u4e2a\u8d85\u53c2\u6570 \\(C\\) \u5c31\u53ef\u4ee5\u4e86\u3002\u4e5f\u6709\u5176\u4ed6\u7684bonus\u7684\u5f62\u5f0f\uff08\u4e0a\u9762\u8fd9\u79cd\u53eb\u505aUCB\uff09\uff0c\u6bd4\u5982MBIE-EB\uff1a</p> \\[ B_{\\text{MBIE-EB}}(s)=\\sqrt{\\frac{1}{N(s)}} \\] <p>\u548cBEB\uff1a</p> \\[ B_{\\text{BEB}}(s)=\\frac{1}{N(s)} \\] <p>\u4f46\u662f\u8fd9\u91cc\u6709\u4e00\u4e2a\u5c0f\u7ec6\u8282\uff1a \\(N(s)\\) \u600e\u4e48\u7b97\uff1f\u6211\u4eec\u4e0d\u80fd\u76f4\u63a5\u6570\uff0c\u5426\u5219\uff08\u6bd4\u5982\u8bf4\uff09\u5bf9\u4e8e\u8fde\u7eed\u7684state\uff0ccount\u4e00\u5b9a\u662f1\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u5373\u4f7f\u5bf9\u4e8e\u79bb\u6563\u7684state\uff0c\u76f4\u63a5\u6570\u6570\u610f\u4e49\u4e5f\u4e0d\u5927\uff08\u6bd4\u5982\u8bf4\uff0c\u5047\u8bbe\u6e38\u620f\u7684\u56fe\u5f62\u754c\u9762\u4e0a\u663e\u793a\u4e86\u6e38\u620f\u65f6\u95f4\uff0c\u90a3\u4e48\u540c\u6837\u7684\u60c5\u51b5\u53ef\u80fd\u5bf9\u5e94\u7684state\u5c31\u5927\u4e0d\u76f8\u540c\u4e86\uff09\u3002\u56e0\u6b64\uff0c\u53ef\u4ee5\u60f3\u5230\uff0c\u6211\u4eec\u9700\u8981\u4ece \\(s\\) \u4e2d\u62ff\u51fa\u67d0\u79cd\u7279\u5f81\uff0c\u7136\u540e\u6839\u636e\u8fd9\u4e9b\u7279\u5f81\u6765\u8ba1\u6570\u3002\u63a5\u4e0b\u6765\u5c31\u4ecb\u7ecd\u82e5\u5e72\u8ba1\u6570\u7684\u65b9\u6cd5\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap11/#counting_method_1_fitting_generative_model","title":"Counting Method 1: Fitting Generative Model","text":"<p>\u8fd9\u4e00\u65b9\u6cd5\u7684\u601d\u60f3\u662f\uff0c\u6211\u4eec\u7528\u4e00\u4e2agenerative model\u5b66\u4e60 \\(p_\\phi(s)\\) \uff0c\u4ee3\u8868\u6309\u7167\u6211\u4eec\u89c1\u8fc7\u7684\u6240\u6709\u6570\u636e\u7684\u6570\u636e\u96c6\u8bad\u7ec3\uff0cstate \\(s\\) \u51fa\u73b0\u7684\u6982\u7387\u3002</p> <p>\u5047\u8bbe\u6709\u4e86\u8fd9\u6837\u4e00\u4e2amodel\uff0c\u90a3\u4e48\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u7279\u5b9a\u7684state \\(s\\) \uff0c\u6709</p> \\[ p_\\phi(s)\\approx \\frac{N(s)}{N} \\] <p>\uff08\u5176\u4e2d \\(N\\) \u4ee3\u8868\u6211\u4eec\u89c1\u8fc7\u7684\u6240\u6709state\u7684\u6570\u91cf\uff09\uff0c\u800c\u5982\u679c\u5728\u6b64\u57fa\u7840\u4e0a\u518d\u89c1\u4e00\u6b21 \\(s\\) \uff0c\u90a3\u4e48\u6a21\u578b\u66f4\u65b0\u4e4b\u540e\u5c31\u4f1a\u8fd1\u4f3c\u6709</p> \\[ p_{\\phi'}(s)\\approx \\frac{N(s)+1}{N+1} \\] <p>\u8fd9\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd1\u4f3c\u5730\u7ed9\u51fa</p> \\[ N(s)\\approx p_{\\phi}(s)\\cdot \\frac{1-p_{\\phi'}(s)}{p_{\\phi'}(s)-p_\\phi(s)} \\] <p>\u8fd9\u4e00\u65b9\u6cd5\u8fd8\u6709\u4e00\u4e2a\u7ec6\u8282\uff1a\u6211\u4eec\u5e94\u8be5\u600e\u6837\u9009\u53d6\u8fd9\u4e2a\"generative model\" \\(p_{\\phi}(s)\\) \u5462\uff1f\u6ce8\u610f\u8fd9\u4e2a\u6a21\u578b\u7684\u76ee\u7684\u548c\u666e\u901a\u7684generative model\u4e0d\u4e00\u6837\uff0c\u5b83\u4e0d\u662f\u4e3a\u4e86\u751f\u6210\uff0c\u800c\u662f\u4e3a\u4e86\u8ba1\u7b97\u6982\u7387\u3002\u56e0\u6b64\uff0cGAN\u4e4b\u7c7b\u751f\u6210\u6548\u679c\u6700\u540a\u6253\u4f46\u6ca1\u6709\u6982\u7387\u7684\u7684\u6a21\u578b\u5e76\u4e0d\u9002\u7528\u3002\u5b9e\u9645\u4e0a\u91c7\u7528\u7684\u662f\u4e00\u79cd\u5947\u602a\u7684\u6a21\u578b\uff0c\u7c7b\u4f3c\u4e8epixel CNN\uff0c\u53eb\u505a\"CTS\"\u3002\u5177\u4f53\u7ec6\u8282\u53ef\u4ee5\u53c2\u8003\u8fd9\u7bc7\u8bba\u6587\uff0c\u5b83\u4e5f\u662fCount-Based Exploration\u65b9\u6cd5\u7684\u5f00\u5c71\u4e4b\u4f5c\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap11/#counting_method_2_counting_with_hash","title":"Counting Method 2: Counting with Hash","text":"<p>\u8fd9\u4e00\u65b9\u6cd5\u7684\u601d\u60f3\u662f\uff0c\u6211\u4eec\u521b\u9020\u4e00\u4e2ahash\uff0c\u4f7f\u5f97semantic\u76f8\u8fd1\u7684state\u88ab\u6620\u5c04\u5230\u63a5\u8fd1\u7684hash\u503c\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7528hash\u503c\u7684\u8ba1\u6570\u6765\u4ee3\u66ffstate\u7684\u8ba1\u6570\u3002</p> <p>hash\u51fd\u6570\u5e94\u8be5\u5982\u4f55\u9009\u53d6\uff1f\u4e00\u4e2a\u81ea\u7136\u7684\u9009\u53d6\u662f\u4e00\u4e2aautoencoder\uff0c\u4f7f\u7528\u5b83\u7684latent space\u4f5c\u4e3ahash\u3002\u800cautoencoder\u4e5f\u8981\u968f\u7740\u6570\u636e\u7684\u79ef\u7d2f\u9010\u6e10\u8bad\u7ec3\u3002\u8fd9\u6837\u7684\u65b9\u6cd5\u4e5f\u6709\u5f88\u597d\u7684\u6548\u679c\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap11/#counting_method_3_counting_with_exemplar_models","title":"Counting Method 3: Counting with Exemplar Models","text":"<p>\u8fd9\u4e00\u65b9\u6cd5\u53e6\u8f9f\u8e4a\u5f84\uff0c\u6211\u4eec\u53ef\u4ee5\u4e0d\u91c7\u7528generative model\uff0c\u800c\u662fdiscriminative model\u3002\u5177\u4f53\u5730\uff0c\u6211\u4eec\u8bad\u7ec3\u4e00\u4e2aclassifier\uff0c\u5224\u65ad\u67d0\u4e2astate\u662f\u5426\u5728\u5386\u53f2\u7684\u6570\u636e\u96c6\u4e2d\u51fa\u73b0\u8fc7\u3002\u5b83\u7684\u8bad\u7ec3\u96c6\u662f\uff1a</p> \\[ \\mathcal{D}_{s}^{(+)}=\\{ \\text{all historical states} \\},\\quad \\mathcal{D}_{s}^{(-)}=\\{s\\} \\] <p>\u5176\u4e2d \\(s\\) \u4ee3\u8868\u73b0\u5728\u6211\u4eec\u8981\u8ba1\u6570\u7684state\u3002\u7136\u540e\uff0c\u6211\u4eec\u7528\u8fd9\u4e2aclassifier \\(D_s\\) \u6765\u8f93\u51fa \\(D_s(s)\\) \u3002</p> <p>\u4e4d\u4e00\u770b\uff0c\u8fd9\u6ca1\u9053\u7406\u2014\u2014\u8fd9\u5e94\u8be5\u603b\u662f\u8f93\u51falabel \u201c \\(-\\) \u201d \u554a! \u4f46\u662f\u4ed4\u7ec6\u60f3\u5e76\u4e0d\u662f\u8fd9\u6837\uff1a\u5982\u679c\u548c \\(s\\) \u7c7b\u4f3c\u7684\u6570\u636e\u5728 \\(\\mathcal{D}_{s}^{(+)}\\) \u4e2d\u51fa\u73b0\u8fc7 \\(N(s)\\) \u6b21\uff0c\u90a3\u4e48\u5927\u6982\u4f1a\u6709</p> \\[ \\Pr(D_s(s)=+)\\approx \\frac{N(s)}{N(s)+1} \\] <p>\u56e0\u6b64\u6211\u4eec\u5c31\u53ef\u4ee5\u8fd1\u4f3c\u5730\u4f30\u8ba1</p> \\[ N(s)\\approx \\frac{\\Pr(D_s(s)=+)}{1-\\Pr(D_s(s)=+)} \\] <p>\u76f4\u89c2\u4e0a\uff0c \\(s\\) \u8fd9\u4e2astate\u8d8a\u662f\u201c\u7a00\u6709\u201d\uff0c\u90a3\u4e48\u88ab\u5224\u65ad\u4e3a\u201c \\(-\\) \u201d\u7684\u6982\u7387\u8d8a\u5927\u3002\u56e0\u6b64\uff0c\u8fd9\u4e00\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u7ed9\u51fa\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684\u8ba1\u6570\u3002\u4f46\u95ee\u9898\u5728\u4e8e\uff0c\u4e3a\u4e86\u8ba1\u7b97\u6bcf\u4e00\u4e2astate\u7684N\uff0c\u6211\u4eec\u90fd\u9700\u8981\u91cd\u65b0\u8bad\u7ec3\u4e00\u4e2a\u6a21\u578b\uff0c\u8fd9\u662f\u975e\u5e38\u8017\u65f6\u7684\u3002</p> <p>\u89e3\u51b3\u529e\u6cd5\u7c7b\u4f3c\u4e8eVAE\u4e2d\u7684Amortize\u65b9\u6cd5\u3002\u6211\u4eec\u4e0d\u662f\u5bf9\u4e8e\u6bcf\u4e00\u4e2a \\(s\\) \u8bad\u7ec3\u4e00\u4e2a\u7f51\u7edc \\(D_s\\) \uff0c\u800c\u662f\u8bad\u7ec3\u4e00\u4e2a \\(D(\\cdot,s)\\) \uff0c\u800c\u8ba1\u7b97\u7684\u4ece \\(D_s(s)\\) \u53d8\u6210 \\(D(s,s)\\) \u3002\u8fd9\u4e00\u65b9\u6cd5\u5728\u5b9e\u9a8c\u4e0a\u4e5f\u53d6\u5f97\u4e86\u5f88\u597d\u7684\u7ed3\u679c\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap11/#counting_method_4_heuristic_estimation_using_errors","title":"Counting Method 4: Heuristic estimation using errors","text":"<p>\u8fd8\u8bb0\u5f97\u5728DL\u4e2d\uff0c\u6211\u4eec\u8bf4\u6a21\u578b\u7684generalization \u95ee\u9898\uff1a\u6d4b\u8bd5\u7684\u6570\u636e\u548c\u539f\u59cb\u7684\u6570\u636e\u96c6\u5206\u5e03\u5dee\u8ddd\u8d8a\u5927\uff0c\u6a21\u578b\u7684\u8bef\u5dee\u5c31\u8d8a\u5dee\u3002\u800c\u6211\u4eec\u73b0\u5728\u521a\u597d\u5c31\u662f\u60f3\u5224\u65ad\u4e00\u4e2astate\u662f\u5426\u548c\u5386\u53f2\u4e0a\u7684\u6570\u636e\u76f8\u4f3c\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u6a21\u578b\u7684\u8bef\u5dee\u6765\u4f30\u8ba1\u8fd9\u4e00\u70b9\u3002</p> <p>\u5177\u4f53\u5730\uff0c\u6211\u4eec\u968f\u4fbf\u627e\u4e00\u4e2a\u6bd4\u8f83feature\u7684\u51fd\u6570\uff08\u4e5f\u5c31\u662f\u8bf4\u5b83\u4e0d\u80fd\u592a\u7b80\u5355\uff09 \\(f\\) \uff0c\u7136\u540e\u5728\u89c1\u8fc7\u7684\u6570\u636e\u4e0a\u9762\u62df\u5408\u4e00\u4e2a\u6a21\u578b \\(f_\\theta\\) \u3002\u8fd9\u6837\uff0c\u6211\u4eec\u53ea\u9700\u8981\u8ba1\u7b97 \\(f_\\theta\\) \u548c \\(f\\) \u7684\u8bef\u5dee\uff08\u6bd4\u5982mse loss\uff09\uff0c\u5c31\u53ef\u4ee5\u4f30\u8ba1\u8fd9\u4e2astate\u662f\u5426\u5728\u5386\u53f2\u4e0a\u51fa\u73b0\u8fc7\u3002\u8bef\u5dee\u8d8a\u5927\uff0c\u5956\u52b1\u8d8a\u9ad8\u3002\u8fd9\u4e00\u65b9\u6cd5\u4e5f\u88ab\u79f0\u4e3aRND(Random Network Distillation)\u3002</p> <p>\u5f53\u7136\uff0c\u8fd9\u4e2a\u51fd\u6570\u6709\u65f6\u5019\u5e76\u4e0d\u662f\u968f\u673a\u9009\u53d6\u7684\u3002\u6bd4\u5982\uff0c\u53ef\u4ee5\u521a\u597d\u9009\u53d6 \\(s'=f(s,a)\\) \uff0c\u8fd9\u6837\u770b\u8d77\u6765\u66f4\u9760\u8c31\u3002\u4e0d\u8fc7\uff0c\u5177\u4f53\u7ec6\u8282\u80af\u5b9a\u8fd8\u662f\u8981\u5728\u5b9e\u9a8c\u4e0a\u63a2\u8ba8\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap11/#thompson_sampling_in_deep_rl","title":"Thompson Sampling in Deep RL","text":"<p>\u6211\u4eec\u56de\u987e\uff0cthompson sampling\u7684\u65b9\u6cd5\u662f\u8bf4\uff0c\u6211\u4eec\u6839\u636e\u73b0\u5728\u5df2\u6709\u7684\u77e5\u8bc6\u901a\u8fc7\u6a21\u578b\u9884\u6d4b\u51fa\u73af\u5883\u7684\u4e00\u4e9b\u9690\u85cf\u53c2\u6570\u6ee1\u8db3\u7684\u6982\u7387\u5206\u5e03\uff0c\u7136\u540e\u4ece\u4e2d\u968f\u673a\u91c7\u6837\u4e00\u7ec4\u53c2\u6570\uff0c\u4f5c\u51fa\u51b3\u7b56\uff0c\u518d\u7528\u65b0\u7684\u6570\u636e\u91cd\u65b0\u8bad\u7ec3\u6a21\u578b\u3002</p> <p>\u5728multi-arm bandit\u7684\u6a21\u578b\u4e2d\uff0c\u6211\u4eec\u9884\u6d4b\u7684\u5c31\u662f\u4e00\u7ec4\u53c2\u6570 \\(\\theta_1,\\cdots,\\theta_n\\) \uff0c\u56e0\u4e3a\u6211\u4eec\u7684\u76ee\u6807\uff08\u4e5f\u5c31\u662freward\uff09\u5b8c\u5168\u7531\u5b83\u4eec\u51b3\u5b9a\uff1b\u800c\u600e\u6837\u5c06\u5b83\u62d3\u5c55\u5230\u4e00\u822c\u7684\u60c5\u51b5\u5462\uff1f\u6211\u4eec\u60f3\u5230\uff0c\u6211\u4eec\u5e94\u8be5\u9884\u6d4b\u4e00\u4e2aQ function\u3002</p> <p>\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u6709\u4e00\u4e2a\u7b97\u6cd5\uff1a</p> <p>Thompson Sampling</p> <p>\u91cd\u590d\uff1a</p> <ol> <li>\u4ece\u5f53\u524d\u7684\u6a21\u578b \\(p_\\phi(Q)\\) \u91c7\u6837\u4e00\u4e2a \\(Q\\) \uff1b</li> <li>\u5229\u7528 \\(Q\\) \u8fdb\u884c\u6700\u4f18\u51b3\u7b56\uff0c\u8dd1\u4e00\u4e2arollout\uff1b</li> <li>\u7528\u8fd9\u4e2arollout\u7684\u6570\u636e\u66f4\u65b0 \\(p_\\phi(Q)\\) \u3002</li> </ol> <p>\u6211\u4eec\u5982\u4f55\u6784\u9020\u4e00\u4e2a\u51fd\u6570 \\(Q\\) \u7684\u5206\u5e03\u5462\uff1f\u6700\u81ea\u7136\u7684\u65b9\u6cd5\u5c31\u662f\u8fd8\u662f\u91c7\u7528ensemble\uff08\u6216\u8005\u53eb\u4f5cBootstrapped\uff09\u65b9\u6cd5\uff0c\u6211\u4eec\u8bad\u7ec3 \\(N\\) \u4e2a\u7f51\u7edc \\(Q_1,\\cdots,Q_N\\) \uff0c\u7136\u540e\u968f\u673a\u4ece\u4e2d\u91c7\u6837\u4e00\u4e2a\u3002\u66f4\u8fdb\u4e00\u6b65\uff0c\u6211\u4eec\u53ef\u4ee5\u4fdd\u6301\u524d\u9762\u7684\u63d0\u53d6\u7279\u5f81\u7684\u7f51\u7edc\u4e0d\u53d8\uff0c\u53ea\u662f\u52a0\u4e0a \\(N\\) \u4e2a projection head\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u4e0d\u589e\u52a0\u592a\u591a\u53c2\u6570\u7684\u60c5\u51b5\u4e0b\u5b9e\u73b0ensemble\u3002</p> <p>\u4f60\u53ef\u80fd\u4f1a\u611f\u5230\u5947\u602a\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u770b\u8d77\u6765\u5c31\u662f\u5728Q learning\u7684\u57fa\u7840\u4e0a\u589e\u52a0\u4e86\u4e00\u4e2aensemble\u3002\u4f46\u8fd9\u5b9e\u9645\u4e0a\u662f\u5173\u952e\u7684\uff1a\u8fd8\u8bb0\u5f97\u539f\u5148\u7684 \\(\\epsilon\\) -greedy\u7b56\u7565\uff0c\u5b83\u7684exploration\u901a\u5e38\u662f\u4e4f\u529b\u7684\uff0c\u56e0\u4e3a\u6bcf\u4e00\u6b65\u7684explore\u90fd\u76f8\u5f53\u4e8e\u662f\u968f\u673a\u6e38\u8d70\u3002\u4f46\u73b0\u5728\u6211\u4eec\u7684explore\u76f8\u5f53\u4e8e\u662f\u66f4\u52a0\u5f3a\u5927\u7684\u3002</p> <p>\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u6bd4\u5982\u4e00\u4e2a\u6e38\u620f\u91cc\uff0c\u9700\u8981\u8fde\u51fb\u4ee5\u83b7\u5f97\u5de8\u5927\u7684\u5956\u52b1\u3002\u5982\u679c\u6bcf\u4e00\u6b65\u968f\u673a\u6309\u7167\u67d0\u4e2a\u65b9\u5f0fexplore\uff0c\u90a3\u4e48\u5f88\u96be\u627e\u5230\u8fd9\u4e2a\u8fde\u51fb\u7684\u65b9\u6cd5\u3002\u4f46\u5f88\u6709\u53ef\u80fd\uff0c\u6211\u4eec\u7684ensemble\u4e2d\u7684\u67d0\u4e00\u4e2a\u7f51\u7edc\u521a\u597d\u5b66\u4f1a\u4e86\u8fd9\u4e2a\u8fde\u51fb\u7684\u65b9\u6cd5\uff0c\u6309\u7167\u5b83\u7684Q function\u6765\u51b3\u7b56\uff0c\u6211\u4eec\u5c31\u6709\u53ef\u80fd\u53d1\u73b0\u8fd9\u79cd\u65b9\u5f0f\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap11/#information_gain_in_deep_rl","title":"Information Gain in Deep RL","text":"<p>\u548c\u524d\u4e00\u79cd\u65b9\u6cd5\u4e00\u6837\uff0c\u6211\u4eec\u4e5f\u9700\u8981\u60f3\u6e05\u695a\uff0c\u539f\u5148\u7684multi-arm bandit\u4e2d\u9884\u6d4b\u7684 \\(\\hat{p}(\\theta)\\) \u73b0\u5728\u5e94\u8be5\u53d8\u6210\u4ec0\u4e48\u3002\uff08\u4e5f\u5c31\u662f\u8bf4\uff0c\u8ba1\u7b97\u4ec0\u4e48\u7684information gain\uff09\u3002\u6211\u4eec\u6709\u51e0\u4e2a\u9009\u62e9\uff1a</p> <ul> <li>\u8ba1\u7b97reward \\(r(s,a)\\) \u7684information gain\uff0c\u4e5f\u5c31\u662f\u6784\u9020\u4e00\u4e2a\u6a21\u578b\u5b66\u4e60 \\(r_\\theta(s,a)\\) \uff0c\u7136\u540e\u8ba1\u7b97\u5bf9 \\(\\theta\\) \u7684\u71b5\uff1b</li> <li>\u8ba1\u7b97state density \\(p(s)\\) \u7684information gain</li> <li>\u8ba1\u7b97dynamic \\(p(s'|s,a)\\) \u7684information gain</li> </ul> <p>\u5177\u4f53\u7684\u5b9e\u73b0\u4e2d\u53ef\u4ee5\u91c7\u7528\u4e0d\u540c\u7684\u76ee\u6807\uff0c\u56e0\u4e3a\u6211\u4eec\u7684\u76ee\u6807\u51fd\u6570\u5e76\u4e0d\u91cd\u8981\uff0c\u91cd\u8981\u7684\u662f\u5b83\u53cd\u6620\u83b7\u5f97\u8fd9\u4e2astate \\(s\\) \u4e4b\u540e\u6211\u4eec\u589e\u52a0\u4e86\u591a\u5c11\u4fe1\u606f\uff08\u8fd9\u4e00\u70b9\u4f53\u73b0\u5728 \\(\\theta\\) \u4e0a\uff09\u3002</p> <p>\u6211\u4eec\u63a5\u4e0b\u6765\u4e0d\u7ba1\u9009\u53d6\u54ea\u79cd\u76ee\u6807\uff0c\u800c\u662f\u8003\u8651\u5982\u4f55\u6539\u5199\u4e4b\u524dmulti-arm bandit\u90a3\u91cc\u7684information gain\u3002\u6211\u4eec\u6709</p> \\[ \\text{IG}(a)=\\mathbb{E}_{p((s,a,s')|a)}\\left[\\mathcal{H}({p}({\\theta}|h))-\\mathcal{H}({p}(\\theta|h,s,a,s'))\\right] \\] <p>\u53ef\u4ee5\u8bc1\u660e\uff08\u89c1\u4e0b\u4e00\u8bb2\uff09\uff0c</p> \\[ \\text{IG}(a)=\\mathbb{E}_{p((s,a,s')|a)}\\left[\\text{KL}(p(\\theta|h,s,a,s')||p(\\theta|h))\\right] \\] <p>\u800c\u4e3a\u4e86\u65b9\u4fbf\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5355\u91c7\u6837\u8fdb\u884c\u8fd1\u4f3c\uff1a</p> \\[ \\text{IG}(a)\\approx \\text{KL}(p(\\theta|h,s,a,s')||p(\\theta|h)) \\] <p>\u8fd9\u91cc\u7684 \\(h\\) \u4ee3\u8868\u6240\u6709\u7684\u5386\u53f2\u6570\u636e\u3002\u4f46\u662f\u8fd9\u91cc\u7684 \\(\\theta\\) \u53ef\u80fd\u5f88\u590d\u6742\uff0c\u751a\u81f3\u53ef\u80fd\u662f\u795e\u7ecf\u7f51\u7edc\u7684\u53c2\u6570\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u518d\u6b21\u4f7f\u7528Bayesian\u65b9\u6cd5\uff0c\u8bad\u7ec3\u7684\u4e0d\u662f\u4e00\u4e2a\u786e\u5b9a\u7684\u7f51\u7edc\uff0c\u800c\u662f\u4e00\u4e2a\u5206\u5e03\u3002\u800c\u8fd9\u4e2a\u5206\u5e03\u5c31\u662f\u628a\u6bcf\u4e00\u4e2a\u53c2\u6570\u53d8\u6210\u4ece\u4e00\u4e2a\u9ad8\u65af\u5206\u5e03\u53d6\u6837\uff0c\u5747\u503c\u548c\u65b9\u5dee\u90fd\u662f\u53e6\u5916\u7684\u53ef\u8bad\u7ec3\u53c2\u6570\uff0c\u8bb0\u4e3a \\(\\phi\\) \u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u8d1d\u53f6\u65af\u7f51\u7edc\u7684\u76ee\u6807\u662f</p> \\[ p(\\theta|h)\\approx q(\\theta|\\phi) \\] <p>\u6ce8\u610f\u54c1\u5473\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u7684\u610f\u601d\uff1a\u5de6\u8fb9\u4ee3\u8868\uff0c\u628a\u5386\u53f2\u4f5c\u4e3a\u8bad\u7ec3\u96c6\uff0c\u8bad\u7ec3\u51fa\u6765\u53ef\u80fd\u7684\u7f51\u7edc\u53c2\u6570 \\(\\theta\\) \u7684\u5206\u5e03\uff1b\u800c\u53f3\u8fb9\u4ee3\u8868\uff0c\u6211\u4eec\u62ff\u5386\u53f2\u4f5c\u4e3a\u8bad\u7ec3\u96c6\uff0c\u7528\u4e00\u79cd\u7279\u6b8a\u7684\u65b9\u6cd5\u8bad\u7ec3\u51fa\u4e00\u4e2a\u201c\u8d1d\u53f6\u65af\u795e\u7ecf\u7f51\u7edc\u201d\uff0c\u8fd9\u4e2a\u7f51\u7edc\u7684\u53c2\u6570 \\(\\phi\\) \u7528\u6765\u9884\u6d4b\u539f\u5148\u7684\u7f51\u7edc \\(\\theta\\) \uff0c\u56e0\u6b64\u7ed9\u51fa\u4e86\u4e00\u4e2a\u4eba\u4e3a\u7684\u3001\u8fd1\u4f3c\u7684\u5206\u5e03\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u8d1d\u53f6\u65af\u7f51\u7edc\u91c7\u53d6\u72ec\u7acb\u5047\u8bbe\uff0c\u5373\u8ba4\u4e3a\u6bcf\u4e2a\u53c2\u6570\u7684\u5206\u5e03\u662f\u72ec\u7acb\u9ad8\u65af\u5206\u5e03</p> \\[ q(\\theta|\\phi)=\\prod_i \\mathcal{N}(\\theta_i|\\mu_{\\phi,i},\\sigma_{\\phi,i}) \\] <p>\u56e0\u6b64\uff0c\u53ea\u6709\u5728\u5de6\u8fb9\u771f\u5b9e\u7684\u5206\u5e03\u4e5f\u662f\u8fd9\u6837\u7684\u5f62\u5f0f\u65f6\uff0c\u624d\u80fd\u505a\u7684\u6bd4\u8f83\u597d\u3002\u4e0d\u8fc7\u5b9e\u9645\u4e0a\uff0c\u8d1d\u53f6\u65af\u7f51\u7edc\u7684\u6548\u679c\u8fd8\u662f\u5f88\u597d\u7684\u3002</p> <p>\u4e3a\u4e86\u8bad\u7ec3\u8fd9\u6837\u7684\u4e00\u4e2a\u8d1d\u53f6\u65af\u7f51\u7edc\uff0c\u6211\u4eec\u6700\u5c0f\u5316</p> \\[ \\text{KL}(q(\\theta|\\phi)||p(\\theta|h))=\\text{KL}\\left(q(\\theta|\\phi)\\Bigg|\\Bigg|p(h|\\theta)\\frac{p(\\theta)}{p(h)}\\right) \\] <p>\u4e00\u822c\u8ba4\u4e3a \\(p(\\theta)\\) \u53d6\u81eaisotropic Gaussian\uff0c\u800c \\(p(h)\\) \u4f5c\u4e3a\u548c \\(\\theta\\) \u65e0\u5173\u7684\u5e38\u6570\uff0c\u5728forward KL\u7684\u8ba1\u7b97\u4e2d\u53ef\u4ee5\u5f53\u4f5c\u5168\u5c40\u5e38\u6570\u800c\u88ab\u53bb\u9664\u3002</p> <p>\u6709\u4e86\u8fd9\u6837\u7684\u5de5\u5177\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6210\u529f\u5730\u7ed9\u51fa\u4e00\u4e2aexploration bonus\u7684\u4e0d\u9519\u7684\u8fd1\u4f3c\uff1a</p> \\[ \\text{IG}(a)\\approx \\text{KL}(q(\\theta|\\phi')||q(\\theta|\\phi)) \\] <p>\u5176\u4e2d \\(\\phi'\\) \u4ee3\u8868\u5728\u52a0\u5165 \\((s,a,s')\\) \u8fd9\u4e00\u7ec4\u6570\u636e\u4e4b\u540e\u7684\u65b0\u7684\u53c2\u6570\u3002\u4f7f\u7528\u8fd9\u4e2aexploration bonus\uff0c\u518d\u4f7f\u7528\u524d\u9762multi-arm bandit\u4e2d\u7684\u9009\u62e9 \\(a\\) \u7684\u7b56\u7565\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6210\u529f\u5730\u5b9e\u73b0\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684exploration\u3002</p> <p>\u4e0a\u9762\u7684\u7b97\u6cd5\u4e5f\u88ab\u79f0\u4e3aVIME\uff08Variational Information Maximization Exploration\uff09\u3002\u5b83\u5728\u6570\u5b66\u4e0a\u5341\u5206\u5f3a\u5927\uff0c\u4f46\u9700\u8981\u7684\u7b97\u529b\u4e5f\u5f88\u5de8\u5927\uff0c\u56e0\u4e3a\u6bcf\u4e00\u6b65\u90fd\u9700\u8981\u8bad\u7ec3\u4e00\u4e2a\u8d1d\u53f6\u65af\u7f51\u7edc\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap11/#summary","title":"Summary","text":"<p>\u9664\u4e86\u4e0a\u9762\u7684\u4e09\u79cd\u65b9\u6cd5\u4e4b\u5916\uff0c\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u7684\u65b9\u6cd5\u3002\u51fa\u4e8e\u7bc7\u5e45\u7684\u8003\u8651\uff0c\u6211\u4eec\u5c31\u4e0d\u4e00\u4e00\u4ecb\u7ecd\u4e86\u3002</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u65e0\u8bba\u662f\u524d\u9762\u7684\u54ea\u4e00\u79cd\u65b9\u6cd5\uff0c\u4e3a\u4e86\u8ba1\u7b97\u7528\u4e8eexploration \u7684bonus\uff0c\u90fd\u9700\u8981\u5728\u6bcf\u4e00\u6b65\u8bad\u7ec3\u4e00\u4e2a\u65b0\u7684\u6a21\u578b\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u770b\u5230\uff0c\u4e3a\u4e86\u89e3\u51b3exploration\u8fd9\u4e2a\u56f0\u96be\u7684\u95ee\u9898\uff0c\u6211\u4eec\u5fc5\u5b9a\u662f\u8981\u4ed8\u51fa\u5f88\u5927\u7684\u4ee3\u4ef7\u7684\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap11/#reference_papers","title":"Reference Papers","text":"<ol> <li>Exploration by Random Network Distillation\uff08RND\uff09</li> <li>A Possibility for Implementing Curiosity and Boredom in Model-Building Neural Controllers</li> <li>Incentivizing Exploration in Reinforcement Learning with Deep Predictive Models</li> <li>Deep Exploration via Bootstrapped DQN\uff08Bootstrapped Method\uff09</li> <li>VIME: Variational Information Maximizing Exploration\uff08VIME\uff09</li> <li>Unifying Count-Based Exploration and Intrinsic Motivation\uff08CTS\uff09</li> <li>#Exploration: A Study of Count-Based Exploration for Deep Reinforcement Learning</li> <li>EX2: Exploration with Exemplar Models for Deep Reinforcement Learning\uff08Counting with Exemplar Models\uff09</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap12/","title":"Exploration without Rewards","text":"<p>\u5982\u679c\u603b\u7ed3\u524d\u9762\u4e00\u8bb2\u4ecb\u7ecd\u7684exploration\u65b9\u6cd5\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\uff0c\u6211\u4eec\u57fa\u672c\u4e0a\u662f\u5728\u539f\u5148\u7684\u65b9\u6cd5\u4e0a\u9762\u4f5c\u51fa\u4e00\u4e2a\u4fee\u6b63\uff0c\u4f9d\u7136\u76ee\u6807\u662f\u5355\u4e00\u7684\uff0c\u4f46\u53ea\u4e0d\u8fc7\u589e\u52a0\u4e00\u4e9bexplore\u7684\u6210\u5206\u3002\u800c\u73b0\u5728\uff0c\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u65b0\u7684\u89c6\u89d2\uff1a\u6211\u4eec\u8bd5\u7740\u901a\u8fc7unsupervised\u7684\u65b9\u6cd5\uff0c\u5728\u4e0d\u7ed9\u4efb\u4f55reward\u7684\u60c5\u51b5\u4e0b\uff0c\u8ba9\u6a21\u578b\u81ea\u5df1\u8fdb\u884c\u201c\u63a2\u7d22\u201d\u3002</p> <p>\u76f4\u89c2\u4e0a\uff0c\u8fd9\u662f\u66f4\u5bb9\u6613\u6210\u529f\u7684\uff0c\u56e0\u4e3a\u5728\u6ca1\u6709\u76ee\u6807\u7684\u60c5\u51b5\u4e0b\uff0c\u63a2\u7d22\u662f\u4e00\u4e2a\u66f4\u52a0\u81ea\u7136\u7684\u884c\u4e3a\u3002\uff08\u60f3\u60f3\u521a\u4f1a\u722c\u884c\u7684\u5a74\u513f\uff0c\u5728\u6ca1\u6709\u4efb\u4f55\u4eba\u5411\u4ed6\u63d0\u51fa\u4efb\u4f55\u8981\u6c42\u7684\u65f6\u5019\uff0c\u4e5f\u4f1a\u81ea\u5df1\u63a2\u7d22\u5468\u56f4\u7684\u73af\u5883\u3002\uff09</p> <p>\u4e00\u4e2a\u5177\u4f53\u7684\u4f8b\u5b50\uff1a\u5047\u8bbe\u6211\u4eec\u628a\u673a\u5668\u4eba\u6254\u5230\u4e00\u4e2a\u73af\u5883\u91cc\uff0c\u8fd9\u4e00\u73af\u5883\u53ef\u80fd\u6709\u5f88\u591a\u4e1c\u897f\uff0c\u6bd4\u5982\u6709\u4e00\u4e2a\u53ef\u4ee5\u62c9\u5f00\u7684\u67dc\u95e8\uff0c\u6709\u4e00\u4e2a\u53ef\u4ee5\u6309\u4e0b\u7684\u6309\u94ae\uff0c\u7b49\u7b49\u3002\u5728\u8bad\u7ec3\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u4e0d\u7ed9\u673a\u5668\u4eba\u4efb\u4f55reward\uff0c\u4e5f\u4e0d\u544a\u8bc9\u5b83\u600e\u4e48\u505a\uff0c\u53ea\u662f\u8ba9\u5b83\u81ea\u5df1\u53bb\u63a2\u7d22\u3002\u4f46\u6700\u540e\uff0c\u6211\u4eec\u7ed9\u51fa\u4e00\u4e2a\u5bf9\u76ee\u6807(goal state)\u7684\u63cf\u8ff0\uff0c\u7136\u540e\u673a\u5668\u4eba\u9700\u8981\u5b8c\u6210\u8fd9\u4e00\u76ee\u6807\u3002</p> <p>\u6211\u4eec\u8fd9\u4e00\u8bb2\u5c31\u6765\u7814\u7a76\u5982\u4f55\u5b8c\u6210\u8fd9\u4e00\u4efb\u52a1\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap12/#imagining_goals","title":"Imagining Goals","text":"<p>\u600e\u6837\u5728\u6ca1\u6709reward\u7684\u65f6\u5019\u4e5f\u5b8c\u6210\u8bad\u7ec3\u5462\uff1f\u4e00\u4e2a\u91cd\u8981\u7684\u65b9\u6cd5\u662f\"Imagine goals\"\u3002\u8fd9\u4e00\u65b9\u6cd5\u5f15\u5165\u4e00\u4e2aVAE\uff0c\u5bf9\u4e8e\u89c2\u5bdf\u5230\u7684state \\(s\\) \u901a\u8fc7 encoder \\(q_\\phi\\) \u5230\u8fbelatent variable \\(z\\) \uff0c\u800c \\(z\\) \u901a\u8fc7decoder \\(p_\\theta\\) \u5230\u8fbestate \\(s'\\) \u3002\u6b64\u5916\uff0c\u8fd8\u8981\u8bad\u7ec3\u4e00\u4e2apolicy \\(\\pi(a|x,x_g)\\) \u3002\u5728\u8fd9\u6837\u7684\u6784\u9020\u4e0b\uff0c\u5927\u81f4\u6d41\u7a0b\u5982\u4e0b\uff1a</p> <p>Imagining Goals</p> <ol> <li>\u5728latent space\u968f\u673a\u91c7\u6837\u4f5c\u4e3a\u76ee\u6807\uff1a \\(z_g\\sim p(z)\\) \uff0c\u7136\u540e\u901a\u8fc7decoder\u751f\u6210\u76ee\u6807state\uff1a \\(x_g\\sim p_\\theta(x_g|z_g)\\) \uff1b</li> <li>\u6309\u7167\u73b0\u6709\u7684policy \\(\\pi(a|x,x_g)\\) \u6765\u6536\u96c6rollout\uff0c\u5f97\u5230\u6700\u7ec8\u7684state \\(\\bar{x}\\) \uff08\u6700\u7ec8\u7406\u60f3\u4e0a\uff0c\u6211\u4eec\u5e0c\u671b \\(\\bar{x}=x_g\\) \uff09\uff1b</li> <li>\u5229\u7528\u73b0\u5728\u7684\u6570\u636e\u8bad\u7ec3 \\(\\pi\\) \uff1b</li> <li>\u628a \\(\\bar{x}\\) \u52a0\u5165\u6570\u636e\u96c6\u6765\u8bad\u7ec3VAE\u3002</li> </ol> <p>\u4f46\u8fd9\u4e00\u65b9\u6cd5\u6709\u4e00\u5b9a\u7684\u95ee\u9898\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u56e0\u4e3aVAE\u7684\u8bad\u7ec3\u6570\u636e\u662f\u5386\u53f2\u4e0a\u51fa\u73b0\u8fc7\u7684\u6240\u6709state\uff0c\u6240\u4ee5\u4ecelatent space\u4e2d\u4efb\u610f\u53d6\u51fa \\(z\\) \uff0c\u8bad\u7ec3\u51fa\u6765\u7684\u5927\u6982\u7387\u4e5f\u548c\u89c1\u8fc7\u7684state\u5dee\u522b\u4e0d\u5927\u3002\u89e3\u51b3\u65b9\u6848\u662f\uff0c\u6211\u4eec\u5f3a\u5236\u9f13\u52b1VAE\u751f\u6210\u4e00\u4e9b\u53cd\u5e38\u7684\u6570\u636e\u3002\u5177\u4f53\u5730\uff0c\u6211\u4eec\u4fee\u6539MLE\u7684\u8bad\u7ec3\u65b9\u5f0f</p> \\[ \\log p_\\theta(\\bar{x})\\to p_\\theta(\\bar{x})^\\alpha \\cdot \\log p_\\theta(\\bar{x}) \\] <p>\u5176\u4e2d \\(\\alpha \\in (-1,0)\\) \u3002\u8fd9\u4e00\u65b9\u6cd5\u88ab\u79f0\u4e3a\u201cskew-fit\u201d\uff0c\u4e5f\u6709\u4e9b\u50cf\u524d\u9762\u7684count-based exploration\u7684\u65b9\u6cd5\uff08\u8fd8\u8bb0\u5f97\u5f53\u65f6\u6211\u4eec\u628a\u7ecf\u8fc7\u6b21\u6570 \\(N(s)\\) \u7684 \\(-\\frac{1}{2}\\) \u6b21\u65b9\u4f5c\u4e3abonus\uff09\u3002\u7406\u8bba\u4e0a\uff0c\u53ef\u4ee5\u7ed9\u51fa\uff0c\u8fd9\u6837\u7684\u65b9\u6cd5\u6700\u540e\u5f97\u5230\u7684\u5206\u5e03\u4f1a\u6269\u6563\u5230\u5b8c\u5168\u5747\u5300\uff0c\u4e5f\u5c31\u662f \\(\\mathcal{H}(p_\\theta(x))\\) \u6700\u5927\u3002</p> <p>\u4f60\u4e5f\u53ef\u80fd\u4f1a\u5947\u602a\uff1a\u6211\u4eec\u751f\u6210\u8fd9\u6837\u7684\u4e00\u4e2a\u5747\u5300\u5206\u5e03\u6709\u4ec0\u4e48\u610f\u4e49\u5462\uff1f\u8fd9\u91cc\u5fc5\u987b\u6ce8\u610f\u5230\uff0c\u8fd9\u4e2a\u5747\u5300\u5206\u5e03\u662f\u5728\u6240\u6709valid state\u4e0a\u9762\u7684\u5747\u5300\u5206\u5e03\uff01\u6362\u53e5\u8bdd\u8bf4\uff0c\u5982\u679cstate\u4ee5\u4e00\u4e2a\u56fe\u50cf\u7684\u5f62\u5f0f\u5448\u73b0\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5206\u5e03\u5e76\u4e0d\u662f\u5bf9\u4e8e\u6bcf\u4e00\u4e2apixel\u7684\u5747\u5300\u5206\u5e03\uff0c\u800c\u662f\u6574\u4f53\u4e00\u5207\u5728\u8be5\u73af\u5883\u5185\u6709\u610f\u4e49\u7684\u56fe\u50cf\u7684\u5747\u5300\u5206\u5e03\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u4ece\u53e6\u4e00\u4e2a\u89d2\u5ea6\u770b\u8fd9\u4e00\u65b9\u6cd5\u3002\u6211\u4eec\u80fd\u5426\u7ed9\u51fa\u8fd9\u4e00\u6d41\u7a0b\u7b49\u6548\u7684objective\u5462\uff1f\u6211\u4eec\u5df2\u7ecf\u77e5\u9053\uff08\u867d\u7136\u5e76\u6ca1\u6709\u5728\u8fd9\u91cc\u8bc1\u660e\uff09\u8bad\u7ec3VAE\u7684\u8fc7\u7a0b\u76f8\u5f53\u4e8e\u662f\u6700\u5927\u5316\u5206\u5e03\u7684\u71b5</p> \\[ \\mathcal{H}(p_{\\text{VAE}}(g)) \\] <p>\u4e5f\u5c31\u662f\uff0c\u6240\u6709\u53ef\u80fd\u7684goal\u6784\u6210\u7684\u96c6\u5408 \\(G\\) \u4e2d\u7684\u6bcf\u4e2a\u5143\u7d20\u90fd\u5728\u6211\u4eec\u7684VAE\u4e2d\u4ee5\u7b49\u6982\u7387\u51fa\u73b0\u3002\u4f46\u4e0e\u6b64\u540c\u65f6\uff0c\u6211\u4eec\u7684\u6a21\u578b\u4e5f\u5728\u505a\u4e00\u4e9b\u4e8b\u60c5\uff1a\u5982\u679c\u6211\u4eec\u7528 \\(\\tilde{p}(g|\\bar{x})\\) \u8868\u793a\u5df2\u77e5\u5728\u6211\u4eec\u7684\u6a21\u578b\u6700\u540e\u505c\u5728 \\(\\bar{x}\\) \u7684\u65f6\u5019\uff0c\u5b9e\u9645\u76ee\u6807\u662f \\(g\\) \u7684\u6982\u7387\uff0c\u90a3\u4e48\u6211\u4eec\u7684\u6a21\u578b\u5c31\u662f\u8ba9\u8fd9\u4e00\u6982\u7387\u5206\u5e03\u7684\u71b5\u5c3d\u91cf\u5c0f\uff08\u6bd4\u5982\uff0c\u5728\u6700\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u770b\u5230 \\(\\bar{x}\\) \u5c31\u53ef\u4ee5\u7acb\u523b\u7ed9\u51fa \\(g\\) \u662f\u4ec0\u4e48\uff09\u3002\u540c\u65f6\uff0c\u5728\u6211\u4eec\u7684\u65b9\u6cd5\u4e0b\uff0c\u8fd9\u4e00\u5206\u5e03\u7684posterior\u5c31\u662f \\(p_{\\text{VAE}}(g)\\) \u3002\u56e0\u6b64\uff0c\u6574\u4f53\u7684\u76ee\u6807\u53ef\u4ee5\u5f62\u5f0f\u4e0a\u5199\u6210</p> \\[ J=\\mathcal{H}(\\tilde{p}(g))-\\mathcal{H}(\\tilde{p}(g|\\bar{x})) \\] <p>\u8fd9\u4e00\u5f62\u5f0f\u5b9e\u9645\u4e0a\u6b63\u662f\u4e4b\u524d\u63d0\u5230\u7684information gain\uff0c\u6216\u8005\u4e92\u4fe1\u606f\u3002\u8fd9\u4e00\u601d\u60f3\u5341\u5206\u5173\u952e\uff0c\u6211\u4eec\u4f1a\u770b\u5230\u4e4b\u540e\u7684\u4e00\u4e9b\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u5199\u4e3a\u5bf9\u5176\u5b83\u4e1c\u897f\u7684\u4e92\u4fe1\u606f\u7684\u5f62\u5f0f\u3002</p> <p>\u4e92\u4fe1\u606f\u7684\u5f62\u5f0f\u6709\u4f55\u79cd\u6df1\u610f\uff1f\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u524d\u4e00\u9879\u7684\u6700\u5927\u5316\u8bf4\u7684\u6070\u662f\u6211\u4eec\u7684\u6a21\u578b\u8981\u5c3d\u91cf\u591a\u5730\u63a2\u7d22\uff1b\u800c\u540e\u4e00\u9879\u7684\u6700\u5c0f\u5316\u4ee3\u8868\u6211\u4eec\u7684\u6a21\u578b\u201c\u8bf4\u5230\u505a\u5230\u201d\uff0c\u9009\u53d6\u4e86\u51c6\u786e\u7684\u64cd\u4f5c\u3002\u8fd9\u4e24\u8005\u7684\u5e73\u8861\uff0c\u6b63\u662f\u6211\u4eec\u5728\u8fd9\u4e00\u95ee\u9898\u5047\u8bbe\u4e0b\u6240\u8ffd\u6c42\u7684\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap12/#mutual_information_property","title":"Mutual Information Property","text":"<p>\u5728\u7ee7\u7eed\u4e0b\u9762\u7684\u5185\u5bb9\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u6765\u8bba\u8bc1\u4e00\u4e2a\u5173\u4e8e\u4e92\u4fe1\u606f\u7684\u6027\u8d28\uff1a</p> \\[ \\mathbb{E}_{y}\\left[\\mathcal{H}(p(x))-\\mathcal{H}(p(x|y))\\right]=\\mathbb{E}_y[\\text{KL}(p(x|y)||p(x))] \\] <p>\u8fd9\u4e00\u6027\u8d28\u7684\u8bc1\u660e\u6bd4\u8f83\u5bb9\u6613\uff0c\u5173\u952e\u5728\u4e8e\u7406\u89e3\u5b83\u7684\u601d\u60f3\uff1a\u83b7\u5f97\u7684\u4fe1\u606f\u8d8a\u5927\u5bf9\u5e94\u7740\u4e24\u4e2a\u5206\u5e03\u7684\u5dee\u8ddd\u8d8a\u5927\u3002\u8bc1\u660e\u53ef\u4ee5\u76f4\u63a5\u5c55\u5f00\u6765\u5b8c\u6210</p> \\[ \\text{LHS}=\\sum_{x,y}p(y)\\left(-p(x)\\log p(x)+p(x|y)\\log p(x|y)\\right) \\] \\[ =\\sum_{x,y}p(x,y)\\log \\frac{p(x|y)}{p(x)}=\\sum_{x,y}p(y)\\cdot \\text{KL}(p(x|y)||p(x)) \\] \\[ =\\mathbb{E}_y[\\text{KL}(p(x|y)||p(x))]=\\text{RHS} \\]"},{"location":"Online%20CS%20Courses/CS285/chap12/#state_marginal_matching_smm","title":"State Marginal Matching (SMM)","text":"<p>\u53e6\u5916\u4e00\u4e2a\u65b0\u7684\u65b9\u6cd5\u662f\uff0c\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u66f4\u52a0\u4e00\u822c\u7684\u95ee\u9898\u3002\u6211\u4eec\u7684\u76ee\u6807\u662f\u6700\u540estate marginal\u662f\u67d0\u4e2a\u7ed9\u5b9a\u7684 \\(p^\\star(s)\\) \uff0c\u4e5f\u5c31\u662f</p> \\[ p_\\pi(s)\\approx p^\\star(s) \\] <p>\u5176\u4e2d \\(p_\\pi(s)\\) \u4ee3\u8868\u6309\u7167\u5f53\u524d\u7684\u7b56\u7565\uff0c\u5728\u4efb\u4f55\u65f6\u5019\u5230\u8fbe \\(s\\) \u7684\u6982\u7387\u3002\u8fd9\u6837\uff0c\u53ea\u8981\u628a \\(p^\\star(s)\\) \u9009\u53d6\u4e3a\u5747\u5300\u5206\u5e03\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0exploration\uff1b\u800c\u5982\u679c\u7a0d\u5fae\u8c03\u6574\u8fd9\u4e00\u5206\u5e03\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u67d0\u79cd\u201c\u5b9a\u5411\u201d\u7684exploration\u3002</p> <p>\u90a3\u4e48\u5982\u4f55\u5b9e\u73b0\u8fd9\u6837\u590d\u6742\u7684\u64cd\u4f5c\u5462\uff1f\u76f4\u89c2\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u7c7b\u6bd4\u4e0a\u4e00\u8bb2\u63d0\u5230\u7684count-based exploration\u7684\u65b9\u6cd5\uff0c\u7ed9\u6bcf\u4e00\u4e2astate\u4e00\u4e2abonus\uff1a</p> \\[ \\tilde{r}(s)=\\log p^{\\star}(s)-\\log p_\\pi(s) \\] <p>\u4e4d\u4e00\u770b\uff0c\u8fd9reward\u6beb\u65e0\u9053\u7406\u3002\u4f46\u4ed4\u7ec6\u89c2\u5bdf\u53ef\u4ee5\u53d1\u73b0</p> \\[ \\mathbb{E}_{s\\sim p_\\pi(s)}[\\tilde{r}(s)]=-\\text{KL}(p_\\pi(s)||p^\\star(s)) \\] <p>\u56e0\u6b64\uff0c\u4e00\u4e2a\u5408\u9002\u7684\u8bad\u7ec3\u53ef\u4ee5\u4f7f\u5f97 \\(p_\\pi(s)\\) \u903c\u8fd1 \\(p^\\star(s)\\) \u3002\u8fd9\u4e00\u65b9\u6cd5\u88ab\u79f0\u4e3a\u201cState Marginal Matching\u201d\u3002</p> <p>\u6b64\u5916\uff0c\u9700\u8981\u6ce8\u610f\u73b0\u5728\u7684\u5047\u8bbe\u4e2d\uff0c\u8bad\u7ec3\u65f6\u6211\u4eec\u5f97\u4e0d\u5230reward\uff0c\u56e0\u6b64\u603b\u7684\u201c\u4eba\u9020reward\u201d \\(\\tilde{r}(s)\\) \u4e2d\u6ca1\u6709\u539f\u6765\u7684reward\u9879\u3002\u540c\u65f6\uff0c\u6ce8\u610f \\(p_\\pi(s)\\) \u8fd9\u4e00\u5206\u5e03\u5e76\u975e\u663e\u7136\uff0c\u4e00\u822c\u9700\u8981\u7528\u4e00\u4e2a\u6a21\u578b\u6765\u62df\u5408\u3002\u8003\u8651\u4e86\u8fd9\u4e9b\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u8bad\u7ec3\u6d41\u7a0b\uff1a\u4e0d\u65ad\u91cd\u590d</p> <ol> <li>\u6839\u636e \\(\\tilde{r}(s)\\) \u6765\u8bad\u7ec3 \\(\\pi\\) \uff1b</li> <li>\u6839\u636e \\(\\pi\\) \u83b7\u5f97\u7684\u8f68\u8ff9\u6570\u636e\u6765update \\(p_\\pi(s)\\) \u3002</li> </ol> <p>\u4f46\u8fd9\u4e00\u65b9\u6cd5\u6709\u4e00\u4e2a\u6bd4\u8f83\u9690\u79d8\u7684\u95ee\u9898\u3002\u5177\u4f53\u7684\u7ec6\u8282\u5f88\u590d\u6742\uff0c\u53ef\u4ee5\u53c2\u8003\u8fd9\u91cc\u3002\u4f46\u6211\u4eec\u53ef\u4ee5\u7ed9\u51fa\u4e00\u4e2a\u6bd4\u8f83\u76f4\u89c2\u7684\u89e3\u91ca\u3002</p> <p></p> <p>\u5982\u56fe\uff0c\u5047\u8bbe\u6211\u4eec\u7684 \\(p^\\star\\) \u662f\u6a59\u8272\u7684\u5747\u5300\u5206\u5e03\uff0c\u4e00\u5f00\u59cb\u7684\u65f6\u5019\uff0c \\(p_{\\pi_1}\\) \u548c \\(\\pi_1\\) \u5728\u5de6\u4e0b\u89d2\u7684\u533a\u57df\uff0c \\(p_{\\pi_1}\\) \u8fd1\u4f3c\u4e86 \\(\\pi_1\\) \u7684state marginal\uff08\u56fe\u4e2d\u7684\u7eff\u8272\uff09\uff0c\u800c\u84dd\u8272\u4ee3\u8868\u67d0\u4e00\u6761\u5177\u4f53\u7684\u8f68\u8ff9\u3002\u8fd9\u6837\uff0c\u6839\u636ereward\u7684\u9009\u62e9\uff0c\u6211\u4eec\u5c31\u4f1a\u7279\u522b\u503e\u5411\u4e8e\u8d70\u5411\u4e00\u4e9b\u6ca1\u6709\u88ab\u7eff\u8272\u8986\u76d6\u7684\u90e8\u5206\uff0c\u6bd4\u5982\u8fd0\u52a8\u5230\u56fe\u793a \\(\\pi_2\\) \u7684\u533a\u57df\u3002\u7136\u540e\uff0c1,3,4\u8fd9\u4e09\u4e2a\u533a\u57df\u5c31\u53c8\u6ca1\u6709\u88ab\u8986\u76d6\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u80fd\u5230\u8fbe\u5b83\u4eec\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2a\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u6211\u4eec\u7684\u7b56\u7565\u53ef\u80fd\u4e00\u76f4\u5728\u4e71\u8df3\uff0c\u800c\u4e0d\u662f\u5b8c\u5168\u5730\u8986\u76d6\u3002</p> <p>\u5982\u4f55\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\uff1f\u5b9e\u9645\u4e0a\u7684\u89e3\u51b3\u65b9\u6848\u6765\u81ea\u4e8egame theory\u3002\u8fd9\u4e00\u601d\u8def\u6307\u51fa\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u4fee\u6539\u8be5\u7b97\u6cd5\uff1a</p> <p>State Marginal Matching</p> <ol> <li>\u91cd\u590d<ol> <li>\u6839\u636e \\(\\tilde{r}(s)\\) \u6765\u8bad\u7ec3 \\(\\pi\\) \uff1b</li> <li>\u6839\u636e\u5386\u53f2\u4e0a\u6240\u6709\u7684\u8f68\u8ff9\u6570\u636e\u6765update \\(p_\\pi(s)\\) \u3002</li> </ol> </li> <li>\u4e0d\u8fd4\u56de\u6700\u540e\u7684 \\(\\pi\\) \uff0c\u800c\u662f\u8fd4\u56de\u5386\u53f2\u4e0a\u6240\u6709 \\(\\pi\\) \u7684\u5e73\u5747\u3002</li> </ol> <p>\u5728Game theory\u4e0a\u8bc1\u660e\u4e86\uff0c\u8fd9\u6837\u53ef\u4ee5\u4fdd\u8bc1\u8fd9\u4e00\u65b9\u6cd5\u6536\u655b\uff0c\u5e76\u4e14\u5230\u8fbestate marginal matching\u7684\u76ee\u6807\u3002\u5b9e\u9a8c\u4e0a\uff0c\u8fd9\u4e00\u65b9\u6cd5\u786e\u5b9e\u53ef\u4ee5\u5728target state distribution\u5747\u5300\u7684\u65f6\u5019\u505a\u5230\u975e\u5e38\u5747\u5300\u7684explore\u3002</p> <p>\u6700\u540e\uff0c\u6211\u4eec\u6765\u8ba8\u8bba\u4e00\u4e0bSMM\u7684\u6570\u5b66\u4e0a\u7684\u542b\u4e49\u3002\u8fd8\u8bb0\u5f97\u5b83\u7684objective\u662fKL divergence\u7684\u6700\u5c0f\u5316\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u6211\u4eec\u5e0c\u671b\u6a21\u578b\u5747\u5300explore\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u7684objective\u5c31\u53d8\u6210\u4e86\u71b5\uff1a</p> \\[ \\mathcal{H}(p_\\pi(g)) \\] <p>\u5176\u4e2d \\(g\\) \u8fd8\u662f\u4ee3\u8868\u4efb\u4f55\u4e00\u4e2agoal state\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u548c\u4e4b\u524dImagining Goals\u7684\u601d\u60f3\u8fd8\u662f\u7c7b\u4f3c\u7684\uff0c\u6211\u4eec\u8fd8\u662f\u9650\u5b9a\u4e00\u4e2a\u6240\u6709\u53ef\u80fd\u7684goal\u7684\u96c6\u5408\uff0c\u7136\u540e\u8ba9\u6a21\u578b\u7684\u6700\u7ec8\u884c\u4e3a\u53ef\u4ee5\u5747\u5300\u5730\u5230\u8fbe\u8fd9\u4e00\u96c6\u5408\u4e2d\u7684\u4efb\u4f55\u4e00\u4e2agoal\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap12/#theoretical_consideration_why_maximize_entropy","title":"Theoretical Consideration: why maximize entropy?","text":"<p>\u4e00\u4e2a\u6709\u610f\u601d\u7684\u95ee\u9898\u662f\uff0c\u4e3a\u4ec0\u4e48\u6211\u4eec\u524d\u9762\u7ed9\u51fa\u7684\u4e24\u79cd\u65b9\u6cd5\uff0c\u90fd\u6700\u540e\u843d\u5b9e\u5230\u4e86\u6700\u5927\u5316\u71b5\u4e0a\uff1f\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u5373\u5c06\u6307\u51fa\uff0c\u6700\u5927\u5316\u71b5\u662f\u7406\u8bba\u4e0a\u6700\u597d\u7684\u65b9\u6848\u3002</p> <p>\u6211\u4eec\u60f3\u50cf\u8fd9\u6837\u4e00\u79cd\u60c5\u666f\uff1a\u56de\u5230\u5f00\u59cb\u7684\u4f8b\u5b50\uff0c\u673a\u5668\u4eba\u88ab\u653e\u5165\u4e00\u4e2a\u73af\u5883\u4e2d\uff0c\u91cc\u9762\u6709\u5f88\u591a\u6280\u80fd\u53ef\u80fd\u9700\u8981\u7ec3\u4e60\u3002\u5728\u8bad\u7ec3\u7684\u8fc7\u7a0b\u4e2d\uff0c\u673a\u5668\u4eba\u5e76\u4e0d\u77e5\u9053\u6700\u540e\u7684\u76ee\u6807\uff0c\u4e5f\u5f97\u4e0d\u5230\u4efb\u4f55reward\u3002\u4f46\u6700\u540e\uff0c\u6d4b\u8bd5\u7684\u65f6\u5019\u6211\u4eec\u9009\u53d6\u673a\u5668\u4eba\u8868\u73b0\u6700\u5dee\u7684\u4efb\u52a1\u8fdb\u884c\u6d4b\u8bd5\u3002\u5728\u8fd9\u6837\u7684\u60c5\u51b5\u4e0b\uff0c\u673a\u5668\u4eba\u6700\u7406\u60f3\u7684\u8bad\u7ec3\u8fc7\u7a0b\u4e2dgoal\u7684\u5206\u5e03 \\(p(g)\\) \uff08 \\(g\\in G\\) \uff09\u662f\u4ec0\u4e48\u5462\uff1f</p> <p>\u7406\u8bba\u4e0a\u53ef\u4ee5\u8bc1\u660e\uff0c\u8bad\u7ec3\u6570\u636e\u7684\u5206\u5e03 \\(p\\) \u4f7f\u5f97\u71b5\u6700\u5927\u7684\u65f6\u5019\uff0c\u673a\u5668\u4eba\u5728\u6700\u5dee\u60c5\u51b5\u4e0b\u7684\u8868\u73b0\u6700\u597d\u3002\u8fd9\u4e5f\u5f88\u76f4\u89c2\uff0c\u4e25\u8c28\u7684\u5206\u6790\u53ef\u4ee5\u53c2\u8003\u8fd9\u91cc\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap12/#exploration_by_skills","title":"Exploration by Skills","text":"<p>\u9664\u4e86\u8ba9\u6211\u4eec\u7684\u6a21\u578b\u63a2\u7d22\u4e0d\u540cgoal\u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u8ba9\u6a21\u578b\u63a2\u7d22\u4e0d\u540c\u7684skills\u3002\u76f4\u89c2\u4e0a\uff0c\u4e00\u4e2askill\u7ed9\u51fa\u7684\u662f\u4e00\u7cfb\u5217action\uff0c\u5b8c\u6210\u4e00\u4e2a\u5c0f\u7684\u6b65\u9aa4\uff0c\u56e0\u6b64\uff0cskill\u7684\u5b66\u4e60\u5f80\u5f80\u53ef\u4ee5\u6bd4goal\u7684\u5b66\u4e60\u66f4\u5177\u6709\u666e\u9002\u6027\u3002\u4e3e\u4e2a\u4f8b\u5b50\uff1a\u5047\u8bbe\u73b0\u5728\u8981\u6c42\u673a\u5668\u4eba\u5230\u8fbe\u95e8\u53e3\uff0c\u4f46\u4e0d\u78b0\u5230\u623f\u95f4\u91cc\u7684\u67d0\u4e2a\u533a\u57df\uff08\u6bd4\u5982\u90a3\u4e2a\u533a\u57df\u6709\u4e00\u4e2a\u5751\uff09\u3002\u5982\u679c\u4f7f\u7528goal\u5b66\u4e60\u7684\u65b9\u5f0f\uff0c\u673a\u5668\u4eba\u5c31\u53ea\u77e5\u9053goal state\u662f\u95e8\u53e3\uff0c\u800c\u4e0d\u77e5\u9053\u600e\u4e48\u907f\u5f00\u5751\u3002\u4f46\u4f7f\u7528skill\u5b66\u4e60\u7684\u65b9\u5f0f\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u5b66\u4e60\u4e00\u4e2askill\uff0c\u8ba9\u673a\u5668\u4eba\u907f\u5f00\u5751\uff0c\u7136\u540e\u518d\u5b66\u4e60\u4e00\u4e2askill\uff0c\u8ba9\u673a\u5668\u4eba\u8d70\u5230\u95e8\u53e3\u3002</p> <p></p> <p>\u5177\u4f53\u5730\uff0c\u4e0d\u540c\u7684skill\u4e00\u822c\u5bf9\u5e94\u7740state space\u4e2d\u4e0d\u540c\u7684\u533a\u57df\uff0c\u800c\u5b83\u4eec\u6700\u597d\u80fd\u8986\u76d6\u6574\u4e2astate space\uff0c\u5982\u4e0a\u9762\u7684\u56fe\u6240\u793a\u3002\u5982\u4f55\u5b9e\u73b0\u8fd9\u4e00\u70b9\u5462\uff1f\u6211\u4eec\u9009\u53d6\u6211\u4eec\u7684policy\u4e3a \\(\\pi(a|s,z)\\) \uff0c\u5176\u4e2d \\(z\\) \u4ee3\u8868\u67d0\u4e2askill\u3002\u6211\u4eec\u7684\u76ee\u6807\u5219\u662f\u6700\u5927\u5316</p> \\[ J=\\sum_z \\mathbb{E}_{s\\sim \\pi(s|z)}[\\log p_D(z|s)] \\] <p>\u5176\u4e2d \\(p_D\\) \u4ee3\u8868\u67d0\u79cddiscrimitive model\uff0c\u5b83\u4e5f\u5728\u8bad\u7ec3\uff0c\u7406\u60f3\u72b6\u51b5\u4e0b\u5b83\u5e94\u8be5\u53ef\u4ee5\u901a\u8fc7state\u5c31\u786e\u5b9a\u4e0b\u6765\u5728\u54ea\u4e00\u4e2askill\u4e0a\uff0c\u56e0\u4e3a\u6211\u4eec\u63d0\u5230\u4e0d\u540c\u7684skill\u5bf9\u5e94\u7684\u662fstate space\u7684\u4e0d\u540c\u533a\u57df\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u4e0a\u9762\u7684\u76ee\u6807\u5c31\u662f\u8ba9\u6211\u4eec\u7684policy\u5bf9\u4e8e\u6bcf\u4e00\u4e2askill\u90fd\u4f5c\u51fa\u4e0d\u540c\u7684action\uff0c\u5230\u8fbe\u4e0d\u540c\u7684state\u3002</p> <p>\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\uff0cdiscrimitive model\u548cpolicy\u90fd\u5728\u8bad\u7ec3\uff1b\u4f46\u548cGAN\u4e0d\u540c\uff0c\u8fd9\u91cc\u7684\u4e24\u4e2a\u6a21\u578b\u5e76\u975e\u5bf9\u6297\uff0c\u800c\u662f\u76f8\u4e92\u8f85\u52a9\u3002\u5c31\u50cf\u4e0b\u9762\u7684\u56fe\u90a3\u6837\uff0c\u5f00\u59cbD\u53ef\u80fd\u53ea\u662f\u968f\u673a\u753b\u51fa\u4e00\u6761\u5206\u754c\u7ebf\uff0c\u4f46policy\u5c31\u4f1a\u968f\u7740\u5b66\u4f1a\uff0c\u6700\u540e\u81ea\u7136\u5206\u5f00\u4e0d\u540cskill\u5bf9\u5e94\u7684action\u3002</p> <p></p> <p>\u5b9e\u9a8c\u4e0a\uff0c\u8fd9\u4e00\u65b9\u6cd5\u5f97\u5230\u7684\u6548\u679c\u975e\u5e38\u597d\u73a9\uff1a\u6bd4\u5982\uff0c\u5728Cheetah\u73af\u5883\u4e2d\uff0c\u6709\u7684skill\u4f7f\u5f97\u673a\u5668\u4eba\u5411\u524d\u8dd1\uff0c\u6709\u7684\u4f7f\u5f97\u673a\u5668\u4eba\u5411\u540e\u8dd1\uff0c\u6709\u7684\u4f7f\u5f97\u673a\u5668\u4eba\u8df3\u8dc3\uff0c\u7b49\u7b49\u3002</p> <p>\u4eba\u4eec\u8fd8\u53d1\u73b0\uff0c\u8fd9\u4e00\u7ed3\u679c\u6700\u7ec8\u5728\u6570\u5b66\u4e0a\u8fd8\u662f\u518d\u6b21\u548cmutual information\u7ed3\u5408\u4e86\u8d77\u6765\u3002\u53ef\u4ee5\u8bc1\u660e\uff0c\u4e0a\u9762\u7684\u76ee\u6807\u5b9e\u9645\u4e0a\u7b49\u4ef7\u4e8e\u6700\u5927\u5316\u4e92\u4fe1\u606f</p> \\[ I=\\mathcal{H}(p(z))-\\mathcal{H}(p(z|s)) \\] <p>\u8fd9\u4e5f\u548c\u4e4b\u524d\u7684\u76f4\u89c9\u76f8\u7b26\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap12/#reference_papers","title":"Reference Papers","text":"<ol> <li>Visual Reinforcement Learning with Imagined Goals\uff08\u4ecb\u7ecdImagining Goals\uff09</li> <li>Skew-Fit: State-Covering Self-Supervised Reinforcement Learning\uff08\u4ecb\u7ecdSkew-Fit\uff09</li> <li>Efficient Exploration via State Marginal Matching\uff08\u4ecb\u7ecdSMM\uff09</li> <li>Provably Efficient Maximum Entropy Exploration\uff08variant of SMM\uff09</li> <li>Diversity is All You Need\uff08\u4ecb\u7ecdSkills-conditioned\uff09</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap13/","title":"Offline Reinforcement Learning","text":"<p>\u5b9e\u9a8c\u4e0a\uff0c\u4eba\u4eec\u4f1a\u6ce8\u610f\u5230\u4e00\u4e2a\u95ee\u9898\uff1aRL\u7684\u65b9\u6cd5\u76f8\u6bd4\u4e8eDL\u800c\u8a00\uff0cgeneralize\u7684\u80fd\u529b\u8fd8\u662f\u8f83\u5dee\u3002\u6bd4\u5982\uff0cDL\u7684\u56fe\u7247\u6a21\u578b\u5728\u8bad\u7ec3\u540e\u53ef\u4ee5\u5728\u6d4b\u8bd5\u96c6\u7684\u5b8c\u5168\u672a\u77e5\u7684\u56fe\u7247\u4e0a\u4e5f\u6709\u5f88\u597d\u7684\u6548\u679c\uff0c\u4f46RL\u7684\u6a21\u578b\u57fa\u672c\u4e0a\u96c6\u4e2d\u5728\u4e00\u4e2a\u5177\u4f53\u7684\u73af\u5883\uff0c\u4e5f\u5c31\u662f\u8bf4\u53ea\u80fd\u5728\u8fd9\u4e00\u73af\u5883\u4e0a\u6709\u6548\u3002\u90a3\u4e48\uff0c\u5047\u8bbe\u6211\u4eec\u5e0c\u671b\u67d0\u4e2a\u6a21\u578b\uff08\u6bd4\u5982\u8bf4\uff09\u53ef\u4ee5\u505a\u591a\u79cd\u5bb6\u52a1\uff0c\u5e94\u8be5\u600e\u4e48\u529e\u5462\uff1f</p> <p>\u4e00\u4e2a\u81ea\u7136\u7684\u60f3\u6cd5\u5c31\u662f\uff0c\u6211\u4eec\u589e\u52a0\u6570\u636e\u96c6\u7684\u5927\u5c0f\u3002\u4f46\u95ee\u9898\u5728\u4e8e\uff0c\u524d\u9762\u7ed9\u51fa\u7684RL\u7b97\u6cd5\u4e2d\u6570\u636e\u96c6\u662f\u7531agent\u548c\u73af\u5883\u4ea4\u4e92\u4ea7\u751f\u7684\uff0c\u5982\u679c\u8fd9\u4e2a\u6570\u91cf\u8fc7\u5927\uff0c\u548c\u73af\u5883\u4ea4\u4e92\u7684\u4ee3\u4ef7\u5c31\u4f1a\u5f88\u5927\u3002\u56de\u60f3\u5728DL\u7684\u65f6\u5019\uff0c\u6bd4\u5982\u6709\u4eba\u6536\u96c6\u597d\u4e86\u4e00\u4e2a\u6570\u636e\u96c6\uff0c\u6240\u6709\u4eba\u90fd\u53ef\u4ee5\u7528\uff1b\u4f46RL\u4e2d\uff0c\u6bcf\u4e2a\u4eba\u90fd\u8981\u91cd\u65b0\u548c\u73af\u5883\u4ea4\u4e92\u3002</p> <p>\u6b63\u662f\u4e3a\u6b64\uff0cOffline RL\uff08\u4e5f\u53eb\u505abatch RL\u6216\u8005fully off-policy RL\uff09\u88ab\u5f15\u5165\uff1a\u5b83\u7684\u76ee\u6807\u662f\uff0c\u53ea\u8981\u4e00\u4e2a\u4eba\u7528\u67d0\u79cdsample policy \\(\\pi_\\beta\\) \u6536\u96c6\u597d\u4e86\u4e00\u4e2a\u6570\u636e\u96c6\uff0c\u4e4b\u540e\u6240\u6709\u4eba\u90fd\u53ef\u4ee5\u7528\u8fd9\u4e2a\u6570\u636e\u96c6\u6765\u8bad\u7ec3\u81ea\u5df1\u7684\u6a21\u578b\u3002\u5982\u56fe\u6240\u793a\u3002</p> <p></p> <p>\u540c\u65f6\uff0c\u5fc5\u987b\u6ce8\u610f\uff0c\u8fd9\u91cc\u7684 \\(\\pi_\\beta\\) \u5e76\u975e\u524d\u9762\u6211\u4eec\u5728imitation learning\u4e2d\u8bf4\u7684expert policy\uff0c\u800c\u53ef\u4ee5\u662f\u4efb\u610f\u7684policy\u3002</p> <p>\u4e3e\u4e00\u4e2a\u4f8b\u5b50\uff0c\u5bf9\u4e8e\u5f00\u8f66\u7684\u95ee\u9898\uff0c\u6570\u636e\u96c6\u53ef\u80fd\u662f\u82e5\u5e72\u6570\u636e\u7684\u6df7\u5408\uff1a\u6bd4\u5982\u8ba9\u4e00\u4e2a\u9ad8\u624b\u5f00\u8f66\u91c7\u96c6\u51fa\u51e0\u6761\u8f68\u8ff9\uff0c\u518d\u8ba9\u666e\u901a\u4eba\u91c7\u96c6\u4e00\u4e9b\u8f68\u8ff9\uff0c\u751a\u81f3\u8fd8\u53ef\u80fd\u8ba9\u4e00\u4e9b\u4e0d\u592a\u4f1a\u5f00\u8f66\u7684\u4eba\u91c7\u96c6\u4e00\u4e9b\u8f68\u8ff9\u3002\u4f46\u662fOffline RL\u9700\u8981\u505a\u7684\u662f\uff0c\u4e0d\u7ba1\u6570\u636e\u6574\u4f53\u591a\u4e48\u62c9\uff0c\u6211\u4eec\u90fd\u53ef\u4ee5\u5b66\u5230\u8fd9\u4e2a\u6570\u636e\u96c6\u4e2d\u6700\u597d\u7684policy\u3002</p> <p>Offline RL\u6709\u4ec0\u4e48\u7528\uff1f\u9664\u4e86\u524d\u9762\u8bf4\u5230\u7684\uff0c\u53ef\u4ee5\u5171\u7528\u6570\u636e\u4e4b\u5916\uff0c\u5728\u67d0\u4e9b\u7279\u6b8a\u9886\u57df\u5176\u4e5f\u6709\u91cd\u8981\u4f5c\u7528\u3002\u6bd4\u5982\uff0c\u8ba9agent\u4e3a\u75c5\u4eba\u63a8\u8350\u836f\u7269\u6765\u6cbb\u7597\uff0c\u8fd9\u6837\u7684\u95ee\u9898\u663e\u7136\u4e0d\u80fd\u8ba9agent\u5728\u771f\u5b9e\u73af\u5883\u4e2d\u968f\u4fbf\u5c1d\u8bd5\u3002\u6b64\u65f6\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5e0c\u671bOffline RL\u80fd\u5229\u7528\u5386\u53f2\u4e0a\u7684\u6570\u636e\uff0c\u505a\u51fa\u4e00\u4e2a\u4e0d\u9519\u7684\u51b3\u7b56\u3002\u6b64\u5916\uff0cOffline RL\u8fd8\u53ef\u4ee5\u7528\u4f5cinitialization\uff1a\u5b9e\u9a8c\u4e0a\u53d1\u73b0\u5728Offline RL\u7684\u8bad\u7ec3\u57fa\u7840\u4e0a\u7a0d\u5fae\u7528online RL\u8fdb\u884c\u4e00\u4e0bfinetune\uff0c\u6548\u679c\u5c31\u4f1a\u7279\u522b\u597d\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap13/#common_mistakes","title":"Common Mistakes","text":"<p>\u4e00\u4e9b\u5e38\u89c1\u7684\u9519\u8bef\uff1a</p> <ol> <li> <p>Q: Offline RL\u548cImitation Learning\u662f\u4e00\u6837\u7684\uff1f</p> <ul> <li>A\uff1a\u4e0d\u662f\u3002\u6bd4\u5982\u4e0a\u9762\u7684\u4f8b\u5b50\uff0cImitation Learning\u5728\u7406\u60f3\u7684\u60c5\u51b5\u4e0b\u5b66\u4f1a\u7684\u662f\u4eba\u4eec\u5e73\u5747\u7684\u5f00\u8f66\u80fd\u529b\uff0c\u800c\u6211\u4eec\u5e94\u8be5\u671f\u5f85\u597d\u7684Offline RL\u5b66\u5230\u66f4\u597d\u7684\u5f00\u8f66\u80fd\u529b\u3002</li> </ul> </li> <li> <p>Q: Offline RL\u662f\u4e0d\u662f\u76f8\u5f53\u4e8e\u63d0\u53d6\u51fa\u6570\u636e\u96c6\u4e2d\u4ef7\u503c\u5927\u7684\u90e8\u5206\uff0c\u7136\u540e\u505aImitation Learning\uff1f</p> <ul> <li> <p>A\uff1a\u4e0d\u5b8c\u5168\u6b63\u786e\u3002\u6211\u4eec\u786e\u5b9e\u5e0c\u671b\uff0cOffline RL\u53ef\u4ee5\u201c\u53d6\u5176\u7cbe\u534e\u201d\uff0c\u4f46\u662f\u8fd9\u4e2a\u8fc7\u7a0b\u5e76\u4e0d\u662f\u7b80\u5355\u7684\u63d0\u53d6\u3002</p> <p>\u4e00\u4e2a\u8457\u540d\u7684\u7528Offline RL\u5b8c\u6210\u7684\u5b9e\u9a8c\u662f\uff1a\u5728\u4e00\u4e2a\u73af\u5883\u91cc\u6709\u4e00\u4e2a\u62bd\u5c49\uff0c\u91cc\u9762\u6709\u4e00\u4e2a\u7269\u4f53\uff0cagent\u9700\u8981\u6253\u5f00\u62bd\u5c49\uff0c\u62ff\u51fa\u7269\u4f53\u3002\u8bad\u7ec3\u6570\u636e\u91cc\u9762\u867d\u7136\u6709\u6253\u5f00\u62bd\u5c49\u7684\u8f68\u8ff9\u548c\u62ff\u51fa\u7269\u4f53\u7684\u8f68\u8ff9\uff0c\u4f46\u4e0d\u5b58\u5728\u4efb\u4f55\u4e00\u4e2a\u5b8c\u6574\u7684\uff0c\u65e2\u5305\u542b\u6253\u5f00\u62bd\u5c49\u53c8\u5305\u542b\u62ff\u51fa\u7269\u4f53\u7684\u8f68\u8ff9\u3002\u4f46\u662f\uff0cOffline RL\u53ef\u4ee5\u5b66\u4f1a\u628a\u8fd9\u4e24\u90e8\u5206\u7684\u6570\u636e\u7ed3\u5408\u8d77\u6765\uff0c\u5b8c\u6210\u8fd9\u4e2a\u5b8c\u6574\u7684\u52a8\u4f5c\u3002</p> <p>\u8fd9\u4e00\u73b0\u8c61\u4e5f\u53eb\u505a\u201cStitching\u201d\uff0c\u662f\u597d\u7684Offline RL\u7b97\u6cd5\u7684\u4e00\u4e2a\u91cd\u8981\u7279\u70b9\u3002</p> </li> </ul> </li> <li> <p>Q: \u542c\u4f60\u8bf4\u7684\u8fd9\u4e48\u52a8\u4eba\uff0c\u90a3Offline Learning\u662f\u4e0d\u662f\u5728\u7ed9\u4efb\u610f\u7684\u6570\u636e\u96c6\u7684\u60c5\u51b5\u4e0b\u90fd\u53ef\u4ee5\u5b66\u5230\u5f88\u597d\u7684policy\uff1f</p> <ul> <li>A\uff1a\u4e0d\u662f\u3002Offline RL\u7684\u5b9e\u9645\u76ee\u7684\u5e76\u4e0d\u53ef\u80fd\u662f\u5b66\u4e60optimal policy\uff0c\u800c\u53ea\u80fd\u662f\u5728\u7ed9\u5b9a\u6570\u636e\u96c6\u7684\u57fa\u7840\u4e0a\u5c3d\u53ef\u80fd\u5b66\u4e60\u8fbe\u5230\u6700\u597d\u7684\u6548\u679c\u3002\u5f88\u5bb9\u6613\u60f3\u50cf\uff0c\u5982\u679c\u6570\u636e\u96c6\u7279\u522b\u70c2\uff0c\u90a3\u795e\u4ed9\u6765\u4e86\u4e5f\u6ca1\u6709\u529e\u6cd5\uff0c\u66f4\u522b\u63d0optimal policy\u4e86\u3002\u4f46\u5b9e\u9645\u4e0a\u5bf9\u4e8e\u6b63\u5e38\u7684\u6570\u636e\u96c6\uff0c\u6211\u4eec\u90fd\u5e0c\u671bOffline RL\u53ef\u4ee5\u5b66\u5230\u5f88\u597d\u7684policy\u3002</li> </ul> </li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap13/#important_issue_distribution_shift","title":"Important Issue: Distribution Shift","text":"<p>\u5728\u4e86\u89e3\u4e86Offline RL\u7684\u6982\u5ff5\u540e\uff0c\u4f60\u53ef\u80fd\u7acb\u523b\u60f3\u5230\uff0c\u6211\u4eec\u4e3a\u4ec0\u4e48\u4e0d\u80fd\u7b80\u5355\u5730\u76f4\u63a5\u7528\u4e00\u4e2aoff policy\u7684\u7b97\u6cd5\uff08\u6bd4\u5982Q learning\uff09\u5b8c\u6210\u8fd9\u4e00\u4efb\u52a1\u5462\uff1f\u539f\u5219\u4e0a\uff0c\u5b8c\u5168\u6ca1\u6709\u4efb\u4f55\u95ee\u9898\u3002\u4f46\u5b9e\u8df5\u4e0a\uff0c\u8fd9\u5b8c\u5168\u5931\u8d25\u3002\u5176\u539f\u56e0\u662f\u4e0d\u6613\u5bdf\u89c9\u7684\u3002</p> <p>\u5b9e\u9a8c\u4e0a\u53d1\u73b0\u4e00\u4e2a\u73b0\u8c61\uff1a\u5728\u5931\u8d25\u7684Offline RL\u4e2d\u6709\u7740\u60ca\u4eba\u7684over-confidence\uff1a\u6bd4\u5982\u5728Q-learning\u4e2d\uff0c\u7b97\u6cd5\u53ef\u80fd\u8ba1\u7b97\u51fa\u6765\u7684Q value\u662f \\(10^{20}\\) \u91cf\u7ea7\uff0c\u4f46\u5b9e\u9645\u4e0a\u7684return\u53ea\u6709-100\u3002\u8fd9\u5e76\u4e0d\u662f\u5de7\u5408\uff0c\u800c\u662f\u6709\u6df1\u610f\u7684\u3002</p> <p>\u4e3a\u4e86\u9610\u8ff0\u8fd9\u4e00\u95ee\u9898\uff0c\u8fd8\u662f\u8003\u8651\u9a7e\u8f66\u7684\u4f8b\u5b50\uff1a\u6211\u4eec\u7684\u6570\u636e\u96c6\u91cc\u9762\u5168\u90e8\u662f\u4eba\u5f00\u8f66\u7684\u6570\u636e\u3002\u5373\u4f7f\u6709\u6c34\u5e73\u6bd4\u8f83\u5dee\u7684\u4eba\uff0c\u4ed6\u4eec\u81f3\u5c11\u4e5f\u4e0d\u4f1a\u4f5c\u51fa\u75af\u72c2\u7684\u4e8b\u60c5\u3002\u6bd4\u5982\uff0c\u5728\u7b14\u76f4\u7684\u516c\u8def\u4e0a\uff0c\u6ca1\u6709\u4eba\u4f1a\u7a81\u713690\u5ea6\u8f6c\u5f2f\u3002</p> <p>\u4f46\u662f\u5728Q-learning\u4e2d\uff0c\u6211\u4eec\u7684\u6a21\u578b\u5e76\u4e0d\u77e5\u9053\u8fd9\u4e00\u70b9\u3002\u5b83\u5728\u516c\u8def\u4e0a\u65f6\uff0c\u6709\u53ef\u80fdsample\u5230\u4e00\u4e2a90\u5ea6\u8f6c\u5f2f\u7684\u52a8\u4f5c\u3002\u4f46\u662f\uff0c\u8fd9\u4e2a\u52a8\u4f5c\u5728\u6570\u636e\u96c6\u4e2d\u662f\u4e0d\u5b58\u5728\u7684\uff0c\u751a\u81f3\u548c\u6570\u636e\u96c6\u4efb\u4f55\u6570\u636e\u90fd\u6ca1\u6709\u76f8\u4f3c\u4e4b\u5904\uff0c\u6240\u4ee5\u6a21\u578b\u5bf9\u5176\u7684\u4f30\u8ba1\u53ef\u4ee5\u4efb\u610f\u79bb\u8c31\u3002\u8fd9\u5f88\u6709\u53ef\u80fd\u5bfc\u81f4\u6a21\u578b\u76f8\u4fe1\uff0c\u5728\u76f4\u8def\u4e0a\u8f6c\u5f2f\u5177\u6709\u5f88\u5927\u7684Q value\u3002</p> <p>\u90a3\u4e3a\u4ec0\u4e48\u8fd9\u4e00\u95ee\u9898\u5728online\u7684\u65b9\u6cd5\u4e2d\u6ca1\u95ee\u9898\uff1f\u56e0\u4e3a\uff0c\u6211\u4eec\u5728online\u65b9\u6cd5\u4e2d\uff08\u5373\u4fbf\u662foff policy\uff09\uff0c\u603b\u662f\u6709\u548c\u73af\u5883\u7684\u4ea4\u4e92\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u5728\u6a21\u578b\u5bf9\u67d0\u4e2a\u52a8\u4f5c\u7684\u4f30\u8ba1\u8fc7\u4e8e\u79bb\u8c31\u65f6\uff0c\u53ca\u65f6\u7ea0\u6b63\u3002\u800c\u5728Offline RL\u4e2d\uff0c\u6211\u4eec\u6ca1\u6709\u8fd9\u4e2a\u673a\u4f1a\u3002</p> <p>\u50cf\u524d\u9762\u8bf4\u768490\u5ea6\u8f6c\u5f2f\uff0c\u5c31\u53eb\u505a out-of-distribution(OOD) \u7684action\u3002\u8bb8\u591a\u8fd9\u6837\u7684action\u5728\u4e00\u8d77\u5c31\u5f88\u53ef\u80fd\u5bfc\u81f4\u6a21\u578b\u7684\u5931\u8d25\u3002\u4ec0\u4e48\u65f6\u5019\u4f1a\u6709\u5f88\u591a\u8fd9\u6837\u7684action\uff1f\u5c31\u662f\u5f53\u6211\u4eec\u6d4b\u8bd5\u7684\u5206\u5e03\u548c\u8bad\u7ec3\u7684\u5206\u5e03\u4e0d\u4e00\u6837\uff08\u6216\u8005\u5dee\u8ddd\u5f88\u5927\uff09\u7684\u65f6\u5019\u3002\u8fd9\u5c31\u53eb\u505adistribution shift\u3002</p> <p>\u6b64\u5916\uff0c\u6ce8\u610f\u5fc5\u987b\u533a\u5206out-of-distribution\u548cout-of-sample\u7684\u533a\u522b\u3002out-of-distribution\u662f\u79bb\u8c31\u5f97\u79bb\u8c31\u7684action\uff0c\u800cout-of-sample\u7684action\u4e0d\u4e00\u5b9a\u5f88\u79bb\u8c31\uff0c\u53ea\u662f\u6ca1\u6709\u88ab\u91c7\u6837\u5230\u3002\u6bd4\u5982\uff0c\u5728\u8def\u53e3\uff0cQ-learning\u7684\u91c7\u6837\u53ef\u80fd\u53ea\u91c7\u6837\u4e86\u53f3\u8f6c10\u5ea6\u548c20\u5ea6\u7684\u4e24\u7ec4\u6570\u636e\uff0c\u6b64\u65f6\u53f3\u8f6c30\u5ea6\u5c31\u662fout-of-sample\u7684action\uff1b\u800c\u5728\u6b64\u7a81\u7136\u7184\u706b\uff0c\u5c31\u662fout-of-distribution\u7684action\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap13/#reason_of_over-confidence","title":"Reason of Over-Confidence","text":"<p>\u524d\u9762\uff0c\u6211\u4eec\u53ea\u662f\u6307\u51fa\u4e86\u8fd9\u4e00\u95ee\u9898\uff0c\u4f46\u4e3a\u4ec0\u4e48\u6a21\u578b\u4f1a\u8fc7\u5ea6\u81ea\u4fe1\uff1f\u6211\u4eec\u6765\u7814\u7a76\u4e00\u4e0b\u3002</p> <p>\u5728\u7ecf\u5178\u7684DL\u4e2d\uff0c\u6709\u4e00\u79cd\u65b9\u6cd5\u53eb\u505aadvarsial attack\uff1a\u6bd4\u5982\uff0c\u5bf9\u4e8e\u56fe\u7247\u5206\u7c7b\u7684\u6a21\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u5bf9\u56fe\u7247\u68af\u5ea6\u4e0b\u964d\uff0c\u53ea\u589e\u52a0\u4e00\u4e2a\u5c0f\u5c0f\u7684\u6270\u52a8\uff0c\u5728\u4eba\u770b\u4e0d\u51fa\u6765\u56fe\u7247\u4efb\u4f55\u53d8\u5316\u7684\u60c5\u51b5\u4e0b\u6539\u53d8\u6a21\u578b\u7684\u5206\u7c7b\u7ed3\u679c\u3002\u8fd9\u5b9e\u9645\u4e0a\u5e76\u4e0d\u662f\u6a21\u578b\u7684\u9505\uff0c\u56e0\u4e3a\u6211\u4eec\u7684\u8bad\u7ec3\u76ee\u6807\u672c\u8eab\u5c31\u662f</p> \\[ L=\\mathbb{E}_{x\\sim D}\\left[(f(x)-y)^2\\right] \\] <p>\u56e0\u6b64\uff0c\u6a21\u578b\u597d\u8bf4\u7684\u662f\u5e73\u5747\u597d\uff0c\u800c\u975e\u6bcf\u4e2a\u90fd\u5f88\u597d\uff0c\u66f4\u4e0d\u662f\u5bf9\u4efb\u610f \\(x\\sim R^n\\) \u90fd\u597d\u3002\u56e0\u6b64\uff0c\u53ea\u8981\u6709\u610f\u5730\u641e\u4e00\u4e2a \\(x\\) \uff0c\u5f88\u5bb9\u6613\u201c\u653b\u7834\u201d\u8fd9\u4e00\u6a21\u578b\u3002\u66f4\u8fdb\u4e00\u6b65\u5730\uff0c\u6211\u4eec\u751a\u81f3\u4e0d\u9700\u8981\u4f7f\u7528\u68af\u5ea6\u7684\u65b9\u6cd5\uff0c\u53ea\u8981\u6211\u4eec\u9009\u53d6\u4e00\u4e2a\u6781\u7aef\u7684\u6570\u503c\uff0c\u6bd4\u5982</p> \\[ x_0=\\arg\\max f(x) \\] <p>\u90a3\u4e48 \\((f(x_0)-y)^2\\) \u5c31\u5f88\u53ef\u80fd\u6bd4\u8f83\u5927\uff0c\u56e0\u4e3a\u795e\u7ecf\u7f51\u7edc\u7684\u5404\u79cd\u5cf0\u503c\u5f88\u53ef\u80fd\u662f\u81ea\u5df1fit\u8fc7\u53bb\u7684\uff0c\u5f88\u96be\u51c6\u786e\u3002</p> <p>\u4f46\u4f60\u4f1a\u95ee\uff0c\u73b0\u5728\u6ca1\u6709\u4eba\u6765\u653b\u51fb\u6211\u4eec\u7684\u6a21\u578b\u554a\uff1f\u5b9e\u9645\u4e0a\uff0c\u662fQ-learning\u7684\u7b97\u6cd5\u5728\u653b\u51fb\u81ea\u5df1\u3002\u5177\u4f53\u5730\uff0c\u6211\u4eec\u7684\u76ee\u6807\u662f</p> \\[ L=\\mathbb{E}_{s,a\\sim \\pi_\\beta(s,a)}\\left[\\left(Q(s,a)-\\left(r(s,a)+\\gamma \\mathbb{E}_{a'\\sim \\pi(a'|s')}[Q(s',a')]\\right)\\right)^2\\right] \\] <p>\u53ef\u4ee5\u6599\u60f3\uff0c\u5982\u679c \\(\\pi_\\beta\\approx \\pi\\) \uff0c\u90a3\u4e48\u5c31\u76f8\u5f53\u4e8e\u4e4b\u524d\u8bf4\u7684\uff0c\u5728\u4e00\u4e2a\u5206\u5e03\u4e0a\u8bad\u7ec3\uff0c\u5e76\u5728\u540c\u6837\u7684\u5206\u5e03\u4e0a\u9009\u53d6\u6d4b\u8bd5\u6570\u636e\uff08\u5728\u8fd9\u91cc\uff0c\u201c\u6d4b\u8bd5\u6570\u636e\u201d\u5b9e\u9645\u4e0a\u6307\u7684\u662f\u4e0b\u4e00\u8f6eQ backup\u7684target\uff0c\u56e0\u6b64 \\(\\pi_\\beta\\) \u76f8\u5f53\u4e8e\u201c\u8bad\u7ec3\u96c6\u201d\uff0c \\(\\pi\\) \u76f8\u5f53\u4e8e\u201c\u6d4b\u8bd5\u96c6\u201d\uff09\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e \\(\\pi_\\beta\\approx \\pi\\) \u7684\u60c5\u51b5\uff0c\u6216\u8005\u4e4b\u524d\u867d\u7136off-policy\u4f46\u4ecd\u7136online\u7684\u60c5\u51b5\uff0c\u95ee\u9898\u90fd\u4e0d\u5927\u3002</p> <p>\u4f46\u662f\u73b0\u5728 \\(\\pi_\\beta\\) \u56fa\u5b9a\u4e0d\u52a8\uff0c\u800c \\(\\pi\\) \u7684\u9009\u53d6\u6070\u6070\u662f</p> \\[ \\pi = \\arg\\max_{\\pi}\\mathbb{E}_{a'\\sim \\pi(a'|s')}[Q(s',a')] \\] <p>\u8fd9\u5c31\u597d\u6bd4\u662f\u524d\u9762\u8bf4\u7684argmax\u653b\u51fb\uff0c\u4f1a\u5bfc\u81f4\u6211\u4eec\u7684\u6a21\u578b\u4e0d\u51c6\u786e\uff0c\u6216\u8005\u51e0\u4e4e\u80af\u5b9a\u6bd4\u771f\u503c\u5927\u5f88\u591a\uff01\u56e0\u6b64\uff0c\u51e0\u8f6e\u8fed\u4ee3\u4e0b\uff0cQ value\u5c31\u4f1a\u8d8a\u6765\u8d8a\u5927\u3002</p> <p>Q\uff1a\u7b49\u7b49\uff0c\u4f60\u522b\u8499\u6211\uff0c\u8fd9\u4e0d\u5c31\u662f\u4e4b\u524dQ learning\u4e2d\u4e5f\u9047\u5230\u7684\u95ee\u9898\u5417\uff1f\u6211\u4eec\u4e0d\u662f\u53ef\u4ee5\u7528double Q learning\u89e3\u51b3\u5417\uff1f</p> <p>A: \u4e0d\u3002\u8fd9\u548c\u524d\u9762online Q learning\u9047\u5230\u7684\u95ee\u9898\u867d\u7136\u76f8\u4f3c\uff0c\u4f46\u539f\u7406\u4e0a\u5e76\u4e0d\u76f8\u540c\u3002\u539f\u6765\u7684\u90a3\u4e2a\u95ee\u9898\u53ea\u662f\u9488\u5bf9argmax\u672c\u8eab\uff1b\u800c\u73b0\u5728\u7684\u95ee\u9898\u76f8\u5f53\u4e8e\u5728\u539f\u6765argmax\u95ee\u9898\u7684\u57fa\u7840\u4e0a\u8fdb\u4e00\u6b65\u52a0\u5267\u3002</p> <p>\u539f\u6765\u7684\u504f\u5927\u5bf9\u5e94\u7740\u662f\u6b63\u5e38\u8bad\u7ec3\u4e00\u4e2a\u795e\u7ecf\u7f51\u7edc\uff08\u5728\u540c\u6837\u7684\u5206\u5e03\u4e0a\u9762\u8bad\u7ec3\u548c\u6d4b\u8bd5\uff09\uff0c\u795e\u7ecf\u7f51\u7edc\u4e0d\u53ef\u907f\u514d\u5b58\u5728\u8bef\u5dee\uff0c\u800cargmax\u5b9a\u5411\u5730\u653e\u5927\u4e86\u8fd9\u4e2a\u8bef\u5dee\uff1b\u800c\u73b0\u5728\u7684\u504f\u5927\u5bf9\u5e94\u7740\u662f\u5728\u4e00\u4e2a\u5206\u5e03\u4e0a\u8bad\u7ec3\uff0c\u5728\u53e6\u4e00\u4e2a\u5206\u5e03\u4e0a\u6d4b\u8bd5\uff0c\u795e\u7ecf\u7f51\u7edc\u7684\u8bef\u5dee\u5c31\u4f1a\u6bd4\u4e4b\u524d\u5927\u5f97\u591a\uff0cargmax\u4e4b\u540e\u7684\u8bef\u5dee\u4e5f\u5c31\u4f1a\u6bd4\u4e4b\u524d\u5927\u5f97\u591a\u3002</p> <p>\u56e0\u6b64\uff0c\u73b0\u5728\u867d\u7136\u4f7f\u7528double Q learning\u53ef\u4ee5\u7f13\u89e3\u8fd9\u4e00\u95ee\u9898\uff0c\u4f46\u5e76\u4e0d\u80fd\u5b8c\u5168\u89e3\u51b3\u6839\u672c\u6027\u7684\uff0c\u7531\u4e8e\u4e24\u4e2a\u5206\u5e03\u4e0d\u4e00\u81f4\u6240\u9020\u6210\u7684\u8bef\u5dee\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e24\u4e2a\u5206\u5e03\u4e0d\u540c\u7684distribution shift\u95ee\u9898\uff0c\u6211\u4eec\u5fc5\u987b\u4f7f\u7528\u4e00\u4e9b\u65b0\u7684\u65b9\u6cd5\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap13/#importance_sampling_in_offline_rl","title":"Importance Sampling in Offline RL","text":"<p>\u4e00\u4e2a\u8bd5\u56fe\u89e3\u51b3distribution shift\u7684\u65b9\u6cd5\u662f\u4f7f\u7528importance sampling\u3002\u6211\u4eec\u7b80\u8981\u4ecb\u7ecd\u4e00\u4e0b\u8fd9\u4e00\u65b9\u6cd5\uff0c\u5b83\u89e3\u51b3\u4e86\u4e00\u4e9b\u95ee\u9898\uff0c\u4f46\u4e5f\u6709\u4e0d\u8db3\u3002\u6bd4\u5982\uff0c\u6211\u4eec\u5c31\u91c7\u7528policy gradients\u3002</p> <p>\u56de\u5fc6\u5728off-policy policy gradients\u4e2d\uff0c\u6211\u4eec\u7ed9\u51fa\u7684importance sampling\u7684\u516c\u5f0f\uff1a</p> \\[ \\nabla_\\theta J(\\theta)=\\mathbb{E}_{\\tau\\sim p_{\\pi_{\\beta}}(\\tau)}\\left[\\prod_{t=1}^T\\frac{{\\pi_\\theta}(a_t|s_t)}{{\\pi_{\\beta}}(a_t|s_t)} \\left(\\sum_{t=1}^T \\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\cdot \\hat{Q}_t(\\tau)\\right)\\right] \\] <p>\u548c\u4e4b\u524d\u4e00\u6837\uff0c\u6211\u4eec\u4e5f\u5e0c\u671b\u4f7f\u7528first-order approximation\uff0c\u4ee5\u907f\u514d\u8fde\u4e58\u79ef\u5e26\u6765\u7684\u68af\u5ea6\u7206\u70b8\u6216\u6d88\u5931\u7684\u95ee\u9898\u3002\u5728\u6570\u5b66\u4e0a\u53ef\u4ee5\u505a\u4e25\u683c\u7684\u6052\u7b49\u53d8\u5f62\uff0c\u7ed9\u51fa</p> \\[ \\nabla_\\theta J(\\theta)=\\sum_{t=1}^T\\mathbb{E}_{\\tau \\sim p_{\\beta}(\\tau)}\\left[\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\cdot \\prod_{t''=1}^{t-1}\\frac{{\\pi_\\theta}(a_{t''}|s_{t''})}{{\\pi_{\\beta}}(a_{t''}|s_{t''})}\\sum_{t'=t}^T\\left(\\gamma^{t'-t} r(s_{t'},a_{t'})\\prod_{t''=t}^{t'}\\frac{{\\pi_\\theta}(a_{t''}|s_{t''})}{{\\pi_{\\beta}}(a_{t''}|s_{t''})}\\right)\\right] \\] <p>\u6ce8\u610f\u4e24\u4e2aimportance sampling\u7684\u56e0\u5b50\uff1a\u7b2c\u4e00\u4e2a</p> \\[ \\prod_{t''=1}^{t-1}\\frac{{\\pi_\\theta}(a_{t''}|s_{t''})}{{\\pi_{\\beta}}(a_{t''}|s_{t''})} \\] <p>\u4ee3\u8868\u6309\u7167 \\(\\pi_\\theta\\) \uff0c\u5728 \\(t-1\\) \u6b65\u8d70\u5230 \\(s_t\\) \u7684\u6982\u7387 \\(p_{\\pi_\\theta}(s_t)\\) \u548c\u6309\u7167 \\(\\pi_\\beta\\) \uff0c\u5728 \\(t-1\\) \u6b65\u8d70\u5230 \\(s_t\\) \u7684\u6982\u7387 \\(p_{\\pi_\\beta}(s_t)\\) \u7684\u4e0d\u540c\u9020\u6210\u7684\u4fee\u6b63\u3002\u800c\u7b2c\u4e8c\u4e2a</p> \\[ \\prod_{t''=t}^{t'}\\frac{{\\pi_\\theta}(a_{t''}|s_{t''})}{{\\pi_{\\beta}}(a_{t''}|s_{t''})} \\] <p>\u4ee3\u8868\u540e\u9762\u7684 \\(\\hat{Q}\\) \u8868\u8fbe\u5f0f\u4e2d\uff0c\u56e0\u4e3a \\(\\pi_\\theta\\) \u548c \\(\\pi_\\beta\\) \u4e0d\u540c\u800c\u9020\u6210\u7684\u4fee\u6b63\u3002</p> <p>\u76f8\u6bd4\u4e8e\u7b2c\u4e00\u4e2a\u56e0\u5b50\uff0c\u7b2c\u4e8c\u4e2a\u56e0\u5b50\u5bf9\u68af\u5ea6\u7206\u70b8\u7684\u95ee\u9898\u8d21\u732e\u8fd8\u7b97\u5c0f\uff0c\u56e0\u4e3a\u53ea\u8981 \\(\\gamma\\) \u7565\u5c0f\uff0c\u5c31\u53ef\u4ee5\u907f\u514d\u68af\u5ea6\u7684\u7206\u70b8\u3002\u4f46\u662f\u7b2c\u4e00\u4e2a\u56e0\u5b50\u5c31\u6ca1\u529e\u6cd5\u4e86\u3002\u56de\u60f3\u4e00\u4e0b\uff0c\u539f\u6765\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5ba3\u79f0\u7b2c\u4e00\u4e2a\u56e0\u5b50\u53ef\u4ee5\u6254\u6389\uff1a\u4f46\u8fd9\u662f\u56e0\u4e3a\u5f53\u65f6\u5bf9\u4e8eoff-policy\u65b9\u6cd5\uff0c \\(p_{\\pi_\\theta}\\) \u548c \\(p_{\\pi_\\beta}\\) \u867d\u7136\u4e0d\u540c\u4f46\u4e5f\u6bd4\u8f83\u63a5\u8fd1\u3002\u800c\u73b0\u5728\uff0c\u6ca1\u6709\u4efb\u4f55\u9053\u7406\u4e8c\u8005\u662f\u63a5\u8fd1\u7684\uff0c\u56e0\u4e3a \\(\\pi_\\beta\\) \u662f\u91c7\u96c6\u6570\u636e\u7684\u90a3\u4e2a\u4eba\u968f\u4fbf\u9009\u7684\u3002</p> <p>\u56e0\u6b64\uff0c\u5728offline\u7684\u573a\u666f\u4e2d\uff0c\u6211\u4eec\u4e0d\u518d\u80fd\u53bb\u9664\u8fde\u4e58\u79ef\u7684\u5f71\u54cd\u3002\u5b9e\u9645\u4e0a\uff0c\u7406\u8bba\u4e0a\u8bc1\u660e\uff0c\u8981\u907f\u514d\u8fd9\u4e2a\u8fde\u4e58\u79ef\u5fc5\u987b\u4f7f\u7528value-based method\u3002</p> <p>\u4f46\u5373\u4f7f\u6709\u8fde\u4e58\u79ef\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7\u67d0\u4e9b\u529e\u6cd5\u6765\u907f\u514d\u4e4b\u524d\u6240\u8bf4\u7684\u68af\u5ea6\u7206\u70b8\u95ee\u9898\u3002\u4e0b\u9762\u5c31\u4ecb\u7ecd\u4e24\u79cd\u8fd9\u6837\u7684\u65b9\u6cd5\u3002</p> <p>\u4e3a\u4e86\u7b80\u5355\u8d77\u89c1\uff0c\u6211\u4eec\u53ea\u8003\u8651 OPE(Offline Policy Evaluation) \u95ee\u9898\uff0c\u4e5f\u5c31\u662f\u7ed9\u5b9a\u4e00\u4e2apolicy \\(\\pi\\) \uff0cOffline\u5730\uff08\u5373\u53ea\u5229\u7528\u7528 \\(\\pi_\\beta\\) \u91c7\u6837\u51fa\u7684\u6570\u636e\uff09\u7ed9\u51fa</p> \\[ V^{\\pi}(s_0)=\\mathbb{E}_{\\tau\\sim p_{\\pi}(\\tau|s_0)}\\left[\\sum_{t=0}^{T}\\gamma^t r(s_t,a_t)\\right] \\]"},{"location":"Online%20CS%20Courses/CS285/chap13/#doubly_robust_estimator","title":"Doubly Robust Estimator","text":"<p>Doubly Robust Estimator \u662f\u4e00\u4e2a\u7edf\u8ba1\u5b66\u4e2d\u7684\u6982\u5ff5\uff0c\u5927\u6982\u662f\u6307\u7ed9\u51fa\u4e00\u4e2a\u4f30\u8ba1\uff0c\u5176\u4e2d\u5305\u542b\u4e24\u4e2a\u62df\u5408\u7684\u51fd\u6570\uff08\u6bd4\u5982\u795e\u7ecf\u7f51\u7edc\uff09\u3002\u4e00\u65e6\u5176\u4e2d\u4e00\u4e2a\u62df\u5408\u7684\u51fd\u6570\u4e0d\u51c6\u786e\uff0c\u53e6\u4e00\u4e2a\u62df\u5408\u7684\u51fd\u6570\u53ef\u4ee5\u5f25\u8865\u8fd9\u4e00\u9519\u8bef\u3002</p> <p>\u5728\u8fdb\u5165\u7edf\u8ba1\u7684\u6982\u5ff5\u4e4b\u524d\uff0c\u6211\u4eec\u9996\u5148\u63a8\u5bfc\u4e00\u4e2a\u9012\u63a8\u7684\u5173\u7cfb\u3002\u5bf9\u4e8e\u4e00\u6761\u8f68\u8ff9\uff0c\u4ece\u5355\u91c7\u6837\u7684\u89d2\u5ea6\u6765\u770b\uff0c</p> \\[ V^{\\pi}(s_0)=\\sum_{t=0}^{T}\\gamma^t  r(s_t,a_t)\\cdot \\prod_{t'=0}^t\\frac{\\pi(a_{t'}|s_{t'})}{\\pi_\\beta(a_{t'}|s_{t'})} \\] <p>\u7136\u540e\uff0c\u5982\u679c\u4ee4\u6570\u5217</p> \\[ \\bar{V}^{T-t}=\\frac{\\pi(a_t|s_t)}{\\pi_\\beta(a_t|s_t)}(r(s_t,a_t)+\\gamma \\bar{V}^{T-t-1}) \\] <p>\u4e14 \\(\\bar{V}^{-1}=0\\) \uff0c\u90a3\u4e48\u5c31\u6709 \\(V^{\\pi}(s_0)=\\bar{V}^{T}\\) \u3002</p> <p>Doubly Robust Estimator\u5219\u662f\u4ece\u9012\u63a8\u51fa\u53d1\uff0c\u7ed9\u51fa\u4e00\u4e2a\u8fd1\u4f3c\u7684\u65b9\u5f0f\uff1a</p> \\[ \\bar{V}^{T-t}=\\hat{V}(s_t)+\\frac{\\pi(a_t|s_t)}{\\pi_\\beta(a_t|s_t)}(r(s_t,a_t)+\\gamma \\bar{V}^{T-t-1}-\\hat{Q}(s_t,a_t)) \\] <p>\u5176\u4e2d \\(\\hat{V}(s_t)\\) \u548c \\(\\hat{Q}(s_t,a_t)\\) \u5c31\u662f\u7528\u6765\u8fd1\u4f3c\u7684\u51fd\u6570\u3002\u8fd9\u4e2a\u516c\u5f0f\u7684\u610f\u4e49\u5728\u4e8e\uff0c\u5982\u679c \\(r(s_t,a_t)+\\gamma \\bar{V}^{T-t-1}-\\hat{Q}(s_t,a_t)\\) \u5c31\u662f0\uff0c\u90a3\u4e48\u540e\u9762\u7684\u8fde\u4e58\u79ef\u8d21\u732e\u4f1a\u975e\u5e38\u5c0f\uff1b\u800c\u5373\u4f7f\u540e\u9762\u4e0d\u662f0,\u4e5f\u90e8\u5206\u5730\u7f13\u89e3\u4e86\u8fde\u4e58\u79ef\u7684\u95ee\u9898\u3002Doubly Robust\u7684\u5e2e\u52a9\u662f\u4f7f\u5f97\u8fd9\u4e00\u9012\u63a8\u8868\u8fbe\u5c3d\u91cf\u63a5\u8fd1\u4e8e\u539f\u6765\u4e25\u683c\u7684\u516c\u5f0f\u3002</p> <p>\u5f53\u7136\uff0c\u5177\u4f53\u7684\u7ec6\u8282\u4e5f\u4f1a\u6bd4\u8f83\u590d\u6742\uff0c\u53ef\u4ee5\u53c2\u8003\u8fd9\u91cc\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap13/#marginalized_importance_sampling","title":"Marginalized Importance Sampling","text":"<p>\u8fd9\u4e00\u601d\u60f3\u66f4\u52a0\u76f4\u63a5\uff1a\u6211\u4eec\u8003\u8651\u4e00\u4e2a\u5168\u90e8\uff08\u52a0\u6743\uff09marginalize\u6389\u7684\u5206\u5e03 \\(p_{\\pi}(s,a)\\) \u548c \\(p_{\\pi_\\beta}(s,a)\\) \uff0c\u4e5f\u5c31\u662f</p> \\[ p_{\\pi}(s,a)=(1-\\gamma)\\sum_{t=0}^T\\gamma^t p_{\\pi}(s_t=s,a_t=a) \\] <p>\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8fd1\u4f3c\u5730\u6709</p> \\[ V^{\\pi}(s_0)=\\mathbb{E}_{s,a\\sim p_{\\pi_\\beta}(s,a)}\\left[\\frac{p_{\\pi}(a|s)}{p_{\\pi_\\beta}(a|s)}r(s,a)\\right] \\] <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u51fa\u4e00\u4e2a\u5173\u4e8e \\(w(s,a):=\\frac{p_{\\pi}(a|s)}{p_{\\pi_\\beta}(a|s)}\\) \u7684\u9012\u63a8\u5f0f\uff1a\u9996\u5148\uff0c\u8003\u8651\u6700\u540e\u4e00\u6b65\uff0c\u5f97\u5230</p> \\[ p_{\\pi}(s,a)=(1-\\gamma)p_0(s)\\pi(a|s)+\\gamma\\sum_{s',a'}p(s|s',a')\\pi(a|s)p_{\\pi}(s',a') \\] <p>\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u81ea\u7136\u6709</p> \\[ w(s,a)p_{\\pi_\\beta}(s,a)=(1-\\gamma)p_0(s)\\pi(a|s)+\\gamma\\sum_{s',a'}p(s|s',a')\\pi(a|s)w(s',a')p_{\\pi_\\beta}(s',a') \\] <p>\u5b9e\u9a8c\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u5de6\u8fb9\u548c\u53f3\u8fb9\u653e\u5165\u67d0\u4e2adivergence\uff0c\u7136\u540e\u91c7\u6837\u4f30\u8ba1\uff08\u53c2\u89c1\u539f\u8bba\u6587\uff09\uff0c\u5e76\u68af\u5ea6\u4e0b\u964d\u7ed9\u51fa\u6700\u597d\u7684 \\(w\\) \u3002\u6709\u4e86 \\(w\\) \uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7acb\u523b\u4f30\u8ba1\u51fa \\(V^{\\pi}(s_0)\\) \uff0c\u4ece\u800c\u5728Offline\u7684\u60c5\u51b5\u4e0b\u5b8c\u6210policy evaluation\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap13/#offline_rl_old_methods","title":"Offline RL: Old Methods","text":"<p>\u6211\u4eec\u5728\u8fd9\u4e00\u8282\u4ecb\u7ecd\u4e00\u4e9b\u65e9\u671f\u7684Offline RL\u65b9\u6cd5\uff0c\u5b83\u4eec\u867d\u7136\u5728\u5b9e\u9645\u4e2d\u4e0d\u592a\u5e38\u7528\uff0c\u4f46\u662f\u5bf9\u4e8e\u7406\u89e3Offline RL\u7684\u6982\u5ff5\u8fd8\u662f\u5f88\u6709\u5e2e\u52a9\u7684\u3002\u5728\u8fd9\u4e9b\u65e9\u671f\u65b9\u6cd5\u4e2d\uff0c\u6ca1\u6709\u795e\u7ecf\u7f51\u7edc\uff0c\u4e00\u5207\u90fd\u662f\u901a\u8fc7\u7ebf\u6027\u56de\u5f52\u7684\u65b9\u5f0f\u8fdb\u884c\u8fd1\u4f3c\u3002</p> <p>\u503c\u5f97\u4e00\u63d0\u5730\uff0c\u5728\u4ee5\u7ebf\u6027\u56de\u5f52\u4e3a\u57fa\u7840\u7684Offline RL\u7814\u7a76\u4e2d\uff0cdistribution shift\u95ee\u9898\u5e76\u4e0d\u662f\u5f88\u7a81\u51fa\u3002\u4f46\u8fd9\u79cd\u65b9\u6cd5\u4e5f\u6ce8\u5b9a\u65e0\u6cd5\u5e94\u7528\u5230\u5982\u4eca\u7684\u590d\u6742\u73af\u5883\u4e2d\uff0c\u800c\u4e14\u66f4\u662f\u6ca1\u6709\u89e3\u51b3distribution shift\u7684\u95ee\u9898\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap13/#linear_model","title":"Linear Model","text":"<p>\u6211\u4eec\u628a\u603b\u5171\u7684 \\(|S|\\times |A|\\) \u4e2a(state,action) pair\u901a\u8fc7\u67d0\u79cd\u4e13\u5bb6\u77e5\u8bc6encode\u5230\u4e00\u4e2a \\(K\\) \u7ef4\u5411\u91cf\u4e2d\u3002\u8fd9\u4e2a\u56fa\u5b9a\u7684 \\((|S|\\cdot|A|)\\times K\\) \u77e9\u9635\u79f0\u4e3afeature matrix\uff0c\u8bb0\u4e3a \\(\\Phi\\) \u3002\u7136\u540e\uff0c\u6211\u4eec\u4ee5\u540e\u4e0d\u518d\u7814\u7a76\u6bcf\u4e2astate\u6216action\u672c\u8eab\uff0c\u53ea\u7814\u7a76\u8fd9\u4e2a\u5411\u91cf\u3002\u6211\u4eec\u9700\u8981\uff1a</p> <ul> <li>reward model\uff1a\u7ed9\u5b9a\u4e00\u4e2a \\(K\\) \u7ef4\u5411\u91cf\uff0c\u7528\u4e00\u4e2a\u7ebf\u6027\u51fd\u6570(\u5bf9\u5e94\u7684\u77e9\u9635\u4e3a \\(w_r\\) )\u8f93\u51fareward\u3002\u8fd9\u4e00\u8fc7\u7a0b\u5e0c\u671b \\(\\text{OneHot}(s,a)\\Phi w_r\\approx r(s,a)\\) \u3002</li> <li>transition model\uff1a\u7ed9\u5b9a\u4e00\u4e2a \\(K\\) \u7ef4\u5411\u91cf\uff0c\u7528\u4e00\u4e2a\u7ebf\u6027\u51fd\u6570(\u5bf9\u5e94\u7684\u77e9\u9635\u4e3a \\(P_\\phi\\) )\u8f93\u51fa\u4e0b\u4e00\u4e2astate\u7684\u5411\u91cf\u3002\u5047\u8bbe\u5728(state,action)\u5bf9\u4e0a\u9762\u7684transition\u662f \\(P^\\pi\\) \uff08\u6ce8\u610f\uff0c\u8fd9\u548cpolicy\u6709\u5173\uff09\uff0c\u90a3\u4e48\u6211\u4eec\u5e0c\u671b \\(\\text{OneHot}(s,a)\\Phi P_\\phi\\approx  \\text{OneHot}(s,a) P^\\pi\\Phi\\) \uff0c\u4e5f\u5c31\u662f \\(\\Phi P_{\\phi}=P^{\\pi}\\Phi\\) \u3002</li> <li>(Q) value model\uff1a\u7ed9\u5b9a\u4e00\u4e2a \\(K\\) \u7ef4\u5411\u91cf\uff0c(\u5bf9\u5e94\u7684\u77e9\u9635\u4e3a \\(w_V\\) )\u8f93\u51favalue function\u3002\u6ce8\u610f\u56e0\u4e3a\u6211\u4eec\u4e00\u5f00\u59cb\u4e0d\u77e5\u9053value function\uff0c\u6240\u4ee5\u8fd9\u4e00\u8fc7\u7a0b\u5e76\u4e0d\u662f\u7b80\u5355\u7684\u7ebf\u6027\u56de\u5f52\uff0c\u800c\u662f\u9700\u8981\u6c42\u89e3\u9012\u63a8\u3002\u8fd9\u4e00\u8fc7\u7a0b\u5e0c\u671b \\(\\text{OneHot}(s,a)\\Phi w_q\\approx Q^\\pi(s,a)\\) \u3002</li> </ul> <p>\u6709\u4e86\u5b83\u4eec\uff0c\u6211\u95e8\u5c31\u53ef\u4ee5\u505aOPE(Offline Policy Evaluation)\u4e86\u3002\u5177\u4f53\u5730\uff0c\u6211\u4eec\u5148\u7ed9\u51fa\u77e9\u9635\u5f62\u5f0f\u7684\u9012\u63a8\uff1a</p> \\[ Q^{\\pi}=r+\\gamma P^{\\pi}Q^{\\pi} \\] <p>\u5176\u4e2d\uff0c \\(r\\) \u4ee3\u8868\u628a\u6bcf\u4e00\u4e2a \\((s,a)\\) \u7684reward\u62fc\u8d77\u6765\u7684\u5217\u5411\u91cf\u3002\u867d\u7136\u6211\u4eec\u53ef\u4ee5\u89e3\u51fa</p> \\[ Q^{\\pi}=(1-\\gamma P^{\\pi})^{-1}r \\] <p>\u4f46\u8fd9\u6837\u7684\u5f62\u5f0f\u5bf9\u5e94\u7684\u8ba1\u7b97\u91cf\u6bd4\u8f83\u5927\uff0c\u56e0\u6b64\u6211\u4eec\u5e0c\u671b\u4f7f\u7528feature space\u5c06\u5176\u538b\u7f29\u5230\u6bd4\u8f83\u5c0f\u7684\u7ef4\u5ea6\u3002\u4e5f\u5c31\u662f</p> \\[ \\Phi w_q\\approx \\Phi w_r+\\gamma \\Phi P_{\\phi} w_q \\] <p>\u6b64\u65f6\uff0c\u6211\u4eec\u5c31\u8fd1\u4f3c\u5730\u6709</p> \\[ w_q\\approx (1-\\gamma P_{\\phi})^{-1}w_r \\] <p>\u518d\u5229\u7528\u7ebf\u6027\u56de\u5f52\u7684\u6700\u4f18\u89e3</p> \\[ P_{\\phi}=(\\Phi^T\\Phi)^{-1}\\Phi^T P^{\\pi}\\Phi,\\quad w_r=(\\Phi^T\\Phi)^{-1}\\Phi^T r \\] <p>\u4ee3\u5165\uff0c\u6d88\u53bb\u5f15\u5165\u7684\u4e2d\u95f4\u53d8\u91cf \\(P_{\\phi}\\) \u548c \\(w_r\\) \uff0c\u5c31\u6709</p> \\[ w_q\\approx (1-\\gamma (\\Phi^T\\Phi)^{-1}\\Phi^T P^{\\pi}\\Phi)^{-1}(\\Phi^T\\Phi)^{-1}\\Phi^T r=(\\Phi^T\\Phi-\\gamma \\Phi^T P^{\\pi}\\Phi)^{-1}\\Phi^T r \\] <p>\u8fd9\u4e00\u8868\u8fbe\u5f0f\u79f0\u4e3aQ function\u7684least-square temporal difference (LSTD)\u3002Temporal Distance (TD)\u6307\u7684\u5c31\u662fbellman equation\u7684\u8bef\u5dee\u9879\uff0c\u800cleast-square\u5c31\u662f\u6307\u6211\u4eec\u4f7f\u7528\u4e86\u7ebf\u6027\u56de\u5f52\u7684\u65b9\u6cd5\u3002\u5229\u7528\u8fd9\u4e00\u8868\u8fbe\u5f0f\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6839\u636etransition\u548creward\u7684\u6570\u636e\uff08\u8fd9\u7531\u73af\u5883\u63d0\u4f9b\uff09\u6765\u4f30\u8ba1q value function\uff0c\u4ece\u800c\u5b9e\u73b0policy\u7684offline evaluation\u3002</p> <p>\u5f53\u7136\uff0c\u5982\u679c\u6211\u4eec\u4e0d\u628aaction embedd\u8fdb\u5165feature matrix\uff0c\u90a3\u4e48\u4e5f\u53ef\u4ee5\u5f97\u5230\u6b63\u7edf\u7684LSTD\uff0c\u4e5f\u5c31\u662f\u4f30\u8ba1value function\u3002\u8fd9\u4e00\u65b9\u6cd5\u76f8\u6bd4\u4e8e\u4e0a\u9762\u6211\u4eec\u4ecb\u7ecd\u7684\u57fa\u4e8eQ function\u7684\u65b9\u6cd5\u6709\u8bb8\u591a\u7f3a\u9677\uff0c\u6211\u4eec\u5c31\u4e0d\u8be6\u7ec6\u5c55\u5f00\u4e86\u3002\u4e4b\u540e\u6211\u4eec\u53ea\u8003\u8651\u8fd9\u79cd\u57fa\u4e8eQ function\u7684\u65b9\u6cd5\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap13/#case_of_infinite_state-action_space","title":"Case of Infinite State-Action Space","text":"<p>\u6211\u4eec\u4e0a\u9762\u7684\u65b9\u6cd5\u57fa\u4e8e\u628a\u4e00\u5207\u7684(state,action) pair\u901a\u8fc7\u4e00\u4e2afeature matrix\u6620\u5c04\u5230\u4e00\u4e2a\u6709\u9650\u7ef4\u7684\u5411\u91cf\u7a7a\u95f4\u4e2d\u3002\u5982\u679c\u6211\u4eec\u7684state\u548caction\u662f\u8fde\u7eed\u7684\uff0c\u90a3\u4e48\u8fd9\u4e00\u65b9\u6cd5\u5c31\u4e0d\u518d\u9002\u7528\u3002\u4f46\u7a0d\u5fae\u505a\u4e00\u4fee\u6539\u5373\u53ef\uff1a\u6211\u4eec\u7684 \\(\\Phi\\) \u4e0d\u518d\u662f\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u53ef\u80fd\u7684(state,action)\u7ed9\u51fa\u4e00\u4e2a\u5411\u91cf\uff0c\u800c\u662f\u5bf9\u6570\u636e\u96c6\u4e2d\u7684(state,action)\u7ed9\u51fa\u5411\u91cf\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u5bf9\u4e8e\u522b\u7684\u65b9\u9762\uff0c\u6211\u4eec\u53ea\u9700\u8981\u518d\u505a\u4e00\u4e9b\u5f88\u5c0f\u7684\u4fee\u6539\u5373\u53ef\u3002\u4e0d\u59a8\u5047\u8bbe\u6211\u4eec\u53ea\u9700\u8981\u5bf9\u6570\u636e\u96c6\u5185\u90e8\u7684 \\(s\\) \uff08\u6216\u8005 \\((s,a)\\) \uff09\u8ba1\u7b97value\uff08\u5bf9\u4e8e\u6570\u636e\u96c6\u5916\u90e8\u7684 \\(s\\) \uff0c\u6211\u4eec\u786e\u5b9e\u65e0\u6cd5\u4fdd\u8bc1\u4efb\u4f55\u4e1c\u897f\uff09\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u8fd8\u53ef\u4ee5\u4f7f\u7528\u524d\u9762\u5f97\u5230\u7684</p> \\[ w_q=(\\Phi^T\\Phi-\\gamma \\Phi^T P^{\\pi}\\Phi)^{-1}\\Phi^T r \\] <p>\u8fdb\u884c\u8ba1\u7b97\u3002\u4f46\u7565\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u6211\u4eec\u5e76\u4e0d\u80fd\u5f97\u5230\u771f\u6b63\u7684transition matrix \\(P^{\\pi}\\) \uff0c\u800c\u53ea\u80fd\u5f97\u5230\u5728\u6570\u636e\u96c6\u4e2d\u7684transition matrix\u3002\u4e0d\u8fc7\u8fd9\u4e5f\u5bb9\u6613\u89e3\u51b3\uff0c\u6ce8\u610f\u5230</p> \\[ (P^{\\pi}\\Phi)(s,a)=\\sum_{s',a'}P^{\\pi}(s',a'|s,a)\\cdot \\Phi(s',a')\\approx \\mathbb{E}_{s',a'\\sim P^{\\pi}(\\cdot|s,a)}[ \\Phi(s',a')] \\] <p>\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5355\u91c7\u6837\u6765\u4f30\u8ba1\u8fd9\u4e00\u8868\u8fbe\u5f0f\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u6570\u636e\u96c6\u7684\u4e00\u7ec4 \\((s,a,s')\\) \uff0c\u53ef\u4ee5\u8fd1\u4f3c\u5730\u6709</p> \\[ (P^{\\pi}\\Phi)(s,a)\\approx \\Phi(s',a') \\] <p>\u5176\u4e2d\uff0c \\(a'\\) \u5e94\u8be5\u4ecepolicy \\(\\pi\\) \u4e2d\u91c7\u6837\u3002\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u5b8c\u5168\u6309\u7167 \\(w_q\\) \u7684\u8868\u8fbe\u5f0f\u8fdb\u884c\u8ba1\u7b97\uff0c\u552f\u4e00\u7684\u8bef\u5dee\u6765\u81ea\u4e8e\u91c7\u6837\u3002</p> <p>\u8fd9\u91cc\u53ef\u80fd\u7684\u4e00\u4e2a\u8bef\u89e3\uff1a \\(\\Phi\\) \u4e0d\u662f\u4e00\u4e2a\u201c\u5b57\u5178\u201d\uff0c\u8bb0\u5f55\u5927\u91cf(state,action)\u5bf9\u5e94\u7684feature\uff1b\u800c\u662f\u8bf4\uff0c \\(\\Phi(s,a)\\) \u5bf9\u4e8e\u4efb\u610f\u7684 \\((s,a)\\) \u90fd\u662f\u53ef\u4ee5\u76f4\u63a5\u8ba1\u7b97\u7684\uff0c\u56e0\u4e3afeature\u662f\u4e13\u5bb6\u77e5\u8bc6\u6216\u8005\u4e00\u4e2apretrain\u597d\u7684\u795e\u7ecf\u7f51\u7edc\u7ed9\u51fa\u7684\u3002\u53ea\u4e0d\u8fc7\uff0c\u5728\u63a8\u5bfc\u4e2d\uff0c\u4e3a\u4e86\u907f\u514d \\(\\Phi\\) \u662f\u65e0\u7a77\u7ef4\u8fd9\u4e00\u56f0\u96be\uff0c\u6211\u4eec\u53ea\u53d6\u6570\u636e\u96c6\u4e2d\u7684feature\u4f5c\u4e3a \\(\\Phi\\) \u3002</p> <p>\u56e0\u6b64\uff0c\u867d\u7136\u4ece \\(\\pi\\) \u4e2d\u91c7\u6837\u5f97\u5230\u7684 \\(a'\\) \u4e0d\u4e00\u5b9a\u4f7f\u5f97 \\((s',a')\\) \u843d\u5165offline training\u7684\u6570\u636e\u96c6\u4e2d\uff0c\u4f46\u6211\u4eec\u4f9d\u7136\u53ef\u4ee5\u8ba1\u7b97 \\(\\Phi(s',a')\\) \u3002</p> <p>\u66f4\u8fdb\u4e00\u6b65\u5730\uff0c\u6211\u4eec\u65e2\u7136\u53ef\u4ee5\u5b8c\u6210policy\u7684\u8bc4\u4f30\uff0c\u6211\u4eec\u4e5f\u5c31\u5f88\u5bb9\u6613\u8fdb\u884coffline policy improvement\u3002\u8fd9\u6837\u7684\u65b9\u6cd5\u79f0\u4e3aLSPI(Least Square Policy Iteration)\u3002\u5176\u65b9\u6cd5\u4e3a\uff1a</p> <p>LSPI Algorithm</p> <p>\u91cd\u590d\uff1a</p> <ol> <li>\u5229\u7528\u5f53\u524d\u7684policy\u548c\u56fa\u5b9a\u4e0d\u52a8\u7684\u6570\u636e\u96c6\u8ba1\u7b97 \\(w_q=(\\Phi^T\\Phi-\\gamma \\Phi^T \\Phi')^{-1}\\Phi^T r\\) \uff0c\u5176\u4e2d \\(\\Phi'\\) \u7684\u6784\u9020\u65b9\u5f0f\u662f\uff1a\u5982\u679c \\(\\Phi\\) \u7684\u67d0\u4e00\u884c\u5bf9\u5e94\u7740 \\((s,a)\\) \u7684feature\uff0c\u90a3\u4e48 \\(\\Phi'\\) \u7684\u90a3\u4e00\u884c\u5c31\u5bf9\u5e94\u7740 \\((s',a')\\) \u7684feature\u3002\uff08\u6bcf\u6b21\u7b2c\u4e8c\u6b65\u66f4\u6362 \\(\\pi\\) \u4e4b\u540e\uff0c\u90fd\u8981\u91cd\u65b0\u8ba1\u7b97\u4e00\u6b21 \\(\\Phi'\\) \u3002\uff09</li> <li>\u5229\u7528 \\(w_q\\) \uff0c\u66f4\u65b0\uff1a \\(\\pi(s)\\leftarrow \\arg\\max_a [\\Phi(s,a)w_Q]\\)</li> </ol> <p>\u8fd9\u5c31\u4ecb\u7ecd\u5b8c\u4e86\u65e9\u671f\u7684Offline RL\u65b9\u6cd5\u3002\u5f53\u7136\uff0c\u8fd8\u662f\u5982\u524d\u9762\u6240\u8bf4\uff0c\u5b83\u4eec\u65e0\u6cd5\u4ece\u6839\u672c\u4e0a\u89e3\u51b3distribution shift\u7684\u95ee\u9898\u3002\u5982\u4f55\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\uff0c\u6211\u4eec\u5c06\u5728\u4e0b\u4e00\u8282\u8ba8\u8bba\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap13/#reference_papers","title":"Reference Papers","text":"<ol> <li>Offline Reinforcement Learning: Tutorial, Review, and Perspectives on Open Problems\uff08\u5bf9Offline RL\u7684\u4e00\u4e2a\u5168\u9762\u7684\u4ecb\u7ecd\uff09</li> <li>Stabilizing Off-Policy Q-Learning via Bootstrapping Error Reduction\uff08\u89e3\u51b3distribution shift\u95ee\u9898\uff09</li> <li>Doubly robust off-policy value evaluation for reinforcement learning\uff08Doubly Robust Estimator\uff09</li> <li>Consistent on-line off-policy evaluation\uff08Marginalized Importance Sampling\uff09</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap14/","title":"Offline Reinforcement Learning 2: Addressing Distribution Shift","text":"<p>\u5c31\u5982\u6211\u4eec\u4e4b\u524d\u6240\u8bf4\uff0cdistribution shift\u7684\u95ee\u9898\u662foffline RL\u4e2d\u6700\u5927\u7684\u6311\u6218\u4e4b\u4e00\u3002\u4e4b\u524d\u7ed9\u51fa\u7684\u65b9\u6cd5\u90fd\u4e0d\u591f\u540a\u6253\uff0c\u800c\u672c\u8bb2\u4ecb\u7ecd\u7684\u65b9\u6cd5\u90fd\u662f\u6bd4\u8f83\u524d\u6cbf\u7684\uff0c\u5728\u8fd9\u65b9\u9762\u505a\u7684\u5f88\u597d\u7684\u4e00\u6279\u7b97\u6cd5\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap14/#introduction_starting_from_a_naive_method","title":"Introduction: Starting from a Naive Method","text":"<p>\u6211\u4eec\u5148\u4ece\u6700\u7b80\u5355\u7684\u601d\u8def\u51fa\u53d1\u3002\u8fd8\u8bb0\u5f97\uff0c\u6211\u4eec\u7684\u95ee\u9898\u662f\u5728update\u8fc7\u7a0b</p> \\[ L_Q=\\mathbb{E}_{s,a,s'\\sim \\pi_{\\beta}}\\left[(Q(s,a)-(r(s,a)+\\gamma \\mathbb{E}_{a'\\sim \\pi(\\cdot|s')}[Q(s',a')]))^2\\right] \\] \\[ \\pi\\leftarrow \\arg\\max_{\\pi}\\mathbb{E}_{s\\sim \\pi_\\beta}\\left[\\mathbb{E}_{a\\sim \\pi(\\cdot|s)}[Q(s,a)]\\right] \\] <p>\u4e2d\uff0c\u56e0\u4e3a \\(\\pi\\) \u548c \\(\\pi_\\beta\\) \u76f8\u5dee\u8fc7\u5927\uff0c\u6240\u4ee5\u5f88\u96be\u4fdd\u8bc1 \\(Q\\) \u503c\u7684\u51c6\u786e\u6027\u3002\u4e00\u4e2a\u76f4\u63a5\u7684\u60f3\u6cd5\u4fbf\u662f\uff0c\u6211\u4eec\u4e0d\u5982\u89c4\u5b9a \\(\\pi\\) \u548c \\(\\pi_\\beta\\) \u4e0d\u80fd\u5dee\u592a\u8fdc\uff1f\u6bd4\u5982\uff0c\u4ee4</p> \\[ \\text{KL}(\\pi||\\pi_\\beta)\\le \\epsilon \\] <p>\u7136\u540e\u5728\u8fd9\u4e00\u7ea6\u675f\u4e0b\u505a\u524d\u9762\u7684\u4f18\u5316\u3002</p> <p>\u629b\u5f00\u5b9e\u73b0\u65b9\u6cd5\u4e0d\u8c08\uff0c\u4eba\u4eec\u4e5f\u8981\u57cb\u6028\u8fd9\u4e00\u65b9\u6cd5\u4e0d\u591f\u597d\uff1a - \u4e00\u65b9\u9762\uff0c\u8fd9\u4e00\u65b9\u6cd5\u592a\u4fdd\u5b88\uff0c\u4ee5\u81f3\u4e8e\u5f88\u96be\u5b66\u5230\u6bd4\u8f83\u597d\u7684 \\(\\pi\\) \u3002\u6bd4\u5982\u8bf4\uff0c \\(\\pi_\\beta\\) \u672c\u8eab\u6bd4\u8f83\u5dee\uff0c\u90a3\u4e48 \\(\\pi\\) \u5c31\u7b97\u518d\u597d\u4e5f\u88ab\u7ea6\u675f\u6240\u9650\u5236\u4e86\u4e0a\u754c\u3002 - \u53e6\u4e00\u65b9\u9762\uff0c\u8fd9\u4e00\u65b9\u6cd5\u7684\u4fdd\u5b88\u7a0b\u5ea6\u8fd8\u4e0d\u591f\u3002\u626a\u5fc3\u81ea\u95ee\uff0cKL divergence\u5c0f\uff0c\u4e00\u5b9a\u4ee3\u8868\u7740\u4f30\u8ba1\u51c6\u786e\u5417\uff1f\u5c31\u5982\u540c\u518d\u7cbe\u786e\u7684\u6a21\u578b\u5728\u8bad\u7ec3\u96c6\u4e0a\u4e5f\u6709\u9519\u8bef\uff0c\u5373\u4f7f\u6211\u4eec\u628a\u4e24\u4e2a\u5206\u5e03\u505a\u5230KL divergence\u4e3a0\uff0c\u4e5f\u4ecd\u7136\u4f1a\u6709\u9519\u8bef\u7684Q value\u7684\u5b58\u5728\u3002\u800c\u8fd9\u6837\u7684\u9519\u8bef\u5c31\u50cf\u6eda\u96ea\u7403\uff0c\u4f7f\u5f97Q value\u8d8a\u6765\u8d8a\u5927\u3002</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u53d1\u73b0\uff0cKL divergence\u5e76\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\u523b\u753b\u8fd9\u4e24\u4e2a\u5206\u5e03\u8ddd\u79bb\u7684\u65b9\u5f0f\u3002\u76f8\u53cd\uff0c\u6211\u4eec\u5e0c\u671b\u7684\u5b9e\u9645\u4e0a\u662f\u6240\u8c13support constraint\uff1a</p> \\[ \\pi(a|s)&gt; 0 \\text{ only when } \\pi_\\beta(a|s)\\ge \\epsilon \\] <p>\u8fd9\u4e00\u7ea6\u675f\u660e\u663e\u5730\u66f4\u52a0\u5408\u7406\uff0c\u56e0\u4e3a\u5b83\u53cd\u6620\u4e86\u6211\u4eec\u7684\u771f\u5b9e\u9700\u8981\u2014\u2014\u6211\u4eec\u4e0d\u5e0c\u671bpolicy\u901a\u8fc7\u505a\u90a3\u4e9b\u6570\u636e\u91cc\u9762\u6ca1\u6709\u7684action\u6765exploit \\(Q\\) \u7f51\u7edc\u7684\u6f0f\u6d1e\u3002</p> <p>\u603b\u800c\u8a00\u4e4b\uff0c\u5bf9\u4e8e\u7ea6\u675f\u800c\u8a00\uff0cKL divergence\u4e0d\u591f\u5408\u7406\uff0c\u800csupport constraint\u867d\u7136\u5408\u7406\u4f46\u66f4\u50cf\u4e00\u79cd\u7406\u8bba\u4e0a\u7684\u7ed3\u6784\uff0c\u5f88\u96be\u88ab\u5b9e\u73b0\u3002\u5bf9\u4e8e\u771f\u5b9e\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u9700\u8981\u5728\u8fd9\u4e24\u8005\u4e4b\u95f4\u53d6\u5f97\u5e73\u8861\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap14/#first_trial_using_kl_divergence","title":"First Trial: Using KL Divergence","text":"<p>\u6211\u4eec\u5148\u4ecb\u7ecd\u4f7f\u7528KL divergence\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u53ea\u9700\u8981\u66f4\u6539\u4e00\u4e0bpolicy\u7684update rule\uff1a</p> \\[ \\pi\\leftarrow \\arg\\max_{\\pi}\\left(\\mathbb{E}_{s\\sim \\pi_\\beta}\\left[\\mathbb{E}_{a\\sim \\pi(\\cdot|s)}[Q(s,a)]\\right]-\\lambda \\mathbb{E}_{s\\sim \\pi_\\beta}\\left[\\sum_a \\pi(a|s)\\log \\frac{\\pi(a|s)}{\\pi_\\beta(a|s)}\\right]\\right) \\] <p>\u4e5f\u5c31\u662f</p> \\[ \\pi\\leftarrow \\arg\\max_{\\pi}\\left(\\mathbb{E}_{s\\sim \\pi_\\beta}\\left[\\mathbb{E}_{a\\sim \\pi(\\cdot|s)}[Q(s,a)+\\lambda \\log \\pi_\\beta(a|s)]+\\lambda \\mathcal{H}(\\pi(\\cdot|s))\\right]\\right) \\] <p>\u4e00\u79cd\u65b9\u6cd5\u662f\u76f4\u63a5\u5bf9\u8fd9\u4e00\u76ee\u6807\u8fdb\u884c\u4f18\u5316\u3002\u4f46\u6211\u4eec\u5b9e\u9645\u4e0a\u8fd8\u53ef\u4ee5\u518d\u8fdb\u4e00\u6b65\uff0c\u6c42\u5bfc\u7ed9\u51fa\u7406\u8bba\u6700\u4f18\u7684 \\(\\pi^\\star\\) \uff08\u867d\u7136\u7531\u4e8e\u795e\u7ecf\u7f51\u7edc\u8868\u73b0\u529b\u95ee\u9898\uff0c\u8fd9\u4e00 \\(\\pi^\\star\\) \u4e0d\u4e00\u5b9a\u53ef\u4ee5\u88ab\u5b9e\u73b0\uff09\uff1a</p> \\[ Q(s,a)-\\lambda (\\log \\pi^\\star(a|s)+1-\\log \\pi_\\beta(a|s))-\\mu=0 \\] <p>\uff08 \\(\\mu\\) \u4e3a\u4e00\u5e38\u6570\uff09\u4e5f\u5c31\u662f\u8bf4</p> \\[ \\pi^\\star(a|s)=\\frac{1}{Z(s)}\\pi_\\beta(a|s)\\exp\\left(\\frac{A(s,a)}{\\lambda}\\right) \\] <p>\u5176\u4e2d\uff0c \\(A(s,a)\\) \u53ef\u4ee5\u662f \\(Q(s,a)\\) \u51cf\u53bb\u4efb\u4f55\u4e00\u4e2a\u4e0d\u4f9d\u8d56action\u7684\u503c\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u4fee\u6539\u8bad\u7ec3\u76ee\u6807\uff0c\u8fd9\u4e00\u65b0\u7684\u8bad\u7ec3\u76ee\u6807\u7684\u6700\u4f18\u503c\u4ecd\u4e3a \\(\\pi^{\\star}\\) \uff1a</p> \\[ L_{\\text{AWAC}}(\\theta)=\\mathbb{E}_{s,a\\sim \\pi_\\beta}\\left[(\\log \\pi_\\theta(s|a))\\cdot\\exp\\left(\\frac{A(s,a)}{\\lambda}\\right)\\right] \\] <p>\u8fd9\u4e00\u65b9\u6cd5\u957f\u5f97\u5f88\u50cfactor critic\uff0c\u4f46\u52a0\u4e86\u6743\uff0c\u56e0\u6b64\u88ab\u79f0\u4e3aAWAC(Advantage-Weighted Actor-Critic)\uff0c\u5176\u4e2d\u7684 \\(\\lambda\\) \u88ab\u79f0\u4e3atemperature\u3002 \\(\\lambda\\) \u4f5c\u4e3a\u62c9\u683c\u6717\u65e5\u4e58\u5b50\uff0c\u53ef\u4ee5\u63a7\u5236 \\(\\pi\\) \u548c \\(\\pi_\\beta\\) \u7684\u8ddd\u79bb\uff1a\u5f53 \\(\\lambda\\) \u8d8b\u4e8e\u65e0\u7a77\uff0c\u5c31\u53d8\u6210\u4e86MLE training\uff0c \\(\\pi\\) \u4f1a\u8d8b\u5411\u4e8e \\(\\pi_\\beta\\) \uff1b\u5f53 \\(\\lambda\\) \u8d8b\u4e8e0\uff0c\u5c31\u53d8\u6210\u4e86policy gradient training\uff0c \\(\\pi\\) \u4f1a\u8d8b\u5411\u4e8eargmax policy\u3002</p> <p>\u5b9e\u9a8c\u4e0a\uff0c\u53ef\u4ee5\u8bc1\u660e\uff0c\u8fd9\u6837\u7684objective\u76f8\u6bd4\u4e8e\u539f\u6765\u7684objective\u8868\u73b0\u66f4\u597d\u3002\uff08\u5b83\u4eec\u5728\u7406\u8bba\u4e0a\u662f\u7b49\u4ef7\u7684\uff0c\u4f46\u5b9e\u9645\u4e0a\u56e0\u4e3a\u795e\u7ecf\u7f51\u7edc\u8868\u73b0\u529b\u6709\u9650\uff0c\u5c31\u6709\u4e86\u4f18\u52a3\u4e4b\u5206\u3002\uff09</p> <p>\u6211\u4eec\u6765\u603b\u7ed3\u4e00\u4e0bAWAC\u7b97\u6cd5\u7684\u8fc7\u7a0b\uff1a</p> <p>AWAC Algorithm</p> <p>\u91cd\u590d\uff1a</p> <ol> <li>\u4f7f\u7528 \\(L_{\\text{AWAC}}(\\theta)=\\mathbb{E}_{s,a\\sim \\pi_\\beta}\\left[(\\log \\pi_\\theta(s|a))\\cdot\\exp\\left(\\frac{A_{\\phi}(s,a)}{\\lambda}\\right)\\right]\\) \u6765\u8bad\u7ec3 \\(\\theta\\) \uff1b</li> <li>\u4f7f\u7528 \\(L_Q(\\phi)=\\mathbb{E}_{s,a,s'\\sim \\pi_{\\beta}}\\left[(Q_\\phi(s,a)-(r(s,a)+\\gamma \\mathbb{E}_{a'\\sim \\pi_\\theta(\\cdot|s')}[Q_\\phi(s',a')]))^2\\right]\\) \u6765\u8bad\u7ec3 \\(\\phi\\) \u3002</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap14/#improvement","title":"Improvement","text":"<p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u6539\u8fdbAWAC\u7b97\u6cd5\u3002\u7b2c\u4e00\u6b65\u662f\u6838\u5fc3\u6b65\u9aa4\uff0c\u6bd4\u8f83\u597d\u5730\u9650\u5236\u4f4f\u4e86 \\(\\pi\\) \u548c \\(\\pi_\\beta\\) \u7684\u8ddd\u79bb\uff0c\u56e0\u6b64\u6ca1\u4ec0\u4e48\u53ef\u4ee5\u6539\u53d8\u7684\uff1b\u4f46\u7b2c\u4e8c\u6b65\u7565\u6709\u7f3a\u9677\uff1a\u6211\u4eec\u8bad\u7ec3 \\(Q\\) \u7684\u76ee\u7684\u662f\u63d0\u5347\u6211\u4eec\u7684policy\uff0c\u4f46\u8bad\u7ec3\u6570\u636e\u96c6\u4e00\u76f4\u5728 \\(\\pi_\\beta\\) \u4e0a\u9762\uff0c\u8fd9\u53ef\u80fd\u5bfc\u81f4 \\(Q\\) \u201c\u6293\u4e0d\u4f4f\u91cd\u70b9\u201d\u3002</p> <p>\u6bd4\u5982\uff0c\u8bbe\u60f3\u6211\u4eec\u5728\u8bad\u7ec3\u5f00\u8f66\uff0c\u6709\u4e00\u4e2a\u5f88\u96be\u8f6c\u7684\u5f2f\uff0c\u5927\u90e8\u5206\u4eba\u90fd\u8f6c\u4e24\u6b21\u624d\u80fd\u8f6c\u8fc7\u53bb\uff1b\u4f46\u6570\u636e\u96c6\u91cc\u4e5f\u6709\u51e0\u4e2a\u4e13\u5bb6\uff0c\u4ed6\u4eec\u4e00\u6b21\u5c31\u8f6c\u8fc7\u53bb\u4e86\u3002\u5047\u8bbe\u8f6c\u4e24\u6b21\u7684reward\u8f83\u4f4e\uff0c\u800c\u8f6c\u4e00\u6b21\u7684reward\u8f83\u9ad8\u3002\u90a3\u4e48\uff0c\u60f3\u4e00\u60f3\uff1a\u6211\u4eec\u7684policy\u662f\u5426\u80fd\u5b66\u4f1a\u8f6c\u4e00\u6b21\uff1f</p> <p>\u5b9e\u9645\u4e0a\u662f\u5f88\u56f0\u96be\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u7684\u6570\u636e\u96c6\u91cc\u6709\u5f88\u591a\u8f6c\u4e24\u6b21\u7684\u4f8b\u5b50\uff0c\u6240\u4ee5 \\(Q\\) \u7f51\u7edc\u6700\u8d5a\u7684\u65b9\u5f0f\u662f\u62df\u5408\u8fd9\u4e9b\u6570\u636e\u62df\u5408\u7684\u6bd4\u8f83\u597d\uff0c\u56e0\u6b64\u5176\u4e0d\u89c1\u5f97\u80fd\u610f\u8bc6\u5230\u8f6c\u4e00\u6b21\u7684reward\u9ad8\u5f88\u591a\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u7684policy\u4eceQ\u7f51\u7edc\u4e2d\u5b66\u4e60\u65f6\uff0c\u4e5f\u4e0d\u89c1\u5f97\u80fd\u5b66\u5230\u8f6c\u4e00\u6b21\u7684action\u3002</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u6539\u8fdb \\(Q\\) \u7f51\u7edc\u7684\u8bad\u7ec3\u65b9\u5f0f\u3002\u6211\u4eec\u9700\u8981\u60f3\u529e\u6cd5\u5bf9\u4e8e\u6bcf\u4e00\u4e2astate\uff0c\u627e\u5230\u4e13\u5bb6\u7684action\u3002\u4e3a\u6b64\uff0c\u4e0e\u5176\u5728update\u4e2d\u53d6\u671f\u5f85\u503c\uff08\u5bf9\u5e94\u7740\u67d0\u79cd\u5e73\u5747\uff09\uff0c\u6211\u4eec\u4e0d\u5982\u53d6\u4e00\u4e2a\u7edf\u8ba1\u5b66\u4e2d\u7684expectile\uff1a</p> \\[ \\text{Expectile}_{\\tau}[p(x)]=\\arg\\min_{y}[\\text{ExpectileLoss}_{\\tau,p(x)}(y)] \\] \\[ \\text{ExpectileLoss}_{\\tau,p(x)}(y)=\\mathbb{E}_{x\\sim p(x)}[(x-y)^2\\cdot l^{\\tau}(x-y)] \\] <p>\u5176\u4e2d\u51fd\u6570 \\(l^{\\tau}\\) \u5b9a\u4e49\u4e3a\uff1a</p> \\[ l^{\\tau}(z)=\\begin{cases}\\tau,&amp;z&gt; 0\\\\ 1-\\tau,&amp;z\\le 0\\end{cases} \\] <p>\u8fd9\u6837\uff0c\u5f53 \\(\\tau\\to 1\\) \u7684\u65f6\u5019\uff0c\u6211\u4eec\u5c31\u76f8\u5f53\u4e8e\u53d6\u4e86\u4e00\u4e2a\u6700\u5927\u503c\uff1b\u800c\u901a\u8fc7\u8c03\u6574 \\(\\tau\\) \uff0c\u6211\u4eec\u53ef\u4ee5\u4fdd\u8bc1 \\(y\\) \u662f\u5206\u5e03 \\(p(x)\\) \u4e2d\u7684\u8f83\u5927\u503c\uff0c\u4f46\u53c8\u4e0dout of distribution\u3002</p> <p>\u4e3a\u4e86\u628aexpectile\u52a0\u5165\u6211\u4eec\u7684\u8bad\u7ec3\u8fc7\u7a0b\uff0c\u6211\u4eec\u53ef\u4ee5\u5f15\u5165value function\u3002\u8fd9\u6837\uff0c\u5bf9 \\(V\\) \u7684\u8bad\u7ec3\u662f\uff1a</p> \\[ L_V(\\psi)=\\mathbb{E}_{s\\sim \\pi_\\beta}\\left[\\text{ExpectileLoss}_{\\tau,Q_\\phi(s,a)(a\\sim \\pi_\\beta)}(V_\\psi(s))\\right] \\] <p>\u8fd9\u91cc \\(Q_\\phi(s,a)(a\\sim \\pi_\\beta)\\) \u6307\u7684\u662f\uff0c \\(a\\sim \\pi_\\beta(a|s)\\) \u7684\u65f6\u5019\uff0c \\(Q_\\phi(s,a)\\) \u7684\u5206\u5e03\u3002\u6ce8\u610f\u8fd9\u91ccexpectile loss\u6ca1\u6709\u7528 \\(\\pi\\) \uff0c\u56e0\u4e3a\u6211\u4eec\u5e0c\u671b\u4ece\u6570\u636e\u96c6\u4e2d\u627e\u5230\u4e13\u5bb6\u7684action\u3002\u5bf9 \\(Q\\) \u7684\u8bad\u7ec3\u5219\u662f\u5e38\u89c4\u7684\uff1a</p> \\[ L_Q(\\phi)=\\mathbb{E}_{s,a,s'\\sim \\pi_\\beta}\\left[(Q_\\phi(s,a)-(r(s,a)+\\gamma V_\\psi(s')))^2\\right] \\] <p>\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u4e00\u8fc7\u7a0b\u4e2d\uff0c\u6ca1\u6709\u660e\u786e\u5730\u51fa\u73b0policy\u2014\u2014\u8fd9\u662f\u56e0\u4e3a\u8fd9\u4e00\u65b9\u6cd5\u901a\u8fc7expectile\u6765\u6539\u8fdb\u7b56\u7565\uff0c\u800c\u975e\u901a\u8fc7\u4e4b\u524d\u57fa\u4e8epolicy\u7684\u65b9\u6cd5\u3002\u6b63\u662f\u56e0\u4e3a\u5982\u6b64\uff0c\u8fd9\u4e00\u65b9\u6cd5\u88ab\u79f0\u4e3aIQL(Implicit Q-Learning)\u3002</p> <p>\u5f53\u7136\uff0c\u5982\u679c\u786c\u662f\u8981\u8bf4\uff0cIQL\u201c\u7b49\u6548\u5730\u201d\u4e5f\u6709\u4e00\u4e2apolicy\uff0c\u4f7f\u5f97 \\(\\mathbb{E}_{a'\\sim \\pi(s')}[Q_{\\psi}(s',a')]=V_{\\psi}(s')\\) \uff0c\u4e5f\u5c31\u662f\u8fd9\u4e2apolicy\u4f5c\u51fa\u7684\u6548\u679c\u548cexpectile\u4e00\u81f4\u3002</p> <p>\u8fd9\u4e5f\u8bf4\u660e\u4e86\u4e3a\u4f55IQL\u4f1a\u89e3\u51b3\u4e4b\u524ddistribution shift\u7684\u95ee\u9898\uff1a\u5728DQN\u4e2d\uff0c\u6211\u4eec\u76f8\u5f53\u4e8e\u76f4\u63a5\u53d6argmax\u4f5c\u4e3apolicy\uff0c\u8fd9\u6837\u5982\u679cQ \u5b58\u5728\u4e00\u4e9b\u9519\u8bef\uff0c\u90a3\u4e48policy\u5c31\u53ef\u80fd\u5229\u7528\u8fd9\u4e9b\u9519\u8bef\u3002\u800c\u5728IQL\u4e2d\uff0c\u6211\u4eec\u901a\u8fc7 \\(\\tau\\) \u5f88\u5927\u4f46\u4e0d\u662f1,\u5b9e\u73b0\u4e86\u201c\u5728support\u4e2d\u53d6\u6700\u5927\u201d\uff0c\u4ece\u800c\u4fdd\u8bc1policy\u4e0d\u4f1a\u88abQ\u7684\u5c11\u6570\u9519\u8bef\u6240\u5f71\u54cd\u3002</p> <p>\u5f53\u7136\uff0c\u6700\u540e\u6211\u4eec\u5728eval\u7684\u65f6\u5019\u4e5f\u9700\u8981\u5b66\u4e60\u4e00\u4e2apolicy\u3002\u6ce8\u610f\u540c\u6837\u6b64\u65f6\u4e0d\u80fd\u7b80\u5355\u5730\u53d6argmax\uff0c\u56e0\u6b64\u6211\u4eec\u8fd8\u662f\u53ef\u4ee5\u7528AWAC\u7684\u65b9\u6cd5\uff1a</p> \\[ L_{\\text{AWAC}}(\\theta)=\\mathbb{E}_{s,a\\sim \\pi_\\beta}\\left[(\\log \\pi_\\theta(s|a))\\cdot\\exp\\left(\\frac{A_{\\phi}(s,a)}{\\lambda}\\right)\\right] \\] <p>\u5e76\u53d6 \\(A_{\\phi}\\) \u4e3avalue\u548cQ\u7684\u5dee\u3002\u5f53\u7136\uff0c\u8fd9\u91cc\u7684value function\u76f8\u5f53\u4e8e\u6539\u53d8\u4e00\u4e2a\u5e38\u6570\uff08baseline\uff09\uff0c\u56e0\u6b64\u4e0d\u662f\u5173\u952e\uff1b\u5173\u952e\u5728\u4e8e \\(\\lambda\\) \u8fd8\u662f\u4fdd\u8bc1\u4e86policy\u4e0d\u8981\u592a\u8fdc\u79bb\u6570\u636e\u96c6 \\(\\pi_\\beta\\) \u3002\u603b\u7ed3\u4e00\u4e0b\uff0cIQL\u7684\u7b97\u6cd5\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <p>IQL Algorithm</p> <ol> <li> <p>\u91cd\u590d\uff1a</p> <ol> <li>\u4f7f\u7528 \\(L_V(\\psi)=\\mathbb{E}_{s\\sim \\pi_\\beta}\\left[\\text{ExpectileLoss}_{\\tau,Q_\\phi(s,a)(a\\sim \\pi_\\beta)}(V_\\psi(s))\\right]\\) \u6765\u8bad\u7ec3 \\(\\psi\\) \uff1b</li> <li>\u4f7f\u7528 \\(L_Q(\\phi)=\\mathbb{E}_{s,a,s'\\sim \\pi_\\beta}\\left[(Q_\\phi(s,a)-(r(s,a)+\\gamma V_\\psi(s')))^2\\right]\\) \u6765\u8bad\u7ec3 \\(\\phi\\) \uff1b</li> </ol> </li> <li> <p>\u6700\u540e\uff08\u5728eval\u65f6\uff09\uff1a</p> <ol> <li>\u4f7f\u7528 \\(L_{\\text{AWAC}}(\\theta)=\\mathbb{E}_{s,a\\sim \\pi_\\beta}\\left[(\\log \\pi_\\theta(s|a))\\cdot\\exp\\left(\\frac{A_{\\phi}(s,a)}{\\lambda}\\right)\\right]\\) \u6765\u8bad\u7ec3 \\(\\theta\\) \u3002</li> </ol> </li> </ol> <p>\u53ef\u4ee5\u770b\u5230\uff0cIQL\u901a\u8fc7\u4f7f\u7528expectile\uff0c\u76f8\u5f53\u4e8e\u91c7\u7528\u4e86support constraint\u7684\u601d\u60f3\u3002\u53ef\u4ee5\u6599\u60f3\u5230\u5176\u8868\u73b0\u4f1a\u6bd4AWAC\u66f4\u597d\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap14/#another_method_controlling_q_values","title":"Another Method: Controlling Q Values","text":"<p>\u6700\u540e\u7684\u4e00\u4e2a\u65b9\u6cd5\u53e6\u8f9f\u8e4a\u5f84\uff0c\u6211\u4eec\u6765\u60f3\uff1a\u65e2\u7136\u95ee\u9898\u5728\u4e8eQ\u503c\u53ef\u80fd\u4f1a\u51fa\u73b0\u4e00\u4e9b\u9519\u8bef\uff0c\u800c\u4e14\u504f\u5927\uff0c\u6211\u4eec\u80fd\u4e0d\u80fd\u523b\u753b\u8fd9\u4e00\u70b9\u5e76\u628a\u5b83\u7eb3\u5165\u6211\u4eec\u7684\u8bad\u7ec3\u76ee\u6807\u5462\uff1f</p> <p>\u8fd9\u4e00\u65b9\u6cd5\u7684\u5173\u952e\u601d\u60f3\u662f\uff0c\u6211\u4eec\u9996\u5148\u641e\u4e00\u4e2a\u865a\u5047\u7684policy \\(\\mu\\) \uff0c\u4e13\u95e8\u7528\u6765\u653b\u51fb \\(Q\\) \uff0c\u53d6\u51fa\u5176\u6700\u5927\u503c\u3002\u7136\u540e\uff0c\u6211\u4eec\u8bad\u7ec3 \\(Q\\) \uff0c\u4f7f\u5f97\u8fd9\u4e2a\u865a\u5047\u7684policy\u4f5c\u51fa\u7684action\u5bf9\u5e94\u7684Q\u503c\u5c3d\u53ef\u80fd\u5c0f\u3002\u4e5f\u5c31\u662f</p> \\[ \\arg\\min_Q \\max_{\\mu}\\mathbb{E}_{s\\sim D,a\\sim \\mu(a|s)}[Q(s,a)] \\] <p>\u4f46\u7a0d\u5fae\u601d\u8003\u4e00\u4e0b\uff0c\u4f1a\u53d1\u73b0\u8fd9\u5e76\u4e0d\u884c\u3002\u6211\u4eec\u5236\u5b9a\u76ee\u6807\u7684\u65f6\u5019\uff0c\u603b\u662f\u8981\u8003\u8651\u7f51\u7edc\u662f\u5426\u4f1a\u60f3\u5230\u6295\u673a\u53d6\u5de7\u7684\u65b9\u6cd5\u3002\u6bd4\u5982\u8fd9\u91cc\uff0c \\(Q\\) \u7f51\u7edc\u53ef\u80fd\u4f1a\u53d1\u73b0\uff0c\u53ea\u8981\u628a\u6240\u6709\u7684Q\u90fd\u4e0b\u964d\u5c31\u53ef\u4ee5\u4e86\u3002\u56e0\u6b64\uff0c\u4e00\u4e2a\u66f4\u597d\u7684\u65b9\u5f0f\u662f\uff0c\u53d6</p> \\[ L_{Q,\\text{additional}}=\\alpha\\cdot\\left[\\max_{\\mu}\\mathbb{E}_{s\\sim D,a\\sim \\mu(a|s)}[Q(s,a)]-\\mathbb{E}_{s\\sim D,a\\sim \\pi_\\beta(a|s)}[Q(s,a)]\\right] \\] <p>\u5176\u4e2d\u540e\u9762\u7684\u671f\u671b\u76f4\u63a5\u5728\u6570\u636e\u96c6\u4e0a\u9762\u8ba1\u7b97\u3002\u7406\u8bba\u4e0a\u53ef\u4ee5\u8bc1\u660e\uff0c\u8fd9\u6837\u7684\u8bad\u7ec3\u76ee\u6807\u53ef\u4ee5\u4fdd\u8bc1 \\(Q\\) \u7684\u503c\u6bd4\u4e0d\u52a0\u5165\u8fd9\u4e00\u9879\uff08 \\(\\alpha=0\\) \uff09\u7684\u65f6\u5019\uff0c\u671f\u671b\u4e0b\u66f4\u52a0\u7684\u5c0f\u3002\u8fd9\u6837\uff0c\u53ef\u4ee5\u4fdd\u8bc1 \\(Q\\) \u503c\u6bd4\u8f83\u4fdd\u5b88\u2014\u2014\u4e0d\u4f1a\u88abpolicy\u9519\u8bef\u5730\u5229\u7528\u3002\u8fd9\u4e00\u65b9\u6cd5\u5c31\u53eb\u505aCQL(Conservative Q-Learning)\u3002\u6b64\u65f6\uff0c\u5728\u8bad\u7ec3policy\u7684\u65f6\u5019\uff0c\u5c31\u53ef\u4ee5\u76f4\u63a5\u91c7\u7528\u6700\u666e\u901a\u7684DQN\u65b9\u6cd5\uff0c\u6bd4\u5982\u76f4\u63a5\u53d6argmax\u3002CQL\u7684\u7b97\u6cd5\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <p>CQL Algorithm</p> <p>\u91cd\u590d\uff1a</p> <ol> <li>\u4f7f\u7528 \\(L_Q(\\phi)=\\mathbb{E}_{s,a,s'\\sim \\pi_{\\beta}}\\left[(Q_\\phi(s,a)-(r(s,a)+\\gamma \\mathbb{E}_{a'\\sim \\pi_\\theta(\\cdot|s')}[Q_\\phi(s',a')]))^2\\right]+L_{Q,\\text{additional}}\\) \u6765\u8bad\u7ec3 \\(\\phi\\) \uff1b</li> <li>\u8bad\u7ec3policy\uff1a \\(L_{\\pi}(\\theta)=-\\mathbb{E}_{s\\sim \\pi_\\beta}\\left[\\mathbb{E}_{a\\sim \\pi_\\theta(\\cdot|s)}[Q(s,a)]\\right]\\)</li> </ol> <p>\u4e0d\u8fc7\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u518d\u6b21\u6539\u8fdb\u8fd9\u4e00\u65b9\u6cd5\u3002\u73b0\u5728\u7684\u8fd9\u4e2a \\(\\mu\\) \u4f1a\u53d8\u6210argmax\u7b56\u7565\uff0c\u56e0\u6b64\u6709\u70b9\u50cf\u201c\u6253\u5730\u9f20\u201d\uff1a\u6709\u4e00\u4e2a\u5730\u65b9 \\(Q\\) \u503c\u5192\u8d77\u5934\u6765\uff0c\u5c31\u628a\u5b83\u6253\u4e0b\u53bb\u3002\u8fd9\u6837\u867d\u7136\u7406\u8bba\u4e0a\u6ca1\u95ee\u9898\uff0c\u4f46\u7ed9\u4eba\u7684\u611f\u89c9\u4e0d\u591f\u597d\uff0c\u5728\u8bad\u7ec3\u7684\u65f6\u5019\u4e5f\u4e0d\u591f\u7a33\u5b9a\u3002\u56e0\u6b64\uff0c\u6709\u4eba\u63d0\u51fa\uff0c\u6211\u4eec\u52a0\u5165\u4e00\u4e2a\u5bf9 \\(\\mu\\) \u7684\u9650\u5236\uff0c\u907f\u514d\u5b83\u662f\u8fd9\u6837\u7684one-hot policy\uff1a</p> \\[ L_{Q,\\text{additional}}=\\alpha\\cdot\\left[\\max_{\\mu}\\left(\\mathbb{E}_{s\\sim D,a\\sim \\mu(a|s)}[Q(s,a)]+\\lambda \\mathbb{E}_{s\\sim D}[\\mathcal{H}(\\mu)]\\right)-\\mathbb{E}_{s\\sim D,a\\sim \\pi_\\beta(a|s)}[Q(s,a)]\\right] \\] <p>\u5176\u4e2d \\(\\mathcal{H}\\) \u7684\u5f15\u5165\u4fdd\u8bc1\u4e86 \\(\\mu\\) \u8fd9\u4e00\u5206\u5e03\u4e0d\u80fd\u592a\u7a84\u3002\u6b64\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u7ed9\u51fa\u4e00\u4e2a\u660e\u786e\u7684 \\(\\mu\\) \u7684\u8868\u8fbe\u5f0f\uff1a</p> \\[ \\mu(a|s)=\\frac{\\exp(Q(s,a)/\\lambda)}{\\sum_{a'}\\exp(Q(s,a')/\\lambda)} \\] <p>\u5176\u4e2d \\(\\lambda\\) \u79f0\u4e3aCQL temperature\u3002\u4ee3\u5165\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c</p> \\[ L_{Q,\\text{additional}}=\\alpha\\cdot\\left[\\lambda \\mathbb{E}_{s\\sim D}\\left[\\log\\left(\\sum_{a}\\exp\\left(\\frac{Q(s,a)}{\\lambda}\\right)\\right)\\right]-\\mathbb{E}_{s\\sim D,a\\sim \\pi_\\beta(a|s)}[Q(s,a)]\\right] \\] <p>\u8fd9\u6837\u7684CQL\u65b9\u6cd5\u7684\u597d\u5904\u5728\u4e8e\u65e0\u9700\u8ba1\u7b97 \\(\\mu\\) \uff0c\u901f\u5ea6\u66f4\u5feb\u3002\u5b9e\u9645\u4e0a\u4e5f\u4e00\u822c\u91c7\u53d6\u8fd9\u79cd\u65b9\u6cd5\u3002</p> <p>\u5c0f\u8d34\u58eb</p> <p>\u4f60\u77e5\u9053<code>torch.logsumexp</code>\u5417\uff1f</p>"},{"location":"Online%20CS%20Courses/CS285/chap14/#model_based_offline_rl","title":"Model Based Offline RL","text":"<p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u524d\u9762\u7684\u65b9\u6cd5\u7684\u95ee\u9898\u90fd\u6765\u81ea\u4e8e\uff0c\u6211\u4eec\u53ea\u6709\u4e00\u4e2a\u56fa\u5b9a\u7684dataset\uff0c\u800c\u4e14\u662f\u7531\u4e00\u4e2a\u4e0d\u4e00\u5b9a\u597d\u7684policy \\(\\pi_\\beta\\) \u751f\u6210\u7684\u3002\u56e0\u6b64\u6211\u4eec\u81ea\u7136\u5730\u60f3\uff0c\u80fd\u5426\u628amodel-base\u65b9\u6cd5\u5f15\u5165\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u83b7\u5f97\u66f4\u591a\u7684\u6570\u636e\u4e86\uff01</p> <p>\u6211\u4eec\u5148\u56de\u5fc6\u4e00\u4e0bmodel-based\u65b9\u6cd5\u662f\u600e\u6837\u5de5\u4f5c\u7684\uff1a\u6211\u4eec\u6536\u96c6\u4e00\u4e9b\u6570\u636e\uff0c\u5728\u4e0a\u9762\u8bad\u7ec3\u4e00\u4e2amodel\uff0c\u7136\u540e\u5229\u7528\u73af\u5883\u7684\u6570\u636e\u548cmodel\u751f\u6210\u7684\u65b0\u6570\u636e\uff0c\u8fdb\u884c\u4e00\u4e9boff-policy\u7684\u65b9\u6cd5\u7684\u8bad\u7ec3\u3002\u76f4\u89c2\u5730\u60f3\uff0c\u8fd9\u4e00\u65b9\u6cd5\u5b8c\u5168\u53ef\u4ee5\u7528\u5230\u73b0\u5728offline\u7684\u573a\u666f\u4e2d\uff1a\u6211\u4eec\u6839\u636e\u4e8b\u5148\u6536\u96c6\u597d\u7684\u3001\u56fa\u5b9a\u7684\u6570\u636e\u6765\u8bad\u7ec3\u73af\u5883model\uff0c\u7136\u540e\u5229\u7528\u8fd9\u4e2amodel\u751f\u6210\u65b0\u7684\u6570\u636e\uff0c\u8fdb\u884cpolicy\u7684\u8bad\u7ec3\u3002</p> <p>\u4f46\u8fd9\u6709\u7740\u5f88\u5927\u7684\u95ee\u9898\u3002\u5728\u4e4b\u524d\u8ba8\u8bbamodel-based\u65b9\u6cd5\u65f6\u5019\uff0c\u6211\u4eec\u90fd\u6ca1\u6709\u592a\u5173\u6ce8\u4e0b\u9762\u56fe\u4e2d\u6240\u793a\u7684\u201c\u95ed\u73af\u201d\uff0c\u56e0\u4e3a\u90a3\u662f\u7406\u6240\u5f53\u7136\u7684\u3002\u4f46\u73b0\u5728\uff0c\u4ece \\(\\pi\\) \u5230\u73af\u5883\u7684\u4ea4\u4e92\u8fd9\u4e00\u6761\u7ebf\u65ad\u5f00\u4e86\uff01\u8bbe\u60f3\u6211\u4eec\u7684model\u72af\u4e86\u4e00\u4e2a\u9519\u8bef\uff0c\u8ba4\u4e3a\u5728\u76f4\u8def\u4e0a\u5411\u5de6\u8f6c\uff0c\u5f97\u5230\u7684state\u624d\u662f\u5411\u524d\u7684\u3002\u90a3\u4e48\uff0c\u6ca1\u6709\u4eba\u6765\u7ea0\u6b63\u5b83\u3002</p> <p>\u4e00\u4e2a\u5173\u952e\u7684\u5bf9model-based\u65b9\u6cd5\u7684\u770b\u6cd5\u662f\uff0cmodel-based \u65b9\u6cd5\u4e2d\u7684model\u89e3\u7b54\u7684\u662f\u201cwhat if\u201d\u7684\u95ee\u9898\u3002 \u6362\u53e5\u8bdd\u8bf4\uff0cmodel\u7684\u7528\u5904\u5728\u4e8e\uff0c\u5047\u8bbe\u6211\u7684policy\u60f3\u5728\u67d0\u4e2a\u70b9\u4e0a\u4f5c\u51fa\u51b3\u7b56\uff0c\u6570\u636e\u4e0d\u591f\u7684\u60c5\u51b5\u4e0bmodel\u80fd\u505a\u4e00\u4e9b\u9884\u6d4b\u3002\u8fd9\u56fa\u7136\u662f\u597d\u7684\uff0c\u4f46\u662f\u5982\u679c\u9884\u6d4b\u662f\u9519\u8bef\u7684\uff0c\u90a3\u5c31\u8fd8\u4e0d\u5982\u6ca1\u6709\u4e86\u3002</p> <p></p> <p>\u5982\u4f55\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\uff1f\u7b80\u5355\u6765\u8bf4\uff0c\u6211\u4eec\u8fd8\u662f\u4f30\u8ba1model\u7684uncertainty\u3002\u4e4b\u524d\u5728\u666e\u901a\u7684model-based\u65b9\u6cd5\u4e2d\u6211\u4eec\u4e5f\u63d0\u5230\u8fc7\u4f30\u8ba1uncertainty\u7684\u5fc5\u8981\u6027\u3002\u4f46\u548c\u4e4b\u524d\u4e0d\u540c\uff0c\u539f\u6765\u6211\u4eec\u53ea\u662f\u5e0c\u671b\u6d88\u9664\u8fd9\u4e2a\u4e0d\u786e\u5b9a\u6027\uff08\u6bd4\u5982\uff0c\u901a\u8fc7ensemble\u7b49\u65b9\u5f0f\uff09\uff1b\u4f46\u73b0\u5728\uff0c\u6211\u4eec\u8fde\u8fd9\u4e5f\u4e0d\u6562\u4e86\uff0c\u56e0\u4e3a\u4efb\u4f55\u5fae\u5c0f\u7684\u9519\u8bef\u90fd\u662f\u81f4\u547d\u7684\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5e94\u8be5\u907f\u514d\u53bb\u5f80model\u4e0d\u786e\u5b9a\u7684\u5730\u65b9\u3002</p> <p>\u5e26\u7740\u8fd9\u4e00\u601d\u60f3\uff0c\u5047\u8bbe\u6211\u4eec\u53ef\u4ee5\u4f30\u8ba1\u6a21\u578b\u7684uncertainty \\(u(s,a)\\) \uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684reward:</p> \\[ \\tilde{r}(s,a)=r(s,a)-\\lambda u(s,a) \\] <p>\u7406\u8bba\u4e0a\u53ef\u4ee5\u8bc1\u660e\uff0c\u7528\u8fd9\u6837\u7684reward\uff0c\u6709</p> \\[ \\eta (\\pi)\\ge \\eta(\\pi')-2\\lambda \\epsilon (\\pi') \\] <p>\u5176\u4e2d \\(\\pi\\) \u4ee3\u8868\u6211\u4eec\u8fd9\u6837\u8bad\u7ec3\u51fa\u6765\u7684policy\uff0c\u800c \\(\\pi'\\) \u662f\u4efb\u610f\u4e00\u4e2apolicy\u3002 \\(\\epsilon\\) \u4ee3\u8868\u7740\u8fd9\u4e00policy\u8d70\u8fc7\u7684 \\((s,a)\\) \u4e2d\uff0cmodel\u7684uncertainty\u7684\u671f\u671b\u3002\u8fd9\u6837\uff0c\u6bd4\u5982\uff0c\u628a \\(\\pi'\\) \u53d6\u4e3a\u6700\u597d\u7684policy\uff0c\u90a3\u4e48\u5c31\u662f\u8bf4\uff1a\u53ea\u8981\u6700\u597d\u7684policy\u8d70\u8fc7\u7684\u5730\u65b9\u6211\u4eec\u7684model\u6bd4\u8f83\u786e\u5b9a\uff0c\u90a3\u4e48\u6211\u4eec\u7684policy\u5c31\u53ef\u4ee5\u63a5\u8fd1\u6700\u597d\u7684policy\u3002</p> <p>\u9664\u6b64\u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u7684\u65b9\u6cd5\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap14/#combo_conservative_model-based_offline_rl","title":"COMBO: Conservative Model-Based Offline RL","text":"<p>\u548cCQL\u4e00\u6837\uff0c\u4ee5C\u5f00\u5934\u7684\u7b97\u6cd5\u5f3a\u8c03\u4fdd\u5b88\uff1a\u6211\u4eec\u8fd8\u662f\u53bb\u6253\u51fb\u4e00\u4e9b\u4e1c\u897f\u3002\u8fd9\u4e00\u65b9\u6cd5\u60e9\u7f5amodel\u751f\u6210\u7684\u6570\u636e\u4e0a\u9762\u7684 \\(Q\\) value\uff1a</p> \\[ L_{Q,\\text{additional}}=\\beta\\cdot(\\mathbb{E}_{s,a\\sim \\hat{p}}[Q(s,a)]-\\mathbb{E}_{s,a\\sim \\pi_\\beta}[Q(s,a)]) \\] <p>\u5176\u4e2d\uff0c \\(\\hat{p}\\) \u4ee3\u8868\u6211\u4eec\u7684\u73af\u5883\u6a21\u578b\u3002</p> <p>Q: \u4f60\u80e1\u8bf4\u516b\u9053\u3002\u6309\u7167\u4f60\u7684\u8fd9\u4e2aloss\u6765\uff0c\u90a3\u5c31\u5bfc\u81f4model\u751f\u6210\u7684 \\((s,a)\\) \u4e0a\u9762Q\u503c\u90fd\u5f88\u5c0f\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u8fd8\u8981model\u5e72\u4ec0\u4e48\uff1f</p> <p>A: \u522b\u6025\uff0c\u5e76\u975e\u5982\u6b64\u3002\u522b\u5fd8\u4e86\u6211\u4eec\u9664\u4e86\u8fd9\u4e2aadditional\u7684loss\u4e4b\u5916\u8fd8\u6709\u4e00\u4e2a\u6b63\u5e38\u7684loss\u3002\u8bbe\u60f3\u73b0\u5728model\u5728\u67d0\u4e00\u4e2a \\((s,a)\\) \u4e0a\u9762\u8868\u73b0\u7684\u5f88\u597d\uff08\u4e5f\u5c31\u662f\u548c\u771f\u5b9e\u7684\u73af\u5883\u6570\u636e\u76f8\u4f3c\uff09\uff0c\u90a3\u4e48\u56e0\u4e3a \\(\\beta\\) \u53ea\u662f\u5f88\u5c0f\u7684\u6570\uff0c\u6b63\u5e38\u7684loss\u4f1a\u4e3b\u5bfc\uff0c\u8fd9\u6837 \\(Q(s,a)\\) \u8fd8\u662f\u6b63\u5e38\u7684\u6570\u503c\u3002\u800c\u53ea\u6709\u5f53model\u9884\u6d4b\u4e86\u4e00\u4e2a\u6bd4\u8f83\u4e0d\u5408\u7406\u7684 \\(s'\\) \u7684\u65f6\u5019\uff0c \\(Q\\) function\u4e4b\u524d\u7684update\u5b8c\u5168\u6ca1\u6709\u4f5c\u7528\uff0c\u8fd9\u4e2aadditional\u7684loss\u624d\u4f1a\u53d8\u5f97\u4e3b\u8981\uff0c\u4f7f\u5f97\u8fd9\u4e00\u5904\u7684 \\(Q\\) \u53d8\u5c0f\u3002</p> <p>\u5176\u5b9e\uff0c\u8fd9\u4e00\u65b9\u6cd5\u80cc\u540e\u7684\u903b\u8f91\u6709\u70b9\u50cf\u4e4b\u524dexploration\u4e2d\u63d0\u5230\u7684RND\uff1a\u901a\u8fc7\u67d0\u4e2a\u7f51\u7edc\uff08\u8fd9\u91cc\u662f \\(Q\\) \u7f51\u7edc\uff09\u627e\u5230\u6a21\u578b\u4e0d\u64c5\u957f\u7684\u5730\u65b9\u3002\u7136\u540e\uff0c\u8fd9\u4e00\u65b9\u6cd5\u5c31\u53ef\u4ee5\u51cf\u5c11\u8fd9\u91cc\u7684Q \u503c\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap14/#trajectory_transformer_model-based_method_without_policy","title":"Trajectory Transformer: Model-based Method without Policy","text":"<p>\u6211\u4eec\u6700\u540e\u4ecb\u7ecd\u4e00\u4e2a\u6bd4\u8f83\u65b0\u5947\u7684\u65b9\u6cd5\uff1a\u7528transformer\u6765\u5f53\u4f5cmodel\u3002</p> <p>\u5982\u679c\u4ed4\u7ec6\u60f3\u4e00\u60f3\u6700\u5f00\u59cb\u6211\u4eec\u63d0\u51fa\u7684\u95ee\u9898\uff1a</p> <p>Offline RL\u7684\u95ee\u9898\u9648\u8ff0\u662f\uff1a\u6211\u4eec\u6709\u4e00\u7ec4\u5404\u79cd\u5730\u65b9\u6536\u96c6\u6765\u7684\u6570\u636e\uff0c\u53ef\u80fd\u6ca1\u6709\u4e00\u4e2a\u662f\u5b8c\u6574\u80fd\u5b8c\u6210\u4efb\u52a1\u7684\uff1b\u4f46\u6211\u4eec\u5e0c\u671b\u6211\u4eec\u7684model\u80fd\u505a\"Stiching\"\uff0c\u96c6\u4f17\u5bb6\u4e4b\u957f\uff0c\u6765\u5b8c\u6210\u76ee\u6807\u3002</p> <p>\u6211\u4eec\u4f1a\u53d1\u73b0\uff0csequence model\u5b9e\u9645\u4e0a\u5c31\u53ef\u4ee5\u5b8c\u6210\u8fd9\u4e00\u4ef6\u4e8b\u2014\u2014\u5728autoregressive model\u7684\u751f\u6210\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u4e00\u822c\u53d6probability argmax\u8fdb\u884cnext token prediction\uff0c\u6216\u8005\u8fdb\u884cbeam search\u3002\u4f46\u73b0\u5728\uff0c\u5047\u8bbe\u5bf9\u4e8esequence</p> \\[ s_0 \\to a_0 \\to s_1 \\to a_1 \\to \\cdots \\] <p>\u6211\u4eec\u5728\u6bcf\u4e00\u6b21\u51b3\u5b9a \\(a\\) \u7684\u65f6\u5019\uff0c\u90fd\u91c7\u7528reward\u800c\u975eprobability\u6765\u4f5c\u4e3a\u8ba1\u7b97\u7684\u6807\u51c6\uff1b\u800c\u6bcf\u4e00\u6b21\u51b3\u5b9a \\(s\\) \u7684\u65f6\u5019\uff0c\u91c7\u7528probability\uff0c\u90a3\u4e48\u8fd9\u6837\u7684autoregressive\u751f\u6210\u5c31\u53ef\u4ee5\u5f88\u597d\u5730\u523b\u753bmodel-based policy optimization\u7684\u8fc7\u7a0b\u3002\u5f53\u7136\uff0c\u8d2a\u5fc3\u65b9\u6cd5\u5927\u6982\u4e0d\u591f\u4f18\uff0c\u6240\u4ee5\u53ef\u80fd\u9700\u8981beam search\u3002</p> <p>\u4e0d\u4ec5\u5982\u6b64\uff0c\u8fd9\u4e00\u65b9\u6cd5\u4e0d\u518d\u5177\u6709distribution shift\u7684\u95ee\u9898\uff0c\u56e0\u4e3alanguage model\u672c\u8d28\u5c31\u662f\u53d6\u4e00\u4e2a\u6700\u5927\u6982\u7387\u7684sequence\uff0c\u6240\u4ee5\u8fd9\u6837\u7684\u5e8f\u5217\u4e00\u5b9a\u662f\u5728\u539f\u6765\u5206\u5e03\u4e2d\u6982\u7387\u6bd4\u8f83\u9ad8\u7684\u3002</p> <p>\u8fd9\u5c31\u662ftrajectory transformer\u7684\u57fa\u672c\u601d\u60f3\u3002\u5f53\u7136\uff0c\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u8fd8\u9700\u8981\u8003\u8651\u5f88\u591a\u7ec6\u8282\uff0c\u6bd4\u5982\u5982\u4f55\u628a\u8fde\u7eed\u7684state\u548caction\u79bb\u6563\u5316\uff08\u4e0d\u80fd\u7b80\u5355\u5730\u5168\u90e8\u79bb\u6563\u5316\uff0c\u5426\u5219\u51fa\u6765\u7684\u4e2a\u6570\u662f\u968f\u7740\u7ef4\u5ea6\u6307\u6570\u589e\u5927\u7684\uff1b\u9700\u8981\u628a\u6bcf\u4e00\u4e2astate\u62c6\u4e3a \\(d_s\\) \u4e2atoken\u624d\u53ef\u4ee5\u3002\uff09\uff0c\u7b49\u7b49\u3002\u540c\u65f6\uff0c\u5b83\u7684\u4ee3\u4ef7\u4e5f\u5f88\u660e\u663e\uff0c\u6211\u4eec\u9700\u8981\u8bad\u7ec3\u4e00\u4e2a\u5f88\u5927\u5f88\u5927\u7684\u6a21\u578b\uff0c\u624d\u80fd\u5b8c\u6210\u4e4b\u524d\u6bd4\u8f83\u5c0f\u7684\u4efb\u52a1\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap14/#summary_and_practial_tips","title":"Summary and Practial Tips","text":"<p>Offline RL\u8fc4\u4eca\u4e3a\u6b62\u8fd8\u662f\u4e00\u4e2a\u5341\u5206\u524d\u6cbf\u7684\u9886\u57df\u3002\u56e0\u6b64\uff0c\u4e0d\u540c\u7684\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6cd5\u4e5f\u6ca1\u6709\u56fa\u5b9a\u7684\u8bf4\u6cd5\u3002\u8fd9\u95e8\u8bfe\u7684\u8001\u5e08Sergey Levine\u4f5c\u4e3a\u8fd9\u4e00\u9886\u57df\u7684\u4e13\u5bb6\uff0c\u7ed9\u51fa\u4e86\u5982\u4e0b\u7684\u5efa\u8bae\uff1a</p> <ul> <li>\u5bf9\u4e8e\u7eaf\u7cb9offline\u8bad\u7ec3\uff1a<ul> <li>\u4f7f\u7528CQL\u6216IQL</li> </ul> </li> <li>\u5bf9\u4e8eoffline pretrain\u548conline finetune\u7684\u8fd9\u6837\u7684\u8fc7\u7a0b\uff1a<ul> <li>\u4f7f\u7528AWAC\u6216IQL</li> <li>CQL\u4e0d\u597d\uff0c\u56e0\u4e3a\u5373\u4f7f\u5bf9\u4e8eonline\uff0c\u5176policy\u4e5f\u4f1a\u88ab\u9650\u5236\uff0c\u4e0d\u80fd\u8fbe\u5230\u6700\u597d\u7684\u7ed3\u679c\u3002</li> </ul> </li> <li>COMBO\u548cTrajectory Transformer\u7684\u4f7f\u7528\u4e00\u822c\u5728model\u6bd4\u8f83\u7b80\u5355\u7684\u65f6\u5019\uff08\u6bd4\u5982\uff0chumanoid\u8fd9\u6837\u7684\u7b80\u5355\u7684\u7269\u7406\u73af\u5883\uff0ctrajectory transformer\u53ef\u4ee5\u5341\u5206\u7cbe\u786e\u5730\u9884\u6d4b100\u8f6e\u548c\u73af\u5883\u7684\u4ea4\u4e92\uff09\u3002</li> </ul> <p>\u6700\u540e\u518d\u56de\u5230\u4e4b\u524d\u7684\u95ee\u9898\uff0c\u6211\u4eec\u4e3a\u4ec0\u4e48\u8981\u7814\u7a76offline RL\uff1f\u5176\u5b9e\uff0c\u5728\u5b9e\u9645\u7814\u7a76\u4e2d\uff0c\u4eba\u4eec\u6700\u91cd\u89c6\u7684\u5f80\u5f80\u662f\u6570\u636e\u96c6\u7684\u91cd\u7528\u6027\u3002\u6bd4\u5982\uff0c\u4eba\u4eec\u7814\u7a76\u4e00\u79cd\u65b0\u63d0\u51fa\u7684\u7b97\u6cd5\uff0c\u5728\u67d0\u4e2a\u73af\u5883\u4e0b\u5931\u8d25\u4e86\u3002\u968f\u540e\uff0c\u4eba\u4eec\u7ed9\u51fa\u4e86\u8fd9\u4e00\u7b97\u6cd5\u7684\u6539\u8fdb\uff0c\u90a3\u4e48\u539f\u5148\u5931\u8d25\u7684\u6570\u636e\u8fd8\u53ef\u4ee5\u62ff\u8fc7\u6765\u91cd\u7528\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u4e0d\u9519\u7684initialization\uff1b\u800c\u65b0\u7684\u6570\u636e\u53c8\u53ef\u4ee5\u88ab\u52a0\u5165\u6570\u636e\u96c6\u3002\u8fd9\u6837\uff0c\u6bcf\u4e00\u70b9\u52aa\u529b\u90fd\u6ca1\u6709\u88ab\u6d6a\u8d39\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap14/#reference_papers","title":"Reference Papers","text":"<ol> <li>AWAC: Accelerating Online Reinforcement Learning with Offline Datasets</li> <li>Offline Reinforcement Learning with Implicit Q-Learning</li> <li>Conservative Q-Learning for Offline Reinforcement Learning</li> <li>MOPO: Model-Based Offline Policy Optimization\uff08\u60e9\u7f5a\u6a21\u578b\u4e0d\u786e\u5b9a\u5ea6\u7684\u65b9\u6cd5\uff09</li> <li>COMBO: Conservative Offline Model-Based Policy Optimization</li> <li>Reinforcement Learning as One Big Sequence Modeling Problem\uff08Trajectory Transformer\uff09</li> <li>Actionable Models: Unsupervised Offline Reinforcement Learning of Robotic Skills\uff08Unsupervised learning\uff0c\u57fa\u4e8egoal-conditioned\uff09</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap15/","title":"Reinforcement Learning Theory Basics","text":"<p>\u5728\u8fd9\u4e00\u8bb2\u4e2d\uff0c\u6211\u4eec\u4ecb\u7ecd\u57fa\u7840\u7684\u4e00\u4e9bRL\u7406\u8bba\u77e5\u8bc6\u3002\u9996\u5148\uff0c\u4ec5\u9488\u5bf9\u672c\u8bb2\uff0c\u505a\u4e00\u58f0\u660e\uff1a - \u5ffd\u7565global constant\u3002\u6bd4\u5982\uff0c\u4e00\u4e2a\u65b9\u6cd5\u6210\u529f\u7684\u6982\u7387\u662f \\(1-\\delta\\) \uff0c\u548c\u662f \\(1-2\\delta\\) \uff0c\u6ca1\u6709\u533a\u522b\u3002 - \u4e0d\u52a0\u8bf4\u660e\u7684\u8303\u6570\u90fd\u662f \\(\\infty\\) \u8303\u6570\uff0c\u4e5f\u5c31\u662f\u5206\u91cf\u7684\u6700\u5927\u503c\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap15/#what_we_expect","title":"What we expect","text":"<p>\u9996\u5148\u63d0\u95ee\uff1a\u6211\u4eec\u5e0c\u671b\u4eceRL\u7406\u8bba\u4e2d\u83b7\u5f97\u4ec0\u4e48\uff1f</p> <p>Student: \u6211\u4eec\u5e0c\u671b\u7ed9\u51fa\u4e00\u4e2a\u5b9a\u91cf\u7684\u523b\u753b\uff01\u6bd4\u5982\u8bf4\uff0c\u6211\u4eec\u8bbe\u6cd5\u8ba1\u7b97\u51fa\uff0cdiscount\u662f0.98\u7684\u65f6\u5019\u6700\u7ec8\u7684policy\u83b7\u5f97\u7684Q\u503c\u7684\u671f\u671b\u503c\u662fdiscount\u662f0.99\u7684\u65f6\u5019\u76840.871\u500d\u3002</p> <p>Teacher: \u8fd9\u57fa\u672c\u4e0d\u53ef\u80fd\u3002\u4f60\u8fd9\u597d\u6bd4\u7528\u666e\u901a\u7269\u7406\u7684\u77e5\u8bc6\u5206\u6790\u4e00\u4e2a\u5b9e\u9645\u6c7d\u8f66\u4e2d\u7684\u6c7d\u6cb9\u53d1\u52a8\u673a\u7684\u8f93\u51fa\u529f\u7387\uff1a\u9700\u8981\u8003\u8651\u7684\u56e0\u7d20\u592a\u591a\u4e86\uff0c\u4f60\u5f88\u96be\u786e\u4fdd\u4f60\u7684\u7ed3\u679c\u662f\u7cbe\u786e\u7684\u3002</p> <p>Student: \u90a3\u2026\u2026\u6211\u4eec\u5e0c\u671b\u8bba\u8bc1\u7b97\u6cd5\u53ef\u4ee5\u8fbe\u5230\u4e00\u4e2a\u754c\uff1f\u6bd4\u5982\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u7b97\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u8bba\u8bc1\u5728\u4efb\u610f\u7684MDP\u95ee\u9898\u4e0b\uff0c\u4ee5\u8d85\u8fc70.99\u7684\u6982\u7387\uff0c\u5b83\u6700\u7ec8\u5230\u8fbe\u7684Q\u503c\u4e0d\u5dee\u4e8e\u6700\u4f18\u7b56\u7565\u76840.98\u500d\uff1f</p> <p>Teacher: \u8fd8\u662f\u4e0d\u53ef\u80fd\u3002\u73b0\u4ee3\u7684RL\u65b9\u6cd5\uff0c\u8fde\u6536\u655b\u6027\u90fd\u65e0\u6cd5\u4fdd\u8bc1\uff0c\u66f4\u522b\u63d0\u8fd9\u79cd\u5f3a\u7684\u754c\u4e86\u3002</p> <p>Student: \u5509\uff0c\u90a3\u6211\u4eec\u5230\u5e95\u80fd\u83b7\u5f97\u4ec0\u4e48\u5462\uff1f</p> <p>Teacher: \u6211\u4eec\u53ef\u4ee5\u83b7\u5f97\u4e00\u4e9b\u5b9a\u6027\u7684\u7ed3\u8bba\u3002\u6bd4\u5982\u8bf4\uff0c\u67d0\u4e2a\u7b97\u6cd5\u8dd1\u51fa\u7684\u7b56\u7565\u548c\u6700\u4f18\u7b56\u7565\u7684\u5dee\u8ddd\uff0c\u968f\u7740state space\u7684\u589e\u5927\u662f\u53d8\u5927\u8fd8\u662f\u53d8\u5c0f\uff1f\u968f\u7740horizon\uff08\u5b9a\u4e49\u4e3a \\(\\frac{1}{1-\\gamma}\\) \uff09\u53c8\u662f\u600e\u4e48\u53d8\u7684\uff1f\u6b64\u5916\uff0c\u8fd8\u5fc5\u987b\u5f3a\u8c03\uff0c\u5373\u4f7f\u662f\u8fd9\u6837\uff0c\u6211\u4eec\u4e5f\u65e0\u6cd5\u4fdd\u8bc1\u50cf\u4f60\u6240\u8bf4\u7684\uff0c\u201c\u5bf9\u4efb\u610f\u7684MDP\u95ee\u9898\u90fd\u7ed9\u51fa\u4fdd\u8bc1\u201d\u3002\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u5f80\u5f80\u9700\u8981\u505a\u5f88\u5f3a\u7684\u5047\u8bbe\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0cRL\u7406\u8bba\u7684\u5173\u952e\u95ee\u9898\u5728\u4e8e\u5728\u5f88\u5f3a\u7684\u5047\u8bbe\u4e0b\u5206\u6790\u6781\u5ea6\u7b80\u5316\u7684\u95ee\u9898\uff0c\u5e76\u7ed9\u51fa\u4e00\u79cd\u6e10\u8fdb\u6210\u7acb\u7684\u754c\u3002\u8fd9\u4e5f\u4e0e\u666e\u901a\u7684ML theory\u7c7b\u4f3c\u3002</p> <p>\u66f4\u52a0specific\u5730\uff0c\u6211\u4eec\u4e00\u822c\u7814\u7a76\u4e24\u79cd\u95ee\u9898\uff1a</p> <ul> <li>exploration\uff1a\u7ed9\u5b9a\u67d0\u4e2aexploration\u65b9\u6cd5\uff0c\u6211\u4eec\u80fd\u5426\u4fdd\u8bc1\u5728 \\(|S|,|A|,T=\\frac{1}{\\gamma}\\) \u7684\u591a\u9879\u5f0f\u6b21\u548c\u73af\u5883\u7684\u4ea4\u4e92\u540e\uff0c\u5230\u8fbe\u67d0\u79cd\u51e0\u4e4e\u8bbf\u95ee\u4e86\u6240\u6709\u6709\u610f\u4e49\u7684(state,action)\u5bf9\u7684\u72b6\u6001\uff1f</li> <li>policy learning\uff1a\u5047\u8bbe\u6211\u4eec\u53ef\u4ee5\u5b8c\u5168explore\uff0c\u90a3\u4e48\u5b66\u5230\u7684policy\u5728\u771f\u5b9e\u7684\u73af\u5883\u4e2d\u8868\u73b0\u5982\u4f55\uff1f    <ul> <li>\u8fd9\u91cc\uff0c\u201c\u5b8c\u5168explore\u201d\u5c31\u662f\u4e00\u79cdstrong assumption\uff0c\u6709\u51e0\u79cd\u9610\u8ff0\uff1a<ul> <li>\u6709\u4e00\u4e2aoracle\uff0c\u53ef\u4ee5\u544a\u8bc9\u6211\u4eec\u4efb\u4f55\u4e00\u4e2a(state,action)\u5bf9\u7684\u4e0b\u4e00\u4e2astate\u7684\u6982\u7387\u5206\u5e03\uff1b</li> <li>\u6216\u8005\u7565\u5f31\u4e00\u4e9b\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a(state,action)\uff0c\u6211\u4eec\u90fd\u81f3\u5c11\u8bbf\u95ee\u4e86 \\(N\\) \u6b21\uff0c\u5f97\u5230\u4e86 \\(N\\) \u4e2anext state\u7684\u6837\u672c\u3002</li> </ul> </li> </ul> </li> </ul> <p>\u6ce8\u610f\u901a\u8fc7\u8fd9\u6837\uff0c\u6211\u4eec\u628apolicy learning\u548cexploration\u89e3\u8026\u5408\uff0c\u8fdb\u800c\u53ef\u4ee5\u5206\u522b\u8ba8\u8bba\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap15/#problem_1_policy_evaluation_with_model","title":"Problem 1: Policy Evaluation with Model","text":"<p>\u6211\u4eec\u5148\u6765\u7814\u7a76\u8fd9\u7b2c\u4e00\u4e2a\u95ee\u9898\u3002\u8fd9\u4e00\u95ee\u9898\u7684\u5047\u8bbe\u662f\uff0c\u6211\u4eec\u5bf9\u4e8e\u6bcf\u4e00\u4e2a \\((s,a)\\) \uff0c\u4ece\u73af\u5883\u7684\u771f\u5b9e\u5206\u5e03 \\(P(s'|s,a)\\) \u4e2d\u91c7\u6837\u4e86 \\(N\\) \u4e2a \\(s'\\) \uff0c\u5e76\u4f7f\u7528\u7edf\u8ba1\u7684\u65b9\u6cd5\u7ed9\u51fa\u4e00\u4e2a\u79bb\u6563\u7684categorical\u5206\u5e03 \\(\\hat{P}(s'|s,a)\\) \u3002\u8fd9\u4e00\u4e2a \\(\\hat{P}\\) \u5c31\u76f8\u5f53\u4e8e\u6211\u4eec\u7684\"model\"\u3002</p> <p>\u7136\u540e\uff0c\u6211\u4eec\u4f7f\u7528\u8fd9\u4e00model\u8fdb\u884c \\(Q\\) value\u7684\u8bad\u7ec3\u3002\u8fd9\u4e00\u90e8\u5206\u7684\u7b97\u6cd5\u4e0d\u662f\u6211\u4eec\u5173\u5fc3\u7684\u5185\u5bb9\uff0c\u56e0\u6b64\u5047\u8bbe\u53ef\u4ee5\u5b66\u5230\u51c6\u786e\u7684Q value\uff0c\u4e5f\u5c31\u662fbellman\u65b9\u7a0b\u4e25\u683c\u88ab\u6ee1\u8db3\u3002\u540c\u65f6\uff0c\u5229\u7528\u8fd9\u4e00Q value\uff08\u8bb0\u4f5c \\(\\hat{Q}\\) \uff09\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u6700\u4f18\u7684\u7b56\u7565 \\(\\hat{\\pi}^{\\star}\\) \uff1b\u800c\u5bf9\u4e8e\u539f\u5148\u7684\u73af\u5883\uff0c\u4e5f\u6709\u4e00\u4e2a\u6700\u4f18\u7684\u7b56\u7565 \\(\\pi^{\\star}\\) \u3002\u6211\u4eec\u4ece\u800c\u5b9a\u4e49\u4e0b\u9762\u7684\u516d\u4e2a\u91cf\uff1a</p> Environment \\(P\\) (real) \\(\\hat{P}\\) (model) Policy= \\(\\pi^{\\star}\\) \\(Q^{\\star}\\) \\(\\hat{Q}^{\\pi^\\star}\\) Policy= \\(\\hat{\\pi}^{\\star}\\) \\(Q^{\\hat{\\pi}^{\\star}}\\) \\(\\hat{Q}^{\\star}\\) Arbitrary Policy \\(\\pi\\) \\(Q^{\\pi}\\) \\(\\hat{Q}^{\\pi}\\) <p>\u6bd4\u5982\u8bf4\uff0c\u7b2c\u4e00\u884c\u7b2c\u4e8c\u5217\u7684\u610f\u601d\u662f\uff0c\u4f7f\u7528 \\(\\hat{P}\\) \u8bad\u7ec3\u51fa\u6765\u4e00\u4e2aQ function\uff0c\u7136\u540e\u628a \\(\\pi^{\\star}\\) \u5728\u8fd9\u4e00Q function\u4e0b\u7684Q\u503c\u8bb0\u4f5c \\(\\hat{Q}^{\\pi^\\star}\\) \u3002</p> <p>\u5728\u8fd9\u4e00\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u5173\u5fc3\u51e0\u4e2a\u95ee\u9898\uff1a</p> <ul> <li>\u5bf9\u4e8e\u67d0\u4e2a\u4efb\u610f\u7684policy \\(\\pi\\) \uff0c \\({Q}^{\\pi}\\) \u548c \\(\\hat{Q}^{\\pi}\\) \u5dee\u591a\u8fdc\uff1f</li> <li>\\({Q}^{\\star}\\) \u548c \\(\\hat{Q}^{\\star}\\) \u76f8\u5dee\u591a\u8fdc\uff1f</li> <li>\uff08\u7ec8\u6781\u95ee\u9898\uff0c\u4e5f\u662f\u6700\u6709\u7528\u7684\u95ee\u9898\uff09 \\(Q^{\\star}\\) \u548c \\(Q^{\\hat{\\pi}^\\star}\\) \u5dee\u591a\u8fdc\uff1f\u6ce8\u610f\u8fd9\u4e00\u95ee\u9898\u5c31\u662f\u8bf4\u6211\u4eec\u7684model\u6700\u7ec8\u80fd\u8868\u73b0\u7684\u591a\u597d\u3002</li> </ul> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u524d\u9762\u4e24\u4e2a\u95ee\u9898\u76f8\u5f53\u4e8e\u4e3a\u6700\u540e\u4e00\u4e2a\u95ee\u9898\u505a\u4e86\u94fa\u57ab\u3002\u6211\u4eec\u5148\u7814\u7a76\u7b2c\u4e00\u4e2a\u95ee\u9898\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap15/#distance_of_qpi_and_hatqpi","title":"Distance of \\(Q^{\\pi}\\) and \\(\\hat{Q}^{\\pi}\\)","text":"<p>\u9996\u5148\uff0c\u6211\u4eec\u770b\u4e00\u770b\u6211\u4eec\u6709\u54ea\u4e9b\u5df2\u77e5\u7684\u5de5\u5177\u3002\u6839\u636e\u5047\u8bbe\uff0c\u6709</p> \\[ Q^{\\pi}(s_t,a_t)=r(s_t,a_t)+\\gamma \\mathbb{E}_{s_{t+1}\\sim P(s_{t+1}|s_t,a_t)}[\\mathbb{E}_{a_{t+1}}[Q^{\\pi}(s_{t+1},a_{t+1})]] \\] <p>\u6211\u4eec\u53ef\u4ee5\u8bd5\u7740\u628a\u5b83\u5199\u4e3a\u77e9\u9635\u7684\u5f62\u5f0f\u3002\u4e3a\u6b64\uff0c\u5f15\u5165\u4e24\u4e2a\u77e9\u9635\uff1a \\(P\\in \\mathbb{R}_{(|S|\\cdot |A|)\\times |S|}\\) \u5bf9\u5e94\u7740\u73af\u5883\u8f6c\u79fb\u7684\u6982\u7387\u5206\u5e03\uff1b\u800c \\(\\Pi\\in \\mathbb{R}_{|S|\\times(|S|\\cdot |A|)}\\) \u5bf9\u5e94\u7740reward\u7684\u671f\u671b\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u51fa</p> \\[ Q=r+\\gamma P\\Pi Q \\] <p>\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u6709 \\(Q^{\\pi}=r+\\gamma P\\Pi Q^{\\pi}\\) \u548c \\(\\hat{Q}^{\\pi}=r+\\gamma \\hat{P}\\Pi \\hat{Q}^{\\pi}\\) \u3002\u7531\u6b64\u53ef\u4ee5\u5f97\u5230</p> \\[ Q^{\\pi}-\\hat{Q}^{\\pi}=\\gamma \\left({P}\\Pi {Q}^{\\pi}-\\hat{P}\\Pi {Q}^{\\pi}\\right)+\\gamma \\left(\\hat{P}\\Pi Q^{\\pi}-\\hat{P}\\Pi \\hat{Q}^{\\pi}\\right) \\] <p>\u8fd9\u7ed9\u51fa</p> \\[ Q^{\\pi}-\\hat{Q}^{\\pi}=(1-\\gamma \\hat{P}\\Pi)^{-1}\\cdot \\gamma (P-\\hat{P})\\Pi Q^{\\pi} \\] <p>\u6b64\u65f6\uff0c\u5982\u679c\u6211\u4eec\u4f30\u8ba1 \\(Q^{\\pi}\\) \u548c \\(\\hat{Q}^{\\pi}\\) \u7684\u65e0\u7a77\u8303\u6570\uff08\u5373\u6700\u5927\u7edd\u5bf9\u503c\uff09\uff0c\u6211\u4eec\u5c31\u6709</p> \\[ ||Q^{\\pi}-\\hat{Q}^{\\pi}||_{\\infty}\\le \\gamma \\cdot \\frac{1}{1-\\gamma} ||\\Pi Q^{\\pi}||_{\\infty}\\cdot ||P-\\hat{P}||_{\\infty} \\] <p>\u5176\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e86\u4ee5\u4e0b\u6bd4\u8f83\u76f4\u89c2\u7684\u7ed3\u8bba\uff1a\u5982\u679c\u77e9\u9635 \\(A\\) \u6ee1\u8db3 \\(||A||_{\\infty}&lt;1\\) \uff08\u628a\u77e9\u9635\u7684\u65e0\u7a77\u8303\u6570\u5b9a\u4e49\u4e3a\u6bcf\u4e00\u884c\u7684\u7edd\u5bf9\u503c\u548c\u7684\u6700\u5927\u503c\uff09\uff0c\u90a3\u4e48</p> \\[ ||(1-\\gamma A)^{-1}v||_{\\infty}\\le \\frac{||v||_{\\infty}}{1-\\gamma},\\forall v \\] <p>\uff08\u8fd9\u91cc\u7565\u53bb\u8bc1\u660e\uff0c\u6bd4\u5982\u4e00\u4e2a\u53ef\u80fd\u7684\u65b9\u6cd5\u662f\u628a\u5de6\u8fb9\u5c55\u5f00\u4e3a\u7ea7\u6570\uff09\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u53ea\u9700\u8981\u8003\u5bdf\u5982\u4f55\u4f30\u8ba1\u7b49\u5f0f\u53f3\u8fb9\u5269\u4e0b\u7684\u4e24\u4e2a\u65e0\u7a77\u8303\u6570\u3002\u9996\u5148\uff0c\u5bf9\u4e8e \\(\\Pi Q^{\\pi}\\) \uff0c\u6ce8\u610f\u5230\u5b83\u5177\u6709reward\u7684\u91cf\u7eb2\uff0c\u56e0\u6b64\u6211\u4eec\u5fc5\u987b\u6709\u4e00\u4e2a\u540c\u6837\u91cf\u7eb2\u7684\u4e1c\u897f\u624d\u80fdbound\u4f4f\u5b83\u3002\u4e0d\u59a8\u8bbe \\(r(s,a)\\) \u5177\u6709\u4e0a\u754c \\(R_m\\) \uff0c\u90a3\u4e48\u53ef\u4ee5\u7ed9\u51fa</p> \\[ (\\Pi Q^{\\pi})(s)=\\sum_{a}\\pi(a|s)Q^{\\pi}(s,a)\\le \\max_{a}[Q^{\\pi}(s,a)]\\le \\frac{R_m}{1-\\gamma} \\] <p>\u800c\u5bf9\u4e8e \\(P-\\hat{P}\\) \uff0c\u8fd9\u4e00\u9879\u5b9e\u9645\u4e0a\u662f\u5728\u8bf4\uff0c\u6211\u4eec\u91c7\u6837\u4f30\u8ba1\u51fa\u6765\u7684model\u548c\u771f\u5b9e\u60c5\u51b5\u6bd4\u8f83\u76f8\u4f3c\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528\u4e00\u4e9b\u4f30\u8ba1\u91c7\u6837\u7684bound\u3002\u67d0\u4e2a\u6bd4\u8f83\u9ad8\u7ea7\u7684concentration inequality\u7ed9\u51fa\uff0c\u5bf9\u4e8e \\((s,a)\\) \uff0c\u91c7\u6837\u5f97\u5230\u7684total variational distance</p> \\[ \\Pr\\left\\{\\sum_{s'}\\left|\\frac{N(s',s,a)}{N(s,a)}-P(s'|s,a)\\right|\\ge \\sqrt{|S|}\\epsilon \\right \\}\\le 2e^{-2N(s,a)\\epsilon^2} \\] <p>\u8fd9\u4e5f\u5c31\u662f\u8bf4\uff0c</p> \\[ \\left|\\left|\\hat{P}-P\\right|\\right|_{\\infty}\\le  \\sqrt{|S|}\\cdot \\sqrt{\\frac{\\log \\frac{1}{\\delta}}{N}}\\quad \\text{w.p. } 1-\\delta  \\] <p>\uff08\u5176\u4e2d \\(N\\) \u662f\u6240\u6709 \\(N(s,a)\\) \u7684\u6700\u5c0f\u503c\uff09\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u628a\u6240\u6709\u8fd9\u4e9b\u7ed3\u679c\u603b\u7ed3\u8d77\u6765\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\uff1a</p> \\[ ||Q^{\\pi}-\\hat{Q}^{\\pi}||_{\\infty}\\le \\gamma \\cdot \\frac{1}{1-\\gamma}  \\frac{R_m}{1-\\gamma}\\cdot \\sqrt{\\frac{|S|\\cdot\\log \\frac{1}{\\delta}}{N}} \\quad \\text{w.p. } 1-\\delta \\] <p>\u8fd9\u5c31\u7ed9\u51fa\u6211\u4eec\u7b2c\u4e00\u4e2a\u95ee\u9898\u7684\u754c\u3002\u6211\u4eec\u7a0d\u5fae\u505c\u4e0b\u6765\u4e00\u4e0b\u6765\u5206\u6790\u8fd9\u4e00\u95ee\u9898\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c \\(||Q^{\\pi}-\\hat{Q}^{\\pi}||_{\\infty}\\) \u4ee3\u8868\u6211\u4eec\u7684model\u7ed9\u51fa\u7684policy \\(\\pi\\) \u7684\u8bc4\u4f30\u548c\u73af\u5883\u771f\u6b63\u8bc4\u4f30\u7684\u5dee\u8ddd\u3002\u53ef\u4ee5\u9996\u5148\u770b\u5230\uff0c\u5b83\u5bf9\u4e8ehorizon \\(\\frac{1}{1-\\gamma}\\) \u662f\u4e8c\u6b21\u7684\uff0c\u8fd9\u5f88\u7b26\u5408\u6211\u4eec\u7684\u76f4\u89c9\uff08\u8fd8\u8bb0\u5f97\u65e9\u5728\u7b2c\u4e8c\u8bb2\uff0c\u6211\u4eec\u5c31\u53d1\u73b0\u5230\u4e00\u6b65\u4e00\u6b65\u8fd9\u6837\u7684\u8d70\uff0c\u5fc5\u5b9a\u662f \\(O(T^2)\\) \u7684\u8bef\u5dee\uff0c\u56e0\u6b64model-based\u65b9\u6cd5\u91c7\u96c6\u51fa\u6765\u7684\u4eba\u9020\u8f68\u8ff9\u5c31\u5fc5\u5b9a\u662f \\(O(T^2)\\) \uff09\u3002\u5176\u6b21\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u4e2a\u8bef\u5dee\u548c \\(N\\) \u662f\u6839\u53f7\u53cd\u6bd4\u7684\uff0c\u56e0\u6b64\u589e\u52a0model\u7684\u8bad\u7ec3\u7684\u6837\u672c\u6570\uff0c\u53ef\u4ee5\u663e\u8457\u51cf\u5c0f\u8fd9\u4e2a\u8bef\u5dee\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap15/#solving_the_full_problem","title":"Solving the Full Problem","text":"<p>\u4ee4\u4eba\u60ca\u8bb6\u7684\u662f\uff0c\u73b0\u5728\u5176\u5b9e\u6211\u4eec\u5c31\u53ef\u4ee5\u5b8c\u6574\u89e3\u51b3\u4e4b\u524d\u63d0\u51fa\u7684\u95ee\u9898\u4e86\uff01\u770b\u8d77\u6765\uff0c\u4e4b\u524d\u63d0\u51fa\u7684\u4e09\u4e2a\u95ee\u9898\u6211\u4eec\u53ea\u5206\u6790\u4e86\u5176\u4e2d\u4e00\u4e2a\uff0c\u4f46\u7b2c\u4e8c\u4e2a\u5176\u5b9e\u7acb\u523b\u53ef\u4ee5\u4f30\u8ba1\u51fa\u6765\u3002\u56de\u987e\u4e00\u4e0b\uff0c\u8fd9\u4e00\u95ee\u9898\u662f\u8bf4</p> <p>\\({Q}^{\\star}\\) \u548c \\(\\hat{Q}^{\\star}\\) \u76f8\u5dee\u591a\u8fdc\uff1f\u8fd9\u91cc\uff0c\u524d\u8005 \\(Q^{\\star}\\) \u662f\u5728\u771f\u5b9e\u73af\u5883\u4e0b\u8bad\u7ec3\u51fa\u6765\u7684\u6700\u4f18policy\u7684Q\u503c\uff0c\u800c\u540e\u8005 \\(\\hat{Q}^{\\star}\\) \u662f\u5728model\u4e0b\u8bad\u7ec3\u51fa\u6765\u7684\u6700\u4f18policy\u7684Q\u503c\u3002</p> <p>\u8fd9\u76f8\u5f53\u4e8e\u6bd4\u8f83 \\(\\sup f(x)\\) \u548c \\(\\sup g(x)\\) \u4e4b\u95f4\u7684\u5dee\u8ddd\uff0c\u800c\u6211\u4eec\u8003\u8651\u7684\u7b2c\u4e00\u4e2a\u95ee\u9898\u76f8\u5f53\u4e8e\u7ed9\u51fa\u4e86\u5bf9\u4e8e\u540c\u4e00\u4e2a \\(x\\) \uff0c \\(f(x)\\) \u548c \\(g(x)\\) \u7684\u5dee\u8ddd\u6709\u591a\u5927\u3002\u56e0\u6b64\uff0c\u53ef\u4ee5\u7ed9\u51fa</p> \\[ ||Q^\\star-\\hat{Q}^{\\star}||_{\\infty}=||\\sup_{\\pi}Q^{\\pi}-\\sup_{\\pi}\\hat{Q}^{\\pi}||_\\infty \\] \\[ \\le \\sup_{\\pi}||Q^{\\pi}-\\hat{Q}^{\\pi}||_{\\infty} \\le \\gamma \\cdot \\frac{1}{1-\\gamma}  \\frac{R_m}{1-\\gamma}\\cdot \\sqrt{\\frac{|S|\\cdot\\log \\frac{1}{\\delta}}{N}} \\quad \\text{w.p. } 1-\\delta \\] <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u7b2c\u4e8c\u4e2a\u95ee\u9898\u5bf9\u5e94\u7684\u8ddd\u79bb\u548c\u7b2c\u4e00\u4e2a\u662f\u5dee\u4e0d\u591a\u5927\u7684\uff08\u6216\u8005\u4e0d\u8d85\u8fc7\u7b2c\u4e00\u4e2a\u7684\u5927\u5c0f\uff09\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u89e3\u51b3\u4e86\u7b2c\u4e8c\u4e2a\u95ee\u9898\u3002\u6700\u540e\uff0c\u7b2c\u4e09\u4e2a\u95ee\u9898\u5c31\u662f\u524d\u4e24\u4e2a\u7684\u7b80\u5355\u7ec4\u5408\uff1a</p> \\[ ||Q^{\\star}-Q^{\\hat{\\pi}^\\star}||_{\\infty}\\le ||Q^{\\star}-\\hat{Q}^{\\star}||_{\\infty}+||\\hat{Q}^{\\star}-Q^{\\hat{\\pi}^\\star}||_{\\infty} \\] <p>\u8fd9\u91cc\u7b2c\u4e00\u9879\u662f\u7b2c\u4e8c\u4e2a\u95ee\u9898\u7ed9\u51fa\u7684\u8ddd\u79bb\uff0c\u7b2c\u4e8c\u9879\u5219\u662f\u7b2c\u4e00\u4e2a\u95ee\u9898\u7ed9\u51fa\u7684\u8ddd\u79bb\uff0c\u5176\u4e2d\u53d6 \\(\\pi=\\hat{\\pi}^{\\star}\\) \u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u6700\u7ec8\u5f97\u51fa\uff1a</p> <p>\u8bef\u5dee</p> \\[ ||Q^{\\star}-Q^{\\hat{\\pi}^\\star}||_{\\infty}=\\mathcal{O}\\left(\\frac{R_m}{(1-\\gamma)^2}  \\sqrt{\\frac{|S|\\cdot\\log \\frac{1}{\\delta}}{N}} \\right) \\quad \\text{w.p. } 1-\\delta \\]"},{"location":"Online%20CS%20Courses/CS285/chap15/#problem_2_policy_learning","title":"Problem 2: Policy Learning","text":"<p>\u524d\u9762\uff0c\u6211\u4eec\u5df2\u7ecf\u5206\u6790\u4e86exploration\uff0c\u4e5f\u5c31\u662f\u5efa\u7acbmodel\u7684\u51c6\u786e\u6027\uff08\u5728\u524d\u9762\u7684\u5206\u6790\u4e2d\uff0c\u6211\u4eec\u8003\u8651\u5728model\u4e0b\u9762\u7684optimal policy\uff0c\u4e5f\u5c31\u662f\u76f8\u5f53\u4e8e\u5047\u8bbe\u6709\u4e00\u4e2a\u5f88\u597d\u7684\u7b97\u6cd5\u53ef\u4ee5\u5728\u4efb\u610f\u7684\u73af\u5883\u4e0b\u9762\u5b66\u4f1aoptimal policy\uff09\u3002\u800c\u73b0\u5728\uff0c\u5728\u8fd9\u4e00\u95ee\u9898\u4e2d\uff0c\u4e24\u4e2a\u5730\u4f4d\u8c03\u8f6c\u4e86\u2014\u2014\u5047\u8bbe\u6211\u4eec\u5df2\u7ecf\u5b8c\u5168\u4e86\u89e3\u4e86\u73af\u5883\uff0c\u4e5f\u5c31\u662f\u53ef\u4ee5\u4ecetransition\u4e2d\u65e0\u9650\u81ea\u7531\u5730\u91c7\u6837\uff0c\u90a3\u4e48\u6211\u4eec\u7a76\u7adf\u80fd\u628apolicy\u5b66\u5f97\u591a\u597d\uff1f</p> <p>\u6211\u4eec\u6765\u5206\u6790fitted Q-iteration \u7b97\u6cd5\u3002\u5176\u5b9e\uff0c\u65e9\u5728\u7b2c\u4e03\u8bb2\u6700\u5f00\u59cb\u4ecb\u7ecdQ iteration\u65b9\u6cd5\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5c31\u5df2\u7ecf\u8fdb\u884c\u4e86\u4e00\u5b9a\u7684\u5206\u6790\u3002\u8fd9\u91cc\u7684\u5176\u5b9e\u4e5f\u5927\u540c\u5c0f\u5f02\u3002</p> <p>\u5bf9\u4e8e\u7406\u60f3\u4e2d\u5b8c\u5168\u51c6\u786e\u7684 \\(Q\\) iteration\uff0c\u6211\u4eec\u6709</p> \\[ Q_{k+1}\\leftarrow TQ_{k}:= r+\\gamma P \\max_{a} Q_k \\] <p>\u8fd9\u91cc \\(T\\) \u5c31\u662fBellman operator\u3002\u4f46\u662f\uff0c\u73b0\u5728\u6709\u4e24\u4e2a\u53ef\u80fd\u7684\u8bef\u5dee\u6765\u6e90\uff1a</p> <ul> <li>\u91c7\u6837\u8bef\u5dee\uff1a\u6211\u4eec\u603b\u5f52\u4e0d\u80fd\u4ece\u73af\u5883\u4e2d\u65e0\u9650\u5730\u91c7\u6837\uff0c\u56e0\u6b64 \\(P,r\\) \u53ea\u80fd\u901a\u8fc7\u6709\u9650\u7684\u91c7\u6837\u6765\u4f30\u8ba1\uff1b</li> <li>\u8fd1\u4f3c\u8bef\u5dee\uff1a\u6211\u4eec\u7684 \\(Q\\) \u7f51\u7edc\u8868\u73b0\u80fd\u529b\u6709\u9650\uff0c\u56e0\u6b64\u62df\u5408\u7684\u65f6\u5019\u53ef\u80fd\u5b58\u5728\u8bef\u5dee\u3002\u8fd9\u91cc\u4e3a\u4e86\u7b80\u5355\uff0c\u6211\u4eec\u5047\u8bbeQ \u7f51\u7edc\u7684\u5b66\u4e60\u76ee\u6807\u662f \\(\\infty\\) -\u8303\u6570\uff0c\u800c\u975e2-\u8303\u6570\u3002\uff08\u5bf9\u5e94\u5730\uff0c\u6211\u4eec\u5047\u8bbe\u8bef\u5dee\u5f88\u5c0f\u662f\u5047\u8bbe \\(\\infty\\) -\u8303\u6570\u5f88\u5c0f\uff0c\u8fd9\u5b9e\u9645\u4e0a\u662f\u6bd4\u8f83\u5f3a\u7684\u2014\u2014\u5982\u679c\u5047\u8bbe2-\u8303\u6570\u5f88\u5c0f\uff0c\u4e8b\u5b9e\u4e0a\u5e76\u4e0d\u80fd\u987a\u5229\u5730\u5b8c\u6210\u8bba\u8bc1\u3002\uff09</li> </ul> <p>\u636e\u6b64\uff0c\u6211\u4eec\u8bb0 \\(\\hat{T}\\) \u4e3aapproximate Bellman Operator\uff1a</p> \\[ \\hat{T}Q=\\hat{r}+\\gamma \\hat{P} \\max_{a} Q,\\quad \\hat{P}(s'|s,a)=\\frac{N(s',s,a)}{N(s,a)},\\quad \\hat{r}(s,a)=\\begin{cases}0&amp;,N(s,a)=0\\\\r(s,a)&amp;,N(s,a)&gt;0\\end{cases} \\] <p>\uff08\u6ce8\u610f\u5bf9\u4e8e\u6ca1\u6709\u7ecf\u5386\u8fc7\u7684 \\((s,a)\\) \u5bf9\uff0c\u6211\u4eec\u53ea\u80fd\u628areward\u4f30\u8ba1\u4e3a0\uff09\u800c\u5bf9\u4e8e \\(Q\\) \u7f51\u7edc\u7684\u8bef\u5dee\uff0c\u6211\u4eec\u5047\u8bbe</p> \\[ \\hat{Q}_{k+1}=\\arg\\min_{\\hat{Q}} ||\\hat{Q}-\\hat{T}\\hat{Q}_{k}||_{\\infty} \\] <p>\u5e76\u4e14</p> \\[ ||\\hat{Q}_{k+1}-\\hat{T}\\hat{Q}_{k}||_{\\infty}\\le \\epsilon \\] <p>\u6211\u4eec\u7684\u76ee\u6807\u5c31\u662f\u5206\u6790 \\(\\hat{Q}_{k}\\) \u548c \\(Q^{\\star}\\) \u7684\u5dee\u8ddd\u5728 \\(k\\to \\infty\\) \u7684\u884c\u4e3a\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u5206\u522b\u5904\u7406\u4e24\u4e2a\u8bef\u5dee\u6765\u6e90\uff0c\u518d\u8bbe\u6cd5\u628a\u4ed6\u4eec\u5408\u5e76\u8d77\u6765\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap15/#analysis_of_sampling_error","title":"Analysis of Sampling Error","text":"<p>\u9996\u5148\uff0c\u6211\u4eec\u8003\u8651\u91c7\u6837\u8bef\u5dee\u3002\u8fd9\u4e00\u8bef\u5dee\u5bf9\u5e94\u7740 \\(||\\hat{T}Q-TQ||_\\infty\\) \u7684\u4f30\u8ba1\uff0c\u5176\u4e2d \\(Q\\) \u53ef\u4ee5\u662f\u4efb\u4f55\u7684 \\(Q\\) function\u3002\u901a\u8fc7\u76f4\u63a5\u7684\u4ee3\u5165\uff1a</p> \\[ ||\\hat{T}Q-TQ||_\\infty\\le ||\\hat{r}-r||_{\\infty}+\\gamma ||\\hat{P}-P||_{\\infty}||\\max_{a}Q||_{\\infty} \\] <p>\u7136\u540e\uff0c\u6211\u4eec\u89c2\u5bdf\u5230 \\(||\\hat{r}-r||_{\\infty}\\) \u662f \\(\\mathcal{O}(R_m)\\) \u7684\uff1b\u800c \\(||\\max_{a}Q||_{\\infty}\\) \u662f \\(\\mathcal{O}\\left(\\frac{R_m}{1-\\gamma}\\right)\\) \u7684\u3002\u518d\u7ed3\u5408Problem 1\u4e2d\u6211\u4eec\u5206\u6790\u7684 \\(\\hat{P}\\) \u7684\u8bef\u5dee\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\uff1a</p> \\[ ||\\hat{T}Q-TQ||_\\infty= \\mathcal{O}\\left(\\frac{R_m}{1-\\gamma}\\sqrt{\\frac{|S|\\log \\frac{1}{\\delta}}{N}}\\right)\\quad \\text{w.p. } 1-\\delta \\] <p>\uff08\u8fd9\u91cc\u6211\u4eec\u548cPPT\u91cc\u9762\u7684\u7565\u6709\u4e0d\u540c\uff0c\u56e0\u4e3aPPT\u91cc\u9762\u5b9e\u9645\u4e0a\u8ba4\u4e3areward \\(r(s,a)\\) \u4e5f\u662f\u968f\u673a\u7684\u3002\u8fd9\u867d\u7136\u66f4\u666e\u9002\uff0c\u4f46\u9274\u4e8e\u6211\u4eec\u4e4b\u524d\u4ece\u6ca1\u6709\u8003\u8651\u8fc7\u8fd9\u6837\u7684\u60c5\u51b5\uff0c\u5f15\u5165\u6bd4\u8f83\u7a81\u5140\u3002\uff09</p> <p>\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u5b8c\u6210\u4e86\u5bf9\u91c7\u6837\u8bef\u5dee\u7684\u5206\u6790\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap15/#analysis_of_approximation_error","title":"Analysis of Approximation Error","text":"<p>\u5bf9\u4e8eApproximation Error\uff0c\u6211\u4eec\u7c7b\u4f3c\u4e8eML\u91cc\u5206\u6790\u68af\u5ea6\u4e0b\u964d\u90a3\u6837\uff0c\u6765\u8003\u5bdf \\(\\hat{Q}_k\\) \u548c\u76ee\u6807 \\(Q^{\\star}\\) \u7684\u5dee\u8ddd\uff0c\u5e76\u8bd5\u56fe\u5efa\u7acb\u4e00\u4e2a\u9012\u63a8\u5173\u7cfb\u3002\u6709\uff1a</p> \\[ ||\\hat{Q}_{k+1}-Q^{\\star}||_{\\infty}\\le ||\\hat{Q}_{k+1}-T\\hat{Q}_{k}||_{\\infty}+||T\\hat{Q}_k-Q^{\\star}||_{\\infty} \\] <p>\uff08\u6ce8\u610f\u4e3a\u4e86\u628a\u4e24\u4e2a\u5f71\u54cd\u5206\u5f00\uff0c\u6211\u4eec\u8fd9\u91cc\u5148\u8003\u8651 \\(T\\) \uff0c\u800c\u4e0d\u662f \\(\\hat{T}\\) \u3002\uff09\u6ce8\u610f\u5230\uff0c \\(T{Q}^{\\star}=Q^{\\star}\\) \uff0c\u5e76\u4e14 \\(T\\) \u662f\u4e00\u4e2acontractive operator\uff0c\u56e0\u6b64\u6709\uff1a</p> \\[ ||\\hat{Q}_{k+1}-Q^{\\star}||_{\\infty}\\le ||\\hat{Q}_{k+1}-T\\hat{Q}_{k}||_{\\infty}+\\gamma ||\\hat{Q}_k-Q^{\\star}||_{\\infty} \\] <p>\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u9012\u63a8\u7ed9\u51fa\uff1a</p> \\[ \\lim_{k\\to \\infty}||\\hat{Q}_k-Q^\\star||_{\\infty} \\le \\frac{1}{1-\\gamma}\\max_{k}||\\hat{Q}_{k+1}-T\\hat{Q}_{k}||_{\\infty} \\] <p>\u8fd9\u5c31\u662f\u5206\u6790Approximation Error\u5f97\u5230\u7684\u7ed3\u679c\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap15/#combining_the_two_errors","title":"Combining the Two Errors","text":"<p>\u6700\u540e\uff0c\u6211\u4eec\u628a\u4ed6\u4eec\u7ed3\u5408\u8d77\u6765\u3002\u8fd9\u4e00\u6b65\u5df2\u7ecf\u5f88\u660e\u786e\u4e86\uff1a</p> \\[ \\lim_{k\\to \\infty}||\\hat{Q}_k-Q^\\star||_{\\infty} \\le \\frac{1}{1-\\gamma}\\max_{k}||\\hat{Q}_{k+1}-T\\hat{Q}_{k}||_{\\infty} \\] \\[  \\le \\frac{1}{1-\\gamma}\\left[||\\hat{Q}_{k+1}-\\hat{T}\\hat{Q}_{k}||_{\\infty}+||\\hat{T}\\hat{Q}_{k}-T\\hat{Q}_{k}||_{\\infty}\\right] \\] \\[ =\\mathcal{O}\\left(\\frac{R_m}{(1-\\gamma)^2}\\sqrt{\\frac{|S|\\log \\frac{1}{\\delta}}{N}}+\\frac{\\epsilon}{1-\\gamma}\\right)\\quad \\text{w.p. } 1-\\delta \\] <p>\u5176\u4e2d\u6700\u540e\u4e00\u6b65\uff0c\u524d\u4e00\u9879\u4f7f\u7528\u6211\u4eec\u5bf9approximation error\u7684\u5047\u8bbe\uff0c\u800c\u540e\u9762\u4e00\u9879\u662fsampling error\u5206\u6790\u5f97\u5230\u7684\u7ed3\u8bba\u3002</p> <p>\u518d\u6765\u89c2\u770b\u8fd9\u4e00\u7ed3\u679c\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u6211\u4eec\u8fd8\u662f\u83b7\u5f97\u4e86\u4e00\u4e2a\u5bf9horizon \\(\\frac{1}{1-\\gamma}\\) \u6210\u5e73\u65b9\u5173\u7cfb\u7684\u8bef\u5dee\u3002\u8fd9\u6709\u4e9b\u4ee4\u4eba\u60ca\u8bb6\uff0c\u8bf4\u660e\u5373\u4f7f\u662f\u81ea\u7531\u91c7\u6837\u7684\u60c5\u51b5\u4e0b\uff0c\u7531\u4e8eFitted Q iteration\u7b97\u6cd5\u672c\u8eab\u7684\u539f\u56e0\u548c\u91c7\u6837\u7684\u6709\u9650\uff0c\u6211\u4eec\u4ecd\u7136\u4f1a\u9762\u4e34\u8fd9\u4e2a\u95ee\u9898\u3002\u5f53\u7136\uff0c\u7ed9\u5b9a\u66f4\u5f3a\u7684\u5047\u8bbe\uff0c\u53ef\u4ee5\u83b7\u5f97\u66f4\u5f3a\u7684\u7ed3\u8bba\uff0c\u4f46\u8fd9\u91cc\u5c31\u4e0d\u4ecb\u7ecd\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap15/#reference_papers","title":"Reference Papers","text":"<ol> <li>RL Theory Textbook</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap16/","title":"Variational Autoencoder","text":"<p>VAE (Variational Autoencoder)\u662f\u4e00\u79cd\u5f88\u540a\u6253\u7684\u751f\u6210\u5f0f\u6a21\u578b\u3002\u8fd9\u672c\u5e94\u5c5e\u4e8eDL\u7684\u5185\u5bb9\uff0c\u4e5f\u53ef\u4ee5\u5728\u6211\u4e00\u5f00\u59cb\u63a8\u8350\u7684\u7b14\u8bb0\u91cc\u627e\u5230\u4e00\u4e2a\u975e\u5e38\u4f18\u79c0\u3001\u7cfb\u7edf\u7684\u8bb2\u89e3\u3002\u56e0\u6b64\uff0c\u8fd9\u91cc\u6211\u4eec\u53ea\u662f\u7ed9\u8fd9\u4e00\u6a21\u578b\u505a\u4e00\u7b80\u4ecb\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap16/#latent_variable_model","title":"Latent Variable Model","text":"<p>\u6211\u4eec\u5148\u4ecelatent variable model\u7684\u6982\u5ff5\u5f00\u59cb\uff1alatent variable model\u5c31\u662f\u6307\uff0c\u4e3a\u4e86\u8f93\u51fa \\(p(x)\\) \uff0c\u6211\u4eec\u7ed9\u51fa</p> \\[ p(x)=\\int p_{}(x|z)p(z)dz=\\mathbb{E}_{z\\sim p(z)}[p_{}(x|z)] \\] <p>\u8fd9\u91cc \\(z\\) \u7684\u7ef4\u5ea6\u901a\u5e38\u6bd4\u8f83\u5c0f\uff0c\u79f0\u4e3alatent variable\u3002 \\(p_{}(x|z)\\) \u662f\u6a21\u578b\u4e3b\u8981\u5b66\u4e60\u7684\u4e1c\u897f\uff0c\u5373\u901a\u8fc7latent variable \\(z\\) \u751f\u6210 \\(x\\) \uff1b\u800c \\(p(z)\\) \u662f\u67d0\u79cdprior\uff0c\u6709\u4e24\u79cd\u9009\u62e9\u3002</p> <ul> <li>\u4e00\u79cd\u662f\u76f4\u63a5\u7ed9\u5b9a\u4e00\u4e2a\u5148\u9a8c\u5206\u5e03\uff0c\u6bd4\u5982\u9ad8\u65af\u5206\u5e03\uff1b</li> <li>\u53e6\u5916\u4e00\u79cd\u5219\u662f\u8ba9\u6a21\u578b\u4e5f\u53ef\u4ee5\u6539\u53d8 \\(p(z)\\) \uff0c\u4f46 \\(z\\) \u7684\u7ef4\u5ea6\u6bd4\u8f83\u5c0f\uff0c\u56e0\u6b64\u53ef\u4ee5\u518d\u7528\u53e6\u5916\u4e00\u4e2a\u751f\u6210\u6a21\u578b\u6765\u5355\u72ec\u5b66\u4e60 \\(p(z)\\) \u3002</li> </ul> <p>\u4e24\u79cd\u9009\u62e9\u90fd\u6709\u5b9e\u9645\u4e2d\u7684\u5e94\u7528\u3002\u5728\u8fd9\u91cc\uff0cVAE\u9009\u62e9\u4e86\u524d\u8005\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap16/#mle_training_and_elbo","title":"MLE training and ELBO","text":"<p>\u6211\u4eec\u4e0b\u4e00\u6b65\u9700\u8981\u8003\u8651\u7684\u5c31\u662f\uff0c\u5982\u4f55\u8fdb\u884cMLE training\uff0c\u4e5f\u5c31\u662f\u8ba1\u7b97</p> \\[ \\log p(x)=\\log\\mathbb{E}_{z\\sim p(z)}[p_{}(x|z)] \\] <p>\u5982\u679c\u4f60\u5df2\u7ecf<sub>~\u88abRL\u6d17\u8111</sub><sub>\u719f\u6089\u4e86RL\u7684\u601d\u60f3\u7684\u8bdd\uff0c\u4f60\u53ef\u80fd\u4f1a\u60f3\u5230\u76f4\u63a5\u4ece\u9ad8\u65af\u5206\u5e03\u91c7\u6837\u51fa</sub><sub>\u4e00\u4e2a</sub>~\u82e5\u5e72\u4e2a \\(z\\) \uff0c\u7136\u540e\u4f30\u8ba1 \\(\\log p(x)\\) \u3002\u8fd9\u6837\u7406\u8bba\u4e0a\u5e76\u4e0d\u662f\u4e0d\u884c\uff0c\u4f46\u662f\u53ef\u80fd\u9700\u8981\u5f88\u591a\u5f88\u591a\u7684\u6837\u672c\u624d\u80fd\u4f7f\u5f97\u8bad\u7ec3\u6709\u6548\uff08\u540e\u9762\u6211\u4eec\u4f1a\u8fdb\u4e00\u6b65\u9610\u8ff0\u8fd9\u4e00\u70b9\uff09\uff0c\u56e0\u6b64\u5728\u5b9e\u9645\u4e0a\u5f88\u5c11\u7528\u8fd9\u6837\u7684\u65b9\u6cd5\u3002</p> <p>\u8fd9\u91cc\uff0cVAE\u7684\u601d\u60f3\u5c31\u5341\u5206\u5de7\u5999\uff1a\u6211\u4eec\u91c7\u7528\u4e00\u79cd\u7c7b\u4f3cimportance sampling\u7684\u65b9\u6cd5\u3002\u5bf9\u4e8e\u6bcf\u4e00\u4e2a \\(x\\) \uff0c\u6211\u4eec\u8bbe\u8ba1\u4e00\u4e2a\u5206\u5e03 \\(q_{x}(z)\\) \uff08\u6bd4\u5982\uff0c\u5c31\u662f\u9ad8\u65af\u5206\u5e03\uff09\u3002\u8fd9\u6837\uff0c\u5c31\u6709\u4e86</p> \\[ \\log p(x)=\\log\\mathbb{E}_{z\\sim q_{x}(z)}\\left[\\frac{p_{}(x|z)p(z)}{q_{x}(z)}\\right]\\ge \\mathbb{E}_{z\\sim q_{x}(z)}\\left[\\log\\frac{p_{}(x|z)p(z)}{q_{x}(z)}\\right] \\] <p>\u8fd9\u79cd\u901a\u8fc7\u653e\u7f29\u6765\u4f30\u8ba1 \\(\\log p(x)\\) \u7684\u65b9\u6cd5\uff0c\u88ab\u79f0\u4e3aVariational Inference\u3002\u6ce8\u610f\u5230\uff0c\u53f3\u8fb9\u662f \\(\\log p(x)\\) \u7684\u4e00\u4e2alower bound\uff0c\u5e76\u4e14 \\(q_x(z)\\) \u548c \\(p(z)\\) \u8d8a\u63a5\u8fd1\uff0c\u8fd9\u4e00lower bound\u8d8a\u63a5\u8fd1\u6211\u4eec\u539f\u6765\u7684\u76ee\u6807\uff08\u4e5f\u5c31\u662f \\(\\log p(x)\\) \uff09\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4e5f\u628a\u5b83\u53eb\u505aELBO\uff08Evidence Lower Bound Objective\uff09\u3002</p> <p>\u6211\u4eec\u8f6c\u800c\u6765\u4f18\u5316ELBO\uff01\u9996\u5148\u6ce8\u610f\u5230\u5b83\u548c \\(\\log p(x)\\) \u539f\u6765\u7684\u8868\u8fbe\u5f0f\u4e0d\u540c\uff0c\u53ef\u4ee5\u76f4\u63a5\u8ba1\u7b97\u3002\u8fd9\u662f\u56e0\u4e3a</p> \\[ \\text{ELBO}= \\mathbb{E}_{z\\sim q_{x}(z)}\\left[\\log p_{}(x|z)\\right]-\\text{KL}(q_{x}(z)||p(z)) \\] <p>\u800c\u53f3\u8fb9\u7684\u7b2c\u4e00\u9879\u53ef\u4ee5\u901a\u8fc7\u91c7\u6837\u4f30\u8ba1\uff0c\u7b2c\u4e8c\u9879\u5219\u662f\u9ad8\u65af\u5206\u5e03\u7684KL divergence\uff0c\u5177\u6709\u95ed\u5f62\u5f0f\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u68af\u5ea6\u4e0b\u964d\u6765\u4f18\u5316ELBO\u3002</p> <p>\u5176\u6b21\uff0cELBO\u8fd8\u6709\u53e6\u5916\u4e00\u79cd\u53d8\u5f62\u65b9\u5f0f\uff0c\u8fd9\u4e00\u79cd\u65b9\u5f0f\u544a\u8bc9\u6211\u4eecELBO\u548c\u771f\u6b63\u7684log prob\u7684\u8ddd\u79bb\uff1a</p> \\[ \\log p(x)-\\text{ELBO}= \\mathbb{E}_{z\\sim q_x(z)}\\left[\\log \\frac{p(x)q_x(z)}{p_{}(x|z)p(z)}\\right]=\\text{KL}(q_x(z)||p(z|x)) \\] <p>\u56e0\u6b64\uff0c\u6211\u4eec\u77e5\u9053\u4e86\uff1a\u5047\u8bbe\u6211\u4eec\u80fd\u591f\u8ba9 \\(p(z|x)\\) \u548c \\(q_x(z)\\) \u5b8c\u5168\u63a5\u8fd1\uff0c\u90a3\u4e48 \\(\\log p(x)\\) \u548cELBO\u7684\u5dee\u8ddd\u5c31\u662f0\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u7684ELBO\u5c31\u662f\u771f\u6b63\u7684log prob\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap16/#reframing_vae_as_a_stochastic_autoencoder","title":"Reframing VAE as a Stochastic AutoEncoder","text":"<p>\u4e0a\u9762\u7684\u4e00\u7cfb\u5217\u63a8\u5bfc\u8fc7\u4e8e\u7a81\u7136\uff0c\u53ef\u80fd\u4f1a\u4ea7\u751f\u8bb8\u591a\u95ee\u9898\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u5148\u7ed9\u4e0a\u9762\u7684\u6570\u5b66\u516c\u5f0f\u4e00\u4e9b\u89e3\u91ca\u3002</p> <p>Q: \u7b49\u7b49\uff0c\u6211\u89c9\u5f97\u4f60\u5728\u9a97\u4eba\u554a\uff01\u4f60\u521a\u624d\u8bf4\uff0cELBO\u7684\u7b2c\u4e00\u79cd\u8868\u8fbe\u5f0f\u91cc\u9762\u7684\u7b2c\u4e00\u9879\uff0c\u4e5f\u5c31\u662f \\(\\mathbb{E}_{z\\sim q_{x}(z)}\\left[\\log p_{}(x|z)\\right]\\) \uff0c\u53ef\u4ee5\u901a\u8fc7\u91c7\u6837\u8ba1\u7b97\u3002\u4f46\u5982\u679c\u8fd9\u6837\u7684\u8bdd\uff0c\u4e3a\u4ec0\u4e48\u6211\u4eec\u4e0d\u76f4\u63a5\u91c7\u6837\u8ba1\u7b97 \\(\\mathbb{E}_{z\\sim p(z)}\\left[\\log p_{}(x|z)\\right]\\) \u5462\uff1f\u8fd9\u4e24\u8005\u6709\u4efb\u4f55\u5dee\u522b\u5417\uff1f\uff1f</p> <p>A: \u4f60\u5148\u522b\u6025\u3002\u8fd8\u8bb0\u5f97\u6211\u4eec\u4e00\u5f00\u59cb\u8bf4\u7684\u5417\uff0c\u7406\u8bba\u4e0a\u91c7\u6837\u8ba1\u7b97 \\(\\mathbb{E}_{z\\sim p(z)}\\left[\\log p_{}(x|z)\\right]\\) \u4e5f\u662f\u53ef\u4ee5\u7684\uff0c\u53ea\u4e0d\u8fc7\u53ef\u80fd\u9700\u8981\u5f88\u591a\u5f88\u591a\u7684\u6837\u672c\u3002\u81f3\u4e8e\u4e3a\u4ec0\u4e48\u91c7\u6837\u8ba1\u7b97 \\(\\mathbb{E}_{z\\sim q_{x}(z)}\\left[\\log p_{}(x|z)\\right]\\) \u9700\u8981\u7684\u6837\u672c\u6570\u8fdc\u5c11\u4e8e\u524d\u8005\u7684\u6837\u672c\u6570\uff0c\u5c31\u9700\u8981\u6211\u4eec\u6765\u4ece\u8fd9\u4e9b\u516c\u5f0f\u7684\u610f\u4e49\u4e0a\u9610\u8ff0\u4e86\u3002\u6240\u4ee5\uff0c\u5148\u542c\u6211\u8bf4\u2014\u2014</p>"},{"location":"Online%20CS%20Courses/CS285/chap16/#what_is_a_vae_anyway","title":"What is a VAE, Anyway?","text":"<p>\u6211\u4eec\u5148\u770b\u770b\uff0c\u4ec0\u4e48\u662f \\(x\\) \u548c \\(z\\) \uff1f \\(x\\) \u5f88\u7b80\u5355\uff0c\u5c31\u662f\u8f93\u5165\u7684\u56fe\u7247\uff0c\u5176\u5206\u5e03\u662f\u6211\u4eec\u7684\u6a21\u578b\u60f3\u8981\u5b66\u4e60\u7684\uff1b\u800c \\(z\\) \u5219\u7565\u62bd\u8c61\uff0c\u6211\u4eec\u8bf4\u5b83\u662flatent variable\uff1b\u4e00\u822c\u6765\u8bf4\uff0c\u5b9e\u8df5\u4e0a\uff0c \\(z\\) \u7684\u7ef4\u5ea6\u4f1a\u6bd4 \\(x\\) \u5c0f\u5f88\u591a\u3002\u56e0\u6b64\uff0c\u53ef\u4ee5\u628a \\(z\\) \u770b\u4f5c \\(x\\) \u7684\u4e00\u79cd\"\u538b\u7f29\"\u3002</p> <p>\u90a3 \\(p(x|z)\\) \u548c \\(q_x(z)\\) \u8fd9\u4e24\u4e2a\u4e3b\u8981\u7684\u5206\u5e03\u53c8\u662f\u5e72\u4ec0\u4e48\u7684\u5462\uff1f\u6211\u4eec\u597d\u50cf\u7a81\u7136\u53d1\u73b0\u4e00\u4e9b\u7384\u673a\uff1a\u5982\u679c\u628a \\(x\\) \u548c \\(z\\) \u7684\u5bf9\u5e94\u5173\u7cfb\u6bd4\u4f5c\u6587\u4ef6\u548c\u538b\u7f29\u6587\u4ef6\u7684\u5173\u7cfb\uff0c\u90a3\u4e48 \\(p(x|z)\\) \u5b8c\u6210\u7684\u5de5\u4f5c\u5c31\u662f\u89e3\u538b\u7f29\uff0c\u53ea\u4e0d\u8fc7\u56e0\u4e3a \\(z\\) \u6bd5\u7adf\u635f\u5931\u4e86\u4fe1\u606f\uff0c\u6240\u4ee5\u89e3\u538b\u7f29\u51fa\u6765\u7684\u662f\u4e00\u4e2a\u5206\u5e03\u3002\u6211\u4eec\u518d\u6765\u770b \\(q_x(z)\\) \uff0c\u5b83\u672c\u6765\u6ca1\u6709\u4efb\u4f55\u610f\u4e49\uff0c\u53ea\u4e0d\u8fc7\u662f\u6211\u4eec\u9009\u6765\u505aimportance sampling\u7684\u4e00\u4e2a\u5206\u5e03\uff1b\u4f46\u6211\u4eec\u524d\u9762\u770b\u5230\uff0c\u4f5c\u4e3a\u6700\u540e\u7684\u76ee\u6807\uff0c\u6211\u4eec\u4f1a\u5e0c\u671b \\(p(z|x)\\) \u548c \\(q_x(z)\\) \u5b8c\u5168\u63a5\u8fd1\u3002\u56e0\u6b64\uff0c\u7406\u8bba\u4e0a\uff0c\u6211\u4eec\u4f1a\u5e0c\u671b \\(q_x(z)\\) \u7c7b\u4f3c\u4e00\u4e2a\u4ece \\(x\\) \u5230 \\(z\\) \u7684\u201c\u538b\u7f29\u201d\u8fc7\u7a0b\u3002\u540c\u6837\uff0c\u8fd9\u4e00\u538b\u7f29\u4e5f\u7ed9\u51fa\u4e00\u4e2a\u5206\u5e03\uff08\u4e4b\u540e\u6211\u4eec\u4f1a\u8ba8\u8bba\u8fd9\u4e00\u70b9\uff09\u3002</p> <p>\u5176\u5b9e\uff0c\u8fd9\u79cd\u601d\u60f3\u5728ML\u4e2d\u5f88\u65e9\u5c31\u6709\uff0c\u88ab\u79f0\u4f5cAutoEncoder\uff08AE\uff09\u3002AutoEncoder\u8fd9\u4e00\u540d\u5b57\u867d\u7136\u542c\u8d77\u6765\u5f88\u9ad8\u7ea7\uff08\u201c\u81ea\u7f16\u7801\u5668\u201d\uff09\uff0c\u4f46\u5b9e\u9645\u4e0a\u5c31\u662f\u6211\u4eec\u524d\u9762\u6240\u8bf4\u7684\u538b\u7f29-\u89e3\u538b\u7f29\u7cfb\u7edf\u3002\u5b8c\u6210\u538b\u7f29\u8fc7\u7a0b\u7684\u7f51\u7edc\u53eb\u505aEncoder\uff0c\u800c\u5b8c\u6210\u89e3\u538b\u8fc7\u7a0b\u7684\u7f51\u7edc\u53eb\u505aDecoder\u3002\u8fd9\u6837\uff0c\u5bf9\u53f7\u5165\u5ea7\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f15\u5165\u4e24\u4e2a\u7f51\u7edc\uff1aEncoder \\(p_{\\theta}(x|z)\\) \uff0c\u548cDecoder \\(q_{\\phi}(z|x)\\) \u3002</p> <p>Q: \u7b49\u7b49\uff0c\u4e3a\u4ec0\u4e48 \\(q_{x}(z)\\) \u53d8\u6210\u4e86 \\(q_{\\phi}(z|x)\\) \u8fd9\u4e2a\u6761\u4ef6\u5206\u5e03\uff1f</p> <p>A: \u5bf9\u7684\u2014\u2014\u4f60\u662f\u4e0d\u662f\u89c9\u5f97\uff0c\u5e94\u8be5\u5bf9\u6bcf\u4e00\u4e2a \\(x\\) \u8bad\u7ec3\u4e00\u4e2a\u5206\u5e03 \\(q_{x}(z)\\) \uff1f\u7406\u8bba\u4e0a\u4e5f\u4e0d\u662f\u4e0d\u53ef\u4ee5\uff0c\u4f46\u8fd9\u6837\u7684\u5f00\u9500\u592a\u5927\u4e86\uff0c\u56e0\u6b64\u4e0d\u5982\u628a \\(x\\) \u76f4\u63a5\u5f53\u4f5c\u795e\u7ecf\u7f51\u7edc\u7684\u8f93\u5165\u3002\u8fd9\u79cd\u65b9\u6cd5\u5f88\u5e38\u89c1\uff0c\u53eb\u505aAmortized Variational Inference\u3002</p> <p>\u6b64\u65f6\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5927\u81f4\u5730\u60f3\u50cfVAE\u7684\u5168\u5c40\uff1a\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u56fe\u7247 \\(x\\) \uff0c \\(q_{\\phi}(z|x)\\) \u628a\u5b83\u538b\u7f29\u5230 \\(z\\) \u6240\u5904\u7684\u7a7a\u95f4\uff08\u53eb\u505alatent space\uff09\u91cc\u7684\u4e00\u7247\u533a\u57df\u3002\u867d\u7136\u8fd9\u7247\u533a\u57df\u5bf9\u4e8e\u4eba\u7c7b\u6765\u770b\u662f\u4e00\u5806\u4e71\u7801\uff0c\u4f46\u5bf9\u4e8edecoder \\(p_{\\theta}(x|z)\\) \u6765\u8bf4\uff0c\u5b83\u5341\u5206\u6709\u610f\u4e49\uff0c\u56e0\u6b64decoder\u53ef\u4ee5\u5b8c\u6210\u89e3\u538b\uff0c\u628a \\(z\\) \u518d\u8fd8\u539f\u56de \\(x\\) \u3002</p> <p></p> <p>\u81f3\u6b64\uff0c\u6211\u4eec\u4e5f\u7ec8\u4e8e\u53ef\u4ee5\u89e3\u91ca\u4e00\u5f00\u59cb\u6316\u7684\u5751\u4e86\uff1a\u4e3a\u4ec0\u4e48\u91c7\u6837\u8ba1\u7b97 \\(\\mathbb{E}_{z\\sim q_{x}(z)}\\left[\\log p_{}(x|z)\\right]\\) \u6765\u8bad\u7ec3\uff0c\u8fd9\u6837\u9700\u8981\u7684\u6837\u672c\u6570\u8fdc\u5c11\u4e8e\u7528 \\(\\mathbb{E}_{z\\sim p(z)}\\left[\\log p_{}(x|z)\\right]\\) \u8bad\u7ec3\u9700\u8981\u7684\u6837\u672c\u6570\uff1f\u9053\u7406\u5b9e\u9645\u4e0a\u5f88\u7b80\u5355\u2014\u2014\u5982\u679c \\(z\\) \u4ece \\(p(z)\\) \u53d6\u6837\uff0c\u90a3\u5c31\u662f\u4e1c\u4e00\u6994\u5934\u897f\u4e00\u68d2\u5b50\u3002\u800c\u6211\u4eec\u7684\u76ee\u6807\u662f\u5e0c\u671b\u5bf9\u4e8e\u6240\u6709\u8fd9\u6837\u7684\u9ad8\u5ea6\u968f\u673a\u7684 \\(z\\) \u7ed9\u51fa \\(p(x|z)\\) \u90fd\u8981\u6bd4\u8f83\u5927\uff0c\u867d\u7136\u4e0d\u662f\u4e0d\u884c\uff0c\u4f46\u5bf9\u6a21\u578b\u7684\u8981\u6c42\u5c31\u5f88\u9ad8\uff1b\u4e0d\u4ec5\u5982\u6b64\uff0c\u8bad\u7ec3\u7684\u65f6\u5019\u68af\u5ea6\u4e5f\u662f\u4e1c\u8e39\u4e00\u811a\u897f\u8e39\u4e00\u811a\uff0c\u5f88\u96be\u7a33\u5b9a\u3002</p> <p>\u4f46\u7528 \\(q_{x}(z)\\) \u7684\u8bdd\uff0c\u5c31\u5b8c\u5168\u4e0d\u540c\u4e86\u3002\u56e0\u4e3a\u6211\u4eec\u7684\u6a21\u578b\uff08\u53c2\u6570 \\(\\phi\\) \uff09\u4e5f\u5728\u5b66\u4e60 \\(q_x(z)\\) \uff0c\u56e0\u6b64\u5b83\u5b8c\u5168\u53ef\u4ee5\u7ed9\u51fa\u4e00\u79cdstructure\uff1a\u6bd4\u5982\uff0c\u5bf9\u4e8eMNIST\u7684\u6570\u5b57\u751f\u6210\uff0c\u6a21\u578b\u53ef\u80fd\u5b66\u4f1a\u628alatent space\u528810\u4efd\u3002\u5982\u679c\u6211\u770b\u51fa\u6765\u4f60\u8fd9\u4e2a\u6570\u5b57\u662f8\uff0c\u90a3\u5c31\u628a\u4f60\u6254\u5230\u7b2c8\u4e2a\u533a\u57df\u91cc\u3002\u5b83\u8fd8\u53ef\u4ee5\u5b66\u4f1a\u518d\u7ec6\u5206\uff0c\u6bd4\u5982\u6211\u770b\u51fa\u6765\u4f60\u8fd9\u4e2a\u6570\u5b57\u98ce\u683c\u6f47\u6d12\u98d8\u9038\uff0c\u5c31\u5206\u5230\u8fd9\u4e2a\u533a\u57df\u4e0a\u9762\uff1b\u5982\u679c\u7a33\u91cd\u96bd\u79c0\uff0c\u90a3\u5c31\u5206\u5230\u4e0b\u9762\u3002\u800cdecoder\u7ecf\u8fc7\u8bad\u7ec3\uff0c\u4e5f\u5c31\u77e5\u9053\u4e86\u8fd9\u4e9b\u201c\u6697\u53f7\u201d\uff0c\u6bd4\u5982\u5b83\u62ff\u5230latent space\u91cc\u9762\u7b2c8\u4e2a\u533a\u57df\u4e2d\u4e0a\u9762\u90e8\u5206\u7684 \\(z\\) \uff0c\u5c31\u77e5\u9053\u8fd9\u662f\u4e00\u4e2a\u6f47\u6d12\u98d8\u9038\u76848\uff0c\u8fd9\u6837\u5c31\u6709\u4e86\u4fe1\u606f\uff0c\u751f\u6210\u8d77\u6765\u4e5f\u5c31\u66f4\u52a0\u5bb9\u6613\u4e86\u3002</p> <p>\uff08\u8fd9\u6bb5\u8bf4\u7684\u5b9e\u9645\u4e0a\u4e0d\u591f\u51c6\u786e\uff0c\u5b9e\u9645\u4e0a\u6a21\u578b\u505a\u7684\u80af\u5b9a\u4f1a\u6bd4\u8fd9\u4e2a\u66f4\u590d\u6742\uff0c\u56e0\u4e3a \\(q_{x}(z)\\) \u5728\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u88ab\u9650\u5236\u7684\u5fc5\u987b\u548c\u9ad8\u65af\u5206\u5e03\u63a5\u8fd1\u3002\u4f46\u6a21\u578b\u8fd8\u662f\u80fd\u5efa\u7acb\u8d77\u6765\u4e00\u4e9b\u7ed3\u6784\u7684\uff0c\u53ea\u4e0d\u8fc7\u80af\u5b9a\u4e0d\u662f\u8fd9\u6837human-readable\u7684\u4e86\u3002\uff09</p>"},{"location":"Online%20CS%20Courses/CS285/chap16/#elbo_revisited","title":"ELBO Revisited","text":"<p>\u6211\u4eec\u6700\u540e\u518d\u6765\u770b\u6211\u4eec\u524d\u9762\u6570\u5b66\u4e0a\u5f97\u5230\u7684ELBO\u3002\u5b83\u73b0\u5728\u5df2\u7ecf\u53d8\u5f97\u5341\u5206\u6709\u610f\u4e49\u4e86\u3002</p> <p>\u524d\u9762\u6211\u4eec\u7ed9\u51fa\u4e86ELBO\u7684\u4e24\u79cd\u8868\u8fbe\u5f0f\u3002\u5b83\u4eec\u5206\u522b\u662f\uff1a</p> \\[ \\text{ELBO}= \\mathbb{E}_{z\\sim q_{\\phi}(z|x)}\\left[\\log p_{\\theta}(x|z)\\right]-\\text{KL}(q_{\\phi}(z|x)||p(z)) \\] \\[ \\text{ELBO}=\\log p(x)-\\text{KL}(q_\\phi(z|x)||p(z|x)) \\] <p>\u7b2c\u4e8c\u4e2a\u8868\u8fbe\u5f0f\u8fd8\u662f\u4e4b\u524d\u90a3\u4e2a\u610f\u601d\uff1a\u4e3a\u4e86\u4f18\u5316\u7b97\u4e0d\u51fa\u6765\u7684 \\(\\log p(x)\\) \uff0c\u6211\u4eec\u5148\u4f18\u5316\uff08\u6700\u5927\u5316\uff09ELBO\u3002\u5982\u679c\u6700\u540e \\(q_{\\phi}(z|x)\\) \u6240\u5e78\u80fd\u548c \\(p(z|x)\\) \u5f88\u63a5\u8fd1\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u5b8c\u6210\u4e86\u76ee\u6807\u3002</p> <p>\u800c\u7b2c\u4e00\u4e2a\u8868\u8fbe\u5f0f\u66f4\u52a0\u6709\u8da3\u4e86\uff08\u6ce8\u610f\u8bad\u7ec3\u7684\u65f6\u5019\u6211\u4eec\u4f7f\u7528\u7684\u662f\u8fd9\u4e2a\u7b2c\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff09\u3002\u5bf9\u4e8e\u7b2c\u4e00\u9879\uff0c\u6211\u4eec\u53d1\u73b0\u5b83\u7684\u610f\u601d\u662f\uff1a\u5bf9\u4e8e\u4e00\u4e2a \\(x\\) \uff0c\u6211\u4eec\u538b\u7f29\u5230latent space\u6210\u4e3a\u4e00\u4e2a\u5206\u5e03\uff0c\u518d\u89e3\u538b\u7f29\u56de\u53bb\u5f97\u5230 \\(x\\) \u7684\u5206\u5e03\uff0c\u6b64\u65f6\u539f\u59cb\u56fe\u7247\u7684\u6982\u7387\u6bd4\u8f83\u5927\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u7ecf\u8fc7\u538b\u7f29-\u89e3\u538b\u7f29\u8fc7\u7a0b\uff0c\u5f88\u5927\u6982\u7387\u6211\u4eec\u4fdd\u8bc1\u56fe\u7247\u4e0d\u53d8\u3002\u56e0\u6b64\uff0c\u8fd9\u4e5f\u53eb\u505aReconstruction Loss\u3002</p> <p>\u7b2c\u4e8c\u9879\u662f\u4ec0\u4e48\u610f\u601d\u5462\uff1f\u8fd9\u5c31\u662fVAE\u548cAE\u7684\u4e0d\u540c\u4e4b\u5904\u4e86\u3002\u5982\u679c\u6211\u4eec\u7684\u76ee\u7684\u53ea\u662f\u505a\u4e00\u4e2aAE\uff0c\u90a3\u4e48\u6709\u7b2c\u4e00\u9879\u5c31\u8db3\u591f\u4e86\u3002\u8fd9\u662f\u56e0\u4e3a\uff0cAE\u7684\u76ee\u6807\u53ea\u662flearn a representation\uff0c\u56e0\u6b64\u6570\u636e\u96c6\u91cc\u9762\u5bf9\u5e94\u7684 \\(z\\) \u53ef\u4ee5\u4efb\u610f\u590d\u6742\u3002\u4f46\u662f\uff0cVAE\u9700\u8981\u6211\u4eec\u751f\u6210\u56fe\u7247\uff0c\u800c\u751f\u6210\u7684\u65f6\u5019\u6211\u4eec\u6ca1\u6709 \\(x\\) \uff01\uff08\u6211\u4eec\u4e0d\u80fd\u518d\u4ece \\(q_{\\phi}(z|x)\\) \u4e2d\u91c7\u6837\u4e86\uff01\uff09</p> <p>\u56e0\u6b64\uff0c\u5bf9\u4e8eVAE\uff0c\u751f\u6210\u6a21\u578b\u7684\u672c\u6027\u4f7f\u5f97\u5b83\u5fc5\u987b\u63a7\u5236 \\(z\\) \u7684\u5206\u5e03\uff0c\u4f7f\u5f97\u6211\u4eec\u6700\u540e\u53ef\u4ee5\u4ece\u8fd9\u4e00\u5206\u5e03\u4e2d\u91c7\u6837\u3002\u56e0\u6b64\uff0c\u7b2c\u4e8c\u9879\u7684\u610f\u601d\u5b9e\u9645\u4e0a\u662f\uff0c\u6211\u4eec\u63a7\u5236 \\(q_{\\phi}(z|x)\\) \u5fc5\u987b\u662f\u6807\u51c6\u9ad8\u65af\u5206\u5e03\uff0c\u8fd9\u6837\u6211\u4eec\u8bad\u7ec3\u597d\u7684\u6a21\u578b\u624d\u80fd\u771f\u6b63\u201c\u6295\u5165\u751f\u4ea7\u201d\uff0c\u751f\u6210\u56fe\u7247\u3002\uff08\u8bbe\u60f3\u6211\u4eec\u4e0d\u628a\u7b2c\u4e8c\u9879\u52a0\u5165\u8bad\u7ec3\u76ee\u6807\uff0c\u90a3\u4e48loss\u4f9d\u7136\u53ef\u4ee5\u964d\u7684\u5f88\u5c0f\uff0c\u4f46\u662f\u751f\u6210\u51fa\u6765\u7684\u56fe\u7247\u5c31\u4f1a\u662f\u4e00\u5768\u7b54\u8fa9\u3002\uff09\u8fd9\u4e00\u9879\u4e5f\u56e0\u6b64\u79f0\u4e3aKL Penalty\u3002</p> <p>\u540c\u65f6\uff0c\u8fd9\u4e5f\u89e3\u91ca\u4e86\u4e3a\u4ec0\u4e48\u6211\u4eec\u4e4b\u524d\u8bf4 \\(q_{\\phi}(z|x)\\) \u548c \\(p_{\\theta}(x|z)\\) \u5fc5\u987b\u662f\u5206\u5e03\uff0c\u800c\u4e0d\u80fd\u662f\u4e00\u4e2a\u786e\u5b9a\u7684\u503c\u3002\u540e\u8005\u5f53\u7136\u662f\u56e0\u4e3a\u6211\u4eec\u8981\u505aMLE training\uff0c\u4e0d\u5f97\u4e0d\u7ed9\u4e00\u4e2a\u6982\u7387\u5206\u5e03\uff1b\u800c\u524d\u8005\u6070\u6070\u5c31\u662f\u56e0\u4e3a\u6211\u4eec\u5e0c\u671b \\(z\\) \u7684\u5206\u5e03\u662f\u4e00\u4e2a\u6807\u51c6\u9ad8\u65af\u5206\u5e03\uff0c\u800c\u628a \\(q(z|x)\\) \u8bbe\u7f6e\u6210\u5206\u5e03\u6709\u5229\u4e8e\u5bf9\u6bcf\u4e00\u4e2a \\(x\\) \u5206\u522b\u8fdb\u884c\u8bad\u7ec3\u3002</p> <p>\u56e0\u6b64\uff0cELBO\u8fd9\u4e00\u6570\u5b66\u4e0a\u7684\u6574\u4f53\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2a\u4f18\u79c0\u7684\u8bbe\u8ba1\uff1a\u5b83\u628aAE\u7684\u57fa\u672c\u601d\u60f3\u548c\u751f\u6210\u6a21\u578b\u7684\u5fc5\u7136\u9700\u8981\u7ed3\u5408\u8d77\u6765\uff0c\u6700\u7ec8\u521b\u9020\u51faVAE\u8fd9\u4e00\u5f3a\u5927\u7684\u6a21\u578b\u3002</p> <p>Q: \u7b49\u7b49\uff0c\u4f60\u521a\u624d\u8bf4\uff0c\u201c\u5982\u679c\u6700\u540e \\(q_{\\phi}(z|x)\\) \u6240\u5e78\u80fd\u548c \\(p(z|x)\\) \u5f88\u63a5\u8fd1\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u5b8c\u6210\u4e86\u76ee\u6807\u201d\uff0c\u8fd9\u771f\u7684\u80fd\u5b9e\u73b0\u5417\uff1f</p> <p>A: \u5f53\u7136\u3002\u5982\u679c\u7406\u60f3\u60c5\u51b5\u4e0b \\(q_{\\phi}(z|x)=p(z)\\) \uff0c\u548c \\(x\\) \u90fd\u6ca1\u5173\u7cfb\u4e86\uff0c\u90a3\u80af\u5b9a\u6ee1\u8db3 \\(q_{\\phi}(z|x)=p(z|x)\\) \u3002\u867d\u7136\u5b9e\u9645\u4e0a\u8fd9\u6837\u7684\u5883\u754c\u4e0d\u80fd\u88ab\u8fbe\u5230\uff0c\u4f46\u662f\u81f3\u5c11\u4f60\u53ef\u4ee5\u60f3\u50cf\uff0cELBO\u7684\u4e24\u4e2a\u8868\u8fbe\u5f0f\u4e2d\u7684\u4e24\u4e2aKL divergence\u7684\u8bad\u7ec3\u65b9\u5411\u662f\u4e00\u81f4\u7684\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap16/#conclusion","title":"Conclusion","text":"<p>VAE\u7684\u57fa\u672c\u601d\u60f3\u5c31\u4ecb\u7ecd\u5b8c\u4e86\u3002\u5982\u679c\u8fd9\u662f\u4f60\u7b2c\u4e00\u6b21\u63a5\u53d7\uff0c\u90a3\u4e48\u786e\u5b9e\u53ef\u80fd\u8fd8\u6709\u5f88\u591a\u5730\u65b9\u6ca1\u6709\u60f3\u6e05\u695a\u3002\u4f46\u5f53\u4f60\u9010\u6e10\u4e60\u60ef\u4e86\u5b83\u7684\u601d\u60f3\u4e4b\u540e\uff0c\u4f60\u4f1a\u53d1\u73b0\u8fd9\u4e00\u5207\u90fd\u5341\u5206\u81ea\u7136\u3002\u613f\u4f60\u80fd\u5145\u5206\u4f53\u4f1a\u5230\u5b83\u7684\u7f8e\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u7565\u63d0\u4e00\u4e9b\u5b9e\u73b0VAE\u7684\u6280\u5de7\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684\u601d\u60f3\u5f80\u5f80\u80fd\u5e94\u7528\u5230\u5f88\u591a\u5176\u4ed6\u5730\u65b9\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap16/#tricks","title":"Tricks","text":""},{"location":"Online%20CS%20Courses/CS285/chap16/#design_models_for_vae","title":"Design models for VAE","text":"<p>\u4e00\u4e2aconventional\u7684\u8bbe\u8ba1\u662f</p> \\[ q_{\\phi}(z|x)=\\mathcal{N}\\left(\\mu_\\phi(x),\\exp(\\text{diag} (\\sigma_\\phi(x)))\\right) \\] \\[ p_{\\theta}(x|z)=\\mathcal{N}\\left(\\mu_\\theta(z),1\\right) \\] <p>\u8fd9\u91cc\u4e3a\u4ec0\u4e48\u7b2c\u4e8c\u4e2a\u5206\u5e03\u7684\u65b9\u5dee\u9009\u4e3a1,\u8fd8\u662f\u6709\u70b9\u8bf4\u6cd5\uff1a\u5c31\u5982\u6211\u4eec\u4e4b\u524d\u6240\u8bf4\uff0c \\(p_{\\theta}(x|z)\\) \u672c\u6765\u6ca1\u6709\u5fc5\u8981\u662f\u968f\u673a\u7684\uff0c\u53ea\u662f\u56e0\u4e3a\u6211\u4eec\u4f18\u5316\u7684\u76ee\u6807\u662f \\(\\log p(x)\\) \uff0c\u56e0\u6b64\u786e\u5b9a\u7684\u5206\u5e03\u4f1a\u4f7f\u5f97loss\u6210\u4e3ainf\u3002\u56e0\u6b64\uff0c\u8fd9\u91cc\u7684\u65b9\u5dee\u6ca1\u6709\u5b9e\u9645\u7684\u610f\u4e49\u3002</p> <p>\u4e5f\u6b63\u662f\u56e0\u4e3a\u5982\u6b64\uff0c\u5199VAE\u4e00\u4e2a\u5f88\u5bb9\u6613\u72af\u7684\u9519\u8bef\u662f\uff0c \u5728\u751f\u6210\u7684\u65f6\u5019\u4ecd\u7136\u4ece \\(p_{\\theta}(x|z)\\) \u91c7\u6837 \u3002\u5982\u679c\u4f60\u4f7f\u7528\u7684\u662fMNIST\u7684\u6570\u636e\uff0c\u90a3\u4e48\u4f60\u76f8\u5f53\u4e8e\u4e3a\u6bcf\u4e2a\u5206\u91cf\u4e0d\u8d85\u8fc71\u7684\u56fe\u7247\u52a0\u4e86\u4e00\u4e2a\u65b9\u5dee\u4e3a1\u7684\u566a\u58f0\uff01\u6b63\u786e\u7684\u65b9\u6cd5\u662f\uff0c\u867d\u7136\u6211\u4eec\u8bad\u7ec3\u7684\u65f6\u5019\u641e\u8fd9\u4e00\u4e2a\u201c\u6982\u7387\u5206\u5e03\u201d\uff0c\u5b9e\u9645\u4e0a\u6211\u4eec\u6e05\u695a\u8fd9\u4e2a\u6982\u7387\u5206\u5e03\u53ea\u662f\u4e00\u4e2a\u5de5\u5177\uff0c\u56e0\u6b64\u6211\u4eec\u5e94\u8be5\u76f4\u63a5\u7528 \\(\\mu_\\theta(z)\\) \u4f5c\u4e3a\u751f\u6210\u7684\u56fe\u7247\u3002</p> <p>\u4e5f\u6709\u4eba\u56e0\u6b64\u6307\u51fa\uff0c\u8fd9\u4e2a1\u6ca1\u4ec0\u4e48\u7279\u6b8a\u4e4b\u5904\uff0c\u53ef\u4ee5\u6362\u6210\u5176\u4ed6\u7684\u503c\u3002\u8fd9\u5c31\u662f\u8457\u540d\u7684 \\(\\beta\\) -VAE\u3002\u5f53\u7136\uff0c\u7b2c\u4e00\u6b21\u5c1d\u8bd5\u7684\u65f6\u5019\uff0c\u8fd8\u662f\u5efa\u8bae\u4f7f\u75281.</p>"},{"location":"Online%20CS%20Courses/CS285/chap16/#reparameterization_trick","title":"Reparameterization Trick","text":"<p>\u6709\u4e00\u4e2a\u4e0d\u6613\u6ce8\u610f\u5230\u7684\u7ec6\u8282\uff0c\u5c31\u662f\u6211\u4eecELBO\u4e2d\u7684\u7b2c\u4e00\u9879</p> \\[ \\mathbb{E}_{z\\sim q_{\\phi}(z|x)}\\left[\\log p_{\\theta}(x|z)\\right] \\] <p>\u540c\u65f6\u5305\u542b\u4e86\u4e24\u4e2a\u6a21\u578b \\(\\phi\\) \u548c \\(\\theta\\) \uff01\u867d\u7136\u8ba1\u7b97\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u91c7\u6837\uff0c\u4f46\u8fd9\u6837\u5c31\u4e22\u5931\u4e86\u5bf9 \\(\\phi\\) \u7684\u68af\u5ea6\u3002\uff08\u8fd9\u597d\u6bd4\u8bad\u7ec3autoencoder\u7684\u65f6\u5019\u53ea\u8bad\u7ec3decoder\uff01\uff09\u56e0\u6b64\uff0c\u6211\u4eec\u5e0c\u671b\u60f3\u529e\u6cd5\u8ba1\u7b97\u8fd9\u4e2a\u671f\u671b\u7684\u68af\u5ea6\u3002</p> <p>\u5f53\u7136\uff0c\u4f60\u4e5f\u8bb8\u65e9\u5c31\u77e5\u9053\uff0c<code>torch.distributions</code> \u7684\u6210\u5458\u90fd\u53ef\u4ee5<code>rsample</code>\uff0c\u5e76\u4e14\u5f97\u77e5\u8fd9\u6837\u5f97\u5230\u7684sample\u662f\u53ef\u4ee5\u53cd\u5411\u4f20\u64ad\u7684\u3002\u800c\u5b83\u7684\u539f\u7406\u5c31\u662f\u6211\u4eec\u6240\u8bf4\u7684reparameterization trick\u3002\u5bf9\u4e8e\u9ad8\u65af\u5206\u5e03\uff0c\u8fd9\u4e00\u65b9\u6cd5\u5b9e\u9645\u4e0a\u5c31\u662f\uff1a</p> \\[ \\mathbb{E}_{z\\sim q_{\\phi}(z|x)}\\left[\\log p_{\\theta}(x|z)\\right]=\\mathbb{E}_{\\epsilon\\sim\\mathcal{N}(0,1)}\\left[\\log p_{\\theta}(x|z=\\mu_\\phi(x)+\\Sigma_\\phi(x)*\\epsilon)\\right] \\] <p>\u5176\u4e2d \\(\\Sigma_\\phi(x)=\\exp(\\text{diag}(\\sigma_\\phi(x)))\\) \uff0c\u800c<code>*</code>\u4ee3\u8868\u5206\u91cf\u79ef\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u53d1\u73b0 \\(\\phi\\) \u5c31\u4ece\u4e0b\u9762\u8f6c\u79fb\u5230\u4e86\u4e0a\u9762\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u8ba1\u7b97\u8fd9\u4e2a\u671f\u671b\u7684\u68af\u5ea6\u3002</p> <p>\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u6211\u4eec\u5728\u7b2c\u4e94\u8bb2\u4e00\u5f00\u59cb\u4ecb\u7ecdpolicy gradient\u7684\u65f6\u5019\uff0c\u4e5f\u9047\u5230\u4e86\u5b8c\u5168\u4e00\u6837\u7684\u95ee\u9898\uff1a\u9700\u8981\u4f18\u5316\u7684\u4e1c\u897f\u5728\u671f\u671b\u7b26\u53f7\u5e95\u4e0b\u3002\u4f46\u5f53\u65f6\u6211\u4eec\u901a\u8fc7\u6570\u5b66\u4e0a\u7684\u4e00\u901a\u53d8\u6362\u89e3\u51b3\u4e86\u8fd9\u4e00\u95ee\u9898\uff0c\u5f53\u65f6\u7684\u90a3\u4e00\u65b9\u6cd5\u88ab\u79f0\u4e3aREINFORCE\u3002\u5b9e\u9645\u4e0a\uff0c\u9762\u5bf9\u8fd9\u79cd\u95ee\u9898\uff0cREINFORCE\u548cREPARAMETERIZE\u5b9e\u9645\u4e0a\u662f\u6700\u5e38\u89c1\u7684\u4e24\u7c7b\u65b9\u6cd5\u3002\u5982\u679c\u975e\u8981\u5206\u51fa\u9ad8\u4f4e\uff0c\u90a3\u4e48REPARAMETERIZE\u8fd8\u662f\u66f4\u52a0\u5e38\u7528\uff0c\u56e0\u4e3a\u7ecf\u9a8c\u4e0a\u5b83\u5177\u6709\u66f4\u5c0f\u7684variance\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap16/#vae_in_rl","title":"VAE in RL","text":"<p>\u6700\u540e\uff0c\u7b80\u5355\u63d0\u4e00\u4e9bVAE\u5728RL\u4e2d\u7684\u5e94\u7528\u3002</p> <ul> <li>representation learning\uff1a\u6211\u4eec\u5728\u8bad\u7ec3\u6a21\u578b\u6253\u6e38\u620f\u7684\u65f6\u5019\uff0c\u5982\u679c\u76f4\u63a5\u628apixel\u4f5c\u4e3astate\uff0c\u5c31\u4f1a\u6709\u5f88\u591a\u95ee\u9898\uff08\u7ef4\u5ea6\u5927\uff0c\u5f88\u591a\u4e0d\u540c\u7684\u56fe\u7247\u5b9e\u9645\u4e0a\u5bf9\u5e94\u7740\u7c7b\u4f3c\u7684\u4fe1\u606f\uff0c\u7b49\u7b49\uff09\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u7528VAE\u5148\u628a\u56fe\u7247\u538b\u7f29\u5230 \\(z\\) \uff0c\u518d\u5728 \\(z\\) \u4e0a\u8bad\u7ec3RL agent\u3002</li> <li>imitation learning\uff1a\u6211\u4eec\u4e4b\u524d\u5728imitation learning\u7684\u8fc7\u7a0b\u4e2d\uff0c\u63d0\u5230\u4e0d\u540c\u7684expert\u5728\u9762\u5bf9state\u7684\u65f6\u5019\u53ef\u80fd\u4f5c\u51fa\u4e0d\u540c\u7684action\uff08\u6bd4\u5982\uff0c\u524d\u9762\u662f\u4e00\u68f5\u6811\uff0c\u6ed1\u96ea\u8fd0\u52a8\u5458\u53ef\u80fd\u5411\u5de6\u6216\u8005\u5411\u53f3\u7ed5\u8fc7\uff09\u3002\u8fd9\u53ef\u80fd\u4f1a\u7ed9\u666e\u901a\u7684\u6982\u7387\u6a21\u578b \\(\\pi_{\\theta}(a|s)\\) \u4e00\u4e9b\u6311\u6218\uff0c\u4f46VAE\u4e0d\u4f1a\u88ab\u591a\u5cf0\u7684\u5206\u5e03\u96be\u5012\u3002\u56e0\u6b64\uff0c\u4f7f\u7528VAE\u505aimitation learning\u662f\u4e00\u4e2a\u4e0d\u9519\u7684\u9009\u62e9\u3002</li> </ul>"},{"location":"Online%20CS%20Courses/CS285/chap16/#reference_papers","title":"Reference Papers","text":"<ol> <li>Embed to Control: A Locally Linear Latent Dynamics Model for Control from Raw Images\uff08state-space model\uff09</li> <li>SOLAR: Deep Structured Representations for Model-Based Reinforcement Learning\uff08state-space model\uff09</li> <li>Learning Latent Dynamics for Planning from Pixels\uff08state-space model\uff09</li> <li>Stochastic Latent Actor-Critic: Deep Reinforcement Learning with a Latent Variable Model\uff08state-space model\uff09</li> <li>Dream to Control: Learning Behaviors by Latent Imagination\uff08state-space model\uff09</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap17/","title":"Soft Optimality","text":"<p>(a.k.a. Reframing Control as an Inference Problem in the original PPT)</p> <p>\u8fd9\u4e00\u8bb2\u4ecb\u7ecd\u4e00\u4e2a\u5f88\u597d\u73a9\u7684\u6982\u5ff5\u2014\u2014Soft Optimality\u3002\u6211\u4eec\u4ece\u4e00\u4e2a\u95ee\u9898\u6765\u51fa\u53d1\uff0c\u4e00\u6b65\u6b65\u5f15\u51fa\u6700\u7ec8\u7684\u6982\u5ff5\u548c\u7ed3\u8bba\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap17/#modeling_a_monkey","title":"Modeling a Monkey?","text":"<p>\u6211\u4eec\u8003\u8651\u8fd9\u4e00\u4e2a\u95ee\u9898\uff1a\u5047\u8bbe\u73b0\u5728\u6211\u4eec\u6709\u4e00\u4e2a\u7b80\u5355\u7684\u6e38\u620f\u3002\u6bd4\u5982\u8bf4\uff0c\u5c4f\u5e55\u4e0a\u6709\u4e00\u4e2a\u968f\u7740\u63a7\u5236\u67c4\u8fd0\u52a8\u7684\u7ea2\u70b9\uff0c\u548c\u4e00\u4e2a\u7eff\u70b9\u3002\u6211\u4eec\u7684\u76ee\u6807\u662f\u79fb\u52a8\u63a7\u5236\u67c4\u628a\u7ea2\u70b9\u79fb\u52a8\u5230\u7eff\u70b9\u4e0a\u3002\u5bf9\u4e8e\u795e\u7ecf\u7f51\u7edc\u800c\u8a00\uff0c\u968f\u4fbf\u7ed9\u5b9areward\uff0c\u53ea\u8981\u4e0d\u592a\u79bb\u8c31\uff0c\u8fd9\u4e00\u95ee\u9898\u51e0\u4e4e\u662f\u5f31\u667a\u3002</p> <p>\u4f46\u8bbe\u60f3\u6211\u4eec\u5e76\u4e0d\u662f\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\uff0c\u800c\u662f\u5e0c\u671b\u6a21\u62df\u73a9\u8fd9\u4e2a\u6e38\u620f\u7684\u4e00\u53ea\u7334\u5b50\uff08\u53ef\u4ee5\u7406\u89e3\u4e3a\u901a\u8fc7\u67d0\u79cd\u201c\u56fe\u7075\u6d4b\u8bd5\u201d\uff0c\u522b\u4eba\u4e0d\u80fd\u533a\u5206\u662f\u7334\u5b50\u8fd8\u662fagent\u5728\u73a9\u8fd9\u4e00\u6e38\u620f\uff09\u3002\u8fd9\u4e00\u4efb\u52a1\u5c31\u7565\u6709\u96be\u5ea6\u4e86\uff0c\u56e0\u4e3a\u663e\u7136\u7334\u5b50\u5e76\u4e0d\u4f1a\u53ea\u505a\u6700\u4f18\u7684\u7b56\u7565\u3002\u5f53\u7136\uff0c\u4e3a\u4e86\u4f7f\u5f97\u5b83\u548c\u751f\u7269\u5b66\u8131\u8026\u5408\uff0c\u6211\u4eec\u505a\u4e00\u4e9b\u5047\u8bbe\uff1a</p> <ul> <li>\u7334\u5b50\u7684\u884c\u4e3a\u53ef\u4ee5\u5177\u6709\u4e00\u4e9b\u968f\u673a\u6027\uff08\u8fd9\u4e9b\u968f\u673a\u6027\u4e0d\u9519\u5730\u523b\u753b\u4e86\u4e00\u4e9b\u6211\u4eec\u65e0\u6cd5access\u7684\u751f\u7269\u5b66\u53d8\u91cf\uff0c\u6bd4\u5982\u7334\u5b50\u5f53\u524d\u662f\u5426\u5f88\u70e6\u8e81\uff0c\u6216\u8005\u5f88\u75b2\u5026\uff0c\u4e4b\u7c7b\uff09\uff1b</li> <li>\u4f46\u7334\u5b50\u5728\u4efb\u4f55\u4e00\u6b65\uff0c\u91c7\u53d6\u6700\u4f18\u7b56\u7565\u7684\u6982\u7387\u90fd\u6bd4\u8f83\u5927\u3002</li> </ul> <p>\u6b64\u5916\uff0c\u5fc5\u987b\u5f3a\u8c03\uff0c\u8fd9\u4e00\u4efb\u52a1\u4e0d\u662fimitation learning\uff0c\u56e0\u4e3a\u6211\u4eec\u5e76\u4e0d\u80fdaccess\u5230\u7334\u5b50\u7684trajectory\u3002\u6211\u4eec\uff08\u6bd4\u5982\u8bf4\uff09\u53ef\u4ee5\u505a\u7684\u662f\uff0c\u7ed9\u51fa\u4e00\u4e2a\u5177\u6709\u82e5\u5e72\u8d85\u53c2\u6570\u7684\u6a21\u578b\uff0c\u5e76\u4e14\uff08\u6bd4\u5982\uff09\u5f53temperature\u8c03\u52300.1\u7684\u65f6\u5019\uff0c\u884c\u4e3a\u548c\u7334\u5b50\u5f88\u76f8\u8fd1\uff0c\u8c03\u52300.03\u7684\u65f6\u5019\uff0c\u548c\u4eba\u7c7b\u5f88\u76f8\u8fd1\uff0c\u7b49\u7b49\u3002</p> <p>\u5bf9\u4e8e\u8fd9\u4e00\u95ee\u9898\uff0c\u5018\u82e5\u6211\u4eec\u91c7\u7528\u4e4b\u524d\u7684\u65b9\u6cd5\uff0c\u90fd\u662f\u4e0d\u884c\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u7684\u76ee\u6807\u5c31\u662fcumulative reward\u6700\u5927\uff0c\u6240\u4ee5\u65e0\u6cd5\u89e3\u91ca\u7334\u5b50\u4e3a\u4f55\u4f5c\u51fa\u4e0d\u662f\u6700\u4f18\u7684\u884c\u4e3a\u3002\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\uff0c\u6211\u4eec\u9700\u8981\u5efa\u7acb\u4e00\u4e2a\u5168\u65b0\u7684\u65b9\u6cd5\u3002</p> <p>Q: \u611f\u89c9\u4f60\u80fd\u60f3\u5230\u6a21\u62df\u7334\u5b50\u8fd9\u79cd\u4e8b\u60c5\uff0c\u8fd8\u662f\u5403\u5f97\u592a\u9971\u4e86\u3002</p> <p>A: \u4e0d\uff01\u8fd9\u662f\u5341\u5206\u91cd\u8981\u7684\u4e00\u4e2a\u95ee\u9898\u3002\u6bd4\u5982\uff0c\u5728\u5f88\u591a\u7814\u7a76\u9879\u76ee\u91cc\uff0c\u6211\u4eec\u5e0c\u671b\u8bad\u7ec3\u4e00\u4e2aagent\uff0c\u4f7f\u5f97\u5b83\u7684\u884c\u4e3a\u548c\u4eba\u7c7b\u7684\u884c\u4e3a\u5c3d\u53ef\u80fd\u76f8\u4f3c\uff08\u6bd4\u5982\uff0c\u201cAI\u72fc\u4eba\u6740\u201d\uff09\u3002\u4e0d\u4ec5\u5982\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u63a5\u4e0b\u6765\u7684\u65b9\u6cd5\u8fd8\u53ef\u4ee5\u53cd\u8fc7\u6765\u7ed9\u6211\u4eec\u539f\u5148\u7684optimal control\u95ee\u9898\u63d0\u4f9b\u4e00\u4e2a\u65b0\u7684\u601d\u8def\u548c\u66f4\u597d\u7684\u7b97\u6cd5\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap17/#graphical_model_of_dicision_making","title":"Graphical Model of Dicision Making","text":"<p>\u6211\u4eec\u5efa\u7acb\u8fd9\u6837\u4e00\u4e2agraphical model\u3002\u6240\u8c13graphical model\uff0c\u5c31\u662f\u6307\u6bcf\u4e00\u6761\u7ebf\u4ee3\u8868\u4e00\u4e2a\u4f9d\u8d56\u5173\u7cfb\u3002\u6bd4\u5982\uff0c \\(s_2\\) \u4f9d\u8d56\u4e8e \\(s_1,a_1\\) \uff0c\u4e14\u4f9d\u8d56\u5173\u7cfb\u5c31\u662f \\(s_2\\sim p(s_{2}|s_1,a_1)\\) \u8fd9\u4e00\u8f6c\u79fb\u6982\u7387\u3002</p> <p>\u9700\u8981\u6ce8\u610f\uff0c\u56fe\u4e2d\u7684 \\(O\\) \u5e76\u4e0d\u662fobservation\uff0c\u800c\u662f\u6211\u4eec\u5f15\u5165\u7684\u91cd\u8981\u53d8\u91cf\u2014\u2014Optimalty\u3002\u5b83\u662f\u4e00\u4e2a\u5e03\u5c14\u53d8\u91cf\uff0c\u5927\u81f4\u4ee3\u8868\u8fd9\u4e00\u6b65\u662f\u4e0d\u662f\u4f5c\u51fa\u201c\u4f18\u7684\u201d\u51b3\u7b56\uff08\u8fd9\u4e00\u6982\u5ff5\u6bd4\u8f83\u7384\u4e4e\uff0c\u9700\u8981\u6162\u6162\u4f53\u4f1a\uff09\u3002 \\(p(O_t|s_t,a_t)\\) \u662f\u4e00\u4e2a\u672a\u77e5\u7684\u6982\u7387\u5206\u5e03\uff0c\u4f46\u662f\u6211\u4eec\u5047\u8bbe\u5b83\u5bf9\u4e8e\u4e0d\u540c\u7684 \\(t\\) \u662f\u540c\u4e00\u4e2a\u51fd\u6570\u5f62\u5f0f\u3002\u6211\u4eec\u636e\u6b64\u91cd\u5b9a\u4e49 reward\uff1a</p> \\[ r(s_t,a_t)=\\log p(O_t=1|s_t,a_t) \\] <p>\u6700\u540e\uff0c\u6211\u4eec\u9700\u8981\u5efa\u6a21\u7684\u5bf9\u8c61\u662f \\(p(\\tau|O_{1,...,T}=\\text{True})\\) \u3002\u8fd9\u91cc\u6ce8\u610f\uff0c\u6211\u4eec\u8bbe\u7f6e \\(O_{1,...,T}=\\text{True}\\) \uff0c\u662f\u56e0\u4e3a\u6211\u4eec\u6a21\u62df\u7684\u57fa\u672c\u539f\u5219\u8fd8\u662f\u5c3d\u53ef\u80fd\u4f5c\u51fa\u201c\u4f18\u7684\u201d\u51b3\u7b56\u3002</p> <p>Q: \u7b49\u7b49\uff0c\u4ec0\u4e48\u73a9\u610f\uff0c\u5982\u679c\u8ba9 \\(O_{1,...,T}=\\text{True}\\) \uff0c\u4e0d\u5c31\u662f\u4e00\u76f4\u505a\u6700\u4f18\u7684\u51b3\u7b56\uff0c\u90a3\u7b56\u7565\u4e0d\u5c31\u786e\u5b9a\u4e86\u5417\uff1f</p> <p>A: \u4f60\u7406\u89e3\u7684\u4e0d\u591f\u51c6\u786e\uff0c\u8fd9\u91cc\u786e\u5b9e\u6bd4\u8f83\u62bd\u8c61\u3002 \\(O_t=1\\)\u5e76\u4e0d\u4ee3\u8868\u8fd9\u4e00\u6b65\u4f5c\u51fa\u7684 \\(a_t\\) \u5728 \\(s_t\\) \u4e0b\u662f\u6700\u4f18\u7684\u3002\u76f8\u53cd\uff0c\u4ece\u8868\u8fbe\u5f0f \\(\\log p(O_t=1|s_t,a_t)=\\exp r(s_t,a_t)\\) \u6765\u770b\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u770b\u51fa \\(O_t=1\\) \u548c \\(s_t,a_t\\) \u662f\u201c\u6700\u4f18\u7684\u201d\u6ca1\u6709\u5fc5\u7136\u7684\u5173\u7cfb\uff0c\u5b83\u4eec\u90fd\u662f\u4ee5\u6982\u7387\u7684\u5f62\u5f0f\u51fa\u73b0\u7684\u3002</p> <p>Q: \u4f60\u5b8c\u5168\u628a\u6211\u641e\u6655\u4e86\u3002\u90a3\u8fd9\u4e2a \\(O_t\\) \u5230\u5e95\u662f\u4ec0\u4e48\uff1f</p> <p>A: \u5176\u5b9e\uff0c\u5982\u679c\u4f60\u4e0d\u6df1\u7a76\uff0c\u76f4\u63a5\u6309\u7167\u6211\u4eec\u7ed9\u51fa\u7684\u6982\u7387\u548c\u5047\u8bbe\u6765\u8ba1\u7b97\u4e5f\u4e0d\u9519\u3002\u4f46\u5982\u679c\u4f60\u8981\u6df1\u7a76\u7684\u8bdd\uff0c\u6211\u4eec\u7ed9\u51fa\u7684graphical model\u5b9e\u9645\u4e0a\u662f\u4e00\u4e2aHidden Markov Model(HMM)\u3002\u901a\u4fd7\u5730\u8bb2\uff0cHMM\u662f\u4e00\u79cd\u6a21\u578b\uff0c\u5b83\u8ba4\u4e3a\u53ef\u89c2\u6d4b\u7684\u53d8\u91cf\u7531\u4e00\u4e2a\u9690\u85cf\u7684Markov Process\u7684\u72b6\u6001\u51b3\u5b9a\uff0c\u800c\u8fd9\u4e2aMarkov Process\u7684\u72b6\u6001\u662f\u4e0d\u53ef\u89c2\u6d4b\u7684\u3002HMM\u7684\u76ee\u7684\u5c31\u662f\u6839\u636e\u53ef\u89c2\u6d4b\u53d8\u91cf\u5c3d\u53ef\u80fd\u5730\u63a8\u6d4b\u4e00\u4e9b\u5173\u4e8e\u9690\u85cf\u53d8\u91cf\u7684\u4fe1\u606f\u3002</p> <p>\u5728\u8fd9\u91cc\uff0c \\(O_t\\) \u5c31\u5bf9\u5e94\u7740\u53ef\u89c2\u6d4b\u53d8\u91cf\uff1b\u4e0d\u5373\u5982\u6b64\uff0c\u89c2\u6d4b\u5230\u7684\u6240\u6709\u6570\u636e\uff08\u5373\u6211\u4eec\u7684\u6a21\u578b\u8dd1\u51fa\u7684trajectory\uff09\u91cc\uff0c \\(O_t\\) \u90fd\u662f1\u3002\u6211\u4eec\u7684\u76ee\u6807\u5c31\u662fgiven\u4e86 \\(O_t\\) \u90fd\u662f1,\u8ba1\u7b97trajectory\u7684\u6761\u4ef6\u6982\u7387\uff0c \\(p(\\tau|O_{1...T})\\) \u3002</p> <p>Q: \u4e0d\u662f\uff0c\u90a3\u4f60\u628a \\(O_t\\) \u90fd\u53d6\u62101,\u8fd9\u4e00\u53d8\u91cf\u8fd8\u6709\u4ec0\u4e48\u7528\u5462\uff1f</p> <p>A: \u8fd9\u4f60\u8bf4\u7684\u5c31\u4e0d\u5bf9\u4e86\u3002\u6bd4\u5982\u8bf4\uff0c\u5982\u679c\u4e0d\u7ed9\u5b9a\u8fd9\u4e2a\u5168\u662f1\u7684\u6761\u4ef6\uff0c\u5728\u53eagiven \\(s_{1..t-1},a_{1..t-1}\\) \u7684\u60c5\u51b5\u4e0b\uff0c \\(a_t\\) \u548c \\(s_t\\) \u662f\u5b8c\u5168\u72ec\u7acb\u7684\u53d8\u91cf\uff1b\u4f46\u73b0\u5728\uff0c\u7edd\u5bf9\u4e0d\u662f\u8fd9\u6837\u3002</p> <p>\u6362\u53e5\u8bdd\u8bf4\uff0cHMM\u7684\u7279\u70b9\u5c31\u662f\uff0c\u56e0\u4e3a\u89c2\u5bdf\u5230\u4e86\u53ef\u89c2\u6d4b\u53d8\u91cf\uff0c\u5bfc\u81f4\u9690\u85cf\u53d8\u91cf\u7684transition probability\u53d1\u751f\u4e86\u6539\u53d8\u3002\u800c\u6211\u4eec\u901a\u8fc7\u53d6\u53ef\u89c2\u6d4b\u53d8\u91cf\u7684 \\(O_t\\) \u4ee5\u67d0\u79cd\u65b9\u5f0f\u4f9d\u8d56\u4e8etrajectory\uff0c\u5e76\u4e14\u5f3a\u884c\u4ee4 \\(O_t=1\\) \uff0c\u5c31\u6539\u53d8\u4e86trajectory\u7684\u5206\u5e03\uff1a\u628a\u5b83\u4ece\u5b8c\u5168\u6ca1\u6709\u7ea6\u675f\u65f6\u5019\u7684\u5747\u5300\u5206\u5e03\uff0c\u53d8\u5230\u73b0\u5728\uff08\u81f3\u5c11\u6211\u4eec\u5e0c\u671b\uff09\u80fd\u591f\u6a21\u62df\u7334\u5b50\u7684trajectory\u7684\u5206\u5e03\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u53ef\u4ee5\u6765\u521d\u6b65\u8ba1\u7b97 \\(p(\\tau|O_{1,...,T}=\\text{True})\\) \uff1a\u4ee5\u4e0b\u6240\u6709\u5e38\u6570\u4ee3\u8868\u4e0d\u4f9d\u8d56\u4e8e \\(\\tau\\) \u7684\u5e38\u6570\u3002</p> \\[ p(\\tau|O_{1...T}=1)=\\frac{p(\\tau,O_{1...T}=1)}{p(O_{1...T}=1)} \\] \\[ =C\\cdot p(\\tau)\\cdot p(O_1|\\tau)\\cdot p(O_2|\\tau)\\cdots \\] \\[ =C\\cdot p(\\tau)\\cdot \\exp\\left( \\sum_{t} r(s_t,a_t)\\right) \\] <p>\u5176\u4e2d</p> \\[ p(\\tau)=p(s_1)p(a_1|s_1)p(s_2|s_1,a_1)p(a_2|s_2)p(s_3|s_2,a_2)\\cdots \\] <p>\u662f\u53ea\u4e0e\u73af\u5883\u6709\u5173\u7684\u6982\u7387\u3002\uff08\u8fd9\u91cc \\(p(a_1|s_1)\\) \u7b49\u90fd\u662f\u5747\u5300\u7684\u6982\u7387\u5206\u5e03\u3002\uff09</p> <p>\u73b0\u5728\uff0c\u8003\u8651\u4e00\u4e2a\u7b80\u5316\u60c5\u51b5\uff0c\u6211\u4eec\u4f1a\u53d1\u73b0\u6211\u4eec\u7684\u6a21\u578b\u786e\u5b9e\u5408\u7406\uff1a\u5047\u8bbe \\(p(\\tau)\\) \u53ea\u662f\u4e00\u4e9bconsistency check\uff0c\u4e5f\u5c31\u662f \\(p(s_{t+1}|s_t,a_t)\\) \u5728 \\(s_{t+1}\\) \u6ee1\u8db3\u67d0\u4e9b\u548c \\(s_t,a_t\\) \u7684\u5173\u7cfb\u65f6\u662f\u5747\u5300\u5206\u5e03\uff0c\u5426\u5219\u662f0\u3002\u8fd9\u6837\uff0c\u524d\u9762\u7684\u8868\u8fbe\u5f0f\u5c31\u53d8\u6210\u4e86</p> \\[ p(\\tau|O_{1...T}=1)\\propto \\exp\\left( \\sum_{t} r(s_t,a_t)\\right) \\] <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u6700\u5927\u7684cumulative reward\uff0c\u9009\u62e9\u8fd9\u4e00trajectory\u7684\u6982\u7387\u662f\u6700\u5927\u7684\uff1b\u4f46\u5bf9\u4e8e\u5176\u4ed6trajectory\uff0c\u4e5f\u6709\u6982\u7387\u53ef\u4ee5\u9009\u5230\u3002\u8fd9\u5c31\u8bf4\u660e\uff0c\u6211\u4eec\u7684\u6a21\u578b\u7ed9\u51fa\u7684\u8fd8\u7b97\u662f\u4e00\u53ea\u5408\u7406\u7684\u7334\u5b50\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap17/#inference_of_the_graphical_model","title":"Inference of the Graphical Model","text":"<p>\u7a0d\u5fae\u7406\u89e3\u4e86\u8fd9\u4e00model\u5728\u505a\u4ec0\u4e48\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u628a\u6574\u4e2a\u95ee\u9898\u8f6c\u5316\u4e3a\u4e00\u4e2a\u6982\u7387\u95ee\u9898\uff08\u79f0\u4e3a\u8fd9\u4e2agraphical model\u7684Inference\uff09\uff1a\u7ed9\u5b9a\u4e0a\u9762\u7684graphical model\uff0c\u548c\u6982\u7387\u5206\u5e03</p> <ul> <li>\\(p(s_{t+1}|s_t,a_t)\\) \u5df2\u77e5\uff1b</li> <li>\\(p(O_t=1|s_t,a_t)=\\exp r(s_t,a_t)\\) \uff1b</li> </ul> <p>\u6211\u4eec\u7684\u76ee\u6807\u662f\u6765\u8ba1\u7b97\uff1a</p> <ul> <li>\\(\\beta_t(s_t,a_t)=p(O_{t..T}=1|s_t,a_t)\\) \uff0c\u79f0\u4e3abackward message\uff1b</li> <li>\\(\\pi_t(a_t|s_t)=p(a_t|s_t,O_{1..T}=1)\\) \uff0c\u4e5f\u5c31\u662fpolicy\uff1b</li> <li>\\(\\alpha_t(s_t)=P(s_t|O_{1..{t-1}}=1)\\) \uff0c\u79f0\u4e3aforward message\u3002</li> </ul> <p>\u5176\u4e2d\u7b2c\u4e8c\u6761\u662f\u6211\u4eec\u6700\u611f\u5174\u8da3\u7684\uff0c\u4e5f\u548c\u6211\u4eec\u7684\u95ee\u9898\u6709\u5173\uff1b\u800c\u7b2c\u4e00\u6761\u548c\u7b2c\u4e09\u6761\u662fgraphical model\u7684\u672f\u8bed\uff0c\u6211\u4eec\u540e\u9762\u4f1a\u770b\u5230\u5b83\u4eec\u7684\u4f5c\u7528\u3002</p> <p>\u5728\u5f00\u59cb\u8ba1\u7b97\u4e4b\u524d\uff0c\u6211\u4eec\u9996\u5148\u58f0\u660e\uff1a\u6309\u7167\u6211\u4eec\u7684graphical model\uff0c \\(a_t|s_t\\)\u8fd9\u4e00\u5206\u5e03\u662f\u5747\u5300\u7684\u3002\u5bf9\u4e8e\u8fd9\u4e00\u5206\u5e03\u4e0d\u5747\u5300\u7684\u60c5\u51b5\uff0c\u4e5f\u53ef\u4ee5\u505a\u7c7b\u4f3c\u7684\u63a8\u5bfc\uff0c\u4f46\u6211\u4eec\u5c31\u4e0d\u5728\u8fd9\u91cc\u8ba8\u8bba\u4e86\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap17/#backward_message","title":"Backward Message","text":"<p>\u5bf9\u4e8ebackward\uff0c\u6211\u4eec\u53ef\u4ee5\u5efa\u7acb\u8d77\u4e00\u4e2a\u9012\u63a8\u5173\u7cfb\u3002\u5177\u4f53\u5730\uff0c</p> \\[ \\beta_t(s_t,a_t)=p(O_{t..T}=1|s_t,a_t)=\\exp(r(s_t,a_t))\\sum_{s_{t+1},a_{t+1}}p(s_{t+1}|s_t,a_t)p(a_{t+1}|s_{t+1})\\beta_{t+1}(s_{t+1},a_{t+1}) \\] <p>\u5f15\u5165\u8bb0\u53f7 \\(\\beta_t(s_t)=\\mathbb{E}_{a_t\\sim p(a_t|s_t)}[\\beta_t(s_t,a_t)]\\) \uff0c\u6709</p> \\[ \\beta_t(s_t,a_t)=\\exp(r(s_t,a_t))\\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}[\\beta_{t+1}(s_{t+1})] \\] <p>\u6211\u4eec\u5ffd\u7136\u53d1\u73b0\u8fd9\u6837\u7684\u8868\u8fbe\u5f0f\u6709\u4e9b\u773c\u719f\uff01\u7684\u786e\uff0c\u5982\u679c\u4ee4</p> \\[ V_t(s_t)=\\log \\beta_t(s_t),\\quad Q_t(s_t,a_t)=\\log \\beta_t(s_t,a_t) \\] <p>\u90a3\u4e48\u6211\u4eec\u5c31\u6709</p> \\[ Q_t(s_t,a_t)=r(s_t,a_t)+\\log \\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}[\\exp V_{t+1}(s_{t+1})] \\] \\[ V_t(s_t)= \\log \\mathbb{E}_{a_t\\sim p(a_t|s_t)}[\\exp Q_t(s_t,a_t)] \\] <p>\u6ce8\u610f\uff0c\u6211\u4eec\u7684 \\(r(s_t,a_t)\\) \u5e76\u4e0d\u662f\u4f20\u7edf\u610f\u4e49\u4e0a\u7684reward\uff08\u5728\u672c\u8bb2\u4e0d\u59a8\u628a\u4f20\u7edf\u610f\u4e49\u4e0a\u7684reward\u8bb0\u4f5c \\(r_{c}\\) \uff09\uff0c\u800c\u662f\u901a\u8fc7\u524d\u9762\u7684\u5947\u602a\u65b9\u5f0f\u5b9a\u4e49\u5f97\u5230\u7684\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u4e5f\u5c31\u77e5\u9053\u4e86\uff0c\u5f53\u6211\u4eec\u9009\u53d6</p> \\[ \\log p(O_t|s_t,a_t)=:r(s_t,a_t)\\propto r_c(s_t,a_t) \\] <p>\u5e76\u4e14 \\(r(s_t,a_t)\\to \\infty\\) \u7684\u65f6\u5019\uff0c\u6211\u4eec\u8fd9\u4e00graphical model\u7ed9\u51fa\u7684 \\(\\beta_t\\) \u5177\u6709\u4e00\u79cd\u201cQ function\u201d\u548c\u201cV function\u201d\u7684\u610f\u601d\u3002\u5f53\u7136\uff0cbackup\u65b9\u7a0b\u4e2d\u5e76\u4e0d\u662f\u76f4\u63a5\u53d6\u6700\u5927\u503c\uff0c\u800c\u662f\u53d6\u4e86\u4e00\u4e2a<code>logsumexp</code>\uff0c\u8fd9\u53ef\u4ee5\u89c6\u4f5c\u4e00\u79cd\u201c\u8f6f\u7684\u201d\u6700\u5927\u503c\uff0c\u4f46softmax\u8fd9\u4e00\u540d\u8bcd\u5df2\u7ecf\u7528\u8fc7\u4e86\uff0c\u6211\u4eec\u4e0d\u59a8\u7ba1\u8fd9\u4e00\u64cd\u4f5c\u53eb\u505a \u201cbirdmax\u201d\uff08\u6ce8\u610f\uff0c\u8fd9\u4e2a\u540d\u8bcd\u662f\u6211\u81ea\u5df1\u9020\u7684\uff0c\u4e0d\u8981\u7528\uff09\u3002</p> \\[ \\text{BirdMax}(x)=\\log \\mathbb{E}_{x\\sim p(x)}[e^x] \\] <p>\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u6709</p> \\[ Q_t(s_t,a_t)=r(s_t,a_t)+\\text{BirdMax}_{s_{t+1}}[V_{t+1}(s_{t+1})] , V_t(s_t)=\\text{BirdMax}_{a_t}[Q_t(s_t,a_t)] \\] <p>\u8fd9\u662f\u4e00\u4e2a\u9012\u63a8\u7684\u65b9\u7a0b\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece \\(V_T(s_T)=0\\) \u5f00\u59cb\uff0c\u5012\u7740\u8ba1\u7b97\u51fa\u6240\u6709\u7684 \\(V_t(s_t)\\) \u548c \\(Q_t(s_t,a_t)\\) \u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap17/#policy","title":"Policy","text":"<p>\u6211\u4eec\u9700\u8981\u8ba1\u7b97</p> \\[ \\pi_t(a_t|s_t)=p(a_t|s_t,O_{1..T}=1)=\\frac{p(O_{1..T}=1|a_t,s_t)p(a_t|s_t)}{p(O_{1..T}=1|s_t)} \\] <p>\u6ce8\u610f\u5230 \\(p(O_{1..T}=1|a_t,s_t)=p(O_{1..t-1}=1)p(O_{t..T}=1|a_t,s_t)\\) \uff0c\u56e0\u6b64\u6709\uff1a</p> \\[ \\pi_t(a_t|s_t)=\\frac{1}{Z(s_t)}\\beta_t(s_t,a_t)p(a_t|s_t) \\] <p>\u800c\u5f52\u4e00\u5316\u7cfb\u6570\u5b9e\u9645\u4e0a\u662f\u5df2\u77e5\u7684\u3002\u56e0\u6b64\uff0c\u6709</p> \\[ \\pi_t(a_t|s_t)=\\frac{\\beta_t(s_t,a_t)}{\\beta_t(s_t)}p(a_t|s_t)\\propto \\frac{\\beta_t(s_t,a_t)}{\\beta_t(s_t)} \\] <p>\u6362\u53e5\u8bdd\u8bf4\uff0c\u5c31\u662f</p> \\[ \\pi_t(a_t|s_t) = p(a_t|s_t)\\cdot {\\exp [Q_t(s_t,a_t)-V_t(s_t)]}\\propto \\exp A(s_t,a_t) \\] <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u7684policy\u662f\u4e00\u4e2asoftmax\u5f62\u5f0f\u7684policy\uff0c\u5176\u4e2dlogit\u5c31\u662fadvantage\u3002\u5982\u679c\u4f60\u4e4b\u524d\u4e86\u89e3\u8fc7SAC(Soft Actor-Critic)\u7b97\u6cd5\uff0c\u4f60\u4f1a\u53d1\u73b0\u8fd9\u91cc\u7684\u5f62\u5f0f\u548cSAC\u7684\u5f62\u5f0f\u662f\u5f88\u50cf\u7684\uff1b\u5982\u679c\u4f60\u4e0d\u4e86\u89e3\uff0c\u4e5f\u6ca1\u6709\u5173\u7cfb\uff0c\u56e0\u4e3aSAC\u7684\u4e00\u79cd\u7406\u8bba\u6765\u6e90\u5c31\u662f\u8fd9\u91cc\u3002\u6211\u4eec\u4e4b\u540e\u5c31\u4f1a\u4ecb\u7ecdSAC\u65b9\u6cd5\u3002</p> <p>\u5f53\u7136\uff0c\u5c31\u5982\u4e4b\u524d\u63d0\u5230\u7684\u90a3\u6837\uff0c\u8fd9\u91cc\u7684 \\(r(s_t,a_t)\\) \u548c\u771f\u5b9e\u4e16\u754c\u7684reward \\(r_c(s_t,a_t)\\) \u5e76\u4e0d\u76f8\u7b49\uff0c\u56e0\u6b64\u6211\u4eec\u5b9e\u9645\u7684\u5e94\u7528\u4e2d\u4e00\u822c\u5f15\u5165\u4e00\u4e2a\u53c2\u6570 \\(\\alpha\\) \uff0c\u7ed9\u51fa</p> \\[ \\pi(a|s)\\propto \\exp\\left(\\frac{1}{\\alpha}A_c(s,a)\\right) \\] <p>\u5176\u4e2d \\(A_c\\) \u662f\u4f20\u7edf\u7684Q function \\(Q_c\\) \u548cV function \\(V_c\\) \u7684\u5dee\u503c\u8ba1\u7b97\u51fa\u7684advantage\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap17/#forward_message","title":"Forward Message","text":"<p>\u6700\u540e\uff0c\u6211\u4eec\u8ba8\u8bbaforward message\uff0c\u4e5f\u5c31\u662f</p> \\[ \\alpha _t(s_t)=p(s_t|O_{1..t-1}=1) \\] <p>\u5bf9\u4e8e \\(\\alpha\\) \u7684\u9012\u63a8\uff0c\u5176\u5b9e\u5f88\u96be\u5199\u51fa\u6bd4\u8f83\u7b80\u6d01\u7684\u5f62\u5f0f\u3002\u6211\u4eec\u7c7b\u4f3c\u5730\u6709</p> \\[ \\alpha_{t+1}(s_{t+1})=p(s_{t+1}|O_{1..t}=1)=\\sum_{s_t,a_t}p(s_{t+1}|s_t,a_t)p(s_t,a_t|O_t=1,O_{1..t-1}=1) \\] \\[ =\\sum_{s_t,a_t}p(s_{t+1}|s_t,a_t)\\frac{p(O_t=1|s_t,a_t,O_{1..t-1}=1)p(a_t|s_t)p(s_t|O_{1..t-1}=1)}{p(O_t=1|O_{1..t-1}=1)} \\] \\[ =C\\sum_{s_t,a_t}p(a_t|s_t)\\cdot \\exp(r(s_t,a_t))\\cdot \\alpha_t(s_t)\\cdot p(s_{t+1}|s_t,a_t) \\] <p>\u6309\u8fd9\u4e2a\u9012\u63a8\u5f0f\u7406\u8bba\u4e0a\u53ef\u4ee5\u7ed9\u51faforward message\u7684\u8868\u8fbe\u5f0f\u3002\u4f46\u5b9e\u9645\u4e0a\u66f4\u91cd\u8981\uff08\u4e5f\u66f4\u6f02\u4eae\uff09\u7684\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u662f \\(s_t\\) \u7684state marginal\uff1a</p> \\[ p(s_t|O_{1..T})=\\frac{p(s_t|O_{1..t-1})p(O_{t..T}|s_t,O_{1..t-1})}{p(O_{t..T}|O_{1..t-1})} \\] \\[ =\\frac{\\alpha_t(s_t) p(O_{t..T}|s_t)}{p(O_{t..T}|O_{1..t-1})}\\propto \\alpha_t(s_t)\\beta_t(s_t) \\] <p>\u6211\u4eec\u53ef\u4ee5\u601d\u8003\u8fd9\u4e00\u8868\u8fbe\u5f0f\u7684\u542b\u4e49\uff0c\u5b83\u5b9e\u9645\u4e0a\u5f88\u6709\u9053\u7406\uff1abackward message \\(\\beta_t(s_t)\\) \u63cf\u8ff0\u7684\u662f\uff0c\u5728state \\(s_t\\) \u5904\u5411\u540e\u770b\uff0c\u4f5c\u51fa\u7684\u51b3\u7b56\u662f\u201c\u4f18\u7684\u201d\u7684\u6982\u7387\uff1b\u800cforward message \\(\\alpha_t(s_t)\\) \u63cf\u8ff0\u7684\u662f\uff0c\u4e00\u76f4\u505a\u201c\u4f18\u7684\u201d\u51b3\u7b56\uff0c\u5230\u8fbe \\(s_t\\) \u7684\u6982\u7387\u3002\u8fd9\u4e8c\u8005\u7ed3\u5408\u8d77\u6765\uff0c\u5927\u6982\u5c31\u523b\u753b\u4e86 \\(s_t\\) \u5728\u6574\u4e2a\u201c\u4f18\u201d\u51b3\u7b56\u4e2d\u7684\u5206\u5e03\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap17/#variational_inference_of_the_graphical_model","title":"Variational Inference of the Graphical Model","text":""},{"location":"Online%20CS%20Courses/CS285/chap17/#whats_the_problem","title":"What's the Problem?","text":"<p>\u4e0a\u9762\u7684\u6a21\u578b\u771f\u7684\u80fd\u5f88\u597d\u5730\u6a21\u62df\u7334\u5b50\u7684\u884c\u4e3a\u5417\uff1f\u770b\u8d77\u6765\uff0cpolicy\u7684\u8868\u8fbe\u5f0f\u4ee5exponential advantage\u4e3a\u6b63\u6bd4\uff0c\u5df2\u7ecf\u5f88\u63a5\u8fd1\u6211\u4eec\u7684\u76f4\u89c9\u4e86\u3002\u4f46\u662f\uff0c\u6709\u4e00\u4e2a\u5f88\u4e25\u91cd\u7684\u95ee\u9898\u2014\u2014optimism problem\u3002</p> <p>\u95ee\u9898\u7684\u6765\u6e90\u51fa\u73b0\u5728Q function\u7684update:</p> \\[ Q_t(s_t,a_t)=r(s_t,a_t)+\\text{BirdMax}_{s_{t+1}}[V_{t+1}(s_{t+1})] \\] <p>\u6ce8\u610fbirdmax\u7684\u8ba1\u7b97\u65b9\u5f0f\u662flogsumexp\uff0c\u8fd9\u5f88\u5bb9\u6613\u9020\u6210\u8fc7\u5ea6\u7684\u81ea\u4fe1\u3002</p> <p>\u6211\u4eec\u8003\u8651\u5982\u4e0b\u7684\u4f8b\u5b50\u3002</p> <p></p> <p>\u8003\u8651\u4e00\u4e2a\u6d41\u6d6a\u6c49\uff0c\u4ed6\u6bcf\u5929\u90fd\u4f1a\u997f\u809a\u5b50\uff0c\u56e0\u6b64\u6bcf\u5929\u6b63\u5e38\u90fd\u6709\u4e00\u4e2a\u8d1f\u7684reward\u3002\u6211\u4eec\u8003\u8651\u5f00\u59cb\u7684\u4e00\u5929\uff08 \\(s_1\\) \uff09\uff0c\u4ed6\u53d1\u73b0\u4e00\u4e2a\u552e\u5356\u5f69\u7968\u7684\u5546\u5e97\u3002\u5982\u679c\u4e70\u4e86\u5f69\u7968\uff08\u8bb0\u4e3a \\(a_{1,1}\\) \uff09\uff0c\u90a3\u4e48\u4ed6\u53ef\u80fd\u4f1a\u4ed8\u51fa\u989d\u5916\u7684\u94b1\uff0c\u56e0\u6b64\u8fd9\u4e00\u5929\u7684reward\u4e3a-150\uff08 \\(r(s_1,a_{1,1})=-150\\) \uff09\u3002\u4f46\u5982\u679c\u4ed6\u4e0d\u4e70\u5f69\u7968\uff08\u8bb0\u4e3a \\(a_{1,2}\\) \uff09\uff0c\u90a3\u4e48\u4ed6\u5c31\u4e0d\u4f1a\u4ed8\u51fa\u989d\u5916\u7684\u94b1\uff0creward\u4e3a-100\uff08 \\(r(s_1,a_{1,2})=-100\\) \uff09\u3002\u5982\u679c\u4ed6\u4e70\u4e86\u5f69\u7968\uff0c\u7b2c\u4e8c\u5929\u4ed6\u4f1a\u4ee599%\u7684\u6982\u7387\u6ca1\u6709\u83b7\u5f97\u4efb\u4f55\uff08 \\(s_{2,1}\\) \uff09\uff0c\u4ed6\u4e0d\u7ba1\u505a\u4ec0\u4e48\uff08\u8bb0\u8fd9\u4e2a\u6ca1\u4ec0\u4e48\u7528\u7684action\u4e3a \\(a_2\\) \uff09\u90fd\u4f1a\u7ee7\u7eed\u997f\u809a\u5b50\uff08 \\(r(s_{2,1},a_2)=-100\\) \uff09\uff1b\u4f46\u4ed6\u4e5f\u67091%\u7684\u6982\u7387\u4e2d\u5956\uff0c\u4ed6\u5f97\u4ee5\u5403\u9971\uff08 \\(r(s_{2,2},a_2)=0\\) \uff09\u3002\u5f53\u7136\uff0c\u5982\u679c\u4ed6\u6ca1\u6709\u4e70\u5f69\u7968\uff0c\u90a3\u4f9d\u7136\u662f\u997f\u809a\u5b50\uff08 \\(r(s_{2,3},a_2)=-100\\) \uff09\u3002</p> <p>\uff08\u8fd9\u4e2a\u4f8b\u5b50\u6709\u70b9\u5510\uff0c\u4e3b\u8981\u662f\u56e0\u4e3a\u6211\u4eec\u7684reward\u5fc5\u987b\u4e0d\u80fd\u8d85\u8fc70\uff09\u3002\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u6309\u7167\u524d\u9762\u7684birdmax update\u65b9\u5f0f\u8ba1\u7b97\u4e00\u4e0b\u8fd9\u4e2a\u73af\u5883\u4e0b\u7684Q function\u548cV function\u3002</p> <p></p> <p>\u6211\u4eec\u4f1a\u53d1\u73b0\uff0c\u5bf9\u4e8e\u4e70\u5f69\u7968\u7684action\uff0c\u867d\u7136\u5927\u6982\u7387\u7b2c\u4e8c\u5929\u7684reward\u662f-100\uff0c\u671f\u671b\u4e0a\u4e5f\u57fa\u672c\u662f-100\uff0c\u4f46\u662f\u5176birdmax\u4e4b\u540e\u662f \\(\\log (0.99\\times 10^{-100}+0.01\\times 1)\\approx -2\\) \u3002\u8fd9\u5c31\u5bfc\u81f4\uff0c\u4e70\u5f69\u7968\u4e4b\u540e\uff0cQ function\u53cd\u800c\u66f4\u9ad8\uff08-152\uff09\u3002\u5e76\u4e14\uff0c\u6b64\u65f6\u6309\u7167exponential advantage\u7ed9\u51fa\u7684policy\u6709\u63a5\u8fd1\u4e8e1\u7684\u6982\u7387\u4e70\u5f69\u7968\uff01\u5bf9\u4e8e\u8fd9\u4f4d\u53ef\u601c\u7684\u6d41\u6d6a\u6c49\uff0c\u8fd9\u663e\u7136\u662f\u4e0d\u5408\u7406\u7684\u3002</p> <p>\u6211\u4eec\u4ed4\u7ec6\u60f3\u4e00\u60f3\uff0c\u8fd9\u4e00\u95ee\u9898\u7a76\u7adf\u6765\u81ea\u4e8e\u54ea\u91cc\uff1f\u4ece\u6570\u5b66\u516c\u5f0f\u4e0a\u770b\uff0c\u5bf9\u4e0d\u540cstate\u7684birdmax\u8fc7\u5206\u9ad8\u4f30\u4e86state\u7684\u201c\u6f5c\u80fd\u201d\uff0c\u4f46\u8fd9\u4e0d\u591f\u672c\u8d28\uff1b\u672c\u8d28\u5b9e\u9645\u4e0a\u662f\uff0c\u6211\u4eec\u8fc7\u5206\u5730condition on\u4e86\u51b3\u7b56\u662f\u201c\u4f18\u201d\u7684\u8fd9\u4e00\u4e8b\u5b9e\u3002</p> <p>\u5177\u4f53\u5730\uff0c\u5728\u4e0a\u9762\u7684\u4f8b\u5b50\u91cc\uff0c\u6211\u4eec\u8003\u8651\u4e70\u5f69\u7968\u8fd9\u4e00\u4e2aaction\u3002\u5047\u8bbe\u6211\u4eec\u4ec0\u4e48\u90fd\u4e0dcondition\uff0c\u90a3\u4e48\u8d5a\u94b1\u7684\u6982\u7387\u663e\u7136\u662f\u5f88\u4f4e\u7684\uff081%\uff09\uff1b\u4f46\u5982\u679c\u6211\u4eeccondition on\u4e86\u51b3\u7b56\u662f\u201c\u4f18\u201d\u7684\u8fd9\u4e00\u4e8b\u5b9e\uff0c\u90a3\u4e48\u8d5a\u94b1\u7684\u6982\u7387\u5c31\u53d8\u6210\u4e86</p> \\[ p(s_2=s_{2,2}|s_1,a_{1,1},O_2=1)=\\frac{p(O_2=1|s_1,a_{1,1},s_2=s_{2,2})\\cdot p(s_2=s_{2,2}|s_1,a_{1,1})}{p(O_2=1|s_1,a_{1,1})} \\] \\[ =\\frac{1\\cdot 1\\%}{1\\cdot 1\\% + 10^{-100}\\cdot 99\\%}\\approx 100\\% ! \\] <p>\u6362\u53e5\u8bdd\u8bf4\uff0c\u5728\u524d\u9762\u7684\u63a8\u5bfc\u91cc\uff0c\u6211\u4eec\u53d6</p> \\[ \\pi_t(a_t|s_t)=p(a_t|s_t,O_{1..T}=1) \\] <p>\u8fd9\u4e00\u70b9\u5e76\u4e0d\u5408\u9002\u3002\u56e0\u4e3a\u8fd9\u76f8\u5f53\u4e8e\u544a\u8bc9\u4e86\u6d41\u6d6a\u6c49\uff1a\u201c\u4f60\u653e\u5fc3\u4e70\u5f69\u7968\u5427\uff0c\u6211\u6709\u540e\u95e8\uff0c\u5305\u51c6\u8d62\uff01\u201d\u3002\u4f46\u4e8b\u5b9e\u662f\u6b8b\u9177\u7684\uff0c\u8f6c\u79fb\u6982\u7387\u4e0d\u662f \\(p(s_{t+1}|s_t,a_t,O_{1..T}=1)\\) \uff0c\u800c\u662f \\(p(s_{t+1}|s_t,a_t)\\) \u3002</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u7684policy\u5e94\u8be5\u91cd\u65b0\u88ab\u9009\u53d6\u3002\u5f88\u81ea\u7136\u5730\uff0c\u6211\u4eec\u9009\u53d6\u5b83\u4e3a\u6b8b\u9177\u7684\u4e8b\u5b9e\u4e0b\u7684\u6700\u8fd1\u4f3c\u5206\u5e03\uff1a</p> \\[ \\pi = \\arg\\min_{\\pi}\\text{KL}\\left(p_{\\pi}(s_{1..T},a_{1..T})||p(s_{1..T},a_{1..T}|O_{1..T}=1)\\right) \\] <p>\u5176\u4e2d</p> \\[ p(s_{1..T},a_{1..T}|O_{1..T}=1)=p(s_1|O)p(a_1|s_1,O)p(s_2|s_1,a_1,O)p(a_2|s_2,O)\\cdots \\] <p>\u4e3a\u7406\u60f3\u7684\u5206\u5e03\uff1b\u800c</p> \\[ p_{\\pi}(s_{1..T},a_{1..T})=p(s_1)\\pi(a_1|s_1)p(s_2|s_1,a_1)\\pi_2(a_2|s_2)p(s_3|s_2,a_2)\\cdots \\] <p>\u4e3a\u6211\u4eec\u7ea6\u675f\u4e0b\u7684\u5206\u5e03\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap17/#variational_inference","title":"Variational Inference","text":"<p>\u6211\u4eec\u53d1\u73b0\uff0c\u8fd9\u4e00\u95ee\u9898\u5341\u5206\u50cfvariational inference\uff01\u5982\u679c\u8bb0</p> \\[ z=(s_{1..T},a_{1..T}),\\quad x=O_{1..T},\\quad q(z|x=1)=p_\\pi(z) \\] <p>\u90a3\u4e48\u8fd9\u4e00\u95ee\u9898\u5c31\u662f</p> \\[ \\pi = \\arg\\min_{\\pi}\\text{KL}\\left(q(z|x)||p(z|x)\\right) \\] <p>\u8fd8\u8bb0\u5f97\u6211\u4eec\u5728\u524d\u4e00\u8bb2VAE\u7684\u4ecb\u7ecd\u4e2d\u7ed9\u51fa\u7684\uff0c</p> \\[ \\text{ELBO}=\\log p(x)-\\text{KL}\\left(q(z|x)||p(z|x)\\right) \\] <p>\u800c\u548c\u4e4b\u524d\u4e0d\u540c\u7684\u662f\uff0c\u73b0\u5728 \\(\\log p(x)\\) \u548c\u6211\u4eec\u8981\u4f18\u5316\u7684\u4e1c\u897f\u65e0\u5173\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u9700\u8981\u6700\u5927\u5316ELBO\u3002\u8fd9\u65f6\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u5b83\u7684\u7b2c\u4e8c\u79cd\u8868\u8fbe\u5f62\u5f0f\uff1a</p> \\[ \\text{ELBO}= \\mathbb{E}_{z\\sim q(z|x)}[\\log p(x|z)]-\\text{KL}(q(z|x)||p(z)) \\] <p>\u8fd9\u65f6\uff0c\u6ce8\u610f\u5230 \\(p(x|z)\\) \u662f\u5bb9\u6613\u8ba1\u7b97\u7684\uff1a</p> \\[ p(x|z)=p(O_1=1|s_1,a_1)p(O_2=1|s_2,a_2)\\cdots=\\exp\\left(\\sum_{t}r(s_t,a_t)\\right) \\] <p>\u800cKL divergence\u4e2d\u7684</p> \\[ \\log \\frac{q(z|x)}{p(z)}=\\log \\frac{p_{\\pi}(z)}{p(z)}=\\sum_t \\log \\frac{\\pi(a_t|s_t)}{p(a_t|s_t)} \\] <p>\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u6700\u7ec8\u5199\u51faobjective\uff1a</p> \\[ \\pi = \\arg \\max_{\\pi} \\mathbb{E}_{\\tau\\sim p_{\\pi}(\\tau)}\\left[\\sum_{t}r(s_t,a_t)-\\log \\frac{\\pi(a_t|s_t)}{p(a_t|s_t)}\\right] \\] <p>\u5728 \\(p(a_t|s_t)\\) \u5747\u5300\u7684\u5047\u8bbe\u4e0b\uff0c\u8fd9\u5c31\u53d8\u6210\u4e86</p> \\[ \\pi = \\arg \\max_{\\pi} \\mathbb{E}_{\\tau\\sim p_{\\pi}(\\tau)}\\left[\\sum_{t}r(s_t,a_t)+\\mathcal{H}(\\pi(\\cdot|s_t))\\right] \\] <p>\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u4e00objective\u548c\u6211\u4eec\u719f\u6089\u7684RL objective\u975e\u5e38\u76f8\u4f3c\uff0c\u53ea\u662f\u591a\u4e86\u4e00\u4e2aentropy bonus\u3002\u8fd9\u5f88\u5408\u7406\uff0c\u56e0\u4e3a\u6211\u4eec\u4e00\u5f00\u59cb\u7684\u5047\u8bbe\u5c31\u662f\uff0c\u7334\u5b50\u4f1a\u57fa\u672c\u6309\u7167\u6700\u4f18\u7b56\u7565\uff0c\u4f46\u662f\u4e5f\u4f1a\u6709\u4e00\u4e9b\u968f\u673a\u6027\u3002\u8fd9\u4e00\u968f\u673a\u6027\u5c31\u6070\u6070\u7531entropy bonus\u7ed9\u51fa\uff0c\u800centropy bouns\u4e5f\u89e3\u91ca\u4e86\u4e3a\u4f55sub-optimal\u7684action\u4e5f\u4f1a\u88ab\u9009\u53d6\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap17/#solving_for_the_optimal_policy","title":"Solving for the Optimal Policy","text":"<p>\u6211\u4eec\u628a\u524d\u9762\u7684objective\u5c55\u5f00\uff1a</p> \\[ J=\\mathbb{E}_{s_1\\sim p(s_1)}\\mathbb{E}_{a_1\\sim \\pi(a_1|s_1)}\\left[r(s_1,a_1)-\\log \\pi(a_1|s_1)+\\mathbb{E}_{s_2\\sim p(s_2)}\\mathbb{E}_{a_2\\sim \\pi(a_2|s_2)}\\left[r(s_2,a_2)-\\log \\pi(a_2|s_2)+\\cdots\\right]\\right] \\] <p>\u8fd9\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u50cf\u4e4b\u524d\u8bf4\u7684LQR\u4e00\u6837\uff0c\u6c42\u89e3\u6700\u4f18\u7684policy\u3002\u4f5c\u4e3a\u5047\u8bbe\uff0c\u6211\u4eec\u8ba4\u4e3a\u6211\u4eec\u7684\u7f51\u7edc\u8868\u73b0\u80fd\u529b\u8db3\u591f\u5f3a\uff0c\u4ee5\u81f3\u4e8egiven\u4efb\u610fstate \\(s\\) \u90fd\u53ef\u4ee5\u968f\u610f\u9009\u53d6 \\(\\pi(a|s)\\) \u3002\u8fd9\u6837\uff0c\u5bf9\u4e8e \\(s_T\\) \u7684\u6700\u4f18policy\u5c31\u53ef\u4ee5\u76f4\u63a5\u8ba1\u7b97\u5f97\u5230\uff1a</p> \\[ \\pi(a_T|s_T)\\propto \\exp r(s_T,a_T)=\\exp Q(s_T,a_T) \\] <p>\u518d\u6ce8\u610f\u5230</p> \\[ V(s_T)=\\text{BirdMax}_{a_T}[Q(s_T,a_T)]=\\log \\mathbb{E}_{a_T\\sim p(a_T|s_T)}[\\exp {Q(s_T,a_T)}] \\] <p>\u56e0\u6b64\uff0c\u7acb\u523b\u53ef\u4ee5\u7ed9\u51fa</p> \\[ \\pi(a_T|s_T)=\\frac{\\exp Q(s_T,a_T)}{\\exp V(s_T)}p(a_T|s_T) \\] <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u518d\u6b21\u9012\u63a8\u3002\u5047\u8bbe \\(t+1\\) \u65f6\u5df2\u7ecf\u7ed9\u51fa\u4e86\u6700\u4f18\u7684\u7b56\u7565\u4e3a</p> \\[ \\pi(a_{t+1}|s_{t+1})=\\frac{\\exp \\hat{Q}(s_{t+1},a_{t+1})}{\\exp \\hat{V}(s_{t+1})}p(a_{t+1}|s_{t+1}) \\] <p>\u5e76\u4e14\u4f7f\u5f97</p> \\[ \\mathbb{E}_{a_{t+1}\\sim \\pi(a_{t+1}|s_{t+1})}\\left[r(s_{t+1},a_{t+1})-\\log \\pi(a_{t+1}|s_{t+1})+\\cdots\\right]:=J_{t+1}=\\hat{V}(s_{t+1}) \\] <p>\uff08\u8fd9\u91cc\u6254\u6389\u4e86\u4e00\u4e9b\u53ef\u80fd\u548c \\(\\log p(a_{t+1}|s_{t+1})\\) \u76f8\u5173\u7684\u5e38\u6570\uff09\u5176\u4e2d \\(\\hat{Q},\\hat{V}\\) \u662f\u67d0\u5f85\u5b9a\u51fd\u6570\u3002\u8fd9\u6837\uff0c\u5e26\u56de\u5230 \\(t\\) \u65f6\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230 \\(t\\) \u65f6\u523b\u7684\u7b49\u6548objective\u4e3a</p> \\[ J=\\mathbb{E}_{s_t\\sim p(s_t)}\\mathbb{E}_{a_t\\sim \\pi(a_t|s_t)}\\left[r(s_t,a_t)-\\log \\pi(a_t|s_t)+\\mathbb{E}_{s_{t+1}}[\\hat{V}(s_{t+1})]\\right] \\] <p>\u56e0\u6b64\uff0c\u53ea\u8981\u6ee1\u8db3</p> \\[ \\hat{Q}(s_t,a_t)=r(s_t,a_t)+\\mathbb{E}_{s_{t+1}}[\\hat{V}(s_{t+1})],\\quad \\hat{Q}(s_T,a_T)=r(s_T,a_T) \\] \\[ \\hat{V}(s_{t+1})=\\text{BirdMax}_{a_{t+1}}[\\hat{Q}(s_{t+1},a_{t+1})] \\] <p>\u5c31\u53ef\u4ee5\u4f7f\u5f97\u5f52\u7eb3\u88ab\u6ee1\u8db3\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u7ed9\u51fa\u4e86\u6700\u4f18policy\u7684\u89e3\u3002</p> <p>\u7565\u5fae\u603b\u7ed3\uff0c\u6211\u4eec\u4f7f\u7528variational inference\uff0c\u6700\u7ec8\u5f97\u5230\u7684\u7b54\u6848\u662f\uff08\u5408\u7406\u5730\u63d2\u5165\u4e86discount\uff09</p> \\[ \\hat{Q}(s_t,a_t)=r(s_t,a_t)+\\gamma \\mathbb{E}_{s_{t+1}}[\\hat{V}(s_{t+1})] \\] \\[ \\hat{V}(s_{t+1})=\\alpha\\cdot \\mathbb{E}_{a_{t+1}\\sim p(a_{t+1}|s_{t+1})}\\left[\\exp \\left(\\frac{\\hat{Q}(s_{t+1},a_{t+1})}{\\alpha}\\right)\\right] \\] \\[ \\pi(a_t|s_t)=\\frac{\\exp \\left(\\frac{\\hat{Q}(s_t,a_t)}{\\alpha }\\right)}{\\exp \\left(\\frac{\\hat{V}(s_t)}{\\alpha }\\right)}p(a_t|s_t) \\] <p>\uff08\u8fd9\u91cc\u51fa\u4e8e\u548c\u4e4b\u524d\u8bf4\u7684\u4e00\u6837\u7684\u7406\u7531\uff0c\u4e00\u4e2atemperature\u53c2\u6570 \\(\\alpha\\) \u4f5c\u4e3ahyperparameter\u9700\u8981\u88ab\u5f15\u5165\u3002\uff09</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u4e00\u8fed\u4ee3\u65b9\u5f0f\u6bd4\u8f83\u5947\u7279\u2014\u2014\u5728Q\u7b97V\u7684\u65f6\u5019\uff0c\u6211\u4eec\u7528\u7684\u662f\u6bd4\u8f83\u201c\u8f6f\u201d\u7684birdmax\uff1b\u800c\u5728V\u7b97Q\u7684\u65f6\u5019\uff0c\u6211\u4eec\u76f4\u63a5\u4f7f\u7528\u671f\u671b\u503c\u3002\u8fd9\u6709\u70b9\u50cf\u662f\u4e4b\u524d\u7b2c\u4e00\u4e2a\u7248\u672c\u7684graphical model inference\u65b9\u6cd5\u548c\u666e\u901a\u7684Q-V iteration\u65b9\u6cd5\u7684\u7ed3\u5408\u3002\u666e\u901a\u7684Q-V iteration\u4e0d\u5141\u8bb8sub-optimal behavior\u7684\u51fa\u73b0\uff1bgraphical model inference\u65b9\u6cd5\u51fa\u73b0\u4e25\u91cd\u7684optimism\u95ee\u9898\uff1b\u800c\u8fd9\u4e00\u65b9\u6cd5\u7ed3\u5408\u4e86\u4e24\u8005\u7684\u4f18\u70b9\uff0c\u5e76\u4e14\u5efa\u7acb\u5728\u575a\u5b9e\u7684\u7406\u8bba\u4f9d\u636e\u4e0a\uff0c\u7ed9\u51fa\u4e86\u4e00\u4e2a\u5f88\u597d\u7684\u89e3\u51b3\u65b9\u6848\u3002</p> <p>\u5982\u679c\u4f60\u611f\u5174\u8da3\uff0c\u4e5f\u53ef\u4ee5\u628a\u8fd9\u4e2a\u65b0\u7684\u8fed\u4ee3\u516c\u5f0f\u4ee3\u5165\u6211\u4eec\u4e4b\u524d\u4e70\u5f69\u7968\u7684\u4f8b\u5b50\u3002\u4f60\u4f1a\u53d1\u73b0\uff0c\u6d41\u6d6a\u6c49\u4e0d\u4f1a\u518d\u4f5c\u51fa\u90a3\u8352\u8c2c\u7684\u51b3\u5b9a\u4e86\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap17/#soft_optimality_1","title":"Soft Optimality","text":"<p>\u6211\u4eec\u7ec8\u4e8e\u53ef\u4ee5\u5f15\u5165soft optimality\u7684\u6982\u5ff5\u4e86\u3002\u5176\u5b9e\uff0c\u8fd9\u4e5f\u6ca1\u6709\u5b83\u542c\u8d77\u6765\u7684\u90a3\u6837\u9ad8\u7ea7\uff1a</p> <ul> <li>\u5b83\u7684\u76ee\u6807\u5c31\u662f\u4e4b\u524d\u8bf4\u7684\u90a3\u6837\uff0c\u8bd5\u56fe\u6a21\u62df\u4eba\u7c7b\u7684\u884c\u4e3a\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5b83\u7ed9\u51fa\u4e00\u4e2a\u5411\u5f80\u7f8e\u597d\uff0c\u4f46\u4e5f\u4e0d\u4e25\u683c\u6700\u4f18\u7684\u884c\u4e3a\u3002</li> <li>\u4e3a\u4e86\u4ea7\u751f\u6700\u4f18\u89e3\u4e4b\u5916\u7684\u89e3\uff0c\u6a21\u578b\u5f15\u5165\u968f\u673a\u6027\uff0c\u8868\u73b0\u4e3aentropy bonus\u3002\u6ce8\u610f\u5230entropy bonus\u4e0d\u4ec5\u5f3a\u8c03\u4e86\u968f\u673a\uff0c\u8fd8\u5f3a\u8c03\u4e86\u5747\u5300\u7684\u968f\u673a\u3002</li> <li>\u540c\u65f6\uff0c\u4f20\u7edf\u7684Q-V iteration\u4fdd\u8bc1\u4e86\u6a21\u578b\u4f9d\u7136\u5177\u6709\u4e00\u5b9a\u7684\u6700\u4f18\u6027\u3002</li> </ul> <p>soft optimality\u5c31\u662f\u8fd9\u4e9b\u4e1c\u897f\u7684\u6742\u4ea4\u4ea7\u7269\uff0c\u5728\u4e00\u4e2aspecific\u7684\uff0c\u76ee\u6807\u662f\u201c\u5237\u5206\u201d\u7684\u4f20\u7edfRL\u95ee\u9898\u4e2d\uff0c\u5b83\u7684\u8868\u73b0\u4e0d\u4e00\u5b9a\u6bd4\u4f20\u7edf\u7684Q-V iteration\u597d\uff1b\u4f46\u5fc5\u987b\u6ce8\u610f\uff0c\u5b83\u7684\u8bbe\u8ba1\u672c\u8eab\u5e76\u4e0d\u662f\u4e3a\u4e86\u89e3\u51b3\u4f20\u7edf\u7684\uff0c\u4f7f\u5f97agent\u83b7\u5f97\u6700\u5927reward\u7684\u95ee\u9898\u3002</p> <p>\u4f46\u6709\u610f\u601d\u7684\u662f\uff0c\u5373\u4fbf\u8fd9\u4e48\u8bf4\uff0c\u5728\u5f88\u591a\u60c5\u51b5\u4e0b\uff0c\u52a0\u5165\u4e86entropy bonus\u7684\u65b9\u6cd5\u53cd\u800c\u6bd4\u4e4b\u524d\u6211\u4eec\u4ecb\u7ecd\u7684\u90a3\u4e9bQ learning\u65b9\u6cd5\u66f4\u597d\u3002\u6211\u4eec\u63a5\u4e0b\u6765\u5c31\u6765\u4ecb\u7ecdsoft optimality\u7684\u4e00\u4e9b\u5e94\u7528\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap17/#application_of_soft_optimality","title":"Application of Soft Optimality","text":""},{"location":"Online%20CS%20Courses/CS285/chap17/#soft_actor-critic","title":"Soft Actor-Critic","text":"<p>SAC\u7b97\u6cd5\u53ef\u4ee5\u8bf4\u662fQ learning\u65b9\u6cd5\u4e2d\u6700\u5927\u540d\u9f0e\u9f0e\u7684\u4e00\u79cd\uff08\u867d\u7136\u6211\u4eec\u4e4b\u524d\u768418\u8bb2\u4e2d\u90fd\u6ca1\u600e\u4e48\u63d0\u5230\u5b83\uff01\uff09\u3002\u5b83\u5c31\u662f\u57fa\u4e8e\u524d\u9762\u7684soft optimality\u7684\u7406\u8bba\u3002</p> <p>SAC algorithm</p> <p>\u91cd\u590d\uff1a</p> <ol> <li>\u66f4\u65b0 Q function: \\(Q(s,a)\\leftarrow r(s,a)+\\gamma[Q(s',a')-\\log \\pi(a'|s')]\\) \uff08\u5f53\u7136\uff0c\u8981\u91c7\u7528target network\u7b49\u4f18\u5316\uff0c\u548c\u4e4b\u524d\u4e00\u6837\uff0c\u4e0d\u518d\u8d58\u8ff0\uff09\uff1b</li> <li>\u4f7f\u7528 REINFORCE \u6216\u8005 REPARAMETERIZE \u6765\u66f4\u65b0policy\uff0cobjective\u4e3a \\(J=\\mathbb{E}_{a\\sim \\pi(a|s)}[Q(s,a)-\\log \\pi(a|s)]\\) \u3002<ul> <li>\u5982\u679c\u4f7f\u7528 REINFORCE\uff0c\u90a3\u4e48 fake loss \u4e3a \\(\\hat{J}=\\mathbb{E}_{a\\sim \\pi(a|s)}[\\log \\pi(a|s)Q(s,a)]+\\mathcal{H}(a|s)\\) \uff08\u8fd9\u662f\u5bf9\u4e00\u7ec4\u6570\u636e\u7684\u68af\u5ea6\uff09\uff1b</li> <li>\u5982\u679c\u4f7f\u7528 REPARAMETERIZE\uff0c\u90a3\u4e48\u76f4\u63a5\u8ba1\u7b97loss\u5c31\u53ef\u4ee5\u4e86\u3002</li> <li>\u4f60\u53ef\u80fd\u4f1a\u7591\u95ee\uff0c\u7528 REINFORCE \u600e\u4e48\u8ba1\u7b97\u71b5 \\(\\mathcal{H}\\) \u7684\u68af\u5ea6\uff1f\u5b9e\u9645\u4e0a\uff0c\u4e5f\u4e0d\u662f\u4e0d\u53ef\u4ee5\uff0c\u53ea\u9700\u8981\u628afake loss\u8bbe\u7f6e\u4e3a \\(\\frac{1}{2}\\mathbb{E}_{a\\sim \\pi(a|s)}[(\\log \\pi(a|s))^2]\\) \u5c31\u53ef\u4ee5\u4e86\u3002\u5f53\u7136\uff0c\u8fd9\u770b\u8d77\u6765\u6bd4\u8f83\u5947\u602a\u3002\u5b9e\u9645\u4e0a\uff0cREPARAMETERIZE\u7684\u6548\u679c\u786e\u5b9e\u4e5f\u66f4\u597d\u3002</li> </ul> </li> <li>\u6839\u636epolicy\u6765\u6536\u96c6\u6570\u636e\u3002</li> </ol> <p>\u6ce8\u610f\u8fd9\u4e00algorithm\u548c\u4e4b\u524d\u7684soft optimality\u7ed9\u51fa\u7684\u516c\u5f0f\u5177\u6709\u7ec6\u5fae\u7684\u5dee\u522b\uff1a\u5728update Q \u7684\u65f6\u5019\uff0c\u6211\u4eec\u4e0d\u518d\u5355\u72ec\u4f7f\u7528birdmax\u8ba1\u7b97 \\(V\\) \uff0c\u56e0\u4e3a\u5728continous action space\u4e0a\u5f88\u96be\u8ba1\u7b97\u51fa\u6765\uff1b\u8f6c\u800c\u6211\u4eec\u7528 \\(\\log \\pi\\) \u6765\u4f30\u8ba1 \\(V\\) \uff0c\u8fd9\u662f\u666e\u9002\u7684\u3002\u5f53\u7136\uff0c\u5728discrete action\u4e0a\u9762\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528birdmax\u3002\u8fd9\u4e00\u7b97\u6cd5\u53eb\u505a \u201csoft Q-learning\u201d\uff1a</p> <p>Soft Q-learning</p> <ol> <li>\u66f4\u65b0 Q function: \\(Q(s,a)\\leftarrow r(s,a)+\\gamma\\cdot \\text{BirdMax}_{a_{t+1}}[Q(s_{t+1},a_{t+1})]\\) \uff08\u5f53\u7136\uff0c\u8fd8\u662f\u8981\u91c7\u7528target network\u7b49\u4f18\u5316\uff09\uff1b</li> <li>\u6839\u636e\u67d0\u79cdexploration policy\u6765\u6536\u96c6\u6570\u636e\u3002</li> </ol> <p>SAC algorithm\u7684\u6548\u679c\u5341\u5206\u663e\u8457\u3002\u4e00\u65b9\u9762\uff0c\u5b83\u8bad\u7ec3\u51fa\u6765\u7684policy\u5177\u6709\u5f88\u5f3a\u7684robustness\uff0c\u56e0\u4e3aentropy bonus\u9f13\u52b1policy\u56db\u5904\u63a2\u7d22\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u5b83\u5728\u5404\u79cd\u65b9\u5411\u4e0a\u90fd\u6709\u5f88\u597d\u7684\u89e3\u51b3\u65b9\u6848\u3002\u5728\u5b9e\u9a8c\u4e0a\uff0c\u7528SAC\u8bad\u7ec3\u51fa\u6765\u7684\u79fb\u52a8\u7269\u54c1\u7684\u673a\u5668\u4eba\uff0c\u5373\u4f7f\u4eba\u5bf9\u5b83\u62f3\u6253\u811a\u8e22\u5bfc\u81f4\u5b83\u7684\u673a\u68b0\u81c2\u79fb\u52a8\u4e86\u5f88\u8fdc\uff0c\u5f53\u201c\u653b\u51fb\u201d\u7ed3\u675f\u540e\u5b83\u4f9d\u7136\u80fd\u53cd\u5e94\u8fc7\u6765\uff0c\u7ee7\u7eed\u5b8c\u6210\u4efb\u52a1\u3002</p> <p>\u53e6\u5916\u4e00\u65b9\u9762\uff0cSAC\u53ef\u4ee5\u505a\u5f88\u597d\u7684pretraining\u3002\u4ec0\u4e48\u6837\u7684\u4efb\u52a1\u9700\u8981pretraining\u5462\uff1f\u8bbe\u60f3\u8fd9\u6837\u4e00\u4e2a\u95ee\u9898\uff1a\u6211\u4eec\u8981\u8bad\u7ec3\u4e00\u4e2ahumanoid\u8d70\u8ff7\u5bab\u7684\u4efb\u52a1\uff0cddl\u662f5\u5929\u3002\u4f46\u8ff7\u5bab\u8fd9\u4e00\u73af\u5883\u5728\u7b2c\u56db\u5929\u624d\u4f1a\u516c\u5e03\u3002\u5728\u6b64\u4e4b\u524d\uff0c\u6211\u4eec\u53ea\u80fd\u5728\u65e0\u9650\u5927\u7684\u5e73\u9762\u4e0a\u8bad\u7ec3\u4e00\u4e2ahumanoid\u6765\u8d70\u8def\u3002\u5728pretraining\u8fc7\u7a0b\u7684reward\uff08\u6bd4\u5982\u7528\u8d28\u5fc3\u901f\u5ea6\u4f5c\u4e3areward\uff09\u4e0b\u9762\uff0c\u6211\u4eec\u8bad\u7ec3\u51fa\u4e00\u4e2a\u6a21\u578b\u53c2\u6570\uff1b\u6211\u4eec\u5e0c\u671b\u5728\u8fd9\u7ec4\u53c2\u6570\u7684\u521d\u59cb\u5316\u4e0b\uff0c\u5f53\u65b0\u7684reward\u6765\u4e34\u65f6\uff0c\u6211\u4eec\u7684\u6a21\u578b\u80fd\u591f\u5f88\u5feb\u5730\u9002\u5e94\u3002</p> <p>\u5728\u8fd9\u6837\u7684\u60c5\u51b5\u4e0b\uff0cSoft optimality-based\u7684\u65b9\u6cd5\u663e\u8457\u5730outperform\u4e86DDPG\u7b49\u4f20\u7edf\u7b97\u6cd5\u3002\u9053\u7406\u4e5f\u5f88\u7b80\u5355\u2014\u2014\u4f20\u7edf\u7684\u65b9\u6cd5\u6ca1\u6709\u5173\u6ce8entropy\u9879\uff0c\u56e0\u6b64policy\u5f88\u53ef\u80fd\u53ea\u5b66\u4e60\u67d0\u79cd\u65b9\u6848\u3002\u6bd4\u5982\uff0chumanoid\u53ea\u80fd\u4e00\u8def\u5411\u5317\uff0c\u800c\u5b8c\u5168\u6ca1\u6709\u5411\u897f\u6216\u4e1c\u8d70\u7684\u80fd\u529b\u3002\u8fd9\u6837\uff0c\u5047\u8bbe\u76ee\u6807\u5728humanoid\u7684\u4e1c\u8fb9\uff0c\u90a3\u4e48\u9884\u8bad\u7ec3\u8fd8\u4e0d\u5982\u4e0d\u505a\u2014\u2014\u6a21\u578b\u8981\u5148\u201cunlearn\u201d\u4e4b\u524d\u5b66\u5230\u7684\u9519\u8bef\u65b9\u5411\u7684\u4e1c\u897f\uff0c\u518d\u201crelearn\u201d\u65b0\u7684\u77e5\u8bc6\u3002</p> <p>\u4f46\u662f\uff0cSoft optimality-based\u7684\u65b9\u6cd5\uff0c\u7531\u4e8e\u6709entropy bonus\uff0c\u56e0\u6b64\u5728pretraining\u7684\u65f6\u5019\u5c31\u4f1a\u5b66\u5230\u5404\u79cd\u65b9\u6848\uff0c\u56e0\u6b64\u5728\u65b0\u7684reward\u4e0b\uff0c\u5b83\u8fc5\u901f\u53ef\u4ee5\u9002\u5e94\u5e76\u627e\u5230\u4e4b\u524d\u7684\u65b9\u6848\u91cc\u9762\u54ea\u4e00\u4e2a\u662f\u6700\u4f18\u7684\uff0c\u5b9e\u65bd\u5c31\u53ef\u4ee5\u4e86\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap17/#summary_what_soft_optimality_brings_us","title":"Summary: What Soft Optimality Brings Us","text":"<p>\u6211\u4eec\u6700\u540e\u6765\u7b80\u5355\u603b\u7ed3soft optimality\u7684\u4e00\u4e9b\u4f18\u70b9\uff1a</p> <ul> <li>exploration\uff1a\u56e0\u4e3amax entropy\uff0c\u6240\u4ee5policy\u4f1a\u56db\u5904\u63a2\u7d22\uff0c\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u6709\u65f6\u5019SAC\u5728\u7ecf\u5178\u7684\u4efb\u52a1\u4e0a\u4e5f\u8dd1\u7684\u66f4\u597d\uff1b</li> <li>easy to finetune\uff1a\u5c31\u50cf\u6211\u4eec\u521a\u521a\u6240\u8bf4\u7684\u90a3\u6837\uff0csoft optimality-based\u7684\u65b9\u6cd5\u5728pretraining\u4e0a\u8868\u73b0\u66f4\u597d\uff1b</li> <li>robustness\uff1a\u4ecd\u7136\u662f\u56e0\u4e3amax entropy\uff0cpolicy\u5b66\u4f1a\u7684\u66f4\u591a\uff0c\u6240\u4ee5\u5b83\u7684robustness\u66f4\u597d\uff1b</li> <li>more general approach\uff1a\u4e0d\u7ba1\u600e\u4e48\u8bf4\uff0c\u518d\u4e0d\u6d4e\uff0c\u6211\u4eec\u628atemperature\u8c03\u8282\u4e3a0\u4e5f\u53ef\u4ee5\u56de\u5230\u4f20\u7edf\u7684Q learning\u65b9\u6cd5\u3002\u56e0\u6b64\uff0c\u8fd9\u6837\u7684\u65b9\u6cd5\u80af\u5b9a\u5728\u8c03\u53c2\u540e\u4e0d\u4f1a\u5dee\u3002</li> <li>more human-like\uff1a\u8fd9\u4e00\u70b9\u662f\u6700\u91cd\u8981\u7684\uff0c\u4e5f\u662f\u6211\u4eec\u7684\u521d\u5fc3\u3002\u8fd9\u6837\u8bad\u7ec3\u51fa\u6765\u7684agent\u50cf\u6709\u8840\u6709\u8089\u7684\u4eba\uff0c\u800c\u4e0d\u662f\u53d8\u6210\u4e00\u4e2a\u8ffd\u6c42\u6700\u4f18\u7684\u673a\u5668\u3002</li> </ul>"},{"location":"Online%20CS%20Courses/CS285/chap17/#reference_papers","title":"Reference Papers","text":"<ol> <li>Reinforcement Learning and Control as Probabilistic Inference: Tutorial and Review\uff08graphical model\u7684\u5f15\u5165\uff09</li> <li>Modeling Interaction via the Principle of Maximum Causal Entropy\uff08maximum causal entropy\u7684\u5f15\u5165\uff09</li> <li>Reinforcement Learning with Deep Energy-Based Policies\uff08soft Q-learning\u7684\u5f15\u5165\uff09</li> <li>Soft Actor-Critic Algorithms and Applications\uff08\u66f4\u591a\u7684SAC\u7b97\u6cd5\uff09</li> <li>Equivalence between policy gradients and soft Q-learning</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap18/","title":"Inverse Reinforcement Learning","text":"<p>\u5728\u8fd9\u4e00\u8bb2\uff0c\u6211\u4eec\u8ba8\u8bba\u4e00\u4e2a\u6709\u8da3\u7684\u95ee\u9898\u3002\u5728\u4e4b\u524d\u7684\u95ee\u9898\u91cc\uff0c\u6211\u4eec\u4e00\u822c\u90fd\u662f\u8ba4\u4e3areward\u662f\u5df2\u77e5\u7684\uff0c\u6765\u6c42\u89e3\u6700\u4f18\u7684\u7b56\u7565\uff1b\u800c\u73b0\u5728\uff0c\u6211\u4eec\u53cd\u8fc7\u6765\uff1a\u6211\u4eec\u88ab\u63d0\u4f9b\u4e00\u4e2a\u6bd4\u8f83\u4f18\u7684expert\u7684\u7b56\u7565\uff0c\u5e0c\u671b\u53cd\u8fc7\u6765\u80fd\u591f\u63a8\u65ad\u51fareward\u51fd\u6570\u3002\u8fd9\u4e00\u95ee\u9898\u5c31\u662fInverse Reinforcement Learning(IRL)\u3002</p> <p>\u4e3a\u4ec0\u4e48\u8981\u5b66\u4e60reward\u51fd\u6570\u800c\u4e0d\u662f\u7b80\u5355\u5730\u5bf9\u4e13\u5bb6\u505aimitation learning\uff1f\u8fd9\u662f\u56e0\u4e3a\uff0c\u6709\u4e9b\u95ee\u9898\u4e2d\uff0c\u7b80\u5355\u7684\u6a21\u4eff\u662f\u4e0d\u591f\u7684\uff0c\u6211\u4eec\u9700\u8981\u8ba9model\u7406\u89e3expert\u7684\u610f\u56fe\u3002\u5c31\u50cf\u8001\u5e08\u8ba9\u5c0f\u5b66\u751f\u7f5a\u7ad9\u4e0d\u662f\u4e3a\u4e86\u8ba9\u4ed6\u4eec\u591a\u7ad9\u4e00\u4f1a\u800c\u662f\u4e3a\u4e86\u8ba9\u4ed6\u4eec\u53cd\u601d\u4e00\u6837\uff0c\u6211\u4eec\u5e0c\u671bmodel\u80fd\u7406\u89e3\u4e13\u5bb6\u7684\u884c\u4e3a\u80cc\u540e\u7684\u539f\u56e0\uff0c\u751a\u81f3\u53ef\u80fd\u5728\u8fd9\u4e00\u610f\u56fe\u4e0b\u4f5c\u51fa\u66f4\u597d\u7684\u51b3\u7b56\u3002</p> <p>\u5f53\u7136\uff0c\u50cf\u8ba9\u5c0f\u5b66\u751f\u7406\u89e3\u7f5a\u7ad9\u7684\u76ee\u7684\u8fd9\u6837\u7684\u6bd4\u55bb\u53ef\u80fd\u5bf9\u4e8e\u6a21\u578b\u800c\u8a00\u592a\u56f0\u96be\u4e86\u3002\u4e00\u4e2a\u6bd4\u8f83\u7b80\u5355\u7684\u4f8b\u5b50\u662f\uff0cgeneralize to unknown dynamics\uff1a\u4e13\u5bb6\u5c55\u793a\u7684\u7b56\u7565\u91cc\u9762\uff0c\u65e2\u5305\u542b\u4e86(\u5df2\u77e5\u7684)dynamics\uff0c\u4e5f\u5305\u542b\u4e86(\u672a\u77e5\u7684)reward\u3002\u7136\u540e\u6211\u4eec\u5e0c\u671bmodel\u80fd\u5b66\u4f1areward\u3002\u4e4b\u540e\uff0c\u5982\u679c\u5230\u8fbe\u4e0d\u540c\u7684\u73af\u5883\uff0c\u5f53agent\u901a\u8fc7\u4ea4\u4e92\u611f\u53d7\u5230dynamics\u7684\u53d8\u5316\u540e\uff0c\u5c31\u53ef\u4ee5\u5f88\u597d\u5730generalize\uff0c\u5728\u65b0\u7684\u73af\u5883\u4f5c\u51fa\u548c\u539f\u6765\u4e13\u5bb6\u6f14\u793a\u7c7b\u4f3c\u7684\u884c\u4e3a\u3002\u76f8\u53cd\uff0c\u5982\u679c\u53ea\u662fimitation\u5730\u5b66\u4f1a\u4e00\u4e2apolicy\uff0c\u5c31\u5728\u65b0\u7684\u73af\u5883\u91cc\u53ef\u80fd\u4f1a\u8868\u73b0\u5f97\u5f88\u5dee\u3002</p> <p>\u4e00\u4e2a\u5b9e\u9a8c\u662f\uff0c\u7528\u4e13\u5bb6\u6f14\u793a\u4e00\u4e2aant\u73af\u5883\u91cc\u8f6c\u8eab\u7684\u64cd\u4f5c\u3002\u7528IRL\u5b66\u4e60reward function\u4e4b\u540e\uff0c\u5728\u65b0\u7684\u73af\u5883\u91cc\u8bad\u7ec3agent\uff0c\u5728\u8fd9\u4e2a\u73af\u5883\u91ccagent\u7684\u4e24\u4e2a\u524d\u80a2\u88ab\u7f29\u77ed\u3002\u7ed3\u679c\u53d1\u73b0\uff0cIRL\u5b66\u4e60\u7684agent\u80fd\u591f\u5f88\u597d\u5730\u9002\u5e94\u8fd9\u4e2a\u53d8\u5316\uff0c\u7ee7\u7eed\u4f5c\u51fa\u7c7b\u4f3c\u8f6c\u8eab\u7684\u4e3e\u52a8\u3002</p> <p>\u6b64\u5916\uff0c\u5fc5\u987b\u5f3a\u8c03\uff0cLearn Reward Function\u662f\u4e00\u4e2a\u975e\u5e38ill-defined\u7684\u95ee\u9898\u3002\u4e3b\u8981\u7684\u539f\u56e0\u5728\u4e8e\uff0c\u5f88\u591areward\u4f1a\u7ed9\u51fa\u540c\u6837\u7684\u6700\u4f18\u7b56\u7565\uff0c\u56e0\u6b64\u6211\u4eec\u65e0\u6cd5\u4ece\u6700\u4f18\u7b56\u7565\u4e2d\u63a8\u65adreward\u3002\u6bd4\u5982\uff0c\u5982\u679c\u4ec5\u4ec5\u662f\u8ba9\u4e13\u5bb6\u7b56\u7565\u6700\u4f18\uff0c\u5168\u96f6\u7684reward\u5c31\u53ef\u4ee5\u6ee1\u8db3\u8981\u6c42\u3002\u56e0\u6b64\uff0c\u4efb\u4f55\u7684IRL\u65b9\u6cd5\u90fd\u9700\u8981\u5148\u9648\u8ff0\u4e00\u4e2aadditional assumption\uff0c\u624d\u80fd\u786e\u4fdd\u89e3\u6709\u610f\u4e49\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap18/#feature_matching","title":"Feature Matching","text":"<p>\u6211\u4eec\u6765\u4ecb\u7ecd\u6211\u4eec\u9047\u5230\u7684\u7b2c\u4e00\u4e2aIRL\u65b9\u6cd5\u2014\u2014Feature Matching\u3002\u8fd9\u662f\u6700\u65e9\u671f\u7684IRL\u65b9\u6cd5\u4e4b\u4e00\uff0c\u56e0\u6b64\uff0c\u4eba\u4eec\u51b3\u5b9a\u91c7\u7528\u7ebf\u6027\u7684\u65b9\u5f0f\u6765\u8fd1\u4f3creward\uff1a</p> \\[ r_{\\psi}(s,a)=\\psi^T f(s,a) \\] <p>\u5176\u4e2d\uff0c \\(\\psi\\) \u662f\u6211\u4eec\u8981\u8bad\u7ec3\u7684\u53c2\u6570\uff0c\u800c \\(f\\) \u53ef\u4ee5\u5f53\u4f5c\u67d0\u79cd\u53ef\u4ee5\u5f88\u597d\u5730\u63d0\u53d6\u7279\u5f81\u7684\u51fd\u6570\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u7ed9\u51fa\u4e00\u4e2a\u76ee\u6807\u3002\u4e00\u4e2a\u76f4\u89c2\u7684\u60f3\u6cd5\u662f\uff0c\u4ee4</p> \\[ \\mathbb{E}_{\\pi_{\\psi}}[f(s,a)]=\\mathbb{E}_{\\pi^{\\star}}[f(s,a)] \\] <p>\u5176\u4e2d\uff0c \\(\\pi^\\star\\) \u4ee3\u8868\u4e13\u5bb6\u6570\u636e\u7ed9\u51fa\u7684\u7b56\u7565\uff0c\u800c \\(\\pi_{\\psi}\\) \u4ee3\u8868\u5728reward \\(r_{\\psi}\\) \u4e0b\u7684\u6700\u4f18\u7b56\u7565\u3002\u8fd9\u5c31\u53eb\u505afeature matching\u2014\u2014\u53ef\u4ee5\u770b\u51fa\uff0c\u8fd9\u662f\u4fdd\u8bc1\u4e13\u5bb6reward\u6700\u5927\u7684\u4e00\u4e2a\u5145\u5206\u6761\u4ef6\uff1b\u53e6\u4e00\u65b9\u9762\uff0c\u8fd9\u4e5f\u5408\u7406\uff0c\u56e0\u4e3a\u5982\u679c \\(f\\) \u771f\u7684\u5f88\u597d\u5730\u63d0\u53d6\u4e86\u7279\u5f81\uff0c\u90a3\u4e48\u4e24\u8fb9\u5e94\u8be5\u76f8\u7b49\u3002</p> <p>\u6bd4\u5982\uff0c\u5728\u6e38\u620f\u91cc\uff0c\u53ef\u4ee5\u8ba4\u4e3a\u7279\u5f81\u6bd4\u5982\u6709\u51fb\u8d25\u654c\u4eba\uff0c\u9886\u53d6\u91d1\u5e01\u7b49\u7b49\u3002\u4e5f\u8bb8\u5b83\u4eec\u5bf9\u5e94\u7740\u4e0d\u540c\u7684reward\uff08\u5373 \\(\\psi\\) \u7ed9\u51fa\u7684\u7cfb\u6570\uff09\uff0c\u4f46\u6211\u4eec\u5e0c\u671b\u6700\u4f18\u7b56\u7565\u548c\u4e13\u5bb6\u7b56\u7565\u5728\u6bcf\u4e00\u4e2a\u7279\u5f81\u4e0a\u7684\u8868\u73b0\u90fd\u662f\u4e00\u6837\u7684\uff0c\u800c\u975e\u53ea\u662f\u603b\u7684\u52a0\u6743\u603b\u548c\u4e00\u81f4\u3002</p> <p>\u5373\u4fbf\u4f5c\u51fa\u4e86\u8fd9\u4e48\u5f3a\u7684\u5047\u8bbe\uff0c\u53ef\u4ee5\u8bba\u8bc1\uff0c\u73b0\u5728\u7684\u8fd9\u4e00\u547d\u9898\u4f9d\u7136\u662fill-defined\u7684\u2014\u2014\u6211\u4eec\u4ecd\u7136\u65e0\u6cd5\u786e\u5b9a\u4e0b \\(\\psi\\) \u3002\u4e3a\u4e86\u5b8c\u5168\u5c06\u5176\u786e\u5b9a\uff0c\u6211\u4eec\u9700\u8981\u7528\u7c7b\u4f3c\u4e8eSVM\u7684\u65b9\u6cd5\uff1a\u6700\u5927\u5316margin\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c</p> \\[ \\psi = \\arg \\max_{\\psi: |\\psi|^2\\le 1}\\left[\\psi^T \\mathbb{E}_{\\pi^\\star}[f(s,a)]-\\psi^T \\max_{\\pi}\\mathbb{E}_{\\pi}[f(s,a)]\\right] \\] <p>\uff08\u6211\u4eec\u8981\u52a0\u4e00\u4e2a\u7ea6\u675f\u9650\u5236\u4f4f \\(\\psi\\) \u7684\u6a21\u957f\uff09\u8fd9\u4e00\u76ee\u6807\u5927\u6982\u662f\u8bf4\uff0c\u6211\u4eec\u5e0c\u671b\u6700\u5927\u5316\u4e13\u5bb6\u7b56\u7565\uff0c\u6700\u5c0f\u5316\u5176\u4ed6\u7b56\u7565\u3002</p> <p>\u4f46\u662f\uff0c\u8fd9\u4e00\u65b9\u6cd5\u5e76\u4e0d\u592a\u597d\u2014\u2014\u5bf9\u4e8e\u4efb\u610f\u7684\u7b56\u7565\uff0c\u4ed6\u90fd\u540c\u7b49\u5730\u6253\u538b\u3002\u800c\u4e13\u5bb6\u7b56\u7565\u9644\u8fd1\u505a\u4e00\u4e9b\u5c0f\u6270\u52a8\uff0c\u5f97\u5230\u7684\u4e00\u5b9a\u4e0d\u597d\u5417\uff1f\u56e0\u6b64\uff0c\u5e94\u8be5\u9009\u62e9\u6027\u5730\u6253\u538b\u2014\u2014\u8ba9\u548c\u4e13\u5bb6\u7b56\u7565\u5dee\u7684\u5f88\u8fdc\u7684\u7b56\u7565\u53d7\u5230\u60e9\u7f5a\uff0c\u800c\u548c\u4e13\u5bb6\u7b56\u7565\u5dee\u4e0d\u591a\u7684\u7b56\u7565\u51e0\u4e4e\u4e0d\u53d7\u60e9\u7f5a\u3002</p> <p>\u5982\u4f55\u523b\u753b\u8fd9\u4e00\u70b9\u5462\uff1f\u4e00\u4e2a\u6bd4\u8f83\u76f4\u89c2\u7684\u65b9\u6cd5\u662f\uff0c\u6211\u4eec\u5148\u7528SVM duality\u6765\u91cd\u5199\u4e0a\u9762\u7684\u95ee\u9898\uff1a</p> \\[ \\psi: \\min |\\psi|^2 \\text{ such that }  \\psi^T \\mathbb{E}_{\\pi^\\star}[f(s,a)]\\ge \\psi^T \\max_{\\pi}\\mathbb{E}_{\\pi}[f(s,a)]+ 1 \\] <p>\u7136\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f88\u8f7b\u6613\u5730\u52a0\u5165\u523b\u753b \\(\\pi\\) \u548c \\(\\pi^{\\star}\\) \u63a5\u8fd1\u7a0b\u5ea6\u7684\u9879\uff1a</p> \\[ \\psi: \\min |\\psi|^2 \\text{ such that }  \\psi^T \\mathbb{E}_{\\pi^\\star}[f(s,a)]\\ge \\psi^T \\max_{\\pi}\\left(\\mathbb{E}_{\\pi}[f(s,a)] + D(\\pi,\\pi^\\star)\\right) \\] <p>\u5176\u4e2d \\(D\\) \u53ef\u4ee5\u9009\u53d6\u4e3a\u4efb\u4f55\u4e00\u79cdmetric\u3002\u8fd9\u5c31\u662ffeature matching\u7684\u57fa\u672c\u601d\u60f3\u3002</p> <p>\u5f53\u7136\uff0cfeature matching\u4f5c\u4e3a\u4e00\u79cd\u57fa\u672c\u4e0a\u8fc7\u65f6\u7684\u65b9\u6cd5\uff0c\u6709\u7740\u6bd4\u8f83\u4e25\u91cd\u7684\u7f3a\u70b9\uff1a</p> <ul> <li>maximize margin\u7684\u65b9\u6cd5\u4f7f\u5f97\u4ed6\u6709\u70b9\u8fc7\u4e8e\u201c\u76f8\u4fe1\u201d\u4e13\u5bb6\u4e86\u3002\u8fd9\u6709\u70b9\u50cfgenerative models\u7684contrastive learning\uff08\u6bd4\u5982EBM\uff09\uff0c\u4f46\u95ee\u9898\u662f\uff0c\u4e4b\u524dgenerative model\u6211\u4eec\u5c31\u662f\u4e3a\u4e86\u5b66\u4e60\u6570\u636e\u96c6\u7684\u5206\u5e03\uff1b\u4f46\u73b0\u5728\u6211\u4eec\u5e76\u4e0d\u662f\u4e3a\u4e86\u627e\u5230\u4e00\u4e2a\u5947\u602a\u7684reward\u6765\u514b\u9686\u4e13\u5bb6\u7684\u5206\u5e03\uff0c\u800c\u662f\u5e0c\u671b\u627e\u5230\u4e13\u5bb6\u7684\u610f\u56fe\u3002</li> <li>\u57fa\u4e8e\u540c\u6837\u7684\u539f\u56e0\uff0c\u6211\u4eec\u65e0\u6cd5\u5904\u7406\u4e13\u5bb6\u7b56\u7565\u4e0d\u662f\u6700\u4f18\u7684\u60c5\u5f62\uff0c\u6216\u8005\u4e13\u5bb6\u7b56\u7565\u6709\u4e00\u5b9a\u968f\u673a\u6027\u7684\u60c5\u5f62\uff08\u56e0\u4e3a\u4e13\u5bb6\u53ef\u80fd\u7684\u5076\u7136\u7684\u975e\u6700\u4f18\u884c\u4e3a\u88abcontrastive learning\u5f3a\u884c\u6253\u4e0a\u4e86\u6700\u4f18\u7684\u6807\u7b7e\uff09\u3002\u5f53\u7136\uff0c\u4f60\u53ef\u80fd\u8bf4\u8fd9\u662f\u56e0\u4e3a\u6211\u4eec\u9009\u62e9\u4e86hard-margin\u7684SVM\uff0c\u5982\u679c\u52a0\u5165\u4e00\u4e9bslack variable\uff0c\u5c31\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\u3002\u4f46\u662f\u5b9e\u9a8c\u4e0a\u53d1\u73b0\uff0c\u8fd9\u6837\u7684\u65b9\u6cd5\u5e76\u4e0dwork\u3002</li> <li>\u6700\u540e\uff0c\u8fd9\u4e00\u76ee\u6807\u4ece\u5b9e\u8df5\u4e0a\u4e5f\u5f88\u96be\u88ab\u4f18\u5316\u3002\u8fd9\u5c31\u6bd4\u8f83\u7ec6\u8282\uff0c\u8fd9\u91cc\u4e0d\u518d\u8ba8\u8bba\u3002</li> </ul>"},{"location":"Online%20CS%20Courses/CS285/chap18/#max_entropy_irl","title":"Max Entropy IRL","text":"<p>Maximum Entropy IRL\u662f\u8fd1\u4e9b\u5e74\u6765\u5f88\u6709\u540d\u7684IRL\u65b9\u6cd5\u3002\u5728\u4ecb\u7ecd\u4e3a\u4ec0\u4e48\u662fmaximum entropy\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u4ece\u4e0a\u4e00\u8bb2\u7684graphical model\u51fa\u53d1\u3002\u56de\u987e\u4e00\u4e0b\uff0c\u6211\u4eec\u8ba1\u7b97\u4e86forward\u548cbackward message\uff0c\u5e76\u7ed9\u51fa\u5728given optimality\u4e4b\u540e\u7684policy\u3002</p> <p>\u4e00\u4e2a\u5f88\u597d\u7684\u60f3\u6cd5\u662f\uff0c\u6211\u4eec\u80fd\u4e0d\u80fd\u9009\u53d6\u5408\u9002\u7684reward \u51fd\u6570\uff08\u8fd8\u8bb0\u5f97graphical model\u6a21\u578b\u4e2d\u7684reward\u662f\u5982\u4f55\u5b9a\u4e49\u7684\u5417\uff1f\uff09\uff0c\u4f7f\u5f97\u8fd9\u4e2apolicy\u5c31\u662f\u6211\u4eec\u7684\u4e13\u5bb6\u7b56\u7565\u5462\uff1f</p> <p>\u6709\u4e86\u8fd9\u4e00\u76ee\u6807\uff0c\u63a5\u4e0b\u6765\u7684\u95ee\u9898\u8fd8\u662f\uff0c\u6211\u4eec\u8be5\u5982\u4f55\u8bad\u7ec3\uff1f\u597d\u5904\u5728\u4e8e\uff0cgrahical model\u76f4\u63a5\u7ed9\u51fa\u4e86trajectory\u7684\u6982\u7387\u5206\u5e03\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u7528maximum likelihood\u6765\u8bad\u7ec3\u6211\u4eec\u7684reward\u6a21\u578b\uff1a</p> \\[ \\psi = \\arg\\max \\mathbb{E}_{\\tau\\sim \\pi^\\star}[\\log p(\\tau|O_{1..T};\\psi)] \\] <p>\u5176\u4e2d\uff0c \\(\\tau\\sim \\pi^\\star\\) \u4ee3\u8868\u6309\u7167 \\(\\pi^\\star\\) \u91c7\u96c6\u4e00\u4e2atrajectory\uff1b \\(O\\) \u662f\u6211\u4eec\u4e4b\u524d\u63d0\u5230\u7684optimality variable\uff0c\u800c \\(\\psi\\) \u8868\u793a\u8fd9\u4e2a \\(p\\) \u548c \\(\\psi\\) \u6709\u5173\u3002\u5728\u4e0a\u4e00\u8bb2\u6211\u4eec\u4fbf\u77e5\u9053\uff0c\u8fd9\u4e2a\u6982\u7387\u53ef\u4ee5\u76f4\u63a5\u8ba1\u7b97\uff1a</p> \\[ p(\\tau|O_{1..T};\\psi)\\propto p(\\tau)\\exp \\sum_{t}r_\\psi(s_t,a_t) \\] <p>\u5176\u4e2d</p> \\[ p(\\tau)=p(s_1)p(s_2|s_1,a_1)\\cdots \\] <p>\u662f\u53ea\u4e0e\u73af\u5883\u6709\u5173\u7684\u8f6c\u79fb\u6982\u7387\u3002\u8fdb\u4e00\u6b65\u5730\uff0c\u6211\u4eec\u5199</p> \\[ p(\\tau|O_{1..T};\\psi)=\\frac{1}{Z(\\psi)}p(\\tau)\\exp \\sum_{t}r_\\psi(s_t,a_t) \\] <p>\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5316\u7b80MLE objective\uff1a</p> \\[ J=\\mathbb{E}_{\\tau\\sim \\pi^\\star}[\\log p(\\tau|O_{1..T};\\psi)]=\\mathbb{E}_{\\tau\\sim \\pi^\\star}\\left[\\sum_{t}r_\\psi(s_t,a_t)\\right]-\\log Z(\\psi) \\] <p>\u6211\u4eec\u53d1\u73b0\uff0c\u8fd9\u6709\u70b9\u50cf\u4e00\u4e2aEBM\uff0c\u56e0\u6b64\u6211\u4eec\u77e5\u9053\u4e00\u4e2atrick\u662f\u68af\u5ea6\u53ef\u4ee5\u5199\u4e3acontrastive learning\u7684\u5f62\u5f0f\uff1a</p> \\[ \\nabla_{\\psi}J=\\mathbb{E}_{\\tau\\sim \\pi^\\star}\\left[\\sum_{t}\\nabla r_\\psi(s_t,a_t)\\right]-\\frac{1}{Z(\\psi)}\\int p(\\tau)\\exp \\sum_{t}r_\\psi(s_t,a_t)\\sum_{t}\\nabla r_\\psi(s_t,a_t)d\\tau \\] \\[ =\\mathbb{E}_{\\tau\\sim \\pi^\\star}\\left[\\sum_{t}\\nabla r_\\psi(s_t,a_t)\\right]-\\mathbb{E}_{\\tau\\sim p(\\tau|O_{1..T};\\psi)}\\left[\\sum_{t}\\nabla r_\\psi(s_t,a_t)\\right] \\] <p>\u90a3\u4e48\uff0c\u5982\u4f55\u4ece \\(p(\\tau|O_{1..T};\\psi)\\) \u91cc\u9762\u91c7\u6837\u5462\uff1f\u548cEBM\u4e0d\u4e00\u6837\u7684\u662f\uff0c\u8fd9\u91cc\u53ef\u4ee5\u76f4\u63a5\u91c7\u6837\uff0c\u56e0\u4e3a\u73af\u5883\u7684\u90e8\u5206\u662f\u786e\u5b9a\u7684\uff0c\u6211\u4eec\u53ea\u9700\u8981\u7ed9\u51fa \\(p(a_t|s_t,O_{1..T};\\psi)\\) \u5373\u53ef\uff0c\u800c\u8fd9\u5c31\u662fpolicy \\(\\pi_{\\psi}\\) \uff1a</p> \\[ \\pi_\\psi: \\pi_\\psi(a_t|s_t,O_{1..T})=\\frac{\\beta(s_t,a_t)}{\\beta(s_t)} \\] <p>\u5176\u4e2d \\(\\beta\\) \u5c31\u662f\u524d\u4e00\u8bb2\u6211\u4eec\u63d0\u5230\u7684backward message\u3002\u8fd9\u6837\uff0c\u4e0a\u9762\u7684\u516c\u5f0f\u4e5f\u53ef\u4ee5\u8868\u8fbe\u4e3a</p> \\[ \\nabla_{\\psi}J=\\mathbb{E}_{\\tau\\sim \\pi^\\star}\\left[\\sum_{t}\\nabla r_\\psi(s_t,a_t)\\right]-\\mathbb{E}_{\\tau\\sim \\pi_\\psi}\\left[\\sum_{t}\\nabla r_\\psi(s_t,a_t)\\right] \\] <p>\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u7ed9\u51fa\u4e86\u4e00\u79cd\u9009\u62e9\u2014\u2014\u6211\u4eec\u6309\u7167\u524d\u9762\u7684policy\u8868\u8fbe\u7ed9\u51fa\u4e00\u7cfb\u5217trajectory\uff0c\u7136\u540e\u505acontrastive learning\u3002\u4f46\u5f53\u7136\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u76f4\u63a5\u5730\u8ba1\u7b97\u68af\u5ea6\uff1a</p> \\[ \\nabla_{\\psi}J=\\mathbb{E}_{\\tau\\sim \\pi^\\star}\\left[\\sum_{t}\\nabla r_\\psi(s_t,a_t)\\right]-\\mathbb{E}_{\\tau\\sim p(\\tau|O_{1..T};\\psi)}\\left[\\sum_{t}\\nabla r_\\psi(s_t,a_t)\\right] \\] \\[ =\\mathbb{E}_{\\tau\\sim \\pi^\\star}\\left[\\sum_{t}\\nabla r_\\psi(s_t,a_t)\\right]-\\sum_t \\mathbb{E}_{s_t\\sim p(s_t|O_{1..T};\\psi),a_t\\sim \\pi_\\psi}\\left[\\nabla r_\\psi(s_t,a_t)\\right] \\] <p>\u6211\u4eec\u53d1\u73b0\uff0c\u4e0a\u4e00\u8bb2\u521a\u597d\u8ba1\u7b97\u8fc7</p> \\[ p(s_t|O_{1..T};\\psi) = \\alpha(s_t)\\beta(s_t) \\] <p>\u56e0\u6b64</p> \\[ \\nabla_{\\psi}J=\\mathbb{E}_{\\tau\\sim \\pi^\\star}\\left[\\sum_{t}\\nabla r_\\psi(s_t,a_t)\\right]-\\sum_t \\sum_{s_t,a_t}\\beta(s_t,a_t)\\alpha(s_t)\\nabla_\\psi r_\\psi(s_t,a_t) \\] <p>\u8fd9\u4e5f\u5c31\u7ed9\u51fa\u4e86\u53e6\u5916\u4e00\u79cd\u9009\u62e9\u2014\u2014\u6211\u4eec\u624b\u52a8\u8ba1\u7b97\u8fd9\u4e2a\u6c42\u548c\uff0c\u7136\u540e\u76f4\u63a5\u8ba1\u7b97\u68af\u5ea6\u3002</p> <p>Max Entropy IRL (enumerate version)</p> <ol> <li>\u5728\u5f53\u524d\u7684 \\(\\psi\\) \u4e0b\uff0c\u4f7f\u7528\u4e0a\u4e00\u8bb2\u7684\u65b9\u6cd5\u8ba1\u7b97 \\(\\beta(s_t,a_t)\\alpha(s_t)\\) \uff1b</li> <li>\u7528\u4e0a\u9762\u7684\u516c\u5f0f\u8ba1\u7b97\u68af\u5ea6\uff0c\u5176\u4e2d \\(\\pi^\\star\\) \u7684\u671f\u671b\u5c31\u662f\u6570\u636e\u96c6\u7684\u5e73\u5747\uff1b</li> <li>\u7528\u68af\u5ea6\u66f4\u65b0 \\(\\psi\\) \u3002</li> </ol> <p>\u5f53\u7136\uff0c\u8fd9\u4e2a\u6c42\u548c\u7684\u5de5\u4f5c\u91cf\u5de8\u5927\uff0c\u662f \\(|S|\\times|A|\\times T\\) \u3002\u800c\u4e14\uff0c\u6bcf\u4e00\u4e2agradient step\uff0c\u90fd\u8981\u91cd\u65b0\u7b97\u4e00\u6b21\uff01\u5982\u679c\u6ca1\u94b1\u4e70\u4e0d\u8d77A100\uff0c\u8fd8\u6709\u6551\u5417\uff1f\u522b\u6025\u2014\u2014\u8fd8\u8bb0\u5f97\uff0c\u521a\u624d\u6211\u4eec\u8fd8\u7ed9\u51fa\u4e86\u4e00\u4e2a\u57fa\u4e8e\u91c7\u6837\u548ccontrastive learning\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u6765\u770b\u4e00\u770b\uff0c\u8fd9\u4e00\u65b9\u6cd5\u80fd\u5426\u51cf\u5c11\u8ba1\u7b97\u91cf\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap18/#using_policy_to_reduce_computation","title":"Using policy to reduce computation","text":"<p>\u6211\u4eec\u9700\u8981\u7684\u5b9e\u9645\u4e0a\u53ea\u662f\u4e00\u4e2apolicy \\(\\pi_\\psi\\) \u5c31\u591f\u4e86\u3002\u524d\u9762\u5176\u5b9e\u5df2\u7ecf\u7ed9\u51fa\u4e86\uff0c \\(\\pi_\\psi(a_t|s_t)=\\frac{\\beta(s_t,a_t)}{\\beta(s_t)}\\) \u3002\u4f46\u6211\u4eec\u8981\u505a\u5c31\u505a\u7684\u6781\u81f4\u4e00\u4e9b\uff0c\u9012\u5f52\u5730\u8ba1\u7b97 \\(\\beta\\) \u8fd8\u662f\u5de5\u4f5c\u91cf\u592a\u5927\uff01\u6211\u4eec\u4e8e\u662f\u5c31\u60f3\u5230\uff0c\u4e0a\u4e00\u8bb2\u7ed9\u51fa\u4e86\u8fd9\u4e2a\u9012\u63a8\u7684\u8fd1\u4f3c\u89e3\uff0c\u4e5f\u5c31\u662f\u901a\u8fc7soft optimality\u7684\u65b9\u6cd5\u7ed9\u51fa\u7684\u7b54\u6848\u3002\u6bd4\u5982\u8bf4\uff0c</p> \\[ \\hat{Q}(s_t,a_t)=r(s_t,a_t)+\\gamma \\mathbb{E}_{s_{t+1}}[\\hat{V}(s_{t+1})] \\] \\[ \\hat{V}(s_{t+1})=\\alpha\\cdot \\mathbb{E}_{a_{t+1}\\sim \\text{Uniform}}\\left[\\exp \\left(\\frac{\\hat{Q}(s_{t+1},a_{t+1})}{\\alpha}\\right)\\right] \\] \\[ \\pi(a_t|s_t)\\propto \\frac{\\exp \\left(\\frac{\\hat{Q}(s_t,a_t)}{\\alpha }\\right)}{\\exp \\left(\\frac{\\hat{V}(s_t)}{\\alpha }\\right)} \\] <p>\u8fd9\u6837\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u6c42\u89e3\u9012\u63a8\uff0c\u53ea\u9700\u8981\u8dd1\u4e00\u4e0b\u8fd9\u4e2a\u7c7b\u4f3c\u4e8eQ learning\u7684\u65b9\u6cd5\uff0c\u5c31\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2a\u8fd1\u4f3c\u7684policy \\(\\pi_\\psi\\) \u7684\u8fd1\u4f3c\u89e3\u3002\u7136\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u8fd9\u4e2apolicy\u6765\u91c7\u6837\uff0c\u7136\u540e\u505acontrastive learning\u3002</p> <p>\u4f60\u6709\u53ef\u80fd\u89c9\u5f97\u4e0d\u5bf9\u52b2\u2014\u2014\u6309\u7167\u524d\u4e00\u8bb2\u4e2d\u7684\u8bf4\u6cd5\uff0c\u4e0a\u9762\u7684\u516c\u5f0f\u7ed9\u51fa\u7684 \\(\\pi\\) \u5b9e\u9645\u4e0a\u7406\u8bba\u503c\u5e76\u4e0d\u662f \\(\\frac{\\beta(s_t,a_t)}{\\beta(s_t)}\\) \uff1f\u56e0\u4e3a\u539f\u6765 \\(\\frac{\\beta(s_t,a_t)}{\\beta(s_t)}\\) \u7684\u90a3\u4e2a\u7b56\u7565\u88ab\u8bc1\u660e\u6709overconfidence\u7684\u95ee\u9898\uff0c\u56e0\u6b64\u6211\u4eec\u505a\u4e86\u4fee\u6b63\uff0c\u624d\u5f97\u5230\u73b0\u5728\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u3002\u4f46\u73b0\u5728\uff0c\u6211\u4eec\u4f3c\u4e4e\u5c31\u662f\u8981 \\(\\frac{\\beta(s_t,a_t)}{\\beta(s_t)}\\) \uff0c\u5e76\u4e0d\u9700\u8981\u4fee\u6b63\uff0c\u6240\u4ee5\u7528\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u5e76\u4e0d\u5408\u9002\uff1f</p> <p>\u4f46\u5b9e\u9645\u4e0a\uff0c \u6211\u4e5f\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48\uff0c\u54b1\u5148\u522b\u7ba1\u8fd9\u4e2a</p> <p></p> <p>\u4f46\u5373\u4f7f\u662f\u5982\u6b64\uff0c\u6211\u4eec\u8fd8\u662f\u5acc\u5de5\u4f5c\u91cf\u592a\u5927\u4e86\u3002\u4e0d\u662f\u6211\u4eec\u592a\u82db\u523b\u2014\u2014\u6ce8\u610f\u6211\u4eec\u8ba8\u8bba\u7684\u5168\u90e8\u662f\u6bcf\u4e00\u4e2agradient step\u90fd\u8981\u505a\u7684\u5185\u5bb9\uff01\u6362\u53e5\u8bdd\u8bf4\uff0c\u6211\u4eec\u8bad\u7ec3 \\(\\psi\\) \u7684\u6bcf\u4e00\u6b65\uff0c\u90fd\u9700\u8981\u505a\u4e00\u6b21\u5b8c\u6574\u7684SAC\u7684\u8bad\u7ec3\uff01\u6240\u4ee5\u5de5\u4f5c\u91cf\u786e\u5b9e\u5f88\u5927\u3002</p> <p>\u5982\u4f55\u8fdb\u4e00\u6b65\u51cf\u8f7b\u8d1f\u62c5\u5462\uff1f\u5728EBM\u91cc\uff0c\u6211\u4eec\u5176\u5b9e\u4e5f\u9047\u5230\u4e86\u7c7b\u4f3c\u7684\u60c5\u51b5\u3002\u5f53\u65f6\uff0c\u6211\u4eec\u63d0\u51fa\u4e86contrastive learning\u4e4b\u540e\uff0c\u4e5f\u9047\u5230\u4e86\u540c\u6837\u7684\u95ee\u9898\u3002\u90a3\u65f6\u5019\u7684\u95ee\u9898\u662f\uff0c\u4e3a\u4e86\u7ed9\u51fa\u8d1f\u4f8b\uff0c\u6211\u4eec\u9700\u8981\u521d\u59cb\u5316\uff0c\u7136\u540e\u505alangevin sampling\u6765\u5230\u8fbeenergy model\u7684\u5206\u5e03\u3002\u5982\u679c\u8981\u5b8c\u5168\u5230\u8fbeenergy model\u7684\u5206\u5e03\uff0c\u90a3\u4e48\u9700\u8981\u6d88\u8017\u4e00\u4e2a\u5f88\u957f\u7684mixing time\uff1b\u4f46\u6211\u4eec\u5728\u8bad\u7ec3\u7684\u65f6\u5019\u5b9e\u9645\u4e0a\u53ea\u53d6\u51e0\u6b65\u6216\u8005\u51e0\u5341\u6b65sample\u5373\u53ef\u3002\u4e3a\u4ec0\u4e48\u5462\uff1f\u5f53\u65f6\u7ed9\u51fa\u7684\u7406\u7531\u662f\uff0clangevin sample\u7684\u6b65\u6570\u5c11\u4e00\u4e9b\u6709\u70b9\u7c7b\u4f3c\u4e00\u4e2a\u66f4\"fuzzy\"\u7684\u5206\u5e03\uff0c\u56e0\u6b64\u5728\u8fd9\u4e2a\u5206\u5e03\u4e0a\u9009\u53d6\u8d1f\u4f8b\uff0c\u6709\u52a9\u4e8e\u51cf\u5c11\u201c\u8bef\u4f24\u201d\uff08\u66f4\u7ec6\u8282\u7684\u8ba8\u8bba\u8bf7\u53c2\u8003DL\u7684PPT\uff09\u3002</p> <p>\u56e0\u6b64\uff0c\u867d\u7136\u8bdd\u8bf4\u4e86\u8fd9\u4e48\u591a\uff0c\u4f46\u6700\u540e\u505a\u7684\u6539\u52a8\u5176\u5b9e\u5f88\u7b80\u5355\u2014\u2014\u6211\u4eec\u6bcf\u6b21\u4e0d\u8981\u8badpolicy\u8bad\u7ec3\u7684\u592a\u72e0\uff0c\u7a0d\u5fae\u8bad\u7ec3\u51e0\u6b65\u5176\u5b9e\u5c31\u53ef\u4ee5\u4e86\u3002\u8fd9\u5c31\u7ed9\u51fa\u4e86\u4e0b\u9762\u7684\u65b9\u6cd5\uff1a</p> <p>Max Entropy IRL (sampling version)</p> <p>\u521d\u59cb\u5316 \\(\\pi_\\psi\\) \u4e3a\u968f\u673a\u7b56\u7565\uff1b</p> <ol> <li>\u5728\u5f53\u524d\u7684 \\(\\psi\\) \u4e0b\uff0c\u4f7f\u7528soft optimality\u7684\u76ee\u6807\u8bad\u7ec3 \\(\\pi_\\psi\\) \u51e0\u6b65\uff1b</li> <li>\u7528\u4e0a\u9762contrastive learning\u7684\u516c\u5f0f\uff0c\u901a\u8fc7\u4ece \\(\\pi_\\psi\\) \u4e2d\u91c7\u6837\u6765\u8ba1\u7b97\u68af\u5ea6\uff1b</li> <li>\u7528\u68af\u5ea6\u66f4\u65b0 \\(\\psi\\) \u3002</li> </ol> <p>\u8fd9\u6837\uff0c\u5b83\u5f88\u597d\u5730\u907f\u514d\u4e86\u8ba1\u7b97\u91cf\uff0c\u540c\u65f6\u5728\u5b9e\u8df5\u4e2d\u4e5f\u6709\u7740\u5f88\u4e0d\u9519\u7684\u6548\u679c\u3002</p> <p>Q: \u7b49\u7b49\uff0c\u6211\u770b\u4f60\u8fd9\u4e2a\u6d41\u7a0b\uff0c\u597d\u50cf\u662f \\(\\pi_\\psi\\) \u5148\u5728\u7b2c\u4e00\u4e2a \\(\\psi\\) \u4e0b\u9762\u8bad\u7ec3\u51e0\u6b65\uff0c\u53c8\u5728\u7b2c\u4e8c\u4e2a \\(\\psi\\) \u4e0b\u9762\u8bad\u7ec3\u51e0\u6b65\uff0c\u4e0d\u65ad\u8fd9\u6837\uff1f\u4e0d\u5e94\u8be5\u6bcf\u4e00\u6b21\u90fd\u628a \\(\\pi_\\psi\\) \u5b8c\u5168\u521d\u59cb\u5316\u5417\uff1f</p> <p>A: \u4e0d\uff0c\u6bcf\u4e00\u6b21\u90fd\u521d\u59cb\u5316\u56fa\u7136\u53ef\u4ee5\uff0c\u4f46\u8fd9\u4e2a\u65b9\u6cd5\u76f8\u5f53\u4e8e\u662f\u4e00\u4e2a\u4f18\u5316\u3002\u5728EBM\u91cc\u9762\uff0c\u5176\u5b9e\u4e5f\u6709\u8fd9\u79cd\u4f18\u5316\uff0c\u4f46\u5f53\u65f6\u7684negative sample\u6709\u5f88\u591a\u5f20\u56fe\u7247\uff0c\u6240\u4ee5\u5b83\u7684\u4f18\u5316\u65b9\u5f0f\u662f\u57fa\u4e8ereplay buffer\uff1alangevin sample\u4e4b\u540e\u7684\u56fe\u7247\u653e\u5230replay buffer\u91cc\u9762\uff0c\u7136\u540e\u521d\u59cb\u5316\u4e00\u90e8\u5206\u662f\u968f\u673a\u7684\uff0c\u4e00\u90e8\u5206\u4ecereplay buffer\u91cc\u9762\u91c7\u96c6\u3002</p> <p>\u73b0\u5728\uff0c\u6211\u4eec\u8fd9\u4e2a\u5176\u5b9e\u662f\u4e00\u4e2a\u9053\u7406\u2014\u2014\u53ea\u4e0d\u8fc7\uff0c\u6211\u4eec\u6ca1\u6709\u80fd\u529b\u8bad\u7ec3\u8bb8\u591apolicy\uff0c\u56e0\u6b64\u53ea\u80fd\u62ff\u4e00\u4e2apolicy\uff0c\u7136\u540e\u653e\u5165replay buffer\uff0c\u7acb\u523b\u518d\u62ff\u51fa\u6765\uff0c\u8fd9\u6837\u4e0d\u65ad\u8bad\u7ec3\u3002\u8fd9\u5c31\u56de\u5230\u4e86\u4e0a\u9762\u7684\u65b9\u6cd5\u3002</p> <p>\u6700\u540e\uff0c\u518d\u7a0d\u5fae\u63d0\u4e00\u4e0b\u4e00\u4e2a\u53ef\u80fd\u7684\u6539\u8fdb\uff1a\u56e0\u4e3a\u6211\u4eec\u7684\u91c7\u6837\u5e76\u975e\u4e25\u683c\u9075\u5b88 \\(\\pi_\\psi\\) \uff0c\u56e0\u6b64\u671f\u5f85\u503c\u7684\u4f30\u8ba1\u7565\u6709\u504f\u5dee\u3002\u4e3a\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u91c7\u7528importance sampling\u3002</p> <p>\u6211\u4eec\u6709importance weight</p> \\[ w(\\tau)=\\frac{\\frac{1}{p(O_{1..T})}\\cdot p(\\tau)\\exp \\sum_t r(s_t,a_t)}{\\pi(\\tau)}=\\frac{1}{p(O_{1..T})}\\frac{\\exp \\sum_t r(s_t,a_t)}{\\pi(a_1|s_1)\\cdots\\pi(a_T|s_T)} \\] <p>\u5176\u4e2d\uff0c \\(\\pi\\) \u662f\u6211\u4eec\u524d\u9762\u7b97\u6cd5\u91cc\u7684\u90a3\u4e2apolicy\u3002\u8fd9\u91cc\uff0c\u867d\u7136\u4e0d\u77e5\u9053\u5f52\u4e00\u5316\u7cfb\u6570\uff0c\u4f46\u6709\u4e00\u4e2a\u6bd4\u8f83\u795e\u5947\u7684\u65b9\u6cd5\u3002\u6211\u4eec\u9996\u5148\u5199\u51fa</p> \\[ \\mathbb{E}_{\\tau\\sim p(\\tau|O_{1..T})}[\\nabla r_\\psi(s_t,a_t)]=\\mathbb{E}_{\\tau\\sim \\pi}[w(\\tau)\\nabla r_\\psi(s_t,a_t)] \\] <p>\u7136\u540e\uff0c\u6211\u4eec\u5199</p> \\[ \\mathbb{E}_{\\tau\\sim \\pi}[w(\\tau)\\nabla r_\\psi(s_t,a_t)]\\approx \\frac{1}{N}\\sum_{i=1}^N w(\\tau_i)\\nabla r_\\psi(s_t,a_t) \\] <p>\u4f46\u662f \\(w\\) \u4e0d\u4f1a\u7b97\u554a\uff01\u522b\u6025\u2014\u2014\u6211\u4eec\u6ce8\u610f\u5230</p> \\[ \\mathbb{E}_{\\tau\\sim \\pi}[w(\\tau)]=\\int \\pi(\\tau)\\cdot \\frac{p(\\tau|O_{1..T})}{\\pi(\\tau)}d\\tau=1 \\] <p>\u6240\u4ee5\uff0c\u5bf9\u4e8e\u5f88\u5927\u7684 \\(N\\) \uff0c\u5176\u5b9e\u53ef\u4ee5\u671f\u5f85</p> \\[ N\\approx \\sum_{i=1}^N w(\\tau_i) \\] <p>\u6211\u4eec\u636e\u6b64\u5199</p> \\[ \\mathbb{E}_{\\tau\\sim p(\\tau|O_{1..T})}[\\nabla r_\\psi(s_t,a_t)]\\approx \\frac{1}{\\sum_{i=1}^N w(\\tau_i)}\\sum_{i=1}^N w(\\tau_i)\\nabla r_\\psi(s_t,a_t) \\] <p>\u8fd9\u6837\uff0c\u4e0d\u540c\u7684 \\(w\\) \u4e4b\u95f4\u505a\u6bd4\u503c\uff0c\u6211\u4eec\u4e0d\u4f1a\u7b97\u7684\u5f52\u4e00\u5316\u7cfb\u6570 \\(p(O_{1..T})\\) \u5c31\u6d88\u5931\u4e86\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u6210\u529f\u5730\u4f7f\u7528\u4e86importance sampling\u3002\u867d\u7136\u8fd9\u611f\u89c9\u6709\u70b9\u7a7a\u624b\u5957\u767d\u72fc\uff0c\u4f46\u53ef\u80fd\u786e\u5b9e\u662f\u53ef\u884c\u7684\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap18/#what_about_max_entropy","title":"What about Max Entropy?","text":"<p>\u7b49\u7b49\uff0c\u4f60\u8bf4\u4e86\u8fd9\u4e48\u591a\uff0c\u8fd9\u4e3a\u4ec0\u4e48\u53eb\u505amaximum entropy IRL\u5462\uff1f\u8fd9\u91cc\u7684entropy\u5728\u54ea\u91cc\u5462\uff1f</p> <p>\u8fd9\u786e\u5b9e\u662f\u5f88\u8be1\u5f02\u7684\u4e00\u90e8\u5206\u3002PPT\u4e0a\u8bba\u8bc1\u4e86\uff0c\u5bf9\u4e8e \\(r_\\psi(s_t,a_t)=\\psi^T f(s_t,a_t)\\) \u7684\u60c5\u51b5\uff0c\u4e0a\u9762\u7684contrastive learning objective\u7b49\u4ef7\u4e8e</p> \\[ \\max_\\psi \\mathcal{H}(\\pi_\\psi)\\text{ such that } \\mathbb{E}_{\\pi_\\psi}[f]=\\mathbb{E}_{\\pi^\\star}[f] \\] <p>\u4f46\u662f\u6211\u5e76\u4e0d\u4f1a\u8bc1\u660e\u8fd9\u4e00\u70b9\u2026\u2026\u6c42\u52a9\uff0c\u5982\u679c\u613f\u610f\u635e\u4e00\u4e0b\u6211\u53ef\u4ee5\u63d0\u4ea4\u4e00\u4e2aPR\u3002</p> <p></p>"},{"location":"Online%20CS%20Courses/CS285/chap18/#benefits_of_max_entropy_irl","title":"Benefits of Max Entropy IRL","text":"<p>\u6700\u540e\uff0c\u6211\u4eec\u6765\u770b\u4e00\u4e0bMax Entropy IRL\u7684\u4f18\u70b9\u3002\u4e3a\u4f55\u4ed6\u53ef\u4ee5\u89e3\u51b3\u4e4b\u524dfeature matching\u7684\u95ee\u9898\uff1f</p> <ul> <li>\u9996\u5148\uff0c\u5373\u662fexpert policy\u4e0d\u662f\u6700\u4f18\u7684\uff0c\u8fd9\u4e00\u65b9\u6cd5\u5b8c\u5168\u6ca1\u6709\u95ee\u9898\u3002\u56e0\u4e3a\u5b83\u57fa\u4e8e\u7684graphical model\u672c\u8eab\u5c31\u662f\u5904\u7406sub-optimality\u7684\u3002\u540c\u6837\uff0c\u5373\u4f7fexpert policy\u6709\u4e00\u5b9a\u7684\u968f\u673a\u6027\uff0c\u8fd9\u4e00\u65b9\u6cd5\u4e5f\u53ef\u4ee5\u5904\u7406\u3002</li> <li>\u5176\u6b21\uff0c\u6211\u4eec\u4e4b\u524d\u63d0\u5230feature matching\u7684maximize marginal\u7684\u505a\u6cd5\u610f\u4e49\u4e0d\u660e\u786e\uff1b\u4f46\u4e0d\u8fd9\u4e48\u505a\u4f1a\u5bfc\u81f4reward\u4e0d\u552f\u4e00\uff08\u8fd8\u8bb0\u5f97\u6211\u4eec\u4e00\u76f4\u5f3a\u8c03\u7684\uff0cIRL\u662f\u4e00\u4e2aill-defined\u7684\u95ee\u9898\uff09\u3002\u8fd9\u91cc\uff0c\u6211\u4eec\u5f15\u5165\u4e86\u4f55\u79cd\u5047\u8bbe\u6765\u89e3\u51b3ill-define\u7684\u95ee\u9898\u5462\uff1f\u5b83\u53c8\u4e3a\u4f55\u6709\u610f\u4e49\u5462\uff1f<ul> <li>\u5f53\u7136\uff0c\u6211\u4eec\u662f\u7528MLE\u6765\u8bad\u7ec3\u7684\uff0c\u8fd9\u5f53\u7136\u5b8c\u5168\u662f\u552f\u4e00\u7684\uff1b</li> <li>\u4f46\u662f\u53e6\u5916\u4e00\u65b9\u9762\uff0cMLE\u7684\u8fd9\u4e2a\u5047\u8bbe\u5177\u6709\u610f\u4e49\u3002\u8fd9\u4e00\u610f\u4e49\u662f\u524d\u4e00\u8282\u7684\u7b49\u6548\u8868\u8ff0\u6240\u8d4b\u4e88\u7684\u2014\u2014\u5b83\u8bf4\u660econtrastive learning\u7b49\u4ef7\u4e8e\u5728\u4fdd\u8bc1feature matching\u7684\u60c5\u51b5\u4e0b\uff0c\u6700\u5927\u5316entropy\u3002</li> <li>\u8fd9\u662f\u4ec0\u4e48\u610f\u601d\uff1f\u5b9e\u9645\u4e0a\uff0c\u5c31\u662f\u8bf4\uff1a\u80fd\u63a8\u65ad\u7684\uff08feature\uff09\u5c3d\u53ef\u80fd\u63a8\u65ad\uff1b\u4e0d\u80fd\u63a8\u65ad\u7684\u4e0d\u8981\u6709\u504f\u89c1\uff08\u56e0\u4e3a\u6709\u4e86\u504f\u89c1\u5c31\u6ca1\u6709\u5b8c\u5168\u6b63\u786e\u7406\u89e3expert\u7684\u201c\u610f\u56fe\u201d\uff09\uff0c\u800c\u662f\u8ba9\u5b83\u5c3d\u53ef\u80fd\u968f\u673a\u3002\u8fd9\u5c31\u662fMax Entropy IRL\u7684\u91cd\u8981\u610f\u4e49\u3002</li> </ul> </li> </ul>"},{"location":"Online%20CS%20Courses/CS285/chap18/#irl_as_a_gan","title":"IRL as a GAN","text":"<p>\u4e4b\u524d\u6211\u4eec\u8bf4Maximum Entropy IRL\u6709\u4e9b\u50cfEBM\uff1b\u5b9e\u9645\u4e0a\uff0c\u5b83\u5728\u601d\u60f3\u4e0a\u4e5f\u6709\u4e00\u70b9\u50cfGAN\uff08\u672c\u8d28\u4e0a\uff0c\u5b83\u4eec\u90fd\u5c5e\u4e8econtrastive learning\uff09\u3002\u6211\u4eec\u524d\u9762\u7684\u7b97\u6cd5\u4e2d\uff0c\u4e0d\u65ad\u8bad\u7ec3 \\(\\pi_\\psi\\) \uff0c\u4f7f\u5f97\u5176\u8fd1\u4f3c\u4e3a \\(\\psi\\) \u7684soft optimal policy\uff1b\u800c \\(\\psi\\) \u7684\u8bad\u7ec3\u76ee\u6807\u53c8\u662f\u5c3d\u53ef\u80fd\u533a\u5206\u5f00 \\(\\pi_\\psi\\) \u548c \\(\\pi^\\star\\) \u3002\u8fd9\u5c31\u6709\u70b9\u50cfGAN\u7684generator\u548cdiscriminator\uff1b\u521a\u597d\uff0c\u5728\u6211\u4eec\u4e0a\u9762\u7684\u8868\u8ff0\u4e2d\uff0c\u4e5f\u662f\u4e00\u4eba\u8bad\u7ec3\u4e00\u4e2aepoch\u3002</p> <p>\u4e00\u4e2a\u81ea\u7136\u7684\u5c1d\u8bd5\u662f\uff0c\u6211\u4eec\u5c31\u4f7f\u7528GAN\u7684\u76ee\u6807\uff0c\u770b\u770b\u8fd9\u6837\u7ed9\u51fa\u7684IRL\u65b9\u6cd5\u662f\u5426\u6bd4\u8f83\u597d\u3002\u6211\u4eec\u5efa\u7acbdiscriminator\uff0c\u8f93\u5165trajectory \\(\\tau\\) \uff0c\u8f93\u51fa\u5176\u771f\u5047\u6027\uff1b\u800c\u8bad\u7ec3\u7684\u6b63\u4f8b\u662f \\(\\pi^\\star\\) \u7684trajectory\uff0c\u8d1f\u4f8b\u662f\u6211\u4eecpoicy \\(\\pi\\) \u7684trajectory\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u4e00\u4e2aIRL\u7684GAN\uff1a</p> \\[ J = \\min_{\\pi}\\max_D \\mathbb{E}_{\\tau\\sim \\pi^\\star}[\\log D(\\tau)]+\\mathbb{E}_{\\tau\\sim \\pi}[\\log (1-D(\\tau))] \\] <p>\u4f46\u662f\uff0c\u5982\u4f55\u6784\u9020\u4e00\u4e2adiscriminator\u80fd\u4ecetrajectory\u6620\u5c04\u5230\u6982\u7387\u5462\uff1f\u4e00\u4e2a\u53ef\u80fd\u7684\u65b9\u5411\u662fsequence modeling\u7684\u65b9\u6cd5\uff0c\u4f46\u8fd9\u91cc\u6709\u66f4\u597d\u7684\u9009\u62e9\u2014\u2014\u6211\u4eec\u53ef\u4ee5\u6570\u5b66\u4e0a\u7b97\u51faoptimal discriminator\uff1a</p> \\[ \\frac{p_{\\pi^\\star}(\\tau)}{D(\\tau)}-\\frac{p_\\pi(\\tau)}{1-D(\\tau)}=0 \\] <p>\u8fd9\u7ed9\u51fa</p> \\[ D(\\tau)=\\frac{p_{\\pi^\\star}(\\tau)}{p_{\\pi^\\star}(\\tau)+p_\\pi(\\tau)} = \\frac{\\frac{1}{p(O_{1..T})}\\exp \\sum_t r(s_t,a_t)}{\\frac{1}{p(O_{1..T})}\\exp \\sum_t r(s_t,a_t) + \\prod_t \\pi(a_t|s_t)} \\] <p>\u867d\u7136\u6211\u4eec\u73b0\u5728\u4e0d\u77e5\u9053 \\(p_{\\pi^\\star}(\\tau)\\) \uff0c\u4e5f\u4e0d\u77e5\u9053 \\(p(O_{1..T})\\) \u3002\u8fd9\u53ef\u4ee5\u542f\u793a\u6211\u4eec\uff0c\u628adiscriminator\u7684\u5f62\u5f0f\u8bbe\u7f6e\u4e3a\u8fd9\u6837\u3002\u4e5f\u5c31\u662f\uff0c</p> \\[ D_\\psi(\\tau;\\pi)=\\frac{\\frac{1}{Z_\\psi}\\exp \\sum_t r_\\psi(s_t,a_t)}{\\frac{1}{Z_\\psi}\\exp \\sum_t r_\\psi(s_t,a_t) + \\prod_t \\pi(a_t|s_t)} \\] <p>\u5176\u4e2d\uff0c \\(r_\\psi\\) \u662f\u7f51\u7edc\uff0c \\(Z_\\psi\\) \u662f\u53c2\u6570\u3002\u6ce8\u610f\u8fd9\u4e2adiscriminator\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u201c\u4f9d\u8d56\u4e8e\u201dgenerator \\(\\pi\\) \u3002\u6b64\u65f6\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5199\u51fa\u5b8c\u6574\u7684objective\uff1a</p> \\[ J = \\min_{\\pi}\\max_\\psi \\mathbb{E}_{\\tau\\sim \\pi^\\star}[\\log D_\\psi(\\tau;\\pi)]+\\mathbb{E}_{\\tau\\sim \\pi}[\\log (1-D_\\psi(\\tau;\\pi))] \\] <p>\u8fd9\u4e00\u76ee\u6807\u770b\u8d77\u6765\u76f8\u6bd4\u4e8e\u666e\u901a\u7684GAN\u8fd8\u8981\u66f4\u52a0\u6df7\u4e71\u3002\u4f46\u5b9e\u8df5\u5f97\u51fa\u7684\u7ed3\u679c\u662f\uff0c\u53ea\u8981\u8c03\u53c2\u505a\u7684\u4e0d\u9519\uff0c\u8fd9\u4e00\u65b9\u6cd5\u5c31\u80fd\u8868\u73b0\u5f97\u975e\u5e38\u597d\u3002</p> <p>\u53ef\u4ee5\u8bf4\uff0c\u8fd9\u4e2a\u65b9\u6cd5\u548c\u524d\u9762\u7684Max Entropy IRL\u662f\u6709\u4e00\u5b9a\u7684\u8054\u7cfb\u7684\u3002\u8fd9\u4e00\u65b9\u6cd5\u867d\u7136\u4f5c\u4e3a\u4e00\u79cdGAN\uff0c\u6709\u7740\u66f4\u9ad8\u7684\u8bad\u7ec3\u96be\u5ea6\uff1b\u4f46\u8fd9\u6837\u5b66\u4e60\u51fa\u6765\u7684reward\u4e5f\u4f1a\u66f4\u52a0robust\uff0c\u56e0\u6b64\u8d28\u91cf\u66f4\u9ad8\u3002\u8fd9\u5c31\u6709\u70b9\u50cfEBM\u867d\u7136\u66f4\u597d\u8bad\u7ec3\uff0c\u4f46\u662f\u751f\u6210\u7684\u56fe\u7247\u8fdc\u4e0d\u5982GAN\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap18/#what_if_we_just_use_the_vanilla_gan","title":"What if we just use the vanilla GAN?","text":"<p>\u4e5f\u8bb8\u6709\u4eba\u8bf4\uff0c\u4f60\u7684\u65b9\u6cd5\u786e\u5b9e\u53ef\u4ee5work\uff0c\u4f46\u6211\u5c31\u7528\u4e00\u4e2asequence model\u4f5c\u7528\u5728 \\(\\tau\\) \u4e0a\u9762\uff0c\u7136\u540e\u76f4\u63a5\u8bad\u7ec3GAN\uff0c\u4e0d\u5c31\u597d\u4e86\u5417\uff1f\u7406\u8bba\u4e0a\uff0c\u5b8c\u5168\u6ca1\u6709\u95ee\u9898\uff0c\u5e76\u4e14\u8fd9\u4e2a\u8bad\u7ec3\u80af\u5b9a\u4f1a\u76f8\u6bd4\u4e8e\u4e0a\u9762\u7684\u4e1c\u897f\u66f4\u52a0\u7a33\u5b9a\uff1b\u4f46\u662f\u95ee\u9898\u5728\u4e8e\uff0c\u8fd9\u6837\u6211\u4eec\u5b8c\u5168\u65e0\u6cd5recover\u51fareward function\uff08\u56e0\u4e3a\u6211\u4eec\u77e5\u9053\u6700\u4f18\u7684discriminator\u6700\u540e\u4f1a\u53d8\u6210random guess\uff09\u3002\u56e0\u6b64\uff0c\u8fd9\u6837\u7684\u65b9\u6cd5\u53ea\u80fd\u7b97\u662fimitation learning\uff0c\u800c\u4e0d\u662fIRL\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap18/#reference_papers","title":"Reference Papers","text":"<ol> <li>Apprenticeship Learning via Inverse Reinforcement Learning\uff08\u4ecb\u7ecd\u4e86IRL\u7684\u57fa\u672c\u601d\u60f3\uff09</li> <li>Maximum margin planning</li> <li>Maximum Entropy Inverse Reinforcement Learning</li> <li>A Connection Between Generative Adversarial Networks, Inverse Reinforcement Learning, and Energy-Based Models</li> <li>Learning Robust Rewards with Adversarial Inverse Reinforcement Learning</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap19/","title":"RL and Language Models","text":""},{"location":"Online%20CS%20Courses/CS285/chap19/#partially_observed_scenarios","title":"Partially Observed Scenarios","text":"<p>\u4e4b\u524d\u6211\u4eec\u4ecb\u7ecd\u7684\u5927\u90e8\u5206\u95ee\u9898\u90fd\u662ffully observed\u7684\uff0c\u56e0\u6b64\u4e5f\u4e0d\u7528\u533a\u5206state\u548cobservation\uff1b\u4f46\u5728\u5f88\u591a\u95ee\u9898\u4e2d\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\u7684observation \\(o_t\\) \u548cstate \\(s_t\\) \u5e76\u975e\u4e00\u81f4\u3002\u6bd4\u5982\u6e38\u620f\u56fe\u50cf\u5e76\u4e0d\u5305\u542b\u5168\u90e8\u7684\u72b6\u6001\uff0c\u6216\u8005\u5bf9\u8bdd\u7684\u8fc7\u7a0b\u4e2d\u5386\u53f2\u4e5f\u4ea7\u751f\u5f71\u54cd\uff0c\u7b49\u7b49\u3002</p> <p>\u628a\u8fd9\u7c7b\u95ee\u9898formalize\u4e00\u4e0b\uff0c\u5c31\u662f\u6240\u8c13POMDP(Partially Observed MDP)\uff0c\u5176\u7ed3\u6784\u5982\u56fe\u6240\u793a\uff1astate \\(s_t\\) \u662f\u548c\u4e4b\u524d\u4e00\u6837\u7684\uff0c\u5177\u6709Markov property\u7684\uff1b\u4f46\u6211\u4eec\u7684policy\u53ea\u80fdcondition on \\(o_t\\) \uff0c\u4f46 \\(o_t\\) \u5e76\u4e0d\u5305\u542b \\(s_t\\) \u7684\u5168\u90e8\u4fe1\u606f\u3002</p> <p></p> <p>\u5bf9\u4e8e\u8fd9\u6837\u7684\u95ee\u9898\uff0c\u4e5f\u6709\u4e24\u79cdpolicy\uff1b\u7b2c\u4e00\u79cd\u79f0\u4e3a\u201cmemoryless\u201d\uff0c\u4e5f\u5c31\u662fpolicy\u5c31\u662f \\(\\pi(a_t|o_t)\\) \uff0c\u4e0d\u4f9d\u8d56\u4e8e \\(o_{1..t-1}\\) \uff1b\u7b2c\u4e8c\u79cd\u5219\u53ef\u4ee5\u5229\u7528\u5168\u90e8\u7684 \\(o_{1..t}\\) \uff0c\u8fd9\u66f4\u52a0\u666e\u904d\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap19/#basics_of_pomdp","title":"Basics of POMDP","text":"<p>POMDP\u53ef\u80fd\u6bd4\u8f83\u5947\u602a\u3002\u9996\u5148\uff0c\u53ef\u80fd\u6709\u4e00\u4e9b\u5947\u602a\u7684action\u51fa\u73b0\uff0c\u5176\u201c\u727a\u7272\u5c0f\u6211\u6210\u5c31\u5927\u6211\u201d\uff0c\u4e5f\u5c31\u662f\u867d\u7136\u8fd9\u4e2aaction\u5bf9\u4e8e\u5f53\u524d\u7684reward\u662f\u8d1f\u9762\u7684\uff0c\u4f46\u6536\u96c6\u5230\u4e86\u4fe1\u606f\uff0c\u6240\u4ee5\u6709\u52a9\u4e8e\u672a\u6765\u7684reward\u3002\u6bd4\u5982\u8bf4\uff0c\u5728\u8d70\u8ff7\u5bab\u7684\u65f6\u5019\uff0c\u6700\u4f18\u7684\u7b56\u7565\u5f88\u53ef\u80fd\u662f\u5148\u968f\u4fbf\u8bd5\u4e00\u8bd5\uff0c\u518d\u6709\u7b56\u7565\u5730\u8d70\u3002</p> <p>\u6b64\u5916\uff0c\u5bf9\u4e8e\u666e\u901a\u7684MDP\uff0c\u4e00\u5b9a\u5b58\u5728\u4e00\u4e2a\u51b3\u5b9a\u6027\u7684\u7b56\u7565\uff0c\u4e0d\u5dee\u4e8e\u4efb\u4f55\u5176\u4ed6\u7684\u7b56\u7565\uff08\u5373\u4e3a\u6700\u4f18\u7b56\u7565\uff09\uff1b\u4f46\u5bf9\u4e8ePOMDP\u5e76\u4e14memoryless\u7684\u60c5\u51b5\u4e0b\uff0c\u5e76\u975e\u5982\u6b64\u3002</p> <p>\u6bd4\u5982\uff0c\u8003\u8651\u4e00\u4e2a\u4f8b\u5b50\uff1astate \u6709A,B,C\u4e09\u4e2a\uff1b\u5230\u8fbeB\u83b7\u5f97reward\u5e76\u7acb\u523b\u7ed3\u675f\uff0c\u5426\u5219\u4e0d\u83b7\u5f97reward\u3002\u4eceA\u51fa\u53d1\uff0c\u4e00\u534a\u6982\u7387\u7559\u5728A\uff0c\u4e00\u534a\u5230\u8fbeB\uff1b\u4eceB\u51fa\u53d1\u5230\u8fbeA,C\u5404\u4e00\u534a\uff1b\u4eceC\u51fa\u53d1\u4e00\u534a\u5230\u8fbeB\uff0c\u4e00\u534a\u7559\u5728C\u3002</p> <p>\u6211\u4eec\u518d\u5b9a\u4e49observation\uff0c\u4f7f\u5f97\u5b83\u65e0\u6cd5\u63d0\u4f9b\u4efb\u4f55\u4fe1\u606f\uff1a \\(o_A=o_B=o_C\\) \u3002\u8fd9\u6837\uff0c\u5982\u679cmemoryless\u5e76\u4e14\u51b3\u5b9a\u6027\uff0c\u90a3\u53ea\u80fd\u4e0d\u65ad\u5411\u5de6\u6216\u8005\u5411\u53f3\uff0c\u6210\u529f\u7684\u6982\u7387\u53ea\u6709\u4e00\u534a\uff1b\u4f46\u4e00\u4e2amemoryless\u5e76\u4e14\u975e\u51b3\u5b9a\u6027\u7684\u7b56\u7565\u662f\u4e00\u534a\u6982\u7387\u5411\u5de6\uff0c\u4e00\u534a\u6982\u7387\u5411\u53f3\uff0c\u8fd9\u6837\u4e00\u5b9a\u80fd\u6210\u529f\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap19/#method_1_treating_pomdp_as_mdp","title":"Method 1: Treating POMDP as MDP","text":"<p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u6765\u7814\u7a76\u5982\u4f55\u89e3\u51b3POMDP\u7684\u95ee\u9898\u3002\u4e00\u4e2a\u5f88\u81ea\u7136\u7684\u60f3\u6cd5\u5c31\u662f\uff0c\u6211\u4eec\u5728\u4e4b\u524d\u7684\u65b9\u6cd5\u91cc\u9762\uff0c\u76f4\u63a5\u628a\u6240\u6709state\u66ff\u6362\u4e3aobservation\u3002\u8fd9\u6837\u884c\u4e0d\u884c\u5462\uff1f\u8fd9\u5c31\u53d6\u51b3\u4e8e\uff0c\u539f\u6765\u7684\u65b9\u6cd5\u662f\u5426\u4f9d\u8d56\u4e8estate\u7684Markov property\u3002\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5206\u522b\u6765\u8ba8\u8bba\u3002</p> <p>\u9700\u8981\u6ce8\u610f\uff0c\u8fd9\u6837\u7ed9\u51fa\u7684policy\u53ea\u80fd\u662fmemoryless\u7684\uff0c\u56e0\u4e3a\u539f\u6765\u7684policy\u53ea\u4f9d\u8d56\u4e8e\u5f53\u524d\u7684 \\(s_t\\) \u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap19/#policy_gradients","title":"Policy Gradients","text":"<p>\u66ff\u6362\u540e\u7684\u7b2c\u4e00\u79cd\u5f62\u5f0f\u662f</p> \\[ \\nabla_\\theta J(\\theta) = \\mathbb{E}_{\\tau\\sim \\pi_\\theta}\\left[\\log \\pi_\\theta(a_t|o_t)\\hat{A}(o_t,a_t)\\right] \\] <p>\u5176\u4e2d</p> \\[ \\hat{A}(o_t,a_t)=\\sum_{t'=t}^T \\gamma^{t'-t}r(o_{t'},a_{t'}) - b(o_t) \\] <p>\u662fadvantage\uff1b\u8fd9\u91cc \\(b(o_t)\\) \u662fbaseline\u3002\u8fd9\u4e00\u5f62\u5f0f\u7684\u63a8\u5bfc\u662f\u5426\u4f9d\u8d56\u4e8eMarkov property\u5462\uff1f\u7b54\u6848\u662f\u4e0d\u4f9d\u8d56\uff0c\u5177\u4f53\u53ef\u4ee5\u56de\u987e\u5f88\u4e45\u4e4b\u524d\u7684\u63a8\u5bfc\u8fc7\u7a0b\u3002</p> <p>\u4f46\u662f\u5982\u679c\u518d\u8fdb\u4e00\u6b65\u5230actor-critic algorithm\uff0c\u5c31\u4e0d\u884c\u4e86\uff1a\u4e00\u4e2aactor-critic\u7684\u5c1d\u8bd5\u662f\u628aadvantage\u6539\u4e3a\u6a21\u578b\u7684\u8fd1\u4f3c\uff1a</p> \\[ \\hat{A}(o_t,a_t) \\approx r(o_t,a_t) + \\gamma V^{\\pi_\\theta}(o_{t+1}) - V^{\\pi_\\theta}(o_t) \\] <p>\u8fd9\u91cc\u5176\u5b9e\u5c31\u5df2\u7ecf\u7528\u5230\u4e86markov property\u3002\u539f\u56e0\u662f\uff0c \\(V^{\\pi_\\theta}(o_{t+1})\\) \u5927\u6982\u7528\u6765\u4f30\u8ba1 \\(o_{t+1}\\) \u4e4b\u540e\u7684\u6240\u6709reward\u7684\u52a0\u6743\u548c\uff0c\u4f46\u8fd9\u4e2a\u548c\u53ef\u80fd\u4f9d\u8d56\u4e8e \\(o_1,\\cdots,o_{t+1}\\) \uff0c\u800c\u4e0d\u662f\u53ea\u4f9d\u8d56 \\(o_{t+1}\\) \u3002\u56e0\u6b64\uff0cactor-critic based methods\u5e76\u4e0d\u80fd\u7b80\u5355\u5730\u505a\u4e0a\u9762\u7684\u66ff\u6362\u3002\u5f53\u7136\uff0c\u5c31\u5982\u4e0a\u9762\u6240\u8bf4\uff0cbaseline\u7684\u5f15\u5165\u662f\u53ef\u4ee5\u7684\uff0c\u56e0\u4e3a\u5b83\u53ea\u662f\u8d77\u5230\u51cf\u5c0f\u65b9\u5dee\u7684\u4f5c\u7528\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap19/#q-learning_and_value-based_methods","title":"Q-Learning and Value-based Methods","text":"<p>\u6839\u636e\u524d\u9762\u7684\u8ba8\u8bba\uff0c\u53ef\u4ee5\u6599\u60f3\u5230\uff0cQ function\u548cvalue function\u4e00\u822c\u5730\u90fd\u9700\u8981\u4f9d\u8d56\u4e8e\u5168\u90e8\u7684history\uff0c\u800c\u4e0d\u4ec5\u4ec5\u662f\u5f53\u524d\u7684observation\u3002\u56e0\u6b64\uff0c\u7b80\u5355\u7684\u66ff\u6362\u662f\u4e0d\u884c\u7684\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap19/#model-based_methods","title":"Model-based Methods","text":"<p>model-based method\u884c\u4e0d\u884c\uff1f\u76f4\u89c2\u4e0a\uff0c\u80af\u5b9a\u4e0d\u884c\uff0c\u56e0\u4e3amodel\u5b66\u4e60\u7684\u662f \\(p(o_{t+1}|o_t,a_t)\\) \uff0c\u5bf9\u4e8e \\(o_{t+1}\\) \u800c\u8a00\u53ea\u6709 \\(o_t,a_t\\) \u662f\u4e0d\u591f\u7684\u3002\u8fd9\u91cc\uff0c\u4e5f\u53ef\u4ee5\u4e3e\u51fa\u4e00\u4e9b\u4f8b\u5b50\uff0c\u4f46\u4e3a\u4e86\u7b80\u5355\u8d77\u89c1\uff0c\u8fd9\u91cc\u4e0d\u518d\u8be6\u7ec6\u8ba8\u8bba\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap19/#method_2_state_space_models","title":"Method 2: State space Models","text":"<p>\u63a5\u4e0b\u6765\u4ecb\u7ecd\u7684Method 2\u548cMethod 3\u90fd\u4e0d\u5c5e\u4e8ememoryless\u7684\u65b9\u6cd5\uff0c\u56e0\u6b64\u901a\u5e38\u6548\u679c\u6bd4memoryless\u7684\u65b9\u6cd5\u66f4\u597d\u3002state space model\u662f\u6307\uff0c\u6211\u4eec\u5b66\u4e60\u4e00\u4e2a\u7c7b\u4f3cVAE\u7684model\uff1alatent variable \\(z\\) \u662fstate\uff1b\u800c\u201c\u56fe\u7247\u201d\u662fobservation \\(x\\) \u3002\u5728decode\u7684\u65f6\u5019\uff0c \\(x_t\\) \u53ea\u4f9d\u8d56\u4e8e \\(z_t\\) \uff1b\u800c\u5728encode\u7684\u65f6\u5019\uff0c \\(z_t\\) \u4f9d\u8d56\u4e8e \\(x_1,\\cdots,x_t\\) \uff08\u5f53\u7136\uff0c\u4f60\u53ef\u4ee5\u8bbe\u8ba1\u7cdf\u7cd5\u900f\u9876\u7684observation\u4f7f\u5f97 \\(x\\) \u4e0d\u5305\u542b\u4efb\u4f55\u4fe1\u606f\uff0c\u56e0\u6b64\u65e0\u6cd5\u901a\u8fc7 \\(x_1,\\cdots,x_t\\) \u5f97\u5230state \\(z_t\\) \uff0c\u4f46\u6211\u4eec\u6682\u65f6\u4e0d\u8003\u8651\u8fd9\u7c7b\u60c5\u51b5\uff09\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7528VAE\u7684\u65b9\u6cd5\u6765\u5b66\u4e60\u8fd9\u4e2amodel\uff1a</p> \\[ p_\\theta(x|z)=\\prod_t p_\\theta(x_t|z_t) \\] \\[ q_\\phi(z|x)=\\prod_t q_\\phi(z_t|x_{1:t}) \\] <p>\u4f46\u548c\u666e\u901aVAE\u4e0d\u540c\u7684\u662f\uff0chidden state \\(z\\) \u5e76\u975e\u5747\u5300\u9ad8\u65af\uff0c\u800c\u662f\u9700\u8981\u4e00\u4e2a\u65b0\u7684dynamic model\u6765\u5b66\u4e60\uff1a</p> \\[ p(z)=p(z_1)\\prod_t p_\\psi(z_{t+1}|z_t,a_t) \\] <p>\u6211\u4eec\u4f9d\u7136\u53ef\u4ee5\u4f7f\u7528ELBO\u4f5c\u4e3a\u76ee\u6807\u6765\u8bad\u7ec3\u3002\u56de\u987e\u4e00\u4e0b\uff0c\u5b83\u5199\u4e3a\uff1a</p> \\[ \\text{ELBO}= \\mathbb{E}_{z\\sim q_{\\phi}(z|x)}\\left[\\log p_{\\theta}(x|z)\\right]-\\text{KL}(q_{\\phi}(z|x)||p(z)) \\] <p>\u6ce8\u610f\u5230\u7ed9\u5b9a\u4e86 \\(x\\) \u4e4b\u540e\uff0c \\(z\\) \u7684\u5206\u5e03\u662f\u72ec\u7acb\u7684\u9ad8\u65af\u4e58\u79ef\uff0c\u56e0\u6b64\u5f88\u5bb9\u6613<code>rsample</code>\uff1b\u552f\u4e00\u7684\u95ee\u9898\u662f\uff0c \\(p(z)\\) \u4e0d\u662f\u9ad8\u65af\u5206\u5e03\uff0c\u56e0\u6b64\u7b2c\u4e8c\u9879KL divergence\u4e0d\u5bb9\u6613\u7acb\u523b\u770b\u51fa\u6765\u3002\u4e00\u4e2a\u65b9\u6cd5\u53ef\u80fd\u662f\uff0c\u6211\u4eec\u76f4\u63a5\u628a \\(p(z)\\) \u4e2d\u4e0d\u540c\u7684\u90e8\u5206\u8131\u79bb\u5f00\uff1a</p> \\[ \\text{KL}(q_{\\phi}(z|x)||p(z))\\approx \\sum_t \\text{KL}(q_{\\phi}(z_t|x_{1:t})||p(z_t|z_{t-1},a_{t-1})) \\] <p>\u867d\u7136\u8fd9\u5e76\u4e0d\u4e25\u683c\u76f8\u7b49\uff0c\u56e0\u4e3a \\(p(z_t|z_{t-1},a_{t-1})\\) \u4e5f\u4f9d\u8d56\u4e8e \\(z_{t-1}\\) \uff0c\u4f46\u662f\u8003\u8651\u5230 \\(a_{t-1}\\) \u4e5f\u662f\u968f\u673a\u91c7\u6837\u5f97\u5230\u7684\uff0c\u8fd9\u4e2a\u5206\u5de5\u662f\u5408\u7406\u7684\u3002</p> <p>\u5047\u8bbe\u8bad\u7ec3\u5b8c\u6210\u4e4b\u540e\u5177\u6709\u5f88\u5c0f\u7684Loss\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u7528 \\(z_t\\) \u5f53\u4f5cstate\u505a\u4e4b\u540e\u7684\u4efb\u52a1\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7528\u666e\u901a\u7684RL\u65b9\u6cd5\u6765\u89e3\u51b3POMDP\u95ee\u9898\u4e86\u3002</p> <p>\u4f46\u8fd9\u4e00\u65b9\u6cd5\u6709\u4e9b\u8fc7\u706b\u2014\u2014\u4e3a\u4e86\u7ed9\u51fa\u6700\u597d\u7684model\uff0c\u6211\u4eec\u5b66\u51fa\u4e00\u4e2a\u5f88\u590d\u6742\u7684VAE\u3002\u5b9e\u9645\u4e0a\uff0c\u6709\u53ef\u80fd\u4e0d\u9700\u8981state\u4e5f\u53ef\u4ee5\u4f5c\u51fa\u63a5\u8fd1memory-ful\u7684policy\u3002\u56e0\u6b64\uff0c\u63a5\u4e0b\u6765\u63a2\u8ba8\u4e00\u4e9b\u6298\u4e2d\u7684\u65b9\u6848\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap19/#method_3_recurrent_models","title":"Method 3: Recurrent Models","text":"<p>\u4e00\u4e2a\u65b9\u6cd5\u662f\uff0c\u6211\u4eec\u6ce8\u610f\u5230\uff0c\u524d\u9762\u7684\u65b9\u6cd5\u91cc\u4e5f\u662f\u5047\u8bbe\u4e86\u901a\u8fc7 \\(o_{1..t}\\) \uff0c\u6211\u4eec\u53ef\u4ee5\u7528decoder\u83b7\u5f97state \\(z_t\\) \u7684\u5168\u90e8\u4fe1\u606f\u3002\u90a3\u4e48\uff0c\u6211\u4eec\u4e0d\u5982\u628a\u8fd9\u4e00\u4efb\u52a1\u4ea4\u7ed9Q function\u81ea\u5df1\u6765\u505a\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u5c31\u9009\u53d6</p> \\[ s_t:= (o_1,\\cdots,o_t) \\] <p>\u8fd9\u4e00\u65b9\u6cd5\u4e5f\u56e0\u6b64\u79f0\u4e3ahistory states\u3002\u6211\u4eec\u53ef\u4ee5\u53d1\u73b0\uff0c\u867d\u7136\u8fd9\u4e2astate\u4e0d\u4e00\u5b9a\u5177\u6709\u539f\u59cbstate\u90a3\u6837\u591a\u7684\u4fe1\u606f\uff0c\u4f46\u5b83\u59cb\u7ec8\u662fmarkov\u7684\uff1b\u5e76\u4e14\u6211\u4eec\u53ef\u4ee5\u5047\u8bbe\uff0c\u5bf9\u4e8e\u5408\u7406\u7684 \\(o_t\\) \u9009\u62e9\uff0c\u5b83\u63d0\u4f9b\u4e86\u6211\u4eec\u80fd\u83b7\u5f97\u7684\u6700\u591a\u7684\u4fe1\u606f\u3002</p> <p>\u8fd9\u6837\uff0c\u81ea\u7136\u6211\u4eec\u7684Q\u7f51\u7edc\u5c31\u9700\u8981\u5904\u7406sequence\u7684\u8f93\u5165\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u91c7\u7528sequence modeling\u3002\u8fd9\u5c31\u662flanguage models\u5728RL\u4e2d\u7684\u4e00\u5904\u91cd\u8981\u7528\u9014\u3002</p> <p>\u5f53\u7136\uff0c\u6709\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684\u8ba1\u7b97\u6280\u5de7\uff1a\u5728sample trajectory\u7684\u65f6\u5019\uff0c\u6211\u4eec\u91c7\u96c6\u5230\u4e00\u7cfb\u5217\u7684 \\(o_1,\\cdots,o_t\\) \uff1b\u6bcf\u4e00\u6b21\u83b7\u5f97observation\u4e4b\u540e\uff0c\u6211\u4eec\u90fd\u8981\u7528Q\u7f51\u7edc\u7ed9\u51fa\u4e00\u4e2aaction\u3002\u8fd9\u5c31\u53ef\u80fd\u5bfc\u81f4\u5982\u679c\u6bcf\u4e00\u6b21\u90fd\u91cd\u65b0\u8dd1\u4e00\u904d\u6a21\u578b\uff0c\u5de5\u4f5c\u91cf\u4f1a\u6bd4\u8f83\u5927\uff08\u662f \\(t^2\\) \u91cf\u7ea7\uff09\u3002\u4f46\u4e00\u4e2a\u5f88\u597d\u7684\u65b9\u6cd5\u662f\uff0c\u5bf9\u4e8eRNN-based\u7684\u6a21\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u5b58\u4e0bhidden state\uff0c\u8fd9\u6837\u7684\u8bdd\u8f93\u5165\u4e00\u4e2a\u65b0\u7684 \\(o_t\\) \uff0c\u53ea\u9700\u8981\u8fdb\u884c\u4e00\u6b21\u8ba1\u7b97\u5373\u53ef\u3002\u5728\u5b9e\u73b0\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u628aRNN hidden state\u5b58\u5165replay buffer\u3002\u5bf9\u4e8etransformer\uff0c\u9700\u8981\u91c7\u53d6\u522b\u7684\u4f18\u5316\u65b9\u5f0f\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap19/#rl_for_language_models","title":"RL for Language Models","text":"<p>\uff08\u6ce8\uff1a\u8fd9\u90e8\u5206\u7ed3\u5408\u4e86\u4e00\u90e8\u5206guest lecture\u7684\u5185\u5bb9\u6765\u4ecb\u7ecd\uff09</p> <p>\u6211\u4eec\u5df2\u7ecf\u77e5\u9053language mdoel\uff0c\u6bd4\u5982GPT\uff0c\u7684\u57fa\u672c\u5de5\u4f5c\u539f\u7406\uff1b\u4f46GPT\u5982\u5b83\u7684\u540d\u5b57\u90a3\u6837\uff0c\u53ea\u662f\u4e00\u4e2atransformer decoder\uff0c\u53ea\u80fd\u505aautoregressive\u7684\u751f\u6210\u3002\u4eceGPT\u5230ChatGPT\uff0c\u5b9e\u9645\u4e0a\u6709\u5f88\u957f\u7684\u4e00\u6bb5\u8def\u8981\u8d70\u3002\u6bd4\u5982\uff0c\u5982\u4f55\u4fdd\u8bc1\u6a21\u578b\u751f\u6210\u7684\u5185\u5bb9\u6ca1\u6709\u6076\u6bd2\u4fe1\u606f\uff1f\u4ee5\u53ca\u5982\u4f55\u628a\u5355\u7eafcompletion\u7684language model\u53d8\u6210\u5584\u4e8e\u505a\u5bf9\u8bdd\u683c\u5f0f\u7684\u5e94\u7528\u6a21\u578b\uff1f\u8fd9\u4e9b\u5185\u5bb9\u548cRL\u5c31\u5f88\u6709\u5173\u7cfb\uff08\u5f53\u7136\uff0c\u8fd8\u6709\u4e00\u4e9b\u666e\u901a\u7684DL\u65b9\u6cd5\uff0c\u6bd4\u5982supervised fine-tuning(SFT)\uff0c\u7b49\u7b49\uff0c\u8fd9\u91cc\u5c31\u4e0d\u518d\u4ecb\u7ecd\uff09</p> <p>\u4e00\u4e2a\u57fa\u672c\u7684\u601d\u60f3\u662f\uff0c\u6211\u4eec\u628alanguage model\u9610\u8ff0\u4e3a\u4e00\u4e2aRL\u95ee\u9898\uff1astate \\(s\\) \u662f\u5b83\u83b7\u5f97\u7684\u95ee\u9898\uff0c\u800caction\u662f\u5b83\u7ed9\u51fa\u7684completion\u3002reward\u5982\u4f55\u83b7\u5f97\u5462\uff1f\u6709\u4e00\u4e9b\u673a\u5668\u7684\u5c1d\u8bd5\uff0c\u4f46\u4eba\u7c7b\u8fd8\u662f\u5fc5\u987b\u8981\u4ecb\u5165\u3002\u4e00\u4e2a\u91cd\u8981\u7684\u65b9\u6cd5\u662fRLHF(RL from Human Feedback)\uff0c\u4e5f\u5c31\u662f\u5bf9\u4e8e \\((s,a)\\) \u5bf9\uff0c\u5e0c\u671b\u901a\u8fc7\u4eba\u7c7b\u7684\u67d0\u4e9b\u53cd\u9988\u7ed9\u51fa \\(r(s,a)\\) \u3002</p> <p>\u5982\u4f55\u7ed9\u51fa \\(r(s,a)\\) \u5462\uff1f\u8ba9\u4eba\u7c7b\u8f93\u51fa\u6d6e\u70b9\u6570\uff0c\u663e\u7136\u4e0d\u73b0\u5b9e\uff1b\u4e00\u4e2a\u5f88\u597d\u7684\u65b9\u6cd5\u662f\u8ba9\u4eba\u7ed9\u51fa\u540c\u4e00\u4e2astate\u4e0b\u9762\u5bf9\u4e24\u4e2aaction\u7684preference\u3002\u6709\u4e86preference\u7684\u7edf\u8ba1\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u5efa\u7acb\u4e00\u4e2a\u6a21\u578b\u6765\u4f30\u8ba1\uff1a</p> \\[ \\text{Pr}(a_1\\succ a_2|s) = \\sigma(r_\\phi(s,a_1)-r_\\phi(s,a_2)) \\] <p>\u5176\u4e2d\uff0c \\(r_\\phi\\) \u662f\u6211\u4eec\u672a\u77e5\u7684reward\u6a21\u578b\uff1b\u800c \\(a_1\\succ a_2\\) \u4ee3\u8868\u7ed9\u5b9astate \\(s\\) \u4e0b\uff0c\u4eba\u7c7b\u8ba4\u4e3a\u56de\u7b54 \\(a_1\\) \u6bd4\u56de\u7b54 \\(a_2\\) \u597d\u7684\u6982\u7387\uff08\u5f53\u7136\uff0c\u8fd9\u9700\u8981\u5f88\u591a\u4eba\u6765\u8bc4\u4ef7\uff0c\u800c\u4e0d\u662f\u8ba9\u4e00\u4e2a\u4eba\u7ed9\u51fa\u8fd9\u4e2a\u6982\u7387\uff01\uff09\u3002 \\(\\sigma\\) \u53ef\u4ee5\u5c31\u53d6\u4e3asigmoid\u51fd\u6570\u3002\u6211\u4eec\u53ef\u4ee5\u628a\u5b83\u8f6c\u5316\u4e3a\u4e00\u4e2aobjective\uff1a</p> \\[ \\phi = \\arg\\max_\\phi \\mathbb{E}_{(s,a_1\\succ a_2)}[\\log \\sigma(r_\\phi(s,a_1)-r_\\phi(s,a_2))] \\] <p>\uff08\u5176\u4e2d\uff0c\u6570\u636e\u96c6\u5305\u542b\u4e86\u5927\u91cf\u4eba\u7c7b\u8bc4\u5206\u3002\u6bd4\u5982\uff0c\u5bf9\u4e8e\u67d0\u4e2astate \\(x\\) \u4e0b\u9762\u6709\u4e24\u4e2a\u56de\u7b54 \\(y_1,y_2\\) \uff0c\u6570\u636e\u96c6\u53ef\u80fd\u6709 \\((x,y_1\\succ y_2),(x,y_1\\succ y_2),(x,y_2\\succ y_1),(x,y_1\\succ y_2)\\) \u8fd9\u56db\u7ec4\u6570\u636e\u3002\uff09\u53ef\u4ee5\u8bba\u8bc1\uff0c\u8fd9\u4e2aobjective\u4e0b\u6700\u4f18\u7684 \\(\\phi\\) \u5c31\u662f\u6ee1\u8db3\u524d\u9762\u7684\u5173\u7cfb\u3002</p> <p>\u90a3\u4e48\uff0c\u91c7\u96c6\u5230\u5f88\u591a\u6570\u636e\u5bf9\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u8bad\u7ec3\u51fa \\(r_\\phi\\) \u8fd9\u4e2a\u6a21\u578b\uff1b\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u80fd\u591f\u628a\u95ee\u9898\u8f6c\u5316\u4e3aRL\u95ee\u9898\u4e86\uff01\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528policy gradient\u7b49\u65b9\u6cd5\u8fdb\u884c\u4f30\u8ba1\u3002\u6ce8\u610f\u5230\u8fd9\u4e2a\u8fc7\u7a0b\u53ea\u6709\u4e00\u6b65\uff0c\u6240\u4ee5\u5b9e\u9645\u4e0a\u5c31\u662f</p> \\[ \\nabla_\\theta J(\\theta)=\\mathbb{E}_{(s,a)\\sim \\pi_\\theta}[\\nabla \\log \\pi_\\theta(a|s)\\cdot r_\\phi(s,a)] \\] <p>\u4f46\u662f\uff0c\u8bf7\u6ce8\u610f\uff01\u8fd9\u5e76\u4e0d\u884c\uff0c\u4e3a\u4ec0\u4e48\uff1f\u56e0\u4e3a\u8fd9\u6709\u70b9\u50cfoffline RL\uff0c\u6ce8\u610f\u5230reward\u4ece\u5f00\u59cb\u8bad\u7ec3 \\(\\theta\\) \u4e4b\u540e\u5c31\u518d\u4e5f\u4e0d\u53d8\uff0c\u56e0\u6b64\u6211\u4eec\u7684model\u5f88\u5bb9\u6613\u5c31\u53ef\u4ee5\u75af\u72c2\u5730exploit \\(r_\\phi\\) \u7684\u6f0f\u6d1e\uff08\u4eba\u7c7b\u6ca1\u6709label\u7684\u6570\u636e\u4e0a\u9762 \\(r_\\phi\\) \u53ef\u4ee5\u4efb\u610f\u5730\u9519\uff09\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u7c7b\u4f3coffline RL\u91cc\u9762\u7684AWAC\u65b9\u6cd5\uff0c\u52a0\u5165\u4e00\u4e2arestriction\uff1a</p> \\[ J(\\theta)=\\mathbb{E}_{s,a\\sim \\pi_\\theta}[ r_\\phi(s,a)] - \\beta\\mathbb{E}_s[\\text{KL}(\\pi_\\theta(a|s)||\\pi_0 (a|s))] \\] <p>\u5176\u4e2d\uff0c \\(\\pi_0\\) \u662f\u6ca1\u6709\u5f00\u59cbRL\u4e4b\u524d\u7684policy\u3002\u5728\u8fd9\u4e00\u76ee\u6807\u57fa\u7840\u4e0a\uff0c\u4e00\u4e2a\u53eb\u505aPPO\u7684\u7b97\u6cd5\u8fdb\u884c\u4e86\u4e00\u4e9b\u5c0f\u7684\u4fee\u6539\uff0c\u5e76\u4f7f\u7528\u5b83\u6765\u8bad\u7ec3\u3002\u5b9e\u9a8c\u4e0a\uff0c\u5728\u4eba\u7c7b\u7684preference\u4e0a\uff0c\u4f7f\u7528RL\u7684\u65b9\u6cd5fine-tune\u51fa\u67655B\u7684\u6a21\u578b\u53ef\u4ee5\u540a\u6253\u539f\u59cb\u7684175B\u7684\u5927\u6a21\u578b\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap19/#can_we_do_better","title":"Can We Do Better?","text":"<p>\u4f46\u524d\u9762\u7684\u65b9\u6cd5\u6709\u4e00\u4e9b\u95ee\u9898\u3002\u9996\u5148\uff0c\u6211\u4eec\u5148\u6765\u8bad\u7ec3\u4e00\u4e2areward\u6a21\u578b\uff0c\u518d\u7528\u5b83\u6765\u8bad\u7ec3\u3002\u6ce8\u610f\u5230reward\u6a21\u578b\u4e5f\u5fc5\u987b\u662f\u5f88\u5927\u7684transformer\uff08\u5426\u5219\u5b8c\u5168\u65e0\u6cd5\u62b5\u6321RL\u4e2d \\(\\pi_\\theta\\) \u7684\u731b\u70c8\u201c\u653b\u51fb\u201d\uff01\uff09\u3002\u56e0\u6b64\uff0c\u8fd9\u6837\u7684\u5de5\u4f5c\u91cf\u5b9e\u9645\u4e0a\u5f88\u5927\u3002</p> <p>\u4e0d\u4ec5\u5982\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u524d\u9762\u7684objective\u4e2d\uff0c \\(\\sigma(r_\\phi(s,a_1)-r_\\phi(s,a_2))\\) \u8fd9\u4e00\u9879\u6709\u5f88\u5927\u7684\u6f0f\u6d1e\uff1a \\(r_\\phi\\) \u53ef\u4ee5\u52a0\u4e0a\u4e00\u4e2a\u4efb\u610f\u7684\u590d\u6742\u7f51\u7edc \\(b(s)\\) \uff0closs\u90fd\u4e0d\u53d8\uff01\u4e00\u79cd\u89c2\u70b9\u662f\uff0c\u6a21\u578b\u591a\u4f59\u7684\u81ea\u7531\u5ea6\u5f80\u5f80\u610f\u5473\u7740\u8bad\u7ec3\u66f4\u52a0\u56f0\u96be\u3002\u8fd9\u53ef\u80fd\u4e5f\u4f1a\u9020\u6210\u4e00\u7cfb\u5217\u95ee\u9898\u3002</p> <p>\u4e3a\u4e86\u5e94\u5bf9\u4ed6\u4eec\uff0c\u4e00\u4e2a\u91cd\u8981\u7684\u601d\u60f3\u8bde\u751f\u4e86\u2014\u2014DPO(Direct Preference Optimization)\u3002\u8fd9\u4e00\u65b9\u6cd5\u8981\u8bf4\u96be\u5176\u5b9e\u4e5f\u4e0d\u96be\u60f3\u5230\uff0c\u4f46\u662f\u5c31\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u6210\u5c31\u3002\u5b83\u4e3b\u8981\u7684\u5de5\u4f5c\u662f\u505a\u4e86\u4e00\u6b65\u4ee3\u6570\u53d8\u5f62\u3002</p> <p>\u6211\u4eec\u77e5\u9053\uff0c\u50cfAWAC\u4e00\u6837\uff0c\u524d\u9762\u52a0\u5165KL divergence\u4e4b\u540e\u7684objective\u5177\u6709close form\u7684\u6700\u4f18\u7b56\u7565\uff1a</p> \\[ \\pi_\\theta(a|s)=\\pi_0(a|s)\\exp \\left( \\frac{1}{\\beta}r_\\phi(s,a)\\right) \\] <p>\u4eba\u4eec\u60f3\u5230\uff0c\u6211\u4eec\u65e2\u7136\u77e5\u9053\u6700\u4f18\u89e3\uff0c\u90a3\u8fd9\u4e00\u6b65\u4f18\u5316\u4e0d\u5982\u6362\u6210\u7b49\u4ef7\u66ff\u6362\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u76f4\u63a5\u628apolicy\u4ee3\u5165\u539f\u6765\u7684objective\uff1a</p> \\[ J_{\\text{DPO}}(\\theta)=\\mathbb{E}_{(s,a_1\\succ a_2)}\\left[\\log \\sigma\\left(\\beta\\cdot\\left(\\log \\frac{\\pi_\\theta(a_1|s)}{\\pi_0(a_1|s)} - \\log \\frac{\\pi_\\theta(a_2|s)}{\\pi_0(a_2|s)}\\right)\\right)\\right] \\] <p>\u8fd9\u5c31\u662fDPO\u7684\u76ee\u6807\u3002\u53ef\u4ee5\u770b\u5230\uff0cDPO\u57fa\u672c\u4e00\u5b9a\u4f18\u4e8e\u524d\u9762\u7684\u65b9\u6cd5\uff0c\u56e0\u4e3a\u5b83\u4e0d\u4ec5\u53ea\u9700\u8981\u8bad\u7ec3\u4e00\u4e2apolicy\u7f51\u7edc\uff0c\u800c\u4e14\u8fd8\u907f\u514d\u4e86 \\(r_\\phi\\) \u5b58\u5728\u6f0f\u6d1e\u7684\u95ee\u9898\u3002</p> <p>\u4e00\u4e2a\u66f4\u597d\u73a9\u7684\u662f\uff0c\u6211\u4eec\u5bf9DPO\u7684objective\u8ba1\u7b97\u68af\u5ea6\uff0c\u4e5f\u53ef\u4ee5\u53d1\u73b0\u5f88\u6709\u8da3\u7684\u610f\u4e49\u3002\u5b83\u662f\uff1a</p> \\[ \\nabla J_{\\text{DPO}}(\\theta)=\\beta \\mathbb{E}_{(s,a_1\\succ a_2)}\\left[p_{\\theta}(a_2\\succ a_1)\\cdot [\\nabla \\log \\pi_\\theta(a_1|s)-\\nabla \\log \\pi_\\theta(a_2|s)]\\right] \\] <p>\u5176\u4e2d</p> \\[ p_\\theta(a_2\\succ a_1)=\\sigma\\left(\\beta\\cdot\\left(-\\log \\frac{\\pi_\\theta(a_1|s)}{\\pi_0(a_1|s)} + \\log \\frac{\\pi_\\theta(a_2|s)}{\\pi_0(a_2|s)}\\right)\\right) \\] <p>\u662fmodel\u8bef\u5224 \\(a_2\\) \u6bd4 \\(a_1\\) \u597d\u7684\u6982\u7387\u3002\u8fd9\u5f88\u76f4\u89c2\u2014\u2014\u6211\u4eec\u603b\u662f\u8ba9model\u5c3d\u91cf\u653e\u5927 \\(a_1\\) \u7684\u6982\u7387\uff0c\u51cf\u5c11 \\(a_2\\) \u7684\u6982\u7387\uff1b\u4f46\u6211\u4eec\u8ba9\u5b83\u6700\u5173\u6ce8\u72af\u9519\u7684\u5730\u65b9\uff0c\u800c\u505a\u5bf9\u7684\u5730\u65b9\u53ef\u4ee5\u5c11\u8bad\u7ec3\u4e00\u4e9b\u3002\u4f60\u4e5f\u8bb8\u4f1a\u56de\u5fc6\u8d77\uff0c\u4f60\u7684\u9ad8\u4e2d\uff08\u6216\u8005\u521d\u4e2d\uff09\u8001\u5e08\u4e5f\u8fd9\u6837\u8ba9\u4f60\u7ec3\u4e60\u9519\u9898\u3002\u4f60\u73b0\u5728\u5c31\u4f1a\u53d1\u73b0\uff0c\u4ed6/\u5979\u505a\u7684\u4e00\u5207\u90fd\u662f\u6709\u6df1\u610f\u7684\uff01</p>"},{"location":"Online%20CS%20Courses/CS285/chap19/#multi-step_language_models","title":"Multi-step Language Models","text":"<p>\u6211\u4eec\u6700\u540e\u6765\u8ba8\u8bba\u4e00\u4e0bRL\u548clanguage model\u7684\u8fdb\u4e00\u6b65\u7ed3\u5408\u2014\u2014chatbot \u6a21\u578b\uff0c\u4e5f\u5c31\u662f\u548c\u4eba\u7c7b\u80fd\u8fdb\u884c\u591a\u8f6e\u5bf9\u8bdd\u7684\u6a21\u578b\u3002\u5982\u679c\u673a\u5668\u6bcf\u8bf4\u4e00\u53e5\u8bdd\uff0c\u4eba\u90fd\u7ed9\u51fa\u4e00\u4e2a\u8bc4\u5206\uff0c\u90a3\u8fd9\u4e2a\u95ee\u9898\u5c31\u53ef\u4ee5\u662f\u4e00\u4e2aRL\u7684\u95ee\u9898\u3002</p> <p>\u6211\u4eec\u5e94\u8be5\u91c7\u7528\u4f55\u79cdRL\u65b9\u6cd5\u5462\uff1f\u5982\u679c\u7528policy gradients\uff0c\u56e0\u4e3a\u5b83\u662fon-policy\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u80fd\u9700\u8981\u5927\u91cf\u5730\u548c\u4eba\u4ea4\u4e92\uff0c\u8fd9\u4e0d\u4e00\u5b9a\u53ef\u53d6\u3002\u6bd4\u8f83\u5e38\u89c1\u7684\u662fvalue-based method\u3002\u6b64\u5916\uff0c\u4e00\u5b9a\u8981\u6ce8\u610f\uff0c\u5bf9\u8bdd\u5c5e\u4e8epartially observe\u7684\u95ee\u9898\uff0c\u800c\u4e00\u822c\u91c7\u7528\u7684\u65b9\u6cd5\u90fd\u662fMethod 3\uff0c\u5373history states\uff0c\u628a\u5386\u53f2\u7684\u5bf9\u8bddcat\u8d77\u6765\u4f5c\u4e3astate\u3002</p> <p>\u4e00\u4e2a\u6709\u610f\u601d\u7684\u95ee\u9898\u662f\uff0c\u6211\u4eec\u5982\u4f55\u5b9a\u4e49\u4e00\u4e2atimestamp\uff1f - \u4f60\u53ef\u80fd\u8ba4\u4e3a\u8fd9\u662f\u663e\u7136\u7684\u2014\u2014\u4e00\u8f6e\u5bf9\u8bdd\u662f\u4e00\u4e2atimestamp\u3002\u4eba\u7c7b\u7ed9\u51fa\u7684\u521d\u59cbprompt\u662f \\(o_1\\) \uff0c\u7136\u540e\u673a\u5668\u7ed9\u51fa \\(a_1\\) \uff1b\u4eba\u7c7b\u8fd4\u56de\u7684\u56de\u7b54\u662f \\(o_2\\) \uff0c\u7b49\u7b49\u3002\u8fd9\u786e\u5b9e\u662f\u5e38\u89c1\u7684\u4e00\u79cd\u65b9\u6cd5\uff0c\u79f0\u4e3aper-utterance timestamp\u3002\u4f46\u662f\uff0c\u8fd9\u610f\u5473\u7740action space\u5de8\u5927\uff01\u6211\u4eec\u4ece\u672a\u5904\u7406\u8fc7\u5982\u6b64\u5927\u4e14discrete\u7684action space\u7684\u95ee\u9898\uff0c\u53ef\u80fd\u9047\u5230\u5de8\u5927\u6311\u6218\uff1b - \u53e6\u5916\u4e00\u4e2a\u9009\u62e9\u662f\uff0c\u6211\u4eec\u628a\u4e00\u4e2a\u8bcd\u5f53\u4f5c\u4e00\u4e2atimestamp\uff0c\u4e5f\u53eb\u505aper-token timestamp\u3002\u6bd4\u5982\u8bf4\uff0c\u5f00\u59cb\u7684system prompt\u662f\u5f88\u591atimestamp\uff0c\u4f46\u8fd9\u4e2d\u95f4\u673a\u5668\u53ea\u80fd\u4f5c\u51fa\u201c\u542c\u201d\u8fd9\u4e2a\u7279\u6b8a\u7684action\uff1b\u800c\u63a5\u4e0b\u6765\u8f6e\u5230\u673a\u5668\u8bf4\u8bdd\u7684\u65f6\u5019\uff0c\u5b83\u53ef\u4ee5\u4f5c\u51fa\u4efb\u610f\u7684\u8bcd\u4f5c\u4e3aaction\uff0c\u800c\u53d7\u5230\u7684observation\u662f\u7279\u6b8a\u7684\u201cnone\u201d observation\u3002\u4ee5\u6b64\u7c7b\u63a8\u3002\u8fd9\u6837\uff0caction\u548cobservation\u7684\u7ef4\u5ea6\u90fd\u4e0d\u5927\uff1b\u4f46\u5bf9\u4e8e\u6bd4\u8f83\u957f\u7684\u5bf9\u8bdd\uff0chorizon\u4e5f\u4f1a\u7279\u522b\u957f\u3002</p> <p>\u6211\u4eec\u5206\u522b\u4ecb\u7ecdvalue-based\u65b9\u6cd5\u5728\u8fd9\u4e24\u79cd\u60c5\u51b5\u4e0b\u7684\u5e94\u7528\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap19/#per-utterance_timestamp","title":"Per-Utterance Timestamp","text":"<p>\u5bf9\u4e8eper-utterance\u7684\u95ee\u9898\uff0c\u76f8\u5bf9\u7b80\u5355\uff1a \\(s\\) \u548c \\(a\\) \u90fd\u662f\u8bdd\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4e24\u4e2a\uff08\u53ef\u5171\u7528\u53c2\u6570\uff09transformer\uff0c\u4e00\u4e2a\u628a \\(s\\) \u6765encode\u5230latent\uff0c\u4e00\u4e2a\u628a \\(a\\) \u6765encode\u5230latent\uff0c\u518d\u5728latent\u4e0a\u9762\u8bad\u7ec3\u51faQ \u7f51\u7edc\u3002\u5728\u51b3\u7b56\u7684\u65f6\u5019\uff0c\u7a0d\u5fae\u91c7\u7528\u4e00\u70b9\u6280\u5de7\uff1a\u6211\u4eec\u518d\u62ff\u4e00\u4e2atransformer\u8fc7\u6765\uff0c\u505aautoregresive\u7684\u751f\u6210\u5e76\u4f5cbeam search\uff1b\u4f46\u662f\uff0cbeam search\u7684\u6807\u51c6\u5e76\u975e\u662f\u6a21\u578b\u8f93\u51fa\u7684\u6982\u7387\uff0c\u800c\u662f\u4ece\u6a21\u578b\u7684\u8f93\u51fa\u6982\u7387\u4e2d\u91c7\u6837\uff0c\u4f46\u7528Q function\u6765\u505abeam search\u3002\u8fd9\u6837\uff0c\u5c31\u53ef\u4ee5\u8fd1\u4f3c\u5730\u53d6\u5230Q function\u7684argmax\u3002</p> <p>\u5f53\u7136\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4f7f\u7528actor-critic\u7684\u65b9\u6cd5\uff0c\u989d\u5916\u8bad\u7ec3\u4e00\u4e2aactor\u6765\u7ed9\u51fa \\(\\pi(a|s)\\) \u3002\u8fd9\u4e2aactor\u53ef\u80fd\u662f\u4e00\u4e2atransformer\u3002\u5f53\u7136\uff0c\u5404\u79cd\u7ec6\u8282\u80af\u5b9a\u4e5f\u5f88\u590d\u6742\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap19/#per-token_timestamp","title":"Per-Token Timestamp","text":"<p>\u5bf9\u4e8eper-token\u7684\u95ee\u9898\uff0c\u7a0d\u5fae\u6709\u4e9b\u590d\u6742\u3002\u5982\u56fe\uff0c\u6211\u4eec\u7528\u4e00\u4e2atransformer\u6765\u8bb0\u5f55\u5386\u53f2\u4e0a\u7684\u5168\u90e8observation\u4e2d\u7684\u4fe1\u606f\uff1b\u5bf9\u4e8e\u7ed9\u5b9a\u7684state\uff0c\u6211\u4eectransformer\u6a21\u578b\uff08\u56fe\u4e2d\u7684\u6a2a\u957f\u65b9\u5f62\uff09\u8f93\u51fa\u4e00\u4e2a\u5bf9\u4e8enext token\u7684\u9884\u6d4b\uff1b\u53ea\u4e0d\u8fc7\uff0c\u8fd9\u4e00\u9884\u6d4b\u4e0d\u662fprobability\u800c\u662fQ\u503c\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u53ef\u4ee5\u50cf\u666e\u901a\u7684LM\u751f\u6210\u6587\u5b57\u4e00\u6837\uff0c\u9009\u53d6argmax\u7ed9\u51fa\u4e00\u4e2apolicy\u3002</p> <p></p> <p>\u9700\u8981\u6ce8\u610f\u7684\u4e00\u4e2a\u7ec6\u8282\u662f\uff0c\u5728\u8bad\u7ec3\u4e2d\uff0c\u6211\u4eec\u6709</p> \\[ Q(s,a)\\leftarrow r(s,a)+\\gamma \\max_{a'} Q(s',a') \\] <p>\u4f46\u662f\u6839\u636e\u95ee\u9898\u8bbe\u5b9a\uff0c\u53ea\u6709\u5728\u673a\u5668\u8bf4\u5b8c\u4e00\u53e5\u5b8c\u6574\u7684\u8bdd\u4e4b\u540e\u624d\u83b7\u5f97reward\u3002\u56e0\u6b64\uff0c \\(r(s,a)\\) \u5b9e\u9645\u4e0a\u5bf9\u4e8e\u5927\u90e8\u5206(state,action)\u5bf9\u800c\u8a00\u90fd\u662f0\u3002\u8fd9\u53ef\u80fd\u5bfc\u81f4\u8bad\u7ec3\u66f4\u4e3a\u56f0\u96be\u3002</p> <p>\u5f53\u7136\uff0c\u65e0\u8bba\u4f7f\u7528\u54ea\u4e00\u79cd\u65b9\u6cd5\uff0c\u6211\u4eec\u90fd\u8fd8\u6709\u4e00\u4e2a\u91cd\u8981\u7684\u4e8b\u60c5\u9700\u8981\u6ce8\u610f\uff1a\u4e0d\u8bba\u600e\u4e48\u8bf4\uff0c\u8bad\u7ec3\u8fc7\u7a0b\u662f\u4e00\u4e2aoffline\u7684\u8fc7\u7a0b\uff08\u56e0\u4e3a\u6211\u4eec\u8bad\u7ec3\u7684trajectory\u90fd\u662f\u4ece\u6700\u539f\u59cb\u7684\u666e\u901alanguage model\u8fd9\u4e00policy\u91c7\u6837\u5f97\u5230\u7684\uff09\u3002\u56e0\u6b64\uff0c\u7b2c\u5341\u516d\u8bb2\u4e2d\u7684\u5f88\u591aOffline RL\u65b9\u6cd5\u9700\u8981\u88ab\u4f7f\u7528\uff0c\u5982CQL\uff0cIQL\u7b49\u7b49\u3002\u987a\u4fbf\u4e00\u63d0\uff0c\u5982\u679c\u628aQ\u5f53\u4f5c\u8fd9\u4e2a\u201c\u65b0\u7684\u201d\u8bed\u8a00\u6a21\u578b\u7684logits\uff0c\u90a3\u4e48\u539f\u5148\u6700\u540e\u5f62\u5f0f\u7684CQL penalty\u5c31\u662fcross-entropy loss\uff0c\u4e5f\u5c31\u662f\u9650\u5236\u6a21\u578b\u8f93\u51fa\u7684Q\u503c\u5728\u539f\u5148\u7684next-token\u4e0a\u9762\u4e0d\u80fd\u592a\u4f4e\u3002\u76f4\u89c2\u770b\uff0c\u8fd9\u4e5f\u662f\u5408\u7406\u7684\u3002</p> <p>\u6700\u540e\uff0c\u4f5c\u4e3a\u603b\u7ed3\uff0cmulti-step\u7684\u5bf9\u8bdd\u6a21\u578b\u8fd8\u662f\u5f88open\u7684\u95ee\u9898\uff0c\u5f53\u4e0b\u4e5f\u6ca1\u6709\u4e00\u4e2a\u660e\u786e\u7684\u9488\u5bf9\u5b83\u7684\u7ed3\u8bba\u3002\u8fd9\u4e00\u9886\u57df\u5f80\u5f80\u662f\u6211\u4eec\u4ecb\u7ecd\u7684\u4f17\u591aRL\u65b9\u6cd5\u548cDL\u5171\u540c\u5851\u6210\u7684\u4ea7\u7269\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap19/#reference_papers","title":"Reference Papers","text":"<ol> <li>Training language models to follow instructions with human feedback\uff08\u6700\u65e9\u7684RLHF\uff09</li> <li>Direct Preference Optimization: Your Language Model is Secretly a Reward Model</li> <li>Recurrent Experience Replay in Distributed Reinforcement Learning\uff08Historical state\uff09</li> <li>Learning Cooperative Visual Dialog Agents with Deep Reinforcement Learning\uff08Multi-step chatbot\uff09</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap20/","title":"Transfer Learning &amp; Meta Learning (in RL)","text":"<p>\u5728\u8fd9\u4e00\u8bb2\uff0c\u6211\u4eec\u6765\u63a2\u8ba8\u4e00\u4e9b\u975e\u5e38\u524d\u6cbf\u7684\u8bdd\u9898\u2014\u2014transfer learning\u548cmeta learning\u3002\u8fd9\u4e9b\u95ee\u9898\u628a\u4f20\u7edf\u7684\u95ee\u9898\u63d0\u5347\u4e86\u4e00\u4e2a\u6863\u6b21\u2014\u2014\u5177\u4f53\u7684\u542b\u4e49\u9a6c\u4e0a\u5c31\u4f1a\u770b\u5230\u3002</p> <p>\u5728\u672c\u8bb2\uff0c\u6211\u4eec\u4e3b\u8981\u8ba8\u8bba\u4e0b\u9762\u4e09\u4e2a\u4e00\u822c\u7684\u95ee\u9898\uff08\u4e0d\u4ec5\u9650\u4e8eRL\uff09\uff1a - \u5047\u8bbe\u4e00\u4e2amodel\u5728A\u4efb\u52a1\u4e0a\u9762\u8bad\u7ec3\uff0c\u6709\u6ca1\u6709\u529e\u6cd5\u5728B\u4efb\u52a1\u4e0a\u9762\u8868\u73b0\u7684\u5f88\u597d\uff1f\u8fd9\u79f0\u4e3aforward transfer learning\u3002     - \u5047\u8bbe\u5728B\u4efb\u52a1\u4e0a\uff0c\u6211\u4eec\u53ea\u80fd\u63d0\u4f9b\u76f8\u6bd4\u5728A\u4efb\u52a1\u4e0a\u5f88\u5c11\u7684\u6570\u636e\u3002\u6bd4\u5982\uff0c\u5728A\u4efb\u52a1\u4e0a\u8bad\u7ec310000\u4e2a\u6837\u672c\uff0c\u4f46\u5728B\u4efb\u52a1\u4e0a\u53ea\u670910\u4e2a\u6837\u672c\u3002     - \u987a\u4fbf\u4e00\u63d0\uff0cA\u79f0\u4e3asource task\uff0cB\u79f0\u4e3atarget task\u3002 - \u5047\u8bbe\u4e00\u4e2amodel\u5728 \\(A_1,A_2,\\cdots,A_n\\) \u8fd9 \\(n\\) \u4e2a\u4efb\u52a1\u4e0a\u9762\u8bad\u7ec3\uff0c\u6709\u6ca1\u6709\u529e\u6cd5\u5728B\u4efb\u52a1\u4e0a\u9762\u8868\u73b0\u7684\u5f88\u597d\uff08\u5176\u4ed6\u7684\u5047\u8bbe\u548c\u4e4b\u524d\u4e00\u6837\uff09\uff1f\u8fd9\u79f0\u4e3amulti-task transfer learning\u3002 - \u6700\u4e3a\u795e\u5947\u5730\uff0c\u6211\u4eec\u80fd\u5426\u5728\u82e5\u5e72\u4e2atask \\(A_1,\\cdots,A_n\\) \u4e0a\u9762\u8bad\u7ec3\u67d0\u79cd\u201c\u667a\u80fd\u4f53\u201d\u3002\u7136\u540e\uff0c\u628aB\u4efb\u52a1\u7684\u8bad\u7ec3\u96c6\u7ed9\u5b83\uff0c\u5b83\u81ea\u5df1\u5229\u7528\u8bad\u7ec3\u96c6\u5bf9\u81ea\u5df1\u8fdb\u884c\u64cd\u4f5c\uff08\u6ce8\u610f\u8fd9\u4e00\u64cd\u4f5c\u4e0d\u4e00\u5b9a\u662f\u4f20\u7edf\u7684\u68af\u5ea6\u4e0b\u964d\uff09\uff0c\u7136\u540e\u5728B\u4efb\u52a1\u4e0a\u9762\u8868\u73b0\u7684\u5f88\u597d\uff1f\u8fd9\u79f0\u4e3ameta learning\uff0c\u4e5f\u5c31\u662flearn to learn\u3002     - meta learning\u4e5f\u6709\u5f88\u591a\u8868\u8ff0\uff0c\u6bd4\u5982\u8bf4\uff0c\u8fd9\u4e5f\u53ef\u4ee5\u88ab\u7406\u89e3\u4e3a\uff0c\u6211\u4eec \u201c\u5b66\u4e60\u201d\u4e00\u4e2aoptimizer\uff0c\u8f93\u5165model\u7684\u521d\u59cb\u53c2\u6570\u548c\u8bad\u7ec3\u96c6\uff0c\u8f93\u51fa\u4e00\u4e2a\u5728\u8fd9\u4e2a\u8bad\u7ec3\u96c6\u4e0a\u9762\u8868\u73b0\u7684\u5f88\u597d\u7684\u65b0\u53c2\u6570\u3002\u5982\u56fe\u6240\u793a\u3002</p> <p></p> <p>\u5728RL\u91cc\uff0c\u4e5f\u53ef\u4ee5\u7c7b\u4f3c\u5730\u5b9a\u4e49\u8fd9\u4e09\u4e2a\u95ee\u9898\u3002\u4f5c\u4e3a\u521d\u6b65\u7684\u7406\u89e3\uff0c\u4f60\u53ea\u9700\u8981\u628a\u201c\u4efb\u52a1\u201d\u7406\u89e3\u4e3a\u201cMDP\u201d\u5373\u53ef\u3002\u4f46\u662f\u6709\u4e9b\u65f6\u5019\u53ef\u80fd\u4f1a\u6709\u5dee\u5f02\u2014\u2014\u6bd4\u5982\uff0c\u5728RL\u91cc\uff0c\u6211\u4eec\u8981\u60f3\u4e86\u89e3target domain\u53ea\u80fd\u901a\u8fc7\u6211\u4eec\u81ea\u5df1\u7684policy\u548c\u73af\u5883\u4ea4\u4e92\u7684\u65b9\u6cd5\uff08\u76f8\u6bd4\u4e4b\u4e0b\uff0cDL\u91cc\u9762\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u770b\u5230\u6570\u636e\uff09\uff0c\u56e0\u6b64\u5982\u679c\u521d\u59cb\u5316\u7684policy\u6bd4\u8f83\u5dee\u5c31\u53ea\u80fd\u770b\u5230biased\u7684\u6570\u636e\u3002\u56e0\u6b64\uff0cRL\u91cc\u7684transfer learning\u548cmeta learning\u4f1a\u9047\u5230\u66f4\u5927\u7684\u6311\u6218\u3002</p> <p>\u5982\u679c\u4f60\u6ca1\u6709\u63a5\u89e6\u8fc7\u8fd9\u4e9b\u6982\u5ff5\uff0c\u4f60\u53ef\u80fd\u5b8c\u5168\u88ab\u5b83\u4eec\u7684\u65b0\u5947\u6240\u9707\u64bc\u4e86\uff08\u5c24\u5176\u662fmeta learning\uff09\u3002\u7684\u786e\u2014\u2014\u8fd9\u4e9b\u95ee\u9898\u7684\u786e\u662f\u975e\u5e38\u524d\u6cbf\u7684\u3002\u56e0\u6b64\uff0c\u8fd9\u4e00\u8bb2\u6709\u70b9\u50cf\u4e00\u4e2a\u201c\u5bfc\u89c8\u201d\uff0c\u6211\u4eec\u4e0d\u4f1a\u8fdb\u5165\u592a\u6df1\u7684detail\uff0c\u4f46\u7b80\u5355\u5730\u79d1\u666e\u4e00\u4e0b\u8fd9\u4e9b\u95ee\u9898\u7684\u7b97\u6cd5\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap20/#forward_transfer_learning","title":"Forward Transfer Learning","text":"<p>\u9996\u5148\uff0c\u6211\u4eec\u6765\u770bforward transfer learning\u3002\u5176\u5b9e\uff0c\u5728\u666e\u901a\u7684DL\u4e2d\uff0c\u6211\u4eec\u4e5f\u63a5\u89e6\u8fc7\u7c7b\u4f3c\u7684\u95ee\u9898\u3002\u6bd4\u5982\u8bf4\uff0c\u6211\u4eec\u90fd\u591a\u5c11\u505a\u8fc7\u5b9e\u9a8c\uff0c\u4f7f\u7528pretrain\u7684\u5927\u8bed\u8a00\u6a21\u578b\uff08\u6bd4\u5982\uff0cMiniCPM\uff09\u8fdb\u884csupervised fine-tuning\uff0c\u53ef\u4ee5\uff08\u6bd4\u5982\u8bf4\uff09\u5b8c\u6210\u9ad8\u8003\u8bed\u6587\u9009\u62e9\u9898\u3002\u8fd9\u5176\u5b9e\u5c31\u662f\u4e00\u4e2aforward transfer learning\u7684\u4f8b\u5b50\u3002</p> <p>\u4f46\u662f\u5728RL\u4e2d\uff0c\u6211\u4eec\u5982\u679c\u91c7\u7528\u540c\u6837\u7684\u65b9\u6cd5\uff0c\u4f1a\u9762\u4e34\u4e09\u4e2a\u95ee\u9898\uff1a - domain shift\uff1a\u8fd9\u6307\u7684\u662f\uff0c\u4e24\u4e2a\u4efb\u52a1\u53ef\u80fd\u5177\u6709\u89c6\u89c9\u4e0a\u7684\u4e0d\u540c\u3002\u6bd4\u5982\u8bf4\uff0c\u90fd\u662f\u5f00\u8f66\uff0c\u4f46\u662f\u539f\u5148\u7684\u4efb\u52a1\u662f\u5728\u6a21\u62df\u5668\u4e2d\u7528\u865a\u62df\u6e32\u67d3\u7684\u56fe\u50cf\u8bad\u7ec3\uff0c\u800c\u65b0\u7684\u4efb\u52a1\u662f\u5728\u771f\u5b9e\u7684\u6444\u50cf\u5934\u56fe\u50cf\u4e2d\u8fdb\u884c\u3002 - difference in dynamics\uff1a\u8fd9\u662f\u66f4\u52a0\u4e25\u91cd\u7684\u95ee\u9898\uff0c\u4ee3\u8868\u4e24\u4e2a\u4efb\u52a1\u5177\u6709\u5b9e\u8d28\u4e0a\u7684\u4e0d\u540c\u3002 - lack of exploration\uff1a\u8fd9\u662fRL\u6240\u7279\u6709\u7684\u95ee\u9898\u2014\u2014\u7ecf\u8fc7pre-train\u4e4b\u540e\u7684\u6a21\u578b\u5f88\u5927\u6982\u7387\u6536\u655b\u5230\u4e00\u4e2a\u63a5\u8fd1deterministic\u7684policy\u3002\u8fd9\u6837\uff0c\u5728\u65b0\u7684MDP\u4e2d\u5b83\u5f88\u96be\u5f88\u5feb\u91c7\u96c6\u5230\u4e30\u5bcc\u7684\u8f68\u8ff9\u3002\u5f53\u7136\uff0c\u5982\u540c\u6211\u4eec\u5728\u7b2c\u5341\u4e5d\u8bb2\u91cc\u4ecb\u7ecd\u7684\u90a3\u6837\uff0cSAC\u7b49\u65b9\u6cd5\u53ef\u4ee5\u5f88\u597d\u5730\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap20/#domain_shift","title":"Domain Shift","text":"<p>Domain shift\u5b9e\u9645\u4e0a\u662f\u4eba\u4eec\u5728DL\u4e2d\u5c31\u53ef\u4ee5\u89e3\u51b3\u7684\u95ee\u9898\u3002\u6309\u7167\u6211\u4eec\u7684\u9610\u8ff0\uff0c\u8fd9\u7c7b\u95ee\u9898\u5bf9\u5e94\u7740\u53ea\u662f\u8868\u73b0\u7684\u4e0d\u540c\uff08\u6bd4\u5982\uff0c\u89c6\u89c9\u4e0a\u51fa\u73b0\u4e0d\u540c\uff09\u3002\u8fd9\u53ef\u4ee5\u901a\u8fc7domain adapation\u6765\u89e3\u51b3\u3002</p> <p>\u6211\u4eec\u5047\u8bbe\u5728source domain\u4e0a\u9762\u8bad\u7ec3\u597d\u4e86\u4e00\u4e2a\u4e0d\u9519\u7684representation\uff08\u6bd4\u5982\uff0c\u5377\u79ef\u51fa\u6765\u7684feature\uff09\uff0c\u4f46\u8fd9\u4e2arepresentation\u4e0d\u4e00\u5b9a\u9002\u7528\u4e8etarget domain\u3002\uff08\u6ce8\u610f\uff0c\u6211\u4eec\u8fd9\u91cc\u4e0d\u662f\u8bf4\u7684\u662ffeature\u4e4b\u540e\u7684MLP\u7684\u53c2\u6570\u5bf9\u4e8e\u4e0d\u540cdomain\u8981\u53d8\u5316\uff0c\u800c\u662f\u8bf4\u5377\u79ef\u7684\u53c2\u6570\u8981\u53d8\u5316\u3002\uff09\u5982\u4f55\u5728target\u4e0a\u9762\u8bad\u7ec3\u5462\uff1f\u8fd9\u91cc\u7ed9\u51fa\u7684\u65b9\u6cd5\u662f\uff0c\u6211\u4eec\u8bad\u7ec3\u4e00\u4e2a\u7c7b\u4f3cGAN\u7684\u7ed3\u6784\uff1adiscriminator\u770b\u5377\u79ef\u51fa\u6765\u7684feature\uff0c\u7136\u540e\u5224\u65ad\u8fd9\u4e2afeature\u662f\u6765\u81easource\u8fd8\u662ftarget domain\uff1b\u800ctarget domain\u6a21\u578b\u7684\u5377\u79ef\u5c42\u8981\u5c3d\u91cf\u6b3a\u9a97\u8fd9\u4e2adiscriminator\u3002</p> <p>\u53ef\u4ee5\u60f3\u8c61\uff0c\u5982\u679c\u8fd9\u4e00\u4e2a\u8bad\u7ec3\u6210\u529f\u4e86\uff0c\u90a3\u4e48\u8f93\u51fa\u7684feature\u5e94\u8be5\u5728source\u548ctarget\u4e0a\u9762\u662f\u540c\u6837\u7684\u5206\u5e03\uff1b\u8fd9\u6837\uff0cfeature\u5c31\u53ef\u4ee5\u5f88\u597d\u5730\u548cRL\u7684\u90e8\u5206\u5bf9\u63a5\uff0c\u6216\u8005\u5728DL\u7684\u9886\u57df\u91cc\u7684\u8bdd\uff0c\u548cMLP\u5206\u7c7b\u5668\u7684\u90e8\u5206\u5bf9\u63a5\u3002\u4ece\u800c\uff0c\u6211\u4eec\u5b8c\u6210\u4e86forward transfer learning\u3002</p> <p>\u6ce8\u610f\u5176\u4e2d\u7684\u5173\u952e\u601d\u60f3\u2014\u2014\u5bf9\u4e8e\u8fd9\u4e24\u4e2a\u4e0d\u540c\u7684domain\uff0c\u53ea\u8981\u5b83\u4eec\u7684\u5b9e\u8d28\u662f\u4e00\u6837\u7684\uff0c\u90a3\u4e48\u4e00\u5b9a\u5b58\u5728\u4e24\u4e2adomain\u5206\u522b\u7684\u4e24\u4e2afeature\uff0c\u4f7f\u5f97\u5b83\u4eec\u5904\u4e8e\u540c\u4e00\u4e2adistribution\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u4e24\u4e2a\u5b9e\u8d28\u76f8\u540c\u7684domain\u4e4b\u95f4\u7684\u8868\u89c2\u5dee\u522b\u90fd\u662f\u53ef\u4ee5\u5ffd\u7565\u7684\uff08\u901a\u8fc7\u5377\u79ef\u6765\u201c\u6b8a\u9014\u540c\u5f52\u201d\uff09\u3002\u8fd9\u79f0\u4e3aInvariance Assumption\u3002</p> <p>\u4f46\u662f\u8fd9\u4e00\u65b9\u6cd5\u5728RL\u4e2d\u771f\u7684\u4e00\u5b9a\u597d\u5417\uff1f\u53ef\u4ee5\u8bf4\uff0c\u5927\u90e8\u5206\u65f6\u5019\u8fd8\u662f\u53ef\u4ee5\u7684\u2014\u2014\u4f46\u662f\u6709\u65f6\u5019\u4e5f\u6709\u53cd\u4f8b\u3002</p> <p>\u6bd4\u5982\u8bf4\uff0c\u6211\u4eec\u5728\u6a21\u62df\u5668\u7684\u56fe\u7247\u4e0a\u8bad\u7ec3\u5f00\u8f66\uff0c\u4f46\u662f\u78b0\u5de7\u6a21\u62df\u5668\u505a\u7684\u6bd4\u8f83\u5dee\uff0c\u5bfc\u81f4\u5728\u771f\u5b9e\u73af\u5883\u4e2d\u5f00\u8f66\u65f6\uff0c\u521d\u59cb\u672a\u7ecffinetune\u7684\u6a21\u578b\u8d70\u7684\u6b65\u6b65\u51fa\u9519\uff0c\u662f\u5f88\u5dee\u7684\u7b56\u7565\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u6309\u7167\u524d\u9762\u7684\u65b9\u6cd5\u8bad\u7ec3\u3002\u5982\u679c\u539f\u59cb\u5377\u79ef\u6a21\u578b\u5f88\u597d\u7684\u8bdd\uff0c\u5b83\u5e94\u8be5\u80fd\u5377\u51fa\u6765\u5f00\u8f66\u6709\u6ca1\u6709\u5f00\u597d\u7684\u7279\u5f81\uff08\u6bd4\u5982\uff0c\u8f66\u73bb\u7483\u662f\u4e0d\u662f\u649e\u5230\u4e1c\u897f\u4e86\uff09\u3002\u4f46\u662f\u5982\u679c\u8fd9\u6837\u7684\u8bdd\uff0cdiscriminator\u4e00\u4e0b\u5c31\u53d1\u73b0\u4e86\u2014\u2014\u6765\u81eatarget domain\u7684\u8fd9\u4e00\u7279\u5f81\u5927\u6982\u662f\u201c\u5dee\u201d\uff0c\u800c\u6765\u81easource domain\u53ef\u80fd\u6709\u597d\u6709\u5dee\u3002\u8fd9\u6837\uff0ctarget domain\u4e0a\u9762\u7684\u6a21\u578b\u4e3a\u4e86\u6b3a\u9a97discriminator\uff0c\u53ea\u597d\u201c\u88c5\u75af\u5356\u50bb\u201d\uff0c\u5220\u6389\u8868\u8fbe\u5f00\u8f66\u5f00\u6ca1\u5f00\u597d\u7684\u8fd9\u4e2a\u7279\u5f81\u3002\u8fd9\u6837\uff0c\u5f00\u7684\u597d\u4e0d\u597d\u8fd9\u4e00\u91cd\u8981\u4fe1\u606f\u5c31\u5728\u8fd9\u4e00\u6761\u4f20\u8f93\u94fe\uff08\u56fe\u7247-&gt;\u5377\u79ef\u6a21\u578b-&gt;RL\u7684policy\u6a21\u578b\uff09\u4e2d\u65ad\u5f00\u4e86\u3002</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5f52\u6839\u7ed3\u5e95\uff0c\u8fd9\u4e00failure case\u6765\u6e90\u4e8e\u4e00\u5f00\u59cb\u6240\u8bf4\u7684\uff0cRL\u4e2d\u7684transfer learning\u548c\u666e\u901aDL\u7684transfer learning\u7684\u533a\u522b\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u5dee\u7684policy\u53ef\u80fd\u5bfc\u81f4exploration\u4e0d\u8db3\uff0c\u4ece\u800c\u8ba9DL\u91cc\u9762\u672c\u6765\u4e00\u5b9awork\u7684\u65b9\u6cd5\u5931\u6548\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap20/#difference_in_dynamics","title":"Difference in Dynamics","text":"<p>\u4ecb\u7ecd\u5b8c\u4e86\u7b2c\u4e00\u4e2a\u6bd4\u8f83\u201c\u5c0f\u201d\u7684\u95ee\u9898\u2014\u2014domain shift\u4e4b\u540e\uff0c\u6211\u4eec\u7ee7\u7eed\u6765\u4ecb\u7ecddifference in dynamics\u3002\u8fd9\u5c31\u66f4\u6709\u6311\u6218\u6027\uff0c\u6211\u4eec\u4e3b\u8981\u4ecb\u7ecd\u4e00\u4e2a\u7814\u7a76\u7684\u7ed3\u679c\u3002\u5982\u56fe\u6240\u793a\uff0c\u5047\u8bbe\u5728simulator\u8bad\u7ec3\u7684\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5f00\u8f66\u5230\u8fbe\u7ec8\u70b9\uff1b\u800c\u5728\u5b9e\u9645\u60c5\u51b5\u4e2d\uff0c\u8d77\u70b9\u548c\u7ec8\u70b9\u4e4b\u95f4\u88ab\u4e00\u4e2a\u5899\u9694\u79bb\u3002\u5982\u4f55\u8ba9\u6a21\u578b\u5b66\u4f1a\u7ed5\u8fc7\u8fd9\u4e2a\u5899\u5230\u8fbe\u7ec8\u70b9\u5462\uff1f</p> <p></p> <p>\u7814\u7a76\u8005\u51b3\u5b9a\u4f9d\u7136\u91c7\u7528GAN\u7684\u65b9\u6cd5\uff1b\u4f46\u662f\u73b0\u5728\uff0cdiscriminator\u89c2\u5bdf(state,action)\u5bf9\uff0c\u7136\u540e\u5224\u65ad\u8fd9\u4e2a\u5bf9\u662f\u6765\u81easource\u8fd8\u662ftarget domain\u3002\u8fd9\u6837\u7684\u8bdd\uff0c\u5982\u679c\u5728\u5899\u65c1\u8fb9\uff0c\u56e0\u4e3atarget domain\u4e2d\u6a21\u578b\u65e0\u6cd5\u88ab\u7a7f\u8fc7\uff0c\u6240\u4ee5\u5c31\u7acb\u523b\u4f1a\u88ab\u5224\u65ad\u4e3atarget domain\u3002\u56e0\u6b64\uff0c\u6a21\u578b\u4f1a\u5b66\u4f1a\u5f88\u8fdc\u5730\u7ed5\u8fc7\u5899\uff0c\u4e0d\u88ab\u5b83\u6240\u5e72\u6270\u3002</p> <p>\u5f53\u7136\uff0c\u8fd9\u662f\u4e00\u4e2a\u6781\u5ea6\u7b80\u5316\u7684\u63cf\u8ff0\uff1b\u5b9e\u9645\u7684\u5b9e\u73b0\u4e2d\uff0c\u6211\u4eec\u4f1a\u5efa\u7acb\u4e00\u4e2a\u65b0\u7684reward \\(\\tilde{r}\\) \uff1a</p> \\[ \\tilde{r}(s,a)=r_{\\text{src}}(s,a)+\\Delta r(s,a) \\] <p>\uff08\u6ce8\u610f\u6211\u4eec\u662f\u5728source domain\u7684reward\u4e0a\u9762\u505a\u66f4\u6539\u3002\uff09\u5176\u4e2d\uff0c \\(\\Delta r(s,a)\\) \u5c31\u662fdiscriminator\u7ed9\u51fa\u7684\u9644\u52a0reward\uff0c\u6a21\u578b\u505a\u7684\u4e8b\u60c5\u5728target domain\u91cc\u9762\u8d8a\u4e0d\u53ef\u80fd\uff0c\u8fd9\u4e2areward\u8d8a\u5c0f\u3002</p> <p>\u7528\u8fd9\u6837\u7684\u65b9\u6cd5\uff0c\u7814\u7a76\u8005\u505a\u4e86\u4e00\u4e2a\u5b9e\u9a8c\uff1a\u8bad\u7ec3\u4e00\u4e2aant\u5728\u65e0\u7a77\u5927\u5e73\u9762\u4e0a\u5954\u8dd1\u3002\u63a5\u4e0b\u6765\uff0c\u628a\u5b83\u9650\u5236\u5728\u4e00\u4e2a\u6709\u9650\u7684\u5706\u76d8\u4e0a\u3002\u5b9e\u9a8c\u53d1\u73b0\uff0c\u771f\u7684\u5f88\u50cf\u4e00\u53ea\u52a8\u7269\u4e00\u6837\uff0cant\u5148\u8fc5\u901f\u5954\u8dd1\u5230\u5706\u76d8\u8fb9\u7f18\uff0c\u7136\u540e\u5ffd\u7136\u51cf\u901f\uff0c\u4f3c\u4e4e\u6709\u4e9b\u72b9\u8c6b\u5730\u8f6c\u4e86\u51e0\u5708\uff0c\u968f\u540e\u7acb\u523b\u6298\u8fd4\u3002</p> <p>\u8fd9\u4e00\u65b9\u6cd5\u4e00\u5b9awork\u5417\uff1f\u540c\u6837\uff0c\u6211\u4eec\u4f9d\u7136\u80fd\u7ed9\u51fa\u53cd\u4f8b\u3002\u4f46\u6700\u76f4\u63a5\u7684\u601d\u60f3\u662f\uff0c\u8fd9\u4e00\u65b9\u6cd5\u5b66\u4f1a\u7684\u662fsource domain\u548ctarget domain\u7684\u4ea4\u96c6\uff0c\u56e0\u4e3a\u6211\u4eec\u76f8\u5f53\u4e8e\u662f\u5728source domain\u7684policy\u505a\u4fee\u6539\uff0c\u5220\u9664\u4e86\u5728target domain\u4e0a\u9762\u201c\u79bb\u7ecf\u53db\u9053\u201d\u7684\u9519\u8befaction\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u4e0d\u53ef\u80fd\u5b66\u4f1a\u7684\u662f\uff0c\u5728source domain\u4e0a\u9762\u6ca1\u6709\u4f46\u662f\u5728target domain\u4e0a\u9762\u6709\u7684action\u3002</p> <p>\u5c31\u6700\u7b80\u5355\u7684\u4f8b\u5b50\uff0c\u5982\u679c\u628a\u4e0a\u9762\u7684\u95ee\u9898\u53cd\u8fc7\u6765\u2014\u2014source domain\u4e2d\u95f4\u6709\u4e2a\u5899\uff0c\u800ctarget domain\u6ca1\u6709\uff0c\u90a3\u4e48\u8fd9\u4e00\u65b9\u6cd5\u5c31\u4e0d\u4f1a\u5b66\u4f1a\u4ece\u5899\u4e2d\u95f4\u76f4\u7ebf\u7a7f\u8fc7\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap20/#trick_randomization","title":"Trick: Randomization","text":"<p>\u5173\u4e8elack of exploration\uff0c\u53ef\u4ee5\u53c2\u8003\u7b2c\u5341\u56db\u8bb2\u548c\u7b2c\u5341\u4e5d\u8bb2\u7684\u5185\u5bb9\uff0c\u8fd9\u91cc\u5c31\u4e0d\u518d\u4ecb\u7ecd\u4e86\u3002\u6211\u4eec\u6765\u989d\u5916\u4ecb\u7ecd\u4e00\u4e2atrick\u2014\u2014randomization\u3002</p> <p>\u56de\u60f3\u4e00\u4e0b\uff0c\u5728DL\u4e2d\uff0c\u6211\u4eec\u5982\u4f55\u505apretrain+finetune\u7684\uff1f\u4ee5\u5927\u8bed\u8a00\u6a21\u578b\u4e3a\u4f8b\uff0cpretrain\u7684\u6a21\u578b\u901a\u5e38\u90fd\u89c1\u5230\u5404\u5f0f\u5404\u6837\u7684\u6570\u636e\uff0c\u800cfine tune\u4ee5\u4e00\u4e2a\u5f88\u72ed\u7a84\u7684\u7c7b\u578b\u4e3a\u4e3b\u3002\u8fd9\u6837\uff0c\u53ef\u4ee5\u60f3\u8c61\u6a21\u578b\u786e\u5b9e\u53ef\u4ee5generalize\u3002</p> <p>\u4f46\u662f\u5bf9\u4e8eRL\uff0c\u60c5\u51b5\u5e76\u975e\u5982\u6b64\uff1b\u5f88\u591a\u65f6\u5019\uff0c\u6bd4\u5982\u6211\u4eecpretrain\u4e00\u4e2ahumanoid\u5411\u524d\u8d70\uff0c\u4f46\u662f\u5728fine tune\u7684\u65f6\u5019\uff0c\u6211\u4eec\u8981\u6c42\u5b83\u5411\u540e\u8d70\u3002\u8fd9\u6837\uff0c\u6a21\u578b\u7684generalize\u5c31\u66f4\u52a0\u56f0\u96be\u3002</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\uff0crandomize\u7684\u65b9\u6cd5\u88ab\u63d0\u51fa\uff1a\u6211\u4eec\u53ef\u4ee5\u7ed9dynamic\u52a0\u566a\u58f0\uff0c\u4f7f\u5f97\u6a21\u578b\u66f4\u52a0robust\uff0c\u4e5f\u66f4\u5bb9\u6613generalize\u3002\u6bd4\u5982\u8bf4\uff0c\u5728humanoid\u73af\u5883\u91cc\uff0c\u6211\u4eec\u53ef\u4ee5\u8c03\u8282\u80a2\u4f53\u7684\u76f8\u5bf9\u5927\u5c0f\u3001\u91cd\u91cf\uff0c\u548c\u4eba\u4e0e\u5730\u9762\u7684\u6469\u64e6\u3002\u5728\u8bad\u7ec3\u7684\u65f6\u5019\uff0c\u6211\u4eec\u53ef\u4ee5\u968f\u673a\u5730\u6539\u53d8\u8fd9\u4e9b\u53c2\u6570\uff0c\u8ba9\u6a21\u578b\u5728\u201c\u4e0d\u540c\u7684\u73af\u5883\u201d\u4e0a\u9762\u5206\u522b\u8bad\u7ec3\u3002</p> <p>\u4ee4\u4eba\u4e0d\u60ca\u5947\u7684\u662f\uff0c\u8fd9\u6837\u8bad\u7ec3\u51fa\u6765\u7684policy\u5728\u4e00\u7ec4\u65b0\u53c2\u6570\u6784\u6210\u7684\u73af\u5883\u4e0a\u9762\u8868\u73b0\u66f4\u597d\uff1b\u800c\u8ba9\u4eba\u60ca\u5947\u7684\u662f\uff0c\u5728\u66f4\u591a\u7684\u73af\u5883\u4e0a\u8bad\u7ec3\u51e0\u4e4e\u6ca1\u6709\u5bfc\u81f4\u5355\u4e2a\u73af\u5883reward\u7684\u4e0b\u964d\uff01\u8fd9\u6709\u70b9\u50cf\u201cfree lunch\u201d\uff0c\u6709\u4e9b\u8fdd\u80cc\u6211\u4eec\u5bf9generalization\u7684\u9884\u671f\uff1b\u4f46\u6211\u4eec\u4e5f\u53ef\u4ee5\u7406\u89e3\u4e3a\uff0c\u6a21\u578b\u771f\u7684\u5b66\u4f1a\u4e86\u4e00\u4e9b\u5b9e\u8d28\u6027\u7684\u5185\u5bb9\uff0c\u4e0d\u56e0\u8fd9\u4e9b\u7269\u7406\u53c2\u6570\u800c\u6539\u53d8\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap20/#multi-task_transfer_learning","title":"Multi-Task Transfer Learning","text":"<p>\u5176\u5b9e\uff0c\u5728forward transfer learning\u7684\u6700\u540e\u5f15\u5165randomization\u65f6\uff0c\u6211\u4eec\u5df2\u7ecf\u6709\u4e86\u4e00\u4e2a\u601d\u8def\u2014\u2014pretrain\u7684\u65f6\u5019task\u7684\u5206\u5e03\u8d8a\u5e7f\uff0cfine tune\u7684\u65f6\u5019\u8868\u73b0\u8d8a\u597d\u3002\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48\u4eba\u4eec\u4f1a\u8fdb\u4e00\u6b65\u60f3\u505amulti-task transfer learning\u2014\u2014\u5728\u591a\u4e2a\u4e0d\u540c\uff08\u4f46\u6709\u5171\u6027\uff09\u7684task\u4e0a\u8bad\u7ec3\u3002\uff08forward transfer learning\u4e2d\u7684randomize\u65b9\u6cd5\u5176\u5b9e\u4e5f\u53ef\u4ee5\u89c6\u4f5c\u4e00\u79cdmulti-task transfer learning\u7684\u7b80\u5316\u7248\u672c\u3002\uff09</p> <p>Multi-task transfer learning\u7684\u7406\u60f3\u672a\u6765\u662f\uff1a - \u5728\u591a\u4e2atask\u4e0a\u9762\u8bad\u7ec3\uff0c\u4f7f\u5f97\u6a21\u578b\u5728\u65b0\u7684task\u4e0a\u9762\u8868\u73b0\u66f4\u597d\uff1b - \u4e0d\u4ec5\u5982\u6b64\uff0c\u6211\u4eec\u5e0c\u671b\u591a\u4e2atask\u7684\u540c\u65f6\u8bad\u7ec3\u53cd\u800c\u4f1a\u52a0\u901f\u6bcf\u4e2atask\u7684\u5e73\u5747\u8bad\u7ec3\u901f\u5ea6\u3002\u8fd9\u662f\u56e0\u4e3a\uff0c\u6211\u4eec\u5e0c\u671b\u907f\u514d\u6a21\u578boverfit\uff0c\u4f7f\u5f97\u6a21\u578b\u66f4\u52a0robust\uff0c\u4ece\u800c\u6536\u655b\u7684\u66f4\u5feb\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap20/#multi-task_rl_is_a_rl_problem","title":"Multi-task RL is a RL problem!","text":"<p>\u5728RL\u91cc\u9762\uff0c\u5176\u5b9e\u53ef\u4ee5\u628amulti-task RL\u201c\u538b\u7f29\u201d\u4e3a\u4e00\u4e2aMDP\uff0c\u4ece\u800c\u628a\u5b83\u8f6c\u5316\u4e3a\u4e00\u4e2aRL\u95ee\u9898\u3002</p> <p>\u4e00\u4e2a\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u662f\uff0c\u5728 \\(s_0\\) \u505a\u4e00\u4e2aaction \\(a_0\\) \uff0c\u8fdb\u5165\u54ea\u4e2a \\(s_1\\) \u4ee3\u8868\u8fdb\u5165\u54ea\u4e2a\u201c\u4e16\u754c\u201d\uff1b\u800c\u8fdb\u5165\u4e86\u8fd9\u4e00\u4e16\u754c\u4e4b\u540e\u518d\u6309\u7167MDP\u6f14\u5316\u3002\u5f53\u7136\uff0c\u8fd9\u53ea\u662f\u4e00\u4e2a\u6587\u5b57\u6e38\u620f\uff0c\u4e0d\u540c\u7684\u201c\u4e16\u754c\u201d\u4e4b\u95f4\u7684\u5171\u6027\u7684\u63d0\u53d6\u5e76\u6ca1\u6709\u56e0\u6b64\u800c\u7b80\u5316\uff0c\u56e0\u6b64\u610f\u4e49\u4e0d\u5927\u3002</p> <p>\u4e00\u4e2a\u6709\u610f\u4e49\u7684\u7b80\u5316\u65b9\u5f0f\u662f\uff0c\u5982\u679c\u5f88\u591atask\u5305\u542b\u5171\u540c\u7684state,action\uff08\u6bd4\u5982\uff0c\u6211\u4eec\u7684task\u6709\u8ba9hopper\u524d\u8fdb\uff0c\u6709\u7684\u8ba9hopper\u540e\u9000\uff0c\u6709\u7684\u8ba9\u5b83\u539f\u5730\u8df3\u8dc3\uff0c\u7b49\u7b49\uff09\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u628a\u4ed6\u4eec\uff08\u6709\u610f\u4e49\u5730\uff09\u653e\u5165\u540c\u4e00\u4e2aMDP\u3002\u6b64\u65f6\uff0c\u5982\u4f55\u5206\u8fa8task\uff1f\u6211\u4eec\u52a0\u5165\u4e00\u4e2a \\(\\omega\\) \uff0c\u79f0\u4e3acontext\uff0c\u523b\u753b\u4e86\u6211\u4eec\u5728\u505a\u4ec0\u4e48\u3002\u8fd9\u6837\uff0c\u5b8c\u6574\u7684state space\u662f \\((s,\\omega)\\) \uff0c\u6211\u4eec\u5728\u8fd9\u6837\u7684\u4e00\u4e2aMDP\u4e0a\u9762\u5b66\u4e60\u3002\u8fd9\u624d\u771f\u6b63\u5730\u628amulti-task RL\u53d8\u6210\u4e86\u4e00\u4e2aRL\u95ee\u9898\u3002\u8fd9\u79f0\u4e3acontextual policies\u3002\u5b83\u7684\u4e3b\u8981\u5e94\u7528\u5c31\u662f\u6240\u8bf4\u7684\uff0c\u591a\u4e2atask\u662f\u6539\u53d8\u67d0\u4e2a\u76ee\u6807\u7684\u53c2\u6570\u7684\u60c5\u5f62\uff08\u5411\u524d\uff0c\u5411\u540e\uff0c\u4e0d\u52a8\uff09\u3002</p> <p>\u53e6\u5916\u4e00\u4e2a\u65b9\u5f0f\u4e5f\u662f\u6211\u4eec\u4e4b\u524d\u63d0\u5230\u7684\uff0cgoal-conditioned policies\u3002\u8fd9\u4e00\u65b9\u6cd5\u7684state space\u662f \\((s,g)\\) \uff0c\u5176\u4e2d \\(g\\) \u4ee3\u8868\u6700\u540e\u8981\u5230\u8fbe\u7684state\u3002\u8fd8\u8bb0\u5f97\u6211\u4eec\u4e4b\u524d\u63d0\u5230\uff0c\u8fd9\u79cd\u65b9\u6cd5\u53ef\u4ee5\u8ba9\u673a\u5668\u4f7f\u7528\u81ea\u5df1\u7684reward\uff08\u6bd4\u5982 \\(\\mathbf{1}[s=g]\\) \uff09\u6765\u201cdream goal to learn\u201d\uff0c\u4e0d\u9700\u8981\u73af\u5883\u989d\u5916\u63d0\u4f9breward\u3002\u6211\u4eec\u53ea\u9700\u8981\u628a\u6a21\u578b\u653e\u8fdb\u73af\u5883\u91cc\uff0c\u8ba9\u4ed6\u8bbe\u8ba1goal\u5e76\u8bd5\u56fereach goal\uff0c\u5c31\u53ef\u4ee5\u5b8c\u6210Multi-task RL\u3002</p> <p>\u8fd9\u4e00\u65b9\u6cd5\u7684\u4f18\u52bf\u662f\uff0c\u5982\u679ctest\u7684goal\u5c31\u662fdream\u8fc7\u7684goal\uff0c\u90a3\u4e48\u5c31\u7acb\u523b\u5b8c\u6210\uff1b\u4f46\u662f\u7f3a\u9677\u4e5f\u5f88\u660e\u663e\u2014\u2014\u4e0d\u662f\u6240\u6709\u7684\u76ee\u6807\u90fd\u53ef\u4ee5\u5199\u4e3agoal\u7684\u5f62\u5f0f\u3002\uff08\u6211\u4eec\u5f53\u65f6\u4e5f\u4e3e\u8fc7\u4f8b\u5b50\uff0c\u8981\u6c42\u7ed5\u5f00\u67d0\u4e2a\u533a\u57df\uff0c\u5c31\u662f\u5bf9\u5386\u53f2\u7684\u523b\u753b\uff0c\u4e0d\u80fd\u8868\u8ff0\u4e3a\u53ea\u4f9d\u8d56\u4e8e\u6700\u7ec8state\u7684goal\u5f62\u5f0f\u3002\uff09</p>"},{"location":"Online%20CS%20Courses/CS285/chap20/#meta_learning","title":"Meta Learning","text":"<p>\u6211\u4eec\u6700\u540e\u6765\u4ecb\u7ecd\u672c\u8bb2\u7684\u91cd\u5934\u620f\u2014\u2014meta learning\u3002</p> <p>\u6211\u4eec\u524d\u9762\u5df2\u7ecf\u4ecb\u7ecd\u4e86meta learning\u7684\u57fa\u672c\u6982\u5ff5\u3002\u90a3\u4e48\uff0c\u5728RL\u4e2d\uff0c\u6211\u4eec\u5e0c\u671b\u8bad\u7ec3\u51fa\u6765\u7684meta learner\u53ef\u4ee5\u5b8c\u6210\u54ea\u4e9b\u4efb\u52a1\u5462\uff1f\u6211\u4eec\u77e5\u9053\uff0c\u5728DL\u4e2d\uff0cmeta learner\u8f93\u5165\u6570\u636e\u96c6\u8f93\u51fa\u4e00\u4e2a\u4e0d\u9519\u7684\u6a21\u578b\uff1b\u800c\u5728RL\u4e2d\uff0c\u8fd9\u53d8\u6210\u4e86\uff0c\u8f93\u5165\u4e00\u4e2aMDP\uff0c\u8f93\u51fapolicy\u3002\u56e0\u6b64\uff0c\u53ef\u4ee5\u6599\u60f3\uff0c\u5982\u679c\u6210\u529f\u4e86\uff0c\u90a3\u4e48meta learner\u5c31\u53ef\u4ee5 - \u51b3\u5b9a\u5982\u4f55explore\u8fd9\u4e00MDP\uff1b - \u6839\u636eMDP\u7684\u4e0d\u540c\u7279\u6027\uff0c\u63d0\u53d6\u51fa\u6765features\uff1b - \u51b3\u5b9a\u5982\u4f55\u6839\u636e\u65e7\u7684experience\u6765\u66f4\u65b0policy\uff1b</p> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u57fa\u672c\u5c31\u610f\u5473\u7740\uff0c\u6211\u4eec\u7684meta learner\u5b66\u4f1a\u7684\u662f\u4e00\u4e2aRL\u7b97\u6cd5\uff01\u8fd9\u5c31\u662f\u4e3a\u4ec0\u4e48meta learning\u5728RL\u4e2d\u5982\u6b64\u91cd\u8981\u7684\u539f\u56e0\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap20/#formalization","title":"Formalization","text":"<p>\u8ba9\u6211\u4eec\u6765\u628a\u5b83formalize\u4e00\u4e0b\u3002\u9996\u5148\uff0c\u5728DL\u4e2d\uff0c\u5982\u4f55\u5b9a\u4e49meta learning\u5462\uff1f\u4e00\u4e2a\u201c\u6a21\u578b\u201d\u6240\u4f5c\u7684\u662f</p> \\[ f(x)=y\\quad (x\\in \\text{test}) \\] <p>\u4e5f\u5c31\u662f\uff0c\uff08\u6bd4\u5982\u8bf4\uff09\u8f93\u5165\u56fe\u7247\uff0c\u8f93\u51falabel\u3002\u800cmeta learning\u505a\u7684\u5176\u5b9e\u662f</p> \\[ g(D_{\\text{train}})\\in \\mathcal{F};\\qquad  g(D_{\\text{train}})(x) = y\\quad (x\\in \\text{test}) \\] <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u8f93\u5165\u8bad\u7ec3\u96c6\u540e\uff0cmeta learning algorithm\u7ed9\u51fa \\(g(D_{\\text{train}})\\) \u8fd9\u4e00\u4e2a \u51fd\u6570 \uff0c\u8fd9\u4e2a\u51fd\u6570\u53ef\u4ee5\u63a5\u53d7\u4e00\u4e2a\u65b0\u7684 \\(x\\) \uff0c\u7136\u540e\u8f93\u51fa \\(y\\) \u3002</p> <p>\u6211\u4eec\u518d\u6765\u5206\u6790\uff0c\u5b66\u5230\u4e86\u7684\u53c2\u6570\u662f\u4ec0\u4e48\u3002\u5728\u666e\u901a\u7684learning\u8fc7\u7a0b\uff0c\u5b66\u7684\u662f\u4e00\u4e2a\u53c2\u6570 \\(\\theta\\) \uff1a</p> \\[ \\theta^\\star = \\arg\\min_\\theta L(f_\\theta; D_{\\text{train}}) \\] <p>\uff08\u6bd4\u5982\u8bf4\uff0c \\(L(f_\\theta; D_{\\text{train}})=\\sum_{x\\sim D_{\\text{train}}}(y-f_\\theta(x))^2\\) \uff09\u3002\u800c\u5728meta learning\u4e2d\uff0c\u6211\u4eec\u5b66\u7684\u53c2\u6570\u662f \\(\\phi\\) \uff0c\u6ee1\u8db3</p> \\[ \\phi^\\star = \\arg\\min_\\phi L_{\\text{meta}}(g_\\phi;D_{\\text{meta,train}}) \\] <p>\u5176\u4e2d</p> \\[ L_{\\text{meta}}(g_\\phi;D_{\\text{meta,train}}) = \\sum_{(D_{\\text{train}},D_{\\text{test}})\\in D_{\\text{meta,train}}}L(g_{\\phi}(D_{\\text{train}}); D_{\\text{test}}) \\] <p>\u6ce8\u610f \\(D_{\\text{meta,train}}\\) \u662f\u82e5\u5e72\u4e2a \\((D_{\\text{train}},D_{\\text{test}})\\) \u5bf9\uff0c\u5982\u56fe\u6240\u793a\u3002</p> <p></p> <p>\u800c\u5728RL\u4e2d\uff0c\u60c5\u51b5\u4e5f\u5f88\u7c7b\u4f3c\uff1b\u5bf9\u4e8e\u666e\u901a\u7684\u95ee\u9898\uff0c\u6211\u4eec\u4f18\u5316\u7684\u662fcumulative reward \\(R\\) \uff1a</p> \\[ \\theta^\\star = \\arg\\max_\\theta J(\\pi_\\theta;\\text{MDP}) = \\arg \\max_\\theta \\mathbb{E}_{\\tau\\sim \\pi_\\theta}[R(\\tau)] \\] <p>\u800c\u5728meta learning\u4e2d\uff0c\u6211\u4eec\u4f18\u5316\u7684\u662f</p> \\[ \\phi^\\star = \\arg\\max_\\phi J(g_\\phi;D_\\text{meta}) = \\arg\\max_\\phi \\sum_{\\text{MDP}\\in D_{\\text{meta}}}J(g_\\phi(\\text{MDP});\\text{MDP}) \\] <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u7684meta learner \\(g_\\phi\\) \u8f93\u5165MDP\uff0c\u8f93\u51fapolicy\u3002\u6b64\u65f6\u7684meta trainin set \\(D_{\\text{meta}}\\) \u5c31\u7b80\u5355\u5730\u662f\u4e00\u7ec4MDP\u3002</p> <p>\u6700\u540e\uff0c\u6211\u4eec\u6765\u4e3e\u4e00\u4e2a\u5f62\u8c61\u7684\uff0cRL\u4e2d\u7684meta learning\u7684\u4f8b\u5b50\u3002\u6bd4\u5982\uff0c\u90fd\u662fcheetah\u7684\u73af\u5883\uff0c\u4f46\u662freward\u4e0d\u540c\uff1a\u5728meta training set\u4e2d\uff0c\u5305\u542b\u7684\u73af\u5883\u4e00\u4e2a\u7684\u76ee\u6807\u662f\u5411\u524d1m/s\uff0c\u4e00\u4e2a\u662f\u5411\u540e1m/s\uff0c\u4e00\u4e2a\u662f\u5411\u524d0.5m/s\uff1b\u7136\u540e\uff0c\u5728test\u4e2d\uff0c\u76ee\u6807\u662f\u5411\u540e0.2m/s\u3002</p> <p>\u5f53\u7136\uff0c\u4ece\u8fd9\u4e2a\u4f8b\u5b50\u4e5f\u53ef\u4ee5\u770b\u51fa\uff0cmeta learning\u4e5f\u9700\u8981\u4fdd\u8bc1\u6d4b\u8bd5\u70b9in distribution\uff1a\u5982\u679cmeta training set\u4e2d\u6ca1\u6709\u5411\u540e\u7684\u4efb\u52a1\uff0c\u90a3\u4e48meta learner\u5c31\u4e0d\u53ef\u80fd\u5b66\u4f1a\u5411\u540e\u7684policy\u3002\u8fd9\u4e00\u70b9\u662f\u5c24\u5176\u9700\u8981\u6ce8\u610f\u7684\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap20/#meta_learning_algorithms","title":"Meta Learning Algorithms","text":"<p>\u6211\u4eec\u8003\u8651\u5982\u4f55\u5b9e\u73b0\u4e0a\u9762\u7684meta learning\u3002\u5f53\u7136\uff0c\u524d\u63d0\u662f\u4f60\u5fc5\u987b\u6e05\u695ameta learning\u5728\u5e72\u4ec0\u4e48\uff01\u5982\u679c\u4e0d\u592a\u6e05\u695a\uff08\u8fd9\u5f88\u5408\u7406\uff0c\u56e0\u4e3a\u8fd9\u4e00\u6982\u5ff5\u66f4\u62bd\u8c61\u4e86\u4e00\u5c42\uff09\uff0c\u8bf7\u518d\u9605\u8bfb\u4e0a\u9762\u7684\u5185\u5bb9\uff08\u6216\u8005\u4e3a\u4ed3\u5e93\u63d0\u4ea4issue\uff09\u3002</p> <p>\u4e00\u4e2a\u5728DL\u4e2d\u7ecf\u5178\u7684\u65b9\u6cd5\u662f\uff0c\u6211\u4eec\u641e\u4e00\u4e2aRNN\uff0c\u628a \\(D_{\\text{train}}\\) \u91cc\u9762\u7684\u5bf9 \\((x,y)\\) \u4e00\u4e2a\u4e00\u4e2a\u8f93\u5165\u8fdb\u53bb\uff0c\u5e76\u4e14\u8ba9\u6700\u540e\u8f93\u51fa\u7684hidden state\u5c31\u662f \\(g_{\\phi}(D_{\\text{train}})\\) \u8fd9\u4e00\u6a21\u578b\u7684\u53c2\u6570\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c</p> \\[ g_{\\phi}(D_{\\text{train}})(x) = \\text{Model}_{\\text{RNN}_\\phi((x_1,y_1),(x_2,y_2),\\cdots)}(x) \\] <p>\u5176\u4e2d\uff0c \\(\\text{Model}\\) \u4ee3\u8868\u4e00\u4e2a\u666e\u901a\u7684\u6a21\u578b\uff08\u6bd4\u5982\u8bf4\uff0c\u56fe\u7247\u5206\u7c7b\u7684\u8bdd\u5c31\u53ef\u4ee5\u662f\u4e00\u4e2a\u5377\u79ef\u7f51\u7edc\uff0c\u800c\u5b83\u89d2\u6807\u4ee3\u8868\u7740RNN\u7684\u8f93\u51fahidden state\u521a\u597d\u5c31\u4f5c\u4e3a\u5b83\u7684\u53c2\u6570\uff09\u3002</p> <p>\u90a3\u4e48\uff0c\u5728RL\u91cc\uff0c\u6211\u4eec\u5e94\u8be5\u600e\u4e48\u505a\uff1f\u548c\u4e4b\u524d\u4e00\u6837\uff0c\u6700\u5927\u7684\u5dee\u522b\u5c31\u5728\u4e8e\uff0c\u5728RL\u4e2d\u8bad\u7ec3\u96c6\u4e0d\u662fgiven\u7684\uff0c\u800c\u662f\u9700\u8981\u6211\u4eec\u81ea\u5df1\u901a\u8fc7\u548c\u73af\u5883\u4ea4\u4e92\u6765\u83b7\u5f97\u3002\u6211\u4eec\u63a5\u4e0b\u6765\u63a2\u8ba8\u51e0\u4e2a\u601d\u8def\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap20/#meta_learning_as_a_multi-task_learning_problem","title":"Meta Learning as a Multi-task Learning Problem","text":"<p>\u4f60\u4e5f\u8bb8\u4f1a\u53d1\u73b0\u2014\u2014meta learning\u548cmulti-task learning\u6bd4\u8f83\u50cf\u3002\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2amulti-task learning\u7684\u7b97\u6cd5\uff0c\u6211\u4eec\u80fd\u5426\u7528\u8fd9\u4e2a\u7b97\u6cd5\u4f5c\u4e3a \\(g_\\phi\\)\uff0c\u6765\u505ameta learning\u5462\uff1f\u4f60\u4f1a\u53d1\u73b0\uff0c\u8fd9\u5f53\u7136\u662f\u53ef\u4ee5\u7684\u2014\u2014\u4f46\u662f\u8fd9\u5c31\u8fdd\u80cc\u4e86\u6211\u4eec\u7684\u521d\u5fc3\u3002\u597d\u6bd4\u8bf4\uff0c\u6211\u4eec\u5728DL\u7684meta learning\u91cc\u9762\uff0c\u53d6 \\(g_\\phi\\) \u4e3agradient descent\u4e00\u6837\u3002\u4f60\u770b\u90a3\u4e2a \\(\\phi\\) \u2014\u2014\u5b83\u7684\u610f\u601d\u662f\u8981\u6211\u4eec\u8bad\u4e00\u4e2a\u6a21\u578b\uff0c\u800c\u4e0d\u662f\u7528\u4e00\u4e9b\u4eba\u7c7b\u6307\u660e\u7684\u65b9\u6cd5\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u60f3\u5230\uff0c\u539f\u6765\u7684multi-task learning\u4e2d\u7684contextual policy\u53ef\u4ee5\u5199\u4e3a</p> \\[ \\pi_\\theta(a|s;\\omega) \\] <p>\u73b0\u5728\uff0cmeta learning\u548cmulti-task learning\u7684\u533a\u522b\u5c31\u662f\uff0c\u6211\u4eec\u7684 \\(\\omega\\) \u4e0d\u662f\u7ed9\u5b9a\u7684\uff0c\u800c\u662f\u9700\u8981\u4e00\u4e2a\u7f51\u7edc\uff08\u5c31\u662f \\(\\phi\\) \uff09\u4eceMDP\u4e2d\u63d0\u53d6\u51fa\u6765\u3002\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u7ed9\u51fa\u4e00\u79cd\u5b9e\u73b0\u65b9\u5f0f\uff1a</p> <ul> <li>\u5728\u4efb\u610f\u65f6\u523b\uff0c\u901a\u8fc7\u5386\u53f2\u4e0a\u7684\u6240\u6709transition \\((s,a,s',r)\\)\u7ecf\u8fc7RNN\uff0c\u5f97\u5230\u4e00\u4e2ahidden state \\(\\omega\\) \uff1b</li> <li>policy \\(\\pi_\\theta\\) \u8f93\u5165 \\(\\omega\\) \u548cstate \\(s\\) \uff0c\u8f93\u51faaction \\(a\\) \u3002</li> </ul> <p>\u901a\u8fc7\u8fd9\u6837\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u60f3\u50cf\uff1a\u5982\u679c\u6a21\u578b\u8db3\u591f\u597d\uff0c\u5b83\u5e94\u8be5\u53ef\u4ee5\u5b66\u4f1a\u6839\u636e\u5386\u53f2\u4e0a\u7684transition\u5b66\u4e60\u51fa\u73af\u5883\u7684\u4fe1\u606f\uff0c\u540c\u65f6\u89c4\u5212\u51faexploration\u7684\u65b9\u6848\u3002\u56e0\u6b64\uff0c\u8fd9\u4e00\u65b9\u6cd5\u7406\u8bba\u4e0a\u662f\u53ef\u884c\u7684\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u4e3e\u4e00\u4e2a\u4f8b\u5b50\uff1a\u8d70\u8ff7\u5bab\u3002RNN\u6709\u53ef\u80fd\u4f1a\u5b66\u4f1a\uff0c\u5bf9\u4e8e\u5386\u53f2\u4e0a\u5931\u8d25\u7684\u5c1d\u8bd5\uff0c\u5b83\u4e0d\u4f1a\u518d\u8d70\uff1b\u800c\u5bf9\u4e8ereward\u589e\u5927\u7684\u65b9\u5411\u5b83\u4f1a\u66f4\u591a\u5730\u63a2\u7d22\u3002\u8fd9\u4f3c\u4e4e\u63d0\u53d6\u51fa\u4e86\u201c\u8d70\u8ff7\u5bab\u201d\u95ee\u9898\u7684\u5171\u6027\uff0c\u56e0\u6b64\u786e\u5b9e\u662f\u4e00\u4e2a\u5408\u7406\u7684meta learning\u65b9\u6cd5\u3002\u9700\u8981\u6ce8\u610f\uff0c\u4e00\u4e2a\u91cd\u70b9\u5728\u4e8e\uff0chistory\u5305\u542b\u5168\u90e8\u7684trial-and-error\u7684\u5386\u53f2\uff0c\u800c\u975e\u53ea\u6709\u6700\u8fd1\u4e00\u4e2atrajectory\u3002\u8fd9\u6837\uff0c\u5373\u4f7f\u4e4b\u524d\u8d70\u9519\u4e86\u5bfc\u81f4episode end\uff0c\u8fd9\u4e00\u7ecf\u5386\u4e5f\u53ef\u4ee5\u88ab\u5229\u7528\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap20/#model-agnostic_meta_learning_maml","title":"Model-Agnostic Meta Learning (MAML)","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u7b97\u6cd5\uff0c\u8bf7\u53c2\u8003\u5b83\u7684\u539f\u59cb\u8bba\u6587\uff0c\u5177\u670912k\u5f15\u7528\u91cf\u3002\u5b83\u7684\u5e94\u7528\u8303\u56f4\u4e5f\u4e0d\u4ec5\u9650\u4e8eRL\uff0c\u4e5f\u53ef\u4ee5\u7528\u5728\u4e00\u822c\u7684meta learning\u9886\u57df\u3002</p> <p>\u5b83\u7684\u5173\u952e\u601d\u60f3\u662f\uff0c\u6211\u4eec\u80fd\u5426\u901a\u8fc7\u67d0\u79cd\"pretraining\"\u6765\u5b8c\u6210meta learning\uff1f\u6211\u4eec\u77e5\u9053\uff0c\u5728\u5f88\u5927\u7684\u6570\u636e\u96c6\u4e0a\u8bad\u7ec3\u7684\u6a21\u578b\uff08\u6bd4\u5982\uff0cLlama\uff09\uff0c\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730fine tune\u5230\u5404\u79cd\u9886\u57df\uff0c\u6bd4\u5982\u5199\u7a0b\u5e8f\uff0c\u505a\u9605\u8bfb\u9898\uff0c\u6216\u8005\u5199\u5e7f\u544a\u7b49\u7b49\uff0c\u65b9\u9762\u3002\u90a3\u4e48\uff0c\u6211\u4eec\u80fd\u5426\u5728meta learning\u4e2d\u4e5f\u8bad\u7ec3\u51fa\u6765\u4e00\u4e2a\u201c\u5e72\u7ec6\u80de\u201d\u4e00\u6837\u7684\u6a21\u578b\uff0c - \u5b83\u672c\u8eab\u5e76\u4e0d\u5728\u67d0\u4e2atask\u4e0a\u9762\u8868\u73b0\u7684\u5f88\u597d\uff1b - \u4f46\u662f\uff0c\u5bf9\u4e8e\u4efb\u4f55\u4e00\u4e2atask\uff0c\u53ea\u9700\u8981\u5f88\u5c11\u7684\u51e0\u4e2agradient step\uff0c\u5b83\u5c31\u53ef\u4ee5\u88abfine tune\u5230\u8fd9\u4e2atask\u4e0a\u9762\u8868\u73b0\u7684\u5f88\u597d\uff1f</p> <p>\u5982\u56fe\u6240\u793a\u3002</p> <p></p> <p>\u63a5\u4e0b\u6765\uff0c\u4e3a\u4e86\u7b80\u5355\u8ba8\u8bba\uff0c\u6211\u4eec\u53d6fine tune\u53ea\u5305\u542b\u4e00\u4e2agradient step\uff08\u8fd8\u662f\u4e4b\u524d\u8bf4\u7684\u90a3\u6837\uff0c\u6211\u4eec\u53ea\u662f\u505a\u4e00\u4e2a\u79d1\u666e\uff0c\u4f1a\u7565\u53bb\u5f88\u591a\u6280\u672f\u7ec6\u8282\uff09\u3002\u5728\u8fd9\u4e00\u6a21\u578b\u4e0b\uff0cmeta learner \\(g_\\phi\\) \u5c31\u662f\uff1a</p> \\[ g_\\phi(\\text{MDP}) = \\phi + \\alpha \\nabla_\\phi J(\\pi_\\phi;\\text{MDP}) \\] <p>\u5176\u4e2d \\(J_{\\text{MDP}}\\) \u5c31\u4ee3\u8868\u7740MDP\u4e0a\u9762\u7684cumulative reward objective\u3002\u63a5\u4e0b\u6765\uff0c\u5728meta training\u7684\u65f6\u5019\uff0c\u6211\u4eec\u8fd8\u8981\u518d\u505a\u4e00\u6b21gradient descent\uff1a</p> \\[ \\phi \\leftarrow \\phi + \\beta \\nabla_\\phi J_{\\text{meta}}(g_\\phi) = \\phi +  \\beta\\nabla_\\phi \\sum_{\\text{MDP}\\in D_{\\text{meta}}}J(\\pi_{\\phi + \\alpha \\nabla_\\phi J(\\pi_\\phi;\\text{MDP})};\\text{MDP}) \\] <p>\u8fd9\u4e2adouble grad\u5728\u5b9e\u73b0\u7684\u65f6\u5019\u4e5f\u662f\u4e00\u4e2a\u6280\u672f\u7ec6\u8282\uff0c\u4f46\u6211\u4eec\u6682\u65f6\u4e0d\u8003\u8651\u5b9e\u73b0\u7684\u65b9\u6cd5\u3002\u5b9e\u9a8c\u4e0a\uff0c\u4e0d\u7ba1\u662f\u5728\u666e\u901a\u7684image classification\u8fd8\u662fRL\u7684\u4efb\u52a1\u4e0a\uff0c\u90fd\u6709\u7740\u5f88\u597d\u7684\u6548\u679c\u3002\u6bd4\u5982\uff0c\u8fd8\u662f\u4e4b\u524d\u63d0\u5230\u7684\uff0c\u8ba9ant\u5728\u4e0d\u540c\u65b9\u5411\u8fd0\u52a8\uff0c\u8fd9\u6837\u7684\u4e00\u4e2a\u4efb\u52a1\uff1bMAML\u8bad\u7ec3\u4e4b\u540e\u7684ant\u5e73\u5747\u57fa\u672c\u4e0d\u52a8\uff0c\u53ea\u662f\u56db\u5904\u4e71\u8df3\uff1b\u4f46\u7ed9\u5b9a\u4efb\u4f55\u4e00\u4e2a\u4efb\u52a1\uff0c\u4ec5\u4e00\u4e2agradient step\u4e4b\u540e\uff0c\u5b83\u5c31\u53ef\u4ee5\u5411\u90a3\u4e2a\u65b9\u5411\u8dd1\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap20/#variational_inference_for_meta_rl","title":"Variational Inference for Meta RL","text":"<p>\u4f60\u53ef\u80fd\u4f1a\u5947\u602a\uff0cvariational inference\u548cmeta learning\uff0c\u8fd9\u4e24\u4e2a\u8bdd\u9898\u597d\u50cf\u5b8c\u5168\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\u3002\u7684\u786e\uff0c\u4e3a\u4e86\u5f15\u5165\u8fd9\u4e00\u65b9\u6cd5\uff0c\u6211\u4eec\u9700\u8981\u9996\u5148\u91cd\u65b0\u7ed9meta RL\u4e00\u4e2a\u65b0\u7684\u53d9\u8ff0\u3002</p> <p>Meta RL\u53ef\u4ee5\u662f\u4e00\u4e2aPOMDP\uff01\u5176\u5b9e\uff0c\u5728\u4ecb\u7ecd\u7b2c\u4e00\u4e2a\u65b9\u6cd5\uff08RNN\uff09\u7684\u65f6\u5019\uff0c\u4f60\u4e5f\u8bb8\u5c31\u5df2\u7ecf\u60f3\u5230\u4e86\u2014\u2014\u628a\u5386\u53f2\u4e0a\u7684\u6240\u6709transition\u653e\u5728\u4e00\u8d77\u8fc7RNN\uff0c\u8fd9\u5f88\u50cf\u6211\u4eec\u4e0a\u4e00\u8bb2\u4ecb\u7ecd\u7684\uff0c\u628aobservation\u653e\u5728\u4e00\u8d77\u5f53\u4f5chistory state\u3002\u7684\u786e\u2014\u2014\u6211\u4eec\u53ef\u4ee5\u628a\u6a21\u578b\u5904\u7406\u7684\u4efb\u52a1 \\(\\omega\\) \u4e5f\u5f53\u4f5cstate\u7684\u4e00\u90e8\u5206\uff0c\u800c\u8fd9\u4e00\u90e8\u5206\uff08\u548cmulti-task learning\u7684\u4e0d\u540c\uff09\u662f\u4e0d\u53ef\u4ee5\u89c2\u5bdf\u5230\u7684\u3002\u524d\u9762RNN\u7684\u5f15\u5165\uff0c\u5c31\u662f\u4e3a\u4e86\u628a\u8fd9\u4e00\u90e8\u5206\u7684\u4fe1\u606f\u63d0\u53d6\u51fa\u6765\u3002</p> <p>\u4f46\u662f\u5728POMDP\u91cc\u6211\u4eec\u8fd8\u6709\u53e6\u5916\u4e00\u4e2a\u9009\u62e9\uff01\u6211\u4eec\u53ef\u4ee5\u6784\u9020\u4e00\u4e2avariational\u7684state space model\uff0c\u653e\u5230\u8fd9\u91cc\u5c31\u662f</p> \\[ q\\left(\\omega _t | (s_1,a_1,r_1,s'_1),\\cdots,(s_t,a_t,r_t,s'_t)\\right) \\] <p>\u7136\u540e\uff0c\u6211\u4eec\u53ef\u4ee5\u540c\u65f6\u8bad\u7ec3\u8fd9\u4e2aVAE\u548c\u4e00\u4e2apolicy \\(\\pi(a|s;\\omega)\\) \uff0c\u5c31\u50cf\u6211\u4eec\u5728POMDP\u4e2d\u7684\u90a3\u6837\u3002\u8fd9\u6837\u7684\u65b9\u6cd5\u4e5f\u662f\u53ef\u884c\u7684\u3002\u4e00\u4e2a\u5c0f\u7684\u7ec6\u8282\u662f\uff0c\u6211\u4eec\u6ca1\u6709\u5fc5\u8981\u8bad\u7ec3\u4e00\u4e2afull VAE\u2014\u2014\u6211\u4eec\u53ea\u9700\u8981\u4e00\u4e2aencoder\uff0cELBO\u4e2d\u7684\u4e24\u9879\u6211\u4eec\u4e5f\u53ef\u4ee5\u4e22\u6389reconstruction loss\uff0c\u53ea\u4fdd\u7559KL penalty\u3002</p> <p>Q: \u80e1\u8bf4\u516b\u9053\uff01\u8fd9\u6837\uff0c\u4f60\u8fd9\u4e2a \\(q\\) \u96be\u9053\u4e0d\u4f1a\u53ea\u5b66\u51fa\u4e00\u4e2a\u5747\u5300\u9ad8\u65af\u5417\uff1f</p> <p>A: \u5e76\u975e\u5982\u6b64\u3002\u51b7\u9759\u4e00\u4e0b\uff0c\u4f60\u4f1a\u53d1\u73b0\uff0c\u6211\u4eec\u7684policy \\(\\pi\\) \u662f\u4f9d\u8d56\u4e8e \\(\\omega\\) \u7684\uff1b\u56e0\u6b64\uff0c\u5982\u679c \\(q\\) \u53ea\u5b66\u51fa\u4e00\u4e2a\u5747\u5300\u9ad8\u65af\uff0c\u90a3\u4e48policy\u7684loss\u4f1a\u5f88\u5927\u3002\u6211\u4eec\u53ef\u4ee5\u5408\u7406\u5730\u671f\u5f85\uff0cpolicy\u7684loss\u53ef\u4ee5\u5f88\u597d\u7684\u4f20\u64ad\u56de\u6765\uff0c\u4f7f\u5f97 \\(q\\) \u5b66\u4f1a\u63d0\u53d6\u51fa\u6709\u7528\u7684\u4fe1\u606f\u3002</p> <p>\u800c\u4e14\u53bb\u9664decoder\u5e76\u975e\u4e0d\u5408\u7406\u2014\u2014\u5047\u8bbe \\(\\omega\\) \u5305\u542b\u4e86\u8fd9\u4e2aMDP\u7684\u5168\u90e8\u6709\u6548\u4fe1\u606f\uff0cdecoder\u5e94\u8be5\u4e00\u5b9a\u53ef\u4ee5\u5b8c\u7f8e\u5730decode\u56de\u539f\u59cb\u6570\u636e\uff0c\u56e0\u4e3a\u5b83\u4eec\u90fd\u662f\u8fd9\u4e2aMDP\u4e2d\u7684transition\u3002\u56e0\u6b64\uff0c\u4e22\u5f03reconstruction term\u76f8\u5f53\u4e8e\u5047\u8bbe\u6211\u4eec\u6709\u4e00\u4e2a\u5b8c\u7f8e\u7684decoder\uff0c\u8fd9\u662f\u5b8c\u5168\u5408\u7406\u7684\u3002</p> <p>\u4f60\u4e5f\u8bb8\u4f1a\u95ee\uff0c\u8fd9\u4e00\u65b9\u6cd5\u548cRNN\u6ca1\u4ec0\u4e48\u5dee\u522b\u554a\u2014\u2014\u4f60\u73b0\u5728\u5728VAE\u91cc\u9762\u4e5f\u9700\u8981\u4e00\u4e2aRNN\u6765\u5904\u7406\u8fd9\u4e2asequential\u7684\u4fe1\u606f\u3002\u7684\u786e\uff0c\u5b83\u4eec\u7684\u601d\u60f3\u5f88\u76f8\u4f3c\uff1b\u4f46\u662f\uff0cVAE\u7684\u4f18\u52bf\u5728\u4e8e\uff0c \\(\\omega\\) \u662f\u6bd4\u8f83\u6709\u968f\u673a\u6027\u7684\u3002\u5bf9\u4e8e\u51b3\u5b9a\u6027\u7684\u65b9\u6cd5\uff0c\u6709\u53ef\u80fd\u51fa\u73b0\u6076\u6027\u5faa\u73af\uff1aRNN\u63d0\u53d6\u4fe1\u606f\u63d0\u53d6\u7684\u4e0d\u5bf9\uff0c\u5bfc\u81f4policy\u5b8c\u5168\u4e71\u641e\uff0c\u83b7\u5f97\u4e0d\u51fa\u6765\u4efb\u4f55\u6709reward\u7684action\uff0c\u8fd9\u53c8\u8fdb\u4e00\u6b65\u5bfc\u81f4RNN\u63d0\u53d6\u4e0d\u51fa\u6765\u4fe1\u606f\u3002\u800cVAE\u7684\u968f\u673a\u6027\u5c31\u4f7f\u5f97\u6211\u4eec\u66f4\u5bb9\u6613\u907f\u514d\u8fd9\u4e2a\u201c\u6b7b\u5c40\u201d\u3002</p> <p>\u4f5c\u4e3a\u5177\u4f53\u7684\u5b9e\u73b0\uff0cPEARL\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u4f8b\u5b50\u3002\u5982\u679c\u611f\u5174\u8da3\u53ef\u4ee5\u8fdb\u4e00\u6b65\u7814\u7a76\u5176\u5b9e\u73b0\u7ec6\u8282\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap20/#summary","title":"Summary","text":"<p>\u6700\u540e\uff0c\u6211\u4eec\u6765\u770b\u4e00\u770b\u524d\u9762\u4ecb\u7ecd\u5b8c\u7684\u4e09\u4e2ameta learning\u65b9\u6cd5\uff1a - \u7528RNN\u5b66\u4e60\u5386\u53f2\u6570\u636e\uff0c\u7528hidden state\u5f53\u4f5cpolicy\u7684parameterization\uff1b - MAML\uff1a\u8bad\u7ec3\u4e00\u4e2a\u201c\u5e72\u7ec6\u80de\u201d\uff0c\u53ef\u4ee5\u5f88\u5feb\u3001\u5f88\u597d\u5730\u201c\u5206\u5316\u201d\u5230\u5404\u79cdtask\u4e0a\uff1b - \u7528\u5386\u53f2\u6570\u636e\u5b66\u4e60\u51fa\u6765task latent variable \\(\\omega\\) \uff0c\u5e76\u8ba9policy condition on \\(\\omega\\) \u3002</p> <p>\u5b83\u4eec\u4e4b\u95f4\u5728\u5b9e\u8df5\u4e2d\u6709\u7740\u6bd4\u8f83\u5927\u7684\u533a\u522b\u3002\u6700\u5e38\u89c1\u3001\u597d\u7528\u7684\u65b9\u6cd5\u8fd8\u662fMAML\uff0c\u4f46\u5b83\u5f80\u5f80\u9700\u8981\u66f4\u591a\u7684\u8ba1\u7b97\u8d44\u6e90\uff1b\u76f8\u6bd4\u4e4b\u4e0b\uff0c\u7b2c\u4e00\u3001\u4e09\u65b9\u6cd5\u66f4\u5bb9\u6613overfit\uff08\u6211\u4eec\u8bf4\u7684\u662fmeta-overfit\uff01\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u7a0d\u5faeOOD\u7684test task\u5c31\u65e0\u6cd5\u4f53\u73b0\uff09\uff0c\u67d0\u79cd\u7a0b\u5ea6\u662f\u56e0\u4e3a\u5b83\u4eec\u90fd\u4f9d\u8d56\u4e8eRNN\u3002\u6b64\u5916\uff0c\u5b9e\u9a8c\u4e0a\u53d1\u73b0\uff0c\u7b2c\u4e00\u3001\u4e09\u65b9\u6cd5\u7684\u8bad\u7ec3\u8fc7\u7a0b\u4e5f\u66f4\u4e3a\u8270\u96be\uff0c\u4e5f\u8bb8\u8fd8\u662f\u56e0\u4e3aRNN\u7684\u4fe1\u606f\u4f20\u9012\u4e0d\u591f\u5145\u8db3\u3002</p> <p>\u4f46\u662f\uff0c\u53e6\u4e00\u65b9\u9762\uff0c\u4ece\u601d\u60f3\u4e0a\u8bf4\uff0c\u5b83\u4eec\u4e5f\u6ca1\u6709\u592a\u5927\u7684\u672c\u8d28\u5dee\u522b\u3002\u6211\u4eec\u5df2\u7ecf\u770b\u5230\uff0c\u7b2c\u4e00\u3001\u4e09\u65b9\u6cd5\u7684\u5dee\u522b\u5c31\u662flatent variable/hidden state\u662f\u5426\u4e3a\u968f\u673a\u5316\u7684\uff1b\u800cMAML\u53ef\u4ee5\u7406\u89e3\u4e3a\u7b2c\u4e00\u3001\u4e09\u65b9\u6cd5\u7684\u4e00\u79cd\u7279\u6b8a\u60c5\u51b5\uff0c\u7528\u68af\u5ea6\u4e0b\u964d\u4ee3\u66ffRNN\uff08\u8fd9\u8ba9\u6211\u60f3\u5230\u4e86TTT\uff01\u8bf7\u5ffd\u7565\u6211\u53d1\u7535\uff09\u3002</p> <p>meta-RL\u7684\u7814\u7a76\u6700\u524d\u6cbf\u5b9e\u9645\u4e0a\u5df2\u7ecf\u8fc8\u51fa\u4e86\u8ba1\u7b97\u673a\u79d1\u5b66\u7684\u9886\u57df\u3002\u4e00\u65b9\u9762\uff0c\u7814\u7a76\u8868\u660e\uff0cmeta-RL\u53ef\u4ee5\u770b\u5230\u903b\u8f91\u63a8\u7406\u7b49\u80fd\u529bemergent\u7684\u8ff9\u8c61\uff0c\u4e5f\u8bb8\u4ee3\u8868\u7740\u67d0\u79cd\u201c\u667a\u80fd\u201d\u7684\u8bde\u751f\uff1b\u53e6\u4e00\u65b9\u9762\uff0c\u8bb8\u591a\u7814\u7a76\u8868\u660e\uff0cmeta-RL\u4e5f\u53ef\u4ee5\u8bd5\u7740\u89e3\u91ca\u4eba\u7c7b\u5982\u4f55\u505a\u5230\u5b66\u4e60\u65b0\u7684\u77e5\u8bc6\u3001\u9002\u5e94\u65b0\u7684\u73af\u5883\u5982\u6b64\u8fc5\u901f\u3002\u751a\u81f3\u6709\u4e00\u4e9b\u751f\u7269\u5b66\u7814\u7a76\u8005\u63a8\u6d4b\uff0c\u4eba\u7684\u5927\u8111\u91cc\u4e13\u95e8\u6709\u7740\u7528\u6765\u8dd1\u5404\u79cdmeta-learning\u7b97\u6cd5\u7684\u533a\u57df\u3002\u4e5f\u8bb8\uff0c\u672a\u6765\u5c06\u5728\u8fd9\u91cc\u88ab\u6539\u53d8\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap20/#reference_papers","title":"Reference Papers","text":"<ol> <li>Domain-Adversarial Training of Neural Networks\uff08Domain Adversarial Training\uff09</li> <li>Off-Dynamics Reinforcement Learning: Training for Transfer with Domain Classifiers\uff08Domain Classifier\uff09</li> <li>EPOpt: Learning Robust Neural Network Policies Using Model Ensembles\uff08Randomization\uff09</li> <li>Learning to Achieve Goals</li> <li>Universal Value Function Approximators\uff08Goal-Conditioned Policies\uff09</li> <li>Hindsight Experience Replay</li> <li>Memory-based control with recurrent neural networks\uff08RNN for Meta Learning\uff09</li> <li>A Simple Neural Attentive Meta-Learner\uff08RNN for Meta Learning\uff09</li> <li>Model-Agnostic Meta-Learning for Fast Adaptation of Deep Networks\uff08MAML\uff09</li> <li>Meta-Reinforcement Learning of Structured Exploration Strategies</li> <li>Efficient Off-Policy Meta-Reinforcement learning via Probabilistic Context Variables\uff08Variational Inference for Meta RL\uff09</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/chap21/","title":"Challenges, Open Problems, and Philosophy","text":"<p>\u672c\u8bb2\u6ca1\u6709\u4ec0\u4e48\u7279\u522b\u591a\u7684\u77e5\u8bc6\u6027\u5185\u5bb9\uff0c\u4e3b\u8981\u662f\u4e00\u4e9b\u56de\u987e\u3001\u8ba8\u8bba\u548c\u4ecb\u7ecd\uff0c\u5927\u5bb6\u770b\u4e2a\u4e50\u5475\u3002\u5982\u679c\u4e0d\u611f\u5174\u8da3\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5728\u6b64\u7ed3\u675fCS285\u7684\u65c5\u7a0b\u4e86\uff01\ud83c\udf89\ud83c\udf89\ud83c\udf89</p>"},{"location":"Online%20CS%20Courses/CS285/chap21/#roadmap","title":"RoadMap","text":"<p>\u4e8c\u5341\u4e8c\u8bb2\uff0c\u6211\u4eec\u89c1\u4e86\u5f88\u591a\u2014\u2014\u662f\u65f6\u5019\u628a\u524d\u9762\u7684\u77e5\u8bc6\u603b\u7ed3\u8d77\u6765\u4e86\u3002\u5728PPT\u4e0a\u9762\uff0c\u6709\u4e00\u5f20\u6574\u4f53\u7684roadmap\uff1b\u800c\u6211\u4e5f\u6765\u753b\u4e00\u5f20\u81ea\u5df1\u7684\uff08\u5dee\u4e0d\u591a\u7684\uff09roadmap\u3002</p> <p></p> <p>\u5927\u4f53\u4e0a\u6765\u8bf4\uff0c\u77e5\u8bc6\u5206\u4e3a\u4e09\u4e2a\u90e8\u5206\uff1a\u201c\u4f20\u7edf\u201d\u7684RL\u65b9\u6cd5\uff0c\u5305\u62ecBehavior Cloning\uff0cPolicy Gradients, Value-based methods, Model-based methods\uff0c\u4ee5\u53ca\u5b83\u4eec\u884d\u751f\u51fa\u7684\u4f17\u591a\u65b9\u6cd5\uff0c\u8fd8\u6709exploration\u7684\u57fa\u672c\u65b9\u6cd5\u3002\u7136\u540e\u662f\u4e00\u4e9b\u65b0\u7684\u95ee\u9898\u9648\u8ff0\uff0c\u6bd4\u5982\u4e0d\u5141\u8bb8\u548c\u73af\u5883\u4ea4\u4e92\u7684offline RL\uff0c\u4e0d\u8981\u6c42\u6700\u4f18\u800c\u662f\u8981\u6c42\u6a21\u62df\u4eba\u7c7b\u7684soft optimality RL\uff0c\u53cd\u8fc7\u6765\u4ecedemo\u5b66\u4f1areward\u7684IRL\uff0c\u4ee5\u53catransfer learning\u548cmeta learning\u3002\u6700\u540e\uff0c\u662f\u5e94\u7528\uff0c\u8fd9\u91cc\u4e3e\u4e86\u4e00\u4e2a\u4ee3\u8868\u6027\u7684\u4f8b\u5b50\u2014\u2014RL\u5e94\u7528\u4e8eLLM\u3002\u5f53\u7136\uff0c\u7ec6\u8282\u90fd\u6ca1\u6709\u5728\u8fd9\u5f20\u56fe\u4e0a\u51fa\u73b0\u3002</p> <p>\u5b66\u4e60\u4e86\u5982\u6b64\u4e4b\u591a\uff0c\u4e5f\u8bb8\u6211\u4eec\u4f1a\u89c9\u5f97\u6211\u4eec\u53ef\u4ee5\u89e3\u51b3\u5f88\u591aRL\u95ee\u9898\u4e86\u3002\u4f46\u5b9e\u9645\u4e0a\uff0c\u8fd8\u6709\u5f88\u591a\u6311\u6218\u6211\u4eec\u4f1a\u9762\u5bf9\u3002\u5b83\u4eec\u4e00\u822c\u5206\u4e3a\u4e24\u7c7b\uff1a</p> <ul> <li>algorithm challenge:\u4f60\u7684\u7b97\u6cd5\u6536\u655b\u5417\uff1f\u591a\u957f\u65f6\u95f4\u6536\u655b\uff1f\u9700\u8981\u8d39\u529b\u8c03\u8d85\u53c2\u5417\uff1f\u548c\u73af\u5883\u8fdb\u884c\u591a\u5c11\u6b21\u4ea4\u4e92\uff1f\u53c8\u80fd\u4e0d\u80fd\u5f88\u5febgeneralize\u5230\u65b0\u7684MDP\uff1f\u2026\u2026</li> <li>assumption challenge:\u4f60\u7684\u7b97\u6cd5\u7b26\u5408\u5b9e\u9645\u5417\uff1f<ul> <li>\u4efb\u4f55\u4e00\u4e2a\u4efb\u52a1\u5fc5\u987b\u6709\u4eba\u7684\u4ecb\u5165\uff0c\u5426\u5219RL agent\u5c31\u4e0d\u77e5\u9053\u8be5\u505a\u4ec0\u4e48\u3002\u4f46\u4eba\u7684\u4ecb\u5165\u53c8\u591a\u79cd\u65b9\u5f0f\uff1a<ul> <li>\u4eba\u8bbe\u8ba1\u4e00\u4e2areward function\uff08\u6bd4\u5982<code>gym</code>\u7684\u90a3\u4e9b\u73af\u5883\uff0c\u90fd\u662f\u4eba\u4e3a\u8bbe\u8ba1\u7684reward function\uff09\uff1b</li> <li>\u4eba\u63d0\u4f9b\u4e00\u4e9bdemo\uff08\u6bd4\u5982behavior cloning\uff09\uff1b</li> <li>\u8fd8\u6709\u6211\u4eec\u4ece\u6765\u6ca1\u6709\u8ba8\u8bba\u8fc7\u7684\u3002\u6bd4\u5982\uff0c\u53ef\u4e0d\u53ef\u4ee5\uff0c\u4eba\u5bf9\u4e8e\u4e24\u6bb5agent\u7684demo\u7ed9\u51fapreference\uff1f\u4eba\u7c7b\u548c\u52a8\u7269\u90fd\u53ef\u4ee5\u8fd9\u6837\u5b66\u4e60\u554a\uff01</li> <li>\u518d\u6bd4\u5982\uff0c\u7ed9agent\u4e00\u4e9b\u63cf\u8ff0\u76ee\u6807\u7684\u8bed\u8a00\u548c\u56fe\u50cf\u7684\u4fe1\u606f\uff1f</li> </ul> </li> </ul> </li> </ul> <p>\u6211\u4eec\u63a5\u4e0b\u6765\u5bf9\u8fd9\u4e9b\u6311\u6218\u4e00\u4e00\u6765\u8ba8\u8bba\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap21/#stability","title":"Stability","text":"<p>\u8fd9\u4e0d\u5fc5\u591a\u8bf4\u2014\u2014\u6211\u4eec\u90fd\u77e5\u9053\uff0cRL\u7684\u7b97\u6cd5\u662f\u4ee5\u4e0d\u7a33\u5b9a\u8457\u79f0\u7684\u3002\u6bd4\u5982\uff0cQ learning\u6ce8\u5b9a\u4e0d\u80fd\u4fdd\u8bc1\u6536\u655b\uff1b\u800cpolicy gradient\u6ce8\u5b9a\u5177\u6709\u5f88\u5927\u7684\u65b9\u5dee\u3002\u8fd9\u4e0d\u503c\u5f97\u9057\u61be\u6216\u60cb\u60dc\u2014\u2014\u4eba\u751f\u96be\u9053\u4e0d\u662f\u4e5f\u662f\u5982\u6b64\u5417\uff1f</p> <p>\u4f46\u662f\uff0c\u4e86\u89e3\u5b83\u4eec\u4e0d\u7a33\u5b9a\u7684\u6839\u6e90\u662f\u91cd\u8981\u7684\u3002\u6211\u4eec\u6765\u56de\u987e\u4e00\u4e0b\uff1a</p> <ul> <li>Q learning\uff1a\u4e0d\u7a33\u5b9a\u7684\u6765\u6e90\u662f\uff0cfit Q\u503c\u4e0d\u4e00\u5b9a\u80fd\u4fdd\u8bc1\u5b8c\u5168\u51c6\u786e\uff0c\u800c\u662f\u505a\u4e00\u4e2a\u6295\u5f71\u3002\u8fd9\u770b\u4f3c\u5f88\u5c0f\u7684bias\u5bfc\u81f4\u6a21\u578b\u65e0\u6cd5\u80af\u5b9a\u5730\u6536\u655b\u3002</li> <li>Policy Gradient\uff1a\u548cQ learning\u4e0d\u540c\uff0cpolicy gradient\u57fa\u4e8e\u4e25\u683c\u7684\u6570\u5b66\u63a8\u5bfc\u7ed9\u51fa\u7684objective\uff0c\u56e0\u6b64\u7406\u8bba\u4e0a\u53ef\u4ee5\u6536\u655b\uff0c\u4e5f\u6ca1\u6709bias\uff1b\u4f46\u662f\uff0c\u5b83\u7684\u65b9\u5dee\u5f88\u5927\uff0c\u56e0\u4e3a\u5b83\u662f\u57fa\u4e8esample\u7684\u3002\u867d\u7136\u53ef\u4ee5\u589e\u5927batch size\uff0c\u4f7f\u7528baseline\uff0c\u4f46\u662f\u7406\u8bba\u4e0a\u4e3a\u4e86\u7a33\u5b9a\u8fd8\u662f\u9700\u8981exponentially large\u7684sample\u6570\u76ee\uff08\u8fd9\u4e2a\u8bba\u8bc1\u6211\u4eec\u6ca1\u6709cover\uff09\u3002</li> <li>model-based\uff1a\u4f60\u53ef\u80fd\u4f1a\u5947\u602a\uff0c\u4e3a\u4f55model-based\u4e5f\u4e0d\u6536\u655b\uff1f\u6309\u7167\u9053\u7406\uff0c\u5efa\u7acbmodel\u7684\u8fc7\u7a0b\u662f\u4e00\u4e2a\u666e\u901a\u7684DL\u4e2d\u5b66\u4e60\u5206\u5e03\u7684\u95ee\u9898\uff0c\u800c\u5efa\u7acbmodel\u4e4b\u540e\u6211\u4eec\u53ef\u4ee5\u65e0\u9650\u91c7\u6837\uff0c\u56e0\u6b64\u4e5f\u80fd\u4fdd\u8bc1\u6536\u655b\u3002\u4f46\u662f\uff0c\u5b9e\u9645\u4e0a\u7684\u95ee\u9898\u6709\u4e9b\u5c34\u5c2c\u2014\u2014\u6ca1\u6709policy\u5c31\u6ca1\u529e\u6cd5\u91c7\u6837\uff0c\u4e5f\u6ca1\u529e\u6cd5\u8bad\u7ec3model\u3002\u800c\u4e14\uff0c\u6211\u4eec\u5e0c\u671bmodel\u8bad\u7ec3\u7684transition\u548c\u6211\u4eec\u7684policy\u662f\u76f8\u5173\u7684\u3002\u8fd9\u5c31\u5bfc\u81f4\uff0c\u6211\u4eec\u5728\u6700\u540e\u7684\u7b97\u6cd5\u4e2d\u4ea4\u66ff\u8bad\u7ec3model\u548cpolicy\uff0c\u4ece\u800c\u5bfc\u81f4\u4e86\u4e0d\u7a33\u5b9a\u3002<ul> <li>\u66f4\u4e25\u91cd\u7684\u4e00\u4e2a\u95ee\u9898\u6211\u4eec\u4e4b\u524d\u4e5f\u63d0\u5230\u8fc7\uff0cpolicy\u5f88\u5f3a\uff0c\u56e0\u6b64policy\u559c\u6b22\u201c\u5229\u7528\u201dmodel\u4e2d\u4e0d\u8be5\u6709\u7684\u6781\u5927\u503c\uff08\"erroneous maxima\"\uff09\uff0c\u7136\u540e\u628a\u8bad\u7ec3\u8fc7\u7a0b\u641e\u5f97\u4e00\u56e2\u7cdf\u3002\u8fd9\u5c31\u662f\u201c\u4e0a\u6881\u4e0d\u6b63\u4e0b\u6881\u6b6a\u201d\uff0c\u4e5f\u662fmodel-based\u5e26\u6709\u4e00\u4e1dadvarsial attack\u7684\u6210\u5206\u9020\u6210\u7684\u3002</li> </ul> </li> </ul> <p>\u90a3\u4e48\uff0c\u4f60\u53ef\u80fd\u4f1a\u95ee\uff0c\u8c03\u8282\u8d85\u53c2\u6570\u6709\u5e2e\u52a9\u5417\uff1f\u4f60\u4f1a\u53d1\u73b0\uff0c\u4f3c\u4e4e\u5728\u4f5c\u4e1a\u91cc\uff0c\u6211\u4eec\u57fa\u672c\u6ca1\u6709\u8c03\u8282\u8d85\u53c2\u6570\u7684\u8fc7\u7a0b\uff0c\u548cDL\u5f62\u6210\u5f88\u9c9c\u660e\u7684\u5bf9\u6bd4\u3002\u8fd9\u662f\u56e0\u4e3aRL\u7684\u8d85\u53c2\u6570\u8c03\u8282\u662f\u4e00\u4e2a\u975e\u5e38\u56f0\u96be\u7684\u95ee\u9898\uff0c\u8d85\u53c2\u6570\u5bf9\u7b97\u6cd5\u7684\u5f71\u54cd\u4e5f\u4e0d\u50cfDL\u91cc\u90a3\u6837\u7684\u660e\u786e\u3002\u5176\u5b9e\uff0c\u5f52\u6839\u7ed3\u5e95\u8fd8\u662f\u56e0\u4e3a\uff0cRL\u7684\u7b97\u6cd5\u5927\u591a\u6570\u672c\u8eab\u4e0d\u6536\u655b\uff0c\u56e0\u6b64\u8d85\u53c2\u6570\u7684\u8c03\u8282\u5b9e\u9645\u4e0a\u4f5c\u4e3a\u4e00\u79cd\u201c\u4fee\u8865\u201d\uff0c\u8bd5\u7740\u628a\u5b83\u201c\u4fee\u201d\u5f97\u6536\u655b\uff0c\u8fd9\u5f53\u7136\u5f88\u56f0\u96be\u3002</p> <p>\u8fd9\u91cc\u4e5f\u6709\u4e00\u4e2aside question\uff1a\u4eba\u4eec\u5176\u5b9e\u4e00\u76f4\u4e0d\u77e5\u9053\uff0c\u4e3a\u4ec0\u4e48DL\u7684\u6a21\u578b\u4e0d\u4f1a\u4e25\u91cd\u5730overfit\uff1f\u56e0\u4e3aDL\u7684\u6a21\u578b\u53c2\u6570\u8fdc\u591a\u4e8e\u6570\u636e\u91cf\uff0c\u6309\u9053\u7406\u5e94\u8be5\u5177\u6709\u5728\u8bad\u7ec3\u6570\u636e\u96c6\u4e0a\u5f88\u5feboverfit\u7684\u80fd\u529b\u3002</p> <p>\u6ca1\u6709\u4eba\u77e5\u9053\u4e3a\u4ec0\u4e48\uff1b\u4f46\u53ef\u4ee5\u60f3\u5230\uff0c\u8fd9\u7b49\u6548\u7684\u4ee3\u8868\u7740\uff0c\u5de8\u5927\u7684\u795e\u7ecf\u7f51\u7edc\u7ed3\u5408\u4e0aSGD\uff0c\u53ef\u4ee5\u8d77\u5230\u67d0\u79cd\u9b54\u6cd5\u822c\u7684\u201c\u7ea6\u675f\u201d\u7684\u4f5c\u7528\u3002\u90a3\u4e48\uff0c\u6211\u4eec\u80fd\u5426\u7406\u89e3\u8fd9\u6837\u7684\u201c\u9b54\u6cd5\u201d\uff0c\u5e76\u628a\u5b83\u5e94\u7528\u5230RL\u91cc\u9762\uff0c\u4f7f\u5f97\u8bad\u7ec3\u66f4\u52a0\u7a33\u5b9a\uff1f\u6bd4\u5982\uff0c\u5982\u679c\u6211\u4eec\u628a\u795e\u7ecf\u7f51\u7edc\u53d8\u5f97\u7279\u522b\u5927\uff0c\u662f\u5426\u4f1a\u6709\u5e2e\u52a9\uff1f\u8fd9\u4e9b\u90fd\u662fopen question\uff0c\u7b49\u5f85\u7740\u4eba\u4eec\u7684\u89e3\u7b54\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap21/#sample_efficiency","title":"Sample Efficiency","text":"<p>\u6211\u4eec\u6765\u6bd4\u8f83\u4e00\u4e0bRL\u4e0d\u540c\u65b9\u6cd5\u4e2d\u7684sample efficiency\uff0c\u4ece\u5c0f\u5230\u5927\uff1a - gradient free methods\uff1a\u5176\u5b9e\u6211\u4eec\u751a\u81f3\u6ca1\u6709\u4ecb\u7ecd\u8fd9\u4e00\u7c7b\u65b9\u6cd5\uff0c\u5b83\u4eec\u662fRL\u6700\u539f\u59cb\u7684\u5c1d\u8bd5\uff0c\u4e0d\u9700\u8981\u68af\u5ea6\u4e0b\u964d\u3002\u5b83\u4eec\u7684\u601d\u60f3\u662f\u501f\u9274\u201c\u81ea\u7136\u9009\u62e9\u201d\u7684\u7406\u5ff5\uff0c\u8ba9\u591a\u4e2aagent\u4f18\u80dc\u52a3\u6c70\uff0c\u4e0d\u65ad\u201c\u8fdb\u5316\u201d\u3002\u53ef\u4ee5\u60f3\u8c61\u5230\uff0c\u8fd9\u79cd\u65b9\u6cd5\u7684sample efficiency\u662f\u6700\u4f4e\u7684\u3002\u4e00\u4e2a\u5178\u578b\u7684\u91cf\u7ea7\uff08\u6bd4\u5982Cheetah\u73af\u5883\uff09\u662f \\(10^8\\) \u6b21\u4ea4\u4e92\uff0c\u4e5f\u5c31\u662f \\(10^6\\) \u4e2aepisode\u3002\u5bf9\u5e94\u5230\u771f\u5b9e\u65f6\u95f4\uff0c\u8fd9\u5927\u6982\u662f15\u5929\u3002 - fully on-policy policy gradients\uff1a\u6700\u539f\u59cb\u7684policy gradient\u65b9\u6cd5\uff0c\u6bd4\u5982A3C\uff08\u8fd9\u4e2a\u6211\u4eec\u4e5f\u6ca1\u6709\u4ed4\u7ec6\u4ecb\u7ecd\uff0c\u5b83\u662f\u5c06Actor Critic\u65b9\u6cd5\u8fdb\u884c\u5e76\u884c\u7684\u65b9\u6cd5\uff0c\u611f\u5174\u8da3\u53ef\u4ee5\u53c2\u8003\u8fd9\u7bc7\u8bba\u6587\uff09\u3002\u8fd9\u4e2a\u65b9\u6cd5\u7684\u91cf\u7ea7\u5927\u6982\u662f \\(10^7\\) \u6b21\u4ea4\u4e92\uff0c\u4e5f\u5c31\u662f \\(10^5\\) \u4e2aepisode\u3002\u4f46\u662f\uff0c\u503c\u7684\u4e00\u63d0\u7684\u662f\uff0c\u5b83\u53ef\u4ee5\u9ad8\u6548\u5730\u5e76\u884c\uff0c\u56e0\u6b64\u4e0d\u4e00\u5b9a\u9700\u8981\u82b1\u7279\u522b\u957f\u7684\u65f6\u95f4\uff0c\u53ea\u8981\u4f60\u6709\u5145\u8db3\u7684\u7b97\u529b\u3002 - advanced policy gradients\uff1a\u57fa\u4e8eTRPO\u548cPPO\u7684\u65b9\u6cd5\u53ef\u4ee5\u51cf\u5c11\u7b97\u6cd5\u7684\u201con policy\u7a0b\u5ea6\u201d\uff0c\u8fdb\u800c\u63d0\u9ad8sample efficiency\u3002\u8fd9\u4e2a\u65b9\u6cd5\u7684\u91cf\u7ea7\u5927\u6982\u662f \\(10^6\\) \u6b21\u4ea4\u4e92\uff0c\u4e5f\u5c31\u662f \\(10^4\\) \u4e2aepisode\u3002 - replay buffer-based method\uff1a\u6bd4\u5982\u8bf4Q-learning\u6216\u8005SAC\uff0c\u8fd9\u4e9boff-policy\u7684\u65b9\u6cd5\u53ef\u4ee5\u5229\u7528replay buffer\uff0c\u8fdb\u800c\u63d0\u9ad8sample efficiency\u3002\u8fd9\u4e2a\u65b9\u6cd5\u7684\u91cf\u7ea7\u5927\u6982\u662f \\(10^5\\) \u6b21\u4ea4\u4e92\uff0c\u4e5f\u5c31\u662f \\(10^3\\) \u4e2aepisode\u3002\u5bf9\u4e8eSAC\u7b49\u65b9\u6cd5\uff0c\u4e00\u4e2a\u5178\u578b\u7684\u6982\u5ff5\u662f\uff0c\u89e3\u51b3real world\u7684\u4efb\u52a1\uff08\u4e0d\u662f\u901a\u8fc7\u6a21\u62df\u5668\uff09\uff0c\u53ea\u9700\u8981\u51e0\u4e2a\u5c0f\u65f6\u5c31\u591f\u4e86\u3002 - model-based method\uff1a\u8fd9\u4e9b\u65b9\u6cd5\u7684\u91cf\u7ea7\u5927\u6982\u662f \\(10^4\\) \u6b21\u4ea4\u4e92\uff0c\u4e5f\u5c31\u662f \\(10^2\\) \u4e2aepisode\u3002 - \u8fd8\u6709\u4e00\u4e9b\u6211\u4eec\u6ca1\u6709\u4ecb\u7ecd\u7684\uff0c\u66f4\u4e13\u6ce8\u4e8esample efficiency\u7684\u65b9\u6cd5\u7684model-based\u65b9\u6cd5\u3002\u6700\u5f3a\u7684\u65b9\u6cd5\u53ef\u4ee5\u572820\u5206\u949f\u5185\u5b8c\u6210\u4e00\u4e2a\u771f\u5b9e\u4e16\u754c\u7684\u4efb\u52a1\uff0c\u6bd4\u5982\u5f00\u95e8\u3002</p> <p>\u4e00\u4e2a\u795e\u5947\u7684\u4e8b\u60c5\u662f\uff0c\u4f3c\u4e4e\u6bcf\u5411\u4e0b\u8d70\u4e00\u5c42\uff0csample efficiency\u90fd\u63d0\u9ad8\u4e86\u4e00\u4e2a\u91cf\u7ea7\u3002\u8fd9\u5f88\u5229\u4e8e\u6211\u4eec\u5bf9\u5e38\u89c1\u7684\u7b97\u6cd5\u9700\u8981\u7684\u7528\u65f6\u6709\u4e00\u57fa\u7840\u6982\u5ff5\u3002</p> <p>\u5f53\u7136\uff0c\u4f60\u4e5f\u8bb8\u4f1a\u95ee\uff0c\u4e3a\u4ec0\u4e48\u6211\u4eec\u8fd8\u4f1aprefer\u90a3\u4e9b\u6ca1\u6709\u90a3\u4e48sample-efficient\u7684\u65b9\u6cd5\u5462\uff1f\u539f\u56e0\u6709\u5f88\u591a\uff0c\u6bd4\u5982\uff0c\u90a3\u4e9b\u65b9\u6cd5\u4e5f\u8bb8\u53ef\u4ee5\u9ad8\u5ea6\u5e76\u884c\uff1b\u6216\u8005\uff0c\u5b83\u4eec\u9700\u8981\u66f4\u5c11\u7684\u7b97\u529b\u3002\u6bd4\u5982\uff0cgradient-free method\u7684\u8ba1\u7b97\u91cf\u8fdc\u8fdc\u5c0f\u4e8emodel-based\u65b9\u6cd5\uff0c\u540e\u8005\u8981\u5b58\u50a8\u4e24\u4e2a\u795e\u7ecf\u7f51\u7edc\u5728\u663e\u5b58\u91cc\u5e76\u5bf9\u5b83\u4eec\u505a\u591a\u8f6e\u68af\u5ea6\u4e0b\u964d\u3002</p> <p>\u4e0d\u8fc7\u4e0d\u7ba1\u5982\u4f55\uff0c\u5728\u548c\u5b9e\u9645\u73af\u5883\u8fdb\u884c\u4ea4\u4e92\u7684\u95ee\u9898\u91cc\uff0c\u6211\u4eec\u8fd8\u662f\u66f4\u559c\u6b22sample efficient\u7684\u65b9\u6cd5\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap21/#generalization","title":"Generalization","text":"<p>\u65e9\u5728\u4e00\u5f00\u59cb\u7684Preliminaries\uff0c\u6211\u4eec\u5c31\u4ece\u7ed3\u679c\u4e0a\u5bf9\u6bd4\u4e86RL\u548cDL\u7684\u4e00\u4e2a\u91cd\u8981\u533a\u522b\u3002\u4f46\u662f\uff0c\u5f53\u65f6\u6211\u4eec\u8fd8\u4e0d\u592a\u6e05\u695aRL\u7a76\u7adf\u5728\u5e72\u4ec0\u4e48\u3002\u73b0\u5728\uff0c\u6211\u4eec\u56de\u60f3\u4e00\u4e0b\u6211\u4eec\u5904\u7406RL\u95ee\u9898\u7684\u7ecf\u5386\uff0c\u4f1a\u53d1\u73b0\uff0cDL\u548cRL\u4ece\u7ed3\u679c\u4e0a\u6765\u770b\u7684\u5de8\u5927\u5dee\u5f02\u8fd8\u5305\u62ec\u53e6\u5916\u4e00\u70b9\uff1a - DL\u7684\u6a21\u578b\u867d\u7136\u53ea\u662f\u4e3a\u4e86\u62df\u5408\u6570\u636e\uff0c\u4f46\u5b83\u4eec\u7684\u8bc4\u4f30\u65b9\u6cd5\u5f3a\u8c03generalize\u3002\u6ca1\u6709\u4eba\u5173\u6ce8\u4f60\u7684\u6a21\u578b\u5728\u8bad\u7ec3\u96c6\u7684loss\u662f0.01\u8fd8\u662f0.0001\uff0c\u4eba\u4eec\u53ea\u770b\u4f60\u7684\u6a21\u578b\u5728\u6d4b\u8bd5\u96c6\u4e0a\u7684\u8868\u73b0\u3002 - \u800c\u53e6\u4e00\u65b9\u9762\uff0c\u867d\u7136\u6211\u4eec\u8bf4RL\u7684\u95ee\u9898\u5904\u7406\u7684\u4efb\u52a1\u66f4\u52a0\u56f0\u96be\uff0c\u6ca1\u6709\u6807\u51c6\u7b54\u6848\uff0c\u4f46\u662fRL\u7684\u8bc4\u4f30\u6807\u51c6\u5f3a\u8c03mastery\uff0c\u4e5f\u5c31\u662f\u628a\u4e00\u4ef6\u4e8b\u60c5\u505a\u7684\u591a\u597d\u3002\u4ece\u7ecf\u5386\u4e0a\u6211\u4eec\u4e5f\u53ef\u4ee5\u53d1\u73b0\uff0c\u6211\u4eec\u53ea\u5173\u5fc3agent\u80fd\u5728\u73af\u5883\u91cc\u80fd\u5237\u5230\u591a\u5c11cumulative reward\u3002</p> <p>\u6709\u4eba\u4f1a\u95ee\uff0cRL\u7684generalization\u5462\uff1f\u6211\u4eec\u4e0d\u5f97\u4e0d\u627f\u8ba4\uff0c\u6211\u4eec\u5f88\u96be\u628a\u4e00\u4e2aMDP\u4e0a\u9762\u7684\u6a21\u578b\u5e94\u7528\u5230\u53e6\u5916\u4e00\u4e2aMDP\u4e0a\u3002\u4e3a\u4ec0\u4e48\u4f1a\u8fd9\u6837\uff1f</p> <p>\u6709\u4eba\u8bf4\uff0c\u6211\u4eec\u52a0\u5927\u6570\u636e\u7684\u91cf\uff01\u4f46\u662f\u5728RL\u91cc\u8fd9\u53ea\u4e0d\u8fc7\u662f\u4e00\u4e2a\u7a7a\u7684\u53e3\u53f7\uff0c\u56e0\u4e3a\u6570\u636e\u662f\u548c\u73af\u5883\u4ea4\u4e92\u4ea7\u751f\u7684\uff0c\u662f\u6211\u4eec\u81ea\u5df1\u6536\u96c6\u7684\u3002\u4e5f\u5c31\u662fRL\u7684\u8fd9\u4e00\u95ee\u9898\u9648\u8ff0\u7684\u6839\u57fa\u51b3\u5b9a\u4e86\u6211\u4eec\u5f88\u96be\u50cfDL\u90a3\u6837\uff0c\u901a\u8fc7\u589e\u5927\u6570\u636e\u91cf\u6765\u63d0\u9ad8generalization\uff0c\u5982\u56fe\u6240\u793a\u3002</p> <p></p> <p>\u4ece\u53e6\u4e00\u4e2a\u89d2\u5ea6\u770b\uff0c\u6211\u4eec\u4e5f\u5e76\u4e0d\u662f\u4ec0\u4e48\u529e\u6cd5\u90fd\u6ca1\u6709\u3002\u6bd4\u5982\uff0c\u5bf9\u4e8eoffline RL\u7684\u7814\u7a76\u4f7f\u5f97\u6211\u4eec\u53ef\u4ee5\u91cd\u590d\u5229\u7528\u65e7\u7684\u6570\u636e\u3002\u6ca1\u51c6\u5728\u4e0d\u4e45\u7684\u5c06\u6765\uff0c\u4eba\u4eec\u5c31\u53ef\u4ee5\u5c06\u5404\u4e2aMDP\u7684\u6570\u636e\u653e\u5728\u4e00\u8d77\u4e5f\u5f62\u6210\u4e00\u4e2a\u50cfImageNet\u6216\u8005Common Crawl\u8fd9\u6837\u7684\u6570\u636e\u96c6\uff0c\u5e76\u4ece\u4e0a\u9762\u7528offline RL\u8bad\u7ec3\u51fa\u6765\u4e00\u4e2a\u901a\u7528\u7684agent\u3002\u5f53\u7136\uff0c\u5728\u73b0\u5728\uff0c\u8fd9\u4e00\u95ee\u9898\u8fd8\u8fdc\u8d85\u6211\u4eec\u7684\u9884\u671f\u3002</p> <p>\u518d\u6bd4\u5982\uff0c\u5c31\u5982\u6211\u4eec\u5728\u7b2c22\u8bb2\u4ecb\u7ecd\u7684\u90a3\u6837\uff0ctransfer learning\u548cmeta learning\u4e5f\u8bb8\u53ef\u4ee5\u5e2e\u52a9\u6211\u4eec\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\u3002\u5b83\u4eec\u4f5c\u4e3a\u65b0\u5174\u7684\u9886\u57df\uff0c\u4e5f\u6b63\u5728\u9ad8\u901f\u5730\u53d1\u5c55\u5e76\u53d6\u5f97\u6210\u5c31\u3002</p> <p>\u4f46\u6709\u4eba\u4e5f\u8bb8\u4f1a\u8bf4\uff0c\u6211\u4eec\u5e94\u8be5\u77e5\u8db3\u4e86\u2014\u2014\u4e00\u4e2aMDP\u5728RL\u91cc\u5c31\u662f\u4e00\u4e2a\u4efb\u52a1\uff0c\u4f60\u8981\u6c42\u5728MDP\u4e0a\u8fd8\u80fdgeneralize\uff0c\u5c31\u597d\u50cf\u8981\u6c42NLP\u7684\u6a21\u578bgeneralize\u5230CV\u4e0a\u4e00\u6837\u3002\u8fd9\u4e5f\u8bb8\u6709\u4e9b\u9053\u7406\uff0c\u4f46\u4f5c\u4e3a\u6709\u7740\u4fe1\u4ef0\u7684\u7814\u7a76\u8005\uff0c\u6211\u4eec\u5e94\u8be5\u610f\u8bc6\u5230RL\u80cc\u8d1f\u7740\u6bd4DL\u66f4\u6df1\u523b\u7684\u91cd\u4efb\uff1a\u5b83\u7684\u76ee\u6807\u6700\u7ec8\u662f\u901a\u5411\u4e00\u4e2a\u50cf\u4eba\u7c7b\u4e00\u6837\u7684\u667a\u80fd\u4f53\u3002\u4e8b\u5b9e\u8bc1\u660e\uff0c\u6211\u4eec\u8fd8\u6709\u5f88\u957f\u7684\u8def\u8981\u8d70\uff1a\u73b0\u5728\uff0c\u6211\u4eec\u53ef\u4ee5\u75286\u5c0f\u65f6\u7684\u8bad\u7ec3\u8ba9\u4e00\u4e2a\u673a\u5668\u4eba\u4e0a\u5b66\u4f1a\u5954\u8dd1\uff0c\u4f46\u53ea\u80fd\u5728\u4e00\u4e2a\u65e0\u9650\u5927\u7684\u5e73\u9762\u4e0a\u3002\u771f\u5b9e\u4e16\u754c\u662f\u5982\u6b64\u590d\u6742\uff0c\u811a\u4e0b\u6709\u5404\u5f0f\u5404\u6837\u7684\u5730\u8c8c\uff0c\u4e0a\u7a7a\u6709\u98ce\u5439\u96e8\u6dcb\uff0c\u8fd9\u4e00\u5207\u90fd\u4f3c\u4e4e\u4e0d\u5f71\u54cd\u4e00\u4e2a\u51e0\u4e2a\u6708\u7684\u5a74\u513f\u5b66\u4f1a\u8d70\u8def\u3002\u4ec0\u4e48\u65f6\u5019\uff0c\u6211\u4eec\u7684agent\u624d\u80fd\u5230\u8fbe\u8fd9\u91cc\u5462\uff1f</p>"},{"location":"Online%20CS%20Courses/CS285/chap21/#about_assumptions_how_humans_get_involved","title":"About Assumptions: How Humans Get Involved?","text":"<p>\u6211\u4eec\u518d\u6765\u8ba8\u8bba\u5982\u4f55\u4eba\u7c7b\u4ecb\u5165RL\u7684\u95ee\u9898\u3002\u5bf9\u4e8ereward\u8fd9\u4e00\u4ecb\u5165\u65b9\u5f0f\uff0c\u6211\u4eec\u5df2\u7ecf\u6709\u4e86\u5f88\u591a\u7684\u7814\u7a76\u3002\u4f46\u662f\u6211\u4eec\u4e5f\u6e05\u695a\uff0c\u5f88\u591a\u4e1c\u897f\u65e0\u6cd5\u5b9a\u4e49reward\u3002\u6bd4\u5982\uff0c\u8bd5\u7740\u7ed9\u201c\u628a\u6c34\u5012\u8fdb\u676f\u5b50\u91cc\u201d\u5b9a\u4e49reward\uff1f\u9664\u975e\u4f60\u63cf\u8ff0\u6bcf\u4e00\u4e2a\u6c34\u5206\u5b50\u7684\u4f4d\u7f6e\uff0c\u5426\u5219\u57fa\u672c\u662f\u4e0d\u53ef\u80fd\u7684\u3002</p> <p>\u9664\u4e86reward\u4e4b\u5916\uff0cdemo\u662f\u4e00\u4e2a\u5f88\u597d\u7684\u65b9\u6cd5\u3002\u4e0d\u4ec5\u662fbehavior cloning\uff0c\u6211\u4eec\u751a\u81f3\u8fd8\u53ef\u4ee5\u901a\u8fc7\u67d0\u4e9b\u65b9\u5f0f\u50cf\u201c\u8001\u5e08\u6559\u5b66\u751f\u201d\u4e00\u6837\uff0c\u8ba9\u4eba\u7c7b\u6559agent\u4e00\u4e9b\u5173\u952e\u6280\u5de7\uff0c\u518d\u4ee4agent\u8fdb\u884c\u5e94\u7528\u3002\u6bd4\u5982\uff0c\u8fd9\u7bc7\u8bba\u6587\u5c31\u7528\u6b64\u65b9\u6cd5\u8ba9\u673a\u5668\u4eba\u5b66\u4f1a\u6253\u4e52\u4e53\u7403\u3002</p> <p>\u53e6\u5916\u53ef\u80fd\u7684\u65b9\u5411\u662f\u7528\u8bed\u8a00\u505aprompt\u3002\u6bd4\u5982\uff0c\u8fd9\u91cc\u5c31\u6709\u4e00\u4e2a\u4f8b\u5b50\u3002\u8fd9\u53ef\u4ee5\u8ba9agent\u548c\u4eba\u7c7b\u7684\u4ea4\u4e92\u66f4\u8d34\u8fd1\u201c\u5408\u4f5c\u8005\u201d\u7684\u5173\u7cfb\uff0c\u66f4\u52a0\u81ea\u7136\u3002</p> <p>\u6b64\u5916\uff0cpreference\u4e5f\u662f\u5f88\u597d\u7684\u601d\u8def\u3002\u8fd9\u7bc7\u8bba\u6587\u5c55\u793a\u4e86\u4e00\u4e2a\u4f8b\u5b50\uff0c\u4eba\u7c7b\u901a\u8fc7\u4e0d\u65ad\u8bc4\u4ef7\u5de6\u53f3\u4e24\u6bb5\u8f68\u8ff9\u54ea\u4e2a\u66f4\u597d\uff0c\u6700\u7ec8\u4f7f\u5f97agent\u80fd\u591f\u5b8c\u6210\u540e\u7a7a\u7ffb\uff08\u60f3\u4e00\u60f3\u4f60\u80fd\u5426\u8bbe\u8ba1\u51fa\u6765\u4e00\u4e2a\u540e\u7a7a\u7ffb\u7684reward\u51fd\u6570\uff01\uff09\u3002\u53ef\u4ee5\u89c2\u770b\u8fd9\u4e00\u89c6\u9891\uff0c\u770bagent\u662f\u5982\u4f55\u5b66\u4f1a\u540e\u7a7a\u7ffb\u7684\u3002</p> <p>\u8fd9\u4e5f\u542f\u793a\u6211\u4eec\uff1aRL\u7684\u7814\u7a76\u5e76\u4e0d\u53ea\u662f\u5c40\u9650\u5728\u6700\u539f\u59cb\u7684\u95ee\u9898\u7684\u89e3\u51b3\u7b97\u6cd5\u4e0a\uff1b\u4e00\u4e2a\u5f88\u91cd\u8981\u7684\u65b9\u5411\u5c31\u662f\uff0c\u5982\u4f55\u63d0\u51fa\u4e00\u4e2a\u65b0\u7684\u95ee\u9898\u9648\u8ff0\uff0c\u4f7f\u5f97\u5b83\u548c\u5b9e\u9645\u66f4\u52a0\u8d34\u8fd1\uff0c\u66f4\u52a0\u6709\u610f\u4e49\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap21/#philosophy_what_is_reinfocement_learning_anyway","title":"Philosophy: What is Reinfocement Learning, anyway?","text":"<p>\u6211\u4eec\u5f53\u7136\u77e5\u9053\u4ec0\u4e48\u662f RL\u3002\u4f46\u662f\uff0cRL\u5bf9\u4e8e\u6211\u4eec\u662f\u4ec0\u4e48\u4e1c\u897f\uff1f - \u5b83\u4ec5\u4ec5\u662f\u4e00\u79cd\u6211\u4eec\u7528\u6765\u89e3\u51b3\u95ee\u9898\u7684\u5de5\u5177\uff0c\u5c31\u50cf\u8ba1\u7b97\u673a\u3001\u6570\u5b66\u548c\u7269\u7406\u4e00\u6837\uff1f - \u8fd8\u662f\uff0c\u5b83\u662f\u4e00\u4e2a\u6a21\u578b\uff0c\u63cf\u8ff0\u4e86\u4eba\u7c7b\u3001\u52a8\u7269\u7684\u5b66\u4e60\u65b9\u5f0f\uff1f - \u8fd8\u662f\u8bf4\uff0c\u5b83\u5176\u5b9e\u5c31\u662f\u201c\u5b66\u4e60\u201d\u8fd9\u4e00\u73b0\u8c61\u4f5c\u4e3a\u4e00\u95e8\u201c\u5b66\u79d1\u201d\u7684\u57fa\u672c\u89c4\u5f8b\uff0c\u5c31\u50cf\u7269\u7406\u5b9a\u5f8b\u63cf\u8ff0\u7740\u5b87\u5b99\u7684\u57fa\u672c\u52a8\u529b\u5b66\u89c4\u5f8b\u4e00\u6837\uff1f\uff08\u6211\u4eec\u77e5\u9053\uff0c\u7269\u7406\u5b66\u662f\u4e0d\u63cf\u8ff0\u4eba\u7c7b\u7684\u201c\u610f\u8bc6\u201d\u7684\uff1b\u4e5f\u8bb8\u63cf\u8ff0\u201c\u610f\u8bc6\u201d\uff0c\u6216\u8005\u201c\u5b66\u4e60\u201d\u8fd9\u4e00\u4e2a\u201c\u610f\u8bc6\u201d\u7684\u5b50\u96c6\u7684\uff0c\u5c31\u662fRL\uff1f\uff09</p> <p>\u53ef\u4ee5\u8bf4\uff0c\u6bcf\u4e2a\u4eba\u4f1a\u6709\u4e0d\u540c\u7684\u770b\u6cd5\u3002CS285\u7684instructor Sergey Levine\u66fe\u8bf4\u8fc7\uff0c\u4ed6\u81ea\u5df1\u5c31\u575a\u6301\u7b2c\u4e09\u79cd\u89c2\u70b9\u3002\u5f53\u7136\uff0c\u6211\u5728\u8fd9\u91cc\u4e5f\u5e76\u4e0d\u662f\u8981\u63a8\u9500\u4efb\u4f55\u7684\u89c2\u70b9\uff0c\u6240\u4ee5\u8ba9\u6211\u4eec\u770b\u4e00\u770b\u575a\u6301\u4e09\u79cd\u89c2\u70b9\u7684\u4eba\u90fd\u4f1a\u8bf4\u4e9b\u4ec0\u4e48\u3002</p> <p>\uff08\u4ee5\u4e0b\u7eaf\u5c5e\u865a\u6784\uff01\uff09</p>"},{"location":"Online%20CS%20Courses/CS285/chap21/#rl_as_a_engineering_tool","title":"RL as a Engineering Tool","text":"<p>\u5c0fA\u5c31\u662f\u6301\u8fd9\u4e00\u89c2\u70b9\u7684\u4eba\u3002</p> <p>\u201c\u6240\u8c13RL\uff0c\u4e0d\u8fc7\u662f\u5e72\u4e86\u90a3\u4e9b\u4eba\u7c7b\u61d2\u5f97\u5e72\uff0c\u6216\u8005\u4e0d\u4f1a\u5e72\u7684\u4e8b\u60c5\u3002\u6bd4\u5982\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u51e0\u5343\u4e2a\u65b9\u7a0b\u6216\u8005\u5efa\u6a21\u63cf\u8ff0\u706b\u7bad\uff0c\u63cf\u8ff0\u98de\u673a\u548c\u6c7d\u8f66\u3002\u6211\u4eec\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7269\u7406\u5b66\u7684\u5206\u6790\u6765\u63a7\u5236\u5b83\u4eec\u5230\u8fbe\u76ee\u7684\u5730\u3002\u4f46\u662f\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u8d70\u5728\u8def\u4e0a\u7684\u673a\u5668\u4eba\uff0c\u8fd9\u4e2a\u7269\u7406\u5bf9\u4e8e\u4eba\u7c7b\u8fd8\u662f\u592a\u590d\u6742\u4e86\uff0c\u6216\u8005\u6211\u4eec\u61d2\u5f97\u505a\u8fd9\u4e2a\u5efa\u6a21\u3002RL\u5f88\u597d\u554a\u2014\u2014\u5b83\u51cf\u8f7b\u4e86\u6211\u4eec\u7684\u5de5\u4f5c\uff0c\u4eba\u4eec\u4ed8\u51fa\u667a\u6167\u5c31\u53ef\u4ee5\u4e86\uff0c\u8ba1\u7b97\u7684\u4f53\u529b\u6d3b\u53ef\u4ee5\u4ea4\u7ed9GPU\u6765\u505a\u3002\u201d</p> <p>\u201c\u6362\u53e5\u8bdd\u8bf4\uff0cRL\u662f\u4e00\u79cd\u6280\u5de7\uff0c\u628a\u539f\u5148\u5728\u7eb8\u4e0a\u63a8\u5bfc\u7684\u590d\u6742\u516c\u5f0f\u53d8\u6210\u5728\u7535\u8111\u7684\u5185\u5b58\u91cc\u7684gradient descent\u3002\u5b83\u4e5f\u6ca1\u6709\u90a3\u4e48\u9ad8\u5927\u4e0a\u3002\u4f60\u770b\uff0c\u539f\u6765\u6211\u4eec\u505a\u7684\u662f\uff1a</p> <ul> <li>\u5efa\u6a21\uff1b</li> <li>\u63a8\u5bfc\u516c\u5f0f\uff0c\u6c42\u89e3\u65b9\u7a0b\uff0c\u8fdb\u800c\u6839\u636e\u73af\u5883\u8fdb\u884c\u63a7\u5236\uff1b</li> </ul> <p>\u800c\u73b0\u5728\uff0c\u6211\u4eec\u505a\u7684\u662f\uff1a</p> <ul> <li>\u5efa\u6a21\uff1b</li> <li>\u6784\u9020\u4e00\u4e2asimulator\uff0c\u5951\u5408RL\u7684\u8981\u6c42\uff1b</li> <li>\u8dd1\u4e00\u4e2aRL\u7b97\u6cd5\uff0c\u8ba9\u5b83\u8fdb\u884c\u63a7\u5236\u3002</li> </ul> <p>\u5b83\u4eec\u786e\u5b9e\u6ca1\u6709\u4ec0\u4e48\u7279\u522b\u6839\u672c\u7684\u5dee\u522b\u3002\u201d</p>"},{"location":"Online%20CS%20Courses/CS285/chap21/#rl_as_a_model_of_learning","title":"RL as a Model of Learning","text":"<p>\u201c\u5f53\u524d\u7684RL\u7684\u53d1\u5c55\u8fd8\u4e0d\u592a\u591f\u3002\u5f53\u6211\u4eec\u7684\u7b97\u6cd5\u8db3\u591f\u5f3a\u5927\u7684\u65f6\u5019\uff0cRL\u5c31\u5e94\u8be5\u80fd\u63cf\u8ff0\u4eba\u7c7b\u7684\u5b66\u4e60\u65b9\u5f0f\u201d\uff0c\u5c0fB\u8bf4\u3002</p> <p>\u201c\u6839\u636eRL\u7684\u95ee\u9898\u9648\u8ff0\u548c\u5b9a\u4e49\uff0cRL\u662f\u63cf\u8ff0\u4eba\u7c7b\u5b66\u4e60\u539f\u7406\u7684\u552f\u4e00\u5019\u9009\u4eba\u3002\u6211\u4eec\u4e5f\u5df2\u7ecf\u505a\u4e86\u5f88\u591a\u2014\u2014RL\u7b97\u6cd5\u53ef\u4ee5\u5728\u56f4\u68cb\u548cDOTA\u4e0a\u51fb\u8d25\u4eba\u7c7b\uff0c\u53ef\u4ee5\u50cf\u4eba\u4e00\u6837\u9a7e\u9a76\u8f66\u8f86\u3002\u201d</p> <p>\u201c\u4f60\u4e5f\u8bb8\u4f1a\u8bf4\uff0c\u4e0d\u5bf9\u554a\uff0c\u4eba\u7c7b\u751f\u4e0b\u6765\u51e0\u4e2a\u6708\u5c31\u4f1a\u722c\u884c\uff0c\u4f46\u8fd9\u5bf9\u4e8eRL\u53ef\u80fd\u5f88\u56f0\u96be\uff1b\u76f8\u53cd\uff0c\u5bf9\u4e8e\u4eba\u7c7b\u590d\u6742\u62bd\u8c61\u7684\u56fd\u9645\u8c61\u68cb\u95ee\u9898\uff0cRL\u5374\u6700\u65e9\u5730\u89e3\u51b3\u4e86\u3002\u4f60\u4f1a\u56e0\u6b64\u6000\u7591\uff0cRL\u5e76\u975e\u771f\u6b63\u63cf\u8ff0\u4e86\u4eba\u7c7b\u7684\u5b66\u4e60\uff1f\u56e0\u4e3a\u4eba\u7c7b\u6700\u81ea\u7136\u6700\u64c5\u957f\u7684\u90a3\u4e9b\u2014\u2014\u8bc6\u522b\u4eba\u8138\uff0c\u62ff\u8d77\u4e00\u4e2a\u7269\u4f53\uff0c\u5728\u6df7\u4e71\u7684\u4eba\u7fa4\u4e2d\u79fb\u52a8\u81ea\u5df1\u7684\u8eab\u4f53\u6765\u8eb2\u907f\u78b0\u649e\u2014\u2014\u5bf9\u4e8eRL\u90fd\u662f\u56f0\u96be\u7684\u3002\u201d</p> <p>\u201c\u4f46\u662f\uff0c\u8fd9\u5b9e\u9645\u4e0a\u662f\u8457\u540d\u7684Moravec's Paradox\u3002\u4f60\u8bf4\u7684\u8fd9\u4e9b\u4f8b\u5b50\uff0c\u4e0d\u662f\u8bf4\"RL\u8fde\u6700\u7b80\u5355\u7684\u4e8b\u90fd\u505a\u4e0d\u5230\"\uff0c\u800c\u662f\u4f60\u641e\u9519\u4e86\u2014\u2014\u8fd9\u4e9b\u5b9e\u9645\u4e0a\u90fd\u662f\u5f88\u96be\u7684\u95ee\u9898\u3002\u53ea\u4e0d\u8fc7\u662f\u56e0\u4e3a\uff0c\u81ea\u7136\u9009\u62e9\u5e26\u6765\u7684\u5e78\u5b58\u8005\u504f\u5dee\uff0c\u6211\u4eec\u4eba\u7c7b\u751a\u81f3\u5730\u7403\u4e0a\u7684\u7edd\u5927\u90e8\u5206\u751f\u7269\u90fd\u64c5\u957f\u8fd9\u4e9b\u4e8b\u60c5\u3002\u4eba\u7c7b\u53ef\u4ee5\u4e0d\u4f1a\u5f00\u8f66\uff0c\u4e0d\u4f1a\u4e0b\u56f4\u68cb\u548c\u56fd\u9645\u8c61\u68cb\uff1b\u4f46\u5982\u679c\u6211\u4eec\u4e0d\u5584\u4e8e\u79fb\u52a8\u81ea\u5df1\u7684\u8eab\u4f53\uff0c\u4e0d\u5584\u4e8e\u8fa8\u522b\u73af\u5883\u7684\u5371\u9669\uff0c\u6211\u4eec\u5c31\u4f1a\u88ab\u5176\u4ed6\u7684\uff0c\u66f4\u64c5\u957f\u8fd9\u4e9b\u7684\u751f\u7269\u6240\u53d6\u4ee3\u3002\u201d</p> <p>\u201c\u5982\u679c\u603b\u7ed3\u4e00\u4e0b\uff0c\u5c31\u662f\u8bf4\uff1a - \u4eba\u7c7b\u6781\u5176\u5584\u4e8e\u5904\u7406corner case\uff0c\u6216\u8005\u672a\u7ecf\u5386\u8fc7\u7684\u4e8b\u60c5\uff0c\u6bd4\u5982\u8d70\u8def\u7684\u65f6\u5019\u5373\u662f\u88ab\u7eca\u4e5f\u5f88\u5bb9\u6613\u6062\u590d\u5e73\u8861\uff1b - \u4f46\u662fRL\u5bf9\u4e8e\u672a\u89c1\u7684\u73af\u5883\u8868\u73b0\u4e0d\u4e00\u5b9a\u597d\uff0c\u56e0\u6b64\u73b0\u5728\u6211\u4eec\u8fd8\u672a\u8fbe\u5230\u4eba\u7c7b\u7684\u6c34\u5e73\uff1b - \u4f46\u4ece\u53e6\u5916\u4e00\u4e2a\u65b9\u9762\u6765\u8bb2\uff0c\u4eceRL\u7684\u5b9a\u4e49\u6765\u770b\uff0c\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\uff0c\u53ea\u6709RL\u624d\u6709\u53ef\u80fd\u505a\u5230\u3002 - \u800c\u6211\u4eec\u5728\u5b9e\u9a8c\u4e2d\u5f88\u5c11\u8fd9\u4e48\u505a\uff01</p> <p>\u6240\u4ee5\uff0c\u522b\u7ee7\u7eed\u5728Cheetah\u548cHumanoid\u4e0a\u9762\u5237\u5206\u4e86\uff01\u60f3\u4e00\u60f3\uff0c\u6211\u4eec\u5982\u4f55\u624d\u80fdgeneralize\uff0c\u624d\u80fd\u8ba9agent\u8fc5\u901f\u9002\u5e94\u65b0\u7684\u73af\u5883\uff1f\u201d</p> <p>\u6b64\u5916\uff0c\u4e00\u4e9b\u5ba2\u89c2\u7684\u4e8b\u5b9e\uff1a\u5e26\u7740\u8fd9\u4e00\u601d\u60f3\uff0c\u5f88\u591a\u4eba\u8fdb\u884c\u4e86\u8ba9RL\u5728\u771f\u5b9e\u7684\u73af\u5883\u4e2d\u7684\u5c1d\u8bd5\u3002\u4ec0\u4e48\u53eb\u505a\u201c\u771f\u5b9e\u7684\u201d\u73af\u5883\uff1f\u4e0d\u662f\u6307\u4e0d\u7528simulator\uff0c\u800c\u662f\u6211\u4eec\u8bd5\u56fe\u523b\u753b\u590d\u6742\u73af\u5883\uff08\u5373\u4eba\u7c7b\u751f\u6d3b\u7684\u73af\u5883\uff09\u6216\u8005\u4eba\u7c7b\u5b66\u4e60\u4e2d\u7684\u7279\u5f81\u3002\u6bd4\u5982\uff1a - \u5728\u771f\u5b9e\u73af\u5883\u4e2d\uff0c\u6211\u4eec\u4e0d\u80fdreset\u3002     - \u672c\u6765\u8981\u63a5\u5496\u5561\uff0c\u7ed3\u679c\u5496\u5561\u6cfc\u5230\u4e86\u684c\u5b50\u4e0a\uff0c\u4e0d\u80fdreset\uff0c\u800c\u662f\u8981agent\u81ea\u5df1\u60f3\u529e\u6cd5\u3002\u600e\u4e48\u529e\uff1f\u7814\u7a76\u8005\uff08\u6ce8\uff1a\u4e0b\u9762\u7684\u4f8b\u5b50\u4e0d\u5b8c\u5168\u662f\u8bba\u6587\u91cc\u7684\u4f8b\u5b50\uff09\u60f3\u5230\u4e86\uff0c\u6211\u4eec\uff08\u6bd4\u5982\u8bf4\uff09\u8bad\u7ec3\u4e09\u4e2a\u4efb\u52a1\uff1a         - \u63a5\u5496\u5561\uff1b         - \u628a\u5730\u4e0a\u7684\u5496\u5561\u676f\u6361\u8d77\u6765\uff1b         - \u628a\u6d12\u51fa\u53bb\u7684\u5496\u5561\u64e6\u5e72\u51c0\u3002     - \u5b83\u4eec\u7684\u7279\u70b9\u662f\uff0c\u4efb\u4f55\u4e00\u4e2a\u4efb\u52a1\u5931\u8d25\u4e86\uff0c\u90fd\u53ef\u4ee5\u7ec3\u4e60\u5176\u4ed6\u7684\u4efb\u52a1\uff01\u8fd9\u5c31\u5f88\u5408\u7406\u2014\u2014\u6bd4\u5982\uff0c\u5728\u4f60\u505a\u5316\u5b66\u5b9e\u9a8c\u4e4b\u524d\uff0c\u4f60\u7684\u8001\u5e08\u4e00\u5b9a\u4f1a\u544a\u8bc9\u4f60\u5982\u4f55\u5904\u7406\u4e2d\u6bd2\uff0c\u8150\u8680\u7b49\u95ee\u9898\uff0c\u5e76\u786e\u4fdd\u4f60\u4f1a\u5904\u7406\u8fd9\u4e9b\u60c5\u51b5\u624d\u8ba9\u4f60\u5f00\u59cb\u5b9e\u9a8c\u3002\u8fd9\u91cc\uff0c\u673a\u5668\u4eba\u5f88\u6709\u53ef\u80fd\u4e5f\u5148\u5b66\u4f1a\u6361\u8d77\u5496\u5561\u676f\uff0c\u6700\u540e\u624d\u5b66\u4f1a\u63a5\u5496\u5561\u3002 - \u4eba\u7c7b\u5728\u5b66\u4e60\u4e00\u4e2a\u4efb\u52a1\u7684\u65f6\u5019\uff0c\u5e76\u975e\u4ecerandom exploration\u5f00\u59cb\u3002     - \u6bd4\u5982\uff0c\u5f53\u4f60\u7b2c\u4e00\u6b21\u5b66\u4e60\u6e38\u6cf3\uff0c\u4f60\u5c31\u7b97\u4e0d\u4f1a\u4efb\u4f55\u6cf3\u59ff\uff0c\u4f60\u4e5f\u4e0d\u5e94\u8be5\u8ba9\u4f60\u7684\u6bcf\u4e00\u4e2a\u5173\u8282\u4ee5\u5404\u5411\u540c\u6027\u5747\u5300\u9ad8\u65af\u5206\u5e03\u6765\u8f6c\u52a8\u548c\u53d1\u529b\u3002\u5982\u679c\u4f60\u6709\u8fd9\u6837\u7684\u7ecf\u5386\uff0c\u4f60\u4f1a\u53d1\u73b0\u4f60\u5b9e\u9645\u4e0a\u5927\u6982\u4f1a\u5728\u6c34\u91cc\u201c\u6251\u817e\u201d\uff0c\u867d\u7136\u7528\u7684\u529b\u4e0d\u4e00\u5b9a\u5728\u8fd9\u4e00\u65b0\u7684\u73af\u5883\u91cc\u7279\u522b\u6709\u6548\uff0c\u4f46\u81f3\u5c11\u4f60recall\u4e86\u8fc7\u53bb\u7684\u7ecf\u5386\uff0c\u5e76\u5229\u7528\u4e86\u5b83\u4eec\u3002     - \u56e0\u6b64\uff0c\u8fd9\u7bc7\u8bba\u6587\u5c31\u505a\u4e86\u8fd9\u6837\u7684\u5c1d\u8bd5\u3002\u5b83\u8ba9\u673a\u5668\u4eba\u5728\u5f00\u59cb\u8bad\u7ec3\u4e4b\u524d\u6709\u4e00\u4e2aprior\uff0c\u91cc\u9762\u7684action\u4e0d\u4e00\u5b9a\u6709\u5229\u4e8e\u5b8c\u6210\u4efb\u52a1\uff0c\u4f46\u81f3\u5c11\u662f\u6709\u610f\u4e49\u7684\uff08\u6bd4\u5982\uff0c\u968f\u673a\u7684\u52a8\u4f5c\u5c31\u5c5e\u4e8e\u6ca1\u6709\u610f\u4e49\u7684\uff09\u3002\u5b9e\u9a8c\u4e0a\u53ef\u4ee5\u53d1\u73b0\uff0c\u4e00\u5f00\u59cb\u5728\u8fd9\u6837\u7684action prior\u4e2dsample\u5e76explore\uff0c\u53ef\u4ee5\u8ba9\u5b66\u4e60\u7684\u8fc7\u7a0b\u53d8\u5f97\u66f4\u52a0\u9ad8\u6548\u3002</p> <p>\u201c\u662f\u7684\uff01\u201d\uff0c\u5c0fB\u8bf4\uff1a\u201c\u53ea\u6709\u6211\u4eecRL\u8bad\u7ec3\u7684\u73af\u5883\u8d8a\u6765\u8d8a\u771f\u5b9e\uff0c\u6211\u4eec\u624d\u80fd\u671f\u5f85RL agent\u8fdb\u884cemerge\uff0c\u6700\u540e\u51fa\u73b0\u6211\u4eec\u8ba4\u53ef\u7684\u2018\u667a\u80fd\u2019\u201d\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap21/#rl_as_the_universal_learning_method","title":"RL as the Universal Learning Method","text":"<p>\u201c\u6211\u4eec\u53ef\u4ee5\u628aRL\u7406\u89e3\u4e3a\u4e00\u79cd\u6839\u672c\u6027\u3001\u5b9e\u8d28\u6027\u7684\u7406\u8bba\u3002\u201d\uff0c\u5c0fC\u8bf4\u3002</p> <p>\u201c\u5982\u540c\u7814\u7a76\u795e\u7ecf\u79d1\u5b66\u7684\u751f\u7269\u5b66\u5bb6Daniel Wolpert\u6240\u8bf4\uff0c\u2018\u6211\u4eec\u62e5\u6709\u5927\u8111\u53ea\u4e3a\u4e86\u4e00\u4ef6\u4e8b\u2014\u2014\u90a3\u5c31\u662f\u4f5c\u51fa\u590d\u6742\u7684\u4e14\u9002\u5e94\u6027\u5f3a\u7684\u52a8\u4f5c\u2019\u3002\u6211\u4eec\u4e5f\u53ef\u4ee5\u628a\u5b83\u642c\u5230learning\u8fd9\u4e00\u9886\u57df\uff1a\u6211\u4eec\u9700\u8981\u5b66\u4e60\uff0c\u53ea\u4e3a\u4e86\u4f5c\u51fa\u590d\u6742\u7684\u4e14\u9002\u5e94\u6027\u5f3a\u7684\u51b3\u7b56\u3002\u201d</p> <p>\u201c\u4f60\u4e5f\u8bb8\u4f1a\u8bf4\uff0c\u5728DL\u91cc\uff0c\u6211\u4eec\u5e76\u6ca1\u6709\u505a\u51b3\u7b56\u554a\uff1f\u4f46DL\u96be\u9053\u4e0d\u662f\u4e00\u79cd\u5b66\u4e60\u5417\uff1f\u4f46\u662f\uff0c\u5b9e\u9645\u4e0a\u4f60\u60f3\u9519\u4e86\u3002DL\u7684\u6a21\u578b\u4e5f\u5728\u505a\u51b3\u7b56\u2014\u2014\u5e76\u4e0d\u662f\u8bf4\u5b83\u4eec\u51b3\u7b56\u56fe\u7247\u7684label\u662f\u4ec0\u4e48\uff0c\u800c\u662f\u5b83\u4eec\u51b3\u5b9a\u56fe\u7247\u7684label\u4e4b\u540e\uff0c\u53d1\u751f\u4e86\u4ec0\u4e48\u3002\u6bd4\u5982\uff0c\u5b83\u53d7\u5230\u4e86cross entropy loss\u7684\u60e9\u7f5a\uff0c\u5b83\u624d\u6839\u636e\u8fd9\u4e2a\u60e9\u7f5a\u6765\u8c03\u6574\u81ea\u5df1\u7684\u51b3\u7b56\u3002\u201d</p> <p>\u201c\u5728DL\u91cc\uff0c\u6211\u4eec\u901a\u5e38\u5728\u5f88\u5927\u4f46\u8d28\u91cf\u4e0d\u9ad8\u7684\u2018\u5783\u573e\u2019\u6570\u636e\u96c6\u4e0a\u505apretrain\uff0c\u800c\u5728\u5c11\u6570\u9ad8\u8d28\u91cf\u7684\u6570\u636e\u96c6\u4e0afinetune\u3002\u4f60\u4f1a\u53d1\u73b0\uff0c\u5176\u5b9e\u5783\u573e\u7684\u6570\u636e\u96c6\u5c31\u50cf\u662f\u73af\u5883\uff0c\u6211\u4eec\u4ece\u4e2d\u4e0d\u5b66\u4e60\u51b3\u7b56\uff0c\u53ea\u662f\u5b66\u4e60dynamics\uff1b\u800c\u9ad8\u8d28\u91cf\u7684\u6570\u636e\u96c6\u5982\u540chuman\u7ed9\u51fa\u7684\u6307\u793a\uff0c\u6bd4\u5982reward\uff0c\u6211\u4eec\u5728\u4e0a\u9762\u5229\u7528\u8fc7\u53bb\u7684\u77e5\u8bc6\u5b66\u4f1a\u4efb\u52a1\u3002\u201d</p> <p>\u201c\u6211\u7684\u68a6\u60f3\u662f\uff0c\u6709\u671d\u4e00\u65e5\u6211\u4eec\u4f1a\u6709\u4e00\u4e2aworld dataset\uff0c\u5305\u542b\u4e86\u4e16\u754c\u4e0a\u6240\u6709\u6709\u610f\u4e49\u7684\u884c\u4e3a\u3002\u6bd4\u5982\uff0c\u505a\u996d\u7092\u83dc\uff0c\u626b\u5730\uff0c\u5f00\u8f66\uff0c\u751a\u81f3\u662f\u5199\u4ee3\u7801\uff0c\u90fd\u5728\u91cc\u9762\u3002\u5f53\u7136\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u6307\u5b9a\u7684task\uff0c\u8fd9\u91cc\u9762\u7684\u5927\u90e8\u5206\u6570\u636e\u90fd\u5c5e\u4e8e\u5783\u573e\uff1b\u4f46\u6211\u4eec\u7684approach\u662f\uff0c\u6211\u4eec\u5728\u8fd9\u4e2aworld dataset\u4e0apretrain\uff0c\u505aunsupervised\u7684offline RL\uff0c\u7136\u540e\u8ba9agent\u548c\u771f\u6b63\u76ee\u6807\u7684\u73af\u5883\u8fdb\u884c\u4ea4\u4e92\uff0c\u5b8c\u6210downstream task\u3002\u201d</p> <p>\u4e8b\u5b9e\u4e0a\uff0c\u4e5f\u6709\u4e00\u7cfb\u5217\u7814\u7a76\u5173\u6ce8\u8fd9\u4e00\u95ee\u9898\uff0c\u5b83\u4eec\u4e3b\u8981\u90fd\u5173\u6ce8\u4e8e\u5982\u4f55\u5bf9\u5927\u7684\u6570\u636e\u96c6\u8fdb\u884cunsupervised learning\u3002\u6bd4\u5982\uff0c\u4e4b\u524d\u63d0\u5230\u7684\uff0c\u6211\u4eec\u53ef\u4ee5\u505agoal conditioned learning\uff1b\u6216\u8005\uff0c\u53ef\u4ee5\u8ba9\u6a21\u578b\u81ea\u5df1\u751f\u6210\u4e00\u4e9b\u6709\u610f\u4e49\u7684\u6570\u636e\uff0c\u7136\u540e\u628a\u5b83\u4eec\u5f53\u4f5cdemo\u6765\u5b66\u4e60\uff08\u8fd9\u7bc7\u6587\u7ae0\uff09\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/chap21/#the_final_question_and_the_future","title":"The Final Question, and the Future","text":"<p>\u6211\u4eec\u6700\u540e\u6765\u601d\u8003\u8fd9\u6837\u4e00\u4e2a\u95ee\u9898\uff1aRL\u4e3a\u4ec0\u4e48\u80fd\u5b66\u4f1a\uff1f\u6211\u4eec\u53c8\u4e3a\u4ec0\u4e48\u80fd\u5b66\u4f1a\uff1f</p> <p>\u540e\u8005\u5f88\u96be\u56de\u7b54\uff0c\u53ea\u4e0d\u8fc7\uff08\u4e5f\u8bb8\uff09\u8fd9\u4e0d\u662f\u641eAI\u7684\u4eba\u4eec\u7279\u522b\u8981\u62c5\u5fc3\u7684\u4e8b\u60c5\u3002\u4f46\u662f\uff0c\u6211\u4eec\u7684\u5b66\u4e60\u65b9\u5f0f\u5927\u6982\u53ef\u4ee5\u5f52\u7ed3\u4e3a\u4e24\u4e2a\u65b9\u9762\uff1a - imitation\uff1a\u4eba\u7c7b\u751f\u6d3b\u5728\u793e\u4f1a\u91cc\uff0c\u5728\u9047\u5230\u672a\u63a5\u89e6\u7684\u4e8b\u7269\u65f6\uff0c\u6211\u4eec\u503e\u5411\u4e8e\u4f1a\u6a21\u4eff\u4ed6\u4eba\u7684\u884c\u4e3a\uff0c\u4ece\u800c\u907f\u514d\u4e00\u5f00\u59cb\u5c31\u72af\u9519\u8bef\u2014\u2014\u6bd5\u7adf\uff0c\u4eba\u751f\u65e0\u6cd5reset\u3002 - understanding\uff1a\u8fd9\u662f\u66f4\u96be\u523b\u753b\u7684\u4e86\u3002\u6211\u4eec\u8fd8\u4e0d\u77e5\u9053\u6211\u4eec\u7684\u5927\u8111\u5982\u4f55\u5b8c\u6210\u56fe\u50cf\u8bc6\u522b\uff0c\u5982\u4f55\u7406\u89e3\u8bed\u8a00\uff0c\u66f4\u4e0d\u77e5\u9053\u5927\u8111\u5982\u4f55\u63a7\u5236\u6211\u4eec\u7684\u884c\u4e3a\u3002\u4f46\u662f\uff0c\u901a\u8fc7\u67d0\u79cd\u65b9\u5f0f\uff0c\u6211\u4eec\u968f\u7740\u5bf9\u95ee\u9898\u7684\u7406\u89e3\uff0c\u53ef\u4ee5\u7406\u89e3\u4ed6\u4eba\u7684\u610f\u56fe\uff0c\u800c\u9010\u6e10\u8131\u79bb\u7b80\u5355\u7684\u6a21\u4eff\uff0c\u6765\u62e5\u6709\u81ea\u5df1\u7684\u4ef7\u503c\u89c2\u548c\u7406\u5ff5\uff08Value\uff09\u3002</p> <p>\u524d\u8005\u4e5f\u96be\u56de\u7b54\u3002\u4e3a\u4ec0\u4e48DL\u80fd\u5b66\u4f1a\uff1f\u6211\u4eec\u751a\u81f3\u7b54\u4e0d\u51fa\u6765\u3002\u4f46\u662f\uff0c\u5982\u679c\u628aDL\u5f53\u4f5c\u4e00\u4e2aoracle\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u53ef\u4ee5\u5927\u81f4\u5730\u56de\u7b54\uff1aDeep Reinforcement Learning\u80fd\u5b66\u4f1a\uff0c\u662f\u56e0\u4e3aRL\u7b97\u6cd5\u53ef\u4ee5\u505adecision making\uff0c\u800cDL\u7684\u5927\u6a21\u578b\u4fdd\u8bc1\u4e86end-to-end training\u53ef\u4ee5work\u3002\u6211\u4eec\u53ef\u4ee5\u8fdb\u4e00\u6b65\u5f52\u7ed3\u5230\u51e0\u4e2a\u65b9\u9762\uff1a - unsupervised learning\uff1a\u5728\u548c\u73af\u5883\uff08\u6216\u8005\u66f4\u51c6\u786e\u5730\u8bf4\uff0creward\uff09\u4ea4\u4e92\u4e4b\u524d\uff0c\u6211\u4eec\u53ef\u80fd\u901a\u8fc7offline\u7684\u6570\u636e\u96c6\u8fdb\u884cgoal conditioned\u4e4b\u7c7b\u7684\u5b66\u4e60\u3002 - model learning\uff1a\u6211\u4eec\u5efa\u7acb\u5bf9\u4e8e\u73af\u5883\u7684\u6a21\u578b\uff0c\u8fd9\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u4e5f\u6a21\u62df\u4e86\u4eba\u7c7b\u7684\u884c\u4e3a\uff08\u731c\u6d4b\u522b\u4eba\u7684\u5fc3\u601d\uff0c\u6216\u8005\u9884\u6d4b\u53ef\u80fd\u7684\u540e\u679c\uff09\u3002 - policy learning\uff1a\u770b\u4f3creward\u53ea\u662f\u4e00\u4e2a\u6807\u91cf\u7684\u6570\u503c\uff0c\u7ed9\u51fa\u7684\u4fe1\u606f\u8fdc\u4e0d\u5982DL\u4e2d\u56fe\u7247/label\u90a3\u6837\u4e30\u5bcc\uff1b\u4f46\u662f\uff0cRL\u7684\u7b97\u6cd5\u5b9e\u9645\u4e0a\u5e26\u6765\u4e86\u5de8\u91cf\u4fe1\u606f\u3002\u6bd4\u5982\uff0c\u5c31\u60f3\u4e00\u60f3Value backup\uff0c\u5b83\u80fd\u67d0\u79cd\u7a0b\u5ea6\u4e0a\u201c\u6253\u901a\u201d\u6574\u4e2aMDP\u7684\u7ed3\u6784\u3002</p> <p>\u6211\u4eec\u8be5\u7a76\u7adf\u5982\u4f55\u5c1d\u8bd5\u56de\u7b54\u8fd9\u4e24\u4e2a\u95ee\u9898\u5462\uff1f\u4e5f\u8bb8\uff0c\u73b0\u5728\u8fd8\u6ca1\u6709\u4eba\u77e5\u9053\u3002\u5982\u540cSergey Levine\u6559\u6388\u8bf4\u7684\u90a3\u6837\uff0c\u6211\u4eec\u5e94\u8be5\u201cThink Big and Start Small\u201d\u3002\u76f8\u4fe1\u6700\u7ec8\u6709\u4e00\u5929\uff0c\u4eba\u4eec\u4f1a\u7ed9\u51fa\u4e00\u4e2a\u4ee4\u4eba\u4fe1\u670d\u7684\u7b54\u6848\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/takeaway/","title":"Takeaway of all lectures","text":"<p>\u8fd9\u91cc\u53ea\u662f\u7528\u6765\u81ea\u5df1\u770b\u770b\u7684</p>"},{"location":"Online%20CS%20Courses/CS285/takeaway/#2-imitation_learning","title":"2-Imitation Learning","text":"<p>Behavioral Cloning</p> \\[ \\theta^\\star = \\arg\\max_{\\theta}\\log \\pi_\\theta(a=\\pi^\\star(s)|s) \\] <p>Dagger</p> \\[ \\mathcal{D}= \\mathcal{D}\\cup \\left\\{(s_t,a_t^\\star=\\pi^{\\star}(s_t))|t=1,2,\\cdots,T\\right\\} \\]"},{"location":"Online%20CS%20Courses/CS285/takeaway/#3-4","title":"3-4","text":""},{"location":"Online%20CS%20Courses/CS285/takeaway/#5-policy_gradient","title":"5-Policy Gradient","text":"<p>Policy Gradient with Causality</p> \\[ \\nabla_\\theta J(\\theta)\\approx \\frac{1}{N}\\sum_{n=1}^N \\sum_{t=1}^T \\nabla_\\theta\\log \\pi_\\theta(a_t|s_t)\\left(\\sum_{t'=t}^T r(s_{t'},a_{t'})\\right)=\\frac{1}{N}\\sum_{n=1}^N \\sum_{t=1}^T \\nabla_\\theta\\log \\pi_\\theta(a_t|s_t)\\hat{Q}^{\\pi_\\theta}_{n,t} \\]"},{"location":"Online%20CS%20Courses/CS285/takeaway/#6-actor-critic","title":"6-Actor-Critic","text":"<p>Vanilla Actor-Critic with discount</p> <p>(Don't use it in practice!)</p> \\[ \\nabla_\\theta J(\\theta)=\\mathbb{E}_{\\tau \\sim p_{\\theta}(\\tau)}\\left[\\sum_{t=1}^T\\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\left(r(s_t,a_t)+\\gamma V^{\\pi_\\theta}(s_{t+1})-V^{\\pi_\\theta}(s_t)\\right)\\right] \\] \\[ \\hat{L}(\\phi)=\\frac{1}{N}\\sum_{n=1}^N\\sum_{t=1}^{T}\\left(\\text{SG}[\\hat{y}_{n,t}]-V^{\\pi_\\theta}_{\\phi}(s_{n,t})\\right)^2=\\frac{1}{N}\\sum_{n=1}^N\\sum_{t=1}^{T}\\left(r(s_{n,t},a_{n,t})+ \\text{SG}[\\gamma V^{\\pi_\\theta}_{\\phi}(s_{n,t+1})]-V^{\\pi_\\theta}_{\\phi}(s_{n,t})\\right)^2 \\] <p>Off-Policy Actor-Critic Algorithm</p> \\[ L_{\\text{new}}(\\phi)=\\sum_{\\text{batch}}\\left(r(s_{t},a_{t})+\\gamma Q^{\\pi_\\theta}_{\\phi}(s_{t+1},a_{t+1})-Q^{\\pi_\\theta}_{\\phi}(s_{t},a_t)\\right)^2 \\] <ol> <li>\u5229\u7528\u73b0\u5728\u7684policy \\(\\pi_\\theta\\) \u8d70\u4e00\u6b65\uff0c\u5f97\u5230 \\(\\{s_t,a_t,s_{t+1},r(s_t,a_t)\\}\\) \uff0c\u5b58\u5165Replay Buffer\uff1b</li> <li>\u4eceReplay Buffer\u4e2d\u968f\u673a\u53d6\u4e00\u4e2abatch\uff0c\u7528\u8fd9\u4e9b\u6570\u636e\u8bad\u7ec3 \\(Q^{\\pi_\\theta}_{\\phi}\\) \uff08\u89c1\u524d\u9762\u7684\u76ee\u6807\u51fd\u6570\uff09\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u5bf9\u6bcf\u4e00\u7ec4\u6570\u636e\u6211\u4eec\u9700\u8981\u91c7\u6837\u4e00\u4e2a\u65b0\u7684action \\(a_{t+1}\\) \uff1b</li> <li>\u53d6 \\(A^{\\pi_\\theta}(s_t,a_t)=Q^{\\pi_\\theta}_\\phi(s_t,a_t)\\) \uff1b</li> <li>\u8ba1\u7b97 \\(\\nabla_\\theta J(\\theta)=\\sum_{\\text{batch}}\\nabla_{\\theta}\\log \\pi_\\theta(\\tilde{a_t}|s_t)A^{\\pi_\\theta}(s_t,\\tilde{a_t})\\) \uff0c\u5176\u4e2d \\(\\tilde{a_t}\\) \u662f\u4ece \\(\\pi_\\theta\\) \u4e2d\u91c7\u6837\u5f97\u5230\u7684\uff1b</li> <li>\u7528\u8fd9\u4e2a\u68af\u5ea6\u66f4\u65b0 \\(\\theta\\) \u3002</li> </ol> <p>State-Dependent Baseline</p> <p>(Very good in practice!)</p> \\[ \\nabla_\\theta J(\\theta)=\\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[\\sum_{t=1}^T \\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\left[\\left(\\sum_{t'=t}^T \\gamma^{t'-t} r(s_{t'},a_{t'})\\right)-V^{\\pi_\\theta}_\\phi(s_t)\\right]\\right] \\] <p>Control Variates</p> \\[ \\nabla_\\theta J(\\theta)=\\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[\\sum_{t=1}^T \\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\left(\\hat{Q}^{\\pi_\\theta}_{t}-Q^{\\pi_\\theta}_\\phi(s_t,a_t)\\right)\\right]+\\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[\\sum_{t=1}^T \\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)Q^{\\pi_\\theta}_\\phi(s_t,a_t)\\right] \\] <p>N-Step Return</p> \\[ \\nabla_\\theta J(\\theta)=\\mathbb{E}_{\\tau\\sim p_\\theta(\\tau)}\\left[\\sum_{t=1}^T \\nabla_{\\theta}\\log \\pi_\\theta(a_t|s_t)\\left[\\left(\\sum_{t'=t}^{t+n-1} \\gamma^{t'-t} r(s_{t'},a_{t'})\\right)+\\gamma^n V_\\phi^{\\pi_\\theta}(s_{t+n})-V^{\\pi_\\theta}_\\phi(s_t)\\right]\\right] \\] <p>Generalized Advantage Estimation</p> \\[ A_{\\text{GAE}}^{\\pi_\\theta}(s_t,a_t)=\\sum_{n=1}^\\infty \\lambda^{n-1} A^{\\pi_\\theta}_n(s_t,a_t) \\]"},{"location":"Online%20CS%20Courses/CS285/takeaway/#7-value_function","title":"7-Value Function","text":"<p>Value Iteration</p> \\[ V^\\pi(s_t)\\leftarrow \\max_{a_t}\\left\\{r(s_t,a_t)+\\gamma \\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}[V^{\\pi}(s_{t+1})]\\right\\} \\] <p>Q Iteration</p> \\[ Q^\\pi(s_t,a_t)\\leftarrow r(s_t,a_t)+\\gamma \\mathbb{E}_{s_{t+1}\\sim p(s_{t+1}|s_t,a_t)}\\left[\\max_{a_{t+1}}Q^{\\pi}(s_{t+1},a_{t+1})\\right] \\] <p>Fitting Q Iteration Algorithm</p> <p>\u91cd\u590d\uff1a 1. \u6536\u96c6\u6570\u636e\u96c6\uff0c\u5305\u542b\u4e00\u7cfb\u5217\u7684 \\(\\{s,a,s',r\\}\\) \uff1b 2. \u91cd\u590d \\(K\\) \u6b21\uff1a     1. \u6839\u636e\u516c\u5f0f\u8ba1\u7b97 \\(Q\\) \u7684\u76ee\u6807\uff1b     2. \u4f5c \\(S\\) \u6b21\u68af\u5ea6\u4e0b\u964d\uff0c\u6700\u5c0f\u5316\u62df\u5408\u8bef\u5dee</p> <p>Vanilla Q Learning Algorithm</p> <p>\u91cd\u590d\uff1a 1. \u4ece\u73af\u5883\u4e2d\u6839\u636e\u67d0\u79cdpolicy\u91c7\u6837\u4e00\u4e2a \\((s,a,s',r)\\) \uff1b 2. \u8ba1\u7b97\u4e00\u4e2a \\([Q^\\pi(s,a)]^\\star=r(s,a)+\\gamma\\max_{a'}Q^{\\pi}_\\phi(s',a')\\) 3. \u5bf9 \\(L=([Q^\\pi(s,a)]^\\star-Q^{\\pi}_\\phi(s,a))^2\\) \u4f5c\u4e00\u6b65\u68af\u5ea6\u4e0b\u964d\u3002</p> <p>DQN Algorithm</p> <pre><code>while True:\n    for _ in range(N):\n        InteractWithEnv()\n        for _ in range(K): # usually K=1\n            GetTargetFromBuffer()\n            GradStep()\n    phi_0=phi\n</code></pre>"},{"location":"Online%20CS%20Courses/CS285/takeaway/#8-q_learning","title":"8-Q Learning","text":"<p>Double Q-learning</p> \\[ Q_\\phi(s_t,a_t)\\leftarrow r(s_t,a_t)+\\gamma Q_{\\phi_0}(s_{t+1},\\arg \\max Q_{\\textcolor{red}{\\phi}}(s_{t+1},a)) \\] <p>DDPG Algorithm</p> <p>\u91cd\u590d\uff1a 1. \u4ece\u73af\u5883\u4e2d\u6839\u636e\u67d0\u79cdpolicy\u91c7\u6837\u4e00\u4e2a \\((s,a,s',r)\\) \uff0c\u52a0\u5165replay buffer \\(B\\) \uff1b 2. \u4ecereplay buffer\u53d6\u51fa\u4e00\u4e2abatch(\u76f8\u5f53\u4e8e \\(K=1\\) )\uff0c\u8ba1\u7b97\u76ee\u6807 \\([Q(s,a)]^\\star=r(s,a)+\\gamma Q_{\\phi_0}(s',\\pi_{\\theta_0}(s'))\\) \uff1b 3. \u5bf9 \\(L(\\phi)=\\sum_{(s,a)}([Q(s,a)]^\\star-Q_\\phi(s,a))^2\\) \u4f5c\u4e00\u6b65\u68af\u5ea6\u4e0b\u964d\uff1b 4. \u5bf9 \\(L(\\theta)=-\\sum_s Q_\\phi(s,\\pi_\\theta(s))\\) \u505a\u4e00\u6b65\u68af\u5ea6\u4e0b\u964d\uff1b 5. \u66f4\u65b0 \\(\\phi_0,\\theta_0\\) \uff0c\u53ef\u4ee5\u4f7f\u7528\u9694 \\(N\\) \u6b21\u66f4\u65b0\u4e00\u6b21\u7684\u65b9\u6cd5\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528Polyak\u5e73\u5747\u7684\u65b9\u6cd5\u3002</p>"},{"location":"Online%20CS%20Courses/CS285/takeaway/#9-advanced_policy_gradients","title":"9-Advanced Policy Gradients","text":"<p>KL Penalty</p> \\[ \\tilde{J}=\\sum_{t=0}^{T-1}\\gamma^t \\mathbb{E}_{s_t\\sim p_{{\\theta_0}}(s_t)}\\left[\\mathbb{E}_{a_t\\sim \\pi_{\\theta_0}(a_t|s_t)}\\left[A^{\\pi_{\\theta_0}}(s_t,a_t)\\frac{\\pi_{\\theta_1}(a_t|s_t)}{\\pi_{\\theta_0}(a_t|s_t)}\\right]\\right]-\\beta \\text{KL}\\left(\\pi_{\\theta_1}(\\cdot|s_t)||\\pi_{\\theta_0}(\\cdot|s_t)\\right) \\] <ul> <li>example method (know the name): PPO</li> </ul> <p>Natural Gradients</p> \\[ \\theta_1\\leftarrow \\theta_0 + \\eta \\frac{F^{-1}g}{\\sqrt{g^TF^{-1}g}},g=\\nabla_\\theta J(\\theta) \\] \\[ \\mathbf{F}=\\mathbb{E}_{a\\sim \\pi_\\theta(a|s)}\\left[\\nabla_\\theta \\log \\pi_\\theta(a|s)\\nabla_\\theta \\log \\pi_\\theta(a|s)^T\\right] \\] <ul> <li>example method (know the name): TRPO</li> </ul>"},{"location":"Online%20CS%20Courses/CS285/takeaway/#10_optimal_control_planning","title":"10 Optimal Control &amp; Planning","text":"<p>Cross Entropy Method</p> <p>\u91cd\u590d\uff1a 1. \u968f\u673a\u91c7\u6837 \\(\\mathbf{A}_1,\\mathbf{A}_2,\\cdots,\\mathbf{A}_N\\) \uff08\u8fd9\u91cc \\(\\mathbf{A}=(a_1,\\cdots,a_T)\\) \uff09\uff1b 2. \u8ba1\u7b97 \\(J(\\mathbf{A}_1),J(\\mathbf{A}_2),\\cdots,J(\\mathbf{A}_N)\\) \uff1b 3. \u4fdd\u7559\u6700\u597d\u7684 \\(M\\) \u4e2a\u6570\u636e\u70b9\uff0c\u66f4\u65b0 \\(p(\\mathbf{A})\\) \u4f7f\u5f97\u5b83\u66f4\u63a5\u8fd1\u8fd9 \\(M\\) \u4e2a\u6570\u636e\u70b9\u7684\u5206\u5e03\u3002\u4e00\u822c\u5730\uff0c \\(p(\\mathbf{A})\\) \u53d6\u4e3a\u9ad8\u65af\u5206\u5e03\u3002</p> <p>Monte Carlo Tree Search</p> <pre><code>def MCTS(root):\n    while True:\n        # Selection &amp; Expansion\n        node = TreePolicy(root)\n        # Simulation\n        reward = DefaultPolicy(node)\n        # Backpropagation\n        update(node,reward)\n\ndef update(node,reward):\n    while True:\n        node.N += 1\n        node.Q += reward\n        if node.parent is None:\n            break\n        node = node.parent\n\ndef TreePolicy(expanded):\n    \"\"\"UCT Tree Policy\"\"\"\n    if not root.fully_expanded():\n        return root.expand()\n    else:\n        best_child = argmax([Score(child) for child in root.children])\n        return TreePolicy(best_child)\n\ndef Score(node):\n    return node.Q/node.N + C*sqrt(log(node.parent.N)/node.N)\n</code></pre> <p>LQR</p> <ul> <li>Backward Pass</li> </ul> <ol> <li>\u521d\u59cb\u5316\uff1a \\(\\mathbf{Q}_T=\\dbinom{A_T\\quad B_T}{B_T^T\\quad C_T},\\mathbf{q}_T=\\dbinom{x_T}{y_T}\\)</li> <li>\u5bf9 \\(t=T,T-1,\\cdots,1\\) \uff1a<ol> <li>\\(a_t=-C_t^{-1}(y_t+B_ts_t)\\)</li> <li>\\(V_t=A_t-B_t^TC_t^{-1}B_t, \\quad v_t=xt-B_t^TC_t^{-1}y_t\\)</li> <li>\\(\\dbinom{A_{t-1}\\quad B_{t-1}}{B_{t-1}^T\\quad C_{t-1}}\\texttt{ += } \\mathbf{F}_{T-1}^TV_{t}\\mathbf{F}_{T-1}\\) \uff08\u5bf9\u5e94 \\(\\mathbf{Q}_{t-1}\\) \uff09\uff1b \\(\\dbinom{x_{t-1}}{y_{t-1}}\\texttt{ += } (\\mathbf{F}_{T-1}^TV_{t}^T+v_{t}^T)\\mathbf{F}_{T-1}\\) \uff08\u5bf9\u5e94 \\(\\mathbf{q}_{t-1}\\) \uff09</li> </ol> </li> </ol> <ul> <li>Forward Pass</li> </ul> <p>\u5bf9 \\(t=1,2,\\cdots,T\\) :</p> <ol> <li>\\(a_t=-C_t^{-1}(y_t+B_ts_t)\\)</li> <li>\\(s_{t+1}=\\mathbf{F_t}\\binom{s_t}{a_t}+f_t+f_t\\)</li> </ol> <p>iLQR</p> <p>\u91cd\u590d\uff1a 1. \u8ba1\u7b97\u5404\u4e2a\u504f\u5bfc\u6570\uff1b 2. \u8fd0\u884cLQR\u7684backward pass\uff0c\u5f97\u5230 \\(a_t\\) \u5173\u4e8e \\(s_t\\) \u7684\u7ebf\u6027\u5173\u7cfb\u7684\u7cfb\u6570\uff08\u5373\u524d\u9762\u7684 \\(a_t=-C_t^{-1}(y_t+B_ts_t)\\) \uff09\uff1b 3. \u8fd0\u884cLQR\u7684forward pass\uff08\u53ef\u4ee5\u5f15\u5165 \\(\\alpha\\) \u4ee5\u4fdd\u8bc1\u6536\u655b\u6027\uff09\u3002\u4f46\u8fd9\u4e00\u6b65\u8ba1\u7b97 \\(s_t\\) \u7684\u65f6\u5019\uff0c\u6211\u4eec\u5fc5\u987b\u91c7\u7528\u771f\u5b9e\u7684\u6f14\u5316\u51fd\u6570 \\(f\\)\uff0c\u800c\u4e0d\u662f\u7ebf\u6027\u8fd1\u4f3c\u3002</p> <p>Model Predictive Control</p> <p>\u91cd\u590d:</p> <ol> <li>\u6839\u636e\u5f53\u524d\u7684state \\(s_t\\) \uff0c\u628a\u5b83\u5f53\u6210\u7b2c\u4e00\u6b65\uff0c\u5bf9 \\(\\sum_{t'=t}^{t+T_0}c(s_{t'},a_{t'})\\) \u8fd0\u884ciLQR\uff0c\u5f97\u5230\u6700\u4f18\u7684\u4e00\u7cfb\u5217action \\(a_t,a_{t+1},\\cdots,a_{t+T_0}\\) \uff1b</li> <li>\u6254\u6389\u540e\u9762\u7684\u6240\u6709action\uff0c\u4fdd\u7559 \\(a_t\\) \uff0c\u5e76\u548c\u73af\u5883\u8fdb\u884c\u4e00\u6b65\u4ea4\u4e92\u3002</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/takeaway/#11_model-based_rl","title":"11 Model-Based RL","text":"<p>Model-Based RL Algorithm (a.k.a. Model Predictive Control,MPC)</p> <ol> <li>\u7528\u67d0\u79cdbaseline policy \\(\\pi_0\\) \uff08\u6bd4\u5982\u968f\u673a\u91c7\u6837\uff09\u83b7\u5f97\u4e00\u4e2a\u6570\u636e\u96c6 \\(D=\\{(s,a,s')\\}\\) \uff1b</li> <li>\u91cd\u590d\uff1a<ol> <li>\u5728 \\(D\\) \u4e0a\u5b66\u4e60\u4e00\u4e2a\u52a8\u529b\u5b66\u6a21\u578b \\(f(s,a)\\) \uff0c\u4f7f\u5f97 \\(f(s,a)\\approx s'\\) \uff1b</li> <li>\u4f7f\u7528\u67d0\u79cdplanning\u7684\u65b9\u6cd5\u6765\u66f4\u65b0\u6700\u4f18\u7b56\u7565 \\(\\pi\\) \u3002\u4e00\u822c\u5730\uff0crandom shooting\u5c31\u8db3\u591f\u4e86\uff1b</li> <li>\u8fd0\u884c\u5f53\u524d\u7684\u6700\u65b0\u7b56\u7565 \\(\\pi\\) \u4ec5\u4e00\u6b65, \u6536\u96c6 \u4e00\u7ec4\uff08\u4e0d\u662f\u4e00\u4e2a\uff09 \u6570\u636e\uff0c\u52a0\u5165\u6570\u636e\u96c6\uff1a \\(D=D\\cup \\{(s,a,s')\\}\\) \uff1b</li> </ol> </li> </ol> <p>Uncertainty</p> <p>\u6838\u5fc3\u5173\u7cfb\uff1a</p> \\[ p(s_{t+1}|s_t,a_t)=\\mathbb{E}_{\\theta\\sim p(\\theta|D)}[p(s_{t+1}|s_t,a_t;\\theta)] \\] <p>Algorithm:</p> <ol> <li>\u5bf9\u6bcf\u4e00\u4e2aensemble\u4e2d\u7684\u6a21\u578b \\(\\theta\\) \uff1a<ol> <li>\u5bf9 \\(t=1,2,\\cdots,T-1\\) \uff0c\u4e0d\u65ad\u7528\u8fd9\u4e00\u4e2a \\(\\theta\\) \u8ba1\u7b97 \\(s_{t+1}\\) \uff1b</li> <li>\u8ba1\u7b97 \\(J\\) \u3002</li> </ol> </li> <li>\u8ba1\u7b97\u5404\u4e2a\u5f97\u5230\u7684 \\(J\\) \u7684\u5e73\u5747\u503c\u3002</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/takeaway/#12_model_based_method_with_policy","title":"12 Model Based Method with Policy","text":"<p>MBPO Algorithm</p> <pre><code>while True:\n    # sample data\n    if q_net is None: # first epoch, random sample\n        env_data = SampleFromEnv(policy=random)\n    else:\n        env_data = SampleFromEnv(policy=ExplorePolicy(q_net))\n    dynamic_buffer.AddData(env_data)\n    q_buffer.AddData(env_data)\n\n    # train dynamic model\n    dynamic_model.Train(dynamic_buffer.Sample())\n    for _ in range(K):\n        # add additional data to Q learning data buffer\n        start_point = dynamic_buffer.Sample(n)['states'] # n: a hyperparameter, usually = 1\n        path = dynamic_model.GetTrajectories(\n            start=start_point,\n            length=T, \n            policy=q_net\n        )\n        q_buffer.AddData(path)\n\n        # get Q-learning data\n        train_q_data = q_buffer.Sample()\n        for _ in range(S):\n            q_net.GradStep(train_q_data)\n            q_net.Update()\n</code></pre> <p>Dyna Algorithm</p> <p>\u91cd\u590d\uff1a</p> <ol> <li>\u8fd0\u884c\u67d0\u79cdpolicy\uff08\u9700\u8981exploration\uff09\u83b7\u5f97\u4e00\u4e9b \\((s,a,s',r)\\) \uff0c\u52a0\u5165replay buffer \\(B\\) \uff1b</li> <li>\u7528\u8fd9\u4e00\u7ec4\u6570\u636e\u66f4\u65b0\u4e00\u6b65dynamic model\uff1b</li> <li>\u7528\u8fd9\u4e00\u7ec4\u6570\u636e\u66f4\u65b0\u4e00\u6b21Q function\uff1b</li> <li>\u91cd\u590d \\(K\\) \u6b21\uff1a<ol> <li>\u4ecebuffer\u4e2d\u53d6\u51fa\u4e00\u7ec4\u6570\u636e \\((s,a)\\) \u3002</li> <li>\u4ecemodel\u7ed9\u51fa\u7684\u6982\u7387 \\(p(s'|s,a)\\) \u4e2d\u91c7\u6837 \u51e0\u4e2a \\(s'\\) \uff0c\u5e76\u7528\u671f\u5f85\u503c\u518d\u6b21\u66f4\u65b0Q function\u3002</li> </ol> </li> </ol> <p>Successor Representation</p> \\[ r(h)=\\sum_j w_j\\phi_j(h) \\] \\[ \\psi_j (h_t):=\\sum_h \\phi_j(h)p_{\\text{fut}}(h|h_t) \\] \\[ Q^\\pi(h_t)=\\frac{1}{1-\\gamma} \\sum_j w_j\\psi_j (h_t) \\] \\[ \\psi_j (h_t)=(1-\\gamma)\\phi_j(h_t)+\\gamma\\sum_{h'}p_\\pi(h'|h_t)\\psi_j(h') \\] <p>Algorithm</p> <ol> <li>\u6536\u96c6\u4e00\u7cfb\u5217\u548c\u73af\u5883\u4ea4\u4e92\u7684\u6570\u636e \\((s,a,r)\\) \uff0c\u8bad\u7ec3\u53c2\u6570\u77e9\u9635 \\(w\\) \u4f7f\u5f97 \\(|r(s,a)-\\sum_j w_j\\phi_j(s,a)|^2\\) \u88ab\u6700\u5c0f\u5316\uff1b</li> <li>\u9009\u5b9a\u5f88\u591a\u5f88\u591a\u4e2apolicy \\(\\pi_1,\\cdots,\\pi_k\\)</li> <li>\u5bf9 \\(i=1,\\cdots,k\\) \uff1a<ol> <li>\u6839\u636e\u5f53\u524d\u7684\u7b56\u7565 \\(\\pi\\) \uff0c\u4f7f\u7528\u4e0a\u9762\u7684\u9012\u63a8\u5173\u7cfb\uff0c\u7c7b\u4f3cQ-learning\u5730\u8bad\u7ec3 \\(\\psi_j\\) \uff1b</li> <li>\u5229\u7528 \\(\\psi\\) \u548c \\(w\\) \u8ba1\u7b97 \\(Q(s,a)=\\frac{1}{1-\\gamma} \\sum_j w_j\\psi_j (s,a)\\) \u3002</li> </ol> </li> <li>\u9009\u51fa\u4e00\u4e2a\u8868\u73b0\u8d85\u8fc7\u524d\u9762\u6240\u6709policy\u7684policy \\(\\pi^\\star\\) \u3002\u5177\u4f53\u5730\uff0c\u4ee4</li> </ol> \\[ \\pi^\\star(s)=\\arg\\max_a \\max_i \\sum_j w^{\\pi_i}_j\\psi^{\\pi_i}_j(s,a)  \\]"},{"location":"Online%20CS%20Courses/CS285/takeaway/#13_exploration","title":"13 Exploration","text":"<p>UCB</p> \\[ r^{+}(s,a)=r(s,a)+B(s)=r(s,a)+C\\sqrt{\\frac{\\log T}{N(s)}} \\] <p>Thompson Sampling</p> <p>\u91cd\u590d\uff1a</p> <ol> <li>\u4ece\u5f53\u524d\u7684\u6a21\u578b \\(p_\\phi(Q)\\) \u91c7\u6837\u4e00\u4e2a \\(Q\\) \uff1b</li> <li>\u5229\u7528 \\(Q\\) \u8fdb\u884c\u6700\u4f18\u51b3\u7b56\uff0c\u8dd1\u4e00\u4e2arollout\uff1b</li> <li>\u7528\u8fd9\u4e2arollout\u7684\u6570\u636e\u66f4\u65b0 \\(p_\\phi(Q)\\) \u3002</li> </ol> <p>Information Gain</p> \\[ q(\\theta|\\phi)=\\prod_i \\mathcal{N}(\\theta_i|\\mu_{\\phi,i},\\sigma_{\\phi,i}) \\] \\[ \\phi = \\arg \\min_{\\phi}\\text{KL}\\left(q(\\theta|\\phi)\\Bigg|\\Bigg|p(h|\\theta)\\frac{p(\\theta)}{p(h)}\\right) \\] \\[ \\text{IG}(a)\\approx \\text{KL}(q(\\theta|\\phi')||q(\\theta|\\phi)) \\] \\[ a=\\arg\\min_a \\frac{\\left(Q(s,a^{\\star})-Q(s,a)\\right)^2}{\\text{IG}(a)} \\]"},{"location":"Online%20CS%20Courses/CS285/takeaway/#14_exploration2","title":"14 Exploration(2)","text":"<p>Imagining Goals</p> <ol> <li>\u5728latent space\u968f\u673a\u91c7\u6837\u4f5c\u4e3a\u76ee\u6807\uff1a \\(z_g\\sim p(z)\\) \uff0c\u7136\u540e\u901a\u8fc7decoder\u751f\u6210\u76ee\u6807state\uff1a \\(x_g\\sim p_\\theta(x_g|z_g)\\) \uff1b</li> <li>\u6309\u7167\u73b0\u6709\u7684policy \\(\\pi(a|x,x_g)\\) \u6765\u6536\u96c6rollout\uff0c\u5f97\u5230\u6700\u7ec8\u7684state \\(\\bar{x}\\) \uff08\u6700\u7ec8\u7406\u60f3\u4e0a\uff0c\u6211\u4eec\u5e0c\u671b \\(\\bar{x}=x_g\\) \uff09\uff1b</li> <li>\u5229\u7528\u73b0\u5728\u7684\u6570\u636e\u8bad\u7ec3 \\(\\pi\\) \uff1b</li> <li>\u628a \\(\\bar{x}\\) \u52a0\u5165\u6570\u636e\u96c6\uff0c\u7528weighted MLE\u6765\u8bad\u7ec3VAE\uff08 \\(\\log p_\\theta(\\bar{x})\\to p_\\theta(\\bar{x})^\\alpha \\cdot \\log p_\\theta(\\bar{x})\\) \uff09</li> </ol> <p>\u7b49\u6548\u76ee\u6807\uff1a</p> \\[ J=\\mathcal{H}(\\tilde{p}(g))-\\mathcal{H}(\\tilde{p}(g|\\bar{x})) \\] <p>State Marginal Matching</p> <ol> <li>\u91cd\u590d<ol> <li>\u6839\u636e \\(\\tilde{r}(s)=\\log p^{\\star}(s)-\\log p_\\pi(s)\\) \u6765\u8bad\u7ec3 \\(\\pi\\) \uff1b</li> <li>\u6839\u636e\u5386\u53f2\u4e0a\u6240\u6709\u7684\u8f68\u8ff9\u6570\u636e\u6765update \\(p_\\pi(s)\\) \u3002</li> </ol> </li> <li>\u4e0d\u8fd4\u56de\u6700\u540e\u7684 \\(\\pi\\) \uff0c\u800c\u662f\u8fd4\u56de\u5386\u53f2\u4e0a\u6240\u6709 \\(\\pi\\) \u7684\u5e73\u5747\u3002</li> </ol> <p>Exploration by Skills</p> \\[ J=\\sum_z \\mathbb{E}_{s\\sim \\pi(s|z)}[\\log p_D(z|s)] \\]"},{"location":"Online%20CS%20Courses/CS285/takeaway/#15_offline_rl_1","title":"15 Offline RL (1)","text":"<p>LSPI Algorithm</p> <p>\u91cd\u590d\uff1a</p> <ol> <li>\u5229\u7528\u5f53\u524d\u7684policy\u548c\u56fa\u5b9a\u4e0d\u52a8\u7684\u6570\u636e\u96c6\u8ba1\u7b97 \\(w_q=(\\Phi^T\\Phi-\\gamma \\Phi^T \\Phi')^{-1}\\Phi^T r\\) \uff0c\u5176\u4e2d \\(\\Phi'\\) \u7684\u6784\u9020\u65b9\u5f0f\u662f\uff1a\u5982\u679c \\(\\Phi\\) \u7684\u67d0\u4e00\u884c\u5bf9\u5e94\u7740 \\((s,a)\\) \u7684feature\uff0c\u90a3\u4e48 \\(\\Phi'\\) \u7684\u90a3\u4e00\u884c\u5c31\u5bf9\u5e94\u7740 \\((s',a')\\) \u7684feature\u3002\uff08\u6bcf\u6b21\u7b2c\u4e8c\u6b65\u66f4\u6362 \\(\\pi\\) \u4e4b\u540e\uff0c\u90fd\u8981\u91cd\u65b0\u8ba1\u7b97\u4e00\u6b21 \\(\\Phi'\\) \u3002\uff09</li> <li>\u5229\u7528 \\(w_q\\) \uff0c\u66f4\u65b0\uff1a \\(\\pi(s)\\leftarrow \\arg\\max_a [\\Phi(s,a)w_Q]\\)</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/takeaway/#16_offline_rl_2","title":"16 Offline RL (2)","text":"<p>AWAC Algorithm</p> <p>\u91cd\u590d\uff1a</p> <ol> <li>\u4f7f\u7528 \\(L_{\\text{AWAC}}(\\theta)=\\mathbb{E}_{s,a\\sim \\pi_\\beta}\\left[(\\log \\pi_\\theta(s|a))\\cdot\\exp\\left(\\frac{A_{\\phi}(s,a)}{\\lambda}\\right)\\right]\\) \u6765\u8bad\u7ec3 \\(\\theta\\) \uff1b</li> <li>\u4f7f\u7528 \\(L_Q(\\phi)=\\mathbb{E}_{s,a,s'\\sim \\pi_{\\beta}}\\left[(Q_\\phi(s,a)-(r(s,a)+\\gamma \\mathbb{E}_{a'\\sim \\pi_\\theta(\\cdot|s')}[Q_\\phi(s',a')]))^2\\right]\\) \u6765\u8bad\u7ec3 \\(\\phi\\) \u3002</li> </ol> <p>IQL Algorithm</p> <ol> <li> <p>\u91cd\u590d\uff1a</p> <ol> <li>\u4f7f\u7528 \\(L_V(\\psi)=\\mathbb{E}_{s\\sim \\pi_\\beta}\\left[\\text{ExpectileLoss}_{\\tau,Q_\\phi(s,a)(a\\sim \\pi_\\beta)}(V_\\psi(s))\\right]\\) \u6765\u8bad\u7ec3 \\(\\psi\\) \uff1b</li> <li>\u4f7f\u7528 \\(L_Q(\\phi)=\\mathbb{E}_{s,a,s'\\sim \\pi_\\beta}\\left[(Q_\\phi(s,a)-(r(s,a)+\\gamma V_\\psi(s')))^2\\right]\\) \u6765\u8bad\u7ec3 \\(\\phi\\) \uff1b</li> </ol> </li> <li> <p>\u6700\u540e\uff08\u5728eval\u65f6\uff09\uff1a</p> <ol> <li>\u4f7f\u7528 \\(L_{\\text{AWAC}}(\\theta)=\\mathbb{E}_{s,a\\sim \\pi_\\beta}\\left[(\\log \\pi_\\theta(s|a))\\cdot\\exp\\left(\\frac{A_{\\phi}(s,a)}{\\lambda}\\right)\\right]\\) \u6765\u8bad\u7ec3 \\(\\theta\\) \u3002</li> </ol> </li> </ol> <p>CQL Algorithm</p> \\[ L_{Q,\\text{additional}}=\\alpha\\cdot\\left[\\lambda \\mathbb{E}_{s\\sim D}\\left[\\log\\left(\\sum_{a}\\exp\\left(\\frac{Q(s,a)}{\\lambda}\\right)\\right)\\right]-\\mathbb{E}_{s\\sim D,a\\sim \\pi_\\beta(a|s)}[Q(s,a)]\\right] \\] <p>\u91cd\u590d\uff1a</p> <ol> <li>\u4f7f\u7528 \\(L_Q(\\phi)=\\mathbb{E}_{s,a,s'\\sim \\pi_{\\beta}}\\left[(Q_\\phi(s,a)-(r(s,a)+\\gamma \\mathbb{E}_{a'\\sim \\pi_\\theta(\\cdot|s')}[Q_\\phi(s',a')]))^2\\right]+L_{Q,\\text{additional}}\\) \u6765\u8bad\u7ec3 \\(\\phi\\) \uff1b</li> <li>\u8bad\u7ec3policy\uff1a \\(L_{\\pi}(\\theta)=-\\mathbb{E}_{s\\sim \\pi_\\beta}\\left[\\mathbb{E}_{a\\sim \\pi_\\theta(\\cdot|s)}[Q(s,a)]\\right]\\)</li> </ol> <p>Uncertainty-based Model-based Offline RL</p> \\[ \\tilde{r}(s,a)=r(s,a)-\\lambda u(s,a) \\] <p>COMBO</p> \\[ L_{Q,\\text{additional}}=\\beta\\cdot(\\mathbb{E}_{s,a\\sim \\hat{p}}[Q(s,a)]-\\mathbb{E}_{s,a\\sim \\pi_\\beta}[Q(s,a)]) \\]"},{"location":"Online%20CS%20Courses/CS285/takeaway/#19_soft_optimality","title":"19 Soft Optimality","text":"<p>Objective</p> \\[ \\pi = \\arg \\max_{\\pi} \\mathbb{E}_{\\tau\\sim p_{\\pi}(\\tau)}\\left[\\sum_{t}r(s_t,a_t)-\\log \\frac{\\pi(a_t|s_t)}{p(a_t|s_t)}\\right] \\] <p>Theoretical Solution</p> \\[ \\hat{Q}(s_t,a_t)=r(s_t,a_t)+\\gamma \\mathbb{E}_{s_{t+1}}[\\hat{V}(s_{t+1})] \\] \\[ \\hat{V}(s_{t+1})=\\alpha\\cdot \\mathbb{E}_{a_{t+1}\\sim p(a_{t+1}|s_{t+1})}\\left[\\exp \\left(\\frac{\\hat{Q}(s_{t+1},a_{t+1})}{\\alpha}\\right)\\right] \\] \\[ \\pi(a_t|s_t)=\\frac{\\exp \\left(\\frac{\\hat{Q}(s_t,a_t)}{\\alpha }\\right)}{\\exp \\left(\\frac{\\hat{V}(s_t)}{\\alpha }\\right)}p(a_t|s_t) \\] <p>SAC algorithm</p> <p>\u91cd\u590d\uff1a</p> <ol> <li>\u66f4\u65b0 Q function: \\(Q(s,a)\\leftarrow r(s,a)+\\gamma[Q(s',a')-\\log \\pi(a'|s')]\\) \uff08\u5f53\u7136\uff0c\u8981\u91c7\u7528target network\u7b49\u4f18\u5316\uff0c\u548c\u4e4b\u524d\u4e00\u6837\uff0c\u4e0d\u518d\u8d58\u8ff0\uff09\uff1b</li> <li>\u4f7f\u7528 REINFORCE \u6216\u8005 REPARAMETERIZE \u6765\u66f4\u65b0policy\uff0cobjective\u4e3a \\(J=\\mathbb{E}_{a\\sim \\pi(a|s)}[Q(s,a)-\\log \\pi(a|s)]\\) \u3002<ul> <li>\u5982\u679c\u4f7f\u7528 REINFORCE\uff0c\u90a3\u4e48 fake loss \u4e3a \\(\\hat{J}=\\mathbb{E}_{a\\sim \\pi(a|s)}[\\log \\pi(a|s)Q(s,a)]+\\mathcal{H}(a|s)\\) \uff08\u8fd9\u662f\u5bf9\u4e00\u7ec4\u6570\u636e\u7684\u68af\u5ea6\uff09\uff1b</li> <li>\u5982\u679c\u4f7f\u7528 REPARAMETERIZE\uff0c\u90a3\u4e48\u76f4\u63a5\u8ba1\u7b97loss\u5c31\u53ef\u4ee5\u4e86\u3002</li> <li>\u4f60\u53ef\u80fd\u4f1a\u7591\u95ee\uff0c\u7528 REINFORCE \u600e\u4e48\u8ba1\u7b97\u71b5 \\(\\mathcal{H}\\) \u7684\u68af\u5ea6\uff1f\u5b9e\u9645\u4e0a\uff0c\u4e5f\u4e0d\u662f\u4e0d\u53ef\u4ee5\uff0c\u53ea\u9700\u8981\u628afake loss\u8bbe\u7f6e\u4e3a \\(\\frac{1}{2}\\mathbb{E}_{a\\sim \\pi(a|s)}[(\\log \\pi(a|s))^2]\\) \u5c31\u53ef\u4ee5\u4e86\u3002\u5f53\u7136\uff0c\u8fd9\u770b\u8d77\u6765\u6bd4\u8f83\u5947\u602a\u3002\u5b9e\u9645\u4e0a\uff0cREPARAMETERIZE\u7684\u6548\u679c\u786e\u5b9e\u4e5f\u66f4\u597d\u3002</li> </ul> </li> <li>\u6839\u636epolicy\u6765\u6536\u96c6\u6570\u636e\u3002</li> </ol>"},{"location":"Online%20CS%20Courses/CS285/takeaway/#20_inverse_reinforcement_learning","title":"20 Inverse Reinforcement Learning","text":"<p>MaxEnt IRL (sampling version)</p> <p>\u521d\u59cb\u5316 \\(\\pi_\\psi\\) \u4e3a\u968f\u673a\u7b56\u7565\uff1b</p> <ol> <li>\u5728\u5f53\u524d\u7684 \\(\\psi\\) \u4e0b\uff0c\u4f7f\u7528soft optimality\u7684\u76ee\u6807\u8bad\u7ec3 \\(\\pi_\\psi\\) \u51e0\u6b65\uff1b</li> <li>\u7528\u4e0a\u9762contrastive learning\u7684\u516c\u5f0f\uff0c\u901a\u8fc7\u4ece \\(\\pi_\\psi\\) \u4e2d\u91c7\u6837\u6765\u8ba1\u7b97\u68af\u5ea6\uff1b</li> <li>\u7528\u68af\u5ea6\u66f4\u65b0 \\(\\psi\\) \u3002</li> </ol> \\[ \\nabla_{\\psi}J=\\mathbb{E}_{\\tau\\sim \\pi^\\star}\\left[\\sum_{t}\\nabla r_\\psi(s_t,a_t)\\right]-\\mathbb{E}_{\\tau\\sim \\pi_\\psi}\\left[\\sum_{t}\\nabla r_\\psi(s_t,a_t)\\right] \\] <p>Importance weighted modification:</p> \\[ \\nabla_{\\psi}J\\approx \\mathbb{E}_{\\tau\\sim \\pi^\\star}\\left[\\sum_{t}\\nabla r_\\psi(s_t,a_t)\\right]- \\frac{1}{\\sum_{i=1}^N w(\\tau_i)}\\sum_{i=1}^N w(\\tau_i)\\nabla r_\\psi(s_t,a_t) \\] \\[ w(\\tau)=\\frac{1}{p(O_{1..T})}\\frac{\\exp \\sum_t r(s_t,a_t)}{\\pi(a_1|s_1)\\cdots\\pi(a_T|s_T)} \\] <p>Adversarial IRL</p> \\[ D_\\psi(\\tau;\\pi)=\\frac{\\frac{1}{Z_\\psi}\\exp \\sum_t r_\\psi(s_t,a_t)}{\\frac{1}{Z_\\psi}\\exp \\sum_t r_\\psi(s_t,a_t) + \\prod_t \\pi(a_t|s_t)} \\] \\[ J = \\min_{\\pi}\\max_\\psi \\mathbb{E}_{\\tau\\sim \\pi^\\star}[\\log D_\\psi(\\tau;\\pi)]+\\mathbb{E}_{\\tau\\sim \\pi}[\\log (1-D_\\psi(\\tau;\\pi))] \\]"},{"location":"Online%20CS%20Courses/CS285/takeaway/#21_rl_and_lm","title":"21 RL and LM","text":"<p>POMDP - \u6700\u4f18\u7b56\u7565\u53ef\u80fd\u662f\u968f\u673a\u7684 - memoryless: policy gradient - memoryful: value-based, with state model/history states</p> <p>DPO</p> \\[ J_{\\text{DPO}}(\\theta)=\\mathbb{E}_{(s,a_1\\succ a_2)}\\left[\\log \\sigma\\left(\\beta\\cdot\\left(\\log \\frac{\\pi_\\theta(a_1|s)}{\\pi_0(a_1|s)} - \\log \\frac{\\pi_\\theta(a_2|s)}{\\pi_0(a_2|s)}\\right)\\right)\\right] \\]"},{"location":"Online%20CS%20Courses/CS285/takeaway/#22_transfer_learning_meta_learning","title":"22 Transfer Learning &amp; Meta Learning","text":"<p>Transfer Learning: Concepts</p> <ul> <li>forward transfer learning<ul> <li>domain shift &amp; domain adaptation</li> <li>difference in dynamics: solution</li> <li>randomization helps</li> </ul> </li> <li>multi-task learning<ul> <li>contextual policies</li> <li>goal-conditioned policies</li> </ul> </li> </ul> <p>Meta Learning</p> \\[ \\text{Meta Learner }g_\\phi: \\text{MDP} \\to \\text{policy} \\] \\[ \\phi^\\star = \\arg\\max_\\phi J(g_\\phi;D_\\text{meta}) = \\arg\\max_\\phi \\sum_{\\text{MDP}\\in D_{\\text{meta}}}J(g_\\phi(\\text{MDP});\\text{MDP}) \\] <p>Methods: - RNN &amp; Contextual Policies - MAML - Variational Inference</p> <p>MAML</p> \\[ \\phi \\leftarrow \\phi + \\beta \\nabla_\\phi J_{\\text{meta}}(g_\\phi) = \\phi +  \\beta\\nabla_\\phi \\sum_{\\text{MDP}\\in D_{\\text{meta}}}J(\\pi_{\\phi + \\alpha \\nabla_\\phi J(\\pi_\\phi;\\text{MDP})};\\text{MDP}) \\]"},{"location":"Online%20CS%20Courses/CS50%20AI/note/","title":"Note","text":""},{"location":"Online%20CS%20Courses/CS50%20AI/note/#cs50_ai","title":"CS50 AI","text":""},{"location":"Online%20CS%20Courses/CS50%20AI/note/#lecture0_search","title":"Lecture0    search","text":"<ul> <li> <p>Knowledge: draw inference from information.</p> </li> <li> <p>Uncertain/Probably</p> </li> <li> <p>Optimization</p> </li> <li> <p>Learning</p> </li> <li>Neural networks: computer analog to that sort of idea.</li> <li>Language.</li> </ul>"},{"location":"Online%20CS%20Courses/CS50%20AI/note/#search_problem","title":"Search Problem :","text":"<ol> <li>Result(s,a): state &amp; action</li> <li>State space: the set of all states reachable from initial state.</li> <li>graphic associate all states and we need to know the  goal test.</li> <li>path cost: we hope it could be low.(minimize)</li> </ol>"},{"location":"Online%20CS%20Courses/CS50%20AI/note/#general_search","title":"General Search","text":"<p>a data structure that keeps track of</p> <p></p> <p>to avoid the mistakes, we need add the node to explored set.</p> <p>pseudocode:\u4f2a\u4ee3\u7801</p> <p>Depth-First Search \u2194 Breadth-First Search</p> <p>Heuristic function? leads Greedy Best-First Search.</p> <p>However, the Greedy Best-First Search is not always best for finding the shortest way. The A* Search generates.</p> <p></p>"},{"location":"Online%20CS%20Courses/CS50%20AI/note/#adversarial_search_tic-tac-toe","title":"Adversarial Search \uff08tic-tac-toe \u4e95\u5b57\u68cb\uff09","text":""},{"location":"Online%20CS%20Courses/CS50%20AI/note/#alpha-beta_pruning","title":"Alpha-Beta Pruning","text":""},{"location":"Online%20CS%20Courses/CS50%20AI/note/#depth-limited_minimax","title":"Depth-Limited Minimax","text":"<p>Evaluation function that estimate the expected utility of the game from a given state.</p>"},{"location":"Online%20CS%20Courses/CS50%20AI/note/#lecture1_knowledge","title":"Lecture1 Knowledge","text":"<p>Knowledge-based agents that reason by operating on internal representation of knowledge.</p> <p>assertion\u65ad\u8a00</p>"},{"location":"Online%20CS%20Courses/CS50%20AI/note/#proposition_knowledge","title":"Proposition(\u547d\u9898) Knowledge","text":"<p>five logical connectives:</p> <p> </p> <p>implication: only P is true and Q is false ,the result is false.</p> <p>biconditional: both P &amp; Q are true or false leads true .</p> <ul> <li>entailment: A is true , B is true.</li> </ul> <p>If we wonder whether a logic is right, we can check it in all model.</p>"},{"location":"Online%20CS%20Courses/CS50%20AI/note/#knowledge_engineering","title":"Knowledge Engineering","text":"<p>Game Clue</p> <p></p> <p></p>"},{"location":"Online%20CS%20Courses/CS50%20AI/note/#lecture2_probability","title":"Lecture2  Probability","text":"<p>Probably ultimately boils down to (\u5f52\u7ed3\u4e3a) the idea(like roll a die)</p> <p>\\(0 \\leq P(\\omega) \\leq 1\\)  &amp;  \\(\\sum_{\\omega\\in\\Omega}^{} P(\\omega) = 1\\)</p> <p>Negative: \\(P(\\neg a) = 1 - P(a)\\)</p> <p>Marginalization:\\(P(a) = P(a,b) + P(a,\\neg b)\\)</p> <p></p> <p></p> <p>calculate solution\uff1a\\(\\(P(a|b) =\\frac{P(a \\land b)}{P(b)}\\)\\)</p> <p>Independence is crucial. When a &amp; b is independent, \\(P(a \\land b)=P(a) \\times P(b)\\)</p>"},{"location":"Online%20CS%20Courses/CS50%20AI/note/#bayers_rule","title":"Bayer's Rule","text":"<p>$ P(b|a) = \\frac{P(b) \\times P(a|b)}{P(a)} $</p>"},{"location":"Online%20CS%20Courses/CS50%20AI/note/#joint_probability","title":"Joint Probability","text":"<p>$ P(C|rain) = \\alpha \\times P(C, rain) $</p>"},{"location":"Online%20CS%20Courses/CS50%20AI/note/#marginalization","title":"Marginalization","text":"<p>$ P(X = x_i) = \\sum_{j}P(X = x_i, Y = y_j) = \\sum_{j}P(X = x_i| Y = y_j)P(Y = y_j) $</p>"},{"location":"Online%20CS%20Courses/CS50%20AI/note/#condition","title":"Condition","text":"<p>$ P(a) = P(a|b)P(b) + P(a|\\neg b)P(\\neg b) $</p>"},{"location":"Online%20CS%20Courses/CS50%20AI/note/#bayesian_network","title":"Bayesian Network","text":"<p>data structure that represents the dependencies among random variable </p> <p></p>"},{"location":"Online%20CS%20Courses/CS50%20AI/note/#markov","title":"Markov","text":""},{"location":"Online%20CS%20Courses/CS50%20AI/note/#lecture_5","title":"Lecture 5","text":""},{"location":"Online%20CS%20Courses/CS50%20AI/note/#active_function","title":"Active function","text":"<p>\\(h(x_1, x_2)= w_0 + w_1 x_1 + w_2 x_2\\)</p> <p>weight 1 &amp; 2, and bias \\(w_0\\)</p> <p></p> <p></p> <p></p>"},{"location":"Online%20CS%20Courses/CS50%20AI/note/#gradient_descent","title":"Gradient Descent","text":"<p>Stochastic(\u968f\u673a) Gradient Descent: One data point</p> <p>Mini-Batch: One small batch .</p>"},{"location":"Online%20CS%20Courses/CS50%20AI/note/#perceptron","title":"Perceptron\uff08\u611f\u77e5\u673a\uff09","text":""},{"location":"Online%20CS%20Courses/CS50%20AI/note/#overfitting","title":"Overfitting","text":""},{"location":"Online%20CS%20Courses/CS50%20AI/note/#computer_vision_cnn","title":"Computer Vision &amp; CNN","text":"<p>max pooling always be used.</p> <p></p> <p>more resilient &amp; robust</p>"},{"location":"Online%20CS%20Courses/CS50%20AI/note/#rnn","title":"RNN","text":"<ol> <li>feed-forward NN</li> </ol>"},{"location":"Online%20CS%20Courses/CS61B/","title":"CS61B","text":""},{"location":"Online%20CS%20Courses/CS61B/note/","title":"Note","text":""},{"location":"Online%20CS%20Courses/CS61B/note/#lecture_1_introduction","title":"Lecture 1 Introduction","text":""},{"location":"Online%20CS%20Courses/CS61B/note/#crash_course_to_java","title":"Crash course to Java","text":"<p>\u5173\u4e8eJava\u8bed\u6cd5\u7684\u901f\u6210\u8bfe</p> <ol> <li>I totally think java is truly similar to C, so I just write down some important or easily mistakes .</li> <li>Note that <code>^</code> in Java is the \u201cXOR\u201d operator, not the exponentiation operation. That is, <code>2 ^ 10</code> is valid code, but it will return <code>8</code>, not <code>1024</code>.</li> <li>Java like python in sow the string.</li> <li></li> <li>If a type starts with a capital letter, it is likely a reference type.</li> <li></li> <li></li> <li>\u5173\u4e8eList\u3001Set\u548cDictionary\u7684\u90e8\u5206\u6211\u653e\u5230\u540e\u9762\u5b66\u4e60\uff0c\u56e0\u4e3a\u81ea\u5df1\u5bf9\u8fd9\u4e2a\u7684\u6846\u67b6\u642d\u5efa\u7684\u8fd8\u4e0d\u591f\u5b8c\u5584\uff0cclass\u662f\u4e2a\u503c\u5f97\u597d\u597d\u5b66\u4e60\u7684\u5730\u65b9\u3002</li> <li></li> </ol>"},{"location":"Online%20CS%20Courses/CS61B/note/#something_about_basic_oop","title":"Something about basic OOP","text":"<p>\u7531\u4e8e\u81ea\u5df1\u5728\u8fd9\u65b9\u9762\u7684\u77e5\u8bc6\u6ca1\u6709\u4e00\u4e2a\u7cfb\u7edf\u6027\u7684\u5b66\u4e60\uff0c\u6545\u901a\u8fc7CS61A\u7684\u90e8\u5206\u6765\u8865\u5145\u5b8c\u6210\u3002</p>"},{"location":"Online%20CS%20Courses/CS61B/note/#class","title":"Class","text":"<p>A class serves as a template for its instance.</p> <p></p> <pre><code># \u4e0b\u9762\u8fd9\u6bb5\u4ee3\u7801\u503c\u5f97\u597d\u597d\u7406\u89e3\nclass Worker:\n    greeting = 'Sir'\n    def __init__(self):\n        self.elf = Worker\n    def work(self):\n        return self.greeting + ', I work'\n    def __repr__(self):\n        return Bourgeoisie.greeting\n\nclass Bourgeoisie(Worker):\n    greeting = 'Peon'\n    def work(self):\n        print(Worker.work(self))\n        return 'I gather wealth'\n\n&gt;&gt;&gt; jack = Worker()\n&gt;&gt;&gt; john = Bourgeoisie()\n&gt;&gt;&gt; jack.greeting = 'Maam'\n&gt;&gt;&gt; Worker().work()\n'Sir, I work'\n&gt;&gt;&gt; jack\nPeon\n&gt;&gt;&gt; jack.work()\n'Maam, I work'\n&gt;&gt;&gt; john.work()\nPeon, I work\n'I gather wealth'\n&gt;&gt;&gt; john.elf.work(john)\n'Peon, I work'\n</code></pre> <p></p>"},{"location":"Online%20CS%20Courses/CS61B/note/#attribute_inherent","title":"Attribute &amp; Inherent","text":"<pre><code>class customer:\n    interests = 0.04\n    def __init__(self, name, account):\n        self.account = account\n        self.name = name\n\n&gt;&gt;&gt; jim_customer = customer('jim', 1000)\n# \u5f53\u6211\u4eec\u5bf9jim\u7684interests\u5355\u72ec\u505a\u66f4\u6539\u65f6\u66f4\u6539\uff0c\u5426\u5219\u5018\u82e5\u6211\u4eec\u66f4\u6539customer.interest\u7684\u503c\uff0cjim.interest\u7684\u503c\u4f1a\u968f\u4e4b\u6539\u53d8\u3002\n</code></pre> <p>\u5173\u4e8e\u591a\u4e2a\u7c7b\u7ee7\u627f\u7684\u95ee\u9898\u5728CS61A\u4e2d\u8bb2\u7684\u662f\u975e\u5e38\u6d45\u7684\uff0c\u6839\u636eGPT\u7684\u56de\u7b54\u5982\u4e0b\uff1a</p> <p>\u5f53\u4e00\u4e2a\u7c7b\u7ee7\u627f\u4e86\u4e24\u4e2a\u7236\u7c7b\uff0c\u5e76\u4e14\u8fd9\u4e24\u4e2a\u7236\u7c7b\u4e2d\u90fd\u6709\u76f8\u540c\u547d\u540d\u7684\u51fd\u6570\u65f6\uff0cPython\u4f1a\u6309\u7167\u7279\u5b9a\u7684\u987a\u5e8f\u6765\u786e\u5b9a\u7ee7\u627f\u7684\u4f18\u5148\u987a\u5e8f\u3002\u8fd9\u4e2a\u987a\u5e8f\u88ab\u79f0\u4e3a\u65b9\u6cd5\u89e3\u6790\u987a\u5e8f\uff08Method Resolution Order\uff0c\u7b80\u79f0MRO\uff09\u3002</p> <p>\u5728Python\u4e2d\uff0cMRO\u662f\u901a\u8fc7C3\u7ebf\u6027\u5316\u7b97\u6cd5\u6765\u786e\u5b9a\u7684\u3002\u8be5\u7b97\u6cd5\u4f1a\u6839\u636e\u7c7b\u7684\u7ee7\u627f\u987a\u5e8f\u548c\u7ee7\u627f\u5173\u7cfb\u6765\u751f\u6210\u4e00\u4e2a\u6709\u5e8f\u7684\u65b9\u6cd5\u89e3\u6790\u987a\u5e8f\u5217\u8868\u3002Python\u4f1a\u6309\u7167\u8fd9\u4e2a\u5217\u8868\u7684\u987a\u5e8f\u67e5\u627e\u65b9\u6cd5\uff0c\u76f4\u5230\u627e\u5230\u7b2c\u4e00\u4e2a\u5339\u914d\u7684\u65b9\u6cd5\u4e3a\u6b62\u3002</p> <p>\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0cPython\u4f7f\u7528\u5e7f\u5ea6\u4f18\u5148\u641c\u7d22\uff08BFS\uff09\u7684\u65b9\u5f0f\u6765\u786e\u5b9aMRO\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5b83\u4f1a\u5148\u641c\u7d22\u7b2c\u4e00\u4e2a\u7236\u7c7b\uff0c\u7136\u540e\u518d\u641c\u7d22\u7b2c\u4e8c\u4e2a\u7236\u7c7b\u3002\u5982\u679c\u4e24\u4e2a\u7236\u7c7b\u90fd\u6709\u76f8\u540c\u547d\u540d\u7684\u65b9\u6cd5\uff0c\u90a3\u4e48\u7ee7\u627f\u7684\u662f\u7b2c\u4e00\u4e2a\u7236\u7c7b\u4e2d\u7684\u65b9\u6cd5\u3002</p> <p>\u4f8b\u5982\uff0c\u5047\u8bbe\u6709\u4e00\u4e2a\u7c7b <code>Child</code> \u7ee7\u627f\u4e86\u4e24\u4e2a\u7236\u7c7b <code>Parent1</code> \u548c <code>Parent2</code>\uff0c\u5e76\u4e14\u8fd9\u4e24\u4e2a\u7236\u7c7b\u4e2d\u90fd\u6709\u4e00\u4e2a\u540d\u4e3a <code>method</code> \u7684\u65b9\u6cd5\u3002\u90a3\u4e48 <code>Child</code> \u7c7b\u7ee7\u627f\u7684\u662f <code>Parent1</code> \u7c7b\u4e2d\u7684 <code>method</code> \u65b9\u6cd5\u3002</p> <p>\u5982\u679c\u4f60\u60f3\u8981\u663e\u5f0f\u5730\u6307\u5b9a\u7ee7\u627f\u7684\u987a\u5e8f\uff0c\u53ef\u4ee5\u4f7f\u7528 <code>super()</code> \u51fd\u6570\u6765\u8c03\u7528\u7279\u5b9a\u7236\u7c7b\u7684\u65b9\u6cd5\u3002\u4f8b\u5982\uff0c<code>super().method()</code> \u5c06\u8c03\u7528\u7b2c\u4e00\u4e2a\u7236\u7c7b\u7684 <code>method</code> \u65b9\u6cd5\uff0c\u800c <code>Parent2.method(self)</code> \u5c06\u8c03\u7528\u7b2c\u4e8c\u4e2a\u7236\u7c7b\u7684 <code>method</code> \u65b9\u6cd5\u3002</p> <p>\u603b\u4e4b\uff0c\u5f53\u4e00\u4e2a\u7c7b\u7ee7\u627f\u4e86\u4e24\u4e2a\u7236\u7c7b\u5e76\u4e14\u8fd9\u4e24\u4e2a\u7236\u7c7b\u4e2d\u6709\u76f8\u540c\u547d\u540d\u7684\u65b9\u6cd5\u65f6\uff0cPython\u4f1a\u6839\u636eMRO\u6765\u786e\u5b9a\u7ee7\u627f\u7684\u4f18\u5148\u987a\u5e8f\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u7ee7\u627f\u7684\u662f\u7b2c\u4e00\u4e2a\u7236\u7c7b\u4e2d\u7684\u65b9\u6cd5\uff0c\u4f46\u4f60\u4e5f\u53ef\u4ee5\u4f7f\u7528 <code>super()</code> \u51fd\u6570\u6765\u663e\u5f0f\u5730\u6307\u5b9a\u7ee7\u627f\u7684\u987a\u5e8f\u3002</p>"},{"location":"Online%20CS%20Courses/CS61B/note/#linked_list_tree","title":"Linked list &amp; Tree","text":"<pre><code>Link(5, Link(4, Link(3, Link_empty)))\n</code></pre>"},{"location":"Online%20CS%20Courses/CS61B/note/#tree","title":"Tree","text":""},{"location":"Online%20CS%20Courses/CS61B/note/#interface","title":"Interface","text":""},{"location":"Online%20CS%20Courses/Fundation%20of%20computer%20science/","title":"\u8ba1\u7b97\u673a\u79d1\u5b66\u5bfc\u8bba","text":"<p>\u6ce8\uff1a\u8fd9\u91cc\u662f\u8ba1\u7b97\u673a\u79d1\u5b66\u5bfc\u8bba\u8fd9\u672c\u4e66\u4ee5\u53ca\u8ba1\u7b97\u673a\u79d1\u5b66\u901f\u6210\u8bfe\u8bb0\u5f55\u7684\u4e00\u4e9b\u8ba1\u7b97\u673a\u79d1\u5b66\u7684\u57fa\u672c\u5185\u5bb9\u3002\u4e8c\u8005\u4e00\u8d77\u98df\u7528\u4f1a\u66f4\u7f8e\u5473\u3002\u76f8\u4fe1\u5927\u5bb6\u5b66\u4e60\u5b8c\u8fd9\u4e2a\u8bfe\u7a0b\u4e4b\u540e\u4f1a\u5bf9\u201c\u8ba1\u79d1\u201d\u6709\u4e00\u4e2a\u6574\u4f53\u7684\u4e86\u89e3\uff01</p>"},{"location":"Online%20CS%20Courses/Fundation%20of%20computer%20science/#_2","title":"\u6570\u5b57\u903b\u8f91","text":""},{"location":"Online%20CS%20Courses/Fundation%20of%20computer%20science/#_3","title":"\u8ba1\u7b97\u673a\u7ec4\u6210","text":"<ol> <li>ALU </li> </ol> <ul> <li> <p>\u7b97\u672f\u5355\u5143</p> </li> <li> <p>\u534a\u52a0\u5668</p> </li> <li>\u5168\u52a0\u5668</li> </ul> <ol> <li>\u903b\u8f91\u5355\u5143</li> </ol> <ul> <li>\u5bc4\u5b58\u5668\u548c\u5185\u5b58</li> <li>\u9501\u5b58\u5668\u548c\u5bc4\u5b58\u5668</li> </ul> <ol> <li>RAM + \u5bc4\u5b58\u5668 + ALU \u7ec4\u6210\u4e00\u4e2aCPU</li> </ol> <ul> <li> <p>\u53d6\u6307\u4ee4-\u300b\u89e3\u91ca-\u300b\u6267\u884c\uff08fetch -&gt; decode -&gt; execute) </p> </li> <li> <p>\u65f6\u949f 4. instruction and programs</p> </li> <li> <p>operation code = opcode</p> </li> <li>opcode could instruct the machine to do something on the provided address\u3002</li> <li>HALT instruction(make CPU stop)</li> <li>jump 5. Advanced CPU Designs</li> <li>cache\uff08\u7f13\u5b58\uff09\uff08synced up \u540c\u6b65\uff09</li> <li>more advanced instruction</li> <li>parallelize(\u5e76\u884c\u5904\u7406)\uff08throughput \u541e\u5410\u91cf\uff09</li> </ul>"},{"location":"Paper%20Reading/","title":"Paper Reading","text":"<p>\u6211\u6709\u4e00\u4e2a\u5927\u80c6\u7684\u8bbe\u60f3\uff0c\u53ef\u4ee5\u5b66\u4e60\u674e\u6c90\u8001\u5e08\u8bb0\u5f55\u4e0b\u81ea\u5df1\u9605\u8bfbpaper\u4e2d\u7684\u5b66\u4e60\u8d44\u6e90\u4ee5\u53ca\u5fc3\u5f97\u4f53\u4f1a\u3002 \u4e00\u4e2aCMU\u7684Tutor\u4ee5\u53ca\u674e\u6c90\u8001\u5e08\u7684\u89c6\u9891\u6211\u90fd\u86ee\u63a8\u8350\u5148\u53bb\u5b66\u4e60\u4e00\u4e0b\u7684\u3002</p> Hope <p>\u771f\u5fc3\u5e0c\u671b\u80fd\u4ece\u4eca\u5929\u5f00\u59cb\u6bcf\u5929\u8bfb\u4e00\u7bc7paper\ud83e\udd23\uff08\u505a\u68a6\u4e86\u53d1\u73b0\uff0c\u53ef\u80fd\u73b0\u5728\u4e00\u5468\u80fd\u770b\u4e24\u4e09\u7bc7\u5c31\u4e0d\u9519\u4e86</p> <p> Resource</p> <ul> <li>[\u674e\u6c90]\uff08https://github.com/mli/paper-reading?tab=readme-ov-file\uff09\u7684paper-reading\u9879\u76ee</li> <li>paper with code</li> <li>geeksforgeeks: \u4e00\u4e2a\u5173\u4e8e\u8ba1\u7b97\u673a\u79d1\u5b66\u7684\u5b66\u4e60\u7f51\u7ad9</li> <li>colah blog</li> <li>Paper Reading List</li> </ul>"},{"location":"Paper%20Reading/LLM%20Inference/","title":"LLM Inference","text":"<p>\u672c\u7ae0\u8282\u662f\u4ecb\u7ecdLLM\u7684\u63a8\u7406\u8fc7\u7a0b\uff0c\u4e3b\u8981\u5305\u62ec\u4e86LLM\u7684\u63a8\u7406\u8fc7\u7a0b\uff0c\u4ee5\u53caLLM\u7684\u63a8\u7406\u8fc7\u7a0b\u7684\u4e00\u4e9b\u4f18\u5316\u65b9\u6cd5\uff0c\u91cf\u5316\u65b9\u6cd5\u7b49\u3002</p> <p>\u662f\u4ee5\u5148\u5bfc\u676fLLama3-8b\u8d5b\u9898\u4e3a\u5bfc\u5411\uff0c\u4e3b\u8981\u805a\u7126\u4e8e\u5355\u5361\u7684\u63a8\u7406\u90e8\u7f72\u4f18\u5316\u3002</p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/","title":"A Survey on Efficient Inference for Large Language Models","text":"<p>\u672c\u6587\u4ecb\u7ecd\u4e86\u4e00\u4e2a\u7efc\u5408\u7684\u5206\u7c7b\u6cd5\uff0c\u5c06\u5f53\u524d\u7684\u6587\u732e\u4ece\u6570\u636e\u7ea7\u3001\u6a21\u578b\u7ea7\u548c\u7cfb\u7edf\u7ea7\u4f18\u5316\u4e09\u4e2a\u89d2\u5ea6\u5207\u5165\u5206\u6790</p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#introduction","title":"Introduction","text":""},{"location":"Paper%20Reading/LLM%20Inference/survey/#background","title":"Background","text":""},{"location":"Paper%20Reading/LLM%20Inference/survey/#transformer","title":"Transformer","text":"<p>\u4e00\u4e2a\u5173\u4e8e\u6700\u540e\u6295\u5f71\u77e9\u9635\u7684\u4ee3\u7801\u89e3\u91ca <pre><code>import torch\n\n# \u5047\u8bbe\u6709 h \u4e2a\u5934\uff0c\u6bcf\u4e2a\u5934\u7684\u8f93\u51fa\u8868\u793a\u4e3a Z1, Z2, ..., Zh\n# Z_i \u7684\u5f62\u72b6\u4e3a (batch_size, seq_len, d_head)\nZ1 = torch.randn(batch_size, seq_len, d_head)\nZ2 = torch.randn(batch_size, seq_len, d_head)\n# ...\nZh = torch.randn(batch_size, seq_len, d_head)\n\n# \u5c06\u6240\u6709\u5934\u7684\u8f93\u51fa\u8fde\u63a5\u8d77\u6765\nZ = torch.cat((Z1, Z2, ..., Zh), dim=-1)  # \u5f62\u72b6\u4e3a (batch_size, seq_len, h * d_head)\n\nimport torch.nn as nn\n\n# \u7ebf\u6027\u5c42\uff0c\u7528\u4e8e\u6295\u5f71\nprojection = nn.Linear(h * d_head, d_model)\n\n# \u901a\u8fc7\u6295\u5f71\u77e9\u9635 W^O\noutput = projection(Z)  # \u5f62\u72b6\u4e3a (batch_size, seq_len, d_model)\n</code></pre></p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#ffn","title":"FFN","text":"<p>FFN https://www.zhihu.com/question/622085869 https://www.zhihu.com/question/460991118/answer/2353153090</p> <pre><code>class FeedForwardNetwork(nn.Module):\n    def __init__(self, d_model, d_ff):\n        super(FeedForwardNetwork, self).__init__()\n        self.linear1 = nn.Linear(d_model, d_ff)\n        self.relu = nn.ReLU()\n        self.linear2 = nn.Linear(d_ff, d_model)\n\n    def forward(self, x):\n        x = self.linear1(x)\n        x = self.relu(x)\n        x = self.linear2(x)\n        return x\n\n# \u4e00\u822c\u6765\u8bf4\u9690\u85cf\u5c42\u7eac\u5ea6\u8981\u66f4\u5927\uff0c\u80fd\u6709\u6548\u89e3\u51b3token uniformity\u7684\u95ee\u9898\nd_model = 512  # \u8f93\u5165\u548c\u8f93\u51fa\u7684\u7ef4\u5ea6\nd_ff = 2048   # FFN\u4e2d\u7684\u9690\u85cf\u5c42\u7ef4\u5ea6\n</code></pre>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#inference","title":"Inference","text":"<p>\u73b0\u5728\u5927\u591a\u90fd\u662f\u81ea\u56de\u5f52\u6a21\u578b\uff08decoder-only\uff09\uff0c\u5373\u5728\u751f\u6210\u6bcf\u4e2atoken\u65f6\uff0c\u90fd\u8981\u8003\u8651\u4e4b\u524d\u751f\u6210\u7684token\uff0c\u8fd9\u6837\u7684\u6a21\u578b\u5728\u63a8\u7406\u65f6\u4f1a\u6709\u5f88\u5927\u7684\u5ef6\u8fdf\uff0c\u56e0\u6b64\u9700\u8981\u4e00\u4e9b\u6280\u672f\u6765\u52a0\u901f\u63a8\u7406</p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#kv-cache","title":"KV-cache","text":"<p>\u7531\u4e8e\u5b58\u5728\u5927\u91cf\u5bf9\u5148\u524dtoken\u5b58\u5728\u7684\u91cd\u590d\u8ba1\u7b97\uff0c\u6211\u4eec\u91c7\u53d6\u4e86cache\u7b56\u7565 </p> <p>\u672f\u8bed\u8868  </p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#efficiency_analysis","title":"Efficiency Analysis","text":"<p>\u4e00\u822c\u6765\u8bf4LLama-70B\u53c2\u6570\u7684\u6a21\u578b\u9700\u8981140G\u5b58\u50a8weights\uff08FP16\uff09 \u81f3\u4e8e\u5ef6\u8fdf\uff0c\u57282\u5757NVIDIA A100 GPU\u4e0a\u751f\u6210\u4e00\u4e2a\u4ee4\u724c\u9700\u8981\u5927\u7ea6100\u6beb\u79d2\u3002\u56e0\u6b64\uff0c\u751f\u6210\u4e00\u4e2a\u5305\u542b\u6570\u767e\u4e2a\u4ee4\u724c\u7684\u5e8f\u5217\u9700\u898110\u79d2\u4ee5\u4e0a\u7684\u65f6\u95f4\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\u5b58\u5728\u6700\u5f00\u59cb\u63d0\u5230\u7684\u4e09\u4e2a\u95ee\u9898\uff0c\u672c\u6587\u4f18\u5316\u7684\u91cd\u70b9\u5219\u4e3b\u8981\u96c6\u4e2d\u4e8e</p> <ul> <li>\u6a21\u578b\u53c2\u6570</li> <li>Attention\u5728\u957f\u6587\u672c\u4e0b\u7684\u8ba1\u7b97\u5f00\u9500</li> <li>\u81ea\u56de\u5f52\u89e3\u7801\u65b9\u6cd5\u9010\u4e2a\u751f\u6210token\u3002\u5728\u6bcf\u4e2a\u89e3\u7801\u6b65\u9aa4\u4e2d\uff0c\u6240\u6709\u7684\u6a21\u578b\u6743\u91cd\u90fd\u4ece\u7247\u5916HBM\u52a0\u8f7d\u5230GPU\u82af\u7247\u4e2d\uff0c\u5bfc\u81f4\u8f83\u5927\u7684\u5185\u5b58\u8bbf\u95ee\u6210\u672c\u3002\u6b64\u5916\uff0cKV-cache\u7684\u5927\u5c0f\u968f\u7740\u8f93\u5165\u957f\u5ea6\u7684\u589e\u52a0\u800c\u589e\u52a0\uff0c\u8fd9\u53ef\u80fd\u5bfc\u81f4\u788e\u7247\u5316\u7684\u5185\u5b58\u548c\u4e0d\u89c4\u5219\u7684\u5185\u5b58\u8bbf\u95ee\u6a21\u5f0f</li> </ul>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#_1","title":"\u4f18\u5316\u624b\u6bb5\u7684\u7b80\u8981\u5206\u7c7b","text":"<ul> <li>data-level \u5bf9\u6a21\u578b\u672c\u8eab\u51e0\u4e4e\u6ca1\u4ec0\u4e48\u5f71\u54cd</li> <li>model-level \u901a\u8fc7\u6539\u53d8\u6a21\u578b\u7ed3\u6784\u6765\u51cf\u5c11\u8ba1\u7b97\u91cf\uff0c\u53ef\u80fd\u5fae\u8c03\u4f1a\u4f7f\u6a21\u578b\u6027\u80fd\u53d7\u635f</li> <li>system-level \u4ece\u7cfb\u7edf\u5e03\u5c40\u7684\u89d2\u5ea6\u4f18\u5316\uff08\u672c\u8bba\u6587\u8bf4flash attention\u53ef\u80fd\u4f1a\u6709\u6811\u8102\u504f\u5dee\uff1f\uff09</li> </ul> Flash Attention <p>flash attention \u624b\u7a3f</p> <p></p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#data-level","title":"Data-level","text":""},{"location":"Paper%20Reading/LLM%20Inference/survey/#input_compression","title":"Input Compression","text":"<p>ICL\u548cCoT\u7684\u4f7f\u7528\uff0c\u5bfc\u81f4\u8ba1\u7b97\u5f00\u9500\u90fd\u4e8c\u6b21\u65b9\u589e\u957f\u3002</p> <ul> <li>Prompt Pruning\uff1a\u5220\u9664\u4e0d\u91cd\u8981\u7684tokens</li> <li>Prompt Summary\uff1a\u63d0\u793a\u6458\u8981\u7684\u6838\u5fc3\u601d\u60f3\u662f\u5728\u4fdd\u7559\u76f8\u4f3c\u8bed\u4e49\u4fe1\u606f\u7684\u524d\u63d0\u4e0b\uff0c\u5c06\u539f\u59cb\u63d0\u793a\u6d53\u7f29\u4e3a\u8f83\u77ed\u7684\u6458\u8981\u3002</li> <li>Soft Prompt-based Compression\u8fd9\u7c7b\u538b\u7f29\u6280\u672f\u7684\u6838\u5fc3\u601d\u60f3\u662f\u8bbe\u8ba1\u4e00\u4e2a\u660e\u663e\u77ed\u4e8e\u539f\u59cb\u63d0\u793a\u7684\u8f6f\u63d0\u793a\uff0c\u4f5c\u4e3aLLMs\u7684\u8f93\u5165\u3002 <p>The soft prompt is defined as a sequence of learnable continuous tokens.</p> </li> <li>Retrieval-Augmented Generation(RAG\u5de5\u7a0b)</li> </ul>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#output_organization","title":"Output Organization","text":"<p>Skeleton-of-Thought (SoT)\uff1a\u8f93\u51fa\u7ec4\u7ec7\u6280\u672f\u65e8\u5728\u901a\u8fc7\u7ec4\u7ec7\u8f93\u51fa\u5185\u5bb9\u7684\u7ed3\u6784\uff0c(\u90e8\u5206)\u5b9e\u73b0\u751f\u6210\u7684\u5e76\u884c\u5316\u3002\u5f53\u7136\u5b83\u8fd8\u6709\u4e00\u4e2a<code>router model</code> \u6765\u51b3\u5b9a\u5e94\u7528SoT\u662f\u5426\u9002\u5408\u4e8e\u7279\u5b9a\u7684\u95ee\u9898\u3002 </p> <p>\u6709\u4e00\u4e2aSGD\u7684\u4e1c\u897fextend the idea of SoT by organize sub-problems in DAG(\u6709\u5411\u65e0\u73af\u56fe)\u5f62\u5f0f(\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u4f18\u5316\u4e86\u5728\u6570\u5b66\u548c\u4ee3\u7801\u76f8\u5173\u7684\u95ee\u9898)</p> <p>\u4e0eSoT\u76f8\u6bd4\uff0cSGD\u4f18\u5148\u8003\u8651\u7b54\u6848\u8d28\u91cf\u800c\u4e0d\u662f\u901f\u5ea6\u3002\u6b64\u5916\uff0cSGD\u5f15\u5165\u4e86\u4e00\u79cd\u81ea\u9002\u5e94\u7684\u6a21\u578b\u9009\u62e9\u65b9\u6cd5\uff0c\u6839\u636e\u4f30\u8ba1\u7684\u590d\u6742\u5ea6\u4e3a\u6bcf\u4e2a\u5b50\u95ee\u9898\u5206\u914d\u4e00\u4e2a\u6700\u4f18\u7684\u6a21\u578b\u5927\u5c0f\uff0c\u4ece\u800c\u8fdb\u4e00\u6b65\u63d0\u9ad8\u4e86\u6548\u7387\u3002</p> <p>\u5927\u5bb6\u53ef\u4ee5\u770b\u770bSGLang\u8fd9\u4e2a\u4e1c\u897f\uff0c\u4ece\u7f16\u8bd1\u5668\uff08\u8bed\u8a00\uff09\u7684\u89d2\u5ea6\u6765\u96c6\u6210\u4f18\u5316\u8fd9\u4e2a\u95ee\u9898</p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#_2","title":"\u5c0f\u7ed3","text":"<p>\u6700\u8fd1\uff0c\u5404\u79cd\u5404\u6837\u7684\u6fc0\u52b1\u7ba1\u9053( ToT  , GoT )\u548c\u4ee3\u7406\u6846\u67b6\uff08agent framework\uff09\u4e0d\u65ad\u6d8c\u73b0\u3002\u867d\u7136\u8fd9\u4e9b\u521b\u65b0\u589e\u5f3a\u4e86LLMs\u7684\u80fd\u529b\uff0c\u4f46\u5b83\u4eec\u4e5f\u5ef6\u957f\u4e86\u8f93\u5165\u7684\u957f\u5ea6\uff0c\u5bfc\u81f4\u8ba1\u7b97\u6210\u672c\u589e\u52a0\u3002\u4e3a\u4e86\u5e94\u5bf9\u8fd9\u4e00\u6311\u6218\uff0c\u91c7\u7528\u8f93\u5165\u538b\u7f29\u6280\u672f\u6765\u51cf\u5c11\u8f93\u5165\u957f\u5ea6\u663e\u793a\u51fa\u4f5c\u4e3a\u89e3\u51b3\u65b9\u6848\u7684\u524d\u666f\u3002</p> <p>\u5f53\u7136\u4e5f\u6709\u52a8\u6001\u505c\u6b62\u907f\u514d\u6a21\u578b\u5f00\u59cb\u8bf4\u5e9f\u8bdd\u3002\u6700\u7ec8\u5e0c\u671b\u8fbe\u5230\uff08pipeline\u7684\u7ea7\u522b\uff09\u7684\u5e76\u884c\u5316\u3002</p> LLM Reasoning <p>https://zhuanlan.zhihu.com/p/654034193</p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#model-level","title":"Model-level","text":"<p>LLM\u9ad8\u6548\u63a8\u7406\u7684\u6a21\u578b\u7ea7\u4f18\u5316\u4e3b\u8981\u96c6\u4e2d\u5728\u4f18\u5316\u6a21\u578b\u7ed3\u6784\u6216\u6570\u636e\u8868\u793a\u3002\u6a21\u578b\u7ed3\u6784\u4f18\u5316\u5305\u62ec\u76f4\u63a5\u8bbe\u8ba1\u9ad8\u6548\u7684\u6a21\u578b\u7ed3\u6784\u3001\u4fee\u6539\u539f\u59cb\u6a21\u578b\u548c\u8c03\u6574\u63a8\u7406\u65f6\u95f4\u67b6\u6784\u3002\u5728\u6570\u636e\u8868\u793a\u4f18\u5316\u65b9\u9762\uff0c\u901a\u5e38\u91c7\u7528\u6a21\u578b\u91cf\u5316\u6280\u672f\u3002</p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#model_structure_optimization","title":"Model Structure Optimization","text":"<p>\u8fd9\u91cc\u7684\u4f18\u5316\u4e3b\u8981\u9488\u5bf9<code>FFN</code>\uff08\u53c2\u6570\u5f00\u9500\uff09\u548c<code>Attention</code>\uff08\u957f\u6587\u672c\u4e8c\u6b21\u65b9\u590d\u6742\u5ea6\uff09\u4e24\u4e2a\u90e8\u5206</p> <p>\u4e00\u4e2a\u975e\u5e38\u53cd\u76f4\u89c9\u7684\u662f\uff1aFFN\u7adf\u7136\u662f\u6a21\u578b\u4e3b\u8981\u7684\u53c2\u6570\u5f00\u9500 </p> <p></p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#ffn_design","title":"FFN Design","text":"<p>Mixture-of-Experts (MoE)\uff1aMoE\u6a21\u578b\u5c06FFN\u5206\u89e3\u4e3a\u591a\u4e2a\u4e13\u5bb6\uff0c\u6bcf\u4e2a\u4e13\u5bb6\u8d1f\u8d23\u5904\u7406\u4e0d\u540c\u7684\u8f93\u5165\u3002\u8fd9\u79cd\u5206\u89e3\u53ef\u4ee5\u51cf\u5c11\u6bcf\u4e2a\u4e13\u5bb6\u7684\u53c2\u6570\u91cf\uff0c\u4ece\u800c\u51cf\u5c11\u6574\u4e2aFFN\u7684\u53c2\u6570\u91cf\u3002</p> <ul> <li>MoEification\u8bbe\u8ba1\u4e86\u4e00\u79cd\u5229\u7528\u9884\u8bad\u7ec3\u6743\u91cd\u5c06\u975eMoE LLM\u8f6c\u6362\u4e3aMoE\u7248\u672c\u7684\u65b9\u6cd5\u3002</li> <li>MPOE [ 90 ]\u63d0\u51fa\u901a\u8fc7\u77e9\u9635\u4e58\u79ef\u7b97\u5b50( Matrix Product Operators\uff0cMPO )\u5206\u89e3\u6765\u964d\u4f4e\u57fa\u4e8eMoE\u7684LLMs\u7684\u53c2\u6570\u3002\u8be5\u65b9\u6cd5\u5c06FFN\u7684\u6bcf\u4e2a\u6743\u91cd\u77e9\u9635\u5206\u89e3\u4e3a\u4e00\u4e2a\u5305\u542b\u516c\u5171\u4fe1\u606f\u7684\u5168\u5c40\u5171\u4eab\u5f20\u91cf\u548c\u4e00\u7ec4\u6355\u83b7\u7279\u5b9a\u7279\u5f81\u7684\u5c40\u90e8\u8f85\u52a9\u5f20\u91cf\u3002</li> <li>\u6b64\u5916\u4fbf\u662f\u4e0d\u540c\u4e13\u5bb6\u6a21\u578b\u7684token\u5e76\u884c\u5ea6\uff08\u6216\u591a\u6216\u5c11\uff09\u8d1f\u8f7d\u5747\u8861\u7684\u95ee\u9898\uff08\u6709\u75db\u8fc7\u4fee\u6539\u635f\u5931\u51fd\u6570\u6765\u89e3\u51b3\uff09 <p>softmax\u5b58\u5728\u6307\u6570\u8ba1\u7b97\u53ef\u80fd\u5bfc\u81f4\u8bad\u7ec3\u7684\u4e0d\u7a33\u5b9a\u6027\uff08\u6709\u901a\u8fc7\u6539\u53d8\u635f\u5931\u51fd\u6570\u6765\u89e3\u51b3\u7684\u65b9\u6cd5\uff09 \u5173\u4e8e\u4e13\u5bb6\u6a21\u578b\u7684\u8bbe\u8ba1\u6709\u975e\u5e38\u591a\u53d6\u5de7\u7684\u7ec6\u8282\uff0c\u4f46\u6211\u60f3\u8fd9\u4e0d\u662f\u672c\u6587\u5173\u6ce8\u7684\u91cd\u70b9</p> </li> </ul>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#efficient_attention_design","title":"Efficient Attention Design","text":"<p>\u7531\u4e8e\u4e8c\u6b21\u65b9\u7684\u590d\u6742\u5ea6\u5f00\u9500\uff0c\u5c24\u5176\u5728\u957f\u6587\u672c\u4e0a\u5f71\u54cd\u663e\u8457\uff0c\u8fd9\u4e9b\u7814\u7a76\u5927\u81f4\u53ef\u4ee5\u5206\u4e3a\u4e24\u4e2a\u4e3b\u8981\u7684\u5206\u652f\uff1a\u591a\u67e5\u8be2\u6ce8\u610f\u548c\u4f4e\u590d\u6742\u5ea6\u6ce8\u610f\u3002</p> <p>KV cache \u8ba1\u7b97</p> <p>KV Cache\u663e\u5b58\u5360\u7528\u7684\u8ba1\u7b97\u65b9\u5f0f\u5982\u4e0b\uff1a</p> <p>1 token KV Cache = 2[K,V] x hidden_size x layers x 2[bytes per FP16] = 4 x H x N bytes \u6bd4\u5982\u5bf9\u4e8eLLaMA 13B fp16\u6a21\u578b\uff0c1\u4e2atoken\u6240\u9700\u8981\u7684KV Cache\u4e3a\uff1a4 x 5120 x 40 = 819200 bytes\uff0c\u5373 800KB\u3002\u90a3\u4e48\u5bf9\u4e8eL=seq_len\u4e3a2048 tokens\u7684\u8bf7\u6c42\uff0c\u9700\u8981\u7684KV Cache\u6570\u91cf\u4e3a: 4 x 2048 x 5120 x 40 = 2048 x 800KB = 1.6GB</p> <p></p> <ul> <li>MQA\uff1a\u5bf9MHA\u7684\u6539\u8fdb\uff0c\u5171\u4eabkv-cache\u5728\u4e0d\u540c\u7684attention heads\u4e0a\u3002\uff08GQA\u5219\u662fMQA\u548cMHA\u7684Mix\uff09</li> </ul> <p></p> <ul> <li> <p>Low-Complexity Attention\uff1a\u964d\u4f4eattention\u4ee5\u53casoftmax\u975e\u7ebf\u6027\u8ba1\u7b97\u7684\u590d\u6742\u5ea6</p> <p></p> </li> <li> <p>\u5f53\u7136\u6211\u4eec\u8fd8\u6ce8\u610f\u5230\u4e86attention\u4e2d\u7684low-rank approximation\uff08\u4f4e\u79e9\u8fd1\u4f3c\uff09\u548csparsity\uff08\u7a00\u758f\u6027\uff09\u7684\u7814\u7a76\uff08\u6bd4\u5982Linformer\u7b49\uff09</p> </li> <li>\u8fd8\u6709\u538b\u7f29attention\u4e0a\u4e0b\u6587\u8303\u56f4</li> </ul> <p>\u5f53\u7136\u4e5f\u6709\u66ff\u6362transformer\u7b49\u5404\u79cd\u7ed3\u6784\u7684\u51fa\u73b0\uff1a  \u5728\u8fd9\u4e00\u7814\u7a76\u9886\u57df\u4e2d\uff0c\u6709\u4e24\u4e2a\u7a81\u51fa\u7684\u7814\u7a76\u65b9\u5411\u53d7\u5230\u4e86\u6781\u5927\u7684\u5173\u6ce8\u3002\u5176\u4e2d\uff0c\u72b6\u6001\u7a7a\u95f4\u6a21\u578b( State Space Model\uff0cSSM )\u662f\u4e00\u79cd\u57fa\u4e8eHiPPO\u7406\u8bba\u7684\u9012\u5f52\u53d8\u6362\u5e8f\u5217\u5efa\u6a21\u65b9\u6cd5[ 64 ]\u3002\u6b64\u5916\uff0c\u5176\u4ed6\u7814\u7a76\u4e3b\u8981\u96c6\u4e2d\u5728\u4f7f\u7528\u957f\u5377\u79ef\u6216\u8bbe\u8ba1\u7c7b\u4f3c\u6ce8\u610f\u529b\u7684\u516c\u5f0f\u6765\u5efa\u6a21\u5e8f\u5217\u3002</p> <p>\u4e5f\u6709\u5c06\u5377\u79ef\u626b\u63cf\u6539\u6210\u5e76\u884c\u626b\u63cf\uff08\u66f4\u9002\u5408GPU\u7684\u5e76\u884c\u8ba1\u7b97\uff09</p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#model_compression","title":"Model Compression","text":""},{"location":"Paper%20Reading/LLM%20Inference/survey/#quantization","title":"Quantization","text":"<p> \u63a5\u4e0b\u6765\u6211\u4eec\u5c06\u4ece\uff1a\u6548\u7387\u5206\u6790\u4ee5\u53ca\u4e24\u79cd\u4e0d\u540c\u7684\u91cf\u5316\u5de5\u4f5c\u6d41\u7a0b\uff1a\u8bad\u7ec3\u540e\u91cf\u5316( PTQ )\u548c\u91cf\u5316\u611f\u77e5\u8bad\u7ec3( QAT )\u4e09\u4e2a\u89d2\u5ea6\u5207\u5165\u7b80\u8981\u6982\u8ff0\u3002 </p> <ul> <li>Efficiency Analysis\uff1aLLMs\u7684\u63a8\u7406\u8fc7\u7a0b\u5305\u62ec\u4e24\u4e2a\u9636\u6bb5\uff1a\u9884\u586b\u5145\u9636\u6bb5\u548c\u89e3\u7801\u9636\u6bb5\uff1bPrefiling stage\u4e3b\u8981\u6d89\u53caGEMM\u76f8\u5173\u3002Decode\u4e3b\u8981\u662fGEMV\uff08vector\u751f\u6210\u4e00\u4e2atoken\u6709\u5173\u7684\u8ba1\u7b97\uff09</li> <li>Post-Training Quantization\uff1a\u8bad\u7ec3\u540e\u91cf\u5316( PTQ )\u662f\u6307\u5728\u4e0d\u9700\u8981\u91cd\u65b0\u8bad\u7ec3\u7684\u60c5\u51b5\u4e0b\uff0c\u5bf9\u9884\u8bad\u7ec3\u7684\u6a21\u578b\u8fdb\u884c\u91cf\u5316\uff0c\u8fd9\u53ef\u80fd\u662f\u4e00\u4e2a\u4ee3\u4ef7\u9ad8\u6602\u7684\u8fc7\u7a0b\u3002\u867d\u7136PTQ\u65b9\u6cd5\u5df2\u7ecf\u5728\u8f83\u5c0f\u7684\u6a21\u578b\u4e2d\u5f97\u5230\u4e86\u5f88\u597d\u7684\u63a2\u7d22\uff0c\u4f46\u5c06\u73b0\u6709\u7684\u91cf\u5316\u6280\u672f\u76f4\u63a5\u5e94\u7528\u4e8eLLMs\u63d0\u51fa\u4e86\u6311\u6218\u3002\u8fd9\u4e3b\u8981\u662f\u56e0\u4e3a\u4e0e\u8f83\u5c0f\u7684\u6a21\u578b\u76f8\u6bd4\uff0cLLMs\u7684\u6743\u91cd\u548c\u6fc0\u6d3b\u503c\u5f80\u5f80\u8868\u73b0\u51fa\u66f4\u591a\u7684\u5f02\u5e38\u503c\u548c\u66f4\u5e7f\u6cdb\u7684\u5206\u5e03\u8303\u56f4\uff0c\u4f7f\u5f97\u5b83\u4eec\u7684\u91cf\u5316\u66f4\u5177\u6311\u6218\u6027\u3002\uff08 GPTQ\u3001AWQ\u7b49\u662f\u88ab\u5e7f\u6cdb\u4f7f\u7528\u7684\uff09</li> </ul> <p> </p> <p>OBQ\u5229\u7528\u6743\u91cd\u77e9\u9635\u6bcf\u4e00\u884c\u7684\u6700\u4f18\u91cf\u5316\u987a\u5e8f\uff0c\u4ee5\u76f8\u5bf9\u4e8e\u672a\u91cf\u5316\u6743\u91cd\u7684Hessian\u77e9\u9635\u7684\u91cd\u6784\u8bef\u5dee\u4e3a\u6307\u5bfc\u3002\u5728\u6bcf\u4e2a\u91cf\u5316\u6b65\u957f\u4e4b\u540e\uff0cOBQ\u8fed\u4ee3\u5730\u8c03\u6574\u672a\u91cf\u5316\u7684\u6743\u91cd\uff0c\u4ee5\u51cf\u8f7b\u91cd\u5efa\u8bef\u5dee\u3002\u7136\u800c\uff0c\u91cf\u5316\u8fc7\u7a0b\u4e2dHessian\u77e9\u9635\u7684\u9891\u7e41\u66f4\u65b0\u589e\u52a0\u4e86\u8ba1\u7b97\u590d\u6742\u5ea6\u3002GPTQ\u7b80\u5316\u4e86\u8fd9\u4e00\u8fc7\u7a0b\uff0c\u91c7\u7528\u7edf\u4e00\u7684\u4ece\u5de6\u5230\u53f3\u7684\u987a\u5e8f\u5bf9\u6bcf\u4e00\u884c\u8fdb\u884c\u91cf\u5316\uff0c\u4ece\u800c\u907f\u514d\u4e86\u5927\u91cfHessian\u77e9\u9635\u66f4\u65b0\u7684\u9700\u8981</p> <p>AWQ \u89c2\u5bdf\u5230\u6743\u91cd\u901a\u9053\u5bf9\u6027\u80fd\u7684\u91cd\u8981\u6027\u662f\u4e0d\u540c\u7684\uff0c\u5c24\u5176\u5f3a\u8c03\u90a3\u4e9b\u4e0e\u8f93\u5165\u901a\u9053\u4e00\u81f4\u7684\u901a\u9053\u5728\u6fc0\u6d3b\u4e2d\u8868\u73b0\u51fa\u5f02\u5e38\u503c\u3002\u4e3a\u4e86\u52a0\u5f3a\u5173\u952e\u6743\u91cd\u901a\u9053\u7684\u4fdd\u5b58\uff0cAWQ\u4f7f\u7528\u4e86\u91cd\u65b0\u53c2\u6570\u5316\u7684\u65b9\u6cd5\u3002\u8be5\u6280\u672f\u901a\u8fc7\u7f51\u683c\u641c\u7d22\u6765\u9009\u62e9\u91cd\u53c2\u6570\u5316\u7cfb\u6570\uff0c\u4ece\u800c\u6709\u6548\u5730\u6700\u5c0f\u5316\u91cd\u5efa\u8bef\u5dee\u3002</p> <ul> <li>\u91cf\u5316\u611f\u77e5\u8bad\u7ec3( Quantization-aware training\uff0cQAT )\uff1a \u5728\u6a21\u578b\u8bad\u7ec3\u8fc7\u7a0b\u4e2d\u878d\u5165\u4e86\u91cf\u5316\u7684\u5f71\u54cd\u3002\u901a\u8fc7\u96c6\u6210\u590d\u5236\u91cf\u5316\u6548\u5e94\u7684\u5c42\uff0c\u8be5\u65b9\u6cd5\u6709\u5229\u4e8e\u6743\u91cd\u9002\u5e94\u91cf\u5316\u5f15\u8d77\u7684\u8bef\u5dee\uff0c\u4ece\u800c\u63d0\u9ad8\u4efb\u52a1\u6027\u80fd\u3002</li> </ul> <p>\u4e3a\u4e86\u964d\u4f4e\u8ba1\u7b97\u6210\u672c\uff0c\u8bb8\u591a\u65b9\u6cd5\u91c7\u7528\u53c2\u6570\u6709\u6548\u8c03\u6574( PEFT )\u7b56\u7565\u6765\u52a0\u901fQAT\u3002QLoRA \u5c06LLMs\u7684\u6743\u91cd\u91cf\u5316\u4e3a4 - bit\uff0c\u7136\u540e\u4f7f\u7528BF16\u4e2d\u7684LoRA \u5bf9\u6bcf\u4e2a4 - bit\u6743\u91cd\u77e9\u9635\u5fae\u8c03\u91cf\u5316\u6a21\u578b\u3002QLoRA\u5141\u8bb8\u5728\u4ec5\u670930GB\u5185\u5b58\u7684GPU\u4e0a\u5bf965B\u53c2\u6570LLM\u8fdb\u884c\u6709\u6548\u7684\u5fae\u8c03\u3002QALoRA \u63d0\u51fa\u5c06\u5206\u7ec4\u91cf\u5316\u878d\u5165\u5230QLoRA\u4e2d\u3002\u4f5c\u8005\u89c2\u5bdf\u5230\uff0cQLoRA\u4e2d\u91cf\u5316\u53c2\u6570\u7684\u6570\u91cf\u660e\u663e\u5c0f\u4e8eLoRA\u53c2\u6570\u7684\u6570\u91cf\uff0c\u5bfc\u81f4\u91cf\u5316\u548c\u4f4e\u79e9\u9002\u5e94\u4e4b\u95f4\u7684\u4e0d\u5e73\u8861\u3002</p> Tips <p>LoftQ [ 189 ]\u6307\u51fa\uff0c\u5728QLoRA\u4e2d\u7528\u96f6\u521d\u59cb\u5316LoRA\u77e9\u9635\u5bf9\u4e8e\u4e0b\u6e38\u4efb\u52a1\u662f\u4f4e\u6548\u7684\u3002\u4f5c\u4e3a\u66ff\u4ee3\u65b9\u6848\uff0cLoftQ\u5efa\u8bae\u4f7f\u7528\u5dee\u5206\u7684\u5947\u5f02\u503c\u5206\u89e3( SVD )\u6765\u521d\u59cb\u5316LoRA\u77e9\u9635\u3002LoftQ\u8fed\u4ee3\u5730\u5e94\u7528\u91cf\u5316\u548cSVD\u6765\u5b9e\u73b0\u5bf9\u539f\u59cb\u6743\u91cd\u66f4\u7cbe\u786e\u7684\u903c\u8fd1\u3002Norm Timming [ 186 ]\u63d0\u51fa\u5bf9\u91cf\u5316\u540e\u7684LayerNorm\u5c42\u8fdb\u884c\u8bad\u7ec3\uff0c\u5e76\u4f7f\u7528\u77e5\u8bc6\u84b8\u998f\u5c06\u91cf\u5316\u6a21\u578b\u7684\u8f93\u51fa\u5206\u5e03\u4e0eFP16\u6a21\u578b\u7684\u8f93\u51fa\u5206\u5e03\u8fdb\u884c\u5339\u914d\uff0c\u5728\u53d6\u5f97\u4e0eLLM - QAT\u76f8\u4f3c\u6548\u679c\u7684\u540c\u65f6\u907f\u514d\u4e86\u9ad8\u6602\u7684\u8bad\u7ec3\u6210\u672c\u3002</p> <p></p> <p>\u4ece\u7ed3\u679c\u4e2d\uff0c\u53ef\u4ee5\u5f97\u51fa\u51e0\u4e2a\u5173\u952e\u7684\u7ed3\u8bba\uff1a 1. \u4ec5\u52a0\u6743\u91cf\u5316\u53ef\u4ee5\u5927\u5927\u52a0\u901f\u89e3\u7801\u9636\u6bb5\uff0c\u4ece\u800c\u5bfc\u81f4\u7aef\u5230\u7aef\u5ef6\u8fdf\u7684\u6539\u5584\u3002\u8fd9\u79cd\u589e\u5f3a\u4e3b\u8981\u6e90\u4e8e\u4ece\u9ad8\u5e26\u5bbd\u5b58\u50a8\u5668( High Bandwidth Memory\uff0cHBM )\u4e2d\u52a0\u8f7d\u4f4e\u7cbe\u5ea6\u6743\u91cd\u5f20\u91cf\u7684\u91cf\u5316\u6a21\u578b\u7684\u80fd\u529b\uff0c\u5982\u524d\u6587\"\u9ad8\u6548\u5206\u6790\"\u90e8\u5206\u6240\u8ff0\u3002\u56e0\u6b64\uff0c\u8fd9\u79cd\u65b9\u6cd5\u660e\u663e\u51cf\u5c11\u5185\u5b58\u8bbf\u95ee\u5f00\u9500\u3002 2. \u5bf9\u4e8e\u9884\u586b\u5145\u9636\u6bb5\uff0c\u5355\u7eaf\u7684\u6743\u91cd\u91cf\u5316\u5b9e\u9645\u4e0a\u53ef\u80fd\u4f1a\u589e\u52a0\u5ef6\u8fdf\u3002\u8fd9\u662f\u7531\u4e8e\u9884\u586b\u5145\u9636\u6bb5\u7684\u74f6\u9888\u662f\u8ba1\u7b97\u6210\u672c\u800c\u4e0d\u662f\u8bbf\u5b58\u6210\u672c\u3002\u56e0\u6b64\uff0c\u5728\u6ca1\u6709\u6fc0\u6d3b\u7684\u60c5\u51b5\u4e0b\uff0c\u53ea\u91cf\u5316\u6743\u91cd\u5bf9\u5ef6\u8fdf\u7684\u5f71\u54cd\u5f88\u5c0f\u3002\u6b64\u5916\uff0c\u5982\u56fe9\u6240\u793a\uff0c\u5355\u7eaf\u7684\u6743\u91cd\u91cf\u5316\u9700\u8981\u9006\u91cf\u5316\u7684\u4f4e\u7cbe\u5ea6\u6743\u91cd\u7ed9FP16\uff0c\u5bfc\u81f4\u989d\u5916\u7684\u8ba1\u7b97\u5f00\u9500\uff0c\u4ece\u800c\u51cf\u6162\u9884\u586b\u5145\u9636\u6bb5\u3002 3. \u968f\u7740\u6279\u5927\u5c0f\u548c\u8f93\u5165\u957f\u5ea6\u7684\u589e\u52a0\uff0c\u4ec5\u4f7f\u7528\u6743\u91cd\u91cf\u5316\u6240\u83b7\u5f97\u7684\u52a0\u901f\u6bd4\u9010\u6e10\u51cf\u5c0f\u3002\u8fd9\u4e3b\u8981\u662f\u56e0\u4e3a\u6279\u6b21\u89c4\u6a21\u548c\u8f93\u5165\u957f\u5ea6\u8f83\u5927\u65f6\uff0c\u8ba1\u7b97\u6210\u672c\u8f83\u9ad8\u867d\u7136\u4ec5\u6743\u91cd\u91cf\u5316\u663e\u8457\u964d\u4f4e\u4e86\u8bbf\u5b58\u5f00\u9500\uff0c\u4f46\u968f\u7740\u6279\u5904\u7406\u5927\u5c0f\u548c\u8f93\u5165\u957f\u5ea6\u7684\u589e\u52a0\uff0c\u8ba1\u7b97\u9700\u6c42\u53d8\u5f97\u66f4\u52a0\u7a81\u51fa\uff0c\u4ec5\u6743\u91cd\u91cf\u5316\u5bf9\u5ef6\u8fdf\u7684\u5f71\u54cd\u53d8\u5f97\u4e0d\u90a3\u4e48\u663e\u8457\u3002 4. \u7531\u4e8e\u4e0e\u8f83\u5927\u7684\u6a21\u578b\u5c3a\u5bf8\u76f8\u5173\u7684\u663e\u8457\u7684\u5185\u5b58\u8bbf\u95ee\u5f00\u9500\uff0c\u4ec5\u6743\u91cd\u91cf\u5316\u4e3a\u8f83\u5927\u7684\u6a21\u578b\u63d0\u4f9b\u4e86\u66f4\u5927\u7684\u76ca\u5904\u3002\u968f\u7740\u6a21\u578b\u590d\u6742\u5ea6\u548c\u89c4\u6a21\u7684\u589e\u52a0\uff0c\u5b58\u50a8\u548c\u8bbf\u95ee\u6743\u91cd\u6240\u9700\u7684\u5185\u5b58\u5bb9\u91cf\u6210\u6bd4\u4f8b\u589e\u52a0\u3002\u901a\u8fc7\u91cf\u5316\u6a21\u578b\u6743\u91cd\uff0c\u4ec5\u6743\u91cd\u91cf\u5316\u6709\u6548\u5730\u51cf\u5c11\u4e86\u8fd9\u79cd\u5185\u5b58\u5360\u7528\u548c\u5185\u5b58\u8bbf\u95ee\u5f00\u9500\u3002</p> \u5355\u5361\u7ec6\u8282 <p></p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#sparsification","title":"Sparsification","text":"<p>\u975e\u7ed3\u6784\u5316\u526a\u679d\u5728\u786c\u4ef6\u65b9\u9762\u7684\u7a00\u758f\u6027\u7684\u52a0\u901f\u6f5c\u80fd\u3002\u8ddfHessian\u77e9\u9635\u6709\u5173\u3002 \u901a\u5e38\u91c7\u53d6\u91cd\u6784\u672a\u526a\u679d\u7684\u90e8\u5206\u6765\u8865\u507f\u526a\u679d\u635f\u5931</p> <p>\u6709\u4eba\u5229\u7528\u4e8c\u9636\u4fe1\u606f\u6765\u8f85\u52a9\u526a\u679d\u3002</p> <p>\u5f53\u7136\u7ed3\u6784\u5316\u526a\u679d\u7684\u597d\u5904\u4e5f\u975e\u5e38\u660e\u663e\uff0c\u5f0a\u7aef\u5219\u5728\u4e8e\u4f1a\u8f83\u5927\u635f\u5931\u6027\u80fd\u3002</p> <p>\u5f53\u7136\u8fd8\u5b58\u5728<code>sparse attention</code>\uff0c\u53c8\u4f1a\u5b58\u5728\u4e24\u79cd\u89e3\u51b3\u529e\u6cd5\uff1a<code>static sparse attention</code>\u548c<code>dynamic sparse attention</code>\uff0c\u524d\u8005\u662f\u5c06\u6ce8\u610f\u529b\u77e9\u9635\u7684\u7a00\u758f\u6027\u5f15\u5165\u5230\u6ce8\u610f\u529b\u77e9\u9635\u4e2d\uff0c\u540e\u8005\u5219\u662f\u81ea\u9002\u5e94\u6d88\u9664\u6fc0\u6d3b\u503c\u3002</p> \u4e00\u4e2a\u6709\u8da3\u7684attention\u65b9\u5411 <p></p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#structure_optimization","title":"Structure Optimization","text":"<p>\u7ed3\u6784\u4f18\u5316\u7684\u76ee\u6807\u662f\u7cbe\u5316\u6a21\u578b\u67b6\u6784\u6216\u7ed3\u6784\uff0c\u76ee\u6807\u662f\u589e\u5f3a\u6a21\u578b\u6548\u7387\u548c\u6027\u80fd\u4e4b\u95f4\u7684\u5e73\u8861\u3002\u5728\u8fd9\u4e00\u7814\u7a76\u9886\u57df\u4e2d\uff0c\u4e24\u4e2a\u7a81\u51fa\u7684\u6280\u672f\u8131\u9896\u800c\u51fa\uff1a\u795e\u7ecf\u67b6\u6784\u641c\u7d22( NAS )\u548c\u4f4e\u79e9\u5206\u89e3( LRF )\u3002</p> <p>\u795e\u7ecf\u67b6\u6784\u641c\u7d22( Neural Architecture Search\uff0cNAS ) [ 221 ]\u65e8\u5728\u81ea\u52a8\u641c\u7d22\u6700\u4f18\u7684\u795e\u7ecf\u67b6\u6784\uff0c\u5728\u6548\u7387\u548c\u6027\u80fd\u4e4b\u95f4\u53d6\u5f97\u6700\u4f73\u5e73\u8861\u3002\uff08\u8fdb\u5316\u7b97\u6cd5\uff1f\uff09</p> <p></p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#knowledge_distillation","title":"Knowledge Distillation","text":""},{"location":"Paper%20Reading/LLM%20Inference/survey/#dynamic_inference","title":"Dynamic Inference","text":"<p>\u52a8\u6001\u63a8\u7406\u662f\u8ba9\u6a21\u578b\u5b50\u7ed3\u6784\u8fdb\u884c\u81ea\u9002\u5e94\u9009\u62e9\uff0c\u6709\u70b9\u7c7b\u4f3ccpu\u7684\u4e2d\u65ad\u673a\u5236\uff0c\u4f46\u662f\u8fd9\u4e2a\u673a\u5236\u662f\u5728\u6a21\u578b\u5185\u90e8\u8fdb\u884c\u7684\u3002\uff08\u65e9\u505c\uff09 </p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#knowledge_suggestions_and_future_direction","title":"Knowledge, Suggestions and Future Direction","text":""},{"location":"Paper%20Reading/LLM%20Inference/survey/#system-level","title":"System-level","text":"<p>LLM\u63a8\u7406\u7684\u7cfb\u7edf\u7ea7\u4f18\u5316\u4e3b\u8981\u5305\u62ec\u589e\u5f3a\u6a21\u578b\u524d\u5411\u4f20\u9012\u3002\u8003\u8651\u4e00\u4e2aLLM\u7684\u8ba1\u7b97\u56fe\uff0c\u5b58\u5728\u591a\u4e2a\u8fd0\u7b97\u7b26\uff0c\u5176\u4e2d\u6ce8\u610f\u529b\u548c\u7ebf\u6027\u8fd0\u7b97\u7b26\u5360\u636e\u4e8675%\u3002\u6b64\u5916\u5176\u4ed6\u788e\u7247\u5316\u7684\u5927\u91cf\u7b97\u5b50\u4e5f\u4f1a\u5bfc\u81f4\u5185\u5b58\u8bbf\u95ee\u7684\u4e0d\u89c4\u5219\u6027\u3002\u56e0\u6b64\uff0c\u7cfb\u7edf\u7ea7\u4f18\u5316\u7684\u76ee\u6807\u662f\u51cf\u5c11\u5185\u5b58\u8bbf\u95ee\u6210\u672c\uff0c\u63d0\u9ad8\u8ba1\u7b97\u6548\u7387\u3002</p> <p></p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#inference_engine","title":"Inference Engine","text":""},{"location":"Paper%20Reading/LLM%20Inference/survey/#graph_and_operator_optimization","title":"Graph and Operator Optimization","text":"<p>cutlass\u7b49\u53bb\u4f18\u5316GEMM\u548cGEMV\u7684\u8ba1\u7b97\uff0c\u5e76\u4e14\u9488\u5bf9small batch\u4e5f\u6709\u4e00\u4e9b\u4f18\u5316\u3002</p> <p>\u7531\u4e8eMoE\u7684\u5feb\u901f\u589e\u957f\uff0c\u5bf9FFN\u7684\u4f18\u5316\u662f\u5341\u5206\u8feb\u5207\u7684\u3002</p> <ul> <li>** Graph-level Optimization**: kernal fusion\u4f5c\u4e3a\u4e00\u79cd\u6d41\u884c\u7684\u56fe\u7ea7\u4f18\u5316\uff0c\u56e0\u5176\u80fd\u591f\u51cf\u5c11\u8fd0\u884c\u65f6\u95f4\u800c\u8131\u9896\u800c\u51fa\u3002\u5e94\u7528\u6838\u878d\u5408\u7684\u4f18\u52bf\u4e3b\u8981\u6709\u4e09\u70b9\uff1a( 1 )\u51cf\u5c11\u5185\u5b58\u8bbf\u95ee\u3002\u878d\u5408\u540e\u7684\u5185\u6838\u672c\u8d28\u4e0a\u53bb\u9664\u4e86\u4e2d\u95f4\u7ed3\u679c\u7684\u5185\u5b58\u8bbf\u95ee\uff0c\u51cf\u8f7b\u4e86\u64cd\u4f5c\u5458\u7684\u5185\u5b58\u74f6\u9888\u3002( 2 )\u51cf\u8f7b\u5185\u6838\u542f\u52a8\u5f00\u9500\u3002\u5bf9\u4e8e\u4e00\u4e9b\u8f7b\u91cf\u7ea7\u7684\u8fd0\u7b97\u7b26(\u4f8b\u5982,\u6b8b\u5dee\u76f8\u52a0)\uff0c\u5185\u6838\u542f\u52a8\u65f6\u95f4\u5360\u636e\u4e86\u5927\u90e8\u5206\u7684\u5ef6\u8fdf\uff0c\u5185\u6838\u878d\u5408\u51cf\u5c11\u4e86\u5355\u4e2a\u5185\u6838\u7684\u542f\u52a8\u3002( 3 )\u589e\u5f3a\u5e76\u884c\u6027\u3002\u5bf9\u4e8e\u90a3\u4e9b\u4e0d\u5b58\u5728\u6570\u636e\u4f9d\u8d56\u5173\u7cfb\u7684\u8fd0\u7b97\u7b26\uff0c\u5f53\u4e00\u4e2a\u63a5\u4e00\u4e2a\u7684\u5185\u6838\u6267\u884c\u65e0\u6cd5\u586b\u5145\u786c\u4ef6\u5bb9\u91cf\u65f6\uff0c\u901a\u8fc7\u878d\u5408\u7684\u65b9\u5f0f\u5e76\u884c\u5316\u5185\u6838\u662f\u6709\u5229\u7684\u3002</li> </ul> <p>Flash Decoding \u5728\u63a8\u7406\u65f6\u53ef\u4ee5\u7740\u91cd\u4e86\u89e3\u4e0b </p> <p>Flash Decoding \u793a\u610f\u56fe\uff1a </p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#speculative_decoding","title":"Speculative Decoding","text":"<p>\u8be5\u65b9\u6cd5\u7684\u6838\u5fc3\u601d\u60f3\u662f\u4f7f\u7528\u4e00\u4e2a\u8f83\u5c0f\u7684\u6a21\u578b\uff0c\u79f0\u4e3a<code>draft model</code>\uff0c\u4ee5\u6709\u6548\u5730\u9884\u6d4b\u540e\u7eed\u7684\u51e0\u4e2atoken\uff0c\u7136\u540e\u4f7f\u7528\u76ee\u6807LLM\u5e76\u884c\u5730\u9a8c\u8bc1\u8fd9\u4e9b\u9884\u6d4b\u3002\u8be5\u65b9\u6cd5\u65e8\u5728\u4f7fLLM\u80fd\u591f\u5728\u5355\u6b21\u63a8\u7406\u6240\u9700\u7684\u65f6\u95f4\u8303\u56f4\u5185\u751f\u6210\u591a\u4e2atoken\u3002</p> <ul> <li>Draft Construction</li> <li>Draft Verify</li> </ul> <p></p> <p>\u5229\u7528\u6761\u4ef6\u6982\u7387\u7684\u5206\u5e03\u91c7\u6837 </p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#serving_system","title":"Serving System","text":"<p>\u8fd9\u91cc\u8ddf\u6570\u636e\u5e93\u7684page\u592a\u50cf\u4e86\u53ea\u80fd\u8bf4</p> <p></p> <p>\u7531\u4e8ekv-cache\u5360\u636e\u4e86\u63a8\u7406\u7684\u4e3b\u8981\u90e8\u5206\uff0c\u5982\u4f55\u5206\u914d\u8c03\u5ea6\u5219\u6210\u4e3a\u4e86\u4e00\u4e2a\u95ee\u9898\u3002\uff08\u5f53\u8003\u8651\u5230\u5e76\u53d1\u65f6\u66f4\u4e3a\u590d\u6742\uff09</p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#hardware_accelertor_design","title":"Hardware Accelertor Design","text":"<p>\u57fa\u4e8eFPGA\u7684\u4e00\u4e9b\u4e1c\u897f\uff1f\u4e0d\u662f\u5f88\u60f3\u8bb2\u4e86</p>"},{"location":"Paper%20Reading/LLM%20Inference/survey/#llm_framework","title":"LLM Framework","text":""},{"location":"Paper%20Reading/LLM%20Inference/survey/#_3","title":"\u7ed3\u8bed","text":""},{"location":"Paper%20Reading/basic%20model/","title":"\u7ecf\u5178\u6a21\u578b","text":"<p>AI\u4e00\u8bcd\u5c5e\u5b9e\u592a\u8fc7\u5bbd\u6cdb\uff0c\u5176\u4e0b\u5206\u652f\u4e5f\u592a\u591a\u592a\u591a\u4e86\u3002 \u4f46\u968f\u4e4bNN\u548cDL\u7684\u53d1\u5c55\uff0c\u6709\u8bb8\u591a\u7ecf\u5178\u7684\u6a21\u578b\u6216\u8005\u8bf4\u662f\u8bba\u6587\u662f\u9700\u8981\u5927\u5bb6\u638c\u63e1\u7684\u3002\u6211\u4e5f\u5c06\u6211\u7684\u6a21\u5757\u548c\u5b66\u4e60\u8fc7\u7a0b\u66f4\u65b0\u5728\u8fd9\u4e2a\u677f\u5757\u4e0b\u3002 \u66f4\u8fdb\u9636\u7684\u5185\u5bb9\u53ef\u4ee5\u770b\u6211\u7684Research\u677f\u5757\u3002</p> <p>\u5b66\u4e60\u8d44\u6e90</p> <p>PaperswithCode\u8fd9\u4e2a\u7f51\u7ad9\u63a8\u8350\u7ed9\u5927\u5bb6\u3002\u4e0d\u80fd\u5149\u5b66\u7406\u8bba\u4e0d\u770b\u4ee3\u7801\uff08bushi AI \u56fe\u8c31</p> <p>\u6b63\u5728\u5b66\u4e60</p> <ul> <li> RNN (basic LSTM) </li> <li> LeNet</li> <li> ResNet</li> <li> Transformer</li> </ul> \u76ee\u5f55 <p>\u251c\u2500\u2500 cnn.md \u251c\u2500\u2500 rnn.md (LSTM\u7b49) \u2514\u2500\u2500 transformer.md</p>"},{"location":"Paper%20Reading/basic%20model/VAE/","title":"AE","text":"<p>resource</p> <p>\u77e5\u4e4e\u6982\u8ff0</p>"},{"location":"Paper%20Reading/basic%20model/activationF/","title":"Activation Function","text":"<p>List</p> <ul> <li> Softmax</li> <li> ReLU</li> <li> Sigmoid</li> <li> GELU</li> <li> Tanh</li> <li> Swish</li> </ul> Resource <p>\u4e00\u6587\u6c47\u603b</p>"},{"location":"Paper%20Reading/basic%20model/cnn/","title":"CNN","text":""},{"location":"Paper%20Reading/basic%20model/diffusion/","title":"Diffusion","text":"<p>\u8d44\u6e90</p> <p>Blog</p>"},{"location":"Paper%20Reading/basic%20model/diffusion/#training","title":"Training","text":""},{"location":"Paper%20Reading/basic%20model/diffusion/#vae","title":"\u4e0eVAE\u7684\u5173\u7cfb","text":""},{"location":"Paper%20Reading/basic%20model/diffusion/#_1","title":"\u6570\u5b66\u63a8\u5bfc","text":""},{"location":"Paper%20Reading/basic%20model/diffusion/#sample","title":"\u4e3a\u4ec0\u4e48\u8981\u968f\u673asample","text":"<p>Dropout \u4e5f\u5f88\u6709\u8da3\uff1a</p>"},{"location":"Paper%20Reading/basic%20model/diffusion/#diffusion_1","title":"Diffusion\u7684\u4e00\u4e9b\u6709\u8da3\u5e94\u7528","text":""},{"location":"Paper%20Reading/basic%20model/gan/","title":"Generative Adversarial Networks","text":"<p>resource</p>"},{"location":"Paper%20Reading/basic%20model/gan/#basic_gan","title":"Basic GAN","text":""},{"location":"Paper%20Reading/basic%20model/gan/#vae","title":"VAE","text":"<p>KL Divergence [\u91cd\u53c2\u6570\u5316]</p>"},{"location":"Paper%20Reading/basic%20model/gnn/","title":"Graph nerual network","text":"<p>resource</p> <ul> <li>A gentle introduction to Graph Neural Networks (Basics, DeepWalk, GCN, GAT, GraphSAGE)</li> <li>understand GNN</li> <li>A survey on graph neural networks</li> <li>\u674e\u5b8f\u6bc5\u8001\u5e08\u7684\u52a9\u6559\u89c6\u9891</li> </ul>"},{"location":"Paper%20Reading/basic%20model/gnn/#basic_roadmap","title":"Basic RoadMap","text":""},{"location":"Paper%20Reading/basic%20model/gnn/#_1","title":"\u4e00\u4e9b\u4e9b\u6570\u5b66","text":"<p>\u56fe\u5377\u79ef\u7684\u57fa\u672c\u5b9a\u4e49</p> <p></p>"},{"location":"Paper%20Reading/basic%20model/gnn/#n-dim_vector_space","title":"N-dim Vector Space","text":"\\[ \\mathbb{R}^n = \\{x = (x_1, x_2, \\cdots, x_n) | x_i \\in \\mathbb{R}\\} \\\\ \\vec{A}=\\sum_{k=1}^{N} a_{k} \\widehat{v}_{k} \\\\ a_j = \\vec{A} \\cdot \\widehat{v}_j = \\sum_{k=1}^{N} a_{k} \\widehat{v}_{k} \\cdot \\widehat{v}_j \\\\ \\widehat{v}_{i} \\cdot \\widehat{v}_{j} = \\delta_{ij} = \\begin{cases} 1 &amp; i = j \\\\ 0 &amp; i \\neq j \\end{cases} \\]"},{"location":"Paper%20Reading/basic%20model/gnn/#fourier_series_representation","title":"Fourier Series Representation","text":"\\[ x(t) = \\sum_{n=-\\infty}^{\\infty} c_n e^{j2\\pi nt/T} \\\\ c_n = \\frac{1}{T} \\int_{T} x(t) e^{-j2\\pi nt/T} dt \\] <p>Fourier Transform $$ X(f) = \\int_{-\\infty}^{\\infty} x(t) e^{-j2\\pi ft} dt $$</p>"},{"location":"Paper%20Reading/basic%20model/gnn/#spectral_graph_theory","title":"Spectral Graph Theory","text":""},{"location":"Paper%20Reading/basic%20model/gnn/#laplacian_matrix","title":"Laplacian Matrix","text":"\\[ L = D - A \\] <p>\\(D\\) is the degree matrix, \\(A\\) is the adjacency matrix L is symmetric and positive semi-definite (for undirected graph) $ L = U \\Lambda U^T $, where \\(U\\) is the eigenvector matrix and \\(\\Lambda\\) is the eigenvalue matrix (Spectral decomposition)</p>"},{"location":"Paper%20Reading/basic%20model/gnn/#normalized_laplacian_matrix","title":"Normalized Laplacian Matrix","text":"\\[ L_{sym} = D^{-1/2} L D^{-1/2} \\\\ L_{rw} = D^{-1} L \\]"},{"location":"Paper%20Reading/basic%20model/gnn/#interpreting_vertex_frequency","title":"Interpreting vertex frequency","text":"<p>$$ Lf = (D-A)f = Df - Af $$  </p>"},{"location":"Paper%20Reading/basic%20model/gnn/#what_we_want_to_learn","title":"What we want to learn\uff1f","text":"<p>ChebNet\uff1a\u901a\u8fc7Chebyshev\u591a\u9879\u5f0f\u8fd1\u4f3c\u5377\u79ef\u6838 GCN\u662fChebNet\u7684\u7279\u4f8b\uff0c\u53ea\u4f7f\u7528\u4e86\u4e00\u9636Chebyshev\u591a\u9879\u5f0f GCN-LPA\uff1a\u5c06GCN\u4e0eLPA\uff08Label Propagation Algorithm\uff09\u7ed3\u5408\uff0c\u5b9e\u73b0\u4e86\u534a\u76d1\u7763\u5b66\u4e60 GAT\u662fGCN\u7684\u6539\u8fdb\uff0c\u901a\u8fc7\u6ce8\u610f\u529b\u673a\u5236\u5b66\u4e60\u6743\u91cd</p>"},{"location":"Paper%20Reading/basic%20model/mlp/","title":"MultiLayer Perceptron(MLP)","text":"<p>Basic Tutor</p> <p>\u611f\u89c9\u8fd9\u4e00\u7ae0\u8282\u6ca1\u4ec0\u597d\u8bf4\u7684\uff0c\u5c31\u5148\u653e\u5728\u8fd9\u91cc\u5427\u3002</p> <p>\u4e4b\u540e\u6211\u8ba1\u5212\u53ef\u80fd\u53ef\u4ee5\u6dfb\u52a0\u4e9b\u66f4\u57fa\u7840\u7684\u6216\u8005\u66f4\u6570\u7406\u7684\u8bba\u8bc1</p>"},{"location":"Paper%20Reading/basic%20model/rnn/","title":"RNN","text":"<p>\u5faa\u73af\u795e\u7ecf\u7f51\u7edc\u7684\u5927\u540d\u76f8\u4fe1\u5927\u5bb6\u80af\u5b9a\u65e9\u5c31\u5df2\u7ecf\u542c\u8fc7\u4e86\u3002\u6211\u4eec\u4e0d\u59a8\u6765\u770b\u7bc7\u535a\u5ba2\u600e\u4e48\u8bf4\u3002</p>"},{"location":"Paper%20Reading/basic%20model/rnn/#lstm","title":"LSTM","text":"<p>An LSTM is a type of recurrent neural network that addresses the vanishing gradient problem in vanilla RNNs through additional cells, input and output gates. Intuitively, vanishing gradients are solved through additional additive components, and forget gate activations, that allow the gradients to flow through the network without vanishing as quickly.</p> \u8d44\u6e90\u6c47\u603b <ol> <li>Guide Blog</li> <li>cs224d slide</li> <li>cs224d LSTM &amp; GLU</li> </ol>"},{"location":"Paper%20Reading/basic%20model/transformer/","title":"Transformer","text":"<p>\u6458\u8981</p> <p>\u8bba\u6587\uff1aAttention Is All You Need</p> <p>\u53c2\u8003\u8d44\u6599\uff1ahttp://jalammar.github.io/illustrated-transformer/</p> <p>\u6e90\u7801\u53c2\u8003\uff1ahttps://github.com/jadore801120/attention-is-all-you-need-pytorch </p> <p>\u6570\u5b66\u8bc1\u660e: https://transformer-circuits.pub/2021/framework/index.html</p>"},{"location":"Paper%20Reading/basic%20model/transformer/#_1","title":"\u8bba\u6587\u5185\u5bb9\u6279\u6ce8","text":""},{"location":"Paper%20Reading/basic%20model/transformer/#_2","title":"\u4e00\u4e9b\u80cc\u666f","text":"<ol> <li>BELU\u4e00\u79cd\u81ea\u52a8\u8bc4\u4f30\u673a\u5668\u7ffb\u8bd1\u6587\u672c\u7684\u6307\u6807\u3002BLEU \u5f97\u5206\u662f\u4e00\u4e2a 0 \u5230 1 \u4e4b\u95f4\u7684\u6570\u5b57\uff0c\u7528\u4e8e\u8861\u91cf\u673a\u5668\u7ffb\u8bd1\u6587\u672c\u4e0e\u4e00\u7ec4\u9ad8\u8d28\u91cf\u53c2\u8003\u7ffb\u8bd1\u7684\u76f8\u4f3c\u5ea6\u30020 \u8868\u793a\u673a\u5668\u7ffb\u8bd1\u7684\u8f93\u51fa\u4e0e\u53c2\u8003\u7ffb\u8bd1\u6ca1\u6709\u91cd\u53e0\uff08\u4f4e\u8d28\u91cf\uff09\uff0c\u800c 1 \u8868\u793a\u5176\u4e0e\u53c2\u8003\u7ffb\u8bd1\u5b8c\u5168\u91cd\u53e0\uff08\u9ad8\u8d28\u91cf\uff09\u3002</li> </ol> <p>\u4e8b\u5b9e\u8868\u660e\uff0cBLEU \u5f97\u5206\u4e0e\u4eba\u7c7b\u5bf9\u7ffb\u8bd1\u8d28\u91cf\u7684\u5224\u65ad\u6709\u5f88\u597d\u7684\u76f8\u5173\u6027\u3002\u8bf7\u6ce8\u610f\uff0c\u5373\u4f7f\u662f\u4eba\u5de5\u7ffb\u8bd1\u4e5f\u65e0\u6cd5\u8fbe\u5230 1.0 \u7684\u6ee1\u5206\u3002\u4e00\u822c\u6765\u8bf4\uff0c&gt;40%\u5c31\u7b97\u662f\u5f88\u9ad8\u8d28\u91cf\u7684\u7ffb\u8bd1\uff0c&gt;60%\u5219\u5f80\u5f80\u8d85\u8fc7\u4eba\u5de5\u7ffb\u8bd1\u3002</p> <ol> <li>LSTM</li> </ol>"},{"location":"Paper%20Reading/basic%20model/transformer/#seq2seq","title":"Seq2Seq","text":"<p>\u8fd9\u4e2a\u6a21\u578b\u975e\u5e38\u7684\u6709\u8da3\uff0c\u9700\u8981\u4e0d\u5b9a\u8f93\u51fa\u7684\u6a21\u578b\u90fd\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u5f97\u5230\u6bd4\u8f83\u597d\u7684\u6548\u679c</p>"},{"location":"Paper%20Reading/basic%20model/transformer/#encoder","title":"Encoder","text":"<ol> <li> <p>\u4e0b\u56fe\u4e2d\u7684\u8bba\u6587\u8bf4\u660e\u4e86\uff0cnormalization\u7684\u4f4d\u7f6e\u5e76\u4e0d\u56fa\u5b9a\u3002 </p> </li> <li> <p>attention \u662f\u5426\u53ef\u4ee5\u589e\u6dfb\u4e00\u4e9b\u9650\u5236\u5462\uff1f\u8fd9\u4e9b\u4e5f\u5df2\u7ecf\u6709\u4eba\u7814\u7a76\u8fc7\u4e86\u3002    </p> </li> <li> <p>Beam search\uff1a\u7528\u6765\u89e3\u51b3\u641c\u7d22\u95ee\u9898\u7684\u4e00\u79cd\u6280\u672f\uff0c\u5b83\u662f\u4e00\u79cd\u542f\u53d1\u5f0f\u641c\u7d22\u7b97\u6cd5\uff0c\u7528\u4e8e\u5728\u56fe\u6216\u6811\u4e2d\u641c\u7d22\u6700\u4f18\u8def\u5f84\u3002Beam search \u662f\u4e00\u79cd\u8d2a\u5fc3\u7b97\u6cd5\uff0c\u5b83\u5728\u6bcf\u4e00\u6b65\u90fd\u4fdd\u7559 k \u4e2a\u6700\u6709\u5e0c\u671b\u7684\u89e3\uff0c\u7136\u540e\u5728\u4e0b\u4e00\u6b65\u4e2d\u7ee7\u7eed\u6269\u5c55\u8fd9\u4e9b\u89e3\u3002\u8fd9\u6837\uff0cBeam search \u4f1a\u5728\u641c\u7d22\u7a7a\u95f4\u4e2d\u4fdd\u7559 k \u6761\u8def\u5f84\uff0c\u800c\u4e0d\u662f\u53ea\u4fdd\u7559\u4e00\u6761\u8def\u5f84\u3002\u8fd9\u6837\uff0cBeam search \u53ef\u4ee5\u5728\u641c\u7d22\u7a7a\u95f4\u4e2d\u4fdd\u7559\u591a\u4e2a\u89e3\uff0c\u4ece\u800c\u63d0\u9ad8\u641c\u7d22\u6548\u7387\u3002</p> </li> <li> <p>optimize\u7684\u65f6\u5019\u4e5f\u53ef\u4ee5\u786ctrain\u4e00\u53d1\uff0c\u628adecoder\u5f53\u4f5cagent\u6765\u8fdb\u884creward\u3002    Berkley blog</p> </li> <li> <p>schedule sampling \u53ef\u4ee5\u7528\u6765\u89e3\u51b3\u8bad\u7ec3\u548c\u6d4b\u8bd5\u7684\u4e0d\u4e00\u81f4\u95ee\u9898\u3002    \u8bba\u6587</p> </li> </ol>"},{"location":"Paper%20Reading/basic%20model/transformer/#decoder","title":"Decoder","text":"<p>\u5728Decoder\u4e2d\u5c31\u6709\u4e86cross attention\u3002</p>"},{"location":"Paper%20Reading/basic%20model/transformer/#_3","title":"\u4ee3\u7801\u89e3\u91ca","text":""},{"location":"Paper%20Reading/basic%20model/transformer/#self-attention","title":"self-attention","text":"<p>\u8d44\u6e90</p> <p>\u8fd9\u4e2a\u90e8\u5206\u5176\u5b9e\u975e\u5e38\u63a8\u8350\u53bb\u770b21spring\u674e\u5b8f\u6bc5\u8001\u5e08\u7684\u89c6\u9891\uff0c\u6709\u5f88\u591a\u542f\u53d1\u6027\u7684\u5185\u5bb9!!! \u4ee5\u53ca\u4e00\u4e2a\u5bf9\u6bd4\u8bb2\u89e3\u89c6\u9891 </p> <p>\u5176\u5b9eQuery Key Value \u4e2a\u4eba\u8ba4\u4e3a\u8fd8\u662f\u4e00\u4e2a\u6bd4\u8f83\u597d\u7406\u89e3\u7684\u903b\u8f91\uff0c\u53ef\u4ee5\u901a\u8fc73b1b\u7684\u53ef\u89c6\u5316\u8fdb\u884c\u66f4\u597d\u7684\u7406\u89e3\u3002\u4f46\u6b64\u5916\u6765\u8bf4\uff0c\u5b83\u975e\u5e38\u53d6\u5de7\u7684\u8fdb\u884c\u4e86\u4e00\u79cd\u7c7b\u4f3c\u4e8e\u77e9\u9635\u4e58\u6cd5\u7684\u64cd\u4f5c\uff0c\u6765\u52a0\u901f\u4e86\u8fd0\u7b97\u901f\u5ea6\uff0c\u5e76\u4e14\u7c7b\u4f3c\u5168\u8fde\u63a5\u5c42\uff0c\u52a0\u5165\u4e86\u5168\u5c40\u4fe1\u606f\u3002\\</p> <p> </p> self-attention <pre><code>class FeedForwardNetwork(nn.Module):\n    def __init__(self, hidden_size, filter_size, dropout_rate):\n        super(FeedForwardNetwork, self).__init__()\n\n        self.layer1 = nn.Linear(hidden_size, filter_size)\n        self.relu = nn.ReLU()\n        self.dropout = nn.Dropout(dropout_rate)\n        self.layer2 = nn.Linear(filter_size, hidden_size)\n\n        initialize_weight(self.layer1)\n        initialize_weight(self.layer2)\n\n    def forward(self, x):\n        x = self.layer1(x)\n        x = self.relu(x)\n        x = self.dropout(x)\n        x = self.layer2(x)\n        return x\n\n\nclass MultiHeadAttention(nn.Module):\n    def __init__(self, hidden_size, dropout_rate, head_size=8):\n        super(MultiHeadAttention, self).__init__()\n\n        self.head_size = head_size\n\n        self.att_size = att_size = hidden_size // head_size\n        self.scale = att_size ** -0.5\n\n        self.linear_q = nn.Linear(hidden_size, head_size * att_size, bias=False)\n        self.linear_k = nn.Linear(hidden_size, head_size * att_size, bias=False)\n        self.linear_v = nn.Linear(hidden_size, head_size * att_size, bias=False)\n        initialize_weight(self.linear_q)\n        initialize_weight(self.linear_k)\n        initialize_weight(self.linear_v)\n\n        self.att_dropout = nn.Dropout(dropout_rate)\n\n        self.output_layer = nn.Linear(head_size * att_size, hidden_size,\n                                    bias=False)\n        initialize_weight(self.output_layer)\n\n    def forward(self, q, k, v, mask, cache=None):\n        orig_q_size = q.size()\n\n        d_k = self.att_size\n        d_v = self.att_size\n        batch_size = q.size(0)\n\n        # head_i = Attention(Q(W^Q)_i, K(W^K)_i, V(W^V)_i)\n        q = self.linear_q(q).view(batch_size, -1, self.head_size, d_k)\n        if cache is not None and 'encdec_k' in cache:\n            k, v = cache['encdec_k'], cache['encdec_v']\n        else:\n            k = self.linear_k(k).view(batch_size, -1, self.head_size, d_k)\n            v = self.linear_v(v).view(batch_size, -1, self.head_size, d_v)\n\n            if cache is not None:\n                cache['encdec_k'], cache['encdec_v'] = k, v\n\n        q = q.transpose(1, 2)                  # [b, h, q_len, d_k]\n        v = v.transpose(1, 2)                  # [b, h, v_len, d_v]\n        k = k.transpose(1, 2).transpose(2, 3)  # [b, h, d_k, k_len]\n\n        # Scaled Dot-Product Attention.\n        # Attention(Q, K, V) = softmax((QK^T)/sqrt(d_k))V\n        q.mul_(self.scale)\n        x = torch.matmul(q, k)  # [b, h, q_len, k_len]\n        x.masked_fill_(mask.unsqueeze(1), -1e9)\n        x = torch.softmax(x, dim=3)\n        x = self.att_dropout(x)\n        x = x.matmul(v)  # [b, h, q_len, attn]\n\n        x = x.transpose(1, 2).contiguous()  # [b, q_len, h, attn]\n        x = x.view(batch_size, -1, self.head_size * d_v)\n\n        x = self.output_layer(x)\n\n        assert x.size() == orig_q_size\n        return x\n</code></pre>"},{"location":"Paper%20Reading/protein/","title":"Protein basic Information","text":"<ul> <li>MSA :MSA\u4e5f\u53ef\u4ee5\u6307Multiple Sequence Alignment\uff0c\u5373\u591a\u5e8f\u5217\u6bd4\u5bf9\u3002\u5728\u751f\u7269\u4fe1\u606f\u5b66\u4e2d\uff0c\u591a\u5e8f\u5217\u6bd4\u5bf9\u662f\u5c06\u591a\u4e2a\u751f\u7269\u5e8f\u5217\uff08\u5982DNA\u3001RNA\u6216\u86cb\u767d\u8d28\u5e8f\u5217\uff09\u8fdb\u884c\u5bf9\u9f50\u4ee5\u5bfb\u627e\u5b83\u4eec\u4e4b\u95f4\u5171\u540c\u7684\u6a21\u5f0f\u548c\u7ed3\u6784\u7684\u8fc7\u7a0b\u3002\u591a\u5e8f\u5217\u6bd4\u5bf9\u5728\u7406\u89e3\u751f\u7269\u5e8f\u5217\u4e4b\u95f4\u7684\u76f8\u4f3c\u6027\u3001\u63a8\u65ad\u8fdb\u5316\u5173\u7cfb\u4ee5\u53ca\u9884\u6d4b\u86cb\u767d\u8d28\u7ed3\u6784\u7b49\u65b9\u9762\u8d77\u7740\u91cd\u8981\u4f5c\u7528\u3002</li> <li>[\u4e09\u89d2\u4e0d\u7b49\u5f0f]</li> <li>PDB : \u751f\u7269\u4e2d\u7684PDB\u6570\u636e\u5e93\uff0c\u5168\u79f0\u4e3a\u86cb\u767d\u8d28\u6570\u636e\u94f6\u884c\uff08Protein Data Bank\uff09\uff0c\u662f\u4e00\u4e2a\u6536\u96c6\u548c\u5b58\u50a8\u751f\u7269\u5927\u5206\u5b50\u4e09\u7ef4\u7ed3\u6784\u4fe1\u606f\u7684\u6570\u636e\u5e93\u3002PDB\u6570\u636e\u5e93\u901a\u8fc7\u5404\u79cd\u5b9e\u9a8c\u624b\u6bb5\uff0c\u5982X\u5c04\u7ebf\u5355\u6676\u884d\u5c04\u3001\u6838\u78c1\u5171\u632f\uff08NMR\uff09\u548c\u51b7\u51bb\u7535\u5b50\u663e\u5fae\u955c\uff08Cryo-EM\uff09\u7b49\uff0c\u786e\u5b9a\u4e86\u86cb\u767d\u8d28\u3001\u6838\u9178\u4ee5\u53ca\u5176\u4ed6\u751f\u7269\u5927\u5206\u5b50\u7684\u4e09\u7ef4\u7ed3\u6784\u3002\u8fd9\u4e9b\u7ed3\u6784\u4fe1\u606f\u5305\u62ec\u539f\u5b50\u5750\u6807\u3001\u4e00\u7ea7\u548c\u4e8c\u7ea7\u7ed3\u6784\u4fe1\u606f\uff0c\u6676\u4f53\u7ed3\u6784\u56e0\u6570\u4ee5\u53caNMR\u5b9e\u9a8c\u6570\u636e\u7b49\u3002</li> <li>Paper list</li> <li>Protein Design</li> </ul>"},{"location":"Paper%20Reading/protein/ESM3/","title":"ESM3","text":"<p>\u5bfc\u8bfb</p> <p>\u672c\u6587\u5176\u5b9e\u662f\u7528\u591a\u6a21\u6001\u7684\u601d\u8def\u505a\u7684\u86cb\u767d\u8d28\u7ed3\u6784\u3001\u529f\u80fd\u3001\u5e8f\u5217\u7684\u7edf\u4e00\u8868\u5f81\uff1b\u6211\u4f1a\u5c3d\u53ef\u80fd\u7ed3\u5408\u8bba\u6587\u548c\u4ee3\u7801\u505a\u4e00\u4e2a\u89e3\u8bfb</p> <p>ESM3\u4e0e\u4e0d\u540c\u4e8e\u6a21\u62df\u591a\u79cd\u751f\u7269\u5206\u5b50\u7684<code>AlphaFold3</code>\uff0c\u53ea\u4e13\u6ce8\u4e8e\u86cb\u767d\u8d28\uff0c\u4f46\u53ef\u4ee5\u540c\u65f6\u63a8\u7406\u5176\u5e8f\u5217\u3001\u7ed3\u6784\u548c\u529f\u80fd</p>"},{"location":"Paper%20Reading/protein/ESM3/#architecture","title":"Architecture","text":"<p>\u9274\u4e8eLLM scaling low \u7684\u80fd\u529b\uff0c\u63d0\u9ad8\u4e8660\u500d\u6570\u636e\u91cf\uff0c\u8bad\u7ec3\u8ba1\u7b97\u91cf\u63d0\u9ad825\u500d\u3002</p> <p>\u7ed3\u6784\u56fe\u5982\u4e0b\uff1a</p> <p> The generative pipeline is as follows:</p> <ul> <li> <p>Tokenization: First, raw inputs are tokenized as described in Appendix A.1.3. Structural inputs are tokenized via a VQ-VAE (Appendix A.1.7). Function keywords are tokenized by quantizing the TF-IDF transform of functional keywords with locality sensitive hashing (LSH), detailed in Appendix A.1.8. </p> </li> <li> <p>Transformer Trunk: A standard Transformer (57, 58) architecture processes the post-tokenized inputs. Geometric Attention (Algorithm 6 and Fig. S2) directly processes structural coordinates as input. Model outputs are logits over token space, and can be sampled to obtain outputs described in Appendix A.1.5.2. The overall architecture is diagrammed in Fig. S1</p> </li> <li> <p>Decoder: Most tracks can be naively decoded into tokens detailed in Appendix A.1.3. Structure tokens must be decoded with a model - we use a 700M parameter transformer model to do this, trained post-hoc (Appendix A.1.7.2). The decoder uses sequence tokens and structure tokens to directly predict coordinates, pTM, and pLDDT (59). Function tokens are decoded using a small 3-layer transformer, trained post-hoc to invert the LSH quantization procedure (Appendix A.1.8.2.1).</p> </li> </ul>"},{"location":"Paper%20Reading/protein/ESM3/#structure","title":"Structure","text":"<p>\u7ed3\u6784\u4fe1\u606f\u7684\u8868\u8fbe\u662f\u901a\u8fc7<code>VQ-VAE</code>\u6765\u5b9e\u73b0\u7684\uff1b\u8fd8\u4f1a\u878d\u5408\u51e0\u4f55\u7ed3\u6784\u4fe1\u606f\u3002 </p>"},{"location":"Paper%20Reading/protein/ESM3/#_1","title":"\u529f\u80fd","text":"<p>\u8fd8\u662f\u57fa\u4e8e\u6570\u636e\u5e93\u7684\u4f20\u7edf\u7b97\u6cd5\u7684\u6807\u6ce8\uff08\u8fd9\u91cc\u6000\u7591\u662f\u5426\u4f1a\u62df\u5408\u4eba\u9020\u6570\u636e\uff09</p>"},{"location":"Paper%20Reading/protein/ESM3/#_2","title":"\u53ef\u80fd\u6027","text":"<p>\u5408\u6210\u7684\u5bf9\u6bd4 </p>"},{"location":"Paper%20Reading/protein/alphafold/","title":"AlphaFold","text":""},{"location":"Paper%20Reading/protein/alphafold/#alphafold2_improved_protein_structure_prediction_using_deep_learning","title":"AlphaFold2: Improved protein structure prediction using deep learning","text":"<ul> <li>Paper</li> <li>Code</li> <li>Blog</li> </ul>"},{"location":"Paper%20Reading/protein/alphafold/#ipa_invariant_point_attention","title":"IPA\uff08 invariant point attention \uff09","text":""},{"location":"Scientific%20research/","title":"\u79d1\u7814","text":"<p>\u8fd9\u91cc\u5c06\u8bb0\u5f55\u672c\u4eba\u7684\u4e00\u4e9b\u79d1\u7814\u8bb0\u5f55</p> <p>\u5f53\u7136\u6211\u5f88\u63a8\u8350\u6bcf\u4e2a\u4eba\u53bb\u770b\u770bpengsida\u5b66\u957f\u7684\u7ecf\u9a8c\u5e16, \u76f8\u4fe1\u4f60\u4f1a\u6709\u81ea\u5df1\u7684\u7406\u89e3\u7684\u3002</p> <p>\u76ee\u5f55</p> <ul> <li> \u5927\u4e8c\u8ddf\u8d75\u6d32\u8001\u5e08\u505a\u4e9b\u5173\u4e8e<code>speech</code>\u5b66\u4e60</li> </ul> <p>\u8d44\u6e90</p> <ul> <li>PaperswithCode\u8fd9\u4e2a\u7f51\u7ad9\u63a8\u8350\u7ed9\u5927\u5bb6\u3002\u4e0d\u80fd\u5149\u5b66\u7406\u8bba\u4e0d\u770b\u4ee3\u7801\uff08bushi  </li> <li>\u8bba\u6587\u56fe\u8c31</li> <li>AI \u56fe\u8c31</li> <li>vizro\uff1a\u4e00\u4e2a\u597d\u7528\u7684\u753b\u56fe\u5de5\u5177</li> <li>\u8bba\u6587\u5199\u4f5c</li> <li>\u753b\u56fe</li> <li>hiplot</li> <li>\u6a21\u578b\u56fe</li> <li>tuning</li> <li>\u674e\u6c90\u8001\u5e08\u8bba\u6587\u9605\u8bfb</li> </ul>"},{"location":"Scientific%20research/article/","title":"Abstract\u7528\u8bcd\u53e5\u5f0f","text":"<p>... excels in ... . In contrast, ... but still ... . To bridge this gap, out study undertakes a comprehensive exploration of ...</p> \u4e00\u4e9b\u526f\u8bcd <p>explicitly</p> <p>\u4ecb\u7ecd\u80cc\u666f\uff1a</p> <p>\"The increasing demand for...\" \"Recent studies have shown that...\" \"With the advent of...\" \u9648\u8ff0\u76ee\u7684\uff1a</p> <p>\"This study aims to...\" \"The primary objective of this research is to...\" \"We investigate the effects of...\" \u63cf\u8ff0\u65b9\u6cd5\uff1a</p> <p>\"We employed a mixed-methods approach...\" \"The data were collected through...\" \"A series of experiments were conducted to...\" \u603b\u7ed3\u7ed3\u679c\uff1a</p> <p>\"The results indicate that...\" \"Our findings reveal that...\" \"It was observed that...\" \u7ed9\u51fa\u7ed3\u8bba\uff1a</p> <p>\"In conclusion, the study demonstrates that...\" \"These results suggest that...\" \"The findings highlight the importance of...\"</p>"},{"location":"Scientific%20research/ode/","title":"Ode","text":""},{"location":"Scientific%20research/ode/#_1","title":"\u5e38\u5fae\u5206\u65b9\u7a0b","text":"<p>\u6458\u8981</p> <p>\u56e0\u4e3a\u611f\u89c9ode\u8fd9\u4e2a\u5730\u65b9\u53ef\u4ee5\u7528\u5230\u7684\u5730\u65b9\u5b9e\u5728\u662f\u592a\u591a\uff0c\u4f46\u82e6\u4e8e\u5fae\u79ef\u5206\u548c\u6dd1\u82ac\u90fd\u6ca1\u6709\u76f8\u5173\u7684\u6559\u5b66\u800c\u662f\u5355\u72ec\u6388\u8bfe\uff0c\u6545\u800c\u5728\u6b64\u8fdb\u884c\u4e00\u4e2a\u8865\u5145\u3002</p>"},{"location":"Scientific%20research/vlm/","title":"\u4e00\u4e9b\u5e38\u89c1\u7684VLM\u7684\u95ee\u9898","text":""},{"location":"Scientific%20research/writing/","title":"\u8bba\u6587\u5199\u4f5c\u8bcd\u6c47\u8868","text":"<p>\u8d44\u6e90</p> <p>pengsida\u5b9e\u9a8c\u5ba4\u8bba\u6587\u5199\u4f5c\u6307\u5357 \u4e00\u4e2a\u5b9d\u85cf\u4e66</p>"},{"location":"Scientific%20research/writing/#methods","title":"Methods","text":""},{"location":"Scientific%20research/writing/#give_the_source","title":"Give the source","text":"<ul> <li>The extracts were obtained by ...</li> <li>The ... used in the study was provided by ...</li> <li>The ... was purchased from ...</li> <li>... were a kind gift from ...  (, courtesy of ...)</li> <li>The inclusion criteria used here are a modified version of those used by ...</li> <li>All images were acquired from ...</li> </ul>"},{"location":"Scientific%20research/writing/#describe_the_method","title":"Describe the method","text":"<ul> <li>At the beginning of the experiment, ...</li> <li>then, later, when ...</li> <li>At the end, there was a noticeable ...</li> </ul>"},{"location":"Scientific%20research/writing/#compare_with_others","title":"Compare with others","text":"<ul> <li>We follow ...</li> <li>The analytical method was adapted from ...</li> <li>... was prepared as described by ...</li> <li>We modified ...</li> <li>Data were collected using a revised version of ...</li> </ul>"},{"location":"Scientific%20research/writing/#justify_your_choices","title":"Justify your choices","text":"<ul> <li>For brevity, these equations are not shown here.</li> <li>To make the problem more tractable, we ...</li> <li>... is added to the matrix in order to ...</li> <li>The advantage of this approach is that ...</li> <li>For verification purposes, we also ...</li> <li>Our control drug was given to all patients; therefore, we were able to ...</li> <li>To prevent contamination, we ...</li> <li>... so as to avoid ...</li> </ul>"},{"location":"Scientific%20research/writing/#indicate_that_appropriate_care_was_taken","title":"Indicate that appropriate care was taken","text":"<ul> <li>Care was taken to maintain strict confidentiality.</li> <li>... thoroughly at least three times.</li> <li>To prevent ..., only gentle, repeated ... (avoid, circumvent, prevent, resist)</li> <li>... was tightly clamped</li> <li>... was carefully monitored</li> <li>We used a reliable analytical method to ensure that ... based on ...</li> </ul>"},{"location":"Scientific%20research/writing/#indicate_where_problems_occurred","title":"Indicate where problems occurred","text":"<ul> <li>Despite our routine of monthly examinations, follow-up was not perfect.</li> <li>It was slightly difficult to deposit ..., probably owing to ...</li> <li>Varying the diameter required the machine to be recalibrated, which was rather time-consuming.</li> <li>Due to the lack of multiwavelength data, it was not possible to ...</li> <li>Inevitably, considerable computation was involved.</li> <li>This procedure was slightly problematic in that ...</li> </ul>"},{"location":"Scientific%20research/writing/#results_discussion","title":"Results &amp; Discussion","text":"<ul> <li>To our knowledge, the study reported here is ...</li> <li>However this was not addressed formally during the study.</li> <li>Some questions remain unanswered.</li> <li>The results of this study provide compeling evidence that ...</li> <li>a direct comparison with the post-viral period would provide ...</li> <li>In addition the study provides evidence-based guidance for ...</li> </ul> <p>useful words</p> <p>Map to existing literature or knowledge 1. Rather than being excluded as is often suggested, ... 2. ... resembles the findings of ... 3. ... provide support for the theory that ... 4. ... approach complements existing ... 5. The study extends ... 6. This study extends ... 7. These results are consistent with ... 8. The current study therefore both confirmed and expanded prior findings.</p> <p>Refine or explore the implications of the results 1. It is conceivable that ... could 2. A tentative explanation is that ... may 3. We hypothetize that ... could 4. It is intriguing to speculate that ... may 5. However, we do not rule out the possibility that ... 6. We postulate that ... may</p> <p>Achievement and contribution 1. This results in a cost-effective approach which significantly improves scalability. 2. We were able to demonstrate a striking difference in ... 3. We describe not only ... but also ... with unprecedented accuracy. 4. This study provides a first step towards a better understanding of ... 5. This model is thus both realistic and computationally efficient / flexible.</p> <p>Current and future work 1. Future studies should investigate whether ... 2. Developing a modle able to answer ... is an exciting challenge for future research. 3. Future work should focus on (in progress to) ... 4. ... should be investigated further. 5. Recommendations for future research include ...</p> <p>Applications, use or implementation 1. This approach provides evidence-based guidance for ... 2. The dissection protocol outlined here is apppropriate for ... 3. The approach presented here is suitable for ... 4. ... here could be used to evaluate ... 5. The proposed technique could be implemented widely within the ... 6. Our protocol will enable ..., thereby facilitating ... 7. This work shows that ... are feasible for widespread use. 8. The data reported in this study could eventually lead to ...</p>"},{"location":"Scientific%20research/3d%20vision/","title":"3D vision","text":"<p>https://docs.google.com/spreadsheets/d/1EsOT02m8YkCXGg6N9XFDEB3AHzYfNjn9Sm--NimVti8/edit?gid=1655842711#gid=1655842711</p>"},{"location":"Scientific%20research/4science/","title":"4 Science","text":"<p>\u5927\u4e8c\u4e0b\u5728\u6c88\u6625\u534e\u8001\u5e08\u7ec4\u5185\u5b66\u4e60</p> <p>\u8d44\u6e90</p> <ul> <li>Community</li> <li>\u8ba1\u7b97\u751f\u7269\u5b66\u5bfc\u8bba\u8bfe</li> <li>MIT course</li> </ul>"},{"location":"Scientific%20research/4science/dataset/","title":"dataset","text":""},{"location":"Scientific%20research/4science/dataset/#-_testset","title":"- testset\u4e0d\u4f1a\u641e","text":""},{"location":"Scientific%20research/4science/protein_hierachy/","title":"Protein hierachy","text":"<p>resource</p> <p>Protein Machinelearning</p>"},{"location":"Scientific%20research/4science/protein_hierachy/#paper_list","title":"Paper list","text":""},{"location":"Scientific%20research/4science/protein_hierachy/#3d_graph_network","title":"3d graph network","text":"<ul> <li>Protein Representation Learning by Geometric Structure Pretraining</li> <li>Learning hierarchical protein representations via complete 3d graph networks</li> </ul>"},{"location":"Scientific%20research/4science/protein_hierachy/#relevant_paper","title":"relevant paper","text":"<ul> <li>Symmetry-Informed Geometric Representation for Molecules, Proteins, and Crystalline Materials NIPS2023</li> <li>A new perspective on building efficient and expressive 3D equivariant graph neural networks NIPS2023</li> <li>Multi-body SE(3) Equivariance for Unsupervised Rigid Segmentation and Motion Estimation NIPS2023</li> </ul>"},{"location":"Scientific%20research/4science/protein_hierachy/#article_in_submission","title":"Article in submission","text":"<ul> <li>A Survey of Geometric Graph Neural Networks: Data Structures, Models and Applications</li> <li>Equivariant Pretrained Transformer for Unified Geometric Learning on Multi-Domain 3D Molecules</li> </ul>"},{"location":"Scientific%20research/basic%20tutor/voice%20synthesis/","title":"Voice synthesis","text":"<p>\u8bed\u97f3\u5408\u6210\u5165\u95e8 \u6df1\u5ea6\u5b66\u4e60\uff0820\u5929\uff09 \u52a8\u624b\u5b66\u6df1\u5ea6\u5b66\u4e60 https://tangshusen.me/Dive-into-DL-PyTorch/#/ \u8ddf\u7740\u6559\u7a0b\u8dd1\u4e00\u904d\u4ee3\u7801 \uff087\u5929\uff09 \u8ddf\u7740\u6559\u7a0b\u8dd1\uff0c\u4ee3\u7801\u81ea\u5df1\u6572\u4e00\u904d\uff0c\u6559\u7a0b\u4e2d\u63d0\u5230\u7684\u8bba\u6587\u90fd\u8981\u770b\uff0c\u53ef\u4ee5\u5728colab\u4e0a\u8dd1\uff087\u5929\uff09 \u6559\u7a0b\uff1ahttps://pytorch.org/tutorials/</p> <p>\u9700\u8981\u770b\u7684\u5185\u5bb9\uff1a</p> <p>Deep Learning with PyTorch: A 60 Minute Blitz Learning PyTorch with Examples What is torch.nn really? Visualizing Models, Data, and Training with TensorBoard Text\u5168\u90e8 Audio\u5168\u90e8 \u770b\u61c2Transformer \uff085\u5929\uff09 \u8bba\u6587\uff1aAttention Is All You Need \u53c2\u8003\u8d44\u6599\uff1ahttp://jalammar.github.io/illustrated-transformer/ \u6e90\u7801\u53c2\u8003\uff1ahttps://github.com/jadore801120/attention-is-all-you-need-pytorch \uff08\u53ef\u4ee5\u4e0d\u7528\u8dd1\uff0c\u4f46\u662f\u9700\u8981\u7ed3\u5408\u8bba\u6587\u7406\u89e3\u6a21\u578b\u5185\u90e8\u7684\u6a21\u5757\uff09 \u8bed\u97f3\u5408\u6210\u7406\u8bba\u77e5\u8bc6\uff083\u5929\uff09 \u8bed\u97f3\u5408\u6210 TTS (Text-To-Speech) \u7684\u539f\u7406\u662f\u4ec0\u4e48\uff1f https://www.zhihu.com/question/26815523/answer/220693948 https://zhuanlan.zhihu.com/p/113282101 Tacotron&amp;Tacotron2\u2014\u2014\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u7aef\u5230\u7aef\u8bed\u97f3\u5408\u6210\u6a21\u578b\uff1a\u001fhttps://zhuanlan.zhihu.com/p/101064153 Understanding the Mel Spectrogram\uff1ahttps://medium.com/analytics-vidhya/understanding-the-mel-spectrogram-fca2afa2ce53 https://towardsdatascience.com/getting-to-know-the-mel-spectrogram-31bca3e2d9d0 \u4e0b\u8f7d\u4e00\u4e2aadobe audition\uff0c\u62d6\u8fdb\u53bb\u4e00\u4e2a\u8bed\u97f3\u7684\u97f3\u9891\uff0c\u611f\u53d7\u4e00\u4e0b\u6ce2\u5f62\u548c\u9891\u8c31\uff0c\u6570\u636e\u53ef\u4ee5\u4ece https://keithito.com/LJ-Speech-Dataset \u4e0b\u8f7d\uff0c \u8fd9\u4e5f\u662f\u6211\u4eec\u505a\u5b9e\u9a8c\u6700\u5e38\u7528\u7684\u4e00\u4e2a\u82f1\u6587\u6570\u636e\u96c6 Understanding Tansformer: http://jalammar.github.io/illustrated-transformer/ \u4ec0\u4e48\u662f\u5171\u632f\u5cf0\uff1ahttps://www.zhihu.com/question/24190826 \u8bed\u97f3\u5e38\u7528python\u5e93 \u5927\u6982\u770b\u4e0btutorial\u5373\u53ef\uff0c\u7528\u4e8e\u4e0b\u9762\u8dd1\u6a21\u578b\u65f6\u6570\u636e\u5904\u7406\u90e8\u5206\u7684\u7406\u89e3\u548c\u53c2\u8003</p> <p>librosa https://librosa.github.io/librosa/ \u8bed\u97f3\u5408\u6210\u6a21\u578b \u4efb\u52a1\uff1a\u9605\u8bfb\u8bba\u6587\uff0c\u628a\u6e90\u7801\u8fd0\u884c\u8d77\u6765\uff08\u505a\u5b8c\u524d\u9762\u4efb\u52a1\u4ee5\u540e\uff0c\u6211\u4f1a\u7ed9\u5927\u5bb6\u53d1\u653eGPU\uff09</p> <p>Tacotron1 \uff085\u5929\uff09 Paper: Tacotron: Towards End-to-End Speech Synthesis \u6559\u7a0b\u548c\u4ee3\u7801\uff1a\u624b\u628a\u624b\u6559\u7a0b\uff1ahttps://zhuanlan.zhihu.com/p/114212581 Tacotron2 \uff085\u5929\uff09 Paper: Natural TTS Synthesis by Conditioning Wavenet on MEL Spectrogram Predictions \u4ee3\u7801\uff1ahttps://github.com/NVIDIA/tacotron2 TransformerTTS Paper: Neural Speech Synthesis with Transformer Network \u4ee3\u7801\uff1a (\u79c1\u6709\u4ee3\u7801\uff0c\u5b8c\u6210\u4e0a\u8ff0\u4e24\u4e2a\u4efb\u52a1\u4ee5\u540e\u5f00\u653e) FastSpeech Paper: FastSpeech: Fast, Robust and Controllable Text to Speech \u4ee3\u7801\uff1a(\u79c1\u6709\u4ee3\u7801\uff0c\u5b8c\u6210\u4e0a\u8ff0\u4e24\u4e2a\u4efb\u52a1\u4ee5\u540e\u5f00\u653e) FastSpeech 2 Paper: https://arxiv.org/abs/1905.09263 \u58f0\u7801\u5668\u6a21\u578b \u4efb\u52a1\uff1a\u9605\u8bfb\u8bba\u6587\uff0c\u628a\u6e90\u7801\u8fd0\u884c\u8d77\u6765\uff08\u4e0d\u7528\u8bad\u7ec3\uff0c\u76f4\u63a5\u8dd1inference\u90e8\u5206\uff0c\u5c06\u6885\u5c14\u9891\u8c31\u8f6c\u6362\u6210\u6ce2\u5f62\uff09</p> <p>WaveNet WaveGlow \uff085\u5929\uff09 Paper: A Flow-based Generative Network for Speech Synthesis \u4ee3\u7801\uff1ahttps://github.com/NVIDIA/waveglow ParallelWaveGAN \uff085\u5929\uff09 Paper: Parallel WaveGAN: A fast waveform generation model based on generative adversarial networks with multi-resolution spectrogram \u4ee3\u7801\uff1ahttps://github.com/kan-bayashi/ParallelWaveGAN \u5176\u4ed6\u8d44\u6599 https://erogol.com/text-speech-deep-learning-architectures/</p> <p>https://github.com/erogol/TTS-papers</p> <p>Reference Encoder: Transfer Learning from Speaker Verification to Multispeaker Text-To-Speech Synthesis</p> <p>*\u6b4c\u58f0\u5408\u6210 Adversarially Trained Multi-Singer Sequence-To-Sequence Singing Synthesizer: https://arxiv.org/abs/2006.10317</p> <p>DeepSinger : Singing Voice Synthesis with Data Mined From the Web: https://arxiv.org/abs/2007.04590</p>"},{"location":"Scientific%20research/mathematic%20model/","title":"Index","text":""},{"location":"Scientific%20research/mathematic%20model/#_1","title":"\u6570\u5b66\u5efa\u6a21","text":"<p>\u4e2a\u4eba\u8ba4\u4e3a\u6570\u5b66\u5efa\u6a21\u8fd9\u4e2a\u7ade\u8d5b\u65e0\u8bba\u662f\u5426\u4ece\u529f\u5229\u7684\u89d2\u5ea6\u51fa\u53d1\u90fd\u662f\u5341\u5206\u503c\u5f97\u53c2\u52a0\u7684\u3002</p> <p>\u4ed6\u4e09\u4e2a\u4eba\u7ec4\u961f\u5206\u522b\u5b8c\u6210\u7684\u4efb\u52a1\u4e5f\u662f\u79d1\u7814\u4e2d\u5fc5\u4e0d\u53ef\u5c11\u7684\u4e00\u4e2a\u90e8\u5206\uff0c\u5728\u5927\u4e8c\u53c2\u52a0\u4f60\u53ea\u9700\u6295\u5165\u4e00\u5e74\u7684\u65f6\u95f4\u57fa\u672c\u4e0a\u80fd\u6253\u51fa\u5f88\u597d\u7684\u6210\u7ee9\uff08\u672c\u4eba\u8ba1\u5212\u6295\u51659\u4e2a\u591a\u6708\uff09</p> <p>\u6458\u8981</p> \u77e5\u8bc6\u8bb0\u5f55\u8d44\u6e90 <ul> <li>[] machine learning basic</li> </ul> <ul> <li>\u6570\u636e\u641c\u7d22</li> <li>kaggle</li> </ul>"},{"location":"Scientific%20research/mathematic%20model/mcm/","title":"Mcm","text":""},{"location":"Scientific%20research/mathematic%20model/mcm/#_1","title":"\u7f8e\u56fd\u6570\u5b66\u5efa\u6a21\u7ade\u8d5b","text":"<p>\u5927\u7eb2</p> \u6458\u8981\u8d44\u6e90 \u8d5b\u9898 \u7c7b\u578b A \u8fde\u7eed\u578b B \u79bb\u6563\u578b C \u5927\u6570\u636e D \u8fd0\u7b79\u5b66\u6216\u8005\u7f51\u7edc\u79d1\u5b66 E \u73af\u5883\u79d1\u5b66 F \u653f\u7b56 <p>\u8fd9\u91cc\u5c06\u8bb0\u5f55\u4e0b\u81ea\u5df1\u7684\u4e00\u4e9b\u5907\u8d5b\u7ecf\u9a8c</p> <p>\u7f8e\u8d5b\u6587\u6863</p>"},{"location":"ZJU_CS/","title":"ZJU CS \u8bfe\u7a0b","text":"<p>\u8fd9\u91cc\u662f\u6211\u4e0a\u8fc7\u7684\u4e00\u4e9bZJU CS\u7684\u597d\u7684\u8bfe\u7a0b\u7684\u7b14\u8bb0\u8bb0\u5f55</p> <p>resource</p> <p>\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u5b66\u957f\u7684\u4f5c\u4e1a\u8d44\u6e90</p>"},{"location":"ZJU_CS/3DCV/","title":"\u8ba1\u7b97\u673a\u89c6\u89c9dcly","text":"<p>resource</p> <ul> <li>ZJU \u7814\u7a76\u751f\u8bfe\u7a0b</li> <li>\u56fe\u7075\u5b66\u957f\u53c2\u8003\u7b14\u8bb0</li> <li>\u53c2\u8003</li> <li>\u63a8\u8350\u9605\u8bfb</li> </ul>"},{"location":"ZJU_CS/3DCV/COLMAP/","title":"COLMAP\u5907\u5fd8","text":"<p>Assuming you stored the images of your project in the following structure:</p> <pre><code>/path/to/project/...\n+\u2500\u2500 images\n\u2502   +\u2500\u2500 image1.jpg\n\u2502   +\u2500\u2500 image2.jpg\n\u2502   +\u2500\u2500 ...\n\u2502   +\u2500\u2500 imageN.jpg\n</code></pre> <pre><code># The project folder must contain a folder \"images\" with all the images.\n$ DATASET_PATH=/path/to/dataset\n\n$ colmap feature_extractor \\\n   --database_path $DATASET_PATH/database.db \\\n   --image_path $DATASET_PATH/images\n\n$ colmap exhaustive_matcher \\\n   --database_path $DATASET_PATH/database.db\n\n$ mkdir $DATASET_PATH/sparse\n\n$ colmap mapper \\\n    --database_path $DATASET_PATH/database.db \\\n    --image_path $DATASET_PATH/images \\\n    --output_path $DATASET_PATH/sparse\n\n$ mkdir $DATASET_PATH/dense\n\n$ colmap image_undistorter \\\n    --image_path $DATASET_PATH/images \\\n    --input_path $DATASET_PATH/sparse/0 \\\n    --output_path $DATASET_PATH/dense \\\n    --output_type COLMAP \\\n    --max_image_size 2000\n\n$ colmap patch_match_stereo \\\n    --workspace_path $DATASET_PATH/dense \\\n    --workspace_format COLMAP \\\n    --PatchMatchStereo.geom_consistency true\n\n$ colmap stereo_fusion \\\n    --workspace_path $DATASET_PATH/dense \\\n    --workspace_format COLMAP \\\n    --input_type geometric \\\n    --output_path $DATASET_PATH/dense/fused.ply\n\n$ colmap poisson_mesher \\\n    --input_path $DATASET_PATH/dense/fused.ply \\\n    --output_path $DATASET_PATH/dense/meshed-poisson.ply\n\n$ colmap delaunay_mesher \\\n    --input_path $DATASET_PATH/dense \\\n    --output_path $DATASET_PATH/dense/meshed-delaunay.ply\n</code></pre>"},{"location":"ZJU_CS/3DCV/lec1/","title":"Lec01 | Introduction","text":""},{"location":"ZJU_CS/3DCV/lec1/#what_is_computer_vision","title":"What is Computer Vision","text":"<p>A standard computer vision system:</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec1/#computer_vision_tasks","title":"Computer vision tasks","text":"<ul> <li>3D reconstruction<ul> <li>3D reconstruction, localization, SLAM\uff0c\u2026\u2026</li> </ul> </li> <li>Image undestanding<ul> <li>Image recognition, object detection, image segmentation, action recognition, deep learning,\u2026\u2026</li> </ul> </li> <li>Image synthesis<ul> <li>Colorization, super-resolution, debluring, HDR, panorama, free-viewpoint, GANs, \u2026\u2026</li> </ul> </li> </ul>"},{"location":"ZJU_CS/3DCV/lec1/#why_is_computer_vision_hard","title":"Why is computer vision hard?","text":"<ul> <li>computers can be better at computing</li> <li>humans are better at understanding</li> </ul>"},{"location":"ZJU_CS/3DCV/lec1/#linear_algebra_recap","title":"Linear Algebra Recap","text":"<p>\u77e9\u9635\u548c\u5411\u91cf\u7684\u4e58\u6cd5\u8868\u793a\u5bf9\u5411\u91cf\u4f4d\u7f6e\u8fdb\u884c\u51e0\u4f55\u53d8\u6362\uff0c\u77e9\u9635\u7684\u5217\u63cf\u8ff0\u4e86\u8be5\u53d8\u6362\u7684\u5177\u4f53\u5f62\u5f0f\uff08\u6807\u51c6\u57fa\u7ecf\u53d8\u6362\u540e\u7684\u5750\u6807\uff09</p> <p>\u4ece\u51e0\u4f55\u89d2\u5ea6\u7406\u89e3\u77e9\u9635\u53ef\u9006\uff1a\u53d8\u6362\u524d\u540e\u7684\u4e24\u4e2a\u70b9\u4e00\u4e00\u5bf9\u5e94</p> <p>\u884c\u5217\u5f0f\u51e0\u4f55\u610f\u4e49\uff1aThe determinant is the volume of an n-dimensional parallel body</p>"},{"location":"ZJU_CS/3DCV/lec1/#application_of_eigenvalues_and_eigenvectors","title":"Application of Eigenvalues and eigenvectors","text":"<ul> <li>Principal components analysis(PCA)</li> </ul>"},{"location":"ZJU_CS/3DCV/lec10/","title":"Lec10 | Recognition","text":"<p>Question</p> <p>\u5f85\u8865\u5145\uff01\uff01 \u611f\u89c9\u6211\u5bf9\u6df1\u5ea6\u5b66\u4e60\u7684\u7406\u89e3\u8fd8\u4e0d\u662f\u5f88\u900f\u5f7b\uff0c\u672c\u7bc7\u5185\u5bb9\u6ca1\u6709\u8fc7\u591a\u52a0\u5165\u6211\u81ea\u5df1\u7684\u601d\u8def\u3002</p>"},{"location":"ZJU_CS/3DCV/lec10/#semantic_segmentation","title":"Semantic segmentation","text":"<p>\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u8bed\u4e49\u5206\u5272\u5c31\u662f\u8bc6\u522b\u56fe\u50cf\u4e2d\u5b58\u5728\u7684\u5185\u5bb9\u4ee5\u53ca\u4f4d\u7f6e\u3002</p>"},{"location":"ZJU_CS/3DCV/lec10/#fcn","title":"FCN","text":"<p>\u6211\u4eec\u4e00\u822c\u4f7f\u7528FCN(Fully Convolutional Networks)\u6765\u89e3\u51b3\u8bed\u4e49\u5206\u5272\u95ee\u9898\u3002\u5728\u4f20\u7edf\u7684FCN\u57fa\u7840\u4e0a\uff0c\u6211\u4eec\u52a0\u4e0a\u4e86\u4e24\u4e2atrick:</p> <ul> <li>Pooling and Unpooling: \u5982\u679c\u4e0d\u52a0\u5165\u6c60\u5316\u5c42\uff0c\u5219\u6548\u7387\u592a\u4f4e\uff0c\u4f46\u662f\u7531\u4e8e\u666e\u901a\u7684\u6c60\u5316\u4f1a\u7f29\u5c0f\u56fe\u7247\u7684\u5c3a\u5bf8\uff0c\u4e3a\u4e86\u5f97\u5230\u548c\u539f\u56fe\u7b49\u5927\u7684\u8bed\u4e49\u5206\u5272\u56fe\uff0c\u6211\u4eec\u9700\u8981\u5411\u4e0a\u91c7\u6837/\u53cd\u5377\u79ef\u3002</li> </ul> <p></p> <ul> <li>Skip Layer: \u4f5c\u7528\u662f\u4f18\u5316\u7ed3\u679c\u3002\u56e0\u4e3a\u6211\u4eec\u5728pooling,Unpooling\u7684\u8fc7\u7a0b\u4e2d\u4e22\u5931\u4e86\u4fe1\u606f\uff0c\u56e0\u6b64\u5728\u4e0d\u540c\u7684unpooling\u5c42\u4e2d\uff0c\u6211\u4eec\u989d\u5916\u589e\u52a0\u539fpooling\u5c42\u7684\u8f93\u5165\u3002</li> </ul> <p></p> <p>\u8be5\u7f51\u7edc\u88ab\u79f0\u4f5cU-Net\u3002</p>"},{"location":"ZJU_CS/3DCV/lec10/#crf","title":"CRF","text":"<p>U-Net\u8f93\u51fa\u4e4b\u540e\uff0c\u6211\u4eec\u4f1a\u518d\u52a0\u4e00\u6b65\u6761\u4ef6\u968f\u673a\u573a\u4f18\u5316\u80fd\u91cf\u51fd\u6570\uff1a</p> \\[ E(x)=\\sum_i \\theta_i(x_i)+\\sum_{i,j}\\theta_{i,j}(x_i,x_j) \\] <p></p>"},{"location":"ZJU_CS/3DCV/lec10/#evaluation_metric","title":"Evaluation metric","text":"<p>\u8bc4\u4f30\u8bed\u4e49\u5206\u5272\u7ed3\u679c\uff0c\u6211\u4eec\u4f7f\u7528Intersection-over-union(IoU)</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec10/#object_detection","title":"Object detection","text":"<p>\u6700\u5927\u7684\u56f0\u96be\u5c31\u662f\u6211\u4eec\u4e0d\u77e5\u9053\u56fe\u50cf\u4e2d\u6709\u51e0\u4e2a\u7269\u4f53\uff0c\u8981\u8f93\u51fa\u51e0\u4e2abounding box</p>"},{"location":"ZJU_CS/3DCV/lec10/#region_proposals","title":"Region proposals","text":"<p>\u57fa\u4e8e\u56fe\u7247\u63d0\u53d6\u51fa\u82e5\u5e72\u53ef\u80fd\u5305\u542b\u7269\u4f53\u7684\u533a\u57df</p>"},{"location":"ZJU_CS/3DCV/lec10/#two-stage_model","title":"Two-Stage Model","text":"<ul> <li>First stage: run once per image<ul> <li>Backbone network</li> <li>RPN</li> </ul> </li> <li>Second stage:run once per image<ul> <li>Crop features: Rol pool/align</li> <li>Predict object class</li> <li>Predict bbox offset</li> </ul> </li> </ul>"},{"location":"ZJU_CS/3DCV/lec10/#r-cnn","title":"R-CNN","text":"<p>Non-Max Suppression \u6709\u65f6\u5019\u540c\u4e00\u4e2a\u7269\u4f53\uff0c\u7f51\u7edc\u4f1a\u8f93\u51fa\u4e24\u4e2aBounding box\uff0c\u8fd9\u65f6\u5019\u6211\u4eec\u9700\u8981\u9009\u53d6\u6982\u7387\u6700\u5927\u7684\u3002</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec10/#fast_r-cnn","title":"Fast R-CNN","text":""},{"location":"ZJU_CS/3DCV/lec10/#faster_r-cnn","title":"Faster R-CNN","text":"<p>Faster R-CNN\u4f7f\u7528CNN\u6765\u9009\u53d6RP</p> <p>RPN</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec10/#single-stage_object_detection","title":"Single-stage object detection","text":"<p>YOLO</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec10/#instance_segmentation","title":"Instance segmentation","text":"<ul> <li>Faster R-CNN + Mask Prediction</li> </ul> <p>\u5bf9\u4e8e\u76ee\u6807\u68c0\u6d4b\u7684\u6bcf\u4e2a\u6846\u4e2d\u7684\u7269\u4f53\uff0c\u5224\u65ad\u6bcf\u4e2a\u50cf\u7d20\u662f\u5c5e\u4e8e\u524d\u666f\u8fd8\u662f\u80cc\u666f</p>"},{"location":"ZJU_CS/3DCV/lec10/#human_pose_estimation","title":"Human pose estimation","text":""},{"location":"ZJU_CS/3DCV/lec10/#single_human","title":"Single Human","text":"<ul> <li>\u76f4\u63a5\u9884\u6d4b\u5173\u8282\u70b9</li> <li>\u7528\u70ed\u529b\u56fe\u8868\u793a\u5173\u8282\u70b9</li> </ul>"},{"location":"ZJU_CS/3DCV/lec10/#multiple_humans","title":"Multiple humans","text":"<ul> <li> <p>Top-down:</p> <ul> <li>Detect humans and detect keypoints in each bbox</li> <li>Example: Mask R-CNN</li> </ul> </li> <li> <p>Bottom-up:</p> <ul> <li>Detect keypoints and group keypoints to form humans</li> <li>Example: OpenPose</li> </ul> </li> </ul> <p></p>"},{"location":"ZJU_CS/3DCV/lec12/","title":"Lec12 | Computational Photography","text":"<p>\u8ba1\u7b97\u6444\u5f71\u5b66\u7684\u4efb\u52a1\u5c31\u662f\u901a\u8fc7\u7b97\u6cd5\u4f7f\u5f97\u62cd\u51fa\u6765\u7684\u56fe\u50cf\u8d28\u91cf\u66f4\u9ad8\u3002</p>"},{"location":"ZJU_CS/3DCV/lec12/#high_dynamic_range_imaginghdr","title":"High Dynamic Range Imaging(HDR)","text":"<p>HDR, \u5373\u9ad8\u52a8\u6001\u8303\u56f4\u6210\u50cf\u3002\u56de\u60f3\u6211\u4eec\u751f\u6d3b\u4e2d\uff0c\u5728\u665a\u4e0a\u62cd\u7167\u65f6\uff0c\u7167\u7247\u4f1a\u51fa\u73b0\u8981\u4e48\u4e00\u7247\u9ed1\uff0c\u8981\u4e48\u4e00\u7247\u4eae\u7684\u60c5\u51b5\u3002\u539f\u56e0\u662f\u665a\u4e0a\u7684\u573a\u666f\u5bf9\u6bd4\u5ea6\u592a\u5927\uff0c\u800c\u8fd9\u79cd\u660e\u6697\u7684\u5bf9\u6bd4\u5ea6\u5c31\u88ab\u79f0\u4f5c\u52a8\u6001\u8303\u56f4\u3002HDR\u53ef\u4ee5\u505a\u5230\u65e2\u6355\u6349\u4eae\u5904\u7684\u7ec6\u8282\uff0c\u4e5f\u6355\u6349\u5230\u6697\u5904\u7684\u7ec6\u8282\u3002</p> <p></p> <p>\u5bf9\u4e8e\u76f8\u673a\uff0c\u5b83\u6bcf\u4e2a\u50cf\u7d20\u7684\u66dd\u5149(exposure)\u53d6\u51b3\u4e8e\u5982\u4e0b\u4e09\u4e2a\u56e0\u7d20\uff1a</p> <ul> <li>\u589e\u76ca(Gain): controlled by the ISO. \u53ef\u4ee5\u7406\u89e3\u4e3a\u5149\u7535\u4fe1\u53f7\u8f6c\u5316\u7684\u6548\u7387\u3002ISO\u662f\u5e95\u7247\u7684\u611f\u5149\u5ea6\u3002</li> <li>\u8f90\u5c04\u5ea6(Irradiance): \u53ef\u4ee5\u7406\u89e3\u4e3a\u6253\u5230\u5e95\u7247\u4e0a\u7684\u5149\u7684\u6570\u91cf(\u5149\u5f3a)\uff0c\u53d6\u51b3\u4e8e\u5149\u5708\u7684\u5927\u5c0f\u3002</li> <li>\u66dd\u5149\u65f6\u95f4(Time)\uff1a\u7531\u5feb\u95e8\u901f\u5ea6\u63a7\u5236\u3002</li> </ul> <p></p> <p>Dynamic range</p> <p>The ratio between the largest and smallest values of a certain quantity.</p> <p>\u5373\u4e00\u4e2a\u573a\u666f\u4e2d\u6700\u4eae\u5730\u65b9\u548c\u6700\u6697\u5730\u65b9\u7684\u6bd4\u503c\u3002\u5728\u591c\u665a\u62cd\u7167\u65f6\uff0c\u7531\u4e8e\u573a\u666f\u52a8\u6001\u8303\u56f4\u592a\u5927\uff0c\u6697\u5904\u548c\u4eae\u5904\u7684\u7ec6\u8282\u4e0d\u80fd\u517c\u5f97\uff0c\u5c31\u4f1a\u9020\u6210\u4e0a\u56fe\u7684\u4e24\u79cd\u60c5\u51b5\u3002</p> <p>\u771f\u5b9e\u4e16\u754c\u5177\u6709\u5f88\u5927\u7684\u52a8\u6001\u8303\u56f4\u3002\u4f46\u662f\u76f8\u673a\u7684\u4f20\u611f\u5668\u53ea\u80fd\u8986\u76d6\u5f88\u5c0f\u7684\u52a8\u6001\u8303\u56f4\u3002\u4f20\u611f\u5668\u7684\u52a8\u6001\u8303\u56f4\u4e0d\u80fd\u8986\u76d6\u771f\u5b9e\u573a\u666f\u7684\u52a8\u6001\u8303\u56f4\uff0c\u8fd9\u5c31\u662f\u6211\u4eec\u62cd\u7167\u4e0d\u80fd\u517c\u987e\u660e\u6697\u7ec6\u8282\u7684\u539f\u56e0\u3002</p> <p></p> <p></p>"},{"location":"ZJU_CS/3DCV/lec12/#hdr","title":"HDR","text":"<p>\u4e00\u4e2a\u5f88\u76f4\u89c2\u7684\u60f3\u6cd5\u5c31\u662f\u6211\u4eec\u62cd\u591a\u5f20\u56fe\u50cf\uff0c\u90e8\u5206\u56fe\u50cf\u7528\u8f83\u5c0f\u7684\u66dd\u5149\u65f6\u95f4\uff0c\u8bb0\u5f55\u4eae\u51fa\u7684\u7ec6\u8282\uff0c\u53e6\u4e00\u90e8\u5206\u56fe\u50cf\u7528\u8f83\u957f\u7684\u66dd\u5149\u65f6\u95f4\uff0c\u8bb0\u5f55\u6697\u5904\u7684\u7ec6\u8282\uff0c\u6700\u540e\u5c06\u6240\u6709\u56fe\u50cf\u5408\u6210\u5f97\u5230\u6700\u7ec8\u7684\u56fe\u50cf\u3002</p> <ul> <li>Exposure bracketing: Capture multiple LDR images at different exposures.</li> <li>Merging: Combine them into a single HDR image.</li> </ul> <p>\u5bf9\u4e8e\u56fe\u50cf\u5408\u6210\uff0c\u6709\u4ee5\u4e0b\u51e0\u4e2a\u6b65\u9aa4\uff1a</p> <p>For each pixel:</p> <ul> <li>Find valid pixels in each image. \u8fd9\u4e2a\u50cf\u7d20\u503c\u65e2\u4e0d\u4f1a\u592a\u4eae\u4e5f\u4e0d\u4f1a\u592a\u6697(0.05&lt;pixel&lt;0.95)\uff0c\u6211\u4eec\u5373\u8ba4\u4e3a\u5b83\u5904\u4e8e\u5408\u7406\u7684\u533a\u95f4\u3002</li> <li>Weight valid pixel values appropriately.(pixel value/t).</li> <li>Form a new pixel value as the weighted average of valid pixel values.</li> </ul> <p></p>"},{"location":"ZJU_CS/3DCV/lec12/#deblurring","title":"Deblurring","text":"<p>\u4efb\u52a1\u662f\u628a\u6a21\u7cca\u7684\u56fe\u50cf\u53d8\u6e05\u695a\u3002</p> <p>\u9996\u5148\u6211\u4eec\u8981\u77e5\u9053\u56fe\u50cf\u6a21\u7cca\u7684\u539f\u56e0\uff1a</p> <ul> <li>\u5931\u7126(Defoucs): \u5728\u666f\u6df1\u8303\u56f4\u5916defoucs(\u5728lec2\u4ecb\u7ecd\u8fc7),\u5149\u6591\u53d6\u51b3\u4e8e\u5149\u5708\u5f62\u72b6\u3002</li> <li>\u8fd0\u52a8\u6a21\u7cca(Motion blur): \u6210\u50cf\u7684\u8fc7\u7a0b\u662f\u5bf9\u5149\u5f3a\u505a\u79ef\u5206\u7684\u8fc7\u7a0b\uff0c\u5018\u82e5\u5728\u8fd9\u8fc7\u7a0b\u4e2d\u76f8\u673a\u6216\u7269\u4f53\u8fd0\u52a8\uff0c \u6210\u50cf\u7ed3\u679c\u5c31\u4ea7\u751f\u6a21\u7cca\u3002\u4e00\u822c\u7531\u66dd\u5149\u65f6\u95f4\u8fc7\u957f\u9020\u6210\u3002\u5728\u753b\u9762\u4e0a\u5f62\u6210\u8fd0\u52a8\u7684\u8f68\u8ff9\u3002</li> </ul> <p>\u90a3\u4e48\u6211\u4eec\u8981\u5982\u4f55\u7528\u6570\u5b66\u6a21\u578b\u6765\u63cf\u8ff0\u56fe\u50cf\u6a21\u7cca\u5462\uff1f</p> <p>\u56de\u987e\u6211\u4eec\u5728lec3\u4ecb\u7ecd\u7684\u9ad8\u65af\u6a21\u7cca\uff0c\u91c7\u7528\u4e86\u9ad8\u65af\u6838\u5bf9\u56fe\u50cf\u8fdb\u884c\u5377\u79ef\u64cd\u4f5c\u3002\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u7528\u5377\u79ef\u6765\u63cf\u8ff0\u6a21\u7cca\u7684\u8fc7\u7a0b\u3002</p> <p></p> <p>\\(F(X,Y)\\)\u662f\u6e05\u6670\u7684\u56fe\u50cf\uff0c\\(H(U,V)\\)\u662f\u5377\u79ef\u6838\uff0c\u4e0eF\u5377\u79ef\u540e\u5f97\u5230\u6a21\u7cca\u7684\u56fe\u50cf\\(G(X,Y)\\)\u3002</p> <p></p> <p>\u56e0\u6b64\u6211\u4eec\u8981\u89e3\u51b3\u7684\u95ee\u9898\u5c31\u662f\u53bb\u5377\u79ef\u3002</p> <p>\u6839\u636e\u662f\u5426\u77e5\u9053\u5377\u79ef\u6838\u5206\u6210\u4e24\u79cd\u60c5\u51b5\uff1a</p>"},{"location":"ZJU_CS/3DCV/lec12/#non-blind_image_deconvolutionnbid","title":"Non-blind image deconvolution(NBID):","text":"<p>\u4efb\u52a1\u5b9a\u4e49\uff1a\u7ed9\u5b9a\u6a21\u7cca\u7684\u56fe\u50cf\u548c\u5377\u79ef\u6838\uff0c\u6c42\u89e3\u539f\u56fe\u3002</p> <p>\u5bf9\u4e8e\u89e3\u51b3\u7684\u65b9\u6cd5\uff0c\u4e00\u4e2a\u5f88\u76f4\u89c2\u7684\u7c7b\u6bd4\uff0c\u5982\u679c\u662f\u4e58\u6cd5\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u9700\u8981\u505a\u4e00\u4e2a\u9664\u6cd5\u4fbf\u53ef\u4ee5\u8fd8\u539f\u3002\u8fd9\u6837\u5c31\u5f88\u81ea\u7136\u60f3\u5230\u5c06\u56fe\u50cf\u505a\u4e2a\u5085\u91cc\u53f6\u53d8\u6362\uff08\u5b9e\u57df\u4e0a\u7684\u5377\u79ef\u7b49\u4e8e\u9891\u57df\u4e0a\u7684\u4e58\u79ef\uff09\u3002</p> <p></p> <p>\u4f46\u662f\u6709\u4e00\u4e2a\u95ee\u9898\uff0c\u5377\u79ef\u6838\\(H(u,v)\\)\u4e00\u822c\u662f\u4e00\u4e2a\u4f4e\u901a\u6ee4\u6ce2\u5668\uff0c\u56e0\u6b64\u6211\u4eec\u5728\u53bb\u5377\u79ef\u7684\u8fc7\u7a0b\u4e2d\uff0c\u76f8\u5f53\u4e8e\u4e58\u4e0a\\(\\frac{1}{H(u,v)}\\)\uff0c\u5373\u4e58\u4e0a\u4e00\u4e2a\u9ad8\u901a\u6ee4\u6ce2\u5668\u3002\u6240\u4ee5\u53bb\u5377\u79ef\u6211\u4eec\u662f\u5728\u653e\u5927\u9ad8\u9891\u4fe1\u606f\uff0c\u4f46\u4e0e\u6b64\u540c\u65f6\u4e5f\u4f1a\u76f8\u5e94\u653e\u5927\u9ad8\u9891\u566a\u58f0\u3002</p> <p>\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\u7684\u65b9\u6cd5\u5c31\u662f\u8c03\u6574\u5377\u79ef\u6838\u3002\u5373\u505ainverse fliter\u7684\u540c\u65f6\u6291\u5236\u9ad8\u9891\u566a\u58f0\u3002(Wiener Fliter)</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec12/#deconvolution_by_optimization","title":"Deconvolution by optimization","text":"<p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u7528\u4f18\u5316\u7684\u65b9\u6cd5\u6765\u89e3\u51b3\u53bb\u6a21\u7cca\u95ee\u9898\u3002</p> <p>\u4f18\u5316\u53d8\u91cf\uff1a\u6e05\u6670\u7684\u56fe\u7247\uff1b\u76ee\u6807\u51fd\u6570\uff1a\u6e05\u6670\u56fe\u50cf\u8fc7\u5377\u79ef\u540e\u4e0e\u7ed9\u5b9a\u7684\u6a21\u7cca\u56fe\u50cf\u540e\u7684\u5dee\u522b\u3002\u7528\u6bcf\u4e2a\u50cf\u7d20\u503c\u5dee\u522b\u7684\u5e73\u65b9\u548c\u6765\u8861\u91cf\u3002</p> <p></p> <p>\u4f46\u662f\u4f7f\u7528\u4f18\u5316\u6765\u6c42\u89e3\u53ef\u80fd\u4f7f\u8be5\u95ee\u9898\u53d8\u4e3aill-posed.(\u53ef\u80fd\u5b58\u5728\u65e0\u7a77\u591a\u4e2a\u89e3)\u3002</p> <p>\u8fd9\u65f6\u5019\u6211\u4eec\u5c31\u9700\u8981\u4e00\u4e9b\u5148\u9a8c\u4fe1\u606f(\u89e3\u7684\u7ea6\u675f\u6761\u4ef6)\u6765\u89e3\u51b3ill-posed\u95ee\u9898\u3002</p> <p></p> <p>\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u4e24\u5f20\u56fe\u7247\u90fd\u662f\u6211\u4eec\u4f18\u5316\u95ee\u9898\u7684\u89e3\uff0c\u4f46\u662f\u663e\u7136\u5de6\u8fb9\u90a3\u5f20\u56fe\u66f4\u7b26\u5408\u5b9e\u9645\u60c5\u51b5\uff0c\u56e0\u4e3a\u5b83\u7684\u68af\u5ea6\u56fe\u662f\u6bd4\u8f83\u7a00\u758f\u7684\u3002\u6211\u4eec\u5c31\u53ef\u4ee5\u5c06\u7a00\u758f\u7684\u68af\u5ea6\u56fe\u4f5c\u4e3a\u5148\u9a8c\u6761\u4ef6\uff0c\u56de\u987elec4\u7684\u5185\u5bb9\uff0c\u6211\u4eec\u5728\u4f18\u5316\u51fd\u6570\u4e0a\u52a0\u4e00\u4e2a\\(L_1\\)\u6b63\u5219\u9879\u5373\u53ef\u3002</p> \\[ \\mathop{min}_F \\Vert G-F\\otimes H\\Vert_2^2+\\Vert\\nabla F\\Vert_1 \\]"},{"location":"ZJU_CS/3DCV/lec12/#blind_image_deconvolutionbid","title":"Blind Image Deconvolution(BID)","text":"<p>\u73b0\u5728\u6211\u4eec\u4e0d\u77e5\u9053\u5377\u79ef\u6838\u662f\u4ec0\u4e48\uff0c\u8fd9\u65f6\u5019\u6211\u4eec\u4e0d\u80fd\u7528\u9006\u5411\u6ee4\u6ce2\u6c42\u89e3\uff0c\u53ea\u80fd\u7528\u4f18\u5316\u7684\u65b9\u5f0f\u505a\uff0c\u6b64\u65f6\u5377\u79ef\u6838\u4e5f\u6210\u4e86\u4f18\u5316\u7684\u76ee\u6807\u3002</p> <p>\u6211\u4eec\u5e0c\u671b\u5377\u79ef\u6838\u4e5f\u662f\u7a00\u758f\u5e76\u4e14\u975e\u8d1f\u7684\u3002\u6240\u4ee5\u76ee\u6807\u51fd\u6570\uff1a</p> \\[ \\mathop{min}_{F,H}\\Vert G-F\\otimes H\\Vert_2^2+\\lambda_1\\Vert\\nabla F\\Vert_1+\\lambda_2\\Vert H\\Vert_1 \\, s.t.H\\ge 0 \\]"},{"location":"ZJU_CS/3DCV/lec12/#colorization","title":"Colorization","text":"<p>\u6211\u4eec\u5e0c\u671b\u628a\u9ed1\u767d\u7684\u56fe\u50cf\u8f6c\u5316\u6210\u5f69\u8272\u56fe\u50cf\u3002\u6211\u4eec\u5fc5\u987b\u544a\u8bc9\u7b97\u6cd5\u6211\u4eec\u60f3\u8981\u4ec0\u4e48\u6837\u7684\u989c\u8272\u3002</p>"},{"location":"ZJU_CS/3DCV/lec12/#sample-based_colorization","title":"Sample-based colorization","text":"<p>source image\u5c31\u79f0\u4e3a\u6837\u672c\u56fe\u50cf\u3002\u6211\u4eec\u60f3\u8981\u628a\u6837\u672c\u56fe\u50cf\u7684\u989c\u8272\u8fc1\u79fb\u5230\u4e2d\u95f4\u7684target image\u4e0a\u3002</p> <p>\u505a\u6cd5\u662f\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u50cf\u7d20\uff0c\u5728\u6837\u672c\u56fe\u50cf\u4e2d\u627e\u5230\u6700\u4f73\u7684\u5339\u914d\u70b9(\u4eae\u5ea6\u548c\u68af\u5ea6)\u3002\u7136\u540e\u6839\u636e\u5339\u914d\u70b9\u586b\u5145\u50cf\u7d20\u503c\u3002</p>"},{"location":"ZJU_CS/3DCV/lec12/#interactive_colorization","title":"Interactive colorization","text":"<p>\u8be5\u65b9\u6cd5\u662f\u8ba9\u7528\u6237\u5728\u6bcf\u4e2a\u533a\u57df\u7ed9\u5b9a\u989c\u8272\uff0c\u7b97\u6cd5\u5c06\u8be5\u533a\u57df\u7684\u989c\u8272\u8865\u5168\u3002</p> <p>\u6211\u4eec\u4f7f\u7528\u4f18\u5316\u7684\u65b9\u6cd5\u6c42\u89e3\u3002</p> <p></p> <ul> <li> <p>\\(U(r),U(s)\\): RGB values of pixel r,s.</p> </li> <li> <p>\\(N(r)\\): neighborhood pixels of pixel \\(r\\).</p> </li> <li>\\(w_{rs}\\): Weight that measures similarity between \\(r,s\\).</li> </ul>"},{"location":"ZJU_CS/3DCV/lec12/#generative_adversarial_networkgan","title":"Generative Adversarial Network(GAN)","text":"<p>\u5bf9\u4e8e\u751f\u6210\u5f0f\u95ee\u9898\uff0c\u91c7\u7528\u4f20\u7edf\u795e\u7ecf\u7f51\u7edc\u7684\u56fa\u5b9a\u635f\u5931\u51fd\u6570\u662f\u4e0d\u5408\u7406\u7684\u3002\u56e0\u4e3a\u5bf9\u4e8e\u4e00\u4e2a\u7070\u5ea6\u56fe\u8fdb\u884c\u4e0a\u8272\uff0c\u89e3\u4e0d\u662f\u552f\u4e00\u7684\u3002</p> <p>GAN\u5e76\u4e0d\u81ea\u5df1\u5b9a\u4e49\u635f\u5931\u51fd\u6570\uff0c\u800c\u53c8\u501f\u52a9\u4e86\u4e00\u4e2a\u795e\u7ecf\u7f51\u7edc(classifer)\u6765\u5224\u65ad\u7b2c\u4e00\u4e2a\u7f51\u7edc\u751f\u6210\u7684\u56fe\u7247\u7684\u8d28\u91cf\u3002</p> <p></p> <p>\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u4e24\u4e2a\u795e\u7ecf\u7f51\u7edc\u5206\u522b\u4e3a\u751f\u6210\u5668\\(G\\)\u548c\u5224\u522b\u5668\\(D\\)\u3002</p> <ul> <li>\\(G\\) tries to synthesize fake images that fool \\(D\\).</li> <li>\\(D\\) tries to identify the fakes.</li> </ul> <p></p> <p>\u5bf9\u4e8e\\(D\\)\u800c\u8a00\uff0c\u5b83\u7684\u635f\u5931\u51fd\u6570\uff1a</p> \\[ \\arg \\max_D E_{x,y}[\\log D(G(x))+\\log (1-D(y))] \\] <p>\u5bf9\u4e8e\\(G\\)\u800c\u8a00\uff0c\u5b83\u7684\u635f\u5931\u51fd\u6570\uff1a $$ \\arg\\min_G E_{x,y}[\\log D(G(x))+\\log (1-D(y))] $$ </p> <p>\u540c\u65f6\u8bad\u7ec3\u4e24\u4e2a\u7f51\u7edc\u7684\u65b9\u6cd5\uff1a $$ \\arg\\min_G\\max_D E_{x,y}[\\log D(G(x))+\\log (1-D(y))] $$ G tries to synthesize fake images that fool the best D</p> <p>D can be viewed as a loss function to train G:</p> <ul> <li>called adversarial loss</li> <li>learned instead of being hand-designed</li> <li>can be applied to any image synthesis tasks</li> </ul>"},{"location":"ZJU_CS/3DCV/lec12/#super_resolution","title":"Super Resolution","text":""},{"location":"ZJU_CS/3DCV/lec2/","title":"Lec02 | Image Formation","text":""},{"location":"ZJU_CS/3DCV/lec2/#camera_and_lens","title":"Camera and lens","text":"<p>\u9996\u5148\u8ba9\u6211\u4eec\u6765\u8bbe\u8ba1\u4e00\u4e2a\u76f8\u673a\u3002</p> <p>\u5047\u5982\u76f4\u63a5\u5728\u7269\u4f53\u9762\u524d\u653e\u4e00\u4e2a\u5e95\u7247\uff0c\u663e\u7136\u4e0d\u80fd\u5f97\u5230\u8f83\u597d\u7684\u56fe\u50cf\uff0c\u56e0\u4e3a\u5b9e\u7269\u4e0e\u50cf\u5e73\u9762\u4e0a\u7684\u70b9\u4e0d\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\u3002\u5982\u4e0b\u56fe\u6240\u793a</p> <p></p> <p>\u56e0\u6b64\u6211\u4eec\u6700\u5148\u60f3\u5230\u7684\u5c31\u662f\u5c0f\u5b54\u6210\u50cf(Pinhole camera)\uff0c\u5c3d\u53ef\u80fd\u4f7f\u5f97\u4e00\u4e00\u5bf9\u5e94\u5173\u7cfb\u6210\u7acb\u3002</p> <p>aperture(\u5b54\u5f84)\u8d8a\u5c0f\uff0c\u6210\u50cf\u8d8a\u6e05\u6670</p> <p>\u4f46\u6b64\u65f6\u51fa\u73b0\u4e00\u4e2a\u95ee\u9898\uff0c\u5e76\u4e0d\u662f\u5b54\u8d8a\u5c0f\u56fe\u50cf\u5c31\u8d8a\u6e05\u695a\uff1a</p> <ul> <li>\u7531\u7269\u7406\u5b66\u53ef\u4ee5\u5f97\u5230\uff0c\u5f53\u5b54\u592a\u5c0f\u65f6\uff0c\u4f1a\u4ea7\u751f\u5149\u7684\u884d\u5c04\u73b0\u8c61\uff08diffraction effect\uff09</li> <li>\u5b54\u592a\u5c0f\u4e5f\u4f1a\u5bfc\u81f4\u901a\u5149\u91cf\u4e0d\u8db3</li> </ul> <p></p> <p>\u4e00\u4e2a\u6bd4\u8f83\u597d\u7684\u89e3\u51b3\u65b9\u6cd5\u662f\u4f7f\u7528\u955c\u5934\u2014\u2014Lens(\u4fdd\u6301\u4e00\u4e00\u5bf9\u5e94\u7684\u540c\u65f6\u6c47\u805a\u66f4\u591a\u7684\u5149)</p> <p></p> <p>If \\(o=\\infty\\), then \\(f=i\\)</p>"},{"location":"ZJU_CS/3DCV/lec2/#image_magnification","title":"Image Magnification","text":"<p>\u653e\u5927\u7387 \\(m=\\frac{h_i}{h_o}=\\frac{i}{o}\\), </p> <p>\u7531\u516c\u5f0f\\(\\frac{1}{i}=\\frac{1}{o}+\\frac{1}{f}\\) \u53ef\u5f97\uff0c\u5f53\u7269\u4f53\u79bb\u900f\u955c\u8db3\u591f\u8fdc\u65f6\uff0c\u50cf\u8ddd\u53ef\u4ee5\u8fd1\u4f3c\u7b49\u4e8e\u7126\u8ddd\uff0c\u56e0\u6b64\u53ef\u4ee5\u8bf4\u7126\u8ddd\u4e5f\u51b3\u5b9a\u4e86\u56fe\u50cf\u653e\u5927\u7387\u3002</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec2/#field_of_viewfov","title":"Field of  View(FOV)","text":"<p>\u89c6\u573a\u89d2\u53d6\u51b3\u4e8e\u4e24\u4e2a\u56e0\u7d20\uff1a\u7126\u8ddd\u4e0e\u5e95\u7247(sensor)\u7684\u5927\u5c0f\uff0c\u7531\u4e0a\u56fe\u53ef\u4ee5\u76f4\u89c2\u770b\u51fa</p> <p>\u4ece\u6210\u50cf\u8d28\u91cf\u6765\u770b\uff0c\u5e95\u7247\u8d8a\u5927\u8d8a\u597d\uff08\u6bcf\u4e2a\u50cf\u7d20\u6536\u5230\u7684\u5149\u66f4\u591a\uff0c\u4fe1\u566a\u6bd4\u66f4\u597d\uff09\uff0c\u56e0\u6b64\u73b0\u5728\u7684\u5de5\u4e1a\u76ee\u6807\u5c31\u662f\u5728\u7f29\u5c0f\u5e95\u7247\u7684\u540c\u65f6\u7ef4\u6301\u597d\u7684\u4fe1\u566a\u6bd4\u3002</p>"},{"location":"ZJU_CS/3DCV/lec2/#aperture","title":"Aperture","text":"<p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u653e\u5927/\u7f29\u5c0f\u5149\u5708\u6765\u63a7\u5236\u56fe\u50cf\u7684\u4eae\u5ea6</p>"},{"location":"ZJU_CS/3DCV/lec2/#f-number","title":"F-number","text":"<ul> <li> <p>More convenient to represent aperture as a fraction of focal length: \\(D=\\frac{f}{N}\\)</p> </li> <li> <p>F-Number: \\(N=\\frac{f}{D}\\)</p> </li> </ul>"},{"location":"ZJU_CS/3DCV/lec2/#lens_defocus","title":"Lens Defocus","text":"<p>\u5f53 \\(f\\) \u548c \\(i\\) \u56fa\u5b9a\u65f6\uff0c\u53ea\u6709\u4e00\u4e2a\u9762(\u6df1\u5ea6)\u5728\u6210\u50cf\u5e73\u9762\u4e0a\u662f\u6e05\u695a\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5bf9\u7126</p> <p>\uff08\u5f25\u6563\u5706\uff09Blur circle diameter: \\(b=\\frac{D}{i^{'}}\\vert i^{'}-i\\vert\\)\uff0c \u4e0b\u56fe\u662f\u751f\u6d3b\u4e2d\u5e38\u89c1\u7684\u4e00\u4e2a\u4f8b\u5b50</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec2/#depth_of_fielddof","title":"Depth of Field(DoF)","text":"<p>\u867d\u7136\u6709\u4e86\u5f25\u6563\u5706\u4e0edefocus\u7684\u6982\u5ff5\uff0c\u4f46\u662f\u6211\u4eec\u53ef\u80fd\u4f1a\u7591\u60d1\u751f\u6d3b\u4e2d\u7684\u7167\u7247\u5e76\u975e\u4ec5\u6709\u4e00\u4e2a\u6df1\u5ea6\u624d\u662f\u6e05\u6670\u7684\uff0c\u8fd9\u662f\u56e0\u4e3a\u56fe\u50cf\u5e76\u975e\u8fde\u7eed\u7684\uff0c\u800c\u662f\u7531\u4e00\u4e2a\u4e2a\u65b9\u683c\uff08\u50cf\u7d20\uff09\u6784\u6210\u7684\uff0c\u5f53\u5f25\u6563\u5706\u843d\u5728\u4e00\u4e2a\u50cf\u7d20\u5185\u65f6\uff0c\u5b83\u8868\u73b0\u51fa\u6765\u4e5f\u662f\u6e05\u6670\u7684\uff0c\u8fd9\u5c31\u5f15\u5165\u4e86\u666f\u6df1\u7684\u6982\u5ff5\uff1a</p> <p>Range of object distances over which the image is sufficiently well focused, i.e. range over which blur b is less than pixel size.</p> <p></p> <p>DoF: \\(o_2-o_1=\\frac{2pf^2cN(o-f)}{f^4-c^2N^2(o-f)^2}\\)</p>"},{"location":"ZJU_CS/3DCV/lec2/#geometric_image_formation","title":"Geometric image formation","text":"<p>Geometric image formation \u5c31\u662f\u4f7f\u7528\u76f8\u673a\u6a21\u578b\u6765\u63cf\u8ff03D\u4e16\u754c\u548c2D\u56fe\u50cf\u4e4b\u95f4\u7684\u51e0\u4f55\u5173\u7cfb\u3002</p>"},{"location":"ZJU_CS/3DCV/lec2/#perspective_projection","title":"Perspective Projection","text":"<p>\u4f7f\u7528Pin-hole camera model\u63cf\u8ff0\u7684\u6295\u5f71\u79f0\u4e3a\u900f\u89c6\u6295\u5f71\u3002</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec2/#homogeneous_coordinates","title":"\u9f50\u6b21\u5750\u6807\u7684\u5f15\u5165(Homogeneous coordinates)","text":"<p>Note</p> <p>\u4e4b\u524d\u5b66\u4e60\u4e86\u591a\u6b21\u9f50\u6b21\u5750\u6807\u7684\u8868\u793a\uff0c\u8fd9\u91cc\u4e0d\u8be6\u7ec6\u5c55\u5f00\u3002\u53ea\u9700\u6ce8\u610f\u5f15\u5165\u9f50\u6b21\u5750\u6807\u662f\u56e0\u4e3a\u6211\u4eec\u60f3\u8981\u5c06\u6295\u5f71\u8868\u793a\u4e3a\u7ebf\u6027\u53d8\u6362\uff08\u5373\u80fd\u591f\u4f7f\u7528\u77e9\u9635\u8868\u793a\uff09\u3002</p> <p>\u6df1\u5165\u4e86\u89e3\u9f50\u6b21\u5750\u6807\uff1aGAMES101 Lec3 https://www.bilibili.com/video/BV1X7411F744?p=3&amp;vd_source=49519b2e89bff31aec426f55ae7d4afa</p> <p>\u4f7f\u7528\u9f50\u6b21\u5750\u6807\u8868\u793a\u7684\u6295\u5f71\u77e9\u9635\uff1a</p> <p>\\(\\begin{bmatrix} f&amp;0&amp;0&amp;0 \\\\  0&amp;f&amp;0&amp;0 \\\\ 0&amp;0&amp;1&amp;0  \\end{bmatrix} \\begin{bmatrix}x\\\\ y\\\\ z\\\\ 1\\end{bmatrix}=\\begin{bmatrix}fx\\\\ fy\\\\ z\\end{bmatrix}=\\begin{bmatrix}f\\frac{x}{z}\\\\ f\\frac{y}{z} \\\\ 1\\end{bmatrix}\\)</p> <p>Visualize Perspective Projection</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec2/#projection_can_be_tricky","title":"Projection can be tricky","text":"<p>In perspective projection, straight lines are still straight, however, lenghth and angles are lost.</p>"},{"location":"ZJU_CS/3DCV/lec2/#vanishing_points","title":"Vanishing points","text":"<ul> <li>Any two parallel lines have the same vanishing point \\(v\\)</li> <li>The ray from C through \\(v\\) is parallel to the lines<ul> <li>\\(v\\) tells us the direction of the lines</li> <li>\\(v\\) may be outside the image frame or at infinity</li> </ul> </li> </ul>"},{"location":"ZJU_CS/3DCV/lec2/#vanishing_lines","title":"Vanishing lines","text":"<p>The union of all of these vanishing points is the vanishing line</p> <p>\u5730\u5e73\u7ebf</p>"},{"location":"ZJU_CS/3DCV/lec2/#perspective_distortion","title":"Perspective distortion","text":"<ul> <li>The exterior columns appear bigger(but why?)</li> <li>The distortion is not due to lens flaws.</li> </ul>"},{"location":"ZJU_CS/3DCV/lec2/#radial_distortion","title":"Radial distortion","text":"<ul> <li>Caused by imperfect lenses</li> <li>More noticeable for rays that pass through the edge of the lens.</li> <li>(two common categories)Pin cushion and Barrel</li> </ul>"},{"location":"ZJU_CS/3DCV/lec2/#orthographic_projectioin","title":"Orthographic projectioin","text":"<p>\\(\\begin{bmatrix} 1&amp;0&amp;0&amp;0 \\\\ 0&amp;1&amp;0&amp;0\\\\ 0&amp;0&amp;0&amp;1\\end{bmatrix}\\begin{bmatrix}x\\\\y\\\\z\\\\1\\end{bmatrix}=\\begin{bmatrix}x\\\\y\\\\1\\end{bmatrix}\\)</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec2/#photometric_image_formation","title":"Photometric image formation","text":"<ul> <li>Describe the relation between the physical properies of 3D world and the color of 2d image.</li> </ul>"},{"location":"ZJU_CS/3DCV/lec2/#shutter_speed","title":"Shutter speed","text":"<ul> <li>control exposure time</li> <li>The pixel value is equal to the integral of the light intensity within the exposure time\uff08\u50cf\u7d20</li> </ul>"},{"location":"ZJU_CS/3DCV/lec2/#rolling_shutter_effect","title":"Rolling shutter effect","text":""},{"location":"ZJU_CS/3DCV/lec2/#color_spaces","title":"Color spaces","text":"<ul> <li>RGB</li> <li>HSV wiki</li> </ul> <p>\u4eba\u773c\u5bf9\u4e09\u79cd\u989c\u8272RGB\u7684\u654f\u611f\u7a0b\u5ea6\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u5728\u5355\u8272\u4e2d\uff0c\u4eba\u773c\u5bf9\u7ea2\u8272\u6700\u4e0d\u654f\u611f\uff0c\u84dd\u8272\u6700\u654f\u611f\uff0c\u6240\u4ee5RGB\u989c\u8272\u7a7a\u95f4\u5747\u5300\u6027\u8f83\u5dee\u3002</p> <p>\u56e0\u6b64\u5728\u56fe\u50cf\u5904\u7406\u4e2d\u6211\u4eec\u8fd8\u4f7f\u7528\u4e86HSV\u989c\u8272\u7a7a\u95f4\uff0c\u6bd4RGB\u66f4\u63a5\u8fd1\u4eba\u4eec\u5bf9\u5f69\u8272\u7684\u611f\u77e5\u3002</p> <ul> <li>Hue(\u8272\u8c03\uff0c\u8272\u76f8) \u8868\u793a\u8272\u5f69\u4fe1\u606f</li> <li>Saturation(\u9971\u548c\u5ea6\u3001\u8272\u5f69\u7eaf\u51c0\u5ea6) \u9971\u548c\u5ea6\u8d8a\u9ad8\uff0c\u989c\u8272\u8d8a\u6df1\u3002\u9971\u548c\u5ea60\u4ee3\u8868\u7eaf\u767d\u8272\u3002</li> <li>Value(\u660e\u5ea6) \u989c\u8272\u7684\u654f\u611f\u7a0b\u5ea6\uff0c\u660e\u5ea6\u4e3a0\u8868\u793a\u7eaf\u9ed1\u8272</li> </ul> <p></p> Tips RGB-&gt;HSV HSV-&gt;RGB"},{"location":"ZJU_CS/3DCV/lec2/#bayre_filter","title":"Bayre filter","text":"<p>\u5bf9\u4e8e\u5f69\u8272\u56fe\u50cf\uff0c\u9700\u8981\u91c7\u96c6\u591a\u79cd\u57fa\u672c\u7684\u989c\u8272\uff0c\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u7528\u6ee4\u955c\u7684\u65b9\u6cd5\uff0c\u7ea2\u8272\u6ee4\u955c\u900f\u8fc7\u7ea2\u8272\u6ce2\u957f\u7684\u5149etc. \u5982\u679c\u8981\u91c7\u96c6RGB\u4e09\u79cd\u989c\u8272\uff0c\u5219\u9700\u8981\u4e09\u79cd\u6ee4\u955c\uff0c\u4ef7\u683c\u6602\u8d35\u3002\u800c\u62dc\u5c14\u6ee4\u955c(Bayre Filter)\u5728\u4e00\u5757\u6ee4\u955c\u4e0a\u8bbe\u7f6e\u4e0d\u540c\u989c\u8272\uff0c\u7531\u4e8e\u4eba\u773c\u5bf9\u7eff\u8272\u6bd4\u8f83\u654f\u611f\uff0c\u56e0\u6b64\u7eff\u8272\u8f83\u591a\uff0c\u5982\u4e0a\u56fe\u6240\u793a\u3002</p>"},{"location":"ZJU_CS/3DCV/lec2/#model_the_light_reflected_by_an_object_shading","title":"Model the light reflected by an object : Shading","text":"<ul> <li>Compute light reflected toward camera at a specific point</li> <li>Inputs:viewer direction, surface normal, light direction, surface parameters</li> </ul> <p>The light received per unit area is proportional to \\(cos\\theta = l\\cdot n\\)</p>"},{"location":"ZJU_CS/3DCV/lec2/#materialbrdfbidirectional_reflectance_distribution_function","title":"Material=BRDF(Bidirectional reflectance distribution function)","text":"<p>BRDF: \\(f_r(v_i;v_r;n;\\lambda)\\) $$ L_r(v_r;\\lambda)=\\int L_i(v_i;\\lambda)f_r(v_i;v_r;n;\\lambda)cos^{+}\\theta_idv_i $$</p>"},{"location":"ZJU_CS/3DCV/lec3/","title":"Lec03 | Image Processing","text":"<p>Note</p> <p>\u8be5\u90e8\u5206\u7b14\u8bb0\u4e0d\u662f\u5f88\u5b8c\u6574\u3002</p>"},{"location":"ZJU_CS/3DCV/lec3/#image_processing_basics","title":"Image processing basics","text":""},{"location":"ZJU_CS/3DCV/lec3/#increasing_contrast","title":"Increasing Contrast","text":"<ul> <li>\u6a21\u7cca\uff0c\u9510\u5316\uff0c\u8fb9\u7f18\u63d0\u53d6</li> </ul>"},{"location":"ZJU_CS/3DCV/lec3/#convolution","title":"convolution","text":"\\[ (f*g)(x)=\\int_{-\\infty}^{\\infty}f(y)g(x-y)dy \\]"},{"location":"ZJU_CS/3DCV/lec3/#discrete_2d_convolution","title":"Discrete 2D convolution","text":"<p>$$ (f*g)(x,y)=\\sum_{i,j=-\\infty}^{\\infty}f(i,j)I(x-i,y-j) $$ </p>"},{"location":"ZJU_CS/3DCV/lec3/#padding","title":"Padding","text":"<p>\u5982\u679c\u6ca1\u6709padding\u7684\u8bdd\uff0c\u90a3\u4e48\u6211\u4eec\u7ecf\u8fc7\u5377\u79ef\u64cd\u4f5c\u4e4b\u540e\u5f97\u5230\u7684\u56fe\u50cfsize\u4f1a\u53d8\u5c0f\uff0c\u4e3a\u4e86\u5f97\u5230\u5927\u5c0f\u76f8\u540c\u7684\u56fe\u50cf\uff0c\u6211\u4eec\u9009\u62e9\u5728\u56fe\u50cf\u5468\u56f4\u8fdb\u884cpadding\u3002</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec3/#guassian_blur","title":"Guassian blur","text":"<ul> <li>Obtain filter coefficients by sampling 2D Gaussian function \\(f(i,j)=\\frac{1}{2\\pi\\sigma^2}e^{-\\frac{i^2+j^2}{2\\sigma^2}}\\)</li> </ul>"},{"location":"ZJU_CS/3DCV/lec3/#sharpening","title":"Sharpening","text":"<p>\u9510\u5316\u64cd\u4f5c\u5c31\u662f\u5f80\u56fe\u50cf\u91cc\u6dfb\u52a0\u9ad8\u9891\u4fe1\u606f</p> <ul> <li>Let \\(I\\) be the original image</li> <li>High frequencies in image \\(I=I-blur(I)\\)</li> <li>Sharpened image = \\(I+(I-blur(I))\\)</li> </ul>"},{"location":"ZJU_CS/3DCV/lec3/#bilateral_filter","title":"Bilateral filter","text":"<p>removing noise while preserving image edges</p> <p></p> <p></p>"},{"location":"ZJU_CS/3DCV/lec3/#image_sampling","title":"Image sampling","text":"<p>\u91c7\u6837\u5c31\u662f\u7ed9\u5b9a\u4e00\u4e2a\u8fde\u7eed\u7684\u51fd\u6570\uff0c\u5728\u4e0d\u540c\u7684\u70b9\u6c42\u5b83\u7684\u503c\uff0c\u4e5f\u53ef\u4ee5\u8ba4\u4e3a\uff0c\u91c7\u6837\u662f\u628a\u4e00\u4e2a\u8fde\u7eed\u7684\u51fd\u6570\u79bb\u6563\u5316\u7684\u8fc7\u7a0b\u3002</p> <p></p> <p>Image resizing: change image size/resolution.</p> <p>Reducing image size -&gt; down-sampling</p> <p>\u4f46\u662f\u6211\u4eec\u5728\u91c7\u6837\u65f6\u6709\u53ef\u80fd\u53d1\u751f\u53cd\u8d70\u6837/\u952f\u9f7f\u73b0\u8c61\uff1a</p> <p>alias </p> <p>\u539f\u56e0\u53ef\u80fd\u662f\uff1a</p> <ul> <li>\u50cf\u7d20\u672c\u8eab\u6709\u4e00\u5b9a\u5927\u5c0f</li> <li>\u91c7\u6837\u7684\u901f\u5ea6\u8ddf\u4e0d\u4e0a\u4fe1\u53f7\u53d8\u5316\u7684\u901f\u5ea6\uff08\u9ad8\u9891\u4fe1\u53f7\u91c7\u6837\u4e0d\u8db3\uff09</li> </ul>"},{"location":"ZJU_CS/3DCV/lec3/#fourier_transform","title":"Fourier Transform","text":"<p>\u5085\u91cc\u53f6\u53d8\u6362\u53ef\u4ee5\u5c06\u4fe1\u53f7\u5206\u89e3\u4e3a\u9891\u7387\uff0c\u5e76\u4e14\u80fd\u5c06\u6ee1\u8db3\u4e00\u5b9a\u6761\u4ef6\u7684\u67d0\u4e2a\u51fd\u6570\u8868\u793a\u6210\u4e09\u89d2\u51fd\u6570\uff08\u6b63\u5f26\u548c/\u6216\u4f59\u5f26\u51fd\u6570\uff09\u6216\u8005\u5b83\u4eec\u7684\u79ef\u5206\u7684\u7ebf\u6027\u7ec4\u5408\u3002</p> <p> </p> <p>We can also use Fourier Transform to analyze the frequency content of an image and fix the aliasing problem. </p> <p></p> <p></p>"},{"location":"ZJU_CS/3DCV/lec3/#image_magnification","title":"Image magnification","text":"<p>\u8fd9\u91cc\u4e3b\u8981\u4ecb\u7ecd\u63d2\u503c\u7684\u5404\u79cd\u6280\u5de7\uff1b\u4e2a\u4eba\u8ba4\u4e3a\u5982\u679c\u4f60\u719f\u7ec3\u4f7f\u7528matplotlib\u7684\u8bdd\uff0c\u8fd9\u90e8\u5206\u5185\u5bb9\u5e94\u8be5\u4e0d\u4f1a\u6709\u592a\u5927\u7684\u56f0\u96be\u3002</p>"},{"location":"ZJU_CS/3DCV/lec3/#interpolation","title":"Interpolation","text":""},{"location":"ZJU_CS/3DCV/lec3/#nearest-neighbor_interpolation","title":"Nearest-neighbor interpolation","text":"<ul> <li>Not continuous</li> <li>Not smooth(\u5149\u6ed1\u51fd\u6570\uff1a\u51e0\u9636\u5bfc\u8fde\u7eed\u5c31\u79f0\u8be5\u51fd\u6570\u51e0\u9636\u5149\u6ed1)</li> </ul>"},{"location":"ZJU_CS/3DCV/lec3/#linear_interpolation","title":"Linear interpolation","text":""},{"location":"ZJU_CS/3DCV/lec3/#cubic_interpolation","title":"Cubic interpolation","text":"<p>For each interval: \u5e76\u4e0d\u662f\u5bf9\u6574\u4f53\u8fdb\u884c\u62df\u5408\uff0c\u800c\u662f\u6bcf\u4e24\u70b9\u9996\u5148\u62df\u5408\u7ebf\u6027\u51fd\u6570\uff0c\u975e\u7ebf\u6027\u9879\u7684\u5f15\u5165\u662f\u4e3a\u4e86\u4f7f\u66f2\u7ebf\u5149\u6ed1</p>"},{"location":"ZJU_CS/3DCV/lec3/#bilinear_interpolation","title":"Bilinear Interpolation","text":""},{"location":"ZJU_CS/3DCV/lec3/#super_resolution","title":"Super resolution","text":"<p>\u8d85\u5206\u8fa8\u7387\u6280\u672f\uff0c\u73b0\u5728\u51e0\u4e4e\u90fd\u662f\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u65b9\u6cd5</p>"},{"location":"ZJU_CS/3DCV/lec4/","title":"Lec04 | Model fitting and Optimization","text":""},{"location":"ZJU_CS/3DCV/lec4/#optimization","title":"Optimization","text":"<p>\u8fd9\u91cc\u9996\u5148\u4ecb\u7ecd\u4e86\u4f18\u5316\u7684\u57fa\u672c\u8303\u5f0f\uff0c\u8be6\u89c1\u4f18\u5316\u57fa\u672c\u7406\u8bba\u4e0e\u65b9\u6cd5\uff0c\u8fd9\u91cc\u4e0d\u8be6\u7ec6\u5c55\u5f00</p> <p>\u4e00\u4e2a\u6709\u8da3\u7684example\uff1aImage deblurring </p> <p>\u6211\u4eec\u5df2\u77e5\u6a21\u7cca\u56fe\u50cfY\u548c\u5377\u79ef\u6838F\uff0c\u9700\u8981\u901a\u8fc7\u4f18\u5316\u7684\u65b9\u6cd5\u5f97\u5230\u53bb\u566a\u540e\u7684\u56fe\u50cfX</p> <p>\u6211\u4eec\u7684\u60f3\u6cd5\u662f\u627e\u5230\u6e05\u6670\u7684\u56fe\u50cfX\uff0c\u4f7f\u5f97\u5b83\u505a\u6a21\u7cca\u5904\u7406\u540e\u4e0e\u5df2\u77e5\u7684\u56fe\u50cfY\u5dee\u522b\u5c3d\u53ef\u80fd\u5c0f\uff0c\u4e8e\u662f\u5f97\u5230\u76ee\u6807\u51fd\u6570\uff1a $$ \\mathop{min}_X \\Vert Y-FX\\Vert_2^2 $$</p>"},{"location":"ZJU_CS/3DCV/lec4/#model_fitting","title":"Model fitting","text":"<p>\u4e00\u4e2a\u6a21\u578b\u63cf\u8ff0\u95ee\u9898\u4e2d\u8f93\u5165\u548c\u8f93\u51fa\u7684\u5173\u7cfb\uff1a\u4f8b\u5982\u7ebf\u6027\u6a21\u578b\\(b=a^Tx\\) \u63cf\u8ff0\u8f93\u5165\\(a\\) \u548c\u8f93\u51fa \\(b\\) \u5173\u4e8e\u6a21\u578b\u53c2\u6570 \\(x\\) \u7684\u5173\u7cfb\u3002</p> <p>\u4f46\u5b9e\u9645\u7ed3\u679c\u5f88\u96be\u5b8c\u5168\u6ee1\u8db3\u6570\u5b66\u6a21\u578b\uff0c\u56e0\u6b64\u6211\u4eec\u505a\u7684\u662f\u8fdb\u884c\u6a21\u578b\u62df\u5408\uff0c\u5373\u6211\u4eec\u6709\u4e00\u4e2a\u5148\u9a8c\u7684\u5047\u8bbe\uff08\u6570\u636e\u7b26\u5408\u54ea\u79cd\u6a21\u578b\uff09\uff0c\u7136\u540e\u4ece\u4ece\u6570\u636e\u96c6\u4e2d\u9884\u6d4b\u51fa\u6a21\u578b\u7684\u53c2\u6570\uff08\u8be5\u65b9\u6cd5\u901a\u5e38\u88ab\u79f0\u4e3a\u5b66\u4e60\uff09</p> <p>\u4e00\u4e2a\u7ecf\u5178\u7684\u65b9\u6cd5\uff1a\u6700\u5c0f\u4e8c\u4e58\u6cd5(Minimize the Mean Square Error(MSE)) $$ \\hat{x}=\\mathop{argmin}_x\\sum_i(b_i-a_i^Tx)^2 $$</p> <p>\u5982\u679c\u6211\u4eec\u5047\u8bbe\u6570\u636e\u4e2d\u7684\u566a\u58f0\u662f\u670d\u4ece\u9ad8\u65af\u5206\u5e03\uff0c\u90a3\u4e48\u53ef\u4ee5\u4e0e\u6781\u5927\u4f3c\u7136\u4f30\u8ba1\u8054\u7cfb\u8d77\u6765</p>"},{"location":"ZJU_CS/3DCV/lec4/#maximum_likelihood_estimation","title":"Maximum Likelihood Estimation","text":"<p>\u9996\u5148\u5047\u8bbe\u6570\u636e\u670d\u4ece\u9ad8\u65afnoise $$ b_i=a_i^T+n, n\\sim G(0,\\sigma) $$ \u5bf9\u4e8e\u7ed9\u5b9a\u7684 \\(x\\), \u89c2\u5bdf\u5230 \\((a_i,b_i)\\) \u7684\u4f3c\u7136\uff08\u53ef\u80fd\u6027\uff09\uff1a $$ P[(a_i,b_i)|x]=P[b_i-a_i^Tx]\\propto exp-\\frac{(b_i-a_i^Tx)^2}{2\\sigma^2} $$ \u5982\u679c\u6570\u636e\u70b9\u662f\u76f8\u4e92\u72ec\u7acb\u7684\uff0c\u90a3\u4e48\uff1a $$ P[(a_1,b_1)(a_2,b_2)\\cdots|x]=\\Pi_iP[b_i-a_i^Tx]\\propto exp\\frac{(b_i-a_i^Tx)^2}{2\\sigma^2}=exp-\\frac{\\Vert Ax-b\\Vert_2}{2\\sigma^2} $$</p> <p>\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u6781\u5927\u4f3c\u7136\u4f30\u8ba1\u5373\u4e3a\u627e\u5230\\(x\\)\u80fd\u591f\u6700\u5927\u5316\u4f3c\u7136\u51fd\u6570\uff0c\u800c\u8fd9\u5373\u4e3a\u6700\u5c0f\u5316\\(\\Vert Ax-b\\Vert_2\\)</p> <p>\u56e0\u6b64MSE=MLE with Gaussian noise assumption</p>"},{"location":"ZJU_CS/3DCV/lec4/#numerical_methods","title":"Numerical methods","text":""},{"location":"ZJU_CS/3DCV/lec4/#recap_taylor_expansion","title":"Recap: Taylor expansion","text":"<ul> <li>First-order approximation</li> </ul> <ul> <li>Second-order approximation</li> </ul>"},{"location":"ZJU_CS/3DCV/lec4/#_1","title":"\u68af\u5ea6\u4e0b\u964d\u6cd5","text":""},{"location":"ZJU_CS/3DCV/lec4/#steepest_descent_method","title":"Steepest descent method","text":"<ul> <li>Advantage<ul> <li>Easy to implement</li> <li>Perform well when far from the minimum</li> </ul> </li> <li>Disadvantage<ul> <li>Converge slowly when near the minimum</li> <li>Waste a lot of computation</li> </ul> </li> </ul>"},{"location":"ZJU_CS/3DCV/lec4/#newton_method","title":"Newton method(\u8003\u8651\u4e86\u4e8c\u9636\u5bfc)","text":"<ul> <li>Do second-order expansion</li> </ul> \\[ F(x_k+\\Delta x)\\approx F(x_k)+J_F\\Delta x+\\frac{1}{2}\\Delta x^{T}H_F\\Delta x \\] <ul> <li>Find \\(\\Delta x\\) to minmize \\(F(x_k+\\Delta x)\\)\uff08\u5373\u5bf9\\(\\Delta x\\)\u6c42\u5bfc = 0\uff0c \u8fd9\u91cc\u6ce8\u610f\\(H_F\\)\u662fHessian\u77e9\u9635\uff0c\u4ee5\u53ca\u53ea\u6709\u5f53\u5176\u4e3a\u4e8c\u9636\u8fde\u7eed\u53ef\u5fae\u65f6\u624d\u5f97\u5230\u8fd9\u4e2a\u7ed3\u679c\uff09</li> </ul> \\[ H_F\\Delta x+J_F^{T}=0 \\\\ \\Delta x=-H_F^{-1}J_F^{T}\\ (Newton Step) \\] <ul> <li>Advantage: fast convergence near the minimum</li> <li>Disadvantage: Hessian requires a lot of computation</li> </ul>"},{"location":"ZJU_CS/3DCV/lec4/#gauss-newton_method","title":"Gauss-Newton method","text":"<p>Useful for solving nonlinear least squares \\(\\hat{x}=arg \\mathop{min}_x\\Vert R(x)\\Vert_2^2\\)</p> <p>\\(R(x)\\) is residual vector, which is \\(R(x)=Ax-b\\) </p> <ul> <li>Instead of expanding \\(F(x)\\), we expand \\(R(x)\\)</li> </ul> \\[ \\Vert R(x_k+\\Delta x)\\Vert_2^2 \\approx \\Vert R(x_k)+J_k\\Delta x\\Vert_2^2=\\Vert R(x_k)\\Vert_2^2+2R(x_k)^TJ_R\\Delta x+\\Delta x^TJ_R^TJ_R\\Delta x \\] <ul> <li>Optimal direction</li> </ul> \\[ \\Delta x=-(J_R^TJ_R)^{-1}J_R^TR(x_k) \\] <p>\u5373\u4f7f\u7528\\((J_R^TJ_R)\\) \u6765\u8fd1\u4f3c\u4ee3\u66ff\\(H_F\\). \u5927\u5927\u51cf\u5c11\u8ba1\u7b97\u91cf</p> <ul> <li>Disadvantage: \\((J_R^TJ_R)\\)\u4e0d\u6b63\u5b9a\uff0c\u6240\u4ee5\u672a\u5fc5\u53ef\u9006\uff0c\u53ef\u80fd\u4f1a\u5bfc\u81f4\u4e0d\u7a33\u5b9a</li> </ul>"},{"location":"ZJU_CS/3DCV/lec4/#levenberg-marquardt","title":"Levenberg-Marquardt","text":"\\[ \\Delta x=-(J_R^TJ_R+\\lambda I)^{-1}J_R^{T}R(x_k) \\] <p>The effect of \\(\\lambda\\)</p> <ul> <li>\\(\\lambda \\rightarrow \\infty\\)\uff1a Gradient descent, and stepsize is small</li> <li>\\(\\lambda \\rightarrow 0\\): Gauss-Newton step</li> </ul> <p>Advantage</p> <ul> <li>Start quickly(\u8fdc\u79bb\u76ee\u6807\u70b9\u65f6\u4f7f\u7528\u6700\u901f\u68af\u5ea6\u4e0b\u964d)</li> <li>Converge quickly(\u63a5\u8fd1\u76ee\u6807\u70b9\u65f6\u8fd1\u4f3c\u9ad8\u65af\u725b\u987f\u6cd5\uff0c\u4fdd\u8bc1\u6536\u655b\u901f\u5ea6\u5feb)</li> <li>\\(J_R^TJ_R+\\lambda I\\)\u6b63\u5b9a\uff0c\u4fdd\u8bc1\u9ad8\u65af\u725b\u987f\u6cd5\u6210\u7acb</li> </ul>"},{"location":"ZJU_CS/3DCV/lec4/#robust_estimation","title":"Robust estimation","text":""},{"location":"ZJU_CS/3DCV/lec4/#outliers","title":"Outliers","text":"<ul> <li>Inlier(\u5185\u70b9)\uff1a obeys the model assumption</li> <li>Outlier(\u5916\u70b9): differs significantly from the assumption\uff08\u79bb\u7fa4\u503c\uff09</li> </ul> <p>\u5916\u70b9\u4f1a\u4f7f\u5f97\u6700\u5c0f\u4e8c\u4e58\u6cd5\u53d7\u5f88\u5927\u5f71\u54cd\uff0c\u5b83\u4f1a\u8fc7\u5ea6\u653e\u5927\u504f\u79bb\u8f83\u5927\u7684\u8bef\u5dee</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec4/#robust_estimation_1","title":"Robust estimation","text":"<p>Use other loss function to replace MSE</p> <ul> <li>\\(L_1\\)\u635f\u5931\u51fd\u6570\uff1a\u662f\u6b8b\u5dee\u7edd\u5bf9\u503c\u7684\u548c\uff0c\u53ef\u4ee5\u6709\u6548\u51cf\u5c11\u79bb\u7fa4\u503c\u5bf9\u6a21\u578b\u62df\u5408\u7684\u5f71\u54cd\uff0c\u4f46\u7f3a\u70b9\u5728\u4e8e\u96f6\u70b9\u4e0d\u53ef\u5bfc</li> <li>Huber loss: \u4f7f\u7528\u5206\u6bb5\u51fd\u6570\uff0c\u5728\u62d0\u70b9\u9644\u8fd1\u4f7f\u7528\\(L_2\\),\u8fdc\u5904\u4f7f\u7528\\(L_1\\).</li> </ul> <p></p> <ul> <li>They are called robust functions.</li> </ul>"},{"location":"ZJU_CS/3DCV/lec4/#ransac_random_sample_concensus","title":"RANSAC: Random Sample Concensus","text":"<ul> <li>The most powerful method to handle outliers</li> </ul> <p>RANSAC\u7684\u4e3b\u8981\u601d\u60f3\uff1a</p> <p>\u9996\u5148\u6211\u4eec\u77e5\u9053\u62df\u5408\u4e00\u6761\u76f4\u7ebf\u53ea\u9700\u8981\u4e24\u4e2a\u70b9\uff0c\u56e0\u6b64\u9996\u5148\u968f\u673a\u627e\u4e24\u4e2a\u70b9\u62df\u5408\u4e00\u6761\u76f4\u7ebf\uff0c\u7136\u540e\u68c0\u67e5\u6709\u591a\u5c11\u70b9\u7b26\u5408\u8be5\u76f4\u7ebf(\u53ea\u8981\u70b9\u5230\u76f4\u7ebf\u7684\u8ddd\u79bb\u5c0f\u4e8e\u4e00\u5b9a\u7684\u9608\u503c\uff0c\u5c31count++)\uff0c\u4e00\u76f4\u91cd\u590d\u8be5\u8fc7\u7a0b\uff0c\u9009\u62e9count\u6700\u9ad8\u7684\u76f4\u7ebf\u3002</p> <p></p> <p>\u8be5\u65b9\u6cd5\u80fd\u591fwork\u7684\u539f\u56e0\u5c31\u662foutlier\u4e4b\u95f4\u5dee\u522b\u5f88\u5927\uff0c\u76f8\u4e92\u4e4b\u95f4\u5f88\u96be\u8fbe\u5230\u4e00\u81f4\uff1b\u800cinlier\u4e4b\u95f4\u5f88\u5bb9\u6613\u4e00\u81f4\uff0c\u4f7f\u5f97count\u66f4\u9ad8\u3002</p>"},{"location":"ZJU_CS/3DCV/lec4/#overfitting_and_underfitting","title":"Overfitting and underfitting","text":"<p>\u4e0a\u56fe\u4e2d\u53f3\u4e0b\u89d2\u90a3\u5e45\u56fe\u4fbf\u662f\u8fc7\u62df\u5408\u7684\u4e00\u4e2a\u4f8b\u5b50\uff0c\u867d\u7136\u6bcf\u6a21\u578b\u5f88\u597d\u5730fit\u4e86\u6240\u6709\u7684\u70b9\uff0c\u4f46\u8fd9\u5e76\u4e0d\u662f\u6211\u4eec\u60f3\u8981\u7684\u3002</p> <p>ill-posed problem</p> <p>\u89e3\u4e0d\u552f\u4e00\u7684\u95ee\u9898\u88ab\u79f0\u4e3a\u4e00\u4e2aill-posed problem\u3002(\u4f8b\u5982\u7ebf\u6027\u4ee3\u6570\u4e2d\u7ebf\u6027\u65b9\u7a0b\u7ec4\u7684\u89e3\u4e0d\u552f\u4e00)</p> <p>\u4e3a\u4e86\u89e3\u51b3\u8fd9\u79cd\u95ee\u9898\uff0c\u6211\u4eec\u9700\u8981\u589e\u52a0\u7ea6\u675f\uff0c\u5f15\u5165\u6b63\u5219\u5316\u6761\u4ef6\u3002</p>"},{"location":"ZJU_CS/3DCV/lec4/#l_2_regularization","title":"\\(L_2\\) regularization","text":"\\[ \\mathop{min}_x\\Vert Ax-b\\Vert_2^2 \\ s.t.\\ \\Vert x\\Vert_2\\le 1 \\] <p>\u5176\u4e2d\\(\\Vert x\\Vert_2\\le 1\\)\u5c31\u662f\u6b63\u5219\u5316\u7ea6\u675f\u3002</p> <p>\u901a\u8fc7\u8ba9\u9009\u62e9\u7684\u89e3\u5c3d\u53ef\u80fd\u63a5\u8fd1\u539f\u70b9\uff0c\u800c\u8ba9\u6211\u4eec\u6ca1\u6709\u7528\u7684\u89e3\u7684\u7ef4\u5ea6\u5c3d\u53ef\u80fd\u63a5\u8fd1 0\uff0c\u4ee5\u51cf\u5c0f\u6ca1\u7528\u7684\u53d8\u91cf\u7684\u5f71\u54cd\u3002</p> <p>\u4e00\u4e2a\u7b80\u5355\u76f4\u89c2\u7684\u4f8b\u5b50\uff1a\u5047\u8bbe\u6211\u60f3\u901a\u8fc7\\(b=A^Tx\\), \u5373\u8f93\u5165\\(A\\)\uff0c\u901a\u8fc7\u6a21\u578b\u53c2\u6570 \\(x\\) \u9884\u6d4b \\(b\\).\u5047\u8bbe\\(x=(x_1,\\cdots,x_{2n})\\)\uff0c\u800c\u6211\u4eec\u5148\u9a8c\u8ba4\u4e3a\u6709\u7528\u7684\u53ea\u6709\u524d\\(n\\)\u9879\uff0c\u8fd9\u65f6\u901a\u8fc7\u9650\u5236\\(\\Vert x\\Vert_2=x_1^2+\\cdots+x_{2n}^2\\le 1\\),\u5f53\u524d\\(n\\)\u9879\u503c\u6bd4\u8f83\u5927\u65f6\uff0c\u540e\\(n\\)\u9879\u7684\u503c\u5c31\u4f1a\u8d8b\u5411\u4e8e\u96f6\uff0c\u6291\u5236\u8fd9\u4e9b\u5197\u4f59\u53d8\u91cf\u3002</p>"},{"location":"ZJU_CS/3DCV/lec4/#l_1_regularization","title":"\\(L_1\\) regularization","text":"\\[ \\mathop{min}_x\\Vert Ax-b\\Vert_2^2 \\ s.t.\\  \\Vert x\\Vert_1\\le 1 \\] <p>\u6211\u4eec\u53ef\u4ee5\u7c7b\u4f3c\u5730\u7406\u89e3\\(L_1\\)\u6b63\u5219\u5316\u3002</p> <p>\u4f46\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u4e0b\u56fe\u53ef\u89c6\u5316\u6240\u793a\uff0c\\(L_1\\)\u51fd\u6570\u6709\u5f88\u591a\u7a81\u51fa\u7684\u89d2\uff0c\u9ad8\u7ef4\u60c5\u51b5\u4e0b\u66f4\u591a\u3002\u76ee\u6807\u51fd\u6570\u4e0e\u8fd9\u4e9b\u89d2\u63a5\u89e6\u7684\u673a\u4f1a\u8fdc\u5927\u4e8e\u4e0e\u5176\u5b83\u90e8\u5206\uff0c\u800c\u5728\u8fd9\u4e9b\u89d2\u7531\u4e8e\u4f4d\u4e8e\u5750\u6807\u8f74\u4e0a\uff0c\u6709\u5f88\u591a\u7ef4\u5ea6\u7684\u503c\u7b49\u4e8e\u96f6\uff0c\u56e0\u6b64\u4f7f\u5f97\u89e3\u53d8\u5f97\u66f4\u7a00\u758f\u3002</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec5/","title":"Lec05 | Image Matching and Motion Estimation","text":""},{"location":"ZJU_CS/3DCV/lec5/#image_matching","title":"Image matching","text":"<p>Finding point-to-point correspondences between two images</p> <p></p> <p>Main Components of Feature matching</p> <ul> <li>Detection: identify the interest points</li> <li>Description: extract vector feature descriptor surrounding each interest point</li> <li>Matching: determine correspondence between descriptors in two views</li> </ul>"},{"location":"ZJU_CS/3DCV/lec5/#detection","title":"Detection","text":""},{"location":"ZJU_CS/3DCV/lec5/#feature_points","title":"Feature points","text":"<p>\u7279\u5f81\u70b9\u9700\u8981\u6ee1\u8db3\u72ec\u7279\u6027\uff08\u81f3\u5c11\u8981\u5728\u5c40\u90e8\u552f\u4e00\uff09</p> <p>\u90a3\u4e48\u6211\u4eec\u9996\u5148\u7684\u95ee\u9898\u5c31\u662f\u5982\u4f55\u8861\u91cf\u4e00\u4e2a\u70b9\u7684\u72ec\u7279\u6027.</p> <p>\u8003\u8651\u4e00\u4e2a\u5c0f\u7684\u50cf\u7d20\u7a97\u53e3,\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5f53\u6211\u4eec\u5411\u4efb\u610f\u4e00\u4e2a\u65b9\u5411\u79fb\u52a8\u8be5\u7a97\u53e3\uff0c\u90fd\u4f1a\u9020\u6210\u8f83\u5927\u53d8\u5316\u65f6\uff0c\u6211\u4eec\u8ba4\u4e3a\u8be5\u70b9\u662funiqueness</p> <p></p> <p>\u5728\u6570\u5b66\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u68af\u5ea6\u5206\u5e03\u6765\u8861\u91cf\u8be5\u53d8\u5316</p> <p></p> <p>\u6839\u636e\u4e0a\u56fe\u6211\u4eec\u53ef\u4ee5\u5927\u81f4\u89c2\u5bdf\u5230\u56fe\u50cf\u7684\u7279\u5f81\uff0c\u5373\u5b58\u5728\u591a\u5c11\u4e2aedge\u53ca\u5176\u53d8\u5316\u7684\u65b9\u5411\uff08\u5373\u68af\u5ea6\u65b9\u5411\uff09\uff0c\u66f4\u8fdb\u4e00\u6b65\uff0c\u6211\u4eec\u4f7f\u7528\u4e3b\u6210\u5206\u5206\u6790\uff08PCA\uff09\u7684\u65b9\u6cd5\u8fdb\u884c\u8ba1\u7b97</p> <ul> <li>The 1<sup>st</sup> principal component is the direction with highest variance</li> <li>The 2<sup>nd</sup> principal component is the direction with highest variance which is orthogonal to the previous components.</li> </ul> <p></p> <p>\u56fe\u4e2d\u7eff\u8272\u7bad\u5934\u6240\u6307\u7684\u65b9\u5411\u5373\u534f\u65b9\u5dee\u77e9\u9635\u4e24\u4e2a\u7279\u5f81\u5411\u91cf\u7684\u65b9\u5411\uff0c\u957f\u5ea6\u5373\u7279\u5f81\u503c\u7684\u5927\u5c0f\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u6211\u4eec\u60f3\u8981\u7684\u662f\u4e24\u4e2a\u4e3b\u6210\u5206\u5927\u5c0f\u90fd\u5f88\u5927\u7684\u533a\u57df\u3002\u5177\u4f53\u8ba1\u7b97\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> <ul> <li>Compute the covariance matrix at each point</li> </ul> \\[ H=\\sum_{(u,v)}w(u,v)\\begin{bmatrix}I_x^2&amp;I_xI_y\\\\I_xI_y&amp;I_y^2\\end{bmatrix}\\\\I_x=\\frac{\\partial f}{\\partial x},I_y=\\frac{\\partial f}{\\partial y} \\] <ul> <li>Compute eigenvalues</li> </ul> \\[ H=\\begin{bmatrix}a&amp;b\\\\c&amp;d\\end{bmatrix} \\] \\[ \\lambda_{\\pm}=\\frac{1}{2}((a+d))\\pm \\sqrt{4bc+(a-d)^2} \\] <ul> <li>Classify points using eigenvalues of \\(H\\):</li> </ul> <p></p> <p>\u4e3a\u4e86\u66f4\u65b9\u4fbf\u8ba1\u7b97\uff0c\u6211\u4eec\u5f15\u5165\u54c8\u91cc\u65af\u7b97\u5b50(Harris operator): $$ f=\\frac{\\lambda_1\\lambda_2}{\\lambda_1+\\lambda_2}=\\frac{determinant(H)}{tr(H)} $$ \u6ce8\u610f\u5230\u53ea\u6709\u6ee1\u8db3\\(\\lambda_1,\\lambda_2\\)\u90fd\u5f88\u5927\u65f6\u51fd\u6570\u503c\u624d\u4e0d\u4e3a\u96f6\uff0c\\(f\\) \u88ab\u79f0\u4f5ccorner response.</p>"},{"location":"ZJU_CS/3DCV/lec5/#summary_harris_detector","title":"Summary: Harris detector","text":"<ul> <li>Compute derivatives at each pixel</li> <li>Computer matrix \\(H\\) in a Gaussian window around each pixel</li> <li>Compute corner response \\(f\\)</li> <li>Threshold \\(f\\)\uff08\u9608\u503c\u8fc7\u6ee4\uff09</li> <li>Find local maxima of response function </li> </ul> <p>\u9664\u4e86\u72ec\u7279\u6027\u4e4b\u5916\uff0c\u6211\u4eec\u8fd8\u5e0c\u671b\u7279\u5f81\u70b9\u5728\u56fe\u50cf\u53d8\u6362\uff08\u4e0b\u56fe\u662f\u5e38\u89c1\u7684\u53d8\u6362\uff0c\u5305\u62ec\u5149\u5b66\u53d8\u6362\u548c\u51e0\u4f55\u53d8\u6362\uff09\u4e2d\u4fdd\u6301\u4e0d\u53d8\u3002\u6bd4\u5982\u8bf4\u5bf9\u4e8e\u4e0a\u56fe\uff0c\u6211\u4eec\u5e0c\u671b\u5de6\u53f3\u4e24\u5f20\u56fe\u7247\u68c0\u6d4b\u5230\u7684\u7279\u5f81\u70b9\u76f8\u540c\u3002</p> <p></p> <p>Harris detector: Invariance properties</p> <p>\u9996\u5148\u5bf9\u4e8e\u5149\u5b66\u53d8\u6362\uff0c\u5bf9\u4e8e\u5e38\u6570\u9879 \\(b\\), \u6211\u4eec\u5728\u6c42\u5bfc\u65f6\u4f1a\u5c06\u5176\u6d88\u6389\uff0c\u4f46\u662fintensity scaling \\(a\\) \u65e0\u6cd5\u6d88\u6389\uff0c\u6240\u4ee5Harris detector is partially invariant to affine intensity change.</p> <p></p> <p>\u6bd4\u8f83\u663e\u7136\u7684\u662f\u51e0\u4f55\u53d8\u6362\u4e2d\u7684\u5e73\u79fb\u4e0e\u65cb\u8f6c\u53d8\u6362\uff0c\u7531\u4e8e\u51e0\u4f55\u7ed3\u6784\u4fdd\u6301\u4e0d\u53d8\uff0c\u6211\u4eec\u8ba1\u7b97\u7684\u534f\u65b9\u5dee\u77e9\u9635\u4e5f\u4e0d\u4f1a\u53d8\u5316\uff0c\u56e0\u6b64Corner response is invariant w.r.t image translation and rotation.</p> <p>\u4f46\u662f\u5bf9\u4e8e\u56fe\u50cf\u653e\u7f29\u6765\u8bf4\uff0c\u89d2\u70b9\u54cd\u5e94\u51fd\u6570\u7684\u503c\u662f\u4f1a\u53d8\u7684\uff0c\u4e0b\u56fe\u662f\u4e00\u4e2a\u76f4\u89c2\u7684\u4f8b\u5b50\uff0c\u5728\u5de6\u4fa7\u56fe\u7684\u533a\u57df\u8bc6\u522b\u4e3a\u89d2\u70b9\uff0c\u4f46\u662f\u5728\u53f3\u4fa7\u56fe\u8bc6\u522b\u4e3a\u8fb9\u7f18</p> <p></p> <p>\u8fd9\u5c31\u662f\u6211\u4eec\u9700\u8981\u89e3\u51b3\u7684\u95ee\u9898\uff1a\u5982\u4f55\u5728\u7ecf\u8fc7\u4e00\u5b9a\u53d8\u6362\u540e\u7684\u56fe\u50cf\u4e2d\u627e\u5230\u5408\u9002\u7684scale\uff08\u6216\u8005\u7a97\u53e3\u5927\u5c0f\uff09\u5462\uff1f</p> <p></p> <p>\u6ce8\u610f\u5230\u6211\u4eec\u7684\u76ee\u6807\u662f\u7279\u5f81\u70b9\u5339\u914d\uff0c\u90a3\u4e48\u7406\u60f3\u7684\u7ed3\u679c\u5c31\u662f\u4e24\u5f20\u56fe\u76f8\u540c\u7684feature point\u5bf9\u5e94\u7684corner response\u5e94\u8be5\u76f8\u540c\u3002</p> <p></p> <p>\u6240\u4ee5\u6211\u4eec\u8003\u8651\u4e0d\u540c\u5927\u5c0f\u7684window size, \u53d6\u5f97\u5bf9\u5e94\u7684corner response\u503c\uff0c\u5c06\u5176\u7ed8\u5236\u6210\u56fe\u50cf\uff0c\u66f2\u7ebf\u7684\u5cf0\u503c\uff08\u5373\u7279\u5f81\u6700\u660e\u663e\u7684\u533a\u57df\uff09\u5373\u4e3a\u5f53\u524d\u56fe\u7247\u5e94\u8be5\u53d6\u7684scale\u3002</p> <p></p> <p>\u4f46\u662f\u5728\u5b9e\u9645\u5e94\u7528\u4e2d\uff0cinstead of \u6539\u53d8window size\uff0c\u6211\u4eec\u4e00\u822c\u56fa\u5b9a\u4f4f\u7a97\u53e3\u5927\u5c0f\uff0c\u800c\u53bb\u6539\u53d8\u56fe\u50cf\u7684\u5927\u5c0f\uff0c\u5f62\u6210\u4e00\u4e2a\u56fe\u50cf\u91d1\u5b57\u5854(image pyramid), \u4e8c\u8005\u6548\u679c\u4e0a\u662f\u7b49\u4ef7\u7684\u3002</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec5/#blob_detector","title":"Blob detector","text":"<p>Blobs are good fearues, but how to find them?</p> <p>\u7531\u4e8e\u6591\u70b9\u7684\u5c40\u90e8\u6027\u8d28(\u5373\u5728\u4e00\u4e2a\u5c0f\u533a\u57df\u5185\uff0c\u4e14\u4e00\u822c\u662f\u95ed\u5408\u7684)\uff0c\u6240\u4ee5\u6591\u70b9\u533a\u57df\u5728\u50cf\u7d20\u4e0a\u5177\u6709\u6bd4\u8f83\u5927\u7684\u4e8c\u9636\u5bfc\u3002\u6240\u4ee5\u6211\u4eec\u7684\u6b65\u9aa4\u662f\u8ba1\u7b97\u56fe\u50cf\u7684\u62c9\u666e\u62c9\u65af\uff0c\u7136\u540e\u627e\u5230\u5c40\u90e8\u6700\u5927\u4e0e\u6700\u5c0f\u503c\u3002</p> <p></p> <p>\u800c\u5bf9\u4e8e\u8ba1\u7b97\u7ecf\u62c9\u666e\u62c9\u65af\u53d8\u6362\u540e\u5f97\u5230\u7684\u56fe\u50cf\uff0c\u6211\u4eec\u4f7f\u7528\u6ee4\u6ce2\u5668\u6765\u5b9e\u73b0\u3002</p> <ul> <li>Laplacian operator:</li> </ul> \\[ \\nabla^2=\\frac{\\partial^2}{\\partial x^2}+\\frac{\\partial^2}{\\partial y^2} \\] <ul> <li>Compute image derivatives by filtering:</li> </ul> <p></p> <p>Laplacian of Gaussian Filter</p> <p>\u7531\u4e8eLaplacian\u5bf9\u566a\u58f0\u6bd4\u8f83\u654f\u611f(\u5b9e\u9645\u4e0a\u6c42\u5bfc\u8fd9\u79cd\u8fd0\u7b97\u5bf9\u566a\u58f0\u90fd\u5f88\u654f\u611f\uff0c\u5b83\u8ba1\u7b97\u7684\u662f\u533a\u57df\u50cf\u7d20\u7684\u53d8\u5316\u7387\uff0c\u66f4\u4f55\u51b5\u4e8c\u9636\u5bfc)\uff0c \u6240\u4ee5\u6211\u4eec\u901a\u5e38\u4f7f\u7528Laplacian of Gaussian(LoG) filter \u8fdb\u884c\u5904\u7406\uff0c\u5373\u9996\u5148\u5bf9\u56fe\u7247\u4f5c\u9ad8\u65af\u6a21\u7cca\uff0c\u518d\u8ba1\u7b97\u62c9\u666e\u62c9\u65af\u7b97\u5b50\uff1a</p> \\[ \\nabla^2(f*g)=f*\\nabla^2g \\] <p></p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0cThe scale of LoG \u662f\u7531\u9ad8\u65af\u5206\u5e03\u7684\u65b9\u5dee\\(\\sigma\\)\u63a7\u5236\u7684\uff0c\u53ef\u4ee5\u60f3\u8c61\u4e00\u4e0b\u5f53 \\(\\sigma\\) \u6bd4\u8f83\u5927\u65f6\uff0c\u9ad8\u65af\u6838\u6574\u4f53\u5206\u5e03\u5c31\u6bd4\u8f83\u5bbd\uff0c\u5bf9\u5e94\u7684scale\u4e5f\u53d8\u5927\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002</p> <p></p> <p>\u800c\u5728\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u4ea7\u751f\u5bf9\u6ee4\u6ce2\u5668\u66f4\u76f4\u89c2\u7684\u8ba4\u8bc6\u3002\u539f\u56fe\u50cf\u4e0e\u6ee4\u6ce2\u5668\u8fdb\u884c\u5377\u79ef\u4e4b\u540e\uff0c\u5f97\u5230\u7ed3\u679c\u4e2d\u6bd4\u8f83\u6e05\u6670\u7684\u662f\u548c\u5377\u79ef\u6838\u957f\u5f97\u6bd4\u8f83\u50cf\u7684\u50cf\u7d20\u533a\u57df\uff0c\u800c\u5dee\u522b\u6bd4\u8f83\u5927\u7684\u5219\u88ab\u6a21\u7cca\u5904\u7406\u3002LoG\u7684visualization\u4e0e\u6591\u70b9\u6781\u5176\u76f8\u4f3c\uff0c\u56e0\u6b64\u5b83\u53ef\u4ee5\u7528\u6765\u8fdb\u884cblob detection.</p> <p></p> <p>\u5bf9\u4e8escale\u7684\u9009\u62e9\uff0c\u6211\u4eec\u53ef\u4ee5\u91c7\u7528\u7c7b\u4f3cHarris detector\u7684\u65b9\u6cd5\uff0c\u53ea\u4e0d\u8fc7\u8fd9\u91cc\u6211\u4eec\u653e\u7f29\u7684\u662fLoG\u7684\\(\\sigma\\) </p> <p></p> <p>Difference of Gaussian(DoG)</p> <ul> <li>Filter the image with two Gaussians</li> <li>Compute the difference of two filtered images</li> </ul> <p>LoG\u53ef\u4ee5\u7531\u4e24\u4e2a\u76f8\u90bb\\(\\sigma\\)\u7684Guassian\u8fdb\u884c\u8fd1\u4f3c</p> <p></p> <p>\u4e4b\u6240\u4ee5\u5f15\u5165DoG, \u662f\u56e0\u4e3a\u6211\u4eec\u5728\u4f7f\u7528LoG\u5904\u7406\u56fe\u50cf\u65f6\u4e5f\u662f\u8981\u8fdb\u884cGuassian\u6ee4\u6ce2\u7684\uff0c\u76f4\u63a5\u5c06\u6ee4\u6ce2\u540e\u7684\u76f8\u90bb\u4e24\u4e2a\u56fe\u50cf\u76f8\u51cf\u6548\u7387\u4f1a\u66f4\u9ad8\u3002</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec5/#summary_of_detection","title":"Summary of detection","text":"<ul> <li>What is a good feature point?<ul> <li>unique</li> <li>invariant to transformations</li> </ul> </li> <li>Popular detecors<ul> <li>Harris corner detector</li> <li>Blob detector(LoG,DoG)</li> </ul> </li> </ul>"},{"location":"ZJU_CS/3DCV/lec5/#description","title":"Description","text":"<p>We know how to detect good points.</p> <p>Next question: How to match them?</p> <p>Answer:  Extract a descriptor for each point, find similar descriptors between the two images(\u6784\u5efa\u4e00\u4e2a\u63cf\u8ff0\u5b50)</p> <p>Patches with similar content should have similar descriptors</p> <p>\u9996\u5148\u5f88\u5bb9\u6613\u60f3\u5230\u7684\u5c31\u662f\u5c06\u50cf\u7d20\u503c\u62c9\u957f\uff0c\u4f5c\u4e3a\u4e00\u4e2a\u7279\u5f81\u5411\u91cf\u3002But this is very sensitive(i.e.,not invariant) to even small shifts, rotations.</p>"},{"location":"ZJU_CS/3DCV/lec5/#siftscale_invariant_feature_transform","title":"SIFT(Scale Invariant Feature Transform)","text":"<p>\u4e00\u4e2a\u975e\u5e38\u81ea\u7136\u7684\u60f3\u6cd5</p> <p>SIFT \u4f7f\u7528patch\u7684\u68af\u5ea6\u5206\u5e03(\u68af\u5ea6\u5411\u91cf\u7684\u65b9\u5411\u5206\u5e03)\u4f5c\u4e3a\u63cf\u8ff0\u5b50\u3002\u8be5\u65b9\u5411\u5fc5\u7136\u662f\u4f4d\u4e8e\\([0,2\\pi]\\)\u4e4b\u95f4\uff0c\u56e0\u6b64SIFT\u6784\u5efa\u4e00\u4e2a\u76f4\u65b9\u56fe\uff0c\u6765\u7edf\u8ba1\u5728\u6bcf\u4e2a\u533a\u95f4\uff08\u4f8b\u5982\u5341\u7b49\u5206\uff09\u6709\u591a\u5c11\u4e2a\u50cf\u7d20\u3002\\([0,2\\pi]\\)\u7b49\u5206\u4e2a\u6570\u5373\u4e3a\u63cf\u8ff0\u5b50\u7684\u7ef4\u5ea6\u3002</p> <p></p> <p>\u6b64\u65f6\u5bf9\u4e8e\u56fe\u50cf\u7684\u5e73\u79fb\u663e\u7136\u4e0d\u4f1a\u6709\u5f71\u54cd\uff0c\u4f46\u6211\u4eec\u8003\u8651\u65cb\u8f6c\u548cscale\u3002</p> <p>\u65cb\u8f6c\u4f1a\u6539\u53d8\u68af\u5ea6\u5411\u91cf\u7684\u65b9\u5411\uff0c\u5bfc\u81f4\u76f4\u65b9\u56fe\u5faa\u73af\u5e73\u79fb\u3002\u4f46\u8fd9\u4e2a\u60c5\u51b5\u5f88\u597d\u5904\u7406\uff1a\u6211\u4eec\u53ef\u4ee5\u9009\u4e2d\u6700\u5927\u7684\u5206\u91cf\u653e\u5728\u7b2c\u4e00\u4e2a\uff0c\u4f7f\u6574\u4e2a\u76f4\u65b9\u56fe\u5e73\u79fb\u5bf9\u9f50\uff0c\u79f0\u4f5c\u76f4\u65b9\u56fe\u7684\u5f52\u4e00\u5316(\u671d\u5411\u5f52\u4e00\u5316)</p> <p>\u5bf9\u4e8escaling\u6765\u8bf4\uff0cSIFT\u7684\u540d\u5b57scaling invariant \u53ef\u80fd\u4f1a\u6709\u4e9b\u8bef\u5bfc\u3002\u4f46\u5f88\u663e\u7136\u5730\uff0cSIFT\u672c\u8eab\u63cf\u8ff0\u5b50\u662fnot invariant to scaling\u7684(\u7f29\u653e\u540e\u533a\u57df\u5185\u7684\u5411\u91cf\u4e2a\u6570\u90fd\u53d1\u751f\u53d8\u5316\u4e86\u5440)\uff0c\u4f46\u5176\u5b9eSIFT\u662f\u7ecf\u8fc7DoG\u5904\u7406\u8fc7\u7684\uff0c\u5373\u5728\u68c0\u6d4b\u9636\u6bb5\u5df2\u7ecf\u786e\u5b9a\u4e86scale\u7684\u5927\u5c0f(\u6700\u4f73\u7684\\(\\sigma\\))\uff0c\u6240\u4ee5\u6211\u4eec\u5728\u63d0\u53d6\u63cf\u8ff0\u5b50\u65f6\u5c31\u4e0d\u7528\u8003\u8651scale\u7684\u5f71\u54cd\u4e86\u3002</p> <p>Properties of SIFT</p> <p>Extraodinarily robust matching technique</p> <ul> <li>Can handle changes in viewpoint</li> <li>Can handle significant changes in illumination</li> <li>Fast and efficient-can run in real time</li> </ul> <p>Summary: SIFT algorithm</p> <ul> <li>Run DoG detector: find maxima in location/scale space</li> <li>Find dominate orientation</li> <li>For each (x,y,orientation), create descriptor</li> </ul>"},{"location":"ZJU_CS/3DCV/lec5/#matching","title":"Matching","text":"<p>\u73b0\u5728\u6211\u4eec\u627e\u5230\u4e86\u7279\u5f81\u70b9\uff0c\u5e76\u4e14\u6709\u4e86\u7279\u5f81\u70b9\u7684\u63cf\u8ff0\u65b9\u6cd5(\u63cf\u8ff0\u5b50),\u73b0\u5728\u6211\u4eec\u8981\u505a\u7684\u5c31\u662f\u5c06\u5bf9\u5e94\u7684\u7279\u5f81\u70b9\u5339\u914d\u8d77\u6765,\u7b80\u5355\u7684\u601d\u8def\u5c31\u662f\u8ba1\u7b97\u4e24\u4e2a\u63cf\u8ff0\u5b50\u5411\u91cf\u4e4b\u95f4\u7684\u8ddd\u79bb,\u5e76\u4e0e\u6700\u5c0f\u7684\u5339\u914d.</p> <p>\u4f46\u662f\u5f53\u4e24\u5f20\u56fe\u6709\u5f88\u76f8\u4f3c\u7684\u533a\u57df\u65f6\uff0c\u8fd9\u79cd\u65b9\u6cd5\u4f1a\u9020\u6210\u6709\u6b67\u4e49\u7684\u5339\u914d\uff0c\u5982\u4e0b\u56fe\u6240\u793a</p> <p></p> <p>\u6211\u4eec\u6709\u4e24\u79cd\u89e3\u51b3\u65b9\u6cd5:</p>"},{"location":"ZJU_CS/3DCV/lec5/#ratio_test","title":"Ratio test","text":"<p>\u6211\u4eec\u5b9a\u4e49 ratio score: $$ \\frac{\\Vert f_1-f_2\\Vert}{\\Vert f_1-f_2^{'}\\Vert} $$</p> <p>\u5176\u4e2d\\(f_2\\)\u662f\\(f_1\\)\u7684bset match, \\(f_2^{'}\\)\u662fsecond best match</p> <p>\u5bb9\u6613\u5f97\u77e5,\u5f53\u5339\u914d\u6b63\u786e\u65f6,ratio score\u4f1a\u6bd4\u8f83\u5c0f, \u53cd\u4e4b,ambigous matches have large ratioi scores.</p>"},{"location":"ZJU_CS/3DCV/lec5/#mutual_nearest_neighbour","title":"Mutual nearest neighbour","text":"<p>find mutual nearest neighbours \u5982\u679c\u5339\u914d\u6b63\u786e\u7684\u8bdd,\u6211\u4eec\u5bf9\\(f_2\\)\u5bfb\u627e\u6700\u4f73\u5339\u914d\uff0c\u90a3\u4e48\u5e94\u8be5\u4e5f\u662f\\(f_1\\).</p> <ul> <li>\\(f_1\\) is the nearest neighbour of \\(f_2\\) in \\(I_1\\)</li> <li>\\(f_2\\) is the nearest neighbour of \\(f_1\\) in \\(I_2\\)</li> </ul>"},{"location":"ZJU_CS/3DCV/lec5/#deep_learning_for_feature_matching","title":"Deep learning for feature matching","text":"<p>\u8868\u73b0\u5f97\u6bd4\u4f20\u7edf\u65b9\u6cd5\u597d\u5f88\u591a</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec5/#motion_estimation","title":"Motion Estimation","text":"<p>The cause of motion - Static camera, moving scene - Moving cameera, static scene - Moving camera, moving scene - Static camera, moving scene, moving light</p> <p>Motion estimation problems - Feature tracking     - Extract featur points and track them over multiple frames.(\u5373\u7ed9\u51fa\u4e24\u5e27\u753b\u9762\uff0c\u4f30\u8ba1\u7279\u5f81\u70b9\u7684\u8fd0\u52a8\u65b9\u5411)     - Output: displacement of sparse points - Optical flow     - Recover image motion at each pixel     - Output: dense displacement field</p> <p>\u4e8c\u8005\u7684\u4e3b\u8981\u533a\u522b\u5728\u4e8efeature tracking\u8f93\u51fa\u662f\u79bb\u6563\u7684,\u4ec5\u9650\u4e8e\u67d0\u4e9b\u7279\u5f81\u70b9;\u800coptical flow\u8f93\u51fa\u662f\u8fde\u7eed\u7684,\u4f30\u8ba1\u7684\u662f\u6574\u5f20\u56fe\u7247</p> <p>\u4f46\u4e8c\u8005\u4f7f\u7528\u7684\u65b9\u6cd5\u90fd\u662f\u4e00\u6837\u7684\uff1a Lucas-Kanade method</p> <p></p> <p>LK\u7b97\u6cd5\u7684\u4e09\u4e2a\u4e3b\u8981\u5047\u8bbe:</p> <ul> <li>small motion: points do not move very far</li> <li>brightness constancy: same point looks the same in every frame</li> <li>spatial coherence: points move like their neighbours</li> </ul> <p>\u57fa\u4e8e\u4e0a\u8ff0\u4e09\u4e2a\u5047\u8bbe\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u4ee5\u4e0b\u7684\u65b9\u7a0b\uff1a</p> <ul> <li>Brightness Constancy Equation:</li> </ul> \\[ I(x,y,t)=I(x+u,y+v,t+1) \\] <ul> <li>Taylor expansion assuming small motion:</li> </ul> \\[ I(x+u,y+v,t+1) \\approx I(x,y,t)+I_xu+I_yv+I_t\\\\ I(x+u,y+v,t+1)-I(x,y,t)=I_xu+I_yv+I_t\\\\ I_x\\cdot u+I_y\\cdot v+I_t \\approx 0 \\] <p>\u6240\u4ee5\u5f97\u5230 $$ \\nabla I\\cdot \\begin{bmatrix}u&amp;v\\end{bmatrix}^T+I_t=0 $$</p> <p>\u6211\u4eec\u6709\u4e24\u4e2a\u672a\u77e5\u6570\uff0c\u4f46\u662f\u53ea\u6709\u4e00\u4e2a\u65b9\u7a0b\uff0c\u8fd9\u65f6\u5019\u9700\u8981\u7528\u5230\u53e6\u4e00\u4e2a\u5047\u8bbe\uff1a spatial coherence constraint: - \u5728\u5f53\u524d\u50cf\u7d20\u90bb\u57df\u7684\u50cf\u7d20\u8fd0\u52a8\u65b9\u5411\u76f8\u540c - \u6240\u4ee5\u5982\u679c\u6211\u4eec\u4f7f\u7528\\(5\\times 5\\)\u7684\u7a97\u53e3\uff0c\u90a3\u4e48\u53ef\u4ee5\u5f97\u523025\u4e2a\u65b9\u7a0b!</p> \\[ \\begin{bmatrix}I_x(p_1)&amp;I_y(p_1)\\\\\\vdots&amp;\\vdots\\\\ I_x(p_{25})&amp;I_y(p_{25})\\end{bmatrix}=-\\begin{bmatrix}I_t(p_1)\\\\ \\vdots\\\\ I_t(p_{25})\\end{bmatrix} \\] <p>\u8fd9\u65f6\u5019\u6211\u4eec\u5c31\u53ef\u4ee5\u4f7f\u7528\u6700\u5c0f\u4e8c\u4e58\u6cd5\u6c42\u89e3 \\(\\mathop{min}_d \\Vert Ad-b\\Vert^2\\),\u5f97\u5230\\((A^TA)d=A^Tb\\),\u5373 $$ \\begin{bmatrix}\\sum I_xI_x&amp;\\sum I_xI_y\\ \\sum I_xI_y&amp;\\sum I_yI_y \\end{bmatrix}\\begin{bmatrix}u\\ v\\end{bmatrix}=-\\begin{bmatrix}\\sum I_xI_t\\ \\sum I_yI_t\\end{bmatrix} $$</p> <p>\u5f53\\(A^TA\\)\u53ef\u9006\u4e14\u4e24\u4e2a\u7279\u5f81\u503c\u4e0d\u80fd\u592a\u5c0f\u7684\u65f6\u5019,\u8be5\u65b9\u7a0b\u6709\u89e3,\u8fd9\u4e2a\u6761\u4ef6\u548c\u4e4b\u524d\u4ecb\u7ecd\u7684Harris corner detector \u7684\u6761\u4ef6\u662f\u4e00\u6837\u7684!</p> <p>\u4e0d\u80fd\u9884\u6d4b\u8fd0\u52a8\u7684\u60c5\u51b5</p> <ul> <li> <p>Low Texture Region: gradients have small magnitude</p> </li> <li> <p>Edge: Large \\(\\lambda_1\\), small \\(\\lambda_2\\),\u53ea\u80fd\u4f30\u8ba1\u4e00\u4e2a\u65b9\u5411\u7684\u8fd0\u52a8\u3002(analogy:aperture problem)</p> </li> </ul> <p>\u4f46\u662f\u5982\u679c\u5b9e\u9645\u60c5\u51b5\u4e0d\u7b26\u5408\u4e0a\u8ff0\u4e09\u4e2a\u5047\u8bbe\u65f6,LK\u7b97\u6cd5\u5c31\u4f1a\u51fa\u73b0\u95ee\u9898</p> <p>\u5bf9\u4e8e\u4e0d\u6ee1\u8db3small motion\u7684\u60c5\u51b5(\u6bd4\u5982\u8bf4\u7279\u5f81\u70b9\u5b9e\u9645\u4e0a\u79fb\u52a8\u4e86\u516b\u4e2a\u50cf\u7d20)\uff0c\u6211\u4eec\u6709\u65b9\u6cd5\u53ef\u4ee5\u89e3\u51b3</p> <p>\u4e00\u4e2a\u76f4\u89c2\u7684\u60f3\u6cd5\u5c31\u662f\u5c06\u56fe\u7247\u7f29\u5c0f\u5230\u539f\u6765\u7684\u516b\u5206\u4e4b\u4e00,\u5728\u7f29\u5c0f\u540e\u7684\u56fe\u7247\u4e2d\u5904\u7406\u4e4b\u540e\u518d\u653e\u5927\u56de\u53bb.\u4f46\u662f\u8be5\u65b9\u6cd5\u7684\u7f3a\u70b9\u5c31\u662f\u5728\u7f29\u5c0f\u56fe\u7247\u7684\u8fc7\u7a0b\u4e2d\u4f1a\u4e22\u5931\u4fe1\u606f\uff0c\u8fd9\u6837\u56fe\u50cf\u79fb\u52a8\u8ddd\u79bb\u7684\u7cbe\u5ea6\u5c31\u65e0\u6cd5\u4fdd\u8bc1\u3002</p> <p>\u4e00\u4e2a\u60f3\u6cd5\u5c31\u662f\u4f7f\u7528\u50cf\u7d20\u91d1\u5b57\u5854\u3002\u5176\u4e2d\u91d1\u5b57\u5854\u4e00\u662f\u65f6\u95f4\u4e3a\\(t\\)\u65f6\u7684\u56fe\u50cf,\u91d1\u5b57\u5854\u4e8c\u662f\u65f6\u95f4\u4e3a\\(t+1\\)\u65f6\u7684\u56fe\u50cf\u3002\u5728\u91d1\u5b57\u5854\u4e0a\u9010\u5c42\u4f30\u8ba1,\u5e76\u9010\u6b65\u7ec6\u5316\u3002\u4f8b\u5982\u5148\u4f30\u8ba1\u8fd0\u52a8\u8ddd\u79bb\u5c0f\u4e8e\u4e00\u4e2a\u50cf\u7d20\u7684\u6700\u4e0a\u5c42\u56fe\u50cf\uff0c\u6839\u636e\u6b64\u4f30\u8ba1\u5728\u91d1\u5b57\u5854\u4e00\u4e2d\u7684\u7b2c\u4e8c\u5c42\u6062\u590d\u51fa\u8fd0\u52a8\uff0c\u518d\u4e0e\u91d1\u5b57\u5854\u4e8c\u8fdb\u884c\u6bd4\u8f83\uff0c\u6b64\u65f6\u7279\u5f81\u70b9\u79fb\u52a8\u7684\u8ddd\u79bb\u7ecf\u8fc7\u8f83\u4e3a\u51c6\u786e\u7684\u4f30\u8ba1\u540e\u4e5f\u5c0f\u4e8e\u4e00\u4e2a\u50cf\u7d20\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</p> <p></p> <p>Applications</p> <ul> <li> <p>Video stablization</p> </li> <li> <p>Video denoising</p> </li> </ul>"},{"location":"ZJU_CS/3DCV/lec6/","title":"Lec06 | Image Stitching","text":""},{"location":"ZJU_CS/3DCV/lec6/#image_warping","title":"Image Warping","text":"<p>\u4e0elec3\u4ecb\u7ecd\u7684image filtering\u76f8\u6bd4\u8f83\uff0cfiltering\u6539\u53d8\u7684\u662f\u56fe\u50cf\u7684\u50cf\u7d20\u503c(intensity),\u800cwarping\u6539\u53d8\u7684\u662f\u56fe\u50cf\u7684\u5f62\u72b6(shape)</p>"},{"location":"ZJU_CS/3DCV/lec6/#parametric_global_warping","title":"Parametric global warping","text":"<p>\u6211\u4eec\u5173\u6ce8\u7684\u662f\u53c2\u6570\u5316\u5168\u5c40\u53d8\u5f62,\u5373\u56fe\u50cf\u7684\u6bcf\u4e00\u4e2a\u5750\u6807\u90fd\u9075\u5faa\u540c\u4e00\u4e2a\u53d8\u6362\u51fd\u6570\u3002</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec6/#projective_transformationhomography","title":"Projective Transformation(Homography)","text":"<p>\u56de\u987e\u4eff\u5c04\u53d8\u6362\u7684\u9f50\u6b21\u5750\u6807\u8868\u793a:</p> <p>$$ \\begin{pmatrix}x^{'}\\ y^{'}\\ 1\\end{pmatrix}=\\begin{pmatrix}a&amp;b&amp;t_x\\ c&amp;d&amp;t_y\\ 0&amp;0&amp;1\\end{pmatrix}\\begin{pmatrix}x\\ y\\ 1\\end{pmatrix} $$ \u5bf9\u4e8e\u4eff\u5c04\u6295\u5f71(or \u5355\u5e94\u53d8\u6362), \u77e9\u9635\u7684\\(a_{31},a_{32}\\)\u4e0d\u4e00\u5b9a\u4e3a\u96f6:</p> <p></p> <ul> <li>\u5355\u5e94\u6027\u77e9\u9635\u7684\u81ea\u7531\u5ea6\u4e3a8,\u56e0\u4e3a\u6211\u4eec\u53ef\u4ee5\u540c\u65f6\u9664\u4ee5\\(h_{22}\\)\u4f7f\u5f97\u77e9\u9635\u7684\\(H_{33}\\)\u4e3a1\uff0c\u7ed3\u679c\u662f\u4fdd\u6301\u4e0d\u53d8\u7684\u3002</li> <li>\u5728\u5904\u7406\u4e0a\uff0c\u6211\u4eec\u901a\u5e38\u505a\u7684\u9650\u5236\u662f\u4f7f\u5411\u91cf\\([h_{00},h_{01},\\cdots,h_{22}]\\)\u7684\u957f\u5ea6\u4e3a1</li> </ul> <p>\u4e0b\u56fe\u662f\u4e00\u4e2a\u5355\u5e94\u6027\u53d8\u5316\u7684\u4f8b\u5b50</p> <p></p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f, \u7531\u4e8e\u5355\u5e94\u6027\u53d8\u5316\u4e24\u5f20\u56fe\u7247\u7684\u5750\u6807\u662f\u4e00\u4e00\u5bf9\u5e94\u7684\uff0c\u6240\u4ee5\u53ea\u6709\u5f53\u76f8\u673a\u4e2d\u5fc3\u4fdd\u6301\u4e0d\u53d8\u65f6\u4e24\u5f20\u56fe\u7247\u624d\u7b26\u5408\u5355\u5e94\u53d8\u5316\u3002</p> <ul> <li>Camera rotated with its center unmoved</li> <li>Camera center moved and the scene is a plane</li> </ul> <p></p>"},{"location":"ZJU_CS/3DCV/lec6/#summary_of_2d_transformations","title":"Summary of 2D transformations","text":""},{"location":"ZJU_CS/3DCV/lec6/#implementing_image_warping","title":"Implementing image warping","text":"<p>\u6216\u8bb8\u6211\u4eec\u4f1a\u60f3\uff0c\u5b9e\u73b0warping\u4e0d\u662f\u5f88\u5bb9\u6613\u5417\uff0c\u53ea\u8981\u628a\u5f53\u524d\u56fe\u7247\u7684\u5750\u6807\u503c\u6839\u636e\u53d8\u5316\u51fd\u6570\u6620\u5c04\u5230\u53e6\u4e00\u4e2a\u5750\u6807\u4e0a\u5c31\u884c\u4e86\u3002 \u4f46\u662f\u8003\u8651\u4e00\u4e2a\u95ee\u9898\uff1a\u5f53\u524d\u7684\u50cf\u7d20\u5750\u6807\u6620\u5c04\u540e\u5904\u4e8e\u4e24\u4e2a\u50cf\u7d20\u4e2d\u95f4(\u53ef\u4ee5\u7406\u89e3\u4e3a\u50cf\u7d20\u503c\u662f\u5b58\u653e\u5728\u683c\u70b9\u4e0a\u7684\uff0c\u6620\u5c04\u540e\u7684\u50cf\u7d20\u4f4d\u7f6e\u4e0d\u4e00\u5b9a\u5728\u683c\u70b9\u4e0a)</p> <p>\u6240\u4ee5\u8fd9\u91cc\u6211\u4eec\u91c7\u53d6\u9006\u53d8\u6362, \u5373\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u9700\u8981\u627e\u7684\u50cf\u7d20\u70b9\uff0c\u53bb\u627e\u53d8\u6362\u524d\u7684\u5750\u6807\uff0c\u5982\u679c\u5750\u6807\u4e0d\u5728\u50cf\u7d20\u70b9\u4e0a\u5c31\u4f7f\u7528\u5468\u56f4\u7684\u50cf\u7d20\u8fdb\u884c\u63d2\u503c\u3002</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec6/#image_stitching","title":"Image Stitching","text":"<p>\u73b0\u5728\u6211\u4eec\u7684\u95ee\u9898\u5c31\u662f\u7ed9\u5b9a\u4e24\u5f20\u56fe\u7247, \u5982\u4f55\u8ba1\u7b97\u51fa\u53d8\u6362\u77e9\u9635?</p> <p>\u53ef\u4ee5\u91c7\u7528\u5982\u4e0b\u7684\u65b9\u6cd5(DLT)</p> <p></p> <p></p> <p></p> <p>\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u6c42\u89e3\u4f18\u5316\u95ee\u9898:  $$ min\\Vert Ah-0\\Vert ^2 $$ \u53ef\u4ee5\u5f97\u5230\\(h\\)\u5c31\u662f\\(A^TA\\)\u5bf9\u5e94\u6700\u5c0f\u7279\u5f81\u503c\u7684\u7279\u5f81\u5411\u91cf\uff0c\u63a8\u5bfc\u8fc7\u7a0b</p>"},{"location":"ZJU_CS/3DCV/lec6/#ransac_for_translation","title":"RANSAC for Translation","text":"<p>Recap the Idea:</p> <ul> <li>All the inliers will agree with each other on the translation vector;</li> <li>The outliers will disagree with each other( RANSAC only has guarantees if there are &lt;50% outliers)</li> </ul> <p>All good matches are alike; every bad match is bad in its own way.</p> <p>\u2014\u2014Tolstoy via Alyosha Efros</p> <p></p> <p>\u6bcf\u6b21\u968f\u673a\u9009\u4e00\u7ec4\u5bf9\u5e94\u70b9\uff0c\u8ba1\u7b97\u7968\u6570\uff0c\u6700\u540e\u8981\u5c06\u7968\u6570\u6700\u9ad8\u7684\\(H\\)\u5bf9\u5e94\u7684\u6240\u6709\u70b9\u62ff\u51fa\u6765\u505a\u4e00\u6b21\u6700\u5c0f\u4e8c\u4e58\u3002</p> <p>Summary for image stitching</p> <ul> <li>Input images</li> <li>Feature matching</li> <li>Compute transformation matrix with RANSAC</li> <li>Fix image 1 and warp image 2.</li> </ul> <p></p>"},{"location":"ZJU_CS/3DCV/lec6/#panoramas","title":"Panoramas","text":"<p>\u5bf9\u4e8e\u5168\u666f\uff0c\u6211\u4eec\u5904\u7406\u7684\u662f\u591a\u5f20\u56fe\u7247\u7684\u62fc\u63a5\u3002</p> <p>\u6700\u6734\u7d20\u7684\u65b9\u6cd5\u5c31\u662f\u53d6\u6700\u4e2d\u95f4\u7684\u56fe\u7247\u4f5c\u4e3a\u53c2\u8003\uff0c\u5176\u5b83\u6240\u6709\u7684\u56fe\u7247\u4e0e\u4e2d\u95f4\u90a3\u5f20\u5bf9\u9f50</p> <p>\u4f46\u8fd9\u79cd\u65b9\u6cd5\u4f1a\u4f7f\u5f97\u8fb9\u7f18\u56fe\u50cf\u7684\u5f62\u53d8\u5f88\u660e\u663e\u3002</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec6/#cylindrical_projection","title":"Cylindrical Projection","text":"<p>\u6240\u4ee5\u6211\u4eec\u4f7f\u7528\u67f1\u5f62\u6295\u5f71 (cylindrical projection)\u7684\u65b9\u6cd5</p> <p></p> <p></p> <p>\u67f1\u5f62\u6295\u5f71\u4f7f\u5f97\u53d8\u5316\u53d8\u7b80\u5355\u4e86: \u76f8\u673a\u7684\u65cb\u8f6c\u5728\u5706\u67f1\u4e0a\u662f\u5e73\u79fb</p>"},{"location":"ZJU_CS/3DCV/lec6/#assembling_the_panorama","title":"Assembling the panorama","text":"<p>\u5728\u67f1\u5f62\u6295\u5f71\u7684\u57fa\u7840\u4e0a\u8fd8\u662f\u4f1a\u51fa\u73b0\u95ee\u9898\uff0c\u5c31\u662f\u8bef\u5dee\u7684\u79ef\u7d2f\uff0c\u5bfc\u81f4\u6f02\u79fb\u3002</p> <p></p> <p>\u6211\u4eec\u5e0c\u671b\u6574\u4f53\u8bef\u5dee\u7684\u548c\u4e3a0\uff0c\u4e00\u4e2a\u89e3\u51b3\u529e\u6cd5\u5c31\u662f\u5c06\u6700\u540e\u4e00\u5f20\u56fe\u548c\u7b2c\u4e00\u5f20\u56fe\u4e4b\u95f4\u4e5f\u8fdb\u884c\u4e2a\u7ea6\u675f\u3002</p>"},{"location":"ZJU_CS/3DCV/lec7/","title":"Lec07 | Structure from Motion","text":"<p>Structure from Motion, \u4e2d\u6587\u540d\u4e3a\u8fd0\u52a8\u6062\u590d\u7ed3\u6784\u3002\u8fd9\u662f\u4e00\u79cd\u4e09\u7ef4\u91cd\u5efa\u7684\u7b97\u6cd5\uff0c\u901a\u8fc7\u4e24\u4e2a\u6216\u591a\u4e2a\u573a\u666f(\u56fe\u7247)\u6765\u6062\u590d\u76f8\u673a\u4f4d\u59ff\u5e76\u91cd\u5efa\u4e09\u7ef4\u5750\u6807\u70b9\u3002</p> <p>Recover camera poses and 3D structure of a scene</p> <p>\u9700\u8981\u89e3\u51b3\u7684\u51e0\u4e2a\u5173\u952e\u95ee\u9898</p> <ul> <li>\u76f8\u673a\u662f\u5982\u4f55\u5c06\u4e09\u7ef4\u5750\u6807\u70b9\u6620\u5c04\u5230\u56fe\u50cf\u5e73\u9762\u4e0a\u7684\uff1f(camera model)</li> <li>\u5982\u4f55\u8ba1\u7b97\u76f8\u673a\u5728\u4e16\u754c\u5750\u6807\u7cfb\u4e0b\u7684\u4f4d\u7f6e\u548c\u65b9\u5411?(camera calibration and pose estimation)</li> <li>\u5982\u4f55\u4ece\u56fe\u50cf\u4e2d\u91cd\u5efa\u51fa\u4e0d\u77e5\u9053\u7684\u4e09\u7ef4\u7ed3\u6784\uff1f(structure from motion)</li> </ul>"},{"location":"ZJU_CS/3DCV/lec7/#camera_model","title":"Camera Model","text":"<p>\u9996\u5148\u6211\u4eec\u56de\u987e\u4e00\u4e0b\u56fe\u50cf\u5f62\u6210\u7684\u8fc7\u7a0b</p> <p></p> <p>\u8fd9\u6574\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u603b\u7ed3\u4e3a\u4e09\u4e2a\u6b65\u9aa4\uff1a</p> <ul> <li>\u5750\u6807\u7cfb\u53d8\u6362:\u5c06\u4e16\u754c\u5750\u6807\u7cfb\u7684\u70b9\u53d8\u6362\u5230\u76f8\u673a\u5750\u6807\u7cfb</li> <li>\u900f\u89c6\u6295\u5f71\uff1a\u5c06\u76f8\u673a\u5750\u6807\u7cfb\u7684\u70b9\u6295\u5f71\u5230\u50cf\u5e73\u9762\u4e0a</li> <li>\u6210\u50cf\u5e73\u9762\u8f6c\u5316\u4e3a\u50cf\u7d20\u5e73\u9762\uff1a\u5b8c\u6210\u900f\u89c6\u6295\u5f71\u540e\u6211\u4eec\u5f97\u5230\u7684\u5750\u6807\u5355\u4f4d\u662f\u957f\u5ea6\u5355\u4f4d(\u6beb\u7c73\uff0c\u7c73\u7b49),\u4f46\u662f\u8ba1\u7b97\u673a\u4e0a\u8868\u793a\u5750\u6807\u662f\u4ee5\u50cf\u7d20\u4e3a\u57fa\u672c\u5355\u5143\u7684\uff0c\u8fd9\u5c31\u9700\u8981\u6211\u4eec\u8fdb\u884c\u4e00\u4e2a\u8f6c\u5316\u3002</li> </ul> <p>\u800c\u8fd9\u4e00\u7cfb\u5217\u8fc7\u7a0b\u53ef\u4ee5\u5b9a\u4e49\u4e3a\u4e24\u4e2a\u77e9\u9635(\u4e24\u6b21\u53d8\u6362):</p> <ul> <li>\u5916\u53c2\u77e9\u9635(Extrinsic Matrix): \u5750\u6807\u7cfb\u53d8\u6362</li> <li>\u5185\u53c2\u77e9\u9635(Intrinsic Matrix): \u900f\u89c6\u6295\u5f71\u4e0e\u8f6c\u5316\u4e3a\u50cf\u7d20\u5e73\u9762</li> </ul> <p>\"\u5916\" \"\u5185\" \u7684\u6982\u5ff5\u4e5f\u5f88\u597d\u7406\u89e3\uff0c\u5bf9\u5e94\u4e8e\u53d1\u751f\u4e8e\u76f8\u673a\u5916\u90e8\u548c\u5185\u90e8\u7684\u53d8\u6362\u3002</p>"},{"location":"ZJU_CS/3DCV/lec7/#coordinate_transformation","title":"Coordinate Transformation","text":"<p>\u5b9a\u4e49\u5916\u53c2\\((R,c_w)\\) \u5206\u522b\u4ee3\u8868\u4ece\u4e16\u754c\u5750\u6807\u5411\u76f8\u673a\u5750\u6807\u7684\u65cb\u8f6c\u77e9\u9635\u548c\u5728\u4e16\u754c\u5750\u6807\u7cfb\u4e0b\u76f8\u673a\u4e2d\u5fc3\u7684\u5750\u6807\u3002\u5982\u4e0b\u56fe\u6240\u793a</p> <p></p> <p>\u56e0\u6b64\u53d8\u6362\u540e\u7684\u5750\u6807: $$ x_c=R(x_w-c_w)=Rx_w-Rc_w=Rx_w+t,\\,t=-Rc_w $$ \u5373</p> <p></p> <p>\u4f7f\u7528\u9f50\u6b21\u5750\u6807\u8868\u793a\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u76f8\u673a\u5916\u53c2\u77e9\u9635\\(M_{ext}\\)</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec7/#perspective_projection","title":"Perspective Projection","text":"<p>\u8fd9\u5728lec2\u5df2\u7ecf\u4ecb\u7ecd\u8fc7</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec7/#image_plane_to_image_sensor_mapping","title":"Image Plane to Image Sensor Mapping","text":"<p>\u9996\u5148\u9700\u8981\u5c06\u957f\u5ea6\u5355\u4f4d\u8f6c\u5316\u4e3a\u50cf\u7d20\u5355\u4f4d</p> <p></p> <p>\u5176\u6b21\uff0c\u8981\u8fdb\u884c\u5750\u6807\u539f\u70b9\u7684\u8f6c\u5316\u3002\u6210\u50cf\u5e73\u9762\u7684\u539f\u70b9\u5728\u76f8\u673a\u5149\u8f74\u4e0e\u5e73\u9762\u7684\u4ea4\u70b9(\u4e00\u822c\u5728\u56fe\u50cf\u6b63\u4e2d\u95f4),\u800c\u6211\u4eec\u4e00\u822c\u628a\u56fe\u50cf\u5de6\u4e0a\u89d2\u4f5c\u4e3a\u50cf\u7d20\u5e73\u9762\u7684\u539f\u70b9\u3002</p> <p></p> <p>\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u76f8\u673a\u7684\u5185\u53c2\u77e9\u9635:</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec7/#projection_matrix","title":"Projection Matrix","text":"<p>\u7efc\u5408\u76f8\u673a\u7684\u5185\u53c2\u548c\u5916\u53c2\u77e9\u9635\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u603b\u7684\u6295\u5f71\u77e9\u9635</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec7/#camera_calibration","title":"Camera Calibration","text":"<p>\u6709\u4e86\u5185\u53c2\u548c\u5916\u53c2\u77e9\u9635\u7684\u5b9a\u4e49\u540e\uff0c\u6211\u4eec\u5c31\u60f3\u901a\u8fc7\u50cf\u7d20\u5750\u6807\u548c\u5b9e\u9645\u7a7a\u95f4\u5750\u6807\u6765\u5f97\u5230\u8fd9\u4e24\u4e2a\u77e9\u9635\u3002</p> <p>\u6211\u4eec\u9700\u8981\u540c\u65f6\u77e5\u9053\u82e5\u5e72\u50cf\u7d20\u70b9\u7684\u4f4d\u7f6e\u548c3D\u4e16\u754c\u5750\u6807\uff0c\u6240\u4ee5\u6211\u4eec\u5e0c\u671b\u6709\u4e00\u4e2a\u4e1c\u897f(\u6807\u5b9a\u677f\uff09\u80fd\u591f\u4f7f\u6211\u4eec\u65b9\u4fbf\u6d4b\u91cf\u8fd9\u4e24\u79cd\u5750\u6807\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u9ed1\u767d\u68cb\u76d8\u4f5c\u4e3a\u6807\u5b9a\u677f,\u5b83\u7684\u5750\u6807\u4f4d\u7f6e\u662f\u5f88\u65b9\u4fbf\u8ba1\u7b97\u7684\u3002\u4ee5\u5176\u4e3a\u6807\u5b9a\u677f\u4e3a\u4f8b\uff0c\u76f8\u673a\u6807\u5b9a\u7684\u5b9e\u73b0\u5982\u4e0b\uff1a</p> <ul> <li>\u7ed9\u5b9a\u4e00\u4e2a\u51e0\u4f55\u7279\u6027\u5df2\u77e5\u7684\u6807\u5b9a\u677f\uff0c\u4eba\u4e3a\u5b9a\u4e49\u4e16\u754c\u5750\u6807\u7cfb(\u5c3d\u53ef\u80fd\u65b9\u4fbf\u8ba1\u7b97)</li> <li>\u5bfb\u627e\u7279\u5b9a\u5173\u952e\u70b9\u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u6bcf\u4e00\u4e2a\u70b9\u5bf9\u90fd\u662f\u4e00\u4e2a3D\u70b9\u548c\u4e00\u4e2a2D\u70b9\u7684\u5bf9\u5e94</li> </ul> <p></p> <ul> <li>\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u70b9\u5bf9\uff0c\u6211\u4eec\u90fd\u53ef\u4ee5\u7528\u5982\u4e0b\u65b9\u7a0b\u8868\u793a\u51fa\u5bf9\u5e94\u5173\u7cfb\uff0c\u91c7\u7528\u4e4b\u524d\u6c42\u89e3\u5355\u5e94\u6027\u77e9\u9635\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u53ef\u4ee5\u6c42\u5f97\u6295\u5f71\u77e9\u9635\\(P\\).</li> </ul> <p></p> <p>\u6709\u4e86\u6295\u5f71\u77e9\u9635\\(P\\)\u540e\uff0c\u6211\u4eec\u5e94\u8be5\u5982\u4f55\u5f97\u5230\u5185\u53c2\u548c\u5916\u53c2\u77e9\u9635\u5462\uff1f</p> <p>\u901a\u5e38\u6765\u8bf4\uff0c\u5c06\u4e00\u4e2a\u77e9\u9635\u5206\u89e3\u4e3a\u4e24\u4e2a\u7279\u5b9a\u77e9\u9635\u662f\u505a\u4e0d\u5230\u7684\uff0c\u4f46\u662f\u6211\u4eec\u7684\u5185\u53c2\u77e9\u9635\u662f\u4e00\u4e2a\u4e0a\u4e09\u89d2\u77e9\u9635\uff0c\u4e14\u5916\u53c2\u77e9\u9635\u4e2d\u7684\u5b50\u77e9\u9635\u65cb\u8f6c\u77e9\u9635\u662f\u6b63\u4ea4\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\\(QR\\)\u5206\u89e3\u5b9e\u73b0\u5bf9\u5185\u53c2\u77e9\u9635\u548c\u65cb\u8f6c\u77e9\u9635\u7684\u6c42\u89e3\u3002</p> <p></p> <p>\u800c\u5bf9\u4e8e\u5916\u53c2\u77e9\u9635\u4e2d\u7684\u5e73\u79fb\u9879\uff0c\u53ef\u4ee5\u901a\u8fc7QR\u5206\u89e3\u5f97\u5230\u7684\u5185\u53c2\u77e9\u9635\u5f97\u5230</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec7/#visual_localization_problem","title":"Visual Localization Problem","text":"<p>\u89c6\u89c9\u5b9a\u4f4d\uff0c\u901a\u8fc7\u7167\u7247\u8ba1\u7b97\u51fa\u62cd\u6444\u8005\u7684\u4f4d\u7f6e(\u5373\u76f8\u673a\u7684\u5916\u53c2)\u3002\u8fd9\u91cc\u6211\u4eec\u5047\u5b9a\u573a\u666f\u7684\u5730\u56fe\u548c\u76f8\u673a\u7684\u5185\u53c2\u90fd\u5df2\u77e5\u3002</p> <p>\u57fa\u672c\u6b65\u9aa4</p> <ul> <li>\u627e\u51fa3D\u70b9\u4e0e2D\u70b9\u7684\u5bf9\u5e94\u5173\u7cfb\uff0c\u672c\u8d28\u4e0a\u662f\u56fe\u50cf\u7684\u7279\u5f81\u5339\u914d</li> <li>\u6c42\u89e3\u76f8\u673a\u7684\u4f4d\u59ff\uff0c\u79f0\u4f5cPnP\u95ee\u9898(Perspective-n-Point\uff0c\u591a\u70b9\u900f\u89c6\u6210\u50cf\uff0c\u662f\u76f8\u673a\u6807\u5b9a\u7684\u5b50\u95ee\u9898)</li> </ul> <p>\u5bf9\u4e8ePnP\u95ee\u9898\uff0c\u6211\u4eec\u75316\u4e2a\u672a\u77e5\u7684\u53c2\u6570\uff0c3\u4e2a\u65cb\u8f6c\uff0c3\u4e2a\u5e73\u79fb\uff0c\u56e0\u6b64\u8be5\u95ee\u9898\u4e5f\u79f0\u4f5c6\u81ea\u7531\u5ea6\u4f4d\u59ff\u4f30\u8ba1\u95ee\u9898\u3002\u7531\u4e8e\u4e00\u4e2a\u70b9\u5bf9\u5bf9\u5e94\u4e24\u4e2a\u65b9\u7a0b\uff0c\u56e0\u6b64\u6211\u4eec\u81f3\u5c11\u9700\u89813\u4e2a\u70b9\u5bf9\u6765\u6c42\u89e3PnP\u95ee\u9898\uff0c\u9664\u6b64\u4e4b\u5916\uff0c\u8fd8\u9700\u8981\u4e00\u4e2a\u989d\u5916\u7684\u70b9\u6765\u4fdd\u8bc1\u7b54\u6848\u7684\u552f\u4e00\u6027(\u5426\u5219\u4f1a\u6709\u56db\u4e2a\u89e3)\u3002</p> <p>P3P</p> <p>P3P\u5c31\u662f\u4f7f\u7528\u6700\u5c11\u7684\u70b9\u5bf9\u6765\u6c42\u89e3\u76f8\u673a\u4f4d\u59ff\uff0c\u4f7f\u7528\u51e0\u4f55\u4e0a\u7684\u65b9\u6cd5\u3002</p> <p>\u6c42\u89e3P3P</p> <p></p> <p></p> <p></p> <p></p> <p>PnP \u5f53\\(n&gt;3\\)\u65f6\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5c06PnP\u8f6c\u5316\u4e3a\u4e00\u4e2a\u4f18\u5316\u95ee\u9898\u3002</p> <p>\u5373\u6700\u5c0f\u5316\u91cd\u6295\u5f71\u8bef\u5dee(reprojection error) \u7ed9\u5b9a\u76f8\u673a\u7684\u5916\u53c2\uff0c\u628a\u4e09\u7ef4\u70b9\u6295\u5f71\u5230\u56fe\u50cf\u4e0a\uff0c\u5982\u679c\u5916\u53c2\u662f\u5bf9\u7684\uff0c\u5219\u6295\u5f71\u70b9\u548c\u7279\u5f81\u70b9\u662f\u4e00\u6837\u7684\u3002</p> <p>$$ \\mathop{min}\\limits_{R,t}\\sum_i\\Vert p_i-K(RP_i+t)\\Vert^2 $$ \u6211\u4eec\u4f7f\u7528P3P\u95ee\u9898\u7684\u89e3\u6765\u521d\u59cb\u5316\uff0c\u5e76\u7528\u9ad8\u65af\u725b\u987f\u6cd5\u8fdb\u884c\u4f18\u5316</p>"},{"location":"ZJU_CS/3DCV/lec7/#structrue_from_motion","title":"Structrue from motion","text":"<p>\u518d\u56de\u987e\u4e00\u4e0bSfM\u7684\u4efb\u52a1\uff1a \u4ece\u591a\u89c6\u89d2\u573a\u666f(\u56fe\u7247)\u6062\u590d\u76f8\u673a\u4f4d\u59ff\uff0c\u5e76\u91cd\u5efa\u4e09\u4f4d\u70b9\u5750\u6807\u3002\u89e3\u51b3SfM\u95ee\u9898\uff0c\u4e00\u822c\u901a\u8fc7\u5982\u4e0b\u7684\u5047\u8bbe\u4e0e\u6b65\u9aa4\uff1a</p> <ul> <li>Assume intrinsic matrix \\(K\\) is known for each camera.</li> <li>Find a few reliable corresponding points</li> <li>Find relative camera position \\(t\\) and orientation \\(R\\)</li> <li>Find 3D position of scene points</li> </ul>"},{"location":"ZJU_CS/3DCV/lec7/#epipolar_geometry","title":"Epipolar Geometry","text":"<p>\u6211\u4eec\u9996\u5148\u60f3\u8981\u5f97\u5230\u4e0d\u540c\u89c6\u89d2\u4e24\u5f20\u56fe\u7247\u7279\u5f81\u70b9\u4e4b\u95f4(2D projections of a 3D point in 2 views)\u5bf9\u5e94\u7684\u51e0\u4f55\u5173\u7cfb\u3002</p> <p>Epipolar geometry tells us how to solve \\(t\\) and \\(R\\) given a few pairs of 2D correspondences.</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec7/#terminology","title":"\u4e00\u4e9bterminology","text":"<ul> <li>\u57fa\u7ebf\uff1a\u4e24\u4e2a\u76f8\u673a\u4e2d\u5fc3\u7684\u8fde\u7ebf\uff0c\\(OO^{'}\\)</li> <li>\u5bf9\u6781\u70b9\uff1a\u4e24\u4e2a\u76f8\u673a\u4e2d\u5fc3\u8fde\u7ebf\u4e0e\u50cf\u5e73\u9762\u7684\u4ea4\u70b9\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a\u5728\u4e00\u4e2a\u76f8\u673a\u89c6\u89d2\u4e0b\u53e6\u4e00\u4e2a\u76f8\u673a\u5728\u8be5\u76f8\u673a\u5e73\u9762\u7684\u6295\u5f71\u70b9\uff0c\u5982\u56fe\u4e2d\u7684\\(e_l,e_r\\)\u3002</li> <li>\u5bf9\u6781\u5e73\u9762: \u7531\u5b9e\u9645\u70b9\\(P\\), \u4e24\u4e2a\u76f8\u673a\u4e2d\u5fc3\u5f62\u6210\u7684\u5e73\u9762\u3002\u5bf9\u4e8e\u67d0\u4e2a\u573a\u666f\u4e2d\u7684\u70b9\uff0c\u5176\u5bf9\u6781\u9762\u662f\u552f\u4e00\u7684\u3002</li> <li>\u5bf9\u6781\u7ebf\uff1a\u5bf9\u6781\u9762\u4e0e\u6210\u50cf\u5e73\u9762\u7684\u4ea4\u7ebf\u3002</li> </ul>"},{"location":"ZJU_CS/3DCV/lec7/#epipolar_constraint","title":"Epipolar Constraint","text":"<p>\u6781\u5e73\u9762\u7684\u6cd5\u5411\u91cf\\(n=t\\times x_l\\),  \u5b83\u4e0e\u5e73\u9762\u4e0a\u4efb\u4f55\u70b9\u7684\u5185\u79ef\u4e3a0\uff0c\u5373\\(x_l\\cdot (t\\times x_l)=0\\).</p> <p>\u6211\u4eec\u628a\u8fd9\u4e2a\u5f0f\u5b50\u5199\u6210\u77e9\u9635\u5f62\u5f0f\uff0c\u5e76\u5f15\u5165\u53c9\u4e58\u77e9\u9635\uff1a</p> <p></p> <p></p> <p>\u7531\u4e8e\\(T_{\\times}\\)\u662f\u4e00\u4e2a\u53cd\u5bf9\u79f0\u77e9\u9635\uff0c\\(R\\)\u662f\u6b63\u4ea4\u77e9\u9635\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5947\u5f02\u503c\u5206\u89e3\\(E=T_{\\times}R\\) \u8ba1\u7b97\u51fa\\(t,R\\).</p> <p>\u4f46\u662f\\((x_l,y_l,z_l)\\) \u662f\u573a\u666f\u70b9\u76f8\u5bf9\u76f8\u673a\u5750\u6807\u7cfb\u7684\u4e09\u7ef4\u5750\u6807\uff0c\u8fd9\u662f\u6211\u4eec\u4e0d\u77e5\u9053\u7684\uff0c\u6211\u4eec\u53ea\u77e5\u9053\u50cf\u7d20\u5e73\u9762\u4e0a\u7684\u4e8c\u7ef4\u5750\u6807\u3002\u56e0\u6b64\u6211\u4eec\u8981\u628a\\(x_l,x_r\\)\u901a\u8fc7\u5185\u53c2\u77e9\u9635\u8f6c\u5316\u4e3a\u50cf\u7d20\u5750\u6807\u3002</p> <p></p> <p></p> <p></p> <p>\u6211\u4eec\u79f0\u4e2d\u95f4\u7684\u90a3\u4e2a\u77e9\u9635\u4e3a\u57fa\u7840\u77e9\u9635\\(F\\)(Fundamental Matrix)</p> <p></p> <p>\u56e0\u6b64\uff0c\u7531\u4e8e\\(u_l,u_r\\)\u5df2\u77e5\uff0c\u6211\u4eec\u53ef\u4ee5\u6c42\u89e3\u57fa\u672c\u77e9\u9635\uff0c\u53c8\u7531\u4e8e\u76f8\u673a\u5185\u53c2\u5df2\u77e5\uff0c\u56e0\u6b64\u53ef\u4ee5\u901a\u8fc7\\(F\\)\u6c42\u89e3\u51fa\\(E\\),\u518d\u4f7f\u7528SVD\u5c31\u53ef\u4ee5\u5f97\u5230\\(R,t\\)</p> <p>\u7531\u4e8e\u57fa\u7840\u77e9\u9635\u4e5f\u662fhomogenous\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u5728\u6c42\u89e3\u65f6\u53ef\u4ee5\u52a0\u4e0a\u7ea6\u675f\\(\\Vert f\\Vert^2=1\\)</p> <p>\u73b0\u5728\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u76f8\u673a\u4f4d\u59ff\u4f30\u8ba1\u7684Pipeline</p> <p>Relative Camera Pose Esitimation</p> <p>\u5bf9\u6bcf\u4e2a\u70b9\u5bf9\uff0c\u5199\u51fa\u5bf9\u6781\u7ea6\u675f\uff0c\u5e76\u6539\u5199\u77e9\u9635\u5f97\u5230\u7ebf\u6027\u65b9\u7a0b\u7ec4\uff0c\u4f7f\u7528\u6700\u5c0f\u4e8c\u4e58\u6c42\u89e3\u3002\u5f97\u5230\u57fa\u7840\u77e9\u9635\u540e\u6c42\u89e3\\(E=J_L^{T}FK_r\\),\u6700\u540e\u8fdb\u884cSVD\u5206\u89e3\u3002</p> <p></p> <p></p>"},{"location":"ZJU_CS/3DCV/lec7/#triangulation","title":"Triangulation","text":"<p>\u73b0\u5728\u6211\u4eec\u6709\u4e86\u5bf9\u5e94\u7684\u4e8c\u7ef4\u7279\u5f81\u70b9\uff0c\u76f8\u673a\u53c2\u6570\u4ee5\u53ca\u4e24\u4e2a\u76f8\u673a\u5750\u6807\u7cfb\u7684\u76f8\u5bf9\u4f4d\u7f6e\u5173\u7cfb\uff0c\u4e0b\u4e00\u6b65\u5c31\u662f\u8ba1\u7b97\u51fa\u573a\u666f\u70b9\u7684\u5b9e\u9645\u4e09\u7ef4\u5750\u6807\u3002</p> \u5177\u4f53\u6b65\u9aa4 <p></p> <p></p> <p></p> <p></p> <p>\u4f46\u662f\u9700\u8981\u6ce8\u610f\u5230\uff0c\u5047\u8bbe\u6570\u636e\u90fd\u662f\u51c6\u786e\u7684\uff0c\u90a3\u4e48\\(O_lX_l,O_r,X_r\\)\u5e94\u8be5\u4f1a\u76f8\u4ea4\u4e8e\u573a\u666f\u70b9\\(X\\)\u3002\u5927\u4f46\u662f\u591a\u6570\u60c5\u51b5\u4e0b\u4f1a\u6709\u8bef\u5dee\uff0c\u4e5f\u5c31\u662f\u8bf4\u4e24\u6761\u7ebf\u4e0d\u4e00\u5b9a\u4e25\u683c\u76f8\u4ea4\uff0c\u56e0\u6b64\u6211\u4eec\u4f7f\u7528\u4f18\u5316\u7684\u65b9\u6cd5\uff0c\u5373\u56db\u4e2a\u65b9\u7a0b\u4e09\u4e2a\u672a\u77e5\u6570\uff0c\u901a\u8fc7\u6700\u5c0f\u4e8c\u4e58\u5f97\u5230\u6700\u4f18\u89e3\u3002</p> <p>\u53e6\u4e00\u4e2a\u9009\u62e9\u662f\u901a\u8fc7\u4f18\u5316\u91cd\u6295\u5f71\u8bef\u5dee\u8fdb\u884c\u6c42\u89e3\u3002</p> <p>Minmize reprojection error:</p> \\[ cost(P)=\\Vert u_l-\\hat{u}_l\\Vert^2+\\Vert u_r-\\hat{u}_r\\Vert^2 \\] <p></p>"},{"location":"ZJU_CS/3DCV/lec7/#multi-frame_structure_from_motion","title":"Multi-frame Structure from Motion","text":"<p>Sequential SFM \u6b65\u9aa4\uff1a</p> <ul> <li>\u4ece\u5176\u4e2d\u4e24\u5f20\u5f00\u59cb\uff0c\u4f7f\u7528\u524d\u8ff0\u65b9\u6cd5\u91cd\u5efa</li> <li>\u4e0d\u65ad\u53d6\u51fa\u65b0\u7684\u56fe\u50cf\uff0c\u6839\u636e\u5df2\u77e5\u6761\u4ef6\u8ba1\u7b97\u76f8\u673a\u4f4d\u59ff\uff0c\u53ef\u4ee5\u5f97\u5230\u65b0\u7684\u4e09\u4f4d\u70b9\uff0c\u5e76\u4f18\u5316\u73b0\u6709\u7684\u70b9</li> <li>\u4f7f\u7528Bundle Adjustment \u8fdb\u884c\u4f18\u5316(\u6d88\u9664\u7d2f\u79ef\u8bef\u5dee)</li> </ul> <p>Bundle Adjustment</p> <p>\u5728\u6240\u6709\u76f8\u673a\u5750\u6807\u7cfb\u4e0b\u4f18\u5316\u6240\u6709\u70b9\u7684\u91cd\u6295\u5f71\u8bef\u5dee</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec7/#colmap","title":"COLMAP","text":"<p>\u4e00\u4e2a\u4e09\u7ef4\u91cd\u5efa\u5de5\u5177 COLMAP is a general-purpose Structure-from-Motion (SfM) and Multi-View Stereo (MVS) pipeline with a graphical and command line interface. It offers a wide range of features for reconstruction of ordered and unordered image collections.</p>"},{"location":"ZJU_CS/3DCV/lec8/","title":"Lec08 | Depth estimation and 3D reconstruction","text":"<p>\u4e0a\u4e00\u8282\u6211\u4eec\u8ba8\u8bba\u7684structure from motion\u91cd\u5efa\u7684\u662f\u7a00\u758f\u7684\u70b9\u4e91\uff0c\u8fd9\u8282\u6211\u4eec\u8ba8\u8bba\u7a20\u5bc6\u7684\u91cd\u5efa\uff0c\u5373\u5bf9\u6bcf\u4e2a\u50cf\u7d20\u70b9\u8fdb\u884c\u91cd\u5efa\uff0c\u800c\u9700\u8981\u7684\u4e00\u4e2a\u91cd\u8981\u6982\u5ff5\u5c31\u662f\u6df1\u5ea6\u7684\u4f30\u8ba1\u3002</p>"},{"location":"ZJU_CS/3DCV/lec8/#depth_estimation","title":"Depth estimation","text":"<p>\u6df1\u5ea6\u4f30\u8ba1\u5373\u5bf9\u4e8e\u7ed9\u5b9a\u7684\u56fe\u50cf\uff0c\u4f30\u8ba1\u6bcf\u4e00\u4e2a\u50cf\u7d20\u5728\u5b9e\u9645\u573a\u666f\u4e2d\u7684\u6df1\u5ea6\u3002\u8fd9\u91cc\u7684\u6df1\u5ea6\u6709\u65f6\u5019\u6307\u7a7a\u95f4\u70b9\u5230\u76f8\u673a\u4e2d\u5fc3\u6216\u8005\u50cf\u5e73\u9762\u7684\u8ddd\u79bb\uff0c\u4e5f\u6709\u65f6\u5019\u8868\u793a\u6cbf\u5149\u7ebf\u7684\u8ddd\u79bb\u3002</p> <p>\u6df1\u5ea6\u56fe\u5c31\u662f\u5c06\u6df1\u5ea6\u4fe1\u606f\u53ef\u89c6\u5316</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec8/#stereo_matching","title":"Stereo matching","text":""},{"location":"ZJU_CS/3DCV/lec8/#stereo_vision","title":"Stereo Vision","text":"<ul> <li>An object point will project to some point in our image</li> <li>That image point corresponds to a ray in the world.</li> <li>Two rays intersect at a single point, so if we want to localize points in 3D we need 2 eyes.(\u53cc\u76ee\u89c6\u89c9)</li> </ul> <p>Recap: Epipolar geometry</p> <p></p> <p>\u5373\u5982\u679c\u5df2\u77e5\\(X_L\\),\u90a3\u4e48\\(X_R\\)\u7684\u8f68\u8ff9\u5c31\u662f\u5bf9\u6781\u7ebf\u3002\u8fd9\u6781\u5927\u7b80\u5316\u4e86\u6211\u4eec\u641c\u7d22\u7684\u533a\u57df\u3002</p> <p>\u8003\u8651\u6700\u7b80\u5355\u7684\u60c5\u51b5\uff1a\u4e24\u4e2a\u5e73\u884c\u7684\u50cf\u5e73\u9762\uff1a</p> <p></p> <p>\u8fd9\u6837\u5b50\u6211\u4eec\u53ea\u9700\u8981\u641c\u7d22\u53e6\u4e00\u5f20\u56fe\u4e2d\u540c\u4e00\u9ad8\u5ea6\u7684\u6c34\u5e73\u7ebf\u5373\u53ef\uff0c\u66f4\u52a0\u7f29\u5c0f\u4e86\u641c\u7d22\u7684\u7a7a\u95f4\uff0c\u63d0\u9ad8\u6548\u7387\uff01</p> <p>\u90a3\u4e48\u5bf9\u4e8e\u5e76\u4e0d\u5e73\u884c\u7684\u50cf\u5e73\u9762\uff0c\u5f88\u76f4\u89c2\u7684\u60f3\u6cd5\uff0c\u5c31\u662f\u901a\u8fc7\u51e0\u4f55\u53d8\u6362\u4f7f\u5f97\u5b83\u4eec\u5e73\u884c\u3002\u79f0\u4f5c\u7acb\u4f53\u5f71\u50cf\u77eb\u6b63\u3002</p> <p></p> <p>\u8fd9\u6837\u6211\u4eec\u5c31\u5c06\u6240\u6709\u7684\u60c5\u51b5\u90fd\u7b80\u5316\u4e3a\u4e86\u5e73\u884c\u50cf\u5e73\u9762\u3002</p> <p>Result</p> <p></p> <p>\u89c6\u5dee(disparity) \u4e24\u5f20\u56fe\u540c\u4e00\u4e2a\u70b9\u6c34\u5e73\u5750\u6807\u7684\u5dee\u522b\uff1a \\(x_2-x_1=\\) the disparity of pixel(\\(x_1,y_1\\))</p> <p>\u6211\u4eec\u53ef\u4ee5\u4ece\u89c6\u5bdf\u6765\u4f30\u8ba1\u51fa\u6df1\u5ea6\u4fe1\u606f\uff1a</p> <p></p> <p>\u901a\u8fc7\u76f8\u4f3c\u4e09\u89d2\u5f62\u5f97\u5230\u3002</p>"},{"location":"ZJU_CS/3DCV/lec8/#stereo_matching_algorithms","title":"Stereo matching algorithms","text":"<p>\u6211\u4eec\u5047\u8bbe\u4eae\u5ea6\u4e00\u81f4\u3002 \u7acb\u4f53\u5339\u914d\u5c31\u662f\u5728\u53e6\u4e00\u5f20\u56fe\u7684\u5bf9\u6781\u7ebf\u4e0a\u5f53\u524d\u70b9\u641c\u7d22\u6700\u4f73\u5339\u914d\u7684\u70b9\u3002\u5f88\u76f4\u89c2\u7684\u60f3\u6cd5\u5c31\u662f\u53d6\u4e00\u4e2a\u5c0f\u7a97\u53e3\uff0c\u5728\u53e6\u4e00\u5f20\u56fe\u7684\u5bf9\u6781\u7ebf\u4e0a\u6ed1\u52a8\uff0c\u5bfb\u627e\u6700\u76f8\u4f3c\u7684\u5c0f\u533a\u57df\u3002</p> <p></p> <p>Popular matching scores</p> <p></p> <p>\u5bf9\u4e8e\u7a97\u53e3\u5339\u914d\uff0c\u7a97\u53e3\u5927\u5c0f\u7684\u9009\u62e9\u5bf9\u7ed3\u679c\u9020\u6210\u6bd4\u8f83\u5927\u7684\u5f71\u54cd\u3002\u7a97\u53e3\u592a\u5c0f\u53ef\u4ee5\u589e\u52a0\u7ec6\u8282\uff0c\u4f46\u662f\u4f1a\u589e\u52a0\u566a\u58f0\u3002\u7a97\u53e3\u592a\u5927\u867d\u7136\u566a\u58f0\u5c0f\u4e86\uff0c\u4f46\u662f\u6211\u4eec\u63d0\u53d6\u4e0d\u5230\u7ec6\u8282\uff0c\u540e\u7eed\u91cd\u5efa\u7684\u6548\u679c\u5c31\u4e0d\u597d</p> <p></p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\u5373\u4f7f\u662f\u6700\u4f73\u7684window size,\u5f97\u5230\u7684\u6df1\u5ea6\u56fe\u4e0e\u5b9e\u9645\u8fd8\u662f\u6709\u4e00\u5b9a\u5dee\u8ddd\u3002</p> <p>Stereo as energy minmization</p> <p>\u6211\u4eec\u53ef\u4ee5\u5c06\u7acb\u4f53\u5339\u914d\u8f6c\u5316\u4e3a\u4e00\u4e2a\u4f18\u5316\u95ee\u9898</p> \\[ E(d)=E_d(d)+\\lambda E_s(d) \\] <p>\u4f18\u5316\u53d8\u91cf\u662f\u6bcf\u4e2a\u70b9\u7684\u89c6\u5dee\uff0c\u76ee\u6807\u51fd\u6570\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff1a</p> <ul> <li>\u5339\u914d\u672c\u8eab\u7684\u635f\u5931\uff1a\u76ee\u7684\u662f\u5728\u53e6\u4e00\u5f20\u56fe\u4e2d\u627e\u5230\u6700\u4f73\u5339\u914d(match cost)</li> <li>\u5149\u6ed1\u6027\u7684\u635f\u5931\uff1a \u76f8\u90bb\u7684\u4e24\u4e2a\u50cf\u7d20\uff0c\u89c6\u5bdf\u5e94\u8be5\u5c3d\u53ef\u80fd\u63a5\u8fd1(smoothness cost)</li> </ul> <p></p> <p>\u5bf9\u4e8e\\(V\\)\u7684\u9009\u62e9\uff1a</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\u8be5\u65b9\u6cd5\u7684\u7ed3\u679c\uff0c\u6548\u679c\u597d\u4e86\u5f88\u591a</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec8/#stereo_reconstruction_pipeline","title":"Stereo reconstruction pipeline","text":"<p>\u81f3\u6b64\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u7acb\u4f53\u91cd\u5efa(\u53cc\u76ee\u91cd\u5efa)\u7684\u57fa\u672c\u6b65\u9aa4\uff1a</p> <ul> <li>Calibrate cameras</li> <li>Rectify images</li> <li>Compute disparity</li> <li>Estimate depth</li> </ul> <p>\u57fa\u7ebf\u7684\u9009\u62e9</p> <p></p> <p>\u5982\u679c\u57fa\u7ebf\u8fc7\u5c0f\uff0c\u5219\u70b9\u7684\u6df1\u5ea6\u8bef\u5dee\u4f1a\u6bd4\u8f83\u5927\u3002 \u5982\u679c\u57fa\u7ebf\u8fc7\u5927\uff0c\u5219\u4e00\u65b9\u9762\u91cd\u5408\u7684\u533a\u57df\u6bd4\u8f83\u5c0f\uff0c\u53e6\u4e00\u65b9\u9762\u4e24\u5f20\u56fe\u7247\u7684\u5185\u5bb9\u5dee\u522b\u6bd4\u8f83\u5927(\u5c31\u76f8\u5f53\u4e8e\u4ece\u4e24\u4e2a\u76f8\u5dee\u8f83\u8fdc\u7684\u89c6\u89d2\u770b\u4e00\u5f20\u56fe\uff0c\u5149\u7ebf\u50cf\u7d20\u7b49\u5185\u5bb9\u5c31\u4f1a\u4e0d\u4e00\u6837)\uff0c\u6a2a\u5411\u8bef\u5dee\u589e\u5927\uff0c\u6bd4\u8f83\u96be\u641c\u7d22\u5230\u5339\u914d\u7684\u70b9\u3002</p> <p>Possible Cause of Error</p> <ul> <li>Camera calibration errors</li> <li>Poor image resolution</li> <li>Occlusions \uff08\u906e\u6321\uff09</li> <li>Violations of brightness constancy \uff08\u955c\u5b50\u6216\u8005\u900f\u660e\u7684\u4e1c\u897f\uff09</li> <li>Textureless regions</li> </ul> <p>\u7ed3\u6784\u5149</p> <p>\u5bf9\u4e8e\u6ca1\u6709\u7eb9\u7406\u7684\u533a\u57df(\u6bd4\u5982\u8bf4\u955c\u9762\uff0c\u91d1\u5c5e\u8868\u9762)\uff0c\u7acb\u4f53\u5339\u914d\u6b67\u4e49\u6027\u592a\u5f3a\uff0c\u65e0\u6cd5\u8fdb\u884c\u6df1\u5ea6\u4f30\u8ba1\u3002\u89e3\u51b3\u8be5\u95ee\u9898\u7684\u65b9\u6cd5\u5c31\u662f\u7ed3\u6784\u5149:</p> <p>\u76f8\u673a\u7684\u5149\u5f71\u4f1a\u7ed9\u65e0\u7eb9\u7406\u7684\u533a\u57df\u6253\u4e0a\u5149\u6591\uff0c\u5c5e\u4e8e\u4e3b\u52a8\u65b9\u5f0f\u7684\u6df1\u5ea6\u4f30\u8ba1\u3002</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec8/#multi-view_stereo","title":"Multi-view Stereo","text":"<p>\u548cSfM\u4e00\u6837\uff0c\u6211\u4eec\u73b0\u5728\u8981\u5c06\u4e24\u4e2a\u89c6\u89d2\u7684\u6df1\u5ea6\u4f30\u8ba1\u62d3\u5c55\u5230\u591a\u4e2a\u89c6\u89d2\u3002</p> <p></p> <p>Advantages of MVS</p> <ul> <li> <p>Can match windows using more than 1 neighbor, giving a stronger constraint</p> </li> <li> <p>If you have lots of potential neighbors, can choose the best subset of neighbors to match per reference image</p> </li> <li> <p>Can reconstruct a depth map for each reference frame, and the merge into a complete 3D model</p> </li> </ul> <p>basic idea</p> <p>\u5982\u679c\u6309\u7167\u524d\u8ff0\u65b9\u6cd5\uff0c\u5c06\\(n\\)\u5f20\u56fe\u7247\u4e24\u4e24\u4f9d\u6b21\u5339\u914d\u5e76\u4f9d\u6b21\u8ba1\u7b97\u91cd\u6295\u5f71\u8bef\u5dee\uff0c\u90a3\u4e48\u6548\u7387\u6781\u4f4e\u3002\u56e0\u6b64\u5728\u8fd9\u91cc\u6211\u4eec\u9009\u62e9\u7684\u65b9\u6cd5\u662f\u5047\u8bbe\u5b9e\u9645\u7269\u4f53\u4e2d\u70b9\u7684\u6df1\u5ea6\uff0c\u5728\u6240\u6709\u56fe\u4e2d\u8ba1\u7b97\u91cd\u6295\u5f71\u8bef\u5dee\uff0c\u5373\u4f9d\u6b21\u679a\u4e3e\u3002</p> <p></p> <p>\u6240\u4ee5\u6211\u4eec\u7684\u65b9\u6cd5\u603b\u7ed3\u8d77\u6765\u5c31\u662f\uff1a\u5bf9\u4e8e\u53c2\u8003\u56fe\u50cf\u7684\u6bcf\u4e00\u4e2a\u50cf\u7d20\u7684\u6bcf\u4e00\u4e2a\u53ef\u80fd\u6df1\u5ea6\u503c\uff0c\u53bb\u8ba1\u7b97\u91cd\u6295\u5f71\u8bef\u5dee\u3002\u6211\u4eec\u5f97\u5230\u7684\u8bef\u5dee\u662f\u4e2a\u4e09\u7ef4\u4f53\u7d20\uff0c\u957f\u5bbd\u5bf9\u5e94\u56fe\u50cf\uff0c\u9ad8\u5bf9\u5e94\u6df1\u5ea6\u503c\u4e2a\u6570\uff0c\u79f0\u4f5ccost volumn</p> <p>\u4e3a\u4e86\u5f97\u5230cost volumn, \u6211\u4eec\u91c7\u7528\u5982\u4e0b\u65b9\u6cd5\uff1a</p>"},{"location":"ZJU_CS/3DCV/lec8/#plane-sweep","title":"Plane-Sweep","text":"<p>\u6211\u4eec\u5148\u5047\u8bbe\u53c2\u8003\u56fe\u50cf\u7684\u6240\u6709\u50cf\u7d20\u6df1\u5ea6\u90fd\u662f\u540c\u4e00\u4e2a\u503c\uff0c\u90a3\u4e48\u5bf9\u5e94\u4e09\u7ef4\u7a7a\u95f4\u4e2d\u7684\u4e00\u4e2a\u9762\uff0c\u6211\u4eec\u505a\u7684\u662f\u5c06\u8fd9\u4e2a\u9762\u6295\u5f71\u5230\u5176\u5b83\u7684\u56fe\u50cf\u4e2d\uff0c\u8be5\u6295\u5f71\u662f\u4e2a\u5355\u5e94\u6027\u53d8\u6362\u3002\u636e\u6b64\u8ba1\u7b97\u91cd\u6295\u5f71\u8bef\u5dee\u3002</p> <p>cost volumn\u8bb0\u4e0b\u4e86\u6bcf\u4e2a\u50cf\u7d20\u6bcf\u4e00\u4e2a\u6df1\u5ea6\u5bf9\u5e94\u7684\u8bef\u5dee\uff0c\u6700\u540e\u6211\u4eec\u63d0\u53d6\u6bcf\u4e2a\u50cf\u7d20\u8868\u73b0\u6700\u597d\u7684\u6df1\u5ea6\u503c,\u5f97\u5230\u6df1\u5ea6\u56fe\u3002</p> <p></p> <p>\u5f53\u7136\uff0c\u8ba1\u7b97cost volumn\u5f00\u9500\u662f\u6bd4\u8f83\u5927\u7684, \u6709\u4e00\u79cd\u66f4\u52a0\u9ad8\u6548\u7684\u7acb\u4f53\u5339\u914d\u7b97\u6cd5\uff1a</p>"},{"location":"ZJU_CS/3DCV/lec8/#patchmatch","title":"PatchMatch","text":"<p>\u9996\u5148\u6211\u4eec\u8fdb\u884c\u968f\u673a\u521d\u59cb\u5316\uff0c\u8d4b\u4e88\u56fe\u50cf\u4e2d\u7684\u6bcf\u4e2a\u50cf\u7d20\u4e00\u4e2a\u968f\u673a\u7684\u6df1\u5ea6\u503c\uff0c\u603b\u4f1a\u6709\u90e8\u5206\u50cf\u7d20\u731c\u5bf9\u3002\u5176\u6b21\u6211\u4eec\u5047\u8bbe\u76f8\u90bb\u7684\u50cf\u7d20\u662f\u76f8\u4f3c\u7684\uff0c\u5373\u5728\u4e24\u5f20\u56fe\u50cf\u4e0a\u7684\u89c6\u5dee\u76f8\u4f3c\u3002</p> <p></p> <ul> <li>Initialization: \u968f\u673a\u521d\u59cb\u5316\uff0c\u5927\u90e8\u5206\u662f\u9519\u7684\uff0c\u4f46\u662f\u6709\u53ef\u80fd\u4f1a\u8499\u5bf9\uff0c\u5728\u4e0a\u56fe\u4e2d\u6211\u4eec\u5047\u8bbe\u7ea2\u8272\u662f\u5bf9\u7684\u3002</li> <li>Propagation: \u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u56fe\u50cf\u5757\uff0c\u5c06\u4e0e\u5176\u76f8\u90bb\u7684\u56fe\u50cf\u5757\u8ba1\u7b97\u8bef\u5dee\uff0c\u5982\u679c\u8bef\u5dee\u53d8\u5c0f\uff0c\u5219\u66f4\u65b0\u3002</li> <li>Search: \u867d\u7136\u76f8\u90bb\u7684\u50cf\u7d20\u76f8\u4f3c\u4f46\u662f\u4e0d\u5b8c\u5168\u4e00\u81f4\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u5728\u5c0f\u8303\u56f4\u5185\u8fdb\u884c\u5fae\u8c03\u3002</li> </ul> <p>\u53ef\u4ee5\u628aPatchMatch\u7c7b\u6bd4\u4e3a\u56fe\u50cf\u5339\u914d\u4e2d\u7684\u68af\u5ea6\u4e0b\u964d\u3002</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec8/#3d_reconstruction","title":"3D reconstruction","text":"<p>\u73b0\u5728\u6211\u4eec\u7684\u76ee\u6807\u662f\u4ece\u6df1\u5ea6\u56fe\u5f97\u5230\u5b9e\u9645\u7269\u4f53\u7684\u4e09\u89d2\u7f51\u683c\u3002</p> <p>3D reconsturction Pipeline</p> <ul> <li> <p>Compute depth map per image</p> </li> <li> <p>Fuse the depth maps into a 3D surface</p> </li> <li> <p>Texture mapping</p> </li> </ul>"},{"location":"ZJU_CS/3DCV/lec8/#3d_representations","title":"3D representations","text":""},{"location":"ZJU_CS/3DCV/lec8/#point_cloud","title":"Point Cloud","text":"<p>\u70b9\u4e91\u8868\u793a\u5c31\u662f\u4e00\u7cfb\u5217\u4e09\u7ef4\u70b9\u3002\u4e0a\u4e00\u8bb2\u7684SfM\u6211\u4eec\u5f97\u5230\u7684\u5c31\u662f\u4e09\u7ef4\u70b9\u4e91\u3002</p>"},{"location":"ZJU_CS/3DCV/lec8/#volume","title":"Volume","text":"<p>Occupancy volumn</p> <p></p> <p>\u8be5\u65b9\u6cd5\u4f1a\u6bd4\u70b9\u4e91\u66f4\u7a20\u5bc6\uff0c\u4f46\u662f\u95ee\u9898\u662f\u5360\u7528\u7a7a\u95f4\u5927\uff0c\u9020\u6210\u7a7a\u95f4\u5206\u8fa8\u7387\u8f83\u4f4e\u3002\u4f1a\u7f3a\u5931\u7ec6\u8282\u3002</p> <p>Signed Distance Function(SDF)</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec8/#mesh","title":"Mesh","text":"<p>\u4e00\u822c\u4f7f\u7528\u4e09\u89d2\u7f51\u683c\u3002</p> <p></p>"},{"location":"ZJU_CS/3DCV/lec8/#3d_surface_reconsturction","title":"3D surface reconsturction","text":"<p>\u73b0\u5728\u6211\u4eec\u60f3\u8981\u77e5\u9053\u5982\u4f55\u4ece\u6df1\u5ea6\u56fe\u5f97\u5230\u4e09\u89d2\u7f51\u683c\u3002</p> <p>\u57fa\u672c\u7684\u6b65\u9aa4\u5982\u4e0b\uff1a</p> <ul> <li>Depth maps-&gt;Occupancy volume: Poisson reconsturction</li> <li>Occupancy volume-&gt;mesh: Marching cubes</li> </ul> <p>\u4f46\u662f\u6211\u4eec\u4e3a\u4ec0\u4e48\u8981\u5148\u5c06\u6df1\u5ea6\u56fe\u53d8\u6210\u4f53\u7d20\u8868\u793a\u518d\u53d8\u4e3a\u7f51\u683c\u5462\uff1f</p> <p>\u5c3d\u7ba1volume\u5b58\u50a8\u7a7a\u95f4\u5927\uff0c\u4f46\u662f\u5b83\u662f\u4e00\u4e2a\u89c4\u5219\u7684\u6570\u636e\uff0c\u975e\u5e38\u4fbf\u4e8e\u8ba1\u7b97\u673a\u5904\u7406\uff0c\u5e76\u4e14\u53ef\u4ee5\u5f88\u597d\u5730\u53bb\u566a\u3002</p>"},{"location":"ZJU_CS/3DCV/lec8/#poisson_reconstruction","title":"Poisson Reconstruction","text":"<p>\u6cca\u677e\u91cd\u5efa\u662f\u4ece\u6df1\u5ea6\u56fe\u5230\u4e09\u7ef4\u4f53\u7d20\u7684\u4e00\u4e2a\u8fc7\u7a0b\u3002</p> <p>\u9996\u5148\u5c06\u6df1\u5ea6\u56fe\u8f6c\u5316\u4e3a\u70b9\u4e91\u3002</p> <p></p> <p>\u8fd9\u65f6\u5019\u6211\u4eec\u5f97\u5230\u4e86\u4e00\u5806\u70b9\uff0c\u5176\u5b9e\u8fd9\u4e9b\u70b9\u5df2\u7ecf\u8fd1\u4f3c\u6784\u6210\u4e86\u4e00\u4e2a\u4e09\u7ef4\u8868\u9762\uff0c\u53ea\u662f\u6bd4\u8f83noisy\u3002</p> <p></p> <p>\u7b2c\u4e8c\u6b65\uff0c\u6211\u4eec\u8981\u8ba1\u7b97\u8fd9\u5806\u5206\u5e03\u5728\u8868\u9762\u9644\u8fd1\u7684\u4e09\u7ef4\u70b9\u5404\u4e2a\u5c40\u90e8\u7684\u6cd5\u5411\uff0c\u53ef\u4ee5\u5229\u7528\u4e3b\u6210\u5206\u5206\u6790\uff0c\u5bf9\u5e94\u5c0f\u7279\u5f81\u503c\u7684\u7279\u5f81\u5411\u91cf\u5373\u4e3a\u5c40\u90e8\u8868\u9762\u6cd5\u5411\u3002</p> <p>\u7b2c\u4e09\u6b65\uff0c\u6211\u4eec\u6839\u636e\u5f97\u5230\u7684\u6cd5\u5411\u6784\u5efa0-1\u7684\u4f53\u7d20,\u5373\u7528\u4f53\u7d20\u62df\u5408\u70b9\u4e91\uff0c\u4f7f\u5f970-1\u4ea4\u754c\u7684\u5730\u65b9\u5c31\u662f\u70b9\u4e91\u6240\u5728\u4e4b\u5904\u3002\u6211\u4eec\u53ef\u4ee5\u5b9a\u4e49\u4e00\u4e2a\u4f18\u5316\u95ee\u9898\uff1a\u4f18\u5316\u53d8\u91cf\u5c31\u662f\u6bcf\u4e2a\u4f53\u7d20\u7684\u503c\uff0c\u4e3a0\u62161\u3002</p> <p></p> <p>\u5bf9\u4e8e\u76ee\u6807\u51fd\u6570\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u601d\u8003\uff1a\u5bf9\u4e8e\u4f53\u7d20\u7684\u8fb9\u754c\uff0c\u7269\u4f53\u5185\u90e8\u503c\u4e3a1\uff0c\u5916\u90e8\u503c\u4e3a0\uff0c\u5219\u8be5\u5904\u7684\u68af\u5ea6\u5c31\u6cbf\u7740\u8868\u9762\u7684\u6cd5\u5411\u3002\u800c\u6211\u4eec\u53c8\u5df2\u77e5\u6cd5\u5411\uff0c\u56e0\u6b64\u53ef\u4ee5\u4f18\u5316\u68af\u5ea6\u4e0e\u6cd5\u5411\u4e4b\u95f4\u7684Loss\u3002</p> <p></p> <p>Poisson Reconstruction</p> <ul> <li> <p>Represent the oriented points by a vector field \\(V\\)</p> </li> <li> <p>Find the function \\(X\\) (\u4f53\u7d20\u573a) whose gradient best approximates \\(V\\) (\u68af\u5ea6\u5411\u91cf\u573a) by minimizing: \\(\\Vert \\nabla_{X}-V\\Vert^2\\)</p> </li> <li> <p>Solved by Poisson equation</p> </li> </ul> Tips <p>Poisson\u91cd\u5efa\u7684\u63a8\u5bfc\u8fc7\u7a0b</p> <ol> <li>\u6cd5\u5411\u91cf\u573a\u7684\u5b9a\u4e49\uff1a\u5047\u8bbe\u70b9\u4e91\u4e0a\u6bcf\u4e2a\u70b9\u90fd\u6709\u4e00\u4e2a\u6cd5\u5411\u91cf\uff0c\u6211\u4eec\u53ef\u4ee5\u6784\u5efa\u4e00\u4e2a\u7531\u8fd9\u4e9b\u6cd5\u5411\u91cf\u7ec4\u6210\u7684\u6cd5\u5411\u91cf\u573a\\(\\vec{N}\\)\u3002</li> <li>\u6307\u793a\u51fd\u6570\u7684\u5b9a\u4e49\uff1a\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u6307\u793a\u51fd\u6570\\(\\chi\\)\uff0c\u5b83\u7684\u68af\u5ea6\u4ee3\u8868\u91cd\u5efa\u7684\u8868\u9762\u3002\u7406\u60f3\u60c5\u51b5\u4e0b\uff0c\u6307\u793a\u51fd\u6570\u7684\u68af\u5ea6\u65b9\u5411\u5e94\u4e0e\u6cd5\u5411\u91cf\u573a\u4e00\u81f4\u3002</li> <li>Poisson\u65b9\u7a0b\u7684\u5f62\u6210\uff1a\u901a\u8fc7\u5e94\u7528\u62c9\u666e\u62c9\u65af\u7b97\u5b50\\(\\Delta\\)\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230Poisson\u65b9\u7a0b\uff1a $$ \\Delta \\chi = \\nabla \\cdot \\vec{N} $$ \u8fd9\u4e2a\u65b9\u7a0b\u7684\u7269\u7406\u610f\u4e49\u662f\uff0c\u6307\u793a\u51fd\u6570\\chi\u7684\u68af\u5ea6\u4e0e\u8f93\u5165\u7684\u6cd5\u5411\u91cf\u573a\\(\\vec{N}\\)\u4e00\u81f4\u3002\u901a\u8fc7\u6c42\u89e3\u8be5\u65b9\u7a0b\uff0c\u80fd\u591f\u5f97\u5230\u4e00\u4e2a\u7b26\u5408\u8f93\u5165\u6cd5\u5411\u91cf\u573a\u7684\u51fd\u6570\u3002</li> <li>\u79bb\u6563\u5316\u4e0e\u6c42\u89e3:\u5728\u8ba1\u7b97\u4e2d\uff0c\u70b9\u4e91\u88ab\u79bb\u6563\u5316\u5e76\u6295\u5f71\u5230\u4e09\u7ef4\u7f51\u683c\u4e0a\u3002\u7136\u540e\uff0c\u4f7f\u7528\u79bb\u6563\u7684\u6709\u9650\u5143\u65b9\u6cd5\u6216\u591a\u5206\u8fa8\u7387\u65b9\u6cd5\uff0c\u5c06Poisson\u65b9\u7a0b\u8f6c\u5316\u4e3a\u79bb\u6563\u7684\u7ebf\u6027\u65b9\u7a0b\u7ec4\u3002</li> <li>\u6c42\u89e3\u7ebf\u6027\u65b9\u7a0b\u7ec4:\u79bb\u6563\u5316\u4e4b\u540e\uff0c\u7ebf\u6027\u65b9\u7a0b\u7ec4\u53ef\u4ee5\u901a\u8fc7\u6570\u503c\u65b9\u6cd5\uff08\u5982\u5171\u8f6d\u68af\u5ea6\u6cd5\uff09\u6c42\u89e3\uff0c\u5f97\u5230\u6307\u793a\u51fd\u6570\\(\\chi\\)\u7684\u89e3\u3002</li> <li>\u7b49\u503c\u9762\u63d0\u53d6:\u4e00\u65e6\u5f97\u5230\u4e86\u6307\u793a\u51fd\u6570\\(\\chi\\)\uff0c\u53ef\u4ee5\u901a\u8fc7\u63d0\u53d6\\(\\chi = 0.5\\)\u7b49\u503c\u9762\uff0c\u83b7\u5f97\u91cd\u5efa\u7684\u4e09\u7ef4\u8868\u9762\u3002\u8fd9\u901a\u5e38\u4f7f\u7528Marching Cubes\u7b97\u6cd5\u5c06\u7b49\u503c\u9762\u8f6c\u5316\u4e3a\u4e09\u89d2\u7f51\u683c\u8868\u793a\u3002</li> </ol>"},{"location":"ZJU_CS/3DCV/lec8/#marching_cubes","title":"Marching Cubes","text":"<p>\u73b0\u5728\u6211\u4eec\u9700\u8981\u4ece\u4f53\u7d20\u8868\u793a\u4e2d\u63d0\u53d6\u8868\u9762\u4e09\u7ef4\u7f51\u683c\u3002</p> <p>\u8fd9\u4e2a\u505a\u6cd5\u5176\u5b9e\u5f88\u76f4\u89c2\uff0c\u5c31\u662f\u5bfb\u627e\u4f53\u7d20\u4e2d\u67090\u548c1\u8f6c\u5316\u7684\u5730\u65b9\uff0c\u63d0\u53d6\u4e2d\u70b9\uff0c\u751f\u6210\u4e09\u89d2\u9762\u7247\u3002\u4e0b\u56fe\u5f88\u76f4\u89c2\u5730\u5c55\u793a\u4e8c\u7ef4\u548c\u4e09\u7ef4\u7684\u60c5\u51b5\u3002</p> <p></p> <p></p>"},{"location":"ZJU_CS/3DCV/lec8/#texture_mapping","title":"Texture Mapping","text":"<p>\u76ee\u524d\u6211\u4eec\u5f97\u5230\u7684\u4e09\u89d2\u7f51\u683c\u662f\u6ca1\u6709\u989c\u8272\u7684\uff0ctexture mapping(\u7eb9\u7406\u6620\u5c04)\u505a\u7684\u5c31\u662f\u5f80mesh\u4e0a\u4e0a\u8272\u3002</p> <p>\u5bf9\u4e8e\u4e09\u7ef4\u7269\u4f53\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5176\u8868\u9762\u526a\u5f00\uff0c\u94fa\u5e73\u6210\u4e8c\u7ef4\u56fe\u50cf\uff0c\u5c31\u5f62\u6210\u4e86\u7eb9\u7406\u56fe\u3002\u7eb9\u7406\u56fe\u7684\u6bcf\u4e00\u4e2a\u50cf\u7d20\u4e0e\u4e09\u7ef4\u8868\u9762\u6709\u4e00\u4e00\u5bf9\u5e94\u7684\u5173\u7cfb\u3002\u5bf9\u4e8e\u4e09\u89d2\u7f51\u683c\u7684\u6bcf\u4e00\u4e2a\u9876\u70b9\uff0c\u6211\u4eec\u4e0d\u4ec5\u6709\u5728\u4e09\u7ef4\u7a7a\u95f4\u4e2d\u7684\u5750\u6807\uff0c\u6211\u4eec\u540c\u65f6\u8bb0\u5f55\u8be5\u9876\u70b9\u5728\u7eb9\u7406\u56fe\u4e2d\u7684\u50cf\u7d20\u5750\u6807\u3002\u800c\u9762\u7247\u91cc\u7684\u70b9\u5219\u901a\u8fc7\u9876\u70b9\u63d2\u503c\u5f97\u5230\u3002</p>"},{"location":"ZJU_CS/ADS/","title":"ADS","text":"<p>\u672c\u8bfe\u662f23-24 spring-summer\u8bfe\u7a0b\uff0c\u7531\u738b\u707f\u8001\u5e08\u6388\u8bfe\u3002</p> <p>\u6210\u7ee9\u5360\u6bd4\uff1a10%Exercise + 10% Discussion + 30%lab + 10% midexam + 40%\u671f\u672b</p>"},{"location":"ZJU_CS/ADS/#_1","title":"\u8d44\u6e90","text":"<ul> <li>xiulao/ADS</li> <li>\u5386\u5e74\u9898</li> </ul> <p>\u7533\u660e\uff1aads\u7b14\u8bb0\u662f\u5728\u4fee\u4f6c\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u4fee\u6539\u7684\uff0c\u611f\u8c22\u5f00\u6e90\ud83d\ude4f</p> <p>\u5efa\u8bae\uff1aads\u8fd8\u662f\u591a\u770b\u770bppt\u7684\uff0ccyll\u8fd9\u4e00\u5957\u975e\u5e38\u95ed\u6e90\uff0c\u4f60\u4e0d\u770b\u53ef\u80fd\u4f1a\u9519\u8fc7\u5f88\u591a\u8003\u8bd5\u7684\u4e1c\u897f\u3002</p>"},{"location":"ZJU_CS/ADS/code/","title":"\u9762\u5411\u4ee3\u7801\u7684\u6574\u7406","text":""},{"location":"ZJU_CS/ADS/code/#binomial_heap","title":"binomial heap","text":""},{"location":"ZJU_CS/ADS/code/#definition","title":"Definition","text":"<pre><code>typedef struct BinNode *Position;\ntypedef struct Collection *BinQueue;\ntypedef struct BinNode *BinTree;  /* missing from p.176 */\n\nstruct BinNode { \n    ElementType     Element;\n    Position        LeftChild;\n    Position        NextSibling;\n};\n\nstruct Collection { \n    int         CurrentSize;  /* total number of nodes */\n    BinTree TheTrees[ MaxTrees ];\n};\n</code></pre>"},{"location":"ZJU_CS/ADS/code/#merge","title":"Merge","text":"<pre><code>BinQueue  Merge( BinQueue H1, BinQueue H2 ) {   BinTree T1, T2, Carry = NULL;   \n    int i, j;\n    if ( H1-&gt;CurrentSize + H2-&gt; CurrentSize &gt; Capacity )  ErrorMessage();\n    H1-&gt;CurrentSize += H2-&gt; CurrentSize;\n    for ( i=0, j=1; j&lt;= H1-&gt;CurrentSize; i++, j*=2 ) {\n        T1 = H1-&gt;TheTrees[i]; T2 = H2-&gt;TheTrees[i]; /*current trees */\n        switch( 4*!!Carry + 2*!!T2 + !!T1 ) { \n        case 0: /* 000 */\n        case 1: /* 001 */  break;   \n        case 2: /* 010 */  H1-&gt;TheTrees[i] = T2; H2-&gt;TheTrees[i] = NULL; break;\n        case 4: /* 100 */  H1-&gt;TheTrees[i] = Carry; Carry = NULL; break;\n        case 3: /* 011 */  Carry = CombineTrees( T1, T2 );\n                        H1-&gt;TheTrees[i] = H2-&gt;TheTrees[i] = NULL; break;\n        case 5: /* 101 */  Carry = CombineTrees( T1, Carry );\n                        H1-&gt;TheTrees[i] = NULL; break;\n        case 6: /* 110 */  Carry = CombineTrees( T2, Carry );\n                        H2-&gt;TheTrees[i] = NULL; break;\n        case 7: /* 111 */  H1-&gt;TheTrees[i] = Carry; \n                        Carry = CombineTrees( T1, T2 ); \n                        H2-&gt;TheTrees[i] = NULL; break;\n        } /* end switch */\n    } /* end for-loop */\n    return H1;\n}\n</code></pre>"},{"location":"ZJU_CS/ADS/code/#deletemin","title":"DeleteMin","text":"<pre><code>ElementType  DeleteMin( BinQueue H ) {  BinQueue DeletedQueue; \n    Position DeletedTree, OldRoot;\n    ElementType MinItem = Infinity;  /* the minimum item to be returned */  \n    int i, j, MinTree; /* MinTree is the index of the tree with the minimum item */\n\n    if ( IsEmpty( H ) )  {  PrintErrorMessage();  return \u2013Infinity; }\n\n    for ( i = 0; i &lt; MaxTrees; i++) {  /* Step 1: find the minimum item */\n        if( H-&gt;TheTrees[i] &amp;&amp; H-&gt;TheTrees[i]-&gt;Element &lt; MinItem ) { \n        MinItem = H-&gt;TheTrees[i]-&gt;Element;  MinTree = i;    } /* end if */\n    } /* end for-i-loop */\n    DeletedTree = H-&gt;TheTrees[ MinTree ];  \n    H-&gt;TheTrees[ MinTree ] = NULL;   /* Step 2: remove the MinTree from H =&gt; H\u2019 */ \n    OldRoot = DeletedTree;   /* Step 3.1: remove the root */ \n    DeletedTree = DeletedTree-&gt;LeftChild;   free(OldRoot);\n    DeletedQueue = Initialize();   /* Step 3.2: create H\u201d */ \n    DeletedQueue-&gt;CurrentSize = ( 1&lt;&lt;MinTree ) \u2013 1;  /* 2MinTree \u2013 1 */\n    for ( j = MinTree \u2013 1; j &gt;= 0; j \u2013 \u2013 ) {  \n        DeletedQueue-&gt;TheTrees[j] = DeletedTree;\n        DeletedTree = DeletedTree-&gt;NextSibling;\n        DeletedQueue-&gt;TheTrees[j]-&gt;NextSibling = NULL;\n    } /* end for-j-loop */\n    H-&gt;CurrentSize  \u2013 = DeletedQueue-&gt;CurrentSize + 1;\n    H = Merge( H, DeletedQueue ); /* Step 4: merge H\u2019 and H\u201d */ \n    return MinItem;\n}\n</code></pre>"},{"location":"ZJU_CS/ADS/exam/","title":"\u5386\u5e74\u5377\u590d\u4e60","text":""},{"location":"ZJU_CS/ADS/exam/#_2","title":"\u6570\u636e\u7ed3\u6784\u590d\u6742\u5ea6\u5206\u6790\u6c47\u603b","text":"\u6570\u636e\u7ed3\u6784 \u67e5\u627e \u63d2\u5165 \u5220\u9664 \u5907\u6ce8 AVL tree O(logn) O(logn) O(2logn) \u6700\u574f\u60c5\u51b5\u4e5f\u4f1a\u5728O(logn) Red-Black tree O(logn) O(logn) O(3) \u63d2\u5165\u53ef\u80fd\u4f1a\u6bd4AVL\u6162\uff08\u6700\u957f\u8def\u662f$2\u00b7H -1 $\uff09 B plus tree O(logn) O(logn) O(logn) \u9002\u5408\u78c1\u76d8\u5b58\u50a8 Leftist Tree O(logn) O(logn) O(logn) Speed up merging in O(N). \u6570\u636e\u7ed3\u6784 FindMin DeleteMin Insert Merge Binomial Heap O(logn) / O(1) O(logn) O(1) O(logn)"},{"location":"ZJU_CS/ADS/exam/#potential_function","title":"Potential function","text":""},{"location":"ZJU_CS/ADS/exam/#avl_splay_tree","title":"AVL &amp; splay Tree","text":""},{"location":"ZJU_CS/ADS/exam/#red-black_tree_bplus_tree","title":"Red-Black tree &amp; bplus tree","text":"<p>\u5177\u4f53\u7ea2\u9ed1\u6811\u7684\u903b\u8f91\u8003\u524d\u4e00\u5b9a\u68b3\u7406\u4e00\u904d</p> <p></p> <p>And we can derive that a red-black tree with black height H has at least 2\u200bH\u200b\u200b\u22121 internal nodes.</p> <p></p>"},{"location":"ZJU_CS/ADS/exam/#invert_file_index","title":"Invert file index","text":"<p>\u77e5\u8bc6\u70b9\u975e\u5e38\u597d\u7406\u89e3\uff0c\u8003\u524d\u53ef\u4ee5\u518d\u770b\u773c\u6982\u5ff5</p> <p>\u4e24\u79cd\u8ba1\u7b97\u65b9\u5f0f\u7684\u8003\u5bdf</p> <p></p>"},{"location":"ZJU_CS/ADS/exam/#binomial_heap","title":"binomial heap","text":""},{"location":"ZJU_CS/ADS/exam/#skew_heap_leftist_heap","title":"skew heap &amp; leftist heap","text":"<ul> <li>leftist heap: Speed up merging in O(N). \uff08\u4e00\u5b9a\u6ce8\u610f\u5b9a\u4e49\uff09</li> <li>skew heap: Any M consecutive operations take at most O(M log N) time. \uff08\u65e0\u8111\u4ea4\u6362\uff09 </li> </ul>"},{"location":"ZJU_CS/ADS/exam/#backtrack","title":"backtrack","text":"<p>alpha-belta\u526a\u679d\uff08computer-human\uff09\u3001\u516b\u7687\u540e\u3001Turnpike Reconstruction Problem\uff08\u672c\u8d28\u4e5f\u662f\u4e00\u4e2a\u641c\u7d22\u6811\uff0c\u660e\u786e\u95ee\u9898\u7684\u5b9a\u4e49\u5c31\u4f1a\u505a\u4e86\uff09</p> <p></p>"},{"location":"ZJU_CS/ADS/exam/#divided_and_conquer","title":"divided and conquer","text":"<p>\u6700\u540e\u4e00\u6761\\(r&gt;1\\) </p> <p> </p>"},{"location":"ZJU_CS/ADS/exam/#dp","title":"DP \u95ee\u9898","text":""},{"location":"ZJU_CS/ADS/exam/#greedy","title":"Greedy \u7b97\u6cd5","text":"<p>\u5b66\u4e60\u638c\u63e1\u54c8\u592b\u66fc\u6811\u5927\u7ed3\u6784\u4e0e\u65b9\u5f0f</p>"},{"location":"ZJU_CS/ADS/exam/#parallel_computed","title":"Parallel computed","text":"<ul> <li>B() \u81ea\u5e95\u5411\u4e0a\u8ba1\u7b97\u3002</li> <li> <p>C() \u81ea\u9876\u5411\u4e0b\u8ba1\u7b97\u3002</p> </li> <li> <p>CRCW\uff08Concurrent Read Concurrent Write\uff09\u4e0d\u80fd\u540c\u65f6\u8bfb\u5199\u4e00\u4e2a\u4f4d\u7f6e </p> </li> <li>CREW\uff08Concurrent Read Exclusive Write\uff09\u53ef\u4ee5\u540c\u65f6\u8bfb\uff0c\u4f46\u4e0d\u80fd\u540c\u65f6\u5199 </li> <li>EREW\uff08Exclusive Read Exclusive Write\uff09\u53ef\u4ee5\u540c\u65f6\u8bfb\u5199</li> </ul> <p></p> <p> </p>"},{"location":"ZJU_CS/ADS/exam/#external_sorting","title":"External Sorting","text":"<p>num of pass = \\(1+log_{k}^{N/M}\\)</p> <p>\u666e\u901a\u653e\u7f6e\u9700\u89812k tape \u6590\u6ce2\u7eb3\u5207\u6570\u5217\u5b89\u6392run k+1 tape</p> <p>\u53ef\u4ee5\u5229\u7528replace section\u7684\u65b9\u5f0f\uff0c\u83b7\u5f97longer\u7684run length</p> <p>k-way merge\uff1a 2k input buffers, 2 output buffers</p> <p></p> <p>\u9006\u5929\u7684\u5751\u4eba\u9898\u76ee </p>"},{"location":"ZJU_CS/ADS/homework/","title":"ADS Homework Review","text":"<p>PTA homework of ZJU Advanced Data Structure and Algorithm, 2024 Spring &amp; Summer.</p>"},{"location":"ZJU_CS/ADS/homework/#hw1","title":"Hw1","text":"<p>Q2-1. If the depth of an AVL tree is 6 (the depth of an empty tree is defined to be -1), then the minimum possible number of nodes in this tree is:</p> <p>A. 13</p> <p>B. 17</p> <p>C. 20</p> <p>D. 33</p> Answer <p>D\u3002</p> \\[ n_h=h_{h-1}+h_{n-2}+1 \\] depth -1 0 1 2 3 4 5 6 nodes 0 1 2 4 7 12 20 33 <p>Q2-2. Insert 2, 1, 4, 5, 9, 3, 6, 7 into an initially empty AVL tree. Which one of the following statements is FALSE?</p> <p>A. 4 is the root</p> <p>B. 3 and 7 are siblings</p> <p>C. 2 and 6 are siblings</p> <p>D. 9 is the parent of 7</p> Answer <p>B\u3002\u6700\u7ec8\u7ed3\u679c\u5982\u4e0b\u56fe\u3002</p> <p></p> <p>\u5982\u679c\u641e\u4e0d\u6e05\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u5229\u7528\u4e00\u4e0b AVL \u6811\u6a21\u62df\u3002</p> <p>Q2-3. For the result of accessing the keys 3, 9, 1, 5 in order in the splay tree in the following figure, which one of the following statements is FALSE? </p> <p>A. 5 is the root</p> <p>B. 1 and 9 are siblings</p> <p>C. 6 and 10 are siblings</p> <p>D. 3 is the parent of 4</p> Answer <p>D\u3002\u6700\u7ec8\u7ed3\u679c\u5982\u4e0b\u56fe</p> <p></p> <p>Q2-4. When doing amortized analysis, which one of the following statements is FALSE?</p> <p>A. Aggregate analysis shows that for all \\(n\\), a sequence of \\(n\\) operations takes worst-case time \\(T(n)\\) in total. Then the amortized cost per operation is therefore \\(T(n)/n\\)</p> <p>B. For potential method, a good potential function should always assume its maximum at the start of the sequence</p> <p>C. For accounting method, when an operation's amortized cost exceeds its actual cost, we save the difference as credit to pay for later operations whose amortized cost is less than their actual cost</p> <p>D. The difference between aggregate analysis and accounting method is that the later one assumes that the amortized costs of the operations may differ from each other</p> Answer <p>B\u3002B\u5e94\u8be5\u662fminimum\u3002</p> <p>Q2-5. Consider the following buffer management problem. Initially the buffer size (the number of blocks) is one. Each block can accommodate exactly one item. As soon as a new item arrives, check if there is an available block. If yes, put the item into the block, induced a cost of one. Otherwise, the buffer size is doubled, and then the item is able to put into. Moreover, the old items have to be moved into the new buffer so it costs \\(k+1\\) to make this insertion, where \\(k\\) is the number of old items. Clearly, if there are \\(N\\) items, the worst-case cost for one insertion can be \\(\\Omega(N)\\). To show that the average cost is \\(O(1)\\), let us turn to the amortized analysis. To simplify the problem, assume that the buffer is full after all the \\(N\\) items are placed. Which of the following potential functions works?</p> <p>A. The number of items currently in the buffer</p> <p>B. The opposite number of items currently in the buffer</p> <p>C. The number of available blocks currently in the buffer</p> <p>D. The opposite number of available blocks in the buffer</p> Answer <p>D\u3002\u5982\u4e0b\u56fe\u3002</p> <p></p>"},{"location":"ZJU_CS/ADS/homework/#hw2","title":"Hw2","text":"<p>Q1-1. A 2-3 tree with 3 nonleaf nodes must have 18 keys at most. (T/F)</p> Answer <p>T\u3002\u5fc5\u7136\u4e00\u6839\u4e24\u4e2d\u95f4\uff0c233=18\u3002</p> <p>Q2-1 In the red-black tree that results after successively inserting the keys 41; 38; 31; 12; 19; 8 into an initially empty red-black tree, which one of the following statements is FALSE?</p> <p>A. 38 is the root</p> <p>B. 19 and 41 are siblings, and they are both red</p> <p>C. 12 and 31 are siblings, and they are both black</p> <p>D. 8 is red</p> Answer <p>B\u3002\u6700\u7ec8\u7ed3\u679c\u5982\u4e0b\u56fe\u3002</p> <p></p> <p>\u5982\u679c\u641e\u4e0d\u6e05\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u5229\u7528\u4e00\u4e0b RB \u6811\u6a21\u62df\u3002</p> <p>Q2-2. After deleting 15 from the red-black tree given in the figure, which one of the following statements must be FALSE?</p> <p></p> <p>A. 11 is the parent of 17, and 11 is black</p> <p>B. 17 is the parent of 11, and 11 is red</p> <p>C. 11 is the parent of 17, and 11 is red</p> <p>D. 17 is the parent of 11, and 17 is black</p> Answer <p>C\u3002\u53ef\u80fd 11 \u9876\u4e0a\u53bb\uff0c\u5219 11 \u4e3a\u9ed1\u300117 \u4e3a\u7ea2\u3002</p> <p>\u4e5f\u53ef\u80fd 17 \u9876\u4e0a\u53bb\uff0c\u5219 17 \u4e3a\u9ed1\u300111 \u4e3a\u7ea2\u3002</p> <p>Q2-3. Insert 3, 1, 4, 5, 9, 2, 6, 8, 7, 0 into an initially empty 2-3 tree (with splitting). Which one of the following statements is FALSE?</p> <p>A. 7 and 8 are in the same node</p> <p>B. the parent of the node containing 5 has 3 children</p> <p>C. the first key stored in the root is 6</p> <p>D. there are 5 leaf nodes</p> Answer <p>A\u3002\u6700\u7ec8\u7ed3\u679c\u5982\u4e0b\u56fe</p> <p></p> <p>\u5982\u679c\u641e\u4e0d\u6e05\u8fc7\u7a0b\uff0c\u4e0d\u5efa\u8bae\u4f7f\u7528\u5bf9\u5e94\u7f51\u7ad9\u7684 B+ \u6811\u6a21\u62df\uff0c\u5b83\u90a3\u91cc\u7684 B+ \u6811\u7684\u5b9a\u4e49\u4f3c\u4e4e\u548c ads \u6709\u6240\u4e0d\u540c\uff08\u91c7\u7528\u7684\u53ef\u80fd\u662f\u6570\u636e\u5e93\u7684\u5b9a\u4e49\uff09\u3002</p> <p>Q2-4. After deleting 9 from the 2-3 tree given in the figure, which one of the following statements is FALSE?</p> <p></p> <p>A. the root is full</p> <p>B. the second key stored in the root is 6</p> <p>C. 6 and 8 are in the same node</p> <p>D. 6 and 5 are in the same node</p> Answer <p>D\u3002\u6700\u7ec8\u7ed3\u679c\u5982\u4e0b\u56fe\u3002</p> <p></p> <p>Q2-5. Which of the following statements concerning a B+ tree of order \\(M\\) is TRUE?</p> <p>A. the root always has between 2 and \\(M\\) children</p> <p>B. not all leaves are at the same depth</p> <p>C. leaves and nonleaf nodes have some key values in common</p> <p>D. all nonleaf nodes have between \\(\\lceil M/2\\rceil\\) and \\(M\\) children</p> Answer <p>C\u3002A\uff0c\u8003\u8651\u6839\u4e3a\u53f6\u3002B\uff0c\u6240\u6709\u53f6\u5fc5\u7136\u540c\u6df1\u3002D\uff0c\u8003\u8651\u6839\u3002</p>"},{"location":"ZJU_CS/ADS/homework/#hw3","title":"Hw3","text":"<p>Q1-1. In distributed indexing, document-partitioned strategy is to store on each node all the documents that contain the terms in a certain range. (T/F)</p> Answer <p>F\u3002\u8fd9\u662f term-partitioned \u7b56\u7565\u3002</p> <p>Q1-2. When evaluating the performance of data retrieval, it is important to measure the relevancy of the answer set. (T/F)</p> Answer <p>F\u3002\u53ec\u56de\u7387\u548c\u6574\u4e2a\u7b54\u6848\u96c6\u7684\u76f8\u5173\u6027\u65e0\u5173\u3002</p> <p>Q1-3. Precision is more important than recall when evaluating the explosive detection in airport security. (T/F)</p> Answer <p>F\u3002\u5b89\u5168\u81f3\u4e0a\uff0c\u5c3d\u91cf\u90fd\u53d1\u73b0\u3002</p> <p>Q1-4. While accessing a term by hashing in an inverted file index, range searches are expensive. (T/F)</p> Answer <p>T\u3002</p> <p>Q2-1. When measuring the relevancy of the answer set, if the precision is high but the recall is low, it means that:</p> <p>A. most of the relevant documents are retrieved, but too many irrelevant documents are returned as well</p> <p>B. most of the retrieved documents are relevant, but still a lot of relevant documents are missed</p> <p>C. most of the relevant documents are retrieved, but the benchmark set is not large enough</p> <p>D. most of the retrieved documents are relevant, but the benchmark set is not large enough</p> Answer <p>B\u3002</p> <p>Q2-2. Which of the following is NOT concerned for measuring a search engine?</p> <p>A. How fast does it index</p> <p>B. How fast does it search</p> <p>C. How friendly is the interface</p> <p>D. How relevant is the answer set</p> Answer <p>C\u3002\u7406\u5de5\u79d1\u94a2\u94c1\u76f4\u7537\u4e0d\u9700\u8981\u8003\u8651\u7528\u6237\u7528\u7740\u8212\u670d\u4e0d\u8212\u670d\uff0c\u5355\u5200\u76f4\u5165\u770b\u6548\u679c\u3002</p> <p>Q2-3 There are 28000 documents in the database. The statistic data for one query are shown in the following table. The recall is: __</p> Relevant Irrelevant Retrieved 4000 12000 Not Retrieved 8000 4000 <p>A. 14%</p> <p>B. 25%</p> <p>C. 33%</p> <p>D. 50%</p> Answer <p>C\u3002</p> \\[     recall = 4000 / (4000+8000) = 33\\% \\]"},{"location":"ZJU_CS/ADS/homework/#hw4","title":"Hw4","text":"<p>Q1-1. The result of inserting keys \\(1\\) to \\(2^k-1\\) for any \\(k&gt;4\\) in order into an initially empty skew heap is always a full binary tree. (T/F)</p> Answer <p>T\u3002</p> <p>Q1-2. The right path of a skew heap can be arbitrarily long. (T/F)</p> Answer <p>T\u3002skew heap \u53ea\u6709\u8f7b\u7ed3\u70b9\u53d7\u7c7b\u4f3c leftist heap \u7684\u9650\u5236\u3002</p> <p>\u76f8\u5bf9\u800c\u8a00\uff0cleftist heap \u5c31\u4e0d\u80fd\u8fd9\u4e48\u4efb\u610f\u4e86\uff0c\u5b83\u53d7 \\(\\log N\\) \u9650\u5236\u3002</p> <p>Q2-1. The right path of a skew heap can be arbitrarily long.</p> <p></p> <p>A. 2 is the root with 11 being its right child</p> <p>B. the depths of 9 and 12 are the same</p> <p>C. 21 is the deepest node with 11 being its parent</p> <p>D. the null path length of 4 is less than that of 2</p> Answer <p>D\u3002\u90fd\u662f2\uff0c\u5982\u4e0b\u56fe</p> <p></p> <p>Q2-2. We can perform BuildHeap for leftist heaps by considering each element as a one-node leftist heap, placing all these heaps on a queue, and performing the following step: Until only one heap is on the queue,\uff0c dequeue two heaps, merge them, and enqueue the result. Which one of the following statements is FALSE?</p> <p>A. in the \\(k\\)-th run, \\(\\lceil N/2k\\rceil\\) leftist heaps are formed, each contains \\(2k\\)  nodes</p> <p>B. the worst case is when \\(N=2K\\) for some integer \\(K\\)</p> <p>C. the time complexity \\(T(N)=O( \\frac N 2 \\log 2^0 - \\frac {N} {2^2}\\log 2^1\\frac{N}{2^3}\\log 2^2 + \\cdots + \\frac {N} {2^K}\\log 2^{K-1})\\)  for some integer K so that \\(N=2K\\)</p> <p>D. the worst case time complexity of this algorithm is \\(\\Theta(N\\log N)\\)</p> Answer <p>D\u3002\u6839\u636e C\uff0c\u53ef\u5f97 \\(T=O(N)\\)\u3002</p> <p>Q2-3. Insert keys 1 to 15 in order into an initially empty skew heap. Which one of the following statements is FALSE?</p> <p>A. the resulting tree is a complete binary tree</p> <p>B. there are 6 leaf nodes</p> <p>C. 6 is the left child of 2</p> <p>D. 11 is the right child of 7</p> Answer <p>B\u3002\u6709 8 \u4e2a\u53f6\u7ed3\u70b9\u3002\u5982\u4e0b\u56fe</p> <p></p> <p>Q2-4. Merge the two skew heaps in the following figure. Which one of the following statements is FALSE?</p> <p></p> <p>A. 15 is the right child of 8</p> <p>B. 14 is the right child of 6</p> <p>C. 1 is the root</p> <p>D. 9 is the right child of 3</p> Answer <p>A\u300215 \u662f 8 \u7684\u5de6\u5b50\u7ed3\u70b9\u3002\u5982\u4e0b\u56fe</p> <p></p>"},{"location":"ZJU_CS/ADS/homework/#hw5","title":"Hw5","text":"<p>Q2-1. Which of the following binomial trees can represent a binomial queue of size 42?</p> <p>A. \\(B_0B_1B_2B_3B_4B_5\\)</p> <p>B. \\(B_1B_3B_5\\)</p> <p>C. \\(B_1B_5\\)</p> <p>D. \\(B_2B_4\\)</p> Answer <p>B\u3002\\(2^1+2^3+2^3=2+8+32=42\\)</p> <p>Q2-2. For a binomial queue, __ takes a constant time on average.</p> <p>A. merging</p> <p>B. find-max</p> <p>C. delete-min</p> <p>D. insertion</p> Answer <p>D\u3002\u5747\u644a\u90fd\u5e38\u6570\u65f6\u95f4\u4e86\uff0c\u5e73\u5747\u80af\u5b9a\u662f\u5e38\u6570\u65f6\u95f4\u3002</p> <p>find-max \u6bd4\u8f83\u96be\u64cd\u4f5c\uff0cfind-min \u4e5f\u662f\u5e38\u6570\u65f6\u95f4\u3002</p> <p>merge \u548c delete-min \u90fd\u662f \\(O(\\log N)\\)\u3002</p> <p>Q2-3. Merge the two binomial queues in the following figure. Which one of the following statements must be FALSE?</p> <p>A. there are two binomial trees after merging, which are \\(B_2\\) and \\(B_4\\)</p> <p>B. 13 and 15 are the children of 4</p> <p>C. if 23 is a child of 2, then 12 must be another child of 2</p> <p>D. if 4 is a child of 2, then 23 must be another child of 2</p> Answer <p>D\u30024 \u5982\u679c\u662f 2 \u7684\u5b50\u7ed3\u70b9\uff0c\u8bf4\u660e 23 \u5bf9\u5e94\u5b50\u6811\u4fdd\u6301\u4e3a \\(B_2\\)\uff0c\u4e0d\u53c2\u4e0e merge\u3002</p> <p>Q2-4. Delete the minimum number from the given binomial queues in the following figure. Which one of the following statements must be FALSE?</p> <p>A. there are two binomial trees after deletion, which are \\(B_1\\) and \\(B_2\\)</p> <p>B. 11 and 15 can be the children of 4</p> <p>C. 29 can never be the root of any resulting binomial tree</p> <p>D. if 29 is a child of 4, then 15 must be the root of \\(B_1\\)</p> Answer <p>C\u300229-55 \u53ef\u4ee5\u81ea\u6210 \\(B_1\\)\uff0c\u4e0d\u53c2\u4e0e merge\u3002</p>"},{"location":"ZJU_CS/ADS/homework/#hw6","title":"Hw6","text":"<p>Q2-1. In the Tic-tac-toe game, a \"goodness\" function of a position is defined as  \\(f(P)=W_{computer}-W_{human}\\), where \\(W\\) is the number of potential wins at position \\(P\\).</p> <p>In the following figure, \\(O\\) represents the computer and \\(X\\) the human. What is the goodness of the position of the figure?</p> <p>A. -1</p> <p>B. 0</p> <p>C. 4</p> <p>D. 5</p> Answer <p>B\u3002=3-3=0</p> <p>Q2-2. Given the following game tree, which node is the first one to be pruned with \\(\\alpha-\\beta\\) pruning algorithm?</p> <p>A. a</p> <p>B. b</p> <p>C. c</p> <p>D. d</p> Answer <p>C\u3002\u641c\u7d22\u5230 b \u7b49\u4e8e 86 \u65f6\uff0c\u6839\u636e\u7956\u7ed3\u70b9\u662f 68\uff0cmin \u7684\u7b56\u7565\uff0cc \u7ed3\u70b9\u4e0d\u9700\u8981\u7ee7\u7eed\u641c\u7d22\u4e86\uff0c\u5373 \\(\\beta\\) \u526a\u679d\u3002</p>"},{"location":"ZJU_CS/ADS/homework/#hw7","title":"Hw7","text":"<p>Q2-1. When solving a problem with input size \\(N\\) by divide and conquer, if at each stage the problem is divided into 8 sub-problems of equal size \\(N/3\\), and the conquer step takes \\(O(N^2\\log N)\\) to form the solution from the sub-solutions, then the overall time complexity is __. </p> <p>A. \\(O(N^2\\log N)\\)</p> <p>B. \\(O(N^2\\log^2N)\\)</p> <p>C. \\(O(N^3\\log N)\\)</p> <p>D. \\(O(N^{\\log8/\\log3})\\)</p> Answer <p>A\u3002</p> \\[     T(N)=8T(N/3)+O(N^2\\log N) \\] <p>\u5219 \\(N^{\\log_ba}=N^{\\log_38}&lt;N^2&lt;N^2\\log N\\)(\u91cf\u7ea7\u4e0a)\u3002</p> <p>Q2-2. To solve a problem with input size \\(N\\) by divide and conquer algorithm, among the following methods, __ is the worst. </p> <p>A. divide into 2 sub-problems of equal complexity  \\(N/3\\) and conquer in \\(O(N)\\)</p> <p>B. divide into 2 sub-problems of equal complexity  \\(N/3\\) and conquer in \\(O(NlogN)\\)</p> <p>C. divide into 3 sub-problems of equal complexity  \\(N/2\\) and conquer in \\(O(N)\\)</p> <p>D. divide into 3 sub-problems of equal complexity \\(N/3\\) and conquer in \\(O(NlogN)\\)</p> Answer <p>C\u3002</p> <p>A\uff0c\\(T(N)=2T(N/3)+O(N)\\)\uff0c\u5219 \\(N^{\\log_ba}=N^{\\log_32}&lt;N\\)\uff0c\\(T=O(N)\\)\u3002</p> <p>B\uff0c\\(T(N)=2T(N/3)+O(N\\log N)\\)\uff0c\u5219 \\(N^{\\log_ba}=N^{\\log_32}&lt;N&lt;N\\log N\\)\uff0c\\(T=O(N\\log N)\\)\u3002</p> <p>C\uff0c\\(T(N)=3T(N/2)+O(N)\\)\uff0c\u5219 \\(N^{\\log_ba}=N^{\\log_23}&gt;N\\)\uff0c\\(T=O(N^{\\log_23})\\)\u3002</p> <p>D\uff0c\\(T(N)=3T(N/3)+O(N\\log N)\\)\uff0c\u5219 \\(N^{\\log_ba}=N\\)\uff0c\\(T=O(N\\log^2 N)\\)\u3002</p> <p>Q2-3. 3-way-mergesort : Suppose instead of dividing in two halves at each step of the mergesort, we divide into three one thirds, sort each part, and finally combine all of them using a three-way-merge. What is the overall time complexity of this algorithm ?</p> <p>A. \\(O(n(\\log^2 n))\\)</p> <p>B. \\(O(n^2\\log n)\\)</p> <p>C. \\(O(n\\log n)\\)</p> <p>D. \\(O(n)\\)</p> Answer <p>B\u3002</p> <p>\\(T(N)=3T(N/3)+O(N)\\)\uff0c\u6545 \\(O(N\\log N)\\)</p> <p>Q2-4. Which one of the following is the lowest upper bound of \\(T(n)\\) for the following recursion \\(T(n)=2T(\\sqrt{n})+\\log n\\)?</p> <p>A. \\(O(\\log n\\log\\log n)\\)</p> <p>B. \\(O(log^2 n)\\)</p> <p>C. \\(O(n\\log n)\\)</p> <p>D. \\(O(n^2)\\)</p> Answer <p>A\u3002</p> \\[ T(n)=2T( \\sqrt{n})+\\log n=2^kT(n^{1/2^k})+(k+1)\\log n \\] <p>\u4ee4 \\(n^{1/2^k}=2\\)\uff0c\u53ef\u5f97 \\(k=\\log\\log n\\)\u3002\u5219\u53ef\u5f97</p> \\[ T(n)=O((k+1)\\log n)=O(\\log n\\log\\log n) \\]"},{"location":"ZJU_CS/ADS/homework/#hw8","title":"Hw8","text":"<p>Q2-1. Rod-cutting Problem: Given a rod of total length \\(N\\) inches and a table of selling prices \\(P_L\\) for lengths \\(L=1,2,\u22ef,M\\). You are asked to find the maximum revenue \\(R_N\\) obtainable by cutting up the rod and selling the pieces. For example, based on the following table of prices, if we are to sell an 8-inch rod, the optimal solution is to cut it into two pieces of lengths 2 and 6, which produces revenue  \\(R_8=P_2+P_6=5+17=22\\). And if we are to sell a 3-inch rod, the best way is not to cut it at all.</p> <p>Which one of the following statements is FALSE?</p> <p>A. This problem can be solved by dynamic programming</p> <p>B. The time complexity of this algorithm is \\(O(N^2)\\)</p> <p>C. If \\(N\\leqslant M\\), we have \\(R_N=\\max\\{P_N, \\max\\limits_{1\\leqslant i&lt;N}\\{R_i+R_{N-i}\\}\\}\\)</p> <p>D. If \\(N&gt;M\\), we have \\(R_N=\\max\\limits_{1\\leqslant i&lt;N}\\{R_i+R_{N-M}\\}\\)</p> Answer <p>D\u3002</p> <p>D\uff0c\\(R_N=\\max\\limits_{1\\leqslant i&lt;N}\\{R_i+R_{N-i}\\}\\)\u3002</p> <p>Q2-2. In dynamic programming, we derive a recurrence relation for the solution to one subproblem in terms of solutions to other subproblems. To turn this relation into a bottom up dynamic programming algorithm, we need an order to fill in the solution cells in a table, such that all needed subproblems are solved before solving a subproblem. Among the following relations, which one is impossible to be computed?</p> <p>A. \\(A(i,j)=\\min(A(i\u22121,j),A(i,j\u22121),A(i\u22121,j\u22121))\\)</p> <p>B. \\(A(i,j)=F(A(\\min(i, j)\u22121,\\min(i, j)\u22121),A(\\max(i,j)\u22121,\\max(i,j)\u22121))\\)</p> <p>C. \\(A(i,j)=F(A(i,j\u22121),A(i\u22121,j\u22121),A(i\u22121,j+1))\\)</p> <p>D. \\(A(i,j)=F(A(i\u22122,j\u22122),A(i+2,j+2))\\)</p> Answer <p>D\u3002ABC \u6309\u7167 i \u548c j \u7684\u589e\u5e8f\u7b97\u5373\u53ef\u3002D \u6309\u589e\u5e8f\u4e5f\u4e0d\u5bf9\uff0c\u964d\u5e8f\u4e5f\u4e0d\u5bf9\u3002</p> <p>Q2-3. Given a recurrence equation \\(f_{i,j,k}=f_{i,j+1,k}+\\min\\limits_{0\\leqslant l\\leqslant k} \\{f_{i-1,j,l}+w_{j,l}\\}\\). To solve this equation in an iterative way, we cannot fill up a table as follows:</p> <p>A. for k in 0 to n: for i in 0 to n: for j in n to 0</p> <p>B. for i in 0 to n: for j in 0 to n: for k in 0 to n</p> <p>C. for i in 0 to n: for j in n to 0: for k in n to 0</p> <p>D. for i in 0 to n: for j in n to 0: for k in 0 to n</p> Answer <p>B\u3002</p> <p>\\(j\\) \u4e0d\u80fd\u589e\u5e8f\u7b97\uff0c\u56e0\u4e3a \\(f_{i,j,k}\\) \u4f9d\u8d56\u4e8e \\(f_{i,j+1,k}\\)\u3002</p>"},{"location":"ZJU_CS/ADS/homework/#hw9","title":"Hw9","text":"<p>Q1-1. Let \\(S\\) be the set of activities in Activity Selection Problem. Then the earliest finish activity \\(a_m\\) must be included in all the maximum-size subset of mutually compatible activities of \\(S\\). (T/F)</p> Answer <p>F\u3002\u6700\u4f18\u89e3\u4e0d\u4e00\u5b9a\u662f\u8d2a\u5a6a\u6700\u4f18\u89e3\u3002</p> <p>Q1-2. Greedy algorithm works only if the local optimum is equal to the global optimum. (T/F)</p> Answer <p>T\u3002\u5373\u6700\u4f18\u5b50\u7ed3\u6784\u524d\u63d0\u3002</p>"},{"location":"ZJU_CS/ADS/homework/#hw10","title":"Hw10","text":"<p>Q1-1. If \\(L_1\\leq_p L_2\\) and \\(L_2\\in NP\\), then \\(L_1\\in NP\\). (T/F)</p> Answer <p>T\u3002</p> <p>\u8fd9\u91cc\u7684 \\(\\leq_p\\) \u53ef\u4ee5\u8ba4\u4e3a\u662f\u96be\u5ea6\u5bf9\u6bd4\uff0c\u5176\u5b9e\u662f \\(L_1\\) \u53ef\u4ee5\u591a\u9879\u5f0f\u89c4\u7ea6\u81f3 \\(L_2\\)\u3002</p> <p>\\(L_2\\in NP\\)\uff0c\u90a3\u4e48 \\(L_2\\) \u53ef\u4ee5\u5728\u975e\u786e\u5b9a\u6027\u56fe\u7075\u673a\u4e0a\u591a\u9879\u5f0f\u65f6\u95f4\u89e3\u51b3\uff0c\\(L_1\\) \u53ef\u4ee5\u5148\u591a\u9879\u5f0f\u65f6\u95f4\u89c4\u7ea6\u4e3a\\(L_2\\)\uff0c\u7136\u540e\u518d\u89e3\u51b3 \\(L_2\\)\u3002</p> <p>\u6240\u4ee5 \\(L_1\\) \u4e5f\u80fd\u591f\u5728\u975e\u786e\u5b9a\u6027\u56fe\u7075\u673a\u4e0a\u591a\u9879\u5f0f\u65f6\u95f4\u89e3\u51b3\uff0c\u5373 \\(L_1\\in NP\\)\u3002</p> <p>Q1-2. All NP-complete problems are NP problems. (T/F)</p> Answer <p>T\u3002NPC \u95ee\u9898\u662f NP \u95ee\u9898\u7684\u4e00\u79cd\u3002</p> <p>Q1-3. All the languages can be decided by a non-deterministic machine. (T/F)</p> Answer <p>F\u3002\u5ffd\u7565\u4e86\u4e0d\u53ef\u5224\u5b9a\u95ee\u9898\u3002</p> <p>Q1-4. All NP problems can be solved in polynomial time in a non-deterministic machine. (T/F)</p> Answer <p>T\u3002NP \u95ee\u9898\u7684\u5b9a\u4e49\u3002</p> <p>Q1-5. If a problem can be solved by dynamic programming, it must be solved in polynomial time. (T/F)</p> Answer <p>F\u3002\u6bd4\u5982\u80cc\u5305\u95ee\u9898\uff0c\u5176\u5b9e\u4e0d\u7b97 P \u7c7b\u3002</p> <p>Q2-1. Among the following problems, __ is NOT an NP-complete problem.</p> <p>A. Vertex cover problem</p> <p>B. Hamiltonian cycle problem</p> <p>C. Halting problem</p> <p>D. Satisfiability problem</p> Answer <p>C\u3002</p> <p>C \u662f\u4e0d\u53ef\u5224\u5b9a\u95ee\u9898\u3002D \u662f\u6700\u65e9\u53d1\u73b0\u7684 NPC \u95ee\u9898\u3002</p> <p>A \u9876\u70b9\u8986\u76d6\u3001B \u54c8\u5bc6\u987f\u56de\u8def\u4e5f\u90fd\u662f NPC \u95ee\u9898\u3002</p> <p>Q2-2. Suppose \\(Q\\) is a problem in \\(NP\\), but not necessarily NP-complete.  Which of the following is FALSE?</p> <p>A. A polynomial-time algorithm for SAT  would sufficiently imply a polynomial-time algorithm for \\(Q\\).</p> <p>B. A polynomial-time algorithm for \\(Q\\) would sufficiently imply a polynomial-time algorithm for SAT.</p> <p>C. If \\(Q\\notin P\\), then \\(P\\neq NP\\).</p> <p>D. If \\(Q\\) is NP-hard, then \\(Q\\) is NP-complete.</p> Answer <p>B\u3002</p> <p>A\uff0c\u67d0\u4e2a NPC=P\uff0c\u5219\u5168\u4f53 NP=P\u3002</p> <p>B\uff0c\u5982\u679c Q \u4e0d\u662f NPC \u95ee\u9898\u5c31\u4e0d\u4f1a\u6709\u8fd9\u6837\u7684\u6027\u8d28\u3002</p> <p>C\uff0c\u4e00\u4e2a NP \u4e0d\u662f P\uff0c\u5219 NP\u2260P\u3002</p> <p>D\uff0cNP-hard \u4e14 NP \u5c31\u786e\u5b9a\u4e86 NPC\u3002</p>"},{"location":"ZJU_CS/ADS/homework/#hw11","title":"Hw11","text":"<p>Q1-1. Suppose ALG is an \\(\\alpha\\)-approximation algorithm for an optimization problem \\(\\prod\\) whose approximation ratio is tight. Then for every \\(\\varepsilon&gt;0\\) there is no \\((\\alpha\u2212\\varepsilon)\\)-approximation algorithm for \\(\\prod\\) unless P = NP. (T/F)</p> Answer <p>F\u3002</p> <p>\u5bf9\u4e8e\u4e00\u79cd\u7b97\u6cd5\u800c\u8a00\uff0c\u8fd1\u4f3c\u6bd4\u4e3a \\(\\alpha\\) \uff0c\u90a3\u4e48 \\(\\forall \\beta &gt; \\alpha\\) \uff0c\u90fd\u53ef\u4ee5\u8bf4 \\(\\beta\\) \u662f\u5176\u8fd1\u4f3c\u6bd4\u3002\u5982\u679c \\(\\alpha\\) \u662f tight \u7684\uff0c\u5219 \\(\\alpha\\) \u662f\u4e00\u4e2a\u4e0b\u786e\u754c\u3002</p> <p>\u4f46\u8fd9\u90fd\u53ea\u662f\u5bf9\u8fd9\u4e00\u79cd\u7b97\u6cd5\u7684\u5206\u6790\uff0c\u4e00\u4e2a tight \u7684\u8fd1\u4f3c\u6bd4\u53ea\u80fd\u8bf4\u660e\u4f60\u5bf9\u8fd9\u79cd\u7b97\u6cd5\u7684\u5206\u6790\u5230\u4f4d\u4e86\uff0c\u800c\u4e0d\u80fd\u8bf4\u660e\u8fd9\u4e2a\u95ee\u9898\u6ca1\u6709\u66f4\u597d\u7684\u7b97\u6cd5\u3002\u8fd9\u91cc\u5b8c\u5168\u662f\u4e24\u7801\u4e8b\u3002</p> <p>Q1-2. As we know there is a 2-approximation algorithm for the Vertex Cover problem. Then we must be able to obtain a 2-approximation algorithm for the Clique problem, since the Clique problem can be polynomially reduced to the Vertex Cover problem. (T/F)</p> Answer <p>F\u3002</p> <p>\u9996\u5148\uff0c\u786e\u5b9e\u6709 Clique problem \\(\\leq_p\\) Vertex Cover problem\uff0cVertex Cover problem \u4e5f\u786e\u5b9e\u6709 2-approximation \u7b97\u6cd5\uff0c\u4f46\u662f\u8fd9\u4e24\u4e2a problem \u8861\u91cf Cost \u7684\u6807\u51c6\u662f\u4e0d\u4e00\u6837\u7684\u3002</p> <p>\u5728 Vertex Cover problem \u4e2d\u7684 2-\u8fd1\u4f3c\u7b97\u6cd5\u5f97\u5230\u7684\u89e3\uff0c\u5728 Clique problem \u7ea6\u5316\u6210\u7684 Vertex Cover problem \u4e2d\u5f97\u5230\u7684\u89e3\u867d\u7136\u7b26\u5408 Vertex Cover problem \u7684 Cost \u6807\u51c6\u4e0b\u7684 2-\u8fd1\u4f3c\uff0c\u5374\u5e76\u4e0d\u4e00\u5b9a\u7b26\u5408 Clique problem \u6807\u51c6\u4e0b\u7684 2-\u8fd1\u4f3c\u3002</p> <p>\u56de\u987e\u56e2\u95ee\u9898 (Clique problem) \u7684\u63cf\u8ff0\uff1a\u5bfb\u627e\u6700\u5927\u5b8c\u5168\u5b50\u56fe\uff0c\u90a3\u4e48\u5bfb\u627e\u5230\u7684\u5b8c\u5168\u5b50\u56fe\u4e2d\u9876\u70b9\u6570 (\\(C_1\\)) \u8d8a\u591a\u8d8a\u597d\u3002</p> <p>\u56de\u987e\u9876\u70b9\u8986\u76d6\u95ee\u9898 (Vertex Cover problem) \u7684\u63cf\u8ff0\uff1a\u5bfb\u627e\u6700\u5c0f\u89c4\u6a21\u7684\u9876\u70b9\u8986\u76d6\uff0c\u90a3\u4e48\u5bfb\u627e\u5230\u7684\u9876\u70b9\u8986\u76d6\u4e2d\u9876\u70b9\u6570 (\\(C_2\\)) \u8d8a\u5c11\u8d8a\u597d\u3002</p> <p>\u56de\u987e\u7ea6\u5316\u65b9\u6cd5\uff1a</p> \\[ |\\text{max clique of }G|=K\\iff |\\text{max vertex cover of }\\overline{G}|=|V|-K \\] <p>\u8bbe Vertex Cover problem \u7684 2-\u8fd1\u4f3c\u7b97\u6cd5\u5f97\u5230\u7684\u9876\u70b9\u8986\u76d6\u89c4\u6a21\u4e3a \\(T\\)\uff0c\u6700\u4f18\u89c4\u6a21\u4e3a \\(T^*\\)\uff0c\u5219</p> \\[ \\rho_2=\\frac{C_2}{C_2^*}=\\frac{T}{T^*}=2,\\quad \\rho_1=\\frac{C_1^*}{C_1}=\\frac{|V|-T^*}{|V|-T}=1+\\frac{1}{\\dfrac{|V|}{T^*}-2} \\] <p>\u53ef\u89c1 \\(\\rho_1\\) \u662f\u4e0d\u53ef\u63a7\u7684\u3002</p> <p>Q2-1. For the bin-packing problem: let \\(S=\\sum_iS_i\\). Which of the following statements is FALSE?</p> <p>A. The number of bins used by the next-fit heuristic is never more than \\(\\lceil 2S\\rceil\\)</p> <p>B. The number of bins used by the first-fit heuristic is never more than \\(\\lceil 2S\\rceil\\)</p> <p>C. The next-fit heuristic leaves at most one bin less than half full</p> <p>D. The first-fit heuristic leaves at most one bin less than half full</p> Answer <p>C\u3002</p> <p>\u8bbe next-fit \u7b97\u6cd5\u6700\u7ec8\u751f\u6210 \\(2M\\) \u6216 \\(2M+1\\) \u4e2a bin\uff0c\u5219</p> \\[ S = \\sum_{i=1}^{2M\\text{ or }2M+1}S(B_i) \\geqslant \\sum_{i=1}^M[S(B_{2i-1})+S(B_{2i})] &gt; \\sum_{i=1}^M1=M \\] <p>\u56e0\u6b64\u6709 \\(2S&gt;2M \\Rightarrow \\lceil 2S\\rceil \\geqslant 2M+1\\)\uff0c\u56e0\u6b64 A \u6b63\u786e\u3002</p> <p>first-fit(1.7-approximation) \u4f18\u4e8e next-fit(2-approximation)\uff0c\u56e0\u6b64 B \u4e5f\u6b63\u786e\u3002</p> <p>\u5bf9\u4e8e D\uff0c\u5982\u679c\u5b58\u5728\u4e24\u4e2a\u5c11\u4e8e\u534a\u6ee1\u7684 bin\uff0c\u90a3\u4e48\u5728\u4ea7\u751f\u7b2c\u4e8c\u4e2a\u5c11\u4e8e\u534a\u6ee1\u7684 bin \u65f6\uff0c\u4e0d\u53ef\u80fd\u5728\u5bf9\u524d\u9762 bins \u7684\u626b\u63cf\u4e2d\u627e\u4e0d\u5230\u653e\u4e0d\u8fdb\u53bb\u7684 bin\uff08\u7b2c\u4e00\u4e2a\u5c11\u4e8e\u534a\u6ee1\u7684 bin \u80af\u5b9a\u80fd\u653e\u8fdb\u53bb\uff09\uff0c\u56e0\u6b64\u6700\u591a\u53ea\u6709\u4e00\u4e2a\u5c11\u4e8e\u534a\u6ee1\u7684bin \uff0cD \u6b63\u786e\u3002</p> <p>\u5bf9\u4e8e C\uff0c\u4e24\u4e2a\u5c11\u4e8e\u534a\u6ee1\u7684 bin \u53ea\u8981\u4e0d\u662f\u76f8\u90bb\u51fa\u73b0\u5c31\u662f\u53ef\u80fd\u7684\uff0c\u56e0\u6b64 C \u9519\u8bef\u3002</p> <p>Q2-2. To approximate a maximum spanning tree \\(T\\)  of an undirected graph \\(G=(V,E)\\) with distinct edge weights \\(w(u,v)\\) on each edge \\((u,v)\\in E\\), let's denote the set of maximum-weight edges incident on each vertex by \\(S\\). Also let \\(w(E')=\\sum _{(u,v)\\in E}w(u,v)\\) for any edge set \\(E'\\). Which of the following statements is TRUE?</p> <p>A. \\(S=T\\) for any graph \\(G\\)</p> <p>B. \\(S\\neq T\\) for any graph \\(G\\)</p> <p>C. \\(w(T)\\geqslant w(S)/2\\) for any graph \\(G\\)</p> <p>D. None of the above</p> Answer <p></p>"},{"location":"ZJU_CS/ADS/homework/#hw12","title":"Hw12","text":"<p>Q1-1. For the graph given in the following figure, if we start from deleting the black vertex, then local search can always find the minimum vertex cover. (T/F)</p> Answer <p>T\u3002</p> <p>Q1-2. We are given a set of sites \\(S=\\{s_{1}, s_{2}, \\cdots, s_{n}\\}\\) in the plane, and we want to choose a set of \\(k\\) centers \\(C=\\{c_{1}, c_{2}, \\cdots, c_{k}\\}\\) so that the maximum distance from a site to the nearest center is minimized. Here \\(c_{i}\\) can be an arbitrary point in the plane.</p> <p>A local search algorithm arbitrarily choose \\(k\\) points in the plane to be the centers, then</p> <ul> <li> <p>(1) divide \\(S\\) into \\(k\\) sets, where \\(S_{i}\\) is the set of all sites for which \\(c_{i}\\) is the nearest center; and</p> </li> <li> <p>(2) for each \\(S_{i}\\), compute the central position as a new center for all the sites in \\(S_{i}\\).</p> </li> </ul> <p>If steps (1) and (2) cause the covering radius to strictly decrease, we perform another iteration, otherwise the algorithm stops.</p> <p>When the above local search algorithm terminates, the covering radius of its solution is at most 2 times the optimal covering radius. (T/F)</p> Answer <p>F\u3002</p> <p>\u7ed9\u51fa\u53cd\u4f8b\u5982\u4e0b\u56fe\u6240\u793a\u3002\u5176\u4e2d\u6709</p> \\[ \\begin{gathered}     A(-1, \\frac{\\sqrt{3}}{2}),\\quad     B(1, \\frac{\\sqrt{3}}{2}),\\quad     C(-1, -\\frac{\\sqrt{3}}{2}),\\quad     D(1, -\\frac{\\sqrt{3}}{2})     \\\\     E(-3, 2\\sqrt{3}),\\quad     F(3, 2\\sqrt{3}),\\quad     G(0, 2\\sqrt{3}+\\sqrt{7}),\\quad     H(0,0.000001),\\quad     I(0,-0.000001) \\end{gathered} \\] <p>\u90fd\u662f\u9700\u8981\u88ab\u8986\u76d6\u7684\u70b9\u3002</p> \\[ c_1(-1, 0),\\quad c_2(0, 0),\\quad c_3(1, 0),\\quad c_4(0, 2\\sqrt{3}+\\sqrt{7}),\\quad \\] <p>\\(c_1\\), \\(c_3\\) \u534a\u5f84\u4e3a \\(\\frac{\\sqrt{3}}{2}\\), \\(c_2\\) \u534a\u5f84\u4e3a \\(0.0001\\), \\(c_4\\) \u534a\u5f84\u4e3a \\(4\\)\u3002\u8fd9\u6837\u5f97\u5230\u7684\u89e3\u5c31\u662f Local Search \u7684\u4e00\u4e2a\u53ef\u80fd\u89e3\uff0c\u8986\u76d6\u534a\u5f84\u4e3a \\(4\\)\u3002</p> <p>\u7136\u800c\uff0c\u5982\u679c\u53d6</p> \\[ c_1'(-2, \\frac{5\\sqrt{3}}{4}),\\quad c_2'(0, 0),\\quad c_3'(2, \\frac{5\\sqrt{3}}{4}),\\quad c_4'(0, 2\\sqrt{3}+\\sqrt{7}+4),\\quad \\] <p>\\(c_1\\), \\(c_3\\) \u534a\u5f84\u4e3a \\(\\frac{\\sqrt{41}}{4}\\), \\(c_2\\) \u534a\u5f84\u4e3a \\(\\frac{\\sqrt{7}}{2}\\), \\(c_4\\) \u534a\u5f84\u4e3a \\(0.0001\\)\u3002\u8fd9\u6837\u5f97\u5230\u7684\u89e3\u8986\u76d6\u534a\u5f84\u4e3a \\(\\frac{\\sqrt{41}}{4}&lt;2\\)\u3002</p> <p>\u56e0\u6b64\u867d\u7136\u4e0d\u786e\u5b9a\u6700\u4f18\u89e3\u662f\u4ec0\u4e48\uff0c\u4f46\u662f\u6700\u4f18\u89e3\u4e00\u5b9a\u6bd4\u4e0a\u9762\u7684 Local Search \u7684\u89e3\u7684\u4e8c\u5206\u4e4b\u4e00\u66f4\u5c0f.</p> <p>\u4e0b\u56fe\u4e2d\uff0c\u7eff\u8272\u5706\u5708\u8868\u793a Local Search\uff0c\u84dd\u8272\u5706\u5708\u8868\u793a\u7ed9\u51fa\u7684\u4e00\u4e2a\u6bd4 Local Search \u7684 \\(1/2\\) \u66f4\u5c0f\u7684\u89e3\u3002  </p> <p>Q2-1. Spanning Tree Problem: Given an undirected graph \\(G=(V, E)\\), where \\(|V|=n\\) and \\(|E|=m\\). Let \\(F\\) be the set of all spanning trees of \\(G\\). Define \\(d(u)\\) to be the degree of a vertex \\(u \\in V\\). Define \\(w(e)\\) to be the weight of an edge \\(e \\in E\\).</p> <p>We have the following three variants of spanning tree problems:</p> <ul> <li> <p>(1) Max Leaf Spanning Tree: find a spanning tree \\(T \\in F\\) with a maximum number of leaves.</p> </li> <li> <p>(2) Minimum Spanning Tree: find a spanning tree \\(T \\in F\\) with a minimum total weight of all the edges in \\(T\\).</p> </li> <li> <p>(3) Minimum Degree Spanning Tree: find a spanning tree \\(T \\in F\\) such that its maximum degree of all the vertices is the smallest.</p> </li> </ul> <p>For a pair of edges \\(\\left(e, e^{\\prime}\\right)\\) where \\(e \\in T\\) and \\(e^{\\prime} \\in(G-T)\\) such that \\(e\\) belongs to the unique cycle of \\(T \\cup e^{\\prime}\\), we define edge-swap \\(\\left(e, e^{\\prime}\\right)\\) to be \\((T-e) \\cup e^{\\prime}\\).</p> <p>Here is a local search algorithm:</p> <pre><code>T = any spanning tree in F_i\nwhile (there is an edge-swap (e, e') which reduces Cost(T)) {\n    T = T - e + e';\n}\nreturn T;\n</code></pre> <p>Here \\(\\operatorname{cost}(T)\\) is the number of leaves in \\(T\\) in Max Leaf Spanning Tree; or is the total weight of \\(T\\) in Minimum Spanning Tree; or else is the minimum degree of \\(T\\) in Minimum Degree Spanning Tree.</p> <p>Which of the following statements is TRUE?</p> <p>A. The local search always return an optimal solution for Max Leaf Spanning Tree</p> <p>B. The local search always return an optimal solution for Minimum Spanning Tree</p> <p>C. The local search always return an optimal solution for Minimum Degree Spanning Tree</p> <p>D. For neither of the problems that this local search always return an optimal solution</p> Answer <p>B\u3002</p> <p>\u6700\u5c0f\u751f\u6210\u6811\u7684 Prim \u7b97\u6cd5\u662f\u5c40\u90e8\u6027\u7684, \u4f46\u662f\u5374\u662f\u6b63\u786e\u7684, \u731c\u60f3\u6700\u5c0f\u751f\u6210\u6811\u7684\u5c40\u90e8\u6700\u4f18\u5c31\u662f\u5168\u5c40\u6700\u4f18\u3002\u4e8b\u5b9e\u4e0a\u8fd9\u4e2a\u7ed3\u8bba\u786e\u5b9e\u662f\u6b63\u786e\u7684\uff0c\u8fd9\u4e2a\u8bc1\u660e\u6bd4\u8f83\u96be\uff0c\u8bfb\u8005\u53ef\u4ee5\u8003\u8651\u52bf\u80fd\u51fd\u6570\u7b49\u65b9\u6cd5\u3002</p> <p>\u5bf9\u4e8e\u5176\u4ed6\u4e24\u79cd\uff0c\u5bfb\u627e\u5176\u53cd\u4f8b\u3002</p> <p>\u5bf9\u4e8eMax Leaf Spanning Tree\uff0c\u5bfb\u627e\u53cd\u4f8b\u5982\u4e0b:  </p> <p>\u5bf9\u4e8eMinimum Degree Spanning Tree\uff0c\u540c\u6837\u7684\u539f\u56fe(Original)\uff0c\u5bfb\u627e\u53cd\u4f8b\u5982\u4e0b:  </p> <p>\u7a76\u5176\u672c\u8d28\uff0c\u6700\u5c0f\u751f\u6210\u6811\u5982\u679c\u6709\u66f4\u597d\u7684\u9009\u62e9\u4e00\u5b9a\u80fd\u4ea4\u6362\uff0c\u56e0\u4e3a\u8fdb\u884c\u7684\u6b63\u662f\u8fb9\u4ea4\u6362\uff0c\u76f4\u63a5\u5f71\u54cd\u7684\u5c31\u662f\u6811\u7684\u6574\u4f53\u6743\u503c\u3002\u53e6\u5916\u4e24\u79cd\u6811\u7684\u6027\u8d28\u5219\u4e0e\u9876\u70b9\u76f8\u5173\uff0c\u4e0d\u80fd\u76f4\u63a5\u5f71\u54cd\uff0c\u6240\u4ee5\u5c31\u5bc4\u4e86\u3002</p> <p>Q2-2. There are \\(n\\) jobs, and each job \\(j\\) has a processing time \\(t_{j}\\). We will use a local search algorithm to partition the jobs into two groups A and B, where set A is assigned to machine \\(M_{1}\\) and set \\(\\mathrm{B}\\) to \\(M_{2}\\). The time needed to process all of the jobs on the two machines is \\(T_{1}=\\sum_{j \\in A} t_{j}, T_{2}=\\sum_{j \\in B} t_{j}\\). The problem is to minimize \\(\\left|T_{1}-T_{2}\\right|\\).</p> <p>Local search: Start by assigning jobs \\(1, \\ldots, n / 2\\) to \\(M_{1}\\), and the rest to \\(M_{2}\\).</p> <p>The local moves are to move a single job from one machine to the other, and we only move a job if the move decreases the absolute difference in the processing times. Which of the following statement is true?</p> <p>A. The problem is NP-hard and the local search algorithm will not terminate.</p> <p>B. When there are many candidate jobs that can be moved to reduce the absolute difference, if we always move the job \\(j\\) with maximum \\(t_j\\) , then the local search terminates in at most \\(n\\) moves.</p> <p>C. The local search algorithm always returns an optimal solution.</p> <p>D. The local search algorithm always returns a local solution with \\(\\frac{1}{2}T_1\\leqslant T\\leqslant 2T_1\\).</p> Answer <p>B\u3002</p> <p>A\uff0c\u6bcf\u6b21\u90fd\u51cf\u5c0f\uff0c\u80af\u5b9a\u4f1a\u51cf\u65e0\u53ef\u51cf\uff0c\u90a3\u4e48\u4e00\u5b9a\u4f1a\u7ec8\u6b62\u3002NP-hard\u731c\u60f3\u5e94\u8be5\u662f\u7684\uff0c\u4e00\u5171\u6709\\(2^n\\)\u79cd\u72b6\u6001\u3002</p> <p>B\uff0c\u4e00\u9879\u88ab\u79fb\u5230\u53e6\u4e00\u4fa7\u4e4b\u540e\u80af\u5b9a\u4e0d\u4f1a\u518d\u88ab\u79fb\u56de\u6765\uff0c\u56e0\u6b64\u6700\u591a\u79fb\\(n\\)\u6b21\u3002</p> <p>C\uff0c\u8003\u8651\\(\\{10,11,12,12,13,14\\}=\\{10,11,13\\}+\\{12,12,14\\}\\)\uff0c\u53ef\u77e5\u65e0\u6cd5\u79fb\u52a8\u4e86\uff0c\u4f46\u662f\u663e\u7136\u6700\u4f18\u89e3\u662f\\(\\{11,12,13\\}+\\{10,12,14\\}\\)\u3002</p> <p>D\uff0c\u8003\u8651\\(\\{1,2,100\\}=\\{1,2\\}+\\{100\\}\\)\u3002</p> <p>Q2-3. Max-cut problem: Given an undirected graph \\(G=(V, E)\\) with positive integer edge weights \\(w_{e}\\), find a node partition \\((A, B)\\) such that \\(w(A, B)\\), the total weight of edges crossing the cut, is maximized. Let us define \\(S^{\\prime}\\) be the neighbor of \\(S\\) such that \\(S^{\\prime}\\) can be obtained from \\(S\\) by moving one node from \\(A\\) to \\(B\\), or one from \\(B\\) to \\(A\\). only choose a node which, when flipped, increases the cut value by at least \\(w(A, B) /|V|\\). Then which of the following is true?</p> <p>A. Upon the termination of the algorithm, the algorithm returns a cut \\((A,B)\\) so that \\(2.5w(A,B)\\geqslant w(A^\u2217, b^*)\\),  where \\((A^\u2217 ,B^\u2217)\\) is an optimal partition.</p> <p>B. The algorithm terminates after at most \\(O(\\log|V|\\log W)\\) flips, where \\(W\\) is the total weight of edges.</p> <p>C. Upon the termination of the algorithm, the algorithm returns a cut \\((A,B)\\) so that \\(2w(A,B)\\geqslant w(A^\u2217, b^*)\\).</p> <p>D. The algorithm terminates after at most \\(O(|V|^2)\\) flips.</p> Answer <p> </p>"},{"location":"ZJU_CS/ADS/homework/#hw13","title":"Hw13","text":"<p>Q1-1. Let \\(a=\\left(a_{1}, a_{2}, \\ldots, a_{i}, \\ldots, a_{j}, \\ldots, a_{n}\\right)\\) denote the list of elements we want to sort. In the quicksort algorithm, if the pivot is selected uniformly at random. Then any two elements get compared at most once and the probability of \\(a_{i}\\) and \\(a_{j}\\) being compared is \\(2 /(j-i+1)\\) for \\(j&gt;i\\), given that \\(a_{i}\\) or \\(a_{j}\\) is selected as the pivot. (T/F)</p> Answer <p>F\u3002</p> <p>\u4e3e\u53cd\u4f8b\u5982\u4e0b\uff1a{3, 4, 1, 2, }\u3002\u5982\u679c\u7b2c\u4e00\u6b21\u9009pivot\u9009\u4e2d3\u6216\u80052\uff0c\u90a3\u4e481\u548c4\u4f1a\u88ab\u5206\u5f00\uff0c\u4e0d\u4f1a\u88ab\u6bd4\u8f83\u3002</p> <p>\u5982\u679c\u7b2c\u4e00\u6b21\u5c31\u9009\u4e2d1\u62164\uff0c\u5b83\u4eec\u624d\u4f1a\u88ab\u6bd4\u8f83\u3002\u56e0\u6b64\u5b83\u4eec\u88ab\u6bd4\u8f83\u7684\u6982\u7387\u662f\u00bd\u3002\u6309\u7167 \\(\\dfrac{2}{j-i+1}\\) \u8ba1\u7b97\uff0c\u5e94\u8be5\u662f1\u3002</p> <p>\u4e8b\u5b9e\u4e0a\uff0c\u5982\u679c\u662f\u5df2\u7ecf\u88ab\u6392\u5e8f\u597d\u7684\uff0c\u8fd9\u5c31\u662f\u5bf9\u7684\u3002</p> <p>Q2-1. Given a linked list containg \\(N\\) nodes.  Our task is to remove all the nodes.  At each step, we randomly choose one node in the current list,  then delete the selected node together with all the nodes after it. Here we assume that each time we choose one node uniformly among all the remaining nodes.  What is the expected number of steps to remove all the nodes?</p> <p>A.\\(\\Theta (\\log N)\\)</p> <p>B.\\(N/e\\)</p> <p>C.\\(N/2\\)</p> <p>D.\\(\\sqrt{N}\\)</p> Answer <p>A\u3002</p> <p>\u5173\u952e\u662f\u5f97\u5230\u9012\u63a8\u5f0f</p> \\[ a_n = \\frac{1}{N}\\sum_{i=1}^{N-1}a_i+1 \\] <p>\u76f4\u63a5\u4ee3\u5165 B,C\uff0c\u663e\u7136\u4e0d\u5bf9\u3002\u4e8b\u5b9e\u4e0a\uff0c\u53ef\u4ee5\u770b\u5230\u8fd9\u79cd\u9012\u63a8\u5f0f\u53ea\u53ef\u80fd\u51fa\u6709\u7406\u6570\uff0cD \u5f88\u53ef\u80fd\u51fa\u65e0\u7406\u6570\uff0c\u4e5f\u4e0d\u5bf9\u3002</p> <p>\u7136\u800c\uff0c\u5f88\u8f7b\u677e\u5c31\u53ef\u4ee5\u901a\u8fc7\u5f3a\u5f52\u7eb3\u6cd5\u5224\u65ad \\(a_n=O(\\log N)\\)\u3002(\\(\\Omega\\)\u6ca1\u6709\u8bd5\u8fc7\uff0c\u5e94\u8be5\u4e5f\u53ef\u4ee5\u3002)</p> \\[ a_n = \\frac{1}{N}\\sum_{i=1}^{N-1}a_i+1 \\leqslant \\frac{C}{N}\\log\\left(2N\\prod_{i=1}^{N-1}i\\right) \\leqslant C\\log N \\] <p>\u8fd9\u91cc\u7684\u7b2c\u4e8c\u4e2a\u4e0d\u7b49\u53f7\u5e76\u4e0d\u90a3\u4e48\u4e25\u683c\uff0c\u4e0d\u8fc7 \\(N\\) \u8db3\u591f\u5927\u7684\u65f6\u5019\u4e00\u5b9a\u662f\u4e25\u683c\u7684\u3002</p> <p>Q2-2. Use The Online Hiring Algorithm ( hire only once ). Assume that the quality input \\(C[ ]\\) is uniformly random.</p> <p>When \\(N = 271\\) and \\(k = 90\\), the probability of hiring the Nth candidate is __.</p> Answer <p>\u2153\u3002\u8981\u6c42\u524d 270 \u4eba\u4e2d\u6700\u597d\u7684\u843d\u5728\u524d 90 \u4eba\u4e2d\u3002</p> <p>\u4e5f\u53ef\u4ee5\u5206\u524d 271 \u4eba\u4e2d\u6700\u597d\u7684\u5728\u54ea\u91cc\u8fdb\u884c\u8ba8\u8bba\uff0c\u5373</p> \\[ \\frac{1}{N}\\cdot \\frac{k}{N-1} + \\frac{k}{N} = \\frac{1}{3} \\]"},{"location":"ZJU_CS/ADS/homework/#hw14","title":"Hw14","text":"<p>Q1-1. While comparing a serial algorithm with its parallel counterpart, we just concentrate on reducing the work load. (T/F)</p> Answer <p>F\u3002</p> <p>\u9664\u4e86 work load \\(W(n)\\) \u4e4b\u5916\uff0c\u51cf\u5c11 worst-case running time\\(T(n)\\) \u4e5f\u662f\u6240\u5173\u6ce8\u7684\u3002\uff08\u751a\u81f3\u8fd9\u624d\u662f\u4e3b\u8981\u76ee\u6807\uff09</p> <p>Q1-2. To evaluate the Prefix-Sums of a sequence of 16 numbers by the parallel algorithm with Balanced Binary Trees, C(4,1) is found before C(2,2). (T/F)</p> Answer <p>T\u3002</p> <p>\u672c\u5e94\u8be5\u662f T\uff0c\u56e0\u4e3a\u5148\u8ba1\u7b97 B()\uff0cB() \u662f\u81ea\u5e95\u5411\u4e0a\u8ba1\u7b97\u7684\uff1b\u540e\u8ba1\u7b97 C()\uff0cC() \u662f\u81ea\u9876\u5411\u4e0b\u8ba1\u7b97\u7684\u3002</p> <p>\u56e0\u6b64 C(4, 1) \u663e\u7136\u5e94\u8be5\u5728 C(2, 2) \u4e4b\u524d\u8ba1\u7b97\u3002\u7136\u800c PTA \u7684\u7b54\u6848\u5e93\u91cc\u8ba4\u4e3a\u5b83\u662f F\uff0c\u672a\u6765\u53ef\u80fd\u88ab\u4fee\u6539\u3002</p> <p>Q1-3. To evaluate the sum of a sequence of 16 numbers by the parallel algorithm with Balanced Binary Trees, B(1,6) is found before B(2,1). (T/F)</p> Answer <p>T\u3002B() \u81ea\u5e95\u5411\u4e0a\u8ba1\u7b97\u3002</p> <p>Q1-4. In order to solve the maximum finding problem by a parallel algorithm with \\(T(n)=O(1)\\) , we need work load \\(W(n)=\\Omega(n^2)\\) in return. (T/F)</p> Answer <p>F\u3002</p> <p>\\(W(n)=\\Omega(n^2)\\) \u7684\u65ad\u8a00\u8bf4\u6700\u5c0f\u4e5f\u662f \\(O(n^2)\\)\uff0c\u7136\u800c\u8fd9\u53ea\u662f\u6700\u57fa\u7840\u7684\u5f97\u5230\u7684\u7ed3\u679c\u3002</p> <p>\u91c7\u7528 Random Sampling\uff0c\u5c31\u53ef\u4ee5\u5728 \\(W(n)=O(n)\\) \u4e0b\u5f97\u5230\u7ed3\u679c\u3002</p> <p>Q1-5. To solve the Maximum Finding problem with parallel Random Sampling method, O(n) processors are required to get T(n)=O(1) and W(n)=O(n) with very high probability. (T/F)</p> Answer <p>T\u3002</p>"},{"location":"ZJU_CS/ADS/homework/#hw15","title":"Hw15","text":"<p>Q1-1. To merge 55 runs using 3 tapes for a 2-way merge, the original distribution (34, 21) is better than (27, 28). (T/F)</p> Answer <p>T\u3002\u6309 Fibonacci \u6570\u5206\u5272\u6700\u597d\u3002</p> <p>Q1-2. If only one tape drive is available to perform the external sorting, then the tape access time for any algorithm will be \\(\\Omega(N^2)\\) (T/F)</p> Answer <p>T\u3002\u8003\u8651\u5bfb\u9053\u65f6\u95f4\u4ece \\(\\Omega(1)\\) \u4e0a\u5347\u5230 \\(\\Omega(n)\\)\u3002</p> <p>Q1-3. In external sorting, a \\(k\\)-way merging is usually used in order to reduce the number of passes and we will take the \\(k\\) as large as possible as long as we have enough amount of tapes. (T/F)</p> Answer <p>F\u3002</p> <p>\u9002\u5f53\u589e\u5927 \\(k\\)\uff0c\u7531\u4e8e pass \u6570\u51cf\u5c11\uff0c\u53ef\u4ee5\u51cf\u5c11 I/O\u3002\u4f46 \\(k\\) \u8fc7\u5927\u65f6\uff0c\u786c\u4ef6\u9519\u8bef\u7387\u4e0a\u5347\uff0c\u53cd\u800c\u662f\u4e0d\u5212\u7b97\u7684\u3002\uff08\u6211\u4e2a\u4eba\u8ba4\u4e3a\u60c5\u51b5\u8fd8\u66f4\u590d\u6742\uff0c\u53ef\u80fd\u8fd8\u6709 cost\uff0c\u4f20\u8f93\u5ef6\u8fdf\u8fd9\u4e9b\u95ee\u9898\uff09</p> <p>\u53e6\u5916\uff0c\\(k\\) \u8fc7\u5927\u65f6\uff0cinput buffer \u7684\u9700\u6c42\u4e5f\u4f1a\u5f88\u5927\uff0cmemory \u5bb9\u91cf\u4e00\u5b9a\u65f6\uff0cbuffer size \u5c31\u4f1a\u51cf\u5c0f\uff0c\u9002\u914d\u7684 disk \u4e0a\u7684 block size \u5212\u5206\u4e5f\u4f1a\u51cf\u5c0f\uff0c\u5bfc\u81f4 seek time \u4e0a\u5347\uff0c\u4e5f\u662f\u4e0d\u5212\u7b97\u7684\u3002</p> <p>Q1-4. In general, for a 3-way merge we need 6 input buffers and 2 output buffers for parallel operations. (T/F)</p> Answer <p>T\u3002</p> <p>In general, for a \\(k\\)-way merge we need \\(2k\\) input buffers and 2 output buffers for parallel operations in external sorting.</p> <p>Q2-1. Given 100,000,000 records of 256 bytes each, and the size of the internal memory is 128MB. If simple 2-way merges are used, how many passes do we have to do?</p> <p>A. 10</p> <p>B. 9</p> <p>C. 8</p> <p>D. 7</p> Answer <p>B\u3002</p> <p>block size \\(=128\\times 2^{20}/256=2^{19}\\)\uff0c</p> <p>\u5219 number of passes \\(= 1+\\lceil \\log_2(10^8/2^{19}) \\rceil=9\\)</p> <p>Q2-2. In external sorting, suppose we have 5 runs of lengths 2, 8, 9, 5, and 3, respectively. Which of the following merging orders can obtain the minimum merge time?</p> <p>A. merge runs of lengths 2 and 3 to obtain Run#1; merge Run#1 with the one of length 5 to obtain Run#2; merge Run#2 with the one of length 8 to obtain Run#3; merge Run#3 with the one of length 9</p> <p>B. merge runs of lengths 2 and 3 to obtain Run#1; merge Run#1 with the one of length 5 to obtain Run#2; merge runs of lengths 8 and 9 to obtain Run#3; merge Run#2 and Run#3</p> <p>C. merge runs of lengths 2 and 3 to obtain Run#1; merge runs of lengths 5 and 8 to obtain Run#2; merge Run#1 and Run#2 to obtain Run#3; merge Run#3 with the one of length 9</p> <p>D. merge runs of lengths 2 and 3 to obtain Run#1; merge runs of lengths 5 and 8 to obtain Run#2; merge Run#2 with the one of length 9 to obtain Run#3; merge Run#1 and Run#3</p> Answer <p>B\u3002\u5373\u6784\u5efa Huffman \u6811\uff0c\u6784\u5efa\u7684\u7ed3\u679c\u5c31\u662f B\u3002</p> <p>Q2-3. In external sorting, in order to reduce the number of passes, minimizing the initial number of runs (i.e. generating longer runs ) is a good idea. Suppose the input record keys are (25, 74, 56, 34, 21, 11, 29, 80, 38, 53) and the internal memery can hold only 3 records, the minimum number of initial runs obtained by replacement selection is__ \u3002</p> <p>A. 1</p> <p>B. 2</p> <p>C. 3</p> <p>D. 4</p> Answer <p>B\u3002\u901a\u8fc7 replacement selection \u53ef\u4ee5\u5f97\u5230\uff1a</p> \\[ \\begin{matrix}     25 &amp; 34 &amp; 56 &amp; 74\\\\     11 &amp; 21 &amp; 29 &amp; 38 &amp; 53 &amp; 80 \\end{matrix} \\] <p>Q2-4. Suppose we have the internal memory that can handle 12 numbers at a time, and the following two runs on the tapes:</p> <p>Run 1: 1, 3, 5, 7, 8, 9, 10, 12</p> <p>Run 2: 2, 4, 6, 15, 20, 25, 30, 32</p> <p>Use 2-way merge with 4 input buffers and 2 output buffers for parallel operations. Which of the following three operations are NOT done in parallel?</p> <p>A. 1 and 2 are written onto the third tape; 3 and 4 are merged into an output buffer; 6 and 15 are read into an input buffer</p> <p>B. 3 and 4 are written onto the third tape; 5 and 6 are merged into an output buffer; 8 and 9 are read into an input buffer</p> <p>C. 5 and 6 are written onto the third tape; 7 and 8 are merged into an output buffer; 20 and 25 are read into an input buffer</p> <p>D. 7 and 8 are written onto the third tape; 9 and 15 are merged into an output buffer; 10 and 12 are read into an input buffer</p> Answer <p>D\u3002\u5982\u4e0b\u56fe\uff1a</p> <p></p> <p>D \u9009\u9879\u5f3a\u884c\u60f3\u8981 parallel \uff0c\u56e0\u6b64\u6ca1\u6709\u7ba1\u6b63\u5728\u8bfb\u5165\u7684 10, 12\uff0c\u76f4\u63a5\u57fa\u4e8e\u73b0\u6709 3 \u4e2a buffer \u5757 merge \uff0c\u56e0\u6b64\u8fdb\u884c\u4e86\u9519\u8bef\u7684 merge(9, 15)\u3002\u4e8b\u5b9e\u4e0a\u8fd9\u4e00\u6b65\u65e0\u6cd5 parallel \uff0c\u5fc5\u987b\u7b49\u5f85 10, 12 \u8bfb\u5b8c\u4e4b\u540e\u624d\u80fd\u8fdb\u884c\u6b63\u786e\u7684 merge(9, 10)\u3002</p> <p>Q2-5. Suppose that the replacement selection is applied to generate longer runs with a priority queue of size 4. Given the sequence of numbers { 9, 75, 17, 12, 88, 91, 25, 22, 35, 41, 58, 96, 15 }. Which of the following gives the second output run?</p> <p>A. 22 35 88 91</p> <p>B. 22 35 41 58 88 91 96</p> <p>C. 22 35 41 58 96</p> <p>D. 22 35 41 58</p> Answer <p>C\u3002\u901a\u8fc7 replacement selection \u53ef\u4ee5\u5f97\u5230\uff1a <pre><code>9  12 17 25 75 88 91\n22 35 41 58 96\n15\n</code></pre></p>"},{"location":"ZJU_CS/ADS/week1/","title":"Lecture 1 | AVL Trees &amp; Splay Trees","text":""},{"location":"ZJU_CS/ADS/week1/#avl_tree","title":"AVL tree","text":"<p>Tutor \u5728\u4e8c\u53c9\u6811\u4e2d\u6211\u4eec\u77e5\u9053\uff0c\u5982\u679c\u6811\u7684\u9ad8\u5ea6\u4e3ah\uff0c\u90a3\u4e48\u6700\u591a\u67092^h-1\u4e2a\u8282\u70b9\uff0c\u4f46\u5728\u591a\u6b21\u63d2\u5165\u6216\u5220\u9664\u540e\u53ef\u80fd\u9000\u5316\u4e3a\u94fe\u8868\u4ece\u800c\u964d\u4f4e\u6548\u7387</p> <p>\u800cAVL\u6811\u662f\u4e00\u79cd\u81ea\u5e73\u8861\u7684\u4e8c\u53c9\u67e5\u627e\u6811\uff0c\u5b83\u7684\u5de6\u53f3\u5b50\u6811\u7684\u9ad8\u5ea6\u5dee\u4e0d\u8d85\u8fc71\u3002\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u4fdd\u8bc1AVL\u6811\u7684\u9ad8\u5ea6\u4e3aO(logn)\u3002\u8fd9\u6837\u6211\u4eec\u5c31\u53ef\u4ee5\u4fdd\u8bc1AVL\u6811\u7684\u67e5\u627e\u3001\u63d2\u5165\u3001\u5220\u9664\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(logn)\u3002</p>"},{"location":"ZJU_CS/ADS/week1/#_1","title":"\u5e73\u8861\u56e0\u5b50","text":"<p>\u5e73\u8861\u56e0\u5b50\u662f\u6307\u5de6\u5b50\u6811\u7684\u9ad8\u5ea6\u51cf\u53bb\u53f3\u5b50\u6811\u7684\u9ad8\u5ea6\uff0c\u5373balance = height(left) - height(right)\u3002\u5728AVL\u6811\u4e2d\uff0c\u5e73\u8861\u56e0\u5b50\u7684\u53d6\u503c\u8303\u56f4\u4e3a-1, 0, 1\u3002</p>"},{"location":"ZJU_CS/ADS/week1/#_2","title":"\u65cb\u8f6c","text":"<p>\u4e2a\u4eba\u8ba4\u4e3a\u5de6\u65cb\u548c\u53f3\u65cb\u7684\u601d\u60f3\u6ca1\u4ec0\u4e48\u672c\u8d28\u533a\u522b\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b\u56fe\u6240\u793a </p> <p>\u65cb\u8f6c\u7684\u9009\u62e9</p> <p>|\u5931\u8861\u8282\u70b9\u7684\u5e73\u8861\u56e0\u5b50 \uff5c \u5b50\u8282\u70b9\u7684\u5e73\u8861\u56e0\u5b50 | \u5e94\u91c7\u7528\u7684\u65cb\u8f6c\u65b9\u6cd5| |---|---|---| | \\(&gt;1\\) | \\(\\geq 0\\) | \u53f3\u65cb | | \\(&gt;1\\) | \\(&lt; 0\\) | \u5148\u5de6\u65cb\u518d\u53f3\u65cb | | \\(&lt;-1\\) | \\(\\leq 0\\) | \u5de6\u65cb | | \\(&lt;-1\\) | \\(&gt; 0\\) | \u5148\u53f3\u65cb\u518d\u5de6\u65cb |</p>"},{"location":"ZJU_CS/ADS/week1/#_3","title":"\u63d2\u5165\u548c\u5220\u9664","text":"<p>PPT \u4e2d\u672a\u505a\u8bb2\u89e3\uff0c\u53ef\u4ee5\u770bOI-Wiki\u7684AVL\u6811</p>"},{"location":"ZJU_CS/ADS/week1/#splay_tree","title":"Splay tree","text":"<p>link</p> <p>OI Wiki: https://oi-wiki.org/ds/splay/</p> <p>Splay \u6811\uff0c\u5373\u4f38\u5c55\u6811\uff0c\u60f3\u8981\u89e3\u51b3\u7684\u95ee\u9898\u548c AVL \u6811\u7c7b\u4f3c\uff0c\u53ea\u4e0d\u8fc7 Splay \u6811\u5e0c\u671b\u8fbe\u5230\u7684\u76ee\u6807\u662f\u5728\u644a\u8fd8(Amortized)\u590d\u6742\u5ea6\\(O(\\log N)\\)\u7684\u60c5\u51b5\u4e0b\u5b8c\u6210\u5927\u90e8\u5206\u5bf9\u70b9\u64cd\u4f5c\u3002</p> <p>\u6211\u4eec\u77e5\u9053\uff0c\u4e3a\u4f7f AVL \u4fdd\u6301\u5e73\u8861\uff0c\u6211\u4eec\u9700\u8981\u7ef4\u62a4\u4ece\u6839\u8282\u70b9\u5230 Trouble Maker \u8fd9\u6761\u8def\u5f84\u4e0a\u6240\u6709\u70b9\u7684\u5e73\u8861\u56e0\u5b50\u3002\u800c Splay \u5219\u4e0d\u518d\u7ef4\u62a4\u8fd9\u4e9b\u4fe1\u606f\uff0c\u8fd9\u610f\u5473\u7740\u6211\u4eec\u65e0\u6cd5\u4fdd\u8bc1 Splay \u6811\u7684\u72b6\u6001\u90fd\u662f\u5e73\u8861\u7684\uff0c\u4f46\u662f\u6211\u4eec\u5e0c\u671b\u5b83\u5c3d\u53ef\u80fd\u5e73\u8861\u3002\u5177\u4f53\u6765\u8bf4\u5c31\u662f\u5bf9\u4e8e \\(M\\) \u6b21\u4efb\u610f\u64cd\u4f5c\uff0c\u5176\u65f6\u95f4\u590d\u6742\u5ea6\u90fd\u4e3a \\(O(M\\log N)\\)\uff0c\u5747\u644a\u4e0b\u6765\u8fd9 \\(M\\) \u4e2a\u64cd\u4f5c\u6bcf\u4e00\u4e2a\u90fd\u9700\u8981 \\(O(\\log N)\\)\u3002</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u6811\uff0c\u6211\u4eec\u5bf9\u5176\u8282\u70b9\u8fdb\u884c\u7684\u64cd\u4f5c\u53ef\u80fd\u662f\uff1a\u589e\u70b9\u3001\u5220\u70b9\u3001\u6539\u70b9\u3001\u67e5\u70b9\u7b49\u7b49\uff0c\u800c\u4e0d\u540c\u7c7b\u578b\u7684\u64cd\u4f5c\u5f00\u9500\u53ef\u80fd\u4e0d\u5c3d\u76f8\u540c\u3002\u7b80\u5355\u7684\u8ba1\u7b97\u5176\u5e73\u5747\u503c\u5219\u5ffd\u7565\u4e86\u8fd9\u4e9b\u64cd\u4f5c\u4e4b\u95f4\u4e92\u76f8\u7684\u5f71\u54cd\u6216\u8005\u662f\u64cd\u4f5c\u9891\u7387\u7684\u95ee\u9898\uff0c\u6240\u4ee5\u6211\u4eec\u8fd9\u91cc\u4f7f\u7528\u644a\u8fd8\u590d\u6742\u5ea6\u6765\u63cf\u8ff0\u5176\u6548\u7387\u3002</p> <p>\u5173\u4e8e\u644a\u8fd8\u7684\u95ee\u9898\u6211\u4eec\u8fd8\u4f1a\u5728\u4e4b\u540e\u8fdb\u4e00\u6b65\u6df1\u5165\u3002</p> <p>\u90a3\u4e48\u8bf4\u4e86\u8fd9\u4e48\u591a\uff0cSplay \u662f\u600e\u4e48\u5b9e\u73b0\u8fd9\u4e00\u76ee\u6807\u7684\u5462\uff1f</p> <p>Splay \u7684\u6838\u5fc3\u601d\u60f3\u5c31\u662f\uff0c\u6bcf\u5f53\u6211\u4eec\u8bbf\u95ee\u4e00\u4e2a\u8282\u70b9\uff08\u6bd4\u5982\u67e5\u8be2\u67d0\u4e2a\u70b9\u3001\u63d2\u5165\u67d0\u4e2a\u70b9\uff0c\u751a\u81f3\u662f\u5220\u9664\u67d0\u4e2a\u70b9\uff09\uff0c\u6211\u4eec\u5c31\u901a\u8fc7\u4e00\u7cfb\u5217\u64cd\u4f5c\u5c06\u76ee\u6807\u70b9\u8f6c\u79fb\u5230\u6839\u90e8\uff0c\u5f62\u8c61\u4e0a\u7406\u89e3\u5c31\u662f\u4e0d\u65ad\u65cb\u8f6c\u6574\u4e2a\u6811\u7684\u6784\u9020\uff0c\u77e5\u9053\u628a\u70b9\u8f6c\u5230\u6839\u90e8\u3002</p> <p>\u4f8b\u5982\u6211\u4eec\u67e5\u8be2\u70b9 \\(k_1\\)\uff0c\u5219\u4f1a\u901a\u8fc7\u65cb\u8f6c\u5c06\u5b83\u8f6c\u5230\u6839\u3002</p> Frame 1Frame 2Frame 3 <p></p> <p></p> <p></p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0cFrame 1 ~ 2 \u5c31\u662f\u6211\u4eec\u524d\u9762\u63d0\u5230\u8fc7\u7684 LR Rotation\uff0c\u800c Frame 2 ~ 3 \u5c31\u662f\u7ecf\u8fc7\u4e86\u4e24\u6b21 LL Rotation\u3002\u5f53\u7136\uff0c\u5728 Splay \u91cc\u8fd9\u4e9b\u64cd\u4f5c\u90fd\u6709\u4e86\u65b0\u7684\u540d\u5b57\u3002</p> <p>\u8fd9\u4e2a\u4f8b\u5b50\u53ea\u662f\u4e3a\u4e86\u7ed9\u8bfb\u8005\u4e00\u4e2a\u521d\u59cb\u5370\u8c61\uff0c\u4e4b\u540e\u6211\u4eec\u5c06\u66f4\u8be6\u7ec6\u3001\u51c6\u786e\u7684\u4ecb\u7ecd\u64cd\u4f5c\u3002</p> <p>\uff08\u6ca1\u73a9\u8fc7\u53ef\u80fd\u542c\u4e0d\u592a\u61c2\uff09\u4e0d\u77e5\u9053\u5927\u5bb6\u6709\u6ca1\u6709\u73a9\u8fc7\u90a3\u79cd\u7535\u5b50\u6e38\u620f\uff0c\u5c31\u662f\u6709\u597d\u591a\u8f6c\u76d8\uff0c\u76f8\u90bb\u8f6c\u76d8\u4e4b\u95f4\u6709\u4ea4\u754c\u5904\uff0c\u8fd9\u4e9b\u4ea4\u754c\u70b9\u4e0a\u90fd\u4f1a\u6709\u5706\u7403\uff0c\u5f53\u4e00\u4e2a\u8f6c\u76d8\u65cb\u8f6c\u7684\u65f6\u5019\uff0c\u5176\u5706\u5468\u4e0a\u7684\u7403\u4f53\u90fd\u4f1a\u8ddf\u7740\u8fd9\u4e2a\u5706\u5468\u8f6c\u52a8\u3002\u901a\u8fc7\u4e0d\u505c\u8f6c\u52a8\u76f8\u90bb\u7684\u5706\u76d8\uff0c\u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0\u628a\u67d0\u4e2a\u4f4d\u7f6e\u7684\u5706\u7403\u8f6c\u79fb\u5230\u53e6\u5916\u4e00\u4e2a\u4f4d\u7f6e\u3002\u800c Splay \u5dee\u4e0d\u591a\u662f\u8fd9\u4e48\u4e2a\u611f\u89c9\u3002</p>"},{"location":"ZJU_CS/ADS/week1/#_4","title":"\u57fa\u672c\u64cd\u4f5c","text":"<p>\u9996\u5148\u6211\u4eec\u505a\u4e00\u4e2a\u7ea6\u5b9a\uff0c\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a\u8282\u70b9 X\uff0c\u6211\u4eec\u8bb0\u5176\u7236\u8282\u70b9\u4e3a P(Parent)\uff0c\u5176\u7236\u8282\u70b9\u7684\u7236\u8282\u70b9\u4e3a G(Grandparent)\u3002</p> <ul> <li>\u5f53\u6211\u4eec\u8bbf\u95ee\u5230\u67d0\u4e2a\u70b9 X \u65f6\uff1a<ul> <li>\u5982\u679c P \u662f\u6839\u8282\u70b9\uff0c\u5219\u76f4\u63a5\u8fdb\u884c\u4e00\u6b21 Single Rotation\uff0c\u5c06 X \u8f6c\u5230\u6839\u8282\u70b9\uff1b</li> <li>\u5982\u679c P \u4e0d\u662f\u6839\u8282\u70b9\uff1a<ul> <li>\u5f53\u60c5\u51b5\u4e3a LR / RL \u65f6\uff0c\u8fdb\u884c\u4e00\u6b21 LR Rotation \u6216 RL Rotation\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a zig-zag\uff1b</li> <li>\u5f53\u60c5\u51b5\u4e3a LL / RR \u65f6\uff0c\u8fdb\u884c\u4e24\u6b21 Single Rotation\uff0c\u4f7f\u5f97 X\u3001P\u3001G \u7684\u987a\u5e8f\u9006\u8f6c\uff0c\u50cf\u8df7\u8df7\u677f\u4e00\u6837\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a zig-zig\uff1b</li> </ul> </li> <li>\u4e0d\u65ad\u5bf9 X \u8fdb\u884c Splay \u64cd\u4f5c\uff0c\u76f4\u5230 X \u6210\u4e3a\u6839\u8282\u70b9\uff1b</li> </ul> </li> </ul> <p></p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u5176\u5177\u4f53\u64cd\u4f5c\u57fa\u672c\u5c31\u548c AVL \u6811\u7684\u76f8\u5173\u64cd\u4f5c\u6709\u5f88\u5927\u91cd\u5408\u3002</p> <p>\u6548\u679c</p> <p>Splaying not only moves the accessed node to the root, but also roughly halves the depth of most nodes on the path.</p>"},{"location":"ZJU_CS/ADS/week1/#_5","title":"\u5bf9\u70b9\u64cd\u4f5c","text":"<p>\u7531\u4e8e Splay Tree \u9664\u4e86\u5728\u5b8c\u6210\u6240\u6709\u64cd\u4f5c\u4ee5\u540e\u90fd\u9700\u8981\u8fdb\u884c\u4e00\u6b21 Splay \u64cd\u4f5c\uff0c\u5176\u4ed6\u90e8\u5206\u90fd\u548c BST \u4e00\u6837\uff0c\u6240\u4ee5\u8fd9\u91cc\u53ea\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b Splay \u7684\u90e8\u5206\u3002</p> <p>Find X</p> <p>\u6839\u636e BST \u7684\u6027\u8d28\uff0c\u53ef\u4ee5\u5728 \\(O(\\log N)\\) \u7684\u65f6\u95f4\u91cc\u627e\u5230 \\(X\\)\uff0c\u63a5\u4e0b\u6765\u901a\u8fc7\u65cb\u8f6c\u64cd\u4f5c\uff0c\u5c06 \\(X\\) \u4e0d\u65ad\u65cb\u8f6c\u81f3\u6839\uff0c\u6700\u7ec8\u76f4\u63a5\u53d6\u51fa Root \u5373\u4e3a\u7ed3\u679c\u3002   </p> <p>Remove X</p> <p>\u6839\u636e BST \u7684\u6027\u8d28\uff0c\u53ef\u4ee5\u5728 \\(O(\\log N)\\) \u7684\u65f6\u95f4\u91cc\u627e\u5230 \\(X\\)\uff0c\u63a5\u4e0b\u6765\u901a\u8fc7\u65cb\u8f6c\u64cd\u4f5c\uff0c\u5c06 \\(X\\) \u4e0d\u65ad\u65cb\u8f6c\u81f3\u6839\uff0c\u63a5\u4e0b\u6765\u5220\u9664 Root \u8282\u70b9\uff0c\u5e76\u5728\u7ef4\u62a4 BST \u6027\u8d28\u7684\u60c5\u51b5\u4e0b\u9012\u5f52\u5730\u5408\u5e76\u5de6\u53f3\u5b69\u5b50\u6811\u5373\u53ef\u3002</p> <p>Find Max</p> <p>\u6839\u636e BST \u7684\u6027\u8d28\uff0c\u53ef\u4ee5\u5728 \\(O(\\log N)\\) \u7684\u65f6\u95f4\u91cc\u627e\u5230\u6700\u5927\u503c\uff0c\u5c06\u5b83\u65cb\u8f6c\u5230\u6839\u90e8\u4ee5\u540e\uff0c\u53ef\u4ee5\u53d1\u73b0\u5b83\u6ca1\u6709\u53f3\u5b69\u5b50\u6811\uff0c\u76f4\u63a5\u5220\u6389\u5c31\u884c\u3002</p>"},{"location":"ZJU_CS/ADS/week1/#_6","title":"\u644a\u8fd8\u5206\u6790","text":"<p>\u6b64\u5904\uff0c\u6211\u4eec\u5c06\u4f7f\u7528\u52bf\u80fd\u6cd5\u6765\u5206\u6790 Splay \u7684\u644a\u8fd8\u590d\u6742\u5ea6\uff0c\u7531\u4e8e\u8bfe\u4ef6\u7701\u7565\u4e86\u5f88\u591a\u7ec6\u8282\u4e0a\u7684\u89e3\u91ca\uff0c\u8fd9\u91cc\u4f1a\u8865\u5145\u975e\u5e38\u591a\u5185\u5bb9\u3002</p> <p>reference</p> <p>http://www2.hawaii.edu/~nodari/teaching/f19/scribes/notes06.pdf</p> <p>\u5f00\u59cb\u5206\u6790\u4e4b\u524d\uff0c\u6211\u4eec\u9996\u5148\u9700\u8981\u660e\u786e\u5206\u6790\u7684\u76ee\u6807\uff1a</p> <p>\u5bf9\u4e8e Splay\uff0c\u5b83\u4e0d\u50cf\u6211\u4eec\u5728 Topic | Amortized Analysis \u63d0\u5230\u7684\u90a3\u4e9b\u6848\u4f8b\u4e00\u6837\uff0c\u5b58\u5728\u660e\u663e\u7684\u51cf\u52bf\u548c\u589e\u52bf\u884c\u4e3a\u3002\u5bf9\u4e8e Splay \u6765\u8bf4\uff0c\u6240\u6709\u6211\u4eec\u63d0\u5230\u7684\u64cd\u4f5c\u90fd\u4f9d\u8d56\u4e8e\u5c06\u76ee\u6807\u70b9\u65cb\u8f6c\u5230\u6839\u6765\u5b9e\u73b0\uff0c\u800c\u8fd9\u4e5f\u6210\u4e3a\u5176\u4e3b\u8981\u5f00\u9500\uff08\u90e8\u5206\u5e38\u6570\u64cd\u4f5c\u663e\u7136\u88ab\u8986\u76d6\uff0c\u63d2\u5165\u4e4b\u7c7b\u7684\u64cd\u4f5c\u4e4b\u6240\u4ee5\u80fd\u88ab\u5ffd\u7565\u7684\u539f\u56e0\uff0c\u53ef\u4ee5\u53c2\u8003 ltgg \u7684\u8fd9\u7bc7\u6587\u7ae0\uff09\u3002\u5176\u4e2d\u6211\u4eec\u4f1a\u7528\u5230\u82e5\u5e72\u6b21 <code>zig</code>\u3001<code>zig-zag</code>\u3001<code>zig-zig</code> \u7684\u64cd\u4f5c\u3002</p> <p>\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u8ba4\u4e3a\uff0c\u6211\u4eec\u8981\u5206\u6790\u7684\u76ee\u6807\u4e3a\uff1a</p> \\[ T_{\\text{rotate }x\\text{ to root}} = T_{\\text{zig}} + \\sum{ {T_{\\text{zig-zag}}}_i } + \\sum{ {T_{\\text{zig-zig}}}_i } \\] <p>\u4e0a\u9762\u4e09\u4e2a\u90e8\u5206\u6bcf\u4e00\u4e2a\u90fd\u6709\u53ef\u80fd\u662f \\(0\\)\uff0c\u800c <code>zig</code> \u6700\u591a\u53ea\u4f1a\u53d1\u751f\u4e00\u6b21\uff01</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u9700\u8981\u8bbe\u8ba1\u4e00\u4e2a\u52bf\u80fd\u51fd\u6570 \\(\\Phi(x)\\)\uff0c\u5e76\u4e14\u6839\u636e\u6211\u4eec\u63d0\u5230\u8fc7\u7684\u52bf\u80fd\u5206\u6790\u6cd5\u7684\u7279\u6027\uff0c\\(\\Phi(x)\\) \u5e94\u8be5\u5177\u6709\u8fd9\u4e48\u51e0\u4e2a\u7279\u5f81\uff1a</p> <ul> <li>\u5f00\u9500\u5927\u7684\u64cd\u4f5c\u5e94\u5f53\u503e\u5411\u8ba9\u52bf\u80fd\u964d\uff0c\u5f00\u9500\u5c0f\u7684\u64cd\u4f5c\u5e94\u5f53\u503e\u5411\u8ba9\u52bf\u80fd\u5347\uff1b</li> <li>\u52bf\u80fd\u9ad8\u503e\u5411\u4e8e\u8ba9\u67d0\u4e9b\u64cd\u4f5c\u5f00\u9500\u5927\uff0c\u52bf\u80fd\u4f4e\u503e\u5411\u4e8e\u8ba9\u67d0\u4e9b\u64cd\u4f5c\u5f00\u9500\u5c0f\uff1b</li> <li>\\(\\Phi(final) &gt; \\Phi(initial)\\)\uff1b</li> </ul> <p>\u4e8e\u662f\u8fd9\u91cc\u6211\u4eec\u8bbe\u8ba1\u7684\u52bf\u80fd\u51fd\u6570\u4e3a\uff1a</p> \\[ \\Phi(T) = \\sum_{des \\in T} \\log Size(des) = \\sum_{des \\in T} Rank(des)\\\\ \\begin{aligned}     &amp;\\text{Where } des \\text{ means the descendant of } T \\text{,}\\\\     &amp;\\text{and } Size(des) \\text{ means the number of the nodes of } des \\text{.} \\\\     &amp;\\text{And we note } Rank(des) = \\log Size(des) \\approx Height(des) \\text{.} \\end{aligned} \\] <p>\u7528\u8bed\u8a00\u63cf\u8ff0\u4e00\u4e0b\u5c31\u662f\uff0c\u5bf9\u4e8e\u67d0\u4e2a\u5b69\u5b50\u6811 \\(T\\)\uff0c\u5176\u52bf\u80fd\u51fd\u6570 \\(\\Phi(T)\\) \u7b49\u4e8e\u4ee5\u6240\u6709\u5b83\u7684\u540e\u4ee3\u4e3a\u6839\u7684\u5b69\u5b50\u6811\u7684\u5927\u5c0f\u53d6\u5bf9\u6570\u4ee5\u540e\u6c42\u548c\u3002</p> <p>Rank v.s. Height</p> <p>\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\u7684\u4e00\u4e2a\u70b9\u662f\uff0c\u867d\u7136 \\(Rank(des) \\approx Height(des)\\)\uff0c\u4f46\u662f\u6211\u4eec\u4e0d\u5e94\u8be5\u7528 \\(Height()\\) \u6765\u4ee3\u66ff \\(Rank()\\)\uff0c\u4e3b\u8981\u539f\u56e0\u662f\u5728\u65cb\u8f6c\u8fc7\u7a0b\u4e2d\uff0c\\(Rank()\\) \u4e0d\u4f1a\u53d8\u5316\uff08\u56e0\u4e3a \\(Size()\\) \u4e0d\u4f1a\u53d8\u5316\uff09\uff0c\u4f46\u662f \\(Height()\\) \u53ef\u80fd\u53d8\u5316\u3002\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u5982\u679c\u9009\u7528 \\(Height()\\) \u4f5c\u4e3a\u52bf\u80fd\u51fd\u6570\uff0c\u6211\u4eec\u5c31\u4e0d\u5f97\u5df2\u8003\u8651\u6574\u68f5\u6811\uff0c\u800c\u975e\u53ea\u9700\u8981\u8003\u8651\u5f53\u524d\u65cb\u8f6c\u6d89\u53ca\u7684\u5b69\u5b50\u6811\u3002</p> <p>\u5173\u4e8e\u6b63\u786e\u6027\u7684\u8bf4\u660e\uff0c\u6211\u4f1a\u653e\u5728\u4e4b\u540e\u7684\u8fc7\u7a0b\u4e2d\u4e00\u4e2a\u4e2a\u63d2\u5165\uff0c\u5b83\u4eec\u4f1a\u88ab\u5305\u88f9\u5728 <code>key-point</code> \u6587\u5b57\u6846\u4e2d\uff0c\u8bf7\u6ce8\u610f\u8fd9\u4e9b\u5185\u5bb9\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u53ef\u4ee5\u5f00\u59cb\u5206\u6790\u4e86\uff0c\u6839\u636e\u6211\u4eec\u7ed9\u5b9a\u7684\u76ee\u6807\uff1a</p> \\[ T_{\\text{rotate }x\\text{ to root}} = T_{\\text{zig}} + \\sum{ {T_{\\text{zig-zag}}}_i } + \\sum{ {T_{\\text{zig-zig}}}_i } \\] <p>\u6211\u4eec\u5229\u7528\u5747\u644a\u5206\u6790\uff0c\u9700\u8981\u5f97\u5230\u4e00\u4e2a\u5e73\u6ed1\u4e0a\u754c\uff1a</p> \\[ \\hat{c}_{\\text{rotate }x\\text{ to root}} = \\hat{c}_{\\text{zig}} + \\sum{ {\\hat{c}_{\\text{zig-zag}}}_i } + \\sum{ {\\hat{c}_{\\text{zig-zig}}}_i } \\] <p>\u800c\u6211\u4eec\u9700\u8981\u8bc1\u660e \\(\\hat{c}_{\\text{rotate }x\\text{ to root}} = O(\\log{N})\\)\uff0c\u73b0\u5728\u6211\u4eec\u9700\u8981\u5206\u522b\u5206\u6790 <code>zig</code>\u3001<code>zig-zag</code>\u3001<code>zig-zig</code>\u3002</p>"},{"location":"ZJU_CS/ADS/week1/#zig","title":"zig","text":"<p>Amortized Analysis for Zig</p> <p></p> \\[ \\begin{aligned}     {\\hat{c}_{\\text{zig}}}_i     &amp;= {c_{\\text{zig}}}_i + \\Phi_{i}(X) - \\Phi_{i-1}(P) \\\\     &amp;= 1 + Rank_{i}(X) - Rank_{i-1}(X) +  Rank_{i}(P) - Rank_{i-1}(P) \\end{aligned} \\] <p>\u89c2\u5bdf\u914d\u56fe\uff0c\\(X\\) \u591a\u4e86 \\(P\\) \u548c \\(C\\) \u4f5c\u4e3a\u5b50\u55e3\uff0c\u800c \\(P\\) \u60b2\u60e8\u5730\u5931\u53bb\u4e86 \\(X\\) \u4e00\u65cf\uff0c\u751a\u81f3\u6210\u4e86 \\(X\\) \u7684\u540e\u4ee3\uff0c\u5373 \\(X\\) \u76db \\(P\\) \u8870\uff0c\u56e0\u6b64\u5c31\u6709\u4e0d\u7b49\u5f0f\uff1a</p> \\[ \\left\\{     \\begin{aligned}         &amp; Rank_{i}(X) - Rank_{i-1}(X) \\geq 0\\\\         &amp; Rank_{i}(P) - Rank_{i-1}(P) \\leq 0     \\end{aligned}     \\right. \\] <p>\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u505a\u7b80\u5355\u7684\u7f29\u653e\uff1a</p> \\[ \\begin{aligned}     {\\hat{c}_{\\text{zig}}}_i     &amp;= 1 + \\underbrace{Rank_{i}(X) - Rank_{i-1}(X)}_{\\geq 0} + \\underbrace{Rank_{i}(P) - Rank_{i-1}(P)}_{\\leq 0} \\\\     &amp;\\leq 1 + Rank_{i}(X) - Rank_{i-1}(X) \\end{aligned} \\] <p>\u4e3a\u4ec0\u4e48\u4e0d\u662f\u53e6\u5916\u4e00\u79cd\u9009\u62e9 / \u4e3a\u4f55\u8fd9\u6837\u7f29\u653e\uff1f</p> <p>\u8fd9\u4e00\u90e8\u5206\u5728 cy \u7684 PPT \u91cc\u5e76\u6ca1\u6709\u8be6\u7ec6\u8bf4\u660e\uff0c\u4f46\u662f\u6211\u8ba4\u4e3a\u8fd9\u662f\u8fd9\u4e2a\u5206\u6790\u65b9\u6cd5\u6210\u7acb\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u56e0\u7d20\uff01</p> <p>\u4e5f\u8bb8\u4f60\u5df2\u7ecf\u6ce8\u610f\u5230\u4e86\uff0c\u53c8\u6216\u8005\u4f60\u4e86\u89e3\u4e86\u4e4b\u540e\u4e24\u79cd\u5206\u6790\uff0c\u53c8\u56de\u8fc7\u5934\u6765\u601d\u8003\u53d1\u73b0\uff0c\u8fd9\u91cc\u5176\u5b9e\u5b58\u5728\u53e6\u5916\u4e00\u79cd\u66f4\u7d27\u51d1\u7684\u7f29\u653e\u65b9\u6cd5\uff08\u751a\u81f3\u4e0d\u80fd\u8bf4\u201c\u7f29\u653e\u201d\uff09\uff0c\u89c2\u5bdf\u5230 \\(Size_{i}(X) =Size_{i-1}(P)\\)\uff0c\u6240\u4ee5\uff1a</p> \\[ \\begin{aligned}     {\\hat{c}_{\\text{zig}}}_i     &amp;= 1 + Rank_{i}(P) - Rank_{i-1}(X) + \\underbrace{Rank_{i}(X) - Rank_{i-1}(P)}_{= 0} \\\\     &amp;= 1 + Rank_{i}(P) - Rank_{i-1}(X) \\end{aligned} \\] <p>\u4f46\u662f\u8fd9\u4e0d\u4fbf\u4e8e\u6211\u4eec\u4e4b\u540e\u7684\u4f20\u9012\u3002\u8fd8\u8bb0\u5f97\u6211\u4eec\u8981\u6c42\u7684\u76ee\u6807\u5417\uff1f</p> \\[ \\hat{c}_{\\text{rotate }x\\text{ to root}} = \\hat{c}_{\\text{zig}} + \\sum{ {\\hat{c}_{\\text{zig-zag}}}_i } + \\sum{ {\\hat{c}_{\\text{zig-zig}}}_i } \\] <p>\u6211\u4eec\u4e4b\u540e\u9700\u8981\u5bf9\u5404\u79cd \\(\\hat{c}\\) \u8fdb\u884c\u6c42\u548c\uff0c\u800c\u6bcf\u4e00\u6b21\u7684 \\(X,\\;P,\\;G\\) \u90fd\u662f\u4e0d\u540c\u7684\uff0c\u4e3a\u4e86\u5728\u6c42\u548c\u7684\u65f6\u5019\u5b9e\u73b0\u9519\u4f4d\u76f8\u51cf\uff0c\u6211\u4eec\u5fc5\u987b\u4fdd\u8bc1\u7f29\u653e\u5f97\u5230\u7684\u7ed3\u679c\u5177\u6709\u4e00\u5b9a\u7684\u4f20\u9012\u6027\u8d28\uff0c\u6216\u8005\u8bf4\u5728\u6c42\u548c\u8fc7\u7a0b\u4e2d\u80fd\u591f\u8fbe\u5230\u88c2\u9879\u76f8\u6d88\u7684\u6548\u679c\u3002</p> <p>\u800c\u5bf9\u4e8e Splay \u6765\u8bf4\uff0c\u6211\u4eec\u7684\u64cd\u4f5c\u4f20\u9012\uff0c\u6b63\u662f\u901a\u8fc7\u4e0d\u65ad\u5c06\u6211\u4eec\u5173\u6ce8\u7684 \\(X\\) \u70b9\u9012\u5f52\u5730\u5411\u4e0a\u65cb\u8f6c\u5b9e\u73b0\u7684\u3002\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\\(\\Phi_{i}(X)\\) \u4e2d\u7684 \\(X\\)\uff0c\u5c31\u662f \\(\\Phi_{i-1}(X)\\) \u4e2d\u7684 \\(X\\)\uff0c\u5982\u6b64\u6211\u4eec\u6700\u7ec8\u53ef\u4ee5\u5f97\u5230 \\(\\Phi_{n}(X) - \\Phi_{0}(X)\\)\uff0c\u800c\u5176\u4e2d\u4e00\u4e2a\u662f\u6839\uff0c\u4e00\u4e2a\u662f\u6211\u4eec\u4e00\u5f00\u59cb\u6253\u7b97\u64cd\u4f5c\u7684\u90a3\u4e2a\u70b9\u3002</p> <p>\u4e8e\u662f\u6211\u4eec\u7406\u60f3\u7684\u7f29\u653e\u76ee\u6807\u5c31\u662f \\(k(Rank_{i}(X) - Rank_{i-1}(X)) \\;\\; \\text{where } k \\text{ is fixed for all the terms}\\)\u3002</p> <p>\u4e0d\u8fc7\u4f60\u53ef\u80fd\u53c8\u8981\u63d0\u95ee\u4e86\uff0c<code>zig</code> \u5206\u6790\u7684\u7ed3\u679c\u91cc\u4e0d\u662f\u6709\u4e2a \\({c_{\\text{zig}}}_i = 1\\) \u5417\uff1f</p> <p>\u8fd9\u662f\u56e0\u4e3a <code>zig</code> \u6700\u591a\u53ea\u53d1\u751f\u4e00\u6b21\uff0c\u6240\u4ee5\u8fd9\u4e2a\u5e38\u6570\u662f\u6ca1\u6709\u5f71\u54cd\u7684\u3002</p> <p>\u771f\u7684\u9700\u8981\u90fd\u7f29\u653e\u5230\u76f8\u540c\u7684 k \u5417</p> <p>\u968f\u4e4b\u800c\u6765\u7684\uff0c\u4e00\u4e2a\u9700\u8981\u8ba8\u8bba\u7684\u95ee\u9898\u662f\u300c\\(\\text{where } k \\text{ is fixed for all the terms}\\)\u300d\u771f\u7684\u91cd\u8981\u5417\uff0c\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u6211\u4eec\u5fc5\u987b\u4fdd\u8bc1\u4e09\u4e2a\u90e8\u5206\u7f29\u653e\u51fa\u6765\u90fd\u5177\u6709\u76f8\u540c\u7684 \\(k\\) \u5417\uff1f</p> <p>\u9996\u5148\uff0c\u91cd\u8981\u80af\u5b9a\u662f\u91cd\u8981\u7684\uff0c\u53ea\u4e0d\u8fc7\u5728\u8fd9\u4e2a\u95ee\u9898\u4e2d\uff0c\u7531\u4e8e\u6211\u4eec\u65cb\u8f6c\u7684\u65b9\u5411\u90fd\u662f\u5411\u4e0a\uff0c\u6240\u4ee5 \\(Rank_{i}(X) \\geq Rank_{i-1}(X)\\)\uff0c\u56e0\u6b64\u6211\u4eec\u53ea\u9700\u8981\u6700\u540e\u5c06\u5b83\u4eec\u4e00\u8d77\u90fd\u7f29\u653e\u5230 \\(k_{overall} = \\max\\{k_\\text{zig}, k_\\text{zig-zag}, k_\\text{zig-zig} \\}\\) \u5c31\u53ef\u4ee5\u4e86\u3002</p>"},{"location":"ZJU_CS/ADS/week1/#zig-zag","title":"zig-zag","text":"<p>Amortized Analysis for Zig-Zag</p> <p></p> \\[ \\begin{aligned}     {\\hat{c}_{\\text{zig-zag}}}_i      &amp;= {c_{\\text{zig-zag}}}_i + \\Phi_{i}(X)- \\Phi_{i-1}(G) \\\\     &amp;= 2 + Rank_{i}(X) - Rank_{i-1}(X) + Rank_{i}(P) - Rank_{i-1}(P) + Rank_{i}(G) - Rank_{i-1}(G) \\end{aligned} \\] <p>\u89c2\u5bdf\u914d\u56fe\uff0c\\(X\\) \u53c8\u4e00\u6b21\u7edd\u5730\u53cd\u51fb\uff0c\u6210\u4e3a\u5b83\u5bb6\u957f\u548c\u5b83\u5bb6\u957f\u7684\u5bb6\u957f\u5171\u540c\u7684\u5bb6\u957f\uff1b\\(G\\) \u635f\u5931\u6700\u60e8\u91cd\uff0c\u4e22\u6389\u4e86 \\(A,\\;B\\) \u4e24\u65cf\u5b50\u55e3\u3002</p> <p>\u5728\u8fd9\u6b21\u7684\u7f29\u653e\u4e2d\uff0c\u6839\u636e\u6211\u4eec\u4e4b\u524d\u5728 <code>key-point</code> \u91cc\u63d0\u5230\u7684\uff0c\u6211\u4eec\u9700\u8981\u5c06\u5b83\u7f29\u653e\u5230 \\(k(Rank_{i}(X) - Rank_{i-1}(X))\\) \u7684\u5f62\u5f0f\uff0c\u5e76\u4e14\u7531\u4e8e <code>zig-zig</code> \u4f1a\u591a\u6b21\u53d1\u751f\uff0c\u6240\u4ee5\u6211\u4eec\u4e5f\u5f97\u60f3\u529e\u6cd5\u641e\u6389\u8fd9\u91cc\u7684 \\({c_{\\text{zig-zag}}}_i = 2\\)\uff0c\u5426\u5219\u6700\u540e\u5c31\u4f1a\u51fa\u73b0\u4e00\u4e2a \\(2p(n)\\) \u7684 term\uff0c\u800c\u6211\u4eec\u7684\u8bc1\u660e\u76ee\u6807\u662f \\(\\log{N}\\)\uff0c\u6240\u4ee5\u6211\u4eec\u5fc5\u987b\u5c06\u8fd9\u4e2a \\(2\\) \u6d88\u6389\u3002\u800c\u4e3a\u4e86\u6d88\u9664\u8fd9\u4e2a \\(2\\)\uff0c\u6211\u4eec\u9700\u8981\u5148\u5f15\u5165\u4e00\u4e2a\u5f15\u7406\uff1a</p> <p>Lemma 1</p> <p>\u7531\u4e8e \\(y = \\log{x}\\) \u662f\u5355\u8c03\u7684\u51f8\u51fd\u6570\uff0c\u6240\u4ee5\u6709 \\(\\frac{\\log{x} + \\log{b}}{2} \\leq \\log {\\frac{a+b}{2}}\\)\u3002</p> <p>\u800c\u5728 Splay \u7684\u5747\u644a\u590d\u6742\u5ea6\u5206\u6790\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u7684 \\(\\log{x}\\) \u6307\u7684\u662f \\(\\log_2{x}\\)\uff0c\u56e0\u6b64\u6709\uff1a</p> \\[ \\begin{aligned}     \\log{a} + \\log{b}      &amp;= 2\\left( \\frac{\\log{a} + \\log{b}}{2} \\right) \\\\     &amp;\\leq 2\\left( \\log{\\frac{a+b}{2}} \\right) \\\\     &amp;= 2\\left( \\log{(a+b)} - \\log{2} \\right) \\\\     &amp;= 2 \\log{(a+b)} - 2 \\\\ \\end{aligned} \\] <p>\u770b\u5230\u8fd9\u91cc\u51fa\u73b0\u4e86\u4e00\u4e2a \\(-2\\) \u6211\u4eec\u5c31\u80fd\u957f\u8212\u4e00\u53e3\u6c14\u4e86\uff0c\u8fd9\u4e0b \\({c_{\\text{zig-zag}}}_i = 2\\) \u6b7b\u5230\u4e34\u5934\u54af\uff01\u5bf9\u7167\u914d\u56fe\u770b\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\uff1a</p> \\[ \\begin{aligned}     Rank_{i}(P) + Rank_{i}(G)   &amp;= \\log{Size_{i}(P)} + \\log{Size_{i}(G)} \\\\                                 &amp;\\leq 2\\log{\\left(Size_{i}(P)+Size_{i}(G)\\right)} - 2 &amp; \\text{(Lemma 1)}\\\\                                 &amp;\\leq 2\\log{\\left(Size_{i}(P)+Size_{i}(G)+1\\right)} - 2 \\\\                                 &amp;\\leq 2\\log{Size_{i}(X)} - 2 \\\\                                 &amp;\\leq 2Rank_{i}(X) - 2 \\\\ \\end{aligned} \\] <p>\u56e0\u6b64\uff0c\u6211\u4eec\u80fd\u591f\u5f97\u5230\u8fd9\u4e9b\u76f8\u7b49\u6216\u4e0d\u7b49\u5173\u7cfb\uff1a</p> \\[ \\left\\{     \\begin{aligned}         Rank_{i}(X) &amp;= Rank_{i-1}(G) \\\\         Rank_{i}(P) + Rank_{i}(G) &amp;\\leq 2Rank_{i}(X) - 2 \\\\         Rank_{i-1}(P) + Rank_{i-1}(X) &amp;\\geq 2Rank_{i-1}(X)     \\end{aligned} \\right. \\] <p>\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5b9e\u73b0\u7f29\u653e\uff1a</p> \\[ \\begin{aligned}     {\\hat{c}_{\\text{zig-zag}}}_i      &amp;= 2 + Rank_{i}(X) - Rank_{i-1}(X) + Rank_{i}(P) - Rank_{i-1}(P) + Rank_{i}(G) - Rank_{i-1}(G) \\\\     &amp;= 2 + \\left( Rank_{i}(X) - Rank_{i-1}(G)\\right )           + \\left( Rank_{i}(P) + Rank_{i}(G) \\right)          - \\left( Rank_{i-1}(P) + Rank_{i-1}(X) \\right) \\\\     &amp;\\leq 2 + 0 + 2Rank_{i}(X) - 2 + 2Rank_{i-1}(X) \\\\     &amp;= 2\\left(Rank_{i}(X) - Rank_{i-1}(X)\\right) \\end{aligned} \\] <p>\u7686\u5927\u6b22\u559c\uff01</p>"},{"location":"ZJU_CS/ADS/week1/#zig-zig","title":"zig-zig","text":"<p>Amortized Analysis for Zig-Zig</p> <p></p> \\[ \\begin{aligned}     {\\hat{c}_{\\text{zig-zig}}}_i      &amp;= {c_{\\text{zig-zig}}}_i + \\Phi_{i}(X)- \\Phi_{i-1}(G) \\\\     &amp;= 2 + Rank_{i}(X) - Rank_{i-1}(X) + Rank_{i}(P) - Rank_{i-1}(P) + Rank_{i}(G) - Rank_{i-1}(G) \\end{aligned} \\] <p>\u4e3a\u4e86\u5b9e\u73b0 <code>zig-zig</code> \u7684\u7f29\u653e\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u5bf9 Lemma 1 \u8fdb\u884c\u4e00\u4e2a\u6d3b\u7528\u3002\u5bf9\u7167\u914d\u56fe\uff0c\u5f97\u5230\uff1a</p> \\[ \\begin{aligned}     Rank_{i}(G) + Rank_{i-1}(X)          &amp;\\leq 2\\log{\\left(              \\underbrace{Size_{i}(G)}_{\\mathbf{C}+\\mathbf{D}+G}           + \\underbrace{Size_{i-1}(X)}_{\\mathbf{A}+\\mathbf{B}+X}         \\right)} - 2 &amp; \\text{(Lemma 1)} \\\\         &amp;\\leq 2\\log{\\left( Size_{i}(G) + Size_{i-1}(X) + 1 \\right)} - 2 &amp; \\\\         &amp;= 2\\log{\\left( Size_{i}(X) \\right)} - 2 \\\\         &amp;= 2Rank_{i}(X) - 2 \\\\     Rank_{i}(G)          &amp;\\leq 2Rank_{i}(X) - Rank_{i-1}(X) - 2 \\end{aligned} \\] <p>\u8fd9\u4e00\u6b65\u5f88\u96be\u60f3\uff0c\u4f46\u662f\u4e5f\u975e\u5e38\u5173\u952e\u3002</p> <p>\u4e8e\u662f\uff0c\u6211\u4eec\u6709\u5982\u4e0b\u8fd9\u4e9b\u4e0d\u7b49\u5f0f\uff1a</p> \\[ \\left\\{     \\begin{aligned}         Rank_{i}(X) &amp;= Rank_{i-1}(G) \\\\         Rank_{i}(G) &amp;\\leq 2Rank_{i}(X) - Rank_{i-1}(X) - 2 \\\\         Rank_{i}(P) &amp;\\leq Rank_{i}(X) \\\\         Rank_{i-1}(P) &amp;\\geq Rank_{i-1}(X)     \\end{aligned} \\right. \\] <p>\u4e8e\u662f\u6211\u4eec\u5c31\u53ef\u4ee5\u5bf9\u5176\u8fdb\u884c\u8be1\u5f02\u7684\u7f29\u653e\uff1a</p> \\[ \\begin{aligned}     {\\hat{c}_{\\text{zig-zig}}}_i      &amp;= 2 + Rank_{i}(X) - Rank_{i-1}(X) + Rank_{i}(P) - Rank_{i-1}(P) + Rank_{i}(G) - Rank_{i-1}(G) \\\\     &amp;= 2 + \\left( Rank_{i}(X) - Rank_{i-1}(G) \\right)          + Rank_{i}(G)          + Rank_{i}(P)          - Rank_{i-1}(P)          - Rank_{i-1}(X) \\\\     &amp;\\leq 2 + 0              + \\left( 2Rank_{i}(X) - Rank_{i-1}(X) - 2 \\right)              + Rank_{i}(X)             - Rank_{i-1}(X)             - Rank_{i-1}(X) \\\\     &amp;= 3\\left( Rank_{i}(X) - Rank_{i-1}(X) \\right) \\end{aligned} \\] <p>\ud83d\ude29 \u81f3\u6b64\uff0c\u6211\u4eec\u603b\u7b97\u662f\u628a\u725b\u9b3c\u86c7\u795e\u7684 <code>zig-zig</code> \u7684\u8bc1\u660e\u4e5f\u7ed9\u641e\u5b9a\u4e86\u3002</p>"},{"location":"ZJU_CS/ADS/week1/#_7","title":"\u7ed3\u8bba","text":"<p>Amortized Analysis for Splay</p> <p>\u81f3\u6b64\uff0c\u5bf9\u4e8e\u4e09\u79cd\u64cd\u4f5c\uff0c\u6211\u4eec\u90fd\u5f97\u5230\u4e86\u5b83\u4eec\u7684\u5747\u644a\u4e0a\u754c\uff1a</p> \\[ \\begin{aligned}     {\\hat{c}_{\\text{zig}}}_i &amp;\\leq 1 + Rank_{i}(X) - Rank_{i-1}(X) \\\\     {\\hat{c}_{\\text{zig-zag}}}_i &amp;\\leq 2\\left(Rank_{i}(X) - Rank_{i-1}(X)\\right) \\\\     {\\hat{c}_{\\text{zig-zig}}}_i &amp;\\leq 3\\left(Rank_{i}(X) - Rank_{i-1}(X)\\right) \\end{aligned} \\] <p>\u6839\u636e\u6211\u4eec\u5728 <code>key-point</code> \u6846\u300c\u771f\u7684\u9700\u8981\u90fd\u7f29\u653e\u5230\u76f8\u540c\u7684 k \u5417\u300d\u4e2d\u7684\u5185\u5bb9\uff0c\u6211\u4eec\u63a5\u4e0b\u6765\u53ef\u4ee5\u5c06\u5b83\u4eec\u7684 \\(k\\) \u90fd\u7f29\u653e\u4e3a \\(3\\)\uff1a</p> \\[ \\begin{aligned}     {\\hat{c}_{\\text{zig}}}_i &amp;\\leq 1 + 3\\left( Rank_{i}(X) - Rank_{i-1}(X) \\right) \\\\     {\\hat{c}_{\\text{zig-zag}}}_i &amp;\\leq 3\\left( Rank_{i}(X) - Rank_{i-1}(X) \\right) \\\\     {\\hat{c}_{\\text{zig-zig}}}_i &amp;\\leq 3\\left( Rank_{i}(X) - Rank_{i-1}(X) \\right) \\end{aligned} \\] <p>\u4e8e\u662f\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f97\u5230\u6700\u7ec8\u7684\u5747\u644a\u4e0a\u754c\uff1a</p> \\[ \\begin{aligned}     \\hat{c}_{\\text{rotate }x\\text{ to root}}          &amp;= \\hat{c}_{\\text{zig}} + \\sum{ {\\hat{c}_{\\text{zig-zag}}}_i } + \\sum{ {\\hat{c}_{\\text{zig-zig}}}_i } \\\\         &amp;= O(1) + 3\\left( Rank_{N}(X) - Rank_{0}(X) \\right) \\\\         &amp;= O(\\log{N}) \\end{aligned} \\] <p>\u53ef\u4ee5\u4ed4\u7ec6\u60f3\u60f3\u6c42\u548c\u5f0f\u662f\u5982\u4f55\u201c\u76f8\u6d88\u201d\u5f97\u5230\u6700\u540e\u7684\u5f0f\u5b50\u7684\uff0c\u8fd9\u91cc\u7684 \\(\\sum {\\hat{c}_\\text{...}}_i\\) \u7684 \\(i\\) \u5e76\u4e0d\u662f\u5728\u6c42\u548c\u5f0f\u4e2d\u5404\u81ea\u8fde\u7eed\u7684\uff0c\u4f46\u662f\u4e09\u4e2a term \u653e\u5728\u4e00\u8d77\uff0c\u5219\u53ef\u4ee5\u56ca\u62ec \\(i\\in\\{1,2,...,N\\}\\)</p>"},{"location":"ZJU_CS/ADS/week1/#amortized_analysis","title":"Amortized Analysis","text":"<p>link</p> <p>Wikipedia: https://zh.wikipedia.org/wiki/%E5%B9%B3%E6%91%8A%E5%88%86%E6%9E%90</p> <p>\u4e0d\u597d\u610f\u601d</p> <p>\u6211\u5b9e\u5728\u4e0d\u77e5\u9053\u600e\u4e48\u6e05\u6670\u5730\u8bb2\u660e\u767d\u201c\u644a\u8fd8\u201d\u662f\u4ec0\u4e48\uff0c\u611f\u89c9\u8bb2\u4e0d\u592a\u6e05\u695a\uff0c\u6240\u4ee5\u5c31\u6bd4\u8f83\u7b80\u5355\u7684\u4ecb\u7ecd\u4e86\uff0c\u4f46\u662f\u6211\u4ecd\u7136\u4f1a\u6307\u51fa\u6211\u5b66\u4e60\u8fc7\u7a0b\u4e2d\u8ba4\u4e3a\u5bf9\u6211\u542f\u53d1\u6027\u6bd4\u8f83\u5927\u7684\u5730\u65b9\u3002</p> <p>\u6240\u8c13\u7684\u644a\u8fd8\u5206\u6790\uff0c\u5206\u6790\u7684\u662f\u644a\u8fd8\u8fb9\u754c\uff0c\u6216\u8005\u8bf4\u644a\u8fd8\u65f6\u95f4\u590d\u6742\u5ea6\u3002\u5e73\u5e38\u6211\u4eec\u5206\u6790\u65f6\u95f4\u590d\u6742\u5ea6\u65f6\uff0c\u9488\u5bf9\u7684\u5f80\u5f80\u662f\u67d0\u4e2a\u5177\u4f53\u7684\u64cd\u4f5c\u3002\u800c\u644a\u8fd8\u5206\u6790\u7684\u5bf9\u8c61\u5219\u662f\u4e00\u4e2a\u6570\u636e\u7ed3\u6784\u7684\u4e00\u7cfb\u5217\u64cd\u4f5c\uff0c\u800c\u8fd9\u4e00\u7cfb\u5217\u64cd\u4f5c\u4e2d\u6709\u6210\u672c\u8f83\u4f4e\u7684\uff0c\u4e5f\u6709\u6210\u672c\u8f83\u9ad8\u7684\uff0c\u800c\u4e14\u64cd\u4f5c\u4e4b\u95f4\u4e5f\u53ef\u80fd\u6709\u4e92\u76f8\u5f71\u54cd\u3002</p> <p>\u800c\u644a\u8fd8\u5206\u6790\u5219\u662f\u4ee5\u4e00\u4e2a\u66f4\u5168\u5c40\u7684\u89d2\u5ea6\u6765\u8ba1\u7b97\u201c\u5e73\u5747\u201d\u7684\u64cd\u4f5c\u4ee3\u4ef7\uff0c\u5b83\u8ba1\u7b97\u7684\u662f\u4ece\u521d\u59cb\u72b6\u6001\u5f00\u59cb\uff0c\u8fde\u7eed\u7684 M \u6b21\u4efb\u610f\u64cd\u4f5c\u6700\u591a\u6709 \u7684\u4ee3\u4ef7\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5b83\u4e0d\u540c\u4e8e\u5e73\u5747\u65f6\u95f4\u5206\u6790\uff08\u6240\u6709\u53ef\u80fd\u7684\u64cd\u4f5c\u51fa\u73b0\u6982\u7387\u5e73\u5747\uff0c\u4e5f\u5c31\u662f\u76f4\u63a5\u6c42\u5e73\u5747\uff09\u548c\u6982\u7387\u7b97\u6cd5\u7684\u6982\u7387\u5206\u6790\uff08\u5e73\u5747\u8bdd\u6240\u6709\u53ef\u80fd\u7684\u968f\u673a\u9009\u62e9\uff0c\u4e5f\u5c31\u662f\u52a0\u6743\u6c42\u5e73\u5747\uff09\u4e0d\u540c\uff0c\u644a\u8fd8\u5206\u6790\u548c\u6982\u7387\u5b8c\u5168\u65e0\u5173\u3002</p> <p>\u5bb9\u6613\u5f97\u5230\u5982\u4e0b\u7b49\u5f0f\uff1a</p> \\[ \\text{worst-case bound} \\geq \\text{amortized bound} \\geq \\text{average-case bound} \\] <p>\u6211\u4eec\u77e5\u9053\uff0c\u7531\u4e8e amortized bound \u9650\u5236\u4e86\u6240\u6709\u7684 M \u6b21\u64cd\u4f5c\uff0c\u6240\u4ee5\u5176\u4e0a\u754c\u5c31\u7b49\u4e8e\u6700\u5dee\u7684\u60c5\u51b5\u53d1\u751f M \u6b21\uff08\u5f53\u7136\uff0c\u5f88\u591a\u60c5\u51b5\u4e0b\u4e0d\u4e00\u5b9a\u80fd\u53d6\u5230\u5168\u90fd\u662f\u6700\u5dee\u60c5\u51b5\uff09\uff1b\u540c\u6837\u7684\uff0c\u7531\u4e8e\u9700\u8981\u5bf9\u4efb\u610f\u7ec4\u5408\u90fd\u6210\u7acb\uff0c\u6240\u4ee5\u4e00\u5b9a\u4e0d\u4f1a\u5c0f\u4e8e\u7edf\u8ba1\u5b66\u610f\u4e49\u4e0a\u7684\u5e73\u5747\u60c5\u51b5\u3002</p> <p>\u521a\u5f00\u59cb\u5b66\u5230\u644a\u8fd8\u5206\u6790\u7684\u65f6\u5019\uff0c\u770b\u7740\u8fd9\u4e9b\u5185\u5bb9\u6709\u4e00\u79cd\u83ab\u540d\u5176\u5999\u7684\u611f\u89c9\uff0c\u4e0d\u77e5\u9053\u5b83\u5728\u5e72\u561b\uff0c\u540e\u6765\u6211\u624d\u53d1\u73b0\u6211\u8bef\u89e3\u4e86\u644a\u8fd8\u5206\u6790\u7684\u76ee\u7684\u3002\u6240\u4ee5\u6211\u611f\u89c9\u8fd8\u662f\u9700\u8981\u5c31\u6b64\u7ed9\u51fa\u6211\u81ea\u5df1\u7684\u7406\u89e3\u3002</p> <p>\u644a\u8fd8\u5206\u6790</p> <p>\u5728\u6211\u7406\u89e3\u4e2d\uff0c\u644a\u8fd8\u5206\u6790\u5b9e\u9645\u4e0a\u662f\u4e00\u7cfb\u5217\u8bc1\u660e\u65b9\u6cd5\uff0c\u66f4\u8fdb\u4e00\u6b65\u7684\u8bf4\uff0c\u5728\u6211\u4eec\u4e4b\u540e\u4f1a\u8bb2\u5230\u7684\u4e09\u4e2a\u5206\u6790\u65b9\u6cd5\u4e2d\uff0c\u6709\u4e00\u4e9b\u53ef\u80fd\u96be\u4ee5\u76f4\u63a5\u5f97\u5230\u644a\u8fd8\u590d\u6742\u5ea6\u3002\u4f46\u662f\u5b9e\u9645\u4e0a\uff0c\u4ed6\u4eec\u7684\u8fc7\u7a0b\u66f4\u50cf\u662f\u5df2\u77e5\u4e00\u4e2a\u644a\u8fd8\u8fb9\u754c\uff0c\u5e76\u8bc1\u660e\u5b83\u786e\u5b9e\u662f\u8fb9\u754c\u3002</p> <p>\u5e38\u89c1\u7684\u644a\u8fd8\u5206\u6790\u6709\u4e09\u79cd\uff1a\u805a\u5408(aggregate)\u6cd5\u3001\u6838(accounting)\u6cd5\u3001\u52bf\u80fd(potential)\u6cd5\uff0c\u63a5\u4e0b\u6765\u4e00\u4e00\u4ecb\u7ecd\u3002</p>"},{"location":"ZJU_CS/ADS/week1/#_8","title":"\u805a\u5408\u6cd5","text":"<p>\u805a\u5408\u6cd5\u76f8\u5bf9\u7b80\u5355\uff0c\u5c31\u662f\u76f4\u63a5\u7d2f\u79ef\u8fde\u7eed M \u6b21\u64cd\u4f5c\u7684\u4ee3\u4ef7\uff0c\u518d\u9664\u4ee5 M\u3002</p> \\[ T_{amortized} = \\frac{\\sum_i{T_i}}{n} \\]"},{"location":"ZJU_CS/ADS/week1/#_9","title":"\u6838\u6cd5","text":"<p>link</p> <p>\u5173\u4e8e Accounting Analysis \u53ef\u4ee5\u53c2\u8003\u8fd9\u7bc7\u6587\u7ae0\uff1ahttps://www.baeldung.com/cs/amortized-analysis</p> <p>\u505a\u4e00\u4e2a\u6bd4\u55bb\u7684\u8bdd\uff0c\u53ef\u4ee5\u8fd9\u4e48\u7406\u89e3\uff1a</p> <p>\u4f60\u53bb\u5403\u5348\u996d\uff0c\u5403\u7d20\u83dc\u8981 \u00a51\uff08\u5bf9\u6807\u6d88\u8017\u8f83\u5c0f\u7684\u64cd\u4f5c\uff09\uff0c\u5403\u8364\u83dc\u8981 \u00a54\uff08\u5bf9\u6807\u6d88\u8017\u8f83\u5927\u7684\u64cd\u4f5c\uff09\uff0c\u73b0\u5728\u4f60\u77e5\u9053\u4f60\u6bcf\u5929\u5403\u5348\u996d\u7684\u644a\u8fd8\u5f00\u9500\u4e3a \u00a52\uff08\u4ece\u8bc1\u660e\u7684\u89d2\u5ea6\u6765\u7406\u89e3\uff09\uff0c\u5e76\u4e14\u6211\u65e0\u8111\u7684\u8ba4\u4e3a\u6bcf\u4e2a\u64cd\u4f5c\u7684\u644a\u8fd8\u4ee3\u4ef7\u90fd\u662f \u00a52\uff08\u5728\u6838\u6cd5\u4e2d\uff0c\u6574\u4f53\u7684\u644a\u8fd8\u5f00\u9500\u548c\u5355\u4e2a\u64cd\u4f5c\u7684\u644a\u8fd8\u5f00\u9500\u662f\u4e0d\u4e00\u6837\u7684\uff0c\u5355\u4e2a\u64cd\u4f5c\u7684\u644a\u8fd8\u5f00\u9500\u662f\u53ef\u80fd\u4e92\u4e0d\u4e00\u6837\u7684\uff0cM \u4e2a\u64cd\u4f5c\u6c42\u548c\u53d6\u5e73\u5747\u4ee5\u540e\u624d\u662f\u6574\u4f53\u7684\u644a\u8fd8\u4ee3\u4ef7\uff09\u3002\u90a3\u4e48\u4f60\u4eca\u5929\u5403\u7d20\u83dc\uff0c\u8d26\u6237\u5165\u8d26 \u00a51\uff082 - 1 = 1\uff09\uff1b\u660e\u5929\u4f60\u4e5f\u5403\u7d20\u83dc\uff0c\u8d26\u6237\u4e5f\u5165\u8d26 \u00a51\uff1b\u540e\u5929\u4f60\u5403\u8364\u83dc\u4e86\uff0c\u90a3\u4e48\u8d26\u6237\u5c31\u51fa\u8d26 \u00a52\uff082 - 4 = -2\uff09\u2026\u2026</p> <p>\u6838\u6cd5\u5927\u6982\u5c31\u662f\u6309\u7167\u8fd9\u4e48\u4e00\u4e2a\u601d\u8def\u6765\u8bc1\u660e\uff0c\u4e0d\u8fc7\u5177\u4f53\u7ec6\u8282\u548c\u4e0a\u9762\u8fd9\u4e2a\u6848\u4f8b\u8fd8\u662f\u6709\u533a\u522b\u7684\uff0c\u53ef\u4ee5\u8be6\u7ec6\u53c2\u8003\u4e0a\u9762\u90a3\u7247\u6587\u7ae0\uff0c\u6211\u89c9\u5f97\u914d\u56fe\u548c\u8bf4\u660e\u90fd\u5f88\u8be6\u7ec6\u3002</p>"},{"location":"ZJU_CS/ADS/week1/#_10","title":"\u52bf\u80fd\u6cd5","text":"<p>link</p> <p>\u5173\u4e8e Potential Analysis \u53ef\u4ee5\u53c2\u8003\u8fd9\u7bc7\u6587\u7ae0\uff1ahttps://en.wikipedia.org/wiki/Potential_method \u4ee5\u53ca ltgg \u7684\u8fd9\u671f\u5468\u62a5\u8bb2\u7684\u4e5f\u5f88\u597d\uff1ahttps://www.yuque.com/xianyuxuan/saltfish_shop/weekly002_amortized_analysis#KmnY6</p> <p>\u52bf\u80fd\u6cd5\u5f3a\u63a8 ltgg \u7684\u8fd9\u7bc7\u6587\u7ae0\uff0c\u8bb2\u7684\u975e\u5e38\u597d\u3002</p>"},{"location":"ZJU_CS/ADS/week10/","title":"Lecture 10 | NP Completeness","text":"<p>\u5bfc\u8bfb</p> <p>\u7531\u4e8e\u672c\u8282\u6d89\u53ca\u8f83\u591a\u6982\u5ff5\uff0c\u5e76\u4e14\u77e5\u8bc6\u6811\u957f\u7684\u5f88\u84ec\u677e\uff0c\u6240\u4ee5\u6211\u51b3\u5b9a\u5c1d\u8bd5\u975e\u7ebf\u6027\u7ec4\u7ec7\u5185\u5bb9\uff0c\u56e0\u6b64\u672c\u6587\u7684\u9605\u8bfb\u987a\u5e8f\u53ef\u80fd\u4e5f\u5e76\u4e0d\u4f1a\u662f\u7ebf\u6027\u7684\u3002</p> <p>\u6240\u6709\u63d0\u5230\u7684\u3001\u5e76\u4e14\u672c\u6587\u4f1a\u4ecb\u7ecd\u7684\u76f8\u5173\u5185\u5bb9\uff0c\u90fd\u4f1a\u4ee5\u94fe\u63a5\u548c\u653e\u5927\u955c\ud83d\udd0d\u7684\u5f62\u5f0f\u51fa\u73b0\u3002\u63a8\u8350\u4f7f\u7528\u9f20\u6807\u4e2d\u952e\u7b49\u65b9\u5f0f\u6253\u5f00\u65b0\u6807\u7b7e\u9875\u67e5\u770b\uff0c\u65b9\u4fbf\u56de\u6eaf\u3002</p> <p>\u63a8\u8350\u7684\u9605\u8bfb\u987a\u5e8f\u662f\uff0c\u987a\u7740\u8bfb\u4e0b\u53bb\uff0c\u6bcf\u6b21\u51fa\u73b0 \ud83d\udd0d \u90fd\u8fdb\u884c\u6df1\u5ea6\u4f18\u5148\u641c\u7d22\u5f0f\u7684\u5b66\u4e60\uff0c\u76f4\u81f3\u770b\u5b8c\u5168\u6587\u3002</p> <p>\u5176\u4e2d\uff0c\u5728 \u76f8\u5173\u6982\u5ff5 \u4e4b\u540e\u7684\u90e8\u5206\uff0c\u6211\u4f1a\u4fdd\u8bc1\u5728\u524d\u9762\u90fd\u6709\u63d0\u53ca\uff0c\u800c\u5176\u4e4b\u524d\u7684\u5185\u5bb9\uff0c\u63a8\u8350\u90fd\u5728\u987a\u5e8f\u9605\u8bfb\u4e2d\u6d89\u53ca\u3002</p>"},{"location":"ZJU_CS/ADS/week10/#_1","title":"\u6982\u8ff0","text":"<p>Links</p> <p>OI Wiki: https://oi-wiki.org/misc/cc-basic/</p> <p>Wikipedia: https://en.wikipedia.org/wiki/P_versus_NP_problem</p> <p>Wikipedia: https://en.wikipedia.org/wiki/NP-completeness</p> <p>Wikipedia: https://en.wikipedia.org/wiki/NP-hardness</p> <p>\u6839\u636e\u95ee\u9898\u7684\u96be\u5ea6\uff0c\u7531\u4e0d\u540c\u7684\u5b9a\u4e49\u5212\u5206\uff0c\u95ee\u9898\u53ef\u4ee5\u5206\u4e3a\uff1a</p> <p>P \u95ee\u9898(polynomial time)\u3001NP \u95ee\u9898(nondeterministic polynomial time)\u3001NPC \u95ee\u9898(NP complete)\u3001NPH \u95ee\u9898(NP hard)\u3002\u9664\u6b64\u4e4b\u5916 \uff0c\u6211\u4eec\u8fd8\u9700\u8981\u989d\u5916\u4e86\u89e3\u4e0d\u53ef\u8ba1\u7b97\u95ee\u9898(undecidable)\u3002</p> <p>\u7531\u4e8e\u4e0d\u53ef\u8ba1\u7b97\u95ee\u9898\u6bd4\u8f83\u7279\u6b8a\uff0c\u6240\u4ee5\u6211\u5148\u653e\u5728\u524d\u9762\u4ecb\u7ecd\u3002</p> Undecidable Problem <p>Links</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Undecidable_problem</p> <p>\u4e0d\u53ef\u5224\u5b9a\u95ee\u9898(undecidable problem)\u662f\u4e00\u7c7b\u7279\u6b8a\u7684\u51b3\u5b9a\u6027\u95ee\u9898\uff0c\u5b83\u7684\u7279\u70b9\u662f\u6211\u4eec\u65e0\u6cd5\u8bbe\u8ba1\u4e00\u4e2a\u7b97\u6cd5\u6765\u6c42\u89e3\u5b83\u7684\u7ed3\u679c\u3002</p> <p>\u5176\u4e2d\u4e00\u4e2a\u6bd4\u8f83\u5178\u578b\u7684\u4f8b\u5b50\u5c31\u662f\u505c\u673a\u95ee\u9898\ud83d\udd0d\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u7528\u8fd9\u6837\u4e00\u5f20\u56fe\u6765\u8868\u793a\u5176\u4ed6\u51e0\u4e2a\u6982\u5ff5\u7684\u5173\u7cfb\uff1a</p> <p> </p> <p>Source: https://en.wikipedia.org/wiki/NP-hardness</p> <p>\u53ef\u4ee5\u7c97\u6d45\u7684\u6309\u7167\u56fe\u4e2d\u7684\u201cComplexity\u201d\u8f74\u6765\u7406\u89e3\u5176\u4e2d\u7684\u8f6c\u5316\u5173\u7cfb\uff0c\u63a5\u4e0b\u6765\u7ed9\u51fa\u5b83\u4eec\u7684\u8be6\u7ec6\u5b9a\u4e49\uff1a</p> <p>P</p> <p>P \u53d6\u81ea polynomial time\uff0c\u6307\u7684\u662f\u53ef\u4ee5\u7528\u786e\u5b9a\u578b\u56fe\u7075\u673a\ud83d\udd0d\u5728\u591a\u9879\u5f0f\u65f6\u95f4\u5185\u89e3\u51b3\u7684\u95ee\u9898\u3002</p> <p>\u4e5f\u5c31\u662f\u6211\u4eec\u901a\u5e38\u610f\u4e49\u4e0b\u6240\u8bf4\u7684\uff0c\u53ef\u4ee5\u5728\u591a\u9879\u5f0f\u65f6\u95f4\u5185\u89e3\u51b3\u7684\u95ee\u9898\u3002</p> <p>NP</p> <p>NP \u5373 nondeterministic polynomial time\uff0c\u6307\u7684\u662f\u53ef\u4ee5\u7528\u975e\u786e\u5b9a\u578b\u56fe\u7075\u673a\ud83d\udd0d\u5728\u591a\u9879\u5f0f\u65f6\u95f4\u5185\u89e3\u51b3\u7684\u95ee\u9898\u3002\u8fd9\u4e2a\u8bf4\u6cd5\u7b49\u4ef7\u4e8e\u53ef\u4ee5\u7528\u786e\u5b9a\u578b\u56fe\u7075\u673a\ud83d\udd0d\u5728\u591a\u9879\u5f0f\u65f6\u95f4\u5185\u9a8c\u8bc1\uff08\u5224\u65ad\u7b54\u6848\u662f\u5426\u6b63\u786e\uff09\u3002</p> <p>\u4e5f\u5c31\u662f\u6211\u4eec\u901a\u5e38\u610f\u4e49\u4e0b\u6240\u8bf4\u7684\uff0c\u53ef\u4ee5\u5728\u591a\u9879\u5f0f\u65f6\u95f4\u5185\u9a8c\u8bc1\u7684\u95ee\u9898\u3002</p> <p>NPC</p> <p>NPC \u5373 NP complete\uff0cNP \u5b8c\u5168\uff0c\u662f NP \u4e2d\u6700\u96be\u7684\u51b3\u5b9a\u6027\u95ee\u9898\uff08\u5e76\u4e0d\u662f\u65e0\u9650\u5b9a\u8bcd\u7684\u6700\u96be\u7684\u95ee\u9898\uff01\uff09\u3002\u800c\u6211\u4eec\u79f0\u6ee1\u8db3\u5982\u4e0b\u6761\u4ef6\u7684\u95ee\u9898\u4e3a NPC \u95ee\u9898\uff1a</p> <ol> <li>\u662f\u4e00\u4e2a NP \u95ee\u9898\uff1b</li> <li>\u6240\u6709 NP \u95ee\u9898\u90fd\u53ef\u4ee5\u591a\u9879\u5f0f\u65f6\u95f4\u5f52\u7ea6\ud83d\udd0d\u4e3a\u8be5\u95ee\u9898\uff1b</li> </ol> <p>\u7531 2 \u53ef\u4ee5\u6709\u7ed3\u8bba\uff0c\u6240\u6709\u7684 NPC \u95ee\u9898\u96be\u5ea6\u76f8\u540c\u2014\u2014\u4e00\u65e6\u6709\u4e00\u4e2a NPC \u95ee\u9898\u88ab\u89e3\u51b3\uff0c\u90a3\u4e48\u6240\u6709 NPC \u95ee\u9898\uff0c\u4e43\u81f3\u6240\u6709 NP \u95ee\u9898\u90fd\u80fd\u88ab\u89e3\u51b3\u3002</p> <p>\u5982\u679c\u6211\u4eec\u8bd5\u56fe\u8bc1\u660e\u4e00\u4e2a\u95ee\u9898\u662f NPC \u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8fd9\u79cd\u624b\u6bb5\uff1a</p> <ol> <li>\u5224\u5b9a\u8be5\u95ee\u9898\u662f\u4e00\u4e2a NP \u95ee\u9898\uff1b</li> <li>\u5224\u5b9a\u4e00\u4e2a\u5df2\u77e5\u7684 NPC \u95ee\u9898\u53ef\u4ee5\u591a\u9879\u5f0f\u65f6\u95f4\u5f52\u7ea6\ud83d\udd0d\u4e3a\u8be5\u95ee\u9898\uff0c\u6216\u5224\u5b9a\u8be5\u95ee\u9898\u662f NPH\uff08\u5728\u4e0b\u9762\uff09\u95ee\u9898\uff1b</li> </ol> <p>\u7b2c\u4e00\u4e2a\u88ab\u8bc1\u660e\u662f NPC \u7684\u95ee\u9898\u662f Circuit-SAT\ud83d\udd0d \u95ee\u9898\u3002</p> <p>P ?= NP &amp; NPC</p> <p>\u5173\u4e8e P \u548c NP \u7684\u5173\u7cfb\uff0c\u6211\u4eec\u4ecd\u7136\u4e0d\u77e5\u9053 P \u662f\u5426\u80fd\u7b49\u4e8e NP\uff0c\u5373\u6211\u4eec\u4ecd\u7136\u4e0d\u77e5\u9053\u662f\u5426\u5b58\u5728\u591a\u9879\u5f0f\u7b97\u6cd5\u53ef\u4ee5\u89e3\u51b3\u4e00\u5207 NP \u95ee\u9898\u3002</p> <p>\u800c\u5176\u4e2d\u7684\u5173\u952e\u5c31\u662f\uff0c\u5982\u679c\u6211\u4eec\u80fd\u627e\u5230 NPC \u95ee\u9898\u7684\u591a\u9879\u5f0f\u89e3\u6cd5\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u8bc1\u660e P = NP\u3002</p> <p>NPH</p> <p>NPH \u5373 NP hard\uff0cNP \u56f0\u96be\uff0c\u5b83\u4e0d\u4e00\u5b9a\u9700\u8981\u662f NP \u95ee\u9898\u3002\u800c\u6240\u6709 NP \u95ee\u9898\u90fd\u53ef\u4ee5\u591a\u9879\u5f0f\u65f6\u95f4\u5f52\u7ea6\ud83d\udd0d\u4e3a NPH \u95ee\u9898\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4 \\(NPC = NP \\cap NPH\\)\u3002</p>"},{"location":"ZJU_CS/ADS/week10/#_2","title":"\u8bfe\u5185\u6848\u4f8b","text":"<p>\u63a5\u4e0b\u6765\u7684\u5185\u5bb9\u90fd\u662f\u8bfe\u4ef6\u4e2d\u63d0\u5230\u7684\u4e00\u4e9b\u5177\u4f53\u95ee\u9898\u548c\u6848\u4f8b\u3002</p>"},{"location":"ZJU_CS/ADS/week10/#halting_problem","title":"Halting Problem","text":"<p>Links</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Halting_problem</p> <p>\u505c\u673a\u95ee\u9898\u662f\u4e00\u4e2a\u5178\u578b\u7684\u4e0d\u53ef\u8ba1\u7b97\u95ee\u9898\uff0c\u5b83\u6307\u7684\u662f\uff0c\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u6211\u4eec\u65e0\u6cd5\u8bbe\u8ba1\u4e00\u4e2a\u7b97\u6cd5\u6765\u5224\u65ad\u5b83\u662f\u5426\u4f1a\u5728\u6709\u9650\u65f6\u95f4\u5185\u505c\u673a\uff08\u5373\u5224\u65ad\u7a0b\u5e8f\u662f\u5426\u4f1a\u6b7b\u5faa\u73af\uff09\u3002</p> <p>\u6211\u4eec\u901a\u8fc7\u53cd\u8bc1\u6cd5\u53ef\u4ee5\u8bc1\u660e\uff1a</p> <p>\u5047\u8bbe\u5b58\u5728\u51fd\u6570 <code>willHalt(func F)</code> \u53ef\u4ee5\u5224\u65ad\u51fd\u6570 F \u662f\u5426\u4f1a\u505c\u673a\uff0c\u5982\u679c\u4f1a\uff0c\u5219\u8fd4\u56de <code>true</code>\uff0c\u5426\u5219\u8fd4\u56de <code>false</code>\u3002\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u6784\u9020\u4e00\u4e2a\u8fd9\u6837\u7684\u51fd\u6570 <code>foo()</code>\uff1a</p> <pre><code>void foo() {\n    if ( willHalt(foo) ) {\n        while (true) {} // Endless loop.\n    }\n    return;\n}\n</code></pre> <p>\u63a5\u4e0b\u6765\uff0c\u5982\u679c\u6211\u4eec\u60f3\u77e5\u9053 <code>foo()</code> \u662f\u5426\u4f1a\u505c\u673a\uff0c\u5c31\u4f1a\u6267\u884c <code>willHalt(foo)</code>\u3002\u7136\u800c\u5728 <code>foo()</code> \u5185\u90e8\u4e5f\u6709\u4e00\u4e2a <code>willHalt(foo)</code>\uff0c\u5982\u679c\u5b83\u8ba4\u4e3a <code>foo()</code> \u4f1a\u505c\u673a\uff0c\u5219\u6784\u9020\u4e00\u4e2a\u6b7b\u5faa\u73af\uff1b\u800c\u5982\u679c\u5b83\u8ba4\u4e3a <code>foo()</code> \u4e0d\u4f1a\u505c\u673a\uff0c\u5219\u9009\u62e9\u8ba9\u5b83\u7acb\u523b\u505c\u673a\uff0c\u4e8e\u662f\u8fd9\u91cc\u5c31\u4ea7\u751f\u4e86\u77db\u76fe\u3002</p> <p>\u7406\u89e3\u4e0a\u9762\u8fd9\u6bb5\u5185\u5bb9\u7684\u5173\u952e\u5c31\u662f\uff0c\u8fd9\u91cc\u867d\u7136\u4e0d\u5b58\u5728\u4e8b\u5b9e\u610f\u4e49\u4e0a\u7684\u201c\u6b7b\u5faa\u73af\u201d\uff0c\u4f46\u53ef\u4ee5\u7406\u89e3\u4e3a\u8fd9\u91cc\u5b58\u5728\u4e00\u4e2a\u903b\u8f91\u4e0a\u7684\u9012\u5f52\uff0c\u800c\u8fd9\u79cd\u201c\u903b\u8f91\u4e0a\u7684\u9012\u5f52\u201d\uff0c\u6b63\u662f\u5bfc\u81f4\u505c\u673a\u95ee\u9898\u6210\u4e3a\u4e00\u4e2a\u4e0d\u53ef\u8ba1\u7b97\u95ee\u9898\u7684\u539f\u56e0\u3002</p>"},{"location":"ZJU_CS/ADS/week10/#hamilton_cycle_problem","title":"Hamilton Cycle Problem","text":"<p>links</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Hamiltonian_path_problem</p> <p>OI Wiki: https://oi-wiki.org/graph/hamilton</p> <p>\u54c8\u5bc6\u987f\u56de\u8def\u95ee\u9898</p> <p>\u7ed9\u5b9a\u4e00\u4e2a\u56fe\uff0c\u5224\u65ad\u662f\u5426\u5b58\u5728\u4e00\u6761\u8def\u5f84\uff0c\u4f7f\u5f97\u5b83\u7ecf\u8fc7\u56fe\u4e2d\u7684\u6bcf\u4e2a\u70b9\u6070\u597d\u4e00\u6b21\uff0c\u4e14\u6700\u540e\u56de\u5230\u8d77\u70b9\u3002</p> <p>\u54c8\u5bc6\u987f\u56de\u8def\u95ee\u9898\u662f\u4e00\u4e2a NPC \u95ee\u9898\u3002</p>"},{"location":"ZJU_CS/ADS/week10/#traveling_salesman_problem","title":"Traveling Salesman Problem","text":"<p>Links</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Travelling_salesman_problem</p> <p>\u65c5\u884c\u5546\u95ee\u9898</p> <p>\u65c5\u884c\u5546\u95ee\u9898\u6709\u4e24\u79cd\u5b9a\u4e49\uff0c\u5176\u4e2d\u524d\u8005\u662f NPH\uff0c\u800c\u88ab\u79f0\u4e3a\u201c\u5224\u5b9a\u7248\u672c\u201d\u7684\u540e\u8005\u662f NPC\u3002</p> \u539f\u59cb\u5b9a\u4e49\u5224\u5b9a\u7248\u672c <p>\u7ed9\u5b9a\u4e00\u4e2a\u5b8c\u5168\u56fe\uff0c\u5224\u65ad\u662f\u5426\u5b58\u5728\u4e00\u6761\u8def\u5f84\uff0c\u4f7f\u5f97\u5b83\u7ecf\u8fc7\u56fe\u4e2d\u7684\u6bcf\u4e2a\u70b9\u6070\u597d\u4e00\u6b21\uff0c\u4e14\u6700\u540e\u56de\u5230\u8d77\u70b9\uff0c\u4e14\u8def\u5f84\u957f\u5ea6\u6700\u77ed\u3002</p> <p>\"Given a list of cities and the distances between each pair of cities, what is the shortest possible route that visits each city exactly once and returns to the origin city?\"</p> <p>From Wikipedia</p> <p>\u8be5\u7248\u672c\u7684 TSP \u95ee\u9898\u662f\u4e00\u4e2a NPH \u95ee\u9898\uff0c\u5e38\u5e38\u51fa\u73b0\u5728\u7ec4\u5408\u4f18\u5316\u7684\u8bed\u5883\u4e2d\u3002</p> <p>\u7ed9\u5b9a\u4e00\u4e2a\u5b8c\u5168\u56fe\uff0c\u5224\u65ad\u662f\u5426\u5b58\u5728\u4e00\u6761\u8def\u5f84\uff0c\u4f7f\u5f97\u5b83\u7ecf\u8fc7\u56fe\u4e2d\u7684\u6bcf\u4e2a\u70b9\u6070\u597d\u4e00\u6b21\uff0c\u4e14\u6700\u540e\u56de\u5230\u8d77\u70b9\uff0c\u4e14\u8def\u5f84\u957f\u5ea6\u4e0d\u8d85\u8fc7 \\(k\\)\u3002</p> <p>\u8be5\u7248\u672c\u7684 TSP \u95ee\u9898\u662f\u4e00\u4e2a NPC \u95ee\u9898\uff0c\u5e38\u5e38\u51fa\u73b0\u5728\u590d\u6742\u5ea6\u7406\u8bba\u7684\u8bed\u5883\u4e2d\u3002</p> <p>\u9700\u8981\u6ce8\u610f\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u8c08\u8bba\u7684\u90fd\u662f\u5224\u5b9a\u7248\u672c\u7684 TSP\uff01</p>"},{"location":"ZJU_CS/ADS/week10/#npc","title":"\u5224\u5b9a\u7248\u672c\u7684 NPC \u8bc1\u660e","text":"<p>\u73b0\u5728\uff0c\u5047\u8bbe\u6211\u4eec\u5df2\u77e5 Hamilton Cycle Problem \u95ee\u9898\u662f\u4e00\u4e2a NPC \u95ee\u9898\uff0c\u5c1d\u8bd5\u901a\u8fc7\u591a\u9879\u5f0f\u65f6\u95f4\u5f52\u7ea6\ud83d\udd0d\u7684\u65b9\u5f0f\u6765\u8bc1\u660e TSP \u4e5f\u662f\u4e00\u4e2a NPC \u95ee\u9898\u3002</p> <p>Recommended Reading</p> <p>https://opendsa-server.cs.vt.edu/ODSA/Books/Everything/html/hamiltonianCycle_to_TSP.html</p> <p>\u9996\u5148\u56de\u987e\u8bc1\u660e NPC \u7684\u6b65\u9aa4\uff1a</p> <ol> <li>\u5224\u5b9a\u8be5\u95ee\u9898\u662f\u4e00\u4e2a NP \u95ee\u9898\uff1b</li> <li>\u5224\u5b9a\u4e00\u4e2a\u5df2\u77e5\u7684 NPC \u95ee\u9898\u53ef\u4ee5\u591a\u9879\u5f0f\u65f6\u95f4\u5f52\u7ea6\ud83d\udd0d\u4e3a\u8be5\u95ee\u9898\uff0c\u6216\u8005\u8bf4\u5224\u5b9a\u8be5\u95ee\u9898\u662f NPH \u95ee\u9898\uff1b</li> </ol> <p>\u4ee3\u5165\u5230\u8fd9\u4e2a\u95ee\u9898\u4e2d\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u9700\u8981\u8bc1\u660e\uff1a</p> <ol> <li>TSP \u662f\u4e00\u4e2a NP \u95ee\u9898\uff1b</li> <li>Hamilton Cycle Problem \u53ef\u4ee5\u591a\u9879\u5f0f\u65f6\u95f4\u5f52\u7ea6\ud83d\udd0d\u4e3a TSP\uff1b</li> </ol> <p>TSP is NP</p> <p>\u8bc1\u660e TSP \u662f\u4e00\u4e2a NP \u95ee\u9898\u5373\u8bc1\u660e TSP \u7684\u89e3\u53ef\u4ee5\u5728\u591a\u9879\u5f0f\u65f6\u95f4\u5185\u88ab\u9a8c\u8bc1\u3002\u800c\u9a8c\u8bc1\u4e00\u4e2a\u89e3\u662f TSP \u95ee\u9898\u7684\u89e3\uff0c\u9700\u8981\u8bc1\u660e\u4e0b\u9762\u4e24\u4e2a\u70b9\uff1a</p> <ol> <li>\u8fd9\u6761\u8def\u5f84\u7ecf\u8fc7\u4e86\u6240\u6709\u8282\u70b9\u6070\u597d\u4e00\u6b21\uff1b</li> <li>\u8fd9\u6761\u8def\u5f84\u957f\u5ea6\u4e0d\u8d85\u8fc7\\(k\\)\uff1b</li> </ol> <p>\u663e\u7136\uff0c\u8fd9\u4e24\u6761\u90fd\u53ea\u9700\u8981 \\(O(N)\\) \u7684\u5f00\u9500\u5c31\u80fd\u9a8c\u8bc1\u3002</p> <p>\u4e8e\u662f\uff0c\u6211\u4eec\u5f97\u5230\u7ed3\u8bba\uff1a\\(\\text{TSP} \\in \\text{NP}\\)\u3002</p> <p>TSP is NPH</p> <p>\u8981\u8bc1\u660e TSP \u662f\u4e00\u4e2a NPH \u95ee\u9898\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u8bc1\u660e Hamilton Cycle Problem(HCP) \u53ef\u4ee5\u591a\u9879\u5f0f\u65f6\u95f4\u5f52\u7ea6\ud83d\udd0d\u4e3a TSP\u3002</p> <p>\u4e3a\u6b64\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u6bd4 HCP \u548c TSP \u7684\u5dee\u5f02\u3002</p> <p>\u4ee5 HCP \u4e3a\u57fa\u7840\u63cf\u8ff0 TSP\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u5728\u4e00\u5f20\u5b8c\u5168\u56fe\u4e0a\u5bfb\u627e\u603b\u957f\u4e0d\u8d85\u8fc7 \\(k\\) \u7684\u54c8\u5bc6\u987f\u73af\u8def\uff0c\u5177\u4f53\u6765\u8bf4\uff1a</p> HCP TSP \u56fe \\(G(V,E)\\) \u5b8c\u5168\u56fe \\(G'(V',E')\\) \u65e0\u8fb9\u6743 \u6709\u8fb9\u6743 - \\(\\sum v_i \\leq k\\) <p>\u800c\u4e3a\u4e86\u8bc1\u660e \\(\\text{HCP} \\leq_p \\text{TCP}\\)\uff0c\u6211\u4eec\u8bbe\u8ba1\u4e00\u4e2a\u591a\u9879\u5f0f\u65f6\u95f4\u7684\u65b9\u6cd5 <code>f()</code> \u5b9e\u73b0 \\(G(V,E) \\to G'(V',E')\\)\uff0c\u5177\u4f53\u6765\u8bf4\uff0c\u5b83\u505a\u8fd9\u4e9b\u4e8b\uff1a</p> <ol> <li>\u8fde\u63a5 \\(G\\) \u4e2d\u6240\u6709\u6ca1\u8fde\u4e0a\u7684\u8fb9\uff0c\u4f7f \\(G\\) \u6210\u4e3a\u4e00\u5f20\u65e0\u6743\u5b8c\u5168\u56fe\uff1b</li> <li>\u5bf9\u4e8e\u65e0\u6743\u5b8c\u5168\u56fe\u4e2d\u7684\u6bcf\u4e00\u6761\u8fb9 \\(v^c_i\\)\uff0c\u5982\u679c\u5728 \\(G\\) \u4e2d\u4e5f\u6709\u8fd9\u6761\u8fb9\uff0c\u90a3\u4e48\u4ee4\u5b83\u8fb9\u6743\u4e3a 0\uff0c\u5426\u5219\u4ee4\u5b83\u8fb9\u6743\u4e3a 1\uff0c\u4e8e\u662f\u5f97\u5230\u6709\u6743\u5b8c\u5168\u56fe \\(G'(V',E')\\)\uff1b</li> </ol> <p> </p> <p>\u53f3\u56fe\u4e2d\u6240\u6709\u7684\u84dd\u8fb9\u8fb9\u6743\u90fd\u4e3a 0\uff0c\u7eff\u8fb9\u8fb9\u6743\u90fd\u4e3a 1\u3002</p> <p>\u7531\u4e8e\u5b8c\u5168\u56fe\u7684\u8fb9\u6570\u4e3a \\(\\frac{n(n-1)}{2}\\)\uff0c\u6240\u4ee5\u8fd9\u4e2a\u6b65\u9aa4\u663e\u7136\u662f\u591a\u9879\u5f0f\u65f6\u95f4\u7684\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u53d1\u73b0\uff0c\u539f\u95ee\u9898\u4e3a\u5728 \\(G\\) \u4e0a\u5bfb\u627e\u54c8\u5bc6\u987f\u73af\uff0c\u7b49\u4ef7\u4e8e\u5728 \\(G' = f(G)\\) \u4e0a\u505a \\(k = 0\\) \u7684 TSP\u3002\u7531\u6b64\u8bc1\u660e \\(\\text{HCP} \\leq_{p} \\text{TSP}\\)\uff0c\u5373 \\(\\text{TSP} \\in \\text{NPH}\\)\u3002</p> <p>\u7efc\u4e0a\u6240\u8ff0\uff0c\u7531\u4e8e \\(\\text{TSP} \\in \\text{NP}\\) \u4e14 \\(\\text{TSP} \\in \\text{NPH}\\)\uff0c\u6240\u4ee5 \\(\\text{TSP} \\in \\text{NPC}\\)\u3002</p>"},{"location":"ZJU_CS/ADS/week10/#circuit-sat","title":"Circuit-SAT","text":"<p>Links</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Circuit_satisfiability_problem</p> <p>Circuit-SAT \u53c8\u53eb circuit satisfiability problem\uff0c\u5b83\u662f\u6700\u65e9\u88ab\u8bc1\u660e\u662f NPC \u7684\u95ee\u9898\uff0c\u5373\u901a\u8fc7 NPC \u95ee\u9898\u7684\u5b9a\u4e49\u8bc1\u660e\u3002</p> <p>\u5176\u5177\u4f53\u63cf\u8ff0\u5982\u4e0b\uff1a</p> <p>Circuit-SAT</p> <p>Circuit-SAT \u5373\u4e3a\u786e\u5b9a\u7ed9\u5b9a\u5e03\u5c14\u7535\u8def\u662f\u5426\u5177\u6709\u4f7f\u8f93\u51fa\u4e3a\u771f\u7684\u8f93\u5165\u5206\u914d\u7684\u51b3\u7b56\u7684\u95ee\u9898\u3002</p> <p></p> <p>Source: https://en.wikipedia.org/wiki/Circuit_satisfiability_problem</p> <p>\u4e0a\u56fe\u4e2d\uff0c\u5de6\u4fa7\u7535\u8def\u6ee1\u8db3\u6761\u4ef6\uff0c\u53f3\u4fa7\u7535\u8def\u4e0d\u6ee1\u8db3\u6761\u4ef6\u3002</p> <p>\u6216\u8005\uff0c\u66f4\u62bd\u8c61\u7684\u6765\u8bf4\uff0c\u662f\u5224\u65ad\u4e00\u4e2a\u5177\u6709 \\(n\\) \u4e2a\u5e03\u5c14\u53d8\u91cf\u7684\u5e03\u5c14\u8868\u8fbe\u5f0f\u662f\u5426\u5177\u6709\u7ed3\u679c\u4e3a True \u7684\u89e3\u3002</p>"},{"location":"ZJU_CS/ADS/week10/#3-sat","title":"3-SAT","text":"<p>Links</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Boolean_satisfiability_problem#3-satisfiability</p> <p>3-SAT \u6307\u7684\u662f Circuit-SAT \u95ee\u9898\u7684\u4e00\u4e2a\u7279\u4f8b\uff0c\u5b83\u5bf9\u5e03\u5c14\u7535\u8def\uff0c\u6216\u8005\u8bf4\u5e03\u5c14\u8868\u8fbe\u5f0f\u7684\u5f62\u5f0f\u6709\u7279\u6b8a\u8981\u6c42\uff0c\u5177\u4f53\u6765\u8bf4\uff0c\u5b83\u8981\u6c42\u5e03\u5c14\u8868\u8fbe\u5f0f\u5f62\u5982\uff1a</p> \\[ (x_1 \\vee x_2 \\vee x_3) \\wedge (x_4 \\vee x_5 \\vee x_6) \\wedge \\cdots \\wedge (x_{n-2} \\vee x_{n-1} \\vee x_n) \\] <ul> <li>\u53d8\u91cf\u662f\u5426\u91cd\u590d\u3001\u662f\u5426\u53d6\u975e\u4e0d\u662f\u91cd\u70b9\uff0c\\(x_1\\) \u53ef\u4ee5\u548c \\(x_6\\) \u662f\u540c\u4e00\u4e2a\u53d8\u91cf\uff0c\u4e5f\u53ef\u4ee5\u662f\u67d0\u4e2a\u53d8\u91cf\u7684\u975e\uff0c\u91cd\u70b9\u662f\u8fd9\u91cc\u7684\u4e09\u4e2a\u4e00\u7ec4\u7684\u5f62\u5f0f\u3002</li> </ul>"},{"location":"ZJU_CS/ADS/week10/#a_formal-language_framework","title":"A formal-language Framework","text":"<ul> <li> TODO: Finish this part.</li> </ul>"},{"location":"ZJU_CS/ADS/week10/#_3","title":"\u76f8\u5173\u6982\u5ff5","text":"<p>\u8bf4\u660e</p> <p>\u4ee5\u4e0b\u90e8\u5206\u7684\u5185\u5bb9\u662f\u4e3a\u4e86\u8fdb\u4e00\u6b65\u8bf4\u660e\u4e0a\u6587\u4e2d\u90e8\u5206\u5185\u5bb9\u800c\u4ecb\u7ecd\u7684\u6982\u5ff5\uff0c\u5e76\u4e0d\u5177\u6709\u7ec4\u7ec7\u7ed3\u6784\u3002</p>"},{"location":"ZJU_CS/ADS/week10/#_4","title":"\u56fe\u7075\u673a","text":"<p>Links</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Turing_machine</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Nondeterministic_Turing_machine</p> <p>\u56fe\u7075\u673a\u6709\u4e00\u4e9b\u53d8\u4f53\uff0c\u800c\u6211\u4eec\u5728\u8fd9\u91cc\u5f15\u5165\u56fe\u7075\u673a\u662f\u4e3a\u4e86\u4ecb\u7ecd P/NP\uff0c\u53ea\u4ecb\u7ecd\u786e\u5b9a\u578b\u56fe\u7075\u673a\u548c\u975e\u786e\u5b9a\u578b\u56fe\u7075\u673a\u3002</p> <p>\u56fe\u7075\u673a\u7531\u4e00\u4e2a\u65e0\u9650\u957f\u7684\u7eb8\u5e26\u548c\u4e00\u4e2a\u8bfb\u5199\u5934\u7ec4\u6210\u3002\u7eb8\u5e26\u88ab\u5212\u5206\u4e3a\u4e00\u4e2a\u4e2a\u683c\u5b50\uff0c\u6bcf\u4e2a\u683c\u5b50\u4e0a\u6709\u4e00\u4e2a\u7b26\u53f7\uff0c\u8bfb\u5199\u5934\u53ef\u4ee5\u5728\u7eb8\u5e26\u4e0a\u79fb\u52a8\uff0c\u8bfb\u5199\u5934\u53ef\u4ee5\u8bfb\u53d6\u5f53\u524d\u683c\u5b50\u4e0a\u7684\u7b26\u53f7\uff0c\u4e5f\u53ef\u4ee5\u6539\u53d8\u5f53\u524d\u683c\u5b50\u4e0a\u7684\u7b26\u53f7\u3002\u56fe\u7075\u673a\u7684\u72b6\u6001\u662f\u4e00\u4e2a\u6709\u9650\u96c6\u5408\uff0c\u6bcf\u4e2a\u72b6\u6001\u90fd\u6709\u4e00\u4e2a\u8f6c\u79fb\u51fd\u6570\uff0c\u8f6c\u79fb\u51fd\u6570\u7684\u8f93\u5165\u662f\u5f53\u524d\u72b6\u6001\u548c\u5f53\u524d\u683c\u5b50\u4e0a\u7684\u7b26\u53f7\uff0c\u8f93\u51fa\u662f\u4e0b\u4e00\u4e2a\u72b6\u6001\u3001\u4e0b\u4e00\u4e2a\u683c\u5b50\u4e0a\u7684\u7b26\u53f7\u548c\u8bfb\u5199\u5934\u7684\u79fb\u52a8\u65b9\u5411\u3002</p> <p>\u66f4\u672c\u8d28\u7684\u6765\u8bf4\uff0c\u56fe\u7075\u673a\u662f\u4e00\u79cd\u8ba1\u7b97\u6a21\u578b\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u5b83\u6765\u8868\u793a\u4efb\u4f55\u6709\u9650\u903b\u8f91\u6570\u5b66\u8fc7\u7a0b\u3002\u786e\u5b9a\u578b\u56fe\u7075\u673a\u4e0e\u6211\u4eec\u5e38\u89c4\u7406\u89e3\u7684\u8ba1\u7b97\u673a\u903b\u8f91\u7c7b\u4f3c\uff0c\u5373\u4e0b\u4e00\u6b65\u8981\u505a\u4ec0\u4e48\u53ef\u4ee5\u6839\u636e\u5f53\u524d\u72b6\u6001\u786e\u5b9a\u3002\u800c\u975e\u786e\u5b9a\u578b\u56fe\u7075\u673a\u5219\u7c7b\u4f3c\u4e8e\u80fd\u591f\u8fdb\u884c\u65e0\u9650\u5e76\u884c\uff0c\u5e76\u4e14\u6700\u7ec8\u603b\u662f\u9009\u62e9\u901a\u5411\u6b63\u786e\u7b54\u6848\u7684\u65b9\u5411\u7684\u90a3\u6761\u8def\uff08\u6709\u70b9\u7c7b\u4f3c\u4e8e\u5b83\u80fd\u5f00\u5e73\u884c\u5b87\u5b99\uff0c\u5e76\u4e14\u603b\u662f\u8ba9\u4f60\u89c2\u6d4b\u5230\u6b63\u786e\u7684\u90a3\u4e00\u4e2a\u5e73\u884c\u5b87\u5b99\uff09\u3002</p>"},{"location":"ZJU_CS/ADS/week10/#_5","title":"\u591a\u9879\u5f0f\u65f6\u95f4\u5f52\u7ea6","text":"<p>Links</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Polynomial-time_reduction</p> <p>\u6211\u4eec\u5f15\u5165 P/NP \u7b49\u8fd9\u4e9b\u6982\u5ff5\uff0c\u662f\u4e3a\u4e86\u8861\u91cf\u95ee\u9898\u7684\u590d\u6742\u7a0b\u5ea6\uff0c\u800c\u5982\u4f55\u5728\u5177\u4f53\u7684\u201c\u95ee\u9898\u201d\u95f4\u4f20\u9012\u3001\u6bd4\u8f83\u8fd9\u79cd\u201c\u590d\u6742\u7a0b\u5ea6\u201d\uff0c\u5c31\u662f\u591a\u9879\u5f0f\u65f6\u95f4\u5f52\u7ea6(polynomial reduce)\u7684\u76ee\u7684\u3002</p> graph LR; A[\"\u95ee\u9898 A\"] B[\"\u95ee\u9898 B\"] A ===&gt;|\"\u591a\u9879\u5f0f\u65f6\u95f4\u8f6c\u5316\"| B  <p>\u5982\u679c\u6211\u4eec\u80fd\u5728\u591a\u9879\u5f0f\u65f6\u95f4\u7684\u590d\u6742\u5ea6\u5185\uff0c\u5c06\u95ee\u9898 A \u8f6c\u5316\u4e3a\u95ee\u9898 B\uff0c\u5219\u79f0\u95ee\u9898 A \u53ef\u4ee5\u591a\u9879\u5f0f\u65f6\u95f4\u5f52\u7ea6(polynomial reduce)\u4e3a B\uff0c\u8bb0\u4e3a \\(A \\leq_{p} B\\)\uff0c\u8868\u793a A \u4e0d\u4f1a\u6bd4 B \u96be\u3002</p> <p>\u800c\u91c7\u53d6\u6570\u5b66\u8bed\u8a00\u6765\u63cf\u8ff0\uff0c\u5219\u662f\uff1a</p> \\[ \\begin{aligned} A \\leq_{p} B  \\;\\;\\Leftrightarrow\\;\\; &amp; \\exist f() \\text{ which runs in polynomial time}, \\\\ &amp; s.t.    \\;\\; \\forall x \\in A,\\; f(x) \\in B \\\\ &amp; \\text{and}\\; \\forall f(x) \\in B,\\; y \\in A \\end{aligned} \\]"},{"location":"ZJU_CS/ADS/week11/","title":"Lecture 11 | Approximation","text":""},{"location":"ZJU_CS/ADS/week11/#_1","title":"\u8fd1\u4f3c\u7b97\u6cd5","text":"<p>links</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Approximation_algorithm</p> <p>\u5728\u4e0a\u4e00\u7ae0\u4e2d\u6211\u4eec\u4ecb\u7ecd\u4e86 P/NP \u95ee\u9898\uff0c\u800c\u5927\u5bb6\u666e\u904d\u8ba4\u4e3a P \u2260 NP\uff0c\u8fd9\u5c31\u610f\u5473\u7740\u5bf9\u4e8e\u67d0\u4e9b\u95ee\u9898\uff0c\u6211\u4eec\u65e0\u6cd5\u4f7f\u7528\u591a\u9879\u5f0f\u65f6\u95f4\u89e3\u51b3\uff0c\u800c\u5728\u95ee\u9898\u89c4\u6a21\u53d8\u5927\u65f6\uff0c\u8d8a\u53d1\u4e0d\u53ef\u63a5\u53d7\u3002</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u8003\u8651\u80fd\u5426\u9000\u800c\u6c42\u5176\u6b21\uff0c\u5728\u591a\u9879\u5f0f\u65f6\u95f4\u5185\u6c42\u4e00\u4e2a\u6bd4\u8f83\u4f18\u7684\u89e3\u3002\u66f4\u5177\u4f53\u7684\u6765\u8bf4\uff0c\u6211\u4eec\u5c1d\u8bd5\u5bfb\u627e\u4e00\u79cd\u591a\u9879\u5f0f\u7b97\u6cd5\uff0c\u4f7f\u5f97\u5176\u7ed3\u679c\u59cb\u7ec8\u5728\u5173\u4e8e\u51c6\u786e\u89e3\u7684\u53ef\u63a5\u53d7\u504f\u5dee\u8303\u56f4\u5185\uff0c\u5bf9\u4e8e\u8fd9\u79cd\u7b97\u6cd5\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u8fd1\u4f3c\u7b97\u6cd5(approximation algorithm)\u3002</p> <p>\u6211\u4eec\u8bbe \\(f(n, x)\\) \u662f\u5bf9\u8f93\u5165\u5927\u5c0f\u4e3a \\(n\\) \u7684\u60c5\u51b5\u4e0b\uff0c\u5bf9\u7ed3\u679c \\(x\\) \u7684\u6700\u574f\u60c5\u51b5\u7684\u4e00\u4e2a\u76f4\u89c2\u91cf\u5316\uff08\u4f8b\u5982 dist, weight...\uff09\uff0c\u82e5\u8bbe \\(x^*\\) \u4e3a\u51c6\u786e\u89e3\uff0c\\(x\\) \u4e3a\u7ed9\u5b9a\u7b97\u6cd5\u7ed3\u679c\uff0c\u5219\u6211\u4eec\u5b9a\u4e49\u8fd1\u4f3c\u6bd4(Approximation Ratio)\\(\\rho\\)\uff1a</p> \\[ \\forall n \\rho = \\max\\left\\{\\frac{f(n, x)}{f(n, x^*)}, \\frac{f(n, x^*)}{f(n, x)}\\right\\} \\] <p>\u5219\u79f0\u7ed9\u5b9a\u7b97\u6cd5\u4e3a \\(\\rho\\) \u8fd1\u4f3c\u7b97\u6cd5(\\(\\rho\\)-approximation algorithm)\u3002</p> <p>\u8fd1\u4f3c\u7b97\u6cd5 v.s. \u968f\u673a\u7b97\u6cd5</p> <p>\u5728\u770b\u5230\u8fd1\u4f3c\u7b97\u6cd5\u65f6\uff0c\u6211\u8111\u5b50\u91cc\u4e00\u4e0b\u5b50\u6d6e\u73b0\u51fa\u4e86\u968f\u673a\u7b97\u6cd5\u7684\u6982\u5ff5\uff0c\u540c\u6837\u662f\u6c42\u51c6\u786e\u89e3\u7684\u8fd1\u4f3c\u89e3\uff0c\u4e24\u8005\u6709\u4f55\u533a\u522b\u5462\uff1f</p> hint: \u6700\u574f\u60c5\u51b5 <p>\u8fd1\u4f3c\u7b97\u6cd5\u548c\u968f\u673a\u7b97\u6cd5\u6700\u5927\u7684\u533a\u522b\u5c31\u662f\uff0c\u5f53\u6211\u4eec\u8bbe\u8ba1\u3001\u5206\u6790\u3001\u8ba8\u8bba\u8fd1\u4f3c\u7b97\u6cd5\u7684\u65f6\u5019\uff0c\u6211\u4eec\u5173\u6ce8\u7684\u90fd\u662f\u5b83\u7684\u6700\u574f\u60c5\u51b5\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u8fd1\u4f3c\u7b97\u6cd5\u662f\u5b8c\u5168\u53ef\u63a7\u7684\uff0c\u800c\u7eaf\u7cb9\u7684\u968f\u673a\u7b97\u6cd5\u5219\u662f\u901a\u8fc7\u6982\u7387\u6765\u51cf\u5c11\u574f\u60c5\u51b5\u51fa\u73b0\u7684\u53ef\u80fd\uff0c\u5e76\u6ca1\u6709\u4e25\u683c\u7684\u7ea6\u675f\u3002\u8fd1\u4f3c\u7b97\u6cd5\u6700\u574f\u4e5f\u5c31\u574f\u5230 \\(\\rho\\)\uff0c\u800c\u968f\u673a\u7b97\u6cd5\u6700\u574f\u53ef\u4ee5\u574f\u5230\u6d77\u62c9\u9c81\u5927\u9646\u3002</p>"},{"location":"ZJU_CS/ADS/week11/#_2","title":"\u8fd1\u4f3c\u8303\u5f0f","text":"<p>links</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Polynomial-time_approximation_scheme</p> <p>\u8fd1\u4f3c\u8303\u5f0f(approximation scheme)\u6307\u7684\u662f\u5bf9\u4e8e\u67d0\u4e2a\u4f18\u5316\u95ee\u9898\u7684\u4e00\u65cf\u76f8\u540c\u6a21\u5f0f\u7684\u7b97\u6cd5\uff0c\u5b83\u4eec\u6ee1\u8db3\u5bf9\u4e8e\u786e\u5b9a\u7684 \\(\\epsilon &gt; 0\\)\uff0c\u7b97\u6cd5\u7684\u8fd1\u4f3c\u6bd4\u4e3a \\(1+\\epsilon\\)\u3002</p> <p>\u53ef\u4ee5\u7c97\u7cd9\u5730\u7406\u89e3\u4e3a\uff1a\u201c\u8303\u5f0f\u201d\u662f\u4e00\u4e2a\u8f93\u51fa\u4e3a\u7b97\u6cd5\u7684\u7279\u6b8a\u51fd\u6570\uff0c\u800c \\(\\epsilon\\) \u662f\u201c\u8303\u5f0f\u201d\u7684\u4e00\u4e2a\u53c2\u6570\uff0c\u5bf9\u4e8e\u7279\u5b9a\u7684 \\(\\epsilon\\)\uff0c\u201c\u8303\u5f0f\u201d\u8f93\u51fa\u4e00\u4e2a\u7279\u5b9a\u7684\u7b97\u6cd5\uff08\u8fd9\u4e9b\u7b97\u6cd5\u6709\u7740\u76f8\u540c\u7684\u6a21\u5f0f\uff09\uff0c\u800c\u8fd9\u4e9b\u201c\u8303\u5f0f\u201d\u8f93\u51fa\u7684\u7b97\u6cd5\uff0c\u90fd\u89e3\u51b3\u540c\u4e00\u4e2a\u95ee\u9898\uff0c\u5e76\u4e14\u5bf9\u4e8e\u4efb\u610f\u56fa\u5b9a\u7684 \\(\\epsilon\\) \u5176\u8fd1\u4f3c\u6bd4\u4e3a \\(1+\\epsilon\\)\u3002</p> <p>\u800c\u5173\u4e8e \\(\\epsilon &gt; 0\\) \u8fd9\u4e2a\u7ea6\u675f\uff0c\u662f\u56e0\u4e3a\u8fd1\u4f3c\u6bd4\u5fc5\u5b9a\u5927\u4e8e 1\u3002</p> <p>\u800c\u6b64\u65f6\uff0c\u8fd9\u4e00\u65cf\u7684\u7b97\u6cd5\u7684\u590d\u6742\u5ea6\u53ef\u4ee5\u8868\u793a\u4e3a \\(O(f(n, \\epsilon))\\)\uff0c\u5982 \\(O(n^{2/\\epsilon}), O((\\frac{1}{\\epsilon})^2n^3)\\)\u3002\u5f53 \\(f(n, \\epsilon)\\) \u5173\u4e8e \\(n\\) \u662f\u591a\u9879\u5f0f\u65f6\uff0c\u6211\u4eec\u79f0\u5176\u4e3a\u591a\u9879\u5f0f\u65f6\u95f4\u8fd1\u4f3c\u8303\u5f0f(polynomial-time approximation scheme, PTAS)\u3002\u5f53 \\(f(n, \\epsilon)\\) \u5173\u4e8e \\(n\\) \u548c \\(\\frac{1}{\\epsilon}\\) \u90fd\u662f\u591a\u9879\u5f0f\u65f6\uff0c\u6211\u4eec\u79f0\u5176\u4e3a\u5b8c\u5168\u591a\u9879\u5f0f\u65f6\u95f4\u8fd1\u4f3c\u8303\u5f0f(fully polynomial-time approximation scheme, FPTAS)\u3002</p> <p>\u4e3a\u4ec0\u4e48\u8981\u533a\u5206 PTAS \u548c FPTAS \u5462\uff1f\u6211\u4eec\u89c2\u5bdf \\(\\epsilon\\) \u5bf9\u7b97\u6cd5\u7684\u5f71\u54cd\uff1a\u968f\u7740 \\(\\epsilon\\) \u7684\u51cf\u5c0f\uff0c\u8fd1\u4f3c\u6bd4\u9010\u6e10\u53d8\u5c0f\uff0c\u5373\u51c6\u786e\u5ea6\u63d0\u9ad8\uff1b\u800c \\(\\frac{1}{\\epsilon}\\) \u53d8\u5927\uff0c\u800c\u901a\u5e38\u6765\u8bf4 \\(\\frac{1}{\\epsilon}\\) \u4e0e\u7b97\u6cd5\u590d\u6742\u5ea6\u90fd\u662f\u6b63\u76f8\u5173\u7684\uff0c\u56e0\u6b64\u4f1a\u5bfc\u81f4\u7b97\u6cd5\u590d\u6742\u5ea6\u5347\u9ad8\u3002\u5982\u679c\u8bf4\u8fd9\u4e2a\u8fd1\u4f3c\u8303\u5f0f\u662f FPTAS\uff0c\u90a3\u4e48\u4e3a\u4e86\u63d0\u9ad8\u51c6\u786e\u5ea6\u800c\u7f29\u5c0f \\(\\epsilon\\)\uff0c\u5bfc\u81f4\u7684\u590d\u6742\u5ea6\u53d8\u5316\u662f\u76f8\u5bf9\u53ef\u63a5\u53d7\u7684\uff08\u591a\u9879\u5f0f\u7ea7\u7684\u53d8\u5316\uff0c\u5982 \\((\\frac{1}{\\epsilon})^2n^3\\) \u5173\u4e8e \\(\\frac{1}{\\epsilon}\\) \u662f\u591a\u9879\u5f0f\u7ea7\u7684\uff09\uff1b\u7136\u800c\u5982\u679c\u5b83\u4e0d\u662f FPTAS\uff0c\u90a3\u4e48 \\(\\epsilon\\) \u7684\u7f29\u5c0f\u53ef\u80fd\u5e26\u6765\u6050\u6016\u7684\u590d\u6742\u5ea6\u589e\u52a0\uff08\u5982 \\(n^{2/\\epsilon}\\) \u5173\u4e8e \\(\\epsilon\\) \u662f\u6307\u6570\u7ea7\u7684\uff09\u3002</p> <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u4ee5\u82e5\u5e72\u5177\u4f53\u4f8b\u5b50\u505a\u5206\u6790\uff0c\u4ee5\u4fbf\u66f4\u597d\u5730\u7406\u89e3\u8fd1\u4f3c\u7b97\u6cd5\u3002</p>"},{"location":"ZJU_CS/ADS/week11/#approximate_bin_packing","title":"[\u6848\u4f8b] Approximate Bin Packing","text":"<p>links</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Bin_packing</p> <p>\u88c5\u7bb1\u95ee\u9898\u6307\u7684\u662f\uff0c\u7ed9\u5b9a \\(N\\) \u4e2a item\uff0c\u7b2c \\(i\\in [1,N]\\) \u4e2a item \u7684 size \u4e3a \\(S_i \\in (0,1]\\)\uff0c\u4e00\u4e2a bin \u7684\u5927\u5c0f\u4e3a \\(1\\)\uff0c\u5c1d\u8bd5\u5bfb\u627e\u6700\u5c11\u7684\uff0c\u80fd\u591f\u88c5\u8f7d\u6240\u6709 item \u7684 bin \u7684\u6570\u91cf\u3002</p> \ud83c\udf30 \u4f8b\u5b50 <p>\u7ed9\u5b9a 7 \u4e2a item\uff0csize \u5206\u522b\u4e3a \\(0.2, 0.5, 0.4, 0.7, 0.1, 0.3, 0.8\\)\uff0c\u5219\u6700\u5c11\u9700\u8981 3 \u4e2a bin\uff08\u51c6\u786e\u89e3\uff09\uff1a</p> <ul> <li>bin 1: \\(0.2 + 0.8\\);</li> <li>bin 2: \\(0.7 + 0.3\\);</li> <li>bin 3: \\(0.4 + 0.1 + 0.5\\);</li> </ul> <p>\u8fd9\u662f\u4e00\u4e2a NP hard \u95ee\u9898\uff0c\u73b0\u5728\u6211\u4eec\u8003\u8651\u4e09\u79cd\u8fd1\u4f3c\u89e3\u6cd5\u3002\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e09\u79cd\u90fd\u662f\u5728\u7ebf(online)\u89e3\u6cd5\uff0c\u5373\u5904\u7406 \\(item_i\\) \u65f6\u6211\u4eec\u4e0d\u77e5\u9053 \\(item_{i+1}\\sim item_{N}\\) \u7684\u60c5\u51b5\u3002\u4e4b\u540e\u6211\u4eec\u4f1a\u518d\u8ba8\u8bba\u79bb\u7ebf(offline)\u505a\u6cd5\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u77e5\u9053\u6240\u6709 item \u7684\u60c5\u51b5\u4ee5\u540e\u518d\u7ed9\u51fa\u7b56\u7565\u3002</p>"},{"location":"ZJU_CS/ADS/week11/#online_next_fit_nf","title":"(online) Next Fit (NF)","text":"<p>links</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Next-fit_bin_packing</p> <p>NF \u7b56\u7565\u603b\u662f\u9009\u62e9\u5f53\u524d\u6700\u540e\u4e00\u4e2a bin\uff0c\u82e5\u80fd\u591f\u5bb9\u7eb3\uff0c\u5219\u5c06\u5f53\u524d item \u653e\u5165\u5176\u4e2d\uff0c\u5426\u5219\u65b0\u5f00\u4e00\u4e2a bin\u3002</p> <p>NF \u7b56\u7565\u603b\u662f\u4f7f\u7528\u4e0d\u8d85\u8fc7 \\(2M-1\\) \u4e2a bin\uff0c\u5176\u4e2d \\(M\\) \u8868\u793a\u51c6\u786e\u89e3\u7684 \\(\\#bin\\)\u3002</p> proof for 2M-1 <p>\u6211\u4eec\u4ece NF \u7684\u7ed3\u679c\u51fa\u53d1\uff0c\u8bc1\u660e\u5f53 NF \u7684\u7ed3\u679c\u4e3a\u9700\u8981 \\(2M-1\\) \u6216 \\(2M\\) \u4e2a bin \u65f6\uff0c\u51c6\u786e\u89e3\u4e3a\u81f3\u5c11\u9700\u8981 \\(M\\) \u4e2a bin\u3002</p> <p>\u5047\u8bbe \\(S(B_i)\\) \u8868\u793a\u7b2c \\(i\\) \u4e2a bin \u7684 size\uff0c\u5219\u6839\u636e NF \u7684\u5b9a\u4e49\uff0c\u6709\uff1a\\(S(B_{i}) + S(B_{i+1}) &gt; 1\\)\uff08\u662f NF \u7684\u5fc5\u8981\u4e0d\u5145\u5206\u6761\u4ef6\uff09\u3002\u7a0d\u4f5c\u89e3\u91ca\uff0c\u4f7f\u7528\u53cd\u8bc1\u6cd5\uff0c\u5047\u8bbe \\(S(B_{i}) + S(B_{i+1}) \\leq 1\\)\uff0c\u8fd9\u8bf4\u660e\u65e0\u8bba \\(B_{i+1}\\) \u4e2d\u6709\u591a\u5c11 item\uff0c\u90fd\u4e00\u5b9a\u80fd\u653e\u8fdb \\(B_i\\)\uff0c\u800c\u8fd9\u4e0e NF \u201c\\(B_i\\) \u653e\u4e0d\u4e0b\u4e86\u624d\u5f00\u59cb\u653e \\(B_{i+1}\\)\u201d \u7684\u6027\u8d28\u76f8\u8fdd\u80cc\u3002\u4e8e\u662f\u6211\u4eec\u5c06\u6240\u6709\u6876\u4e24\u4e24\u914d\u5bf9\uff1a</p> <p>1.\u5f53 NF \u7684\u7ed3\u679c\u662f\u9700\u8981 \\(2M-1\\) \u4e2a bin \u65f6\uff1a</p> \\[ \\left\\{ \\begin{aligned}     S(B_1) + S(B_2) &amp;&gt; 1 \\\\     S(B_3) + S(B_4) &amp;&gt; 1 \\\\     \\vdots \\\\     S(B_{2M-3}) + S(B_{2M-2}) &amp;&gt; 1 \\\\     S(B_{2M-1}) &amp;\\leq 1 \\end{aligned} \\right. \\\\ \\begin{aligned}     &amp;\\therefore \\sum_{i=1}^{2M-1} &gt; \\sum_{i=1}^{2M-2} &gt; M-1 \\\\     &amp;\\therefore \\sum_{i=1}^{2M-1} \\geq M \\end{aligned} \\] <p>\u5373 item \u7684\u603b size \u81f3\u5c11\u4e3a M\uff0c\u5373\u81f3\u5c11\u9700\u8981 \\(M\\) \u4e2a bin\u3002</p> <p>2.\u800c\u5f53 NF \u7684\u7ed3\u679c\u662f\u9700\u8981 \\(2M\\) \u4e2a bin \u65f6\uff0c\u53ef\u4ee5\u8f6c\u5316\u4e3a \\(2M-1\\) \u7684\u60c5\u51b5\u3002</p>"},{"location":"ZJU_CS/ADS/week11/#online_first_fit_ff","title":"(online) First Fit (FF)","text":"<p>links</p> <p>Wikipedia: https://en.wikipedia.org/wiki/First-fit_bin_packing</p> <p>FF \u7b56\u7565\u603b\u662f\u9009\u62e9\u7b2c\u4e00\u4e2a\u80fd\u653e\u4e0b\u5f53\u524d item \u7684 bin\uff0c\u82e5\u6240\u6709 bin \u90fd\u65e0\u6cd5\u5bb9\u7eb3\u5f53\u524d item\uff0c\u5219\u65b0\u5f00\u4e00\u4e2a bin\u3002</p> <p>NF \u7b56\u7565\u603b\u662f\u4f7f\u7528\u4e0d\u8d85\u8fc7 \\(\\lfloor 1.7M \\rfloor\\) \u4e2a bin\uff0c\u5e76\u4e14\u5b58\u5728\u4e00\u65cf\u80fd\u5bf9\u8fb9\u754c\u53d6\u7b49\u7684\u8f93\u5165\uff0c\u5176\u4e2d \\(M\\) \u8868\u793a\u51c6\u786e\u89e3\u7684 \\(\\#bin\\)\u3002</p>"},{"location":"ZJU_CS/ADS/week11/#online_best_fit_bf","title":"(online) Best Fit (BF)","text":"<p>links</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Best-fit_bin_packing</p> <p>BF \u7b56\u7565\u603b\u662f\u9009\u62e9\u80fd\u591f\u5bb9\u7eb3\u5f53\u524d item \u4e14\u5269\u4f59\u7a7a\u95f4\u6700\u5c0f\u7684 bin\uff08\u5373 tightest\uff09\uff0c\u82e5\u6240\u6709 bin \u90fd\u65e0\u6cd5\u5bb9\u7eb3\u5f53\u524d item\uff0c\u5219\u65b0\u5f00\u4e00\u4e2a bin\u3002</p> <p>NF \u7b56\u7565\u4e5f\u603b\u662f\u4f7f\u7528\u4e0d\u8d85\u8fc7 \\(\\lfloor 1.7M \\rfloor\\) \u4e2a bin\uff0c\u5e76\u4e14\u5b58\u5728\u4e00\u65cf\u80fd\u5bf9\u8fb9\u754c\u53d6\u7b49\u7684\u8f93\u5165\uff0c\u5176\u4e2d \\(M\\) \u8868\u793a\u51c6\u786e\u89e3\u7684 \\(\\#bin\\)\u3002</p> <p>\u867d\u7136\u5728\u7ebf\u505a\u6cd5\u7531\u4e8e\u5bf9\u4fe1\u606f\u628a\u63e1\u7684\u4e0d\u5168\u9762\uff0c\u5728\u4e0d\u7279\u6b8a\u6784\u9020\u8f93\u5165\u7684\u60c5\u51b5\u4e0b\u751a\u81f3\u51e0\u4e4e\u4e0d\u53ef\u80fd\u8fbe\u5230\u6700\u4f18\u89e3\uff0c\u4f46\u662f\u73b0\u5b9e\u4e16\u754c\u4e2d\u6709\u5f88\u591a\u80fd\u5efa\u6a21\u4e3a\u88c5\u7bb1\u95ee\u9898\u7684\u95ee\u9898\uff0c\u90fd\u8981\u6c42\u4f7f\u7528\u5728\u7ebf\u505a\u6cd5\u89e3\u51b3\u3002\u56e0\u6b64\uff0c\u7814\u7a76\u5728\u7ebf\u505a\u6cd5\u8fd8\u662f\u6709\u5176\u610f\u4e49\u7684\u3002</p> <p>\u6b64\u5916\uff0c\u5173\u4e8e\u5728\u7ebf\u505a\u6cd5\uff0c\u6709\u4e00\u4e2a\u7ed3\u8bba\uff1a</p> <p>theorem</p> <p>\u5bf9\u4e8e\u88c5\u7bb1\u95ee\u9898\uff0c\u5982\u679c\u9650\u5b9a\u4f7f\u7528\u5728\u7ebf\u505a\u6cd5\uff0c\u5219\u6700\u4f18\u7684\u8fd1\u4f3c\u89e3\u6cd5\uff0c\u5176\u6700\u574f\u60c5\u51b5\u7684\u7ed3\u679c\u4e5f\u81f3\u5c11\u9700\u8981\u51c6\u786e\u89e3\u7684 \\(\\frac{5}{3}\\)\u3002</p> <p>PPT \u4e0a\u7684\u539f\u8bdd\u662f\uff0c\u65e0\u8bba\u54ea\u79cd\u5728\u7ebf\u505a\u6cd5\u4e5f\u81f3\u5c11\u9700\u8981\u4f7f\u7528 \\(\\frac{5}{3}\\) \u7684\u51c6\u786e\u89e3\u7ed9\u51fa\u7684\u6570\u91cf\uff0c\u4f46\u662f\u663e\u7136\u8fd9\u4e2a \\(\\frac{5}{3}\\) \u662f\u9488\u5bf9\u6700\u574f\u89e3\u7684\u8ba8\u8bba\u3002\u56de\u987e\u300c\u8fd1\u4f3c\u7b97\u6cd5 v.s. \u968f\u673a\u7b97\u6cd5\u300d\u8fd9\u4e2a block \u91cc\u7684\u5185\u5bb9\uff0c\u6211\u4eec\u5206\u6790\u8fd1\u4f3c\u89e3\uff0c\u90fd\u662f\u9488\u5bf9\u5176\u6700\u574f\u60c5\u51b5\u6765\u8bf4\u7684\u3002</p>"},{"location":"ZJU_CS/ADS/week11/#offline_first_fit_decreasing_ffd","title":"(offline) First Fit Decreasing (FFD)","text":"<p>\u79bb\u7ebf\u505a\u6cd5\u7684\u4f18\u52bf\u5728\u4e8e\u5b83\u80fd\u591f\u83b7\u5f97\u6240\u6709 item \u7684\u4fe1\u606f\u4ee5\u6c42\u7edf\u7b79\u89c4\u5212\u3002\u8fd9\u91cc\u7ed9\u51fa\u7684\u8fd1\u4f3c\u505a\u6cd5\u662f\uff0c\u5c06 item \u6309\u7167 size \u964d\u5e8f\u6392\u5e8f\uff0c\u800c\u540e\u4f7f\u7528 FF\uff08\u6216 BF\uff0c\u7531\u4e8e\u5355\u8c03\u6027\uff0c\u4e24\u8005\u7b49\u4ef7\uff09\u3002</p> \ud83c\udf30 \u4f8b\u5b50 <p>\u7ed9\u5b9a 7 \u4e2a item\uff08\u540c\u4e4b\u524d\u7684 \ud83c\udf30\uff09\uff0c\u7ecf\u8fc7\u6392\u5e8f\u540e\uff0c\u5b83\u4eec\u7684 size \u5206\u522b\u4e3a $0.8, 0.7, 0.5, 0.4, 0.3, 0.2, 0.1\uff0c\u5219\u6700\u5c11\u9700\u8981 3 \u4e2a bin\uff08\u51c6\u786e\u89e3\uff09\uff1a</p> <ul> <li>bin 1: \\(0.8 + 0.2\\);</li> <li>bin 2: \\(0.7 + 0.3\\);</li> <li>bin 3: \\(0.5 + 0.4 + 0.1\\);</li> </ul> <p>FFD \u7b56\u7565\u603b\u662f\u4f7f\u7528\u4e0d\u8d85\u8fc7 \\(\\frac{11}{9}M + \\frac{6}{9}\\) \u4e2a bin\uff08\u4e3a\u5565\u5c31\u8fde wiki \u4e5f\u4e0d\u7ea6 6/9\uff09\uff0c\u5e76\u4e14\u5b58\u5728\u4e00\u65cf\u80fd\u5bf9\u8fb9\u754c\u53d6\u7b49\u7684\u8f93\u5165\uff0c\u5176\u4e2d \\(M\\) \u8868\u793a\u51c6\u786e\u89e3\u7684 \\(\\#bin\\)\u3002</p>"},{"location":"ZJU_CS/ADS/week11/#knapsack_problem","title":"[\u6848\u4f8b] Knapsack Problem","text":"<p>link</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Knapsack_problem</p> <p>\u4e00\u4e2a\u4e0e\u88c5\u7bb1\u95ee\u9898\u5f88\u50cf\u7684\u95ee\u9898\u662f\u80cc\u5305\u95ee\u9898\u3002\u5176\u5927\u81f4\u63cf\u8ff0\u5982\u4e0b\uff1a\u7ed9\u5b9a\u4e00\u4e2a\u5bb9\u91cf\u4e3a \\(M\\) \u7684\u80cc\u5305\uff0c\u4ee5\u53ca \\(N\\) \u4e2a item\uff0c\u7b2c \\(i\\) \u4e2a item \u7684\u91cd\u91cf\u4e3a \\(w_i\\)\uff0c\u5176\u5229\u6da6\u4e3a \\(p_i\\)\u3002\u8981\u6c42\u5728\u4e0d\u8d85\u8fc7\u80cc\u5305\u5bb9\u91cf\u7684\u524d\u63d0\u4e0b\uff0c\u4f7f\u5f97\u80cc\u5305\u4e2d\u7684\u5229\u6da6\u6700\u5927\u5316\u3002\uff08\u6211\u4e5f\u4e0d\u77e5\u9053\u4e3a\u4ec0\u4e48 PPT \u4e0a\u4f1a\u628a\u5bb9\u91cf\u548c\u91cd\u91cf\u5173\u8054\u8d77\u6765\uff0canyway\uff0c\u5bb9\u91cf\u9650\u5236\u4e86 item \u7684\u91cd\u91cf\u548c\u3002\uff09</p> <p>\u6ce8\u610f</p> <p>\u6216\u8bb8\u5728\u5b66\u4e60 dp \u7684\u65f6\u5019\u4f60\u5df2\u7ecf\u63a5\u89e6\u8fc7\u80cc\u5305\u95ee\u9898\u4e86\uff0c\u4f46\u662f\u8bf7\u6ce8\u610f\uff0c\u6211\u4eec\u8fd9\u91cc\u8ba8\u8bba\u7684\u80cc\u5305\u95ee\u9898\u6709\u4e00\u4e2a\u975e\u5e38\u91cd\u8981\u7684\u7279\u70b9\u5c31\u662f\uff0c\u5bb9\u91cf\u548c\u5229\u6da6\u90fd\u662f\u5b9e\u6570\uff0c\u66f4\u76f4\u767d\u7684\u6765\u8bf4\uff0c\u4f60\u6ca1\u529e\u6cd5\u901a\u8fc7\u5c06\u5bb9\u91cf\u6216\u5229\u6da6\u4f5c\u4e3a\u72b6\u6001\u6765 dp \u6c42\u51c6\u786e\u89e3\u3002</p> <p>\u800c\u6839\u636e\u6bcf\u4e00\u4e2a\u7269\u54c1\u80fd\u5426\u81ea\u7531\u62c6\u5206\uff0c\u80cc\u5305\u95ee\u9898\u5206\u4e3a fractional version \u548c 0-1 version \u4e24\u7c7b\u3002</p>"},{"location":"ZJU_CS/ADS/week11/#fractional_version","title":"Fractional Version","text":"<p>\u5982\u679c\u6211\u4eec\u8bb0 \\(x_i\\in[0,1]\\) \u4e3a\u7b2c \\(i\\) \u4e2a item \u7684\u9009\u4e2d\u91cf\uff08\u5373\u5047\u8bbe item \u90fd\u662f\u8fde\u7eed\u53ef\u5206\u7684\uff09\uff0c\u5219\u7ea6\u675f\u6761\u4ef6\u53ef\u4ee5\u8868\u8ff0\u4e3a \\(\\sum_{i}^N w_ix_i \\leq M\\)\uff0c\u73b0\u5728\u6c42 \\(\\sum_{i}^{N} p_ix_i\\) \u7684\u6700\u5927\u503c\u3002</p> \ud83c\udf30 \u4f8b\u5b50 <p>\u5047\u8bbe\u73b0\u5728 \\(M = 20.0\\)\uff0c\u5e76\u4e14 \\(N = 3\\)\uff0c\u5206\u522b\u662f\uff1a</p> <ul> <li>item 1: \\(w_1 = 18.0, p_1 = 25.0\\); </li> <li>item 2: \\(w_2 = 15.0, p_2 = 24.0\\);</li> <li>item 3: \\(w_3 = 10.0, p_3 = 15.0\\);</li> </ul> <p>\u5219\u6700\u4f18\u89e3\u4e3a \\(x_1 = 0, x_2 = 1, x_3 = \\frac{1}{2}\\)\uff0c\u6b64\u65f6 \\(\\sum_{i}^{N} p_ix_i = 31.5\\)\u3002</p> <p>\u7531\u4e8e \\(x_i\\in[0,1]\\)\uff0c\u7ed9\u4e86\u6211\u4eec\u6781\u5927\u7684\u9009\u62e9\u81ea\u7531\uff0c\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u4efb\u610f\u591a\u7684\u67d0\u4e2a\u7269\u54c1\u3002\u90a3\u4e48\u975e\u5e38\u6734\u7d20\u7684\u4e00\u4e2a\u60f3\u6cd5\u5c31\u662f\uff0c\u5c3d\u53ef\u80fd\u591a\u5730\u9009\u62e9\u201c\u6027\u4ef7\u6bd4\u201d\u9ad8\u7684\u7269\u54c1\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u6309\u7167 \\(\\frac{p_i}{w_i}\\)\uff08PPT \u79f0\u4e4b\u4e3a profit density\uff09\u964d\u5e8f\u6392\u5e8f\uff0c\u800c\u540e\u4ece\u5927\u5230\u5c0f\u4f9d\u6b21\u9009\u62e9\u7269\u54c1\uff0c\u76f4\u5230\u80cc\u5305\u88c5\u6ee1\u4e3a\u6b62\u3002</p> <p>\u4e0d\u8fc7\u8be5\u505a\u6cd5\u5df2\u7ecf\u662f\u51c6\u786e\u89e3\u4e86\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u5bf9\u5b83\u8fdb\u884c\u5173\u4e8e\u8fd1\u4f3c\u7b97\u6cd5\u7684\u8ba8\u8bba\u3002</p>"},{"location":"ZJU_CS/ADS/week11/#0-1_version","title":"0-1 Version","text":"<p>\u76f8\u8f83\u4e8e fractional version\uff0c0-1 version \u8981\u6c42 \\(x_i \\in \\{0,1\\}\\)\uff0c\u6362\u53e5\u8bdd\u8bf4\u6bcf\u4e00\u4e2a\u7269\u54c1\u8981\u4e48\u9009\u8981\u4e48\u4e0d\u9009\u3002\u8fd9\u662f\u4e00\u4e2a\u7ecf\u5178\u7684 NPC \u95ee\u9898\uff0c\u6211\u4eec\u5c1d\u8bd5\u4f7f\u7528\u8fd1\u4f3c\u7b97\u6cd5\u6765\u6c42\u8f83\u4f18\u89e3\u3002</p>"},{"location":"ZJU_CS/ADS/week11/#_3","title":"\u8d2a\u5fc3\u505a\u6cd5","text":"<p>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u8d2a\u5fc3\u7b97\u6cd5\uff0c\u8d2a\u5fc3\u7b56\u7565\u53ef\u4ee5\u662f\u603b\u662f\u9009\u53ef\u4ee5\u653e\u5f97\u4e0b\u7684\u3001\u8fd8\u6ca1\u653e\u5165\u4e2d\u7684\uff0c\u5229\u6da6\u6700\u5927\u7684\u6216 \\(\\frac{p_i}{w_i}\\) \u6700\u5927\u7684\u3002\u8fd9\u4e9b\u505a\u6cd5\u7684\u8fd1\u4f3c\u6bd4\u90fd\u662f 2\u3002</p> proof for rho = 2 <p>\u6211\u4eec\u7528 \\(p_\\text{max}\\) \u8868\u793a\u6240\u6709 item \u4e2d\u6700\u5927\u7684\u5229\u6da6\uff0c\u7528 \\(P_\\text{optimal}\\) \u8868\u793a\u51c6\u786e\u89e3\uff0c\\(P_\\text{greedy}\\) \u8868\u793a\u6211\u4eec\u4f7f\u7528\u8d2a\u5fc3\u505a\u6cd5\u5f97\u5230\u7684\u7b54\u6848\u3002\u5728\u8be5\u95ee\u9898\u4e2d\uff0c\u8fd1\u4f3c\u6bd4\u7684\u8ba1\u7b97\u8868\u8fbe\u5f0f\u4e3a\uff1a</p> \\[ \\rho = \\max(     \\frac{P_\\text{optimal}}{P_\\text{greedy}},     \\frac{P_\\text{greedy}}{P_\\text{optimal}} ) \\] <p>\u4e0b\u9762\u662f\u8bc1\u660e\u8fc7\u7a0b\uff1a</p> \\[ \\left\\{ \\begin{aligned}     &amp; p_\\text{max} \\leq P_\\text{greedy} &amp; (1)\\\\     &amp; P_\\text{optimal} \\leq P_\\text{greedy} + p_\\text{max} &amp; (2) \\end{aligned} \\right. \\] <p>\u5c06 \\((1)\\) \u5f0f\u4e24\u4fa7\u540c\u9664\u4ee5 \\(P_\\text{greedy}\\) \u5f97\uff1a</p> \\[ \\frac{p_\\text{max}}{P_\\text{greedy}} \\leq 1 \\quad (3) \\] <p>\u5c06 \\((2)\\) \u5f0f\u4e24\u4fa7\u540c\u9664\u4ee5 \\(P_\\text{greedy}\\)\uff0c\u5e76\u4ee3\u5165 \\((3)\\) \u5f97\uff1a</p> \\[ \\frac{P_\\text{optimal}}{P_\\text{greedy}} \\leq 1 + \\frac{p_\\text{max}}{P_\\text{greedy}} \\leq 2 \\] <p>PPT \u7684\u8bc1\u660e\u8fc7\u7a0b\u4e2d\u8fd8\u6709\u4e00\u4e2a\u4e0d\u7b49\u5f0f\uff0c\u867d\u7136\u6210\u7acb\uff0c\u4f46\u662f\u597d\u50cf\u6ca1\u8d77\u5230\u4f5c\u7528\uff0c\u6211\u5c31\u6269\u5c55\u4e00\u4e0b\u5199\u5728\u8fd9\u91cc\u6c42\u4e2a\u773c\u719f\u4e86\uff1a</p> \\[ p_\\text{max} \\leq P_\\text{greedy} \\leq P_\\text{optimal} \\leq P_\\text{frac} \\] <p>\u5176\u4e2d \\(P_\\text{frac}\\) \u6307\u7684\u662f\u540c\u6837\u7684\u6570\u636e\u4e0b fractional version \u7684\u7b54\u6848\u3002</p> <p>\u8865\u5145\u7ed3\u8bba\uff1a\u80cc\u5305\u95ee\u9898\u5177\u6709 FPTAS\u3002</p>"},{"location":"ZJU_CS/ADS/week11/#_4","title":"\u52a8\u6001\u89c4\u5212\u505a\u6cd5","text":"<p>\uff08\u771f\u662f\u6df7\u4e71\uff09</p> \\[ W_{i,p} = \\text{the minimum weight of a collection from } \\{1, \u2026, i\\} \\text{ with total profit being  exactly } p \\\\ W_{i,p} = \\left\\{ \\begin{aligned}     &amp;\\infty &amp;&amp; i = 0 \\\\     &amp;W_{i-1, p} &amp;&amp; p_i &gt; p \\\\     &amp;\\min\\{W_{i-1, p}, w_i + W_{i-1, p-p_i}\\} &amp;&amp; otherwise         \\end{aligned} \\right.\\\\ i = 1, ..., n; p = 1, ..., n\\cdot p_\\text{max} \\\\ O(n^2p_\\text{max}) \\] <p>\u5982\u679c \\(p_\\text{max}\\) \u5f88\u5927\uff0c\u53ef\u4ee5\u8003\u8651\u5c06\u5b83\u4eec\u8fd1\u4f3c\u53d6\u6574\uff0c\u7c7b\u4f3c\u4e8e\u5c06\u6d6e\u70b9\u6570\u5411\u4e0a\u53d6\u6574\u3002</p>"},{"location":"ZJU_CS/ADS/week11/#the_k-center_problem","title":"[\u6848\u4f8b] The K-center Problem","text":"<p>link</p> <p>Berkeley's: https://ugtcs.berkeley.edu/src/approx-sp19/scribe-notes-2.pdf</p> <p>\uff08\u4e8c\u7ef4\uff09K \u4e2d\u5fc3\u95ee\u9898\u6307\uff1a\u7ed9\u5b9a\u5e73\u9762\u4e0a\u7684\u4e00\u7cfb\u5217 site\uff08\u5373\u70b9\uff09\uff0c\u5728\u5e73\u9762\u4e2d\u627e\u51fa \\(k\\) \u4e2a\u4e0d\u540c\u7684 center\uff0c\u8bb0 \\(site_i\\) \u5230\u79bb\u5b83\u6700\u8fd1\u7684 center \u7684\u8ddd\u79bb\u4e3a \\(dis_i\\)\uff0c\u6c42 \\(\\max \\{dis_i\\}\\) \u7684\u6700\u5c0f\u503c\u3002</p> <p>\u6570\u5b66\u8bed\u8a00\u8868\u8fbe</p> <p>\u8bbe \\(C = \\{c_1, c_2, ..., c_k\\}\\) \u4e3a \\(k\\) \u4e2a center\uff0c\\(S = \\{s_1, s_2, ..., s_n\\}\\) \u4e3a \\(n\\) \u4e2a site\uff0c\u6211\u4eec\u5b9a\u4e49 site \u5230\u5173\u4e8e center \u7684\u96c6\u5408 \\(C\\) \u7684\u8ddd\u79bb\u4e3a\uff1a</p> \\[ dis(s_i, C) = \\min_{c_i\\in C} \\{ dis(s_i, c_i) \\} \\] <p>\u5373 \\(s_i\\) \u5230\u8ddd\u79bb\u5b83\u6700\u8fd1\u7684 center \u7684\u8ddd\u79bb\u3002</p> <p>\u5b9a\u4e49\u6700\u5927\u7684\u6700\u5c0f\u8986\u76d6\u534a\u5f84\u4e3a\uff1a</p> \\[ r(C) = \\max_{s_i\\in S} \\{ dis(s_i, C) \\} \\\\ \\] <p>\u73b0\u5728\u8981\u5bfb\u627e\u4e00\u4e2a \\(C\\) \u4f7f\u5f97 \\(r(C)\\) \u6700\u5c0f\uff08\\(|C| = k\\)\uff09\u3002</p> <p>\u5f88\u7ed5\uff0c\u975e\u5e38\u7ed5\u3002\u63a5\u4e0b\u6765\u5f00\u59cb\u8bf4\u4eba\u8bdd\u3002</p> <p>\u5e73\u9762\u7684\u95ee\u9898\u6211\u4eec\u5c31\u7528\u5e73\u9762\u7684\u601d\u8def\u6765\u770b\uff0c\u5c31\u662f\u4e00\u4e2a\u5e73\u9762\u4e0a\u6709\u4e00\u5806\u70b9\uff0c\u73b0\u5728\u6211\u8981\u5728\u4e0a\u9762\u627e \\(k\\) \u4e2a\u4e2d\u5fc3\u53bb\u753b\u5706\uff0c\u4f7f\u5f97\u8fd9 \\(k\\) \u4e2a\u5706\u80fd\u8986\u76d6\u6240\u6709\u7684\u70b9\u3002\u73b0\u5728\u8981\u6c42\u6700\u5927\u7684\u90a3\u4e2a\u5706\u7684\u534a\u5f84\u6700\u5c0f\u80fd\u591a\u5c0f\u3002</p> \u5173\u4e8e\u8ddd\u79bb <p>PPT \u4e0a\u5bf9\u8ddd\u79bb\u505a\u4e86\u66f4\u8fdb\u4e00\u6b65\u7684\u8bf4\u660e\uff0c\u4f46\u662f\u5176\u5b9e\u5e76\u4e0d\u662f\u8fd9\u4e2a\u95ee\u9898\u7684\u91cd\u70b9\uff0c\u4f46\u662f\u4e3a\u4e86\u4e25\u8c28\u6027\uff0c\u6211\u8fd8\u662f\u5728\u8fd9\u91cc\u653e\u4e0a\u4e09\u6761\u6027\u8d28\uff1a</p> <p>3 property of 'distance'</p> \\[ \\begin{aligned}     &amp; dis(x,x) = 0 &amp;&amp; \\text{(identity)} \\\\     &amp; dis(x,y) = dis(y,x) &amp;&amp; \\text{(symmetry)} \\\\     &amp; dis(x,y) \\leq dis(x,z) + dis(z,y) &amp;&amp; \\text{(triangle inequality)} \\end{aligned} \\] <p>\u788e\u788e\u5ff5</p> <p>\u8fd9\u4e2a\u4e1c\u897f\u548c\u805a\u7c7b\u6709\u70b9\u50cf\u3002\u4e3b\u8981\u96be\u70b9\u5c31\u5728\u4e8e\uff0c\u6211\u4eec\u4e0d\u77e5\u9053\u5e94\u8be5\u4ee5\u4f55\u79cd\u7b56\u7565\u53bb\u8986\u76d6\u8fd9\u4e9b\u70b9\uff0c\u8981\u662f\u628a\u4e24\u4e2a\u8ddd\u79bb\u5f88\u8fdc\u7684\u70b9\u5212\u5728\u540c\u4e00\u4e2a\u5706\u5185\uff0c\u90a3\u7b54\u6848\u80af\u5b9a\u5c0f\u4e0d\u4e86\u3002</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u5c1d\u8bd5\u89e3\u51b3\u7684\u8fd9\u4e2a\u95ee\u9898\u3002</p>"},{"location":"ZJU_CS/ADS/week11/#naive_greedy","title":"Naive Greedy","text":"<p>\u4e00\u4e2a\u505a\u6cd5\u662f\uff0c\u6211\u4eec\u6bcf\u6b21\u90fd\u9009\u62e9\u6700\u53ef\u80fd\u6210\u4e3a\u4e2d\u5fc3\u7684\u90a3\u4e2a\u70b9\uff0c\u5177\u4f53\u6765\u8bf4\uff1a</p> <ol> <li>\u5982\u679c\u662f\u7b2c\u4e00\u4e2a\u70b9\uff0c\u5c31\u9009\u53d6\u6240\u6709\u70b9\u7684\u4e2d\u5fc3\uff1b</li> <li>\u5982\u679c\u4e0d\u662f\u7b2c\u4e00\u4e2a\u70b9\uff0c\u5c31\u9009\u53d6\u80fd\u4e00\u4e2a\u6700\u80fd\u8ba9 \\(r(C)\\) \u4e0b\u964d\u7684\uff1b</li> </ol> <p>\u8fd9\u4e2a\u505a\u6cd5\u7684 bug \u6bd4\u8f83\u5927\uff0c\u5047\u8bbe\u6211\u4eec\u7684\u70b9\u662f\u805a\u7c7b\u975e\u5e38\u660e\u663e\u7684\u4e24\u4e2a\u70b9\u4e91\uff0c\u90a3\u4e48\u7b2c\u4e00\u4e2a\u70b9\u5c31\u4f1a\u843d\u5728\u4e24\u4e2a\u70b9\u4e91\u4e4b\u95f4\uff0c\u8fd9\u5f88\u8822\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u6d6a\u8d39\u8fc7\u591a\u65f6\u95f4\u5728\u8fd9\u4e2a\u65b9\u6cd5\u4e0a\u3002</p> <p>\u6ce8\u610f\uff0c\u968f\u7740 center \u7684\u589e\u52a0\uff0c\u539f\u6765\u4ee5 \\(c_i\\) \u4e3a center \u7684 site \u5f88\u53ef\u80fd\u4ee5\u6700\u65b0\u63d2\u5165\u7684 \\(c_j\\) \u4e3a center\u3002</p>"},{"location":"ZJU_CS/ADS/week11/#2r-greedy","title":"2r-Greedy","text":"<p>\u65e2\u7136\u6b63\u5411\u505a\u5f88\u56f0\u96be\uff0c\u90a3\u6211\u4eec\u80fd\u4e0d\u80fd\u53cd\u7740\u505a\u5462\uff1f\u6709\u4e00\u79cd\u5957\u8def\u53eb\u4e8c\u5206\u7b54\u6848\uff0c\u5373\u5148\u731c\u7b54\u6848\uff0c\u518d\u9a8c\u8bc1\u662f\u5426\u662f\u7b54\u6848\u3002\u5728\u8fd9\u4e2a\u95ee\u9898\u4e2d\u6211\u4eec\u53ef\u4ee5\u8fc1\u79fb\u8fd9\u4e2a\u601d\u60f3\uff0c\u5373\u5148\u731c\u4e00\u4e2a \\(r\\)\uff0c\u7136\u540e\u5c1d\u8bd5\u7528 \\(k\\) \u4e2a\u534a\u5f84\u4e3a \\(r\\) \u7684\u5706\u53bb\u8986\u76d6\u5269\u4e0b\u7684\u6240\u6709\u70b9\u3002</p> <p>\u66f4\u5177\u4f53\u7684\u6765\u8bf4\uff0c\u5047\u8bbe\u51c6\u786e\u89e3\u5bf9\u5e94\u7684\u4e00\u4e2a center \u96c6\u5408\u4e3a \\(C^*\\)\uff0c\u90a3\u4e48 \\(\\forall r(C_x) \\geq r(C^*)\\) \u7684 \\(C_x\\) \u90fd\u5fc5\u5b9a\u5b58\u5728\u8986\u76d6\u65b9\u6848\uff1b\u53cd\u8fc7\u6765\u8bf4\uff0c\u5982\u679c\u6211\u4eec\u80fd\u591f\u9a8c\u8bc1\u5bf9\u4e8e \\(C_x\\) \u80fd\u591f\u8986\u76d6\u6240\u6709\u7684\u70b9\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u7ea6\u675f\u51c6\u786e\u89e3 \\(r(C^*) \\leq r(C_x)\\)\u3002</p> <p>\u5982\u4f55\u201c\u9a8c\u8bc1\u201d</p> <p>\u53ef\u662f\uff0c\u4ed4\u7ec6\u4e00\u60f3\u6211\u4eec\u53d1\u73b0\uff0c\u4e8c\u5206\u7b54\u6848\u7684\u8fc7\u7a0b\u4e2d\uff0c\u201c\u9a8c\u8bc1\u5bf9\u4e8e \\(C_x\\) \u80fd\u591f\u8986\u76d6\u6240\u6709\u7684\u70b9\u201d\u8fd9\u4ef6\u4e8b\u4e5f\u4e0d\u597d\u505a\uff0c\u867d\u7136\u6211\u4eec\u6709\u534a\u5f84\uff0c\u4f46\u662f\u6211\u4eec\u4e5f\u5f88\u96be\u627e\u5230\u4e00\u4e2a\u6700\u597d\u7684\u65b9\u6848\u6765\u8986\u76d6\u6240\u6709\u7684\u70b9\u3002</p> hint: \u8fd1\u4f3c\u7b97\u6cd5 <p>\u4e8e\u662f\u6211\u4eec\u7684\u8fd1\u4f3c\u7b97\u6cd5\u5c31\u53ef\u4ee5\u5927\u5c55\u62f3\u811a\u4e86\u3002\u4f46\u662f\u9700\u8981\u6ce8\u610f\uff0c\u8fd9\u91cc\u6240\u8c13\u7684\u8fd1\u4f3c\u7b97\u6cd5\uff0c\u6307\u7684\u662f\u4f7f\u7528\u4e8c\u5206\u7b54\u6848\u6c42\u89e3 \\(r(C)\\) \u8fd9\u4e2a\u7b97\u6cd5\uff0c\u800c\u975e\u5224\u65ad \\(k\\) \u4e2a\u534a\u5f84\u4e3a \\(r\\) \u7684\u5706\u80fd\u5426\u8986\u76d6\u6240\u6709\u70b9\u7684\u7b97\u6cd5\u3002\u8fd9\u4e00\u70b9\u975e\u5e38\u91cd\u8981\uff01</p> <p>\u800c\u5173\u4e8e\u7b97\u6cd5\u5177\u4f53\u5982\u4f55\u64cd\u4f5c\uff0c\u8bf7\u63a5\u7740\u770b\u3002 </p> <p>\u9996\u5148\uff0c\u6211\u4eec\u518d\u6b21\u68b3\u7406\u4e00\u4e0b\u8fd9\u4e2a\u7b97\u6cd5\uff0c\u5b83\u5305\u542b\u5185\u5916\u4e24\u5c42\uff0c\u9996\u5148\u5916\u90e8\u901a\u8fc7\u5728\u7b54\u6848\u7684\u5019\u9009\u533a\u95f4\uff08\u5373 \\((0, r_\\text{max}]\\)\uff0c\\(r_\\text{max}\\) \u4e3a\u6700\u8fdc\u7684\u4e24\u4e2a\u70b9\u7684\u8ddd\u79bb\uff09\u4e8c\u5206\u5019\u9009\u503c\uff0c\u63a5\u7740\u901a\u8fc7\u5224\u5b9a\u7b97\u6cd5\u6765\u5224\u5b9a\u63a5\u4e0b\u6765\u7684\u4e8c\u5206\u65b9\u5411\u3002</p> <p>\u7136\u800c\uff0c\u7531\u4e8e\u6211\u4eec\u5f88\u96be\u5728\u591a\u9879\u5f0f\u65f6\u95f4\u5b9e\u73b0\u51c6\u786e\u7684\u201c\u5224\u5b9a\u201d\uff0c\u6240\u4ee5\u6211\u4eec\u91c7\u53d6\u8fd9\u6837\u4e00\u4e2a\u542f\u53d1\u5f0f\u7684\u7b56\u7565\u6765\u8fdb\u884c\u5bbd\u6cdb\u7684\u5fc5\u8981\u6761\u4ef6\u7b5b\u9009\uff1a</p> <p>\u6d41\u7a0b\u63cf\u8ff0</p> <p>\u8bbe \\(C_x\\) \u8868\u793a\u9009\u4e2d\u7684 center\uff0c\\(S_x\\) \u8868\u793a\u5c1a\u672a\u88ab\u4efb\u4f55\u5706\u8986\u76d6\u7684 site\uff0c\\(r_x\\) \u8868\u793a\u5f53\u524d\u4e8c\u5206\u51fa\u6765\u7684\uff0c\u8981\u6211\u4eec\u5224\u65ad\u7684\u534a\u5f84\uff0c\\(S\\) \u4f9d\u7136\u8868\u793a\u6240\u6709 site \u7684\u96c6\u5408\uff1a</p> <ol> <li>\u521d\u59cb\u5316 \\(C_x = \\emptyset\\)\uff1b</li> <li>\u5f53 \\(S_x \\not = \\emptyset\\) \u65f6\uff08\u5373\u8fd8\u6709\u70b9\u6ca1\u88ab\u8986\u76d6\u65f6\uff09\uff0c\u91cd\u590d\u8fd9\u4e9b\u64cd\u4f5c\uff1a<ol> <li>\u968f\u673a\u9009\u53d6\u4e00\u4e2a site \\(s_i \\in S_x\\)\uff0c\u5c06\u5176\u63d2\u5165 \\(C_x\\)\uff08\u5373\u5c06 \\(s_i\\) \u5f53\u4f5c\u4e00\u4e2a center\uff09\uff0c\u5e76\u4ece \\(S_x\\) \u4e2d\u5c06 \\(s_i\\) \u5220\u9664\uff08\u5373 \\(s_i\\) \u5fc5\u5b9a\u88ab\u8986\u76d6\uff09\uff1b</li> <li>\u5220\u9664 \\(S_x\\) \u4e2d\u6240\u6709\u8ddd\u79bb \\(s_i\\) \u4e0d\u8db3 \\(r_x\\) \u7684\u70b9\uff08\u5373\u5220\u9664\u6ee1\u8db3 \\(dis(s_i, s_j) \\leq r_x\\) \u7684\u6240\u6709 \\(s_k \\in S_x\\)\uff09\uff1b</li> </ol> </li> <li>\u5f53\u6240\u6709\u70b9\u90fd\u88ab\u8986\u76d6\u540e\uff1a<ol> <li>\u5982\u679c \\(|C_x| \\leq k\\)\uff0c\u5219\u8fd4\u56de yes\uff1b</li> <li>\u5426\u5219\u8fd4\u56de no\uff1b</li> </ol> </li> </ol> <p>\u5982\u679c\u8fd4\u56de yes\uff0c\u5219\u4e0b\u4e00\u4e2a \\(r_x\\) \u5e94\u5f53\u53d6\u66f4\u5c0f\u7684 \\(r_x\\)\uff1b\u5982\u679c\u8fd4\u56de no\uff0c\u4e0b\u4e00\u6b21\u5e94\u8be5\u53d6\u66f4\u5927\u7684 \\(r_x\\)\uff08\u7a0d\u5019\u4f1a\u89e3\u91ca\u4e3a\u4ec0\u4e48\uff09\u3002</p> <p>\u73b0\u5728\u5bf9\u5176\u505a\u8fdb\u4e00\u6b65\u89e3\u91ca\u3002\u8fd9\u662f\u4e00\u4e2a\u542f\u53d1\u5f0f\u7684\u505a\u6cd5\uff0c\u65e8\u5728\u6bcf\u6b21\u5bfb\u627e\u8fd8\u6ca1\u88ab\u8986\u76d6\u7684\u70b9\u4f5c\u4e3a\u65b0\u7684 center\uff0c\u7528\u4e00\u4e2a\u534a\u5f84\u4e3a \\(2r_x\\) \u7684\u5706\u53bb\u8986\u76d6\u5269\u4e0b\u7684\u70b9\u3002\u901a\u8fc7\u5224\u65ad\u8fd9\u6837\u6240\u9700\u8981\u7684 center \u6570\u91cf\u662f\u5426\u8d85\u8fc7 \\(k\\) \u6765\u5224\u65ad\u662f\u5426\u80fd\u591f\u8986\u76d6\u3002\u63a5\u4e0b\u6765\u5f88\u7ed5\uff0c\u8bf7\u4e00\u6b65\u4e00\u6b65\u7684\u770b\uff1a</p> <ol> <li>\u5f53\u8fd9\u4e2a\u542f\u53d1\u5f0f\u641c\u7d22\u6210\u529f\u65f6\uff0c\u8bf4\u660e \\(2r_x \\geq r(C^*)\\)\uff0c\u5373 \\(k\\) \u4e2a \\(2r_x\\) \u7684\u5706\u53ef\u4ee5\u8986\u76d6\u6240\u6709\u70b9\uff1b</li> <li>\u5f53\u8fd9\u4e2a\u542f\u53d1\u5f0f\u641c\u7d22\u5931\u8d25\u65f6\uff0c\u4e0d\u80fd\u8bf4\u660e \\(2r_x \\geq r(C^*)\\)\uff0c\u5373 \\(k\\) \u4e2a \\(2r_x\\) \u7684\u5706\u4e0d\u80fd\u8986\u76d6\u6240\u6709\u70b9\uff0c\u56e0\u4e3a\u542f\u53d1\u5f0f\u65b9\u6848\u5e76\u4e0d\u662f\u6700\u4f18\u65b9\u6848\uff1b\u4f46\u662f\u80fd\u8bf4\u660e\u5fc5\u5b9a\u4e0d\u5b58\u5728 \\(r_x\\) \u7684\u8986\u76d6\uff0c\u5373 \\(r_x \\leq r(C^*)\\)\uff08\u8bc1\u660e\u89c1\u4e0b\u65b9 lemma\uff09\uff1b</li> </ol> lemma <p>\u5047\u8bbe\u534a\u5f84\u4e3a \\(r\\)\uff0c\u4ee5 \\(c\\) \u4e3a\u5706\u5fc3\u7684\u5706 \\(C\\) \u8986\u76d6\u4e86 \\(S\\) \u4e2d\u7684\u6240\u6709\u70b9\u3002</p> <p>\u90a3\u4e48\uff0c\u5bf9\u4e8e\u56fa\u5b9a\u7684\u534a\u5f84 \\(r'\\)\uff0c\u8981\u60f3\u53d6\u4efb\u610f\u7684 \\(s_i \\in S\\) \u4e3a\u5706\u5fc3\uff0c\u5f62\u6210\u7684\u5706 \\(C_i\\)\uff0c\u603b\u662f\u80fd\u8986\u76d6 \\(S\\) \u4e2d\u7684\u6240\u6709\u70b9\uff0c\u5219 \\(r' \\geq 2r\\)\u3002</p> <p>lemma \u7684\u8bc1\u660e\u5c31\u4e0d\u5728\u8fd9\u91cc\u5c55\u5f00\u4e86\uff0c\u8bc1\u660e\u7684\u5173\u952e\u662f\u8003\u8651\u4e24\u70b9\u5206\u5e03\u5728\u76f4\u5f84\u4e24\u7aef\u7684\u60c5\u51b5\u3002</p> <p>\u8fd9\u4e2a\u5f15\u7406\u7684\u9644\u52a0\u7ed3\u8bba\u5c31\u662f\uff1a</p> \\[ \\forall i \\quad C \\subset C_i \\] <p>\u5373\u4ee5 \\(r\\) \u4e3a\u534a\u5f84\u7684\u6700\u4f18\u8986\u76d6\u5706\uff0c\u4e00\u5b9a\u80fd\u88ab\u4ee5\u4efb\u610f \\(s_i\\) \u4e3a\u5706\u5fc3\u3001\\(2r\\) \u4e3a\u534a\u5f84\u7684\u5706\u6240\u8986\u76d6\u3002</p> <p> </p> <p>\u5f53\u6211\u4eec\u53d1\u73b0\u6211\u4eec\u5904\u4e8e\u60c5\u51b5 <code>1.</code> \u65f6\uff0c\u6211\u4eec\u5f00\u5fc3\u7684\u53d1\u73b0\u6211\u4eec\u786e\u5b9e\u5f97\u5230\u4e86\u4e00\u4e2a\u8ddd\u79bb \\(r(C^*)\\) \u66f4\u8fd1\u7684\u4e0a\u754c \\(2r_x\\)\uff0c\u7531\u4e8e\u4e8c\u5206\u7684\u6027\u8d28\uff0c\u6211\u4eec\u6bcf\u6b21\u901a\u8fc7 <code>1.</code> \u786e\u5b9a\u7684\u4e0a\u754c\uff0c\u603b\u662f\u8d8a\u6765\u8d8a\u7d27\u7684\u3002</p> <p>\u5f53\u6211\u4eec\u5904\u4e8e\u60c5\u51b5 <code>2.</code> \u65f6\uff0c\u6211\u4eec\u4e0d\u77e5\u9053 \\(2r_x\\) \u548c \\(r(C^*)\\) \u7684\u5927\u5c0f\u5173\u7cfb\uff0c\u4f46\u662f\u77e5\u9053 \\(r_x\\) \u548c \\(r(C^*)\\) \u7684\u5173\u7cfb\uff0c\u7531\u4e8e\u4e8c\u5206\u7684\u6027\u8d28\uff0c\u6211\u4eec\u6bcf\u6b21\u901a\u8fc7 <code>2.</code> \u786e\u5b9a\u7684\u4e0b\u754c\uff0c\u4e5f\u603b\u662f\u8d8a\u6765\u8d8a\u7d27\u7684\u3002</p> <p>\u800c\u6700\u7ec8\uff0c\u6211\u4eec\u4f1a\u5f97\u5230\u4e00\u4e2a\u6700\u7ec8\u7684 \\(r_{x_0}\\)\uff0c\u6ee1\u8db3\uff1a\\(r_{x_0} \\leq r(C^*) \\leq 2r_{x_0}\\)\uff08\u5f0f\u4e2d\u54ea\u8fb9\u80fd\u53d6\u7b49\u53d6\u51b3\u4e8e\u6700\u540e\u843d\u5728 <code>1.</code> \u8fd8\u662f <code>2.</code>\uff09\u3002</p> <p>\u800c\u6211\u4eec\u6700\u7ec8\u7ed9\u51fa\u7684\u7b54\u6848\u662f \\(2r_{x_0}\\)\uff08\u56e0\u4e3a \\(r_{x_0}\\) \u4e0d\u6ee1\u8db3\u6761\u4ef6\uff0c\u4e0d\u662f\u89e3\uff0c\u66f4\u4e0d\u662f\u8fd1\u4f3c\u89e3\uff09\u3002</p> <p>\u73b0\u5728\uff0c\u6211\u4eec\u6765\u8ba1\u7b97\u8fd1\u4f3c\u6bd4\uff1a</p> \\[ \\begin{aligned}     &amp; \\begin{aligned}         \\because \\;\\;\\;         &amp; r_{x_0} \\leq r(C^*) \\leq 2r_{x_0} \\\\         &amp; \\frac{1}{2} \\leq \\frac{r(C^*)}{2r_{x_0}} \\leq 1 \\\\         &amp; 1 \\leq \\frac{2r_{x_0}}{r(C^*)} \\leq 2     \\end{aligned} \\\\     &amp; \\therefore \\; \\rho = \\max\\{             \\frac{ 2 r_{x_0} }{ r(C^*) },             \\frac{ r(C^*) }{ 2 r_{x_0} }         \\} = 2 \\end{aligned} \\]"},{"location":"ZJU_CS/ADS/week11/#smarter_greedy","title":"Smarter Greedy","text":"<p>\u6211\u4eec\u5173\u6ce8\u5230\uff0c\u4e0a\u9762\u90a3\u4e2a\u505a\u6cd5\u603b\u662f\u968f\u673a\u7684\u9009\u53d6\u65b0\u7684 \\(c_i\\)\uff0c\u4f46\u662f\u5bf9\u4e8e center \u7684\u9009\u53d6\uff0c\u6211\u4eec\u5176\u5b9e\u53ef\u4ee5\u603b\u662f\u9009\u62e9\u8ddd\u79bb\u5df2\u6709\u7684 center \u6700\u8fdc\u7684\u70b9\uff0c\u6b64\u5916\uff0c\u5f53 \\(|C| &gt; k\\) \u65f6\uff0c\u6211\u4eec\u4e5f\u6ca1\u5fc5\u8981\u7ee7\u7eed\u505a\u4e86\u3002</p> <p>\u6d41\u7a0b\u63cf\u8ff0</p> <ol> <li>\u521d\u59cb\u5316 \\(C_x = \\emptyset\\)\uff0c\\(S_x = S\\)\uff1b</li> <li>\u968f\u673a\u9009\u53d6\u4e00\u4e2a site \\(s_i \\in S_x\\)\uff0c\u5c06\u5176\u63d2\u5165 \\(C_x\\)\uff0c\u5e76\u4ece \\(S_x\\) \u4e2d\u5c06 \\(s_i\\) \u5220\u9664\uff1b</li> <li>\u5f53 \\(|C_x| \\leq k\\) \u4e14 \\(S_x \\not = \\emptyset\\) \u65f6\uff0c\u91cd\u590d\u4ee5\u4e0b\u6b65\u9aa4\uff1a<ol> <li>\u9009\u53d6\u4e00\u4e2a site \\(s_i \\in S_x\\)\uff0c\u8fd9\u4e2a site \u6ee1\u8db3 \\(\\forall s_j \\in S_x \\quad dis(s_i, C_x) \\geq dis(s_j, C_x)\\)\uff08\u5373\u8fd9\u4e2a\u70b9\u662f\u8fd8\u6ca1\u88ab\u8986\u76d6\u7684\u70b9\u4e2d\u8ddd\u79bb \\(C_x\\) \u6700\u8fdc\u7684\u70b9\uff09\uff1b</li> <li>\u5c06 \\(s_i\\) \u63d2\u5165 \\(C_x\\)\uff0c\u5e76\u4ece \\(S_x\\) \u4e2d\u5c06 \\(s_i\\) \u5220\u9664\uff1b</li> </ol> </li> <li>\u5982\u679c \\(|C_x| \\leq k\\) \u4e14 \\(S_x = \\emptyset\\)\uff0c\u5219\u8fd4\u56de yes\uff1b\u5426\u5219\u8fd4\u56de no\u3002</li> </ol> <p>\u7531\u4e8e\u8fd9\u4e2a\u505a\u6cd5\u5b9e\u9645\u4e0a\u53ea\u662f\u4f18\u5316\u4e86\u4e00\u4e0b\u542f\u53d1\u5f0f\u7684\u7b56\u7565\uff0c\u5e76\u6ca1\u6709\u6539\u53d8\u5185\u6838\uff0c\u6240\u4ee5\u5176\u8fd1\u4f3c\u6bd4\u4ecd\u7136\u662f \\(2\\)\u3002</p>"},{"location":"ZJU_CS/ADS/week11/#_5","title":"\u603b\u7ed3","text":"<p>\u5173\u4e8e\u7b97\u6cd5\u7684\u8bbe\u8ba1\uff0c\u6211\u4eec\u8003\u8651\u8fd9\u4e09\u4e2a\u7ef4\u5ea6\uff1a</p> <ol> <li>\u6700\u4f18\u6027(optimality)\uff1a\u5373\u80fd\u6c42\u51c6\u786e\u89e3\uff1b</li> <li>\u9ad8\u6548\u6027(efficiency)\uff1a\u5373\u7b97\u6cd5\u662f\u5426\u9ad8\u6548\uff1b</li> <li>\u666e\u904d\u6027(all instances)\uff1a\u5373\u7b97\u6cd5\u662f\u5426\u666e\u904d\u9002\u7528\u4e8e\u6240\u6709\u7684\u60c5\u51b5\uff1b</li> </ol> <p>\u5018\u82e5\u4e00\u4e2a\u89e3\u6cd5\uff1a</p> <ol> <li>\u540c\u65f6\u6ee1\u8db3\u6700\u4f18\u6027\u548c\u9ad8\u6548\u6027\uff0c\u90a3\u4e48\u8fd9\u4e2a\u7b97\u6cd5\u5bf9\u7279\u6b8a\u60c5\u51b5\u80fd\u9ad8\u6548\u6c42\u51c6\u786e\u89e3\uff1b</li> <li>\u540c\u65f6\u6ee1\u8db3\u6700\u4f18\u6027\u548c\u666e\u904d\u6027\uff0c\u90a3\u4e48\u8fd9\u4e2a\u7b97\u6cd5\u5bf9\u6240\u6709\u60c5\u51b5\u90fd\u80fd\u6c42\u51c6\u786e\u89e3\uff1b</li> <li>\u540c\u65f6\u6ee1\u8db3\u9ad8\u6548\u6027\u548c\u666e\u904d\u6027\uff0c\u90a3\u4e48\u8fd9\u4e2a\u7b97\u6cd5\u53ef\u80fd\u662f\u4e2a\u8fd1\u4f3c\u7b97\u6cd5\uff1b</li> </ol> <p>\u5c31\u7b97 N=NP \u6210\u7acb\uff0c\u6211\u4eec\u4ecd\u7136\u65e0\u6cd5\u4fdd\u8bc1\u4e09\u4e2a\u613f\u671b\u4e00\u6b21\u6ee1\u8db3\u3002</p> <p>\u4e0d\u662f\u5f88\u660e\u767d\u6700\u540e\u4e00\u53e5\u8bdd\u5982\u4f55\u7406\u89e3\uff0c\u4f46\u662f\u8fd9\u4e00\u90e8\u5206\u5e94\u8be5\u5c31\u662f\u770b\u4e2a\u773c\u719f\uff0c\u4e0d\u662f\u5f88\u91cd\u8981\u3002</p>"},{"location":"ZJU_CS/ADS/week12/","title":"Lecture 12 | Local Search","text":"<p>\u65f6\u95f4\u5306\u5fd9\uff0c\u5185\u5bb9\u7b80\u7565</p> <ul> <li>local optimum is a best solution in a neighborhood</li> <li>start with a feasible solution and search a better one within the neighborhood</li> <li>a local optimum is achieved if no improvement is possible</li> </ul> <p>\u5373\u5148\u627e\u5230\u4e00\u4e2a\u53ef\u884c\u89e3\uff0c\u4ee5\u53ca\u91cf\u5316\u5176\u4f18\u7a0b\u5ea6\u7684\u76ee\u6807\u51fd\u6570\uff0c\u518d\u5728\u8fd9\u4e2a\u53ef\u884c\u89e3\u4e0a\u5bfb\u6c42\u4f18\u5316\uff0c\u76f4\u5230\u8fbe\u5230\u5c40\u90e8\u6700\u4f18\u89e3\u3002</p>"},{"location":"ZJU_CS/ADS/week12/#the_vertex_cover_problem","title":"[\u6848\u4f8b] The Vertex Cover Problem","text":"<p>\u9876\u70b9\u8986\u76d6\u95ee\u9898(vertex cover problem)\u6307\u7ed9\u5b9a\u4e00\u4e2a\u65e0\u5411\u56fe \\(G=(V,E)\\)\uff0c\u627e\u5230\u4e00\u4e2a\u6700\u5c0f\u7684\u9876\u70b9\u96c6 \\(S\\subseteq V\\)\uff0c\u4f7f\u5f97\u6bcf\u6761\u8fb9 \\((u,v)\\) \u90fd\u81f3\u5c11\u6709\u4e00\u4e2a\u7aef\u70b9\u5728 \\(S\\) \u4e2d\uff08\u5373 \\(u\\in S \\lor v\\in S\\)\uff09\u3002</p> <p>\u8fd9\u4e2a\u95ee\u9898\u7684\u53ef\u884c\u89e3\u4e3a \\(S = V\\)\uff0c\u5373\u5b8c\u5168\u8986\u76d6\uff0c\u5176\u76ee\u6807\u51fd\u6570\u4e3a \\(cost(S) = |S|\\)\u3002\u5373\uff0c\u6211\u4eec\u5c1d\u8bd5\u4f7f\u7528 local search \u6765\u964d\u4f4e \\(|S|\\)\u3002</p> <p>\u7ed9\u51fa\u51e0\u79cd\u6848\u4f8b\u4ee5\u53ca\u53ef\u89c6\u5316\uff0c\u8bf4\u660e\u5c40\u90e8\u641c\u7d22\u5bb9\u6613\u5931\u6548\u3002</p>"},{"location":"ZJU_CS/ADS/week12/#_1","title":"\u6885\u7279\u7f57\u6ce2\u5229\u65af\u7b97\u6cd5","text":"<p>\u6885\u7279\u7f57\u6ce2\u5229\u65af\u7b97\u6cd5(the Metropolis algorithm)\u7684\u8fc7\u7a0b\uff1a</p> <ul> <li>\u68af\u5ea6\u4e0b\u964d\u6cd5\u4e0d\u4e00\u5b9awork\uff0c\u6539\u8fdb\u540e\u7684\u7b97\u6cd5:Metropolis Algorithm </li> <li>\u68af\u5ea6\u4e0b\u964d\u6cd5\u662f\u5b9a\u5411\u9009\u62e9\u90bb\u5c45\uff0c\u800cmetropolis\u662f\u968f\u673a\u9009\u62e9\u90bb\u5c45\u7684\u7b97\u6cd5</li> </ul> <pre><code>SolutionType Metropolis() {   \n    Define constants k and T;\n    Start from a feasible solution S \\in FS ;\n    MinCost = cost(S);\n    while (1) {\n        S\u2019 = Randomly chosen from N(S); \n        CurrentCost = cost(S\u2019);\n        if ( CurrentCost &lt; MinCost ) {\n            MinCost = CurrentCost;    S = S\u2019;\n        }\n        else {\n            With a probability e^{-\\Delta cost / (kT)}, let S = S\u2019;\n            else  break;\n        }\n    }\n    return S;\n}\n</code></pre> <p>\u6ce8\uff1a\u5bf9\u4e8ecase 1\uff0c\u6709\u4e00\u5b9a\u6982\u7387\u53ef\u4ee5\u8df3\u51falocal optimum\u5f97\u5230\u6b63\u786e\u89e3\u3002\u4f46\u662f\u5bf9case 0\uff0c\u6709\u53ef\u80fd\u5728\u52a01\u548c\u51cf1\u4e4b\u95f4\u65e0\u9650\u9707\u8361\u2026\u2026 \u6ce8\uff1a\u5f53\uff08\u6e29\u5ea6\uff09T\u5f88\u9ad8\u65f6\uff0c\u4e0a\u5761\u7684\u6982\u7387\u51e0\u4e4e\u4e3a1\uff0c\u5bb9\u6613\u5f15\u8d77\u5e95\u90e8\u9707\u8361\uff1b\u5f53T\u63a5\u8fd10\u65f6\uff0c\u4e0a\u5761\u6982\u7387\u51e0\u4e4e\u4e3a0\uff0c\u63a5\u8fd1\u539f\u59cb\u7684\u68af\u5ea6\u4e0b\u964d\u6cd5\u3002</p>"},{"location":"ZJU_CS/ADS/week12/#_2","title":"\u6a21\u62df\u9000\u706b","text":"<p>\u6a21\u62df\u9000\u706b(simulated annealing)</p>"},{"location":"ZJU_CS/ADS/week12/#hopfield_neural_networks","title":"[\u6848\u4f8b] Hopfield Neural Networks","text":"<p>links</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Hopfield_network</p>"},{"location":"ZJU_CS/ADS/week12/#the_maximum_cut_problem","title":"[\u6848\u4f8b] The Maximum Cut Problem","text":"<p>links</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Maximum_cut</p>"},{"location":"ZJU_CS/ADS/week13/","title":"Lecture 13 | Randomized Algorithms","text":"<p>\u65f6\u95f4\u5306\u5fd9\uff0c\u5185\u5bb9\u7b80\u7565</p> <p>\u4e00\u4e9b\u6982\u5ff5\u8bf4\u660e</p>"},{"location":"ZJU_CS/ADS/week13/#the_hiring_problem","title":"The Hiring Problem","text":""},{"location":"ZJU_CS/ADS/week13/#modified_quick_sort","title":"Modified Quick Sort","text":""},{"location":"ZJU_CS/ADS/week14/","title":"Lecture 14 | \u5e76\u884c","text":"<p>\u6709\u4e24\u79cd\u5e76\u884c\u7b97\u6cd5\u6a21\u578b\uff1aPRAM\uff08Parallel Random Access Machine\uff09\u548c WD\uff08Work-Depth\uff09\u6a21\u578b\u3002</p> <p>\u89e3\u51b3\u8bbf\u95ee\u51b2\u7a81\u7684\u7b97\u6cd5\u5171\u6709\u4e09\u79cd\uff1a - CRCW\uff08Concurrent Read Concurrent Write\uff09\u4e0d\u80fd\u540c\u65f6\u8bfb\u5199\u4e00\u4e2a\u4f4d\u7f6e - CREW\uff08Concurrent Read Exclusive Write\uff09\u53ef\u4ee5\u540c\u65f6\u8bfb\uff0c\u4f46\u4e0d\u80fd\u540c\u65f6\u5199 - EREW\uff08Exclusive Read Exclusive Write\uff09\u53ef\u4ee5\u540c\u65f6\u8bfb\u5199</p> <p>\u5176\u4e2d\uff0cWD\u6a21\u578b\u66f4\u5bb9\u6613\u8003\u5bdf\u3002</p> <p>\u6d4b\u91cf\u6027\u80fd</p> <p></p> <p>\u5728WD\u6a21\u578b\u4e2d\uff0c\u53ef\u4ee5\u901a\u8fc7\u4efb\u610fP(n)\u4e2a\u5904\u7406\u5668\u5728O(W(n)/P(n) + T(n))\u7684\u65f6\u95f4\u5185\u5b9e\u73b0\u7b97\u6cd5\uff0c\u4f7f\u7528\u4e0eWD\u6f14\u793a\u4e2d\u76f8\u540c\u7684\u5e76\u53d1\u5199\u7ea6\u5b9a\u3002</p> <ul> <li>Work Load \u5de5\u4f5c\u603b\u91cf/\u64cd\u4f5c\u603b\u6570\u91cf W(N)\uff0c\u5355\u6838\u53bb\u8dd1\u9700\u8981\u7684\u65f6\u95f4</li> <li>\u6700\u574f\u7684\u8fd0\u884c\u65f6\u95f4 T(N)/\u628aT(N)\u7406\u89e3\u4e3a\u6df1\u5ea6</li> </ul> <p>\u4e0b\u9762\u8ba9\u6211\u6765\u770b\u4e09\u4e2a\u6848\u4f8b\u5206\u6790</p>"},{"location":"ZJU_CS/ADS/week14/#prefix_sum","title":"Prefix Sum","text":"<p>\u4ece\u4e0b\u5230\u4e0a\u8ba1\u7b97B\u503c\uff0c\u4ece\u4e0a\u5230\u4e0b\u8ba1\u7b97C\u503c</p>"},{"location":"ZJU_CS/ADS/week14/#_1","title":"\u6570\u7ec4\u5f52\u5e76","text":"<p>\u4e24\u4e2a\u6570\u7ec4\u5f52\u5e76\u3002\u4e0d\u5bb9\u6613\u5e76\u884c\u5316\uff0c\u56e0\u4e3a\u9700\u8981\u4fdd\u8bc1\u987a\u5e8f\u3002</p>"},{"location":"ZJU_CS/ADS/week14/#partition","title":"Partition","text":"<p>\\(Rank(i,\\ B) = rank\\ of A[i] \\ in\\ B\\)</p> <pre><code>for i in 1 to n do\n    j = Rank(i, B)\n    k = Rank(i, A)\n    C[i+j] = A[i]\n    D[i+k] = B[i]\n</code></pre> <p>\u8fd9\u4e2a\u7b97\u6cd5\u7684\\(T(n) = O(logn)\\)\uff0c\\(W(n) = O(nlogn)\\) \u4f20\u7edfserial\u7b97\u6cd5\u7684\\(T(n) = W(n) = O(n + m)\\)</p>"},{"location":"ZJU_CS/ADS/week14/#parallel_rank","title":"Parallel Rank","text":"<p>\u5bf9\u62c6\u5206\u4e0b\u53bb\u7684\u5b50\u7b97\u6cd5\u8fdb\u884c\u5e76\u884c\u5316\uff0c\u5206\u6210n/logn\u4e2a\u5b50\u95ee\u9898.</p> <p>\\(T(n) = O(logn)\\)\uff0c\\(W(n) = O(n)\\)</p>"},{"location":"ZJU_CS/ADS/week14/#_2","title":"\u627e\u6700\u5927\u503c","text":""},{"location":"ZJU_CS/ADS/week14/#base","title":"Base","text":"<p>\u628a\u6c42\u548c\u7b97\u6cd5+\u6539\u6210max \\(T(n) = O(logn)\\)\uff0c\\(W(n) = O(n)\\)</p>"},{"location":"ZJU_CS/ADS/week14/#parallel_rank_1","title":"Parallel Rank","text":"<p>\u5f53\u7136\u57fa\u4e8e\u66b4\u529b\u5bf9\u6bd4\u7684\u7b97\u6cd5\u4e5f\u662f\u53ef\u4ee5\u7684\uff0c\\(T(n) = 1, W(n) = O(n^2)\\) \u56e0\u6b64\u6211\u4eec\u518d\u60f3\u5230\u591a\u5206\u673a\u7ec4\uff0c\u5f15\u51fa\u53cc\u5bf9\u6570\u7ea7\u522b\u7684\u7b97\u6cd5\u3002\\(T(n) = O(loglogn)\\)\uff0c\\(W(n) = O(nloglogn)\\)</p>"},{"location":"ZJU_CS/ADS/week14/#randomized","title":"Randomized","text":"<p>\u968f\u673a\u7b97\u6cd5\uff0c\u9ad8\u6982\u7387\u4f7f\u5f97\\(T(n) = O(1)\\)\uff0c\\(W(n) = O(n)\\)</p> <p>\u3010Theorem\u3011The algorithm finds the maximum among n elements. With very high probability it runs in O(1) time and O(n) work. The probability of not finishing within this time and work complexity is \\(O(1/n^c)\\) for some positive constant c.</p>"},{"location":"ZJU_CS/ADS/week15/","title":"Lecture 15 | External Sorting","text":"<p>link</p> <p>Wikipedia: https://en.wikipedia.org/wiki/External_sorting</p> <p>\u5916\u6392\u5e8f\u4e0e\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\u7684\u76f8\u5173\u5185\u5bb9\u6709\u4ea4\u53c9\u5173\u7cfb\uff0c\u5f53\u9700\u8981\u6392\u5e8f\u7684\u6570\u636e\u8fc7\u5927\uff0c\u800c\u65e0\u6cd5\u88ab\u5b8c\u5168\u653e\u5728\u5185\u5b58\u65f6\uff0c\u666e\u901a\u7684\u6392\u5e8f\u7b97\u6cd5\u65e0\u6cd5\u88ab\u5e94\u7528\u3002\u6b64\u65f6\u9700\u8981\u4f7f\u7528\u5916\u6392\u5e8f\uff0c\u7b80\u5355\u6765\u8bf4\u5c31\u662f\u5728\u66f4\u5927\u7684\u5c3a\u5ea6\u4e0a\u8fdb\u884c\u7c7b\u4f3c\u5f52\u5e76\u7684\u64cd\u4f5c\u3002</p> <p>\u800c\u6b63\u56e0\u4e3a\u6b64\uff0c\u5916\u90e8\u6392\u5e8f\u7684\u8fc7\u7a0b\u4e0e\u786c\u4ef6\u8bbe\u8ba1\u6709\u4e00\u5b9a\u5173\u7cfb\u3002</p> \u4e0e\u786c\u4ef6\u76f8\u5173\u7684\u4e00\u4e9b\u8bf4\u660e <p>\u5177\u4f53\u6765\u8bf4\uff0c\u666e\u901a\u7684\u6392\u5e8f\u7b97\u6cd5\u6392\u5e8f\u7684\u5bf9\u8c61\u90fd\u662f\u653e\u5728\u5185\u5b58\u91cc\u7684\u4e00\u4e9b\u6570\u636e\uff0c\u4f8b\u5982\u4e00\u4e2a <code>int</code> \u6570\u7ec4\u3002\u7136\u800c\u5916\u90e8\u6392\u5e8f\u6392\u5e8f\u7684\u5bf9\u8c61\uff0c\u6216\u8005\u8bf4\u8981\u6392\u5e8f\u7684\u90a3\u4e2a\u201c\u6570\u7ec4\u201d\uff0c\u6ca1\u6cd5\u88ab\u5b8c\u6574\u5730\u5b58\u5728\u5185\u5b58\u91cc\uff0c\u5b83\u4eec\u90fd\u88ab\u5b58\u50a8\u5728\u786c\u76d8\u4e4b\u7c7b\u7684\u975e\u6613\u5931\u4ecb\u8d28\u4e2d\uff0c\u800c\u4ece\u8fd9\u79cd\u4ecb\u8d28\u91cc\u8bfb\u53d6\u6570\u636e\u5f80\u5f80\u5177\u6709\u8f83\u5927\u7684\u5f00\u9500\uff0c\u6240\u4ee5\u6211\u4eec\u603b\u662f\u201c\u4e00\u5757\u4e00\u5757\u201d\u4ece\u91cc\u9762\u90a3\u6570\u636e\u3002</p> <p>\u6253\u4e2a\u6bd4\u65b9\uff0c\u4f60\u73b0\u5728\u9700\u8981\u5bf9\u4e00\u6574\u4e2a\u56fe\u4e66\u9986\uff08\u786c\u76d8\uff09\u7684\u4e66\u505a\u6392\u5e8f\uff0c\u4f46\u662f\u4f60\u7684\u684c\u5b50\uff08\u5185\u5b58\uff09\u4e0a\u6700\u591a\u653e\u4e0b\u4e09\u5341\u672c\u4e66\uff0c\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u4f60\u4e00\u6b21\u6700\u591a\u5904\u7406\u4e09\u5341\u672c\u4e66\u3002\u800c\u4e3a\u4e86\u4ece\u56fe\u4e66\u9986\u4e2d\u83b7\u53d6\u9700\u8981\u6392\u7684\u4e66\uff0c\u4f60\u5f97\u5148\u627e\u5230\u8fd9\u4e9b\u4e66\u5728\u54ea\uff08seek\uff09\uff0c\u7136\u540e\u518d\u628a\u8fde\u7eed\u7684\u4e09\u5341\u672c\u4e66\u62ff\u51fa\u6765\uff08block transfer\uff09\uff0c\u653e\u5230\u4f60\u7684\u684c\u5b50\uff08\u5185\u5b58\uff09\u4e0a\u518d\u6392\u5e8f\uff0c\u800c\u4e3a\u4e86\u7ed9\u63a5\u4e0b\u6765\u4e09\u5341\u672c\u4e66\u817e\u4f4d\u7f6e\uff0c\u4f60\u8fd8\u5f97\u628a\u6392\u597d\u7684\u4e09\u5341\u672c\u4e66\u518d\u653e\u56de\u53bb\uff08\u5373\u8bb0\u5f55\u4e0b\u6392\u5e8f\u7ed3\u679c\uff0c\u540c\u6837\u4e5f\u662f\u4e00\u6b21 block transfer\uff09\u3002</p> <p>\u7efc\u4e0a\u6240\u8ff0\uff0c\u5916\u90e8\u6392\u5e8f\u4e3b\u8981\u89e3\u51b3\u7684\u5c31\u662f\uff0c\u6309\u7167\u600e\u6837\u7684\u7b56\u7565\u6765\u5bf9\u8fd9\u4e9b\u6570\u636e\u8fdb\u884c\u6392\u5e8f\u3002</p> <p>\u5bfc\u8bfb</p> <p>\u7531\u4e8e ADS \u4ecb\u7ecd\u7684\u5916\u6392\u5e8f\u548c\u540c\u65f6\u671f\u6570\u636e\u5e93\u7cfb\u7edf\u8fd9\u95e8\u8bfe\u4ecb\u7ecd\u7684\u5916\u6392\u5e8f\u6709\u540c\u6709\u5f02\uff0c\u6240\u4ee5\u6211\u6253\u7b97\u5148\u5728\u5927\u6982\u8bb2\u5916\u6392\u5e8f\u7684\u6838\u5fc3\u601d\u8def\uff0c\u518d\u5c55\u5f00 ADS \u8bfe\u7a0b\u4e2d\u7684\u5177\u4f53\u8fc7\u7a0b\u3002</p>"},{"location":"ZJU_CS/ADS/week15/#_1","title":"\u6982\u8ff0","text":"<p>\u5916\u6392\u5e8f\u7684\u57fa\u672c\u601d\u8def\u5c31\u662f\u5c06\u6570\u636e\u5206\u4e3a\u82e5\u5e72\u4e2a\u5c0f\u5757\uff0c\u7136\u540e\u5bf9\u6bcf\u4e2a\u5c0f\u5757\u8fdb\u884c\u6392\u5e8f\uff0c\u6700\u540e\u518d\u5c06\u8fd9\u4e9b\u5c0f\u5757\u5408\u5e76\u8d77\u6765\u3002\u800c\u6211\u4eec\u5e38\u8bf4\u7684\u5f52\u5e76\u6392\u5e8f\uff0c\u6307\u7684\u662f\u9012\u5f52\u5730\u5c06\u4e24\u5757\u5408\u6210\u4e00\u5757\uff0c\u800c\u6240\u8c13\u7684 \\(k\\) \u8def\uff08\\(k\\)-way\uff09\u5f52\u5e76\uff0c\u5c31\u662f\u5c06 \\(k\\) \u5757\u5408\u6210\u4e00\u5757\u3002</p> <p>\u90a3\u4e48\u5982\u4f55\u5f52\u5e76\u5462\uff1f\u6211\u5c06\u4ece\u4e24\u4e2a\u7ef4\u5ea6\u6765\u7b80\u5355\u9610\u8ff0\u3002</p>"},{"location":"ZJU_CS/ADS/week15/#_2","title":"\u903b\u8f91\u7ef4\u5ea6","text":"<p>\u5916\u90e8\u6392\u5e8f\u6240\u4f7f\u7528\u7684\u5f52\u5e76\u6392\u5e8f\u4ece\u903b\u8f91\u4e0a\u6765\u8bb2\u548c\u666e\u901a\u7684\u5f52\u5e76\u6392\u5e8f\u4e00\u81f4\uff0c\u603b\u662f\u5c06 \\(k\\) \u4e2a\u6709\u5e8f\u5e8f\u5217\u5408\u5e76\u4e3a 1 \u4e2a\u6709\u5e8f\u5e8f\u5217\u3002</p> <p>\u800c\u8fd9\u91cc\u7684\u201c\u6709\u5e8f\u5e8f\u5217\u201d\uff0c\u5728\u5916\u6392\u5e8f\u4e2d\u88ab\u79f0\u4e3a\u201crun\u201d\uff0c\u5373\u6bcf\u6b21\u5f52\u5e76\u6211\u4eec\u53e6 \\(k\\) \u4e2a run \u53d8\u6210\u4e00\u4e2a run\u3002\u6b63\u7740\u8bf4\u5c31\u662f\uff1a</p> <p>run</p> <p>\u4e00\u4e2a run \u6307\u7684\u662f\u4e00\u6bb5\u8fc7\u7a0b\u4e2d\u7684\u6570\u636e\uff0c\u5728\u672c\u6587\u4e2d\u7279\u6307\u5f85\u5f52\u5e76\u7684\u6709\u5e8f\u7684\u5e8f\u5217\uff0c\u5728 \\(k\\)-way merge \u4e2d\uff0c\u6211\u4eec\u603b\u662f\u5c06 \\(k\\) \u4e2a run \u5408\u5e76\u4e3a 1 \u4e2a run\u3002</p> <p>\u8bf4\u660e</p> <p>\u8fd9\u91cc\u7684 run \u7684\u5b9a\u4e49\u662f\u6211\u81ea\u5df1\u8111\u8865\u51fa\u6765\u7684\uff0c\u5e76\u4e0d\u786e\u5b9a\u662f\u5426\u4e25\u683c\uff0c\u4f46\u662f\u53ef\u4ee5\u4fdd\u8bc1\u7684\u662f\uff1a \u4e00\u4e2a run \u5728\u53c2\u4e0e merge \u4e4b\u524d\u80af\u5b9a\u5df2\u7ecf\u6709\u5e8f\u4e86\uff0c\u53ef\u4ee5\u7406\u89e3\u4e3a \"have already run\"\uff0c\u800c\u4e3a\u4e86\u4e0d\u6405\u7cca\u8bfb\u8005\u7684\u8111\u5b50\uff0c\u6211\u8fd9\u91cc\u5c31\u4ee5\u8fd9\u4e2a\u5b9a\u4e49\u4e3a\u51c6\u3002</p> <p>\u4ece\u6267\u884c\u7684\u987a\u5e8f\u6765\u8bf4\uff0c\u5185\u6392\u5e8f\u4e2d\u7684\u5f52\u5e76\u6392\u5e8f\u662f\u4e00\u4e2a\u81ea\u4e0a\u800c\u4e0b\u4e0d\u65ad \\(\\frac{1}{k}\\) \u5730\u5212\u5206\uff0c\u518d\u81ea\u4e0b\u800c\u4e0a\u4e0d\u65ad\u5f52\u5e76\u7684\u8fc7\u7a0b\u3002\u76f8\u53cd\uff0c\u5916\u6392\u5e8f\u7531\u4e8e\u5176\u7279\u6027\u9650\u5236\uff0c\u5176\u201c\u5f52\u5e76\u6bb5\u201d\u5e76\u4e0d\u662f\u81ea\u4e0a\u800c\u4e0b \\(\\frac{1}{k}\\) \u5212\u5206\u51fa\u6765\u7684\uff0c\u800c\u662f\u6839\u636e\u786c\u4ef6\u5904\u7406\u80fd\u529b\uff0c\u76f4\u63a5\u5212\u5206\u597d\u6700\u5c0f\u7684\u5f52\u5e76\u6bb5\uff0c\u7136\u540e\u76f4\u63a5\u81ea\u4e0b\u800c\u4e0a\u5f52\u5e76\u3002</p> <p>\u800c\u8fd9\u6837\u4e00\u4e2a\u5c06 \\(k \\cdot c\\) \u4e2a run merge \u6210 \\(c\\) \u4e2a run \u7684\u8fc7\u7a0b\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u4e00\u4e2a <code>pass</code>\u3002\uff08\u5728\u5f52\u5e76\u6811\u4e0a\u4f53\u73b0\u4e3a\u4e00\u5c42\u3002\uff09</p>"},{"location":"ZJU_CS/ADS/week15/#_3","title":"\u7269\u7406\u7ef4\u5ea6","text":"<p>\u5173\u4e8e\u7269\u7406\u7ef4\u5ea6\uff0c\u6d89\u53ca\u5230\u4e00\u4e9b\u786c\u4ef6\u77e5\u8bc6\uff0c\u5728 ADS \u4e2d\u4e3a\u4e86\u65b9\u4fbf\u8bf4\u660e\u4f1a\u5c06\u5176\u7b80\u5316\uff0c\u6709\u5173 block \u7684\u6982\u5ff5\u5c06\u88ab\u62bd\u8c61\u5316\u4e3a\u201c\u6570\u636e\u5355\u4f4d\u201d\u3002</p> <p>\u6211\u4eec\u77e5\u9053\uff0c\u5185\u5b58\u7684\u5927\u5c0f\u662f\u6709\u9650\u7684\uff0c\u5212\u5206\u7ed9\u5f52\u5e76\u6570\u636e\u7684\u5185\u5b58\u4e5f\u5e94\u5f53\u662f\u6709\u9650\u7684\uff0c\u6211\u4eec\u7528 \\(M\\) \u6765\u8bb0\u5b83\uff0c\u5373\u5185\u5b58\u4e2d\u4e00\u6b21\u53ea\u80fd\u5904\u7406 \\(M\\) \u4e2a\u5355\u4f4d\u7684\u6570\u636e\u3002</p> <p>\u66f4\u7ec6\u8282\u7684\uff0c\u6211\u4eec\u5e94\u5f53\u66f4\u5177\u7269\u7406\u5927\u5c0f\u6765\u8ba1\u7b97 \\(M\\)\uff0c\u4f8b\u5982\u4e00\u6761\u6570\u636e\u7684\u5927\u5c0f\u662f \\(l \\text{Bytes}\\)\uff0c\u800c\u5185\u5b58\u7684\u5927\u5c0f\u662f \\(m \\text{Bytes}\\)\uff0c\u90a3\u4e48\u4e00\u4e2a\u5185\u5b58\u80fd\u591f\u5bb9\u7eb3\u7684\u6570\u636e\u6570\u91cf\u5e94\u5f53\u4e3a \\(\\lfloor \\frac{m}{l} \\rfloor\\)\u3002</p> <p>\u4f46\u662f\u65e2\u7136\u8981\u5f52\u5e76\uff0c\u6211\u4eec\u5c31\u9700\u8981\u5c06 \\(k\\) \u8def\u7684\u6570\u636e\u8bfb\u5165\u5230\u5185\u5b58\u4e2d\uff0c\u6700\u7406\u60f3\u7684\u60c5\u51b5\u4e0b\u6211\u4eec\u80af\u5b9a\u5e0c\u671b\u8fd9 \\(k\\) \u8def\u90fd\u80fd\u8bfb\u5165\u5230\u5185\u5b58\u4e2d\uff0c\u4f46\u662f\u663e\u7136\u8fd9\u662f\u4e0d\u5207\u5b9e\u9645\u7684\uff0c\u6211\u4eec\u6700\u591a\u516c\u5e73\u5730\u8bfb\u5165\u6bcf\u4e00\u8def\u7684\u524d \\(\\lfloor \\frac{M}{k} \\rfloor\\) \u4e2a\u6570\u636e\u2014\u2014\u4f46\u8fd9\u5df2\u7ecf\u8db3\u591f\u2014\u2014\u5bf9\u4e8e \\(k\\) \u4e2a\u6709\u5e8f\u5e8f\u5217\u7684\u5408\u5e76\u64cd\u4f5c\uff0c\u5176\u5408\u5e76\u8fc7\u7a0b\u4e2d\u4e5f\u6070\u597d\u53ea\u4e0e\u6700\u9760\u524d\u7684\u3001\u672a\u6392\u5e8f\u7684\u4e00\u90e8\u5206\u6570\u636e\u6709\u5173\u3002</p> <p>\u8bf4\u660e</p> <p>\u4e4b\u540e\u6240\u63d0\u5230\u7684\uff0c\u6709\u5173\u4e8e\u6392\u5e8f\u6570\u636e\u7684\u201c\u5185\u5b58\u201d\uff0c\u6307\u7684\u90fd\u662f\u5212\u5206\u7ed9\u7b97\u6cd5\uff0c\u7528\u6765\u5b58\u653e\u5f52\u5e76\u6570\u636e\u7684\u5185\u5b58\uff01</p> <p>example</p> <p>\u4e3e\u4f8b\u6765\u8bf4\uff0c\u5047\u8bbe\u73b0\u5728\u6709\u4e24\u4e2a run\uff0c\u5206\u522b\u4e3a\uff1a</p> <ol> <li><code>1</code> <code>3</code> <code>5</code> <code>7</code> <code>9</code></li> <li><code>0</code> <code>2</code> <code>4</code> <code>6</code> <code>8</code></li> </ol> <p>\u4f46\u662f\u5185\u5b58\u53ea\u80fd\u653e 4 \u4e2a\u5355\u4f4d\u6570\u636e\uff0c\u6240\u4ee5\u5bf9\u4e8e\u6bcf\u4e2a run \u603b\u662f\u53ea\u6709\u524d 2 \u4e2a\u6570\u636e\u662f\u53ef\u89c1\u7684\u3002\u4f46\u662f\u8fd9\u5e76\u4e0d\u5f71\u54cd\u6211\u4eec\u53ef\u4ee5\u786e\u5b9a\u8fd9\u4e24\u4e2a run \u5408\u5e76\u7684\u7ed3\u679c\u4e2d\uff0c\u524d\u4e00\u90e8\u5206\u662f <code>0</code> <code>1</code> <code>2</code>\uff0c\u800c\u81f3\u4e8e <code>2</code> \u540e\u9762\u6392\u4ec0\u4e48\uff0c\u5219\u8981\u4ece <code>run2</code> \u4e2d\u53d6\u51fa\u4e4b\u540e\u7684\u6570\u636e\uff0c\u518d\u4e0e <code>run1</code> \u4f59\u4e0b\u7684 <code>_</code> <code>3</code> \u5408\u5e76\u3002</p> <p>\u6613\u9519\u70b9</p> <p>\u6ce8\u610f\uff0c\u5f53\u5176\u4e2d\u4e00\u4e2a\u6bb5\u7684 buffer \u7a7a\u4e86\u4ee5\u540e\uff0c\u6211\u4eec\u4e0d\u80fd\u76f4\u63a5\u628a\u5176\u4ed6\u6bb5\u7684 buffer \u76f4\u63a5\u6392\u5e8f\u8fdb\u53bb\uff0c\u800c\u5fc5\u987b\u5148\u586b\u5145\u8fd9\u4e2a\u7a7a buffer \u7684\u5185\u5bb9\uff0c\u518d\u7ee7\u7eed\u6392\u5e8f\u3002</p> <p>\u60f3\u8c61\u8fd9\u6837\u4e00\u4e2a\u60c5\u51b5\uff0c\u7a7a buffer \u5c06\u8981\u8f7d\u5165\u7684\u4e0b\u4e00\u6bb5\u6570\u636e\u662f <code>3</code> <code>4</code> <code>5</code>\uff0c\u800c\u53e6\u5916\u4e00\u4e2a buffer \u5269\u4e0b\u7684\u6570\u636e\u662f <code>7</code>\uff0c\u90a3\u4e48\u663e\u7136\uff0c<code>3</code> <code>4</code> <code>5</code> \u5e94\u8be5\u5148\u4e8e <code>7</code> \u88ab\u6392\u5e8f\u3002</p> <p>\u800c\u8fd9\u4e2a\u8fc7\u7a0b\u4e5f\u6b63\u662f\u5916\u6392\u5e8f\u80fd\u591f\u8fdb\u884c\u7684\u4e00\u4e2a\u91cd\u8981\u57fa\u7840\u3002</p> <p>\u5176\u4e2d\u6bd4\u8f83\u7279\u522b\u7684\u6b65\u9aa4\u5c31\u662f\uff0c\u6700\u5f00\u59cb\u7684\u6392\u5e8f\uff0c\u5373\u7b2c\u4e00\u4e2a pass\u3002\u5148\u524d\u6211\u4eec\u5728#\u903b\u8f91\u7ef4\u5ea6\u91cc\u63d0\u5230\u4e86\uff0c\u5916\u6392\u5e8f\u7684\u7b2c\u4e00\u4e2a pass \u4f1a\u76f4\u63a5\u5212\u5206\u597d\u6700\u5c0f\u7684\u5f52\u5e76\u6bb5\uff0c\u800c\u8fd9\u4e2a\u201c\u6700\u5c0f\u5f52\u5e76\u6bb5\u201d\u7684\u5927\u5c0f\u5c31\u662f \\(M\\)\u3002\u7528\u8bed\u8a00\u63cf\u8ff0\uff0c\u5c31\u662f\u6700\u65e9\u7684 run \u7684\u5927\u5c0f\u5c31\u662f\u5e73\u5747\u6bcf\u4e00\u8def\u80fd\u591f\u5728\u5185\u5b58\u4e2d\u5904\u7406\u7684\u6700\u5927\u6570\u636e\u5355\u4f4d\u91cf\u3002</p> <p>\u7136\u800c\u95ee\u9898\u51fa\u73b0\u4e86\uff0c\u6839\u636e\u6211\u4e4b\u524d\u7ed9\u51fa\u7684\u5b9a\u4e49\uff0crun \u5e94\u5f53\u662f\u6709\u5e8f\u7684\uff0c\u4f46\u662f\u4ece\u539f\u59cb\u6570\u636e\u91cc\u8bfb\u51fa\u6765\u7684\u201c\u6700\u5c0f\u5f52\u5e76\u6bb5\u201d\u662f\u65e0\u5e8f\u7684\u3002\u4f46\u662f\u5bf9\u4e8e\u6700\u521d\u7684 run\uff0c\u5b83\u5fc5\u7136\u80fd\u591f\u6574\u6bb5\u653e\u5230\u5185\u5b58\u91cc\uff08\u66f4\u8fdb\u4e00\u6b65\u7684\uff0c\u4e5f\u53ea\u6709\u6700\u521d\u7684 run \u80fd\u591f\u5b8c\u6574\u5730\u653e\u5230\u5185\u5b58\u91cc\uff09\uff0c\u56e0\u6b64\u76f4\u63a5\u5bf9\u5176\u8fdb\u884c\u5185\u6392\u5e8f\u5373\u53ef\u3002</p> <p>\u903b\u8f91\u8054\u7cfb</p> <ul> <li>\u56e0\u4e3a\u5185\u6392\u5e8f\u5f88\u5feb\uff0c\u6240\u4ee5\u8981\u5c3d\u53ef\u80fd\u5229\u7528\u5185\u6392\u5e8f\uff1b</li> <li>\u6240\u4ee5\u4e00\u5f00\u59cb\u5c31\u8981\u5c06\u80fd\u5185\u6392\u5e8f\u505a\u7684\u4e8b\u60c5\u90fd\u7528\u5185\u6392\u5e8f\u89e3\u51b3\uff1b</li> <li>\u6240\u4ee5\u6700\u521d\u7684 run \u7684\u5927\u5c0f\u662f \\(M\\)\u3002</li> </ul> <p>\u4e2d\u7ee7</p> <p>\u4ee5\u4e0a\u5185\u5bb9\u662f\u5bf9\u5916\u6392\u5e8f\u6838\u5fc3\u601d\u60f3\u7684\u4e00\u4e2a\u7b80\u5355\u4ecb\u7ecd\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u5c06\u4ee5 ADS \u6240\u4ecb\u7ecd\u7684\u5916\u6392\u5e8f\u8303\u5f0f\uff0c\u6765\u4ecb\u7ecd\u4e00\u4e0b\u5177\u4f53\u7684\u8fc7\u7a0b\u548c\u4e00\u4e9b\u6539\u8fdb\u3002</p>"},{"location":"ZJU_CS/ADS/week15/#_4","title":"\u5177\u4f53\u5206\u6790","text":"<p>ADS \u4e2d\u76f8\u6bd4\u4e0a\u9762\u4ecb\u7ecd\u7684\u90e8\u5206\uff0c\u53c8\u5f15\u5165\u4e86\u4e00\u4e2a\u53eb tape \u7684\u6982\u5ff5\uff0ctape \u7684\u4e2d\u6587\u662f\u78c1\u5e26\uff0c\u800c\u5728\u8fd9\u4e2a\u6846\u67b6\u4e2d\uff0c\u6211\u66f4\u503e\u5411\u4e8e\u628a\u5b83\u5f53\u4f5c\u4e00\u4e2a\u62bd\u8c61\u7684\u6982\u5ff5\u3002</p> <p>\u76f8\u5bf9\u5e94\u7684\uff0c\u5176\u5b9e\u9645\u8fc7\u7a0b\u4e0e\u4e0a\u9762\u63cf\u8ff0\u7684\u65b9\u6cd5\u53ef\u80fd\u6709\u4e00\u4e9b\u611f\u53d7\u4e0a\u7684\u5dee\u522b\uff0c\u5982\u679c\u53ea\u662f\u4e86\u89e3\u601d\u60f3\u7684\u8bdd\u4e0a\u534a\u90e8\u5206\u5df2\u7ecf\u8db3\u591f\uff08\u5f53\u7136\u540e\u9762\u8fd8\u6709\u4e00\u4e9b\u57fa\u4e8e\u5982\u4e0b\u6a21\u578b\u7684\u4f18\u5316\u8ba8\u8bba\uff09\uff0c\u4f46\u662f\u6bd5\u7adf\u8fd8\u662f\u9762\u5411\u8003\u8bd5\uff0c\u6240\u4ee5\u8fd8\u662f\u9700\u8981\u4ee5 ADS \u8bfe\u4ef6\u7684\u65b9\u6cd5\u518d\u4ecb\u7ecd\u4e00\u6b21\u3002</p> <p>\u8bf4\u660e</p> <p>\u6211\u4e4b\u540e\u4f1a\u4ee5 run \u4e3a\u5355\u4f4d\uff0c\u6765\u63cf\u8ff0\u5408\u5e76\u8fc7\u7a0b\u3002\u4f46\u662f\u5b9e\u9645\u53d1\u751f\u5728\u8ba1\u7b97\u673a\u91cc\u7684\u6b65\u9aa4\u66f4\u52a0\u590d\u6742\uff1a</p> <p>\u9700\u8981\u5148\u5c06\u6bcf\u4e00\u6761 tape \u7684\u4e00\u90e8\u5206\u6570\u636e\u8bfb\u5165\u5185\u5b58\u7684 buffer \u4e2d\uff0c\u7136\u540e\u5229\u7528\u8fd9\u4e9b buffer \u6765\u8fdb\u884c\u6392\u5e8f\uff1b\u5f53\u67d0\u4e2a buffer \u7a7a\u4e86\u4ee5\u540e\u8981\u7acb\u523b\u5c06\u5bf9\u5e94 tape \u7684\u4e0b\u4e00\u90e8\u5206\u6570\u636e\u8bfb\u5165\uff0c\u76f4\u5230\u6ca1\u6709\u6570\u636e\u53ef\u4ee5\u586b\u5145\u4e3a\u6b62\u3002</p> <p>\u4e5f\u6b63\u662f#\u7269\u7406\u7ef4\u5ea6\u6240\u8bf4\u7684\u90a3\u4e9b\u3002</p>"},{"location":"ZJU_CS/ADS/week15/#_5","title":"\u6734\u7d20\u8fc7\u7a0b\u5206\u6790","text":"<p>\u6211\u4eec\u4ee5 2-way merge \u4e3a\u4f8b\uff0c\u7ed3\u5408 ADS \u8bfe\u4ef6\u4e2d\u7684\u914d\u56fe\u6765\u8bf4\u660e\u3002</p> \u51c6\u5907 <p> </p> <p>\u56fe\u4e2d \\(T_1\\) \u662f\u4e00\u6761 tape \u7684\u7f16\u53f7\uff0c\u6211\u4eec\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u4e2a\u5e8f\u5217\u7684\u7269\u7406\u5730\u5740\uff0c\u6216\u66f4\u901a\u4fd7\u7684\u6765\u8bf4\uff0c\u53ef\u4ee5\u5f53\u4f5c\u4e00\u4e2a\u6570\u7ec4\uff0c\u53ea\u4e0d\u8fc7\u5b83\u7684\u5b9e\u9645\u6570\u636e\u662f\u5728\u786c\u76d8\u4e2d\u3002\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u8fd9\u91cc\u7684 tape \u8868\u793a\u7684\u90fd\u662f\u786c\u76d8\u4e2d\u7684\u6570\u636e\u3002</p> <p>\u8fd9\u6761 tape \u4e2d\u6709 13 \u4e2a\u5143\u7d20\uff0c\u6211\u4eec\u8bb0\u5176\u4e3a \\(N = 13\\)\u3002\u800c\u8fd9\u6761\u539f\u59cb\u7684 tape \u88ab\u5212\u5206\u4e3a\u4e86 5 \u6bb5\uff0c\u6bcf\u4e00\u6bb5\u90fd\u6709\u4e0d\u8d85\u8fc7 3 \u4e2a\u5143\u7d20\uff0c\u6b64\u65f6 \\(M = 3\\)\u3002\u5373\u6709 \\(\\lceil \\frac{N}{M} \\rceil = 5\\)\u3002</p> Pass 1 <p>\u73b0\u5728\u6211\u4eec\u8981\u5f00\u59cb merge \u4e86\u3002\u5bf9\u4e8e\u8fd9\u6bb5\u6570\u636e\u6765\u8bf4\uff0c\u8fd9\u662f\u610f\u4e49\u91cd\u5927\u7684\u201c\u4eba\u751f\u7b2c\u4e00\u6b21\u201d\uff0c\u76f8\u6bd4\u4e8e\u5176\u4ed6\u5f52\u5e76\u90fd\u662f\u4ece 2 \u4e2a tape \u5f00\u59cb\u7684 pass\uff0c\u8fd9\u4e00\u6b21\u663e\u5f97\u6709\u4e9b\u7279\u6b8a\u3002</p> <p>\u5728\u7b2c\u4e00\u8f6e\u4e2d\uff0c\u9762\u5bf9\u5168\u90e8\u90fd\u662f\u65e0\u5e8f\u7684\u6570\u636e\uff0c\u6211\u4eec\u5c06\u8fd9 \\(\\lceil \\frac{N}{M} \\rceil = 5\\) \u4e2a\u6bb5\u5747\u5206\u5230\u4e24\u6761 tape \u4e0a\uff082-way\uff09\uff0c\u8fd9\u91cc\u7ecf\u5386\u4e24\u4e2a\u6b65\u9aa4\uff1a</p> <ol> <li>\u4f9d\u6b21\u8bfb\u53d6 \\(T_1\\) \u4e2d\u6bcf\u4e00\u6bb5\u6570\u636e\uff08\u521a\u597d\u5360\u6ee1\u5185\u5b58\uff09\uff0c\u5e76\u5bf9\u5b83\u4eec\u8fdb\u884c\u5185\u6392\u5e8f\uff1b</li> <li>\u5c06\u6392\u5e8f\u5b8c\u7684\u6bb5\uff0c\u8ffd\u52a0\u5199\u5230 \\(T_2\\) \u6216 \\(T_3\\) \u4e2d\uff08\u5177\u4f53\u6bcf\u4e00\u4e2a tape \u5199\u51e0\u6761\uff0c\u4f1a\u6709\u4e13\u95e8\u7b56\u7565\u505a\u8c03\u6574\uff0c\u76ee\u524d\u5148\u5e73\u5206\u7740\u653e\uff09\uff1b</li> </ol> <p>\u4e8e\u662f\uff0c\\(T_1\\) \u4e2d\u7684\u6570\u636e\u4fbf\u88ab\u8f6c\u79fb\u5230\u4e86 \\(T_2\\) \u548c \\(T_3\\)\u3002\u4e3a\u4e86\u91cd\u590d\u5229\u7528 tape\uff0c\u6b64\u65f6\u7684 \\(T_1\\) \u88ab\u770b\u4f5c\u53ef\u4ee5\u7528\u7684\u7a7a\u78c1\u76d8\u4e86\u3002</p> <p> </p> <p>\u4e8e\u662f\uff0c\u5b8c\u6210\u4e86\u7b2c\u4e00\u4e2a pass\u3002</p> Pass 2 <p>\u4e4b\u540e\u7684 pass \u5219\u57fa\u672c\u9075\u5faa\u540c\u6837\u7684\u89c4\u5219\uff0c\u4e0d\u65ad\u53d6\u6bcf\u4e00\u8def\u7684\u7b2c\u4e00\u4e2a run \u5e76 merge\uff0c\u5e76\u4e14\u5c06\u7ed3\u679c\u5199\u5230\u4e24\u4e2a\uff08k \u4e2a\uff09\u95f2\u7f6e\u7684 tape \u4e0a\uff08\u548c\u524d\u9762\u8bf4\u8fc7\u7684\u4e00\u6837\uff0c\u8fd9\u91cc\u6682\u4e14\u5c06\u5206\u914d\u7b56\u7565\u5b9a\u4e3a\u5e73\u5206\u5230\u6bcf\u4e00\u4e2a tape \u4e0a\uff09\u3002</p> <p>\u4f8b\u5982\uff0c\u6211\u4eec\u8981\u53d6 \\(T_2\\) \u548c \\(T_3\\) \u7684\u7b2c\u4e00\u6bb5\uff0c\u6267\u884c\u5f52\u5e76\u64cd\u4f5c\uff0c\u5f97\u5230\u4e00\u4e2a\u65b0\u7684\uff0c\u6709 6 \u4e2a\u6570\u636e\u7684 run\uff0c\u5e76\u5199\u5230\u95f2\u7f6e\u7684 \\(T_1\\) \u4e0a\uff1b\u63a5\u4e0b\u6765\u53d6 \\(T_2\\) \u548c \\(T_3\\) \u7684\u7b2c\u4e8c\u6bb5\uff0c\u5f52\u5e76\u5f97\u5230\u65b0\u7684 run\uff0c\u6b64\u65f6\u6211\u4eec\u53d1\u73b0\uff0c\\(T_1\\)\u3001\\(T_2\\)\u3001\\(T_3\\) \u90fd\u4e0d\u662f\u95f2\u7f6e\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u65b0\u7684 tape\uff0c\u5199\u5230 \\(T_4\\) \u4e0a\u3002</p> <p> </p> <p>\u4e8e\u662f\uff0c\u5b8c\u6210\u4e86\u7b2c\u4e8c\u4e2a pass\u3002</p> Pass 3 <p>pass 3 \u548c pass 2 \u7684\u8fc7\u7a0b\u57fa\u672c\u4e00\u81f4\u3002\u73b0\u5728\u7684 tape \u72b6\u6001\u662f \\(\\{T_2, T_3\\}\\) \u95f2\u7f6e\uff0c\u6211\u4eec\u53d6 \\(T_1\\) \u548c \\(T_4\\) \u7684\u7b2c\u4e00\u6bb5\uff0c\u5f97\u5230\u4e00\u4e2a\u65b0\u7684 run\uff0c\u5305\u542b 12 \u4e2a\u5143\u7d20\uff1b\u53d6 \\(T_1\\) \u548c \\(T_4\\) \u7684\u7b2c\u4e8c\u6bb5\uff0c\u5f97\u5230\u4e00\u4e2a\u65b0\u7684 run\uff0c\u5305\u542b 1 \u4e2a\u5143\u7d20\u3002\u8fd9\u4e24\u6bb5\u88ab\u5206\u914d\u5230\u4e24\u6761\u7a7a\u95f2 tape \u4e0a\uff0c\u5373 \\(T_2\\) \u548c \\(T_3\\)\u3002</p> <p> </p> <p>\u4e8e\u662f\uff0c\u5b8c\u6210\u4e86\u7b2c\u4e09\u4e2a pass\u3002</p> Pass 4 <p>\u540c\u6837\uff0cpass 4 \u548c\u524d\u9762\u4e24\u4e2a pass \u7684\u8fc7\u7a0b\u4e5f\u662f\u4e00\u81f4\u6027\u7684\uff0c\u4e0d\u505a\u8fc7\u591a\u89e3\u91ca\uff0c\u5bf9\u4e8e\u89c4\u6a21\u66f4\u5927\u7684\u6570\u636e\u4e5f\u662f\u4e00\u6837\uff0c\u9664\u4e86\u7b2c\u4e00\u4e2a pass \u6bd4\u8f83\u7279\u6b8a\uff0c\u5176\u5b83 pass \u90fd\u662f\u4e00\u6837\u7684\u3002\u6700\u7ec8\u5f97\u5230\u53ea\u5269\u4e0b\u4e00\u4e2a tape \u4e2d\u5305\u542b\u552f\u4e00\u7684 run \u65f6\uff0c\u6392\u5e8f\u5c31\u7ed3\u675f\u4e86\u3002</p> <p> </p> <p>\u81f3\u6b64\uff0c\u6392\u5e8f\u7ed3\u675f\u3002</p>"},{"location":"ZJU_CS/ADS/week15/#_6","title":"\u4f18\u5316\u7a7a\u95f4","text":"<p>\u53ef\u4ee5\u4f18\u5316\u7684\u90e8\u5206\u4e3b\u8981\u6709\u8fd9\u4e48\u51e0\u4e2a\uff1a</p> <ul> <li>\u4e00\u4e2a pass \u610f\u5473\u7740\u82e5\u5e72\u6b21 seek\uff0c\u6240\u4ee5\u51cf\u5c11 pass \u53ef\u4ee5\u662f\u4e00\u4e2a\u65b9\u5411\uff1b<ul> <li>#pass-\u6570\u91cf\u5206\u6790\u4e0e\u4f18\u5316</li> </ul> </li> <li>merge \u7684\u8fc7\u7a0b\u4e2d\u4f1a\u591a\u6b21\u8bfb\u53d6 tape \u4e2d\u7684\u6570\u636e\uff0c\u800c\u5bf9\u4e8e\u8ba1\u7b97\u673a\u6765\u8bf4\u5355\u6b21\u5927\u91cf\u8bfb\u53d6\u6bd4\u591a\u6b21\u5c0f\u91cf\u8bfb\u53d6\u66f4\u9ad8\u6548\uff0c\u5982\u4f55\u4f18\u5316\u6570\u636e\u8bfb\u53d6\u4e5f\u662f\u4e00\u4e2a\u65b9\u5411\uff1b<ul> <li>#tape-\u6570\u91cf\u5206\u6790\u4e0e\u4f18\u5316</li> </ul> </li> <li>\u5982\u4f55\u66f4\u9ad8\u6548\u7684\u5728 \\(k\\)-way merge \u8fc7\u7a0b\u4e2d\uff0c\u5f52\u5e76 M \u4e2a\u5206\u522b\u6765\u81ea k \u4e2a\u5e8f\u5217\u7684\u6570\u636e\uff0c\u5373\u5185\u6392\u5e8f\u7684\u7b56\u7565\uff0c\u4e5f\u4e0a\u4f18\u5316\u7684\u4e00\u4e2a\u65b9\u5411\uff1b<ul> <li>#k-\u8def\u5185\u6392\u5e8f\u4f18\u5316</li> </ul> </li> <li>\u8bfb\u5165\u3001\u5185\u6392\u5e8f\u3001\u8f93\u51fa\uff0c\u8fd9\u4e09\u4e2a\u4e8b\u52a1\u76ee\u524d\u662f\u505c\u673a\u4e32\u884c\u7684\uff0c\u8003\u8651\u5c06\u5176\u5e76\u884c\u5316\u4e5f\u662f\u4e00\u4e2a\u65b9\u5411\uff1b<ul> <li> TODO</li> </ul> </li> </ul>"},{"location":"ZJU_CS/ADS/week15/#pass","title":"pass \u6570\u91cf\u5206\u6790\u4e0e\u4f18\u5316","text":"<p>\u4f8b\u5b50\u4e2d\u4e00\u5171\u7ecf\u8fc7\u4e86 4 \u6b21 pass\u3002\u5982\u679c\u6211\u4eec\u8bb0 \\(max(\\#run)\\) \u4e3a \\(\\#run\\) \u6700\u591a\u7684 tape \u7684 \\(\\#run\\)\uff0c\u5219\u6bcf\u4e00\u6b21 pass \u4f1a\u4ee4 \\(max(\\#run)\\) \u7f29\u5c0f\u4e00\u534a\uff0c\u76f4\u5230 \\(max(\\#run)\\) \u53d8\u4e3a 1\uff0c\u4e14\u53ea\u6709\u5b83\u4e00\u6761 tape \u8fd8\u6709\u6570\u636e\uff0c\u6807\u5fd7\u7740\u6392\u5e8f\u7ed3\u675f\u3002</p> <p>\u5982\u679c\u4e13\u6ce8\u4e8e \\(\\#run\\) \u7684\u53d8\u5316\uff0c\u90a3\u4e48\u4e0a\u9762\u7684\u6a21\u62df\u6b65\u9aa4\u5927\u81f4\u662f\u8fd9\u4e48\u4e00\u4e2a\u8fc7\u7a0b\uff1a</p> <p>Pass 1</p> <p>\u539f\u5148 \\(T_1\\) \u4e0a \\(\\#run = 5\\)\uff0c\u73b0\u5c06\u5b83\u5206\u914d\u5230\u4e24\u6761 tape \u4e0a\uff0c\u4e8e\u662f\u6709\uff1a</p> <ul> <li>\\(T_2\\) \u4e0a \\(\\#run = 3\\)\uff1b</li> <li>\\(T_3\\) \u4e0a \\(\\#run = 2\\)\uff1b</li> </ul> <p>Pass 2</p> <p>\u4f9d\u6b21\u53d6 \\(T_2\\) \u548c \\(T_3\\) \u7684\u7b2c\u4e00\u6bb5\uff0c\u5f52\u5e76\u5f97\u5230\u65b0\u7684 run\uff0c\u5747\u5206\u5230\u53e6\u5916\u4e24\u6761 tape \u4e0a\uff08\u672a\u4f18\u5316\u7684\u505a\u6cd5\uff0c\u4f18\u5316\u505a\u6cd5\u53c2\u8003#tape-\u4f18\u5316\uff09\uff0c\u4e8e\u662f\u6709\uff1a</p> <ul> <li>\\(T_2\\) \u4e0a \\(\\#run = 3-1 = 2\\)\uff1b</li> <li>\\(T_3\\) \u4e0a \\(\\#run = 2-1 = 1\\)\uff1b</li> <li>\\(T_1\\) \u4e0a \\(\\#run = 0+1 = 1\\)\uff1b</li> <li>\\(T_4\\) \u4e0a \\(\\#run = 0\\)\uff1b</li> </ul> <p>\u7ee7\u7eed\u53d6\uff0c\u5373\uff1a</p> <ul> <li>\\(T_2\\) \u4e0a \\(\\#run = 2-1 = 1\\)\uff1b</li> <li>\\(T_3\\) \u4e0a \\(\\#run = 1-1 = 0\\)\uff1b</li> <li>\\(T_1\\) \u4e0a \\(\\#run = 1\\)\uff1b</li> <li>\\(T_4\\) \u4e0a \\(\\#run = 0+1 = 1\\)\uff1b</li> </ul> <p>\\(T_3\\) \u4e0a\u5df2\u7ecf\u6ca1\u6709\u4e86\uff0c\u4f46\u662f \\(T_2\\) \u8fd8\u6ca1\u53d6\u5b8c\uff0c\u6240\u4ee5\u53ea\u4ece \\(T_2\\) \u62ff\uff1a</p> <ul> <li>\\(T_2\\) \u4e0a \\(\\#run = 1-1 = 0\\)\uff1b</li> <li>\\(T_3\\) \u4e0a \\(\\#run = 0\\)\uff1b</li> <li>\\(T_1\\) \u4e0a \\(\\#run = 1+1 = 2\\)\uff1b</li> <li>\\(T_4\\) \u4e0a \\(\\#run = 1\\)\uff1b</li> </ul> <p>\u6a21\u62df\u5230\u4ece\u8fd9\u91cc\u5176\u5b9e\u5df2\u7ecf\u53ef\u4ee5\u770b\u51fa\u6765\u4e86\uff0c\u5bf9\u4e8e 2-way merge \u6765\u8bf4\uff0c\u6392\u9664\u672b\u6bb5\u60c5\u51b5\uff0c\u4ece\u7b2c\u4e8c\u4e2a pass \u5f00\u59cb\uff0c\u57fa\u672c\u4e0a\u6bcf\u6b21\u90fd\u662f\u4ece 2 \u8def\u4e2d\u5404\u53d6 1 \u4e2a run\uff0c\u5e76\u5408\u5e76\u4e3a 1 \u4e2a run\u3002\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u6bcf\u4e00\u4e2a pass \u4f1a\u8ba9 \\(total(\\#run)\\) \u7f29\u5c0f\u4e3a\u539f\u6765\u7684 \\(\\frac{1}{2}\\)\u3002</p> <p>\u90a3\u4e48\uff0c\u5bf9\u4e8e \\(k\\)-way merge \u6765\u8bf4\uff0c\u5c31\u662f\u4ece\u7b2c\u4e8c\u4e2a pass \u5f00\u59cb\uff0c\u6bcf\u6b21\u4ece \\(k\\) \u8def\u4e2d\u5404\u53d6 1 \u4e2a run\uff0c\u5e76\u5408\u5e76\u4e3a 1 \u4e2a run\uff0c\u6bcf\u4e00\u4e2a pass \u4f1a\u8ba9 \\(total(\\#run)\\) \u7f29\u5c0f\u4e3a\u539f\u6765\u7684 \\(\\frac{1}{k}\\)\u3002</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u5f52\u7eb3\u5f97\u5230\u5982\u4e0b\u8ba1\u7b97\u5f0f\uff1a</p> \\[ \\begin{aligned} \\#pass &amp;= \\underbrace{         1     }_{\\text{pass 1}}     +      \\underbrace{         \\lceil \\log_{k}{(\\#run)}\\rceil     }_{\\text{rest passes}} \\\\     &amp;= \\underbrace{         1     }_{\\text{pass 1}}     +      \\underbrace{         \\lceil \\log_{k}{             \\lceil \\frac{N}{M} \\rceil         }\\rceil     }_{\\text{rest passes}}  \\end{aligned} \\] <p>\u5176\u4e2d\uff0c\\(k\\) \u8868\u793a\u5f52\u5e76\u8def\u6570\uff0c\\(N\\) \u8868\u793a\u6570\u636e\u91cf\uff0c\\(M\\) \u8868\u793a\u5185\u5b58\u4e00\u6b21\u80fd\u5904\u7406\u7684\u6570\u636e\u91cf\u3002</p> <p>\u90a3\u4e48\uff0c\u51cf\u5c11 pass \u7684\u65b9\u6cd5\u4e5f\u5f88\u76f4\u89c2\u4e86\uff0c\u53ea\u9700\u8981\u589e\u52a0 \\(k\\) \u5373\u53ef\uff0c\u5373\u91c7\u53d6\u66f4\u591a\u8def\u7684\u5f52\u5e76\uff0c\u5c31\u80fd\u51cf\u5c11 pass\u3002</p> <p>\u7136\u800c\uff0c\u5176\u4e2d\u5fc5\u7136\u5b58\u5728\u4e00\u4e2a trade-off \u7684\u5173\u7cfb\uff0c\u867d\u7136 \\(k\\) \u589e\u52a0\u53ef\u4ee5\u51cf\u5c11 \\(\\#pass\\)\uff0c\u4f46\u662f\u5728\u63a5\u4e0b\u6765\u4e00\u8282\u4e2d\u6211\u4eec\u4f1a\u77e5\u9053\uff0c\\(k\\) \u8fc7\u5927\u4f1a\u5bfc\u81f4 tape \u9700\u6c42\u91cf\u589e\u52a0\uff0c\u6b64\u5916\uff0c\\(k\\) \u7684\u589e\u52a0\u4e5f\u4f1a\u5bfc\u81f4\u5185\u6392\u5e8f\u7684\u590d\u6742\u5ea6\u589e\u52a0\uff0c\u4e5f\u4f1a\u589e\u52a0 pass \u5185\u7684 seek \u6b21\u6570\u3002</p> <p>\u5f53\u7136\uff0c\u9664\u4e86\u66b4\u529b\u7684\u589e\u52a0 \\(k\\) \u4ee5\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528\u66ff\u6362\u9009\u62e9(Replacement Selection)\u7b97\u6cd5\uff0c\u6765\u751f\u6210\u6bd4 \\(M\\) \u5927\u7684\u521d\u59cb run\uff0c\u4ee5\u76f8\u5bf9\u51cf\u5c11 pass \u6570\u91cf\u3002</p>"},{"location":"ZJU_CS/ADS/week15/#_7","title":"\u66ff\u6362\u9009\u62e9\u7b97\u6cd5","text":"<p>\u66ff\u6362\u9009\u62e9(Replacement Selection) \u5728 hw15 \u4e2d\u88ab\u5e03\u7f6e\u4e3a\u7f16\u7a0b\u9898\uff0c\u6240\u4ee5\u5176\u5b9e\u73b0\u8fc7\u7a0b\u53ef\u4ee5\u7ed3\u5408\u90a3\u9053\u9898\u76ee\u6765\u5b66\u4e60\u3002</p> Replacement Selection @ PTA <p>When the input is much too large to fit into memory, we have to do external sorting instead of internal sorting. One of the key steps in external sorting is to generate sets of sorted records (also called runs) with limited internal memory. The simplest method is to read as many records as possible into the memory, and sort them internally, then write the resulting run back to some tape. The size of each run is the same as the capacity of the internal memory.</p> <p>Replacement Selection sorting algorithm was described in 1965 by Donald Knuth. Notice that as soon as the first record is written to an output tape, the memory it used becomes available for another record. Assume that we are sorting in ascending order, if the next record is not smaller than the record we have just output, then it can be included in the run.</p> <p>For example, suppose that we have a set of input { 81, 94, 11, 96, 12, 99, 35 }, and our memory can sort 3 records only. By the simplest method we will obtain three runs: { 11, 81, 94 }, { 12, 96, 99 } and { 35 }. According to the replacement selection algorithm, we would read and sort the first 3 records { 81, 94, 11 } and output 11 as the smallest one. Then one space is available so 96 is read in and will join the first run since it is larger than 11. Now we have { 81, 94, 96 }. After 81 is out, 12 comes in but it must belong to the next run since it is smaller than 81. Hence we have { 94, 96, 12 } where 12 will stay since it belongs to the next run. When 94 is out and 99 is in, since 99 is larger than 94, it must belong to the first run. Eventually we will obtain two runs: the first one contains { 11, 81, 94, 96, 99 } and the second one contains { 12, 35 }.</p> <p>Your job is to implement this replacement selection algorithm.</p> <p>\u5229\u7528\u66ff\u6362\u9009\u62e9\u7b56\u7565\u4ee5\u540e\uff0c\u6bcf\u4e00\u6b21\u751f\u6210\u7684 run \u4e00\u5b9a\u4e0d\u5c0f\u4e8e \\(M\\)\uff08\u672b\u7aef\u4f59\u6570\u9664\u5916\uff09\uff0c\u4e8e\u662f\u76f8\u5bf9\u6765\u8bf4 \\(\\#pass\\) \u5c31\u4f1a\u51cf\u5c11\u3002</p>"},{"location":"ZJU_CS/ADS/week15/#tape","title":"tape \u6570\u91cf\u5206\u6790\u4e0e\u4f18\u5316","text":"<p>\u5982\u679c\u4f7f\u7528#\u6734\u7d20\u8fc7\u7a0b\u5206\u6790\u4e2d\u7684\u65b9\u6cd5\uff0c\u90a3\u4e48\u6211\u4eec\u4f7f\u7528 \\(k\\)-way merge \u81f3\u5c11\u9700\u8981 \\(2k\\) \u4e2a tape\u3002</p> <p>\u8fd9\u5176\u5b9e\u5f88\u597d\u7406\u89e3\uff0c\u6211\u4eec\u6bcf\u4e00\u4e2a pass \u9700\u8981 \\(k\\) \u4e2a tape \u6765\u5b58\u653e\u6bcf\u4e00\u8def\u7684\u5e8f\u5217\uff0c\u800c\u5176\u7ed3\u679c\u8981\u5e73\u5206\u653e\u590d\u5236\u5230\u4e0b\u4e00\u4e2a pass \u6240\u9700\u8981\u7684 \\(k\\) \u4e2a pass \u4e2d\uff0c\u6240\u4ee5\u81f3\u5c11\u9700\u8981 \\(2k\\) \u4e2a tape \u8f6e\u6362\u7740\u6765\u5b58\u50a8\u6570\u636e\u3002</p> <p>\u800c\u8fd9\u4e0d\u5229\u4e8e\u6211\u4eec\u901a\u8fc7\u589e\u52a0 \\(k\\) \u6765\u51cf\u5c11 \\(\\#pass\\)\uff0c\u56e0\u6b64\u6211\u4eec\u8003\u8651\u67d0\u79cd\u7b56\u7565\u6765\u4f18\u5316 tape \u7684\u4f7f\u7528\u3002</p> <p>\u5728#\u6734\u7d20\u8fc7\u7a0b\u5206\u6790\u4e2d\u6211\u591a\u6b21\u6697\u793a\uff0c\u4e4b\u540e\u4f1a\u5bf9\u300c\u5c06\u5f52\u5e76\u540e\u7684 run \u5e73\u5206\u5230\u5404 tape\u300d\u8fd9\u4ef6\u4e8b\u505a\u4f18\u5316\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u8003\u8651\uff0c\u4e0d\u5e73\u5747\u7684\u5c06\u5f52\u5e76\u540e\u7684 run \u5206\u914d\u5230\u5404\u4e2a tape \u4e0a\uff0c\u5373\u603b\u6709\u4e00\u4e9b tape \u6bd4\u522b\u7684 tape \u591a\u4e00\u4e9b run\u3002\u867d\u7136\u5728\u5e73\u5206\u7684\u7b56\u7565\u4e2d\uff0c\u4e5f\u6709\u53ef\u80fd\u4f1a\u6709\u591a\u51fa\u6765\u7684 run\uff0c\u4f46\u662f\u53ea\u4f1a\u591a\u4e00\u4e2a\uff08\u4e5f\u5c31\u662f\u5c06 \\(x \\mod k\\) \u7684\u4f59\u6570\u5206\u914d\u5230\u5176\u4e2d\u51e0\u4e2a tape \u4e0a\uff09\u3002\u6b64\u65f6\u8fd9\u4e9b\u591a\u51fa\u6765\u7684 run \u53ef\u80fd\u5c31\u662f\u5355\u7eaf\u7684\u4ece\u4e00\u4e2a tape \u522b\u590d\u5236\u5230\u53e6\u5916\u4e00\u4e2a tape \u4e0a\uff0c\u770b\u8d77\u6765\u662f\u4e2a\u975e\u5e38\u6ca1\u5fc5\u8981\u7684\u64cd\u4f5c\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u76f4\u63a5\u7559\u4e0b\u5b83\uff0c\u5c06\u5f53\u524d tape \u62ff\u5230\u4e0b\u4e00\u8f6e\u7528\u5462\uff1f</p> <p>\u4f46\u662f\u7531\u4e8e\u5e73\u5206\u7b56\u7565\u4e0b\uff0c\u8fd9\u4e2a\u60c5\u51b5\u7684\u51fa\u73b0\u5e76\u4e0d\u53ef\u63a7\uff0c\u800c\u4e14\u603b\u662f\u4f1a\u5f15\u8d77\u60ac\u6b8a\u7684 tape \u95f4\u7684\u6570\u91cf\u5dee\uff0c\u6240\u4ee5\u6211\u4eec\u8003\u8651\u80fd\u4e0d\u80fd\u4e3b\u52a8\u5229\u7528\u8fd9\u4e2a\u6027\u8d28\u3002</p> <p>\u5b9e\u5728\u60f3\u4e0d\u5230\u600e\u4e48\u8fc7\u5ea6\u4e86\uff0c\u800c\u4e14\u6025\u6025\u6025\uff0c\u6240\u4ee5\u76f4\u63a5\u4e0a\u7ed3\u8bba\u3002</p> <p>\u6211\u4eec\u6309\u7167 Fibonacci \u6570\u5217\u7684\u9879\u6765\u5206\u914d\u6bcf\u4e2a tape \u7684 \\(\\#run\\)\uff0c\u6b64\u65f6\u6bcf\u4e00\u4e2a pass \u53ea\u9700\u8981\u4e00\u4e2a\u6709\u4e00\u4e2a\u7a7a\u95f2\u7684 tape \u5373\u53ef\u3002</p> <p>example</p> \\[ \\text{Fibonacci}: {1,1,2,3,5,8,13,21,...} \\] <p>\u5047\u8bbe\u6211\u4eec\u73b0\u5728\u6709\u4e24\u4e2a tape\uff0c\u5206\u522b\u6709 23 \u4e2a run \u548c 13 \u4e2a run\uff0c\u5219\uff1a</p> \\(T_1\\) \\(T_2\\) \\(T_3\\) \u8bf4\u660e 21 13 - \u521d\u59cb\u60c5\u51b5 8 - 13 \\(T_1\\) \u7684\u524d 13 \u4e2a\u4e0e \\(T_2\\) \u5f52\u5e76\uff0c\u7ed3\u679c\u5199\u5165 \\(T_3\\) - 8 5 \\(T_3\\) \u7684\u524d 8 \u4e2a\u4e0e \\(T_1\\) \u5f52\u5e76\uff0c\u7ed3\u679c\u5199\u5165 \\(T_2\\) 5 3 - \u7565 2 - 3 \u7565 - 2 1 \u7565 1 1 - \u7565 0 - 1 \u7565 <p>\u4f7f\u7528 Fibonacci \u6211\u4eec\u603b\u53ef\u4ee5\u6eda\u52a8\u7740\u5c06 \\(\\#run\\) \u7684\u89c4\u6a21\u7f29\u5c0f\u3002</p> k-way merge with k-order Fibonacci Sequence <p>\u5bf9\u4e8e \\(k\\)-way merge\uff0c\u6211\u4eec\u53ea\u9700\u8981\u6784\u9020 k \u9636 Fibonacci \u6570\u5217\uff0c\u7136\u540e\u6309\u7167\u8fd9\u4e2a\u6570\u5217\u6765\u5206\u914d\u6bcf\u4e2a tape \u7684 \\(\\#run\\) \u5373\u53ef\u3002</p> <p>k-order Fibonacci Sequence</p> <p>\u7ed9\u51fa k \u9636 Fibonacci \u6570\u5217\uff08\u4e0e PPT \u7565\u6709\u4e0d\u540c\uff0c\u4e3b\u8981\u4f53\u73b0\u5728\u4e0b\u6807\u4ece\u8c01\u5f00\u59cb\uff0c\u65e0\u4f24\u5927\u96c5\uff09\uff1a</p> \\[ \\left\\{ \\begin{aligned}     F^k_1 &amp;= 1 \\\\     F^k_2 &amp;= 1 \\\\     &amp; \\vdots\\\\     F^k_n &amp;= F^k_{n-1} + F^k_{n-2} + \\cdots + F^k_{n-k} \\quad (n &gt; k) \\end{aligned} \\right. \\] <p>\u8fd9\u4e2a\u7ed3\u8bba\u770b\u8d77\u6765\u5f88\u81ea\u7136\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u662f\u600e\u4e48\u64cd\u4f5c\u7684\u5462\uff1fPPT \u538b\u6839\u6ca1\u8bb2\uff0c\u56e0\u6b64\uff0c\u6211\u5728\u8be2\u95ee ch \u8001\u5e08\u4ee5\u540e\uff0c\u5199\u4e0b\u4e86\u8fd9\u4e2a\u90e8\u5206\uff0c\u65e8\u5728\u8865\u5145 \\(k\\)-way merge \u4f7f\u7528 k \u9636 Fibonacci \u4f18\u5316\u7684\u65b9\u6cd5\u3002</p> <p>\u9996\u5148\uff0c\u505a\u4e00\u4e9b\u5f3a\u8c03\uff1a</p> <ol> <li>\u8be5\u65b9\u6cd5\u9648\u8ff0\u8fc7\u7a0b\u4e2d\uff0ck \u8def\u59cb\u7ec8\u76f4\u63a5\u5408\u5e76\u6210\u4e00\u8def\uff08\u5343\u4e07\u4e0d\u8981\u7528\u201citerative\u201d\u7684\u601d\u8def\u6765\u8003\u8651\uff0c\u5c31\u7b97 iterative\uff0c\u8fed\u4ee3\u5b8c\u4e86\u4e5f\u8fd8\u662f k \u8def\u5f52\u4e3a 1 \u8def\uff09\uff1b</li> <li>\u6211\u4eec\u7684\u76ee\u7684\u662f\u4f18\u5316\u6bcf\u4e00\u4e2a pass \u4e2d\u6bcf\u4e2a tape \u7684 \\(\\#run\\) \u4e0d\u4e00\u6837\u5e26\u6765\u7684\u6027\u80fd\u95ee\u9898\uff08\u4f8b\u5982\u5c34\u5c2c\u7684 \\(n\\) \u548c \\(n+1\\) \u5f52\uff0c\u4e0b\u4e00\u4e2a pass \u5c31\u5f97 \\(1\\) \u548c  \\(n\\) \u5f52\u4e86\uff09\uff1b</li> </ol> <p>\u5bf9\u4e8e\u7b2c \\(i\\) \u4e2a pass\uff0c\u6709 \\(k\\) \u4e2a tape\uff0c\u6211\u4eec\u8bb0\u6bcf\u4e00\u4e2a tape \u7684 \\(\\#run\\) \u4e3a \\(r_i\\)\uff0c\u5219\u6709\uff1a</p> <ul> <li>\\(\\max\\{r_i\\} = F^k_j\\);</li> <li>\\(\\min\\{r_i\\} = F^k_{j-1}\\);</li> </ul> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u6bcf\u4e2a pass \u6700\u5927\u548c\u6700\u5c0f\u7684 \\(\\#run\\) \u5206\u522b\u6709 k \u9636 Fibonacci \u4e2d\u76f8\u90bb\u7684\u4e24\u9879\u3002</p> <p>\u8fd9\u91cc\u5206\u5f00\u7528 i \u548c j \u662f\u60f3\u8868\u8fbe\u8fd9\u4e2a\u5339\u914d\u5173\u7cfb\u4e0d\u91cd\u8981\uff0c\u91cd\u8981\u7684\u662f\u6700\u5927\u503c\u6700\u5c0f\u503c\u7531 Fibonacci \u76f8\u90bb\u9879\u6240\u786e\u5b9a\u3002</p> <p>\u90a3\u4e48\u5939\u5728\u6700\u5927\u548c\u6700\u5c0f\u7684\u4e2d\u95f4\u7684\u5176\u4ed6 \\(\\#run\\) \u8981\u5982\u4f55\u786e\u5b9a\u5462\uff1f\u9996\u5148\u6211\u4eec\u8fdb\u884c\u4e00\u6bb5\u63a8\u5bfc\uff1a</p> <p>\u5047\u8bbe \\(\\{r_i\\}\\) \u7ecf\u8fc7\u6392\u5e8f\uff0c\u5e76\u4e14\u521a\u597d\u80fd\u51d1\u4e0a\u6211\u4eec\u6240\u9700\u8981\u7684\u6570\u91cf\uff0c\u6709\uff1a</p> \\[ r_k &gt; r_{k-1} &gt; ... &gt; r_{2} &gt; r_{1} \\text{where } r_k = F^k_j \\text{ and } r_1 = F^k_{j-1} \\] <p>\u5728\u8fd9\u4e00\u4e2a pass \u4e2d\uff0c\u6211\u4eec\u5c06\u6240\u6709 tape \u7684\u524d \\(r1\\) \u4e2a run \u62ff\u51fa\u6765 merge\uff0c\u8fd9\u6837\uff0c\u9664\u4e86 \\(r_1\\) \u8fd9\u4e2a tape\uff0c\u5176\u4ed6 tape \u7684 \\(\\#run\\) \u90fd\u53d8\u4e3a \\(r_i-r_1\\)\u3002\u6b64\u65f6\u6709\u4e0d\u7b49\u5173\u7cfb\uff1a</p> \\[ r_1 &gt; r_k - r_1 &gt; r_{k-1} - r_1 &gt; ... &gt; r_{2} - r_1 \\] <p>\u8fd9\u91cc\u552f\u4e00\u9700\u8981\u8bf4\u660e\u7684\u5c31\u662f \\(r_1 &gt; r_k - r_1\\)\uff1a</p> proof of the relation \\[ \\begin{aligned}     &amp;\\begin{aligned}         \\because r_1          &amp;= F^k_{j-1} \\\\         &amp;= F^k_{j-2} + \\cdots + F^k_{j-k} + F^k_{j-k-1}     \\end{aligned}  &amp; (1)\\\\     &amp;\\begin{aligned}         \\text{and } r_k         &amp;= F^k_{j} \\\\         &amp;= F^k_{j-1} + F^k_{j-2} + \\cdots + F^k_{j-k}     \\end{aligned}  &amp; (2)\\\\     &amp;\\begin{aligned}         \\therefore r_k - r_1          &amp;= F^k_{j} - F^k_{j-1} \\quad \\text{ i.e. } (2) - (1)\\\\         &amp;= F^k_{j-2} + \\cdots + F^k_{j-k}     \\end{aligned}  &amp; (3)\\\\     &amp;\\begin{aligned}         \\therefore r_1 - (r_k - r_1)         &amp;= F^k_{j-k-1} &gt; 0 \\quad \\text{ i.e. } (1) - (3) \\\\     \\end{aligned} \\\\     &amp;\\begin{aligned}     \\therefore r_1 &gt; r_k - r_1     \\end{aligned} \\\\   \\end{aligned} \\] <p>\u5982\u679c\u6211\u4eec\u5c06\u73b0\u5728\u8fd9\u4e2a\u6392\u5e8f\u540e\u7684\u6570\u5217\u8bb0\u4e3a \\(\\{r_i'\\}\\)\uff0c\u5219\u6709\uff1a</p> \\[ \\left\\{ \\begin{aligned}     r_1' &amp;= r_2 - r_1 \\\\     r_2' &amp;= r_3 - r_1 \\\\     \\vdots \\\\     r_{k-1}' &amp;= r_k - r_1 \\\\     r_k' &amp;= r_1 \\end{aligned} \\right. \\] <p>\u6b64\u65f6\u6839\u636e\u6211\u4eec\u5173\u4e8e\u6700\u5927\u6700\u5c0f\u503c\u7684\u9648\u8ff0\uff0c\u53c8\u6709\uff1a</p> \\[ \\left\\{ \\begin{aligned}     r_1' &amp;= F^k_{j-2} \\\\     r_k' &amp;= F^k_{j-1} \\end{aligned} \\right. \\] <p>\u4e8e\u662f\u53ef\u4ee5\u63a8\u5f97\uff1a\\(r_2 = r_1 + F^k_{j-2} = F^k_{j-1} + F^k_{j-2}\\)\u3002\u5173\u4e8e \\(r_3, r_4\\)\uff0c\u4e5f\u662f\u4e00\u6837\u7684\u529e\u6cd5\uff0c\u5c06 \\(r_2\\) \u7684\u7ed3\u8bba\u8fc1\u79fb\u5230 \\(r_2'\\)\uff0c\u518d\u56de\u8fc7\u5934\u5f97\u5230 \\(r_3 = r_1 + r_2'= F^k_{j-1} + F^k_{j-2} + F^k_{j-3}\\)\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff0c\u53ef\u4ee5\u5f97\u5230\u6700\u7ec8\u7ed3\u8bba\uff1a</p> \\[ \\left\\{ \\begin{aligned}     r_1 &amp;= F^k_{j-1} \\\\     r_2 &amp;= F^k_{j-1} + F^k_{j-2} \\\\     r_3 &amp;= F^k_{j-1} + F^k_{j-2} + F^k_{j-3} \\\\     \\vdots \\\\     r_k &amp;= F^k_{j-1} + F^k_{j-2} + ... + F^k_{j-k} = F^k_{j} \\end{aligned} \\right. \\] <p>\u601d\u8003\u9898</p> <p>\u53ef\u4ee5\u611f\u53d7\u601d\u8003\u4e00\u4e0b\u8fd9\u4e2a\u7279\u6027\uff08\u8003\u8651 2-way \u5373\u53ef\uff09\u4e0e\u9ec4\u91d1\u6bd4\u4f8b\u7684\u5173\u7cfb\uff01</p> <p>hint: \u5982\u4f55\u7406\u89e3 \\(\\frac{a_n}{a_{n-1}} \\approx \\frac{a_{n-1}}{a_n - a_{n-1}}\\) \u4e0e\u8fd9\u4e2a\u6027\u8d28\u7684\u5173\u7cfb\uff1f</p> <p>\u5f53\u7136\uff0c\u521a\u597d\u80fd\u51d1\u4e0a Fibonacci \u7684\u60c5\u51b5\u81ea\u7136\u662f\u5c11\u6570\uff0c\u5bf9\u4e8e\u65e0\u6cd5\u51d1\u4e0a Fibonacci \u7684\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u591a\u4f59\u7684\u90e8\u5206\u5747\u5300\u7684\u5206\u5230\u8f83\u591a\u82e5\u5e72 tape \u4e0a\uff0c\u4ee5\u76f8\u5bf9\u7684\u5229\u7528 Fibonacci \u6570\u5217\u7684\u6027\u8d28\uff08\u8054\u7cfb\u601d\u8003\u9898\u7406\u89e3\uff09\u3002</p> <p>\u6ce8\u610f</p> <p>\u6216\u8bb8\u4f60\u5df2\u7ecf\u5f00\u59cb\u4ea7\u751f\u7591\u95ee\u4e86\uff0c\u5982\u679c\u8fd9\u6837\u6765\u505a\uff0c\u524d\u9762\u5bf9 \\(\\#pass\\) \u7684\u5206\u6790\u662f\u4e0d\u662f\u4e0d\u6210\u7acb\u4e86\u5462\uff1f</p> <p>\u6211\u60f3\u5e94\u8be5\u786e\u5b9e\u4e0d\u518d\u5b8c\u5168\u4e00\u6837\u4e86\uff0c\u4f46\u662f\u5e76\u4e0d\u5f71\u54cd\u6211\u4eec\u4e4b\u540e\u5229\u7528\u90a3\u4e2a\u7ed3\u8bba\u505a\u5b9a\u6027\u5206\u6790\uff0c\u6211\u4eec\u53ea\u9700\u8981\u77e5\u9053\uff0c\u91c7\u53d6 Fibonacci \u7b56\u7565\u6765\u4f18\u5316\u4f1a\u5bfc\u81f4 \\(\\#pass\\) \u589e\u591a\u5373\u53ef\u3002</p>"},{"location":"ZJU_CS/ADS/week15/#k","title":"k \u8def\u5185\u6392\u5e8f\u4f18\u5316","text":"<p>\u968f\u7740 \\(k\\) \u7684\u589e\u52a0\uff0c\u6211\u4eec\u4e0d\u80fd\u518d\u50cf\u4e24\u8def\u5f52\u5e76\u90a3\u6837\u76f4\u63a5\u8f93\u51fa\u8f83\u5c0f\u7684\u90a3\u4e2a\uff0c\u800c\u662f\u9700\u8981\u7ef4\u62a4\u6570\u636e\u7ed3\u6784\u6765\u603b\u662f\u8f93\u51fa k \u4e2a\u4e2d\u6700\u5c0f\u7684\u90a3\u4e2a\u2014\u2014\u6211\u4eec\u7528\u5806\u6765\u7ef4\u62a4\u6bcf\u4e00\u4e2a run \u5728\u5185\u5b58\u4e2d\u7684\u6570\u636e\u7684\u961f\u9996\u5143\u7d20\uff08\u540c\u65f6\u4e5f\u662f\u6700\u5c0f\u5143\u7d20\uff09\uff0c\u6bcf\u5f53\u5806\u9876\u5143\u7d20\u88ab\u8f93\u51fa\uff0c\u5c31\u9700\u8981\u4ece\u5bf9\u5e94\u7684 run \u4e2d\u8bfb\u5165\u4e0b\u4e00\u4e2a\u5143\u7d20\u3002</p> <p>\u6ce8\u610f</p> <p>\u9700\u8981\u6ce8\u610f\uff0c\u8fd9\u91cc\u7684\u5806\u662f\u989d\u5916\u7ef4\u62a4\u7684\uff0c\u800c\u6bcf\u6b21\u63a8\u5165\u5806\u4e2d\u7684\u5143\u7d20\u90fd\u662f\u4ece\u5bf9\u5e94\u7684 run \u7684 buffer \u4e2d\u62ff\u7684\uff0c\u800c\u4e0d\u662f\u6bcf\u6b21\u90fd\u4ece\u786c\u76d8\u4e2d\u62ff\u3002</p>"},{"location":"ZJU_CS/ADS/week15/#_8","title":"\u970d\u592b\u66fc\u6811\u4f18\u5316","text":"<p>\u5f53\u7136\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u4e0d\u4f7f\u7528\u76f4\u63a5 \\(k\\) \u8def\u5408\u5e76\uff0c\u800c\u662f\u91c7\u7528\u4e24\u4e24\u5f52\u5e76\u7684\u65b9\u6cd5\uff0c\u4e5f\u5c31\u662f wiki \u4e2d\u63d0\u5230\u7684\u8fed\u4ee3\u5f52\u5e76\uff08\u6ce8\u610f\uff0c\u8be5\u6761\u76ee\u4e2d\u63d0\u5230\u7684\u5f52\u5e76\u5e76\u6ca1\u6709\u8bf4\u660e\u662f\u5916\u6392\u5e8f\u80cc\u666f\uff0c\u4f46\u662f\u53ef\u4ee5\u8fc1\u79fb\uff09\u3002 </p> <p>\u5047\u8bbe\u6211\u4eec\u73b0\u5728\u6709\u82e5\u5e72\u4e2a run\uff0c\u5e76\u4e14\u6211\u4eec\u5c06\u8981\u8fdb\u884c\u4e24\u4e24\u5f52\u5e76\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u6bcf\u4e00\u4e2a run \u7684\u5927\u5c0f\uff0c\u6839\u636e\u970d\u592b\u66fc\u6811\u7684\u89c4\u5f8b\u6765\u8fdb\u884c\u5f52\u5e76\uff0c\u5373\u603b\u662f\u9009\u6700\u5c0f\u7684\u4e24\u4e2a\u8fdb\u884c\u5f52\u5e76\u3002</p>"},{"location":"ZJU_CS/ADS/week15/#_9","title":"\u5e76\u884c\u4f18\u5316","text":"<p>\u8fd9\u91cc\u5e76\u884c\u7684\u76ee\u6807\u4e3b\u8981\u662f\u4f7f\u7b97\u6cd5\u652f\u6301\u6570\u636e\u7684\u8bfb-\u7528-\u5199\u7684\u6d41\u6c34\u7ebf\uff0c\u4e5f\u5c31\u662f\u8bf4\u6211\u4eec\u8981\u60f3\u529e\u6cd5\u8ba9\u8bfb\u4e0d\u963b\u585e\u7528\uff0c\u7528\u4e0d\u963b\u585e\u5199\u3002</p> <p>\u5148\u524d\u6211\u4eec\u9700\u8981\u5148\u8bfb\u5165\u6570\u636e\uff0c\u7136\u540e\u8fdb\u884c\u6392\u5e8f\uff0c\u6392\u5e8f\u5b8c\u4e86\u518d\u5199\u5165\u78c1\u76d8\uff0c\u817e\u51fa\u5185\u5b58\u7a7a\u95f4\u4ee5\u4f9b\u4e0b\u4e00\u6b21\u8bfb\u5165\u3002\u90a3\u4e3a\u4ec0\u4e48\u4f1a\u963b\u585e\u5462\uff1f\u56e0\u4e3a\u6211\u4eec\u6ca1\u6cd5\u8bfb\u4e00\u4e2a\u6b63\u5728\u5199\u7684\u6570\u636e\u5757\uff0c\u6240\u4ee5\u6211\u4eec\u53ea\u9700\u8981\u5728\u4e0d\u540c\u7684\u6570\u636e\u5757\u8bfb\u548c\u5199\u5c31\u884c\u4e86\u3002\u5bf9\u4e8e \\(k\\)-way \u4e2d\u7684\u6bcf\u4e00\u8def\uff0c\u6211\u4eec\u90fd\u63d0\u4f9b\u4e24\u4e2a input buffer\uff0c\u4e00\u4e2a\u7528\u4e8e\u5199\uff0c\u4e00\u4e2a\u7528\u4e8e\u6392\u5e8f\u3002\u5f53\u6392\u5e8f buffer \u7a7a\u4e86\u7684\u65f6\u5019\uff0c\u5c31\u548c\u8bfb\u6ee1\u4e86\u7684 input buffer \u4ea4\u6362\uff0c\u65e0\u7f1d\u8854\u63a5\u7ee7\u7eed\u8f93\u51fa\u3002\u4e8e\u6b64\u540c\u65f6\uff0c\u521a\u521a\u88ab\u4ea4\u6362\u8fc7\u53bb\u7684 buffer \u5219\u53ef\u7528\u4e8e\u7ee7\u7eed\u8bfb\u5165\u3002</p> <p>\u56e0\u6b64\uff0c\u5982\u679c\u6211\u4eec\u6267\u884c direct \\(k\\)-way merge\uff0c\u5c31\u9700\u8981 \\(2k\\) \u4e2a input buffer\uff08\u8fd9\u91cc\u5f3a\u8c03 direct \u662f\u56e0\u4e3a\uff0c\u5982\u679c\u4f7f\u7528 iterative \u7684\u8bdd\uff0cinput buffer \u53ea\u9700\u8981 4 \u4e2a\uff09\u3002</p> <p>\u800c\u5bf9\u4e8e\u8f93\u51fa\uff0c\u6211\u4eec\u53ea\u9700\u8981 2 \u4e2a output buffer \u4ea4\u66ff\u4f7f\u7528\u5373\u53ef\uff0c\u4e00\u4e2a\u7528\u6765\u63a5\u6536\u6765\u81ea\u6392\u5e8f\u7b97\u6cd5\u7684\u8f93\u51fa\uff0c\u4e00\u4e2a\u7528\u6765\u5c06\u6570\u636e\u5199\u5165\u78c1\u76d8\u3002</p> <p>\u4f46\u662f\uff0c\u5e76\u884c\u4f18\u5316\u7684\u7f3a\u70b9\u5c31\u662f\u5360\u636e\u4e86\u66f4\u591a\u7684\u5185\u5b58\u7a7a\u95f4\u2014\u2014\u539f\u5148 \\(k + 1\\) \u4e2a buffer \u5e73\u5206\u7684\u7528\u4e8e\u5904\u7406\u6570\u636e\u7684\u5185\u5b58\uff0c\u73b0\u5728\u9700\u8981\u88ab \\(2k + 2\\) \u4e2a buffer \u5e73\u5206\uff0c\u6240\u4ee5\u6bcf\u4e00\u4e2a buffer \u7684\u5927\u5c0f\u4f1a\u53d8\u5c0f\u3002\u8fdb\u800c\u5bfc\u81f4\u6bcf\u4e00\u6b21\u4ece disk \u4e2d\u8bfb\u53d6\u7684\u6570\u636e\u53d8\u5c11\uff0c\u6240\u4ee5\u8981\u8bfb\u5b8c\u6570\u636e\u6240\u9700\u8981\u7684\u8bfb\u53d6\u6b21\u6570\u5c31\u589e\u52a0\uff0c\u5373 seek \u6b21\u6570\u589e\u52a0\u3002</p>"},{"location":"ZJU_CS/ADS/week2/","title":"Lecture 2 | Red Black Tree &amp; B+ Tree","text":"<p>\u8bf4\u660e</p> <p>\u800c\u4e3a\u4e86\u63d0\u9ad8\u7b14\u8bb0\u6574\u7406\u6548\u7387\uff0c\u53ef\u80fd\u4f1a\u8003\u8651\u7528\u66f4\u591a\u7684\u5f15\u7528\u548c\u66f4\u7b80\u5355\u7684\u8bed\u8a00\u3002\u5982\u679c\u60a8\u89c9\u5f97\u6709\u54ea\u91cc\u8bf4\u7684\u4e0d\u591f\u6e05\u695a\uff0c\u8bf7\u76f4\u63a5\u5728\u8bc4\u8bba\u533a\u72e0\u72e0 blame \u6211\uff01</p>"},{"location":"ZJU_CS/ADS/week2/#_1","title":"\u7ea2\u9ed1\u6811","text":"<p>link</p> <p>OI Wiki: https://oi-wiki.org/ds/rbtree/</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Red%E2%80%93black_tree</p> <p>Linux\u6e90\u7801\uff1ahttps://elixir.bootlin.com/linux/latest/source/lib/rbtree.c</p>"},{"location":"ZJU_CS/ADS/week2/#_2","title":"\u6982\u5ff5","text":"<p>\u987e\u540d\u601d\u4e49\uff0c\u7ea2\u9ed1\u6811(Red Black Tree)\u5c31\u662f\u4e00\u79cd\u8282\u70b9\u5206\u7c7b\u4e3a\u7ea2\u9ed1\u4e24\u8272\u7684\uff0c\u6bd4\u8f83\u5e73\u8861\u7684\u4e8c\u53c9\u641c\u7d22\u6811\u3002\u53ea\u4e0d\u8fc7\u4e0d\u540c\u4e8e AVL \u6811\uff0c\u7ea2\u9ed1\u6811\u7684\u201c\u5e73\u8861\u201d\u6027\u8d28\u662f\u901a\u8fc7\u9ed1\u9ad8(black height)\u6765\u5b9a\u4e49\u7684\u3002\u63a5\u4e0b\u6765\u4f9d\u6b21\u7ed9\u51fa\u7ea2\u9ed1\u6811\u7684\u5b9a\u4e49\u548c\u9ed1\u9ad8\u7684\u5b9a\u4e49\u3002</p> <p>Red Black Tree</p> <p> </p> <p>\u7ea2\u9ed1\u6811\u662f\u6ee1\u8db3\u5982\u4e0b\u6027\u8d28\u7684\u4e00\u79cd\u4e8c\u53c9\u641c\u7d22\u6811\uff1a</p> <p>Properties of RBTree</p> <p>\\@cy's PPT</p> <ol> <li>Every node is either red or black.</li> <li>The root is black.</li> <li>Every leaf (<code>NIL</code>) is black.</li> <li>if a node is red, then both its children are black.</li> <li>For each node, all simple paths from the node to descendant leaves contain the same number of black nodes.</li> </ol> <p>ch \u8001\u5e08\u8bf4\uff0c\u5e0c\u671b\u6211\u4eec\u80fd\u628a\u8fd9\u4e94\u6761\u6027\u8d28\u719f\u7ec3\u8bb0\u4f4f\uff0c\u600e\u4e48\u53ef\u80fd\uff08\u9003\uff09\u3002</p> <p>\u8bf4\u660e</p> <p>\u7531\u4e8e\u8fd9\u91cc\u7684\u201c\u53f6\u5b50\u7ed3\u70b9\u201d\u88ab\u91cd\u65b0\u5b9a\u4e49\u4e86\uff0c\u4e3a\u4e86\u63cf\u8ff0\u65b9\u4fbf\uff0c\u6211\u73b0\u5728\u79f0\u6240\u6709\u4e24\u4e2a\u5b50\u7ed3\u70b9\u90fd\u662f <code>NIL</code> \u7684\u7ed3\u70b9\u4e3a\u672b\u7aef\u7ed3\u70b9\uff08\u4e5f\u5c31\u662f\u901a\u4fd7\u610f\u4e49\u4e0a\u7684\u53f6\u5b50\u7ed3\u70b9\uff09\u3002\u800c\u8fd9\u4e2a\u5b9a\u4e49\u53ea\u662f\u6211\u81ea\u5df1\u8bf4\u8bf4\u7684\uff01</p> \\@Wiki <ol> <li>Every node is either red or black.</li> <li>All <code>NIL</code> nodes (figure above) are considered black.</li> <li>A red node does not have a red child.</li> <li>Every path from a given node to any of its descendant <code>NIL</code> nodes goes through the same number of black nodes.</li> </ol> \\@OI Wiki <ol> <li>\u6bcf\u4e00\u4e2a\u8282\u70b9\u8981\u4e48\u662f\u7ea2\u8272\uff0c\u8981\u4e48\u662f\u9ed1\u8272\uff1b</li> <li><code>NIL</code> \u8282\u70b9\uff08\u7a7a\u53f6\u5b50\u8282\u70b9\uff09\u4e3a\u9ed1\u8272\uff1b</li> <li>\u7ea2\u8272\u8282\u70b9\u7684\u5b50\u8282\u70b9\u5fc5\u987b\u4e3a\u9ed1\u8272\uff1b</li> <li>\u4ece\u6839\u8282\u70b9\u5230 <code>NIL</code> \u8282\u70b9\u7684\u6bcf\u6761\u8def\u5f84\u4e0a\u7684\u9ed1\u8272\u8282\u70b9\u6570\u91cf\u76f8\u540c\uff1b</li> </ol> <p>black height, bh</p> <p>\u7279\u5b9a\u8282\u70b9\u7684\u9ed1\u9ad8\uff0c\u7b49\u4e8e\u8be5\u8282\u70b9\u5230\u53f6\u7ed3\u70b9\u5230\u7b80\u5355\u8def\u5f84\u4e2d\uff08\u4e0d\u5305\u62ec\u81ea\u8eab\uff09\uff0c\u9ed1\u8272\u8282\u70b9\u7684\u6570\u91cf\u3002</p> <p>\u63a5\u4e0b\u6765\u4e3a\u4e86\u52a0\u6df1\u7406\u89e3\uff0c\u6709\u4e00\u4e9b\u8fa8\u6790\u53ef\u4ee5\u505a\uff1a</p> T1T2 \u9898\u9762\u7b54\u6848 <p>\u4e0b\u56fe\u7684\u7ea2\u9ed1\u6811\u662f\u5426\u5408\u6cd5\uff1f</p> <p></p> <p>\u4e0d\u5408\u6cd5\u3002</p> <p><code>16</code> \u53f7\u8282\u70b9\u7684\u53f3\u513f\u5b50\u662f\u4e00\u4e2a\u9ed1\u53f6\u5b50\uff0c\u800c\u8fd9\u4e2a\u53f6\u5b50\u5230\u6839\u7684\u8def\u5f84\u4e0a\u53ea\u6709 3 \u4e2a\u9ed1\u8282\u70b9\uff0c\u800c\u5176\u4ed6\u53f6\u5b50\u5230\u6839\u90fd\u6709 4 \u4e2a\u9ed1\u8282\u70b9\u3002</p> <p>\u6240\u4ee5\u6211\u4eec\u9700\u8981\u8b66\u60d5\u53ea\u6709\u4e00\u4e2a\u975e\u53f6\u513f\u5b50\u7684\u7ea2\u8272\u8282\u70b9\u3002</p> \u9898\u9762\u7b54\u6848 <p>\u4e0b\u56fe\u7684\u7ea2\u9ed1\u6811\u662f\u5426\u5408\u6cd5\uff1f</p> <p></p> <p>\u5408\u6cd5\u3002</p> <p>\u6839\u636e T1 \u7684\u89e3\u6790\uff0c\u6211\u4eec\u5f97\u5230\u8fd9\u6837\u4e00\u4e2a\u7ed3\u8bba\uff1a</p> <p>\u5408\u6cd5\u7ea2\u9ed1\u6811\u4e0d\u5b58\u5728\u53ea\u6709\u4e00\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\u7684\u7ea2\u8272\u8282\u70b9\uff01</p> <p>or</p> <p>\u5408\u6cd5\u7ea2\u9ed1\u6811\u7684\u7ea2\u8272\u8282\u70b9\u7684\u4e24\u4e2a\u5b50\u8282\u70b9\u4e00\u5b9a\u90fd\u662f\u53f6\u5b50\u6216\u90fd\u4e0d\u662f\u53f6\u5b50\uff01</p> <p>\u6b64\u5916\uff0c\u5173\u4e8e\u7ea2\u9ed1\u6811\u7684\u9ad8\uff0c\u6211\u4eec\u6709\u5982\u4e0b\u6027\u8d28\uff1a</p> <p>property about height of RBTree</p> <p>\u4e00\u4e2a\u6709 \\(N\\) \u4e2a\u5185\u90e8\u8282\u70b9\uff08\u4e0d\u5305\u62ec\u53f6\u5b50\u7ed3\u70b9\uff09\u7684\u7ea2\u9ed1\u6811\uff0c\u5176\u9ad8\u5ea6\u6700\u5927\u4e3a \\(2\\log_2 (N+1)\\)\u3002</p> the proof of the property <p>\u5173\u4e8e\u9ed1\u9ad8\u548c\u70b9\u6570\u7684\u5173\u7cfb\u3002</p> <ol> <li>\u9996\u5148\u6211\u4eec\u6709 \\(N \\geq 2^{bh}-1\\)\uff0c\u4e5f\u5c31\u662f \\(bh \\leq \\log_2 (N+1)\\)\uff1b</li> <li>\u7136\u540e\u663e\u7136\u6709 \\(2 bh(Tree) &gt;= h(Tree)\\)</li> </ol>"},{"location":"ZJU_CS/ADS/week2/#_3","title":"\u64cd\u4f5c","text":"<p>\u63d0\u9192</p> <p>\u6211\u4eec\u8fd9\u91cc\u4ecb\u7ecd\u7684\u90fd\u662f bottom-up \u7684\u601d\u8def\uff0c\u4e0d\u540c\u4e8e AVL \u6811\uff0c\u7ea2\u9ed1\u6811\u662f\u5b58\u5728 top-down \u7684\u64cd\u4f5c\u65b9\u6cd5\u7684\uff0c\u800c\u8fd9\u4e5f\u662f\u7ea2\u9ed1\u6811\u4e00\u4e2a\u975e\u5e38\u5f3a\u5927\u7684\u4f18\u52bf\uff0c\u5b58\u5728 top-down \u7684\u5904\u7406\u65b9\u6cd5\u610f\u5473\u7740\u6211\u4eec\u53ef\u4ee5\u8fdb\u884c\u66f4\u5feb\u7684\u5e76\u884c\u64cd\u4f5c\u3002\u4f46\u662f\u6211\u4eec\u4e0d\u5728\u8fd9\u91cc\u8be6\u7ec6\u5c55\u5f00\u3002</p> <p>\u540c AVL \u6811\u7684\u8c03\u6574\u64cd\u4f5c\u7c7b\u4f3c\uff0c\u7ea2\u9ed1\u6811\u7684\u8c03\u6574\u64cd\u4f5c\u4e5f\u662f\u5de6\u53f3\u5bf9\u79f0\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u4e5f\u4ecd\u7136\u53ea\u8ba8\u8bba\u4e00\u4fa7\u3002</p>"},{"location":"ZJU_CS/ADS/week2/#_4","title":"\u63d2\u5165","text":"<p>\u6211\u4eec\u77e5\u9053\uff0c\u5bf9\u9ed1\u9ad8\u6709\u8d21\u732e\u7684\u53ea\u6709\u9ed1\u8272\u8282\u70b9\uff0c\u56e0\u6b64 <code>NIL</code> \u8282\u70b9\u88ab\u4e00\u4e2a\u7ea2\u8272\u8282\u70b9\u7f6e\u6362\u5e76\u4e0d\u4f1a\u6539\u53d8\u4e00\u9897\u7ea2\u9ed1\u6811\u7684\u9ed1\u9ad8\uff0c\u56e0\u4e3a\u7ea2\u8272\u8282\u70b9\u8fd8\u4f1a\u6709\u4e00\u5c42 <code>NIL</code> \u5b50\u8282\u70b9\uff1b\u7136\u800c\u5bf9\u4e8e\u7ea2\u8272\u8282\u70b9\uff0c\u5374\u6709\u7740\u7ea2\u8272\u7ed3\u70b9\u4e92\u4e0d\u76f8\u90bb\u7684\u9650\u5236\u3002</p> <p>\u56e0\u6b64\uff0c\u201c\u63d2\u5165\u201d\u64cd\u4f5c\u7684\u4e3b\u8981\u601d\u8def\u5c31\u662f\uff0c\u5148\u5c06\u6574\u4e2a\u7ea2\u9ed1\u6811\u5f53\u4f5c\u4e00\u4e2a\u666e\u901a\u7684\u4e8c\u53c9\u641c\u7d22\u6811\uff0c\u5c06\u76ee\u6807\u6570\u636e\u63d2\u5165\u5230\u6811\u7684\u672b\u7aef\uff08\u4e5f\u5c31\u662f\u7f6e\u6362\u4e00\u4e2a <code>NIL</code> \u8282\u70b9\uff09\uff0c\u5e76\u5c06\u5b83\u67d3\u4e3a\u7ea2\u8272\uff0c\u518d\u8c03\u6574\u4f7f\u4e4b\u5728\u4fdd\u8bc1\u9ed1\u9ad8\u4e0d\u53d8\u7684\u60c5\u51b5\u4e0b\uff0c\u6ee1\u8db3\u7ea2\u8272\u8282\u70b9\u4e0d\u80fd\u76f8\u90bb\u7684\u8981\u6c42\u3002</p> <p>\u73b0\u5728\uff0c\u6211\u4eec\u8bb0\u8fd9\u4e2a\u88ab\u63d2\u5165\u7684\u8282\u70b9\u4e3a <code>x</code>\uff0c\u4efb\u610f\u4e00\u4e2a\u8282\u70b9 <code>node</code> \u7684\u5bb6\u957f\u8282\u70b9\u4e3a <code>node.p</code>\uff0c\u5219\uff1a</p> <ol> <li>\u5982\u679c <code>x.p</code> \u662f\u9ed1\u8272\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u4e0d\u9700\u8981\u505a\u4efb\u4f55\u8c03\u6574\uff1b</li> <li>\u5982\u679c <code>x.p</code> \u662f\u7ea2\u8272\u7684\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u8fdb\u884c\u8c03\u6574\uff1b<ul> <li>\u6b64\u65f6\u56e0\u4e3a\u539f\u6765\u7684\u6811\u7b26\u5408\u7ea2\u9ed1\u6027\u8d28\uff0c<code>x.p.p</code> \u5fc5\u5b9a\u5b58\u5728\uff08\u7ea2 <code>x.p</code> \u4e0d\u80fd\u662f\u6839\uff09\u4e14\u5fc5\u5b9a\u662f\u9ed1\u8272\u7684\uff1b</li> </ul> </li> </ol> <p>\u6839\u636e\u8fd9\u4e9b\u8ba8\u8bba\uff0c\u6211\u4eec\u5c31\u80fd\u5217\u4e3e\u51fa\u6765\u4e00\u4e2a\u7ea2\u8272\u7684\u70b9\u88ab\u63d2\u5165\u540e\uff0c\u5728 <code>2.</code> \u7684\u60c5\u51b5\u4e0b\u6240\u6709\u7684\u521d\u59cb\u60c5\u51b5\uff0c\u5373\u4e0b\u9762\u7b2c\u4e00\u5f20\u56fe\u3002</p> <p></p> <p>\u7531\u4e8e\u7ea2\u9ed1\u6811\u7684\u64cd\u4f5c\u4e2d\uff0c\u6709\u4e00\u90e8\u5206\u9700\u8981\u8fdb\u884c\u9012\u5f52\u8f6c\u79fb\uff0c\u800c\u5176\u4e2d\u4e2d\u95f4\u6b65\u9aa4\u51fa\u73b0\u4e86\u5f88\u591a\u540c\u6784\u7684\u7ed3\u6784\uff0c\u6240\u4ee5\u4e3a\u4e86\u7b80\u5316\u8bf4\u660e\uff0c\u6211\u4eec\u5bf9\u5176\u8fdb\u884c\u7edf\u4e00\uff0c\u6240\u6709\u60c5\u51b5\u90fd\u88ab\u5f52\u7eb3\u4e3a\u4e0a\u9762\u7b2c\u4e8c\u5f20\u56fe\u3002</p> <p>\u800c\u7b2c\u4e8c\u5f20\u56fe\u4e2d\u63d0\u5230\u7684\u6a59\u8272\u7ed3\u70b9\uff0c\u4e5f\u5c31\u662f\u6807\u4e3a\u201c\u88ab\u63d2\u5165\u7684\u7ea2\u8272\u8282\u70b9\u201d\u7684\u7ed3\u70b9\uff0c\u5b9e\u9645\u8fc7\u7a0b\u4e2d\u5e76\u4e0d\u4e00\u5b9a\u6307\u7684\u662f\u88ab\u300c\u63d2\u5165\u300d\u7684\u90a3\u4e2a\u70b9\uff0c\u4e5f\u53ef\u80fd\u662f\u5728 case 1 \u5411\u4e0a\u9012\u5f52\u65f6\uff0c\u7b80\u5316\u7684\u539f\u6765\u90a3\u9897\u5b50\u6811\u3002\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u8fd9\u91cc\u7684\u201c\u88ab\u63d2\u5165\u7684\u7ea2\u8272\u8282\u70b9\u53ca\u5176\u5b50\u6811\u201d\uff0c\u5b9e\u9645\u4e0a\u53ef\u80fd\u662f\u6307\u300c\u5bfc\u81f4\u7ea2\u9ed1\u6027\u8d28\u88ab\u7834\u574f\u7684\u7ea2\u6839\u5b50\u6811\u300d\u3002</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u6765\u8ba8\u8bba\u5404\u79cd\u60c5\u51b5\u8981\u600e\u4e48\u5904\u7406\u3002</p> <p>\u8bf4\u660e</p> <p>\u8fd9\u91cc case 1 ~ case 3 \u7684\u7f16\u53f7\u4e3b\u8981\u662f\u4e3a\u4e86\u548c\u8bfe\u7a0b ppt \u5bf9\u6807\uff0c\u4f46\u662f\u63a5\u4e0b\u6765\u4f60\u4f1a\u53d1\u73b0\u6211\u662f\u6309\u7167 case 3 -&gt; case 1 \u6765\u4ecb\u7ecd\u64cd\u4f5c\u7684\uff0c\u8fd9\u662f\u56e0\u4e3a\u6211\u89c9\u5f97\u8fd9\u6837\u5b89\u6392\u66f4\u5408\u7406\uff0c\u800c\u975e\u6392\u7248\u6df7\u4e71\u3002</p> Insertion / case 3 <p>\u5bf9\u4e8e case 3\uff0c \u6211\u4eec\u9ad8\u5174\u5730\u53d1\u73b0\uff0c\u8fd9\u6837\u7684\u4e00\u6b21\u67d3\u8272\u548c\u4e00\u6b21\u65cb\u8f6c\u521a\u597d\u80fd\u8ba9\u8fd9\u68f5\u5b50\u6811\u5b8c\u6210\u8c03\u6574\uff01</p> <p></p> Insertion / case 2 <p>\u5bf9\u4e8e case 2\uff0c\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u8fdb\u884c\u4e00\u4e2a Rotation \u64cd\u4f5c\u5c06\u5b83\u8f6c\u5316\u4e3a case 3\u3002</p> <p>\u4f46\u662f\u5b9e\u9645\u4e0a\uff0c\u7ec6\u5fc3\u7684\u5c0f\u670b\u53cb\u5df2\u7ecf\u53d1\u73b0\u4e86\uff0c\u4ece case 2 -&gt; case 3 -&gt; done \u7684\u8fc7\u7a0b \u5b9e\u9645\u4e0a\u5c31\u662f\u4e00\u4e2a LR Rotation\uff01</p> <p></p> Insertion / case 1 <p>\u5bf9\u4e8e case 1\uff0c\u56fe\u4e2d\u7684\u4e24\u79cd\u60c5\u51b5\u662f\u7b49\u4ef7\u7684\u3002\u6240\u4ee5\u6211\u4eec\u53ea\u5c55\u793a\u5176\u4e2d\u4e00\u79cd\u3002</p> <p>\u6211\u4eec\u53ea\u9700\u8981\u5c06\u56fe\u4e2d\u7684\u6839\u8282\u70b9\u67d3\u7ea2\uff0c\u5c06\u6839\u7684\u4e24\u4e2a\u5b50\u8282\u70b9\u67d3\u9ed1\uff0c\u7c7b\u4f3c\u4e8e\u5c06\u9ed1\u8282\u70b9\u201c\u4e0b\u653e\u201d\u3002</p> <p></p> <p>\u901a\u8fc7\u7b2c\u4e00\u6b65\u64cd\u4f5c\uff0c\u6211\u4eec\u53ef\u4ee5\u4fdd\u8bc1\u8fd9\u6574\u4e2a\u5b50\u6811\u5fc5\u5b9a\u5e73\u8861\u3001\u4e0d\u5f71\u54cd\u5bb6\u957f\u8282\u70b9\u7684\u9ed1\u9ad8\uff08\u9664\u4e86\u5bb6\u957f\u662f\u6839\u7684\u60c5\u51b5\uff09\u4e14\u7ea2\u70b9\u4e0d\u90bb\u7684\u3002</p> <p>\u7136\u800c\u6211\u4eec\u5e76\u4e0d\u77e5\u9053\u8fd9\u4e2a\u6839\u7684\u5bb6\u957f\u8282\u70b9\u662f\u5426\u662f\u7ea2\u8272\u8282\u70b9\uff0c\u56e0\u6b64\u505a\u5206\u7c7b\u8ba8\u8bba\u3002\u5018\u82e5\u5176\u6839\u7684\u5bb6\u957f\u8282\u70b9\u662f\u7ea2\u8272\u8282\u70b9\uff0c\u90a3\u4e48\u6211\u4eec\u8fd8\u9700\u8981\u5411\u4e0a\u9012\u5f52\uff0c\u7ee7\u7eed\u8c03\u6574\uff0c\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u8f6c\u5316\u4e3a\u5176\u4ed6 case\uff1b\u82e5\u8fd9\u5b50\u6811\u7684\u6839\u6ca1\u6709\u5bb6\u957f\u8282\u70b9\uff0c\u5219\u76f4\u63a5\u67d3\u9ed1\u7ea2\u6839\u5373\u53ef\uff1b\u800c\u5018\u82e5\u5b50\u6811\u6839\u8282\u70b9\u7684\u5bb6\u957f\u8282\u70b9\u662f\u9ed1\u8282\u70b9\uff0c\u90a3\u4e48\u6211\u4eec\u5c31\u8c03\u6574\u5b8c\u6bd5\u4e86\u3002</p> <p>\u5728\u8fd9\u4e09\u4e2a\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u53ea\u6709 case 1 \u7684\u8f6c\u5316\u4f1a\u5bfc\u81f4\u6211\u4eec\u9012\u5f52\u5411\u4e0a\uff0c\u800c case 2 \u5411 case 3 \u7684\u8f6c\u5316\u5e76\u4e0d\u4f1a\u5bfc\u81f4\u6211\u4eec\u6539\u53d8\u5173\u6ce8\u7684\u5b50\u6811\u7684\u8303\u56f4\u3002</p> <p>\u4e3a\u4e86\u66f4\u6e05\u6670\u5730\u770b\u51fa\u5404\u4e2a\u65b9\u6cd5\u4e4b\u95f4\u7684\u8f6c\u5316\u5173\u7cfb\uff0c\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u753b\u4e00\u4e2a\u72b6\u6001\u673a\uff1a</p> graph LR; A[\"case 1\"] B[\"case 2\"] C[\"case 3\"] D([\"finish\"])  A ===&gt;|\"C\"| B ---&gt;|\"R\"| C A ===&gt;|\"C\"| A ---&gt;|\"C\"| D A ===&gt;|\"C\"| C ---&gt;|\"C&amp;R\"| D  <p>\u6ce8\u610f\uff0c\u72b6\u6001\u673a\u4e2d\u7684\u7c97\u7ebf\u8868\u793a\u8f6c\u6362\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5173\u6ce8\u7684\u201c\u5b50\u6811\u201d\u5411\u4e0a\u6500\u5347\u4e86\u4e00\u7ea7\uff1b\u800c\u7ec6\u7ebf\u8868\u793a\u6211\u4eec\u5173\u6ce8\u7684\u5b50\u6811\u4ecd\u7136\u662f\u8fd9\u4e00\u5c42\u7684\u90a3\u4e00\u68f5\u3002\u4ee5\u53ca\uff0c<code>C</code> \u8868\u793a\u67d3\u8272\u64cd\u4f5c\uff0c<code>R</code> \u8868\u793a\u65cb\u8f6c\u64cd\u4f5c\u3002</p> <p>\u5176\u4e2d\uff0c\u4efb\u4f55\u4e00\u4e2a\u60c5\u51b5\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u4e00\u4e2a\u521d\u59cb\u60c5\u51b5\u3002\u6240\u4ee5\u53ef\u4ee5\u6570\u51fa\uff0c\u5230\u8fbe finish \u7684\u8def\u5f84\u4e2d\uff0c\u6700\u591a\u51fa\u73b0 2 \u6b21 Rotation\uff08case 2 -&gt; case 3 -&gt; finish\uff09\u3002</p>"},{"location":"ZJU_CS/ADS/week2/#_5","title":"\u5220\u9664","text":"<p>\u5173\u4e8e\u5220\u9664\u64cd\u4f5c\uff0c\u4e0b\u9762\u8fd9\u4e2a\u89c6\u9891\u8bb2\u7684\u5f88\u6e05\u6670\uff01\u53ea\u4e0d\u8fc7 case 1 \u53ef\u80fd\u8fd8\u6709\u4e9b\u7ec6\u8282\u9700\u8981\u6ce8\u610f\u3002</p> <p>\ud83d\udc49 \u7ea2\u9ed1\u6811\u5feb\u901f\u5165\u95e8 - 04\u5220\u9664</p> <p>\u8981\u5220\u9664\u67d0\u4e2a\u8282\u70b9 x\uff0c\u6211\u4eec\u9996\u5148\u8981\u627e\u5230\u5b83\uff0c\u5728 BST \u4e2d\u627e\u5230\u67d0\u4e2a x \u7684\u5f00\u9500\u4e3a \\(O(\\log N)\\)\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u8981\u5220\u9664\u8fd9\u4e2a\u4efb\u610f\u4f4d\u7f6e\u7684\u8282\u70b9\uff0c\u8fd9\u52bf\u5fc5\u8ba9\u7ea2\u9ed1\u6811\u7684\u7ed3\u6784\u53d1\u751f\u53d8\u5316\u3002\u6b64\u5916\uff0c\u7ea2\u9ed1\u6027\u8d28\u7684\u7ef4\u62a4\u4e5f\u662f\u4e00\u4e2a\u8ba9\u4eba\u5934\u75bc\u7684\u95ee\u9898\uff0c\u56e0\u6b64\uff0c\u6211\u4eec\u5bf9\u8fd9\u4e9b\u60c5\u51b5\u505a\u5206\u7c7b\u8ba8\u8bba\uff1a</p> \u6ca1\u6709\u975e<code>NIL</code>\u5b50\u8282\u70b9 \u6709\u4e00\u4e2a\u975e<code>NIL</code>\u5b50\u8282\u70b9 \u6709\u4e24\u4e2a\u975e<code>NIL</code>\u5b50\u8282\u70b9 \u76f4\u63a5\u7528<code>NIL</code>\u66ff\u4ee3 \u76f4\u63a5\u5220\u9664\uff0c\u7528\u5b50\u8282\u70b9\u66ff\u4ee3\u5b83 \u5c06\u503c\u4e0e\u5de6\u5b50\u6811\u6700\u5927\u503c\u6216\u53f3\u5b50\u6811\u6700\u5c0f\u503c\u4ea4\u6362\uff0c\u989c\u8272\u4e0d\u6362\uff0c\u7136\u540e\u5220\u9664\u76ee\u6807\u70b9 <p>\u5176\u4e2d\uff0c\u6bcf\u4e00\u9879\u64cd\u4f5c\u90fd\u4f1a\u5bfc\u81f4\u4e00\u4e2a\u70b9\u7684\u6d88\u5931\uff08\u6bd5\u7adf\u662f\u5220\u9664\uff09\uff0c\u800c\u5982\u679c\u6d88\u5931\u7684\u662f\u7ea2\u8272\u8282\u70b9\uff0c\u90a3\u4e48\u5c06\u4e0d\u4f1a\u5f71\u54cd\u9ed1\u9ad8\uff1b\u800c\u5982\u679c\u6d88\u5931\u7684\u662f\u9ed1\u8272\u8282\u70b9\uff0c\u90a3\u4e48\u5c06\u4f1a\u5bfc\u81f4\u9ed1\u9ad8\u51cf\u5c11\u4e00\uff0c\u6b64\u65f6\u6211\u4eec\u9700\u8981\u505a\u8fdb\u4e00\u6b65\u64cd\u4f5c\u3002</p> <ul> <li> TODO: \u8fd9\u91cc\u9700\u8981\u914d\u56fe\u8bb2\u6e05\u695a\u8282\u70b9\u7684\u5177\u4f53\u53d8\u6362\u5230\u5e95\u662f\u600e\u4e48\u6837\u7684\uff0c\u5c24\u5176\u662f\u8282\u70b9\u989c\u8272\u53d8\u5316\u5230\u5e95\u662f\u600e\u4e48\u4e00\u56de\u4e8b\uff0c\u4e4b\u540e\u5927\u6982\u9700\u8981\u91cd\u5199</li> </ul> <p>\u8bf4\u660e</p> <p>\u867d\u7136\u6211\u60f3\u5c3d\u53ef\u80fd\u62df\u5408 cy \u7684 ppt\uff0c\u4f46\u662f\u6211\u7b2c\u4e00\u904d\u5b9e\u5728\u6ca1\u770b\u61c2\uff0c\u6240\u4ee5 case \u7684\u7f16\u53f7\u6211\u5c31\u6309\u7167\u4e0a\u9762\u90a3\u4e2a\u89c6\u9891\u6765\u4e86\u3002</p> <p>\u8fd9\u662f case \u5e8f\u53f7\u7684\u5bf9\u5e94\u5173\u7cfb\uff1a</p> my cy's my cy's case 1 case 2 case 2 case 4 case 3 case 3 case 4 case 1 <p>\u6211\u4eec\u6839\u636e\u60c5\u51b5\uff0c\u5c06\u60c5\u51b5\u5206\u4e3a\u56db\u79cd\uff1a</p> <p></p> <p>\u9700\u8981\u505a\u4e00\u4e0b\u7b80\u5355\u8bf4\u660e\uff0c\u7c7b\u6bd4\u6211\u4eec\u5728#\u63d2\u5165\uff0c\u5728\u5220\u9664\u8fc7\u7a0b\u4e2d\u4e5f\u5b58\u5728\u9700\u8981\u5411\u4e0a\u9012\u5f52\u7684\u60c5\u51b5\u3002\u4e0e\u300c\u88ab\u63d2\u5165\u7684\u7ea2\u8272\u8282\u70b9\u300d\u7c7b\u4f3c\u7684\uff0c\u6211\u4eec\u8fd9\u91cc\u7684\u300c\u9700\u8981\u88ab\u5220\u9664\u7684\u76ee\u6807\u70b9\u300d\uff0c\u4e5f\u5e94\u5f53\u88ab\u770b\u4f5c\u300c\u5bfc\u81f4\u8c03\u6574\u51fa\u73b0\u7684\u5b50\u6811\u300d\uff0c\u66f4\u8fdb\u4e00\u6b65\u7684\uff0c\u53ef\u4ee5\u5b9a\u4e49\u6210\u300c\u7531\u4e8e\u5220\u9664\u4e86\u67d0\u4e2a\u7ed3\u70b9\uff0c\u9ed1\u9ad8 -1 \u7684\u5b50\u6811\u300d\uff0c\u8bf7\u8bb0\u4f4f\u8fd9\u4e2a\u5b9a\u4e49\uff0c\u8fd9\u4f1a\u8ba9\u4e4b\u540e\u7684\u9012\u5f52\u64cd\u4f5c\u53d8\u5f97\u81ea\u7136\u3002</p> <p>\u4f55\u65f6\u5220\u9664\u90a3\u4e2a\u7ed3\u70b9\uff1f</p> <p>\u867d\u7136\u6211\u4eec\u5bf9\u300c\u9700\u8981\u88ab\u5220\u9664\u7684\u76ee\u6807\u70b9\u300d\u8fdb\u884c\u4e86\u9012\u5f52\u7684\u6269\u5c55\u5b9a\u4e49\uff0c\u4f46\u662f\u5728\u7b2c\u4e00\u5c42\u6211\u4eec\u5c31\u53ef\u4ee5\u76f4\u63a5\u5c06\u5b83\u5220\u6389\u4e86\u3002\u800c\u8fd9\u4e2a\u70b9\u88ab\u5220\u9664\u9020\u6210\u7684\u5f71\u54cd\uff0c\u5df2\u7ecf\u7531\u300c\u7531\u4e8e\u5220\u9664\u7ed3\u70b9\uff0c\u9ed1\u9ad8 -1 \u7684\u5b50\u6811\u300d\u7ee7\u627f\u4e86\u3002</p> <p>\u5728\u4e4b\u540e\u7684\u914d\u56fe\u4e2d\uff0c\u6211\u4eec\u90fd\u4e0d\u4f1a\u5c55\u793a x \u662f\u5982\u4f55\u88ab\u5220\u6389\u7684\uff0c\u800c\u662f\u5728\u7ed3\u679c\u56fe\u4e2d\u4fdd\u7559 x\u3002\u5982\u679c\u8bf4 x \u5c31\u662f\u6211\u4eec\u4e00\u5f00\u59cb\u8981\u5220\u9664\u7684\u90a3\u4e2a\u70b9\uff0c\u90a3\u4e48\u6211\u4eec\u5e94\u5f53\u5220\u6389 x\uff0c\u76f4\u63a5\u6362\u6210 <code>NIL</code>\uff1b\u5982\u679c x \u662f\u5728\u4f20\u9012\u8fc7\u7a0b\u4e2d\uff0c\u8868\u793a\u300c\u9ed1\u9ad8 -1 \u7684\u5b50\u6811\u300d\u7684\u6839\uff0c\u90a3\u4e48\u4e0d\u7528\u505a\u989d\u5916\u5904\u7406\u3002</p> <p>\u7c7b\u4f3c\u4e8e\u6211\u4eec\u5728\u300cInsertion / case 3\u300d\u91cc\u63d0\u5230\u7684\u201c\u4e0b\u653e\u201d\u9ed1\u8282\u70b9\uff0c\u5220\u9664\u64cd\u4f5c\u7684\u601d\u8def\u57fa\u672c\u4e0a\u662f\u201c\u4e0a\u653e\u201d\u9ed1\u8282\u70b9\uff0c\u6216\u8005\u8bf4\u201c\u5438\u7eb3\u201d\u9ed1\u8282\u70b9\u3002\u8fd9\u4e2a\u201c\u5438\u7eb3\u201d\u7684\u884c\u4e3a\uff0c\u6307\u7684\u662f\u4e00\u4e2a\u9ed1\u70b9\uff0c\u539f\u6765\u53ea\u4e3a\u53f3\u5b50\u6811\u4e2d\u7684\u6240\u6709\u8def\u5f84\u63d0\u4f9b\u4e86\u9ed1\u9ad8\uff0c\u73b0\u5728\u7531\u4e8e\u5b83\u7684 sibling \u5b50\u6811\u4e2d\u5c11\u4e86\u4e00\u4e2a\u9ed1\u8272\u8282\u70b9\uff0c\u6211\u4eec\u5c06\u8fd9\u4e2a\u9ed1\u8272\u8282\u70b9\u8f6c\u79fb\u5230\u5b83\u4eec\u7684\u5bb6\u957f\u8282\u70b9\u8282\u70b9\uff0c\u4e8e\u662f\u8fd9\u4e2a\u8282\u70b9\u540c\u65f6\u4e3a\u5de6\u53f3\u5b50\u6811\u7684\u6240\u6709\u8def\u5f84\u90fd\u8d21\u732e\u4e86\u9ed1\u9ad8\u3002</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u9010\u4e2a\u5206\u6790\u53d8\u5316\uff1a</p> <p>Deletion / case 1</p> <p>\u867d\u7136\u5927\u90e8\u5206\u6559\u7a0b\u90fd\u628a case 1 \u5f53\u4f5c\u4e00\u4e2a case\uff0c\u4f46\u662f\u6211\u89c9\u5f97\u5b8c\u5168\u53ef\u4ee5\u628a\u5b83\u6309\u7167 a \u8282\u70b9\u7684\u7ea2\u9ed1\uff0c\u5206\u4e3a\u4e24\u79cd\u60c5\u51b5\u3002</p> <p></p> <p>Deletion / case 1.1</p> <p>\u5f53 a \u4e3a\u7ea2\u6839\u65f6\uff0c\u7531\u4e8e x \u8d21\u732e\u4e86\uff08\u76f8\u5bf9\u4e8e\u539f\u7ea2\u9ed1\u6811\uff09-1 \u7684\u9ed1\u9ad8\uff0c\u4e3a\u4e86\u4fdd\u8bc1\u6574\u4e2a\u5b50\u6811\u8d21\u732e\u7684\u9ed1\u9ad8\u4e0d\u53d8\uff0c\u6211\u4eec\u8003\u8651\u628a w \u7684\u9ed1\u9ad8\u201c\u4e0a\u653e\u201d\u5230 a \u4e0a\uff0c\u4e5f\u5c31\u662f\u4ece\u4e0b\u9762\u201c\u5438\u7eb3\u201d\u4e0a\u6765\u3002</p> <p></p> <p>Deletion / case 1.2</p> <p>\u5f53 a \u4e3a\u9ed1\u6839\u65f6\uff0c\u6211\u4eec\u6ca1\u6709\u7a7a\u4f59\u7684\u4f4d\u7f6e\u6765\u201c\u5438\u7eb3\u201d w \u7684\u9ed1\u9ad8\uff0c\u4f46\u662f\u5de6\u5b50\u6811\u548c\u53f3\u5b50\u6811\u7684\u4e0d\u5e73\u8861\u662f\u5fc5\u987b\u89e3\u51b3\u7684\uff0c\u800c\u6211\u4eec\u7edd\u4e0d\u80fd\u5bc4\u5e0c\u671b\u4e8e\u201c\u5728\u4e0d\u77e5\u9053\u6709\u6ca1\u6709\u7ea2\u8272\u8282\u70b9\u7684 b \u548c c \u7684\u5b50\u6811\u4e2d\u53bb\u5bfb\u627e\u7ea2\u8272\u8282\u70b9\u201d\u8fd9\u4e2a\u60f3\u6cd5\u3002</p> <p>\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u4eff\u7167\u300cInsertion / case 3\u300d\uff0c\u5c06\u6574\u4e2a\u6811\u6807\u8bb0\u4e3a\u7070\u8272\u2014\u2014\u300c\u7531\u4e8e\u5220\u9664\u7ed3\u70b9\uff0c\u9ed1\u9ad8 -1 \u7684\u5b50\u6811\u300d\uff0c\u7136\u540e\u8fdb\u4e00\u6b65\u6839\u636e\u5176\u5bb6\u957f\u8282\u70b9\u7684\u60c5\u51b5\u9012\u5f52\u5230\u5176\u4ed6 case\u3002\u5176\u4e2d\uff0c\u5f53\u6211\u4eec\u9012\u5f52\u5230 a \u662f\u6574\u4e2a\u6811\u7684\u6839\u65f6\u53ef\u4ee5\u9000\u51fa\uff0c\u56e0\u4e3a\u8fd9\u76f8\u5f53\u4e8e\u6574\u4e2a\u6811\u7684\u9ed1\u9ad8 -1\uff0c\u4e0d\u5f71\u54cd\u7ea2\u9ed1\u6027\u8d28\u3002</p> <p></p> <p>Deletion / case 2</p> <p>\u753b\u4e0d\u52a8\u56fe\u4e86\uff0c\u5148\u8bed\u8a00\u63cf\u8ff0\u4e00\u4e0b\u3002</p> <ol> <li>\u5c06 w \u67d3\u4e3a a \u7684\u989c\u8272\uff0c\u518d\u5c06 a \u548c c \u67d3\u6210\u9ed1\u8272\uff1b</li> <li>\u5c06 a \u5de6\u65cb\uff0c\u4f7f w \u6210\u4e3a\u8fd9\u4e2a\u5b50\u6811\u65b0\u7684\u6839\uff0ca \u6210\u4e3a w \u7684\u5de6\u513f\u5b50\uff0cb \u6210\u4e3a a \u7684\u53f3\u513f\u5b50\uff1b</li> <li>\u8c03\u6574\u7ed3\u675f\uff1b</li> </ol> <p>Deletion / case 3</p> <p>\u753b\u4e0d\u52a8\u56fe\u4e86\uff0c\u5148\u8bed\u8a00\u63cf\u8ff0\u4e00\u4e0b\u3002</p> <ol> <li>\u4ea4\u6362 b \u548c w \u7684\u989c\u8272\uff1b</li> <li>\u5c06 w \u53f3\u65cb\uff0c\u4f7f b \u6210\u4e3a a \u7684\u53f3\u513f\u5b50\uff0cw \u6210\u4e3a b \u7684\u53f3\u513f\u5b50\uff0cb \u7684\u53f3\u513f\u5b50\u6210\u4e3a w \u7684\u5de6\u513f\u5b50\uff1b</li> <li>\u6b64\u65f6\u60c5\u51b5\u8f6c\u5316\u4e3a case 2\uff1b</li> </ol> <p>Deletion / case 4</p> <p>\u753b\u4e0d\u52a8\u56fe\u4e86\uff0c\u5148\u8bed\u8a00\u63cf\u8ff0\u4e00\u4e0b\u3002</p> <ol> <li>\u4ea4\u6362 a \u548c w \u7684\u989c\u8272\uff1b</li> <li>\u5c06 a \u5de6\u65cb\uff0c\u4f7f w \u6210\u4e3a\u8fd9\u4e2a\u5b50\u6811\u65b0\u7684\u6839\uff0ca \u6210\u4e3a w \u7684\u5de6\u513f\u5b50\uff0cb \u6210\u4e3a a \u7684\u53f3\u513f\u5b50\uff1b</li> <li>\u6b64\u65f6\u6839\u636e\u5b50\u6811 a \u7684\u60c5\u51b5\uff0c\u8f6c\u5316\u4e3a case 1.1 / case 2 / case 3\uff1b</li> </ol> \u533a\u5206 case 1.1 \u548c case 1.2\u4e0d\u533a\u5206 case 1.1 \u548c case 1.2 graph LR; A1[\"case 1.1\"] A2[\"case 1.2\"] B[\"case 2\"] C[\"case 3\"] D[\"case 4\"] E[\"finish\"]  A1 ---&gt;|\"C\"| E A2 ===&gt;|\"C\"| A1 A2 ===&gt;|\"C\"| A2 A2 ===&gt;|\"C\"| B A2 ===&gt;|\"C\"| C A2 ===&gt;|\"C\"| D C ---&gt;|\"C&amp;R\"| B ---&gt;|\"C&amp;R\"| E D ===&gt;|\"C&amp;R\"| A1 D ===&gt;|\"C&amp;R\"| B D ===&gt;|\"C&amp;R\"| C  graph LR; A[\"case 1\"] B[\"case 2\"] C[\"case 3\"] D[\"case 4\"] E[\"finish\"]  A ---&gt;|\"C\\nfrom case 1.1\"| E A ===&gt;|\"C\\nfrom case 1.2\"| A A ===&gt;|\"C\\nfrom case 1.2\"| B A ===&gt;|\"C\\nfrom case 1.2\"| C A ===&gt;|\"C\\nfrom case 1.2\"| D C ---&gt;|\"C&amp;R\"| B ---&gt;|\"C&amp;R\"| E D ===&gt;|\"C&amp;R\\nto case 1.1 \"| A D ===&gt;|\"C&amp;R\"| B D ===&gt;|\"C&amp;R\"| C  <p>\u6ce8\u610f\uff0c\u72b6\u6001\u673a\u4e2d\u7684\u7c97\u7ebf\u8868\u793a\u8f6c\u6362\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5173\u6ce8\u7684\u201c\u5b50\u6811\u201d\u5411\u4e0a\u6216\u5411\u4e0b\u8f6c\u79fb\u4e86\u4e00\u7ea7\uff08\u7531 case 4 \u51fa\u53d1\u65f6\u4e0b\u964d\uff0c\u7531 case 1.2 \u51fa\u53d1\u65f6\u4e0a\u5347\uff09\uff1b\u800c\u7ec6\u7ebf\u8868\u793a\u6211\u4eec\u5173\u6ce8\u7684\u5b50\u6811\u4ecd\u7136\u662f\u8fd9\u4e00\u5c42\u7684\u90a3\u4e00\u68f5\u3002\u4ee5\u53ca\uff0c<code>C</code> \u8868\u793a\u67d3\u8272\u64cd\u4f5c\uff0c<code>R</code> \u8868\u793a\u65cb\u8f6c\u64cd\u4f5c\u3002</p> <p>\u5176\u4e2d\uff0c\u4efb\u4f55\u4e00\u4e2a\u60c5\u51b5\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u4e00\u4e2a\u521d\u59cb\u60c5\u51b5\u3002\u6240\u4ee5\u53ef\u4ee5\u6570\u51fa\uff0c\u5230\u8fbe finish \u7684\u8def\u5f84\u4e2d\uff0c\u6700\u591a\u51fa\u73b0 3 \u6b21 Rotation\uff08case 4 -&gt; case 3 -&gt; case 2 -&gt; finish\uff09\u3002</p> <p>\u6839\u636e\u524d\u9762\u72b6\u6001\u673a\u7684\u76f8\u5173\u5185\u5bb9\uff0c\u6211\u4eec\u4e0d\u96be\u5f97\u5230\u8fd9\u5f20\u8868\u683c\uff0c\u5b83\u7edf\u8ba1\u7684\u662f Rotation \u5728\u4e0d\u540c\u6570\u636e\u7ed3\u6784\u3001\u4e0d\u540c\u64cd\u4f5c\u4e2d\u51fa\u73b0\u7684\u6570\u91cf\uff1a</p> Option AVL Tree RB Tree Insertion \\(\\leq 2\\) \\(\\leq 2\\) Deletion \\(O(\\log N)\\) \\(\\leq 3\\)"},{"location":"ZJU_CS/ADS/week2/#b_tree","title":"B+ Tree","text":"<p>link</p> <p>OI Wiki: https://oi-wiki.org/ds/bplus-tree/</p> <p>Wiki: https://en.wikipedia.org/wiki/B%2B_tree</p> <p>Presentation: https://www.cs.usfca.edu/~galles/visualization/BPlusTree.html</p> <p>Code: https://www.cnblogs.com/JayL-zxl/p/14304178.html</p>"},{"location":"ZJU_CS/ADS/week2/#_6","title":"\u6982\u5ff5","text":"<p>B+ \u6811\u662f\u4e00\u79cd\u7528\u6811\u72b6\u5f62\u5f0f\u7ef4\u62a4\u6709\u5e8f\u6570\u5217\u6bd4\u8f83\u4fe1\u606f\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5176\u589e\u6539\u64cd\u4f5c\u62e5\u76f8\u5bf9\u4e8e\u4e8c\u53c9\u6811\u7ed3\u6784\u66f4\u52a0\u7a33\u5b9a\u7684\u5bf9\u6570\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u901a\u5e38\u7528\u4e8e\u6570\u636e\u5e93\u548c\u64cd\u4f5c\u7cfb\u7edf\u7684\u6587\u4ef6\u7cfb\u7edf\u4e2d\u3002</p> <p>B+ Tree</p> <p>\u5982\u4e0b\u56fe\u5c31\u662f\u4e00\u9897 \\(M=4\\) \u7684 B+ \u6811\uff0c\u53ef\u4ee5\u5bf9\u7167\u7740\u8fd9\u4e2a\u4f8b\u5b50\u6765\u7406\u89e3\u6027\u8d28\u3002</p> <p></p> <p>\u66f4\u4e00\u822c\u5730\u6765\u8bf4\uff0cB+ \u6811\u6ee1\u8db3\u5982\u4e0b\u6027\u8d28\uff1a</p> <p>property of B+ Tree</p> <p>\\@cy's PPT</p> <ol> <li>The root is either a leaf or has between \\(2\\) and \\(M\\) children.</li> <li>All nonleaf nodes (except the root) have between \\(\\lceil M/2 \\rceil\\) and M children.</li> <li>All leaves are at the same depth.</li> </ol> <p>Assume each nonroot leaf also has between \\(\\lceil M/2 \\rceil\\) and \\(M\\) children.</p> <p>\u6240\u6709\u771f\u5b9e\u7684\u6570\u636e\u90fd\u88ab\u5b58\u50a8\u5728\u53f6\u5b50\u7ed3\u70b9\u4e2d\uff0c\u5f62\u6210\u4e00\u4e2a\u6709\u5e8f\u7684\u6570\u5217\u3002\u800c\u975e\u53f6\u5b50\u7ed3\u70b9\u4e2d\u7b2c <code>i</code> \u4e2a\u952e\u503c\u7b49\u4e8e\u5176\u7b2c <code>i+1</code> \u68f5\u5b50\u6811\u7684\u6700\u5c0f\u503c\uff08\u5728\u4e0a\u56fe\u4e2d\u8868\u73b0\u4e3a\u989c\u8272\u76f8\u540c\u7684\u4e00\u5bf9\u4e0a\u4e0b\u7ed3\u70b9\uff09\uff0c\u56e0\u6b64\u975e\u53f6\u7ed3\u70b9\u6700\u591a\u5b58 \\(M-1\\) \u4e2a\u503c\u3002</p> \u53d1\u73b0 <p>\u4e8e\u662f\u6211\u4eec\u53d1\u73b0\u8fd9\u6837\u4e00\u4e2a\u6027\u8d28\uff1a\u5728\u5b58\u50a8\u6570\u503c\u4e0d\u91cd\u590d\u7684\u60c5\u51b5\u4e0b\uff0c\u975e\u53f6\u7ed3\u70b9\u5b58\u50a8\u7684\u952e\u503c\u90fd\u4e0d\u76f8\u540c\u3002</p> <p>\u8bc1\u660e\u5f88\u7b80\u5355\uff0c\u5bf9\u4e8e\u4efb\u610f\u4e00\u4e2a\u975e\u53f6\u5b50\u7ed3\u70b9\uff0c\u5b83\u5b58\u50a8\u7684\u503c\u5fc5\u5b9a\u4e0d\u4f1a\u88ab\u5b83\u7684\u5b50\u8282\u70b9\u5b58\u50a8\uff08\u5982\u679c\u5b83\u7684\u5b50\u8282\u70b9\u4e0d\u662f\u53f6\u5b50\uff09\uff0c\u56e0\u4e3a\u5b83\u5b58\u7684\u662f\u5b83\u7684\u5b50\u8282\u70b9\u7684\u7b2c\u4e00\u4e2a\u5b50\u6811\u7684\u6700\u5c0f\u503c\uff0c\u800c\u5b83\u7684\u5b50\u8282\u70b9\u5b58\u7684\u662f\u7b2c\u4e8c\u4e2a\u5b50\u6811\u5f00\u59cb\u7684\u6700\u5c0f\u503c\u3002</p> <p>\u6211\u4eec\u79f0\u8fd9\u6837\u7684\u6811\u4e3a\u4e00\u4e2a \\(M\\) \u9636(order) B+ \u6811\u3002\u5bf9\u4e8e\u5e38\u89c1\u7684 \\(M\\)\uff0c\u6bd4\u5982\u4e00\u68f5 \\(4\\) \u9636 B+ \u6811\uff0c\u6211\u4eec\u4e5f\u79f0\u4e4b\u4e3a\u4e00\u68f5 2-3-4 \u6811\uff0c\u4e00\u822c \\(M\\) \u7684\u9009\u62e9\u4e3a 3 \u6216 4\u3002</p> <p>\u7279\u522b\u8bf4\u660e\uff0c\u5bf9\u4e8e B+ \u6811\uff0c\u5c06\u5b83\u7684\u53f6\u5b50\u7ed3\u70b9\u62fc\u63a5\u8d77\u6765\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u4e00\u4e2a\u6709\u5e8f\u6570\u5217\u3002</p> <p>\u62bd\u8c61\u5730\u6765\u8bf4\u5c31\u662f\uff0c\u6211\u4eec\u628a\u4e00\u4e2a\u6570\u5217\u76f8\u5bf9\u5747\u5300\u7684\u5206\u4e3a \\(m\\) \u5757\uff0c\u7136\u540e\u628a\u5206\u754c\u7684\u6570\u62ff\u51fa\u6765\u3002\u5f53\u6211\u4eec\u53bb\u67e5\u627e\u6216\u63d2\u5165\u65f6\uff0c\u53ea\u9700\u8981\u548c\u8fd9\u4e9b\u8fb9\u754c\u6570\u8fdb\u884c\u6bd4\u8f83\uff0c\u5c31\u77e5\u9053\u5b83\u5e94\u8be5\u653e\u5728\u54ea\u4e00\u5757\u91cc\u3002\u518d\u4e0d\u65ad\u7ec6\u5316\u7c92\u5ea6\uff0c\u7528\u7c7b\u4f3c\u4e8e\u201c\\(m\\) \u5206\u201d\u7684\u601d\u60f3\u6765\u627e\u5230\u76ee\u6807\u4f4d\u7f6e\u3002</p> <p>\u5728\u6211\u770b\u6765\u8fd9\u4e2a\u5b9a\u4e49\u975e\u5e38\u6e05\u6670\uff0c\u5c31\u662f\u5c06\u6574\u4e2a\u5e8f\u5217\u6309\u7167\u4e0d\u540c\u7c92\u5ea6\u5212\u5206\uff0c\u7136\u540e\u7531\u5927\u5230\u5c0f\u8fdb\u884c\u903c\u8fd1\u3002</p> <p>depth of B+ Tree</p> <p>\u7531\u4e8e\u5b83\u5728\u7a7a\u95f4\u6700\u6d6a\u8d39\u7684\u60c5\u51b5\u4e0b\u662f\u4e00\u68f5 \\(\\lceil M/2 \\rceil\\) \u53c9\u6811\uff0c\u6240\u4ee5 B+ \u6811\u7684\u6df1\u5ea6\u662f \\(O(\\lceil \\log_{\\lceil M/2 \\rceil} N \\rceil)\\)\u3002</p>"},{"location":"ZJU_CS/ADS/week2/#_7","title":"\u64cd\u4f5c","text":"<p>\u7531\u4e8e B+ \u6811\u7684\u6027\u8d28\u5341\u5206\u81ea\u7136\uff0c\u6240\u4ee5\u5b83\u7684\u64cd\u4f5c\u4ece\u601d\u60f3\u5c42\u9762\u4e0a\u6765\u8bf4\u4e5f\u975e\u5e38\u7b80\u5355\u3002\u5176\u66f4\u591a\u7684\u96be\u5ea6\u5728\u4e8e\u5b9e\u73b0\u4e0a\u3002</p> <p>\u5173\u4e8e\u5b9e\u73b0\u7684\u5efa\u8bae</p> <p>\u7531\u4e8e B+ \u6811\u5173\u4e8e\u5185\u90e8\u8282\u70b9\u548c\u53f6\u5b50\u7684\u5b9a\u4e49\u5341\u5206\u5272\u88c2\uff08\u867d\u7136\u7ea2\u9ed1\u6811\u53f6\u4e5f\u5f88\u5272\u88c2\uff0c\u4f46\u662f\u6bd5\u7adf\u7ea2\u9ed1\u6811\u7684\u53f6\u5b50\u4e0d\u9700\u8981\u4ec0\u4e48\u64cd\u4f5c\uff0c\u4f46\u662f B+ \u6811\u9700\u8981\uff09\uff0c\u6240\u4ee5\u5728\u5b9e\u73b0\u8fc7\u7a0b\u4e2d\u4f1a\u9047\u5230\u4e00\u4e9b\u9ebb\u70e6\u3002</p> <p>\u6211\u4e2a\u4eba\u5efa\u8bae\uff0c\u5982\u679c\u4f60\u5341\u5206\u719f\u6089 oop\uff0c\u90a3\u4e48\u53ef\u4ee5\u5c1d\u8bd5\u7528\u591a\u6001\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002\u53cd\u6b63\u6211\u5b9e\u73b0 B+ \u6811\u7684\u65f6\u5019\u5bf9 cpp \u7684 oop \u6211\u8bf4\u4e0d\u4e0a\u5341\u5206\u719f\u7ec3\uff0c\u6240\u4ee5\u6211\u76f4\u63a5\u65e0\u8111\u4f7f\u7528 <code>struct</code> with tag \u5b9e\u73b0\u4e86\u3002</p> <p>\u800c\u5728\u5f00\u59cb\u5199\u4ee3\u7801\u4e4b\u524d\uff0c\u6211\u5f3a\u70c8\u5efa\u8bae\u5927\u5bb6\u6309\u7167\u6211\u4e0b\u9762\u505a\u56fe\u7684\u683c\u5f0f\uff0c\u6a21\u62df\u4e00\u904d\u5404\u4e2a\u64cd\u4f5c\uff01\u5e76\u5728\u6a21\u62df\u8fc7\u7a0b\u4e2d\uff0c\u89c2\u5bdf\u6570\u636e\u7684\u6d41\u52a8\u4ee5\u53ca\u8282\u70b9\u7684\u7ed3\u6784\u53d8\u5316\u3002</p> <p>\u6b64\u5916\uff0c\u5728\u8ba8\u8bba\u8fd9\u4e9b\u64cd\u4f5c\u65f6\uff0c\u5148\u8ba9\u6211\u4eec\u5ffd\u7565\u5982\u4f55\u4ece\u7a7a\u5efa\u7acb\u8d77\u4e00\u4e2a B+ \u6811\u3002</p>"},{"location":"ZJU_CS/ADS/week2/#_8","title":"\u67e5\u627e","text":"<p>\u548c\u4e8c\u53c9\u6811\u7684\u67e5\u627e\u5341\u5206\u76f8\u4f3c\uff0c\u6240\u4ee5\u8fd9\u91cc\u53ea\u6a21\u62df\u4e00\u4e0b\u4e3e\u4e2a\u4f8b\u5b50\u3002</p> <p></p> <p>\u4f8b\u5982\uff0c\u6211\u4eec\u5728\u4e0a\u9762\u8fd9\u68f5\u6811\u4e2d\u627e <code>43</code> \u8fd9\u4e2a\u503c\uff0c\u6a59\u8272\u90e8\u5206\u8868\u793a\u6211\u4eec\u7684\u7126\u70b9\u3002</p> <p>Find(43)</p> Frame 1Frame 2Frame 3 <p></p> <p>\u6211\u4eec\u53d1\u73b0\u6709 \\(21 \\leq 43 &lt; 48\\)\uff0c\u6240\u4ee5\u987a\u7740\u6807\u8bc6\u7684\u6a59\u8272\u6307\u9488\u5411\u4e0b\u3002</p> <p></p> <p>\u6211\u4eec\u53d1\u73b0\u6709 \\(41 \\leq 43\\)\uff0c\u6240\u4ee5\u987a\u7740\u6807\u8bc6\u7684\u6a59\u8272\u6307\u9488\u5411\u4e0b\u3002</p> <p></p> <p>\u5df2\u7ecf\u8d70\u5230\u53f6\u5b50\u7ed3\u70b9\uff0c\u6700\u540e\u53d1\u73b0\u6211\u4eec\u8981\u627e\u7684 <code>43</code>\u3002</p>"},{"location":"ZJU_CS/ADS/week2/#_9","title":"\u63d2\u5165","text":"<p>\u63d2\u5165\u7684\u65b9\u6cd5\u4e5f\u76f8\u5bf9\u6734\u7d20\u7b80\u5355\uff0c\u5c31\u662f\u627e\u5230\u8be5\u63d2\u5165\u7684\u5730\u65b9\u4ee5\u540e\u63d2\u5165\u5373\u53ef\u3002</p> <p>\u53ea\u4e0d\u8fc7\u9700\u8981\u6ce8\u610f\u4e00\u4ef6\u4e8b\uff0c\u5f53\u8fd9\u4e2a\u63d2\u5165\uff0c\u5bfc\u81f4\u4e86 B+ \u6811\u7684\u6027\u8d28\u4e0d\u518d\u6210\u7acb\u65f6\uff0c\u5373\u5bfc\u81f4\u5176\u5bb6\u957f\u8282\u70b9\u7684\u5b50\u8282\u70b9\u6570\u91cf\u4e3a \\(M+1\\) \u65f6\uff0c\u6211\u4eec\u9700\u8981\u5c06\u8fd9\u4e2a\u7ed3\u70b9\u5e73\u5747\u5206\u88c2\u6210\u4e24\u4e2a\uff0c\u6b64\u65f6\u663e\u7136\u6709\u4e24\u4e2a\u5b50\u6811\u7684\u8282\u70b9\u6570\u91cf\u90fd\u4e0d\u5c0f\u4e8e \\(\\lceil M+1 \\rceil\\)\u3002\u4f46\u8fd9\u8fd8\u4e0d\u591f\uff0c\u5206\u88c2\u5bfc\u81f4\u5bb6\u957f\u8282\u70b9\u7684\u5bb6\u957f\u8282\u70b9\u7684\u5b50\u8282\u70b9\u53d8\u591a\uff0c\u6240\u4ee5\u6211\u4eec\u8fd8\u5f97\u5411\u4e0a\u9012\u5f52\u3002</p> <p>\u4f9d\u7136\u662f\u8fdb\u884c\u4e00\u4e2a\u6a21\u62df\uff0c\u6211\u4eec\u6a21\u62df\u63d2\u5165 <code>46</code> \u548c <code>44</code>\u3002</p> <p>Insert(46), no split</p> Frame 1Frame 2Frame 3 <p></p> <p>\u540c\u67e5\u627e\uff0c\u7565\u3002</p> <p></p> <p>\u540c\u67e5\u627e\uff0c\u7565\u3002</p> <p></p> <p>\u627e\u5230\u8981\u585e\u7684\u4f4d\u7f6e\u4e86\uff0c\u53d1\u73b0\u8981\u585e\u7684\u5730\u65b9\u662f <code>45</code> \u7684\u540e\u9762\uff0c\u63d2\u5165\u4ee5\u540e\u53d1\u73b0\u4e00\u5171 4 \u4e2a\u6570\uff0c\u800c \\(M=4\\)\uff0c\u4e0d\u9700\u8981\u5206\u88c2\u3002</p> <p>Insert(44), split</p> Frame 1Frame 2Frame 3Frame 4Frame 5Frame 6 <p></p> <p>\u540c\u67e5\u627e\uff0c\u7565\u3002</p> <p></p> <p>\u540c\u67e5\u627e\uff0c\u7565\u3002</p> <p></p> <p>\u627e\u5230\u8981\u585e\u7684\u4f4d\u7f6e\u4e86\uff0c\u53d1\u73b0\u8981\u585e\u7684\u5730\u65b9\u662f <code>45</code> \u7684\u524d\u9762\uff0c\u63d2\u5165\u4ee5\u540e\u53d1\u73b0\u4e00\u5171 5 \u4e2a\u6570\uff0c\u800c \\(M=4\\)\uff0c\u9700\u8981\u5206\u88c2\uff01</p> <p></p> <p>\u5411\u4e0a\u9012\u5f52\uff0c\u6211\u4eec\u60b2\u75db\u5730\u53d1\u73b0\uff0c\u8fd9\u4e2a\u8282\u70b9\u5728\u5206\u88c2\u540e\u6709\u4e86 <code>5</code> \u4e2a\u5b50\u8282\u70b9\uff0c\u4e0d\u5f97\u4e0d\u518d\u6b21\u5206\u88c2\u3002</p> <p></p> <p>\u5411\u4e0a\u9012\u5f52\uff0c\u6211\u7684\u8001\u5929\u7237\u5440\uff0c\u600e\u4e48\u8fd8\u6ca1\u5230\u5934\uff01\u8fd9\u4e0b\u6211\u4eec\u8981\u5206\u88c2\u6839\u90e8\u4e86\uff01</p> <p></p> <p>\u7531\u4e8e\u6839\u90e8\u88ab\u88c2\u5f00\u4e86\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u6dfb\u52a0\u4e00\u4e2a\u65b0\u7684\u6839\uff0c\u8fd9\u4e5f\u610f\u5473\u7740\u6811\u7684\u5c42\u6570\u589e\u9ad8\u4e86\u3002</p> <p>\u73b0\u5728\uff0c\u6211\u4eec\u7ec8\u4e8e\u5b8c\u6210\u4e86\u63d2\u5165\u3002</p>"},{"location":"ZJU_CS/ADS/week3/","title":"Lecture 3 | Inverted File Index","text":""},{"location":"ZJU_CS/ADS/week3/#_1","title":"\u5012\u6392\u7d22\u5f15","text":"<p>\u5012\u6392\u7d22\u5f15\uff08inverted file index\uff09\u662f\u4e00\u79cd\u5e38\u89c1\u7684\u6587\u672c\u68c0\u7d22\u6280\u672f\uff0c\u7528\u4e8e\u5feb\u901f\u67e5\u627e\u5305\u542b\u7279\u5b9a\u5355\u8bcd\u6216\u77ed\u8bed\u7684\u6587\u6863\u3002\u5b83\u901a\u8fc7\u5c06\u5355\u8bcd\u6216\u77ed\u8bed\u4f5c\u4e3a\u5173\u952e\u5b57\uff0c\u5e76\u5c06\u5b83\u4eec\u51fa\u73b0\u5728\u6587\u6863\u4e2d\u7684\u4f4d\u7f6e\u8bb0\u5f55\u5728\u4e00\u4e2a\u7d22\u5f15\u4e2d\uff0c\u4ece\u800c\u652f\u6301\u5feb\u901f\u7684\u6587\u672c\u68c0\u7d22\u3002\u5728\u641c\u7d22\u8fc7\u7a0b\u4e2d\uff0c\u7cfb\u7edf\u53ef\u4ee5\u5feb\u901f\u5730\u5b9a\u4f4d\u5305\u542b\u6307\u5b9a\u5355\u8bcd\u6216\u77ed\u8bed\u7684\u6587\u6863\uff0c\u5e76\u8fd4\u56de\u5b83\u4eec\u7684\u76f8\u5173\u4fe1\u606f\u3002\u5012\u6392\u7d22\u5f15\u5e7f\u6cdb\u5e94\u7528\u4e8e\u641c\u7d22\u5f15\u64ce\u3001\u6570\u636e\u5e93\u7cfb\u7edf\u548c\u4fe1\u606f\u68c0\u7d22\u7b49\u9886\u57df\u3002</p> <p>\u2014\u2014 ChatGPT</p> <p>Info</p> <p>Wiki: https://en.wikipedia.org/wiki/Inverted_index</p> <p>\u6240\u8c13\u7684\u5012\u6392\u7d22\u5f15\uff0c\u6240\u6709\u7684\u601d\u60f3\u90fd\u51dd\u7ed3\u5728\u4e86\u201c\u5012\u201d\uff0c\u4e5f\u5c31\u662f inverted\u3002\u5982\u679c\u53ef\u4ee5\uff0c\u6211\u89c9\u5f97\u7528\u201c\u9006\u201d\u66f4\u5408\u9002\u3002\u8fd9\u91cc\u7684\u7d22\u5f15\u5bf9\u8c61\u6307\u7684\u662f\u201c\u6587\u6863\u201d\u548c\u201c\u5355\u8bcd\u201d\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u800c\u5012\u6392\u7d22\u5f15\u7684\u610f\u601d\u662f\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u5355\u8bcd\uff0c\u6211\u4eec\u8bb0\u5f55\u5b83\u51fa\u73b0\u5728\u54ea\u4e9b\u6587\u6863\u4e2d\uff0c\u4ee5\u53ca\u8bb0\u5f55\u4ed6\u4eec\u51fa\u73b0\u7684\u6b21\u6570\uff08\u9891\u7387\uff09\u3002</p> <p>\u641c\u7d22\u5f15\u64ce\u662f\u4e00\u4e2a\u975e\u5e38\u5e38\u89c1\u7684\uff0c\u5012\u6392\u7d22\u5f15\u7684\u5e94\u7528\u6848\u4f8b\uff0c\u6211\u4eec\u901a\u8fc7\u8f93\u5165\u6211\u4eec\u5173\u6ce8\u7684\u8bcd\u8bed\uff0c\u6765\u7d22\u5f15\u5305\u542b\u8fd9\u4e2a\u8bcd\u7684\u6240\u6709\u6587\u6863\u3002 \u5f53\u7136\uff0c\u5728\u8fd9\u91cc\u6211\u4eec\u8003\u8651\u7684\u662f\u82f1\u6587\u3002</p> <p></p>"},{"location":"ZJU_CS/ADS/week3/#_2","title":"\u5012\u6392\u7d22\u5f15\u7684\u5b9e\u73b0","text":"<p>\u77e5\u9053\u4e86\u5012\u6392\u7d22\u5f15\u7684\u601d\u60f3\u4e4b\u540e\uff0c\u5176\u5b9e\u73b0\u5c31\u53d8\u5f97\u975e\u5e38\u76f4\u89c2\u4e86\u3002\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a\u5b57\u5178\u6765\u63cf\u8ff0\u4e00\u7c7b\u5173\u7cfb\uff0c\u5176\u4e3b\u952e\u4e3a\u5355\u8bcd\uff0c\u952e\u503c\u4e3a\u8fd9\u4e2a\u5355\u8bcd\u51fa\u73b0\u7684\u6240\u6709\u4f4d\u7f6e\u3002</p> <p>\u6700\u6734\u7d20\u7684\u7248\u672c\u5c31\u662f\u8ba9\u952e\u503c\u4e3a\u5355\u8bcd\u51fa\u73b0\u8fc7\u7684\u6587\u6863\u7684\u5e8f\u53f7\u5e8f\u5217\uff0c\u800c\u5982\u679c\u6211\u4eec\u8fd8\u9700\u8981\u77e5\u9053\u8bcd\u6c47\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u5219\u53ef\u4ee5\u8ba9\u952e\u503c\u662f\u4e00\u4e2a\u4e8c\u5143\u7ec4\u7684\u5e8f\u5217\uff0c\u5176\u4e2d\u7b2c\u4e00\u4e2a\u5143\u7d20\u662f\u6587\u6863\u7684\u5e8f\u53f7\uff0c\u7b2c\u4e8c\u4e2a\u5143\u7d20\u662f\u5355\u8bcd\u5728\u6587\u6863\u4e2d\u51fa\u73b0\u7684\u4f4d\u7f6e\u3002</p> <p>TI/idF: \u8bcd\u9891-\u9006\u6587\u6863\u9891\u7387</p> <p>\u4e00\u4e2a \ud83c\udf30</p> <p>\u4f8b\u5982\u6211\u4eec\u6709\u5982\u4e0b\u6587\u4ef6\u96c6\uff1a</p> <p>\u6587\u6863\u96c6</p> Doc Text 1 Gold silver truck 2 Shipment of gold damaged in a fire 3 Delivery of silver arrived in a silver truck 4 Shipment of gold arrived in a truck <p>\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u5982\u4e0b\u7684\u5012\u6392\u7d22\u5f15\uff1a</p> <p>\u5012\u6392\u7d22\u5f15</p> No. Term Times; (Doc ID: Places) 1 a {3; (2;6),(3;6),(4;6)} 2 arrived {2; (3;4),(4;4)} 3 damaged {1; (2;4)} 4 delivery {1; (3;1)} 5 fire {1; (2;7)} 6 gold {3; (1;1),(2;3),(4;3)} 7 of {3; (2;2),(3;2),(4;2)} 8 in {3; (2;5),(3;5),(4;5)} 9 shipment {2; (2;1),(4;1)} 10 silver {2; (1;2),(3;3,7)} 11 truck {3; (1;3),(3;8),(4;7)} <p>\u6240\u4ee5\u5b9e\u9645\u4e0a\u975e\u5e38\u7b80\u5355\uff0c\u6211\u4eec\u53ea\u9700\u8981\u626b\u63cf\u6587\u6863\uff0c\u7136\u540e\u5b58\u4e0b\u6bcf\u4e00\u4e2a\u6587\u4ef6\u5728\u54ea\u91cc\u51fa\u73b0\u8fc7\u5373\u53ef\u3002</p>"},{"location":"ZJU_CS/ADS/week3/#_3","title":"\u6539\u8fdb","text":"<p>\u90a3\u4e48\u5230\u6b64\u4e3a\u6b62\u4e86\u5417\uff1f\u975e\u4e5f\u3002\u5018\u82e5\u6beb\u65e0\u8282\u5236\u7684\u5c06\u6240\u6709\u8bcd\u90fd\u5b58\u5230\u5012\u6392\u7d22\u5f15\u4e2d\uff0c\u90a3\u4e48\u6211\u4eec\u7684\u5012\u6392\u7d22\u5f15\u5c31\u4f1a\u53d8\u5f97\u975e\u5e38\u5927\uff0c\u5176\u4e2d\u5fc5\u7136\u6709\u5f88\u591a\u5197\u4f59\u4fe1\u606f\u5b58\u5728\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5bf9\u5012\u6392\u7d22\u5f15\u8fdb\u884c\u4e00\u4e9b\u6539\u8fdb\u3002</p>"},{"location":"ZJU_CS/ADS/week3/#_4","title":"\u505c\u7528\u8bcd","text":"<p>\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u6211\u4eec\u5b58\u4e0b\u6765\u7684\u8fd9\u4e9b\u5185\u5bb9\u4e2d\uff0c\u6709\u4e00\u4e9b\u4e1c\u897f\u9891\u7e41\u5730\u51fa\u73b0\u5728\u6240\u6709\u6587\u6863\u4e2d\uff0c\u5728\u7279\u5b9a\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e9b\u8bcd\u53ef\u80fd\u5e76\u4e0d\u4f1a\u6210\u4e3a\u4e00\u4e2a\u7d22\u5f15\uff0c\u4f8b\u5982\u6b63\u5e38\u7684\u82f1\u6587\u6587\u7ae0\u4e2d\u7684 <code>a</code>\uff0c<code>the</code> \u7b49\u3002\u6240\u4ee5\uff0c\u5bf9\u4e8e\u8fd9\u4e00\u7c7b\u8bcd\u2014\u2014\u6211\u4eec\u79f0\u4e4b\u4e3a\u505c\u7528\u8bcd(stop words)\uff0c\u5bf9\u4e8e\u505c\u7528\u8bcd\uff0c\u6211\u4eec\u5c31\u4e0d\u9700\u8981\u5c06\u4ed6\u4eec\u5b58\u4e0b\u4e86\u3002</p> <p>\u54ea\u4e9b\u8bcd\u4f1a\u6210\u4e3a\u505c\u7528\u8bcd\uff1f</p> <p>\u4e00\u822c\u4e00\u4e2a\u8bcd\u6210\u4e3a\u505c\u7528\u8bcd\uff0c\u662f\u56e0\u4e3a\u5b83\u65e0\u6cd5\u6210\u4e3a\u4e00\u4e2a\u6709\u6548\u7684\u68c0\u7d22\u5173\u952e\u5b57\uff0c\u5b83\u53ef\u80fd\u662f\u5728\u5927\u91cf\u8d44\u6599\u4e2d\u5927\u91cf\u51fa\u73b0\uff0c\u5bfc\u81f4\u6211\u4eec\u65e0\u6cd5\u5229\u7528\u5b83\u627e\u51fa\u6211\u4eec\u60f3\u8981\u7684\u8d44\u6599\u3002\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u4e00\u4e2a\u5171\u901a\u70b9\u662f\u5b83\u4eec\u901a\u5e38\u90fd\u6709\u7740\u76f8\u5f53\u9ad8\u7684\u51fa\u73b0\u9891\u7387\u3002</p> <p>\u4f46\u662f\u6211\u4eec\u4e5f\u4e0d\u80fd\u76f2\u76ee\u5730\u5c06\u6240\u6709\u7684\u8bcd\u90fd\u4f5c\u4e3a\u505c\u7528\u8bcd\uff0c\u56e0\u4e3a\u6709\u4e9b\u8bcd\u5b83\u5728\u67d0\u4e9b\u542b\u4e49\u4e0b\u9002\u5408\u4f5c\u4e3a\u4e00\u79cd\u505c\u7528\u8bcd\uff0c\u4f46\u662f\u5728\u53e6\u4e00\u4e9b\u542b\u4e49\u4e0b\uff0c\u5b83\u5c31\u4e0d\u9002\u5408\u4f5c\u4e3a\u505c\u7528\u8bcd\u4e86\uff0c\u4e0d\u8fc7\u8fd9\u4e2a\u95ee\u9898\u5c31\u53d8\u5f97\u6bd4\u8f83\u590d\u6742\u4e86\uff0c\u6240\u4ee5\u8fd9\u91cc\u5e76\u4e0d\u5c55\u5f00\u3002</p>"},{"location":"ZJU_CS/ADS/week3/#_5","title":"\u5b57\u5178\u5b58\u50a8","text":"<ul> <li>B+\u6811</li> <li>\u54c8\u5e0c\u8868</li> <li>tries tree https://www.digitalocean.com/community/tutorials/trie-data-structure-in-c-plus-plus</li> </ul>"},{"location":"ZJU_CS/ADS/week3/#_6","title":"\u8bcd\u5e72\u5206\u6790","text":"<p>\u8bcd\u5e72\u5206\u6790(word stemming)\u662f\u4e00\u79cd\u5c06\u5355\u8bcd\u8f6c\u6362\u4e3a\u5176\u8bcd\u5e72\u7684\u6280\u672f\u3002\u4f8b\u5982\uff0c\u8bcd\u5e72\u5206\u6790\u53ef\u4ee5\u5c06\u5355\u8bcd <code>trouble</code>\uff0c<code>troubled</code>\uff0c<code>troubles</code>\uff0c<code>troubling</code> \u90fd\u8f6c\u6362\u4e3a <code>trouble</code>\uff08\u751a\u81f3\u662f <code>troubl</code>\uff0c\u6838\u5fc3\u76ee\u7684\u662f\u8ba9\u5b83\u4eec\u53d8\u6210\u540c\u4e00\u4e2a\u5355\u8bcd\uff09\u3002\u76f8\u540c\u8bcd\u5e72\u7684\u8bcd\u6709\u7740\u7c7b\u4f3c\u7684\u542b\u4e49\uff0c\u5728\u68c0\u7d22 <code>troubled</code> \u7684\u65f6\u5019\uff0c\u5f53\u7136\u4e5f\u53ef\u80fd\u60f3\u627e\u5230\u5305\u542b <code>trouble</code> \u7684\u6587\u6863\u3002\u8fd9\u79cd\u6280\u672f\u4e5f\u53ef\u4ee5\u8ba9\u591a\u4e2a\u5355\u8bcd\u5171\u4eab\u540c\u4e00\u6761\u7d22\u5f15\u8bb0\u5f55\uff0c\u5728\u5b58\u548c\u627e\u7684\u8fc7\u7a0b\u4e2d\u90fd\u80fd\u4f18\u5316\u6548\u679c\u3002</p> <p>\u4e0d\u8fc7\u5728\u5177\u4f53\u64cd\u4f5c\u65b9\u9762\uff0c\u8fd9\u4e2a\u4e1c\u897f\u5c31\u663e\u5f97\u6bd4\u8f83\u7e41\u6742\u548c\u66b4\u529b\u4e86\uff0c\u6211\u4eec\u53ea\u80fd\u6839\u636e\u8bed\u6cd5\u89c4\u8303\u8fdb\u884c\u66b4\u529b\u5339\u914d\u548c\u5224\u65ad\uff0c\u8fd9\u91cc\u6211\u4eec\u5c31\u4e0d\u5c55\u5f00\u4e86\u3002</p>"},{"location":"ZJU_CS/ADS/week3/#_7","title":"\u5206\u5e03\u5f0f","text":"<p>\u53ef\u60f3\u800c\u77e5\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u641c\u7d22\u5f15\u64ce\u6765\u8bf4\uff0c\u5b83\u6240\u9700\u8981\u7d22\u5f15\u7684\u6587\u6599\u662f\u975e\u5e38\u5e9e\u5927\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u901a\u5e38\u9700\u8981\u5c06\u5176\u5206\u5e03\u5f0f\u5730\u5b58\u50a8\u548c\u7d22\u5f15\u3002</p> <p>\u800c\u8fd9\u91cc\u6709\u4e24\u79cd\u5206\u5e03\u5f0f\u7684\u7b56\u7565\uff0c\u5176\u4e00\u662f\u6839\u636e\u5355\u8bcd\u7684\u5b57\u5178\u5e8f\u8fdb\u884c\u5206\u5e03\u5f0f\uff0c\u5176\u4e8c\u662f\u6839\u636e\u6587\u6863\u8fdb\u884c\u5206\u5e03\u5f0f\u3002</p> <p>\u663e\u7136\u6839\u636e\u5355\u8bcd\u7684\u5185\u5bb9\u8fdb\u884c\u5206\u5e03\u5f0f\uff0c\u80fd\u591f\u63d0\u9ad8\u7d22\u5f15\u6548\u7387\uff0c\u4f46\u662f\u8fd9\u6837\u7684\u8bdd\uff0c\u6211\u4eec\u5c31\u9700\u8981\u5c06\u6240\u6709\u5f62\u5f0f\u63a5\u8fd1\u7684\u5355\u8bcd\u90fd\u5b58\u50a8\u5728\u4e00\u4e2a\u5730\u65b9\uff0c\u8fd9\u6837\u5c31\u4f1a\u9020\u6210\u5355\u70b9\u6545\u969c\uff0c\u5bb9\u707e\u80fd\u529b\u5f88\u5dee\uff0c\u6240\u4ee5\u8fd9\u79cd\u65b9\u5f0f\u5e76\u4e0d\u662f\u5f88\u597d\u3002</p> <p>\u800c\u7b2c\u4e8c\u79cd\u529e\u6cd5\u5219\u6709\u8f83\u5f3a\u7684\u5bb9\u707e\u6027\u80fd\u3002\u5373\u4f7f\u4e00\u53f0\u673a\u5668\u65e0\u6cd5\u5de5\u4f5c\uff0c\u4e5f\u4e0d\u4f1a\u5267\u70c8\u5f71\u54cd\u5230\u6574\u4e2a\u7cfb\u7edf\u7684\u5de5\u4f5c\u3002</p>"},{"location":"ZJU_CS/ADS/week3/#threshold","title":"THreshold","text":"<p>\u8bf7\u533a\u5206<code>document</code>\u548c<code>Query</code>\u5224\u51c6\u7684\u533a\u522b </p> \u4f8b\u9898 <p></p>"},{"location":"ZJU_CS/ADS/week3/#_8","title":"\u6027\u80fd\u8bc4\u4f30","text":"<p>\u5fc5\u8003\uff01\uff01\uff01</p> <p>\u8fd9\u4e2a\u8ba1\u7b97\u5fc5\u8003\u4e00\u5b9a\u8981\u8bb0\u4f4f\u5440\uff01\uff01\uff01</p> <p></p> 23mid <p></p>"},{"location":"ZJU_CS/ADS/week4/","title":"Lecture 4 | Leftist Heap &amp; Skew Heap","text":""},{"location":"ZJU_CS/ADS/week4/#leftist_heap","title":"Leftist Heap","text":"<p>link</p> <p>OI Wiki: https://oi-wiki.org/ds/leftist-tree/</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Leftist_tree</p>"},{"location":"ZJU_CS/ADS/week4/#_1","title":"\u6982\u5ff5","text":"<p>\u5de6\u504f\u5806\uff0c\u6216\u8005\u8bf4\u5de6\u504f\u5806(Leftist Heap)\uff0c\u5b83\u76f8\u6bd4\u4e8e\u666e\u901a\u7684\u5806\uff0c\u66f4\u597d\u7684\u4e00\u70b9\u5728\u4e8e\u5b83\u652f\u6301\u5feb\u901f\u7684\u5806\u5408\u5e76\u64cd\u4f5c\u3002\u201c\u5de6\u504f\u201d\uff0c\u5e76\u4e0d\u65ad\u5c06\u65b0\u7684\u4e1c\u897f\u5f80\u53f3\u4fa7\u5408\u5e76\uff0c\u6765\u5b9e\u73b0\u6bcf\u6b21\u90fd\u662f\u5f80\u76f8\u5bf9\u5c0f\u7684\u90a3\u4e00\u4fa7\u585e\u8fdb\u4e1c\u897f\uff0c\u8fdb\u800c\u4fdd\u76f8\u5bf9\u8bc1\u4e86\u8fd9\u4e2a</p> <p>\u7531\u4e8e\u5de6\u504f\u5806\u4e0d\u518d\u662f\u4e00\u4e2a\u5b8c\u5168\u4e8c\u53c9\u6811\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u80fd\u518d\u50cf\u7ef4\u62a4\u5927\u6839\u5806\u5c0f\u8ddf\u5806\u90a3\u6837\u7528\u6570\u7ec4\u6765\u7ef4\u62a4\u5b83\u4e86\u3002</p> <p>\u4e00\u4e2a\u5de6\u504f\u5806\u7684\u7ed3\u70b9\u7ef4\u62a4\u4e86\u5de6\u53f3\u5b50\u5806\u7684\u5730\u5740\u3001\u81ea\u8eab\u7684\u952e\u503c\u3001\u548c\u4e00\u4e2a\u201c\u8ddd\u79bb(dist)\u201d\u3002 </p> <pre><code>struct LeftistHeapNode {\n    ElementType val;\n    int dist;\n    LeftistHeapNode * ls, * rs;\n};\n</code></pre> <p>'dist' in leftist heap</p> <ol> <li>\u5982\u679c\u4e00\u4e2a\u7ed3\u70b9\u7684\u5de6\u5b69\u5b50\u6216\u53f3\u5b69\u5b50\u4e3a\u7a7a\u7ed3\u70b9\uff0c\u5219\u8be5\u7ed3\u70b9\u7684 dist \u4e3a \\(0\\)\uff0c\u8fd9\u79cd\u7ed3\u70b9\u88ab\u79f0\u4e3a\u5916\u7ed3\u70b9\uff1b</li> <li>\u5982\u679c\u4e00\u4e2a\u7ed3\u70b9\u7684\u5de6\u5b69\u5b50\u548c\u53f3\u5b69\u5b50\u90fd\u4e0d\u4e3a\u7a7a\uff0c\u5219\u8be5\u7ed3\u70b9\u7684 dist \u4e3a \\(\\min{(dist_\\text{left child}, dist_\\text{right child})} + 1\\)\uff1b</li> </ol> <p>eg</p> <p> </p> <p>\u800c\u5de6\u504f\u5806\u5c31\u5efa\u7acb\u5728\u8fd9\u4e9b\u6027\u8d28\u4e0a\uff1a</p> <p>Leftist Heap</p> <p>\u5de6\u504f\u5806\u662f\u7ed3\u70b9\u7684\u952e\u503c\u5e94\u5f53\u4e0d\u5927\u4e8e\uff08\u4e0d\u5c0f\u4e8e\uff09\u5176\u5b69\u5b50\u7ed3\u70b9\u7684\u952e\u503c\u7684\u4e8c\u53c9\u6811\uff08\u5373\u5806\u7684\u6027\u8d28\uff09\uff0c\u4e14\u6ee1\u8db3\u300c\u5de6\u504f\u300d\u6027\u8d28\u2014\u2014\u7ed3\u70b9\u7684\u5de6\u5b69\u5b50\u7684 dist \u4e0d\u5c0f\u4e8e\u53f3\u5b69\u5b50\u7684 dist\u3002</p> <p>\u56e0\u6b64\uff0c\u56de\u987e dist \u7684\u5b9a\u4e49\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u6269\u5c55\u6027\u8d28\uff1a</p> <p>properties</p> <ol> <li>\u7ed3\u70b9\u7684 dist \u7b49\u4e8e \\(dist_\\text{right child} + 1\\)\uff08\u5047\u8bbe \\(dist_\\text{NULL} = -1\\)\uff09\uff1b</li> <li>\u5982\u679c \\(dist_i = N\\)\uff0c\u5219\u4ee5 \\(i\\) \u4e3a\u6839\u7684\u5b50\u6811\u81f3\u5c11\u662f\u4e00\u4e2a \\(N+1\\) \u5c42\u7684\u5b8c\u7f8e\u4e8c\u53c9\u6811\uff0c\u81f3\u5c11\u6709 \\(2^{N+1}-1\\) \u4e2a\u7ed3\u70b9\uff1b</li> </ol> <p> </p> <p>\u6ce8\u610f\uff0c\u5728\u793a\u610f\u56fe\u4e2d\u6211\u4eec\u7701\u7565\u4e86\u7ed3\u70b9\u81ea\u8eab\u952e\u503c\u7684\u6807\u8bb0\uff0c\u4f46\u65e2\u7136\u4f5c\u4e3a\u4e00\u4e2a\u5806\uff0c\u5b83\u5c31\u9700\u8981\u6ee1\u8db3\u5806\u7684\u6027\u8d28\uff0c\u5373\u7ed3\u70b9\u7684\u952e\u503c\u4e0d\u5927\u4e8e\uff08\u4e0d\u5c0f\u4e8e\uff09\u5176\u5b69\u5b50\u7ed3\u70b9\u7684\u952e\u503c\u3002\u5728\u5b9e\u9645\u4f7f\u7528\u8fc7\u7a0b\u4e2d\uff0c\u952e\u503c\u5f88\u53ef\u80fd\u4e0d\u518d\u662f\u5355\u7eaf\u7684\u6570\uff0c\u5927\u5c0f\u5173\u7cfb\u53ef\u80fd\u8f6c\u5316\u4e3a\u504f\u5e8f\u5173\u7cfb\u3002</p> <p>\u7b80\u5355\u601d\u8003\u4e00\u4e0b\uff0c\u4e3a\u4ec0\u4e48\u5de6\u504f\u5806\u4f1a\u8fd9\u4e48\u8bbe\u8ba1\u5462\uff1f\u5b9e\u9645\u4e0a\uff0c\u5408\u5e76\u5806\u9700\u8981\u8003\u8651\u7684\u975e\u5e38\u91cd\u8981\u7684\u4e00\u4e2a\u70b9\u5c31\u662f\u8981\u80fd\u5728\u4e4b\u540e\u7684\u64cd\u4f5c\u4e2d\u5c3d\u53ef\u80fd\u5730\u7ef4\u62a4\u5806\u7684\u201c\u5e73\u8861\u201d\uff0c\u5426\u5219\u6211\u4eec\u628a\u5806\u7ef4\u62a4\u6210\u4e86\u4e00\u4e2a\u94fe\uff0c\u90a3\u663e\u7136\u662f\u975e\u5e38\u7cdf\u7cd5\u7684\u3002</p> <p>\u800c\u5de6\u504f\u5806\u901a\u8fc7\u7ef4\u62a4\u6574\u4e2a\u5806\u201c\u5de6\u504f\u201d\uff0c\u5e76\u4e0d\u65ad\u5f80\u53f3\u4fa7\u5408\u5e76\uff0c\u6765\u5b9e\u73b0\u6bcf\u6b21\u90fd\u662f\u5f80 dist \u76f8\u5bf9\u5c0f\u7684\u90a3\u4e00\u4fa7\u585e\u8fdb\u4e1c\u897f\uff0c\u8fdb\u800c\u4fdd\u8bc1\u4e86\u8fd9\u4e2a\u5806\u7684\u76f8\u5bf9\u5e73\u8861\u6027\u3002</p>"},{"location":"ZJU_CS/ADS/week4/#_2","title":"\u64cd\u4f5c","text":"<p>\u5de6\u504f\u5806\u7684\u6838\u5fc3\u64cd\u4f5c\u5c31\u662f\u5408\u5e76\u3002\u800c\u5176\u5b83\u64cd\u4f5c\u90fd\u53ef\u4ee5\u770b\u4f5c\u662f\u5408\u5e76\u7684\u7279\u6b8a\u60c5\u51b5\u3002\u56e0\u6b64\u6211\u4eec\u9996\u5148\u8ba8\u8bba\u4efb\u610f\u4e24\u4e2a\u5de6\u504f\u5806\u7684\u5408\u5e76\u3002</p>"},{"location":"ZJU_CS/ADS/week4/#_3","title":"\u5408\u5e76","text":"<p>\u4f5c\u4e3a\u5de6\u504f\u5806\u7684\u6838\u5fc3\u64cd\u4f5c\uff0c\u5408\u5e76\u64cd\u4f5c\u81ea\u7136\u5c31\u662f\u8981\u5728\u6ee1\u8db3\u6027\u8d28\u7684\u6761\u4ef6\u4e0b\uff0c\u5408\u5e76\u4e24\u4e2a\u5de6\u504f\u5806\u3002\u5927\u81f4\u601d\u8def\u5c31\u662f\u5148\u7ef4\u62a4\u5806\u7684\u6027\u8d28\uff0c\u5728\u56de\u6eaf\u65f6\u7ef4\u62a4\u5de6\u504f\u6027\u8d28\uff0c\u6240\u4ee5\u5b9e\u9645\u4e0a\u5b83\u662f\u4e00\u4e2a\u5148\u81ea\u4e0a\u800c\u4e0b\u518d\u81ea\u4e0b\u800c\u4e0a\u7684\u8fc7\u7a0b\u3002</p> <p>\u6309\u7167\u5b9e\u73b0\u65b9\u6cd5\uff0c\u5de6\u504f\u5806\u7684\u5408\u5e76\u53ef\u4ee5\u5206\u4e3a\u9012\u5f52\u5f0f\u548c\u8fed\u4ee3\u5f0f\u4e24\u79cd\u3002\u5176\u4e2d\u524d\u8005\u53ef\u80fd\u66f4\u4e3a\u76f4\u89c9\uff0c\u800c\u540e\u8005\u53ef\u89c6\u5316\u540e\u5219\u66f4\u4e3a\u76f4\u89c2\u3002</p> <p>\u4e3a\u4e86\u65b9\u4fbf\u540e\u7eed\u7684\u4ee3\u7801\u63cf\u8ff0\uff0c\u6211\u4eec\u9996\u5148\u7ed9\u51fa\u5de6\u504f\u5806\u7ed3\u70b9\u5728\u672c\u6587\u4e2d\u7684\u5b9a\u4e49\uff1a</p> <pre><code>struct LeftistHeapNode {\n    ElementType val;\n    int dist;\n    LeftistHeapNode * ls, * rs;\n};\n</code></pre>"},{"location":"ZJU_CS/ADS/week4/#_4","title":"\u9012\u5f52\u5f0f","text":"<p>\u9012\u5f52\u5f0f\u5148\u6bd4\u8f83\u5f53\u524d\u4e24\u4e2a\u5f85\u5408\u5e76\u5b50\u6811\u7684\u6839\u7ed3\u70b9\u7684\u952e\u503c\uff0c\u9009\u62e9\u8f83\u5c0f\uff08\u8f83\u5927\uff09\u7684\u90a3\u4e2a\u4f5c\u4e3a\u6839\u7ed3\u70b9\uff0c\u5176\u5de6\u5b50\u6811\u4f9d\u7136\u4e3a\u5de6\u5b50\u6811\uff0c\u53f3\u5b50\u6811\u66f4\u65b0\u4e3a\u300c\u53f3\u5b50\u6811\u548c\u53e6\u4e00\u4e2a\u5f85\u5408\u5e76\u5b50\u6811\u7684\u5408\u5e76\u7ed3\u679c\u300d\u3002</p> <p>\u5f53\u7136\uff0c\u5728\u9012\u5f52\u5730\u66f4\u65b0\u5b8c\u540e\uff0c\u6211\u4eec\u9700\u8981\u68c0\u67e5\u5de6\u5b50\u6811\u548c\u53f3\u5b50\u6811\u662f\u5426\u6ee1\u8db3 \\(dist_\\text{left child} \\geq dist_\\text{right child}\\) \u7684\u6027\u8d28\uff0c\u5982\u679c\u4e0d\u6ee1\u8db3\uff0c\u6211\u4eec\u5219\u9700\u8981\u4ea4\u6362\u5de6\u53f3\u5b50\u6811\u6765\u7ef4\u6301\u6027\u8d28\u3002</p> <pre><code>LeftistHeapNode * merge(LeftistHeapNode * x, LeftistHeapNode * y) {\n    // Recursive exit. If any is NULL, return the other as the new root of subtree.\n    if (x == NULL) return y;\n    if (y == NULL) return x;\n\n    // If `x`'s val is smaller than `y`'s, swap them, which means we always operates on `x`.\n    if (x-&gt;val &gt; y-&gt;val) {\n        swap(x, y);\n    }\n\n    // Merge `x`'s right subtree and `y`, and set `x`'s right subtree to the result.\n    x-&gt;rs = merge(x-&gt;rs, y);\n\n    // If `x`'s left subtree's dist is smaller than `x`'s right subtree's dist, swap them.\n    if (x-&gt;ls-&gt;dist == NULL || x-&gt;ls-&gt;dist &lt; x-&gt;rs-&gt;dist) {\n        swap(x-&gt;ls, x-&gt;rs);\n    }\n\n    // Update x's dist.\n    x-&gt;dist = x-&gt;rs-&gt;dist + 1;\n\n    // Return x as the new root of subtree.\n    return x;\n}\n</code></pre> <p>\ud83c\udf30</p> <p>\u73b0\u5728\u6211\u4eec\u6a21\u62df\u4e00\u4e0b\u8fd9\u4e2a\u8fc7\u7a0b\uff0c\u73b0\u5728\u6211\u4eec\u6709\u4e0b\u9762\u4e24\u4e2a\u5de6\u504f\u5806\uff0c\u5c1d\u8bd5\u5408\u5e76\u5b83\u4eec\u3002</p> Frame 0Frame 1Frame 2Frame 3Frame 4Frame 5 <p></p> <p></p> <p>\u6211\u4eec\u53d1\u73b0\uff0c\u7ecf\u8fc7\u6bd4\u8f83\uff0c\u2776 \u66f4\u5c0f\uff0c\u6240\u4ee5\u6211\u4eec\u5c06 \u2776 \u4f5c\u4e3a\u5408\u5e76\u540e\u7684\u6839\u7ed3\u70b9\uff0c\u5de6\u5b50\u6811\u4e0d\u53d8\uff0c\u53f3\u5b50\u6811\u66f4\u65b0\u4e3a\u300c\u7eff\u6811\u53f3\u5b50\u6811\u548c\u84dd\u6811\u7684\u5408\u5e76\u7ed3\u679c\u300d\u3002</p> <p></p> <p>\u7ecf\u8fc7\u6bd4\u8f83\uff0c\u2777 \u66f4\u5c0f\uff0c\u6240\u4ee5\u6211\u4eec\u5c06 \u2777 \u4f5c\u4e3a\u5408\u5e76\u540e\u7684\u6839\u7ed3\u70b9\uff0c\u5de6\u5b50\u6811\u4e0d\u53d8\uff0c\u53f3\u5b50\u6811\u66f4\u65b0\u4e3a\u300c\u84dd\u6811\u53f3\u5b50\u6811\u548c\u7eff\u6811\u7684\u5408\u5e76\u7ed3\u679c\u300d\u3002</p> <p></p> <p>\u6700\u540e\u8fd8\u5269\u4e0b\u4e24\u4e2a\u7ed3\u70b9\u5566\uff01\u5b9e\u9645\u4e0a\u8fd9\u91cc\u76f4\u63a5\u6a21\u62df\u4e86\u4e24\u4e2a\u6b65\u9aa4\uff0c\u9996\u5148\u662f\u6bd4\u8f83 \u277a \u548c \u277b\uff0c\u5e76\u9009\u62e9\u4e86 \u277a \u4f5c\u4e3a\u65b0\u6839\uff1b\u63a5\u4e0b\u6765\u5728\u9012\u5f52\u7684\u8fc7\u7a0b\u4e2d\u53d1\u73b0\u9700\u8981\u5408\u5e76 <code>NULL</code> \u548c \u277b\uff0c\u6240\u4ee5\u76f4\u63a5\u8fd4\u56de\u4e86 \u277b\u3002</p> <p>\u7136\u800c\u8fd8\u6ca1\u6709\u7ed3\u675f\uff0c\u6211\u4eec\u8fd8\u9700\u8981\u5904\u7406\u5de6\u53f3\u5b50\u6811 dist \u5927\u5c0f\u5173\u7cfb\u95ee\u9898\u3002</p> <p></p> <p>\u6211\u4eec\u53d1\u73b0 \u277a \u7684\u5de6\u5b69\u5b50\u4e3a <code>NULL</code>\uff0c\u6211\u4eec\u8bb0 \\(dist_\\text{NULL} = -1\\)\uff0c\u53f3\u5b69\u5b50 \u277b \u6709 \\(dist_\\text{right child}=0\\)\uff0c\u6240\u4ee5\u9700\u8981\u4ea4\u6362\u4e24\u4e2a\u5b69\u5b50\u3002</p> <p></p> <p>\u8fd9\u91cc\u4e5f\u8df3\u8fc7\u4e86\u4e24\u4e2a\u6b65\u9aa4\uff1a</p> <p>\u5f80\u56de\u8d70\uff0c\u53d1\u73b0 \u277a \u7684 dist \u5c0f\u4e8e \u2779 \u7684 dist\uff0c\u6ee1\u8db3\u6027\u8d28\uff0c\u4e0d\u9700\u8981\u6539\u53d8\u3002</p> <p>\u7ee7\u7eed\u5f80\u56de\u8d70\uff0c\u53d1\u73b0 \u2777 \u548c \u2778 \u7684 dist \u76f8\u540c\uff0c\u6ee1\u8db3\u6027\u8d28\uff0c\u4e5f\u4e0d\u9700\u8981\u6539\u53d8\u3002</p> <p>\u4ece\u8fd9\u91cc\u4e5f\u53ef\u4ee5\u770b\u51fa\u6765\uff0c\u5e76\u4e0d\u662f\u770b\u4e0a\u53bb\u66f4\u5927\u7684\u5b50\u6811\u4e00\u5b9a\u5728\u5de6\u4fa7\u3002</p>"},{"location":"ZJU_CS/ADS/week4/#_5","title":"\u8fed\u4ee3\u5f0f","text":"<p>\u8fed\u4ee3\u5f0f\u662f\u6839\u636e\u5b83\u7684\u5b9e\u73b0\u65b9\u6cd5\u6765\u547d\u540d\u7684\uff0c\u4f46\u662f\u6211\u8ba4\u4e3a\u4ece\u53ef\u89c6\u5316\u7684\u89d2\u5ea6\u6765\u7406\u89e3\u8fed\u4ee3\u5f0f\u53ef\u80fd\u66f4\u6709\u610f\u601d\u3002\u4e8b\u5b9e\u4e0a\u5728\u5f88\u591a\u9898\u76ee\u4e2d\u6211\u89c9\u5f97\u8fd9\u4e2a\u65b9\u6cd5\u505a\u9898\u66f4\u52a0\u65b9\u4fbf\u3002</p> <p>\u8fed\u4ee3\u5f0f\u7ef4\u62a4\u4e24\u4e2a\u989d\u5916\u7684\u6307\u9488\uff0c\u5206\u522b\u6307\u5411\u4e24\u68f5\u6811\u8fd8\u6ca1\u88ab\u5408\u5e76\u7684\u5b50\u6811\u7684\u6839\uff0c\u5e76\u4e0d\u65ad\u9009\u62e9\u8f83\u5c0f\u7684\u90a3\u4e2a\u5408\u5e76\u8fdb\u53bb\uff0c\u76f4\u5230\u4e24\u4e2a\u6307\u9488\u90fd\u4e3a\u7a7a\u3002\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u548c\u5f52\u5e76\u6392\u5e8f\u7684\u540e\u534a\u90e8\u5206\u975e\u5e38\u76f8\u4f3c\uff0c\u5b9e\u9645\u4e0a\u5f53\u6211\u4eec\u4ece\u53ef\u89c6\u5316\u7684\u89d2\u5ea6\u53bb\u770b\u8fd9\u4ef6\u4e8b\u4ee5\u540e\uff0c\u4f1a\u53d1\u73b0\u8fd9\u91cc\u505a\u7684\u5c31\u662f\u4e00\u4e2a\u5f52\u5e76\u3002</p> <pre><code>LeftistHeapNode * merge(LeftistHeapNode * x, LeftistHeapNode * y) {\n    // `tx` &amp; `ty` are the pointers to the roots of the subtrees that haven't been merged.\n    LeftistHeapNode * tx = x, * ty = y;\n    // `res` is the root of the merged final tree, while `cur` is the latest node that has been merged.\n    LeftistHeapNode * res = NULL, * cur = NULL;\n\n    // Begin merging.\n    whie (tx != NULL &amp;&amp; ty != NULL) {\n        // If `tx`'s val is smaller than `ty`'s, swap them, which means we always operates on `tx`.\n        if (tx-&gt;val &gt; ty-&gt;val) {\n            swap(tx, ty);\n        }\n\n        // Specially mark the root on the first merge.\n        if (res == NULL) {\n            res = tx;\n            cur = tx;\n        } else {\n            cur-&gt;rs = tx;\n            cur = cur-&gt;rs;\n        }\n\n        // Go on.\n        tx = tx-&gt;rs;\n    }\n\n    // Merge the rest of the tree.\n    while (ty != NULL) {\n        // Specially mark the root on the first merge. (rarely happens but not impossible)\n        if (res == NULL) {\n            res = ty;\n            cur = ty;\n        } else {\n            cur-&gt;rs = ty;\n            cur = cur-&gt;rs;\n        }\n\n        // Go on.\n        ty = ty-&gt;rs;\n    }\n\n    // Adjust the left and right subtrees of all the nodes according to the properties of `dist`. \n    // It does the same work as the adjust part in the recursive version. I ignore it here.\n    res = adjust(res);\n\n    return res;\n}\n</code></pre> <p>\u4f9d\u65e7\u662f\u4ee5\u4e0a\u9762\u8fdb\u884c\u6a21\u62df\u7684\u90a3\u4e2a\u5408\u5e76\u4e3a \ud83c\udf30 \u8fdb\u884c\u6a21\u62df\u3002</p> <p>\ud83c\udf30</p> <p>\u9996\u5148\uff0c\u6211\u4eec\u5bf9\u56fe\u7247\u7684\u6392\u7248\u7a0d\u5fae\u505a\u4e00\u4e9b\u6539\u53d8\uff0c\u6211\u4eec\u4e0d\u518d\u6309\u7167\u4e4b\u524d\u753b\u5806\u7684\u65b9\u5f0f\u53bb\u753b\uff0c\u800c\u662f\u201c\u5de6\u504f\u201d\u5730\u53bb\u753b\uff1a</p> <p></p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u5728\u8c03\u6574\u4e4b\u524d</p> Frame 0Frame 1Frame 2Frame 3Frame 4Frame 5 <p></p> <p>\u7eff\u8272\u548c\u84dd\u8272\u7684\u7bad\u5934\u5206\u522b\u8868\u793a\u4e24\u4e2a\u5f85\u5408\u5e76\u5b50\u6811\u5c1a\u672a\u5408\u5e76\u7684\u5b50\u6811\u7684\u6839\uff0c\u7d2b\u8272\u7bad\u5934\u8868\u793a\u6700\u8fd1\u7684\u5408\u5e76\u53d1\u751f\u7684\u4f4d\u7f6e\u3002</p> <p></p> <p>\u6bd4\u8f83 \u2776 \u548c \u2777\uff0c\u53d1\u73b0 \u2776 \u66f4\u5c0f\uff0c\u6240\u4ee5\u6211\u4eec\u5c06 \u2776 \u4f5c\u4e3a\u5408\u5e76\u540e\u7684\u6839\u7ed3\u70b9\uff0c\u5de6\u5b50\u6811\u968f\u4e4b\u5408\u5e76\u8fdb\u53bb\uff0c\u540c\u65f6\u66f4\u65b0\u7eff\u8272\u7bad\u5934\u6307\u5411\u5c1a\u672a\u5408\u5e76\u8fdb\u53bb\u7684 \u277a\u3002</p> <p></p> <p>\u548c\u4e0a\u4e00\u6b65\u7c7b\u4f3c\u7684\uff0c\u6bd4\u8f83 \u277a \u548c \u2777\uff0c\u53d1\u73b0 \u2777 \u66f4\u5c0f\uff0c\u6240\u4ee5\u6211\u4eec\u5c06 \u2777 \u4f5c\u4e3a\u5408\u5e76\u540e\u7684\u6839\u7ed3\u70b9\uff0c\u5de6\u5b50\u6811\u968f\u4e4b\u5408\u5e76\u8fdb\u53bb\uff0c\u540c\u65f6\u66f4\u65b0\u84dd\u8272\u7bad\u5934\u6307\u5411\u5c1a\u672a\u5408\u5e76\u8fdb\u53bb\u7684 \u277b\u3002</p> <p></p> <p>\u4f9d\u7136\u7c7b\u4f3c\u5730\uff0c\u6bd4\u8f83 \u277a \u548c \u277b\uff0c\u53d1\u73b0 \u277a \u66f4\u5c0f\uff0c\u6240\u4ee5\u6211\u4eec\u5c06 \u277a \u4f5c\u4e3a\u5408\u5e76\u540e\u7684\u6839\u7ed3\u70b9\uff0c\u5de6\u5b50\u6811\u968f\u4e4b\u5408\u5e76\u8fdb\u53bb\uff0c\u540c\u65f6\u66f4\u65b0\u7eff\u8272\u7bad\u5934\u6307\u5411 <code>NULL</code>\u3002</p> <p></p> <p>\u8fd9\u65f6\u5019\u6211\u4eec\u53d1\u73b0\u5df2\u7ecf\u6709\u4e00\u4e2a\u6307\u9488\u7a7a\u4e86\uff0c\u4e5f\u5c31\u662f\u7eff\u8272\u6307\u9488\u5df2\u7ecf\u6307\u5411\u4e86 <code>NULL</code>\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u53ea\u9700\u8981\u6309\u987a\u5e8f\u628a\u84dd\u8272\u6307\u9488\u6307\u5411\u7684\u5185\u5bb9\u90fd\u63a8\u8fdb\u53bb\u5373\u53ef\u3002</p> <p></p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u8fd8\u9700\u8981\u7ef4\u62a4 dist \u4fe1\u606f\u5e76\u6839\u636e\u6027\u8d28\u4ea4\u6362\u5de6\u53f3\u5b50\u6811\u3002\u8fd9\u4e00\u90e8\u5206\u548c\u4e4b\u524d\u4e00\u6837\uff0c\u5c31\u4e0d\u518d\u8d58\u8ff0\u4e86\u3002</p> <p>\ud83c\udf30/\ud83d\udd25</p> <p>\u5f53\u7136\uff0c\u8fd9\u4e48\u6765\u770b\u53ef\u80fd\u8fd8\u662f\u5f88\u4e71\uff0c\u8054\u60f3\u6211\u4eec\u4e4b\u524d\u53d1\u73b0\u5b83\u548c\u5f52\u5e76\u6392\u5e8f\u5f88\u50cf\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u7528\u4e00\u4e2a\u66f4\u52a0\u76f4\u89c2\u7684\u65b9\u5f0f\u6765\u770b\u8fd9\u4e2a\u8fc7\u7a0b\uff1a</p> Frame 0Frame 1Frame 2 <p></p> <p>\u540c\u6837\u4ece\u8fd9\u5f20\u56fe\u5f00\u59cb\uff0c\u7531\u4e8e\u6211\u4eec\u4e4b\u524d\u63d0\u5230\u7684\uff0c\u5b83\u7c7b\u4f3c\u4e8e\u4e00\u4e2a\u9012\u5f52\u6392\u5e8f\u7684\u540e\u534a\u90e8\u5206\uff0c\u5177\u4f53\u6765\u8bf4\u662f\u6307\u5408\u5e76\u4e24\u4e2a\u6709\u5e8f\u6570\u5217\u7684\u8fc7\u7a0b\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e24\u4e2a\u5de6\u504f\u5806\u6539\u5199\u6210\u4e24\u4e2a\u6709\u5e8f\u6570\u5217\uff01</p> <p></p> <p>\u7531\u4e8e\u6211\u4eec\u5728\u5408\u5e76\u8fc7\u7a0b\u4e2d\u603b\u662f\u627e\u53f3\u5b69\u5b50\uff0c\u6240\u4ee5\u6211\u4eec\u5c31\u6cbf\u7740\u6700\u53f3\u6cbf\u8def\u5f84\u628a\u6ca1\u4e2a\u5de6\u504f\u5806\u62c6\u6210\u8fd9\u79cd\u201c\u60ac\u540a\u201d\u7684\u5e26\u72b6\u5f62\u5f0f\uff0c\u6bcf\u4e00\u201c\u6761\u201d\u7684\u503c\u53d6\u51b3\u4e8e\u6839\u7684\u952e\u503c\uff0c\u4e5f\u5c31\u662f\u8fd9\u4e00\u201c\u6761\u201d\u7684\u6700\u9876\u90e8\u3002</p> <p>\u5728\u8fd9\u5f20\u56fe\u4e2d\uff0c\u6211\u4eec\u5f97\u5230\u7684\u4e24\u4e2a\u6709\u5e8f\u6570\u7ec4\u5206\u522b\u662f [1, 5] \u548c [2, 6]\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u5c06\u5b83\u4eec\u8fdb\u884c\u6392\u5e8f\u3002</p> <p> </p> <p>\u7ecf\u8fc7\u6392\u5e8f\uff0c\u5c31\u4f1a\u53d1\u73b0\u5b83\u4eec\u521a\u597d\u7b26\u5408\u6211\u4eec\u5728\u4e0a\u9762\u6b65\u9aa4\u5f97\u5230\u7684\u7ed3\u679c\uff08\u53ef\u4ee5\u5bf9\u6bd4\u7740\u4e0a\u9762\u7684 Frame 4 \u770b\uff09\u3002\u5b9e\u9645\u4e0a\uff0c\u53ea\u8981\u4f60\u56de\u987e\u4e00\u4e0b\u5f52\u5e76\u6392\u5e8f\u7684\u8fc7\u7a0b\uff0c\u518d\u5bf9\u6bd4\u7740\u770b\u4e0a\u9762\u7684\u8fc7\u7a0b\uff0c\u5c31\u4f1a\u53d1\u73b0\u4e00\u6a21\u4e00\u6837\u3002</p> <p>\u518d\u6b21\u63d0\u9192\uff0c\u8fd9\u4e00\u5c0f\u8282\u8bb2\u7684\u90e8\u5206\u90fd\u5ffd\u7565\u4e86\u4e4b\u540e\u8c03\u6574\u5b50\u6811\u5de6\u504f\u6027\u8d28\u7684\u8fc7\u7a0b\uff0c\u5b9e\u9645\u4e0a\u8fd9\u4e5f\u5c31\u5355\u7eaf\u662f\u4e00\u4e2a\u7ef4\u62a4\u5806\u6027\u8d28\u7684\u8fc7\u7a0b\u3002</p>"},{"location":"ZJU_CS/ADS/week4/#_6","title":"\u5355\u70b9\u63d2\u5165","text":"<p>\u63d2\u5165\u7ed3\u70b9\u53ef\u4ee5\u770b\u4f5c\u5408\u5e76\u4e00\u4e2a\u53ea\u6709\u4e00\u4e2a\u7ed3\u70b9\u7684\u5de6\u504f\u5806\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u590d\u7528\u5408\u5e76\u8fc7\u7a0b\u3002</p>"},{"location":"ZJU_CS/ADS/week4/#_7","title":"\u5355\u70b9\u5220\u9664","text":"<p>\u8ba9\u6211\u4eec\u4e00\u822c\u6027\u5730\u8003\u8651\u4e00\u4e2a\u7ed3\u70b9\uff0c\u4e0e\u5b83\u76f8\u5173\u7684\u4e3b\u8981\u6709\u4e09\u4e2a\u65b9\u5411\uff1a\u7236\u7ed3\u70b9\u548c\u4e24\u4e2a\u5b69\u5b50\u7ed3\u70b9\u3002</p> <p>\u800c\u5355\u70b9\u5220\u9664\u7684\u64cd\u4f5c\u4e5f\u5f88\u7b80\u5355\uff0c\u53ea\u9700\u8981\u5408\u5e76\u9700\u8981\u88ab\u5220\u9664\u7684\u7ed3\u70b9\u7684\u4e24\u4e2a\u5b50\u7ed3\u70b9\uff0c\u7136\u540e\u5c06\u8fd9\u4e2a\u65b0\u7684\u6811\u7684\u6839\u4ee3\u66ff\u88ab\u5220\u9664\u7684\u7ed3\u70b9\uff0c\u518d\u5728\u56de\u6eaf\u7684\u8fc7\u7a0b\u4e2d bottom-up \u5730\u66f4\u65b0 dist \u5373\u53ef\u3002</p> <pre><code>LeftistHeapNode * del(LeftistHeapNode * cur, ElementType x) {\n    if (cur-&gt;val == x) {\n        // Just return the merge of the children.\n        return merge(cur-&gt;l, cur-&gt;r);\n    } else {\n        // Not this subtree.\n        if (cur-&gt;val &gt; x) return cur;\n\n        // Otherwise, search the `x`.\n        if (cur-&gt;l != NULL) del(cur-&gt;l, x);\n        if (cur-&gt;r != NULL) del(cur-&gt;r, x);\n\n        // Adjust the dist bottom-up.\n        adjust(cur);\n    }\n}\n</code></pre>"},{"location":"ZJU_CS/ADS/week4/#skew_heap","title":"Skew Heap","text":"<p>link</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Skew_heap</p> <p>\u659c\u5806(Skew Heap)\u662f\u6bd4\u5de6\u504f\u5806\u66f4\u4e3a\u4e00\u822c\u7684\u6570\u636e\u7ed3\u6784\uff0c\u5b83\u540c\u6837\u6709\u7740\u80fd\u591f\u5feb\u901f\u5408\u5e76\u7684\u6027\u8d28\u3002</p> <p>\u5934\u8111\u98ce\u66b4</p> <p>\u8ba9\u6211\u4eec\u56de\u987e\u4e00\u4e0b\u5de6\u504f\u5806\uff0c\u7531\u4e8e\u9700\u8981\u81ea\u4e0b\u800c\u4e0a\u5730\u7ef4\u62a4 dist\uff0c\u6240\u4ee5\u6211\u4eec\u65e0\u6cd5\u8fdb\u884c\u5e76\u53d1\u64cd\u4f5c\u3002\u56de\u987e AVL \u6811\uff0c\u540c\u6837\u4e3a\u4e86\u7ef4\u62a4\u5b83\u6bd4\u8f83\u4e25\u683c\u7684\u5e73\u8861\u6027\u8d28\uff0c\u6211\u4eec\u4e5f\u65e0\u6cd5\u8fdb\u884c\u5e76\u53d1\u64cd\u4f5c\uff0c\u800c\u7ea2\u9ed1\u6811\u5219\u901a\u8fc7\u4e00\u4e2a\u80fd\u591f\u4ec5\u4ec5\u901a\u8fc7\u53d8\u8272\u5c31\u80fd\u8c03\u6574\u7684\u9ed1\u9ad8\u6765\u89c4\u907f\u4e86\u5fc5\u987b\u81ea\u4e0b\u800c\u4e0a\u7ef4\u62a4\u7684\u95ee\u9898\uff0c\u5b9e\u73b0\u4e86\u5e76\u53d1\u3002</p> <p>\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u8981\u60f3\u5c06\u5de6\u504f\u5806\u6539\u53d8\u5730\u80fd\u591f\u8fdb\u884c\u81ea\u4e0a\u800c\u4e0b\u7ef4\u62a4\uff0c\u5c31\u9700\u8981\u6539\u53d8\u751a\u81f3\u653e\u5f03\u5b83\u7684\u5de6\u504f\u6027\u8d28\u7684\u4e25\u683c\u6027\u2014\u2014\u800c\u8fd9\u5c31\u662f\u659c\u5806\u7684\u7531\u6765\u3002</p> <p>\u659c\u5806\u4e5f\u9700\u8981\u6ee1\u8db3\u5927\u6839\u5806\uff08\u5c0f\u6839\u5806\uff09\u7684\u6027\u8d28\uff0c\u800c\u5b83\u7684\u5408\u5e76\u548c\u5de6\u504f\u5806\u7684\u5408\u5e76\u4e5f\u5341\u5206\u7c7b\u4f3c\uff0c\u53ea\u4e0d\u8fc7\u6211\u4eec\u8fd9\u6b21\u65e0\u6761\u4ef6\u7684\u4ea4\u6362\u5de6\u53f3\u5b50\u6811\uff0c\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u4e0d\u7ba1\u5de6\u504f\u6027\u8d28\u5982\u4f55\u53d8\u5316\uff0c\u6211\u4eec\u90fd\u4f1a\u9009\u62e9\u4ea4\u6362\u53c2\u4e0e\u5408\u5e76\u7684\u5de6\u53f3\u5b50\u6811\uff0c\u8fd9\u6837\u6211\u4eec\u5c31\u4e0d\u9700\u8981\u5728\u56de\u6eaf\u7684\u65f6\u5019\u624d\u8fdb\u884c\u5de6\u53f3\u5b50\u6811\u7684\u4ea4\u6362\uff0c\u4e8e\u662f\u5c31\u5b9e\u73b0\u4e86\u5b8c\u5168\u7684\u81ea\u4e0a\u800c\u4e0b\u3002</p> <p>\u8ba9\u6211\u4eec\u6765\u770b\u770b wiki \u91cc\u7ed9\u51fa\u7684 \ud83c\udf30\uff1a</p> <p>\ud83c\udf30 from wikipedia</p> Frame 0Frame 1 <p></p> <p>\u8fd9\u662f\u6211\u4eec\u9700\u8981\u5408\u5e76\u7684\u4e24\u4e2a\u5806\u3002</p> <p></p> <p>\u7701\u7565\u4e86\u4e2d\u95f4\u7684\u6b65\u9aa4\uff0c\u53ef\u4ee5\u5c1d\u8bd5\u6a21\u62df\u4e00\u4e0b\uff0c\u6bcf\u4e00\u6b21\u5408\u5e76\u64cd\u4f5c\u7ed3\u675f\u4e4b\u540e\u90fd\u4ea4\u6362\u5de6\u53f3\u5b50\u6811\u3002</p> <p>\u6211\u4eec\u603b\u662f\u5148\u5f80\u53f3\u4fa7\u5b50\u6811\u9012\u5f52\u4e0b\u53bb\u5730\u5408\u5e76\uff0c\u6bcf\u5b8c\u6210\u4e00\u6b21\u5408\u5e76\u5c31\u4ea4\u6362\u8fd9\u4e2a\u5b50\u6811\u548c\u5b83\u7684\u5144\u5f1f\u59d0\u59b9\uff0c\u800c\u5b83\u7684\u5144\u5f1f\u59d0\u59b9\u5728\u8fd9\u6b21\u4ea4\u6362\u5b8c\u4ee5\u540e\u5c31\u4e0d\u4f1a\u518d\u53d1\u751f\u6539\u53d8\uff0c\u800c\u8fd9\u4e2a\u5b50\u6811\u5219\u4f1a\u7ee7\u7eed\u8fdb\u884c\u4e0b\u4e00\u6b21\u5408\u5e76\u3002</p> <p>\u7701\u7565\u4e0a\u9762\u7684\u7ed8\u56fe\u663e\u7136\u662f\u6211\u61d2\u5f97\u753b\u4e86\uff0c\u76f8\u4fe1\u5927\u5bb6\u5728\u4e86\u89e3\u5de6\u504f\u5806\u7684\u5408\u5e76\u4ee5\u540e\u4e5f\u80fd\u5f88\u5feb\u611f\u53d7\u5230\u659c\u5806\u662f\u5982\u4f55\u5408\u5e76\u7684\u3002</p> <p>\u5f53\u7136\uff0c\u5b83\u4e5f\u662f\u652f\u6301\u8fed\u4ee3\u7684\u5199\u6cd5\u7684\uff0c\u548c\u662f\u548c\u4e4b\u524d\u7684\u505a\u6cd5\u7c7b\u4f3c\uff0c\u6211\u4eec\u53ef\u4ee5\u6392\u5e8f\u6bcf\u4e00\u201c\u6761\u201d\uff0c\u7136\u540e\u518d\u5408\u5e76\u3002Wikipedia \u4e0a\u63d0\u4f9b\u4e86\u4e00\u7cfb\u5217\u7684\u8fc7\u7a0b\u56fe\uff0c\u4f46\u662f\u90a3\u4e2a\u8fc7\u7a0b\u56fe\u6709\u70b9\u81ea\u4e0b\u800c\u4e0a\u7684\u610f\u601d\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u81ea\u4e0a\u800c\u4e0b\u505a\u4e5f\u662f\u4e00\u6837\u7684\u3002\u5982\u679c\u6709\u5174\u8da3\u53ef\u4ee5\u53bb\u770b\u770b Wiki \u4e0a\u7684\u8fc7\u7a0b\uff1a\ud83d\udd17\u3002</p>"},{"location":"ZJU_CS/ADS/week4/#_8","title":"\u5408\u7406\u6027\u5206\u6790","text":"<p>\u7136\u800c\uff0c\u968f\u4e4b\u51fa\u73b0\u7684\u4e00\u4e2a\u95ee\u9898\u4e0a\uff0c\u6211\u4eec\u7528\u4e86\u8fd9\u79cd\u770b\u8d77\u6765\u6709\u70b9\u4e0d\u7ba1\u4e09\u4e03\u4e8c\u5341\u4e00\u7684\u505a\u6cd5\uff0c\u90a3\u5b83\u7684\u6b63\u786e\u6027\u5982\u4f55\u4fdd\u8bc1\u5462\uff1f</p> <p>\u9996\u5148\u8fdb\u884c\u611f\u6027\u7684\u7406\u89e3\u3002\u6211\u4eec\u6bcf\u5408\u5e76\u4e24\u4e2a\u5806\u90fd\u662f\u6cbf\u7740\u6700\u53f3\u4fa7\u8def\u5f84\u5408\u5e76\uff08\u867d\u7136\u4e2d\u95f4\u4f1a\u88ab\u4e0d\u505c\u8f6c\u5230\u5de6\u8fb9\uff09\uff0c\u5373\u6bcf\u6b21\u4f1a\u88ab\u6539\u53d8\u7684\u5b50\u6811\u5de6\u53f3\u987a\u5e8f\u7684\u8282\u70b9\u90fd\u662f\u6700\u53f3\u4fa7\u7684\u8282\u70b9\uff0c\u800c\u518d\u5408\u5e76\u8fc7\u7a0b\u4e2d\u5982\u679c\u6bcf\u6b21\u5408\u5e76\u90fd\u5c06\u53d1\u751f\u7684\u53d8\u5316\u8f6c\u5230\u5de6\u4fa7\uff0c\u4ee5\u6b64\u6765\u51cf\u5c0f\u5408\u5e76\u64cd\u4f5c\u5e26\u6765\u7684\u9ad8\u5ea6\u201c\u7d2f\u79ef\u201d\u3002</p> <p>\u8fdb\u4e00\u6b65\u89e3\u91ca</p> <p>\u4ee5\u6bcf\u6b21\u53ea\u63d2\u5165\u4e00\u4e2a\u70b9\u4e3a\u4f8b\u5b50\u8bf4\u660e\u95ee\u9898\u3002</p> <p>\u8fdb\u4e00\u6b65\u5bf9\u9012\u5f52\u65cb\u8f6c\u5230\u5de6\u4fa7\u505a\u89e3\u91ca\uff0c\u9012\u5f52\u6027\u5730\u8f6c\u5230\u5de6\u4fa7\uff0c\u4f7f\u5f97\u672c\u6765\u6700\u53f3\u4fa7\u7684\u8def\u5f84\u53d8\u5230\u6700\u5de6\u4fa7\uff0c\u5373\u4f7f\u4e4b\u540e\u4ea4\u6362\u4f1a\u91cd\u65b0\u8bbf\u95ee\u5230\u8fd9\u4e2a\u5b50\u6811\uff0c\u4f46\u6b64\u65f6\u9664\u4e86\u6839\uff0c\u5176\u4ed6\u90e8\u5206\u4f9d\u7136\u662f\u6700\u5de6\u4fa7\u7684\u8def\u5f84\uff0c\u4e5f\u4e0d\u4f1a\u518d\u8f7b\u6613\u5730\u8bbf\u95ee\u5230\u8fd9\u6b21\u8def\u5f84\u3002</p> <p>\u7528\u56fe\u6765\u505a\u89e3\u91ca\u7684\u8bdd\uff0c\u5c31\u662f\u8fd9\u6837\uff1a</p> <p></p> <p>\u6211\u4eec\u53ea\u5173\u6ce8\u4e00\u5f00\u59cb\u4f5c\u4e3a\u6700\u53f3\u4fa7\u7684\u8fd9\u4e09\u4e2a\u7ea2\u70b9\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u5728\u4e24\u6b21\u64cd\u4f5c\u540e\uff0c\u9664\u4e86\u76f4\u63a5\u4f5c\u4e3a\u6839\u7684\u5b50\u6811\u7684\u90a3\u4e2a\u8282\u70b9\u88ab\u8f6c\u4e86\u8fc7\u6765\uff0c\u5176\u4ed6\u7684\u4e4b\u540e\u7684\u8282\u70b9\u90fd\u662f\u4f5c\u4e3a\u201c\u6700\u5de6\u4fa7\u201d\u7684\u8282\u70b9\u51fa\u73b0\u7684\uff0c\u867d\u7136\u56fe\u4e2d\u53ea\u6709\u8fd9\u4e00\u4e2a\uff0c\u4f46\u662f\u5f53\u6811\u7684\u89c4\u6a21\u53d8\u5927\u540e\uff0c\u8fd9\u4e2a\u4f18\u52bf\u4f1a\u66f4\u52a0\u660e\u663e\u3002</p> <p>\u6839\u636e\u8fd9\u4e2a\u7279\u70b9\uff0c\u6211\u4eec\u53ef\u4ee5\u975e\u5e38\u7b80\u5355\u5730\u7406\u89e3\u4e0b\u9762\u8fd9\u9053\u9898\uff1a</p> \u9898\u9762\u7b54\u6848 &amp; \u89e3\u91ca <p>The result of inserting keys \\(1\\) to \\(2^k\u22121\\) for any \\(k&gt;4\\) in order into an initially empty skew heap is always a full binary tree. (T/F)</p> <p>\u5373\u5bf9\u4e8e\u4efb\u610f\u7684 \\(k&gt;4\\) \u7684\u60c5\u51b5\uff0c\u6309\u987a\u5e8f\u5f80\u4e00\u4e2a\u659c\u5806\u91cc\u63d2\u5165 \\(1\\sim2^k-1\\) \u8fd9\u4e9b\u6570\uff0c\u5f97\u5230\u7684\u7ed3\u679c\u90fd\u4f1a\u662f\u4e00\u4e2a\u6ee1\u4e8c\u53c9\u6811\u3002\uff08\u5bf9/\u9519\uff09</p> <p>\u7b54\u6848\u662f T\u3002</p> <p>\u9996\u5148\uff0c\u4ece\u63d2\u5165\u7684\u5143\u7d20\u7684\u6570\u91cf\u6765\u770b\uff0c\u662f\u6ee1\u8db3\u6ee1\u4e8c\u53c9\u6811\u7684\u5fc5\u8981\u6761\u4ef6\u7684\u3002</p> <p>\u800c\u6839\u636e\u6211\u4eec\u4e0a\u9762\u63cf\u8ff0\u7684\uff0c\u8df3\u8fc7\u80af\u5b9a\u6210\u7acb\u7684\u521d\u59cb\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u505a\u4e00\u4e2a\u7b80\u5355\u7684\u5f52\u7eb3\uff0c\u8fc7\u7a0b\u5e76\u4e0d\u5b8c\u6574\u4e0e\u4e25\u8c28\uff0c\u4f46\u662f\u5927\u6982\u5c31\u662f\u8fd9\u4e48\u4e2a\u610f\u601d\u3002</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u6ee1\u4e8c\u53c9\u6811\uff0c\u6211\u4eec\u73b0\u5728\u8981\u63d2\u5165\u4e00\u4e2a\u6570\uff0c\u663e\u7136\u8fd9\u4e2a\u6570\u6bd4\u6811\u91cc\u4efb\u4f55\u4e00\u4e2a\u90fd\u8981\u5927\u3002\u800c\u5f53\u8fd9\u4e2a\u6570\u88ab\u63d2\u5165\u540e\uff0c\u5b83\u6210\u4e3a\u6574\u4e2a\u5806\uff0c\u6216\u8005\u8bf4\u6574\u4e2a\u6811\u6700\u5de6\u4fa7\u7684\u4e00\u6761\u3002\u800c\u5728\u63a5\u4e0b\u6765\u7684\u4ea4\u6362\u8fc7\u7a0b\u4e2d\uff0c\u5b83\u4f1a\u4e0d\u65ad\u88ab\u7529\u6765\u7529\u53bb\uff0c\u6700\u7ec8\u7ecf\u8fc7 2^k \u6b21\u540e\u88ab\u7529\u5230\u6700\u53f3\u8fb9\uff0c\u4e5f\u5c31\u662f\u8fce\u63a5\u5b83\u7684\u7b2c\u4e00\u4e2a\u5b69\u5b50\u3002\u663e\u7136\uff0c\u5bf9\u4e8e\u8be5\u5c42\u7684\u6240\u6709\u8282\u70b9\u6765\u8bf4\u90fd\u9700\u8981 2^k \u6b21\u624d\u4f1a\u8fdb\u5165\u5230\u6700\u53f3\u4fa7\u8def\u5f84\u3002</p> <p>\uff08\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u7c7b\u6bd4\u4e8c\u8fdb\u5236\u6570\u7684\u81ea\u589e\uff0c\u4f60\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u8282\u70b9\u7684\u6bcf\u4e2a\u524d\u9a71\u5206\u522b\u662f\u5de6\u5b69\u5b50\u8fd8\u662f\u53f3\u5b69\u5b50\u6765\u5206\u914d\u5bf9\u5e94\u7684\u4f4d\u5b50\u662f <code>0</code> \u8fd8\u662f <code>1</code>\u3002\uff09</p> <p>\u5f53\u7136\uff0c\u5982\u4e0a\u7684\u6027\u8d28\u53ea\u80fd\u5e2e\u52a9\u6211\u4eec\u611f\u6027\u7684\u7406\u89e3\u8fd9\u4e2a\u6b63\u786e\u6027\u3002\u63a5\u4e0b\u6765\u6211\u4eec\u4ece\u644a\u8fd8\u5206\u6790\u7684\u89d2\u5ea6\u6765\u5206\u6790\u5176\u6b63\u786e\u6027\uff0c\u5373\u5176\u5747\u644a\u590d\u6742\u5ea6\u4e3a \\(O(\\log N)\\)\u3002</p>"},{"location":"ZJU_CS/ADS/week4/#_9","title":"\u644a\u8fd8\u5206\u6790","text":"<ul> <li>\u524d\u60c5\u63d0\u8981\uff1aTopic 1 | \u644a\u8fd8\u5206\u6790</li> </ul> <p>\u8fd9\u91cc\u6211\u4eec\u91c7\u7528\u52bf\u80fd\u6cd5\u8fdb\u884c\u5206\u6790\u3002</p> <p>\u5206\u6790 skew heap \u7684\u5747\u644a\u590d\u6742\u5ea6\uff0c\u4e3b\u8981\u5c31\u662f\u5206\u6790\u5408\u5e76\u64cd\u4f5c\u7684\u590d\u6742\u5ea6\uff0c\u56e0\u4e3a\u5176\u4ed6\u64cd\u4f5c\u90fd\u53ef\u4ee5\u8f6c\u5316\u4e3a\u5408\u5e76\u64cd\u4f5c\u3002</p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u9700\u8981\u5b9a\u4e49\u52bf\u80fd\u51fd\u6570\uff1a</p> <p>\u52bf\u80fd\u51fd\u6570</p> <p>\u6211\u4eec\u5b9a\u4e49 \\(\\Phi(Heap) = \\text{number of heavy node in } Heap\\)\u3002</p> <p>\u5176\u4e2d\uff0c\u989d\u5916\u9700\u8981\u5b9a\u4e49 heavy node \u548c light node\uff1a</p> <p>heavy node &amp; light node</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u5b50\u5806 \\(H\\)\uff0c\u5982\u679c \\(size(H.\\text{right\\_descendant}) \\geq \\frac{1}{2}size(H)\\)\uff0c\u5219 \\(H\\) \u662f heavy node\uff0c\u5426\u5219\u662f light node\u3002 </p> \\@ cy'ppt <p>A node p is heavy if the number of descendants of p\u2019s right subtree is at least half of the number of descendants of p, and light otherwise.  Note that the number of descendants of a node includes the node itself.</p> <p>\u663e\u7136\uff0c\u5bf9\u4e8e heavy node \u548c light node\uff0c\u4ee5\u53ca\u5408\u5e76\u64cd\u4f5c\uff0c\u6709\u8fd9\u4e48\u4e00\u4e9b\u6027\u8d28\uff1a</p> <p>properties</p> <ol> <li>\u5982\u679c\u4e00\u4e2a\u8282\u70b9\u662f heavy node\uff0c\u5e76\u4e14\u5728\u5176\u53f3\u5b50\u6811\u53d1\u751f\u4e86\u5408\u5e76\uff08\u5305\u62ec\u7ffb\u8f6c\uff09\uff0c\u90a3\u4e48\u5b83\u4e00\u5b9a\u53d8\u4e3a\u4e00\u4e2a light node\uff1b</li> <li>\u5982\u679c\u4e00\u4e2a\u8282\u70b9\u662f light node\uff0c\u5e76\u4e14\u5728\u5176\u53f3\u5b50\u6811\u53d1\u751f\u4e86\u5408\u5e76\uff08\u5305\u62ec\u7ffb\u8f6c\uff09\uff0c\u90a3\u4e48\u5b83\u53ef\u80fd\u53d8\u4e3a\u4e00\u4e2a heavy node\uff1b</li> <li>\u5408\u5e76\u8fc7\u7a0b\u4e2d\uff0c\u5982\u679c\u4e00\u4e2a\u8282\u70b9\u7684 heavy/light \u53d1\u751f\u53d8\u5316\uff0c\u90a3\u4e48\u5b83\u539f\u5148\u4e00\u5b9a\u5728\u5806\u7684\u6700\u53f3\u4fa7\u8def\u5f84\u4e0a\uff1b</li> </ol> <p>\u5217\u51fa\u516c\u5f0f\uff1a</p> \\[ \\hat{c} = c + \\Phi(H_{merged}) - \\Phi(H_x) - \\Phi(H_y) \\] <p>\u5176\u4e2d\uff0c\\(c\\) \u4e3a\u5408\u5e76\u64cd\u4f5c\u7684\uff08\u6700\u574f\uff09\u590d\u6742\u5ea6\uff0c\\(H_{merged}\\) \u4e3a\u5408\u5e76\u540e\u7684\u5806\u7684\u52bf\u80fd\uff0c\\(H_x\\) \u548c \\(H_y\\) \u5206\u522b\u4e3a\u5408\u5e76\u524d\u7684\u4e24\u4e2a\u5806\u7684\u52bf\u80fd\u3002</p> <p>\u6839\u636e property 3\uff0c\u5728\u5408\u5e76\u8fc7\u7a0b\u4e2d\u5e76\u975e\u6240\u6709\u8282\u70b9\u90fd\u6536\u5230\u5f71\u54cd\u3002\u6211\u4eec\u53ef\u4ee5\u5355\u72ec\u8bb0\u5f55 \\(l_{x}\\) \u4e3a \\(H_x\\) \u6700\u53f3\u4fa7\u8def\u5f84\u4e0a\u7684 light node \u6570\u91cf\uff0c\\(h_{x}\\) \u4e3a \\(H_x\\) \u6700\u53f3\u4fa7\u8def\u5f84\u4e0a\u7684 heavy node \u6570\u91cf\uff0c\\(h^0_{x}\\) \u4e3a \\(H_x\\) \u6240\u6709\u4e0d\u5728\u6700\u53f3\u4fa7\u8def\u5f84\u4e0a\u7684 heavy node \u6570\u91cf\uff08\u5373 \\(\\text{count of heavy nodes of } H_x = H_x + H^0_x\\)\uff09\u3002</p> <p>\u4e8e\u662f\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u4e0a\u5f0f\u5199\u5f00\uff1a</p> \\[ \\left\\{     \\begin{aligned}         c &amp;= l_x + h_x + l_y + h_y &amp;(1)\\\\         \\Phi(H_{merged}) &amp;\\leq l_x + h^0_x + l_y + h^0_y &amp;(2)\\\\         \\Phi(H_x) &amp;= h_x + h^0_{x} &amp;(3)\\\\         \\Phi(H_y) &amp;= h_y + h^0_{y} &amp;(4)     \\end{aligned} \\right. \\] <p>\u5176\u4e2d\u7a0d\u5fae\u505a\u4e00\u4e9b\u89e3\u91ca\uff1a</p> <ol> <li>\\((1)\\)\uff1a\\(c\\) \u4e3a\u5408\u5e76\u64cd\u4f5c\u7684\uff08\u6700\u574f\uff09\u590d\u6742\u5ea6\uff0c\u5373\u6211\u4eec\u7684\u679a\u4e3e\u6d89\u53ca\u4e86\u4e24\u4e2a\u5806\u6240\u6709\u7684\u53f3\u4fa7\u8def\u5f84\uff1b</li> <li>\\((2)\\)\uff1a\u5728\u5408\u5e76\u64cd\u4f5c\u4ee5\u540e\uff0c\u6839\u636e property 1 \u548c property 2\uff0c\u53ef\u4ee5\u5f97\u5230\u8fd9\u4e2a\u4e0d\u7b49\u5f0f\uff1b</li> <li>\\((3)\\) \u548c \\((4)\\)\uff1a\u6839\u636e\u52bf\u80fd\u51fd\u6570\u7684\u5b9a\u4e49\u5f97\u5230\uff1b</li> </ol> <p>\u4e8e\u662f\uff0c\u5c06\u5b83\u4eec\u4ee3\u5165\u5f97\u5230\u7ed3\u679c\uff1a</p> \\[ \\begin{aligned} \\hat{c}      &amp;= c + \\Phi(H_{merged}) - \\Phi(H_x) - \\Phi(H_y) \\\\     &amp;\\leq (l_x + h_x + l_y + h_y)     + (l_x + h^0_x + l_y + h^0_y)     - (h_x + h^0_{x})     - (h_y + h^0_{y}) \\\\     &amp;\\leq 2(l_x + l_y) \\\\ \\hat{c}     &amp;= O(\\log{N}) \\end{aligned} \\]"},{"location":"ZJU_CS/ADS/week5/","title":"Lecture 5 | Binomial Queue","text":""},{"location":"ZJU_CS/ADS/week5/#binomial_queue","title":"Binomial Queue","text":"<p>\u5806\u7684\u5176\u4e2d\u4e00\u4e2a\u5e94\u7528\u5c31\u662f\u4f18\u5148\u961f\u5217\u3002\u672c\u8282\u8981\u4ecb\u7ecd\u7684\u4e8c\u9879\u961f\u5217(Binomial Queue)\u4e5f\u662f\u4f18\u5148\u961f\u5217\u7684\u4e00\u79cd\u5b9e\u73b0\uff0c\u53ea\u4e0d\u8fc7\u4e0d\u540c\u4e8e\u4e4b\u524d\u6211\u4eec\u7528\u4e00\u4e2a\u5806\u7ef4\u62a4\u4f18\u5148\u961f\u5217\uff0c\u4e8c\u9879\u961f\u5217\u540c\u65f6\u7ef4\u62a4\u4e86\u5177\u6709\u4e0d\u540c\u7279\u5f81\u7684\u82e5\u5e72\u961f\u5217\u3002</p> <p>link</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Binomial_heap</p> <p>YouTube: https://www.youtube.com/watch?v=6JxvKfSV9Ns \uff08\u867d\u7136\u8fd9\u4e2a\u89c6\u9891\u662f\u8bb2\u89e3\u6590\u6ce2\u90a3\u5951\u5806\u7684\uff0c\u4f46\u662f\u4e2d\u95f4\u5148\u8bb2\u4e86\u4e8c\u9879\u5806\u3002\uff09</p> <p>\u5b66\u4e60\u5efa\u8bae</p> <p>\u5728\u6b63\u5f0f\u5f00\u59cb\u672c\u8282\u5185\u5bb9\u4e4b\u524d\uff0c\u8bf7\u5e26\u7740\u8fd9\u6837\u4e00\u4e2a\u5ff5\u5934\uff1a\u5c3d\u529b\u601d\u8003\u4e8c\u9879\u961f\u5217\u4e0e\u4e8c\u8fdb\u5236\u7684\u5173\u7cfb\u3002</p>"},{"location":"ZJU_CS/ADS/week5/#_1","title":"\u6982\u5ff5","text":"<p>\u4e8c\u9879\u961f\u5217(Binomial Queue)\u672c\u8d28\u4e0a\u662f\u4e00\u7cfb\u5217\u4e8c\u9879\u6811(Binomial Tree)\u7684\u96c6\u5408\u3002\u6240\u4ee5\u6211\u4eec\u9996\u5148\u7ed9\u5b9a\u4e8c\u9879\u6811(Binomial Tree)\u7684\u5b9a\u4e49\uff1a</p> <p>Binomial Tree</p> <p>\u4e8c\u9879\u6811\u6ee1\u8db3\u5806\u7684\u6027\u8d28\uff0c\u5373 parent \u8282\u70b9\u7684\u503c\u5c0f\u4e8e\uff08\u5927\u4e8e\uff09 child \u8282\u70b9\u7684\u503c\u3002</p> <p>\u4e00\u4e2a\u975e\u5e38\u5173\u952e\u7684\u6027\u8d28\u662f\uff0c\\(k\\) \u9636\u4e8c\u9879\u6811\u90fd\u662f\u540c\u6784\u7684\uff0c\u4e14 \\(k\\) \u9636\u4e8c\u9879\u6811\u662f\u4e24\u4e2a \\(k-1\\) \u9636\u4e8c\u9879\u6811\u5408\u5e76\u5f97\u5230\u7684\u3002\u800c\u5176\u5408\u5e76\u65b9\u5f0f\u662f\u76f4\u63a5\u4ee4\u5176\u4e2d\u4e00\u68f5\u6210\u4e3a\u53e6\u5916\u4e00\u68f5\u7684\u6839\u7684\u65b0 child\uff0c\u8fd9\u4e5f\u51b3\u5b9a\u4e86\u4e8c\u9879\u6811\u7684\u6839\u6bcf\u4e00\u4e2a child \u672c\u8eab\u4e5f\u90fd\u662f\u4e00\u4e2a\u4e8c\u9879\u6811\u3002</p> <p> </p> <p>\u663e\u7136\u80fd\u591f\u5f97\u5230\uff0c\u4e8c\u9879\u6811\u5e76\u975e\u4e8c\u53c9\u6811\uff1b\u66f4\u8fdb\u4e00\u6b65\u7684\uff0c\\(k\\) \u9636\u4e8c\u9879\u6811 \\(B_k\\) \u7684\u6839\u6709 \\(k\\) \u4e2a child\uff0c\\(2^k\\) \u4e2a\u8282\u70b9\uff1b\u518d\u8fdb\u4e00\u6b65\u7684\uff0c\\(B_k\\) \u7684\u7b2c \\(d\\) \u5c42\u4e00\u5171\u6709 \\(C_k^d = \\binom{k}{d}\\) \u4e2a\u8282\u70b9\uff0c\u6709\u8da3\u7684\u662f\uff0c\u6240\u6709\u5c42\u7684\u8282\u70b9\u52a0\u8d77\u6765\u521a\u597d\u7b26\u5408\u4e8c\u9879\u5f0f\u5b9a\u7406\uff0c\u6b64\u6761\u5b9a\u7406\u53ef\u4ee5\u7531\u6570\u5b66\u5f52\u7eb3\u6cd5\u5f88\u5bb9\u6613\u5730\u8bc1\u660e\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002</p> <p>\u5173\u4e8e\u5b9e\u73b0</p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u4e8c\u9879\u6811\u662f\u4e00\u4e2a \\(N\\) \u53c9\u6811\uff0c\u6240\u4ee5\u901a\u5e38\u6211\u4eec\u4f7f\u7528\u94fe\u8868 sibling \u7684\u5f62\u5f0f\u6765\u8868\u793a\u4e00\u4e2a\u8282\u70b9\u7684 children\u3002</p> <p>\u518d\u5bf9\u4e8c\u9879\u6811\u505a\u4e00\u4e2a\u7b80\u5355\u7684\u603b\u7ed3\uff0c\\(k\\) \u9636\u4e8c\u9879\u6811\u7ed3\u6784\u552f\u4e00\u786e\u5b9a\uff0c\u4e24\u4e2a \\(k\\) \u9636\u4e8c\u9879\u6811\u5408\u5e76\u540e\u5f97\u5230\u4e00\u4e2a \\(k+1\\) \u9636\u4e8c\u9879\u6811\uff0c\u800c\u4e8c\u9879\u6811\u672c\u8eab\u4e5f\u5177\u6709\u5806\u7684\u6027\u8d28\u3002</p> <p>\u4f46\u662f\uff0c\u867d\u7136\u4e8c\u9879\u6811\u5177\u6709\u5806\u7684\u6027\u8d28\uff0c\u770b\u4f3c\u80fd\u72ec\u7acb\u5b8c\u6210\u4f18\u5148\u961f\u5217\u7684\u529f\u80fd\uff0c\u4f46\u662f\u4e8c\u9879\u6811\u5bf9\u70b9\u7684\u6570\u91cf\u5177\u6709\u6bd4\u8f83\u4e25\u683c\u7684\u8981\u6c42\uff0c\u53ea\u6709\u70b9\u7684\u6570\u91cf\u7b26\u5408 \\(2^k\\) \u65f6\uff0c\u624d\u80fd\u4f7f\u7528\u4e8c\u9879\u6811\u8868\u793a\u3002\u56e0\u6b64\uff0c\u89c2\u5bdf\u4e00\u4e2a\u4e8c\u9879\u6811\u80fd\u627f\u8f7d\u7684\u70b9\u7684\u6570\u91cf\u7279\u5f81\uff0c\u6211\u4eec\u8054\u60f3\u5230\u4e8c\u8fdb\u5236\u5bf9\u6570\u7684\u8868\u793a\u2014\u2014\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u7cfb\u5217\u4e8c\u9879\u6811\u6765\u7ef4\u62a4 \\(N\\) \u4e2a\u8282\u70b9\u7684\u4f18\u5148\u961f\u5217\uff0c\u800c\u5177\u4f53\u7528\u51e0\u9636\u4e8c\u9879\u6811\uff0c\u5219\u53d6\u51b3\u4e8e \\(N\\) \u7684\u4e8c\u8fdb\u5236\u8868\u8fbe\u4e2d\uff0c\u4e3a <code>1</code> \u7684\u662f\u54ea\u51e0\u4f4d\u3002</p> <p>Binomial Queue</p> <p>\u4e8c\u9879\u961f\u5217(Binomial Queue)\u662f\u4e00\u7cfb\u5217\u4e8c\u9879\u6811(Binomial Tree)\u7684\u96c6\u5408\uff0c\u5176\u4e2d\u6bcf\u4e2a\u4e8c\u9879\u6811\u7684\u9636\u6570 \\(k\\) \u90fd\u662f\u4e0d\u540c\u7684\uff0c\u53cd\u8fc7\u6765\u8bb2\u8fd9\u53e5\u8bdd\uff0c\u96c6\u5408\u4e2d \\(k\\) \u9636\u7684\u4e8c\u9879\u6811\u8981\u4e48\u53ea\u6709\u4e00\u4e2a\uff0c\u8981\u4e48\u6ca1\u6709\u3002</p> <p>\ud83c\udf30</p> <p> </p> <p>\u9898\u76ee\u5b9e\u73b0\u7684\u4e8c\u9879\u961f\u5217\u4e0d\u4e00\u5b9a\u6709 min \u6307\u9488\uff01\u6ce8\u610f\u9762\u5411\u9898\u9762\u548c\u9009\u9879\u5224\u65ad\u5b9e\u73b0\u3002</p> <p>\u800c\u4e3a\u4f55\u8981\u8fd9\u4e48\u8bbe\u8ba1\u4e8c\u9879\u961f\u5217\u7684\u7ed3\u6784\uff0c\u5177\u4f53\u4f53\u73b0\u5728\u64cd\u4f5c\u7684\u8bbe\u8ba1\u4e2d\u3002</p>"},{"location":"ZJU_CS/ADS/week5/#_2","title":"\u64cd\u4f5c","text":"<p>\u5728\u4e8c\u9879\u961f\u5217\u4e2d\uff0c\u5408\u5e76\u662f\u4e00\u4e2a\u975e\u5e38\u57fa\u7840\u7684\u64cd\u4f5c\uff0c\u4e5f\u662f\u7cbe\u9ad3\u6240\u5728\u3002</p> <p>\u800c\u4e3a\u4e86\u611f\u53d7\u8fd9\u4e9b\u64cd\u4f5c\u7684\u7cbe\u9ad3\uff0c\u5728\u7406\u89e3\u4e8c\u9879\u961f\u5217\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u4ee5\u8bd5\u56fe\u4ece\u4e24\u4e2a\u7eac\u5ea6\u540c\u65f6\u7406\u89e3\u8fd9\u4e9b\u64cd\u4f5c\uff1a</p> <ol> <li>\u6811/\u5806\u7684\u7eac\u5ea6\uff0c\u5177\u4f53\u89c2\u5bdf\u6570\u636e\u7684\u8f6c\u79fb\u4e0e\u53d8\u5316\u8fc7\u7a0b\uff1b</li> <li>\u4e8c\u8fdb\u5236\u7684\u7eac\u5ea6\uff0c\u5c06 \\(k\\) \u9636\u4e8c\u9879\u6811\u62bd\u8c61\u4e3a bit vector \u7b2c \\(k\\) \u4f4d\u7684 <code>1</code>\uff0c\u4ece\u4e8c\u8fdb\u5236\u52a0\u6cd5\u7684\u89d2\u5ea6\u7406\u89e3\uff1b</li> </ol> <p>\u4e3a\u4e86\u65b9\u4fbf\u540e\u9762\u9610\u8ff0\uff0c\u6211\u4eec\u7b80\u5355\u505a\u4e00\u4e0b\u8bf4\u660e\uff1a</p> <p>\u7279\u5f81\u6bd4\u7279\u5411\u91cf</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u4e8c\u9879\u961f\u5217\uff0c\u5b9a\u4e49\u5b83\u7684\u7279\u5f81\u6bd4\u7279\u5411\u91cf\uff08\u6211\u81ea\u5df1\u53e3\u80e1\u7684\u4e1c\u897f\uff0c\u4e0d\u662f\u672f\u8bed\uff09\u662f\u5b83\u7684\u5143\u7d20\u6570\u91cf\u7684\u4e8c\u8fdb\u5236\u8868\u793a\uff08\u53cd\u8fc7\u6765\u8bf4\uff0c\u7279\u5f81\u6bd4\u7279\u5411\u91cf\u7684\u771f\u503c\u8868\u793a\u961f\u5217\u4e2d\u7684\u5143\u7d20\u6570\u91cf\uff09\u3002</p> <p>\ud83c\udf30</p> <p>\u4f8b\u5982\u4e0b\u56fe\u7684\u4f8b\u5b50\uff0c\u4e00\u5171\u6709 11 \u4e2a\u8282\u70b9\uff0c\u5176\u7279\u5f81\u6bd4\u7279\u5411\u91cf\u4e3a <code>1011</code>\uff0c\u521a\u597d\u5bf9\u5e94 \\(B_3\\) \\(B_1\\) \\(B_0\\)\u3002</p> <p> </p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u7279\u5f81\u6bd4\u7279\u5411\u91cf\u8c61\u5f81\u4e86\u4e8c\u9879\u961f\u5217\u7684\u96c6\u5408\u4e2d\u6709\u54ea\u51e0\u9636\u7684\u4e8c\u9879\u6811\u3002</p>"},{"location":"ZJU_CS/ADS/week5/#_3","title":"\u961f\u5217\u5408\u5e76","text":"<p>\u5408\u5e76\u4e24\u4e2a\u4e8c\u9879\u961f\u5217\uff0c\u5b9e\u9645\u4e0a\u5c31\u662f\u5408\u5e76\u4e24\u4e2a\u96c6\u5408\uff0c\u5408\u5e76\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u5206\u522b\u5408\u5e76\u6bcf\u4e00\u4e2a \\(k\\) \u9636\u4e8c\u9879\u6811\uff0c\u5f53\u4e24\u4e2a\u4e8c\u9879\u961f\u5217\u90fd\u5b58\u5728 \\(k\\) \u9636\u4e8c\u9879\u6811\u65f6\uff0c\u5b83\u4eec\u5408\u5e76\u4e3a\u4e00\u68f5 \\(k+1\\) \u9636\u4e8c\u9879\u6811\u3002\u53ef\u4ee5\u8054\u60f3\uff0c\u8fd9\u9879\u64cd\u4f5c\u201c\u5bf9\u5e94\u201d\u7740\u7279\u5f81\u6bd4\u7279\u5411\u91cf\u7684\u76f8\u52a0\uff0c\u800c\u5408\u5e76\u64cd\u4f5c\u5219\u7c7b\u4f3c\u4e8e\u8fdb\u4f4d\u3002</p> <p>\u56e0\u6b64\uff0c\u5b83\u5c31\u7c7b\u4f3c\u4e8e\u4e00\u4e2a 1bit \u7684\u5168\u52a0\u5668\u3002</p> graph LR; A([\"T1.B[k]\"]) B([\"T2.B[k]\"]) C([\"T.carry[k-1]\"]) D([\"T.result[k]\"]) E([\"T.carry[k]\"]) ADD[\"Adder\"] A ---&gt; ADD B ---&gt; ADD C ---&gt; ADD ADD ---&gt; D ADD ---&gt; E  <p>\u4e8e\u662f\uff0c\u6839\u636e\u4e00\u4e2a carry \u4f4d\u3001\u4e00\u4e2a\u88ab\u5408\u5e76\u6811\u548c\u4e00\u4e2a\u5408\u5e76\u6811\u7684\u60c5\u51b5\uff0c\u6709\u4e00\u5171 \\(2^3=8\\) \u79cd\u53ef\u80fd\u3002</p> <p>\ud83c\udf30</p> <p>\u5047\u8bbe\u6211\u4eec\u73b0\u5728\u6709\u8fd9\u6837\u4e24\u4e2a\u4e8c\u9879\u961f\u5217\u9700\u8981\u5408\u5e76\uff1a</p> <p> </p> <p>\u5219\u5176\u5408\u5e76\u7684\u64cd\u4f5c\u53ef\u4ee5\u8fd9\u6837\u63cf\u8ff0\u3002</p> \u7279\u5f81\u6bd4\u7279\u5411\u91cf\u89c6\u89d2\u5177\u4f53\u89c6\u89d2 <p>\u7eff\u8272\u4e8c\u9879\u961f\u5217\u7684\u7279\u5f81\u6bd4\u7279\u5411\u91cf\u4e3a <code>1011</code>\uff0c\u84dd\u8272\u7684\u4e3a <code>1001</code>\uff0c\u4e24\u8005\u76f8\u52a0\u5f97\u5230 <code>10100</code>\u3002</p> Frame 1Frame 2Frame 3Frame 4Frame 5Frame 6 <p> </p> <p>\\(B_0\\) \u5408\u5e76\uff0c\u7531\u4e8e \\(T_{green}.B_0\\) \u548c \\(T_{blue}.B_0\\) \u90fd\u5b58\u5728\uff0c\u6240\u4ee5\u5408\u5e76\u4ea7\u751f\u4e3a \\(T.C_0\\)\uff0c\\(T.R_0\\) \u4e3a\u7a7a\u3002</p> <p> </p> <p>\\(B_1\\) \u5408\u5e76\uff0c\u7531\u4e8e \\(T_{green}.B_1\\) \u548c \\(T.C_0\\) \u5b58\u5728\uff0c\u6240\u4ee5\u5408\u5e76\u4ea7\u751f\u4e3a \\(T.C_1\\)\uff0c\\(T.R_1\\) \u4e3a\u7a7a\u3002</p> <p> </p> <p>\\(B_2\\) \u5408\u5e76\uff0c\u7531\u4e8e\u53ea\u6709 \\(T.C_1\\) \u5b58\u5728\uff0c\u6240\u4ee5\u76f4\u63a5\u4ee4 \\(T.R_2 = T.C_1\\)\uff0c\\(T.C_2\\) \u4e3a\u7a7a\u3002</p> <p> </p> <p>\\(B_3\\) \u5408\u5e76\uff0c\u7531\u4e8e \\(T_{green}.B_1\\)\uff0c\\(T_{blue}.B_1\\) \u548c \\(T.C_2\\) \u90fd\u4e0d\u5b58\u5728\uff0c\u6240\u4ee5 \\(T.R_3\\) \u4e3a\u7a7a\uff0c\\(T.C_1\\) \u4e3a\u7a7a\u3002</p> <p> </p> <p>\\(B_4\\) \u5408\u5e76\uff0c\u7531\u4e8e \\(T_{green}.B_4\\) \u548c \\(T.C_3\\) \u90fd\u5b58\u5728\uff0c\u6240\u4ee5\u5408\u5e76\u4ea7\u751f\u4e3a \\(T.C_4\\)\uff0c\\(T.R_4\\) \u4e3a\u7a7a\u3002</p> <p> </p> <p>\\(B_5\\) \u5408\u5e76\uff0c\u7531\u4e8e\u53ea\u6709 \\(T.C_4\\) \u5b58\u5728\uff0c\u6240\u4ee5\u76f4\u63a5\u4ee4 \\(T.R_5 = T.C_4\\)\uff0c\\(T.C_5\\) \u4e3a\u7a7a\u3002</p>"},{"location":"ZJU_CS/ADS/week5/#_4","title":"\u5355\u70b9\u63d2\u5165","text":"<p>\u63d2\u5165\u7ed3\u70b9\u53ef\u4ee5\u770b\u4f5c\u5408\u5e76\u4e00\u4e2a\u53ea\u6709\u4e00\u4e2a\u7ed3\u70b9\u7684\u5de6\u504f\u5806\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u590d\u7528\u5408\u5e76\u8fc7\u7a0b\u3002</p>"},{"location":"ZJU_CS/ADS/week5/#_5","title":"\u67e5\u8be2\u961f\u9996","text":"<p>\u4e8c\u9879\u961f\u5217\u7684\u961f\u9996\uff0c\u4e5f\u5c31\u662f\u6574\u4e2a\u961f\u5217\u7684\u6700\u5c0f\u503c\uff08\u6700\u5927\u503c\uff09\uff0c\u5c31\u662f\u8fd9\u82e5\u5e72\u4e2a\uff08\\(O(\\log N)\\) \u4e2a\uff09\u4e8c\u9879\u6811\u7684\u6839\u4e2d\u6700\u5c0f\uff08\u6700\u5927\uff09\u7684\u90a3\u4e2a\u3002\u6240\u4ee5\u5176\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O(\\log N)\\)\u3002</p> <p>\u4e0d\u8fc7\u6709\u65f6\u5019\u6211\u4eec\u4e5f\u4f1a\u989d\u5916\u7ef4\u62a4\u4e00\u4e2a\u6307\u9488\uff0c\u6307\u5411\u5f53\u524d\u6700\u5c0f\u7684\u90a3\u4e2a\u6839\uff0c\u6b64\u65f6\u5176\u590d\u6742\u5ea6\u4e3a \\(O(1)\\)\u3002</p>"},{"location":"ZJU_CS/ADS/week5/#_6","title":"\u961f\u9996\u51fa\u961f","text":"<p>\u961f\u9996\u51fa\u961f\u9996\u5148\u8981\u627e\u5230\u961f\u9996\uff0c\u8fd9\u4ef6\u4e8b\u6211\u4eec\u5728#\u67e5\u8be2\u961f\u9996\u5df2\u7ecf\u8ba8\u8bba\u8fc7\u4e86\u3002</p> <p>\u627e\u5230\u961f\u9996\u540e\uff0c\u6211\u4eec\u5c06\u5176\u4ece\u4e8c\u9879\u961f\u5217\u4e2d\u79fb\u9664\uff0c\u6211\u4eec\u77e5\u9053\uff0c\u961f\u9996\u5fc5\u7136\u662f\u67d0\u4e2a\u4e8c\u9879\u6811\u7684\u6839\uff0c\u6240\u4ee5\u5220\u6389\u8fd9\u4e2a\u961f\u9996\u4ee5\u540e\uff0c\u5c31\u4f1a\u4ea7\u751f \\(k\\) \u4e2a\u65b0\u7684\u5b50\u6811\u3002</p> <p>\u800c\u8ba9\u6211\u4eec\u56de\u987e\u4e8c\u9879\u6811\u7684\u5408\u5e76\u8fc7\u7a0b\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u6839\u7684\u6240\u6709\u513f\u5b50\u90fd\u662f\u4e00\u4e2a\u5b8c\u6574\u7684 \\(k\\) \u9636\u4e8c\u9879\u6811\u5408\u5e76\u8fc7\u6765\u7684\uff0c\u6240\u4ee5\u5f53\u6211\u4eec\u5220\u6389\u8fd9\u4e2a\u6839\uff0c\u4ea7\u751f\u7684\u6240\u6709\u5b50\u6811\u90fd\u662f\u4e8c\u9879\u6811\u3002</p> <p>\u56e0\u6b64\u6211\u4eec\u8054\u60f3\u5230\uff0c\u5c06\u961f\u9996\u51fa\u961f\u95ee\u9898\u8f6c\u5316\u4e3a\u5408\u5e76\u4e8c\u9879\u961f\u5217\u7684\u95ee\u9898\u2014\u2014\u5047\u8bbe \\(T\\) \u7684\u961f\u9996\u662f \\(B_k\\) \u7684\u6839\uff0c\u5219\u961f\u9996\u51fa\u961f\u53ef\u4ee5\u8f6c\u5316\u4e3a\u6c42\u89e3 \\(merge(T-B_k, B_k.root.children)\\) \u7684\u95ee\u9898\u3002</p> <p>\ud83c\udf30</p> <p>\u5047\u8bbe\u6211\u4eec\u6709\u5982\u4e0b\u7684\u4e8c\u9879\u961f\u5217\uff0c\u73b0\u5728\u8fdb\u884c\u5f39\u51fa\u961f\u9996\u7684\u64cd\u4f5c\u3002</p> <p> </p> \u7279\u5f81\u6bd4\u7279\u89c6\u89d2\u5177\u4f53\u89c6\u89d2 <p>\u5982\u4e0a\u961f\u5217\uff0c\u5176\u7279\u5f81\u6bd4\u7279\u5411\u91cf\u4e3a <code>10100</code>\uff0c\u5171 20 \u4e2a\u8282\u70b9\u3002\u73b0\u5728\u5220\u6389\u4e00\u4e2a\uff0c\u5e94\u5f53\u6709 19 \u4e2a\u8282\u70b9\u3002</p> <p>\u66f4\u5177\u4f53\u7684\uff0c<code>10100</code> = <code>10000</code> + <code>100</code>\uff0c\u5206\u522b\u4ee3\u8868\u4e24\u4e2a\u4e8c\u9879\u6811\uff0c\u800c\u6211\u4eec\u7684\u6700\u5c0f\u503c\u662f\u4ece <code>10000</code> \u6240\u4ee3\u8868\u7684\u6811\u91cc\u5220\u9664\u7684\uff0c\u6240\u4ee5\u65b0\u7684\u7279\u5f81\u6bd4\u7279\u5411\u91cf\u4e3a\uff1a(<code>10000</code> - 1) + <code>100</code> = <code>1111</code> + <code>100</code> = <code>10011</code>\uff0c\u5373 19 \u4e2a\u3002</p> <p>\u6ce8\u610f\u89c2\u5bdf\u8fd9\u91cc <code>10000</code> - 1 = <code>1111</code> \u7684\u53d8\u5316\uff0c\u5bfb\u627e\u5b83\u4e0e\u5177\u4f53\u89c6\u89d2\u4e2d\u7684\u5173\u7cfb\u3002</p> Frame 1Frame 2Frame 3Frame 4 <p> </p> <p>\u9996\u5148\u627e\u5230\u961f\u9996\uff0c\u5373\u6b64\u65f6 min \u6307\u9488\u6307\u5411\u7684\u5730\u65b9\u3002\u89c2\u5bdf\u5b83\u7684\u7ed3\u6784\uff0c\u6211\u4eec\u53d1\u73b0\u5b83\u5177\u6709\u56db\u4e2a\u5b50\u6811\uff0c\u5206\u522b\u662f \\(B_0 \\sim B_3\\)\uff0c\u5bf9\u5e94\u4e86\u6211\u4eec\u4e4b\u524d\u63d0\u5230\u7684\u300c\u6839\u7684\u6240\u6709\u513f\u5b50\u90fd\u662f\u4e00\u4e2a\u5b8c\u6574\u7684 \\(k\\) \u9636\u4e8c\u9879\u6811\u5408\u5e76\u8fc7\u6765\u7684\u300d\u3002</p> <p> </p> <p>\u4e8e\u662f\u6211\u4eec\u5c06\u8fd9\u4e2a\u5b50\u6811\u63d0\u53d6\u51fa\u6765\uff0c\u5c06\u539f\u672c\u7684\u4e8c\u9879\u961f\u5217\u62c6\u6210\u4e3a\u4e24\u4e2a\u4e8c\u9879\u961f\u5217\u3002</p> <p> </p> <p>\u73b0\u5728\u6211\u4eec\u5220\u9664\u201c\u961f\u9996\u201d\uff0c\u53d1\u73b0\u90a3\u68f5\u6811\u5206\u88c2\u6210\u4e86\u56db\u4e2a\u8fde\u7eed\u7684\u4e8c\u9879\u6811\uff08<code>10000</code> - 1 = <code>1111</code>\uff09\u3002</p> <p> </p> <p>\u73b0\u5728\u95ee\u9898\u5c31\u8f6c\u5316\u4e3a\u4e86\u4e24\u4e2a\u4e8c\u9879\u961f\u5217\u5408\u5e76\u7684\u95ee\u9898\u3002\u5728\u6b64\u7701\u7565\u3002</p> <p>\u6ce8\u610f\u89c2\u5bdf\u5b8c\u6210\u7684\u4e8c\u9879\u961f\u5217\u7684\u7279\u5f81\u6bd4\u7279\u5411\u91cf\u548c\u4e0a\u9762\u7684\u7279\u5f81\u6bd4\u7279\u5411\u91cf\u89c6\u89d2\u7684\u7ed3\u679c\u3002</p> <p>\u63d0\u793a</p> <p>\u652f\u6301\u7740\u961f\u9996\u51fa\u961f\u53ef\u4ee5\u8fd9\u6837\u8fdb\u884c\u7684\u6027\u8d28\u5c31\u662f\uff0c\u6bcf\u4e00\u4e2a\u4e8c\u9879\u6811\u7684\u6839\u7684 children \u672c\u8eab\u4e5f\u90fd\u662f\u4e8c\u9879\u6811\u3002</p>"},{"location":"ZJU_CS/ADS/week5/#_7","title":"\u644a\u8fd8\u5206\u6790","text":""},{"location":"ZJU_CS/ADS/week5/#project_fibonacci_queue","title":"Project: Fibonacci Queue","text":"<p>Link</p> <p>YouTube: https://www.youtube.com/watch?v=6JxvKfSV9Ns</p>"},{"location":"ZJU_CS/ADS/week6/","title":"Lecture 6 | Backtracing","text":"<p>link</p> <p>OI Wiki: https://oi-wiki.org/search/backtracking/</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Backtracking</p> <p>\u8fd9\u4e00\u8282\u7684\u5185\u5bb9\u6bd4\u8f83\u6563\uff0c\u56e0\u4e3a\u56de\u6eaf\u662f\u4e00\u4e2a\u5f88\u57fa\u7840\u800c\u4e14\u5f88\u6cdb\u7528\u7684\u4e1c\u897f\uff0c\u6240\u4ee5\u611f\u89c9\u600e\u4e48\u8bb2\u90fd\u4e0d\u592a\u5408\u9002\u3002\u66f4\u591a\u7684\u662f\u9700\u8981\u5728\u5177\u4f53\u95ee\u9898\u3001\u5177\u4f53\u6a21\u578b\u4e2d\u53bb\u4f53\u4f1a\u3002</p> <p>\u52a0\u4e0a\u5982\u679c\u6bcf\u4e00\u4e2a\u5185\u5bb9\u90fd\u8981\u5f80\u6b7b\u91cc\u53bb\u53d9\u8ff0\u7684\u8bdd\u5b9e\u5728\u592a\u7d2f\u4e86\uff0c\u6240\u4ee5\u56de\u6eaf\u8fd9\u4e00\u7ae0\u60f3\u5077\u4e2a\u61d2\uff0c\u5c31\u7b80\u5355\u8bb0\u5f55\u4e00\u4e0b\u8bfe\u4e0a\u63d0\u5230\u8fc7\u7684\u4e00\u4e9b\u6a21\u578b\u5427\u3002</p>"},{"location":"ZJU_CS/ADS/week6/#_1","title":"\u516b\u7687\u540e","text":"<p>\u975e\u5e38\u7ecf\u5178\u7684\u95ee\u9898\uff0c\u76f8\u4fe1\u63a5\u89e6\u8fc7\u7b97\u6cd5\u7684\u540c\u5b66\u57fa\u672c\u4e0a\u90fd\u7ed5\u4e0d\u5f00\u8fd9\u4e2a\u4e1c\u897f\u3002</p> <p>link</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Eight_queens_puzzle</p>"},{"location":"ZJU_CS/ADS/week6/#the_turnpike_reconstruction_problem","title":"[\u6848\u4f8b] The Turnpike Reconstruction Problem","text":"<p>\u6536\u8d39\u7ad9\u91cd\u5efa\u95ee\u9898(The Turnpike Reconstruction Problem)\u63cf\u8ff0\u7684\u662f\u4e00\u6761\u88ab\u62bd\u8c61\u4e3a\u76f4\u7ebf\u7684\u516c\u8def\u4e0a\uff0c\u6709 \\(N\\) \u4e2a\u6536\u8d39\u7ad9\uff08\\(x_1, x_2, ..., x_N\\)\uff09\u3002\u73b0\u5728\u7ed9\u51fa\u4efb\u610f\u4e24\u4e2a\u6536\u8d39\u7ad9\u4e4b\u95f4\u7684\u8ddd\u79bb\u7684\u53ef\u91cd\u96c6\u5408 \\(D\\)\uff0c\uff08\u53ef\u60f3\u800c\u77e5\uff0c\u4e00\u5171\u6709 \\(\\frac{N(N-1)}{2}\\) \u4e2a\u5143\u7d20\uff09\uff0c\u6c42\u6536\u8d39\u7ad9\u7684\u4f4d\u7f6e\uff0c\u5373\u7ed9\u5b9a\u4efb\u610f\u4e24\u70b9\u7684\u8ddd\u79bb\u96c6\u5408\uff0c\u6c42\u51fa\u8fd9\u4e9b\u70b9\u7684\u5750\u6807\u3002</p> <p>solution</p> <p>\u5927\u6982\u601d\u8def\u5c31\u662f\uff0c\u9996\u5148\u5047\u8bbe \\(x_1 = 0\\)\uff0c\u90a3\u4e48\u5f88\u663e\u7136 \\(x_N = \\mathop{max} \\{D\\}\\)\u3002\u540c\u65f6\u6211\u4eec\u4e5f\u5f97\u5230\u8fd9\u6761\u7ebf\u6bb5\u7684\u957f\u5ea6\u4e3a \\(\\mathop{max} \\{D\\}\\)\u3002\u63a5\u4e0b\u6765 \\(D\\) \u4e2d\u4ece\u5927\u5230\u5c0f\u53d6\u51fa\u5143\u7d20\uff0c\u5219\u5fc5\u5b9a\u8ffd\u52a0\u5728 \\(x_1\\) \u53f3\u4fa7\u6216 \\(x_N\\) \u5de6\u4fa7\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002\uff08\u53cd\u8bc1\u6cd5\u53ef\u4ee5\u8bc1\u660e\u5728\u5b8c\u5168\u5b89\u6392\u597d\u4e4b\u524d\u90fd\u662f\u8ffd\u52a0\u5728\u5de6\u4fa7\u6216\u8005\u53f3\u4fa7\u7684\u65e2\u5b9a\u8fb9\u754c\u4e4b\u95f4\u7684\uff09\u3002\u800c\u6bcf\u4e00\u6b21\u8ffd\u52a0\u7684\u9009\u62e9\u90fd\u4ee3\u8868\u51b3\u7b56\u6811\u4e2d\u7684\u4e00\u4e2a\u5206\u652f\uff0c\u53ef\u4ee5\u5229\u7528\u5176\u5b83\u6761\u4ef6\u8fdb\u884c\u526a\u679d\uff08\u4f8b\u5982 \\(D\\) \u4e2d\u6709 \\(x_p - x_0\\) \u5c31\u4e00\u5b9a\u6709 \\(x_N - x_p\\)\uff09\u3002</p>"},{"location":"ZJU_CS/ADS/week6/#-","title":"\u0251-\u03b2 \u526a\u679d","text":"<p>link</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Alpha%E2%80%93beta_pruning</p> <ul> <li>\u5b9e\u9645\u4e0a\u5c31\u7c7b\u4f3c\u4e8e\u6c42\u89e3\u4e0d\u80fd\u8fde\u7eed\u5411\u53f3\u7684\uff0c\u4ece\u6839\u5230\u53f6\u5b50\u7684\u8def\u5f84\u3002</li> </ul>"},{"location":"ZJU_CS/ADS/week7/","title":"Lecture 7 | Divide &amp; Conquer","text":"<p>\u611f\u89c9\u8fd9\u51e0\u8282\u8bfe\u4e0a\u7684\u5185\u5bb9\u90fd\u633a\u5bbd\u6cdb\u7684\u554ax</p>"},{"location":"ZJU_CS/ADS/week7/#_1","title":"\u6982\u8ff0","text":"<p>link</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Divide-and-conquer_algorithm</p> <p>\u5957\u7528 Wiki \u4e0a\u7684\u8bf4\u6cd5\uff0c\u5206\u6cbb\u6cd5(Divide-and-conquer algorithm)\u5c5e\u4e8e\u4e00\u79cd\u7b97\u6cd5\u8303\u578b\uff0c\u5b83\u7684\u57fa\u672c\u601d\u60f3\u662f\u5c06\u4e00\u4e2a\u95ee\u9898\u5206\u89e3\u4e3a\u82e5\u5e72\u4e2a\u89c4\u6a21\u8f83\u5c0f\u7684\u76f8\u540c\u95ee\u9898\uff0c\u7136\u540e\u9012\u5f52\u5730\u89e3\u51b3\u8fd9\u4e9b\u5b50\u95ee\u9898\uff0c\u6700\u540e\u5c06\u8fd9\u4e9b\u5b50\u95ee\u9898\u7684\u89e3\u5408\u5e76\u5f97\u5230\u539f\u95ee\u9898\u7684\u89e3\uff0c\u4e00\u4e2a\u6bd4\u8f83\u7ecf\u5178\u7684\u6848\u4f8b\u5c31\u662f\u5f52\u5e76\u6392\u5e8f\u3002</p> <p>\u672c\u8282\u7684\u91cd\u70b9\u5b9e\u9645\u4e0a\u4e5f\u5e76\u4e0d\u662f\u805a\u7126\u4e8e\u5206\u6cbb\u672c\u8eab\uff0c\u800c\u662f\u5176\u590d\u6742\u5ea6\u5206\u6790\u3002</p>"},{"location":"ZJU_CS/ADS/week7/#closet_points_problem","title":"[\u6848\u4f8b] Closet Points Problem","text":"<p>\u4e8c\u7ef4\u6700\u8fd1\u70b9\u95ee\u9898(Closet Points Problem)\uff0c\u6307\u7684\u662f\u7ed9\u5b9a\u5e73\u9762\u4e0a\u7684 n \u4e2a\u70b9\uff0c\u627e\u51fa\u5176\u4e2d\u8ddd\u79bb\u6700\u8fd1\u7684\u4e24\u4e2a\u70b9\u3002</p>"},{"location":"ZJU_CS/ADS/week7/#_2","title":"\u6734\u7d20\u65b9\u6cd5","text":"<p>\u6700\u6734\u7d20\u7684\u505a\u6cd5\u5f53\u7136\u662f\u679a\u4e3e\u6240\u6709\u7684\u70b9\u5bf9\uff0c\u4e00\u5171\u9700\u8981 \\(C_{N}^{2} = {{N}\\choose{2}} = \\frac{N(N-1)}{2}\\) \u5373\u590d\u6742\u5ea6\u4e3a \\(O(N^2)\\)\u3002</p>"},{"location":"ZJU_CS/ADS/week7/#_3","title":"\u5206\u6cbb\u65b9\u6cd5","text":"<p>\u73b0\u5728\u6211\u4eec\u7c7b\u6bd4\u6700\u5927\u5b50\u5e8f\u5217\u548c\u95ee\u9898\u7684\u5206\u6cbb\u505a\u6cd5\u3002</p> \u6700\u5927\u5b50\u5e8f\u5217\u548c\u7684\u5206\u6cbb\u505a\u6cd5 <ol> <li>\u5c06\u5e8f\u5217\u5206\u4e3a\u5de6\u53f3\u4e24\u90e8\u5206\uff0c\u5206\u522b\u6c42\u89e3\u6700\u5927\u5b50\u5e8f\u5217\u548c\uff1b</li> <li>\u6c42\u89e3\u8de8\u8d8a\u4e2d\u70b9\u7684\u6700\u5927\u5b50\u5e8f\u5217\u548c\uff1b</li> <li>\u6bd4\u8f83\u4e09\u8005\u7684\u5927\u5c0f\uff0c\u53d6\u6700\u5927\u503c\uff1b</li> </ol> <p>\u6211\u4eec\u53ef\u4ee5\u5c06\u6574\u4e2a\u5e73\u9762\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\uff0c\u5373\u5982\u56fe\u4e2d\u7eff\u8272\u7ebf\u5c06\u70b9\u5bf9\u5212\u5206\u4e3a\u4e24\u4e2a\u90e8\u5206\u3002</p> <p> </p> <p>\u63a5\u4e0b\u6765\u6211\u4eec\u540c\u6837\u5206\u4e3a\u8fd9\u4e48\u4e09\u6b65\uff1a</p> <ol> <li>\u5c06\u70b9\u5bf9\u5206\u4e3a\u5de6\u53f3\u4e24\u90e8\u5206\uff0c\u5206\u522b\u6c42\u89e3\u6700\u8fd1\u70b9\u5bf9\uff1b</li> <li>\u5bfb\u627e\u8de8\u8d8a\u5206\u754c\u7ebf\u7684\u70b9\u5bf9\uff0c\u4ece\u4e2d\u5bfb\u627e\u6700\u8fd1\u70b9\u5bf9\uff1b</li> <li>\u6bd4\u8f83\u4e09\u8005\u7684\u5927\u5c0f\uff0c\u53d6\u6700\u5c0f\u503c\uff1b</li> </ol> <p>\u663e\u7136\uff0c\u6211\u4eec\u73b0\u5728\u9700\u8981\u89e3\u51b3\u7684\u5c31\u662f\u8981\u5982\u4f55\u8bbe\u8ba1\u7b2c\u4e8c\u6b65\u7684\u5b9e\u73b0\uff0c\u4ee5\u6c42\u66f4\u4f18\u7684\u590d\u6742\u5ea6\u3002</p> <p>\u9996\u5148\u6211\u4eec\u5047\u8bbe\u5728\u7b2c\u4e00\u6b65\u4e2d\uff0c\u6211\u4eec\u6c42\u5f97\u4e24\u8fb9\u6c42\u5f97\u7684\u6700\u5c0f\u8ddd\u79bb\u4e2d\u8f83\u5c0f\u7684\u90a3\u4e2a\u4e3a \\(\\delta\\)\uff0c\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u5982\u679c\u7b54\u6848\u5728\u7b2c\u4e8c\u6b65\u4e2d\u88ab\u66f4\u65b0\uff0c\u90a3\u4e48\u5b83\u7684\u8ddd\u79bb\u9700\u8981\u5c0f\u4e8e \\(\\delta\\)\u3002\u800c\u6211\u4eec\u77e5\u9053\uff0c\u5728\u7b2c\u4e8c\u6b65\u4e2d\u88ab\u62ff\u51fa\u6765\u7684\u70b9\u5bf9\uff0c\u4e00\u5b9a\u662f\u4e00\u4e2a\u5728\u5206\u754c\u7ebf\u5de6\u4fa7\u4e00\u4e2a\u5728\u5206\u754c\u7ebf \\(L\\) \u53f3\u4fa7\u3002\u6734\u7d20\u7684\u6765\u60f3\uff0c\u5728\u8ddd\u79bb\u5206\u754c\u7ebf \\(\\delta\\) \u4ee5\u5916\u7684\u70b9\u5bf9\u4e2d\uff0c\u6211\u4eec\u662f\u4e0d\u9700\u8981\u8003\u8651\u7684\u3002\u800c\u5728\u8ddd\u79bb\u5206\u754c\u7ebf \\(\\delta\\) \u4ee5\u5185\u7684\u70b9\uff0c\u90fd\u5b58\u5728\u6210\u4e3a\u7b54\u6848\u70b9\u5bf9\u70b9\u53ef\u80fd\u3002</p> <p></p> <p>\u5982\u56fe\uff0c\u73b0\u5728\u6211\u4eec\u77e5\u9053\uff0c\u53ea\u6709\u843d\u5728\u4e24\u6761\u6df1\u7eff\u8272\u4e4b\u95f4\u7684\u70b9\u624d\u53ef\u80fd\u4f1a\u66f4\u65b0\u7b54\u6848\u3002</p> <p>\u73b0\u5728\u6211\u4eec\u9700\u8981\u505a\u7684\u662f\uff0c\u4ece\u5206\u754c\u7ebf\u5de6\u4fa7\u7684\u533a\u57df\u91cc\u62ff\u4e00\u4e2a\u70b9\uff0c\u548c\u5206\u754c\u7ebf\u53f3\u8fb9\u7684\u4e00\u4e2a\u70b9\u505a\u5339\u914d\uff0c\u7136\u540e\u53d6\u6240\u6709\u7ed3\u679c\u4e2d\u7684\u6700\u5c0f\u70b9\u3002\u4e0d\u8fc7\u8fd9\u4ef6\u4e8b\u4ecd\u7136\u53ef\u4ee5\u4f18\u5316\u2014\u2014\u5728\u4e8c\u7ef4\u7684\u6570\u636e\u4e2d\uff0c\u4ec5\u5bf9\u4e00\u4e2a\u7eac\u5ea6\u505a\u7ea6\u675f\u5f80\u5f80\u4f1a\u5bfc\u81f4\u4e8b\u60c5\u53d8\u5f97\u4e0d\u90a3\u4e48\u7a33\u5b9a\uff0c\u6240\u4ee5\u6211\u4eec\u540c\u6837\u8003\u8651\u5728\u53e6\u5916\u4e00\u4e2a\u65b9\u5411\u505a\u7ea6\u675f\u3002</p> <p>\u4e5f\u662f\u57fa\u4e8e\u8303\u56f4\u7ea6\u675f\u7684\u8003\u8651\u3002\u5047\u8bbe\u6211\u4eec\u4ee5\u5de6\u4fa7\u7684\u70b9\u4e3a\u57fa\u51c6\uff0c\u4ece\u4e0a\u5f80\u4e0b\u505a\u904d\u5386\u8fd9\u4e9b\u70b9\uff0c\u90a3\u4e48\u5bf9\u4e8e\u70b9 \\(p_{l_i}\\)\uff0c\u5177\u6709\u80fd\u591f\u66f4\u65b0\u7b54\u6848\u7684\uff0c \\(\\mathop{dis} (p_{l_i}, p_{r_j}) \\leq \\delta\\) \u7684 \\(p_{r_j}\\)\uff0c\u4e00\u5b9a\u6709 \\(\\mathop{dis_{\\parallel bound}}(p_{l_i}, p_{r_j}) \\leq \\delta\\)\uff08\u76f4\u89d2\u4e09\u89d2\u5f62\u659c\u8fb9\u6700\u957f\uff09\u3002</p> <p>\u56e0\u6b64\uff0c\u5bf9\u4e8e\u9009\u5b9a\u70b9 \\(p_{l_i}\\)\uff0c\u5176\u6240\u6709\u53ef\u80fd\u5bfc\u81f4\u7b54\u6848\u66f4\u65b0\u7684\u70b9\u90fd\u88ab\u6846\u5b9a\u5728\u4e00\u4e2a \\(2\\delta \\times \\delta\\) \u7684\u77e9\u5f62\u4e2d\u3002</p> <p>\u800c\u66f4\u5947\u5999\u7684\u662f\uff0c\u8fd9\u4e2a\u7531\u53c2\u6570 \\(\\delta\\) \u6307\u5b9a\u7684\u77e9\u5f62\uff0c\u5de7\u5999\u5730\u7ea6\u675f\u4e86\u843d\u5728\u77e9\u5f62\u4e2d\u7684\u70b9\u7684\u6700\u5927\u6570\u91cf\u3002</p> <p> </p> <p>\u5728\u8fd9\u6837\u4e00\u4e2a\u533a\u57df\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u7ea6\u675f\u6240\u6709\u843d\u5728 \\(\\delta \\times \\delta\\) \u7684 L \u533a\u57df\u4e2d\u7684\u70b9\uff0c\u4e92\u76f8\u7684\u8ddd\u79bb\u90fd\u5927\u4e8e\u7b49\u4e8e \\(\\delta\\)\uff0c\u5bf9 R \u533a\u57df\u4e2d\u7684\u70b9\u4e5f\u6709\u76f8\u540c\u7684\u7ea6\u675f\u3002\u4e0d\u96be\u53d1\u73b0\uff0c\u5728\u6700\u7406\u60f3\u6700\u7406\u60f3\u7684\u60c5\u51b5\u4e0b\u2014\u2014\u95ed\u533a\u95f4\u3001\u5141\u8bb8\u70b9\u91cd\u5408\u7684\u60c5\u51b5\u4e0b\uff0c\u8fd9\u4e2a\u77e9\u5f62\u6700\u591a\u4e5f\u53ea\u80fd\u653e\u516b\u4e2a\u70b9\uff08\u4e24\u8fb9\u5404\u56db\u4e2a\uff09\uff1a</p> <p> </p> <p>\u800c\u66f4\u4e00\u822c\u7684\u60c5\u51b5\u4e0b\uff0c\u6700\u591a\u4e5f\u53ea\u80fd\u653e\u516d\u4e2a\u70b9\uff08\u4e24\u8fb9\u5404\u4e09\u4e2a\uff09\u3002</p> <p>\u65e0\u8bba\u5982\u4f55\uff0c\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u7ed3\u8bba\uff0c\u5728\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u9009\u5b9a\u7684 \\(p_{l_i}\\)\uff0c\u5bfb\u627e\u5176\u53ef\u80fd\u5bfc\u81f4\u7b54\u6848\u66f4\u65b0\u7684\u70b9\u7684\u590d\u6742\u5ea6\u90fd\u662f\u5e38\u6570\u7ea7\u7684\u3002</p> <p>\u800c\u679a\u4e3e\u8fd9\u4e9b\u201c\u9009\u5b9a\u70b9\u201d\uff0c\u4e5f\u5c31\u662f\u679a\u4e3e \\(p_{l_i}\\)\uff0c\u5176\u590d\u6742\u5ea6\uff08\u6491\u6b7b\uff09\u662f \\(O(N)\\)\u3002</p> <p>\u4e8e\u662f\u6211\u4eec\u80fd\u5f97\u5230\u8fd9\u4e2a\u5206\u6cbb\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u8ba1\u7b97\u9012\u63a8\u516c\u5f0f\uff1a</p> \\[ T(N) = \\underbrace{2\\; T(\\frac{N}{2})}_{\\text{Step 1. divide}} + \\underbrace{O(N)}_{\\text{Step 2. across}} = O(N\\log N) \\] <p>\u800c\u6211\u4eec\u63a5\u4e0b\u6765\u8981\u89e3\u51b3\u7684\u5c31\u662f\uff0c\u5982\u4f55\u901a\u8fc7\u8fd9\u4e2a\u9012\u63a8\u5f0f\u5f97\u5230\u7ed3\u679c\u3002</p>"},{"location":"ZJU_CS/ADS/week7/#_4","title":"\u590d\u6742\u5ea6\u5206\u6790","text":"<p>\u5728\u5f00\u59cb\u63a5\u4e0b\u6765\u7684\u5185\u5bb9\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u7ed9\u51fa\u66f4\u4e00\u822c\u7684\uff0c\u6211\u4eec\u60f3\u8981\u89e3\u51b3\u7684\u95ee\u9898\uff0c\u5373\u6c42\u89e3\u65f6\u95f4\u590d\u6742\u5ea6\u9012\u63a8\u516c\u5f0f\u5f62\u5982\u4e0b\u5f0f\u7684\u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\uff1a</p> \\[ T(N) = aT(\\frac{N}{b}) + f(N) \\;\\;\\;\\; a,b \\in Z^+ \\] <p>\u4f8b\u5982\uff0c\u4e0a\u9762\u7684\u6700\u8fd1\u70b9\u5bf9\u95ee\u9898\uff0c\u5c31\u662f \\(a = 2,\\; b = 2,\\; f(N) = O(N)\\) \u7684\u60c5\u51b5\u3002</p>"},{"location":"ZJU_CS/ADS/week7/#_5","title":"\u4ee3\u6362\u6cd5","text":"<p>\u4ee3\u6362\u6cd5(substitution method)\u7684\u601d\u8def\u975e\u5e38\u76f4\u767d\uff0c\u9996\u5148\u6211\u4eec\u901a\u8fc7\u67d0\u4e9b\u624b\u6bb5\uff08\u6bd4\u5982\u5927\u773c\u89c2\u5bdf\u6cd5\ud83d\udc40\uff09\u6765\u5f97\u5230\u4e00\u4e2a\u9884\u8bbe\u7684\u7ed3\u679c\uff0c\u63a5\u4e0b\u6765\u901a\u8fc7\u4ee3\u5165\u3001\u5f52\u7eb3\u7684\u65b9\u6cd5\u6765\u8bc1\u660e\u8fd9\u4e2a\u7ed3\u679c\u3002</p> <p>\u5927\u80c6\u731c\u6d4b\uff0c\u5c0f\u5fc3\u6c42\u8bc1\uff01</p> <p>\ud83c\udf30</p> \u9898\u9762\u89e3\u7b54 <p>\u6c42\u89e3\u590d\u6742\u5ea6\uff1a</p> \\[ T(N) = 2\\; T(\\frac{N}{2}) + N \\] <p>\u9884\u8bbe\uff1a</p> \\[ T(N) = O(N\\log N) \\] <p>\u4ee3\u5165\uff1a</p> <ul> <li>\u5bf9\u4e8e\u8db3\u591f\u5c0f\u7684 \\(m &lt; N\\)\uff0c\u6709\uff1a</li> </ul> \\[ T(\\frac{m}{2}) = O(\\frac{m}{2}\\log \\frac{m}{2}) \\leq c \\frac{m}{2}\\log \\frac{m}{2} \\] <ul> <li>\u5c06\u4e0a\u5f0f\u4ee3\u5165\uff1a</li> </ul> \\[ T(m) = 2\\; T(\\frac{m}{2}) + m \\] <ul> <li>\u5f97\uff1a</li> </ul> \\[ T(m) \\leq 2\\; c \\frac{m}{2}\\log \\frac{m}{2} + m \\leq c m \\log m \\text{ for } c \\geq 1 \\] <p>\u5bf9\u4e8e\u8db3\u591f\u5c0f\u7684 \\(m = 2\\) \u5f0f\u5b50\u5c31\u53ef\u4ee5\u6210\u7acb\uff0c\u7531\u5f52\u7eb3\u6cd5\u5f97\u7ed3\u8bba\u6210\u7acb\u3002</p> <p>\u4e0d\u8fc7\u5f88\u663e\u7136\uff0c\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u6211\u4eec\u6c42\u8bc1\u4e86\u4e00\u4e2a\u590d\u6742\u5ea6\u7684\u5047\u8bbe\u6210\u7acb\uff0c\u4f46\u5b83\u5e76\u4e0d\u4e00\u5b9a\u8db3\u591f\u7d27\uff0c\u8fd9\u662f\u731c\u89e3\u6cd5\u7684\u901a\u75c5\u3002</p>"},{"location":"ZJU_CS/ADS/week7/#_6","title":"\u9012\u5f52\u6811\u6cd5","text":"<p>\u9012\u5f52\u6811\u6cd5(recursion-tree method)\u7684\u601d\u8def\u662f\uff0c\u6211\u4eec\u901a\u8fc7\u753b\u51fa\u9012\u5f52\u6811\u6765\u5206\u6790\u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\uff0c\u5b9e\u9645\u4e0a\u548c\u76f4\u63a5\u6570\u5b66\u63a8\u7406\u7684\u533a\u522b\u4e0d\u662f\u5f88\u5927\uff0c\u4e3b\u8981\u5c31\u662f\u901a\u8fc7\u89c2\u5bdf\u9012\u5f52\u8fc7\u7a0b\u4e2d\u6570\u636e\u589e\u957f\u7684\u6a21\u5f0f\u6765\u8fdb\u884c\u5206\u6790\u3002</p> some mathematical tools \\[ a^{\\log_b N} = \\exp^{\\frac{\\ln N}{\\ln b} \\ln a} = \\exp^{\\frac{\\ln a}{\\ln b} \\ln N} = N^{\\log_b a} \\] <p>\u5c31\u7c7b\u4f3c\u4e8e\u76f4\u63a5\u5c55\u5f00\u5f0f\u5b50\uff0c\u53ea\u4e0d\u8fc7\u901a\u8fc7\u6811\u72b6\u56fe\u7684\u5f62\u5f0f\u6216\u8bb8\u66f4\u52a0\u76f4\u89c2\u3002</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\u9012\u63a8\u5f0f\uff0c\u6211\u4eec\u5c06\u5b83\u4e0d\u65ad\u5c55\u5f00\u4ee5\u540e\uff0c\u5176\u5f62\u5f0f\u5927\u6982\u4f1a\u662f\u8fd9\u6837\uff1a</p> \\[ T(N) = ... =  \\underbrace{\\sum_{leaf_i}^{leaves}T(N_{leaf_i})}_{conquer} +  \\underbrace{\\sum_{node_i}^{non-leaf-nodes}f(N_{node_i})}_{combine} \\] <p>\u5176\u4e2d\uff0c\u7531\u4e8e\u672b\u7aef\u5b50\u95ee\u9898\u7684\u89c4\u6a21\u4e00\u822c\u90fd\u8db3\u591f\u5c0f\uff0c\u53ef\u4ee5\u8ba4\u4e3a \\(T(N_{leaf_i})\\) \u90fd\u662f\u5e38\u6570\uff0c\u4e8e\u662f\u4e0a\u5f0f\u53c8\u53ef\u4ee5\u53d8\u5316\u4e3a\uff1a</p> \\[ T(N) = ... =  \\underbrace{c\\; N_{leaves}}_{conquer} +  \\underbrace{\\sum_{node_i}^{non-leaf-nodes}f(N_{node_i})}_{combine} \\] <p>\u5177\u4f53\u6765\u8bf4\u89e3\u91ca\u5176\u542b\u4e49\uff0ccombine \u90e8\u5206\u5c31\u662f\u5728\u6bcf\u4e00\u6b21\u201c\u5206\u6cbb\u201d\u7684\u5904\u7406\u65f6\u95f4\uff0c\u5982\u5408\u5e76\u5f53\u524d\u7684\u5b50\u95ee\u9898\u5206\u6cbb\u540e\u7684\u7ed3\u679c\uff0c\u4f53\u73b0\u5728\u9012\u63a8\u5f0f\u7684 \\(f(N)\\) \u90e8\u5206\uff1b\u800c conquer \u90e8\u5206\u6307\u7684\u662f\u5f53\u201c\u5206\u6cbb\u201d\u7684\u201c\u6cbb\u201d\u5728\u201c\u5206\u201d\u7684\u672b\u7aef\u7684\u4f53\u73b0\uff0c\u5373\u5bf9\u4e8e\u8db3\u591f\u5c0f\u7684\u89c4\u6a21\u7684\u95ee\u9898\uff0c\u4e0d\u518d\u9700\u8981\u7ee7\u7eed\u201c\u5206\u201d\u7684\u65f6\u5019\uff0c\u5bf9\u5176\u5904\u7406\u7684\u5f00\u9500\u3002</p> <p>\u5b9e\u9645\u4e0a\u5728\u4ee3\u7801\u5c42\u9762\u8fd9\u4e24\u90e8\u5206\u53ef\u80fd\u533a\u522b\u4e0d\u5927\uff08\u53ef\u80fd\u5c31\u662f\u4e00\u4e2a\u5206\u652f\u7684\u4e8b\u60c5\uff09\uff0c\u4e0d\u8fc7\u5728\u6570\u5b66\u610f\u4e49\u4e0a\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u9012\u63a8\u5f0f\u5b50\u6c42\u89e3\u6211\u4eec\u4e00\u822c\u662f\u9700\u8981\u201c\u9996\u9879\u201d\u7684\uff0c\u6216\u8005\u8bf4\u662f\u201c\u6700\u5e95\u5c42\u201d\u7684\uff0c\u800c\u8fd9\u4e2a\u201c\u6700\u5e95\u5c42\u201d\u7684\u90e8\u5206\u5c31\u662f conquer \u90e8\u5206\u3002</p> <p>\u63a5\u4e0b\u6765\u7ed3\u5408 \ud83c\udf30 \u6765\u5206\u6790\u4e00\u4e0b\uff1a</p> <p>\ud83c\udf30</p> <p></p> <p>From cy's ppt.</p> <p><code>\\underbrace</code> \u4e0b\u9762\u90a3\u4e2a\u7b49\u5f0f\u7684\u8bc1\u660e\u5728\u4e0a\u9762\u7684 \"some mathematical tools\"\u3002</p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u6b64\u60c5\u51b5\u4e0b \\(a = 3,\\; b = 4,\\; f(N) = \\Theta(N^2)\\)\uff0c\u4e5f\u5c31\u662f\u8bf4\u6bcf\u6b21\u5206\u4e3a \\(3\\) \u4e2a\u5b50\u95ee\u9898\uff0c\u5b50\u95ee\u9898\u7684\u89c4\u6a21\u662f \\(\\frac{N}{4}\\)\uff0c\u800c\u5408\u5e76\u5f00\u9500\u4e3a \\(\\Theta(N^2)\\)\u3002</p> <p>\u6b64\u65f6\u7531\u4e8e\u5206\u6cbb\u7684\u7b56\u7565\u662f\u76f8\u5bf9\u5747\u5300\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u8ba4\u4e3a\u5f97\u5230\u7684\u662f\u4e00\u4e2a\u5b8c\u7f8e\u4e09\u53c9\u6811\u3002</p> <p>\u663e\u7136\uff0c\u6811\u9ad8\u4e3a \\(\\log_4 N\\)\uff0c\u6839\u8bb0\u4e3a \\(0\\)\uff0c\u6bcf\u4e2a\u5206\u6cbb\u8282\u70b9\u7684 combine \u5f00\u9500\u5df2\u7ecf\u6807\u6ce8\u5728\u56fe\u7684\u8282\u70b9\u4f4d\u7f6e\uff0c\u6a2a\u5411\u7bad\u5934\u6807\u8bb0\u7684\u662f\u5bf9\u8be5\u5c42\u6240\u6709\u8282\u70b9\u7684\u5f00\u9500\u7684\u6c42\u548c\u3002\u7279\u522b\u7684\uff0c\u5bf9\u4e8e\u6700\u5e95\u5c42\uff0c\u5373\u53f6\u5b50\u5c42\uff0c\u5b83\u8868\u793a\u7684\u662f conquer \u90e8\u5206\u7684\u5f00\u9500\uff08\u867d\u7136\u6211\u4e2a\u4eba\u89c9\u5f97\u6ca1\u5fc5\u8981\u533a\u5206\u8fd9\u4fe9\uff09\u3002</p> <p>\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u6839\u636e\u4e0b\u5f0f\u7684\u5f62\u5f0f\uff0c\u5bf9\u5176\u8fdb\u884c\u6c42\u548c\uff0c\u5f97\u5230\u56fe\u7247\u4e2d\u4e0b\u65b9\u7684\u5f0f\u5b50\u3002</p> \\[ T(N) = ... =  \\underbrace{c\\; N_{leaves}}_{conquer} +  \\underbrace{\\sum_{node_i}^{non-leaf-nodes}f(N_{node_i})}_{combine} \\]"},{"location":"ZJU_CS/ADS/week7/#_7","title":"\u4e3b\u65b9\u6cd5","text":"<p>link</p> <p>OI Wiki: https://oi-wiki.org/basic/complexity/#\u4e3b\u5b9a\u7406-master-theorem</p> <p>Wikipedia: https://en.wikipedia.org/wiki/Master_theorem_(analysis_of_algorithms)</p> <p>\u4e3b\u65b9\u6cd5(master method)\u4e4b\u6240\u4ee5\u53eb\u201c\u4e3b\u201d\uff0c\u662f\u56e0\u4e3a\u5b83\u5206\u6790\u7684\u662f combine \u548c conquer \u90e8\u5206\u5b70\u4e3a\u4e3b\u5bfc\u3002</p>"},{"location":"ZJU_CS/ADS/week7/#_8","title":"\u5f62\u5f0f\u4e00","text":"<p>Form 1</p> <p>\u5bf9\u4e8e\u5f62\u5982 \\(T(N)=aT(N/b)+f(N)\\) \u7684\u9012\u63a8\u5f0f\uff1a</p> <ol> <li>\u82e5 \\(f(N)=O(N^{(\\log_b{a})-\\varepsilon}), \\text{ for }\\varepsilon&gt;0\\)\uff0c\u90a3\u4e48 \\(T(N)=\\Theta(N^{\\log_b{a}})\\)\uff1b</li> <li>\u82e5 \\(f(N)=\\Theta(N^{\\log_b{a}})\\)\uff0c\u90a3\u4e48 \\(T(N)=\\Theta(N^{\\log_b{a}}\\log{N})\\)\uff1b</li> <li>\u82e5 \\(f(N)=\\Omega(N^{(\\log_b{a})+\\varepsilon}), \\text{ for }\\varepsilon&gt;0\\) \u4e14 \\(af(\\frac{N}{b})&lt;cf(N), \\text{ for } c&lt;1 \\text{ and } \\forall N &gt; N_0\\)\uff0c\u90a3\u4e48 \\(T(N)=\\Theta(f(N))\\)\uff1b</li> </ol> <p>\u60c5\u51b5\u4e09\u7684\u540e\u9762\u90a3\u4e2a\u6761\u4ef6\u53c8\u53eb regularity condition\u3002</p> <p>\u56de\u987e\u6211\u4eec\u5728\u524d\u9762\u8bf4\u7684\u90a3\u53e5\u8bdd\uff0c\u300c\u4e3b\u65b9\u6cd5(master method)\u4e4b\u6240\u4ee5\u53eb\u201c\u4e3b\u201d\uff0c\u662f\u56e0\u4e3a\u5b83\u5206\u6790\u7684\u662f combine \u548c conquer \u90e8\u5206\u5b70\u4e3a\u4e3b\u5bfc\u300d\uff0c\u89c2\u5bdf\u4e09\u79cd\u60c5\u51b5\u7684\u533a\u5206\u6761\u4ef6\u90fd\u662f\u6bd4\u8f83 \\(f(N)\\)\uff08\u6bcf\u4e00\u6b21\u7684 combine \u5f00\u9500\uff09 \u548c \\(N^{\\log_b{a}}\\)\uff08\u5373\u6c42\u548c\u5f0f\u4e2d\u7684 conquer \u7684\u5f00\u9500\uff09\uff0c\u5f53 \\(f(N)\\) \u8db3\u591f\u5c0f\u65f6\uff0c\u4ee5 conquer \u5f00\u9500\u4e3a\u4e3b\uff08i.e. case 1\uff09\uff1b\u5f53\u8db3\u591f\u5927\u65f6\uff0c\u4ee5 combine \u4e3a\u4e3b\uff08i.e. case 3\uff09\uff1b\u800c\u5176\u4e2d\u8fd8\u6709\u4e00\u4e2a\u4e2d\u95f4\u72b6\u6001\uff08i.e. case 2\uff09\u3002</p> examples for form 1 <ul> <li>\u3010eg1\u3011\\(a = b = 2,\\; f(N) = N\\)\uff1b<ul> <li>\\(f(N) = N = \\Theta(N^{\\log_2{2}})\\)\uff0c\u9002\u7528\u4e8e\u60c5\u51b5 2\uff1b</li> <li>\u56e0\u6b64\u5f97\u5230\u7ed3\u679c \\(T(N) = \\Theta(N \\log N)\\)\uff1b</li> </ul> </li> <li>\u3010eg2\u3011\\(a = b = 2,\\; f(N) = N \\log N\\)\uff1b<ul> <li>\\(f(N) = N \\log N\\)\uff0c\u867d\u7136 \\(N \\log N = \\Omega(N^{\\log_2{2}})\\)\uff0c\u4f46\u662f \\(N \\log N \\neq \\Omega(N^{(\\log_2{2}) - \\varepsilon})\\)\uff0c\u6240\u4ee5\u4e0d\u9002\u7528\u4e8e\u60c5\u51b5 3\uff1b<ul> <li>\u5177\u4f53\u6765\u8bf4\uff0c\\(\\lim \\limits_{N\\to \\infty} \\frac{N \\log N}{N^{1+\\varepsilon}}=\\lim \\limits_{N\\to \\infty} \\frac{\\log N}{N^{\\varepsilon}} = 0 \\text{ for fixed } \\varepsilon &gt; 0\\)\uff1b</li> <li>\u8fd9\u4e2a\u4f8b\u5b50\u4f53\u73b0\u51fa\u4e86 \\(\\varepsilon\\) \u7684\u4e00\u5b9a\u4f5c\u7528\uff1b</li> </ul> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/ADS/week7/#_9","title":"\u8bc1\u660e","text":"<p>proof for form 1</p> <p>\u5bf9\u4e8e\u5f62\u5982 \\(T(N)=aT(N/b)+f(N)\\) \u7684\u9012\u63a8\u5f0f\uff0c\u6211\u4eec\u9700\u8981\u4f9d\u6b21\u8bc1\u660e\uff0c\u6b64\u5904\u6211\u4eec\u4f7f\u7528\u9012\u5f52\u6811\u6cd5\u8fdb\u884c\u8bc1\u660e\u3002</p> \u60c5\u51b5\u4e00 <p>\ud83c\udfaf \u76ee\u6807\uff1a\u82e5 \\(f(N)=O(N^{(\\log_b{a})-\\varepsilon}), \\text{ for }\\varepsilon&gt;0\\)\uff0c\u90a3\u4e48 \\(T(N)=\\Theta(N^{\\log_b{a}})\\)\uff1b</p> <p>\ud83e\udea7 \u8bc1\u660e\uff1a\u6211\u4eec\u9996\u5148\u9700\u8981\u7ed8\u5236\u51fa\u5bf9\u5e94\u7684\u9012\u5f52\u6811\uff0c\u6216\u8005\u641e\u6e05\u695a\u5c55\u5f00\u540e\u7684\u60c5\u51b5\uff0c\u56e0\u4e3a\u61d2\u5f97\u753b\u56fe\u6240\u4ee5\u6211\u8fd9\u91cc\u91c7\u7528\u6587\u5b57\u53d9\u8ff0\u3002</p> <p>\u6811\u9ad8 \\(\\log_b{N}\\)\uff0c\u5171 \\(\\log_b{N} + 1\\) \u5c42\uff0c\u5219\u6709\uff1a</p> <ul> <li>\u7b2c \\(0\\) \u5c42\uff08\u6839\uff09\u4e00\u5171 \\(1\\) \u9879\uff0ccombine \u7684\u5f00\u9500\u4e3a \\(f(N)\\)\uff1b</li> <li>\u7b2c \\(1\\) \u5c42\u4e00\u5171 \\(a\\) \u9879\uff0ccombine \u7684\u5f00\u9500\u4e3a \\(a\\times f(\\frac{N}{b})\\)\uff1b</li> <li>\u7b2c \\(2\\) \u5c42\u4e00\u5171 \\(a^2\\) \u9879\uff0ccombine \u7684\u5f00\u9500\u4e3a \\(a^2 \\times f(\\frac{N}{b^2})\\)\uff1b</li> <li>......</li> <li>\u7b2c \\(j\\) \u5c42\u4e00\u5171 \\(a^j\\) \u9879\uff0ccombine \u7684\u5f00\u9500\u4e3a \\(a^j \\times f(\\frac{N}{b^j})\\)\uff1b</li> <li>......</li> <li>\u7b2c \\((\\log_b{N}) - 1\\) \u5c42\u4e00\u5171 \\(a^{(\\log_b{N}) - 1}\\) \u9879\uff0ccombine \u7684\u5f00\u9500\u4e3a \\(a^{(\\log_b{N}) - 1} \\times f(\\frac{N}{b^{(\\log_b{N}) - 1}})\\)\uff1b</li> <li>\u7b2c \\(\\log_b{N}\\) \u5c42\uff0c\u5373\u4e3a\u53f6\u5b50\u5c42\uff0c\u4e00\u5171 \\(a^{\\log_b{N}} = N^{\\log_b{a}}\\) \u9879\uff0cconquer \u7684\u5f00\u9500\u4e3a \\(N^{\\log_b{a}} \\times \\Theta(1) = \\Theta(N^{\\log_b{a}})\\)\uff1b</li> </ul> <p>\u5f97\u5230\u6c42\u548c\u5f0f\uff1a</p> \\[ T(N) = \\Theta(N^{\\log_b{a}}) + \\sum_{j = 0}^{(\\log_b{N})-1} a^j f(\\frac{N}{b^j}) \\] <p>\u800c\u6211\u4eec\u6709\u6761\u4ef6 \\(f(N)=O(N^{(\\log_b{a})-\\varepsilon}), \\text{ for }\\varepsilon&gt;0\\)\uff0c\u5c06\u5b83\u4ee3\u5165\u5230\u4e0a\u5f0f\u4e2d\u5f97\u5230\uff1a</p> \\[ \\begin{aligned} T(N)  &amp;= \\Theta(N^{\\log_b{a}}) + \\sum_{j = 0}^{(\\log_b{N})-1} a^j O\\left(\\left(\\frac{N}{b^j}\\right)^{(\\log_b{a})-\\varepsilon}\\right)\\\\ &amp;= \\Theta(N^{\\log_b{a}}) + O\\left(     N^{(\\log_b{a}) - \\varepsilon}     \\times     \\sum_{j = 0}^{(\\log_b{N})-1} \\left(\\frac{a}{b^{(\\log_b{a})-\\varepsilon}}\\right)^j \\right) \\\\ &amp;= \\Theta(N^{\\log_b{a}}) + O\\left(     N^{(\\log_b{a}) - \\varepsilon}     \\times     \\sum_{j = 0}^{(\\log_b{N})-1} (b^{\\varepsilon})^j \\right) \\\\ &amp;= \\Theta(N^{\\log_b{a}}) + O\\left(     N^{(\\log_b{a}) - \\varepsilon}     \\times     \\frac{1\\times(1-(b^\\varepsilon)^{\\log_b{N}})}{1-b^\\varepsilon} \\right) \\\\ &amp;= \\Theta(N^{\\log_b{a}}) + O\\left(     N^{(\\log_b{a}) - \\varepsilon}     \\times     \\frac{N^\\varepsilon-1}{b^\\varepsilon-1} \\right) \\\\ &amp;= \\Theta(N^{\\log_b{a}}) + O\\left(     N^{(\\log_b{a}) - \\varepsilon}     \\times     N^\\varepsilon \\right) \\\\ &amp;= \\Theta(N^{\\log_b{a}}) + O\\left(     N^{\\log_b{a}} \\right) \\\\ &amp;= \\Theta(N^{\\log_b{a}}) \\end{aligned} \\] <p>\u81f3\u6b64\uff0c\u60c5\u51b5\u4e00\u8bc1\u660e\u5b8c\u6bd5\u3002</p> \u60c5\u51b5\u4e8c <p>\ud83c\udfaf \u76ee\u6807\uff1a\u82e5 \\(f(N)=\\Theta(N^{\\log_b{a}})\\)\uff0c\u90a3\u4e48 \\(T(N)=\\Theta(N^{\\log_b{a}}\\log{N})\\)\uff1b</p> <p>\ud83e\udea7 \u8bc1\u660e\uff1a\u524d\u9762\u7684\u90e8\u5206\u548c\u60c5\u51b5\u4e00\u7684\u7c7b\u4f3c\uff0c\u6211\u4eec\u901a\u8fc7\u76f8\u540c\u7684\u6b65\u9aa4\u5f97\u5230\u76f8\u540c\u7684\u6c42\u548c\u5f0f\uff1a</p> \\[ T(N) = \\Theta(N^{\\log_b{a}}) + \\sum_{j = 0}^{(\\log_b{N})-1} a^j f(\\frac{N}{b^j}) \\] <p>\u800c\u6211\u4eec\u6709\u6761\u4ef6 \\(f(N)=\\Theta(N^{\\log_b{a}})\\)\uff0c\u5c06\u5b83\u4ee3\u5165\u5230\u4e0a\u5f0f\u4e2d\u5f97\u5230\uff1a</p> \\[\\begin{aligned} T(N) &amp;= \\Theta(N^{\\log_b{a}}) + \\sum_{j=0}^{(\\log_b{N})-1}a^j\\Theta\\left(\\left(\\frac{N}{b^j}\\right)^{\\log_b{a}}\\right) \\\\ &amp;= \\Theta(N^{\\log_b{a}}) + \\Theta\\left(     N^{\\log_b{a}} \\times     \\sum_{j=0}^{(\\log_b{N})-1}\\left(\\frac{a}{b^{\\log_b{a}}}\\right)^j \\right) \\\\ &amp;= \\Theta(N^{\\log_b{a}}) + \\Theta\\left(     N^{\\log_b{a}} \\times     \\log_b{N} \\right) \\\\ &amp;= \\Theta(N^{\\log_b{a}}\\log{N}) \\end{aligned}\\] <p>\u81f3\u6b64\uff0c\u60c5\u51b5\u4e8c\u8bc1\u660e\u5b8c\u6bd5\u3002</p> \u60c5\u51b5\u4e09 <p>\ud83c\udfaf \u76ee\u6807\uff1a\u82e5 \\(f(N)=\\Omega(N^{(\\log_b{a})+\\varepsilon}), \\text{ for }\\varepsilon&gt;0\\) \u4e14 \\(af(\\frac{N}{b})&lt;cf(N), \\text{ for } c&lt;1 \\text{ and } \\forall N &gt; N_0\\)\uff0c\u90a3\u4e48 \\(T(N)=\\Theta(f(N))\\)\uff1b</p> <p>\ud83e\udea7 \u8bc1\u660e\uff1a\u60c5\u51b5\u4e09\u7684\u8bc1\u660e\uff0c\u4ece\u6761\u4ef6\u7684\u53d8\u5316\u5c31\u53ef\u4ee5\u770b\u51fa\u6765\u548c\u524d\u9762\u7a0d\u8bb8\u6709\u4e9b\u4e0d\u540c\u4e86\u3002\u4e0d\u8fc7\u6c42\u548c\u5f0f\u7684\u5f97\u5230\u8fd8\u662f\u4e00\u6837\uff0c\u901a\u8fc7\u548c\u4e4b\u524d\u4e00\u6837\u7684\u65b9\u6cd5\uff0c\u6211\u4eec\u9996\u5148\u5f97\u5230\u6c42\u548c\u5f0f\uff1a</p> \\[ T(N) = \\Theta(N^{\\log_b{a}}) + \\sum_{j = 0}^{(\\log_b{N})-1} a^j f(\\frac{N}{b^j}) \\] <p>\u63a5\u4e0b\u6765\u7684\u6b65\u9aa4\u548c\u4e4b\u524d\u4e0d\u540c\u3002\u5728\u7ee7\u7eed\u4e4b\u524d\uff0c\u6211\u4eec\u9996\u5148\u89c2\u5bdf\u4e0d\u7b49\u5f0f \\(af(\\frac{N}{b})&lt;cf(N)\\)\uff0c\u5728\u6211\u4eec\u7684\u6c42\u548c\u5f0f\u4e2d\uff0c\u6211\u4eec\u89c2\u5bdf\u5230\u6211\u4eec\u6709\u5927\u91cf\u7684\u5f62\u5982 \\(a^jf(\\frac{N}{b^j})\\) \u7684\u9879\uff0c\u800c\u8fd9\u4e9b\u9879\u90fd\u53ef\u4ee5\u901a\u8fc7\u8fed\u4ee3\u4e0a\u9762\u90a3\u4e2a\u4e0d\u7b49\u5f0f\u6765\u5b9e\u73b0\uff0c\u5373\uff1a</p> \\[ a^jf(\\frac{N}{b^j}) &lt; c\\times a^{j-1}f(\\frac{N}{b^{j-1}}) &lt; ... &lt; c^j f(N) \\] <p>\u5c06\u8fd9\u4e2a\u4e0d\u7b49\u5f0f\u5e94\u7528\u4e8e\u6c42\u548c\u5f0f\u4e2d\uff0c\u6211\u4eec\u80fd\u591f\u5f97\u5230\uff1a</p> \\[ \\begin{aligned}     T(N)      &amp;&lt; \\Theta(N^{\\log_b{a}}) + \\sum_{j=0}^{(\\log_b{N})-1}c^j f(N) \\\\     &amp;= \\Theta(N^{\\log_b{a}}) + f(N) \\sum_{j=0}^{(\\log_b{N})-1}c^j \\\\     &amp;= \\Theta(N^{\\log_b{a}}) + f(N) \\times \\frac{c^{1-\\log_b{N}}}{1-c} \\\\     &amp;= \\Theta(N^{\\log_b{a}}) + f(N) \\times \\frac{1-N^{\\log_b{c}}}{1-c} \\end{aligned}         \\] <p>\u800c\u7531\u4e8e \\(c&lt;1\\)\uff0c\u6240\u4ee5 \\(\\log_b{c} &lt; 0\\)\uff1b\u800c \\(N &gt; 0\\)\uff0c\u800c\u4e14\u4e00\u822c\u975e\u5e38\u5927\uff0c\u6240\u4ee5 \\(N^{\\log_b{c}} \\in (0,1)\\)\u3002\u56e0\u6b64\uff0c\u5bf9\u4e8e\u786e\u5b9a\u7684\u5e38\u6570 \\(c\\)\uff0c\u6211\u4eec\u6709 \\(\\frac{1-N^{\\log_b{c}}}{1-c} \\in \\left(0, \\frac{1}{1-c}\\right)\\)\uff1b</p> <p>\u56e0\u6b64\uff0c\u4e0a\u5f0f\u4fbf\u80fd\u6539\u53d8\u4e3a\uff1a</p> \\[ \\begin{aligned}     T(N)      &amp;&lt; \\Theta(N^{\\log_b{a}}) + f(N) \\times \\frac{1-N^{\\log_b{c}}}{1-c} \\\\     &amp;&lt; \\Theta(N^{\\log_b{a}}) + f(N) \\times \\frac{1}{1-c} \\end{aligned} \\] <p>\u5e76\u4e14\uff0c\u7531\u4e8e \\(f(N)=\\Omega(N^{(\\log_b{a})+\\varepsilon}), \\text{ for }\\varepsilon&gt;0\\)\uff0c\u6240\u4ee5\u6839\u636e\u7b26\u53f7\u5b9a\u4e49\u53ef\u4ee5\u5f97\u5230 \\(T(N) = O(f(N))\\)\u3002</p> <p>\u800c\u6211\u4eec\u77e5\u9053\uff0c\u8981\u8bc1\u660e \\(T(N) = \\Theta(f(N))\\) \u8fd8\u9700\u8981\u8bc1\u660e \\(T(N) = \\Omega(f(N))\\)\uff1a</p> \\[ \\begin{aligned} T(N) &amp;= \\Theta(N^{\\log_b{a}}) + \\sum_{j = 0}^{(\\log_b{N})-1} a^j f(\\frac{N}{b^j}) &amp;\\geq \\sum_{j = 0}^{(\\log_b{N})-1} a^j f(\\frac{N}{b^j}) &amp;\\geq f(N) \\end{aligned} \\] <p>\u7531\u6b64\u5f97\u5230 \\(T(N) = \\Omega(f(N))\\)\uff0c\u6700\u7ec8\u8bc1\u5f97 \\(T(N) = \\Theta(f(N))\\)\uff0c\u81f3\u6b64\uff0c\u60c5\u51b5\u4e09\u8bc1\u660e\u5b8c\u6bd5\u3002</p>"},{"location":"ZJU_CS/ADS/week7/#_10","title":"\u5f62\u5f0f\u4e8c","text":"<p>Form 2</p> <p>\u5bf9\u4e8e\u5f62\u5982 \\(T(N) = aT(\\frac{N}{b}) + f(N)\\) \u7684\u9012\u63a8\u5f0f\uff1a</p> <ol> <li>\u82e5 \\(af(\\frac{N}{b}) = \\kappa f(N) \\text{ for fixed } \\kappa &lt; 1\\)\uff0c\u90a3\u4e48 \\(T(N) = \\Theta(f(N))\\)\uff1b</li> <li>\u82e5 \\(af(\\frac{N}{b}) = \\Kappa f(N) \\text{ for fixed } \\Kappa &gt; 1\\)\uff0c\u90a3\u4e48 \\(T(N) = \\Theta(N^{\\log_b{a}}) = \\Theta(a^{\\log_b{N}})\\)\uff08\u4e2a\u4eba\u611f\u89c9\u540e\u9762\u90a3\u4e2a\u5f0f\u5b50\u66f4\u65b9\u4fbf\u76f4\u89c2\u8bb0\u5fc6\uff09\uff1b</li> <li>\u82e5 \\(af(\\frac{N}{b}) = f(N)\\)\uff0c\u90a3\u4e48 \\(T(N) = \\Theta(f(N) \\log_b N)\\)\uff1b</li> </ol>"},{"location":"ZJU_CS/ADS/week7/#_11","title":"\u8bc1\u660e","text":"<p>proof for form 2</p> <p>\u5bf9\u4e8e\u5f62\u5982 \\(T(N)=aT(N/b)+f(N)\\) \u7684\u9012\u63a8\u5f0f\uff0c\u57fa\u4e8e\u7ebf\u6027\u5173\u7cfb\u7684\u5f62\u5f0f\u4e8c\u7684\u8bc1\u660e\u5b9e\u9645\u4e0a\u548c\u5f62\u5f0f\u4e00\u7684\u7b2c\u4e09\u79cd\u60c5\u51b5\u7684\u8bc1\u660e\u975e\u5e38\u76f8\u50cf\u3002</p> <p>\u5047\u8bbe\u6211\u4eec\u6709 \\(af(\\frac{N}{b}) = c f(N)\\)\uff0c\u53ea\u9700\u8981\u8ba8\u8bba \\(c\\) \u7684\u53d6\u503c\u8303\u56f4\u5bf9\u7ed3\u679c\u7684\u5f71\u54cd\uff0c\u5c31\u53ef\u4ee5\u4e00\u6b21\u6027\u5f97\u5230\u7ed3\u679c\u3002</p> <p>\u7c7b\u4f3c\u4e8e\u5f62\u5f0f\u4e00\u7684\u7b2c\u4e09\u79cd\u60c5\u51b5\u7684\u8bc1\u660e\uff0c\u6211\u4eec\u8fed\u4ee3\u8be5\u5173\u7cfb\u5f0f\uff0c\u5f97\u5230\u5173\u7cfb\uff1a</p> \\[ a^j f(\\frac{N}{b^j}) = c^j f(N) \\] <p>\u4e8e\u662f\uff0c\u6211\u4eec\u6709\uff1a</p> \\[ \\begin{aligned}     T(N)     &amp;= \\Theta(N^{\\log_b{a}}) + \\sum_{j = 0}^{(\\log_b{N})-1} a^j f(\\frac{N}{b^j}) \\\\     &amp;= \\Theta(N^{\\log_b{a}}) + \\sum_{j = 0}^{(\\log_b{N})-1} c^j f(N) \\\\     &amp;= \\Theta(N^{\\log_b{a}}) + f(N) \\sum_{j = 0}^{(\\log_b{N})-1} c^j \\\\     &amp;= \\Theta(N^{\\log_b{a}}) + f(N) \\times \\frac{1-N^{\\log_b{c}}}{1-c} \\\\ \\end{aligned} \\] <p>\u5929\u5450\uff0c\u8fd9\u4e0d\u5c31\u662f\u5f62\u5f0f\u4e00\u91cc\u7b2c\u4e09\u79cd\u60c5\u51b5\u7684\u5f0f\u5b50\u5417\uff1f\u7136\u800c\u5f53\u6211\u4eec\u6ee1\u5fc3\u6b22\u559c\u5730\u6253\u7b97\u7167\u7740\u5b83\u8bc1\u660e\u5f62\u5f0f\u4e8c\u7684\u60c5\u51b5\u4e00\u65f6\u4f1a\u53d1\u73b0\uff0c\u6761\u4ef6\u597d\u50cf\u4e0d\u591f\u3002\u6211\u4eec\u73b0\u5728\u5e76\u6ca1\u6709\u663e\u5f0f\u7684 \\(f(N) = \\Omega(N^{\\log_b {a}} + \\epsilon)\\) \u7684\u6761\u4ef6\uff0c\u800c\u8fd9\u4e2a\u6761\u4ef6\u6700\u7ec8\u51b3\u5b9a conquer \u90e8\u5206\u548c combine \u90e8\u5206\u8c01\u5360\u4e3b\u5bfc\u5730\u4f4d\u3002\u4f46\u662f\uff0c\u6211\u4eec\u5b9e\u9645\u4e0a\u53ea\u9700\u8981\u5f97\u5230 \\(f(N)\\) = \\(\\Omega(N^{\\log_b {a}})\\) \u5c31\u591f\u4e86\u3002\u5176\u5b9e \\(af(\\frac{N}{b}) \\sim c f(N)\\) \u8fd9\u4ef6\u4e8b\u672c\u8eab\u5c31\u6697\u542b\u4e86\u5b83\u4e0e \\(N^{\\log_b {a}}\\) \u7684\u5173\u7cfb\uff1a</p> <p>\u4e3a\u4e86\u91cd\u590d\u5229\u7528\u8fc7\u7a0b\uff0c\u6211\u76f4\u63a5\u7528 \\(\\sim\\) \u6765\u4ee3\u66ff \\(&lt;,&gt;,=\\) \u4e86\uff0c\u8fc7\u7a0b\u4e2d\u4fdd\u6301\u4f20\u9012\u6027\u3002</p> \\[ c f(N) \\sim a f(\\frac{N}{b}) \\sim ... \\sim a^L f(\\frac{N}{b^L}) \\] <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u8fd9\u4e00\u6b65\u8fd8\u662f\u548c\u5f62\u5f0f\u4e00\u7684\u7b2c\u4e09\u79cd\u60c5\u51b5\u7684\u8bc1\u660e\u8fc7\u7a0b\u9ad8\u5ea6\u76f8\u4f3c\u3002\u53ea\u4e0d\u8fc7\u73b0\u5728\u6211\u4eec\u8981\u66f4\u8fdb\u4e00\u6b65\u5730\u770b\u8fd9\u4e2a\u5f0f\u5b50\u3002</p> <p>\u5f53 \\(c &lt; 1\\) \u65f6\uff0c\u5b9e\u9645\u4e0a\u6709 \\(f(N) &gt; af(\\frac{N}{b})\\)\uff1b\u5f53 \\(c = 1\\) \u65f6\uff0c\u5b9e\u9645\u4e0a\u6709 \\(f(N) = af(\\frac{N}{b})\\)\uff1b \\(c &gt; 1\\) \u65f6\uff0c\u5b9e\u9645\u4e0a\u6709 \\(f(N) &lt; af(\\frac{N}{b})\\)\uff1b</p> <p>\u6211\u4eec\u5047\u8bbe \\(\\frac{N}{b^L}\\) \u8db3\u591f\u5c0f\uff08\u5373\u9012\u5f52\u5230\u6700\u672b\u7aef\uff0c\u53ea\u9700\u8981\u8fdb\u884c conquer \u7684\u65f6\u5019\uff09\uff0c\u5373 \\(\\frac{N}{b^L} = \\Theta(1)\\)\uff0c\u90a3\u4e48\u5c31\u6709 \\(L = \\Theta(\\log_b{N})\\)\u3002\u4e8e\u662f\uff0c\u6211\u4eec\u6709\uff1a</p> \\[ f(N) \\sim \\Theta(a^{\\log_b{N}}) = \\Theta(N^{\\log_b{a}}) \\] <p>\u7686\u5927\u6b22\u559c\uff01\u4e09\u4e2a\u613f\u671b\uff0c\u4e00\u6b21\u6ee1\u8db3\uff01</p> <p>\u5269\u4e0b\u7684\u8bc1\u660e\u8fc7\u7a0b\u6211\u5c31\u4e0d\u518d\u8d58\u8ff0\u4e86\u3002</p>"},{"location":"ZJU_CS/ADS/week7/#_12","title":"\u5f62\u5f0f\u4e09","text":"<p>Form 3</p> <p>\u7b2c\u4e09\u79cd\u5f62\u5f0f\u662f\u5bf9\u4e8e \\((N)\\) \u7684\u7279\u522b\u5f62\u5f0f\uff0c\u5f53\u9012\u63a8\u5173\u7cfb\u6ee1\u8db3\uff1a</p> \\[ \\begin{aligned} &amp; T(N) = a T(\\frac{n}{b}) + \\Theta(N^k \\log^p{N}) &amp; \\text{Where } a \\geq 1,\\; b &gt; 1,\\; p \\geq 0 \\end{aligned} \\] <p>\u5176\u590d\u6742\u5ea6\u6709\u7ed3\u8bba\uff1a</p> \\[ T(N) = \\left\\{     \\begin{aligned}         &amp; O(N^{\\log_b{a}}) &amp; \\text{if } a &gt; b^{k} \\\\         &amp; O(N^k \\log^{p+1}{N}) &amp; \\text{if } a = b^{k} \\\\         &amp; O(N^k \\log^{p}{N}) &amp; \\text{if } a &lt; b^{k}     \\end{aligned} \\right. \\] <p>\u5b9e\u9645\u4e0a\u8fd9\u4e2a\u5f0f\u5b50\u4e5f\u975e\u5e38\u597d\u8ba4\uff0c\u5c5e\u4e8e\u5f62\u5f0f\u4e8c\u7684\u4e00\u79cd\u7279\u6b8a\u5f62\u5f0f\u3002\u53ef\u4ee5\u5bf9\u7167\u7740\u770b\uff0c\u975e\u5e38\u5bb9\u6613\u770b\u51fa\u5173\u7cfb\u3002</p> <p>\u53ea\u4e0d\u8fc7\u5bf9\u4e8e\u7279\u6b8a\u60c5\u51b5\uff0c\u8fd9\u4e2a\u5f62\u5f0f\u7684\u7ea6\u675f\u66f4\u52a0\u7cbe\u786e\uff0c\u8bc1\u660e\u8fc7\u7a0b\u6709\u7f18\u518d\u8865\u5427x</p>"},{"location":"ZJU_CS/ADS/week7/#_13","title":"\u603b\u7ed3","text":"<p>\u6700\u540e\u4e00\u6761\\(r&gt;1\\) </p> <p> </p>"},{"location":"ZJU_CS/ADS/week8/","title":"Lecture 8 | Dynamic Programming","text":""},{"location":"ZJU_CS/ADS/week9/","title":"Lecture 9 | Greedy Algorithms","text":"<p>\u679c\u7136\u8d8a\u6765\u8d8a\u5bbd\u6cdb\u4e86</p>"},{"location":"ZJU_CS/ADS/week9/#_1","title":"\u6982\u5ff5","text":"<p>\u8d2a\u5fc3\u7b97\u6cd5(Greedy Algorithms)\u662f\u4e00\u79cd\u5728\u6c42\u89e3\u4f18\u5316\u95ee\u9898\u65f6\u91c7\u7528\u7684\u7b56\u7565\uff0c\u5b83\u5728\u6bcf\u4e2a\u51b3\u7b56\u9636\u6bb5\u90fd\u9009\u62e9\u5f53\u524d\u770b\u8d77\u6765\u6700\u4f18\u7684\u89e3\u51b3\u65b9\u6848\uff0c\u4ece\u800c\u5e0c\u671b\u80fd\u591f\u8fbe\u5230\u5168\u5c40\u6700\u4f18\u89e3\u3002\u8d2a\u5fc3\u7b97\u6cd5\u7684\u6838\u5fc3\u601d\u60f3\u662f\u5c40\u90e8\u6700\u4f18\u9009\u62e9\uff0c\u901a\u8fc7\u4e00\u7cfb\u5217\u5c40\u90e8\u6700\u4f18\u7684\u9009\u62e9\uff0c\u6765\u8fbe\u5230\u5168\u5c40\u6700\u4f18\u7684\u76ee\u6807\u3002\u8d2a\u5fc3\u7b97\u6cd5\u6613\u4e8e\u5b9e\u73b0\uff0c\u4f46\u5e76\u4e0d\u603b\u662f\u80fd\u591f\u5f97\u5230\u5168\u5c40\u6700\u4f18\u89e3\uff0c\u56e0\u6b64\u5728\u4f7f\u7528\u8d2a\u5fc3\u7b97\u6cd5\u65f6\u9700\u8981\u5206\u6790\u95ee\u9898\u7684\u7279\u6027\u4ee5\u786e\u4fdd\u5176\u9002\u7528\u6027\u3002</p> <p>\u2014\u2014ChatGPT</p> <p>\u8d2a\u5fc3\u601d\u60f3\u548c\u5b83\u7684\u540d\u5b57\u4e00\u6837\u7b80\u5355\u66b4\u529b\uff0c\u5c31\u662f\u5728\u6bcf\u4e00\u4e2a\u6b65\u9aa4\u4e2d\u90fd\u91c7\u53d6\u5c40\u90e8\u6700\u4f18\u89e3\uff0c\u6700\u7ec8\u6c42\u5f97\u6700\u4f18\u89e3\u3002\u4f46\u662f\u663e\u7136\u8fd9\u4e2a\u65b9\u6cd5\u5e76\u4e0d\u603b\u80fd\u201c\u6700\u7ec8\u6c42\u5f97\u6700\u4f18\u89e3\u201d\u3002\u56e0\u6b64\u867d\u7136\u8fd9\u4e2a\u65b9\u6cd5\u770b\u8d77\u6765\u76f4\u63a5\u66b4\u529b\uff0c\u4f46\u662f\u5982\u4f55\u627e\u5230\u7528\u300c\u8d2a\u5fc3\u300d\u89e3\u51b3\u95ee\u9898\u7684\u8def\u5f84\uff0c\u5f80\u5f80\u662f\u9700\u8981\u52a8\u52a8\u8111\u5b50\u7684\u3002</p> <p>\u548c dp \u4e00\u6837\uff0c\u8d2a\u5fc3\u662f\u4e00\u4e2a\u6bd4\u8f83\u601d\u60f3\u6027\u8d28\u7684\u4e1c\u897f\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u501f\u52a9\u8bb8\u591a\u6848\u4f8b\u6765\u8fdb\u884c\u5206\u6790\u3002</p>"},{"location":"ZJU_CS/ADS/week9/#activity_selection_problem","title":"[\u6848\u4f8b] Activity Selection Problem","text":"<p>\u5728\u8bfe\u4ef6\u4e0a\uff0c\u6d3b\u52a8\u9009\u62e9\u95ee\u9898(Activity Selection Problem)\u7684\u9648\u8ff0\u5982\u4e0b\uff1a</p> <p>Activity Selection Problem</p> <p>Given a set of activities \\(S = { a_1, a_2, ..., a_n }\\) that wish to use a resource (e.g. a classroom).  Each \\(a_i\\) takes place during a time interval \\([s_i, f_i)\\).</p> <p>Activities \\(a_i\\) and \\(a_j\\) are compatible if \\(s_i \\geq f_j\\) or \\(s_j \\geq f_i\\) (i.e. their time intervals do not overlap).</p> <p>Goal: Select a maximum-size subset of mutually compatible activities.</p> <ul> <li>Assume \\(f_1\\geq f_2 \\geq ... \\geq f_n\\).</li> </ul> <p>\u62bd\u8c61\u6765\u8bf4\u5c31\u662f\u4e00\u4e2a\u4e00\u7ef4\u7684\u5bc6\u94fa\u95ee\u9898\u3002\u7ed9\u5b9a\u65f6\u95f4\u7ebf\u4e0a\u7684\u82e5\u5e72\u533a\u95f4 \\([s_i, f_i)\\)\uff0c\u6c42\u51fa\u6700\u591a\u80fd\u4e0d\u91cd\u53e0\u5730\u5728\u8fd9\u4e2a\u65f6\u95f4\u7ebf\u4e0a\u653e\u7f6e\u591a\u5c11\u4e2a\u533a\u95f4\u3002\u9898\u76ee\u989d\u5916\u4fdd\u8bc1\u4e86\u8f93\u5165\u6570\u636e\u662f\u6839\u636e \\(f_i\\) \u6709\u5e8f\u7684\uff0c\u4e0d\u8fc7\u8fd9\u4e0d\u662f\u5f88\u91cd\u8981\u3002</p> <p>bad try 1</p> <p>\u4e00\u4e2a\u975e\u5e38 naive \u7684\u60f3\u6cd5\u5c31\u662f\uff0c\u54ea\u95e8\u8bfe\u5148\u5f00\u59cb\u6211\u5148\u9009\u54ea\u95e8\u8bfe\uff0c\u8fd9\u4e2a\u60f3\u6cd5\u975e\u5e38\u7684\u8282\u7701\u8111\u7ec6\u80de\uff0c\u4f46\u662f\u663e\u7136\u4e0d\u5bf9\u3002\u6211\u968f\u968f\u4fbf\u4fbf\u6765\u4e2a\u6700\u65e9\u5f00\u59cb\u6700\u665a\u7ed3\u675f\u7684\u8bfe\uff0c\u5c31\u80fd\u76f4\u63a5 hack \u6389\u8fd9\u4e2a\u65b9\u6cd5\u3002</p> <p>bad try 2</p> <p>\u518d\u6765\u4e00\u4e2a\u5929\u771f\u7684\u60f3\u6cd5\uff0c\u6211\u6bcf\u6b21\u90fd\u9009\u533a\u95f4\u957f\u5ea6\u6700\u5c11\u7684\uff0c\u867d\u7136\u770b\u8d77\u6765\u80fd\u8ba9\u5b83\u201c\u76f8\u5bf9\u6bd4\u8f83\u591a\u201d\uff0c\u4f46\u662f\u663e\u7136\u4e5f\u65e0\u6cd5\u4fdd\u8bc1\u7ed3\u679c\u7684\u6700\u4f18\u6027\uff0c\u4e5f\u975e\u5e38\u597d hack\u3002</p> <p>search</p> <p>\u800c\u53e6\u5916\u4e00\u4e2a\u66b4\u529b\u7684\u60f3\u6cd5\u5c31\u662f\uff0c\u6211\u53bb\u679a\u4e3e\u6bcf\u4e00\u79cd\u53ef\u80fd\uff0c\u4e5f\u5c31\u662f\u6211\u4eec\u4fd7\u79f0\u7684\u66b4\u641c\uff0c\u8fd8\u53ef\u4ee5\u7528\u4e0a\u526a\u679d\u7b49\u64cd\u4f5c\uff0c\u867d\u7136\u53ef\u4ee5\uff0c\u4f46\u662f\u592a\u4e0d\u4f18\u96c5\u4e86\uff0c\u800c\u4e14\u65f6\u95f4\u590d\u6742\u5ea6\u672a\u5fc5\u662f\u6211\u4eec\u80fd\u63a5\u53d7\u7684\u3002</p> <p>dp</p> <p>\u65e2\u7136\u66b4\u641c\u4e0d\u884c\uff0c\u90a3\u8bd5\u8bd5 dp \u5462\uff1f\u5728\u8fd9\u4e2a\u95ee\u9898\u4e2d\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u51fa\u5982\u4e0b\u8f6c\u79fb\u65b9\u7a0b\uff1a</p> \\[ dp_i = \\left\\{     \\begin{aligned}         &amp;1 &amp; i = 1 \\\\         &amp;\\max\\{             dp_{i-1},             dp_{f(i)} + 1         \\} &amp; i &gt; 1     \\end{aligned} \\right. \\] <p>\u5176\u4e2d\uff0c\\(dp_i\\) \u8868\u793a\u5230\u7b2c \\(i\\) \u4e2a\u533a\u95f4\u622a\u6b62\u7684\u65f6\u95f4\u4e3a\u6b62\uff0c\u6700\u591a\u6709\u591a\u5c11\u4e2a\u9879\u76ee\u53ef\u4ee5\u88ab\u5b89\u6392\uff1b\\(f(i)\\) \u662f\u6700\u5927\u7684\u6ee1\u8db3 \\(f_j \\leq s_i\\) \u7684\u533a\u95f4\u7684\u7f16\u53f7 \\(j\\)\uff0c\u4e5f\u5c31\u662f\u80fd\u591f\u4e0d\u91cd\u53e0\u653e\u4e0b\u7684\uff0c\u6700\u665a\u7684\u90a3\u4e2a\u6d3b\u52a8\u3002</p> <p>\u6211\u4eec\u53d1\u73b0\uff0c\u8fd9\u4e48\u505a\u662f\u53ef\u4ee5\u7684\u3002\u53ea\u4e0d\u8fc7\u8fd9\u6837\u505a\u7684\u8bdd\uff0c\u5176\u65f6\u95f4\u590d\u6742\u5ea6\u4e3a \\(O(N^2)\\)\u3002</p> <p>greedy</p> <p>\u663e\u7136\uff0c\u8fd9\u4e2a\u6848\u4f8b\u653e\u5728\u8fd9\u4e2a\u5730\u65b9\u80af\u5b9a\u662f\u6709\u8d2a\u5fc3\u89e3\u7684\u3002\u800c\u4e14\u9898\u76ee\u7684 \u201cAssume\u201d \u63d0\u793a\u6027\u5df2\u7ecf\u5f88\u5f3a\u4e86\u3002\u6211\u4eec\u53ea\u9700\u8981\u6309\u7167\u7ed3\u675f\u65f6\u95f4\uff0c\u904d\u5386\u8fd9\u4e9b\u533a\u95f4\uff0c\u80fd\u585e\u4e0b\u5c31\u585e\uff0c\u5373\u53ef \\(O(N)\\) \u8d2a\u5fc3\u6c42\u89e3\u3002</p> <p>TODO:</p>"},{"location":"ZJU_CS/ADS/graph/AI4pharmacy/","title":"\u533b\u836f\u4eba\u5de5\u667a\u80fd","text":"<ul> <li>\u8bb2\u5e08\uff1a\u6731\u5cf0</li> </ul> <p>\u8d44\u6e90</p> <ul> <li>[\u5316\u5408\u7269\u8bc6\u522b](https://stonemind.stonewise.cn/patent/ProjectList.aspx\uff09</li> </ul>"},{"location":"ZJU_CS/ADS/graph/AI4pharmacy/note/","title":"\u8bfe\u7a0b\u7b14\u8bb0","text":""},{"location":"ZJU_CS/ADS/graph/AI4pharmacy/note/#week1","title":"week1","text":""},{"location":"ZJU_CS/ADS/graph/AI4pharmacy/note/#_2","title":"\u836f\u7269\u9776\u6807\u53d1\u73b0\u7684\u4e09\u4e2a\u7814\u7a76\u9636\u6bb5","text":"<ul> <li>\u53ef\u836f\u9776\u5411\u6027\u5206\u6790\uff08\u8ba4\u8bc6\u4e0d\u5145\u5206\uff09</li> <li>\u529f\u80fd\u7ec4\u5b66\u7814\u7a76\uff08\u7f29\u5c0f\u8303\u56f4\uff09\uff08\u65b9\u6cd5\u4e0d\u5b8c\u5584\uff09</li> <li>\u7597\u6548\u836f\u7269\u786e\u8bc1\uff08\u6a21\u5f0f\u4e0d\u6e05\u695a\uff09</li> </ul>"},{"location":"ZJU_CS/ADS/graph/AI4pharmacy/note/#week2","title":"week2 \u6587\u732e\u68c0\u7d22","text":""},{"location":"ZJU_CS/ADS/graph/AI4pharmacy/note/#_3","title":"\u6d4b\u5e8f\u4e0e\u7ec4\u5b66\u76f8\u5173\u7684\u6570\u636e\u5e93","text":"<ul> <li>NCBI:National Center for Biotechnology Information.</li> <li>EMBL-EBI:European Bioinformatics Institute.</li> <li>TCGA:The Cancer Genome Atlas.</li> </ul>"},{"location":"ZJU_CS/ADS/graph/AI4pharmacy/note/#_4","title":"\u5316\u5b66\u4e0e\u6d3b\u6027\u76f8\u5173\u7684\u6570\u636e\u5e93","text":"<ul> <li>PubChem:PubChem is the world's largest collection of freely accessible chemical information.</li> <li>ChEMBL:ChEMBL is a manually curated database of bioactive molecules with drug-like properties.</li> <li>ZINC:ZINC is a free database of commercially-available compounds for virtual screening.</li> <li>Binding database:BindingDB is a public, web-accessible database of measured binding affinities, focusing chiefly on the interactions of protein considered to be drug-targets with small, drug-like molecules.</li> </ul>"},{"location":"ZJU_CS/ADS/graph/AI4pharmacy/note/#_5","title":"\u836f\u5b66\u76f8\u5173\u7684\u6570\u636e\u5e93","text":"<ul> <li>DrugBank:DrugBank is a comprehensive, freely accessible, online database containing information on drugs and drug targets.</li> <li>INTEDE:INTEDE is a database of integrative target and disease evidence.</li> <li>PharmGKB:PharmGKB is a resource that provides information about the impact of human genetic variation on drug responses.</li> <li>TTD:Therapeutic Target Database.</li> <li>VARIDT:VARIDT is a database of genomic variations related to drug responses.</li> </ul>"},{"location":"ZJU_CS/ADS/graph/AI4pharmacy/note/#_6","title":"\u68c0\u7d22\u5b9e\u8df5","text":"<ol> <li>\u68c0\u7d22\u80ba\u764c(TCGA-LUAD project)\u4e2d\u4f53\u7ec6\u80de\u7a81\u53d8\u9891\u7387\u6700\u9ad8\u768410\u4e2a\u57fa\u56e0(genes)\u548c10\u4e2a\u7a81\u53d8\u7c7b\u578b(mutations) </li> </ol> <p>\u8fdb\u5165\u7f51\u9875CGC Data Portal\uff0c\u4e0a\u65b9\u63d0\u793a\u8fdb\u5165\u65b0\u7248\u3002\u6b64\u540e\u770b\u5230analysis\uff0c\u63d0\u793a\u6307\u5bfc\u4f60\u8fdb\u5165Exploration\u754c\u9762\uff1a  </p> <ol> <li>\u5728CHEMBL\u4e2d\uff0c\u6316\u6398\u4e0b\u8ff0\u5316\u5408\u7269\u7684\u751f\u7269\u6d3b\u6027\u4fe1\u606f\uff08\u9776\u6807\u3001\u9488\u5bf9\u9776\u6807\u7684\u6d3b\u6027\u6570\u503c\u7b49\uff09 </li> </ol> <p>\u9996\u5148\u5728ChEMBL\u4e2d\u641c\u7d22\u680f\u754c\u9762\u4e0b\u6211\u4eec\u53ef\u4ee5\u770b\u5230advanced search\uff0c\u70b9\u51fb\u8fdb\u5165\u540e\u53d1\u73b0\u9700\u8981\u4f60\u7ed8\u5236\u5316\u5408\u7269\u7684\u7ed3\u6784\u3002</p> <p>\u8fd9\u91cc\u6211\u60f3\u5230\u662f\u5426\u5b58\u5728\u57fa\u4e8e\u56fe\u50cf\u8bc6\u522b\u7684\u65b9\u5f0f\u81ea\u52a8\u6765\u7ed8\u5236\u5316\u5408\u7269\u7684\u5de5\u5177\uff0c\u4e0a\u7f51\u641c\u7d22\u540e\u4f60\u4f1a\u53d1\u73b0stoneMind\uff0c\u8fd9\u662f\u4e00\u4e2a\u57fa\u4e8e\u56fe\u50cf\u8bc6\u522b\u7684\u5316\u5408\u7269\u7ed3\u6784\u7ed8\u5236\u5de5\u5177\u3002</p> <p></p> <p>Tips\uff1a \u5c06\u590d\u5236\u7684\u5185\u5bb9\u76f4\u63a5\u7c98\u8d34\u5728\u7ed8\u56fe\u6846\u4e2d\uff0c\u7f51\u7ad9\u4f1a\u81ea\u52a8\u8bc6\u522b\uff01\uff01\uff01 \u6839\u636e\u672c\u4eba\u4eb2\u6d4b\uff0c\u7531\u4e8emol\u4f1a\u5305\u542b\u66f4\u591a\u7684\u4fe1\u606f\uff0c\u4f1a\u6bd4smiles\u7ed3\u6784\u66f4\u52a0\u51c6\u786e\u3002</p> <p>\u4e4b\u540e\u4f60\u4fbf\u4f1a\u770b\u5230\u5982\u4e0b\u754c\u9762\uff0c\u5728\u53f3\u8fb9\u4fa7\u8fb9\u680f\u67e5\u770b\u4f60\u60f3\u5bfb\u627e\u7684\u4fe1\u606f\u3002 </p> <p>\u800c\u5bf9\u4e8eCHEMBL2105717\u6765\u8bf4\uff0c\u6211\u4eec\u70b9\u51fb\u4e0b\u56fe\u5de6\u8fb9\u7b2c\u4e00\u4e2a\u8868\u683c\uff0c\u8fdb\u53bb\u540e\u5219\u80fd\u770b\u5230\u8be6\u7ec6\u4fe1\u606f\u3002 </p> <p>\u5177\u4f53\u4fe1\u606f\u5982\u4e0b\uff1a\uff08\u5b66CS\u7684\u5c5e\u5b9e\u662f\u770b\u4e0d\u592a\u61c2\uff09 </p>"},{"location":"ZJU_CS/CA/","title":"\u8ba1\u7b97\u673a\u4f53\u7cfb\u7ed3\u6784","text":"<p>Abstract</p> <p>\u6d59\u6c5f\u5927\u5b66 \u201c\u4f53\u7cfb\u7ed3\u6784\u201d \u8bfe\u7a0b\u53ca\u76f8\u5173\u77e5\u8bc6\u7b14\u8bb0  </p> <ul> <li>\u8001\u5e08: [\u535c\u51ef]</li> <li>\u52a9\u6559: </li> <li>\u8bfe\u7a0b\u7f51\u5740\uff1a https://list.zju.edu.cn/kaibu/comparch2024/</li> </ul> <p>https://zhuanlan.zhihu.com/p/446511693</p>"},{"location":"ZJU_CS/CA/chap00/","title":"Introduction","text":"<p>\u8001\u5e08\u4f1a\u5b8f\u89c2\u7684\u628a\u4e4b\u524d\u7684\u5185\u5bb9\u590d\u4e60\u4e00\u904d relax\uff5e</p>"},{"location":"ZJU_CS/CA/chap01/","title":"Fundamentals of Computer Design","text":""},{"location":"ZJU_CS/CA/chap01/#history_and_background","title":"History and background","text":"<p>\u5f53\u591a\u6838\u51fa\u73b0\u65f6\uff0c\u6bcf\u4e2a\u6838\u90fd\u6709\u81ea\u5df1\u7684pipeline\uff0c\u8fd9\u65f6\u7684\u6307\u4ee4\u51b2\u7a81\u66f4\u4e3a\u4e25\u5cfb\u3002</p> <p>memory\u4e5f\u4f1a\u6309\u7167\u5206\u5c42\u7ed3\u6784\u8fdb\u884c\u8bbe\u8ba1\uff0c\u4ee5\u51cf\u5c11\u8bbf\u95ee\u65f6\u95f4\u3002 </p> <p>\u63a5\u4e0b\u6765\u8bb2\u89e3\u4e86cpu\u53d1\u5c55\u53f2\uff0cMoore law &amp; Dennard scaling\uff0c\u4ee5\u53cacpu\u7684\u6027\u80fd\u6307\u6807\u3002</p> Dennard scaling <p></p> Amdahl's Law <p></p>"},{"location":"ZJU_CS/CA/chap01/#what_type_of_computer","title":"What type of Computer?","text":"<ul> <li> <p>PMD: Personal Mobile Device</p> <p>real-time performance: a maximum execution time for each application segment (\u727a\u7272\u6027\u80fd\u4f46\u63d0\u9ad8\u53cd\u5e94\u65f6\u95f4\u548cpredict\u7684\u80fd\u529b)</p> </li> <li> <p>Desktop</p> </li> <li>Server</li> <li>Cluster/WSC (Warehouse-Scale Computer)</li> <li>Embedded/IoT computer</li> </ul> <p></p> <p></p>"},{"location":"ZJU_CS/CA/chap01/#what_make_the_computer_fast","title":"What make the computer fast?","text":""},{"location":"ZJU_CS/CA/chap01/#parrallelism","title":"Parrallelism","text":"<ul> <li>application-level parallelism</li> <li>DLP: Data-level parallelism &gt; </li> <li>TLP: Task-level parallelism &gt; </li> <li>hardware-level parallelism (four ways) &gt; </li> </ul>"},{"location":"ZJU_CS/CA/chap01/#class_of_parrallel_architecture","title":"Class of parrallel architecture","text":""},{"location":"ZJU_CS/CA/chap01/#whats_computer_architecture","title":"What's computer architecture","text":""},{"location":"ZJU_CS/CA/chap01/#isa_instruction_set_architecture","title":"ISA (Instruction Set Architecture)","text":"why we need memory alignment <p>Different Address Model and meaning </p>"},{"location":"ZJU_CS/CA/chap01/#trends_in_technology","title":"Trends in Technology","text":""},{"location":"ZJU_CS/CA/chap01/#power_and_energy","title":"Power and Energy","text":"<ul> <li>1 watt = 1 joule per second</li> <li>energy to execute a workload = avg power x execution time</li> </ul>"},{"location":"ZJU_CS/CA/chap01/#power_consumption","title":"Power Consumption","text":"Example"},{"location":"ZJU_CS/CA/chap01/#how_to_economize_energy","title":"How to economize energy?","text":"<ul> <li>do nothing!!!</li> <li>DVFS (Dynamic Voltage and Frequency Scaling)</li> <li>design for typical case</li> <li>Proportional(\u76f8\u5e94\uff0c\u5bf9\u5e94) to the number of devices</li> </ul>"},{"location":"ZJU_CS/CA/chap01/#cost","title":"Cost","text":"<ul> <li>time</li> <li>volume</li> <li>commoditization</li> </ul>"},{"location":"ZJU_CS/CA/chap01/#how_to_measure_dependability","title":"How to measure dependability","text":"<p> $$ \\text{Module availability} = \\frac{\\text{MTTF}}{\\text{MTTF} + \\text{MTTR}} $$</p>"},{"location":"ZJU_CS/CA/chap01/#raid","title":"RAID","text":"<p>RAID: redundant array of inexpensive/independent disks\uff08\u78c1\u76d8\u5197\u4f59\u9635\u5217\uff09  - RAID 0: just a bunch of disks(JBOD or stripe) - RAID 1: mirroring or shadowing - RAID 2: http://www.acnc.com/raidedu/2  - RAID 3: byte-level striping with dedicated parity http://www.acnc.com/raidedu/2 </p> Further reading <p>https://www.youtube.com/watch?v=jgO09opx56o </p>"},{"location":"ZJU_CS/CA/chap01/#measure_performance","title":"Measure Performance","text":"SPEC <p>SPEC CPU2017 20 SPECspeed benchmarks                 23 SPECrate benchmarks</p> <p>\u4f8b\u5b50\uff1a </p>"},{"location":"ZJU_CS/CA/chap01/#quantitative_principles_of_computer_design","title":"Quantitative Principles of Computer Design","text":"<ul> <li>Amdahl's Law: performance improvement to be gained from using some faster mode of execution is limited by the fraction of the time the faster mode can be used</li> <li>spatial locality</li> <li>temporal locality</li> </ul>"},{"location":"ZJU_CS/CA/chap02/","title":"Memory Hierarchy","text":""},{"location":"ZJU_CS/CA/chap02/#technology_and_optimizations","title":"Technology and Optimizations","text":""},{"location":"ZJU_CS/CA/chap02/#main_memory","title":"Main memory","text":"<ul> <li>Latency:</li> <li>acess time: time to read/write a word</li> <li>cycle time: time between successive accesses</li> <li> <p>bandwith: the time to retrieve the rest of the block</p> </li> <li> <p>SRAM(Static random access memory): Don't need to be refreshed, so access time is very close to cycle time</p> </li> <li>DRAM(Dynamic random access memory): DRAMs are commonly sold on small boards called DIMM (dual inline memory modules), typically containing 4 ~ 16 DRAMs</li> </ul> <p>technique</p> cache <p>\u4ecb\u7ecd\u4e86\u4e09\u79cdcache\u6280\u672f,\u5177\u4f53\u53ef\u4ee5\u89c1\u673a\u7ec4</p> DRAM <p>\u5177\u4f53\u5206\u4e3a\u4e86RAS\uff08\u884c\u5730\u5740\u9009\u62e9\uff09\u548cCAS\uff08\u5217\u5730\u5740\u9009\u62e9\uff09\u4e24\u4e2a\u90e8\u5206 </p>"},{"location":"ZJU_CS/CA/chap02/#dram_improvements","title":"DRAM improvements","text":"<ul> <li>Timing signals</li> <li>Leverage spatial locality</li> <li>Clock signals</li> <li>SDRAM</li> <li>Wider DRAM</li> <li>DDR(double data rate) SDRAM</li> <li>Multiple banks</li> </ul>"},{"location":"ZJU_CS/CA/chap02/#cache_performance","title":"Cache performance","text":"\\[ \\text{Average hit time} = (1 - \\text{miss rate}) \\times \\text{cache access time} + \\text{miss rate} \\times \\text{miss penalty} \\\\ = \\text{cache access time} + \\text{miss rate} \\times \\text{miss penalty} \\]"},{"location":"ZJU_CS/CA/chap02/#six_basic_cache_optimizations","title":"Six basic cache optimizations","text":"<ul> <li>Larger block size</li> <li>Bigger cache</li> <li>higher associativity</li> <li>multilevel caches</li> <li>Give priority to read misses</li> <li>Avoiding address translation during indexing of the cache </li> </ul> <p>Capacity vs Conflict</p> <p></p> <p></p> <p>cache\u5bfb\u5740</p> VIVT <p></p> PIPT <p></p> VIPT <p></p>"},{"location":"ZJU_CS/CA/chap02/#virtual_memory","title":"Virtual Memory","text":""},{"location":"ZJU_CS/CA/chap02/#background_4_questions","title":"Background 4 Questions","text":"<ul> <li>Where to place a block</li> <li> </li> <li>Which block to replace upon a virtual memory miss? (LRU)</li> <li>Which block to replace upon a virtual memory miss? (Write back or write through)</li> </ul> \\[ \\text{Virtual memory} = \\text{main memory} + \\text{Secondary storage} \\]"},{"location":"ZJU_CS/CA/chap02/#ten_advanced_cache_optimizations","title":"Ten advanced cache optimizations","text":"<ul> <li>Small and Simple First-Level Caches</li> <li>Way Prediction</li> <li>Multibanked Caches (Pipelining Access)</li> <li>Nonblocking Caches</li> <li>Critical Word First</li> <li>Merging Write Buffer</li> <li>Compiler Optimization</li> <li>Hardware Prefetching</li> <li>Compiler Prefetching</li> <li>HBM</li> </ul>"},{"location":"ZJU_CS/CA/chap02/#virtual_memory_1","title":"Virtual Memory","text":""},{"location":"ZJU_CS/CA/chap03/","title":"Instruction-Level Parallelism","text":""},{"location":"ZJU_CS/CA/chap03/#pipelining","title":"Pipelining","text":"<p>\u8fd9\u91cc\u51e0\u4e4e\u90fd\u662f\u673a\u7ec4\u7684\u590d\u4e60 </p>"},{"location":"ZJU_CS/CA/chap03/#what_about_floating_point","title":"What about floating point?","text":""},{"location":"ZJU_CS/CN/","title":"\u8ba1\u7b97\u673a\u7f51\u7edc","text":"<p>\u8bfe\u7a0b\u4ecb\u7ecd</p> <ul> <li>\u8001\u5e08\uff1a \u97e9\u52b2\u677e</li> <li>\u5b9e\u9a8c\u53c2\u8003\u7f51\u7ad9\uff1a zjucomp.net</li> <li>\u5b66\u4e60\u8d44\u6599\u53c2\u8003\uff08\u53c8\u662f\u54b8\u9c7c\u6684\u6211\u54ed\u6b7b\ud83d\ude2d\uff09\uff1a https://www.yuque.com/xianyuxuan/coding/network?view=doc_embed</li> <li>\u590d\u4e60\u8d44\u6599\u53c2\u8003\uff1ahttps://github.com/RyanFcr/ZJU_Course/tree/main/%E5%A4%A7%E4%B8%89%E7%A7%8B%E5%86%AC/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BD%91%E7%BB%9C/final</li> </ul>"},{"location":"ZJU_CS/CN/review/","title":"Introduction","text":"<p>\u8ba1\u7b97\u673a\u7f51\u7edc\uff1a\u8ba1\u7b97+\u901a\u4fe1</p>"},{"location":"ZJU_CS/CN/review/#_1","title":"\u4e92\u8054\u7f51\u7684\u6784\u6210","text":""},{"location":"ZJU_CS/CN/review/#_2","title":"\u7f51\u7edc\u5206\u7c7b","text":"<ul> <li>\u4e2a\u57df\u7f51PAN\uff08Personal Area Network\uff09 \u4f8b\u5982\u84dd\u7259\u8033\u673a</li> <li>\u5c40\u57df\u7f51LAN\uff08Local Area Network\uff09 \u4f8b\u5982\u5bb6\u91cc\u7684\u8def\u7531\u5668\uff0c\u5927\u5230\u4e00\u680b\u5efa\u7b51\uff0c\u5c0f\u5230\u4e00\u4e2a\u623f\u95f4\u7684\u7ec4\u7f51</li> <li>\u57ce\u57df\u7f51MAN\uff08Metropolitan Area Network\uff09 \u4f8b\u5982\u57ce\u5e02\u7684\u7f51</li> <li>\u5e7f\u57df\u7f51WAN\uff08Wide Area Network\uff09 \u8986\u76d6\u5f88\u5927\u7684\u5730\u57df\u8303\u56f4\uff0c\u4e43\u81f3\u5730\u533a\uff0c\u56fd\u5bb6\uff0c\u751a\u81f3\u5168\u7403</li> </ul> <p>\uff5c\u4e92\u8054\u7f51\uff08Internet\uff09\uff5c\u4e92\u8fde\u7f51\uff08internet\uff09\uff5c |:---:|:---:| |\u7f51\u7edc\u7684\u7f51\u7edc|\u66f4\u662f\u4e00\u79cd\u6cdb\u6307\uff5c \uff5c\u4f7f\u7528TCPIP\u534f\u8bae\u65cf|whatever|</p> <p></p> <ul> <li> <p>\u7f51\u7edc\u6838\u5fc3 </p> </li> <li> <p>\u63a5\u5165\u7f51 \u901a\u8fc7\u5f02\u6784\u7f51\u7edc\u8fb9\u7f18\u8def\u7531\u5668\u63a5\u5165\u7f51\u7edc\uff0c\u5149\u7ea4\u5230\u6237\uff1bDSL\uff1bCable\uff08\u540c\u8f74\u7535\u7f06\uff09\uff1b\u65e0\u7ebf\u63a5\u5165</p> </li> </ul>"},{"location":"ZJU_CS/Database/","title":"\u6570\u636e\u5e93\u7cfb\u7edf","text":"<ul> <li>\u8001\u5e08\uff1a\u5b59\u5efa\u4f36</li> <li>\u6210\u7ee9\u5360\u6bd4\uff1a10%Exercise + 10%Quiz + 30%lab + 50%\u671f\u672b</li> </ul> <p>\u7533\u660e\uff1a\u672c\u7b14\u8bb0\u662f\u5728HobbitQiang\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u4fee\u6539\u7684\uff0c\u611f\u8c22\u5f00\u6e90\ud83d\ude4f</p> <p>\u53c2\u8003\u8d44\u6599</p> <ul> <li>xiaojiaolong</li> <li>CMU 15-445/645</li> <li>Homework Answer</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/","title":"Db ch1 to 7 review","text":""},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#chap2_relational_model","title":"Chap2: Relational Model","text":""},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#0_outline","title":"0. Outline","text":"<ul> <li>\u952e\u503c</li> <li>\u5173\u7cfb\u4ee3\u6570</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#1_key","title":"1. key","text":"<ul> <li>superkey</li> <li>candidate key\uff1aminimal superkey</li> <li>primary key\uff1aselected candidate key</li> <li>foreign key\uff1areferencing-&gt;referenced(primary key)</li> <li>referential integrity</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#2_relational_algebra","title":"2. relational algebra","text":"<ul> <li>\"Pure\u201d languages:</li> <li>Relational algebra\uff1a\u975e\u56fe\u7075\u673a\u7b49\u4ef7</li> <li>Tuple/Domain relational calculus</li> <li>6 basic</li> <li>select\uff1a\u6761\u4ef6\u79f0\u4e3aselection predicate</li> <li>project</li> <li>union</li> <li>set difference<ul> <li>union, set differenct\u90fd\u8981\u6c42same arity\uff0c\u5bf9\u5e94\u5c5e\u6027\u7684type\u8981compatible</li> </ul> </li> <li>Cartesian product</li> <li>rename</li> <li>Additional</li> <li>set intersection</li> <li>natural join\u3001theta join</li> <li>assignment</li> <li>outer join</li> <li>semijoin</li> <li>division operation</li> <li>extended</li> <li>Generalized Projection\uff1aarithmetic functions of attributes</li> <li>Aggregation function\uff1aavg\u3001min\u3001max\u3001sum\u3001count</li> <li>multiset\u4e2dduplicates\u6811</li> <li>selection: \u6ee1\u8db3\u6761\u4ef6\uff0c\u4fdd\u6301</li> <li>projection: \u4fdd\u6301</li> <li>cross product: m of t1 in r, n of t2 in s, mn in r  x s</li> <li>union: m + n</li> <li>intersection: min(m, n)</li> <li>difference: min(0, m - n)</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#chap3_introduction_to_sql","title":"Chap3: Introduction to SQL","text":""},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#1_sql","title":"1. SQL","text":"<ul> <li>Structured Query Language(SQL)</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#2_ddl","title":"2. DDL","text":"<ul> <li>\u5305\u542bschema, domain, integrity constraints, indices, security+authorization, physical storage structure</li> <li>type</li> <li>(var)char, int, smallint, numeric(p, d), real, double, float</li> <li>date(ymd), time(hms), timestamp(date+time), interval</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#3_integrity_constraints","title":"3. integrity constraints","text":"<ul> <li>not null</li> <li>primary key()</li> <li>foreign key() references r()</li> <li>on delete/update cascade/set null/restrict/set default</li> <li>alter</li> <li>alter table r add A D</li> <li>alter table r drop A</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#4_dml","title":"4. DML","text":"<ul> <li>duplicates\uff1adistinct/all(default)</li> <li>between\u95ed\u533a\u95f4</li> <li>string: like '\u901a\u914d\u7b26'</li> <li>%\u914dstring, _\u914d\u5b57\u7b26</li> <li>\u9003\u9038\u5b57\u7b26\u7528\\\uff0c\u6216\u7528escape\u6307\u5b9a</li> <li>order by ... desc/asc(default)</li> <li>limit offset=0, cnt</li> <li>union, intersect, except</li> <li>\u9ed8\u8ba4\u53bbduplicates\uff0c\u53ef+all</li> <li>\u542bnull\u7b97\u672f\u5f97null\uff0c\u6bd4\u8f83\u5f97unknown\uff0cis null\u5224\u65ad</li> <li>\u9664count\u7684\u805a\u5408\u51fd\u6570\u5ffd\u7565null\uff0c\u5982\u53ea\u6709null\u8fd4\u56denull</li> <li>\u5d4c\u5957\u5b50\u67e5\u8be2</li> <li>set membership\uff1a(not) in</li> <li>set comparison\uff1asome, all</li> <li>scalar subquery</li> <li>(not) exists</li> <li>unique\uff08\u5d4c\u5957\u5b50\u67e5\u8be2\u4e0d\u53efdistinct\uff09</li> <li>delete from ... where</li> <li>insert into ... values()</li> <li>insert into t1 select ... from t2</li> <li>update ... set ... where</li> <li>case when then else end</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#chap4_intermediate_sql","title":"Chap4: Intermediate SQL","text":""},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#1_join","title":"1. join","text":"<ul> <li>join type\uff1ainner join, left/right/full outer join</li> <li>join condition\uff1anatural, on..., using ...</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#2_sql_data_types_and_schemas","title":"2. SQL Data Types and Schemas","text":""},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#type_domain","title":"type, domain","text":"<ul> <li>create type ... as numeric(12, 2)</li> <li>create domain ... char(20) not null</li> <li>create domain ... char(20)</li> <li>constraint (name)</li> <li>check(value in());</li> <li>Large-Object Types</li> <li>blob: binary large object</li> <li>clob: character large object</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#3_integrity_constraints_1","title":"3. Integrity constraints","text":"<ul> <li>not null</li> <li>primary key</li> <li>unique</li> <li>check()\uff1a\u53ef\u5d4c\u5957\u67e5\u8be2\uff0c\u4f46\u672a\u5e38\u5b9e\u73b0</li> <li>foreign key</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#assertion","title":"Assertion","text":"<p>create assertion (name) check ...</p>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#4_views","title":"4. views","text":"<p>create view v as ...</p> <p>\u63d2\u5165view\uff0c\u4e5f\u4f1a\u6539\u53d8\u539frelation</p> <p>\u7269\u7406view</p>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#5_indices","title":"5. Indices","text":"<p>create index (name) on r(A)</p>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#6_transactions","title":"6. Transactions","text":"<ul> <li> <p>commit, rollback</p> </li> <li> <p>SET AUTOCOMMIT = 0</p> </li> <li>serializable, repeatable read, read commit, read uncommit</li> <li>ACID</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#7_authorization","title":"7. Authorization","text":"<ul> <li>select, insert, update, delete</li> <li>index, resources, alteration, drop</li> <li>grant (priv) on () to (user)</li> <li>revoke (priv) on () from (user)</li> <li>DCL</li> <li>create role (name)</li> <li>grant (role) to (user)</li> <li>grant reference () on () to()</li> <li>grant with grant option</li> <li>revoke cascade/restrict</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#chap5_advanced_sql","title":"Chap5: Advanced SQL","text":""},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#1_accessing_sql_from_a_programming_language","title":"1. Accessing SQL From a Programming Language","text":"<ul> <li>API, O(Open)DBC(Connectivity)/J(Java)DBC, Embedded SQL(in C), SQLJ, JP(Persistence)A(API)</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#2_sql_functions","title":"2. SQL Functions","text":""},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#3_trigger","title":"3. Trigger","text":"<ul> <li> <p>insert, delete, update</p> </li> <li> <p>before, after</p> </li> <li>referencing new/old row/table as</li> <li>for each statement/row</li> </ul> <p></p> <p></p> <p></p>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#chap6_entity-relationship_model","title":"Chap6: Entity-Relationship Model","text":""},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#1_db_design_process","title":"1. DB Design Process","text":"<ul> <li>avoid\uff1aredundancy and incompleteness</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#2_er_model","title":"2. ER model","text":"<ul> <li> <p>roles  -      </p> </li> <li> <p>binary/ternary relationship</p> </li> <li>attributes(with domain)</li> <li>simple/composite</li> <li>single-valued/multivalued</li> <li>derived</li> <li>weak entity set-&gt;identifying entity set</li> <li>discriminator/partial key</li> <li>Specialization/Generalization</li> <li>Top-down, attribute inheritance/ bottom-up</li> <li>disjoint/overlapping</li> <li>total/partial(completeness constraint)</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#chap7_relational_database_design","title":"Chap7: Relational Database Design","text":""},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#1_pitfall_of_bad_relations","title":"1. pitfall of bad relations","text":"<ul> <li>\u4fe1\u606f\u91cd\u590dInformation repetition</li> <li>\u63d2\u5165\u5f02\u5e38Insertion anomalies</li> <li>\u66f4\u65b0\u56f0\u96beUpdate difficulty</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#2_decomposition_lossless","title":"2. Decomposition Lossless","text":"<ul> <li>R-&gt;R1,R2\uff0c\u5145\u8981\u6761\u4ef6</li> <li>\\(R_1\\cap R_2\\rightarrow R_1\\)</li> <li>\\(R_1\\cap R_2\\rightarrow R_2\\)</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#3_forms","title":"3. Forms","text":"<ul> <li>\u7b2c\u4e00\u8303\u5f0fFirst Normal Form\uff1a\u5404attribute\u90fdatomic\uff08\u4e0d\u53ef\u5206\uff09</li> <li>Boyce-Codd Normal Form(BCNF)\uff1a\u4efb\u610f\u51fd\u6570\u4f9d\u8d56\\(\\alpha\\rightarrow\\beta\\)\uff0c\u8981\u4e48trivial\uff0c\u8981\u4e48\\(\\alpha\\)\u4e3a\u8d85\u952e</li> <li>3NF\uff1aBCNF\u5fc53NF\u3002\u82e5\\(\\beta-\\alpha\\)\u7684\u4efb\u610f\u5c5e\u6027\u90fd\u5728\u6574\u4f53\\(R\\)\u7684\u67d0candidate key\u4e2d\uff0c\u4e5f\u5c5e3NF\u3002</li> <li>4NF\uff1a\u7c7b\u4f3cBCNF\u7684\u5b9a\u4e49\u3002\u82e54NF\uff0c\u5fc5BCNF\u3002</li> </ul>"},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#4_dependencies","title":"4. Dependencies","text":""},{"location":"ZJU_CS/Database/db-ch1-to-7-review/#functional_dependencies","title":"Functional dependencies","text":"<ul> <li>functional/multivalued dependencies</li> <li>legal instance\uff1a\u6ee1\u8db3\u73b0\u5b9e\u7ea6\u675f</li> <li>superkey\uff1aK is superkey\u7b49\u4ef7\u4e8e\\(K\\rightarrow R\\)</li> <li>trivial\uff1a\\(A\\rightarrow B\\) is trivial if \\(B\\subset A\\)</li> <li>closure\uff1aall FDs(different from attribute closure)</li> <li> <p>Armstrong\u2019s Axioms:  -        </p> </li> <li> <p>sound and complete</p> </li> <li> <p>Additional  -        </p> </li> <li> <p>Canonial Cover\uff1a\u53bb\u9664\u6240\u6709Extraneous Attributes</p> </li> <li> <p>dependency preserving</p> </li> </ul>"},{"location":"ZJU_CS/Database/db1/","title":"Lecture 1 | Introduction","text":"Abstract <ul> <li>Database Systems</li> <li>Database Applications</li> <li>Purpose of Database Systems</li> <li>View of Data</li> <li>Data Models</li> <li>Database Languages</li> <li>Database Design</li> <li>Database Engine</li> <li>Database Users and Administrators</li> <li>History of Database Systems</li> </ul>"},{"location":"ZJU_CS/Database/db1/#database_systems","title":"Database Systems","text":"<p>DBMS (Database Management System)</p>"},{"location":"ZJU_CS/Database/db1/#purpose_of_database_systems","title":"Purpose of Database Systems","text":"<p>Database systems offer solutions to all the below problems.  </p> <ul> <li>data redundancy (\u6570\u636e\u5197\u4f59) and inconsistency</li> <li>data isolation (\u6570\u636e\u5b64\u7acb\uff0c\u6570\u636e\u5b64\u5c9b)</li> <li>difficulty in accessing data</li> <li> <p>Integrity problems (\u5b8c\u6574\u6027\u95ee\u9898)</p> <ul> <li>\u5b8c\u6574\u7684\u7ea6\u675f\u6761\u4ef6\u88ab\u85cf\u5728\u6570\u636e\u548c\u4ee3\u7801\u4e2d\uff0c\u800c\u4e0d\u662f\u663e\u5f0f\u5730\u58f0\u660e\u3002 e.g. \"account balance \\(\\geq\\) 1\"</li> </ul> </li> <li> <p>Atomicity problems (\u539f\u5b50\u6027\u95ee\u9898)</p> <ul> <li>Failures may leave database in an inconsistent state with partial updates carried out e.g. \u4ece A \u8d26\u6237\u8f6c\u8d26\u5230 B, \u6211\u4eec\u5fc5\u987b\u4fdd\u8bc1 A \u8f6c\u51fa B \u8f6c\u5165\u8fd9\u4e24\u4ef6\u4e8b\u540c\u65f6\u8fdb\u884c\uff0c\u4e0d\u80fd\u88ab\u6253\u65ad\u3002</li> </ul> </li> <li> <p>Concurrent access anomalies (\u5e76\u53d1\u8bbf\u95ee\u5f02\u5e38)</p> <ul> <li>Uncontrolled concurrent accesses can lead to inconsistencies  </li> </ul> Example <p> </p> </li> <li> <p>Security problems  </p> <ul> <li>Authentication (\u8ba4\u8bc1), Priviledge (\u6743\u9650), Audit (\u5ba1\u8ba1)</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/db1/#characteristics_of_databases","title":"Characteristics of Databases","text":"<ul> <li>data persistence (\u6570\u636e\u6301\u4e45\u6027)</li> <li>convenience in accessing data (\u6570\u636e\u8bbf\u95ee\u4fbf\u5229\u6027)</li> <li>data integrity(\u6570\u636e\u5b8c\u6574\u6027)</li> <li>concurrency control for multiple user (\u591a\u7528\u6237\u5e76\u53d1\u63a7\u5236)</li> <li>failure recovery (\u6545\u969c\u6062\u590d)</li> <li>security control (\u5b89\u5168\u63a7\u5236)</li> </ul>"},{"location":"ZJU_CS/Database/db1/#view_of_data","title":"View of Data","text":"<p>Three-level abstraction of databases  </p> <ul> <li>physical level: \u7269\u7406\u4e2d\u5982\u4f55\u4fdd\u5b58\u3001\u5b9e\u73b0\uff08\u5982\u78c1\u76d8\uff09</li> <li>logical level: \u6570\u636e\u5e93\u4e2d\u5b58\u50a8\u4ec0\u4e48\u6570\u636e\uff1f\u6570\u636e\u4e4b\u95f4\u7684\u5173\u7cfb\uff1f</li> <li>view level: \u4e0d\u540c\u4eba\u770b\u5230\u4e0d\u540c\u7684\u4ed6\u4eec\u6240\u9700\u8981\u7684\u6570\u636e</li> </ul> <p>Advantages:  </p> <ul> <li>Hide the complexities</li> <li>Enhance the adaptation to changes \u786c\u4ef6\u73af\u5883\u53d8\u5316 (physical level), \u53ef\u4ee5\u901a\u8fc7\u8c03\u6574\u903b\u8f91\u5173\u7cfb\u548c\u6620\u5c04\u6765\u9002\u5e94\u65b0\u7684\u786c\u4ef6\u73af\u5883\u3002   \u903b\u8f91\u73af\u5883\u53d8\u5316 (logic level), \u53ef\u4ee5\u901a\u8fc7 view \u548c logic \u7684\u6620\u5c04\u4f7f\u5f97 view \u5c3d\u91cf\u5c11\u53d8\u5316\u3002  </li> </ul>"},{"location":"ZJU_CS/Database/db1/#schema_and_instance","title":"Schema and Instance","text":"<p>Similar to types and variables in programming languages.  </p> <ul> <li>Schema (\u6a21\u5f0f)\u2013 the logical structure of the database (physical/logical)</li> <li>Instance (\u5b9e\u4f8b) \u2013 the actual content of the database at a particular point in time </li> </ul>"},{"location":"ZJU_CS/Database/db1/#data_independence","title":"Data Independence","text":"<ul> <li>Physical Data Independence (\u7269\u7406\u6570\u636e\u72ec\u7acb\u6027) \u2013 the ability to modify the physical schema without changing the logical schema</li> <li>Logical Data Independence (\u903b\u8f91\u6570\u636e\u72ec\u7acb\u6027) - the ability to modify the logical schema without changing the user view schema</li> </ul> <p>\u6620\u5c04\u4fee\u6539\uff0c\u4f46\u4e0d\u7528\u4fee\u6539 schema. </p>"},{"location":"ZJU_CS/Database/db1/#data_models","title":"Data Models","text":"<p>Data models is a collection of tools for describing data, data relationships, data semantics, data constraints.  </p> <ul> <li>Relational model(\u5173\u7cfb\u6a21\u578b) \uff08\u8868\u683c\uff09\u6570\u636e\u5e93\u7cfb\u7edf\u5c42\u9762</li> <li>Entity-Relationship(\u5b9e\u4f53-\u8054\u7cfb) data model  \u9700\u6c42\u5206\u6790\u5c42\u9762</li> <li>Object-based data models <ul> <li>Object-oriented  (\u9762\u5411\u5bf9\u8c61\u6570\u636e\u6a21\u578b)</li> <li>Object-relational (\u5bf9\u8c61-\u5173\u7cfb\u6a21\u578b\u6a21\u578b)</li> </ul> </li> <li>Semistructured data model  (XML)(\u534a\u7ed3\u6784\u5316\u6570\u636e\u6a21\u578b)</li> <li>Other older models:<ul> <li>Network model (\u7f51\u72b6\u6a21\u578b)</li> <li>Hierarchical model(\u5c42\u6b21\u6a21\u578b)</li> </ul> </li> </ul> <p>Relational Model</p> <p> </p> <p>12 tuples, 4 attributes. </p>"},{"location":"ZJU_CS/Database/db1/#datahase_languages","title":"Datahase Languages","text":""},{"location":"ZJU_CS/Database/db1/#data_definition_language_ddl","title":"Data Definition Language (DDL, \u6570\u636e\u5b9a\u4e49\u8bed\u8a00)","text":"Example <p>C \u8bed\u8a00\u91cc\u7684 struct \u7ecf\u8fc7\u7f16\u8bd1\u540e\u5168\u90e8\u53d8\u4e3a\u4e86\u4ee3\u7801\uff08\u6709\u4e00\u5f20\u7b26\u53f7\u8868\uff09\u4f46\u6570\u636e\u5e93\u91cc\u4e0d\u4f1a\u3002</p> <p>Data dictionary contains metadata (\u5143\u6570\u636e\uff0ci.e. data about data)</p> <ul> <li>DDL compiler generates a set of table templates stored in a data dictionary (\u6570\u636e\u5b57\u5178)</li> <li>Database schema </li> <li>Integrity constraints (\u5b8c\u6574\u6027\u7ea6\u675f)  Primary key (ID uniquely identifies instructors, \u4e3b\u952e) Referential integrity (references constraint in SQL, \u53c2\u7167\u5b8c\u6574\u6027) e.g. dept_name value in any instructor tuple must appear in department relation</li> <li>Authorization (\u6743\u9650)</li> </ul>"},{"location":"ZJU_CS/Database/db1/#data_manipulation_language_dml","title":"Data Manipulation Language (DML, \u6570\u636e\u64cd\u4f5c\u8bed\u8a00)","text":"<p>Two classes of languages </p> <ul> <li>Procedural (\u8fc7\u7a0b\u5f0f)\u2013 user specifies what data is required and how to get those data e.g. C</li> <li>Declarative (nonprocedural\uff0c\u9648\u8ff0\u5f0f\uff0c\u975e\u8fc7\u7a0b\u5f0f) \u2013 user specifies what data is required without specifying how to get those data e.g. SQL</li> </ul> <p>SQL is the most widely used query language</p>"},{"location":"ZJU_CS/Database/db1/#sql_query_language","title":"SQL Query Language","text":""},{"location":"ZJU_CS/Database/db1/#database_access_from_application_program","title":"Database Access from Application Program","text":"<p>\u6570\u636e\u5e93\u5fc5\u987b\u7531\u8fc7\u7a0b\u5f0f\u8bed\u8a00\u7f16\u5199\u3002</p> <p>Application programs generally access databases through one of * Language extensions to allow embedded SQL e.g. \u901a\u8fc7\u9884\u5904\u7406\u5668\uff0c\u5c06 select \u8bed\u53e5\u8bc6\u522b\u51fa\u6765\uff0c\u7ffb\u8bd1\u6210 C \u8bed\u8a00\u7684\u51fd\u6570\u8c03\u7528\u3002 * API (Application program interface) e.g. ODBC/JDBC which allow SQL queries to be sent to a database. </p>"},{"location":"ZJU_CS/Database/db1/#database_design","title":"Database Design","text":"<ul> <li> <p>Entity Relationship Model (\u5b9e\u4f53-\u8054\u7cfb\u6a21\u578b)  \u4e00\u5bf9\u4e00/\u4e00\u5bf9\u591a/\u591a\u5bf9\u4e00/\u591a\u5bf9\u591a  </p> <p> </p> </li> </ul> <p>\u56fe\u662f\u4e2d\u7acb\u7684\uff0c\u53ef\u4ee5\u7528\u5173\u7cfb\u6570\u636e\u5e93/\u9762\u5411\u5bf9\u8c61\u6570\u636e\u5e93\u5b9e\u73b0</p> <ul> <li> <p>Normalization Theory (\u89c4\u8303\u5316\u7406\u8bba) Formalize what designs are bad, and test for them  </p> <p>Example</p> <p> </p> <p>\u8fd9\u4e2a\u8868\u5b58\u5728\u5197\u4f59, department \u6709\u91cd\u590d\uff0c\u5e94\u8be5\u62c6\u5206\u4e3a\u4e24\u4e2a\u8868\uff08\u524d\u56db\u5217\u548c\u540e\u4e09\u5217\uff09</p> </li> </ul>"},{"location":"ZJU_CS/Database/db1/#database_enginee","title":"Database Enginee","text":"<ul> <li>The storage manager,</li> <li>The query processor component, </li> <li>The transaction management component.</li> </ul>"},{"location":"ZJU_CS/Database/db1/#storage_manager","title":"Storage Manager","text":"<p>\u4e3a\u4e86\u6570\u636e\u6301\u4e45\u5316\uff0c\u653e\u5728\u786c\u76d8\u91cc\uff0c\u4f46\u6570\u636e\u5904\u7406\u8981\u8fdb\u5165\u5185\u5b58\uff0c\u8fd9\u4e4b\u95f4\u5b58\u5728\u6570\u636e\u9e3f\u6c9f\u3002 \u6309\u5757\u8bbf\u95ee\u5185\u5b58 (4k/16k), \u7f13\u51b2\u7ba1\u7406\u3002</p> <ul> <li>File manager</li> <li>Buffer manager</li> <li>Authorization and integrity manager</li> <li>Transaction manager</li> </ul> <p>\u6570\u636e\u5e93\u91cc\u653e\u7684\u662f</p> <ul> <li>data files \u771f\u6b63\u7684\u6570\u636e</li> <li>data dictionary \u653e\u7684\u662f metadata</li> <li>statistical data \u7528\u4e8e\u6570\u636e\u5e93\u7684\u67e5\u8be2\u5904\u7406</li> <li>indices</li> </ul>"},{"location":"ZJU_CS/Database/db1/#query_processor","title":"Query Processor","text":"<p>The query processor components include:  </p> <ul> <li>DDL interpreter -- interprets DDL statements and records the definitions in the data dictionary.</li> <li>DML compiler -- translates DML statements in a query language into an evaluation plan consisting of low-level instructions that the query evaluation engine understands.<ul> <li>The DML compiler performs query optimization (\u67e5\u8be2\u4f18\u5316); that is, it picks the lowest cost evaluation plan from among the various alternatives.   \u6267\u884c\u8ba1\u5212\u4f1a\u6839\u636e\u7edf\u8ba1\u6570\u636e\u7684\u6539\u53d8\u800c\u6539\u53d8\u3002  </li> </ul> </li> <li>Query evaluation engine -- executes low-level instructions generated by the DML compiler.  </li> </ul> <ul> <li>Parsing and translation</li> <li>Optimization</li> <li>Evaluation</li> </ul>"},{"location":"ZJU_CS/Database/db1/#transaction_management","title":"Transaction Management (\u4e8b\u52a1\u7ba1\u7406)","text":"<p>\u94f6\u884c\u8f6c\u8d26\uff0cA \u8f6c\u8d26\u5230 B, A \u4f59\u989d\u51cf\u6389 B \u4f59\u989d\u52a0\u4e0a\u3002 \u8981\u6709\u9694\u79bb\u6027\uff0c\u5ef6\u8fdf\u5199\u56de</p> <ul> <li>Recover Manager  ensures that the database remains in a consistent (correct) state despite system failures (e.g. power failures and operating system crashes) and transaction failures. \u65e5\u5fd7\uff0c\u9632\u6b62\u5199\u56de\u6570\u636e\u5e93\u65f6\u51fa\u73b0\u65ad\u7535\u6216\u8005\u5d29\u6e83\u3002  </li> <li>Concurrency-control manager controls the interaction among the concurrent transactions, to ensure the consistency of the database.   </li> </ul>"},{"location":"ZJU_CS/Database/db1/#database_users","title":"Database Users","text":"<ul> <li>Database Administrator (DBA) \u6570\u636e\u5e93\u7ba1\u7406\u5458\uff0c\u8981\u505a\u5b9a\u4e49\u6a21\u5f0f\uff0c\u6570\u636e\u5e93\u8c03\u8c10\uff0c\u6545\u969c\u65f6\u6062\u590d\uff08\u5907\u4efd\uff09\u7b49\u5de5\u4f5c\u3002 \u8001\u5e08\uff1a\u6211\u4e0d\u770b\u597d\uff01  </li> </ul>"},{"location":"ZJU_CS/Database/db1/#history","title":"History","text":"<ul> <li>1973 Turing Award: Charles W. Bachman father of databases</li> <li>1981 Turing Award: Edgar F. Codd  </li> <li>1998 Turing Award: Jim Gray </li> <li>2014 Turing Award: Michael Stonebraker</li> </ul>"},{"location":"ZJU_CS/Database/db10/","title":"Lecture 10 | Indexing","text":""},{"location":"ZJU_CS/Database/db10/#basic_concepts","title":"Basic Concepts","text":"<p>Indexing mechanisms used to speed up access to desired data. \u7d22\u5f15\u7528\u6765\u52a0\u901f\u67e5\u627e\u3002  </p> <p>Search Key - attribute to set of attributes used to look up records in a file. An index file consists of records (called index entries) of the form. \u7d22\u5f15\u6587\u4ef6\u901a\u5e38\u662f\u6709\u987a\u5e8f\u7684</p>"},{"location":"ZJU_CS/Database/db10/#index_evaluation_metrics","title":"Index Evaluation Metrics","text":"<ul> <li>Access types supported efficiently<ul> <li>Point query: records with a specified value in the attribute. \u70b9\u67e5\u8be2</li> <li>Range query: records with an attribute value falling in a specified range of values. \u8303\u56f4\u67e5\u8be2</li> </ul> </li> <li>Access time</li> <li>Insertion time</li> <li>Deletion time</li> <li>Space overhead</li> </ul>"},{"location":"ZJU_CS/Database/db10/#ordered_indices","title":"Ordered Indices","text":"<ul> <li>Primary index\uff08\u4e3b\u7d22\u5f15\uff09: in a sequentially ordered file, the index whose search key specifies the sequential order of the file.  <ul> <li>Also called clustering index\uff08\u805a\u96c6\u7d22\u5f15\uff09</li> <li>The search key of a primary index is usually but not necessarily the primary key.</li> </ul> </li> <li>Secondary index\uff08\u8f85\u52a9\u7d22\u5f15\uff09: an index whose search key specifies an order different from the sequential order of the file.  Also called non-clustering index.</li> </ul> Example <p>\u4e3b\u7d22\u5f15\u548c\u6570\u636e\u5185\u7684\u987a\u5e8f\u662f\u4e00\u6837\u7684\u3002\u70b9\u67e5\u548c\u8303\u56f4\u67e5\u90fd\u662f\u6bd4\u8f83\u9ad8\u6548\u7684\u3002</p> <p> </p> <p>\u5982\u679c key \u4e0d\u662f\u4e00\u4e2a\u4e3b\u952e\uff0c\u90a3\u53ef\u80fd\u4f1a\u5bf9\u5e94\u591a\u4e2a\u8bb0\u5f55\u3002</p> <p>Primary index \u662f\u5f88\u5b9d\u8d35\u7684\uff0c\u53ea\u80fd\u6709\u4e00\u4e2a\uff0c\u5176\u4ed6\u90fd\u662f\u8f85\u52a9\u7d22\u5f15\u3002    </p> <ul> <li>Dense index(\u7a20\u5bc6\u7d22\u5f15) \u2014 Index record appears for every search-key value in the file.  \u6240\u6709 search-key \u90fd\u8981\u51fa\u73b0\u5728\u7d22\u5f15\u6587\u4ef6\u91cc\u3002  </li> <li>Sparse Index\uff08\u7a00\u758f\u7d22\u5f15\uff09:  contains index records for only some search-key values.</li> </ul> Example <p> </p> <p>Good tradeoff: sparse index with an index entry for every block in file, corresponding to least search-key value in the block.</p>"},{"location":"ZJU_CS/Database/db10/#multilevel_index","title":"Multilevel Index","text":"<p>If primary index does not fit in memory, access becomes expensive. \u53ef\u4ee5\u5bf9\u7d22\u5f15\u6587\u4ef6\u672c\u8eab\u518d\u5efa\u7acb\u4e00\u6b21\u7d22\u5f15\u3002</p>"},{"location":"ZJU_CS/Database/db10/#b-tree_index","title":"B+-Tree Index","text":"<ul> <li>All paths from root to leaf are of the same length</li> <li>Inner node(not a root or a leaf): between \\(\\lceil n/2\\rceil\\) and \\(n\\) children.</li> <li>Leaf node: between \\(\\lceil (n\u20131)/2\\rceil\\) and \\(n\u20131\\) values</li> <li>Special cases: <ul> <li>If the root is not a leaf: at least 2 children.</li> <li>If the root is a leaf : between 0 and (n\u20131)values.</li> </ul> </li> </ul> <p>\u4e00\u822c\u4e00\u4e2a\u8282\u70b9\u5c31\u662f\u4e00\u4e2a\u5757\u7684\u5927\u5c0f, 4K. B+ \u6811\u7684\u53c9\u662f\u975e\u5e38\u5927\u7684\u3002</p>"},{"location":"ZJU_CS/Database/db10/#observations_about_b-trees","title":"Observations about B+-trees","text":"<p>Since the inter-node connections are done by pointers, \u201clogically\u201d close blocks need not be \u201cphysically\u201d close. \u5982\u679c\u6709\u5f88\u591a\u6587\u4ef6\u4e00\u6b21\u6027\u5efa\u7acb B+ \u6811\uff0c\u6211\u4eec\u53ef\u4ee5\u4ece\u53f6\u5b50\u8282\u70b9\u5f00\u59cb\u5efa\u7acb\u3002</p> <p>\u5982\u679c\u6709 K \u4e2a\u7d22\u5f15\u9879\uff0c\u5219\u6811\u9ad8\u5ea6\u4e0d\u4f1a\u8d85\u8fc7 \\(\\lceil \\log_{\\lceil n/2 \\rceil}(K/2)\\rceil + 1\\). \u9ad8\u5ea6\u6700\u5c0f\u4e3a \\(\\log_n(K)\\)</p> <p>Examples of Insert on B+-Tree</p> <p> </p> <p>\u6ce8\u610f\u5185\u70b9\u7684 split \u548c\u53f6\u5b50\u7684\u4e0d\u4e00\u6837\u3002\u8981\u628a\u4e2d\u95f4\u7684\u8282\u70b9 move \u4e0a\u53bb\u3002</p> <p>Examples of Delete on B+-Tree</p> <p> </p> <p>\u4e2d\u95f4\u70b9\u5982\u679c\u4e0d\u591f\uff0c\u4ece\u53e6\u5916\u4e00\u8fb9\u501f\u4e00\u4e2a\u8fc7\u6765\u3002\u4f46\u662f\u4e0d\u80fd\u76f4\u63a5\u501f\uff0c\u9700\u8981\u628a\u5b83\u9876\u4e0a\u53bb\u3002  </p> <p>\u6ce8\u610f\u8003\u8651\u548c\u5144\u5f1f\u5408\u5e76\u3002</p>"},{"location":"ZJU_CS/Database/db10/#b-_tree_height_and_size_estimation","title":"B+- tree : height and size estimation","text":"<p>\u5168\u6ee1\u7684\u65f6\u5019\u8282\u70b9\u6700\u5c11 \u6ce8\u610f\u8fd9\u91cc\u7684\u5411\u4e0a/\u5411\u4e0b\u53d6\u6574\u95ee\u9898 \u6d45\u5c42\u8282\u70b9\u4e2a\u6570\u5c11\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u7b2c\u4e00\u5c42\u548c\u7b2c\u4e8c\u5c42\u7684\u8282\u70b9\u90fd\u653e\u5230\u5185\u5b58\u4e2d pin \u4f4f\u3002</p>"},{"location":"ZJU_CS/Database/db10/#b-tree_file_organization","title":"B+-Tree File Organization","text":"<p>\u6587\u4ef6\u7ec4\u7ec7 B+-Tree File Organization:</p> <ul> <li>Leaf nodes in a B+-tree file organization store records, instead of pointers \u53f6\u5b50\u8282\u70b9\u4e0d\u518d\u653e\u7d22\u5f15\u9879\uff0c\u653e\u8bb0\u5f55\u672c\u8eab\u3002 </li> <li>Helps keep data records clustered even when there are insertions/deletions/updates  </li> </ul> <p>\u6211\u4eec\u53ef\u4ee5\u6539\u53d8\u534a\u6ee1\u7684\u8981\u6c42\u4ee5\u63d0\u9ad8\u7a7a\u95f4\u5229\u7528\u7387\u3002</p>"},{"location":"ZJU_CS/Database/db10/#other_issues_in_indexing","title":"Other Issues in Indexing","text":"<ul> <li>Record relocation and secondary indices If a record moves, all secondary indices that store record pointers have to be updated  Node splits in B+-tree file organizations become very expensive Solution: use primary-index search key instead of record pointer in secondary index</li> <li>Variable length strings as keys Variable fanout  </li> <li>Prefix compression Key values at internal nodes can be prefixes of full key Keep enough characters to distinguish entries in the subtrees separated by the key value</li> </ul>"},{"location":"ZJU_CS/Database/db10/#multiple-key_access","title":"Multiple-Key Access","text":"<p>Composite search keys are search keys containing more than one attribute e.g. <code>(dept_name, salary)</code> </p> <p>Lexicographic ordering: \\((a_1, a_2) &lt; (b_1, b_2)\\) if either \\(a_1 &lt; b_1\\), or \\(a_1=b_1\\) and \\(a_2 &lt; b_2\\).  </p> <p>\u5355\u4e2a key, \u4e0d\u540c key \u4e4b\u95f4\u7ec4\u5408\u90fd\u53ef\u4ee5\u5efa\u7acb B+ \u6811\u3002\u8fd9\u6837\u4f1a\u6709\u5f88\u591a\u7ec4\u5408\uff0c\u53ef\u4ee5\u5728\u9891\u7e41\u51fa\u73b0\u7684\u67e5\u8be2\u5c5e\u6027\u4e0a\u5efa\u7acb B+ \u6811\u3002</p>"},{"location":"ZJU_CS/Database/db10/#non-unique_search_keys","title":"Non-unique Search Keys","text":"<p>\u6211\u4eec\u53ef\u4ee5\u5728 B+ \u6811\u53f6\u5b50\u8282\u70b9\u4e0d\u76f4\u63a5\u6307\u5411\u78c1\u76d8\u91cc\u7684\u6570\u636e\uff0c\u800c\u662f\u6307\u5411\u4e00\u4e2a\u5757\u3002 \u4e5f\u53ef\u4ee5\u5728\u7d22\u5f15\u4e0a\u52a0\u4e0a\u53bb\u4e00\u4e2a\u7d22\u5f15\uff0c\u4f7f\u5b83\u5bf9\u5e94\u7684\u8bb0\u5f55\u552f\u4e00\u3002 \u53ef\u4ee5\u901a\u8fc7\u8303\u56f4\u67e5\u627e</p>"},{"location":"ZJU_CS/Database/db10/#bulk_loading_and_bottom-up_build","title":"Bulk Loading and Bottom-Up Build","text":"<p>Inserting entries one-at-a-time into a B+-tree requires \\(\\geq 1\\) IO per entry   </p> <p>\u5982\u679c\u6211\u4eec\u4e00\u6b21\u6027\u63d2\u5165\u5f88\u591a\u7d22\u5f15\u9879</p> <ul> <li>Efficient alternative 1: Insert in sorted order \u5c40\u90e8\u6027\u8f83\u597d\uff0c\u51cf\u5c11 I/O. </li> <li>Efficient alternative 2: Bottom-up B+-tree construction<ul> <li>First sort index entries </li> <li>Then create B+-tree layer-by-layer, starting with leaf level</li> <li>The built B+-tree is written to disk using sequential I/O operations</li> </ul> </li> </ul> <p>Example</p> <p> </p> <p>\u5982\u679c\u8981\u6392\u5e8f\u7684\u5185\u5bb9\u8f83\u5927\uff0c\u65e0\u6cd5\u653e\u4e0b\u5185\u5b58\uff0c\u53ef\u4ee5\u4f7f\u7528\u5916\u90e8\u6392\u5e8f\u3002 fanout \u53ef\u4ee5\u8ba1\u7b97\u51fa\u6765\u3002 \u53ef\u4ee5\u7528 level-order \u5199\u5230\u78c1\u76d8\u91cc\uff0c\u4fbf\u4e8e\u987a\u5e8f\u8bbf\u95ee\u6240\u6709\u7d22\u5f15\uff0c\u6b64\u65f6\u5757\u662f\u8fde\u7eed\u7684\u3002\uff08\u4fbf\u4e8e\u987a\u5e8f\u8bbf\u95ee\u6240\u6709\u6570\u636e\u9879\uff09  \u8fd9\u91cc\u7684\u4ee3\u4ef7\u5c31\u662f\u5efa\u597d\u540e\uff0c\u4e00\u6b21 seek \u540e\u5168\u90e8\u5199\u51fa\u53bb (9 blocks)  </p> <p>Bulk insert index entries   </p> <p>Example</p> <p> </p> <p>\u628a\u521a\u521a\u90a3\u68f5 B+ \u6811\u53f6\u5b50\u8282\u70b9\uff08\u5373\u904d\u5386\u6240\u6709\u6570\u636e\uff09\u9700\u8981 1seek+6blocks. \u968f\u540e\u548c\u4e0a\u9762\u7684\u6570\u636e\u5408\u5e76\u540e\uff0c\u5199\u56de\u78c1\u76d8\u65f6\u9700\u8981 1seek+13blocks. </p> <p>Merge two existing two B+-trees , to create a new B+-tree using the Bottom-UP Build algorithm, as in LSM-tree Index \u5047\u8bbe\u6709\u4e24\u68f5\u8fd9\u6837\u751f\u6210\u7684 B+ \u6811\uff0c\u5c06\u4ed6\u4eec\u5408\u5e76\u5728\u4e00\u8d77\u3002\u9996\u5148\u628a\u53f6\u5b50\u8282\u70b9\u62ff\u51fa\u6765\u6392\u5e8f\u3002  </p>"},{"location":"ZJU_CS/Database/db10/#indexing_in_main_memory","title":"Indexing in Main Memory","text":"<p>cache \u6309 cache line \u4f20\u8f93, \u53ea\u6709 64B. </p> <ul> <li>Random access in memory  <ul> <li>Much cheaper than on disk/flash, but still expensive compared to cache read</li> <li>Binary search for a key value within a large B+-tree node results in many cache misses \u4e8c\u5206\u67e5\u627e\u53ef\u80fd\u5e26\u6765\u5f88\u591a cache miss.  </li> <li>Data structures that make best use of cache preferable \u2013 cache conscious </li> </ul> </li> </ul> <p>B+- trees with small nodes that fit in cache line are preferable to reduce cache misses search key \u548c pointer \u53ef\u4ee5\u5206\u5f00\u653e\u3002</p> <p>Key idea:  </p> <ul> <li>use large node size to optimize disk access, </li> <li>but structure data within a node using a tree with small node size, instead of using an array, to optimize cache access.</li> </ul>"},{"location":"ZJU_CS/Database/db10/#indexing_on_flash","title":"Indexing on Flash","text":"<p>Flash \u91cc\u4e0d\u662f\u5373\u65f6\u4fee\u6539\uff0c\u800c\u662f\u5148\u64e6\u6389\u518d\u5199\u3002\u540c\u65f6\u64e6\u7684\u6b21\u6570\u662f\u6709\u9650\u5236\u7684\u3002\u56e0\u6b64\u6700\u597d\u7684\u65b9\u6cd5\u662f\u4ece\u5e95\u6784\u5efa\uff0c\u7136\u540e\u987a\u5e8f\u5199\u5165\u3002</p> <ul> <li>Random I/O cost much lower on flash 20 to 100 microseconds for read/write</li> <li>Writes are not in-place, and (eventually) require a more expensive erase Optimum page size therefore much smaller</li> <li>Bulk-loading still useful since it minimizes page erases</li> <li>Write-optimized tree structures (i.e., LSM-tree) have been adapted to minimize page writes for flash-optimized search trees \u5199\u4f18\u5316\u7d22\u5f15\u7ed3\u6784 </li> </ul>"},{"location":"ZJU_CS/Database/db10/#log_structured_merge_lsm_tree","title":"Log Structured Merge (LSM) Tree","text":"<ul> <li>Records inserted first into in-memory tree (\\(L_0\\) tree)  </li> <li>When in-memory tree is full, records moved to disk (\\(L_1\\) tree) B+-tree constructed using bottom-up build by merging existing \\(L_1\\) tree with records from \\(L_0\\) tree \u5185\u5b58\u91cc\u7684 B+ \u6811\u5982\u679c\u6ee1\u4e86\uff0c\u5c31\u9a6c\u4e0a\u5199\u5230\u78c1\u76d8\u91cc\u53bb\uff08\u53ef\u4ee5\u8fde\u7eed\u5199\uff09  </li> <li>When \\(L_1\\) tree exceeds some threshold, merge into \\(L_2\\) tree And so on for more levels Size threshold for \\(L_{i+1}\\) tree is \\(k\\) times size threshold for \\(L_i\\) tree </li> </ul> <p>\u8fd9\u6837\u6211\u4eec\u628a\u968f\u673a\u5199\u53d8\u4e3a\u4e86\u987a\u5e8f\u5199\u3002\u4f46\u6b64\u65f6\u67e5\u627e\u4e00\u4e2a\u7d22\u5f15\uff0c\u5c31\u8981\u904d\u5386\u6240\u6709 B+ \u6811\u3002</p> <ul> <li>Benefits of LSM approach<ul> <li>Inserts are done using only sequential I/O operations</li> <li>Leaves are full, avoiding space wastage</li> <li>Reduced number of I/O operations per record inserted as compared to normal B+-tree (up to some size)</li> </ul> </li> <li>Drawback of LSM approach<ul> <li>Queries have to search multiple trees</li> <li>Entire content of each level copied multiple times</li> </ul> </li> </ul> <p>Stepped Merge Index \u539f\u5148\u7684\u7ed3\u6784\u4e2d\uff0cMerge \u64cd\u4f5c\u592a\u591a\uff0c\u6211\u4eec\u53ef\u4ee5\u4e00\u6b21\u6027\u5408\u5e76\u3002 \u78c1\u76d8\u4e0a\u6bcf\u5c42\u6709 k \u68f5\u6811\uff0c\u5f53 k \u4e2a\u7d22\u5f15\u5904\u4e8e\u540c\u4e00\u5c42\u65f6\uff0c\u5408\u5e76\u5b83\u4eec\u5e76\u5f97\u5230\u4e00\u68f5\u5c42\u6570 \\(+1\\) \u7684\u6811\uff0c\u5199\u56de\u3002   \\(L_1\\) \u6709\u5927\u5c0f\u9650\u5236\uff0c\u8fbe\u5230\u540e\u4f1a\u751f\u6210\u53e6\u4e00\u4e2a B+ \u6811\uff0c\u4f9d\u6b21\u4e3a k \u500d\u3002  \u5e03\u9686\u8fc7\u6ee4\u5668</p>"},{"location":"ZJU_CS/Database/db11/","title":"Lecture11 \uff5c Query Processing","text":"Abstract <ul> <li>Basic Steps in Query Processing</li> <li>Measures of Query Cost</li> <li>Selection Operation  </li> <li>Sorting </li> <li>Join Operation </li> <li>Other Operations</li> <li>Evaluation of Expressions</li> </ul>"},{"location":"ZJU_CS/Database/db11/#basic_steps_in_query_processing","title":"Basic Steps in Query Processing","text":"<p>\u7ecf\u8fc7\u8bed\u6cd5\u5206\u6790\u3001\u8bed\u4e49\u68c0\u67e5\u7ffb\u8bd1\u6210\u5173\u7cfb\u8868\u8fbe\u5f0f\uff0c\u7ecf\u8fc7\u67e5\u8be2\u4f18\u5316\u8f6c\u5316\u6210\u6267\u884c\u8ba1\u5212\uff08\u76ee\u6807\u4ee3\u7801\uff09\uff0c\u7531\u6c42\u503c\u5f15\u64ce\u5f97\u5230\u8f93\u51fa\u3002</p> <p>Example</p> <p> </p> <p>\u903b\u8f91\u4f18\u5316\uff1a\u628a\u9009\u62e9\u8fd0\u7b97\u5f80\u53f6\u5b50\u4e0a\u63a8\uff1b\u5148\u8fde\u63a5\u7684\u662f\u7ed3\u679c\u6bd4\u8f83\u5c0f\u7684\u3002 An evaluation plan defines exactly what algorithm is used for each operation, and how the execution of the operations is coordinated. </p> <p>\u7ecf\u8fc7\u4ee3\u4ef7\u4f30\u7b97\uff0c\u51b3\u5b9a\u4f7f\u7528\u54ea\u4e2a\u7b97\u6cd5\u7684\u4ee3\u4ef7\u6700\u5c0f\u3002\u5982\u4e0a\u56fe\u5de6\u8fb9\u4f7f\u7528\u4e86 B+ \u6811\u7d22\u5f15\uff0c\u53f3\u8fb9\u4f7f\u7528\u4e86\u7ebf\u6027\u626b\u63cf\u3002 pipeline \u8868\u793a\u6700\u4e0b\u9762\u4e24\u6b65\u53ef\u4ee5\u6d41\u6c34\u7ebf\uff0c\u5373\u5e76\u884c\u8ba1\u7b97\u3002 \uff08\u706b\u5c71\u6a21\u578b\uff09</p>"},{"location":"ZJU_CS/Database/db11/#measures_of_query_cost","title":"Measures of Query Cost","text":"<p>Typically disk access is the predominant cost, and is also relatively easy to estimate.  \u5ffd\u7565 CPU cost. Measured by taking into account</p> <ul> <li>Number of seeks </li> <li>Number of blocks read </li> <li>Number of blocks written  \u901a\u5e38\u5199\u7684\u65f6\u95f4\u6bd4\u8bfb\u7684\u65f6\u95f4\u4e45\uff0c\u56e0\u4e3a\u6211\u4eec\u53ef\u80fd\u9700\u8981\u68c0\u9a8c\u5199\u7684\u7ed3\u679c</li> </ul> <p>For simplicity we just use the number of block transfers from disk and the number of seeks as the cost measures</p> <ul> <li>\\(t_T\\) \u2013 time to transfer one block</li> <li>\\(t_S\\) \u2013 time for one seek</li> <li>Cost for b block transfers plus S seeks \\(b * t_T + S * t_S\\) </li> </ul> <p>We often use worst case estimates, assuming only the minimum amount of memory needed for the operation is available. \u5373\u5047\u8bbe\u7f13\u51b2\u533a\u6700\u5c0f\u7684\u65f6\u5019\uff0c\u800c\u4e14\u90fd\u662f\u4ece\u6587\u4ef6\u4e2d\u8bfb\u53d6\u800c\u975e\u4ece buffer \u4e2d\u8bfb\u53d6\u3002</p>"},{"location":"ZJU_CS/Database/db11/#selection_operation","title":"Selection Operation","text":""},{"location":"ZJU_CS/Database/db11/#file_scan","title":"File scan","text":"<p>Algorithm A1 (linear search). Scan each file block and test all records to see whether they satisfy the selection condition. \uff08\u5047\u5b9a\u6570\u636e\u5757\u90fd\u662f\u8fde\u7eed\u5b58\u653e\u7684\uff09</p> <ul> <li>worst cost = \\(b_r*t_T+t_S\\) \\(b_r\\) \u662f\u8981\u627e\u7684\u5757\u7684\u6570\u91cf</li> <li>average cost = \\(b_r/2*t_T+t_S\\) \u8fd9\u91cc\u5982\u679c\u641c\u7d22\u7684\u662f key, \u90a3\u6211\u4eec\u626b\u5230\u8fd9\u4e2a\u8bb0\u5f55\u5c31\u53ef\u4ee5\u505c\u6b62\u3002</li> </ul>"},{"location":"ZJU_CS/Database/db11/#index_scan","title":"Index scan","text":"<p>A2 (primary B+-tree index / clustering B+-tree index, equality on key).   \u5728\u4e3b\u952e\u4e0a\u67e5\u627e</p> <p>cost = \\((h_i+1)* (t_T+t_S)\\)</p> \u4e3b\u7d22\u5f15, key \u4e0a\u7684\u7b49\u503c\u67e5\u627e <p> </p> <p>\u8fd9\u91cc\u7684\u9ad8\u5ea6\u4ece 1 \u5f00\u59cb\uff08+1 \u8868\u793a\u6700\u540e\u5230\u53f6\u5b50\u8282\u70b9\uff0c\u9700\u8981\u4ece\u78c1\u76d8\u4e2d\u8bfb\uff09</p> <p>A3 (primary B+-tree index/ clustering B+-tree index, equality on nonkey). Records will be on consecutive blocks \u6b64\u65f6\u7d22\u5f15\u7684\u503c\u4e0d\u662f\u4e3b\u952e. b \u8868\u793a\u641c\u7d22\u7801\u5bf9\u5e94\u7684\u8bb0\u5f55\u6570\u91cf\u3002</p> <p>cost = \\(h_i *(t_T+t_S) + t_S + t_T *b\\)</p> \u4e3b\u7d22\u5f15, nonkey \u4e0a\u7684\u7b49\u503c\u67e5\u627e <p> </p> <p>A4 (secondary B+-tree index , equality on key).    </p> <p>cost = \\((h_i + 1) * (t_T + t_S)\\)</p> \u8f85\u52a9\u7d22\u5f15, key \u4e0a\u7684\u7b49\u503c\u67e5\u627e <p> </p> <p>A4\u2019 (secondary B+-index on nonkey, equality).</p> <p>Cost = $(h_i + m+ n) * (t_T + t_S) $ \u8fd9\u91cc m \u8868\u793a\u653e\u6307\u9488\u7684\u5757\u7684\u6570\u91cf, n \u8868\u793a\u5bf9\u5e94\u78c1\u76d8\u91cc\u7684\u8bb0\u5f55\u7684\u6570\u91cf\u3002</p> \u8f85\u52a9\u7d22\u5f15, nonkey \u4e0a\u7684\u7b49\u503c\u67e5\u627e <p> </p>"},{"location":"ZJU_CS/Database/db11/#selections_involving_comparisons","title":"Selections Involving Comparisons","text":"<p>\u67e5\u8be2 \\(\\sigma_{A\\leq V}(r)\\) (or \\(\\sigma_{A\\geq V}(r)\\))</p> <p>A5 (primary B+-index / clustering B+-index index, comparison). (Relation is sorted on A) </p> <ul> <li>\u9996\u5148\u627e\u5230\u7b2c\u4e00\u4e2a \\(\\geq v\\). \u7684\u503c</li> <li>\u628a\u540e\u9762\u7684\u5757\u987a\u5e8f\u8bfb\u8fdb\u53bb Cost = \\(h_i * (t_T + t_S) + t_S + t_T * b\\) (\u540c\u60c5\u51b5 3)</li> </ul> \u4e3b\u7d22\u5f15, key \u4e0a\u7684\u6bd4\u8f83 <p> </p> <p>A6 (secondary B+-tree index, comparison). \u60c5\u51b5\u7c7b\u4f3c A4</p> \u8f85\u52a9\u7d22\u5f15, nonkey \u4e0a\u7684\u6bd4\u8f83 <p> </p>"},{"location":"ZJU_CS/Database/db11/#implementation_of_complex_selections","title":"Implementation of Complex Selections","text":"<p>Conjunction \\(\\sigma_{\\theta_1} \\wedge \\ldots \\wedge_{\\theta_n}(r)\\) \u53ef\u4ee5\u7ebf\u6027\u626b\u63cf\uff0c\u6216\u8005\u5229\u7528\u67d0\u4e2a\u5c5e\u6027\u7684 index \u5148\u67e5\u8be2\uff0c\u628a\u7b26\u5408\u7684\u8bfb\u5230\u5185\u5b58\u4e2d\uff0c\u518d\u68c0\u67e5\u5176\u4ed6\u5c5e\u6027\u3002 \u5982\u679c\u6709\u5f88\u591a\u4e2a\u5c5e\u6027\u90fd\u6709\u7d22\u5f15\uff0c\u6211\u4eec\u9009\u62e9\u4e2d\u95f4\u7ed3\u679c\u5c11\u7684\u3002</p> <p>A7 (conjunctive selection using one index). </p> <ul> <li>Select a combination of \\(\\theta_i\\) and algorithms A1 through A6 that results in the least cost for \\(\\sigma_{\\theta_i}(r)\\).</li> <li>Test other conditions on tuple after fetching it into memory buffer.</li> </ul> <p>A8 (conjunctive selection using composite index).  Use appropriate composite (multiple-key) index if available. \u5229\u7528\u590d\u5408\u7d22\u5f15</p> <p>A9 (conjunctive selection by intersection of identifiers). \u5bf9\u6bcf\u4e2a\u7d22\u5f15\u90fd\u8fdb\u884c\u67e5\u8be2\uff0c\u5c06\u7ed3\u679c\u62fc\u8d77\u6765</p>"},{"location":"ZJU_CS/Database/db11/#algorithms_for_complex_selections","title":"Algorithms for Complex Selections","text":"<ul> <li>Disjunction: \\(\\sigma_{\\theta_1} \\vee \\ldots \\vee_{\\theta_n}(r)\\) A10 (disjunctive selection by union of identifiers). <ul> <li>Applicable if all  conditions have available indices.  </li> <li>Otherwise use linear scan.</li> <li>Use corresponding index for each condition, and take union of all the obtained sets of record pointers. </li> <li>Then fetch records from file</li> </ul> </li> <li>Negation: \\(\\sigma_{\\neg \\theta}(r)\\)<ul> <li>Use linear scan on file   </li> <li>If very few records satisfy \\(\\neg \\theta\\), and an index is applicable to \\(\\theta\\)  Find satisfying records using index and fetch from file</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/db11/#bitmap_index_scan","title":"Bitmap Index Scan","text":""},{"location":"ZJU_CS/Database/db11/#sorting","title":"Sorting","text":"<p>For relations that don\u2019t fit in memory, external sort-merge is a good choice. </p> <p>Example</p> <p> </p> <p>\u521d\u59cb\u5185\u5b58\u653e\u4e0d\u4e0b\uff0c\u53ea\u80fd\u653e \\(M\\) pages. \u4e00\u6b21\u6027\u8bfb \\(M\\) \u5757\uff0c\u5728\u5185\u5b58\u5185\u6392\u5e8f\uff0c\u6392\u597d\u540e\u5148\u5199\u56de\uff0c\u5f62\u6210\u4e00\u4e2a\u5f52\u5e76\u6bb5\u3002\u518d\u8bfb\u5165\u7b2c\u4e8c\u6bb5\u5230\u5185\u5b58\u4e2d\uff0c\u6392\u5e8f\u540e\u518d\u5199\u56de\uff0c\u5f97\u5230\u82e5\u5e72\u5f52\u5e76\u6bb5(\\(\\dfrac{b_r}{M}\\)) \u4f1a\u6709 \\(2*\\dfrac{b_r}{M}\\) \u6b21 seek, \\(2*b_r\\) \u6b21 transfer. </p>"},{"location":"ZJU_CS/Database/db11/#procedure","title":"Procedure","text":"<p>Let \\(M\\) denote memory size (in pages). </p> <ul> <li>Create sorted runs(\u5f52\u5e76\u6bb5) Repeatedly do the following till the end of the relation:<ul> <li>Read M blocks of relation into memory     </li> <li>Sort the in-memory blocks</li> <li>Write sorted data to run \\(R_i\\); increment i. \u5047\u8bbe\u751f\u6210\u4e86 \\(N\\) \u4e2a\u5f52\u5e76\u6bb5</li> </ul> </li> <li> <p>Merge the runs </p> <ul> <li> <p>\\(N&lt;M\\) \u5982\u679c\u5f52\u5e76\u6bb5\u5c11\u4e8e\u53ef\u7528\u5185\u5b58\u9875 N \u8def\u5f52\u5e76  \u5f52\u5e76\u65f6\u6bcf\u4e00\u6bb5\u53ea\u9700\u8981\u4e00\u5757\u7f13\u51b2\u533a\uff08\u8f93\u51fa\u5757\u4e5f\u9700\u8981\u4e00\u5757\u7f13\u51b2\u533a\uff09 </p> </li> <li> <p>\\(N\\geq M\\) \u6bcf\u6b21 pass, \u6211\u4eec\u4e0d\u505c\u5730\u628a M-1 \u4e2a\u6bb5\u53d8\u6210\u4e86\u4e00\u4e2a\u5927\u7684\u5f52\u5e76\u6bb5\uff0c\u6b64\u65f6\u6570\u91cf\u51cf\u5c11\u4e3a\u539f\u6765\u7684 \\(\\dfrac{1}{M-1}\\). \u5982\u679c\u4ecd\u7136\u6570\u91cf\u8d85\u8fc7 M, \u7ee7\u7eed pass.  e.g. If M=11, and there are 90 runs, one pass reduces the number of runs to 9, each 10 times the size of the initial runs.  </p> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/db11/#cost_analysis","title":"Cost analysis","text":"<ul> <li> <p>transfer      </p> <p>\u6211\u4eec\u4e0d\u8003\u8651\u6700\u540e\u4e00\u6b21\u5199\u78c1\u76d8\u7684 cost, \u56e0\u4e3a\u53ef\u80fd\u6d41\u6c34\u7ebf\u4f1a\u76f4\u63a5\u628a\u7ed3\u679c\u4ea4\u7ed9\u4e0b\u4e00\u6b65\u64cd\u4f5c\u3002 * seek  </p> </li> </ul>"},{"location":"ZJU_CS/Database/db11/#advanced_version","title":"Advanced version","text":"<p>\u6bcf\u4e00\u6b21\u8bfb\u8fdb\u53bb\u90fd\u8981 seek, \u53ef\u4ee5\u6539\u8fdb\u3002\u4e3a\u6bcf\u4e00\u4e2a\u5f52\u5e76\u6bb5\u5206\u914d\u591a\u4e2a\u7f13\u51b2\u533a\u3002\u8fd9\u6837\u6211\u4eec\u5b9a\u4f4d\u4e00\u6b21\u4e4b\u540e\u53ef\u4ee5\u8bfb\u5165\u591a\u5757\u8fdb\u5165\u7f13\u51b2\u533a\u3002 \u51cf\u5c11\u4e86 seek \u6b21\u6570\uff0c\u4f46\u8fd9\u6837\u8f6e\u6b21\u53ef\u80fd\u4f1a\u589e\u52a0\u3002</p>"},{"location":"ZJU_CS/Database/db11/#join_operation","title":"Join Operation","text":"<p>Several different algorithms to implement joins</p> <ul> <li>Nested-loop join</li> <li>Block nested-loop join</li> <li>Indexed nested-loop join</li> <li>Merge-join</li> <li>Hash-join</li> </ul>"},{"location":"ZJU_CS/Database/db11/#nested-loop_join","title":"Nested-Loop Join","text":"<p>\u4e24\u91cd\u5faa\u73af</p> <ul> <li>\\(r\\) is called the outer relation and \\(s\\) the inner relation of the join.  </li> </ul> <p>\\(n_r * b_s + b_r\\) block transfers, plus \\(n_r + b_r\\) seeks \u5bf9\u5916\u5faa\u73af\u6bcf\u4e2a\u8bb0\u5f55\uff0c\u5185\u5faa\u73af\u7684\u6240\u6709\u5757\u90fd\u8981\u8fdb\u53bb. seek \u65f6\u6bcf\u6b21\u5916\u5faa\u73af\u90fd\u9700\u8981 seek, \u5185\u5faa\u73af\u6bcf\u8f6e\u53ea\u9700\u8981\u4e00\u6b21 seek. </p> <p>\u5982\u679c\u5185\u5b58\u80fd\u5bb9\u7eb3\u6240\u6709\u7684\u5173\u7cfb\uff0c\u90a3\u6211\u4eec\u53ea\u9700\u8981 \\(b_r  + b_s\\) block transfers and 2 seeks.  </p>"},{"location":"ZJU_CS/Database/db11/#block_nested-loop_join","title":"Block Nested-Loop Join","text":"<ul> <li>Worst case estimate:  \\(b_r * b_s + b_r\\)  block transfers + \\(2 * b_r\\) seeks Each block in the inner relation \\(s\\) is read once for each block in the outer relation</li> <li>Best case: \\(b_r + b_s\\) block transfers + 2 seeks.</li> </ul> <p>\u8981\u628a\u5c0f\u7684\u4f5c\u4e3a\u5916\u5173\u7cfb\u3002</p> <p>Improvements to block nested loop algorithms: \u5047\u8bbe\u5185\u5b58\u6709 M \u5757\uff0c\u6709\u4e00\u5757\u4f5c\u4e3a output \u7684\u7f13\u51b2\uff0c\u5269\u4e0b M-1 \u5757\u4e2d M-2 \u5757\u5747\u7ed9\u5916\u5173\u7cfb\uff0c\u5185\u5173\u7cfb\u7ed9\u4e00\u5757\u3002</p> <p>Cost = \\(\\lceil b_r  / (M-2) \\rceil * b_s + b_r\\) block transfers + \\(2 \\lceil b_r  / (M-2)\\rceil\\) seeks</p> <ul> <li>If equi-join attribute forms a key on the inner relation, stop inner loop on first match \u5982\u679c\u8fde\u63a5\u7684\u5c5e\u6027\u662f key, \u90a3\u4e48\u5f53\u6211\u4eec\u5339\u914d\u4e0a\u4e4b\u540e\u5c31\u53ef\u4ee5\u505c\u6b62\u5185\u5faa\u73af\u3002</li> <li>Scan inner loop forward and backward alternately, to make use of the blocks remaining in buffer (with LRU replacement) \u5229\u7528 LRU \u7b56\u7565\u7684\u7279\u70b9\uff0cinner \u6b63\u5411\u626b\u63cf\u540e\u518d\u53cd\u8fc7\u6765\uff0c\u8fd9\u6837\u6700\u8fd1\u7684\u5757\u5f88\u53ef\u80fd\u8fd8\u5728\u5185\u5b58\u4e2d\uff0c\u63d0\u9ad8\u7f13\u51b2\u547d\u4e2d\u7387\u3002</li> </ul>"},{"location":"ZJU_CS/Database/db11/#indexed_nested-loop_join","title":"Indexed Nested-Loop Join","text":"<p>\u5982\u679c\u5185\u5faa\u73af\u6709\u7d22\u5f15\uff0c\u6211\u4eec\u5c31\u6ca1\u5fc5\u8981\u626b\u63cf\u5185\u5faa\u73af\u6240\u6709\u5757\u4e86\u3002  </p> <p>Index lookups can replace file scans if</p> <ul> <li>join is an equi-join or natural join and</li> <li>an index is available on the inner relation\u2019s join attribute \u8fde\u63a5\u5c5e\u6027\u6709\u7d22\u5f15</li> </ul> <p>Cost of the join: \\(b_r (t_T + t_S) + n_r * c\\) \u8fd9\u91cc\u5047\u5b9a\u7ed9\u5916\u5173\u7cfb\u4e00\u5757\u5185\u5b58. \\(c\\) \u8868\u793a\u904d\u5386\u7d22\u5f15\u5e76\u53d6\u51fa\u6240\u6709\u5339\u914d\u7684\u5143\u7ec4\u7684\u65f6\u95f4\u3002</p>"},{"location":"ZJU_CS/Database/db11/#merge_join","title":"Merge Join","text":"<p>\u5047\u8bbe\u4e24\u4e2a\u5173\u7cfb\u5df2\u7ecf\u57fa\u4e8e\u8fde\u63a5\u5c5e\u6027\u6392\u597d\u5e8f\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u5f52\u5e76\u7684\u601d\u60f3\u8fde\u63a5\u3002  </p> <ul> <li>Sort both relations on their join attribute (if not already sorted on the join attributes).  </li> <li>Merge the sorted relations to join them<ul> <li>Join step is similar to the merge stage of the sort-merge algorithm.  </li> <li>Main difference is handling of duplicate values in join attribute \u2014 every pair with same value on join attribute must be matched</li> </ul> </li> </ul> <p>\\(b_r + b_s\\) block transfers + \\(\\lceil b_r / b_b\\rceil + \\lceil b_s / b_b\\rceil\\) seeks  </p> <p>If the buffer memory size is M pages, in order to minimize the cost of merge join, how to assign M blocks to r and s respectively? </p> <p>The estimated cost is \\(b_r + b_s\\) block transfers + \\(\\lceil b_r / x_r\\rceil + \\lceil b_s / x_s\\rceil\\) seeks (\\(x_r+x_s=M\\))  </p> <p>\u5982\u679c\u4e24\u4e2a\u8868\u90fd\u65e0\u5e8f\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u6392\u5e8f\u518d Merge-join, \u8fd9\u65f6\u8fd8\u8981\u7b97\u4e0a\u6392\u5e8f\u7684\u4ee3\u4ef7\u3002</p>"},{"location":"ZJU_CS/Database/db11/#hash_join","title":"Hash Join","text":"<p>\u7528\u4e00\u4e2a Hash \u51fd\u6570\u628a\u4e24\u4e2a\u5173\u7cfb\u8fdb\u884c\u5206\u7247\u3002\u80fd\u591f\u8fde\u63a5\u4e0a\u7684\u8bb0\u5f55\uff0c\u4e00\u5b9a\u5904\u4e8e\u540c\u4e00\u4e2a partition \u91cc\u9762\uff08\u53cd\u4e4b\u4e0d\u4e00\u5b9a\uff09 \u8fd9\u6837\u5927\u5173\u7cfb\u53d8\u6210\u4e86\u5c0f\u5173\u7cfb\u3002 \u6211\u4eec\u8981\u6c42\u5176\u4e2d\u67d0\u4e2a\u7684\u5c0f\u5173\u7cfb\u8981\u80fd\u4e00\u6b21\u653e\u5230\u5185\u5b58\u4e2d\u3002</p> <p>Applicable for equi-joins and natural joins.   the value \\(n\\)(partition \u7684\u4e2a\u6570) and the hash function \\(h\\) is chosen such that each si should fit in memory. \\(n  \\geq  \\lceil b_s / M\\rceil\\)  \u8981\u6c42\u6bcf\u4e2a partition \u7684\u5927\u5c0f\u90fd\u8981\u5c0f\u4e8e M, \u4e0d\u7136\u4e0d\u80fd\u4e00\u6b21\u6027\u653e\u8fdb\u53bb\u3002  </p> <p>\u5982\u679c\u6211\u4eec\u7684 \\(n\\) \u5f88\u5927\uff0c\u8981\u5206\u51fa\u6765\u7684 partition \u5f88\u5927\uff0c\u4f46\u662f\u5185\u5b58\u4e0d\u591f\uff0c\u5173\u7cfb\u5206\u533a\u4e0d\u80fd\u4e00\u6b21\u751f\u6210\u6240\u6709\u7684 partition, \u8981\u7ecf\u8fc7\u591a\u6b21\u5206\u533a\u3002 \u6bcf\u6b21\u8f93\u5165\u5148\u88ab\u5212\u5206\uff0c\u968f\u540e\u8fdb\u884c\u7ec6\u5206\u3002</p> <p>\u6ce8\u610f\u5206\u7247\u7684\u65f6\u5019\uff0c\u8fd8\u8981\u5199\u51fa\u53bb\u3002 \u5339\u914d\u65f6\u6211\u4eec\u6709\u54c8\u5e0c\u7d22\u5f15\u3002</p> <p>Typically n is chosen as \\(\\lceil b_s/M\\rceil * f\\)  where \\(f\\) is a \u201cfudge factor(\u4fee\u6b63\u56e0\u5b50)\u201d, typically around 1.2 \u5206\u4e0d\u5300\uff0c\u6211\u4eec\u6709\u610f\u653e\u5927\u3002 The probe input relation partitions \\(r_i\\) need not fit in memory</p>"},{"location":"ZJU_CS/Database/db11/#recursive_partitioning","title":"Recursive partitioning","text":"<p>Recursive partitioning required if number of partitions n is greater than number of pages M of memory.</p> <p>A relation does not need recursive partitioning if \\(M &gt; n_h + 1\\), or equivalently \\(M &gt; (b_s/M) + 1\\), which simplifies (approximately) to \\(M &gt; \\sqrt{b_s}\\). </p> Example <p> </p>"},{"location":"ZJU_CS/Database/db11/#cost_of_hash-join","title":"Cost of Hash-Join","text":""},{"location":"ZJU_CS/Database/db11/#other_operations","title":"Other Operations","text":"<ul> <li>Duplicate elimination can be implemented via hashing or sorting.  On sorting duplicates will come adjacent to each other, and all but one set of duplicates can be deleted. \u5728\u6392\u5e8f\u7684\u8fc7\u7a0b\uff08\u751f\u6210\u3001\u5408\u5e76\u5f52\u5e76\u6bb5\u5c31\u8fdb\u884c\u53bb\u91cd\uff09 Hashing is similar </li> <li>Aggregation Sorting or hashing can be used to bring tuples in the same group together, and then the aggregate functions can be applied on each group.  \u751f\u6210\u5f52\u5e76\u6bb5\u7684\u65f6\u5019\uff0c\u540c\u4e00\u6bb5\u7684\u5c31\u53ef\u4ee5\u7edf\u8ba1\u7edf\u4e00\u7ed3\u679c</li> </ul>"},{"location":"ZJU_CS/Database/db12/","title":"Query Optimization","text":"Abstract <ul> <li>Introduction </li> <li>Transformation of Relational Expressions</li> <li>Statistical Information for Cost Estimation</li> <li>Cost-based Optimization</li> <li>Dynamic Programming for Choosing Evaluation Plans</li> <li>Nested Subqueries</li> <li>Materialized Views </li> <li>Advanced Topics in Query Optimization</li> </ul>"},{"location":"ZJU_CS/Database/db12/#introduction","title":"Introduction","text":"<p>Alternative ways of evaluating a given query</p> <ul> <li>Equivalent expressions \u903b\u8f91\u4f18\u5316\uff1a\u5173\u7cfb\u4ee3\u6570\u8868\u8fbe\u5f0f\uff08\u5c3d\u91cf\u5148\u505a\u9009\u62e9\uff0c\u6295\u5f71\uff09</li> <li>Different algorithms for each operation \u7269\u7406\u5c42\u9762\uff1a\u6bcf\u4e2a\u7b97\u5b50\u9009\u62e9\u4e0d\u540c\u7684\u7b97\u6cd5</li> </ul> Example <p> </p> <p>Estimation of plan cost based on:</p> <ul> <li>Statistical information about relations. Examples: number of tuples, number of distinct values for an attribute</li> <li>Statistics estimation for intermediate results\uff08Cardinality Estimation\uff09 to compute cost of complex expressions \u4f30\u8ba1\u4e2d\u95f4\u7ed3\u679c\u7684\u5927\u5c0f \u73b0\u5728\u6709\u57fa\u4e8e\u6df1\u5ea6\u5b66\u4e60\u7684\u4f30\u8ba1\u65b9\u6cd5</li> <li>Cost formulae for algorithms, computed using statistics</li> </ul> <p>\u5173\u7cfb\u6570\u636e\u5e93\u91cc\u53ef\u4ee5\u7528\u67e5\u770b\u6267\u884c\u8ba1\u5212\u3002</p>"},{"location":"ZJU_CS/Database/db12/#generating_equivalent_expressions","title":"Generating Equivalent Expressions","text":"<p>Two relational algebra expressions are said to be equivalent if the two expressions generate the same set of tuples on every legal database instance \u5f62\u5f0f\u4e0a\u4e0d\u4e00\u6837\uff0c\u4f46\u662f\u7ed3\u679c\uff08\u8f93\u51fa\uff09\u662f\u4e00\u6837\u7684\uff0c\u4ea7\u751f\u4e86\u76f8\u540c\u7684\u96c6\u5408\u3002  </p>"},{"location":"ZJU_CS/Database/db12/#equivalence_rules","title":"Equivalence Rules","text":"<ul> <li> <p>selection      </p> <ol> <li>\u53ef\u4ee5\u628a\u7b97\u5b50\u62c6\u5206 \u5982\u679c\u67d0\u4e9b\u5c5e\u6027\u6709\u7d22\u5f15\uff0c\u90a3\u4e48\u53ef\u4ee5\u5148\u62c6\u5206\uff0c\u5728\u7d22\u5f15 select \u4e4b\u540e\u518d\u6267\u884c\u5176\u4ed6\u7b97\u5b50\uff0c\u5426\u5219\u4e0d\u5982\u4e0d\u62c6\u5206\u3002</li> <li>\u7b97\u5b50\u53ef\u4ea4\u6362 \u5148\u6267\u884c\u6709\u7d22\u5f15\u7684\u7b97\u5b50\u3002  </li> <li>\u6295\u5f71\u7684\u5c5e\u6027\u53ef\u4ee5\u53ea\u4fdd\u7559\u6700\u540e\u4e00\u6b21\u7684  </li> <li>\u9009\u62e9\u7b97\u5b50\u53ef\u4ee5\u548c\u5408\u5e76\u7ed3\u5408  </li> </ol> </li> <li> <p>join </p> <p>\u81ea\u7136\u8fde\u63a5\u662f\u7ed3\u5408\u7684\uff08\u5148\u8fde\u63a5\u4e2d\u95f4\u7ed3\u679c\u5c0f\u7684\uff09 </p> <p>\u5982\u679c\u9009\u62e9\u7b97\u5b50\u53ea\u548c\u4e00\u4e2a\u5173\u7cfb\u6709\u5173\uff0c\u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u5148\u6267\u884c\u9009\u62e9\u3002\uff08\u9009\u62e9\u7b97\u5b50\u8981\u65e9\u8fdb\u884c\uff0c\u63a8\u5230\u53f6\u5b50\u4e0a\uff09  </p> </li> <li> <p>projection      </p> <p>\u540c\u7406\u6295\u5f71\u4e5f\u8981\u65e9\u505a\u3002 \u5982\u679c\u8fde\u63a5\u8981\u7528\u5230\u6295\u5f71\u540e\u4e0d\u4fdd\u7559\u7684\u5c5e\u6027\uff0c\u6211\u4eec\u5728\u7b2c\u4e00\u6b21\u6295\u5f71\u65f6\u8981\u628a\u8fde\u63a5\u7528\u7684\u5c5e\u6027\u4e5f\u4fdd\u7559\u4e0b\u6765\u3002</p> </li> <li> <p>set operation      </p> <p>\u8fd9\u91cc\u7684\u51cf\u6cd5\uff0c\u51cf\u6570\u5173\u7cfb\u5c31\u4e0d\u7528\u505a\u9009\u62e9\u4e86\uff08\u51cf\u53bb\u591a\u7684\u603b\u662f\u6ca1\u95ee\u9898\u7684\uff09\u5bf9\u4ea4\u96c6\u4e5f\u9002\u7528</p> </li> <li> <p>other      </p> </li> </ul>"},{"location":"ZJU_CS/Database/db12/#enumeration_of_equivalent_expressions","title":"Enumeration of Equivalent Expressions","text":"<ul> <li>Repeat<ul> <li>apply all applicable equivalence rules on every subexpression of every equivalent expression found so far</li> <li>add newly generated expressions to the set of equivalent expressions </li> </ul> </li> <li>Until no new equivalent expressions are generated above</li> </ul> <p>\u53ef\u4ee5\u8fd9\u6837\u627e\u5230\u6240\u6709\u7684\u7b49\u4ef7\u8868\u8fbe\u5f0f\u3002</p> <p>\u4f46\u662f\u5b9e\u9645\u4e2d\u6211\u4eec\u57fa\u4e8e\u4e00\u4e9b\u7ecf\u9a8c\u89c4\u5219\u8fdb\u884c\u542f\u53d1\u5f0f\u7684\u4f18\u5316</p>"},{"location":"ZJU_CS/Database/db12/#statistics_for_cost_estimation","title":"Statistics for Cost Estimation","text":"<p>\u4ee3\u4ef7\u4f30\u7b97\u9700\u8981\u7edf\u8ba1\u4fe1\u606f</p> <ul> <li>\\(n_r\\): number of tuples in a relation r.</li> <li>\\(b_r\\): number of blocks containing tuples of r.</li> <li>\\(l_r\\): size of a tuple of r.</li> <li>\\(f_r\\): blocking factor of r \u2014 i.e., the number of tuples of r that fit into one block. \u4e00\u4e2a\u5757\u53ef\u4ee5\u653e\u591a\u5c11\u4e2a\u5143\u7ec4</li> <li>\\(V(A, r)\\): number of distinct values that appear in r for attribute A; same as the size of \\(\\Pi(r)\\).</li> <li>If tuples of r are stored together physically in a file, then: \\(b_r = \\lceil \\dfrac{n_r}{f_r}\\rceil\\)</li> <li>Histograms</li> </ul> attribute age of relation person <p> </p>"},{"location":"ZJU_CS/Database/db12/#selection_size_estimation","title":"Selection Size Estimation","text":"<p>\u4e2d\u95f4\u7ed3\u679c</p> <ul> <li>\\(\\sigma_{A=v}(r)\\) \\(n_r / V(A,r)\\) : number of records that will satisfy the selection.  \u8fd9\u6837\u7684\u4f30\u7b97\u57fa\u4e8e\u503c\u662f\u5e73\u5747\u5206\u5e03\u7684 \u5982\u679c\u8981\u627e\u7684\u662f\u4e00\u4e2a key, \u90a3\u4e48 size estimate=1</li> <li>\\(\\sigma_{A\\leq v}(r)\\) <ul> <li>Let \\(c\\) denote the estimated number of tuples satisfying the condition.   </li> <li>\\(c = 0\\) if \\(v &lt; \\min(A,r)\\) v \u6bd4\u5c5e\u6027 A \u7684\u6700\u5c0f\u503c\u8fd8\u8981\u5c0f</li> <li>\\(c = n_r\\cdot \\dfrac{v-\\min(A,r)}{\\max(A,r) - \\min A(A,r)}\\) </li> <li>In absence of statistical information c is assumed to be \\(n_r / 2\\) (\u6ca1\u6709\u6700\u5927\u3001\u6700\u5c0f\u7edf\u8ba1\u4fe1\u606f\u65f6).</li> </ul> </li> </ul> <p>\u6982\u7387\u8bba\u3002 \u6ce8\u610f\u8fd9\u4e9b\u516c\u5f0f\u7684\u8981\u6c42\u662f\u6761\u4ef6\u662f\u76f8\u4e92\u72ec\u7acb\u7684\u3002</p>"},{"location":"ZJU_CS/Database/db12/#joins","title":"Joins","text":"<p>The Cartesian product \\(r  \\times s\\) contains \\(n_r\\cdot n_s\\) tuples; each tuple occupies \\(s_r + s_s\\) bytes.</p> <ul> <li>\\(R \\cap S = \\emptyset\\) \u6ca1\u6709\u516c\u5171\u5c5e\u6027\uff0c\u7b49\u4ef7\u4e8e \\(r\\times s\\)</li> <li> <p>\\(R \\cap S\\) is a key for \\(R\\), then a tuple of \\(s\\) will join with at most one tuple from \\(r\\)</p> Example <p> </p> </li> <li> <p>If \\(R \\cap S\\) in S is a foreign key in S referencing R, then the number of tuples in \\(r\\bowtie s\\) = the number of tuples in s.</p> </li> <li> <p>If \\(R \\cap S = \\{A\\}\\) is not a key for R or S. \\(n_r * \\dfrac{n_s}{V(A,s)}, n_s * \\dfrac{n_r}{V(A,r)}\\).  \u4ee5\u7b2c\u4e8c\u4e2a\u4e3a\u4f8b\u5b50\uff0c\u7ad9\u5728 s \u7684\u89d2\u5ea6\uff0c\u6bcf\u4e00\u4e2a s \u53ef\u4ee5\u548c\u8fd9\u4e48\u591a\u4e2a\u5143\u7d20\u8fde\u63a5\u3002 \u901a\u5e38\u6211\u4eec\u53d6\u4e8c\u8005\u4e2d\u7684\u8f83\u5c0f\u503c\u3002  </p> Example <p> </p> </li> </ul>"},{"location":"ZJU_CS/Database/db12/#size_estimation_for_other_operations","title":"Size Estimation for Other Operations","text":"<p>\u5916\u90e8\u8fde\u63a5 r, s \u8ba4\u4e3a\u662f r s \u81ea\u7136\u8fde\u63a5\u7684\u7ed3\u679c\u52a0\u4e0a r \u7684\u5927\u5c0f\u3002</p>"},{"location":"ZJU_CS/Database/db12/#estimation_of_number_of_distinct_values","title":"Estimation of Number of Distinct Values","text":"<p>\u4f30\u7b97 V(A,r).  </p> <p>Selections \\(\\sigma_\\theta(r)\\), estimate \\(V(A,\\sigma_\\theta(r))\\)</p> <ul> <li>If \\(\\theta\\) forces A to take a specified value, \\(V(A,\\sigma_\\theta(r))=1\\) e.g., A = 3</li> <li>If \\(\\theta\\) forces A to take on one of a specified set of values: \\(V(A,\\sigma_\\theta(r))=\\) number of specified values e.g., (A = 1 V A = 3 V A = 4)</li> <li>If the selection condition \\(\\theta\\) is of the form A op v, \\(V(A,\\sigma_\\theta(r))=V(A,r)*s\\) \u5229\u7528\u9009\u62e9\u7387 s \u8ba1\u7b97</li> <li>In all the other cases, use approx1imate estimate: \\(V(A,\\sigma_\\theta(r))=\\min(V(A,r), \\n_{\\sigma_\\theta(r)})\\)</li> </ul> <p>joins \\(r\\bowtie s\\), estimate \\(V(A,r\\bowtie s)\\)</p> <ul> <li>If all attributes in A are from r, the estimated \\(V(A,r\\bowtie s)=\\min(V(A,r), n_{r\\bowtie s})\\)</li> <li>If A contains attributes A1 from r and A2 from s, then estimated \\(V(A,r\\bowtie s)=\\min(V(A1,r)*V(A2-A1,s), V(A1-A2,r)*V(A2,s), n_{r\\bowtie s})\\)</li> </ul>"},{"location":"ZJU_CS/Database/db12/#choice_of_evaluation_plans","title":"Choice of Evaluation Plans","text":"<p>Must consider the interaction of evaluation techniques when choosing evaluation plans</p> <p>choosing the cheapest algorithm for each operation independently may not yield best overall algorithm   e.g. merge-join may be costlier than hash-join, but may provide a sorted output which reduces the cost for an outer level aggregation. Mergejoin \u4ee3\u4ef7\u9ad8\uff0c\u4f46\u662f\u6709\u4e2a\u597d\u5904\u662f join \u540e\u662f\u6709\u6b21\u5e8f\u7684\uff0c\u5bf9\u4e0a\u5c42\u64cd\u4f5c\u6709\u5229\u3002</p> <p>\u5982\u679c\u8981\u627e\u6700\u4f18\u7684\u6267\u884c\u8ba1\u5212\uff0c\u53ef\u80fd\u9700\u8981\u5f88\u957f\u65f6\u95f4\u3002\u901a\u5e38\u6309\u7167\u7ecf\u9a8c\u89c4\u5219\u3002 \u6211\u4eec\u4e3b\u8981\u8003\u8651\u8fde\u63a5\u64cd\u4f5c\u7684\u4f18\u5316\u3002</p>"},{"location":"ZJU_CS/Database/db12/#cost-based_join-order_selection","title":"Cost-Based Join-Order Selection","text":"<p>Consider finding the best join-order for \\(r_1\\bowtie    r_2\\bowtie  \\ldots r_n\\). There are \\((2(n \u2013 1))!/(n \u2013 1)!\\) different join orders for above expression.</p> Example <p> </p> <p>Using dynamic programming, the least-cost join order for any subset of \\(\\{r_1, r_2, \\ldots r_n\\}\\) is computed only once and stored for future use. </p> <p>Join Order Optimization Algorithm</p> <p>\u5148\u5206\u89e3\u6210\u4e24\u4e2a\u5c0f\u7684\u96c6\u5408 \\(S_1, S-S_1\\). \u9012\u5f52\u5730\u7ec6\u5206\u3002 \u9012\u5f52\u5230\u6700\u5e95\u5c42\u5c31\u53d8\u4e3a\u4e86\u5bf9\u5355\u4e2a\u8868\u7684\u9009\u62e9\u65b9\u6cd5\u3002</p>"},{"location":"ZJU_CS/Database/db12/#left_deep_join_trees","title":"Left Deep Join Trees","text":"<p>In left-deep join trees, the right-hand-side input for each join is a relation, not the result of an intermediate join.</p> <p>\u5de6\u8fb9\u53ef\u4ee5\u662f\u4e2d\u95f4\u7ed3\u679c\uff0c\u53f3\u8fb9\u5fc5\u987b\u662f\u4e00\u4e2a\u5173\u7cfb\u3002</p>"},{"location":"ZJU_CS/Database/db12/#cost_of_optimization","title":"Cost of Optimization","text":"<ul> <li>With dynamic programming <ul> <li>time complexity of optimization with bushy trees is \\(O(3^n)\\).  </li> <li>Space complexity is \\(O(2^n)\\) </li> </ul> </li> <li>left-deep join tree <ul> <li>Time complexity of finding best join order is \\(O(n 2^n)\\)</li> <li>Space complexity remains at \\(O(2^n)\\) </li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/db12/#heuristic_optimization","title":"Heuristic Optimization","text":"<p>Cost-based optimization is expensive. \u53ef\u4ee5\u7528\u542f\u53d1\u5f0f\u4f18\u5316</p> <p>Heuristic optimization transforms the query-tree by using a set of rules that typically (but not in all cases) improve execution performance:</p> <ul> <li>Perform selection early (reduces the number of tuples)</li> <li>Perform projection early (reduces the number of attributes)</li> <li>Perform most restrictive selection and join operations (i.e. with smallest result size) before other similar operations.</li> <li>Perform left-deep join order</li> </ul>"},{"location":"ZJU_CS/Database/db12/#additional_optimization_techniques","title":"Additional Optimization Techniques","text":""},{"location":"ZJU_CS/Database/db12/#nested_subqueries","title":"Nested Subqueries","text":"<p>Nested query example: <pre><code>select name from instructor \nwhere exists \n    (select * from teaches\n    where instructor.ID = teaches.ID and teaches.year = 2022)\n</code></pre> \u627e\u51fa 2022 \u5f00\u8bfe\u7684\u8001\u5e08\u7684\u540d\u5b57\u3002</p> <p>\u4e24\u91cd\u5faa\u73af\uff0c\u4f46\u662f\u4f4e\u6548\u3002</p> <p>Parameters are variables from outer level query that are used in the  nested subquery; such variables are called correlation variables\uff08\u76f8\u5173\u53d8\u91cf\uff09 \u5373\u6765\u81ea\u5916\u5faa\u73af\u7684\u53d8\u91cf\u3002\u5982\u679c\u6ca1\u6709\u76f8\u5173\u53d8\u91cf\uff0c\u6211\u4eec\u53ef\u4ee5\u5148\u6267\u884c\u5185\u90e8\uff0c\u7136\u540e\u518d\u6267\u884c\u5916\u90e8\u3002</p> <p>\u628a\u521a\u521a\u90a3\u4e2a\u4f8b\u5b50\u6539\u4e3a\u4e00\u4e2a select \u8bed\u53e5\uff0c\u90a3\u4e48\u4e00\u4e2a\u8001\u5e08\u5982\u679c\u5f00\u4e86\u5f88\u591a\u95e8\u8bfe\u5c31\u4f1a\u51fa\u73b0\u5f88\u591a\u4e2a\u540d\u5b57\u3002\u4f46\u662f\u52a0\u4e0a <code>distinct</code> \u5173\u952e\u8bcd\u540e\u53c8\u65e0\u6cd5\u533a\u5206\u540c\u540d\u60c5\u51b5\u3002</p> <p>\u534a\u8fde\u63a5 \\(\u22c9\\)_\\theta s$\uff0c\u68c0\u9a8c r \u662f\u5426\u6ee1\u8db3\u67d0\u4e2a\u5173\u7cfb\u3002 If a tuple \\(r_i\\) appears n times in r, it appears n times in  the result of \\(r \\(\u22c9\\)_\\theta s\\) , if there is at least one tuple \\(s_i\\) in s matching with \\(r_i\\).</p> Example <p> </p> <p>The process of replacing a nested query by a query with a join/semijoin (possibly with a temporary relation) is called decorrelation(\u53bb\u9664\u76f8\u5173)</p> <p>Decorrelation of scalar aggregate subqueries can be done using groupby/aggregation in some cases</p> Example <p> </p>"},{"location":"ZJU_CS/Database/db12/#materialized_views","title":"Materialized Views","text":"<p>A materialized view is a view whose contents are computed and stored.  </p> <p>\u6709\u4e9b\u6570\u636e\u5e93\u91cc\u628a view \u5b9e\u4f8b\u5316\u4e86\uff0c\u771f\u6b63\u5b58\u50a8\u5728\u5185\u90e8\u7684\u4e34\u65f6\u8868\u3002</p> <pre><code>create view department_total_salary(dept_name, total_salary) \nas select dept_name, sum(salary) from instructor group by dept_name\n</code></pre> <p>Saves the effort of finding multiple tuples and adding up their amounts. \u4f46\u662f\u9700\u8981\u65f6\u523b\u4fdd\u6301\u8fd9\u4e2a\u89c6\u56fe\u548c\u539f\u8868\u4e00\u81f4\u3002</p> <p>use incremental view maintenance(\u589e\u91cf\u89c6\u56fe\u7ef4\u62a4) The changes (inserts and deletes) to a relation or expressions are referred to as its differential(\u5dee\u5206)</p> <ul> <li> <p>join: \\(V^{new}=V^{old}\\cup (i_r\\bowtie s), V^{new} = V^{old}-(d_r\\bowtie s)\\)</p> join <p> </p> </li> <li> <p>select: \\(V^{new}=V^{old}\\cup \\sigma_\\theta(i_r), V^{new} = V^{old}-\\sigma_\\theta(d_r)\\)</p> </li> <li> <p>projection: For each tuple in a projection \\(\\Pi_A(r)\\), we will keep a count of how many times it was derived.  </p> <ul> <li>On insert of a tuple to r, if the resultant tuple is already in \\(\\Pi_A(r)\\) we increment its count, else we add a new tuple with count = 1</li> <li>On delete of a tuple from r, we decrement the count of the corresponding tuple in \\(\\Pi_A(r)\\)  if the count becomes 0, we delete the tuple from \\(\\Pi_A(r)\\)</li> </ul> Projection <p> </p> </li> <li> <p>count \\(v= _Ag_{count(B)}\\)</p> <ul> <li>insert: For each tuple r in \\(i_r\\), if the corresponding group is already present in v, we increment its count, else we add a new tuple with count = 1</li> <li>delete: for each tuple t in \\(i_r\\).we look for the group t.A in v, and subtract 1 from the count for the group.  If the count becomes 0, we delete from v the tuple for the group t.A</li> </ul> </li> <li> <p>sum \\(v= _Ag_{sum(B)}\\)</p> </li> <li>min, max</li> </ul> <p>\u600e\u4e48\u5229\u7528\u8fd9\u4e9b view? </p> <ul> <li> <p>Rewriting queries to use materialized views:</p> Example <p> </p> </li> <li> <p>Replacing a use of a materialized view by the view definition</p> </li> </ul> <p>Materialized View Selection \u6709\u54ea\u4e9b\u67e5\u8be2\uff1f\u5404\u79cd\u67e5\u8be2\u7684\u6bd4\u4f8b\uff1f</p>"},{"location":"ZJU_CS/Database/db13/","title":"Transactions","text":"Abstract <ul> <li>Transaction Concept</li> <li>A Simple Transaction Model</li> <li>Concurrent Executions</li> <li>Serializability</li> <li>Recoverability</li> <li>Transaction Isolation Levels </li> <li>Transaction Definition in SQL</li> </ul>"},{"location":"ZJU_CS/Database/db13/#transaction_concept","title":"Transaction Concept","text":"<p>A transaction is a unit of program execution that accesses and  possibly updates various data items. \u4e00\u6bb5\u539f\u5b50\u6027\u7684\u64cd\u4f5c  </p> <p>e.g. transaction to transfer $50 from account A to account B <pre><code>update  account  set  balance=balance-50  where account_number=A;\nupdate  account  set  balance=balance+50  where account_number=B;\ncommit;\n</code></pre></p>"},{"location":"ZJU_CS/Database/db13/#acid_properties","title":"ACID Properties","text":"<ul> <li>Atomicity\uff08\u539f\u5b50\u6027\uff09 \u5168\u6709\u6216\u5168\u65e0 \u7531\u6570\u636e\u5e93\u6062\u590d\u529f\u80fd\u4fdd\u8bc1</li> <li>Consistency\uff08\u4e00\u81f4\u6027\uff09 \u4fdd\u8bc1\u6570\u636e\u5e93\u5185\u7684\u5185\u5bb9\u6b63\u786e\u6027\uff0c\u4e0e\u5b9e\u9645\u4e1a\u52a1\u76f8\u7b26\u3002\u5982\u8f6c\u8d26\u662f\u4e00\u4e2a\u4eba\u4f59\u989d\u51cf\u5c11\u4e00\u4e2a\u4eba\u589e\u52a0\u3002 consistency \u4e0e\u5f00\u53d1\u4eba\u5458\u6709\u5173\u7cfb\uff08\u4e8b\u52a1\u8bbe\u8ba1\u662f\u5426\u5408\u7406\uff09</li> <li>Isolation\uff08\u9694\u79bb\u6027\uff09 \u4e8b\u52a1\u5e76\u53d1\u6267\u884c\uff0c\u4f46\u662f\u76f8\u4e92\u9694\u79bb\uff0c\u597d\u50cf\u662f\u4e32\u884c\u6267\u884c\u4e00\u6837\u3002 \u7531\u6570\u636e\u5e93\u7684\u5e76\u53d1\u6267\u884c\u6765\u5b9e\u73b0</li> <li>Durability\uff08\u6301\u4e45\u6027\uff09 \u4e8b\u52a1\u63d0\u4ea4\u540e\u88ab\u7f13\u5b58\uff0c\u6389\u7535\u4e0d\u80fd\u5931\u53bb buffer \u91cc\u7684\u5185\u5bb9\u3002  </li> </ul>"},{"location":"ZJU_CS/Database/db13/#a_simple_transaction_model","title":"A Simple Transaction Model","text":"<p>\u8fd9\u4e2a\u6a21\u578b\u4e2d\uff0c\u628a\u4e8b\u52a1\u5bf9\u6570\u636e\u5e93\u7684\u4fee\u6539\u7b80\u5316\u4e3a\u8bfb\u5199\u4e24\u79cd\u64cd\u4f5c\u3002 Transactions access data using two operations:  </p> <ul> <li> <p>read(X), which transfers the data item X from the database to a variable, also called X\uff0c in  a work area  in  main  memory  belonging to the transaction that  executed the read  operation.  </p> </li> <li> <p>write(X), which transfers the value in the variable X  in the main memory work area of the transaction that executed the write operation to the datat item X in database.   </p> </li> </ul> <p>\u5728\u8fd9\u4e2a\u7b80\u5355\u7684\u6a21\u578b\u4e2d\uff0c\u6211\u4eec\u4e0d\u8003\u8651\u6570\u636e\u8bfb\u5230\u5de5\u4f5c\u533a\u57df\u540e\u53d1\u751f\u4e86\u4ec0\u4e48\u64cd\u4f5c\uff0c\u53ea\u8003\u8651\u8bfb\u5199\u3002</p> <p>Example of Fund Transfer</p> <p> </p> <ul> <li>Atomicity requirement  \u5982\u679c\u6267\u884c\u7ed3\u675f\u4e4b\u540e\u51fa\u73b0\u4e86\u95ee\u9898\uff0c\u6570\u636e\u5e93\u5e94\u8be5\u8981\u64a4\u9500\u4e4b\u524d\u7684\u64cd\u4f5c</li> <li>Durability requirement \u5982\u679c\u4e8b\u52a1\u7ed3\u675f\u4e86\uff0c\u6211\u4eec\u5c31\u628a\u66f4\u65b0\u540c\u6b65</li> <li>Consistency requirement  <ul> <li>Explicitly\uff08\u663e\u5f0f\uff09 specified integrity constraints e.g. primary keys , foreign keys \u6570\u636e\u5e93\u628a\u8fd9\u4e2a\u5b9a\u4e49\u653e\u5728\u5185\u90e8\uff0c\u4f1a\u81ea\u5df1\u7ef4\u62a4</li> <li>Implicit \uff08\u9690\u5f0f\uff09 integrity constraints e.g. sum of balances of all accounts minus sum of loan amounts must equal value of cash-in-hand</li> </ul> </li> <li>Isolation requirement \u5728 step 3 6 \u4e4b\u95f4\uff0c\u53e6\u4e00\u4e2a\u4e8b\u52a1\u53ef\u4ee5\u8bbf\u95ee\u8fd9\u4e2a\u88ab\u90e8\u5206\u66f4\u65b0\u7684\u6570\u636e\u5e93\uff0cA+B \u4f1a\u5c0f\u4e8e\u6b63\u786e\u7b54\u6848\u3002\u8fd9\u662f\u56e0\u4e3a\u7834\u574f\u4e86\u9694\u79bb\u6027\u3002</li> </ul>"},{"location":"ZJU_CS/Database/db13/#transaction_state","title":"Transaction State","text":"<ul> <li>Active \u2013 the initial state; the transaction stays in this state while it is executing</li> <li>Partially committed \u2013 after the final statement has been executed. \u8bed\u53e5\u6267\u884c\u5b8c\u4e86\uff0c\u51c6\u5907\u63d0\u4ea4\u3002\u80fd\u5426\u63d0\u4ea4\u53d6\u51b3\u4e8e\u5177\u4f53\u7684\u6267\u884c\u3002</li> <li>Failed -- after the discovery that normal execution can no longer proceed. \u4e0d\u80fd\u6b63\u5e38\u63d0\u4ea4\u3002\u6216\u8005\u662f\u6267\u884c\u8fc7\u7a0b\u4e2d\u53d1\u73b0\u95ee\u9898\u3002</li> <li>Aborted \u2013 after the transaction has been rolled back and the database restored to its state prior to the start of the transaction.  Two options after it has been aborted:<ul> <li>restart the transaction</li> <li>kill the transaction</li> </ul> </li> <li>Committed \u2013 after successful completion.</li> </ul>"},{"location":"ZJU_CS/Database/db13/#concurrent_executions","title":"Concurrent Executions","text":"<ul> <li>increased processor and disk utilization</li> <li>reduced average response time </li> </ul> <p>\u4e8b\u52a1\u662f\u5e76\u53d1\u6267\u884c\u7684\uff0c\u5982\u679c\u4e0d\u52a0\u4ee5\u63a7\u5236\u53ef\u80fd\u4f1a\u6709\u4ee5\u4e0b\u95ee\u9898 Anomalies in Concurrent Executions</p> <ul> <li> <p>Lost Update\uff08\u4e22\u5931\u4fee\u6539\uff09 </p> Lost Update Example <p> </p> <p>\u4e00\u4e2a\u4eba\u8ba2\u7968\u540e\uff0c\u53e6\u4e00\u4e2a\u4eba\u8bfb\u5230\u8fd9\u91cc\u7b2c\u4e00\u4e2a\u4eba\u8fd8\u6ca1\u6709\u4fee\u6539\u7684\u4f59\u91cf\u3002\u5bfc\u81f4\u4e22\u5931\u4e86\u4e00\u6b21\u4fee\u6539\u3002</p> </li> <li> <p>Dirty Read\uff08\u8bfb\u810f\u6570\u636e\uff09</p> Dirty Read <p> </p> <p>\u4e00\u4e2a\u4eba\u8ba2\u7968\u540e\uff0c\u53e6\u4e00\u4e2a\u4eba\u8bfb\u6570\u636e\u540e\uff0c\u4f46\u662f\u7b2c\u4e00\u4e2a\u4eba\u653e\u5f03\u4e86\uff0c\u4f46\u662f\u7b2c\u4e8c\u4e2a\u4eba\u4ecd\u7136\u662f\u7528\u7684\u810f\u6570\u636e\u3002</p> </li> <li> <p>Unrepeatable Read \uff08\u4e0d\u53ef\u91cd\u590d\u8bfb\uff09</p> Unrepeatable Read <p> </p> <p>Isolation \u8981\u6c42\u6211\u4eec\u8bfb\u5230\u7684\u6570\u636e\u5e94\u8be5\u662f\u4e00\u6837\u7684\u3002</p> </li> <li> <p>Phantom Problem\uff08\u5e7d\u7075\u95ee\u9898\uff09</p> Phantom Problem <p> </p> <p>unrepeatable \u662f\u9488\u5bf9\u5df2\u7ecf\u5b58\u5728\u7684\u6570\u636e\uff0c\u4f46\u662f\u6570\u636e\u7684\u503c\u4e0d\u540c. Phantom \u662f\u6307\u6570\u636e\u6570\u91cf\u4f1a\u53d8\u591a/\u51cf\u5c11\u3002</p> </li> </ul>"},{"location":"ZJU_CS/Database/db13/#schedules","title":"Schedules","text":"<p>Schedule \u2013 a sequences of instructions that specify the chronological order in which instructions of concurrent transactions are executed. \u4e8b\u52a1\u7684\u6267\u987a\u5e8f\uff0c\u53ef\u4ee5\u662f\u4ea4\u53c9\u6267\u884c\u3002</p> Schedule Example <ul> <li> <p>\u4e32\u884c\u8c03\u5ea6 \u4e32\u884c\u8c03\u5ea6\u4e00\u5b9a\u662f\u6ee1\u8db3\u9694\u79bb\u6027\u7684      </p> </li> <li> <p>\u975e\u4e32\u884c\u8c03\u5ea6\uff0c\u4f46\u7b49\u4ef7\u4e8e\u4e0a\u9762\u7684\u4e32\u884c\u8c03\u5ea6      </p> <p>\u8fd9\u91cc T2 \u7684 readA \u548c T1 \u7684 readB \u53ef\u4ee5\u8c03\u6362\u65f6\u95f4\u6b21\u5e8f\uff0c\u5c31\u5f97\u5230\u4e86\u521a\u521a\u7684\u4e32\u884c\u8c03\u5ea6\u3002 \u4e0b\u9762\u8fd9\u6837\u7684\u8c03\u5ea6\u5c31\u4e0d\u7b49\u4ef7\uff0c\u7834\u574f\u4e86\u9694\u79bb\u6027\u3002  </p> </li> </ul>"},{"location":"ZJU_CS/Database/db13/#serializability","title":"Serializability","text":"<p>A (possibly concurrent) schedule is serializable if it is equivalent to a serial schedule.   </p> <ul> <li>conflict serializability(\u51b2\u7a81\u53ef\u4e32\u884c\u5316)</li> <li>view serializability(\u89c6\u56fe\u53ef\u4e32\u884c\u5316)</li> </ul> <p>\u4e32\u884c\u8c03\u5ea6\u4e00\u5b9a\u662f\u53ef\u4e32\u884c\u5316\u7684\uff0c\u4ea4\u9519\u6267\u884c\u4e0d\u4e00\u5b9a\u3002</p>"},{"location":"ZJU_CS/Database/db13/#conflict_serializability","title":"Conflict Serializability","text":"<p>\u6ce8\u610f\u8fd9\u91cc\u9488\u5bf9\u7684\u662f\u540c\u4e00\u4e2a\u6570\u636e\u9879 Q. </p> <p>a conflict between \\(l_i\\) and \\(l_j\\) forces a (logical) temporal order between them.   </p> <p>If a schedule S can be transformed into a schedule S\u00b4  by a series of swaps of non-conflicting instructions, we say that S and S\u00b4 are conflict equivalent. \u4ea4\u6362\u4e0d\u51b2\u7a81\u7684\u6307\u4ee4\uff0c\u5f97\u5230\u7684\u662f\u51b2\u7a81\u7b49\u4ef7\u7684\u8c03\u5ea6\u3002 We say that a schedule S is conflict serializable if it is conflict equivalent to a serial schedule. \u51b2\u7a81\u7b49\u4ef7\u4e8e\u4e00\u4e2a\u4e32\u884c\u8c03\u5ea6\uff0c\u90a3\u4e48\u8fd9\u4e2a\u8c03\u5ea6\u662f\u53ef\u4e32\u884c\u7684\u3002</p>"},{"location":"ZJU_CS/Database/db13/#testing_for_serializability","title":"Testing for Serializability","text":"<p>Consider some schedule of a set of transactions \\(T_1, T_2, \\ldots, T_n\\) Precedence graph\uff08\u524d\u9a71\u56fe\uff09 \u2014 a directed graph where the vertices are the transactions (names).  </p> <p>\u5982\u679c T1 \u8981\u5728 T2 \u524d\u9762\uff08\u5373\u627e\u5230\u4e00\u6761 T1 \u7684\u6307\u4ee4\u8981\u6c42\u6bd4 T2 \u4e2d\u7684\u4e00\u6761\u6307\u4ee4\u5148\u6267\u884c\uff09\uff0c\u90a3\u6211\u4eec\u753b\u4e00\u6761\u4ece T1-&gt;T2 \u7684\u8fb9\u3002 \u5982\u679c\u627e\u5230\u73af\uff0c\u8bf4\u660e\u662f\u4e0d\u53ef\u4e32\u884c\u5316\u7684\u3002\u5426\u5219\u53ef\u4ee5\u5229\u7528\u62d3\u6251\u6392\u5e8f\u3002</p> <p>Example</p> <p> </p> <p>T1 \u7684 readY \u548c T2 \u7684 writeY \u51b2\u7a81\uff0c\u6240\u4ee5\u8981\u753b\u4e00\u6761\u8fb9\uff0c\u5982\u6b64\u3002 \u6700\u540e\u6709 10 \u79cd\u8c03\u5ea6\u65b9\u5f0f\u3002</p> <p>\u53ea\u7528\u4e8e\u7406\u8bba\u7814\u7a76\uff0c\u6570\u636e\u5e93\u5185\u4e0d\u4f1a\u8fd9\u6837\u5b9e\u73b0\u3002</p>"},{"location":"ZJU_CS/Database/db13/#view_serializability","title":"View Serializability","text":"<p>Example</p> <p> </p> <p>\u521d\u59cb\u503c\u7531\u540c\u4e00\u4e2a\u4e8b\u52a1\u8bfb\u5230\u3002\u4e2d\u95f4\u7ed3\u679c\u662f\u7531\u540c\u4e00\u4e2a\u4e8b\u52a1\u5f97\u5230\u518d\u7531\u53e6\u4e00\u4e2a\u4e8b\u52a1\u8bfb\u51fa\u3002\u6700\u7ec8\u5199\u56de\u6570\u636e\u5e93\u4e5f\u662f\u7531\u540c\u4e00\u4e2a\u4e8b\u52a1\u5199\u3002</p> <p>A schedule S is view serializable if it is view equivalent to a serial schedule. Every conflict serializable schedule is also view serializable.  Below is a schedule which is view-serializable but not conflict serializable.  \u51b2\u7a81\u53ef\u4e32\u884c\u5316\u7684\u90fd\u662f\u89c6\u56fe\u53ef\u4e32\u884c\u5316\u7684\uff0c\u53cd\u4e4b\u4e0d\u4e00\u5b9a\u3002</p> Example <p> </p> <p>\u7b49\u4ef7\u4e8e T27-28-29. (\u90fd\u662f 27 \u8bfb\u521d\u503c\uff0c\u4e2d\u95f4\u6ca1\u6709\u5176\u4ed6\u8bfb\uff0c\u6700\u540e\u662f 29 \u5199)</p>"},{"location":"ZJU_CS/Database/db13/#other_notions_of_serializability","title":"Other Notions of Serializability","text":"<p>\u6709\u7684\u8c03\u5ea6\u65e2\u4e0d\u662f\u51b2\u7a81\u53ef\u4e32\u884c\u5316\u53c8\u4e0d\u662f\u89c6\u56fe\u53ef\u4e32\u884c\u5316\uff0c\u4f46\u5b83\u662f\u53ef\u4e32\u884c\u5316\u7684\u3002</p> <p>Example</p> <p> </p> <p>\u7b49\u4ef7\u4e8e T1-T5. \u52a0\u51cf\u64cd\u4f5c\u662f\u53ef\u7ed3\u5408\u7684\uff0c\u8fd9\u91cc\u9700\u8981\u4e86\u89e3\u4e8b\u52a1\u91cc\u5177\u4f53\u662f\u4ec0\u4e48\u64cd\u4f5c\u3002\u4f46\u6211\u4eec\u7684\u7b80\u5355\u6a21\u578b\u5bf9\u6b64\u4e0d\u52a0\u4ee5\u533a\u5206\u3002</p>"},{"location":"ZJU_CS/Database/db13/#recoverable_schedules","title":"Recoverable Schedules","text":"<p>Recoverable schedule(\u53ef\u6062\u590d\u8c03\u5ea6) \u2014 if a transaction \\(T_j\\) reads a data item previously written by a transaction \\(T_i\\) , then the commit operation of \\(T_i\\)  appears before the commit operation of \\(T_j\\).</p> <p>Example</p> <p>The following schedule (Schedule 11) is not recoverable if T9 commits immediately after the read. \u53ef\u80fd\u4f1a\u8bfb\u810f\u6570\u636e  </p> <p>\u5982\u679c T8 \u540e\u7eed\u56de\u6eda, \u4f46 T9 \u5df2\u7ecf\u57fa\u4e8e\u810f\u6570\u636e\u505a\u4e86\u540e\u7eed\u64cd\u4f5c\uff0c\u800c\u4e14\u5df2\u7ecf\u63d0\u4ea4\u4e86\uff0c\u4e0d\u53ef\u6062\u590d\u3002  </p> <p>\u5982\u679c\u4e00\u4e2a\u4e8b\u52a1\u8bfb\u4e86\u53e6\u4e00\u4e2a\u4e8b\u52a1\u7684\u810f\u6570\u636e\uff0c\u63d0\u4ea4\u6b21\u5e8f\u9700\u8981\u6709\u7ea6\u675f\uff0c\u8981\u5728\u88ab\u8bfb\u4e8b\u52a1\u7684\u540e\u9762\u63d0\u4ea4\u3002</p>"},{"location":"ZJU_CS/Database/db13/#cascading_rollbacks","title":"Cascading Rollbacks","text":"<p>Cascading rollback \u2013 a single transaction failure leads to a series of transaction rollbacks.  Consider the following schedule where none of the transactions has yet committed (so the schedule is recoverable)</p> <p>Example</p> <p>If T10 fails, T11 and T12 must also be rolled back.  </p> <p>\u8981\u6709\u7ea7\u8054\u56de\u6eda\u7684\u6062\u590d\u3002 Can lead to the undoing of a significant amount of work. \u6211\u4eec\u66f4\u5e0c\u671b\u7528\u975e\u7ea7\u8054\u7684\u6062\u590d\uff0c\u5426\u5219\u5f00\u9500\u592a\u5927\u3002</p>"},{"location":"ZJU_CS/Database/db13/#transaction_isolation_levels","title":"Transaction Isolation Levels","text":"<p>A database must provide a mechanism that will ensure that all possible schedules are </p> <ul> <li>either conflict or view serializable, and  \u4fdd\u8bc1\u53ef\u4e32\u884c\u7684</li> <li>are recoverable and preferably cascadeless \u4fdd\u8bc1\u53ef\u6062\u590d\u7684\uff08\u6700\u597d\u662f\u975e\u7ea7\u8054\uff09</li> </ul> <p>\u6570\u636e\u5e93\u91cc\u63d0\u4f9b\u4e00\u79cd\u534f\u8bae\uff0c\u6bcf\u4e2a\u4e8b\u52a1\u8981\u9075\u4ece\u534f\u8bae\uff0c\u9075\u4ece\u534f\u8bae\u4e0b\u4ea7\u751f\u7684\u8c03\u5ea6\u4e00\u5b9a\u662f\u53ef\u4e32\u884c\u3001\u53ef\u6062\u590d\u7684\u3002 \u8fd9\u662f\u5b8c\u5168\u7684\u9694\u79bb\uff0c\u4ee3\u4ef7\u6bd4\u8f83\u9ad8\u3002</p> <p>In SQL <code>set transaction isolation level serializable</code> \u6211\u4eec\u53ef\u4ee5\u8bbe\u7f6e\u6570\u636e\u5e93\u7684\u9694\u79bb\u7ea7\u522b\u3002</p> <ul> <li>Serializable \u2014 default \u56db\u79cd\u95ee\u9898\u90fd\u8981\u907f\u514d\uff0c\u4ee3\u4ef7\u6700\u9ad8\u3002</li> <li>Repeatable read \u2014 only committed records to be read, repeated reads of same record must return same value.  However, a transaction may not be serializable \u2013 it may find some records inserted by a transaction but not find others. \u4e0d\u7ba1\u5e7d\u7075\u95ee\u9898\u3002</li> <li>Read committed \u2014 only committed records can be read, but successive reads of record may return different (but committed) values. \u4fdd\u8bc1\u4e0d\u8bfb\u810f\u6570\u636e\u3002</li> <li>Read uncommitted \u2014 even uncommitted records may be read. \u6700\u4f4e\u7684\u9694\u79bb\u7ea7\u522b\uff0c\u6709\u4e9b\u6570\u636e\u5e93\u53ea\u662f\u505a\u7edf\u8ba1\u4efb\u52a1\u3002</li> </ul> <p>Lower degrees of consistency useful for gathering approximate information about the database </p>"},{"location":"ZJU_CS/Database/db13/#concurrency_control_protocols","title":"Concurrency Control Protocols","text":"<ul> <li>Lock-Based Protocols<ul> <li>Lock on whole database vs lock on items \u8bfb\u4e4b\u524d\u8981\u8bbf\u95ee\u4e00\u4e2a\u5171\u4eab\u9501\uff0c\u5199\u4e4b\u524d\u8981\u8bbf\u95ee\u4e00\u4e2a\u6392\u4ed6\u9501\uff0c\u51b2\u7a81\u4e86\u5c31\u8981\u7b49\u5f85\u3002\u901a\u8fc7\u9501\u5c31\u89c4\u5b9a\u4e86\u4e00\u4e2a\u6267\u884c\u7684\u6b21\u5e8f\u3002</li> <li>How long to hold lock?</li> <li>Shared vs exclusive locks</li> </ul> </li> <li>Timestamp-Based  Protocols<ul> <li>Transaction timestamp assigned e.g. when a transaction begins  \u4e8b\u52a1\u6267\u884c\u65f6\u5206\u914d\u4e00\u4e2a\u65f6\u95f4\u6233\u3002\u6267\u884c\u6b21\u5e8f\u6309\u7167\u65f6\u95f4\u6233\u6392\u5e8f\u3002</li> <li>Data items store two timestamps<ul> <li>Read timestamp</li> <li>Write timestamp</li> </ul> </li> <li>Timestamps are used to detect out of order accesses</li> </ul> </li> <li>Validation-Based  Protocols<ul> <li>Optimistic concurrency control </li> <li>Low rate of conflicts among transactions</li> <li>Each transaction must go through 3 phases: Read phase -&gt; Validation phase -&gt; Write phase \u4e8b\u52a1\u63d0\u4ea4\u7684\u65f6\u5019\u5148\u53bb\u9a8c\u8bc1\u662f\u5426\u6709\u51b2\u7a81\uff0c\u5982\u679c\u6ca1\u6709\u51b2\u7a81\u5c31\u63d0\u4ea4\uff0c\u5982\u679c\u51b2\u7a81\u5c31\u8003\u8651\u653e\u5f03\u67d0\u4e2a\u3002</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/db14/","title":"Concurrency Control","text":"Abstract <ul> <li>Lock-Based Protocols\uff08\u57fa\u4e8e\u9501\u7684\u534f\u8bae\uff09</li> <li>Deadlock Handling \uff08\u6b7b\u9501\u5904\u7406\uff09</li> <li>Multiple Granularity \uff08\u591a\u7c92\u5ea6\uff09</li> <li>Insert and Delete Operations</li> <li>Multiversion Schemes \uff08\u591a\u7248\u672c\u673a\u5236\uff09</li> <li>Timestamp-Based Protocols \uff08\u57fa\u4e8e\u65f6\u95f4\u6233\u7684\u534f\u8bae\uff09</li> <li>Validation-Based Protocols \uff08\u57fa\u4e8e\u6709\u6548\u6027\u7684\u534f\u8bae\uff09</li> </ul>"},{"location":"ZJU_CS/Database/db14/#lock-based_protocols","title":"Lock-Based Protocols","text":"<p>A lock is a mechanism to control concurrent access to a data item</p> <ul> <li>exclusive(X) Data item can be both read as well as written. X-lock is requested using lock-X instruction.</li> <li>shared(X) Data item can only be read. S-lock is requested using lock-S instruction.</li> </ul> <p>\u8981\u5199\u4e00\u4e2a\u6570\u636e\uff0c\u5148\u7533\u8bf7\u83b7\u5f97 X \u9501\uff1b\u8981\u8bfb\u4e00\u4e2a\u6570\u636e\uff0c\u5148\u7533\u8bf7\u83b7\u5f97 S \u9501\u3002 \u8bbf\u95ee\u7ed3\u675f\u540e\u91ca\u653e\u8fd9\u4e2a\u9501\u3002</p> <p>\u8bbf\u95ee\u6570\u636e\u4e4b\u524d\u5fc5\u987b\u83b7\u5f97\u5bf9\u5e94\u7684\u9501\uff0c\u5426\u5219\u9700\u8981\u7b49\u5f85\u3002</p>"},{"location":"ZJU_CS/Database/db14/#the_two-phase_locking_protocol","title":"The Two-Phase Locking Protocol","text":"<p>\u4e8b\u52a1\u7684\u52a0\u9501\u548c\u51cf\u9501\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\u3002  </p> <ul> <li>Phase 1: Growing Phase (\u589e\u957f\u9636\u6bb5)<ul> <li>transaction may obtain locks </li> <li>transaction may not release locks</li> </ul> </li> <li>Phase 2: Shrinking Phase(\u7f29\u51cf\u9636\u6bb5)<ul> <li>transaction may release locks</li> <li>transaction may not obtain locks \u4e00\u4e2a\u4e8b\u52a1\u4e00\u65e6\u5f00\u59cb\u91ca\u653e\u9501\uff0c\u5c31\u4e0d\u80fd\u518d\u52a0\u9501\u4e86\u3002</li> </ul> </li> </ul> <p>\u4e8b\u52a1\u4e24\u4e2a\u9636\u6bb5\u7684\u5206\u754c\u7ebf(lock point), \u5373\u83b7\u5f97\u4e86\u6700\u540e\u4e00\u4e2a\u9501\uff08\u5b8c\u6210\u83b7\u5f97\u8fd9\u4e2a\u52a8\u4f5c\uff09\u7684\u65f6\u95f4\u70b9\u3002 \u8fd9\u6837\u6bcf\u4e2a\u4e8b\u52a1\u90fd\u6709\u4e00\u4e2a lock point, \u6309\u7167\u8fd9\u4e2a\u65f6\u95f4\u6392\u5e8f\u5373\u53ef\u5f97\u5230\u4e32\u884c\u5316\u7684\u6267\u884c\u987a\u5e8f\u3002</p> Example <p> </p> <p>Two-Phase Locking Protocol assures serializability. </p> <p>It can be proved that the transactions can be serialized in the order of their lock points. \u53ef\u4ee5\u6309 lock points \u4e32\u884c\u5316\uff0c\u4f46\u4e0d\u662f\u53ea\u80fd\u6309\u7167\u8fd9\u4e48\u4e32\u884c\u5316\u3002</p> <p>\u4e0a\u9762\u57fa\u672c\u7684\u4e24\u9636\u6bb5\u5c01\u9501\u534f\u8bae\u65e0\u6cd5\u4fdd\u8bc1\u4e8b\u52a1\u7684\u53ef\u6062\u590d\u6027\u3002</p> <p>Extensions to basic two-phase locking\uff08\u57fa\u672c\u4e24\u9636\u6bb5\u5c01\u9501\uff09 needed to ensure recoverability of freedom from cascading roll-back</p> <ul> <li>Strict two-phase locking\uff08\u4e25\u683c\u4e24\u9636\u6bb5\u5c01\u9501\uff09: a transaction must hold all its exclusive locks till it commits/aborts. Ensures recoverability and avoids cascading roll-backs. S \u9501\u53ef\u4ee5\u7528\u5b8c\u5c31\u653e\uff0c\u4f46 X \u9501\u5fc5\u987b\u5230\u63d0\u4ea4\u7684\u65f6\u5019\u624d\u80fd\u91ca\u653e\uff08\u8fd9\u6837\u522b\u4eba\u5c31\u4e0d\u80fd\u8bbf\u95ee\u4e86\uff0c\u65e0\u6cd5\u8bfb\u810f\u6570\u636e\uff09\u3002\u4ee3\u4ef7\u662f\u964d\u4f4e\u5e76\u53d1\u5ea6\u3002</li> <li>Rigorous two-phase locking\uff08\u5f3a\u4e24\u9636\u6bb5\u5c01\u9501\uff09: a transaction must hold all locks till commit/abort.  Transactions can be serialized in the order in which they commit.  </li> </ul> <p>Two-phase locking is not a necessary condition for serializability. </p> Example <p> </p> <p>\u8fd9\u91cc\u653e\u9501\u4e86\u4e4b\u540e\u8fd8\u83b7\u5f97\u9501\u4e86\uff0c\u8fdd\u80cc\u4e86\u4e24\u9636\u6bb5\u5c01\u9501\u534f\u8bae\u3002 \u6240\u4ee5\u4e0d\u9075\u4ece\u4e24\u9636\u6bb5\u5c01\u9501\u534f\u8bae\uff0c\u4e5f\u53ef\u4ee5\u83b7\u5f97\u51b2\u7a81\u53ef\u4e32\u884c\u7684\u8c03\u5ea6\u3002</p>"},{"location":"ZJU_CS/Database/db14/#2pl_-_proof","title":"2PL - Proof","text":"<ul> <li>Proof by Contradiction \u5982\u679c\u6709 Ti-&gt;Tj \u7684\u6709\u5411\u8fb9\uff0c\u90a3 Ti \u7684 lockpoint \u4e00\u5b9a\u5c0f\u4e8e Tj. Ti-&gt;Tj \u80af\u5b9a\u6709\u4e00\u4e2a\u51b2\u7a81\u7684\u8bbf\u95ee\uff08\u5bf9\u540c\u4e00\u4e2a\u6570\u636e\uff09\u90a3 Tj \u5728\u83b7\u5f97\u9501\u7684\u65f6\u5019 Ti \u5df2\u7ecf\u653e\u9501\u4e86\uff0c\u5f97\u8bc1\u3002</li> </ul> <ul> <li>Proof by Induction \u53ea\u9700\u8bc1\u660e: Lock point \u6700\u5c0f\u7684\u4e8b\u52a1\uff0c\u53ef\u4ee5\u65e0\u969c\u788d\u5730\u4ea4\u6362\u5230\u8c03\u5ea6\u6700\u524d\u3002 \u5047\u5982\u6709\u4e8b\u52a1\u62e6\u4f4f\u4ed6\u4e86\uff0c\u8bc1\u660e\u8fd9\u662f\u4e0d\u53ef\u80fd\u53d1\u751f\u7684\u3002\uff08\u4e0e lockpoint \u6700\u5c0f\u77db\u76fe\uff09</li> </ul>"},{"location":"ZJU_CS/Database/db14/#lock_conversions","title":"Lock Conversions","text":"<p>\u901a\u5e38\u662f\u5148\u8bfb\u540e\u4fee\u6539\u3002\u4f46\u6211\u4eec\u4e0d\u80fd\u5148\u5f97 S \u9501\u518d\u91ca\u653e\u540e\u5f97 X \u9501\uff08\u8fdd\u80cc\u4e86\u4e24\u9636\u6bb5\u534f\u8bae\uff09\uff0c\u4e5f\u4e0d\u80fd\u76f4\u63a5\u7528 X \u9501\uff08\u964d\u4f4e\u5e76\u53d1\u5ea6\uff09\u3002</p> <p>Two-phase locking with lock conversions:</p> <ul> <li>First Phase:        <ul> <li>can acquire a lock-S or lock-X on a data item</li> <li>can convert a lock-S to a lock-X (lock-upgrade)</li> </ul> </li> <li>Second Phase:<ul> <li>can release a lock-S or lock-X</li> <li>can convert a lock-X to a lock-S (lock-downgrade)</li> </ul> </li> </ul> <p>This protocol assures serializability.</p> <p>\u7533\u8bf7\u54ea\u4e2a\u9501\u662f\u7531\u6570\u636e\u5e93\u5185\u90e8\u7ba1\u7406\u51b3\u5b9a\uff0c\u4e0d\u662f\u7531\u7a0b\u5e8f\u5458\u663e\u793a\u8c03\u7528\u3002\uff08\u81ea\u52a8\u52a0\u9501\uff09</p> <p>\u5982\u679c\u5df2\u7ecf\u6709\u9501\u4e86\uff0c\u76f4\u63a5\u8bfb\uff1b\u5426\u5219\u7533\u8bf7\u8bfb\u9501\u3002</p>"},{"location":"ZJU_CS/Database/db14/#implementation_of_locking","title":"Implementation of Locking","text":"<p>A lock manager can be implemented as a separate process to which transactions send lock and unlock requests.  </p>"},{"location":"ZJU_CS/Database/db14/#lock_table","title":"Lock Table","text":"<p>Lock table records granted locks and waiting requests.  </p> <p>\u6bcf\u4e2a\u8bb0\u5f55\u7684 id \u53ef\u4ee5\u653e\u8fdb\u54c8\u5e0c\u8868\u3002 \u5982\u8fd9\u91cc\u8bb0\u5f55 123, T1\u3001T8 \u83b7\u5f97\u4e86 S \u9501\uff0c\u4f46 T2 \u5728\u7b49\u5f85\u83b7\u5f97 X \u9501\u3002  </p> <p>T1: lock-X(D) \u901a\u8fc7 D \u7684 id \u627e\u5230\u54c8\u5e0c\u8868\u4e0a\u7684\u9879\uff0c\u5728\u5bf9\u5e94\u9879\u4e0a\u589e\u52a0\u3002\u6839\u636e\u662f\u5426\u76f8\u5bb9\u51b3\u5b9a\u662f\u83b7\u5f97\u9501\u8fd8\u662f\u7b49\u5f85\u3002 unlock \u7c7b\u4f3c\uff0c\u5148\u627e\u5230\u5bf9\u5e94\u7684\u6570\u636e\uff0c\u62ff\u6389\u5bf9\u5e94\u7684\u9879\u3002\u540c\u65f6\u770b\u540e\u7eed\u7684\u9879\u662f\u5426\u53ef\u4ee5\u83b7\u5f97\u9501\u3002</p> <p>\u5982\u679c\u4e00\u4e2a\u4e8b\u52a1 commit, \u9700\u8981\u653e\u6389\u6240\u6709\u7684\u9501\uff0c\u6211\u4eec\u9700\u8981\u53bb\u627e\u3002\u56e0\u6b64\u6211\u4eec\u8fd8\u9700\u8981\u4e00\u4e2a\u4e8b\u52a1\u7684\u8868\uff0c\u6807\u660e\u6bcf\u4e2a\u4e8b\u52a1\u6240\u7528\u7684\u9501\u3002</p>"},{"location":"ZJU_CS/Database/db14/#deadlock_handling","title":"Deadlock Handling","text":"<p>System is deadlocked if there is a set of transactions such that every transaction in the set is waiting for another transaction in the set.</p> <p>Two-phase locking does not ensure freedom from deadlocks.</p> <p>Deadlock prevention protocols ensure that the system will never enter into a deadlock state. Some prevention strategies:</p> <ul> <li>Require that each transaction locks all its data items before it begins execution (predeclaration). \u6267\u884c\u524d\u4e00\u6b21\u6027\u83b7\u5f97\u6240\u6709\u9501\u3002</li> <li>Impose partial ordering of all data items and require that a transaction can lock data items only in the order specified by the partial order (graph-based protocol). \u5bf9\u6570\u636e\u8bbf\u95ee\u89c4\u5b9a\u4e00\u79cd\u6b21\u5e8f\u3002\u6bd4\u5982\u89c4\u5b9a\u5fc5\u987b\u5148\u62ff\u5496\u5561\u518d\u62ff\u5496\u5561\u4f34\u4fa3\u3002 e.g. T1: A-50, B+50. T2: B-10, A+10. \u6211\u4eec\u53ef\u4ee5\u628a\u7b2c\u4e8c\u4e2a\u4e8b\u52a1\u8c03\u6362\u987a\u5e8f\uff0c\u53d8\u4e3a A+10, B-10. \u8fd9\u6837\u6309\u7167 partial order \u80fd\u964d\u4f4e\u6b7b\u9501\u6982\u7387\u3002</li> <li>Timeout-Based Schemes:  <ul> <li>a transaction waits for a lock only for a specified amount of time. After that, the wait times out and the transaction is rolled back.  \u7b49\u5f85\u4e00\u4f1a\uff0c\u5982\u679c\u8fd8\u662f\u7b49\u4e0d\u5230\u5c31\u653e\u5f03\u3002</li> <li>thus deadlocks are not possible.  </li> <li>simple to implement; but starvation is possible. Also difficult to determine good value of the timeout interval. \u65f6\u957f\u4e0d\u597d\u89c4\u5b9a\u3002\u4f46\u53ef\u80fd\u6709\u4e8b\u52a1\u8001\u662f\u7533\u8bf7\u4e0d\u5230\u81ea\u5df1\u7684\u9501\u3002</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/db14/#deadlock_detection","title":"Deadlock Detection","text":"<p>\u5b9a\u671f\u68c0\u67e5\u6570\u636e\u5e93\u5185\u662f\u5426\u6709\u6b7b\u9501\uff0c\u5982\u679c\u6709\u5c31\u9009\u62e9\u4e00\u4e2a\u4e8b\u52a1\u5c06\u5176\u56de\u6eda\u3002  </p> <p>wait-for graph</p> <p>\u8fd9\u91cc\u7684\u7bad\u5934\u8868\u793a\u5728\u7b49\u5f85\u9501\u3002\u5982 T17-&gt;T18 \u8868\u793a T17 \u5728\u7b49\u5f85 T18 \u7684\u9501\u3002 \u5982\u679c\u5f62\u6210\u4e86\u73af\uff0c\u5c31\u8bf4\u660e\u51fa\u73b0\u4e86\u6b7b\u9501\u3002</p> <p>\u901a\u8fc7\u521a\u521a\u7684 Lock Table, \u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u7b49\u5f85\u5173\u7cfb\u3002\uff08\u540e\u9762\u7684 waited \u7b49\u5f85\u524d\u9762\u7684 granted\uff09</p> <p>When deadlock is  detected :</p> <ul> <li> <p>Some transaction will have to rolled back (made a victim) to break deadlock.  Select that transaction as victim that will incur minimum cost.  </p> </li> <li> <p>Rollback -- determine how far to roll back transaction</p> <ul> <li>Total rollback: Abort the transaction and then restart it.</li> <li>More effective to roll back transaction only as far as necessary to break deadlock. Starvation happens if same transaction is always chosen as victim. Include the number of rollbacks in the cost factor to avoid starvation</li> </ul> </li> </ul> Example <p> </p> <p>T1 \u7b49 T2, T2 \u7b49 T6, T6 \u7b49 T1.(\u6ce8\u610f\u8fd9\u91cc T5 \u662f\u7b49\u5f85 T6 \u800c\u4e0d\u662f T2)</p>"},{"location":"ZJU_CS/Database/db14/#graph-based_protocols","title":"Graph-Based Protocols","text":"<p>\u5047\u8bbe\u6211\u4eec\u77e5\u9053\u6570\u636e\u662f\u6309\u504f\u5e8f\u8bbf\u95ee\u7684\uff0c\u53ef\u4ee5\u6709\u66f4\u9ad8\u7ea7\u7684\u534f\u8bae\u3002 \u6570\u636e\u6309\u7167\u67d0\u79cd\u504f\u5e8f\u5173\u7cfb\u8bbf\u95ee\u3002</p> <p>The tree-protocol is a simple kind of graph protocol. </p> <ul> <li>Only exclusive locks are allowed. \u53ea\u6709\u8fd9\u79cd\u9501\u3002</li> <li>The first lock by Ti may be on any data item. Subsequently, a data Q can be locked by Ti only if the parent of Q is currently locked by Ti. \u7b2c\u4e00\u4e2a\u9501\u53ef\u4ee5\u653e\u4efb\u610f\u5730\u65b9\uff0c\u540e\u9762\u7684\u9501\u53ea\u80fd\u5728\u7236\u8282\u70b9\u9501\u4f4f\u65f6\u624d\u80fd\u5f80\u4e0b\u9501\u3002</li> <li>Data items may be unlocked at any time.  </li> <li>A data item that has been locked and unlocked by Ti  cannot subsequently be relocked by Ti  \u653e\u4e86\u4e4b\u540e\u4e0d\u80fd\u518d\u52a0\u9501\u4e86\u3002  </li> </ul> Example <p> </p> <p>\u6bd4\u5982\u8fd9\u91cc\u6211\u4eec\u5148\u9501 D, \u968f\u540e\u9501 G, \u653e\u6389, \u9501 H, \u8fd9\u65f6 D \u5df2\u7ecf\u6ca1\u7528\u4e86\u53ef\u4ee5\u653e\u6389\u3002\u968f\u540e\u6211\u4eec\u9501 J, H \u4e5f\u5c31\u6ca1\u7528\u4e86\u4e5f\u53ef\u4ee5\u653e\u6389\u3002\u6700\u540e\u653e\u6389  J. </p> <p>The tree protocol ensures conflict serializability as well as freedom from deadlock. </p> <ul> <li>Advantages<ul> <li>Unlocking may occur earlier in the tree-locking protocol than in the two-phase locking protocol. shorter waiting times, and increase in concurrency \u9501\u53ef\u4ee5\u66f4\u65e9\u91ca\u653e\uff0c\u4e0d\u7528\u7b49\u5f85\u7b2c\u4e8c\u9636\u6bb5\u3002\u7528\u5b8c\u5c31\u53ef\u4ee5\u653e\uff0c\u63d0\u9ad8\u4e86\u5e76\u53d1\u5ea6\u3002</li> <li>protocol is deadlock-free no rollbacks are required</li> </ul> </li> <li>Disadvantages<ul> <li>Protocol does not guarantee recoverability or cascade freedom Need to introduce commit dependencies to ensure recoverability \u65e9\u653e\u9501\uff0c\u610f\u5473\u7740\u53ef\u80fd\u4f1a\u8bfb\u810f\u6570\u636e\uff0c\u4e0d\u53ef\u6062\u590d\u3002\u8fd9\u5c31\u5bf9 commit \u987a\u5e8f\u6709\u8981\u6c42\u3002</li> <li>Transactions may have to lock more data items than needed.<ul> <li>increased locking overhead, and additional waiting time \u6bd4\u5982\u521a\u521a\u7684\u56fe\u4e2d\uff0c\u6211\u4eec\u8bbf\u95ee G, J, \u9700\u8981\u4ece D \u5f00\u59cb\u8bbf\u95ee\u3002\u4f1a\u9501\u4e0a\u66f4\u591a\u6570\u636e\u3002  </li> <li>potential decrease in concurrency</li> </ul> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/db14/#multiple_granularity","title":"Multiple Granularity","text":"<p>\u53ef\u4ee5\u9501\u5728\u8bb0\u5f55\u4e0a(\u5982 <code>update table set ...;</code>)\uff0c\u4e5f\u53ef\u4ee5\u9501\u5728\u6574\u4e2a\u8868\u4e0a(\u5982 <code>select * from table;</code>)\u3002  </p> <p>Granularity of locking (level in tree where locking is done):</p> <ul> <li>fine granularity\uff08\u7ec6\u7c92\u5ea6\uff09 (lower in tree): high concurrency, high locking overhead</li> <li>coarse granularity\uff08\u7c97\u7c92\u5ea6\uff09 (higher in tree): low locking overhead, low concurrency</li> </ul> Example of Granularity Hierarchy <p> </p> <p>The levels, starting from the coarsest (top) level are</p> <ul> <li>database</li> <li>area </li> <li>File(table)</li> <li>record   </li> </ul>"},{"location":"ZJU_CS/Database/db14/#intention_lock_modes","title":"Intention Lock Modes","text":"<p>\u8bb0\u5f55\u548c\u8868\u4e0a\u90fd\u53ef\u4ee5\u52a0 S/X \u9501\u3002\u4f46\u662f\u5f53\u4e8b\u52a1\u6d89\u53ca\u5230\u591a\u4e2a\u7c92\u5ea6\uff0c\u5982\u4f55\u5224\u65ad\u662f\u5426\u51b2\u7a81\uff0c\u5982\u4e00\u4e2a\u8868\u7684 S \u9501\u548c\u4e00\u4e2a\u8bb0\u5f55\u7684 X \u9501\u662f\u51b2\u7a81\u7684\u3002 \u6211\u4eec\u5f15\u5165\u4e86\u5176\u4ed6\u9501\uff0c\u610f\u5411\u9501(IS, IX, SIX)</p> <ul> <li>\u5982\u679c\u4e00\u4e2a\u4e8b\u52a1\u8981\u7ed9\u4e00\u4e2a\u8bb0\u5f55\u52a0 S \u9501\uff0c\u90a3\u4e5f\u8981\u5728\u8868\u4e0a\u52a0 IS \u9501\u3002\uff08\u610f\u5411\u5171\u4eab\u9501\uff09</li> <li>\u5982\u679c\u4e00\u4e2a\u4e8b\u52a1\u8981\u7ed9\u4e00\u4e2a\u8bb0\u5f55\u52a0 X \u9501\uff0c\u90a3\u4e5f\u8981\u5728\u8868\u4e0a\u52a0 IX \u9501\u3002\uff08\u610f\u5411\u6392\u4ed6\u9501\uff09</li> <li>SIX \u9501\u662f S \u548c IX \u9501\u7684\u7ed3\u5408\u3002\u8981\u8bfb\u6574\u4e2a\u8868\uff0c\u4f46\u53ef\u80fd\u5bf9\u5176\u4e2d\u67d0\u4e9b\u8bb0\u5f55\u8fdb\u884c\u4fee\u6539\u3002\uff08\u5171\u4eab\u610f\u5411\u6392\u4ed6\uff09  </li> </ul> <p>\u8fd9\u6837\u5f53\u6211\u4eec\u60f3\u5411\u4e00\u4e2a\u8868\u4e0a S \u9501\u65f6\uff0c\u53d1\u73b0\u8868\u4e0a\u6709 IX \u9501\uff0c\u8fd9\u6837\u6211\u4eec\u5f88\u5feb\u5c31\u53d1\u73b0\u4e86\u51b2\u7a81\uff0c\u9700\u8981\u7b49\u5f85\u3002 IS \u548c IX \u662f\u4e0d\u51b2\u7a81\u7684\u3002\u5728\u8868\u4e0a\u662f\u4e0d\u51b2\u7a81\u7684\uff0c\u53ef\u80fd\u5728\u8bb0\u5f55\u4e0a\u51b2\u7a81\uff08\u5373\u5bf9\u4e00\u4e2a\u8bb0\u5f55\u53c8\u8bfb\u53c8\u5199\uff0c\u51b2\u7a81\u53d1\u751f\u5728\u8bb0\u5f55\u5c42\u9762\u800c\u975e\u8868\uff09\u3002</p> <ul> <li>intention-shared (IS): indicates explicit locking at a lower level of the tree but only with shared locks. \u5728\u4e0b\u9762\u4f1a\u52a0 S \u9501\u3002</li> <li>intention-exclusive (IX): indicates explicit locking at a lower level with exclusive or shared locks \u5728\u4e0b\u9762\u4f1a\u52a0 X \u9501\u3002</li> <li>shared and intention-exclusive (SIX): the subtree rooted by that node is locked explicitly in shared mode and explicit locking is being done at a lower level with exclusive-mode locks.</li> </ul> <p>\u8981\u7b26\u5408\u76f8\u5bb9\u77e9\u9635\u3002\u4ece\u6700\u7c97\u7684\u7c92\u5ea6\u5f00\u59cb\u8bbf\u95ee\u3002\u8981\u52a0\u9501\u7684\u65f6\u5019\u6ce8\u610f\uff0c\u5bf9\u7236\u4eb2\u7684\u9501\u6709\u8981\u6c42\u3002</p> Example <p> </p> <p>\u52a0\u9501\u662f\u4ece\u4e0a\u5f80\u4e0b\uff0c\u653e\u9501\u662f\u4ece\u4e0b\u5f80\u4e0a\u3002 \u5148\u5bf9 DB \u52a0 IX, \u5bf9 A1 \u52a0 IX, \u5bf9 Fa \u52a0 SIX, \u5bf9\u67d0\u4e9b\u8bb0\u5f55\u52a0 X. \u5176\u4ed6\u8bb0\u5f55\u5c31\u4e0d\u7528\u518d\u52a0 S \u9501\u4e86(\u56e0\u4e3a\u8868\u662f SIX).  </p>"},{"location":"ZJU_CS/Database/db14/#insert_and_delete_operations","title":"Insert and Delete Operations","text":"<p>\u6570\u636e\u5e93\u91cc\u9664\u4e86 R/W \u8fd8\u6709\u63d2\u5165\u3001\u5220\u9664\u7b49\u64cd\u4f5c\u3002 \u9700\u8981\u5b9a\u4e49 R/W \u548c\u63d2\u5165/\u5220\u9664\u662f\u5426\u51b2\u7a81\u3002</p> <p>If two-phase locking is used :</p> <ul> <li>A delete operation may be performed only if the transaction deleting the tuple has an exclusive lock on the tuple to be deleted. \u5220\u9664\u524d\u9700\u8981\u52a0 X \u9501\u3002</li> <li>A transaction that inserts a new tuple into the database is given an X-mode lock on the tuple \u63d2\u5165\u4e4b\u524d\u662f\u6ca1\u6709\u8fd9\u4e2a\u6570\u636e\u7684\uff0c\u65e0\u6cd5\u5148\u52a0\u9501\u3002\u5e94\u8be5\u63d2\u5165\u4e4b\u540e\u9a6c\u4e0a\u52a0\u4e0a X \u9501\u3002</li> </ul> <p>Insertions and deletions can lead to the phantom phenomenon. \u56e0\u6b64\u53ea\u662f\u52a0\u9501\u4e0d\u80fd\u4fdd\u8bc1\u4e32\u884c\u5316\u3002  </p>"},{"location":"ZJU_CS/Database/db14/#index_locking_protocol","title":"Index Locking Protocol","text":"<p>\u5176\u5b9e\u63d2\u5165/\u5220\u9664\u64cd\u4f5c\u9690\u542b\u5730\u4fee\u6539\u4e86\u4fe1\u606f\uff0c\u53ea\u662f\u6ca1\u6709\u88ab\u8868\u793a\u51fa\u6765\u3002\u6211\u4eec\u53ef\u4ee5\u8fd9\u4e2a\u4fe1\u606f\u663e\u793a\u5316\uff0c\u52a0\u9501\u3002 \u5982\u679c\u8868\u4e0a\u6709\u7d22\u5f15\uff0c\u6211\u4eec\u5728\u626b\u63cf\u7d22\u5f15\u7684\u65f6\u5019\u4f1a\u5728\u53f6\u5b50\u4fee\u6539\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u8fdb\u884c\u68c0\u6d4b\u3002</p> Index Locking on a B+ -Tree <p> </p> <p>\u5148\u5728\u53f6\u5b50\u9875\u52a0\u9501\uff0c\u518d\u5728\u8bb0\u5f55\u4e0a\u52a0\u9501\u3002 \u5982\u679c\u6211\u4eec\u8981\u63d2\u5165\uff0c\u6bd4\u5982 18. \u8fd9\u65f6\u63d2\u5165\u5230\u4e86 10 \u8fd9\u9875\uff0c\u53d1\u73b0\u8fd9\u9875\u88ab\u9501\u4f4f\u4e86\uff0c\u65e0\u6cd5\u63d2\u5165\uff0c\u8fd9\u6837\u5c31\u786e\u4fdd\u4e86\u8fd9\u4e2a\u8303\u56f4\u5185\u65e0\u6cd5\u88ab\u63d2\u5165\uff0c\u4e0d\u4f1a\u6709\u5e7d\u7075\u95ee\u9898\u3002  </p> <p>\u4e5f\u53ef\u4ee5\u4f7f\u7528\u8c13\u8bcd\u9501\u3002\u628a\u8fd9\u4e2a\u4f4d\u7f6e\u9501\u4e0a\uff08\u6bd4\u5982\u521a\u521a 11 \u5230 50 \u8fd9\u4e2a\u533a\u95f4\uff09\uff0c\u540e\u7eed\u5982\u679c\u8981\u63d2\u5165 18 \u843d\u5165\u8fd9\u4e2a\u533a\u95f4\uff0c\u6211\u4eec\u5c31\u80fd\u68c0\u67e5\u51fa\u6765\u3002\u4f46\u8fd9\u6837\u5b9e\u73b0\u662f\u6bd4\u8f83\u590d\u6742\u7684\u3002</p>"},{"location":"ZJU_CS/Database/db14/#next-key_locking_to_prevent_phantoms","title":"Next-Key Locking To Prevent Phantoms","text":"<p>\u521a\u521a\u7684\u4f8b\u5b50\u4e2d, 10 \u4e0d\u5728\u8303\u56f4\u5185\uff0c\u4f46\u6211\u4eec\u628a\u8fd9\u9875\u90fd\u9501\u4f4f\u4e86\uff0c\u4ecd\u7136\u63d2\u4e0d\u8fdb\u53bb\uff0c\u5f71\u54cd\u4e86\u5e76\u53d1\u5ea6\u3002 </p> <p>Next-key locking protocol: provides higher concurrency</p> <ul> <li>Lock all values that satisfy index lookup (match lookup value, or fall in lookup range)</li> <li>Also lock next key value in index even for inserts/deletes</li> <li>Lock mode: S for lookups, X for insert/delete/update</li> </ul> <p>Next-Key Locking</p> <p> </p> <p>\u67e5\u8be2 7 \u5230 16, \u6211\u4eec\u628a\u7d22\u5f15\u9879\u9501\u8d77\u6765\uff0c\u628a\u4e0b\u4e00\u4e2a\u7d22\u5f15\u503c 18 \u4e5f\u9501\u8d77\u6765\u3002\u63d2\u5165\u7684\u65f6\u5019\u8981\u7533\u8bf7\u8fd9\u4e2a\u9501\u548c\u6bd4\u63d2\u5165\u503c\u5927\u7684\u4e0b\u4e00\u4e2a\u503c\u7684\u9501\uff0c\u8fd9\u91cc\u63d2\u5165 15 \u65f6\u5c31\u8981\u7533\u8bf7 15 \u548c 18 \u7684\u9501\uff0c\u51b2\u7a81\u65e0\u6cd5\u63d2\u5165\u3002\u63d2\u5165 7 \u540c\u7406\u3002</p>"},{"location":"ZJU_CS/Database/db15/","title":"Recovery System","text":""},{"location":"ZJU_CS/Database/db15/#failure_classification","title":"Failure Classification","text":"<ul> <li>Database application \u903b\u8f91\u9519\u8bef\uff1a\u6bd4\u5982\u4e0d\u6ee1\u8db3\u6570\u636e\u5e93\u7ea6\u675f\u6761\u4ef6\uff08\u4e3b\u952e\uff09 \u7cfb\u7edf\u9519\u8bef\uff1a\u6b7b\u9501\u3002 \u5e38\u7528\u65b9\u6cd5\u662f\u64a4\u9500 undo, \u628a\u8fd9\u4e2a\u4e8b\u4ef6\u62b9\u6389\u3002\uff08\u57fa\u4e8e\u65e5\u5fd7\uff0c\u5728\u4ea7\u751f\u4fee\u6539\u4e4b\u524d\u5148\u8bb0\u65e5\u5fd7\uff0c\u6545\u969c\u540e\u53ef\u4ee5\u6839\u636e\u65e5\u5fd7\u8fdb\u884c\u64a4\u9500\uff09 \u8bb0\u65e5\u5fd7\u6bd4\u8f83\u5feb\uff08\u987a\u5e8f\u8bbf\u95ee\uff09</li> <li>DBMS \u6389\u7535\u3001\u786c\u4ef6\u6545\u969c\u3001\u8f6f\u4ef6\u6545\u969c system crash \u662f\u5168\u5c40\u6027\u7684\uff0c\u6240\u6709\u8fd0\u884c\u7684\u7a0b\u5e8f\u90fd\u4f1a\u53d7\u5230\u5f71\u54cd\u3002\u5206\u4e3a\u4e24\u7c7b\uff1a\u4e00\u7c7b\u662f\u4e8b\u52a1\u5df2\u7ecf\u63d0\u4ea4\uff08\u4f46\u662f\u6570\u636e\u8fd8\u5728\u7f13\u51b2\u533a\uff09\uff0c\u53e6\u4e00\u7c7b\u662f\u6b63\u5728\u6267\u884c\u7684\u4e8b\u52a1\uff08\u8fd8\u6ca1\u6709\u63d0\u4ea4\uff09\u3002 \u5df2\u7ecf\u63d0\u4ea4\u7684\u4e8b\u52a1\u8981 redo(\u6570\u636e\u53ef\u80fd\u6ca1\u5199\u56de\u53bb), \u6ca1\u6709\u5b8c\u6210\u7684\u4e8b\u52a1\u8981 undo.  \u5148\u8bb0\u65e5\u5fd7\uff0c\u73b0\u5728\u7684\u6570\u636e\u5e93\u91c7\u7528 repeating history \u7684\u65b9\u6cd5\u3002</li> <li>Database \u4ecb\u8d28\u6545\u969c  \u8981\u9632\u6b62\u4ecb\u8d28\u6545\u969c\uff0c\u9700\u8981\u505a\u5907\u4efd\uff08\u62f7\u8d1d\u6216\u8005\u8fdc\u7a0b\uff09  </li> </ul>"},{"location":"ZJU_CS/Database/db15/#storage_structure","title":"Storage Structure","text":"<p>\u65e5\u5fd7\u53ef\u80fd\u4e5f\u4f1a\u51fa\u6545\u969c\uff1f\u6211\u4eec\u5047\u8bbe\u65e5\u5fd7\u5b58\u50a8\u5728 Stable storage \u91cc\u3002</p> <ul> <li>Volatile storage  </li> <li>Nonvolatile storage survives system crashes</li> <li>Stable storage:<ul> <li>a mythical(\u865a\u62df\u7684) form of storage that survives all failures</li> <li>approximated by maintaining multiple copies on distinct nonvolatile media \u53ef\u4ee5\u8fd1\u4f3c\u5b9e\u73b0</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/db15/#implementation","title":"Implementation","text":"<ul> <li>Maintain multiple copies of each block on separate disks</li> <li>Failure during data transfer can still result in inconsistent copies \u4fee\u6539\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u53d1\u751f\u6545\u969c</li> <li>Protecting storage media from failure during data transfer </li> </ul>"},{"location":"ZJU_CS/Database/db15/#database_recovery","title":"Database Recovery","text":"<p>Recovery algorithms are techniques to ensure database consistency and transaction atomicity and durability despite failures.  </p> <p>Recovery algorithms have two parts</p> <ul> <li>Actions taken during normal transaction processing to ensure enough information exists to recover from failures \u5148\u8bb0\u65e5\u5fd7</li> <li>Actions taken after a failure to recover the database contents to a state that ensures atomicity, consistency and durability  </li> </ul> <p>\u7406\u60f3\u7684\u7b97\u6cd5\uff1a\u6062\u590d\u5f97\u5f88\u5feb\uff0c\u5bf9\u4e8b\u52a1\u6b63\u5e38\u64cd\u4f5c\u6ca1\u6709\u5f71\u54cd\uff08\u8bb0\u5f55\u4fe1\u606f\u7684\u65f6\u5019\u4e0d\u80fd\u6d88\u8017\u592a\u591a\u6027\u80fd\uff09\uff0c\u5373\u517c\u987e\u4e0a\u9762\u4e24\u4e2a\u90e8\u5206\u3002\u6062\u590d\u7684\u8fc7\u7a0b\u548c\u5e76\u884c\u63a7\u5236\u662f\u76f8\u5173\u7684\u3002</p> <p>We assume that strict two-phase locking ensures no dirty read. \u4f7f\u7528\u4e25\u683c\u4e24\u9636\u6bb5\u5c01\u9501\u534f\u8bae\u4fdd\u8bc1\u6ca1\u6709\u810f\u6570\u636e\u3002</p> <p>Idempotent(\u5e42\u7b49\u6027): An recovery algorithm is said to be idempotent if executing it several times gives the same result as executing it once. \u7b97\u6cd5\u6062\u590d\u591a\u6b21\u7684\u6548\u679c\u662f\u4e00\u6837\u7684\u3002\uff08\u6062\u590d\u8fc7\u7a0b\u4e2d\u53ef\u80fd\u4e5f\u53d1\u751f crash\uff09</p>"},{"location":"ZJU_CS/Database/db15/#log-based_recovery","title":"Log-Based Recovery","text":""},{"location":"ZJU_CS/Database/db15/#log_records","title":"Log Records","text":"<p>A log is kept on stable storage(\u7a33\u5b9a\u5b58\u50a8\u5668).  The log is a sequence of log records, and maintains a record of update activities on the database.</p> <ul> <li>When transaction Ti starts, it registers itself by writing a \u201cstart\u201d log record: \\(&lt;T_i\\  start&gt;\\) \u4e8b\u52a1\u5f00\u59cb. Ti \u8868\u793a\u4e8b\u52a1\u7684 id. </li> <li>Before Ti executes write(X), writing \u201cupdate\u201d log record \\(&lt;T_i, X,  V_1,  V_2&gt;\\)  \u4e8b\u52a1\u628a X \u6570\u636e\u9879\u7684\u503c\u4ece V1(old value) \u6539\u4e3a V2(new value). \u8fd9\u4e2a\u5c31\u662f\u6062\u590d\u7684\u57fa\u7840. undo \u5c31\u7528 old value, redo \u7528 new value. Insert \u5c31\u662f old \u4e3a\u7a7a, Delete \u5c31\u662f new \u4e3a\u7a7a\u3002</li> <li>When Ti finishes it last statement, writing \u201ccommit\u201d log record: \\(&lt;T_i\\  commit&gt;\\) </li> <li>When Ti  complete rollback, writing \u201cabort\u201d log record: \\(&lt;T_i\\  abort&gt;\\) </li> </ul> <p>Log Example</p> <p> </p> <p>\u8fd9\u91cc\u5f53\u6267\u884c\u5230 T2 \u56de\u6eda\u7684\u65f6\u5019\u6211\u4eec\u4f1a\u8fdb\u884c\u6062\u590d\uff08\u7eff\u8272\u7684\u884c\u8868\u793a\u8865\u507f\u65e5\u5fd7\uff09\u6bd4\u5982 T2 \u628a C \u6062\u590d\u4e3a 500, T3 \u628a B \u6062\u590d\u4e3a 300, \u6700\u540e T2 abort. (undo \u64cd\u4f5c\u4e5f\u4f1a\u8bb0\u5f55\u5230\u65e5\u5fd7\u4e2d) \u53d1\u751f crash \u7684\u65f6\u5019 repeat history(undo \u6b63\u5e38\u7684\u64cd\u4f5c\u4e5f\u4f1a\u91cd\u590d), \u968f\u540e\u5f97\u5230\u5e76\u6267\u884c undo list.(\u4e8b\u52a1\u5f00\u59cb\u540e\u5148\u628a\u4e8b\u52a1\u653e\u8fdb\u53bb\uff0c\u5982\u679c\u63d0\u4ea4\u6216\u8005\u56de\u6eda\u4e86\u5c31\u628a\u4e8b\u52a1\u79fb\u9664) \u53ea\u9700\u8981\u628a T4 undo.(\u5047\u8bbe\u6545\u969c\u524d\u53ea\u6267\u884c\u5230 15 \u884c) </p>"},{"location":"ZJU_CS/Database/db15/#write-ahead_logging","title":"Write-Ahead Logging","text":"<p>Before a data in main memory is output to the database, the log records pertaining to data must have been output to stable storage. \u5148\u5199\u65e5\u5fd7\u539f\u5219\u3002 \u6570\u636e\u4fee\u6539\u4e4b\u524d\uff0c\u548c\u6570\u636e\u6709\u5173\u7684\u8bb0\u5f55\u8981\u5148\u5199\u5165\u65e5\u5fd7\u3002</p>"},{"location":"ZJU_CS/Database/db15/#transaction_commit","title":"Transaction Commit","text":"<p>A transaction is said to have committed when its commit log record is output to stable storage \u65e5\u5fd7\u5df2\u7ecf\u8bb0\u5f55 commit, \u8bf4\u660e\u4e8b\u52a1\u5df2\u7ecf\u63d0\u4ea4\u3002\uff08\u56e0\u4e3a\u540e\u7eed\u53ef\u4ee5\u6839\u636e\u8fd9\u4e2a\u6062\u590d\u72b6\u6001\u4e86\uff09 \u4f46\u6b64\u65f6\u6570\u636e\u4e0d\u4e00\u5b9a\u5df2\u7ecf\u5199\u56de\u5230\u6570\u636e\u5e93\u91cc\uff08\u4e0d\u4e00\u5b9a\u9ad8\u6821\uff09 all previous log records of the transaction must have been output already </p> <p>Writes performed by a transaction may still be in the buffer when the transaction commits, and may be output later.   \u4e0d\u4e00\u5b9a\u5728\u78c1\u76d8\u3002\u5982\u679c\u7acb\u523b\u5c06 block \u5199\u56de\u78c1\u76d8\u53ef\u80fd\u5f15\u8d77\u5927\u91cf I/O \u64cd\u4f5c</p>"},{"location":"ZJU_CS/Database/db15/#undo_and_redo_operations","title":"Undo(\u64a4\u9500) and Redo\uff08\u91cd\u505a\uff09 Operations","text":""},{"location":"ZJU_CS/Database/db15/#checkpoints","title":"Checkpoints","text":"<p>Redoing/undoing all transactions recorded in the log can be very slow. Streamline recovery procedure by periodically performing checkpointing. \u91cd\u6f14\u5386\u53f2\u53ef\u80fd\u5f88\u957f\u3002checkpoint \u662f\u786e\u8ba4\u4e4b\u524d\u7684\u64cd\u4f5c\u90fd\u5df2\u7ecf\u53cd\u6620\u5230\u6570\u636e\u5e93\u91cc\u53bb\u4e86\uff0c\u8fd9\u6837\u91cd\u6f14\u7684\u65f6\u5019\u5c31\u53ef\u4ee5\u76f4\u63a5\u4ece checkpoint \u5f00\u59cb\u3002</p> <ul> <li>Output all log records currently residing in main memory onto stable storage. \u65e5\u5fd7\u4e0d\u662f\u751f\u6210\u5c31\u5f80\u5185\u5b58\u5199\uff0c\u800c\u662f\u6709\u4e00\u4e2a\u65e5\u5fd7\u7f13\u51b2\u533a\u3002 \u786e\u4fdd\u628a\u65e5\u5fd7\u9879\u5199\u5230\u65e5\u5fd7\u4e2d\u53bb\u4e86\u3002</li> <li>Output all modified buffer blocks to the disk. \u628a buffer \u91cc\u6240\u6709\u6570\u636e\u90fd\u5237\u5199\u4e00\u904d\u3002</li> <li>Write a log record \\(&lt;checkpoint\\ L&gt;\\) onto stable storage where L is a list of all transactions active at the time of checkpoint.  \u5199\u4e00\u4e2a\u65e5\u5fd7\u7684\u6807\u8bb0\uff08\u65b0\u7684\u65e5\u5fd7\u7c7b\u578b\uff09. L \u662f\u5f53\u524d\u6b63\u5728\u5de5\u4f5c\u7684\u4e8b\u52a1\u7684\u8868\u3002\uff08\u7528\u6765\u505a undo list \u7684\u521d\u59cb\u5316\u5217\u8868\uff09</li> <li>All updates are stopped while doing checkpointing!!! \u505a checkpoint \u7684\u65f6\u5019\u5176\u4ed6\u6d3b\u8dc3\u4e8b\u52a1\u90fd\u8981\u505c\u4e0b\u6765\u3002</li> </ul> <p>Log File with Checkpoint : Example</p> <p> </p> <p>\u91cd\u6f14\u5386\u53f2\u4ece\u6700\u8fd1\u7684 checkpoint \u91cd\u6f14. {T2 T4} \u4f5c\u4e3a undo list \u7684\u521d\u59cb\u5316\u503c\u3002  </p> <p>checkpoint \u4e4b\u95f4\u7684\u95f4\u9694\u5e94\u8be5\u5982\u4f55\u786e\u5b9a\uff1f \u6839\u636e\u65e5\u5fd7\u91cf\u3002</p> Example of Recovery <p> </p>"},{"location":"ZJU_CS/Database/db15/#log_record_buffering","title":"Log Record Buffering","text":"<p>\u6211\u4eec\u5728\u628a\u6570\u636e buffer \u4e2d\u7684\u5757\u5199\u5230\u6570\u636e\u5e93\u65f6\uff0c\u8981\u5148\u628a\u5757\u5bf9\u5e94\u7684\u65e5\u5fd7\u5148\u5199\u5230\u65e5\u5fd7\u6587\u4ef6\uff08\u76f4\u63a5\u628a\u65e5\u5fd7\u5168\u90e8\u5237\u5199\u4e00\u904d\uff09\u3002 \u4e8b\u52a1\u63d0\u4ea4\u4e4b\u540e\u6709\u4e00\u4e2a\u5bf9\u65e5\u5fd7\u7684\u5f3a\u5236\u5237\u5199\u3002</p> <p>Group commit: several log records can be output using a single output operation, reducing the I/O cost.  commit \u53ef\u80fd\u5728\u65e5\u5fd7\u91cc\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4, \u7b49\u5230 buffer \u91cc\u6709\u8db3\u591f\u591a\u7684\u65e5\u5fd7\u8bb0\u5f55\u518d\u5199\u51fa\u53bb\u3002 </p> <ul> <li>The recovery algorithm supports the no-force policy(\u975e\u5f3a\u5236): i.e., updated blocks need not be written to disk when transaction commits. \u597d\u7684\u6062\u590d\u7b97\u6cd5\uff1a\u6211\u4e8b\u52a1 commit \u4e86\u4f46\u4e0d\u5f3a\u5236\u65e5\u5fd7\u5237\u5199\u51fa\u53bb\u3002</li> <li>The recovery algorithm supports the steal policy(\u7a83\u53d6\u7b56\u7565):i.e., blocks containing updates of uncommitted transactions can be written to disk, even before the transaction commits.  \u4e8b\u52a1\u63d0\u4ea4\u4e4b\u524d\u810f\u6570\u636e\u80fd\u4e0d\u80fd\u88ab\u5199\u5230\u78c1\u76d8\u91cc\u53bb\uff1f\uff08\u540c\u6837\u5730\u9700\u8981\u5148\u628a\u65e5\u5fd7\u5199\u51fa\u53bb\uff09</li> </ul>"},{"location":"ZJU_CS/Database/db15/#fuzzy_checkpointing","title":"Fuzzy Checkpointing","text":"<p>Fuzzy \u6a21\u7cca</p> <p>\u505a checkpoint \u7684\u65f6\u5019\u6211\u4eec\u5982\u679c\u8981\u6c42\u5176\u4ed6\u6d3b\u8dc3\u4e8b\u52a1\u90fd\u505c\u4e0b\u6765\uff0c\u4e00\u6b21\u6027\u628a\u810f\u6570\u636e\u90fd\u5237\u5199\u51fa\u53bb\uff0c\u541e\u5410\u7387\u4f1a\u5ffd\u9ad8\u5ffd\u4f4e\uff0c\u7cfb\u7edf\u7684\u53ef\u7528\u6027\u5c31\u6bd4\u8f83\u5dee\u3002 \u8bb0\u5f55\u810f\u6570\u636e\uff0c\u5728\u540e\u9762\u4e0d check \u7684\u65f6\u5019\u6162\u6162\u5199\u3002</p> <ul> <li>Temporarily stop all updates by transactions</li> <li>Write a \\(&lt;checkpoint\\ L&gt;\\) log record and force log to stable storage</li> <li>Note list M of modified buffer blocks</li> <li>Now permit transactions to proceed with their actions</li> <li>Output to disk all modified buffer blocks in list M</li> </ul> <p>\u5728\u628a\u6240\u6709\u810f\u6570\u636e\u90fd\u5199\u56de\u78c1\u76d8\u540e\uff0c\u6211\u4eec\u4f1a\u8ba4\u5b9a\u8fd9\u4e2a checkpoint. \u6709\u4e00\u4e2a\u6307\u9488\u6307\u5411\u6700\u8fd1\u4e00\u6b21\u6210\u529f\u7684 checkpoint. \u8fd9\u6837 checkpoint \u7684\u65f6\u5019\u5c31\u53ea\u9700\u8981\u8bb0\u5f55\u4e00\u4e0b\uff0c\u4e0d\u7528\u4e00\u4e0b\u5b50\u5199\u810f\u6570\u636e\u4e86\u3002</p>"},{"location":"ZJU_CS/Database/db15/#failure_with_loss_of_nonvolatile_storage","title":"Failure with Loss of Nonvolatile Storage","text":"<p>Can be extended to allow transactions to be active during dump; known as fuzzy dump or online dump. \u7c7b\u4f3c\u4e8e checkpoint, \u4e0d\u662f\u5b8c\u5168\u5907\u4efd\uff0c\u800c\u662f\u8bb0\u5f55\u4e00\u4e0b\uff0c\u968f\u540e\u6162\u6162\u5907\u4efd\u3002</p>"},{"location":"ZJU_CS/Database/db15/#recovery_with_early_lock_release_and_logical_undo_operations","title":"Recovery with Early Lock Release and Logical Undo Operations","text":""},{"location":"ZJU_CS/Database/db15/#logical_undo_logging","title":"Logical Undo Logging","text":"<p>\u5982\u679c\u65e9\u653e\u9501\uff0c\u540e\u7eed\u6062\u590d\u4e3a old value \u53ef\u80fd\u6ca1\u6709\u610f\u4e49\u3002\u6bd4\u5982\u5b58\u6b3e 100, \u8f6c\u5165 100. \u90a3\u4e48\u6211\u4eec\u6062\u590d\u4e3a 100(\u7269\u7406\u64a4\u9500) \u5c31\u6ca1\u6709\u610f\u4e49\u3002\u8fd9\u4e2a\u65f6\u5019\u5e94\u8be5\u91c7\u7528\u903b\u8f91\u64a4\u9500\uff0c\u5373\u5982\u679c <code>a+=100</code>, \u6062\u590d\u65f6\u5c31\u5e94\u8be5 <code>a-=100</code>. </p> <p>\u5982 B+ \u6811\u7684\u63d2\u5165\u548c\u5220\u9664\u64cd\u4f5c\u3002 \u6211\u4eec\u9700\u8981\u5bf9\u903b\u8f91\u64cd\u4f5c\u8bb0\u65e5\u5fd7\u3002</p> <p>Transaction Rollback with Logical Undo</p> <p> </p> <p>\u9700\u8981\u628a\u6bcf\u4e2a\u64cd\u4f5c\u7684\u65e5\u5fd7\u9879\u8bb0\u5f55\u4e0b\u6765\uff08\u5f00\u59cb\u548c\u7ed3\u675f\uff09. C \u8868\u793a\u81ea\u52a0\u64cd\u4f5c\u3002\u8fd9\u91cc\u5728 end \u65f6\u4f1a\u8bb0\u5f55 logical undo \u7684\u64cd\u4f5c(\u51cf\u6cd5\u64a4\u9500\u5bf9\u5e94\u52a0\u6cd5) \u6ce8\u610f\u6211\u4eec\u662f\u5728 end \u7684\u65f6\u5019\u8bb0\u5f55\u903b\u8f91\u64a4\u9500\u7684\u65b9\u6cd5\uff0c\u5982\u679c\u8fd9\u4e2a\u64cd\u4f5c\u8fd8\u6ca1\u6709\u7ed3\u675f\uff0c\u90a3\u4e48\u6211\u4eec\u53ea\u80fd\u7269\u7406\u64a4\u9500\u3002 \u8fd9\u91cc\u6211\u4eec\u65e9\u653e\u9501\u4e86\uff0c\u6ca1\u6709\u9075\u5faa\u4e25\u683c\u4e24\u9636\u6bb5\u653e\u9501\u534f\u8bae\u3002\u5728 T0 \u8fd8\u6ca1\u6709\u63d0\u4ea4\u7684\u65f6\u5019 T1 \u5c31\u5bf9\u6570\u636e\u8fdb\u884c\u4e86\u4fee\u6539. \u6062\u590d\u4e2d\u505a\u7684\u662f\u7269\u7406\u64a4\u9500(old+new), begin/end \u8fd9\u4e9b\u65e5\u5fd7\u5c31\u4e0d\u9700\u8981\u8bb0\u5f55\u4e86\u3002</p> <p>Failure Recovery with Logical Undo</p> <p> </p> <p>\u8fd9\u91cc\u8fd8\u6ca1\u6709 T2 end, \u56e0\u6b64\u7269\u7406\u64a4\u9500\u3002</p>"},{"location":"ZJU_CS/Database/db15/#aries_recovery_algorithm","title":"ARIES Recovery Algorithm","text":"<p>ARIES is a state of the art recovery method. </p> <p>\u6bcf\u4e2a\u65e5\u5fd7\u90fd\u6709\u4e00\u4e2a\u65e5\u5fd7\u7f16\u53f7 log sequence number (LSN) \u6bcf\u4e2a\u6570\u636e\u5757\u91cc\u90fd\u4f1a\u8bb0\u4e00\u4e2a LSN, \u8868\u793a\u8fd9\u4e2a\u5757\u53cd\u5e94\u4e86\u6700\u8fd1\u54ea\u4e2a\u65e5\u5fd7\u7684\u64cd\u4f5c\u3002</p>"},{"location":"ZJU_CS/Database/db15/#aries_data_structures","title":"ARIES Data Structures","text":"<ul> <li>Log sequence number (LSN) identifies each log record  <ul> <li>Must be sequentially increasing</li> </ul> </li> <li>Page LSN \u6bcf\u4e2a\u9875(\u5757\u7684 LSN)</li> <li>Log records of several different types</li> <li>Dirty page table \u810f\u9875\u8868\u8981\u8bb0\u5f55\u5728\u65e5\u5fd7\u4e2d\u3002</li> </ul> <p>Log Record</p> <p>\u65e5\u5fd7\u8bb0\u5f55\u901a\u8fc7 UndoNextLSN \u4e32\u8d77\u6765\uff0c\u63d0\u9ad8\u6062\u590d\u6548\u7387\u3002</p> <p>DirtyPage Table  </p> <ul> <li>PageLSN of the page</li> <li>RecLSN is an LSN such that log records before this LSN have already been applied to the page version on disk \u6bcf\u4e00\u9875\u90fd\u6709 PageLSN \u548c RecLSN, Rec \u53cd\u5e94\u7684\u662f\u6700\u8fd1\u7684\u88ab\u53cd\u6620\u5230\u6570\u636e\u5e93\u7684\u65e5\u5fd7\u3002</li> </ul> <p>ARIES Data Structures</p> <p> </p> <p>\u8fd9\u91cc 4894.1 \u8868\u793a\u8fd9\u4e2a\u5757\u91cc\u7684\u7b2c\u4e00\u4e2a\u6570\u636e\u3002 RecLSN \u8868\u793a 7564 \u5f00\u59cb\u6570\u636e\u5c31\u6ca1\u6709\u53cd\u6620\u5230\u6570\u636e\u5e93\u4e2d\u53bb\u4e86\u3002</p> <ul> <li>Checkpoint log record<ul> <li>Contains: <ul> <li>DirtyPageTable and list of active transactions  </li> <li>For each active transaction, LastLSN, the LSN of the last log record written by the transaction \u8981\u8bb0\u6700\u8fd1\u7684\u4e8b\u52a1\u9879\uff08\u4ece\u54ea\u91cc\u5f00\u59cb\u6062\u590d\uff09</li> </ul> </li> <li>Fixed position on disk notes LSN of last completed checkpoint log record</li> </ul> </li> <li>Dirty pages are not written out at checkpoint time Instead, they are flushed out continuously, in the background \u810f\u9875\u4e0d\u4f1a\u5728 check \u7684\u65f6\u5019\u5199\u51fa\u53bb\u3002</li> <li>Checkpoint is thus very low overhead can be done frequently</li> </ul>"},{"location":"ZJU_CS/Database/db15/#aries_recovery_algorithm_1","title":"ARIES Recovery Algorithm","text":"<ul> <li>Analysis pass  <ul> <li>Which transactions to undo (undo-list)  </li> <li>Which pages were dirty (disk version not up to date) at time of crash \u5f97\u5230 dirty page table. </li> <li>RedoLSN: LSN from which redo should start \u771f\u6b63\u7684 redo \u8981\u4ece\u54ea\u91cc\u5f00\u59cb(RecLSN \u7684\u6700\u5c0f\u503c\u5c31\u662f redo \u7684\u8d77\u70b9)</li> </ul> </li> <li>Redo pass \u4ece RedoLSN \u5f00\u59cb\u91cd\u6f14 RecLSN and PageLSNs are used to avoid redoing actions already reflected on page. \u7528\u6765\u4f18\u5316\uff0c\u6709\u4e9b\u65e5\u5fd7\u4e0d\u7528 redo(\u6ca1\u6709\u610f\u4e49)</li> <li>Undo pass \u628a undolist \u8fdb\u884c\u64a4\u9500\u64cd\u4f5c\u3002</li> </ul> <p>Example</p> <p> </p> <p>crash \u4e4b\u540e\uff0c\u5f97\u5230\u4e0a\u9875\u7684 Dirty Page Table \u548c Active TXN Table \u4ee5\u53ca\u78c1\u76d8\u91cc\u7684\u65e5\u5fd7\u3002</p> <p>Example</p> <p> </p> <p>\u8981\u628a 2390 \u52a0\u5230\u8868\u91cc\u53bb\u3002</p>"},{"location":"ZJU_CS/Database/db2/","title":"Lecture 2 | Relational Model","text":""},{"location":"ZJU_CS/Database/db2/#structure_of_relational_databases","title":"Structure of Relational Databases","text":""},{"location":"ZJU_CS/Database/db2/#concepts","title":"Concepts","text":"<p>Formally, given set \\(D_1, D_2, \\ldots, D_n\\) a relation \\(r\\) is a subset of \\(D_1\\times D_2\\times \\ldots D_n\\). Thus a relation is a set of n-tuple \\((a_1,a_2,\\ldots,a_n)\\) where each \\(a_i\\in D_i\\).  </p> <p>\\(A_1,A_2,\\ldots,A_n\\) are attributes. \\(R=(A_1,A_2,\\ldots,A_n)\\) is a relation schema. e.g. instructor = (ID, name, dept_name, salary).  </p> <p>A relation instance \\(r\\) defined over schema R is denoted by \\(r(R)\\). </p> <p>\u56e0\u4e3a\u5173\u7cfb\u662f\u4e00\u4e2a\u96c6\u5408\uff0c\u6240\u4ee5\u5173\u7cfb\u90fd\u662f\u65e0\u5e8f\u7684\u3002</p>"},{"location":"ZJU_CS/Database/db2/#attributes","title":"Attributes","text":"<ul> <li>The set of allowed values for each attribute is called the domain (\u57df)of the attribute</li> <li>Attribute values are (normally) required to be atomic (\u539f\u5b50\u7684); that is, indivisible</li> <li>The special value null (\u7a7a\u503c) is a member of every domain</li> </ul>"},{"location":"ZJU_CS/Database/db2/#database_schema","title":"Database Schema","text":"<ul> <li>Database schema -- is the logical structure of the database.</li> <li>Database instance -- is a snapshot of the data in the database at a given instant in time. </li> </ul> <p>Example</p> <p> </p> <p>schema \u662f\u62bd\u8c61\u7684\u5b9a\u4e49, instance \u662f\u5177\u4f53\u7684\u5b9e\u4f8b\u3002  </p>"},{"location":"ZJU_CS/Database/db2/#keys","title":"Keys","text":"<p>Let \\(K\\subsetneqq R\\) </p> <ul> <li>\\(K\\) is a superkey (\u8d85\u952e) of \\(R\\) if values for K are sufficient to identify (\u552f\u4e00\u786e\u5b9a) a unique tuple of each possible relation \\(r(R)\\) e.g. \\(\\{ID\\}\\) or \\(\\{ID, name\\}\\)</li> <li>Superkey \\(K\\) is a candidate key (\u5019\u9009\u952e) if \\(K\\) is minimal. \u5373 \\(K\\) \u4e2d\u6ca1\u6709\u5197\u4f59\u5c5e\u6027  </li> <li>One of the candidate keys is selected to be the primary key (\u4e3b\u952e).</li> <li> <p>Foreign key (\u5916\u952e) Relation \\(r_1\\) may include among its attributes the primary key of another relation \\(r_2\\). This attribute is called a foreign key from \\(r_1\\), referencing \\(r_2\\). \u7c7b\u4f3c\u4e8e\u6307\u9488\uff0c\u5916\u952e\u9650\u5236\u5c31\u662f\u5173\u7cfb \\(r_1\\) \u5f15\u7528\u7684\u4e3b\u952e\u5fc5\u987b\u5728\u5173\u7cfb \\(r_2\\) \u4e2d\u51fa\u73b0\u3002</p> Example <p> </p> <p>\u5de6\u4fa7\u8868\u7684\u8001\u5e08 ID \u5fc5\u987b\u51fa\u73b0\u5728\u53f3\u4fa7\u8868\u4e2d\u3002</p> Why we need foreign key constraint? <p>\u6570\u636e\u5e93\u662f\u652f\u6301\u7531\u5b8c\u6574\u7ea6\u675f\u6761\u4ef6\u5b9a\u4e49\u51fa\u6765\u7684\uff0c\u5e76\u7ef4\u62a4\u5b8c\u6574\u6027\u7ea6\u675f\u6761\u4ef6\u3002\u5219\u5f53\u6211\u4eec\u5b9a\u4e49\u5916\u952e\u540e\uff0c\u4e0a\u8ff0\u4f8b\u5b50\u4e2d\u9ec4\u8272\u6761\u76ee\u662f\u4e0d\u4f1a\u51fa\u73b0\u7684\u3002</p> </li> <li> <p>Referential integrity (\u53c2\u7167\u5b8c\u6574\u6027) \u7c7b\u4f3c\u4e8e\u5916\u952e\u9650\u5236\uff0c\u4f46\u4e0d\u5c40\u9650\u4e8e\u4e3b\u952e\u3002  </p> Example <p> </p> <p>\u8fd9\u91cc \\(time_slot_id\\) \u5e76\u4e0d\u662f\u5173\u7cfb \\(r_2\\) \u7684\u4e3b\u952e\uff0c\u6240\u4ee5\u8fd9\u91cc\u4e0d\u662f\u5916\u952e\u9650\u5236\u3002</p> </li> </ul> <p>Example</p> <p> </p> <ul> <li>course \u6307\u8bfe\u7a0b\u4fe1\u606f\uff0c\u65e0\u8bba\u662f\u5426\u5f00\u8bfe\uff0c\u90fd\u4f1a\u6709\u5176\u5b9a\u4e49\u3002</li> <li>section \u8868\u793a\u6559\u5b66\u73ed\uff0c\u771f\u6b63\u5f00\u8bfe\u65f6\u5c31\u6709\u76f8\u5e94\u7684\u5b9e\u4f8b\u3002\uff08\u7c7b\u6bd4\u4e8e\u9ad8\u94c1\u7684\u5217\u8f66\u53f7\uff0c\u548c\u6bcf\u5929\u5bf9\u5e94\u7684\u73ed\u6b21\uff09</li> <li>teachers \u5177\u4f53\u6559\u54ea\u4e2a\u6559\u5b66\u73ed\u7684\u8001\u5e08</li> <li>takes \u8868\u793a\u5b66\u751f\u6ce8\u518c\u8bfe\u7a0b</li> <li>time_slot \u8868\u793a\u4e00\u95e8\u8bfe\u7684\u5177\u4f53\u4e0a\u8bfe\u65f6\u95f4\u6bb5\uff0c\u5982\u6570\u636e\u5e93\u5728\u5468\u4e00 3, 4, 5 \u8282; \u5468\u4e00 7, 8 \u8282\u3002</li> <li>\u4e0a\u56fe\u4e2d\u7ea2\u7ebf\u8868\u793a\u5f15\u7528\u5b8c\u6574\u6027\u7684\u7ea6\u675f\uff1b\u9ed1\u7ebf\u8868\u793a\u5916\u952e\u7ea6\u675f\u3002</li> </ul>"},{"location":"ZJU_CS/Database/db2/#relational_algebra","title":"Relational Algebra","text":"<p>Six basic operators</p> <ul> <li>select: \\(\\sigma\\) </li> <li>project: \\(\\Pi\\)</li> <li>union: \\(\\cup\\)</li> <li>set difference: \\(-\\) </li> <li>Cartesian product(\u7b1b\u5361\u5c14\u79ef): \\(\\times\\)</li> <li>rename: \\(\\rho\\)</li> </ul>"},{"location":"ZJU_CS/Database/db2/#select","title":"Select","text":"<p>\\(\\sigma_p(r)=\\{t|t\\in r\\ and\\ p(t)\\}\\)  , where \\(p\\) is called selection predicate.  </p> Select Example <p> </p>"},{"location":"ZJU_CS/Database/db2/#project","title":"Project","text":"<p>The project operation is a unary operation that returns its argument relation, with certain attributes left out.   \\(\\prod_{A_1,A_2,\\ldots, A_k}(r)\\) where \\(A_i\\) are attribute names and \\(r\\) is a relation name.   </p> <p>The result is defined as the relation of k columns obtained by erasing the columns that are not listed. \u4f1a\u5bf9\u7ed3\u679c\u8fdb\u884c\u53bb\u91cd\u3002  </p> Projection Example <p> </p>"},{"location":"ZJU_CS/Database/db2/#union","title":"Union","text":"<p>The union operation allows us to combine two relations. \\(r\\cup s = \\{t| t\\in r \\ or \\ t\\in s\\}\\) </p> <ul> <li>\\(r\\) and \\(s\\) must have the same arity (\u5143\u6570) (same number f attributes)  </li> <li>The attribute domains must be compatible  \u5f53\u5c5e\u6027\u6709\u5173\u8054\u7c7b\u578b\u65f6\uff0c\u5bf9\u4e8e\u6bcf\u4e2a\u8f93\u5165 \\(i\\), \u4e24\u4e2a\u8f93\u5165\u5173\u7cfb\u7684\u7b2c \\(i\\) \u4e2a\u5c5e\u6027\u7684\u7c7b\u578b\u5fc5\u987b\u76f8\u540c\u3002  </li> </ul> Projection Example <p> </p>"},{"location":"ZJU_CS/Database/db2/#set_difference","title":"Set Difference","text":"<p>The set-difference operation allows us to find tuples that are in one relation but are not in another.  \\(r-s=\\{t|t\\in r\\ and\\ t\\notin s\\}\\) </p> <p>Set differences must be taken between compatible relations.</p> Projection Example <p> </p>"},{"location":"ZJU_CS/Database/db2/#cartesian-product","title":"Cartesian-Product","text":"<p>The Cartesian-product operation (denoted by \\(\\times\\))  allows us to combine information from any two relations.   \\(r\\times s  =\\{t\\ q|t\\in r\\ and\\ q\\in s\\}\\) </p> Projection Example <p> </p>"},{"location":"ZJU_CS/Database/db2/#renamen","title":"Rename=n","text":"<p>Allows us to refer to a relation by more than one name. \\(\\rho_X(E)\\)</p> Composition of Operations 1 <p>Find the names of all instructors in the Physics department, along with the course_id of all courses they have taught.  </p> <p> </p> <p>\u8fd9\u4e24\u6761\u8bed\u53e5\u542b\u4e49\u4e00\u6837\uff0c\u4f46\u7b2c\u4e8c\u6761\u6211\u4eec\u5148\u8fdb\u884c\u4e86\u4e00\u6b21 select, \u6761\u76ee\u5c11\u4e86\u66f4\u9ad8\u6548\u3002  </p> Composition of Operations 2 <p>Find the largest salary in the university.  </p> <ul> <li>find instructor salaries that are less than some other instructor salary (i.e. not maximum) using a copy of instructor under a new name \\(d\\).  \\(\\prod_{instructor.salary}(\\sigma_{instructor.salary&lt;d.salary}(instructor \\times \\rho_d(instructor)))\\) </li> <li>find the largest salary \\(\\prod_{instructor}-\\prod_{instructor.salary}(\\sigma_{instructor.salary}&lt;d.salary(instructor\\times \\rho_d(instructor)))\\) </li> </ul> <p>\u6211\u4eec\u7b2c\u4e00\u6b65\u5c06\u4e24\u4e2a\u5173\u7cfb\u62fc\u8d77\u6765\u4e4b\u540e\uff0c\u9650\u5b9a instructor \u7684\u5de5\u8d44\u5c0f\u4e8e d, \u968f\u540e\u6295\u5f71\u6211\u4eec\u5c31\u53ef\u4ee5\u83b7\u5f97\u6240\u6709\u4e0d\u662f\u6700\u5927\u503c\u7684\u85aa\u6c34\u3002\uff08\u56e0\u4e3a\u4efb\u4f55\u4e0d\u662f\u6700\u5927\u503c\u7684\u85aa\u6c34\u90fd\u4f1a\u5728\u7b1b\u5361\u5c14\u79ef select \u540e\u81f3\u5c11\u5b58\u5728\u4e00\u4e2a\u5143\u7ec4\uff0c\u8fd9\u6837\u6295\u5f71\u4e4b\u540e\u4ecd\u4f1a\u5b58\u5728\u3002\u4f46\u6700\u5927\u503c\u5c31\u4e0d\u4f1a\u6709\u5143\u7ec4\u5b58\u5728\uff09\uff0c\u6700\u540e\u7528\u5168\u96c6\u51cf\u6389\u5373\u53ef\u3002</p>"},{"location":"ZJU_CS/Database/db2/#additional_operations","title":"Additional Operations","text":"<ul> <li>Set intersection: \\(r \\cap s\\) </li> <li>Natural join:  \\(r\\bowtie s\\)</li> <li>Assignment: \\(\\leftarrow\\)</li> <li>Outer join : \\(r \\rtimes       s\\),  \\(r  \\ltimes    s\\), \\(r\\)\u27d7\\(s\\)</li> <li>Division Operator: \\(r \\div s\\) </li> </ul>"},{"location":"ZJU_CS/Database/db2/#set-intersection","title":"Set-Intersection","text":"<p>The set-intersection operation allows us to find tuples that are in both the input relations. \\(r\\cap s=\\{t| t\\in r\\ and\\ t\\in s\\}\\) </p> <ul> <li>\\(r, s\\) have the same arity </li> <li>attributes of \\(r\\) and s are compatible</li> </ul> Set-Intersection Operation Example <p> </p>"},{"location":"ZJU_CS/Database/db2/#natural-join_operation","title":"Natural-Join Operation","text":"<p>Let r and s be relations on schemas R and S respectively.  Then,  \\(r\\bowtie     s\\) is a relation on schema \\(R \\cup S\\) obtained as follows:</p> <ul> <li>Consider each pair of tuples \\(t_r\\) from \\(r\\) and \\(t_s\\) from \\(s\\).  </li> <li>If \\(t_r\\) and \\(t_s\\) have the same value on each of the attributes in \\(R \\cap S\\), add a tuple $t $ to the result, where<ul> <li>\\(t\\) has the same value as \\(t_r\\) on \\(r\\)</li> <li>\\(t\\) has the same value as \\(t_s\\) on \\(s\\)</li> </ul> </li> </ul> <p>\u5373\u5171\u540c\u5c5e\u6027\u8981\u6709\u76f8\u540c\u7684\u503c\uff0c\u624d\u80fd\u5728\u62fc\u63a5\u540e\u7684\u7ed3\u679c\u4e2d\u4fdd\u7559\u3002 \u5bf9\u4e58\u6cd5\u7684\u6269\u5c55\uff0c\u76f8\u5f53\u4e8e\u5148 \\(\\times\\) \u518d select, \u6700\u540e project.  </p> Natural Join Example <p> </p> <ul> <li>Theta Join \\(r\\bowtie_\\theta s=\\sigma_\\theta (r\\times s)\\) \u6761\u4ef6\u8fde\u63a5</li> </ul>"},{"location":"ZJU_CS/Database/db2/#outer_join","title":"Outer Join","text":"<p>Computes the join and then adds tuples form one relation that does not match tuples in the other relation to the result of the join.   </p> <p>Uses null values:  </p> <ul> <li>null signifies that the value is unknown or does not exist </li> <li>All comparisons involving null are (roughly speaking) false by definition</li> </ul> <p>Outer join can be expressed using basic operations.  </p> <ul> <li>\\(r\\rtimes s=(r\\bowtie s)\\cup (r-\\cap_R(r\\bowtie s)\\times \\{null,\\ldots,null\\})\\)</li> <li>\\(r\\ltimes s=(r\\bowtie s)\\cup \\{null,\\ldots,null\\}\\times (s-\\cap_R(r\\bowtie s))\\)</li> <li>\\(r\\)\u27d7\\(s\\) \\(=(r\\bowtie s)\\cup (r-\\cap_R(r\\bowtie  s))\\times \\{(null, \\ldots)\\}\\cup\\{(null,\\ldots,null)\\}\\times (s-\\cap_s(r\\bowtie s))\\)</li> </ul> Outer Join Example <p> </p>"},{"location":"ZJU_CS/Database/db2/#semijoin","title":"Semijoin","text":"<p>\\(r\\ltimes_\\theta s\\) \u4fdd\u7559 \\(r\\) \u4e2d\u80fd\u4e0e \\(s\\) \u76f8\u8fde\u7684\u5143\u7ec4\u3002</p> Semijoin Example <p> </p>"},{"location":"ZJU_CS/Database/db2/#division","title":"Division","text":"<p>Given relations \\(r(R)\\) and \\(s(S)\\), such that \\(S \\subset R\\), \\(r\\div s\\) is the largest relation \\(t(R-S)\\) such that \\(t\\times s \\subsetneqq  r\\) </p> <p>We can write \\(r\\div s\\) as  </p> \\[ \\begin{align*}     temp1 &amp; \\leftarrow \\Pi_{R-S}(r)\\\\     temp2 &amp; \\leftarrow \\Pi_{R-S}((temp1 \\times s)- \\Pi_{R-S,S}(r))\\\\     result &amp; = temp1 - temp2 \\end{align*} \\] Division Example <p> </p>"},{"location":"ZJU_CS/Database/db2/#aggregate_functions_and_operations","title":"Aggregate Functions and Operations","text":"<ul> <li> <p>Aggregation function\uff08\u805a\u5408\u51fd\u6570\uff09takes a collection of values and returns a single value as a result.  </p> <ul> <li>avg: average value</li> <li>min: minimum value</li> <li>max: maximum value</li> <li>sum: sum of values</li> <li>count: number of values</li> </ul> </li> <li> <p>Aggregate operation in relational algebra \\(G_1,G_2,\\ldots,G_n \\mathcal{G}_{F_1(A_1),\\ldots F_n(A_n)}(E)\\) </p> </li> </ul> <p>Aggregate Operation Example</p> <p> </p> <p>\u5206\u7ec4\u7ed3\u679c\u6ca1\u6709\u540d\u5b57\uff0c\u53ef\u4ee5\u7528 rename \u6216\u8005 as \u8fdb\u884c\u6539\u540d\u3002 e.g. <code>dept_name G avg(salary) as avg_sal (instructor)</code></p>"},{"location":"ZJU_CS/Database/db2/#multiset_relational_algebra","title":"Multiset Relational Algebra","text":"<p>\u5173\u7cfb\u4ee3\u6570\u4e2d\uff0c\u6211\u4eec\u8981\u6c42\u5173\u7cfb\u8981\u662f\u4e00\u4e2a\u4e25\u683c\u7684\u96c6\u5408\u3002 \u4f46\u5b9e\u9645\u6570\u636e\u5e93\u4e2d\u5e76\u4e0d\u662f\uff0c\u800c\u662f\u4e00\u4e2a\u591a\u91cd\u96c6\uff0c\u5141\u8bb8\u6709\u91cd\u590d\u5143\u7d20\u5b58\u5728\u3002 \u56e0\u4e3a\u4e00\u4e9b\u64cd\u4f5c\u7684\u4e2d\u95f4\u7ed3\u679c\u4f1a\u5e26\u6765\u91cd\u590d\u5143\u7d20\uff0c\u8981\u4fdd\u6301\u96c6\u5408\u7279\u6027\u5f00\u9500\u5f88\u5927\uff0c\u56e0\u6b64\u5b9e\u9645\u64cd\u4f5c\u4e2d\u4e0d\u4f1a\u53bb\u91cd \u3002 </p>"},{"location":"ZJU_CS/Database/db2/#sql_and_relational_algebra","title":"SQL and Relational Algebra","text":"<ul> <li><code>select A1, A2, ... An from r1, r2, ... rm where P</code> is equivalent to \\(\\Pi_{A_1,\\ldots, A_n}(\\sigma_P(r_1\\times r_2\\ldots r_m))\\) </li> <li><code>select A1, A2, sum(A3) from r1, r2, ... rm where P group by A1, A2</code> is equivalent to \\(A_1, A_2 \\mathcal{G} sum(A_3)(\\sigma_P(r_1\\times r_2\\times\\ldots r_m))\\) \u8fd9\u91cc\u6309 \\(A_1,A_2\\) \u5206\u7ec4\uff0c\u90a3\u4e48\u7ed3\u679c\u7684\u8868\u4e2d\u4f1a\u6709 \\(A_1,A_2,sum(A_3)\\) \u4e09\u5217\uff08\u5206\u7ec4\u4f9d\u636e+\u5206\u7ec4\u540e\u7684\u805a\u5408\u7ed3\u679c\uff09\uff0c\u8fd9\u91cc\u6211\u4eec\u9700\u8981\u7684\u5c31\u662f\u8fd9\u4e09\u5217\uff0c\u6240\u4ee5\u5206\u7ec4\u5373\u53ef\u3002\u4f46\u662f\u5047\u8bbe\u6211\u4eec\u53ea\u9700\u8981 \\(A_1, sumA3\\) \u90a3\u4e48\u6700\u540e\u8fd8\u9700\u8981\u6295\u5f71\u3002</li> </ul>"},{"location":"ZJU_CS/Database/db3/","title":"Lecture 3 \uff5c Introduction to SQL","text":"Abstract <ul> <li>Data Definition</li> <li>Basic Query Structure</li> <li>Additional Basic Operations</li> <li>Set Operations</li> <li>Null Values</li> <li>Aggregate Functions</li> <li>Nested Subqueries</li> <li>Modification of the Database </li> </ul>"},{"location":"ZJU_CS/Database/db3/#data_definition","title":"Data Definition","text":""},{"location":"ZJU_CS/Database/db3/#domain_types_in_sql","title":"Domain Types in SQL","text":"<ul> <li><code>char(n).</code> Fixed length character string, with user-specified length n.  \u5b9a\u957f\u5b57\u7b26\u4e32. C \u8bed\u8a00\u91cc\u5b57\u7b26\u4e32\u7ed3\u5c3e\u6709 <code>\\0</code>, \u4f46\u6570\u636e\u5e93\u91cc\u6ca1\u6709\uff0c\u957f\u5ea6\u7531\u5b9a\u4e49\u800c\u5f97\u3002  </li> <li><code>varchar(n).</code> Variable length character strings, with user-specified maximum length n. \u4e0d\u5b9a\u957f\u5b57\u7b26\u4e32\u3002\u4e0d\u540c\u7684\u6570\u636e\u7c7b\u578b\u6bd4\u8f83\u53ef\u80fd\u6709\u95ee\u9898\uff08\u6bd4\u5982\u5b9a\u957f\u548c\u4e0d\u5b9a\u957f\u7684\u5b57\u7b26\u4e32\uff09</li> <li><code>int.</code> Integer (a finite subset of the integers that is machine-dependent).</li> <li><code>smallint.</code> Small integer (a machine-dependent subset of the integer domain type).</li> <li><code>numeric(p,d).</code> Fixed point number, with user-specified precision of p digits, with d digits to the right of decimal point.    p \u8868\u793a\u6709\u6548\u6570\u5b57\u4f4d\u6570, d \u8868\u793a\u5c0f\u6570\u70b9\u540e\u591a\u5c11\u4f4d\u3002 e.g. <code>number(3,1)</code> allows 44.5 to be store exactly,  but neither 444.5 or 0.32</li> <li>real, double precision.  Floating point and double-precision floating point numbers, with machine-dependent precision.</li> <li><code>float(n).</code> Floating point number, with user-specified precision of at least n digits.</li> </ul>"},{"location":"ZJU_CS/Database/db3/#built-in_data_types_in_sql","title":"Built-in Data Types in SQL","text":"<ul> <li>date: Dates, containing a (4 digit) year, month and date e.g. date \u20182005-7-27\u2019</li> <li>time: Time of day, in hours, minutes and seconds. e.g. time \u201809:00:30\u2019         time \u201809:00:30.75\u2019</li> <li>timestamp: date plus time of day e.g. timestamp  \u20182005-7-27 09:00:30.75\u2019</li> <li>interval: period of time e.g. interval  \u20181\u2019 day  <ul> <li>Subtracting a date/time/timestamp value from another gives an interval value.  </li> <li>Interval values can be added to date/time/timestamp values</li> <li>built-in date, time functions: <code>current_date(), current_time(), year(x), month(x), day(x), hour(x), minute(x), second(x)</code></li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/db3/#create_table_construct","title":"Create Table Construct","text":"<p>An SQL relation is defined using the create table command: <pre><code>create table r (A1 D1, A2 D2, ..., An Dn,           (integrity-constraint1),            \n..,         \n(integrity-constraintk))\n</code></pre></p> <ul> <li>\\(r\\) is the name of the relation</li> <li>each \\(Ai\\) is an attribute name in the schema of relation \\(r\\)</li> <li>\\(Di\\) is the data type of values in the domain of attribute \\(Ai\\) </li> </ul> <p>Integrity Constraints in Create Table</p> <ul> <li><code>not null</code></li> <li>primary key \\((A_1,\\ldots,A_n)\\) \u4e0d\u80fd\u4e3a\u7a7a; \u8868\u5185\u4e0d\u80fd\u6709\u76f8\u540c\u7684 keys. \u5426\u5219\u8fd9\u6837\u7684\u6570\u636e\u662f\u63d2\u5165\u4e0d\u8fdb\u53bb\u7684\u3002</li> <li>foreign key \\((A_m,\\ldots,A_n)\\) references r \u9690\u542b\uff1a\u5f15\u7528\u5bf9\u5e94\u8868\u7684\u4e3b\u952e\u3002    </li> </ul> <p>\u5982\u679c\u4e0d\u7b26\u5408\u5b8c\u6574\u6027\u7ea6\u675f\u6761\u4ef6\uff0c\u63d2\u5165\u53ef\u80fd\u4f1a\u5931\u8d25\u3002</p> Example <p> </p> <p>\u53ef\u4ee5\u7ed9\u4e00\u4e2a\u7f3a\u7701\u503c e.g. <code>default 0</code></p> Example <p> </p> <p><code>sec_id</code> can be dropped from primary key above, to ensure a student cannot be registered for two sections of the same course in the same semester</p> <p>\u5982\u679c\u5f15\u7528\u7684\u8868\u4e2d\u6709\u6761\u76ee\u88ab\u5220\u9664\uff0c\u53ef\u80fd\u4f1a\u7834\u574f\u5b8c\u6574\u6027\u7ea6\u675f\u6761\u4ef6\u3002\u6709\u4e0b\u9762\u7684\u65b9\u6cd5\uff1a  </p> <ul> <li>restrict: \u5982\u679c\u6709\u6761\u76ee\u662f\u88ab\u5f15\u7528\u7684\uff0c\u90a3\u4e48\u4e0d\u5141\u8bb8\u5220\u9664\u3002</li> <li>cascade: \u5f15\u7528\u7684\u6761\u76ee\u88ab\u5220\u4e86\u4e4b\u540e\uff0c\u5f15\u7528\u8005\u4e5f\u4e00\u5e76\u5220\u9664</li> <li>set null: \u5f15\u7528\u8005\u7684\u6307\u9488\u8bbe\u4e3a <code>null</code>. </li> <li>set default </li> </ul> <p>\u5982\u679c\u5f15\u7528\u7684\u8868\u4e2d\u6709\u66f4\u65b0\uff0c\u4e5f\u6709\u7c7b\u4f3c\u4e0a\u9762\u7684\u56db\u79cd\u65b9\u6cd5\u3002 \u5728 <code>create table</code> \u4e2d\u5b9a\u4e49  </p> <ul> <li><code>on delete cascade  |set null |restrict |set default</code></li> <li><code>on update cascade  |set null |restrict |set default</code></li> </ul>"},{"location":"ZJU_CS/Database/db3/#drop_and_alter_table_constructs","title":"Drop and Alter Table Constructs","text":"<ul> <li>drop table student Deletes the table and its contents  \u628a\u5185\u5bb9\u548c\u8868\u5168\u5220\u4e86\uff0c\u4e4b\u540e\u4e0d\u80fd\u518d\u5f80\u8868\u91cc\u63d2\u5165\u3002</li> <li>delete from student Deletes all contents of table, but retains table</li> <li>alter table  \u53ef\u4ee5\u52a8\u6001\u4fee\u6539\u8868\u7684\u5b9a\u4e49 <ul> <li><code>alter table r add A D</code><ul> <li>where A is the name of the attribute to be added to relation r  and D is the domain of A.</li> <li>All tuples in the relation are assigned null as the value for the new attribute. e.g. <code>alter table student add resume varchar(256);</code></li> <li>\u8fd8\u53ef\u4ee5\u589e\u52a0\u5916\u952e\u7ea6\u675f\u6761\u4ef6\uff0c\u4e5f\u53ef\u4ee5\u5220\u6389</li> </ul> </li> <li><code>alter table r drop A</code> <ul> <li>where A is the name of an attribute of relation r</li> <li>Dropping of attributes not supported by many databases  \u53ef\u4ee5\u751f\u6210\u4e00\u4e2a\u65b0\u7684\u8868\uff0c\u7136\u540e\u628a\u9664\u4e86\u8981\u5220\u7684\u5217\u4ee5\u5916\u7684\u5217\u642c\u79fb\u8fc7\u53bb\u3002  </li> </ul> </li> </ul> </li> </ul> \u5173\u7cfb\u6570\u636e\u5e93\u7684\u4e09\u5c42\u62bd\u8c61 <ul> <li>\u7528\u6237\u5c42\uff1a\u7531 DML \u5b9a\u4e49\u64cd\u4f5c, \u5982 <code>select</code> \u8bed\u53e5\u3002</li> <li>\u903b\u8f91\u5c42\uff1a\u7531 <code>create table</code> \u51b3\u5b9a\uff0c\u6211\u4eec\u5b9a\u4e49\u4e86\u8868\u7684\u5143\u7d20\uff0c\u4ee5\u53ca\u5404\u79cd\u952e\uff0c\u6784\u6210\u4e86\u6a21\u5f0f\u56fe\u3002</li> </ul>"},{"location":"ZJU_CS/Database/db3/#basic_query_structure","title":"Basic Query Structure","text":""},{"location":"ZJU_CS/Database/db3/#the_select_clause","title":"The <code>select</code> Clause","text":"<p>The <code>select</code> clause list the attributes desired in the result of a query.  </p> <p>SQL names are case insensitive  \u5927\u5c0f\u5199\u4e0d\u654f\u611f\u3002\uff08\u5c5e\u6027\u540d\u5b57\u3001\u8868\u7684\u540d\u5b57\u7b49\uff09</p> <ul> <li>To force the elimination of duplicates, insert the keyword <code>distinct</code> after select. e.g. <code>select distinct dept_name from instructor</code> \u53ef\u4ee5\u52a0 all \u8868\u793a\u4e0d\u53bb\u91cd\uff0c\u52a0\u4e0d\u52a0\u65e0\u6240\u8c13</li> <li>An asterisk in the select clause denotes \u201call attributes\u201d e.g. <code>select * from instructor</code></li> <li>The select clause can contain arithmetic expressions involving the operation, +, \u2013, \\(\\div\\), and /, and operating on constants or attributes of tuples. \u53ef\u4ee5\u6709\u52a0\u51cf\u4e58\u9664\u8fd0\u7b97 e.g. <code>select ID, name, salary/12 from instructor</code></li> </ul>"},{"location":"ZJU_CS/Database/db3/#the_where_clause","title":"The <code>where</code> Clause","text":"<p>The <code>where</code> clause specifies conditions that the result must satisfy.  Corresponds to the selection predicate of the relational algebra.  </p> <ul> <li>SQL includes a <code>between</code> comparison operator e.g. <code>select name from instructor where salary between 90000 and 100000</code></li> <li>Tuple comparison \u5143\u7ec4\u76f8\u7b49\u7b49\u4ef7\u4e8e\u5404\u4e2a\u5143\u7d20\u90fd\u76f8\u7b49\u3002 e.g. <code>select name, course_id from instructor, teaches where (instructor.ID, dept_name) = (teaches.ID, \u2019Biology\u2019);</code> </li> </ul>"},{"location":"ZJU_CS/Database/db3/#the_from_clause","title":"The <code>from</code> clause","text":"<p>The <code>from</code> clause lists the relations involved in the query. Corresponds to the Cartesian product operation of the relational algebra.  </p>"},{"location":"ZJU_CS/Database/db3/#natural_join","title":"Natural Join","text":"<p>e.g. <code>select * from instructor natural join teaches;</code></p> <p>e.g. <code>select name, course_id from instructor, teaches where instructor.ID = teaches.ID;</code> <code>select name, course_id from instructor natural join teaches;</code>  \u4e0a\u9762\u4e24\u6761\u8bed\u53e5\u662f\u7b49\u4ef7\u7684\u3002</p> <p>Unrelated attributes with same name which get equated incorrectly! </p> <p>Example</p> <p><code>course(course_id,title, dept_name,credits\uff09</code>, <code>teaches(ID, course_id,sec_id,semester, year)</code>, <code>instructor(ID, name, dept_name,salary\uff09</code> \u8fd9\u91cc\u7684 department \u542b\u4e49\u5404\u6709\u4e0d\u540c\uff0c\u4e0d\u80fd\u76f4\u63a5\u81ea\u7136\u8fde\u63a5\u3002 \u53ef\u4ee5\u5199\u6210 <code>select name, title from (instructor natural join teaches\uff09join course using(course_id);</code> \u5373\u89c4\u5b9a\u8fde\u63a5\u7684\u5c5e\u6027\uff0c\u5bf9\u5e94\u4e8e \\(\\sigma_\\theta\\) </p> <p>Find students who takes courses across his/her department. \u53ef\u5199\u4f5c </p> <pre><code>select distinct student.id\n    from (student natural join takes) \n           join course using (course_id\uff09 \n    where student.dept_name &lt;&gt; course.dept_name\n</code></pre>"},{"location":"ZJU_CS/Database/db3/#the_rename_operation","title":"The Rename Operation","text":"<p>The SQL allows renaming relations and attributes using the <code>as</code> clause. <code>old-name as new-name</code></p> <p>e.g. <code>select distinct T. name from instructor as T, instructor as S where T.salary &gt; S.salary and S.dept_name = \u2018Comp. Sci.\u2019</code></p> <ul> <li>Keyword <code>as</code> is optional and may be omitted.  </li> </ul>"},{"location":"ZJU_CS/Database/db3/#string_operations","title":"String Operations","text":"<p>SQL includes a string-matching operator for comparisons on character strings.  The operator <code>like</code> uses patterns that are described using two special characters. </p> <p>\u6ce8\u610f\u5355\u5f15\u53f7\u8868\u793a\u5b57\u7b26\u4e32\u3002</p> <ul> <li>percent (%).  The % character matches any substring. e.g. <code>select name from instructor where name like '%dar%';</code> \u627e\u540d\u5b57\u91cc\u9762\u542b\u6709 <code>dar</code> \u7684\u5b57\u7b26\u4e32\u3002 </li> <li>underscore (_).  The _ character matches any character.  </li> </ul> <p>Match the string</p> <p>\u5339\u914d\u5b57\u7b26\u4e32 <code>'100 %'</code> \u4f46\u662f <code>%</code> \u7b26\u53f7\u88ab\u6211\u4eec\u4f5c\u4e3a\u4e86\u901a\u914d\u7b26\uff0c\u8fd9\u91cc\u6211\u4eec\u9700\u8981\u7528\u5230\u8f6c\u4e49\u7b26 <code>\\</code>. <code>\\%</code> \u5373\u5c06 <code>%</code> \u4f5c\u4e3a\u6b63\u5e38\u5b57\u7b26\u5339\u914d\u3002 <code>\\</code> \u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u57fa\u672c\u7b26\u53f7\uff0c\u6211\u4eec\u9700\u8981\u5728\u540e\u9762\u5199\u51fa <code>escape</code> \u8868\u793a\u5176\u5728\u8fd9\u91cc\u4f5c\u4e3a\u8f6c\u4e49\u7b26\u3002\u7c7b\u4f3c\u5730\u6211\u4eec\u8fd8\u53ef\u4ee5\u5c06\u8f6c\u4e49\u7b26\u5b9a\u4e49\u4e3a <code>#</code>.  <pre><code>like \u2018100 \\%'  escape  '\\' \nlike \u2018100 \\%'  \nlike \u2018100  #%'  escape  \u2018#' \n</code></pre></p> <p>SQL supports a variety of string operations such as</p> <ul> <li>concatenation (using <code>||</code>)</li> <li>converting from upper to lower case (and vice versa)</li> <li>finding string length, extracting substrings, etc.  </li> </ul>"},{"location":"ZJU_CS/Database/db3/#ordering_the_display_of_tuples","title":"Ordering the Display of Tuples","text":"<p>\u5173\u7cfb\u662f\u65e0\u5e8f\u7684\uff0c\u4f46\u6211\u4eec\u53ef\u80fd\u89c4\u5b9a\u663e\u793a\u51fa\u6765\u7684\u987a\u5e8f\u3002</p> <ul> <li>We may specify desc for descending order or asc for ascending order, for each attribute; ascending order is the default. e.g. <code>order by name desc</code> \u53ef\u4ee5\u6392\u5e8f\u7684\u7c7b\u578b\uff0c\u5982\u5b57\u7b26\u4e32\u3001\u6570\u5b57\u3002</li> <li>Can sort on multiple attributes e.g. <code>order by  dept_name, name</code> \u5148\u6309\u7b2c\u4e00\u4e2a\u6392\uff0c\u5982\u679c\u7b2c\u4e00\u4e2a\u5143\u7d20\u76f8\u540c\u518d\u6309\u7b2c\u4e8c\u4e2a\u6392\u3002</li> </ul>"},{"location":"ZJU_CS/Database/db3/#the_limit_clause","title":"The <code>limit</code> Clause","text":"<p>The <code>limit</code> clause can be used to constrain the number of rows returned by the select statement.  limit clause takes one or two numeric arguments, which must both be nonnegative integer constants: </p> <ul> <li><code>limit offset, row_count</code></li> <li><code>limit row_count == limit 0, row_count</code></li> </ul> <p>e.g. <code>select  name from instructor order by salary desc limit 3\uff1b   //  limit 0,3</code></p>"},{"location":"ZJU_CS/Database/db3/#set_operations","title":"Set Operations","text":"<ul> <li><code>union, intersect, except</code> \u662f\u4e25\u683c\u7684\u96c6\u5408\u64cd\u4f5c\uff0c\u4f1a\u5bf9\u7ed3\u679c\u53bb\u91cd.</li> <li><code>union all</code>, <code>intersect all</code> and <code>except all</code>. \u4fdd\u6301\u591a\u91cd\u96c6\u3002</li> </ul> Example"},{"location":"ZJU_CS/Database/db3/#null_values","title":"Null Values","text":"<p>null signifies an unknown value or that a value does not exist.</p> <ul> <li>The result of any arithmetic expression involving null is null. e.g. <code>5 + null</code> returns null</li> <li>The predicate is null can be used to check for null values. e.g. Find all instructors whose salary is null.  <code>select name from instructor where salary is null</code></li> <li>Comparisons with null values return the special truth value: unknown.  </li> </ul> <ul> <li>Result of select predicate is treated as false if it evaluates to unknown</li> </ul>"},{"location":"ZJU_CS/Database/db3/#aggregate_functions","title":"Aggregate Functions","text":"Example <p>\u6ce8\u610f\u5728 <code>select</code> \u91cc\u51fa\u73b0\u7684\u5c5e\u6027\uff0c\u9664\u4e86\u7edf\u8ba1\u51fd\u6570\u4ee5\u5916\uff0c\u4e00\u5b9a\u8981\u662f\u5206\u7ec4\u5c5e\u6027\u91cc\u51fa\u73b0\u8fc7\u7684\u3002</p>"},{"location":"ZJU_CS/Database/db3/#having_clause","title":"Having Clause","text":"<p>\u5bf9\u5206\u7ec4\u540e\u7684\u7ec4\u8fdb\u884c\u7b5b\u9009\u3002  </p> <p>e.g. <pre><code>select dept_name, count (*) as cnt\nfrom instructor\nwhere  salary &gt;=100000\ngroup by dept_name\nhaving  count (*) &gt; 10\norder by cnt;\n</code></pre></p> <p>predicates in the <code>having</code> clause are applied after the formation of groups whereas predicates in the <code>where</code> clause are applied before forming groups.  </p>"},{"location":"ZJU_CS/Database/db3/#null_values_and_aggregates","title":"Null Values and Aggregates","text":"<p><code>select sum (salary) from instructor</code> </p> <ul> <li>Above statement ignores null amounts</li> <li>Result is null if there is no non-null amount</li> <li>All aggregate operations except <code>count(*)</code> ignore tuples with null values on the aggregated attributes</li> </ul> Arithmetric expression with Aggregate functions <p> </p> <p>\u7b2c\u4e8c\u4e2a\u8868\u793a\u91cd\u540d\u7387\u5c0f\u4e8e\u5343\u5206\u4e4b\u4e00\u7684\u7cfb\u3002</p>"},{"location":"ZJU_CS/Database/db3/#nested_subqueries","title":"Nested Subqueries","text":"<p>A subquery is a select-from-where expression that is nested within another query.</p>"},{"location":"ZJU_CS/Database/db3/#set_membership","title":"Set Membership","text":"<p><code>in, not in</code></p> Example <p> </p> <p>\u9664\u4e86\u5355\u4e2a\u5143\u7d20\u5916\uff0c\u5143\u7ec4\u4e5f\u53ef\u4ee5\u4f7f\u7528 <code>in, not in</code> </p>"},{"location":"ZJU_CS/Database/db3/#set_comparison","title":"Set Comparison","text":"<ul> <li><code>some</code> \u67d0\u4e9b\u6210\u5458   </li> <li><code>all</code> \u6240\u6709\u6210\u5458</li> </ul> <p>Example</p> <p>\u5de5\u8d44\u5927\u4e8e\u751f\u7269\u7cfb\u4e2d\u7684\u67d0\u4e9b\u8001\u5e08\u7684\u8001\u5e08. <pre><code>select name\nfrom instructor\nwhere salary &gt; some (select salary\n                                    from instructor\n                                    where dept_name = \u2019Biology\u2019);\n</code></pre></p>"},{"location":"ZJU_CS/Database/db3/#scalar_subquery","title":"Scalar Subquery","text":"<p>Scalar (\u6807\u91cf) subquery is one which is used where a single value is expected.  </p> <p>Example</p> <pre><code>select name\nfrom instructor\nwhere  salary * 10 &gt; \n    (select budget  from department \n    where department.dept_name = instructor.dept_name)\n</code></pre> <p>\u8fd9\u91cc <code>dept_name</code> \u662f\u8fd9\u4e2a\u8868\u7684\u4e3b\u952e\uff0c\u53ea\u8fd4\u56de\u4e00\u4e2a\u5143\u7ec4\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u662f\u53ef\u4ee5\u4e0d\u7528 <code>some, all</code> \u7684\u3002</p> <p>Runtime error if subquery returns more than one result tuple.  </p>"},{"location":"ZJU_CS/Database/db3/#test_for_empty_relations","title":"Test for Empty Relations","text":"<p>The exists construct returns the value true if the argument subquery is nonempty.</p> <ul> <li><code>exists r</code> \\(\\Leftrightarrow r \\neq \\emptyset\\)</li> <li><code>not exists r</code> \\(\\Leftrightarrow r = \\emptyset\\)</li> </ul> <p>Example</p> <p>09FALL \u5f00\u7684\u8bfe\uff0c\u800c\u4e14 10SPRING \u4e5f\u5f00\u4e86\u8bfe\u3002 <pre><code>select course_id\nfrom section as S\nwhere semester = \u2019Fall\u2019 and year= 2009 and                exists (select *                            \nfrom section as T                      \n    where semester = \u2019Spring\u2019 and year= 2010 and S.course_id= T.course_id);\n</code></pre></p> <p>Example</p> <p>Find all students who have taken all courses offered in the Biology department. SQL \u8bed\u53e5\u5f80\u5f80\u9700\u8981\u9006\u5411\u8003\u8651\uff0c\u5373\u627e\u5230\u8fd9\u6837\u7684\u5b66\u751f\uff0c\u4e0d\u5b58\u5728\u4ed6\u6ca1\u9009\u8fc7\u7684\u751f\u7269\u7cfb\u7684\u8bfe\u3002 <pre><code>select distinct S.ID, S.name\nfrom student as S\nwhere not exists ( (select course_id\n                        from course\n                        where dept_name = \u2019Biology\u2019)\n                except\n                    (select T.course_id\n                        from takes as T\n                        where S.ID = T.ID));\n</code></pre></p>"},{"location":"ZJU_CS/Database/db3/#test_for_absence_of_duplicate_tuples","title":"Test for Absence of Duplicate Tuples","text":"<p>The <code>unique</code> construct tests whether a subquery has any duplicate tuples in its result. \u9a8c\u8bc1\u662f\u5426\u662f\u4e00\u4e2a\u96c6\u5408\uff0c\u800c\u975e\u591a\u91cd\u96c6\u3002  </p> <ul> <li>Evaluates to \u201ctrue\u201d on an empty set.  \u53ef\u4ee5\u5c06 unique \u7406\u89e3\u4e3a at most once. </li> </ul> <p>Example</p> <p> </p> <p>\u5982\u679c\u4e0d\u52a0 exist, \u53ef\u80fd\u6709\u6ca1\u5f00\u8fc7\u7684\u8bfe\u4e5f\u88ab\u7b97\u8fdb\u53bb\u3002\u6211\u4eec\u8fd9\u91cc\u6c42\u5f97\u662f\u6070\u597d\u53ea\u5f00\u8fc7\u4e00\u6b21\u7684\u3002</p> Example <p> </p> <p>\u4e5f\u53ef\u4ee5\u7528 <code>group by count(*) &gt; 1</code> \u5b9e\u73b0\u3002</p>"},{"location":"ZJU_CS/Database/db3/#with_clause","title":"With Clause","text":"<p>The <code>with</code> clause provides a way of defining a temporary view whose definition is available only to the query in which the with clause occurs. \u6784\u9020\u4e00\u4e2a\u4e34\u65f6\u8868  </p> <p>Example</p> <p>Find all departments with the maximum budget. <pre><code>with max_budget (value) as \n    (select max(budget)\n    from department)\nselect dept_name\nfrom department, max_budget\nwhere department.budget = max_budget.value;\n</code></pre></p> Complex Queries using With Clause <p> </p>"},{"location":"ZJU_CS/Database/db3/#modification_of_the_database","title":"Modification of the Database","text":""},{"location":"ZJU_CS/Database/db3/#deletion","title":"Deletion","text":"Example"},{"location":"ZJU_CS/Database/db3/#insertion","title":"Insertion","text":"Example <p>\u7b2c\u4e8c\u79cd\u5199\u6cd5\uff0c\u53ef\u4ee5\u4e0d\u7528\u4e25\u683c\u6309\u7167\u5b9a\u4e49\u7684\u5143\u7d20\u987a\u5e8f\uff0c\u53ea\u8981\u548c\u81ea\u5df1\u5199\u7684\u5bf9\u5e94\u5373\u53ef\u3002</p> <p>\u9664\u4e86\u57fa\u672c\u5199\u6cd5\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u5728 <code>insert</code> \u540e\u8ddf\u67e5\u8be2\u8bed\u53e5\uff0c\u628a\u67e5\u8be2\u7ed3\u679c\u63d2\u5165\u5230\u8868\u91cc\u53bb\u3002</p> Example <p> </p>"},{"location":"ZJU_CS/Database/db3/#updates","title":"Updates","text":"<p><code>update ... set ...</code></p> <p>The order is important. So it can be done better using the <code>case</code> statement.  </p> Example <p> </p>"},{"location":"ZJU_CS/Database/db4/","title":"Intermediate SQL","text":"Abstract <ul> <li>Joined Relation</li> <li>SQL Data Types and Schemas</li> <li>Integrity Constraints</li> <li>Views</li> <li>Indexes</li> <li>Transactions</li> <li>Authorization</li> </ul>"},{"location":"ZJU_CS/Database/db4/#joined_relations","title":"Joined Relations","text":"<ul> <li>Join operations take two relations and return as a result another relation.</li> <li>Join operations are typically used as subquery expressions in the from clause</li> <li>Join condition \u2013 defines which tuples in the two relations match, and what attributes are present in the result of the join.</li> <li>Join type \u2013 defines how tuples in each relation that do not match any tuple in the other relation (based on the join condition) are treated.  </li> </ul> <ul> <li>using \u662f\u4e00\u4e2a\u7b49\u503c\u8fde\u63a5\uff0c\u7c7b\u4f3c\u4e8e\u81ea\u7136\u8fde\u63a5\uff0c\u8fd9\u4e9b\u5c5e\u6027\u76f8\u540c\u624d\u80fd\u8fde\u63a5</li> </ul>"},{"location":"ZJU_CS/Database/db4/#sql_data_types_and_schemas","title":"SQL Data Types and Schemas","text":""},{"location":"ZJU_CS/Database/db4/#user-defined_types","title":"User-Defined Types","text":"<p><code>create type</code> construct in SQL creates user-defined type.  </p> <p>Example</p> <p><code>create type Dollars as numeric (12,2) final</code> \u5b9a\u4e49\u4e86 <code>Dollars</code> \u8fd9\u4e2a\u7c7b\u578b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u628a\u5b83\u5f53\u4f5c\u5143\u7c7b\u578b\u4f7f\u7528\u3002 <pre><code>create table department\n    (dept_name varchar (20),\n    building varchar (15),\n    budget Dollars);\n</code></pre></p> <p>\u8fd9\u6837\u53ef\u4ee5\u652f\u6301\u5f3a\u7c7b\u578b\u68c0\u67e5\uff0c\u53ef\u4ee5\u9632\u6b62\u5982 200 \u7f8e\u5143 + 300 RMB \u5f97\u5230 500 \u5143\u7684\u9519\u8bef\u3002</p>"},{"location":"ZJU_CS/Database/db4/#domains","title":"Domains","text":"<p><code>create domain</code> construct in SQL-92 creates user-defined domain types.  </p> <p>Domains can have constraints, such as <code>not null</code>, specified on them.</p> <p>Example</p> <p><code>create domain person_name char(20) not null</code> <pre><code>create domain degree_level varchar(10)\n    constraint degree_level_test\n    check (value in (\u2019Bachelors\u2019, \u2019Masters\u2019, \u2019Doctorate\u2019));\n</code></pre> \u8fd9\u91cc\u7684 constraint \u53ef\u4ee5\u5bf9 domain \u7684\u53d6\u503c\u8fdb\u884c\u9650\u5236\u3002</p> <p>\u4e0d\u540c type \u7684\u53d8\u91cf\uff0c\u5373\u4f7f\u5b9a\u4e49\u76f8\u540c\uff0c\u4e5f\u4e0d\u80fd\u8fdb\u884c\u8fd0\u7b97\u3002\u4e0d\u540c domain \u7684\u53d8\u91cf\uff08\u57fa\u7840\u7c7b\u578b\u76f8\u540c\uff09\u53ef\u4ee5\u8fd0\u7b97\u3002</p>"},{"location":"ZJU_CS/Database/db4/#large-object_types","title":"Large-Object Types","text":"<p>Large objects (photos, videos, CAD files, etc.) are stored as a large object:  </p> <ul> <li> <p>blob: binary large object -- object is a large collection of uninterpreted binary data (whose interpretation is left to an application outside of the database system) \u5b58\u50a8\u5927\u5bf9\u8c61\u6570\u636e\u7c7b\u578b\uff0c\u5b9e\u9645\u4e0a\u53ea\u662f\u5b58\u653e\u6307\u9488\u3002</p> BLOB in MySQL <ul> <li>TinyBlob \uff1a  0 ~ 255 bytes.</li> <li>Blob\uff1a 0 ~ 64K bytes.</li> <li>MediumBlob \uff1a 0 ~ 16M bytes.</li> <li>LargeBlob : 0 ~ 4G  bytes.</li> </ul> </li> <li> <p>clob: character large object -- object is a large collection of character data \u6587\u672c\u5927\u5bf9\u8c61  </p> </li> </ul>"},{"location":"ZJU_CS/Database/db4/#integrity_constraints","title":"Integrity Constraints","text":"<ul> <li><code>not null</code></li> <li><code>primary key</code></li> <li><code>unique</code> <code>unique(A1, A2, ..., Am)</code> The unique specification states that the attributes <code>A1, A2, ..., Am</code> form a super key \uff08\u4e0d\u4e00\u5b9a\u662f candidate key) \u6bd4\u5982\u5b66\u751f\u4e2a\u4eba\u4fe1\u606f\uff0c\u6211\u4eec\u77e5\u9053 ID \u662f\u4e3b\u952e\uff0c\u4f46\u5b9e\u9645\u4e0a\u90ae\u7bb1\u3001\u7535\u8bdd\u53f7\u7801\u7b49\u4e5f\u4e0d\u80fd\u76f8\u540c\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u8981\u901a\u8fc7\u8bed\u53e5\u544a\u8bc9\u6570\u636e\u5e93\uff0c\u6570\u636e\u5e93\u4f1a\u4e3a\u6211\u4eec\u7ef4\u62a4\u8fd9\u4e9b\u7ea6\u675f\u6761\u4ef6\u3002   Candidate keys are permitted to be null (in contrast to primary keys).  </li> <li> <p><code>check (P)</code>, where P is a predicate  </p> Example <p> </p> <p>\u53ef\u4ee5\u6709\u590d\u6742\u67e5\u8be2\uff0c\u4f46\u8bb8\u591a\u6570\u636e\u5e93\u4e0d\u652f\u6301\u3002e.g. <code>check ((course_id, sec_id, semester, year)  in (select course_id, sec_id, semester, year from teaches))</code> * <code>foreign key</code></p> <p>Integrity Constraint Violation During Transactions</p> <p> </p> <p>\u5728\u4e00\u4e2a\u4eba\u7684\u7236\u6bcd\u8fd8\u6ca1\u63d2\u5165\u7684\u65f6\u5019\uff0c\u65e0\u6cd5\u63d2\u5165\u8fd9\u4e2a\u4eba\uff0c\u4f9d\u6b21\u7c7b\u63a8\u3002 \u53ef\u4ee5\u89c4\u5b9a\uff0c\u5728\u8fd9\u4e2a\u4e8b\u52a1\u7ed3\u675f\u65f6\u518d\u68c0\u67e5\u5b8c\u6574\u6027\u7ea6\u675f\u6761\u4ef6\uff0c\u4e2d\u95f4\u72b6\u6001\u53ef\u4ee5\u4e0d\u6ee1\u8db3\u3002</p> </li> <li> <p><code>assertion</code> <code>create assertion &lt;assertion-name&gt; check &lt;predicate&gt;;</code> </p> Example <p>\u9a8c\u8bc1\u4e00\u4e2a\u5b66\u751f\u83b7\u5f97\u7684\u603b\u5b66\u5206\uff0c\u8981\u7b49\u4e8e\u83b7\u5f97\u7684\u6bcf\u95e8\u8bfe\u7684\u5b66\u5206\u7684\u603b\u548c\u3002  </p> <p>\u4f46\u4f7f\u7528 <code>assert</code> \u540e\uff0c\u6bcf\u4e2a\u5143\u7ec4\u7684\u6bcf\u6b21\u72b6\u6001\u66f4\u65b0\u65f6\u90fd\u8981\u8fdb\u884c\u68c0\u67e5\uff0c\u5f00\u9500\u8fc7\u5927\uff0c\u6570\u636e\u5e93\u4e00\u822c\u4e0d\u652f\u6301\u3002</p> </li> </ul>"},{"location":"ZJU_CS/Database/db4/#views","title":"Views","text":"<p>A view provides a mechanism to hide certain data from the view of certain users.   </p>"},{"location":"ZJU_CS/Database/db4/#view_definition","title":"View Definition","text":"<p>A view is defined using the create view statement which has the form <code>create view v as &lt; query expression &gt;</code> </p> Example <p> </p> <p>view \u53ef\u4ee5\u9690\u6389\u4e00\u4e9b\u7ec6\u8282\uff0c\u6216\u8005\u52a0\u4e0a\u4e00\u4e9b\u7edf\u8ba1\u6570\u636e\u3002\u53ef\u4ee5\u628a view \u5f53\u4f5c\u8868\u8fdb\u884c\u67e5\u8be2\u3002</p> <ul> <li>\u9690\u85cf\u4e0d\u5fc5\u8981\u7684\u7ec6\u8282\uff0c\u7b80\u5316\u7528\u6237\u89c6\u91ce</li> <li>\u65b9\u4fbf\u67e5\u8be2\u4e66\u5199</li> <li>\u6709\u5229\u4e8e\u6743\u9650\u63a7\u5236\uff08\u5982\u7528\u6237\u53ef\u4ee5\u770b\u5230\u5de5\u8d44\u603b\u548c\uff0c\u4f46\u4e0d\u80fd\u770b\u5230\u6bcf\u4e2a\u4eba\u7684\u5de5\u8d44\uff09</li> <li>\u6709\u72ec\u7acb\u6027\uff0c\u4f7f\u5f97\u6570\u636e\u5e93\u5e94\u7528\u5177\u6709\u8f83\u5f3a\u7684\u9002\u5e94\u6027\u3002</li> </ul> <p>\u53ef\u4ee5\u57fa\u4e8e\u89c6\u56fe\u518d\u5b9a\u4e49\u89c6\u56fe\u3002</p> Views Defined Using Other Views <p> </p>"},{"location":"ZJU_CS/Database/db4/#update_of_a_view","title":"Update of a View","text":"<p>\u5bf9\u4e00\u4e2a view \u8fdb\u884c\u4fee\u6539\uff0c\u76f8\u5f53\u4e8e\u901a\u8fc7\u8fd9\u4e2a\u7a97\u53e3\u5bf9\u539f\u8868\u7ee7\u7eed\u4fee\u6539\u3002  </p> <p>Example</p> <p> </p> <p>\u63d2\u5165\u540e\uff0c\u539f\u8868\u4e5f\u4f1a\u6709\u8fd9\u6761\u6570\u636e\uff0c\u5bf9\u4e8e\u5176\u7f3a\u5c11\u7684 <code>salary</code> \u5c5e\u6027\uff0c\u6211\u4eec\u8bbe\u5b9a\u4e3a <code>NULL</code>. \u5982\u679c\u8fd9\u4e2a\u5c5e\u6027\u7684\u7ea6\u675f\u662f <code>not NULL</code> \u7684\uff0c\u90a3\u4e48\u6211\u4eec\u65e0\u6cd5\u6267\u884c\u8fd9\u6b21\u63d2\u5165\u3002</p> <p>\u5982\u679c\u89c6\u56fe\u4e2d\u6709\u7edf\u8ba1\u7684\u5c5e\u6027\uff0c\u90a3\u4e48\u662f\u4e0d\u53ef\u4fee\u6539\u7684\u3002 \u6d89\u53ca\u5230\u5355\u4e2a\u8868\uff0c\u53ea\u662f\u9009\u51fa\u4e86\u90e8\u5206\u5c5e\u6027\uff08\u53bb\u6389\u975e\u4e3b\u5c5e\u6027\uff09\u7684\u884c\u5217\u89c6\u56fe\u662f\u53ef\u66f4\u65b0\u7684\u3002</p>"},{"location":"ZJU_CS/Database/db4/#view_and_logical_data_indepencence","title":"View and Logical Data Indepencence","text":"<p>If relation \\(S(a, b, c)\\) is split into two sub relations \\(S1(a,b)\\) and \\(S2(a,c)\\) How to realize the logical data independence?   </p> <ol> <li><code>create table S1...;</code> <code>create table S2...;</code></li> <li><code>insert into S1 select a, b from S;</code> <code>insert into S2 select a, c from S;</code></li> <li><code>drop table S;</code></li> <li><code>create view S(a, b, c) as select a, b, c from S1 natural join S2;</code> </li> </ol> <p><code>select * from S where...</code> \u5b9e\u9645\u4e0a\u662f\u5728\u505a <code>select * from S1 natural join S2 where ...</code> \uff08\u7cfb\u7edf\u4f1a\u5e2e\u6211\u8fd9\u6837\u505a\uff0c\u7a0b\u5e8f\u4e0d\u7528\u6539\uff0c\u53ea\u662f\u6267\u884c\u6539\u53d8\u4e86\uff09 <code>insert into S values (1,2,3)</code> \u5b9e\u9645\u4e0a\u662f\u5728\u505a <code>insert into S1 values (1,2)</code> \u548c <code>insert into S2 values (1,3)</code> </p>"},{"location":"ZJU_CS/Database/db4/#materialized_views","title":"*Materialized Views","text":"<p>\u7269\u5316\u89c6\u56fe</p> <p>Materializing a view: create a physical table containing all the tuples in the result of the query defining the view. \u672c\u6765\u7684\u89c6\u56fe\u662f\u4e00\u4e2a\u865a\u7684\u8868\uff0c\u4e3a\u4e86\u67e5\u8be2\u6267\u884c\u6548\u7387\uff0c\u6211\u4eec\u53ef\u4ee5\u628a view \u5b9a\u4e49\u4e3a Materializing view, \u5373\u751f\u6210\u4e00\u5f20\u4e34\u65f6\u8868\u4e0e\u5176\u5bf9\u5e94\u3002  </p> <p>If relations used in the query are updated, the materialized view result becomes out of date.     * Need to maintain the view, by updating the view whenever the underlying relations are updated.   </p>"},{"location":"ZJU_CS/Database/db4/#indexes","title":"Indexes","text":"<p>Indices are data structures used to speed up access to records with specified values for index attributes.  </p> <p>Index \u76f8\u5f53\u4e8e\u5728\u6570\u636e\u4e0a\u5efa\u7acb\u4e86 B+ \u6811\u7d22\u5f15\u3002\uff08\u7269\u7406\u5c42\u9762\uff09</p> Example <p><pre><code>create table student    \n(   ID varchar (5),\n    name varchar (20) not null,\n        dept_name varchar (20),\n            tot_cred numeric (3,0) default 0,\n                primary key (ID) )\ncreate index studentID_index on student(ID)\n</code></pre> <code>select * from student where ID = \u201812345\u2019</code> \u5728\u6570\u636e\u5e93\u5185\u4e0d\u540c\u7684\u7269\u7406\u5b9e\u73b0\u6709\u4e0d\u540c\u7684\u67e5\u627e\u65b9\u6cd5\u3002 \u5982\u679c\u6ca1\u6709\u5b9a\u4e49\u7d22\u5f15\uff0c\u53ea\u80fd\u987a\u5e8f\u67e5\u627e\u3002\u5982\u679c\u6709\u7d22\u5f15\uff0c\u7cfb\u7edf\u5185\u4f1a\u5229\u7528\u7d22\u5f15\u67e5\u627e\u3002  </p>"},{"location":"ZJU_CS/Database/db4/#transactions","title":"Transactions","text":"<ul> <li>Transactions begin implicitly Ended by commit work or rollback work  </li> <li>By default on most databases: each SQL statement commits automatically  <ul> <li>Can turn off auto commit for a session e.g. in MySQL, <code>SET AUTOCOMMIT=0;</code> </li> </ul> </li> </ul> Transaction examplex <pre><code>SET AUTOCOMMIT=0\n\nUPDATE account SET balance=balance-100 WHERE ano=\u20181001\u2019;\nUPDATE account SETbalance=balance+100 WHERE ano=\u20181002\u2019;\nCOMMIT;\n\nUPDATE account SET balance=balance -200 WHERE ano=\u20181003\u2019;\nUPDATE account SET balance=balance+200 WHERE ano=\u20181004\u2019;      COMMIT;\n\nUPDATE account SET balance=balance+balance*2.5%;\nCOMMIT;\n</code></pre>"},{"location":"ZJU_CS/Database/db4/#acid_properties","title":"ACID Properties","text":"<p>A  transaction  is a unit of program execution that accesses and possibly updates various data items.To preserve the integrity of data the database system must ensure: (\u539f\u5b50\u6027\u3001\u4e00\u81f4\u6027\u3001\u72ec\u7acb\u6027\u3001\u6301\u7eed\u6027)</p> <ul> <li>Atomicity. Either all operations of the transaction are properly reflected in the database or none are.</li> <li>Consistency. Execution of a transaction in isolation preserves the consistency of the database. \u6570\u636e\u5e93\u6267\u884c\u4e8b\u52a1\u524d\u540e\u90fd\u662f\u4e00\u81f4\u7684\u3002</li> <li>Isolation. Although multiple transactions may execute concurrently, each transaction must be unaware of other concurrently executing transactions.  Intermediate transaction results must be hidden from other concurrently executed transactions.   \u5f88\u591a\u4e8b\u60c5\u5171\u540c\u6267\u884c\uff0c\u4ed6\u4eec\u4e0d\u80fd\u4e92\u76f8\u5f71\u54cd\u3002<ul> <li>That is, for every pair of transactions \\(T_i\\) and \\(T_j\\), it appears to \\(T_i\\) that either \\(T_j\\), finished execution before \\(T_i\\) started, or \\(T_j\\) started execution after \\(T_i\\) finished.</li> </ul> </li> <li>Durability. After a transaction completes successfully, the changes it has made to the database persist, even if there are system failures.  \u6570\u636e\u5e93\u7684\u4e8b\u52a1\u4e00\u65e6\u63d0\u4ea4\uff0c\u8fd9\u4e2a\u4fee\u6539\u5c31\u8981\u6301\u7eed\u5730\u4fdd\u5b58\u5230\u6570\u636e\u5e93\u4e2d\u53bb\uff0c\u4e0d\u80fd\u4e22\u5931\u3002\u5982\u78c1\u76d8\u51fa\u95ee\u9898\u4e86\uff0c\u65ad\u7535\u4e86\u7b49\u4f1a\u5f15\u53d1\u8fd9\u4e2a\u95ee\u9898\u3002 \u901a\u5e38\u4f7f\u7528\u65e5\u5fd7\u3002</li> </ul>"},{"location":"ZJU_CS/Database/db4/#authorization","title":"Authorization","text":"<ul> <li>Forms of authorization on parts of the database \u6570\u636e\u5c42\u9762\uff0c\u5373\u8868\u5df2\u7ecf\u5b58\u5728\u6211\u4eec\u53ef\u4ee5\u5bf9\u5176\u8fdb\u884c\u7684\u64cd\u4f5c  <ul> <li>Select - allows reading, but not modification of data.</li> <li>Insert - allows insertion of new data, but not modification of existing data.</li> <li>Update - allows modification, but not deletion of data.</li> <li>Delete - allows deletion of data.</li> </ul> </li> <li>Forms of authorization to modify the database schema \u80fd\u5426\u5b9a\u4e49\u8868\uff0c\u7d22\u5f15\u7b49  <ul> <li>Index - allows creation and deletion of indices.</li> <li>Resources - allows creation of new relations.</li> <li>Alteration - allows addition or deletion of attributes in a relation.</li> <li>Drop - allows deletion of relations.</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/db4/#authorization_specification_in_sql","title":"Authorization Specification in SQL","text":"<p><code>grant &lt;privilege list&gt; on &lt;relation name or view name&gt; to &lt;user list&gt;</code> \u628a\u67d0\u4e2a\u8868\u6216\u8005\u89c6\u56fe\u4e0a\u7684\u6743\u9650\u6388\u6743\u7ed9\u7528\u6237  </p> <p><code>&lt;user list&gt;</code> is:  </p> <ul> <li>a user-id</li> <li><code>public</code>, which allows all valid users the privilege granted</li> <li>A role (more on this later)</li> </ul> Example <p> </p> <p>update \u53ef\u4ee5\u7ec6\u5316\u5230\u5177\u4f53\u53ef\u4ee5\u5bf9\u54ea\u5217\u8fdb\u884c\u4fee\u6539\u3002  </p>"},{"location":"ZJU_CS/Database/db4/#revoking_authorization_in_sql","title":"Revoking Authorization in SQL","text":"<p>The revoke statement is used to revoke authorization. <code>revoke &lt;privilege list&gt; on &lt;relation name or view name&gt; from &lt;user list&gt;</code> </p>"},{"location":"ZJU_CS/Database/db4/#roles","title":"Roles","text":"<p>Privileges can be granted to roles. \u89d2\u8272\u53ef\u4ee5\u7406\u89e3\u4e3a\u4e00\u7ec4\u6743\u9650\u7684\u96c6\u5408\uff0c\u5982\u5b66\u6821\u7684\u6559\u52a1\u7ba1\u7406\u5458\u3001\u8001\u5e08\u3002  </p> <p><code>create role &lt;role-name&gt;</code> \u521b\u9020\u89d2\u8272\uff0c\u968f\u540e\u53ef\u4ee5\u628a\u6743\u9650\u6388\u4e88\u7ed9\u4ed6\u3002 \u7136\u540e\u6211\u4eec\u53ef\u4ee5\u628a\u89d2\u8272\u7684\u6743\u9650\u6388\u4e88\u7ed9\u7528\u6237/\u5176\u4ed6\u89d2\u8272\u3002  </p> Example <pre><code>create role instructor;\ngrant select on takes to instructor;  // \u6388\u4e88\u6743\u9650\u7ed9\u89d2\u8272\ngrant instructor to Amit;   //\u5c06\u89d2\u8272\u7684\u6743\u9650\u6388\u4e88\u7ed9\u7528\u6237\n\ncreate role teaching_assistant;\ngrant teaching_assistant to instructor;  // \u53ef\u4ee5\u5c06\u89d2\u8272\u7684\u6743\u9650\u6388\u4e88\u7ed9\u5176\u4ed6\u89d2\u8272   \n</code></pre>"},{"location":"ZJU_CS/Database/db4/#other_authorization_features","title":"Other Authorization Features","text":"<p>\u5f15\u7528\u7684\u6743\u9650\u6bd4\u8f83\u7279\u6b8a</p> <p><code>references privilege to create foreign key</code></p> <p>Example</p> <p><code>grant reference (dept_name) on department to Mariano;</code> </p> <p>\u5982\u679c\u4e0d\u4f5c\u4e3a\u6743\u9650\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u95f4\u63a5\u7684\u5916\u952e\u7ea6\u675f\u548c cascade \u5220\u6389\u88ab\u5f15\u7528\u7684\u6570\u636e\u3002\uff08\u5220\u6389\u996e\u7528\u8005\uff0c\u5219\u88ab\u5f15\u7528\u8005\u4e5f\u8981\u88ab\u5220\u9664\uff09\u56e0\u6b64\u8fd9\u4e5f\u662f\u4e2a\u6743\u9650</p> <ul> <li>transfer of privileges<ul> <li><code>grant select on department to Amit with grant option;</code>  \u52a0\u4e0a <code>with grant option</code> \u540e\uff0c\u7528\u6237\u53ef\u4ee5\u628a\u83b7\u5f97\u7684\u6743\u9650\u4f20\u9012\u4e0b\u53bb\u3002  </li> <li><code>revoke select on department from Amit, Satoshi cascade;</code> <code>cascade</code> \u628a\u8be5\u7528\u6237\u53ca\u5176\u6388\u4e88\u7684\u6743\u9650\u5168\u90e8\u6536\u56de\uff0c\u7ea7\u8054\u53cd\u5e94\u3002  </li> <li><code>revoke select on department from Amit, Satoshi restrict;</code> <code>restrict</code> \u53ea\u6536\u56de\u8be5\u7528\u6237\u7684\u6743\u9650\u3002  </li> <li><code>revoke grant option  for select on department from Amit;</code> \u6536\u56de\u7528\u6237\u8f6c\u6388\u7684\u6743\u529b\u3002  </li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/db5/","title":"Advanced SQL","text":""},{"location":"ZJU_CS/Database/db5/#accessing_sql_from_a_programming_language","title":"Accessing SQL from a Programming Language","text":"<ul> <li>Not all queries can be expressed in SQL, since SQL does not provide the full expressive power of a general-purpose language. \u4e0d\u662f\u6240\u6709\u7684\u67e5\u8be2\u90fd\u80fd\u7528 SQL \u8bed\u8a00\u8868\u8fbe\u3002</li> <li>Non-declarative actions -- such as printing a report, interacting with a user, or sending the results of a query to a graphical user interface -- cannot be done from within SQL. \u7528\u6237\u4ea4\u4e92\u662f\u56fe\u5f62\u754c\u9762\uff0c\u8bed\u97f3\u3001\u56fe\u50cf\uff0c\u6570\u636e\u5e93\u4e0d\u5177\u5907\u8fd9\u65b9\u9762\u7684\u529f\u80fd\u3002</li> </ul> <p>\u4ece\u9ad8\u7ea7\u8bed\u8a00\uff08\u5982 C\uff09\u8bbf\u95ee\u6570\u636e\u5e93\uff0c\u4e3b\u8981\u662f\u4e0b\u9762\u4e24\u79cd\u65b9\u5f0f\uff1a</p> <ul> <li>API(Application Program Interface) -- A general-purpose program can connect to and communicate with a database server using a collection of functions. \u51fd\u6570\u5e93</li> <li>Embedded SQL -- provides a means by which a program can interact with a database server.  \u628a SQL \u8bed\u53e5\u5d4c\u5165\u5230\u8bed\u8a00\u5185<ul> <li>The SQL statements are translated at compile time into function calls.   </li> <li>At runtime,  these function calls connect to the database  using an API that provides dynamic SQL facilities.  </li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/db5/#jdbc_and_odbc","title":"JDBC and ODBC","text":"<p>API (application-program interface) for a program to interact with a database server Application makes calls to</p> <ul> <li>Connect with the database server \u5efa\u7acb\u8fde\u63a5</li> <li>Send SQL commands to the database server \u6307\u4ee4\u53d1\u9001\u5230\u670d\u52a1\u5668</li> <li>Fetch tuples of result one-by-one into program variables \u62ff\u56de\u7ed3\u679c</li> </ul> <p>SQL \u4e0e C \u8bed\u8a00\u5b58\u5728\u9e3f\u6c9f\uff08\u5982 select \u5f97\u5230\u7684\u662f\u96c6\u5408\uff0c\u4f46\u662f C \u8bed\u8a00\u6ca1\u6709\u8fd9\u79cd\u7c7b\u578b\uff09\u4f1a\u8fd4\u56de\u6307\u9488/\u8fed\u4ee3\u5668</p> <ul> <li>ODBC (Open Database Connectivity) works with C, C++, C#</li> <li>JDBC (Java Database Connectivity) works with Java \u901a\u8fc7\u7c7b\u5b9a\u4e49\uff0c\u5c06\u6570\u636e\u5e93\u64cd\u4f5c\u5c01\u88c5\u5230 Java \u5185</li> <li>Embedded SQL in C</li> <li>SQLJ - embedded SQL in Java</li> <li>JPA(Java Persistence API)  - OR mapping of Java  </li> </ul>"},{"location":"ZJU_CS/Database/db5/#jdbc","title":"JDBC","text":"<p>JDBC is a Java API for communicating with database systems supporting SQL.  </p> <pre><code>public static void JDBCexample(String dbid, String userid, String passwd) \n        { \n     try { \n   Connection conn = DriverManager.getConnection(\"jdbc:oracle:thin:@db.yale.edu:2000:univdb\", userid, passwd); \n          Statement stmt = conn.createStatement(); \n              ... Do Actual Work ...\n          stmt.close(); \n          conn.close(); \n     }      \n     catch (SQLException sqle) {        \n          System.out.println(\"SQLException : \" + sqle);     \n     }      \n        }\n</code></pre> <ul> <li>Open a connection</li> <li>Create a \u201cstatement\u201d object</li> <li>Execute queries using the Statement object to send queries and fetch results</li> <li>Exception mechanism to handle errors</li> </ul> Example <ul> <li>Update to database <pre><code>Update to database \ntry {\n    stmt.executeUpdate(\n        \"insert into instructor values(\u201977987\u2019, \u2019Kim\u2019, \u2019Physics\u2019, 98000)\");\n        } catch (SQLException sqle)\n        {\n            System.out.println(\"Could not insert tuple. \" + sqle);\n        }\n</code></pre></li> <li>Execute query and fetch and print results <pre><code>ResultSet rset = stmt.executeQuery(\n        \"select dept_name, avg (salary)\n        from instructor\n        group by dept_name\");\n        while (rset.next()) {\n            System.out.println(rset.getString(\"dept_name\") + \" \" + rset.getFloat(2));\n        }\n</code></pre></li> <li>Getting result fields: <pre><code>rset.getString(\u201cdept_name\u201d) and rset.getString(1) equivalent if dept_name is the first argument of select result.\n</code></pre></li> <li>Dealing with Null values <pre><code>int a = rset.getInt(\u201ca\u201d);\n    if (rset.wasNull()) Systems.out.println(\u201cGot null value\u201d);\n</code></pre></li> </ul> <p>Prepared Statement </p> Prepared Statement <p><pre><code>PreparedStatement pStmt = conn.prepareStatement(\n        \"insert into instructor values(?,?,?,?)\");\npStmt.setString(1, \"88877\");      \npStmt.setString(2, \"Perry\");\npStmt.setString(3, \"Finance\");   \npStmt.setInt(4, 125000);\npStmt.executeUpdate();    \npStmt.setString(1, \"88878\");\npStmt.executeUpdate();\n</code></pre> \u8fd9\u91cc\u7a7a\u683c\u662f\u5360\u4f4d\u7b26\uff0c\u8868\u793a\u6267\u884c\u65f6\u9700\u8981\u63d0\u4f9b\u56db\u4e2a\u53c2\u6570\u3002 <code>setString, setInt</code> \u5c31\u662f\u628a\u7b2c\u51e0\u4e2a\u5360\u4f4d\u7b26\u8bbe\u7f6e\u4e3a\u53c2\u6570\uff0c\u5e76 <code>executeUpdate</code> \u8fdb\u884c\u63d2\u5165\u3002</p> <p>SQL Injection</p> <p>Always use prepared statements when taking an input from the user and adding it to a query. NEVER create a query by concatenating strings which you get as inputs. SQL \u6ce8\u5165\u653b\u51fb\u3002</p> <p>Suppose query is constructed using <code>select * from instructor where name = \u2019\" + name + \u201c \u2019</code> Suppose the user, instead of entering a name, enters: <code>X\u2019 or \u2019Y\u2019 = \u2019Y</code> then the resulting string of the statement becomes: <code>select * from instructor where name = \u2019\" + \"X\u2019 or \u2019Y\u2019 = \u2019Y\" + \u201c\u2019</code> which is: <code>select * from instructor where name = \u2019X\u2019 or \u2019Y\u2019 = \u2019Y\u2019</code>  User could have even used <code>X\u2019; update instructor set salary = salary + 10000;</code> then <code>select * from instructor where name = \u2019X\u2019; update instructor set salary = salary + 10000;</code> Always use prepared statements, with user inputs as parameters</p> <p>Metadata Features </p> <ul> <li> <p>ResultSet metadata </p> Example <p>after executing query to get a ResultSet rs: <pre><code>ResultSetMetaData rsmd = rs.getMetaData();\nfor(int i = 1; i &lt;= rsmd.getColumnCount(); i++) {\n    System.out.println(rsmd.getColumnName(i));\n            System.out.println(rsmd.getColumnTypeName(i));\n    }\n</code></pre></p> </li> <li> <p>Database metadata</p> Example <pre><code>DatabaseMetaData dbmd = conn.getMetaData();\nResultSet rs = dbmd.getColumns(null, \"univdb\", \"department\", \"%\");\n// Arguments to getColumns: Catalog, Schema-pattern, Table-pattern,\n// and Column-Pattern\n// Returns: One row for each column; row has a number of attributes\n// such as COLUMN_NAME, TYPE_NAME\nwhile( rs.next()) {\n    System.out.println(rs.getString(\"COLUMN_NAME\"),\n                                                    rs.getString(\"TYPE_NAME\");\n</code></pre> </li> </ul> <p>Transaction Control in JDBC </p> <ul> <li>Can turn off automatic commit on a connection <code>conn.setAutoCommit(false);</code></li> <li>Transactions must then be committed or rolled back explicitly <code>conn.commit();</code> or <code>conn.rollback();</code></li> <li><code>conn.setAutoCommit(true)</code> turns on automatic commit.</li> </ul> <p>\u6240\u6709\u7684\u6570\u636e\u5e93\u529f\u80fd\u90fd\u662f\u901a\u8fc7 Java \u5c01\u88c5\u597d\u7684\u7c7b\u6765\u5b9e\u73b0\u7684\u3002</p>"},{"location":"ZJU_CS/Database/db5/#sqlj","title":"SQLJ","text":"<p>SQLJ: embedded SQL in Java <pre><code>#sql iterator deptInfoIter ( String dept name, int avgSal);\n    deptInfoIter iter = null;\n    #sql iter = { select dept_name, avg(salary) as avgSal from instructor\n             group by dept name };\n    while (iter.next()) {\n           String deptName = iter.dept_name();\n          int avgSal = iter.avgSal();\n          System.out.println(deptName + \" \" + avgSal);\n    }\n    iter.close();\n</code></pre> \u5d4c\u5165\u90fd\u8981 <code>#sql</code> \u6807\u8bc6\uff0c\u6700\u540e\u4f1a\u88ab\u7f16\u8bd1\u5668\u8f6c\u5316\u4e3a Java \u7684\u7c7b\u3002</p>"},{"location":"ZJU_CS/Database/db5/#odbc","title":"ODBC","text":"<p>Each database system supporting ODBC provides a \"driver\" library that must be linked with the client program.</p> Example <pre><code>int ODBCexample()\n{\n    RETCODE error;\n    HENV    env;     /* environment */ \n    HDBC    conn;  /* database connection */ \n    SQLAllocEnv(&amp;env);\n    SQLAllocConnect(env, &amp;conn);\n    SQLConnect(conn, \u201cdb.yale.edu\", SQL_NTS, \"avi\", SQL_NTS, \"avipasswd\", SQL_NTS); \n    { ... Do actual work ... }\n\n    SQLDisconnect(conn); \n    SQLFreeConnect(conn); \n    SQLFreeEnv(env); \n}\n</code></pre> <p>\u540c\u4e00\u4e2a\u6570\u636e\u5e93\u53ef\u80fd\u670d\u52a1\u4e8e\u591a\u4e2a\u7528\u6237\uff0c\u800c\u4e14\u4f7f\u7528\u7684\u7f16\u7a0b\u8bed\u8a00\u53ef\u80fd\u4e0d\u540c\uff0c\u5982\u5b57\u7b26\u4e32\u7684\u7ed3\u675f\u6807\u5fd7\u53ef\u80fd\u4e5f\u4e0d\u540c\uff0c\u56e0\u6b64\u9700\u8981\u7528 <code>SQL_NTS</code> \u6807\u8bc6\u3002</p> <ul> <li>Program sends SQL commands to database by using <code>SQLExecDirect</code></li> <li>Result tuples are fetched using <code>SQLFetch()</code></li> <li><code>SQLBindCol()</code> binds C language variables to attributes of the query result <ul> <li>When a tuple is fetched, its attribute values are automatically stored in corresponding C variables.  </li> <li>Arguments to SQLBindCol()<ul> <li>ODBC stmt variable, attribute position in query result</li> <li>The type conversion from SQL to C.  </li> <li>The address of the variable. </li> <li>For variable-length types like character arrays,   <ul> <li>The maximum length of the variable  </li> <li>Location to store actual length when a tuple is fetched.</li> <li>Note: A negative value returned for the length field indicates null value</li> </ul> </li> </ul> </li> </ul> </li> </ul> Example <p><pre><code>Main body of program\nchar deptname[80];\nfloat salary;\nint lenOut1, lenOut2;\nHSTMT stmt;\nchar * sqlquery = \"select dept_name, sum (salary) from instructor group by dept_name\";\nSQLAllocStmt(conn, &amp;stmt);\nerror = SQLExecDirect(stmt, sqlquery, SQL_NTS);\nif (error == SQL SUCCESS) {\n    SQLBindCol(stmt, 1, SQL_C_CHAR, deptname , 80, &amp;lenOut1);\n    SQLBindCol(stmt, 2, SQL_C_FLOAT, &amp;salary, 0 , &amp;lenOut2);\n    while (SQLFetch(stmt) == SQL_SUCCESS) {\n        printf (\" %s %g\\n\", deptname, salary);\n    }\n}\nSQLFreeStmt(stmt, SQL_DROP);\n</code></pre> \u5b9a\u4e49\u6570\u7ec4\u9700\u8981\u591a\u4e00\u4e2a\uff0c\u5426\u5219\u4f1a\u6709\u622a\u65ad\u3002\u5982 <code>char deptname[11];</code> \u624d\u80fd\u5b9a\u4e49\u5341\u4e2a\u5143\u7ec4\u3002 \u5982\u679c\u7ed3\u679c\u4e3a\u7a7a\uff0c\u5219 <code>lenOut</code> \u4e3a -1. </p> <p>ODBC Prepared Statements</p> <ul> <li>SQL statement prepared: compiled at the database<ul> <li>To prepare a statement <code>SQLPrepare(stmt, &lt;SQL String&gt;);</code> </li> <li>To bind parameters <code>SQLBindParameter(stmt, &lt;parameter#&gt;,  ... type information and value omitted for simplicity..)</code></li> <li>To execute the statement <code>retcode = SQLExecute(stmt);</code></li> </ul> </li> <li>Can have placeholders: e.g. <code>insert into account values(?,?,?)</code></li> <li>Repeatedly executed with actual values for the placeholders</li> </ul> <p>More ODBC Features </p> <ul> <li>Metadata features  <ul> <li>finding all the relations in the database and</li> <li>finding the names and types of columns of a query result or a relation in the database.</li> </ul> </li> <li>By default, each SQL statement is treated as a separate transaction that is committed automatically.<ul> <li>Can turn off automatic commit on a connection <code>SQLSetConnectOption(conn, SQL_AUTOCOMMIT, 0)}</code></li> <li>Transactions must then be committed or rolled back explicitly by <code>SQLTransact(conn, SQL_COMMIT)</code> or <code>SQLTransact(conn, SQL_ROLLBACK)</code></li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/db5/#embedded_sql","title":"Embedded SQL","text":"<p>A language to which SQL queries are embedded is referred to as a host language, and the SQL structures permitted in the host language comprise embedded SQL. \u5982\u628a SQL \u5d4c\u5165\u5230 C \u8bed\u8a00\uff0c\u90a3\u4e48 C \u8bed\u8a00\u662f host.  </p> <p>\u5728\u7f16\u8bd1\u524d\uff0c\u6709\u4e00\u4e2a\u9884\u7f16\u8bd1\u5668\uff0c\u5c06 SQL \u8bed\u53e5\u7ffb\u8bd1\u3002</p> <p>EXEC SQL statement is used in the host language to identify embedded SQL request to the preprocessor (in Java, <code># SQL { ... };</code>)</p> <p>Issues with Embedded SQL</p> <ul> <li>Mark the start point and end point of Embedded SQL <code>EXEC  SQL  &lt;statement&gt;\uff1b  //C</code></li> <li>Communication between database and programming language e.g. SQLCA\u3001SQLDA</li> <li>Address the mismatching issue between SQL and host lanugage. Handle result (set) with cursor Mapping of basic data types e.g. SQL:  Date \\(\\rightarrow\\) C: char(12)</li> </ul> Example <p><pre><code>insert\u3001delete\u3001update\u3001select(single record)\nmain( )\n{  EXEC SQL INCLUDE SQLCA; //\u58f0\u660e\u6bb5\u5f00\u59cb\n    EXEC SQL BEGIN DECLARE SECTION;\n    char account_no [11];    //host variables(\u5bbf\u4e3b\u53d8\u91cf)\u58f0\u660e\n    char branch_name [16];\n    int  balance;  \nEXEC SQL END DECLARE SECTION;//\u58f0\u660e\u6bb5\u7ed3\u675f\nEXEC SQL CONNECT  TO  bank_db  USER Adam Using Eve; \nscanf (\u201c%s  %s  %d\u201d, account_no, branch_name, balance);\nEXEC SQL insert into account \n                values (:account_no, :branch_name, :balance);\nIf (SQLCA.sqlcode ! = 0)    printf ( \u201cError!\\n\u201d);\nelse       printf (\u201cSuccess!\\n\u201d);\n}\n</code></pre> \u6700\u5f00\u59cb\u58f0\u660e\u6bb5\u4e2d\u7684 host \u8bed\u53e5\uff0c\u53ef\u4ee5\u7528\u5728 SQL \u8bed\u53e5\u91cc\u3002</p> <p>\u4e24\u70b9\u4e0d\u5e73\u8861\uff1a\u6ca1\u6709\u96c6\u5408\uff1b\u6ca1\u6709 NULL\uff1b\u6ca1\u6709\u65e5\u671f\u7c7b\u578b</p> <p>\u53ef\u4ee5\u5728\u7f16\u8bd1\u65f6\u8fdb\u884c\u7c7b\u578b\u68c0\u67e5\uff0c\u4f46 ODBC \u53ea\u6709\u5728\u8fd0\u884c\u65f6\u624d\u6709\u3002</p> <ul> <li>Static\uff1a Embedded SQL statements( include relation names and attribute names) are hard coded in program.</li> <li>Dynamic\uff1aEmbedded SQL statements are built at run time</li> </ul>"},{"location":"ZJU_CS/Database/db5/#procedural_constructs_in_sql","title":"Procedural Constructs in SQL","text":"<p>SQL provides a module language  Permits definition of procedures in SQL, with if-then-else statements, for and while loops, etc.</p> <p>Stored Procedures  </p> <ul> <li>Can store procedures in the database </li> <li>then execute them using the call statement</li> <li>permit external applications to operate on the database without knowing about internal details</li> </ul>"},{"location":"ZJU_CS/Database/db5/#sql_functions","title":"SQL Functions","text":"Example <p>SQL \u51fd\u6570\u7684\u8fd4\u56de\u503c\u53ef\u4ee5\u662f\u4e00\u4e2a table. </p> Example <p> </p>"},{"location":"ZJU_CS/Database/db5/#sql_procedures","title":"SQL Procedures","text":"<p>\u6709\u8f93\u5165\u53c2\u6570(<code>in</code>)\u548c\u8f93\u51fa\u53c2\u6570(<code>out</code>)</p> Example <p> </p>"},{"location":"ZJU_CS/Database/db5/#procedural_constructs","title":"Procedural Constructs","text":"<p>Compound statement: <code>begin ... end</code>, </p> <ul> <li>May contain multiple SQL statements between <code>begin</code> and <code>end</code>.</li> <li> <p>Local variables can be declared within a compound statements</p> </li> <li> <p><code>While</code> and <code>repeat</code> statements e.g. <pre><code>declare n integer default 0;\nwhile n &lt; 10 do\n    set n = n + 1\nend while                           \n        repeat\n    set n = n  \u2013 1\n        until n = 0\nend repeat\n</code></pre></p> </li> <li><code>For</code> loop Permits iteration over all results of a query     e.g. <pre><code>declare n  integer default 0;\nfor r as\n    select budget from department \n    where dept_name = \u2018Music\u2019 \n    do \n        set n = n - r.budget \nend for\n</code></pre>     r \u8868\u793a\u8fd4\u56de\u7684\u6bcf\u4e00\u884c</li> </ul> Example procedure <p> </p>"},{"location":"ZJU_CS/Database/db5/#external_language_functionsprocedures","title":"External Language Functions/Procedures","text":"<p>SQL \u53ef\u4ee5\u8bbf\u95ee\u7531 C \u8bed\u8a00\u5b9a\u4e49\u7684\u51fd\u6570\uff08\u8fc7\u7a0b\uff09</p> Example <pre><code>create procedure dept_count_proc(in dept_name varchar(20),  count integer)\nlanguage C \nexternal name \u2019 /usr/avi/bin/dept_count_proc\u2019 \ncreate function dept_count(dept_name varchar(20))\nreturns integer\nlanguage C\nexternal name \u2018/usr/avi/bin/dept_count\u2019\n</code></pre> <p>\u53ef\u80fd\u6bd4\u8f83\u5371\u9669\uff0c\u653e\u5728\u865a\u62df\u673a\uff08Java\uff09\u6216\u8005\u72ec\u7acb\u7684\u7ebf\u7a0b</p>"},{"location":"ZJU_CS/Database/db5/#triggers","title":"Triggers","text":"<p>A <code>trigger</code> is a statement that is executed automatically by the system as a side effect of a modification to the database.  </p> <p>Trigger -  ECA rule</p> <ul> <li>E: Event \uff08 insert, delete \uff0cupdate\uff09</li> <li>C: Condition  </li> <li>A: Action</li> </ul> <p>To design a trigger mechanism, we must: </p> <ul> <li>Specify the conditions under which the trigger is to be executed.</li> <li>Specify the actions to be taken when the trigger executes.</li> </ul> Example <p> </p> time_slot_id Example <p> </p> <p>\u8fd9\u91cc time_slot_id \u4e0d\u662f\u4e3b\u952e\uff0c\u56e0\u6b64\u5220\u9664\u4e0d\u4f1a\u5f15\u8d77\u5176\u4ed6\u5f71\u54cd\u3002\u4f46\u6211\u4eec\u53ef\u4ee5\u8bbe\u8ba1\u4e00\u4e2a\u89e6\u53d1\u5668\uff0c\u7528\u6765\u68c0\u67e5\u5f53\u524d\u8bfe\u7a0b\u7684 time_slot_id \u662f\u5426\u5728\u8868\u5185\u3002 \u7b2c\u4e8c\u4e2a\u89e6\u53d1\u5668\u8868\u793a\uff0ctime_slot_id \u5df2\u7ecf\u88ab\u5220\u5b8c\u4e86\uff0c\u4f46\u4f9d\u7136\u6709\u8bfe\u7a0b\u5728\u5f15\u7528\uff0c\u5c31\u8981 rollback.  </p> <ul> <li>Triggering event can be insert, delete or update</li> <li>Triggers on update can be restricted to specific attributes e.g. after(before) update of  takes on grade</li> <li>Values of attributes before and after an update can be referenced<ul> <li>referencing old row as:  for deletes and updates</li> <li>referencing new row as: for inserts and updates</li> </ul> </li> </ul> Trigger to Maintain credits_earned value <p> </p> <p>\u5982\u679c\u672c\u6765\u6302\u79d1\uff0c\u6216\u8005\u6ca1\u6709\u6210\u7ee9\uff0c\u66f4\u65b0\u540e\u4e0d\u518d\u6302\u79d1\u800c\u4e14\u6709\u6210\u7ee9\uff0c\u5c31\u628a\u5b66\u5206\u52a0\u4e0a\u53bb\u3002</p> <p>\u8981\u614e\u7528\u89e6\u53d1\u5668\uff0c\u7528\u5728\u5200\u5203\u4e0a\uff0c\u53ef\u80fd\u4f1a\u5f15\u53d1\u8fde\u9501\u53cd\u5e94\u3002</p> <p>Instead of executing a separate action for each affected row, a single action can be executed for all rows affected by a transaction</p> <ul> <li>Use <code>for each statement</code>  instead of <code>for each row</code></li> <li>Use <code>referencing old table</code> or <code>referencing new table</code> to refer to temporary tables (called transition tables) containing the affected rows</li> <li>Can be more efficient when dealing with SQL statements that update a large number of rows</li> </ul> Example <p> </p>"},{"location":"ZJU_CS/Database/db6/","title":"Entity-Relationship Model","text":""},{"location":"ZJU_CS/Database/db6/#example","title":"Example","text":"<ul> <li>\u4e00\u4e2a\u65b9\u5f62\u6846\u5c31\u662f\u4e00\u4e2a\u5b9e\u4f53\u7684\u96c6\u5408\uff0c\u4e0b\u9762\u5217\u51fa\u5176\u5c5e\u6027\u3002</li> <li>\u5b9e\u4f53\u4e0e\u5b9e\u4f53\u4e4b\u95f4\u6709\u5173\u7cfb\uff0c\u4e00\u4e2a\u83f1\u5f62\u6846\u8868\u793a\u5173\u7cfb\u3002 \u4e00\u5bf9\u4e00(\\(\\leftrightarrow\\))/\u4e00\u5bf9\u591a/\u591a\u5bf9\u4e00(\\(\\leftarrow, \\rightarrow\\))\u3002 \u8fd9\u91cc instructor \u5b9e\u4f53\u91cc\u4e0d\u9700\u8981 <code>dept</code> \u5c5e\u6027\uff0c\u56e0\u4e3a\u5728 department \u5b9e\u4f53\u91cc\u6709\u4e86\uff0c\u5426\u5219\u4f1a\u5197\u4f59\u3002</li> </ul> <p>\u6bcf\u4e2a\u5b9e\u4f53\u76f4\u63a5\u8f6c\u6362\u4e3a\u5173\u7cfb\u6a21\u5f0f\u3002 \u5173\u7cfb\u8f6c\u6362\u4e3a\u5143\u7ec4\uff0c\u5143\u7d20\u4e3a\u4e24\u4e2a\u8868\u7684 primary key. \u5bf9\u4e8e\u4e00\u5bf9\u591a\u7684\u60c5\u51b5\uff08\u5982 <code>instructor</code> \u548c <code>department\uff09\u8f6c\u6362\u540e</code> primary key \u4ecd\u4e3a ID. \u4e3a\u4e86\u51cf\u5c11\u8868\u7684\u6570\u91cf\uff0c\u53ef\u4ee5\u628a primary key \u76f8\u540c\u7684\u8868\u5408\u5e76\u3002</p> <p>\u53cc\u6a2a\u7ebf\u4e0e\u5355\u6a2a\u7ebf\u4e0d\u540c \u53cc\u6a2a\u7ebf\u8868\u793a\u6bcf\u4e2a\u5bf9\u8c61\u90fd\u5fc5\u987b\u53c2\u4e0e\u5173\u7cfb\uff0c\u800c\u5355\u6a2a\u7ebf\u5219\u8868\u793a\u5bf9\u8c61\u53ef\u4ee5\u4e0d\u53c2\u4e0e\u5173\u7cfb\u3002\u5982 <code>inst_dept</code> \u4e2d\u5982\u679c <code>department</code>-<code>inst_dep</code> \u4e3a\u53cc\u6a2a\u7ebf\uff0c\u5219\u8868\u793a\u6bcf\u4e00\u4e2a\u7cfb\u90fd\u8981\u6709\u8001\u5e08\u3002 \u6709\u4e9b\u8054\u7cfb\u662f\u9690\u542b\u7684\uff0c\u5982\u6388\u8bfe\u8001\u5e08\u548c\u542c\u8bfe\u7684\u5b66\u751f\u3002</p> <p><code>section</code> \u4e0d\u8db3\u4ee5\u552f\u4e00\u786e\u5b9a\u5143\u7ec4\uff0c\u79f0\u4e3a\u5f31\u5b9e\u4f53\uff0c\u4f9d\u8d56\u4e8e\u53e6\u4e00\u4e2a\u5b9e\u4f53\uff08\u5982 OOP\u3001DB \u90fd\u53ef\u4ee5\u6709\u540c\u6837\u5e74\u4efd\u5b66\u671f\u7684 1 \u73ed\uff09\u3002\u56e0\u4e3a\u8bfe\u7a0b\u53f7 <code>course_id</code> \u653e\u5728 <code>section</code> \u4f1a\u6709\u5197\u4f59\uff0c\u56e0\u6b64\u6ca1\u6709\u8fd9\u4e2a\u5c5e\u6027\uff0c\u5bfc\u81f4\u5f62\u6210\u4e86\u4e00\u4e2a\u5f31\u5b9e\u4f53\u3002 <code>sec_course</code> \u8868\u793a\u8054\u7cfb\u7684\u662f\u5f31\u5b9e\u4f53\uff08\u53cc\u6846\uff09\uff0c<code>section</code> \u4e0d\u80fd\u79bb\u5f00 <code>course</code> \u5b58\u5728\u3002</p> <p>relationship \u4e0a\u4e5f\u53ef\u4ee5\u5e26\u5c5e\u6027\uff0c\u5982 <code>takes</code> \u4e0a\u7684 <code>grade</code>. </p> <p>\u5173\u7cfb\u53cc\u65b9\u53ef\u4ee5\u662f\u76f8\u540c\u7684\u5b9e\u4f53\u96c6\u5408\uff0c<code>course</code> \u8fd9\u91cc\u7684 <code>prereq</code> \u662f\u591a\u5bf9\u591a\uff0c\u8868\u793a\u4e00\u95e8\u8bfe\u53ef\u4ee5\u6709\u591a\u95e8\u9884\u4fee\u8bfe\uff0c\u4e00\u95e8\u8bfe\u4e5f\u53ef\u4ee5\u662f\u591a\u95e8\u8bfe\u7684\u9884\u4fee\u8bfe\u3002<code>{}</code> \u91cc\u9762\u662f\u591a\u4e2a\u503c\uff0c\u8868\u793a\u590d\u5408\u5c5e\u6027\u3002\u8fd9\u91cc\u8868\u793a <code>time_slot_id</code> \u5b9e\u9645\u4e0a\u53ef\u4ee5\u7531\u8fd9\u4e09\u4e2a\u5c5e\u6027\u590d\u5408\u800c\u6210\u3002</p>"},{"location":"ZJU_CS/Database/db6/#database_modeling","title":"Database Modeling","text":"<p>A database can be modeled as:</p> <ul> <li>a collection of entities,</li> <li>relationship among entities.</li> </ul>"},{"location":"ZJU_CS/Database/db6/#entities","title":"Entities","text":"<p>An entity is an object that exists and is distinguishable from other objects.  e.g. specific person, company, event, plant * Entities have attributes e.g. people have names and addresses    An entity set is a set of entities of the same type that share the same properties. e.g.* set of all persons, companies, trees, holidays</p> <p>Entity sets can be represented graphically as follows:</p> <ul> <li>Rectangles represent entity sets.</li> <li>Attributes listed inside entity rectangle</li> <li>Underline indicates primary key attributes</li> </ul> Example <p> </p>"},{"location":"ZJU_CS/Database/db6/#relationship_sets","title":"Relationship Sets","text":"<p>A relationship is an association among several entities. A relationship set is a mathematical relation among n \uf0b3 2 entities, each taken from entity  \\(\\{(e_1, e_2, ... e_n) | e_1 \\in E_1, e_2 \\in  E_2, ..., e_n \\in  E_n\\}\\) where \\((e_1, e_2, ..., e_n)\\) is a relationship.  </p> <p>\u672c\u8d28\u4e5f\u662f\u4e00\u4e2a\u96c6\u5408\u3002\u6700\u5f00\u59cb\u7684\u4f8b\u5b50\u4e2d\u5747\u4e3a\u662f\u4e8c\u5143\u8054\u7cfb\uff0c\u5373\u662f\u4e24\u4e2a\u5b9e\u4f53\u96c6\u5408\u7684\u5173\u7cfb\uff0c\u4f46\u662f\u5173\u7cfb\u53ef\u4ee5\u662f\u591a\u5143\u7684\uff0c\u5373\u591a\u4e2a\u5b9e\u4f53\u3002\u5982\u8001\u5e08\uff0c\u540c\u5b66\uff0cSRTP \u9879\u76ee\u53ef\u4ee5\u5171\u540c\u5f62\u6210\u4e00\u4e2a\u5173\u7cfb\u3002</p> Example <p> </p>"},{"location":"ZJU_CS/Database/db6/#relationship_sets_with_attributes","title":"Relationship Sets with Attributes","text":"<p>An attribute can also be property of a relationship set.</p> <p>e.g. The advisor relationship set between entity sets instructor and student may have the attribute date which tracks when the student started being associated with the advisor.</p> Example <p> </p>"},{"location":"ZJU_CS/Database/db6/#roles","title":"Roles","text":"<p>Entity sets of a relationship need not be distinct. Each occurrence of an entity set plays a \u201crole\u201d in the relationship The labels <code>course_id</code> and <code>prereq_id</code> are called roles.</p> Example <p> </p>"},{"location":"ZJU_CS/Database/db6/#degree_of_a_relationship_set","title":"Degree(\u5ea6) of a Relationship Set","text":"<p>binary relationship\uff08\u4e8c\u5143\u8054\u7cfb\uff09</p> <ul> <li>involve two entity sets (or degree two). </li> <li>most relationship sets in a database system are binary.</li> </ul> <p>\u5c3d\u91cf\u4e0d\u7528\u591a\u5143\u8054\u7cfb\uff0c\u56e0\u4e3a\u4e8c\u5143\u8054\u7cfb\u6bd4\u8f83\u6e05\u6670\u3002\u800c\u4e14\u4efb\u4f55\u7684\u591a\u5143\u8054\u7cfb\u90fd\u53ef\u4ee5\u901a\u8fc7\u5f15\u5165\u4e2d\u4ecb\u5b9e\u4f53\u8f6c\u5316\u4e3a\u4e8c\u5143\u8054\u7cfb\u3002</p> Example <p> </p> <p>\u8f6c\u5316\u4e3a\u4e8c\u5143\u8054\u7cfb\uff1a\u628a\u591a\u5143\u8054\u7cfb\u5b9e\u4f53\u5316\u3002\u5982 <code>proj_guide</code> \u91cc\u6709\u8001\u5e08\u3001\u5b66\u751f\u3001\u5de5\u7a0b\u7684 id. \u968f\u540e\u8fd9\u4e2a\u5b9e\u4f53\u53c8\u548c\u53e6\u5916\u4e09\u4e2a\u5b9e\u4f53\u5404\u6709\u4e00\u4e2a\u4e8c\u5143\u8054\u7cfb\u3002</p>"},{"location":"ZJU_CS/Database/db6/#attributes","title":"Attributes","text":"<p>An entity is represented by a set of attributes, that is descriptive properties possessed by all members of an entity set.</p> <p>Attribute types:</p> <ul> <li>Simple\uff08\u7b80\u5355\uff09 and composite\uff08\u590d\u5408\uff09 attributes.  </li> <li>Single-valued\uff08\u5355\u503c\uff09 and multivalued\uff08\u591a\u503c\uff09 attributes e.g. multivalued attribute: <code>phone_numbers</code> </li> <li>Derived\uff08\u6d3e\u751f\uff09 attributes<ul> <li>Can be computed from other attributes e.g. <code>age</code>, given <code>date_of_birth</code></li> </ul> </li> </ul> Example <p> </p>"},{"location":"ZJU_CS/Database/db6/#mapping_cardinality_constraints","title":"Mapping Cardinality Constraints","text":"<p>\u6620\u5c04\u57fa\u6570\u7ea6\u675f</p> <p>Express the number of entities to which another entity can be associated via a relationship set.</p> <ul> <li>One to one</li> <li>One to many</li> <li>Many to one</li> <li>Many to many </li> </ul> <p>We express cardinality constraints by drawing either a directed line (\\(\\rightarrow\\)), signifying \u201cone,\u201d or an undirected line (\\(\u2014\\)), signifying \u201cmany,\u201d between the relationship set and the entity set.</p>"},{"location":"ZJU_CS/Database/db6/#total_and_partial_participation","title":"Total and Partial Participation","text":"<ul> <li>Total participation (indicated by double line): every entity in the entity set participates in at least one relationship in the relationship set \u6240\u6709\u5143\u7d20\u90fd\u8981\u53c2\u4e0e\u5173\u7cfb</li> <li>Partial participation: some entities may not participate in any relationship in the relationship set</li> </ul>"},{"location":"ZJU_CS/Database/db6/#notation_for_expressing_more_complex_constraints","title":"Notation for Expressing More Complex Constraints","text":"<p>A line may have an associated minimum and maximum cardinality, shown in the form l..h, where l is the minimum and h the maximum cardinality</p> <ul> <li>A minimum value of 1 indicates total participation.</li> <li>A maximum value of 1 indicates that the entity participates  in at most one relationship</li> <li>A maximum value of * indicates no limit.</li> </ul> Example <p> </p> <p>\u591a\u5143\u5173\u7cfb\u91cc\uff0c\u6211\u4eec\u53ea\u5141\u8bb8\u6700\u591a\u6709\u4e00\u4e2a\u7bad\u5934\u3002</p>"},{"location":"ZJU_CS/Database/db6/#primary_key","title":"Primary Key","text":"<p>Primary Key for Relationship Sets</p> <p>\u591a\u5143\u8054\u7cfb\u7684 primary key \u662f\u4e24\u7aef key \u7684\u7ec4\u5408\u3002\u5982\u679c\u662f\u4e00\u5bf9\u4e00\u7684\u8054\u7cfb\uff0c\u90a3\u4e48\u5355\u4e2a\u5b9e\u4f53\u7684 key \u4e5f\u53ef\u4ee5\u4f5c\u4e3a primary key. \u4e00\u5bf9\u591a\u7684\u8054\u7cfb\uff08\u5982\u5bfc\u5e08\u548c\u5b66\u751f\u5c31\u662f\u4e00\u5bf9\u591a\uff0c\u90a3\u4e48\u4e3b\u952e\u5e94\u8be5\u4e3a\u5b66\u751f\uff09</p>"},{"location":"ZJU_CS/Database/db6/#weak_entity_sets","title":"Weak Entity Sets","text":"<p>An entity set that does not have a primary key is referred to as a weak entity set.</p> <p>The existence of a weak entity set depends on the existence of a identifying entity set\uff08\u6807\u8bc6\u6027\u5b9e\u4f53\u96c6\uff09</p> <ul> <li>It must relate to the identifying entity set via a total, one-to-many relationship set from the identifying to the weak entity set</li> <li>Identifying relationship\uff08\u6807\u8bc6\u6027\u8054\u7cfb\uff09 depicted using a double diamond</li> </ul> <p>The discriminator(\u5206\u8fa8\u7b26\uff0cor partial key) of a weak entity set is the set of attributes that distinguishes among all the entities of a weak entity set  when the identifying entity  they depend is known.</p> <p>We underline the discriminator of a weak entity set  with a dashed line. \uff08\u865a\u7ebf\uff09 We put the identifying relationship of a weak entity in a double diamond. \uff08\u53cc\u6846\uff09</p> Example <p> </p> <p>Redundant Attributes</p> <p> </p>"},{"location":"ZJU_CS/Database/db6/#reduction_to_relational_schemas","title":"Reduction to Relational Schemas","text":"<p>\u4e00\u4e2a ER \u56fe\u53ef\u4ee5\u8f6c\u6362\u6210\u591a\u79cd\u6a21\u5f0f\uff08\u56fe\u6570\u636e\u5e93\u3001\u9762\u5411\u5bf9\u8c61\u3001\u5173\u7cfb\u6a21\u5f0f\u7b49\uff09</p> <ul> <li>A strong entity set reduces to a schema with the same attributes <code>course(course_id, title, credits)</code></li> <li>A weak entity set becomes a table that includes a column for the primary key of the identifying strong entity set.   Primary key of the table is the union of the discriminator of the\u00a0weak entity set and\u00a0 the\u00a0primary key of the identifying strong entity set.\u00a0 \u6807\u8bc6\u96c6\u5408\u7684\u4e3b\u952e\u52a0\u4e0a\u5f31\u5b9e\u4f53\u96c6\u7684\u5206\u8fa8\u7b26\u3002 <code>section(course_id, sec_id, semester, year)</code></li> <li> <p>A many-to-many relationship set is represented as a schema with attributes for the primary keys of the two participating entity sets, and any descriptive attributes of the relationship set.  \u5373\u4e24\u4e2a\u96c6\u5408\u7684\u4e3b\u952e\u62fc\u8d77\u6765\uff0c\u52a0\u4e0a\u5173\u7cfb\u7684\u9644\u5e26\u5c5e\u6027\u3002  </p> Example <p> </p> <p><code>advisor = (s_id, i_id)</code></p> \u4e3a\u4ec0\u4e48\u591a\u5bf9\u591a\u7684\u5173\u7cfb\u4e00\u5b9a\u8981\u8f6c\u5316\u6210\u4e00\u4e2a\u5173\u7cfb\u6a21\u5f0f <ul> <li>Many-to-one and one-to-many relationship sets that are total on the many-side can be represented by adding an extra attribute to the \u201cmany\u201d side, containing the primary key of the \u201cone\u201d side. \u591a\u5bf9\u4e00\u53ef\u4ee5\u4e0d\u8f6c\u6362\u4e3a\u5355\u72ec\u7684\u5173\u7cfb\u6a21\u5f0f\uff0c\u76f4\u63a5\u5728\u201c\u591a\u201c\u90a3\u4e2a\u8868\u4e0a\u6dfb\u52a0\u201d\u4e00\u201c\u7684\u4e3b\u952e\u5373\u53ef\u3002</li> </ul> Example <p> </p> <p><code>inst_dept</code> \u672c\u8d28\u5c31\u662f\u5c06 <code>instructor</code> \u548c <code>department</code> \u5408\u5e76\uff0c\u5728 <code>instrutor</code> \u7684\u5c5e\u6027\u4e0a\u6dfb\u52a0 <code>dept_name</code>.  <pre><code>department(dept_name, building, budget)\ninstructor(ID,name,salary)\ninst_dept(ID, dept_name)\n// \u8f6c\u6362\u540e\uff08\u5373\u5408\u5e76\uff09\ndepartment(dept_name, building, budget)\ninstructor(ID, name, salary, dept_name)\n</code></pre></p> <p>\u5404\u6709\u5229\u5f0a\uff0c\u7b2c\u4e00\u79cd\u5199\u6cd5\u8868\u53ef\u80fd\u4f1a\u592a\u591a\uff0c\u7b2c\u4e8c\u79cd\u5199\u6cd5\u5408\u5728\u4e00\u8d77\u8868\u53ef\u80fd\u592a\u5927\uff0c\u4e0d\u5229\u4e8e\u7ba1\u7406\u3002</p> </li> </ul>"},{"location":"ZJU_CS/Database/db6/#composite_and_multivalued_attributes","title":"Composite and Multivalued Attributes","text":"<p>Composite attributes are flattened out by creating a separate attribute for each component attribute.  </p> <p>\u5c31\u50cf\u5728 C \u8bed\u8a00\u91cc\u5b9a\u4e49\u4e00\u4e2a\u7ed3\u6784\u3002\u4f46\u662f\u5173\u7cfb\u6570\u636e\u5e93\u91cc\u6bcf\u4e2a\u5c5e\u6027\u90fd\u5fc5\u987b\u662f\u7b80\u5355\u6570\u636e\u7c7b\u578b\uff0c\u5c31\u5fc5\u987b\u628a\u8fd9\u4e9b\u590d\u5408\u5c5e\u6027\u94fa\u5e73\u3002</p> <p>e.g. <pre><code>instructor(ID, \n        first_name, middle_initial, last_name,      \n        street_number, street_name, apt_number, \n        city, state, zip_code, date_of_birth, age)\n</code></pre></p> <p>A multivalued attribute M of an entity E is represented by a separate schema EM.  </p> <p>Schema EM has attributes corresponding to the primary key of E and an attribute corresponding to multivalued attribute M.  </p> Example <p> </p> <p>Special Case</p> <p> </p>"},{"location":"ZJU_CS/Database/db6/#design_issues","title":"Design Issues","text":""},{"location":"ZJU_CS/Database/db6/#common_mistakes_in_e-r_diagrams","title":"Common Mistakes in E-R Diagrams","text":"<ul> <li> <p>\u4fe1\u606f\u5197\u4f59 student \u7684 <code>dept_name</code> \u5e94\u8be5\u53bb\u6389      </p> </li> <li> <p>\u5173\u7cfb\u5c5e\u6027\u4f7f\u7528\u4e0d\u5f53 \u8fd9\u91cc\u4e00\u95e8\u8bfe\u53ef\u80fd\u6709\u5f88\u591a\u6b21\u4f5c\u4e1a\uff0c\u4e0d\u80fd\u53ea\u7528\u4e00\u4e2a\u5b9e\u4f53\u3002      </p> <p>\u89e3\u51b3\u65b9\u6cd5\uff1a  </p> </li> </ul>"},{"location":"ZJU_CS/Database/db6/#use_of_entity_sets_vs_attributes","title":"Use of entity sets vs. attributes","text":"<ul> <li>\u7b2c\u4e00\u79cd\u65b9\u6cd5\uff0c\u660e\u786e\u653e\u4e00\u4e2a\u7535\u8bdd\u53f7\u7801\u3002</li> <li>\u7b2c\u4e8c\u79cd\u65b9\u6cd5\uff0c\u7535\u8bdd\u53f7\u7801\u53ef\u4ee5\u9644\u5c5e\u66f4\u591a\u5c5e\u6027\uff0c\u4e00\u4e2a\u7535\u8bdd\u53f7\u7801\u53ef\u4ee5\u7531\u591a\u4eba\u5171\u4eab\u3002\uff08\u5982\u529e\u516c\u5ba4\u7684\u516c\u5171\u7535\u8bdd\uff09</li> </ul>"},{"location":"ZJU_CS/Database/db6/#use_of_entity_sets_vs_relationship_sets","title":"Use of entity sets vs. relationship sets","text":"<p>Possible guideline is to designate a relationship set to describe an action that occurs between entities.</p> <p>\u5b9e\u4f53\u53ef\u4ee5\u4fbf\u4e8e\u4e0e\u5176\u4ed6\u5b9e\u4f53\u5efa\u7acb\u8054\u7cfb\u3002</p> <p>\u5982\u7535\u5546\uff0c\u6211\u4eec\u53ef\u4ee5\u7b80\u5355\u7684\u628a\u5ba2\u6237\u548c\u5546\u54c1\u7528 <code>buy</code> \u8054\u7cfb\u8d77\u6765\uff0c\u4f46\u540e\u7eed\u8fd8\u4f1a\u6709\u4ed8\u6b3e\u3001\u7269\u6d41\u7b49\u60c5\u51b5\uff0c\u6211\u4eec\u6700\u597d\u628a <code>buy</code> \u5b9e\u4f53\u5316\u4e3a\u8ba2\u5355\u3002</p>"},{"location":"ZJU_CS/Database/db6/#placement_of_relationship_attributes","title":"Placement of relationship attributes","text":"<ul> <li>\u7b2c\u4e00\u79cd\u65b9\u6cd5\uff0c\u53ef\u4ee5\u8bb0\u5f55\u6bcf\u6b21\u8bbf\u95ee\u7684\u8bbf\u95ee\u65e5\u671f\u3002</li> <li>\u7b2c\u4e8c\u79cd\u65b9\u6cd5\uff0c\u53ea\u80fd\u8bb0\u5f55\u7528\u6237\u6700\u8fd1\u4e00\u6b21\u8bbf\u95ee\u65e5\u671f\uff0c\u4e0d\u5b8c\u6574\u3002</li> </ul>"},{"location":"ZJU_CS/Database/db6/#binary_vs_non-binary_relationships","title":"Binary Vs. Non-Binary Relationships","text":"<ul> <li> <p>Binary versus n-ary relationship sets  Although it is possible to replace any nonbinary (n-ary, for \\(n &gt;2\\)) relationship set by a number of distinct binary relationship sets, a n-ary relationship set shows more clearly that several entities participate in a single relationship.</p> </li> <li> <p>Some relationships that appear to be non-binary may be better represented using binary relationships e.g. A ternary relationship parents, relating a child to his/her father and mother, is best replaced by two binary relationships,  father and mother Using two binary relationships allows partial information (e.g. , only mother being know) But there are some relationships that are naturally non-binary e.g. : <code>proj_guide</code></p> </li> </ul> Converting Non-Binary Relationships  <p> </p>"},{"location":"ZJU_CS/Database/db6/#extended_er_features","title":"Extended ER Features","text":"<ul> <li>Specialization\uff08\u7279\u5316\uff09 <ul> <li>Top-down design process; we designate subgroupings within an entity set that are distinctive from other entities in the set.</li> <li>Attribute inheritance \u2013 a lower-level entity set inherits all the attributes and relationship participation of the higher-level entity set to which it is linked.</li> </ul> </li> <li>Generalization\uff08\u6982\u5316\uff09 A bottom-up design process \u2013 combine a number of entity sets that share the same features into a higher-level entity set.</li> </ul>"},{"location":"ZJU_CS/Database/db7/","title":"Lecture 7 \uff5c Relational Database Design","text":""},{"location":"ZJU_CS/Database/db7/#introduction","title":"Introduction","text":"<p>Example</p> <p> </p> <p>What about combining instructor and department?  </p> <p>Pitfalls of the \u201cbad\u201d relations</p> <ul> <li>Information repetition (\u4fe1\u606f\u91cd\u590d)</li> <li>Insertion anomalies (\u63d2\u5165\u5f02\u5e38)</li> <li>Update difficulty (\u66f4\u65b0\u56f0\u96be)</li> </ul> <p>\u6570\u636e\u4e4b\u95f4\u5b58\u5728\u7740\u9690\u542b\u7684\u51fd\u6570\u7ea6\u675f\u5173\u7cfb\uff0c\u77e5\u9053\u4e86 id \u5c31\u53ef\u4ee5\u51b3\u5b9a\u5176\u4ed6\u5143\u7d20\u3002 e.g.  id \\(\\rightarrow\\) name, salary, dept_name; dept_name \\(\\rightarrow\\) building, budget \u4ea7\u751f\u5197\u4f59\u7684\u539f\u56e0\u662f dept_name \u51b3\u5b9a\u4e86\u90e8\u5206\u5c5e\u6027\uff0c\u4f46\u4ed6\u5374\u4e0d\u662f\u8fd9\u4e2a\u8868\u7684 primary key. \u597d\u7684\u5173\u7cfb\uff1a\u53ea\u6709 candidate key \u80fd\u51b3\u5b9a\u5176\u4ed6\u5c5e\u6027\u3002 \u62c6\u8868\u540e\u8981\u6709\u91cd\u53e0\u7684\u5c5e\u6027\uff0c\u5426\u5219\u65e0\u6cd5\u62fc\u63a5\u56de\u53bb\u3002\u8fd9\u91cc\u7684\u516c\u5171\u5c5e\u6027\u5fc5\u987b\u662f\u5206\u62c6\u51fa\u4e00\u4e2a\u5173\u7cfb\u6a21\u5f0f\u7684 primary key, \u8fd9\u662f\u65e0\u635f\uff08\u6ca1\u6709\u4fe1\u606f\u635f\u5931\uff09\u8fde\u63a5\u3002</p> <p>lossy decomposition</p> <p><code>employee(ID, name, street, city, salary)</code> \\(\\rightarrow\\) <code>employee1 (ID, name)</code> and <code>employee2 (name, street, city, salary)</code> </p> Example of Lossless-Join Decomposition  <p> </p>"},{"location":"ZJU_CS/Database/db7/#lossless-join_decomposition","title":"Lossless-join Decomposition","text":"<p>Let \\(R\\) be a relation schema and let \\(R_1\\) and \\(R_2\\) form a decomposition of \\(R\\). That is \\(R = R_1  \\cup R_2\\). </p> <p>We say that the decomposition is a lossless decomposition if there is no loss of information by replacing  R with the two relation schemas \\(R = R_1  \\cup R_2\\).  Formally,   \\(r = \\prod_{R_1}(r)  \\bowtie \\prod_{R_2}(r)\\).  </p> <p>And,  conversely a decomposition is lossy if \\(r\\subset \\prod_{R_1}(r)  \\bowtie \\prod_{R_2}(r)\\) Note: more tuples implies more uncertainty (less information).</p> <p>A decomposition of \\(R\\) into \\(R_1\\) and \\(R_2\\) is lossless join if at least one of the following dependencies holds: (\u5145\u5206\u6761\u4ef6)</p> <ul> <li>\\(R_1\\cap R_2\\rightarrow R_1\\)</li> <li>\\(R_1\\cap R_2 \\rightarrow R_2\\) \u5373\u516c\u5171\u5c5e\u6027\u662f\u5176\u4e2d\u4e00\u4e2a\u5173\u7cfb\u7684 Key.   </li> </ul>"},{"location":"ZJU_CS/Database/db7/#devise_a_theory_for_the_following","title":"Devise a Theory for the Following","text":"<ul> <li>Decide whether a particular relation R is in \u201cgood\u201d form.  </li> <li>In the case that a relation R is not in \u201cgood\u201d form, decompose it into a set of relations \\(\\{R_1, R_2, \\ldots, R_n\\}\\) such that <ul> <li>each relation is in good form </li> <li>the decomposition is a lossless-join decomposition  \u5982\u679c\u5173\u7cfb\u662f\u4e0d\u597d\u7684\uff0c\u6211\u4eec\u5e0c\u671b\u628a\u5b83\u65e0\u635f\u5206\u89e3\u6210\u597d\u7684\u5173\u7cfb\u3002</li> </ul> </li> <li>Our theory is based on:<ul> <li>functional dependencies</li> <li>multivalued dependencies</li> </ul> </li> <li>Normal  Forms(NF): \\(1NF \\rightarrow 2NF \\rightarrow 3NF \\rightarrow **BCNF** \\rightarrow 4NF\\) \u6709\u4e9b\u51fd\u6570\u4f9d\u8d56\uff0c\u4e0d\u80fd\u5728 BCNF \u4e2d\u5f97\u5230\u4f53\u73b0\uff0c\u9700\u8981\u628a\u51e0\u4e2a\u8868\u62fc\u5728\u4e00\u8d77\u624d\u80fd\u4f53\u73b0\uff0c\u53eb\u4f9d\u8d56\u4fdd\u6301\u3002\u8fd9\u65f6\u6211\u4eec\u9700\u8981\u4ece BCNF \u56de\u5230 3NF.  </li> </ul>"},{"location":"ZJU_CS/Database/db7/#functional_dependencies","title":"Functional Dependencies","text":"<p>Functional Dependencies  are constraints on the set of legal relations. (\u6765\u81ea\u4e8e\u5e94\u7528\u5c42\u9762\u7684\u89c4\u5b9a) Require that the value for a certain set of attributes determines uniquely the value for another set of attributes.   e.g. dept_name \\(\\rightarrow\\) building A functional dependency is a generalization of the notion of a key.</p> <p>Let \\(R\\) be a relation schema \\(\\alpha\\subseteq R\\) and \\(\\beta\\subseteq R\\) (\\(\\alpha, \\beta\\) \u662f\u5c5e\u6027\u7684\u96c6\u5408) The functional dependency \\(\\alpha\\rightarrow \\beta\\) holds on \\(R\\) if and only if for any legal relations \\(r(R)\\), whenever any two tuples \\(t_1\\) and \\(t_2\\) of \\(r\\) agree on the attributes \\(\\alpha\\), they also agree on the attributes \\(\\beta\\).  That is,   </p> \\[ t_1[\\alpha] = t2 [\\alpha]   \\Rightarrow   t_1[\\beta ]  = t_2 [\\beta ]  \\] <p>\u901a\u8fc7\u6570\u636e\u5e93\u5b9e\u4f8b\u53ef\u4ee5\u8bc1\u4f2a\u51fd\u6570\u4f9d\u8d56\uff0c\u4f46\u4e0d\u80fd\u8bc1\u5b9e\u3002\uff08\u4f9d\u8d56\u662f\u6765\u81ea\u5e94\u7528\u5c42\u9762\u7684\u89c4\u5b9a\uff0c\u5148\u6709\u51fd\u6570\u4f9d\u8d56\uff0c\u518d\u6709\u6570\u636e\u5e93\u4e2d\u7684\u6570\u636e\uff09</p> Example <p> </p> <p>\\(A\\rightarrow B\\) \u53ef\u4ee5\u8bc1\u4f2a\uff0c\u4f46\u4e5f\u4e0d\u80fd\u56e0\u6b64\u5c31\u8bf4 \\(B\\rightarrow A\\)</p> <ul> <li>K is a superkey for relation schema \\(R\\) if and only if \\(K\\rightarrow R\\)</li> <li>K is a candidate key for \\(R\\) if and only if <ul> <li>\\(K\\rightarrow R\\), and</li> <li>for no \\(\\alpha\\subset K\\), \\(\\alpha\\rightarrow R\\)</li> </ul> </li> </ul> <p>A functional dependency is trivial if it is satisfied by all relations. \u5168\u96c6\u53ef\u4ee5\u51b3\u5b9a\u5b50\u96c6\u3002 In general, \\(\\alpha\\rightarrow \\beta\\) is trivial if \\(\\beta\\subseteq \\alpha\\)</p>"},{"location":"ZJU_CS/Database/db7/#closure","title":"Closure(\u95ed\u5305)","text":""},{"location":"ZJU_CS/Database/db7/#closure_of_a_set_of_functional_dependencies","title":"Closure of a Set of Functional Dependencies","text":"<p>Given a set \\(F\\) of functional dependencies, there are certain other functional dependencies that are logically implied by \\(F\\). The set of all functional dependencies logically implied by \\(F\\) is the closure of \\(F\\). We denote the closure of \\(F\\) by \\(F^+\\).  </p> <p>e.g. \\(F=\\{A\\rightarrow B,B\\rightarrow C\\}\\) then \\(F^+=\\{A\\rightarrow B, B\\rightarrow C, A\\rightarrow C, AB\\rightarrow B, AB\\rightarrow C,\\ldots\\}\\)</p> <p>We can find \\(F^+\\), the closure of \\(F\\), by repeatedly applying Armstrong\u2019s Axioms:</p> <ul> <li>if \\(\\beta\\subseteq \\alpha\\) then \\(\\alpha \\rightarrow \\beta\\) (reflexivity, \u81ea\u53cd\u5f8b)</li> <li>if \\(\\alpha\\rightarrow \\beta\\) then \\(\\gamma \\alpha \\rightarrow \\gamma \\beta\\) (augmentation, \u589e\u8865\u5f8b)</li> <li>if \\(\\alpha\\rightarrow \\beta\\) and \\(\\beta \\rightarrow \\gamma\\) then \\(\\alpha\\rightarrow \\gamma\\) (transitivity, \u4f20\u9012\u5f8b)</li> </ul> <p>These rules are </p> <ul> <li>Sound\uff08\u6b63\u786e\u6709\u6548\u7684\uff09 generate only functional dependencies that actually hold</li> <li>Complete\uff08\u5b8c\u5907\u7684\uff09 generate all functional dependencies that hold</li> </ul> Example <p> </p> <p>Additional rules:</p> <ul> <li>If \\(\\alpha\\rightarrow \\beta\\) holds and \\(\\alpha\\rightarrow \\gamma\\) holds,  then \\(\\alpha\\rightarrow \\beta\\gamma\\) holds (union, \u5408\u5e76)</li> <li>If \\(\\alpha\\rightarrow \\beta\\gamma\\) holds, then \\(\\alpha\\rightarrow \\beta\\) holds and \\(\\alpha\\rightarrow \\gamma\\) holds (decomposition, \u5206\u89e3)</li> <li>If \\(\\alpha\\rightarrow \\beta\\) holds and \\(\\gamma \\beta\\rightarrow \\delta\\) holds, then \\(\\alpha \\gamma\\rightarrow \\delta\\) holds (pseudotransitivity\uff0c\u4f2a\u4f20\u9012)</li> </ul> Example <p> </p> <p>\u51fd\u6570\u4f9d\u8d56\uff0c\u53f3\u8fb9\u7684\u516c\u5171\u5c5e\u6027\u53ef\u4ee5\u53bb\u6389\uff0c\u4f7f\u5f97\u51fd\u6570\u53cc\u65b9\u6ca1\u6709\u4ea4\u96c6\u3002</p>"},{"location":"ZJU_CS/Database/db7/#closure_of_attribute_sets","title":"Closure of Attribute Sets","text":"<p>Given a set of attributes \\(a\\), define the closure of a under \\(F\\) (denoted by \\(a+\\)) as the set of attributes that are functionally determined by \\(a\\) under \\(F\\) </p> Example <p> </p>"},{"location":"ZJU_CS/Database/db7/#uses_of_attribute_closure","title":"Uses of Attribute Closure","text":"<ul> <li>Testing for superkey: To test if \\(\\alpha\\) is a superkey, we compute \\(\\alpha+\\), and check if \\(\\alpha+\\) contains all attributes of \\(R\\).</li> <li>Testing functional dependencies<ul> <li>To check if a functional dependency \\(\\alpha\\rightarrow \\beta\\) holds (or, in other words, is in \\(F+\\)), just check if \\(\\beta\\subseteq\\alpha+\\). </li> <li>That is, we compute \\(\\alpha+\\) by using attribute closure, and then check if it contains \\(\\beta\\). </li> <li>Is a simple and cheap test, and very useful</li> </ul> </li> <li>Computing closure of F For each \\(\\gamma\\subseteq R\\), we find the closure \\(\\gamma+\\), and for each \\(S \\subseteq \\gamma+\\), we output a functional dependency \\(\\gamma\\rightarrow  S\\).  </li> </ul> Example"},{"location":"ZJU_CS/Database/db7/#canonical_cover","title":"Canonical Cover\uff08\u6b63\u5219\u8986\u76d6\uff09","text":"<p>\u51fd\u6570\u4f9d\u8d56\u662f\u6700\u7b80\u5355\u7684\u5f62\u5f0f\uff0c\u4e0d\u5b58\u5728\u5197\u4f59\u7684\u51fd\u6570\u4f9d\u8d56\u3002</p> <p>a canonical cover of F is a \u201cminimal\u201d set of functional dependencies equivalent to F, having no redundant dependencies or redundant parts of dependencies.  </p> Example <p> </p> <p>A canonical cover for \\(F\\) is a set of dependencies Fc such that </p> <ul> <li>\\(F\\) logically implies all dependencies in \\(F_c\\)</li> <li>\\(F_c\\) logically implies all dependencies in \\(F\\)</li> <li>No functional dependency in \\(F_c\\) contains an extraneous attribute</li> <li>Each left side of functional dependency in \\(F_c\\) is unique.</li> </ul> Computing a Canonical Cover <p> </p>"},{"location":"ZJU_CS/Database/db7/#boyce-codd_normal_formazsx","title":"Boyce-Codd Normal FormAZSX","text":"<p>A relation schema \\(R\\) is in BCNF with respect to a set \\(F\\) of functional  dependencies if for all functional dependencies in \\(F^+\\) of the form where \\(\\alpha \\subseteq R\\) and \\(\\beta \\subseteq R\\), at least one of the following holds  </p> <ul> <li>\\(\\alpha \\rightarrow \\beta\\) is trivial</li> <li>\\(\\alpha\\) is a superkey for \\(R\\).  </li> </ul> <p>\u4efb\u4f55\u975e\u5e73\u51e1\u7684\u51fd\u6570\u4f9d\u8d56\u7684\u5de6\u8fb9\u90fd\u662f\u4e00\u4e2a key.  </p>"},{"location":"ZJU_CS/Database/db7/#decomposing_a_schema_into_bcnf","title":"Decomposing a Schema into BCNF","text":"<p>\u5bf9\u4e8e\u4e0d\u662f key \u7684\u51fd\u6570\u4f9d\u8d56\uff0c\u5c31\u628a\u5b83\u5206\u89e3\u51fa\u6765\u4f5c\u4e3a\u5355\u72ec\u7684\u5173\u7cfb\u6a21\u5f0f\u3002 Suppose we have a schema \\(R\\) and a non-trivial dependency \\(\\alpha\\rightarrow \\beta\\) causes a violation of BCNF. We decompose \\(R\\) into: \\((\\alpha \\cup \\beta)\\) and \\((R-(\\beta-\\alpha))\\) \\(\\alpha\\) \u4f5c\u4e3a\u4e24\u4e2a\u5173\u7cfb\u6a21\u5f0f\u7684\u516c\u5171\u5c5e\u6027\uff0c\u4e5f\u662f\u4e00\u4e2a\u5173\u7cfb\u7684 key, \u8fd9\u6837\u624d\u662f\u65e0\u635f\u5206\u89e3\u3002</p> Example <p> </p>"},{"location":"ZJU_CS/Database/db7/#dependency_preservation","title":"Dependency Preservation","text":"<p>\u4f9d\u8d56\u4fdd\u6301\uff1a\u539f\u6765\u7684\u51fd\u6570\u4f9d\u8d56\uff0c\u90fd\u53ef\u4ee5\u5728\u5206\u89e3\u540e\u7684\u51fd\u6570\u4f9d\u8d56\u4e2d\u5f97\u5230\u5355\u72ec\u68c0\u9a8c\u3002\u5426\u5219\u9700\u8981\u628a\u51e0\u4e2a\u5173\u7cfb\u8fde\u63a5\u5728\u4e00\u8d77\u624d\u80fd\u68c0\u9a8c\u4f9d\u8d56\u7684\uff0c\u79f0\u4e3a\u4f9d\u8d56\u4e0d\u4fdd\u6301\u3002</p> <p>Constraints, including functional dependencies, are costly to check in practice unless they pertain to only one relation.  </p> <p>If it is sufficient to test only those dependencies on each individual relation of a decomposition in order to ensure that all functional dependencies hold, then that decomposition is dependency preserving (\u4fdd\u6301\u4f9d\u8d56). \uff08\u5982\u679c\u901a\u8fc7\u68c0\u9a8c\u5355\u4e00\u5173\u7cfb\u4e0a\u7684\u51fd\u6570\u4f9d\u8d56\uff0c\u5c31\u80fd\u786e\u4fdd\u6240\u6709\u7684\u51fd\u6570\u4f9d\u8d56\u6210\u7acb\uff0c\u90a3\u4e48\u8fd9\u6837\u7684\u5206\u89e3\u662f\u4f9d\u8d56\u4fdd\u6301\u7684\uff09 \uff08\u6216\u8005\uff0c\u539f\u6765\u5173\u7cfbR\u4e0a\u7684\u6bcf\u4e00\u4e2a\u51fd\u6570\u4f9d\u8d56\uff0c\u90fd\u53ef\u4ee5\u5728\u5206\u89e3\u540e\u7684\u5355\u4e00\u5173\u7cfb\u4e0a\u5f97\u5230\u68c0\u9a8c\u6216\u8005\u63a8\u5bfc\u5f97\u5230\u3002\uff09 Because it is not always possible to achieve both BCNF and dependency preservation, we consider a weaker normal form, known as third normal form.</p> <p>Let \\(F_i\\) be the set of all functional dependencies in \\(F^+\\) that include only attributes in \\(R_i\\). (\\(F_i\\):  the restriction of \\(F\\) on \\(R_i\\))</p> <ul> <li>A decomposition is dependency preserving, if \\((F_1\\cup F_2 \\cup \\ldots \\cup F_n )^+ = F^+\\)</li> <li>If it is not, then checking updates for violation of functional dependencies may require computing joins, which is expensive.</li> </ul> Example <p> </p> Example <p> </p>"},{"location":"ZJU_CS/Database/db7/#third_normal_form","title":"Third Normal Form","text":"<p>\u4efb\u4f55\u4e00\u4e2a\u975e\u5e73\u51e1\u51fd\u6570\u4f9d\u8d56\uff0c\u5982\u679c\u5de6\u8fb9\u4e0d\u662f\u4e00\u4e2a super key, \u90a3\u4e48\u53f3\u8fb9\u5fc5\u987b\u5305\u542b\u5728\u4e00\u4e2a candidate key \u91cc\u9762\u3002</p> <p>A relation schema \\(R\\) is in third normal form (3NF) if for all: $\\alpha\\rightarrow \\beta $ in \\(F^+\\) at least one of the following holds:</p> <ul> <li>\\(\\alpha\\rightarrow \\beta\\) is trivial (i.e., \\(\\beta \\in \\alpha\\))</li> <li>\\(\\alpha\\) is a superkey for R</li> <li>Each attribute A in \\(\\beta-\\alpha\\) is contained in a candidate key for \\(R\\). \u5019\u9009\u7801\u6709\u5f88\u591a\u4e2a\uff0c\u5305\u542b\u5728\u67d0\u4e00\u4e2a\u5019\u9009\u7801\u5373\u53ef\u3002  </li> </ul> Example <p> </p> <p>Goals of Normalization</p> <p>In the case that a relation scheme R is not in \u201cgood\u201d form, decompose it into a set of relation scheme  \\(\\{R_1, R_2, \\ldots, R_n\\}\\) such that </p> <ul> <li>each relation scheme is in good form (i.e., BCNF or 3NF)</li> <li>the decomposition is a lossless-join decomposition</li> <li>Preferably, the decomposition should be dependency preserving</li> </ul> E-R Modeling and Normal Forms <p> </p> <p>\u8fd9\u91cc\u7684\u65e0\u635f\u5206\u89e3\uff0c\u5148\u6307\u5b9a\u4e00\u4e2a\u8def\u5f84\uff0c\u8003\u8651\u6bcf\u4e24\u4e2a\u5173\u7cfb\u76f4\u63a5\u662f\u5426\u65e0\u635f\uff08\u516c\u5171\u5c5e\u6027\u662f\u5426\u4e3a\u5176\u4e2d\u4e00\u4e2a\u5173\u7cfb\u7684 key\uff09\u3002</p>"},{"location":"ZJU_CS/Database/db7/#multivalued_dependencies","title":"Multivalued Dependencies","text":"<p>There are database schemas in BCNF that do not seem to be sufficiently normalized.  </p> <p>Example</p> <p> </p> <p>\u5b58\u5728\u4e24\u79cd\u4e0d\u76f8\u5173\u7684\u591a\u503c\u4f9d\u8d56\u3002\u8001\u5e08 id \u53ef\u4ee5\u591a\u503c\u51b3\u5b9a child_name, \u53c8\u53ef\u4ee5\u591a\u503c\u51b3\u5b9a phone, \u4f46\u8fd9\u4e24\u4e2a\u5c5e\u6027\u662f\u4e0d\u76f8\u5173\u7684\uff0c\u653e\u5728\u4e00\u4e2a\u8868\u91cc\u5c31\u4f1a\u7ec4\u5408\u3002 \u7b2c\u4e8c\u5f20\u56fe\u7684\u4e3a Fourth Normal Form (4NF).</p> <p>\u56db\u8303\u5f0f\uff1a\u4e0d\u5b58\u5728\u975e\u5e73\u51e1\u7684\u591a\u503c\u4f9d\u8d56\u3002</p> <p>Let R be a relation schema and let \\(\\alpha\\subset R\\) and \\(\\beta\\subset R\\). The multivalued dependency \\(\\alpha\\rightarrow\\rightarrow\\beta\\) holds on \\(R\\) if in any legal relation \\(r(R)\\), for all pairs for tuples \\(t_1\\) and \\(t_2\\) in \\(r\\) such that \\(t_1[\\alpha] = t_2 [\\alpha]\\), there exist tuples \\(t_3\\) and \\(t_4\\) in \\(r\\) such that: </p> \\[ t_3[\\alpha] = t_4[\\alpha] = t_1[\\alpha]=t_2[\\alpha]\\\\ t_3[\\beta]=t_1[\\beta]\\\\ t_3[R-\\beta]=t_2[R-\\beta]\\\\ t_4[\\beta]=t_2[\\beta]\\\\ t_4[R-\\beta]=t_1[R-\\beta] \\] <p>A relation schema \\(R\\) is in 4NF with respect to a set \\(D\\) of functional and multivalued dependencies if for all multivalued dependencies in \\(D^+\\) of the form \\(\\alpha\\rightarrow \\rightarrow \\beta\\), where \\(\\alpha\\subset R\\) and \\(\\beta\\subset R\\), at least one of the following hold:</p> <ul> <li>\\(\\alpha\\rightarrow \\rightarrow \\beta\\) is trivial (i.e., \\(\\beta \\subset \\alpha\\) or \\(\\alpha \\cup \\beta= R\\))   \u5373\u9664\u4e86 \\(\\alpha,\\beta\\) \u4e3a\u6ca1\u6709\u5176\u4ed6\u5c5e\u6027\u3002</li> <li>\\(\\alpha\\) is a superkey for schema \\(R\\)</li> </ul> <p>\u4efb\u4f55\u4e00\u4e2a\u591a\u503c\u4f9d\u8d56\uff0c\u8981\u4e48\u5de6\u8fb9\u5c31\u662f\u4e2a key, \u8981\u4e48\u8fd9\u4e2a\u4f9d\u8d56\u662f\u5e73\u51e1\u7684\u3002</p> E-R Modeling and Normal Forms <p> </p> <p>\u4e0d\u662f BCNF, \u56e0\u6b64\u4e5f\u4e0d\u662f 4NF. </p>"},{"location":"ZJU_CS/Database/db7/#overall_database_design_process","title":"Overall Database Design Process","text":"<p>Denormalization for Performance</p> <p>Some aspects of database design are not caught by normalization. \u6709\u65f6\u5019\u6211\u4eec\u9700\u8981\u5f15\u5165\u5197\u4f59\uff0c\u6765\u4fdd\u6301\u6027\u80fd\u3002</p> <p>Example</p> <p> </p>"},{"location":"ZJU_CS/Database/db8/","title":"Lecture 8 | Physical Storage Systems","text":"Abstract <ul> <li>Classification of Physical Storage Media</li> <li>Storage Hierarchy </li> <li>Magnetic Disks</li> <li>Disk Interface Standards</li> <li>Performance Measures of Disks</li> <li>Optimization of Disk-Block Access</li> <li>Flash Storage &amp; SSD</li> <li>Storage Class Memory(NVM)</li> </ul>"},{"location":"ZJU_CS/Database/db8/#storage_hierarchy","title":"Storage Hierarchy","text":"<ul> <li>volatile storage(\u6613\u5931\u5b58\u50a8) loses contents when power is switched off.  </li> <li>non-volatile storage\uff08\u975e\u6613\u5931\u5b58\u50a8\uff09 Contents persist even when power is switched off.  </li> </ul> <p>\u4e3b\u8981\u4ece speed, cost, reliability \u8861\u91cf</p> <p>\u4ece\u9ad8\u5c42\u5f80\u4f4e\u5c42\u8d70\uff0c\u5b58\u50a8\u8bbe\u5907\u53d8\u5f97\u66f4\u6162\uff0c\u66f4\u4fbf\u5b9c\u548c\u66f4\u5927\u3002</p> <ul> <li>primary storage: Fastest media but volatile (cache, main memory).</li> <li>secondary storage: next level in hierarchy, non-volatile, moderately fast access time also called on-line storage </li> <li>tertiary storage: lowest level in hierarchy, non-volatile, slow access time also called off-line storage  \u5e38\u7528\u6765\u5907\u4efd</li> </ul> <p>NVM (non-volatile memory) \u8bbf\u95ee\u548c\u5185\u5b58\u4e00\u6837\uff0c\u4ee5\u5b57\u8282\u5bfb\u5740\uff0c\u800c\u4e14\u6389\u7535\u80fd\u4fdd\u6301\u6570\u636e\u3002 </p>"},{"location":"ZJU_CS/Database/db8/#magnetic_disks","title":"Magnetic Disks","text":"<p>\u4e00\u4e2a\u78c1\u76d8\u6709\u4e0a\u5341\u4e07\u4e2a track(\u78c1\u9053), \u4e00\u4e2a\u78c1\u9053\u53c8\u6709\u4e0a\u5343\u4e2a sector(\u6247\u533a\uff0c\u662f\u8ba1\u7b97\u673a\u548c\u78c1\u76d8\u4ea4\u6362\u6570\u636e\u7684\u6700\u5c0f\u5355\u4f4d). arm assemly \u7528\u6765\u5bfb\u9053\uff0c\u8bfb\u5199\u5934\u5171\u8fdb\u9000\uff0c\u5bfb\u627e\u6570\u636e\u5728\u54ea\u4e2a\u78c1\u9053\u4e0a\u3002 \u7b49\u5bf9\u5e94\u6247\u533a\u65cb\u8f6c\u5230\u8bfb\u5199\u5934\uff0c\u624d\u5f00\u59cb\u4f20\u8f93\u6570\u636e\u3002 \u540c\u6837\u78c1\u9053\u7ec4\u6210\u7684\u67f1\u9762\u3002\u5bf9\u4e8e\u5927\u6587\u4ef6\uff0c\u6700\u597d\u5b58\u5728\u540c\u4e00\u4e2a\u67f1\u9762\u4e0a\uff0c\u8fd9\u6837\u53ef\u4ee5\u5e76\u884c\u8bfb\u5199\u3002</p> <ul> <li>Read-write head</li> <li>Surface of platter divided into circular tracks\uff08\u78c1\u9053\uff09</li> <li>Each track is divided into sectors\uff08\u6247\u533a\uff09</li> <li>To read/write a sector<ul> <li>disk arm swings to position head on right track</li> <li>platter spins continually; data is read/written as sector passes under head</li> </ul> </li> <li>Cylinder\uff08\u67f1\u9762\uff09 i consists of ith track of all the platters </li> <li>Disk controller(\u78c1\u76d8\u63a7\u5236\u5668)\u2013 interfaces between the computer system and the disk drive hardware.</li> </ul>"},{"location":"ZJU_CS/Database/db8/#performance_measures_of_disks","title":"Performance Measures of Disks","text":"<ul> <li>Access time(\u8bbf\u95ee\u65f6\u95f4) \u2013 the time it takes from when a read or write request is issued to when data transfer begins.    Consists of: <ul> <li>Seek time\uff08\u5bfb\u9053\u65f6\u95f4\uff09\u2013 time it takes to reposition the arm over the correct track. <ul> <li>Average seek time is \u00bd the worst case seek time.  </li> <li>4 to 10 milliseconds on typical disks</li> </ul> </li> <li>Rotational latency\uff08\u65cb\u8f6c\u5ef6\u8fdf\uff09 \u2013 time it takes for the sector to be accessed to appear under the head. <ul> <li>Average latency is \u00bd of the worst case latency.  </li> <li>4 to 11 milliseconds on typical disks (5400 to 15000 r.p.m.)</li> </ul> </li> </ul> </li> <li>Data-transfer rate\uff08\u6570\u636e\u4f20\u8f93\u7387\uff09 \u2013 the rate at which data can be retrieved from or stored to the disk.</li> </ul> <p>\u5185\u5b58\u4f20\u8f93\u662f\u4ee5\u5757\u4e3a\u5355\u4f4d\u7684\u3002\u5373\u4f7f\u662f\u60f3\u8981\u8bbf\u95ee\u4e00\u4e2a byte, \u4e5f\u9700\u8981\u628a\u8fd9\u4e2a byte \u6240\u5728\u7684 4k \u5185\u5b58\u8bfb\u8fdb\u6765\u3002</p> <ul> <li> <p>Disk block is a logical unit for storage allocation and retrieval  </p> <ul> <li>Smaller blocks: more transfers from disk</li> <li>Larger blocks:  more space wasted due to partially filled blocks</li> </ul> </li> <li> <p>Sequential access pattern(\u987a\u5e8f\u8bbf\u95ee\u6a21\u5f0f) \u8fde\u7eed\u7684\u8bfb\u5199\u8bf7\u6c42\u53ea\u9700\u8981\u7b2c\u4e00\u6b21\u8bbf\u95ee\u78c1\u76d8  </p> </li> <li> <p>Random access pattern\uff08\u968f\u673a\u8bbf\u95ee\u6a21\u5f0f\uff09 \u6162\uff0c\u5e0c\u671b\u5c3d\u91cf\u591a\u4e00\u4e9b\u987a\u5e8f\u8bbf\u95ee\u3002 \u53ef\u4ee5\u7528\u4e00\u4e2a\u65e5\u5fd7\u628a\u8981\u4fee\u6539\u7684\u6570\u636e\u8bb0\u5f55\u4e0b\u6765\uff0c\u540e\u9762\u518d\u8fdb\u884c\u4fee\u6539\uff0c\u5c3d\u91cf\u7528\u987a\u5e8f\u8bbf\u95ee\u66ff\u6362\u968f\u673a\u8bbf\u95ee\u3002  </p> </li> <li> <p>I/O operations per second (IOPS \uff0c\u6bcf\u79d2I/O\u64cd\u4f5c\u6570) Number of random block reads that a disk can support per second. \u6bcf\u79d2\u53ef\u4ee5\u652f\u6301\u968f\u673a\u8bfb\u7684\u6b21\u6570\u3002  </p> </li> <li>Mean time to failure (MTTF\uff0c\u5e73\u5747\u6545\u969c\u65f6\u95f4)  the average time the disk is expected to run continuously without any failure.</li> </ul>"},{"location":"ZJU_CS/Database/db8/#optimization_of_disk-block_access","title":"Optimization of Disk-Block Access","text":"<ul> <li>Buffering: in-memory buffer to cache disk blocks \u6570\u636e\u8bfb\u8fdb\u6765\u5c31\u4e22\uff0c\u6bd4\u8f83\u53ef\u60dc\uff0c\u6240\u4ee5\u6211\u4eec\u628a\u5b83\u653e\u5728\u4e00\u4e2a\u5730\u65b9\uff0c\u4e07\u4e00\u540e\u9762\u9700\u8981\u4f7f\u7528\u53ef\u4ee5\u4e0d\u7528\u518d\u8bfb\u3002</li> <li>Read-ahead(Prefetch): Read extra blocks from a track in anticipation that they will be requested soon  \u9884\u53d6\uff0c\u8bfb\u67d0\u5757\u65f6\u9884\u6d4b\u90bb\u8fd1\u51e0\u5757\u4e5f\u4f1a\u88ab\u8bbf\u95ee\uff0c\u4e8e\u662f\u5c31\u4e00\u8d77\u53d6\u5230\u5185\u5b58\u4e2d\u3002\u8981\u6709\u4f9d\u636e\u5730\u9884\u53d6\uff0c\u4e0d\u7136\u65e0\u7528\u7684\u6570\u636e\u4f1a\u5360\u7528\u7f13\u5b58\u3002  </li> <li> <p>Disk-arm-scheduling algorithms re-order block requests so that disk arm movement is minimized  elevator algorithm </p> </li> <li> <p>File organization</p> <ul> <li>Allocate blocks of a file in as contiguous a manner as possible \u9884\u5148\u5206\u914d\u5f97\u5230\u7684\u5185\u5b58\u662f\u8fde\u7eed\u7684  </li> <li>Files may get fragmented <ul> <li>Sequential access to a fragmented file results in increased disk arm movement  </li> <li>Some systems have utilities to defragment the file system, in order to speed up file access</li> </ul> </li> </ul> </li> <li>Nonvolatile write buffers\uff08\u975e\u6613\u5931\u6027\u5199\u7f13\u5b58\uff09 speed up disk writes by writing blocks to a non-volatile RAM buffer immediately \u628a\u8981\u5199\u7684\u6570\u636e\u5148\u5199\u5230\u4e00\u4e2a\u5feb\u901f\u7684\u975e\u6613\u5931\u7684\u7f13\u5b58\u91cc\uff0c\u5982 NVM. \u8fd9\u65f6\u4e0a\u9762\u7684\u7a0b\u5e8f\u53ef\u4ee5\u7ee7\u7eed\u6267\u884c\u4e86, NVM \u518d\u62e9\u673a\u5c06\u6570\u636e\u5199\u56de\u5230\u78c1\u76d8\u3002</li> <li>Log disk\uff08\u65e5\u5fd7\u78c1\u76d8\uff09 a disk devoted to writing a sequential log of block updates  </li> </ul>"},{"location":"ZJU_CS/Database/db8/#flash_storage","title":"Flash Storage","text":"<ul> <li>NAND flas<ul> <li>requires page-at-a-time read (page: 512 bytes to 4 KB) \u987a\u5e8f\u8bfb\u5199\u548c\u968f\u673a\u8bfb\u5199\u5dee\u4e0d\u591a  </li> <li>Page can only be written once \u50cf\u9ed1\u677f\uff0c\u5199\u4e86\u6570\u636e\u5982\u679c\u8981\u518d\u5199\u9700\u8981\u628a\u4e4b\u524d\u7684\u64e6\u6389\u3002  </li> </ul> </li> <li>SSD(Solid State Disks) Use standard block-oriented disk interfaces, but store data on multiple flash storage devices internally</li> </ul> <p>\u53ef\u80fd\u6709\u8fd9\u6837\u7684\u60c5\u51b5\uff1a\u6211\u4eec\u53cd\u590d\u8bfb\u5199\u3001\u64e6\u53bb\u67d0\u51e0\u4e2a\u5757\uff0c\u8fd9\u4f1a\u5bfc\u81f4\u5b83\u4eec\u574f\u7684\u5f88\u5feb\u3002</p> <ul> <li>Remapping of logical page addresses to physical page addresses avoids waiting for erase</li> <li> <p>Flash translation table tracks mapping</p> <ul> <li>also stored in a label field of flash page</li> <li>remapping carried out by flash translation layer </li> </ul> </li> <li> <p>wear leveling(\u78e8\u635f\u5747\u8861) </p> </li> </ul> <p>evenly distributed erase operators across physical blocks</p> <p>Persistence \u5373\u6389\u7535\u662f\u5426\u80fd\u4fdd\u6301\u539f\u6570\u636e\u3002</p>"},{"location":"ZJU_CS/Database/db9/","title":"Lecture 9 | Data Storage Structures","text":"Abstract <ul> <li>File Organization<ul> <li>Fixed-Length Records</li> <li>Variable-Length Records</li> </ul> </li> <li>Organization of Records in Files<ul> <li>Heap File Organization</li> <li>Sequential File Organization</li> <li>Multitable Clustering File Organization</li> <li>Table Partition</li> </ul> </li> <li>Data-Dictionary Storage</li> <li>Storage Access &amp; Buffer manager<ul> <li>LRU strategy</li> <li>Clock algorithm</li> </ul> </li> <li>Columnar Representation</li> </ul>"},{"location":"ZJU_CS/Database/db9/#file_organization","title":"File Organization","text":"<ul> <li>The database is stored as a collection of files.  </li> <li>Each file is a sequence of records.  </li> <li>A record is a sequence of fields.  </li> </ul> <p>One approach:</p> <ul> <li>assume record size is fixed</li> <li>each file has records of one particular type only </li> <li>different files are used for different relations</li> </ul>"},{"location":"ZJU_CS/Database/db9/#fixed-length_records","title":"Fixed-Length Records","text":"<p>Store record i starting from byte \\(n \\times (i \u2013 1)\\), where n is the size of each record.  </p> <p>Record access is simple but records may cross blocks Modification: do not allow records to cross block boundaries  </p> <p>Deletion of record i:  alternatives:</p> <ul> <li>move records \\(i + 1,\\ldots , n\\) to \\(i, \\ldots. , n \u2013 1\\)</li> <li>move record n  to i</li> <li>do not move records, but link all free records on a free list \u8981\u5220\u9664\u7684\u6761\u6253\u4e0a\u6807\u8bb0\uff0c\u5f62\u6210\u4e00\u4e2a\u7a7a\u8bb0\u5f55\u7684\u94fe\u8868\u3002 \u4ee5\u540e\u5982\u679c\u8981\u5f80\u8fd9\u4e2a\u5757\u91cc\u63d2\u5165\uff0c\u76f4\u63a5\u901a\u8fc7\u6307\u9488\u627e\u5230\u7a7a\u8bb0\u5f55\u63d2\u5165\u5373\u53ef\uff0c\u968f\u540e\u66f4\u65b0\u6307\u9488\u3002 </li> </ul>"},{"location":"ZJU_CS/Database/db9/#variable-length_records","title":"Variable-Length Records","text":"<p>Variable-length records arise in database systems in several ways:</p> <ul> <li>Storage of multiple record types in a file. </li> <li>Record types that allow variable lengths for one or more fields such as strings (<code>varchar</code>)</li> <li>Record types that allow repeating fields (used in some older data models).</li> </ul> <p>Variable length attributes represented by fixed size (offset, length), with actual data stored after all fixed length attributes Null values represented by null-value bitmap\uff08\u7a7a\u4f4d\u56fe\uff09</p> <p>Example</p> <p>\u4e0d\u5b9a\u957f\u7684\u4fdd\u5b58\u5728\u540e\u9762\uff0c\u5b9a\u957f\u7684 (offset, length) \u4fdd\u5b58\u5728\u524d\u9762\u3002 </p> <p>\u8fd9\u91cc\u4f4d\u7f6e 12 \u653e\u7684 65000 \u662f\u5b9a\u957f\u7684 salary. \u4f4d\u7f6e 20 \u653e\u7684 0000, \u8868\u793a\u524d\u9762\u56db\u4e2a\u5c5e\u6027\u5747\u662f\u975e\u7a7a\u7684, 1 \u8868\u793a\u7a7a\u3002\uff08\u653e\u5728\u524d\u9762\u4e5f\u53ef\u4ee5\uff0c\u53ea\u8981\u5728\u4e00\u4e2a\u56fa\u5b9a\u4f4d\u7f6e\u80fd\u627e\u5230\u5373\u53ef\uff09 \u524d\u63d0\uff1a\u6bcf\u4e00\u4e2a\u8bb0\u5f55\u90fd\u662f\u88ab\u653e\u5728\u4e00\u8d77\u7684\u3002\uff08\u6709\u6309\u5217\u5b58\u50a8\u7684\u65b9\u5f0f\uff09</p>"},{"location":"ZJU_CS/Database/db9/#slotted_page_structure","title":"Slotted Page Structure","text":"<p>Slotted page\uff08\u5206\u69fd\u9875\uff09 header contains:</p> <ul> <li>number of record entries</li> <li>end of free space in the block \u4e00\u4e2a\u6307\u9488\u6307\u5411 free space \u672b\u5c3e\uff0c\u7528\u6765\u5206\u914d\u5185\u5b58</li> <li>location and size of each record</li> </ul> <p>\u5f53\u5220\u9664\u7684\u65f6\u5019\uff0c\u4e00\u79cd\u65b9\u6cd5\u662f\u628a\u540e\u9762\u7684\u8bb0\u5f55\u632a\u8fc7\u53bb\uff0c\u8ba9\u81ea\u7531\u7a7a\u95f4\u66f4\u7d27\u51d1\uff0c\u8fd9\u6837\u9700\u8981\u4fee\u6539 entries, free space \u7684\u6307\u9488, \u504f\u79fb\u91cf\u4e5f\u8981\u8c03\u6574\u3002\u4e5f\u53ef\u4ee5\u6682\u65f6\u4e0d\u8c03\u6574\uff0c\u7b49\u540e\u9762\u5982\u679c\u9700\u8981\u5206\u914d\u5185\u5b58\u4f46\u4e0d\u591f\u7528\u65f6\uff0c\u518d\u4e00\u6b21\u6027\u91cd\u6574\u4e4b\u524d\u7684\u7a7a\u95f4\u3002</p>"},{"location":"ZJU_CS/Database/db9/#organization_of_records_in_files","title":"Organization of Records in Files","text":"<p>\u63d2\u5165\u5230\u54ea\u4e2a\u6587\u4ef6\u7684\u54ea\u4e2a\u4f4d\u7f6e\uff1f</p> <ul> <li>Heap \u2013 record can be placed anywhere in the file where there is space \u6709\u4f4d\u7f6e\u6211\u5c31\u63d2\u8fdb\u53bb</li> <li>Sequential \u2013 store records in sequential order, based on the value of the search key of each record \u63d2\u5165\u7684\u5143\u7d20\u7ef4\u62a4\u4e00\u4e2a\u6b21\u5e8f</li> <li>In a multitable clustering file organization records of several different relations can be stored in the same file Motivation: store related records on the same block to minimize I/O</li> <li>B+-tree file organization - Ordered storage even with inserts/deletes  </li> <li>Hashing \u2013 a hash function computed on search key; the result specifies in which block of the file the record should be placed</li> </ul>"},{"location":"ZJU_CS/Database/db9/#heap_file_organization","title":"Heap File Organization","text":"<p>Array with 1 entry per block.  Each entry is a few bits to a byte, and records fraction of block that is free Free-space map \u7ef4\u62a4\u4e00\u4e2a\u7a7a\u95f2\u5757\u7684\u5730\u56fe\uff0c\u8bb0\u5f55\u8fd9\u4e2a\u5757\u7684\u7a7a\u95f2\u7a0b\u5ea6\u3002</p> <p>Example</p> <p>3 bits per block, value divided by 8 indicates   </p> <p>\u5982 4 \u8868\u793a 4/8 \u7a7a\u95f2\u3002 \u987a\u5e8f\u8bbf\u95ee\u6bd4\u8f83\u4f4e\u6548\uff0c\u6211\u4eec\u53ef\u4ee5\u6709\u7b2c\u4e8c\u5c42\u6765\u8868\u793a\u5176\u4e2d\u7684\u6700\u5927\u7a7a\u95f2\u5757\u3002</p>"},{"location":"ZJU_CS/Database/db9/#sequential_file_organization","title":"Sequential File Organization","text":"<p>Suitable for applications that require sequential processing of the entire file  The records in the file are ordered by a search-key   </p> <ul> <li>Deletion \u2013 use pointer chains</li> <li>Insertion \u2013 locate the position where the record is to be inserted  \u8981\u66f4\u65b0 pointer chain \u6548\u7387\u4f4e\u3002\u6211\u4eec\u628a\u63d2\u5165\u7684\u653e\u5728\u672b\u5c3e\uff0c\u901a\u8fc7\u6307\u9488\u7ef4\u62a4\u79e9\u5e8f\u3002</li> </ul> <p>Need to reorganize the file from time to time to restore sequential order.  </p>"},{"location":"ZJU_CS/Database/db9/#multitable_clustering_file_organization","title":"Multitable Clustering File Organization","text":"<p>Store several relations in one file using a multitable clustering file organization.  </p> <p>Example</p> <p>\u5bf9\u4e8e\u8001\u5e08\u548c\u90e8\u95e8\u7ecf\u5e38\u4e00\u8d77\u8bbf\u95ee\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u8fd9\u4e24\u4e2a\u4fe1\u606f\u653e\u5728\u4e00\u8d77\u3002\uff08\u5982\u679c\u4e24\u4e2a\u8868\u7ecf\u5e38\u8fde\u63a5\uff0c\u8fd9\u6837\u6bd4\u8f83\u9ad8\u6548\uff09 \u4f46\u8fd9\u6837\u5bf9\u4e8e\u5355\u72ec\u67e5\u627e\u67d0\u4e2a\u4fe1\u606f\u5c31\u4e0d\u592a\u65b9\u4fbf\u3002  </p>"},{"location":"ZJU_CS/Database/db9/#table_partitioning","title":"Table Partitioning","text":"<p>Table partitioning: Records in a relation can be partitioned into smaller relations that are stored separately \u4e00\u4e2a\u8868\u592a\u5927\uff0c\u5bf9\u4e8e\u5e76\u884c\u8bbf\u95ee\u53ef\u80fd\u5f15\u53d1\u51b2\u7a81\u3002\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u628a\u8868\u5206\u5f00\uff0c\u5982\u5bf9\u4e8e\u6240\u6709\u8001\u5e08\u7684\u8868\uff0c\u6211\u4eec\u53ef\u4ee5\u628a\u8ba1\u7b97\u673a\u7cfb\u7684\u8001\u5e08\u5206\u51fa\u6765\uff0c\u6570\u5b66\u7cfb\u7684\u8001\u5e08\u5206\u51fa\u6765\u3002\uff08\u6c34\u5e73\u5206\u5272\uff09\u4e5f\u53ef\u4ee5\u6309\u5217\u5b58\u50a8\u3002  </p>"},{"location":"ZJU_CS/Database/db9/#data_dictionary_storage","title":"Data Dictionary Storage","text":"<p>The Data dictionary (also called system catalog) stores metadata; that is, data about data, such as   \u5b9a\u4e49\u7684\u6570\u636e\u4e5f\u662f\u6570\u636e (metadata) \u6211\u4eec\u4e5f\u9700\u8981\u628a\u5b83\u4eec\u5b58\u50a8\u4e0b\u6765\u3002</p> <ul> <li>Information about relations</li> <li>User and accounting information, including passwords</li> <li>Statistical and descriptive data</li> <li>Physical file organization information</li> <li>Information about indices </li> </ul>"},{"location":"ZJU_CS/Database/db9/#storage_access_buffer_manager","title":"Storage Access &amp; Buffer manager","text":"<p>Blocks are units of both storage allocation and data transfer. Buffer \u2013 portion of main memory available to store copies of disk blocks. Buffer manager \u2013 subsystem responsible for allocating buffer space in main memory.</p> <p>\u5982\u6211\u4eec\u8981\u627e\u67d0\u5757\uff0c\u5148\u5728 buffer \u4e2d\u627e\uff0c\u5982\u679c\u6ca1\u627e\u5230\u5c31\u4ece\u78c1\u76d8\u4e2d\u8bfb\u51fa\u6765\u653e\u5230 buffer \u4e2d\u3002\u5f53 buffer \u5b8c\u4e86\u5c31\u9700\u8981\u8003\u8651\u5982\u4f55\u66ff\u6362\uff0c\u66ff\u6362\u54ea\u4e00\u5757\u3002</p> LRU Example <p> </p> <p>\u5982\u679c 4 \u88ab\u4fee\u6539\u8fc7\u4e86\uff0c\u90a3\u4e48\u66ff\u6362\u65f6\u9700\u8981\u5148\u628a\u8fd9\u5757\u5199\u56de\u5230\u78c1\u76d8\u4e2d\u3002\u5199\u56de\u65f6\u4e5f\u8981\u6ce8\u610f\u6389\u7535\u7b49\u95ee\u9898\u3002</p> <p>Programs call on the buffer manager when they need a block from disk.</p> <ul> <li>If the block is already in the buffer, buffer manager returns the address of the block in main memory</li> <li>If the block is not in the buffer, the buffer manager<ul> <li>Allocates space in the buffer for the block \u5728 buffer \u91cc\u66ff\u6362\u7a7a\u95f4\uff0c\u5982\u679c\u6709\u7a7a\u4f4d\u53ef\u4ee5\u76f4\u63a5\u5206\u914d\uff0c\u5426\u5219\u9700\u8981\u66ff\u6362\u3002<ul> <li>Replacing (throwing out) some other block, if required, to make space for the new block. \u6709\u4e0d\u540c\u7684\u7b56\u7565\u8fdb\u884c\u9009\u62e9\u8981\u4e22\u5f03\u7684\u5757\u3002</li> <li>Replaced block written back to disk only if it was modified since the most recent time that it was written to/fetched from the disk.</li> </ul> </li> <li>Reads the block from the disk to the buffer, and returns the address of the block in main memory to requester. </li> </ul> </li> </ul> <p>Pinned block </p> <p>memory block that is not allowed to be written back to disk \u6b63\u5728\u8bbf\u95ee\u8fd9\u4e00\u5757\uff0c\u90a3\u4e48\u8fd9\u4e00\u5757\u4e0d\u80fd\u88ab\u66ff\u6362\u51fa\u53bb  </p> <ul> <li>Pin done before reading/writing data from a block</li> <li>Unpin done when read /write is complete</li> <li>Multiple concurrent pin/unpin operations possible Keep a pin count, buffer block can be evicted only if pin <code>count = 0</code></li> </ul> <p>Shared and exclusive locks on buffer </p> <p>Readers get shared lock, updates to a block require exclusive lock Locking rules:</p> <ul> <li>Only one process can get exclusive lock at a time</li> <li>Shared lock cannot be concurrently with exclusive lock</li> <li>Multiple processes may be given shared lock concurrently</li> </ul>"},{"location":"ZJU_CS/Database/db9/#buffer-replacement_policies","title":"Buffer-Replacement Policies","text":"<ul> <li> <p>LRU strategy - replace the block least recently used.  </p> <ul> <li>Idea behind LRU \u2013 use past pattern of block references as a predictor of future references \u7528\u8fc7\u53bb\u7684\u8bbf\u95ee\u6a21\u5f0f\u63a8\u65ad\u8bb2\u6765\u7684\u8bbf\u95ee\u6a21\u5f0f</li> </ul> <p>LRU can be a bad strategy</p> <p> </p> </li> <li> <p>Toss-immediate strategy \u2013 frees the space occupied by a block as soon as the final tuple of that block has been processed</p> </li> <li>Most recently used (MRU) strategy \u2013  system must pin the block currently being processed.  After the final tuple of that block has been processed, the block is unpinned, and it becomes the most recently used block.</li> <li>Buffer managers also support forced output of blocks for the purpose of recovery </li> </ul> <p>\u6700\u597d\u7684\u7b56\u7565\u662f\u57fa\u4e8e\u9884\u6d4b\u7684\uff0c\u4f46\u662f\u9884\u6d4b\u672c\u8eab\u662f\u5f88\u96be\u7684\uff0c\u9700\u8981\u5229\u7528\u4eba\u5de5\u667a\u80fd\u7684\u65b9\u6cd5\u3002  </p>"},{"location":"ZJU_CS/Database/db9/#clock_an_approximation_of_lru","title":"Clock: An approximation of LRU","text":"<p>Arrange block into a cycle, store one <code>reference_bit</code> per block   When <code>pin_count</code> reduces to 0, set <code>reference_bit =1</code> <code>reference_bit</code> as the 2<sup>nd</sup> chance bit  </p> <pre><code>do for each block in cycle {\n    if (reference_bit ==1)\n        set reference_bit=0;\n    else if (reference_bit ==0)\n        choose this block for replacement;\n} until a page is chosen;\n</code></pre>"},{"location":"ZJU_CS/Database/quiz/","title":"Quiz","text":"<p>\u672c\u8282\u4e3asjl\u8001\u5e08\u6570\u636e\u5e93\u8bfe\u540e\u968f\u5802\u4e60\u9898\u7684\u6c47\u603b</p>"},{"location":"ZJU_CS/Database/quiz/#week1","title":"week1","text":"<ol> <li>The feature of database;</li> <li>The duty of database administrator;</li> </ol>"},{"location":"ZJU_CS/Database/quiz/#week2","title":"week2","text":"<ol> <li>\u5173\u7cfb\u4ee3\u6570\u7684\u57fa\u672c\u64cd\u4f5c\u6709\u4ec0\u4e48</li> <li>\u4e0d\u540c\u64cd\u4f5c\u4e4b\u540e\u7684\u5143\u7956\u6570\u91cf</li> </ol>"},{"location":"ZJU_CS/Database/quiz/#week3","title":"week3","text":"<ol> <li>sql\u8bed\u53e5\u8003\u5bdf\uff0c\u8003\u70b9\u5b8c\u5168\u540c22.2\u8003\u9898</li> <li>\u8003\u5bdf<code>select p1.id from person P1, person P2 where p1.gender = p2.gender group by p1.id having count(*) &gt; 1;</code>\u7684\u7ed3\u679c\u5373\u7edf\u8ba1\u76f8\u540c\u6027\u522b\u4e14\u4eba\u6570\u5927\u4e8e\u4e8c\u7684\u6027\u522b\u7684\u4eba\u6570\u3002 <p>\u7531\u4e8eP1\u548cP2\u662f\u540c\u4e00\u4e2a\u8868\u505aproduct\uff0c\u56e0\u6b64\u7ed3\u679c\u7684\u6570\u91cf\u53ef\u80fd\u5927\u4e8e\u8868\u4e2d\u884c\u6570\u3002</p> </li> </ol>"},{"location":"ZJU_CS/Database/quiz/#week6","title":"week6","text":"<ol> <li>\u628aER\u56fe\u8f6c\u5316\u6210\u5173\u7cfb\u6a21\u5f0f\u7684\u65f6\u5019\uff0centity\u4e2d\u7684\u591a\u503c\u5c5e\u6027\u5fc5\u987b\u5355\u72ec\u8f6c\u6362\u6210\u4e00\u4e2a\u5173\u7cfb\u6a21\u5f0f\u3002</li> <li>\u628aER\u56fe\u8f6c\u5316\u6210\u5173\u7cfb\u6a21\u5f0f\u7684\u65f6\u5019\uff0cMany-to-Many\u7684\u5173\u7cfb\u5fc5\u987b\u8f6c\u6362\u6210\u4e00\u4e2a\u5173\u7cfb\u6a21\u5f0f\u3002</li> <li>\u628aweak entity set\u8f6c\u6362\u6210\u5173\u7cfb\u6a21\u5f0f\u65f6\uff0c\u6784\u6210\u5173\u7cfb\u6a21\u5f0f\u4e3b\u952e\u7684\u5c5e\u6027\u662f\uff1a <p>The union of the discriminator of the weak entity set and the primary key of the identifying strong entity set.</p> </li> </ol>"},{"location":"ZJU_CS/Database/quiz/#week7","title":"week7","text":"<p>\\(F={AB \\to C, C \\to D}\\), set F hold on the relation R(ABCDE). 1. which functional dependency is in the closure of F?     &gt; \\(AB \\to D\\), \\(AB \\to CD\\). 2. The closure of the attribute set {AC} is:     &gt; {ACD} 3. What is the candidate key of R?     &gt; {ABE} 4. Which decomposition is lossless join?     &gt; - \\(R_1(A, B, C, E)\\), \\(R_2(C, D)\\) [Y]     &gt; - \\(R_1(A, B, C, E)\\), \\(R_2(A, B, D)\\) [Y]     &gt; - \\(R_1(A, B, D, E)\\), \\(R_2(A, B, C)\\) [Y]     &gt; - \\(R_1(A, B, C)\\), \\(R_2(C, D, E)\\) [N]</p> <ol> <li>\u8003\u5bdfCanonical Cover;</li> <li>\u8003\u5bdfBCNF;</li> </ol>"},{"location":"ZJU_CS/Database/quiz/#week9","title":"week9","text":"<ol> <li> <p>which physical storage media is non-volatile?     &gt; flash memory | magnetic disk | SSD | magnetic tape | optical disk</p> </li> <li> <p>which physical storage medias belong to secondary storage?     &gt; flash memory | magnetic disk | SSD </p> </li> <li> <p>which term represents the time that the disk controller takes to reposition the disk arm over the correct track?(\u8003\u5bdf<code>Performance Measures of Disks</code>)     &gt; seek time</p> </li> <li> <p>What is the right approach to optimizing data access on a disk?     &gt; - Buffering      &gt; - Read-ahead     &gt; - defragment the file system     &gt; - Non-volatile write buffer     &gt; - Log disk</p> </li> </ol> <p>\u215a. What's MTTF &amp; IOPS?     &gt; - MTTF: Mean Time To Failure     &gt; - IOPS: Input/Output Operations Per Second</p> <ol> <li> <p>What is contained in the header of slotted page?    </p> </li> <li> <p>Judge different file organization!!!</p> </li> <li> <p>Which statement is incorrect? (<code>D</code>)     &gt; - A. For heap file organization, records can be placed anywhere in the file where there is space     &gt; - B. Database system seeks to minimize the num of block transfers between the disk and memory     &gt; - C. If the needed block is not in the buffer, the buffer manager will replace some block in the buffer.     &gt; - D. LRUs are the most efficient replacement policy</p> </li> <li> <p>LRU Quiz</p> </li> </ol>"},{"location":"ZJU_CS/Database/quiz/#week10","title":"week10","text":"<ul> <li>Indexing mechanisms are used to speed up access to desired data. [Y]</li> <li>Range query returns records with an attribute value falling in a specified range of values. [Y]</li> <li>Secondary index is an index whose search key specifies an order same as the sequential order of the file. [N]</li> <li>In an dense index, index records for every search-key value appear in the index file. [Y]</li> <li>B+ tree path length is same as the height of the tree. [Y]</li> <li>If the root of a b plus tree is a leaf node, the tree has at least two children. [Y]</li> <li>In databases, a node of a b plus tree is generally the same size as a disk block. [Y]</li> <li>The leaf nodes of a b plus tree file organization store records, instead of pointers to records. [Y]</li> <li>Bitmap indices are useful for queries on multiple attributes, not particularly useful for single attribute queries. [Y]</li> </ul> <ol> <li>Benefits of LSM approach: (a,b,c) (a) Inserts are done using only sequential I/O operations. (b) Leave nodes are full, avoid space waste. \u00a9 Reduced number of I/O operations per record inserted as compared to B+ tree. (d) Queris have to search multiple trees. (e) Entire content of each level copied multiple times.</li> </ol>"},{"location":"ZJU_CS/Database/quiz/#week11","title":"week11","text":"<p>A B D</p> <p></p> <p>C</p> <p> - 500 - 1  - 1000  - 1</p> <p> \u7b2c\u56db\u9898 - 4  - 4</p> <p>\u7b2c\u4e94\u9898 - 16  - 2  - 160  - 32  - 400  - 272</p> <p> - 16080 160 - 1680 16</p>"},{"location":"ZJU_CS/Database/quiz/#week12","title":"week12","text":"<p>A B C D</p> <p></p> <p>50 20000 100</p>"},{"location":"ZJU_CS/Database/quiz/#week13","title":"week13","text":"<p>\u975e\u5e38\u77e5\u8bc6\u70b9\uff0c\u628aPPT\u6784\u6210\u903b\u8f91\u6846\u67b6\u5373\u53ef\u5b8c\u6210</p>"},{"location":"ZJU_CS/Database/quiz/#week14","title":"week14","text":"<p>\u8fd9\u91cc\u9762\u5bf9\u9501\u7684\u8003\u5bdf\u8fd8\u662f\u6bd4\u8f83\u7ec6\u81f4\u4e86\ud83d\ude2d \u8fd9\u51e0\u7ae0\u7684\u77e5\u8bc6\u90fd\u4e0d\u5c11\u554a\u8bb2\u771f</p> <p></p> <p>B</p> <p></p> <p>D</p>"},{"location":"ZJU_CS/Database/review/","title":"\u6570\u636e\u5e93\u7cfb\u7edf\u590d\u4e60\u6574\u7406","text":""},{"location":"ZJU_CS/Database/review/#_2","title":"\u7b2c\u4e00\u90e8\u5206\uff1a\u57fa\u672c\u6982\u5ff5\u548c\u5173\u7cfb\u4ee3\u6570","text":""},{"location":"ZJU_CS/Database/review/#10","title":"1.0 \u8bfe\u7a0b\u7eea\u8bba","text":"<ul> <li>Nothing important\uff0c\u4e3b\u8981\u662f\u4ecb\u7ecd\u8bfe\u7a0b\u7684\u8bc4\u5206\u6807\u51c6\u548c\u778e\u5439\u4e00\u901a</li> </ul>"},{"location":"ZJU_CS/Database/review/#11_relational_database","title":"1.1 \u5173\u7cfb\u578b\u6570\u636e\u5e93 Relational Database","text":""},{"location":"ZJU_CS/Database/review/#_3","title":"\u5173\u7cfb\u578b\u6570\u636e\u7684\u4e00\u4e9b\u57fa\u672c\u7279\u70b9","text":"<ul> <li>\u5173\u7cfb\u578b\u6570\u636e\u5e93\u662f\u4e00\u7cfb\u5217\u8868\u7684\u96c6\u5408 </li> <li>\u4e00\u5f20\u8868\u662f\u4e00\u4e2a\u57fa\u672c\u5355\u4f4d</li> <li>\u8868\u4e2d\u7684\u4e00\u884c\u8868\u793a\u4e00\u6761\u5173\u7cfb</li> </ul>"},{"location":"ZJU_CS/Database/review/#12","title":"1.2  \u57fa\u672c\u6982\u5ff5\u548c\u7ed3\u6784","text":"<ul> <li>a relation r is a subset of \\(D_{1}\\times D_{2}\\times \u2026\\times D_{n}\\)\uff0c\u4e00\u6761relation\u5c31\u662f\u5176\u4e2d\u7684\u4e00\u4e2an\u5143\u7684\u5143\u7ec4(tuple) </li> <li>attribute\u5c5e\u6027\uff0c\u6307\u8868\u4e2d\u7684\u5217\u540d </li> <li>attribution type \u5c5e\u6027\u7684\u7c7b\u578b</li> <li>attribute value \u5c5e\u6027\u503c\uff0c\u67d0\u4e2a\u5c5e\u6027\u5728\u67d0\u6761relation\u4e2d\u7684\u503c<ul> <li>\u5173\u7cfb\u578b\u6570\u636e\u5e93\u4e2d\u7684\u5c5e\u6027\u503c\u5fc5\u987b\u8981\u662fatomic\u7684\uff0c\u5373\u4e0d\u53ef\u5206\u5272\u7684</li> <li>domain\uff1a\u5c5e\u6027\u503c\u7684\u503c\u57df\uff0cnull\u662f\u6240\u6709\u5c5e\u6027\u7684domain\u4e2d\u90fd\u6709\u7684\u5143\u7d20\uff0c\u4f46\u662fnull\u503c\u4f1a\u9020\u6210\u4e00\u4e9b\u95ee\u9898</li> </ul> </li> <li>Relation Schema \u5173\u7cfb\u6a21\u5f0f</li> <li>\\(R=(A_{1},A_{2},\u2026,A_{n})\\) \u5176\u4e2d\\(A_i\\)\u662f\u4e00\u7cfb\u5217\u5c5e\u6027\uff0c\u5173\u7cfb\u6a21\u5f0f\u662f\u5bf9\u5173\u7cfb\u7684\u4e00\u79cd\u62bd\u8c61 </li> <li>r(R)\u8868\u793a\u5173\u7cfb\u6a21\u5f0fR\u4e2d\u7684\u4e00\u79cd\u5173\u7cfb\uff0ctable\u8868\u793a\u8fd9\u4e2a\u5173\u7cfb\u5f53\u524d\u7684\u503c(\u5173\u7cfb\u5b9e\u4f8b)<ul> <li>\u6bcf\u4e2a\u5173\u7cfbr\u4e2d\u7684\u5143\u7d20\u662ftable\u4e2d\u7684\u4e00\u884c</li> <li>\u4e0d\u8fc7\u7ecf\u5e38\u7528\u76f8\u540c\u7684\u540d\u5b57\u547d\u540d\u5173\u7cfb\u6a21\u5f0f\u548c\u5173\u7cfb</li> </ul> </li> <li>\u5173\u7cfb\u662f\u65e0\u5e8f\u7684\uff0c\u5173\u7cfb\u4e2d\u884c\u548c\u5217\u7684\u987a\u5e8f\u662firrelevant\u7684</li> </ul>"},{"location":"ZJU_CS/Database/review/#13_keys","title":"1.3 Keys\u952e","text":"<ul> <li>super key\u8d85\u952e\uff1a\u80fd\u591f\u552f\u4e00\u6807\u8bc6\u5143\u7ec4\u7684\u5c5e\u6027\u96c6\uff0c\u5373\u5bf9\u4e8e\u6bcf\u4e00\u6761\u5173\u7cfb\u800c\u8a00\u8d85\u952e\u7684\u503c\u662f\u552f\u4e00\u7684</li> <li>\u8d85\u952e\u53ef\u4ee5\u662f\u591a\u4e2a\u5c5e\u6027\u7684\u7ec4\u5408</li> <li>\u5982\u679cA\u662f\u5173\u7cfbR\u7684\u4e00\u4e2a\u8d85\u952e\uff0c\u90a3\u4e48(A, B)\u4e5f\u662f\u5173\u7cfbR\u7684\u4e00\u4e2a\u8d85\u952e</li> <li>\u8d85\u952e\u7684\u201c\u552f\u4e00\u6807\u8bc6\u201d\u5404\u4e2a\u5143\u7ec4\u662f\u53ef\u4ee5\u6709\u5197\u4f59\u4fe1\u606f\u7684</li> <li>candidate key\u5019\u9009\u952e\uff1a\u4e0d\u542b\u591a\u4f59\u5c5e\u6027\u7684\u8d85\u952e</li> <li>\u5982\u679cK\u662fR\u7684\u4e00\u4e2a\u8d85\u952e\uff0c\u800c\u4efb\u4f55K\u7684\u771f\u5b50\u96c6\u4e0d\u662fR\u7684\u4e00\u4e2a\u8d85\u952e\uff0c\u90a3\u4e48K\u5c31\u662fR\u7684\u4e00\u4e2a\u5019\u9009\u952e</li> <li>primary key\u4e3b\u952e\uff1a</li> <li>\u6570\u636e\u5e93\u7ba1\u7406\u5458\u6307\u5b9a\u7684\u5143\u7ec4\u6807\u8bc6\u7684\u4e00\u4e2a\u5019\u9009\u952e\uff0c\u4e0d\u80fd\u662fnull\u503c</li> <li>foreign key\u5916\u952e\uff1a\u7528\u6765\u63cf\u8ff0\u4e24\u4e2a\u8868\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u53ef\u4ee5\u6709\u7a7a\u503c</li> <li>\u5982\u679c\u5173\u7cfb\u6a21\u5f0fR1\u4e2d\u7684\u4e00\u4e2a\u5c5e\u6027\u662f\u53e6\u4e00\u4e2a\u5173\u7cfb\u6a21\u5f0fR2\u4e2d\u7684\u4e00\u4e2a\u4e3b\u952e\uff0c\u90a3\u4e48\u8fd9\u4e2a\u5c5e\u6027\u5c31\u662fR1\u7684\u4e00\u4e2a\u5916\u952e<ul> <li>a foreign key from r1 referencing r2</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/review/#14_relational_algebra","title":"1.4 Relational algebra\u5173\u7cfb\u4ee3\u6570","text":"<ul> <li>Select \u9009\u62e9\uff1a\\(\\sigma_{p}(r)=\\{t|t\\in r \\and p(t) \\}\\) </li> <li>\u7b5b\u9009\u51fa\u6240\u6709\u6ee1\u8db3\u6761\u4ef6p(t)\u7684\u5143\u7d20t</li> <li>Project\u6295\u5f71\uff1a\\(\\prod_{A_1,A_2,\\cdots,A_k}(r)\\)</li> <li>\u8fd0\u7b97\u7684\u7ed3\u679c\u662f\u539f\u6765\u7684\u5173\u7cfbr\u4e2d\u5404\u5217\u53ea\u4fdd\u7559\u5c5e\u6027\\(A_1,A_2,\\dots,A_k\\) \u540e\u7684\u5173\u7cfb</li> <li>\u4f1a\u81ea\u52a8\u53bb\u6389\u91cd\u590d\u7684\u5143\u7d20\uff0c\u56e0\u4e3a\u53ef\u80fd\u6295\u5f71\u7684\u65f6\u5019\u820d\u5f03\u7684\u5c5e\u6027\u662f\u53ef\u4ee5\u6807\u8bc6\u5173\u7cfb\u552f\u4e00\u6027\u7684\u5c5e\u6027</li> <li>Union \u5e76\u64cd\u4f5c\uff1a\\(r \\cup s=\\{t|t\\in r \\or t \\in s\\}\\) </li> <li>\u4e24\u4e2a\u5173\u7cfb\u7684\u5c5e\u6027\u4e2a\u6570\u5fc5\u987b\u76f8\u540c</li> <li>\u5404\u5c5e\u6027\u7684domain\u5fc5\u987b\u662f\u53ef\u4ee5\u6bd4\u8f83\u5927\u5c0f\u7684</li> <li>Set difference \u5dee\u64cd\u4f5c\uff1a\\(r-s=\\{t| t\\in r \\and t \\notin s\\}\\) </li> <li>Cartesian-Product\u7b1b\u5361\u5c14\u79ef\uff1a\\(r\\times s=\\{tq| t\\in r\\and q\\in s\\}\\) </li> <li>\u4e24\u4e2a\u5173\u7cfb\u5fc5\u987b\u662f\u4e0d\u76f8\u4ea4\u7684\uff0c\u5982\u679c\u76f8\u4ea4\u5219\u9700\u8981\u5bf9\u7ed3\u679c\u4e2d\u91cd\u590d\u7684\u5c5e\u6027\u540d\u8fdb\u884c\u91cd\u547d\u540d</li> <li>\u7b1b\u5361\u513f\u79ef\u8fd0\u7b97\u7684\u7ed3\u679c\u5173\u7cfb\u4e2d\u5143\u7ec4\u7684\u4e2a\u6570\u5e94\u8be5\u662frs\u7684\u4e2a\u6570\u4e4b\u4e58\u79ef</li> <li>Renaming\u91cd\u547d\u540d\uff1a\\(\\rho_{X}(E)\\) </li> <li>\u5c06E\u91cd\u547d\u540d\u4e3ax, \u8ba9\u4e00\u4e2a\u5173\u7cfb\u62e5\u6709\u591a\u4e2a\u522b\u540d\uff0c\u540c\u65f6X\u53ef\u4ee5\u5199\u4e3a\\(X(A_1,A_2,\\dots,A_n)\\) \u8868\u793a\u5bf9\u5c5e\u6027\u4e5f\u8fdb\u884c\u91cd\u547d\u540d</li> <li>\u7c7b\u4f3c\u4e8eC++\u4e2d\u7684\u5f15\u7528</li> <li>\u6269\u5c55\u8fd0\u7b97: \u53ef\u4ee5\u7528\u524d\u9762\u7684\u516d\u79cd\u57fa\u672c\u8fd0\u7b97\u5f97\u5230</li> <li>Intersection \u4ea4\u8fd0\u7b97\\(r \\cap s=\\{t|t\\in r \\and t \\in s\\}=r-(r-s)\\) </li> <li>Natual-Join \u81ea\u7136\u8fde\u63a5\uff1a\\(r\\Join s\\) <ul> <li>\u4e24\u4e2a\u5173\u7cfb\u4e2d\u540c\u540d\u5c5e\u6027\u5728\u81ea\u7136\u8fde\u63a5\u7684\u65f6\u5019\u5f53\u4f5c\u540c\u4e00\u4e2a\u5c5e\u6027\u6765\u5904\u7406</li> <li>Theta join \u6ee1\u8db3\u67d0\u79cd\u6761\u4ef6\u7684\u5408\u5e76\uff1a\\(r\\Join_{\\theta} s=\\sigma_{\\theta}(r\\Join s)\\) </li> </ul> </li> <li>Outer-Join\u5916\u90e8\u8fde\u63a5\uff0c\u5206\u4e3a\u5de6\u5916\u8fde\u63a5\uff0c\u53f3\u5916\u8fde\u63a5\uff0c\u5168\u5916\u8fde\u63a5<ul> <li>\u7528\u4e8e\u5e94\u5bf9\u4e00\u4e9b\u4fe1\u606f\u7f3a\u5931\u7684\u60c5\u51b5(\u6709null\u503c)</li> <li>\u5de6\u5916\u8fde\u63a5$\\ltimes $ </li> <li>\u5de6\u8fb9\u7684\u8868\u53d6\u5168\u90e8\u503c\u6309\u7167\u5173\u7cfb\u548c\u53f3\u8fb9\u8fde\u63a5\uff0c\u53f3\u8fb9\u4e0d\u5b58\u5728\u65f6\u4e3a\u7a7a\u503c </li> <li>\u53f3\u5916\u8fde\u63a5$\\rtimes $ </li> <li>\u53f3\u8fb9\u7684\u8868\u53d6\u5168\u90e8\u503c\u6309\u7167\u5173\u7cfb\u548c\u53f3\u8fb9\u8fde\u63a5\uff0c\u4e0d\u5b58\u5728\u4e3a\u7a7a\u503c</li> <li>Full join\u5de6\u53f3\u5168\u4e0a\uff0c\u4e0d\u5b58\u5728\u5bf9\u5e94\u7684\u5c31\u5199\u6210\u7a7a\u503c</li> </ul> </li> <li>Division\u9664\u6cd5\uff1a\\(r\\div s=\\{t|t\\in\\prod_{R-S}(r)\\and \\forall u \\in s (tu\\in r)\\}\\)<ul> <li>\u5982\u679c\\(R=(A_1,A_2,\\dots,A_m,B_1,\\dots,B_n)\\and S=(B_1,\\dots,B_n)\\) \u5219\u6709\\(R- S=(A_1,A_2,\\dots,A_m)\\) </li> </ul> </li> <li>Assignment\u58f0\u660e\u64cd\u4f5c\uff0c\u7c7b\u4f3c\u4e8e\u53d8\u91cf\u547d\u540d\u7528\\(\\leftarrow\\)  \u53ef\u4ee5\u628a\u4e00\u4e2a\u5173\u7cfb\u4ee3\u6570\u64cd\u4f5c\u8fdb\u884c\u547d\u540d </li> <li>Aggregation operations\u805a\u5408\u64cd\u4f5c</li> <li>\u57fa\u672c\u5f62\u5f0f\uff1a\\(_{G_1,G_2,\\dots,G_n}{\\cal {G}}_{F_1(A_1),\\dots,F_n(A_n)}(E)\\) </li> <li>G\u662f\u805a\u5408\u7684\u6807\u51c6\uff0c\u5bf9\u4e8e\u5173\u7cfb\u4e2d\u6240\u6709G\u503c\u76f8\u540c\u7684\u5143\u7d20\u8fdb\u884c\u805a\u5408\uff0cF( )\u662f\u805a\u5408\u7684\u8fd0\u7b97\u51fd\u6570</li> <li>\u5e38\u89c1\u7684\u6709SUM/MAX/MIN/AVG/COUNT</li> </ul>"},{"location":"ZJU_CS/Database/review/#sql","title":"\u7b2c\u4e8c\u90e8\u5206\uff1aSQL","text":""},{"location":"ZJU_CS/Database/review/#21_sql","title":"2.1 SQL\u57fa\u672c\u6982\u5ff5","text":"<ul> <li>SQL\uff1a\u7ed3\u6784\u5316\u67e5\u8be2\u8bed\u8a00\uff0c\u5206\u4e3aDDL,DML,DCL\u51e0\u79cd\u7c7b\u578b\uff0c\u7528\u7684\u6bd4\u8f83\u591a\u7684\u6807\u51c6\u662fSQL-92</li> <li>\u975e\u8fc7\u7a0b\u5f0f\u7684\u8bed\u8a00 </li> </ul>"},{"location":"ZJU_CS/Database/review/#22_sql","title":"2.2 SQL \u521b\u5efa\uff0c\u66f4\u65b0\uff0c\u5220\u9664","text":"<ul> <li> <p>SQL\u652f\u6301\u7684\u6570\u636e\u7c7b\u578b</p> </li> <li> <p>char, varchar, int, numeric(p,d), null-value,  date, time, timestamp</p> </li> <li> <p>\u6240\u6709\u7684\u6570\u636e\u7c7b\u578b\u90fd\u652f\u6301null\u4f5c\u4e3a\u5c5e\u6027\u503c\uff0c\u53ef\u4ee5\u5728\u5b9a\u4e49\u7684\u65f6\u5019\u58f0\u660e\u4e00\u4e2a\u5c5e\u6027\u7684\u503cnot null</p> </li> <li> <p>\u521b\u5efa\u6570\u636e\u8868create table</p> </li> <li> <p>\u521b\u5efa\u8868\u7684\u8bed\u6cd5   <pre><code>  create table table_name(\n          variable_name1 type_name1,\n          variable_name2 type_name2,\n          (integrity-contraints)\n          \u2026\u2026,)\n</code></pre></p> </li> <li> <p><code>integrity-contraint</code> \u5b8c\u6574\u6027\u7ea6\u675f\uff1a\u53ef\u4ee5\u6307\u5b9aprimary key, foreign key references xxx, not null</p> </li> <li> <p>\u5220\u9664\u6570\u636e\u8868 <code>drop table</code> </p> </li> <li> <p>\u66f4\u65b0\u6570\u636e\u8868\u7684\u680f\u76ee <code>alter table</code> </p> </li> <li> <p><code>alter table R add A D</code>  \u6dfb\u52a0\u4e00\u6761\u65b0\u5c5e\u6027</p> <ul> <li>\u5176\u4e2dA\u662f\u5c5e\u6027\u540d\uff0cD\u662fA\u7684domain</li> </ul> </li> <li><code>alter table R drop A</code>  \u5220\u9664A\u5c5e\u6027</li> </ul>"},{"location":"ZJU_CS/Database/review/#23_sql","title":"2.3 SQL\u67e5\u8be2","text":"<ul> <li> <p>\u4e8b\u5b9e\u4e0a\u7684\u6700\u91cd\u8981SQL\u8bed\u53e5\uff0c\u8003\u8bd5\u8003\u7684\u4e00\u822c\u90fd\u662f\u67e5\u8be2\u8bed\u53e5</p> </li> <li> <p>SQL\u67e5\u8be2\u7684\u57fa\u672c\u5f62\u5f0f\uff1aselect\u8bed\u53e5</p> </li> </ul> <pre><code>select A1,A2,\u2026,An\nfrom r1,r2,\u2026,rn\nwhere P\n</code></pre> <ul> <li>\u4e0a\u8ff0\u67e5\u8be2\u7b49\u4ef7\u4e8e\\(\\prod_{A_1,A_2,\\cdots,A_k}(\\sigma_{p}(r_1\\times r_2\\times \\dots\\times r_m))\\) </li> <li> <p>SQL\u67e5\u8be2\u7684\u7ed3\u679c\u662f\u4e00\u4e2a\u5173\u7cfb</p> </li> <li> <p>select\u5b50\u53e5\u7684\u4e00\u4e9b\u7ec6\u8282 </p> </li> <li> <p><code>select * from xxx</code> \u8868\u793a\u83b7\u53d6\u6240\u6709\u5c5e\u6027\uff0c\u4e8b\u5b9e\u4e0a\u6211\u6000\u7591*\u662f\u6b63\u5219\u8868\u8fbe\u5f0f\uff0c\u8868\u793a\u53ef\u80fd\u6709\u7684\u6240\u6709\u5185\u5bb9\uff0c\u4ece\u540e\u9762\u7684\u5185\u5bb9\u6765\u770b\uff0cselect\u8bed\u53e5\u786e\u5b9e\u662f\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f</p> </li> <li> <p>SQL\u4e2d\u7684\u4fdd\u7559\u5b57\u5bf9\u4e8e\u5927\u5c0f\u5199\u4e0d\u654f\u611f </p> </li> <li> <p>\u53bb\u9664\u91cd\u590d\uff1a<code>select distinct</code>\uff0c\u9632\u6b62\u91cd\u590d\u4e22\u5931\u7684\u529e\u6cd5<code>select all</code></p> </li> <li> <p>select\u5b50\u53e5\u4e2d\u7684\u8868\u8fbe\u5f0f\u652f\u6301\u57fa\u672c\u7684\u56db\u5219\u8fd0\u7b97(\u52a0\u51cf\u4e58\u9664)\uff0c\u6bd4\u5982</p> <pre><code>select ID, name, salary/2\nfrom instructor;\n</code></pre> </li> <li> <p>where\u5b50\u53e5\u4e2d\uff1a</p> <ul> <li>\u652f\u6301<code>and or not</code>\u7b49\u903b\u8f91\u8fd0\u7b97</li> <li>\u652f\u6301<code>between and</code>\u6765\u67e5\u8be2\u8303\u56f4</li> </ul> </li> <li> <p>from \u5b50\u53e5\uff1a</p> <ul> <li>\u91cd\u547d\u540d\u64cd\u4f5c\uff0c\u53ef\u4ee5\u901a\u8fc7 <code>old_name as new_name</code>\u8fdb\u884c\u91cd\u547d\u540d</li> <li>from \u53ef\u4ee5\u9009\u62e9\u591a\u4e2a\u8868\uff0c\u6b64\u65f6\u4f1a\u5148\u5c06\u8fd9\u4e9b\u8868\u8fdb\u884c\u7b1b\u5361\u513f\u79ef\u7684\u8fd0\u7b97\uff0c\u518d\u8fdb\u884cselect</li> <li>\u5143\u7ec4\u53d8\u91cf\uff1a\u53ef\u4ee5\u4ece\u591a\u4e2a\u8868\u4e2dselect\u6ee1\u8db3\u4e00\u5b9a\u6761\u4ef6\u7684\u51e0\u4e2a\u4e0d\u540c\u5c5e\u6027\u503c\u7684\u5143\u7ec4</li> </ul> <pre><code>select instructor.name as teacher-name, course.title as course-title\nfrom instructor, teaches, course\nwhere instructor.ID = teaches.ID and\n    teaches.course_id = course.course_id and\n    instructor.dept_name = 'Art';\n</code></pre> </li> <li> <p>\u5b57\u7b26\u4e32\u652f\u6301\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d\uff0c\u7528<code>like regrex</code>\u7684\u65b9\u5f0f\u53ef\u4ee5\u8fdb\u884c\u5c5e\u6027\u503c\u7684\u6b63\u5219\u8868\u8fbe\u5f0f\u5339\u914d</p> <ul> <li>\u6b63\u5219\u8868\u8fbe\u5f0f\u7684\u7528\u6cd5\u6ca1\u600e\u4e48\u8bb2</li> </ul> <pre><code>select name \nfrom teacher\nwhere name like '%hihci%';\n</code></pre> </li> <li> <p>\u5c06\u8f93\u51fa\u7684\u7ed3\u679c\u6392\u5e8f</p> <ul> <li><code>order by \u5c5e\u6027\u540d asc/desc</code> </li> </ul> </li> <li> <p>\u96c6\u5408\u64cd\u4f5c\uff1a</p> <ul> <li>\u53ef\u4ee5\u7528<code>union/intersect/except</code>\u7b49\u96c6\u5408\u8fd0\u7b97\u6765\u8fde\u63a5\u4e24\u6761\u4e0d\u540c\u7684\u67e5\u8be2</li> </ul> </li> <li> <p>\u805a\u5408\u64cd\u4f5c\uff1a</p> <ul> <li>\u652f\u6301\u7684\u64cd\u4f5c\u6709avg/min/max/sum/count\uff0c\u83b7\u53d6\u7684\u662f\u8868\u4e2d\u7684\u7edf\u8ba1\u91cf</li> </ul> <pre><code>select dept_name,avg(salary) as avg_salary\nfrom instructor\ngroup by dept_name;\n</code></pre> <ul> <li>\u4e8b\u5b9e\u4e0aSQL\u8bed\u53e5\u7684\u805a\u5408\u64cd\u4f5c\u548c\u5173\u7cfb\u4ee3\u6570\u4e2d\u7684\u805a\u5408\u8fd0\u7b97\u662f\u5b8c\u5168\u5bf9\u5e94\u7684\uff0c\u5173\u7cfb\u4ee3\u6570\u4e2d\u7684\u805a\u5408\u8fd0\u7b97\u8868\u8fbe\u5f0f\\(_{G_1,G_2,\\dots,G_n}{\\cal G}_{F_1(A_1),\\dots,F_n(A_n)}(E)\\)\u5bf9\u5e94\u7684SQL\u8bed\u53e5\u662f</li> </ul> <pre><code>select G1,G2,\u2026,Gn,F1(A1),\u2026,Fn(An)\nfrom E\ngroup by G1,G2,\u2026,Gn;\n</code></pre> <ul> <li>\u805a\u5408\u64cd\u4f5c\u7684SQL\u8bed\u53e5\u4e66\u5199\u53ef\u4ee5\u5728\u672b\u5c3e\u7528<code>having xxx</code>\u6765\u8868\u793a\u4e00\u4e9b\u9700\u8981\u805a\u5408\u64cd\u4f5c\u6765\u83b7\u5f97\u7684\u6761\u4ef6\uff0c\u6bd4\u5982</li> </ul> <pre><code>select cno\nfrom pos natural join detail\nwhere year(detail.cdate) = 2018\nhaving count(distinct campus) = 1;\n</code></pre> </li> <li> <p>Null values \u7a7a\u503c</p> <ul> <li>\u5c5e\u6027\u503c\u53ef\u4ee5\u4e3anull\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u5728\u5b9a\u4e49\u6570\u636e\u8868\u7684\u65f6\u5019\u89c4\u5b9a\u54ea\u4e9b\u5143\u7d20\u4e0d\u80fd\u4e3a\u7a7a</li> </ul> </li> <li> <p>Nested Subquery \u5d4c\u5957\u67e5\u8be2</p> </li> <li> <p>\u5bf9\u4e8e\u67e5\u8be2</p> <pre><code>select A1,A2,\u2026,An\nfrom r1,r2,\u2026,rn\nwhere P\n</code></pre> <p>\u5176\u4e2d\u7684A\uff0cr\uff0cP\u90fd\u53ef\u4ee5\u88ab\u66ff\u6362\u4e3a\u4e00\u4e2a\u5b50\u67e5\u8be2 </p> </li> <li> <p>\u96c6\u5408\u5173\u7cfb\uff1a\u7528 <code>in/not in +\u5b50\u67e5\u8be2</code>\u6765\u5224\u65ad\u5426\u4e9b\u5c5e\u6027\u662f\u5426\u5c5e\u4e8e\u7279\u5b9a\u7684\u96c6\u5408\u4e2d</p> <ul> <li><code>some+\u5b50\u67e5\u8be2</code> \u7528\u4e8e\u5224\u65ad\u96c6\u5408\u4e2d\u662f\u5426\u5b58\u5728\u6ee1\u8db3\u6761\u4ef6\u7684\u5143\u7ec4\uff0c\u7528\u6765\u5224\u65ad\u5b58\u5728\u6027</li> <li><code>all+\u5b50\u67e5\u8be2</code> \u53ef\u4ee5\u7528\u6765\u7b5b\u9009\u6700\u503c</li> <li><code>exists+\u5b50\u67e5\u8be2</code> \u5224\u65ad\u5b50\u67e5\u8be2\u7684\u7ed3\u679c\u662f\u5426\u4e0d\u4e3a\u7a7a</li> <li><code>not exists+\u5b50\u67e5\u8be2</code> \u5224\u65ad\u662f\u5426\u4e3a\u7a7a\u96c6</li> </ul> </li> <li> <p>with\u5b50\u53e5\uff1a\u5bf9\u5b50\u67e5\u8be2\u5b9a\u4e49\u4e00\u4e2a\u53d8\u91cf\u540d\uff0c\u53ef\u4ee5\u5728\u4e4b\u540e\u8c03\u7528</p> </li> <li> <p>scalar\u5b50\u67e5\u8be2\uff1a\u7528\u4e8e\u9700\u8981\u4e00\u4e2a\u503c\u4f5c\u4e3a\u67e5\u8be2\u7ed3\u679c\u7684\u65f6\u5019</p> </li> <li> <p>join\u5b50\u53e5\uff1a\u53ef\u4ee5\u5bf9\u82e5\u5e72\u5f20\u8868\u8fdb\u884c\u5404\u79cdjoin\u4e4b\u540e\u518d\u67e5\u8be2</p> <ul> <li><code>natural join</code> \u81ea\u7136\u8fde\u63a5</li> <li><code>A join B on(xxx)</code> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/review/#24_sql","title":"2.4 SQL\u63d2\u5165\uff0c\u5220\u9664\uff0c\u66f4\u65b0","text":"<ul> <li> <p>\u63d2\u5165: <code>insert into table_name values( );</code></p> </li> <li> <p>\u53ef\u4ee5\u7528select\u67e5\u8be2\u5b50\u53e5\u5f97\u5230\u7684\u7ed3\u679c\u4f5c\u4e3avalues\uff0c\u6b64\u65f6\u53ef\u4ee5\u540c\u65f6\u63d2\u5165\u591a\u6761\u7ed3\u679c</p> </li> <li> <p>\u5220\u9664\uff1a<code>delete from table_name where xxxxxx</code></p> </li> <li> <p>\u66f4\u65b0\uff1a<code>update table_name set xxx where xxxxx</code></p> </li> <li> <p>case \u5b50\u53e5\uff1a\u7528\u4e8e\u5206\u7c7b\u8ba8\u8bba</p> </li> </ul> <pre><code>update instructor\n  set salary = case\n                  when salary &lt;= 100000 then salary*1.05\n                  else salary *1.03\n                  end\n</code></pre>"},{"location":"ZJU_CS/Database/review/#25_sql_view_index","title":"2.5 SQL view \u89c6\u56fe, index \u7d22\u5f15","text":"<ul> <li> <p>\u89c6\u56fe\uff1a\u4e00\u79cd\u53ea\u663e\u793a\u6570\u636e\u8868\u4e2d\u90e8\u5206\u5c5e\u6027\u503c\u7684\u673a\u5236</p> </li> <li> <p>\u4e0d\u4f1a\u5728\u6570\u636e\u5e93\u4e2d\u91cd\u65b0\u5b9a\u4e49\u4e00\u5f20\u65b0\u7684\u8868\uff0c\u800c\u662f\u9690\u85cf\u4e86\u4e00\u4e9b\u6570\u636e</p> </li> <li>\u521b\u5efa\u89c6\u56fe\u7684\u5b9a\u4e49\u8bed\u53e5\uff1a<ul> <li>xxx\u662f\u89c6\u56fe\u7684\u540d\u79f0\uff0c\u5185\u5bb9\u662f\u4ece\u67d0\u4e2atable\u4e2dselect\u51fa\u7684</li> </ul> </li> </ul> <pre><code>create view xxx as (a subquery)\n</code></pre> <ul> <li> <p>\u89c6\u56fe\u7684\u66f4\u65b0</p> </li> <li> <p>\u4e5f\u9700\u8981\u4f7f\u7528insert\u8bed\u53e5\u66f4\u65b0\u89c6\u56fe</p> </li> <li> <p>\u53ef\u4ee5\u66f4\u65b0\u7684\u6761\u4ef6</p> <ul> <li>\u521b\u5efa\u65f6\u53ea\u4f7f\u7528\u4e86\u4e00\u5f20\u8868\u7684\u6570\u636e</li> <li>\u521b\u5efa\u65f6\u6ca1\u6709\u8fdb\u884cdistinct\u548c\u805a\u5408\u64cd\u4f5c</li> <li>\u6ca1\u6709\u51fa\u73b0\u7a7a\u503c\u548cdefault</li> </ul> </li> <li> <p>Domain\u521b\u5efa\u65b0\u7c7b\u578b</p> </li> <li> <p><code>create domain new_name + data type</code>(\u6bd4\u5982 char(20))</p> </li> <li> <p>domain\u53ef\u4ee5\u8bbe\u7f6e\u7ea6\u675f\u6761\u4ef6\uff0c\u6bd4\u5982\u4e0b\u9762\u8fd9\u4e00\u6bb5domain\u5b9a\u4e49\u8868\u793adegree_level\u53ea\u80fd\u5728\u8fd9\u4e09\u4e2a\u4e2d\u8fdb\u884c\u9009\u62e9</p> <pre><code>create domain degree_level varvhar(10)\nconstraint degree_level_test\ncheck(value in ('Bachelors', 'Masters', 'Doctorate'));\n</code></pre> </li> <li> <p>Large-Object Types \u5927\u5bf9\u8c61\u7c7b\u578b\uff0c\u5206\u4e3ablob(\u4e8c\u8fdb\u5236\u5927\u5bf9\u8c61)\u548cclob(\u6587\u672c\u5927\u5bf9\u8c61)\u4e24\u79cd\uff0c\u5f53\u67e5\u8be2\u9700\u8981\u8fd4\u56de\u5927\u5bf9\u8c61\u7c7b\u578b\u7684\u65f6\u5019\uff0c\u53d6\u800c\u4ee3\u4e4b\u7684\u662f\u4e00\u4e2a\u4ee3\u8868\u5927\u5bf9\u8c61\u7684\u6307\u9488</p> </li> <li> <p>Index\u7d22\u5f15</p> </li> <li> <p>\u8bed\u6cd5<code>create index index_name on table_name(attribute)</code></p> </li> <li> <p>\u5728\u5bf9\u5e94\u7684\u8868\u548c\u5c5e\u6027\u4e2d\u5efa\u7acb\u7d22\u5f15\uff0c\u52a0\u5feb\u67e5\u8be2\u7684\u901f\u5ea6</p> </li> <li> <p>Transactions \u4e8b\u52a1</p> </li> <li> <p>\u4e00\u7cfb\u5217\u67e5\u8be2\u7b49\u64cd\u4f5c\u7684\u96c6\u5408</p> </li> <li>Atomic transaction \u539f\u5b50\u4e8b\u52a1\uff1a\u53ea\u80fd\u88ab\u5b8c\u5168\u6267\u884c\u6216\u8005\u56de\u6eda(roll back)</li> </ul>"},{"location":"ZJU_CS/Database/review/#26_integrity","title":"2.6 Integrity \u5b8c\u6574\u6027\u63a7\u5236","text":"<ul> <li>\u5355\u4e2a\u5173\u7cfb\u4e0a\u7684\u7ea6\u675f</li> <li>\u4e3b\u952e primary key\uff0c unique\uff0c not null</li> <li> <p>check\u5b50\u53e5\uff1a\u5199\u5728\u6570\u636e\u8868\u7684\u5b9a\u4e49\u4e2d</p> <ul> <li>check(P) \u68c0\u67e5\u67d0\u4e2a\u5c5e\u6027\u662f\u5426\u4e3a\u7279\u5b9a\u7684\u4e00\u4e9b\u503c</li> <li>Domain constraints \u503c\u57df\u7684\u7ea6\u675f</li> <li>\u5728domain\u7684\u5b9a\u4e49\u4e2d\u52a0\u5165check</li> <li>\u8bed\u6cd5 <code>create domain domain_name constraints check_name check(P)</code></li> <li>Referential Integrity \u5f15\u7528\u5b8c\u6574\u6027</li> <li>\u88ab\u5f15\u7528\u8868\u4e2d\u4e3b\u952e\u548c\u5916\u952e\u7684\u5173\u7cfb</li> <li>\u5176\u5b9ePPT\u91cc\u8fd9\u4e00\u6bb5\u8bb2\u4e86\u534a\u5929\u5c31\u662f\u5728\u8bf4\u8981\u5728\u5b9a\u4e49\u8868\u7684\u65f6\u5019\u5b9a\u4e49\u4e3b\u952e\u548c\u5916\u952e\u8fdb\u884c\u7ea6\u675f</li> <li>Cascading action(\u4e0d\u77e5\u9053\u8fd9\u4e00\u6bb5\u5728\u8bb2\u4ec0\u4e48\u72d7\u5c41)</li> <li>on update</li> <li>on delete</li> </ul> </li> <li> <p>\u5bf9\u4e8e\u6574\u4e2a\u6570\u636e\u5e93\u7684\u7ea6\u675f</p> </li> <li> <p>Assertions(Mysql\u4e0d\u652f\u6301)</p> <ul> <li>\u5bf9\u4e8e\u6570\u636e\u5e93\u4e2d\u9700\u8981\u6ee1\u8db3\u7684\u5173\u7cfb\u7684\u4e00\u79cd\u9884\u5148\u5224\u65ad </li> <li><code>create assertion &lt;assertion-name&gt; check &lt;predicate&gt;</code> \u4e0b\u9762\u662f\u4e00\u6bb5\u4f8b\u5b50</li> </ul> <pre><code> create assertion credits_constaint check\n( not exists(\n select *\n    from student S\n where total_cred &lt;&gt;(\n     select sum(credits)\n     from takes nature join course\n     where takes.ID = S.ID and grade is not null and grade &lt;&gt; 'F'\n\n )\n )\n)\n</code></pre> <ul> <li> <p>Trigger\u89e6\u53d1\u5668</p> </li> <li> <p>\u5728\u4fee\u6539\u4e86\u6570\u636e\u5e93\u65f6\u4f1a\u81ea\u52a8\u6267\u884c\u7684\u4e00\u4e9b\u8bed\u53e5</p> </li> <li> <p>\u65f6\u95f4\u8282\u70b9\u7684\u9009\u62e9</p> <ul> <li>referencing old row as \u5bf9\u65e7\u7684\u884c\u8fdb\u884c\u64cd\u4f5c\uff0c\u7528\u4e8e\u5220\u9664\u548c\u66f4\u65b0</li> <li>referencing new row as \u5bf9\u65b0\u7684\u884c\u8fdb\u884c\u64cd\u4f5c\uff0c\u7528\u4e8e\u63d2\u5165\u548c\u66f4\u65b0</li> </ul> </li> <li> <p>trigger event\u89e6\u53d1\u4e8b\u4ef6</p> <ul> <li>insert/delete/update\u7b49\u64cd\u4f5c\u90fd\u53ef\u4ee5\u89e6\u53d1\u8bbe\u7f6e\u597d\u7684trigger</li> <li>\u89e6\u53d1\u7684\u65f6\u95f4\u70b9\u53ef\u4ee5\u662fbefore\u548cafter\uff0c\u89e6\u53d1\u5668\u7684\u8bed\u6cd5\u5982\u4e0b</li> </ul> </li> </ul> <pre><code>  create trigger trigger_name before/after trigger_event of table_name on attribute\n  referencing xxx\n  for each row\n  when xxxx\n  begin \n  xxxx(SQL operation)\n  end\n</code></pre> </li> </ul>"},{"location":"ZJU_CS/Database/review/#27_authorization","title":"2.7 Authorization","text":"<ul> <li>\u6570\u636e\u5e93\u4e2d\u7684\u56db\u79cd\u6743\u9650 read,insert,update,delete</li> <li>Security specification in SQL \u5b89\u5168\u89c4\u8303<ul> <li>grant\u8bed\u53e5\u53ef\u4ee5\u8d4b\u4e88\u7528\u6237\u6743\u9650 <code>grant &lt;privilege list&gt; on &lt;relation name or view name&gt; to &lt;user list&gt;</code></li> <li><code>&lt;user list&gt;</code>\u53ef\u4ee5\u662f\u7528\u6237\u540d\uff0c\u4e5f\u53ef\u4ee5\u662fpublic(\u5141\u8bb8\u6240\u6709\u6709\u6548\u7528\u6237\u62e5\u6709\u8fd9\u9879\u6743\u9650)</li> <li>grant\u8bed\u53e5\u540e\u9762\u53ef\u4ee5\u52a0<code>with grant option</code>\uff0c\u8868\u793a\u8be5\u7528\u6237\u62e5\u6709\u8d4b\u4e88\u5176\u4ed6\u7528\u6237\u8fd9\u9879\u6743\u9650\u7684\u6743\u529b</li> <li>revoke \u6743\u529b\u56de\u6536</li> <li><code>revoke &lt;privilege list&gt; on &lt;relation/view name&gt; from &lt;user list&gt; [restrict|cascade]</code>\u4ece\u7528\u6237\u4e2d\u56de\u6536\u6743\u529b</li> <li>role\u8bed\u53e5</li> <li><code>create role role_name</code></li> <li>\u5141\u8bb8\u4e00\u7c7b\u7528\u6237\u6301\u6709\u76f8\u540c\u7684\u6743\u9650</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/review/#ernormal_form","title":"\u7b2c\u4e09\u90e8\u5206\uff1aER\u6a21\u578b\u548cNormal Form(\u8303\u5f0f)","text":""},{"location":"ZJU_CS/Database/review/#31_e-r","title":"3.1 E-R\u6a21\u578b","text":"<ul> <li>E-R\u6a21\u578b\u7531enitites(\u5b9e\u4f53)\u548crelation(\u5173\u7cfb)\u7ec4\u6210</li> <li>Entity set \u5b9e\u4f53\u96c6</li> <li> <p>\u5b9e\u4f53\u662f\u4e00\u7cfb\u5217\u72ec\u7279\u7684\u5bf9\u8c61\uff0c\u7528\u4e00\u7cfb\u5217\u5c5e\u6027\u6765\u8868\u793a</p> </li> <li> <p>\u540c\u4e00\u7c7b\u5b9e\u4f53\u5171\u4eab\u76f8\u540c\u7684Properties\uff0c\u5b9e\u4f53\u96c6\u5c31\u662f\u7531\u540c\u7c7b\u578b\u7684\u5b9e\u4f53\u7ec4\u6210\u7684\u96c6\u5408</p> </li> <li> <p>\u8868\u793a\u65b9\u6cd5</p> <ul> <li>\u957f\u65b9\u5f62\u4ee3\u8868\u5b9e\u4f53\u96c6\u5408</li> <li>\u5c5e\u6027\u5199\u5728\u957f\u65b9\u5f62\u4e2d\uff0cprimary key\u7528\u4e0b\u5212\u7ebf\u6807\u6ce8 </li> </ul> </li> <li> <p>\u5b9e\u4f53\u96c6\u4e2d\u5bf9\u4e8e\u5c5e\u6027\u7684\u5b9a\u4e49\u548c\u4e4b\u524d\u7684\u51e0\u4e4e\u4e00\u6837</p> <ul> <li>\u5b9e\u4f53\u96c6\u4e2d\u5c5e\u6027\u5b9a\u4e49\u53ef\u4ee5\u5b58\u5728\u7ec4\u5408\u4e0e\u7ee7\u627f\u7684\u5173\u7cfb\uff0c\u4e0b\u9762\u662f\u4e00\u4e2a\u6837\u4f8b</li> </ul> <p>Instructor</p> <p>ID </p> <p>name</p> <p>\u200b   first_name</p> <p>\u200b   last_name</p> <p>address</p> <p>\u200b   street</p> <p>\u200b       street_number</p> <p>\u200b       street_name</p> <p>\u200b       apt_number</p> <p>\u200b   city</p> <p>\u200b   state - Relationship set \u5173\u7cfb\u96c6   - \u4e00\u4e2arelationship\u662f\u51e0\u4e2a\u5b9e\u4f53\u4e4b\u95f4\u7684\u8054\u7cfb\uff0c\u5173\u7cfb\u96c6\u5c31\u662f\u540c\u7c7b\u5173\u7cfb\u4e4b\u95f4\u6784\u6210\u7684\u96c6\u5408   - \u4e00\u4e2arelationship\u81f3\u5c11\u9700\u8981\u4e24\u4e2a\u53ca\u4ee5\u4e0a\u7684\u5b9e\u4f53\uff0c\u4e00\u4e2a\u5173\u7cfb\u96c6\u81f3\u5c11\u548c\u4e24\u4e2a\u5b9e\u4f53\u96c6\u6709\u5173\u8054 - \u4e00\u4e2a\u5173\u7cfb\u96c6\u6240\u5173\u8054\u7684\u5b9e\u4f53\u96c6\u7684\u4e2a\u6570\u79f0\u4e3adegree\uff0c\u5176\u4e2d\u4ee5\u4e8c\u5143\u5173\u7cfb\u96c6\u4e3a\u4e3b - E-R model constraints \u7ea6\u675f   - mapping cardinalities \u6620\u5c04\u57fa\u6570  - \u4e8c\u5143\u5173\u7cfb\u4e2d\u6620\u5c04\u57fa\u6570\u53ea\u6709\u4e00\u5bf9\u4e00\uff0c\u4e00\u5bf9\u591a\uff0c\u591a\u5bf9\u4e00\uff0c\u591a\u5bf9\u591a - E-R\u6a21\u578b\u4e2d\u8868\u793a\u6620\u5c04\u5173\u7cfb\uff1a\u7bad\u5934\u8868\u793a\u4e00\uff0c\u76f4\u7ebf\u8868\u793a\u591a - \u4e09\u5143\u5173\u7cfb\u4e2d\uff1a\u7bad\u5934\u53ea\u80fd\u51fa\u73b0\u4e00\u6b21\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u4e8c\u4e49\u6027    - \u53c2\u4e0e\u5ea6\u7ea6\u675f - total participation\uff1a \u82e5\u4e00\u4e2a\u5b9e\u4f53\u96c6\u5168\u90e8\u53c2\u4e0e\u5230\u5173\u7cfb\u4e2d\uff0c\u8981\u7528\u4e24\u6761\u7ebf - partical participation \u90e8\u5206\u53c2\u4e0e   - key\u7ea6\u675f\uff1a\u548c\u524d\u9762\u7684\u57fa\u672c\u4e00\u6837   - \u5f31\u5b9e\u4f53\u96c6weak entity set\uff1a\u4e00\u4e9b\u5b9e\u4f53\u96c6\u7684\u5c5e\u6027\u4e0d\u8db3\u4ee5\u5f62\u6210\u4e3b\u952e\uff0c\u5c31\u662f\u5f31\u5b9e\u4f53\u96c6\uff0c\u4e0e\u4e4b\u76f8\u5bf9\u7684\u662f\u5f3a\u5b9e\u4f53\u96c6 - \u7528\u4e8e\u8868\u793a\u4e00\u4e9b\u5173\u7cfb\u4e2d\u7684\u4f9d\u8d56\u6027\uff0c\u5f31\u5b9e\u4f53\u96c6\u9700\u8981\u548c\u5f3a\u5b9e\u4f53\u96c6\u5173\u8054\u624d\u6709\u610f\u4e49 - \u7ecf\u5e38\u51fa\u73b0\u5728\u4e00\u5bf9\u591a\u7684\u5173\u7cfb\u4e2d\uff0c\u5728ER\u56fe\u4e2d\u9700\u8981\u7528\u53cc\u7ebf\u65b9\u6846\u8868\u793a\uff0c\u6bd4\u5982\u804c\u5de5\u548c\u804c\u5de5\u5bb6\u5c5e\uff0c\u804c\u5de5\u5bb6\u5c5e\u4e0d\u80fd\u8131\u79bb\u4e8e\u804c\u5de5\u5b58\u5728\uff0c\u6240\u4ee5\u804c\u5de5\u5bb6\u5c5e\u5c31\u662f\u4e00\u4e2a\u5f31\u5b9e\u4f53\u96c6 - Aggregation \u805a\u5408</p> </li> <li> <p>\u53ef\u4ee5\u628a\u4e00\u90e8\u5206E-R\u5173\u7cfb\u805a\u5408\u6210\u4e00\u4e2aEntity\u8fdb\u884c\u64cd\u4f5c</p> </li> <li>\u5728ER\u56fe\u4e2d\u7528\u65b9\u6846\u5c06\u4e00\u4e9b\u5173\u7cfb\u96c6\u548c\u5b9e\u4f53\u96c6\u62ec\u8d77\u6765\u8868\u793a\u4e00\u4e2a\u805a\u5408\u540e\u7684\u5b9e\u4f53\u96c6</li> <li>Specialization \u7279\u6b8a\u5316</li> <li>\u81ea\u9876\u5411\u4e0b\u7684\u8bbe\u8ba1\u8fc7\u7a0b</li> <li>Attribute inheritance\uff1aoverlapping\uff0cdisjoint</li> <li>\u753b\u56fe\u7684\u65b9\u5f0f\u5c31\u662f\u4ece\u4e0a\u5f80\u4e0b\u753b\uff0cEntity\u7684\u5185\u5bb9\u9010\u6e10\u7ec6\u5206\uff0c\u4f46\u662f\u90fd\u7ee7\u627f\u4e86\u4e0a\u4e00\u9636\u7684\u6240\u6709attribute</li> <li>Generalization \u6cdb\u5316</li> <li>\u81ea\u5e95\u5411\u4e0a\u7684\u8bbe\u8ba1\u8fc7\u7a0b</li> <li>\u4ece\u4e0b\u5f80\u4e0a\uff0c\u4e0b\u5c42\u7684\u5185\u5bb9\u5408\u6210\u4e0a\u5c42\u7684\u5185\u5bb9</li> </ul>"},{"location":"ZJU_CS/Database/review/#32_e-r_diagram","title":"3.2 E-R Diagram","text":""},{"location":"ZJU_CS/Database/review/#33_normal_form","title":"3.3 Normal Form \u8303\u5f0f","text":""},{"location":"ZJU_CS/Database/review/#331","title":"3.3.1 \u6570\u636e\u5e93\u8bbe\u8ba1\u7684\u76ee\u6807","text":"<ul> <li>\u5b58\u50a8\u4fe1\u606f\u65f6\u6ca1\u6709\u4e0d\u5fc5\u8981\u7684\u5197\u4f59\uff0c\u68c0\u7d22\u4fe1\u606f\u7684\u6548\u7387\u9ad8</li> <li>\u8fd9\u4e9b\u8bbe\u8ba1\u65b9\u5f0f\u901a\u8fc7\u5404\u79cd\u8303\u5f0f(normal form)\u6765\u5b9e\u73b0</li> </ul>"},{"location":"ZJU_CS/Database/review/#332_first_normal_form","title":"3.3.2 First Normal Form \u7b2c\u4e00\u8303\u5f0f","text":"<ul> <li>\u539f\u5b50\u6027atomic \uff1a\u4e0d\u80fd\u518d\u7ee7\u7eed\u62c6\u5206\uff0c\u5c5e\u6027\u4e0d\u80fd\u518d\u5411\u4e0b\u62c6\u5206</li> <li>\u7b2c\u4e00\u8303\u5f0f\u7684\u5b9a\u4e49\uff1a\u4e00\u4e2a\u5173\u7cfb\u6a21\u5f0fR\u7684\u6240\u6709\u5c5e\u6027\u90fd\u662fatomic\u7684\uff0c\u8fd9\u4e2a\u5173\u7cfb\u6a21\u5f0fR\u5c31\u662f\u7b2c\u4e00\u8303\u5f0f </li> <li>\u5b58\u5728\u7684\u95ee\u9898</li> <li>redundancy \u5197\u4f59</li> <li>complicates updates \u66f4\u65b0\u6570\u636e\u5f88\u590d\u6742</li> <li> <p>null-values---difficult to insert/remove</p> </li> <li> <p>Decomposition \u5206\u89e3</p> </li> <li> <p>Lossy Decomposition \u6709\u635f\u7684\u5206\u89e3\uff1a\u4e0d\u80fd\u7528\u5206\u89e3\u540e\u7684\u51e0\u4e2a\u5173\u7cfb\u91cd\u5efa\u539f\u672c\u7684\u5173\u7cfb</p> </li> <li>Lossless join \u65e0\u635f\u5206\u89e3\u7684\u5b9a\u4e49\uff1a<ul> <li>R \u88ab\u5206\u89e3\u4e3a(R1, R2)\u5e76\u4e14\\(R=R_1\\cup R_2\\) </li> <li>\u5bf9\u4e8e\u4efb\u4f55\u5173\u7cfb\u6a21\u5f0fR\u4e0a\u7684\u5173\u7cfbr\u6709 \\(r=\\prod_{R_1}(r)\\Join \\prod_{R_2}(r)\\)</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/review/#333_functional_dependency","title":"3.3.3 Functional dependency \u51fd\u6570\u4f9d\u8d56","text":"<ul> <li>\u51fd\u6570\u4f9d\u8d56\u7684\u5b9a\u4e49</li> <li>\u5bf9\u4e8e\u4e00\u4e2a\u5173\u7cfb\u6a21\u5f0fR\uff0c\u5982\u679c\\(\\alpha \\subset R\\) \u5e76\u4e14\\(\\beta\\subset R\\) \u5219\u51fd\u6570\u4f9d\u8d56\\(\\alpha \\rightarrow\\beta\\) \u5b9a\u4e49\u5728R\u4e0a\uff0c\u5f53\u4e14\u4ec5\u5f53<ul> <li>\u5982\u679c\u5bf9\u4e8eR\u7684\u4efb\u610f\u5173\u7cfbr(R)  \u5f53\u5176\u4e2d\u7684\u4efb\u610f\u4e24\u4e2a\u5143\u7ec4t1\u548ct2\uff0c\u5982\u679c\u4ed6\u4eec\u7684\\(\\alpha\\)\u5c5e\u6027\u503c\u76f8\u540c\u53ef\u4ee5\u63a8\u51fa\u4ed6\u4eec\u7684\\(\\beta\\)\u5c5e\u6027\u503c\u4e5f\u76f8\u540c</li> </ul> </li> <li>\u5982\u679c\u67d0\u4e2a\u5c5e\u6027\u96c6A\u53ef\u4ee5\u51b3\u5b9a\u53e6\u4e00\u4e2a\u5c5e\u6027\u96c6B\u7684\u503c\uff0c\u5c31\u79f0\\(A\\rightarrow B\\)\u662f\u4e00\u4e2a\u51fd\u6570\u4f9d\u8d56</li> <li>\u51fd\u6570\u4f9d\u8d56\u548c\u952e\u7684\u5173\u7cfb\uff1a\u51fd\u6570\u4f9d\u8d56\u5b9e\u9645\u4e0a\u662f\u952e\u7684\u6982\u5ff5\u7684\u4e00\u79cd\u6cdb\u5316<ul> <li>K\u662f\u5173\u7cfb\u6a21\u5f0fR\u7684\u8d85\u952e\u5f53\u4e14\u4ec5\u5f53 \\(K\\rightarrow R\\) </li> <li>K \u662fR\u4e0a\u7684\u5019\u9009\u4e3b\u952e\u5f53\u4e14\u4ec5\u5f53 \\(K\\rightarrow R\\) \u5e76\u4e14\u4e0d\u5b58\u5728 \\(\\alpha\\sub K, \\alpha\\rightarrow R\\) </li> </ul> </li> <li>\u4e00\u4e2a\u5e73\u51e1\u7684\u7684\u7ed3\u8bba\uff1a\u5b50\u96c6\u4e00\u5b9a\u5bf9\u81ea\u5df1\u51fd\u6570\u4f9d\u8d56</li> </ul>"},{"location":"ZJU_CS/Database/review/#334","title":"3.3.4 \u95ed\u5305","text":"<ul> <li> <p>Closure \u95ed\u5305</p> </li> <li> <p>\u95ed\u5305, \u5bf9\u4e8e\u539f\u59cb\u7684\u51fd\u6570\u4f9d\u8d56\u96c6\u5408F\u53ef\u4ee5\u63a8\u51fa\u7684\u6240\u6709\u51fd\u6570\u4f9d\u8d56\u5173\u7cfb\u4ea7\u751f\u7684\u96c6\u5408\u5c31\u662fF\u7684\u95ed\u5305 </p> </li> <li> <p>\u7b26\u53f7\u7528\\(F^+\\)\u8868\u793a</p> </li> <li> <p>\u51fd\u6570\u4f9d\u8d56\u7684\u6027\u8d28</p> <ul> <li>reflexity\uff1a\\(\\alpha\\)\u7684\u5b50\u96c6\u4e00\u5b9a\u5173\u4e8e\\(\\alpha\\)\u51fd\u6570\u4f9d\u8d56</li> <li>augmentation\uff1a\u5982\u679c\\(\\alpha\\rightarrow \\beta\\) \u5219\u6709\\(\\lambda\\alpha\\rightarrow \\lambda\\beta\\) </li> <li>transitivity\uff1a\u5982\u679c\\(a\\rightarrow \\beta \\and \\beta\\rightarrow\\gamma\\) \u5219\u6709\\(a\\rightarrow \\gamma\\) </li> <li>union\uff1a\u5982\u679c\\(\\alpha\\rightarrow \\beta\\and \\alpha\\rightarrow \\gamma\\) \u5219\u6709\\(\\alpha \\rightarrow \\beta\\gamma\\) </li> <li>decomposition\uff1a\u5982\u679c\\(\\alpha \\rightarrow \\beta\\gamma\\) \u5219\u6709\\(\\alpha\\rightarrow \\beta\\and \\alpha\\rightarrow \\gamma\\) </li> <li>pseudotransitivity\uff1a\u5982\u679c\\(\\alpha\\rightarrow \\beta\\and \\beta\\gamma\\rightarrow \\delta\\) \u5219\u6709\\(\\gamma\\alpha\\rightarrow\\delta\\) </li> </ul> </li> <li> <p>\u8ba1\u7b97\u95ed\u5305\u7684\u65b9\u6cd5</p> <ul> <li>\u6839\u636e\u521d\u59cb\u7684\u51fd\u6570\u4f9d\u8d56\u5173\u7cfb\u96c6\u5408F\u548c\u51fd\u6570\u4f9d\u8d56\u7684\u6027\u8d28\uff0c\u8ba1\u7b97\u51fa\u6240\u6709\u7684\u51fd\u6570\u4f9d\u8d56\u6784\u6210\u95ed\u5305</li> <li>\u53ef\u4ee5\u7528\u6709\u5411\u56fe\u8868\u793a\u5c5e\u6027\u4e4b\u95f4\u7684\u5173\u7cfb\uff0c\u901a\u8fc7\u56fe\u6765\u5199\u51fa\u6240\u6709\u7684\u51fd\u6570\u4f9d\u8d56</li> </ul> </li> <li> <p>\u5c5e\u6027\u96c6\u7684\u95ed\u5305</p> <ul> <li>\u95ed\u5305\u4e2d\u6240\u6709\u5173\u4e8e\\(\\alpha\\)\u51fd\u6570\u4f9d\u8d56\u7684\u5c5e\u6027\u96c6\u6784\u6210\u7684\u96c6\u5408</li> <li>\u5373\u5982\u679c\\((\\alpha\\rightarrow \\beta)\\in F^+\\)\u5219\u6709\\(\\beta\\in\\alpha^{+}\\) </li> <li>\u8ba1\u7b97\u5c5e\u6027\u96c6\u95ed\u5305\u7684\u7b97\u6cd5</li> </ul> <pre><code>result={a}\nwhile result is changed do\n    for each b-&gt;c in F do\n        begin\n            if b is in result then push c into result\n        end\n</code></pre> <ul> <li>\u5c5e\u6027\u96c6\u95ed\u5305\u7684\u4f5c\u7528</li> <li>\u6d4b\u8bd5\u662f\u5426\u4e3a\u4e3b\u952e\uff1a\u5982\u679c\\(\\alpha\\)\u7684\u95ed\u5305\u5305\u542b\u4e86\u6240\u6709\u5c5e\u6027\uff0c\u5219\u03b1\u5c31\u662f\u4e3b\u952e</li> <li>\u6d4b\u8bd5\u51fd\u6570\u72ec\u7acb\uff1a\u4e3a\u4e86\u9a8c\u8bc1\\(\\alpha\\rightarrow \\beta\\)\u662f\u5426\u5b58\u5728\u53ea\u9700\u8981\u9a8c\u8bc1\u03b2\u662f\u5426\u5728\u03b1\u7684\u95ed\u5305\u4e2d</li> <li>\u8ba1\u7b97\\(F^+\\)\uff1a\u901a\u8fc7\u6bcf\u4e2a\u5c5e\u6027\u7684\u95ed\u5305\u53ef\u4ee5\u5f97\u5230\u6574\u4e2a\u5173\u7cfb\u6a21\u5f0f\u7684\u95ed\u5305</li> </ul> </li> <li> <p>\u5224\u5b9a\u662f\u5426\u4e3aLossless Join\u7684\u529e\u6cd5</p> <ul> <li>\u5f53\u4e14\u4ec5\u5f53\\(R_1\\cap R_2\\rightarrow R_1\\) \u6216\u8005\\(R_1\\cap R_2\\rightarrow R_2\\)\u81f3\u5c11\u6709\u4e00\u4e2a\\(F^+\\)\u4e2d</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/review/#335_bcnf3nf","title":"3.3.5 BCNF/3NF","text":"<ul> <li> <p>BC \u8303\u5f0f(Boyee-Codd Normal Form) </p> </li> <li> <p>BC\u8303\u5f0f\u7684\u6761\u4ef6\u662f\uff1a\u95ed\u5305\\(F^+\\)\u4e2d\u7684\u6240\u6709\u51fd\u6570\u4f9d\u8d56\\(\\alpha \\rightarrow \\beta\\) \u81f3\u5c11\u6ee1\u8db3\u4e0b\u9762\u7684\u4e00\u6761</p> <ul> <li>\\(\\alpha \\rightarrow \\beta\\) \u662f\u5e73\u51e1\u7684(\u4e5f\u5c31\u662f\u03b2\u662f\u03b1\u7684\u5b50\u96c6)</li> <li>\u03b1\u662f\u5173\u7cfb\u6a21\u5f0fR\u7684\u4e00\u4e2a\u8d85\u952e\uff0c\u5373\\(\\alpha \\rightarrow R\\) </li> </ul> </li> <li>\u5982\u4f55\u9a8c\u8bc1BCNF\uff1a<ul> <li>\u68c0\u6d4b\u4e00\u4e2a\u975e\u5e73\u51e1\u7684\u51fd\u6570\u4f9d\u8d56\\(\\alpha\\rightarrow\\beta\\)\u662f\u5426\u8fdd\u80cc\u4e86BCNF\u7684\u539f\u5219</li> <li>\u8ba1\u7b97\u03b1\u7684\u5c5e\u6027\u95ed\u5305</li> <li>\u5982\u679c\u8fd9\u4e2a\u5c5e\u6027\u95ed\u5305\u5305\u542b\u4e86\u6240\u6709\u7684\u5143\u7d20\uff0c\u90a3\u4e48\u03b1\u5c31\u662f\u4e00\u4e2a\u8d85\u952e </li> <li>\u5982\u679c\u03b1\u4e0d\u662f\u8d85\u952e\u800c\u8fd9\u4e2a\u51fd\u6570\u4f9d\u8d56\u53c8\u4e0d\u5e73\u51e1\uff0c\u5c31\u6253\u7834\u4e86BCNF\u7684\u539f\u5219</li> <li>\u7b80\u5316\u7684\u68c0\u6d4b\u65b9\u6cd5\uff1a</li> <li>\u53ea\u9700\u8981\u770b\u5173\u7cfb\u6a21\u5f0fR\u548c\u5df2\u7ecf\u7ed9\u5b9a\u7684\u51fd\u6570\u4f9d\u8d56\u96c6\u5408F\u4e2d\u7684\u5404\u4e2a\u51fd\u6570\u4f9d\u8d56\u662f\u5426\u6ee1\u8db3BCNF\u7684\u539f\u5219<ul> <li>\u4e0d\u9700\u8981\u68c0\u67e5F\u95ed\u5305\u4e2d\u6240\u6709\u7684\u51fd\u6570\u72ec\u7acb</li> </ul> </li> <li>\u53ef\u4ee5\u8bc1\u660e\u5982\u679cF\u4e2d\u6ca1\u6709\u8fdd\u80ccBCNF\u539f\u5219\u7684\u51fd\u6570\u4f9d\u8d56\uff0c\u90a3\u4e48F\u7684\u95ed\u5305\u4e2d\u4e5f\u6ca1\u6709</li> <li>\u8fd9\u4e2a\u65b9\u6cd5\u4e0d\u80fd\u7528\u4e8e\u68c0\u6d4bR\u7684\u5206\u89e3</li> </ul> </li> <li>BC\u8303\u5f0f\u7684\u5206\u89e3\u7b97\u6cd5\u4f2a\u4ee3\u7801</li> </ul> <pre><code>result={R}\ndone=false\ncompute F+ by F\nwhile (!done) do\n  if exist Ri in result that is not a BCNF\n  then begin\n      let a-&gt;b be a non-trivial function dependency that holds on Ri such that a-&gt;Ri is not in F+ and (a and b)=empty set\n      result=(result-Ri)or(Ri-b)or(a,b);\n      end\n  else\n      done=true\n</code></pre> <ul> <li> <p>\u5f53\u6211\u4eec\u5bf9\u5173\u7cfb\u6a21\u5f0fR\u8fdb\u884c\u5206\u89e3\u7684\u65f6\u5019\uff0c\u6211\u4eec\u7684\u76ee\u6807\u662f</p> </li> <li> <p>\u6ca1\u6709\u5197\u4f59\uff0c\u6bcf\u4e2a\u5173\u7cfb\u90fd\u662f\u4e00\u4e2agood form</p> </li> <li> <p>\u65e0\u635f\u5206\u89e3</p> </li> <li> <p>Denpendency preservation \u72ec\u7acb\u6027\u4fdd\u62a4,\u628aR\u548cF\u7684\u95ed\u5305\u6309\u7167\u5173\u7cfb\u7684\u5bf9\u5e94\u8fdb\u884c\u5212\u5206</p> <ul> <li>\u7528\\(F_i\\)\u8868\u793a\u53ea\u5305\u542b\u5728\\(R_i\\)\u4e2d\u51fa\u73b0\u7684\u5143\u7d20\u7684\u51fd\u6570\u4f9d\u8d56\u6784\u6210\u7684\u96c6\u5408</li> <li>\u6211\u4eec\u5e0c\u671b\u7684\u7ed3\u679c\u662f \\((F_1\\cup F_2\\cup\\dots\\cup F_n)^+=F^+\\) </li> <li>BCNF\u7684\u5206\u89e3\u4e00\u5b9a\u662f\u6709\u72ec\u7acb\u6027\u4fdd\u62a4\u7684</li> <li>\u72ec\u7acb\u6027\u4fdd\u62a4\u7684\u9a8c\u8bc1\u7b97\u6cd5</li> <li>\u5982\u679c\u6700\u7ec8\u7684\u7ed3\u679cresult\u5305\u542b\u4e86\u6240\u6709\u5c5e\u6027\uff0c\u90a3\u4e48\u51fd\u6570\u4f9d\u8d56\\(\\alpha\\rightarrow \\beta\\) \u5c31\u662f\u88ab\u4fdd\u62a4\u7684</li> </ul> <pre><code>result = \u03b1\nwhile result changed do\n    for each Ri in the composition\n        t = (result and Ri)+ and Ri\n        result = result or t\n</code></pre> </li> <li> <p>Third normal form \u7b2c\u4e09\u8303\u5f0f</p> </li> <li> <p>\u7b2c\u4e09\u8303\u5f0f\u7684\u5b9a\u4e49\uff1a\u5bf9\u4e8e\u51fd\u6570\u4f9d\u8d56\u7684\u95ed\u5305\\(F^+\\)\u4e2d\u7684\u6240\u6709\u51fd\u6570\u4f9d\u8d56\\(\\alpha\\rightarrow\\beta\\) \u4e0b\u9762\u4e09\u6761\u81f3\u5c11\u6ee1\u8db3\u4e00\u6761</p> <ul> <li>\\(\\alpha\\rightarrow\\beta\\) \u662f\u5e73\u51e1\u7684</li> <li>\\(\\alpha\\)\u662f\u5173\u7cfb\u6a21\u5f0fR\u7684\u8d85\u952e</li> <li>\u6bcf\u4e00\u4e2a\\(\\beta-\\alpha\\) \u4e2d\u7684 \u5c5e\u6027A\u90fd\u5305\u542b\u5728\u4e00\u4e2aR\u7684\u5019\u9009\u4e3b\u952e\u4e2d </li> </ul> </li> <li>BCNF\u4e00\u5b9a\u662f3NF\uff0c\u5b9e\u9645\u4e0a3NF\u662f\u4e3a\u4e86\u4fdd\u8bc1\u72ec\u7acb\u6027\u4fdd\u62a4\u7684BCNF</li> <li> <p>3NF\u6709\u5197\u4f59\uff0c\u67d0\u4e9b\u60c5\u51b5\u9700\u8981\u8bbe\u7f6e\u4e00\u4e9b\u7a7a\u503c</p> </li> <li> <p>3NF\u7684\u5224\u5b9a</p> </li> <li> <p>\u4e0d\u9700\u8981\u5224\u65ad\u95ed\u5305\u4e2d\u7684\u6240\u6709\u51fd\u6570\u4f9d\u8d56\uff0c\u53ea\u9700\u8981\u5bf9\u5df2\u6709\u7684F\u4e2d\u7684\u6240\u6709\u51fd\u6570\u4f9d\u8d56\u8fdb\u884c\u5224\u65ad</p> </li> <li>\u7528\u95ed\u5305\u53ef\u4ee5\u68c0\u67e5\\(\\alpha\\rightarrow \\beta\\)\u4e2d\u7684\u03b1\u662f\u4e0d\u662f\u8d85\u952e</li> <li>\u5982\u679c\u4e0d\u662f\uff0c\u5c31\u9700\u8981\u68c0\u67e5\u03b2\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5c5e\u6027\u5305\u542b\u5728R\u7684\u5019\u9009\u952e\u4e2d</li> </ul>"},{"location":"ZJU_CS/Database/review/#336","title":"3.3.6 \u6700\u5c0f\u8986\u76d6","text":"<ul> <li> <p>Canonical conver \u6700\u5c0f\u8986\u76d6\u95ee\u9898</p> </li> <li> <p>\u51fd\u6570\u4f9d\u8d56\u5173\u7cfb\u7684\u6700\u5c0f\u96c6\u5408(\u4e5f\u5c31\u662f\u6ca1\u6709\u5197\u4f59\uff0c\u548cF\u7b49\u4ef7\u53ef\u4ee5\u63a8\u5bfc\u51faF+\u7684\u5173\u7cfb\u96c6\u5408)</p> </li> <li>\u65e0\u5173\u5c5e\u6027Extraneous Attributes\uff1a<ul> <li>\u5b9a\u4e49\uff1a\u5bf9\u4e8e\u51fd\u6570\u4f9d\u8d56\u96c6\u5408F\u4e2d\u7684\u4e00\u4e2a\u51fd\u6570\u4f9d\u8d56\\(\\alpha\\rightarrow\\beta\\)</li> <li>\u03b1\u4e2d\u7684\u5c5e\u6027A\u662f\u591a\u4f59\u7684\uff0c\u5982\u679cF\u903b\u8f91\u4e0a\u53ef\u4ee5\u63a8\u51fa\\((F-\\{\\alpha\\rightarrow\\beta\\})\\or \\{(\\alpha-A)\\rightarrow\\beta\\}\\) </li> <li>\u03b2\u4e2d\u7684\u5c5e\u6027A\u662f\u591a\u4f59\u7684\uff0c\u5982\u679c\\((F-\\{\\alpha\\rightarrow\\beta\\})\\or \\{\\alpha\\rightarrow(\\beta-A)\\}\\) \u903b\u8f91\u4e0a\u53ef\u4ee5\u63a8\u51faF<ul> <li>\u66f4\u5f3a\u7684\u51fd\u6570\u903b\u8f91\u4e0a\u53ef\u4ee5\u63a8\u5bfc\u51fa\u66f4\u5f31\u7684\u51fd\u6570</li> </ul> </li> <li>\u5224\u65ad\\(\\alpha\\rightarrow\\beta\\)\u4e2d\u7684\u4e00\u4e2a\u5c5e\u6027\u662f\u4e0d\u662f\u591a\u4f59\u7684</li> <li>\u6d4b\u8bd5\u03b1\u4e2d\u7684\u5c5e\u6027A\u662f\u5426\u4e3a\u591a\u4f59\u7684<ul> <li>\u8ba1\u7b97\\((\\alpha-A)^+\\)</li> <li>\u68c0\u67e5\u7ed3\u679c\u4e2d\u662f\u5426\u5305\u542b\u03b2\uff0c\u5982\u679c\u6709\u5c31\u8bf4\u660eA\u662f\u591a\u4f59\u7684</li> </ul> </li> <li>\u6d4b\u8bd5\u03b2\u4e2d\u7684\u5c5e\u6027A\u662f\u5426\u4e3a\u591a\u4f59\u7684<ul> <li>\u53ea\u7528\\((F-\\{\\alpha\\rightarrow\\beta\\})\\or \\{\\alpha\\rightarrow(\\beta-A)\\}\\)\u4e2d\u4f18\u7684\u4f9d\u8d56\u5173\u7cfb\u8ba1\u7b97\\(\\alpha^+\\) </li> <li>\u5982\u679c\u7ed3\u679c\u5305\u542bA\uff0c\u5c31\u8bf4\u660eA\u662f\u591a\u4f59\u7684</li> </ul> </li> </ul> </li> <li>\u6700\u5c0f\u8986\u76d6\\(F_c\\)\u7684\u5b9a\u4e49<ul> <li>\u548cF\u53ef\u4ee5\u4e92\u76f8\u4ece\u903b\u8f91\u4e0a\u63a8\u5bfc\u51fa\uff0c\u5e76\u4e14\u6700\u5c0f\u8986\u76d6\u4e2d\u6ca1\u6709\u591a\u4f59\u7684\u4fe1\u606f</li> <li>\u6700\u5c0f\u8986\u76d6\u4e2d\u7684\u6bcf\u4e2a\u51fd\u6570\u4f9d\u8d56\u4e2d\u5de6\u8fb9\u7684\u5185\u5bb9\u90fd\u662funique\u7684</li> <li>\u5982\u4f55\u8ba1\u7b97\u6700\u5c0f\u8986\u76d6\uff1aPPT-8\u768453\u9875\u6709\u4e00\u4e2a\u4f8b\u5b50</li> <li>\u5148\u4ee4Fc=F</li> <li>\u7528Union rule\u5c06Fc\u4e2d\u6240\u6709\u6ee1\u8db3\\(\\alpha\\rightarrow\\beta_1 \\and \\alpha\\rightarrow\\beta_2\\)\u7684\u51fd\u6570\u4f9d\u8d56\u66ff\u6362\u4e3a\\(\\alpha\\rightarrow\\beta_1\\beta_2\\) </li> <li>\u627e\u5230Fc\u4e2d\u7684\u4e00\u4e2a\u51fd\u6570\u4f9d\u8d56\u53bb\u6389\u91cc\u9762\u91cd\u590d\u7684\u5c5e\u6027</li> <li>\u91cd\u590d2\uff0c3\u4e24\u4e2a\u6b65\u9aa4\u76f4\u5230Fc\u4e0d\u518d\u53d8\u5316</li> </ul> </li> </ul> <p>\u4e0b\u9762\u8fd9\u4e9b\u90e8\u5206\u770b\u8d77\u6765\u4e0d\u592a\u4f1a\u8003\uff0c\u5148\u4e0d\u7ba1\u4e86\uff0c\u6709\u7a7a\u518d\u770b</p> <ul> <li>3NF decomposition algorithm</li> <li> <p>Multivalued denpendency</p> </li> <li> <p>\u591a\u503c\u4f9d\u8d56 a-&gt;-&gt;b\uff0c\u8bb0\u4f5cD\uff0c\u95ed\u5305\u8bb0\u4e3aD+</p> </li> <li> <p>Fourth Normal Form</p> </li> <li> <p>\u5bf9\u4e8eD+\u4e2d\u7684\u6240\u6709a-&gt;-&gt;b\u6709\u2460\u662f\u5e73\u51e1\u7684\u6216\u8005\u2461a\u662f\u4e00\u4e2a\u8d85\u952e</p> </li> <li>4NF\u4e00\u5b9a\u662fBCNF</li> </ul>"},{"location":"ZJU_CS/Database/review/#_4","title":"\u7b2c\u56db\u90e8\u5206: \u6570\u636e\u5e93\u8bbe\u8ba1\u7406\u8bba","text":""},{"location":"ZJU_CS/Database/review/#41","title":"4.1 \u5b58\u50a8\u548c\u6587\u4ef6\u7ed3\u6784","text":"<p>\u8fd9\u4e00\u90e8\u5206\u597d\u50cf\u4e0d\u600e\u4e48\u4f1a\u8003\u8bd5\uff0c\u7406\u8bba\u6027\u7684\u4e1c\u897f\u6bd4\u8f83\u591a\uff0c\u8ddf\u8ba1\u539f\u7684\u5b58\u50a8\u5668\u90e8\u5206\u597d\u50cf\u8fd8\u6709\u4e00\u90e8\u5206\u4ea4\u96c6</p> <ul> <li>\u5b58\u50a8\u7684\u7ed3\u6784 storage hierarchy</li> <li>primary\u4e3b\u5b58\u50a8\u5668<ul> <li>\u5feb\u800c\u6613\u5931\uff0c\u5e38\u89c1\u7684\u6709\u4e3b\u5b58\u548ccache</li> <li>cache\u7684\u5b58\u53d6\u6548\u7387\u6700\u9ad8\uff0c\u4f46\u662fcostly\uff0c\u4e3b\u5b58\u8bbf\u95ee\u5feb\u4f46\u662f\u5bf9\u4e8e\u6570\u636e\u5e93\u800c\u8a00\u7a7a\u95f4\u592a\u5c0f</li> </ul> </li> <li>secondary \u4e8c\u7ea7\u5b58\u50a8\u5668<ul> <li>\u4e0d\u5bb9\u6613\u4e22\u5931\uff0c\u8bbf\u95ee\u8f83\u5feb\uff0c\u53c8\u53eb\u5728\u7ebf\u5b58\u50a8</li> <li>\u5e38\u89c1\u7684\u662f\u95ea\u5b58\u548c\u78c1\u76d8</li> </ul> </li> <li>tertiary\u4e09\u7ea7\u5b58\u50a8\u5668<ul> <li>\u4e0d\u5bb9\u6613\u4e22\u5931\uff0c\u8bbf\u95ee\u6162\uff0c\u4f46\u662f\u5bb9\u91cf\u5927\u800ccheap\uff0c\u79bb\u7ebf\u5b58\u50a8</li> <li>\u78c1\u5e26\uff0c\u5149\u5b58\u50a8\u5668</li> </ul> </li> <li>\u603b\u4f53\u7684\u5b58\u50a8\u67b6\u6784\uff1acache--\u4e3b\u5b58--\u95ea\u5b58--\u78c1\u76d8--\u5149\u76d8--\u78c1\u5e26</li> </ul>"},{"location":"ZJU_CS/Database/review/#411_magnetic_disks","title":"4.1.1 \u78c1\u76d8 Magnetic Disks","text":"<ul> <li>\u7ec4\u6210\u7ed3\u6784</li> <li>read-write head \u8bfb\u5199\u5934<ul> <li>\u548c\u78c1\u76d8\u8868\u9762\u9760\u5f97\u5f88\u8fd1</li> <li>\u7528\u4e8e\u8bfb\u5199\u78c1\u76d8\u4e2d\u7684\u6587\u4ef6\u4fe1\u606f</li> </ul> </li> <li>tracks \u78c1\u9053, \u7531\u78c1\u76d8\u8868\u9762\u5212\u5206\uff0c\u6bcf\u4e2a\u786c\u76d8\u5927\u6982\u670950k\u5230100k\u4e2a\u78c1\u9053<ul> <li>sectors \u6247\u533a\uff0c\u7531\u78c1\u9053\u5212\u5206\u800c\u6210</li> <li>\u6247\u533a\u662f\u6570\u636e\u8bfb\u5199\u7684\u6700\u5c0f\u5355\u4f4d</li> <li>\u6bcf\u4e2a\u6247\u533a\u7684\u5927\u5c0f\u662f512\u5b57\u8282\uff0c\u6bcf\u4e2a\u78c1\u9053\u6709500-1000\u4e2a\u6247\u533a</li> </ul> </li> <li>\u78c1\u76d8\u63a7\u5236\u5668\uff1a\u8ba1\u7b97\u673a\u7cfb\u7edf\u548c\u78c1\u76d8\u4e4b\u95f4\u7684\u63a5\u53e3</li> <li>Disk subsystem \u78c1\u76d8\u5b50\u7cfb\u7edf\uff1a\u7531disk controller\u64cd\u7eb5\u82e5\u5e72\u4e2a\u78c1\u76d8\u7ec4\u6210\u7684\u5b57\u7cfb\u7edf</li> <li>\u78c1\u76d8\u7684\u6027\u80fd\u8bc4\u4ef7\u6807\u51c6</li> <li>access time\uff1a \u8bbf\u95ee\u65f6\u95f4\uff0c\u5305\u62ec<ul> <li>seek time\uff1a\u8bfb\u5199\u5934\u7684arm\u6b63\u786e\u627e\u5230track\u7684\u65f6\u95f4\uff0c\u5e73\u5747\u7684seek time\u662f\u6700\u574f\u60c5\u51b5\u7684\u4e00\u534a</li> <li>rotational latency\uff1a\u65cb\u8f6c\u9020\u6210\u7684\u5ef6\u8fdf\uff0c\u5e73\u5747\u65f6\u95f4\u662f\u6700\u574f\u7684\u4e00\u534a</li> </ul> </li> <li>data-transfer rate \u6570\u636e\u4ece\u78c1\u76d8\u8bfb\u5199\u7684\u901f\u5ea6</li> <li>MTTF\uff1a\u51fa\u73b0failure\u4e4b\u524d\u7684\u5e73\u5747\u8fd0\u884c\u65f6\u95f4</li> <li>\u78c1\u76d8\u8bbf\u95ee\u7684\u4f18\u5316</li> <li>block \uff1a\u4e00\u4e2a\u78c1\u9053\u4e2d\u7684\u82e5\u5e72\u8fde\u7eed\u6247\u533a\u7ec4\u6210\u7684\u5e8f\u5217</li> <li>buffering</li> <li>read-ahead</li> <li>disk-arm-scheduling</li> <li>file organization:  \u901a\u8fc7\u6309\u7167\u8bbf\u95ee\u6570\u636e\u7684\u65b9\u5f0f\u6765\u7ec4\u7ec7block\u4f18\u5316\u8bbf\u95ee\u65f6\u95f4</li> </ul>"},{"location":"ZJU_CS/Database/review/#412_file_organization","title":"4.1.2 File organization \u6587\u4ef6\u7ec4\u7ec7","text":"<ul> <li>\u6570\u636e\u5e93\u5b58\u50a8\u5728\u4e00\u7cfb\u5217\u7684\u6587\u4ef6\u4e2d\uff0c\u6bcf\u4e2a\u6587\u4ef6\u662f\u4e00\u7cfb\u5217\u7684\u8bb0\u5f55\uff0c\u6bcf\u6761\u8bb0\u5f55\u5305\u542b\u4e00\u7cfb\u5217\u7684fields</li> <li>\u6bcf\u4e2a\u6587\u4ef6\u88ab\u5212\u5206\u4e3a\u56fa\u5b9a\u957f\u5ea6\u7684block\uff0cblock\u662f\u6570\u636e\u5b58\u53d6/\u5b58\u50a8\u7a7a\u95f4\u5206\u914d\u7684\u57fa\u672c\u5355\u4f4d</li> <li>\u4e00\u4e2ablock\u6709\u591a\u6761\u8bb0\u5f55\uff0c\u5728\u4f20\u7edf\u7684\u6570\u636e\u5e93\u4e2d<ul> <li>\u8bb0\u5f55\u7684\u957f\u5ea6\u4e0d\u80fd\u8d85\u8fc7block</li> <li>\u6bcf\u6761\u8bb0\u5f55\u4e00\u5b9a\u90fd\u662f\u5b8c\u6574\u7684</li> </ul> </li> <li>Free List \u7528\u94fe\u8868\u7684\u5f62\u5f0f\u6765\u5b58\u50a8records</li> <li> <p>Variable-length records \u53d8\u957f\u8bb0\u5f55</p> <ul> <li> <p>\u5178\u578b\u7684\u53d8\u957f\u8bb0\u5f55</p> </li> <li> <p>\u5c5e\u6027\u6309\u7167\u987a\u5e8f\u5b58\u50a8</p> </li> <li> <p>\u53d8\u957f\u7684\u53d8\u91cf\u7528offset+data\u7684\u5f62\u5f0f\u5b58\u50a8\uff0c\u7a7a\u503c\u7528null-value bitmap\u5b58\u50a8</p> </li> <li> <p>slotted page\u7ed3\u6784\uff0c\u5b83\u7684header\u5305\u542b</p> </li> <li>\u8bb0\u5f55\u7684\u603b\u6570</li> <li>block\u4e2d\u7684\u7a7a\u95f2\u533a\u57df\u7684end</li> <li>\u6bcf\u6761\u8bb0\u5f55\u6240\u5728\u7684\u4f4d\u7f6e\u548c\u5927\u5c0f</li> </ul> <p>   - \u6587\u4ef6\u4e2d\u8bb0\u5f55\u7684\u7ec4\u7ec7\u65b9\u5f0f - heap - sequential - hashing - nulti-table clustering file organization - \u5b58\u50a8\u7f13\u51b2\u533a\u7684\u7ba1\u7406   - \u901a\u8fc7\u5c06\u6570\u636e\u653e\u5230\u4e3b\u5b58\u4e2d\u6765\u63d0\u9ad8\u8bbf\u95ee\u6548\u7387 - buffer manager\uff1a\u7528\u4e8e\u7ba1\u7406\u7f13\u51b2\u533a\u4e2d\u7684\u5185\u5b58\u5206\u914d   - \u5f53\u9700\u8981\u4ece\u78c1\u76d8\u8bfb\u53d6block\u7684\u65f6\u5019\uff0c\u6570\u636e\u5e93\u4f1a\u8c03\u7528buffer mananger\u7684\u529f\u80fd   - \u5982\u679cblock\u5df2\u7ecf\u5728buffer\u4e2d\u4e86\uff0c\u5c31\u76f4\u63a5\u8fd4\u56de\u8fd9\u4e2ablock\u7684\u5730\u5740   - \u5982\u679c\u4e0d\u5728\uff0c\u5219buffer manager \u4f1a\u52a8\u6001\u5206\u914dbuffer\u4e2d\u7684\u5185\u5b58\u7ed9block\uff0c\u5e76\u4e14\u53ef\u80fd\u4f1a\u8986\u76d6\u522b\u7684block\uff0c\u7136\u540e\u5c06\u78c1\u76d8\u4e2dblock\u4e2d\u7684\u5185\u5bb9\u5199\u5165buffer\u4e2d     - \u6d89\u53ca\u5230buffer\u7684\u66ff\u6362\u7b97\u6cd5LRU strategy \u5373\u66ff\u6362\u6389\u6700\u8fd1\u4f7f\u7528\u9891\u7387\u6700\u4f4e\u7684block - pinned block \u5185\u5b58\u4e2d\u7684\u4e0d\u5141\u8bb8\u5199\u56de\u78c1\u76d8\u7684block\uff0c\u8868\u793a\u6b63\u5728\u5904\u7406\u4e8b\u52a1\u6216\u8005\u5904\u4e8e\u6062\u590d\u63a5\u65ad</p> </li> </ul>"},{"location":"ZJU_CS/Database/review/#42_b","title":"4.2 B+\u6811\u7d22\u5f15","text":""},{"location":"ZJU_CS/Database/review/#421","title":"4.2.1 \u7d22\u5f15","text":"<ul> <li>\u6570\u636e\u5e93\u7cfb\u7edf\u4e2d\u5f15\u5165\u7d22\u5f15\u673a\u5236\uff0c\u7528\u4e8e\u52a0\u5feb\u67e5\u8be2\u548c\u8bbf\u95ee\u9700\u8981\u7684\u6570\u636e</li> <li>search key \u901a\u8fc7\u4e00\u4e2a\u5c5e\u6027\u503c\u67e5\u627e\u4e00\u7cfb\u5217\u5c5e\u6027\u503c\uff0c\u7528\u4e8e\u6587\u4ef6\u4e2d\u67e5\u8be2</li> <li>Index file \u7d22\u5f15\u6587\u4ef6\u5305\u542b\u4e00\u7cfb\u5217\u7684search key\u548cpointer(\u4e24\u8005\u7684\u7ec4\u5408\u88ab\u79f0\u4e3aindex entry)\uff0c\u67e5\u8be2\u65b9\u5f0f\u662f\u901a\u8fc7search key\u5728index file\u4e2d\u67e5\u8be2data\u7684\u5730\u5740(pointer)\uff0c\u7136\u540e\u518d\u4ecedata file\u4e2d\u67e5\u8be2\u6570\u636e<ul> <li>\u4e24\u79cdsearch key\u7684\u6392\u5e8f\u65b9\u5f0f\uff1aordered index\uff0chash index</li> <li>ordered index \u987a\u5e8f\u7d22\u5f15</li> <li>index entry\u6309\u7167search key\u7684\u503c\u6765\u8fdb\u884c\u6392\u5217</li> <li>primary key \u6307\u5b9a\u6587\u4ef6\u987a\u5e8f\u7684\u7d22\u5f15 secondary key \u6b21\u5173\u952e\u5b57</li> <li>\u7d22\u5f15\u7684\u4e0d\u540c\u65b9\u5f0f</li> <li>Dense index \u5bc6\u96c6\u7684\u7d22\u5f15\uff1a\u6bcf\u4e00\u6761\u8bb0\u5f55\u90fd\u6709\u5bf9\u5e94\u7684\u7d22\u5f15</li> <li>Sperse index \u7a00\u758f\u7684\u7d22\u5f15<ul> <li>\u9700\u8981\u7684\u7a7a\u95f4\u548c\u63d2\u5165\u5220\u9664\u65b0\u7d22\u5f15\u7684\u5f00\u9500\u8f83\u5c0f\uff0c\u4f46\u662f\u6bd4\u5bc6\u96c6\u7684\u7d22\u5f15\u8981\u6162</li> </ul> </li> <li>Secondary indice\u7d22\u5f15\u901a\u8fc7\u4e00\u4e2a\u5927\u7684bucket\u6765\u5bfb\u627e\u6240\u6307\u5411\u7684\u5730\u65b9</li> <li>Multilevel index \u591a\u7ea7\u7d22\u5f15\uff0c\u5206\u4e3aouter index\u548cinner index</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/review/#422_b","title":"4.2.2 B+\u6811\u7d22\u5f15","text":"<ul> <li>B+\u6811\u6587\u4ef6\u7d22\u5f15</li> <li>\u901a\u8fc7B+\u6811\u7684\u7d22\u5f15\u65b9\u5f0f\u6765\u5bfb\u627e\u6587\u4ef6\u4e2d\u6570\u636e\u7684\u5730\u5740\uff0cB+\u6811\u7684\u5b9a\u4e49\u548cads\u4e2d\u7684B+\u6811\u57fa\u672c\u76f8\u540c\uff0c<ul> <li>\u6811\u7684\u975e\u53f6\u8282\u70b9\u7531\u6307\u5411\u513f\u5b50\u7684\u6307\u9488\u548csearch-key\u76f8\u95f4\u7ec4\u5408\u800c\u6210</li> <li>\u4e24\u4e2asearch-key\u4e4b\u95f4\u7684\u6307\u9488\u6307\u5411\u7684\u6570\u636e\u7684\u503c\u5728\u8fd9\u4e24\u4e2asearch-key\u4e4b\u95f4</li> </ul> </li> <li> <p>B+\u6811\u4e0a\u7684\u67e5\u8be2\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662flogN\u7ea7\u522b\uff0cN\u662fsearch key\u7684\u603b\u4e2a\u6570</p> <ul> <li>\u67e5\u8be2\u7684\u8def\u5f84\u957f\u5ea6\uff1a\u4e0d\u4f1a\u8d85\u8fc7\\(\\log_{n/2}(K)\\) + 1\u5176\u4e2dK\u662fB+\u6811\u4e2d\u7684\u7d22\u5f15\u7684\u4e2a\u6570(\u5373\u89c4\u6a21N)</li> <li>B+\u6811\u7684\u4e00\u4e2a\u8282\u70b9\u7684\u5927\u5c0f\u548c\u4e00\u4e2a\u78c1\u76d8\u533a\u5757\u4e00\u6837\u5927(\u5f80\u5f80\u662f4KB)\u800c\u5728n\u7684\u89c4\u6a21\u4e00\u822c\u5728100\u5de6\u53f3</li> </ul> </li> <li> <p>B+\u6811\u7684\u66f4\u65b0\uff1a\u63d2\u5165\u548c\u5220\u9664</p> <ul> <li>\u63d2\u5165\u7684\u7b97\u6cd5\uff1a\u5148\u627e\u5230\u8be5\u63d2\u5165\u7684\u4f4d\u7f6e\u76f4\u63a5\u63d2\u5165\uff0c\u5982\u679c\u5f53\u524d\u7684\u8282\u70b9\u6570\u91cf\u8d85\u8fc7\u4e86\u9636\u6570M\u5219\u62c6\u6210\u4e24\u4e2a\u90e8\u5206\uff0c\u5e76\u5411\u4e0a\u66f4\u65b0\u7d22\u5f15</li> <li>\u5220\u9664\u7684\u7b97\u6cd5: \u76f4\u63a5\u628a\u8981\u5220\u9664\u7684\u8282\u70b9\u5220\u9664\uff0c\u7136\u540e\u628a\u6ca1\u6709\u7d22\u5f15key\u4e86\u7684\u975e\u53f6\u8282\u70b9\u5220\u9664\uff0c\u4ece\u65c1\u8fb9\u627e\u4e00\u4e2a\u53f6\u8282\u70b9\u6765\u5408\u5e76\u51fa\u65b0\u7684\u975e\u53f6\u8282\u70b9</li> </ul> </li> <li> <p>B+\u6811\u7684\u76f8\u5173\u8ba1\u7b97</p> <ul> <li> <p>\u9ad8\u5ea6\u7684\u4f30\u8ba1\uff1a</p> <ul> <li>B+\u6811\u9ad8\u5ea6\u6700\u5c0f\u7684\u60c5\u51b5\uff1a\u6240\u6709\u7684\u53f6\u8282\u70b9\u90fd\u6ee1\uff0c\u6b64\u65f6\u7684\\(h = \\lceil \\log_{N}(M)\\rceil\\) </li> <li>\u6700\u5927\u7684\u60c5\u51b5\uff0c\u6240\u6709\u7684\u53f6\u8282\u70b9\u90fd\u534a\u6ee1\uff0c\u6b64\u65f6\u7684\\(h=\\lfloor \\log_{[N/2]}(\\frac{M}{2})\\rfloor+1\\) </li> </ul> </li> <li> <p>size\u5927\u5c0f\u7684\u4f30\u8ba1\uff1a\u4e5f\u662f\u4e24\u79cd\u6781\u7aef\u60c5\u51b5</p> <p></p> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/review/#423","title":"4.2.3 \u6587\u4ef6\u7d22\u5f15","text":"<ul> <li>Hash\u6587\u4ef6\u7d22\u5f15</li> <li>\u9759\u6001\u54c8\u5e0c<ul> <li>\u4f7f\u7528\u4e00\u7cfb\u5217buckets\u6765\u5b58\u50a8\u4e00\u7cfb\u5217\u7684records\uff0c\u901a\u8fc7hash\u51fd\u6570\u548csearch-key\u7684\u8fd0\u7b97\u6765\u67e5\u627e\u6587\u4ef6</li> <li>hash\u51fd\u6570\uff1a\u5c06\u4e0d\u540c\u7684search key\u6620\u5c04\u5230\u4e0d\u540c\u7684bucket\u91cc\u9762\u53bb</li> </ul> </li> <li>Hash indices \u5c06hash\u7528\u4e8e\u7d22\u5f15\u7ed3\u6784\u4e2d<ul> <li>A hash index organizes the search keys, with their associated record pointers, into a hash file structure.</li> <li>hash indices are always secondary indices </li> </ul> </li> <li>\u52a8\u6001\u54c8\u5e0c<ul> <li>\u54c8\u5e0c\u51fd\u6570\u4f1a\u88ab\u52a8\u6001\u5730\u4fee\u6539</li> <li>\u53ef\u6269\u5c55\u7684\u54c8\u5e0c</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/review/#424_b","title":"4.2.4 \u603b\u7ed3\uff1a\u5b58\u50a8\u7ed3\u6784\u548cB+\u6811\u7684\u8ba1\u7b97","text":"<ul> <li>\u8bb0\u5f55\u7684\u5b58\u50a8\uff1a</li> <li>\u6570\u636e\u5e93\u7684\u8bb0\u5f55\u5728block\u4e2d\u5b58\u50a8\uff0c\u4e00\u4e2ablock\u4e2d\u6709\u5927\u91cf\u7684\u8bb0\u5f55\u5b58\u50a8\uff0c\u6709\u7ebf\u6027\u5b58\u50a8\u7684\uff0c\u4e5f\u6709\u4f7f\u7528B+\u6811\u7d22\u5f15\u7684</li> <li>\u7ebf\u6027\u5b58\u50a8\u7684\u8bb0\u5f55\uff1a<ul> <li>\u5047\u8bbe\u4e00\u6761\u8bb0\u5f55\u7684\u957f\u5ea6\u4f4dL\uff0cblock\u7684\u5927\u5c0f\u4e3aB\uff0c\u90a3\u4e48\u4e00\u6761\u8bb0\u5f55\u4e2d\u6700\u591a\u6709\\(\\lfloor \\frac{B}{L}\\rfloor\\) \u6761\u8bb0\u5f55</li> <li>\u5982\u679c\u4e00\u5171\u6709N\u6761\u8bb0\u5f55\uff0c\u4e00\u4e2ablock\u4e2d\u6709M\u6761\u8bb0\u5f55\uff0c\u90a3\u4e48\u4e00\u5171\u9700\u8981\\(\\lceil\\frac{N}{M}\\rceil\\) \u4e2ablock\uff0c\u800c \\(M=\\lfloor \\frac{B}{L}\\rfloor\\) </li> </ul> </li> <li>B+\u6811\u7d22\u5f15block\u7684\u8ba1\u7b97\uff0c\u5047\u8bbeblock\u7684\u5927\u5c0f\u4e3aB\uff0c\u6307\u9488\u7684\u5927\u5c0f\u662fa\uff0c\u88ab\u7d22\u5f15\u7684\u5c5e\u6027\u503c\u5927\u5c0f\u662fb<ul> <li>\u8981\u6ce8\u610f\u6307\u9488\u8282\u70b9\u6bd4\u5c5e\u6027\u503c\u591a\u4e00\u4e2a\uff0c\u6240\u4ee5\u4e00\u4e2a\u5757\u4e0a\u7684\u6247\u51fa\u7387n(fan-out rate)\u662f\\(\\lfloor \\frac{B-a}{a+b}\\rfloor+1\\) </li> <li>n\u4e5f\u5c31\u662f\u8fd9\u4e2aB+\u6811\u7684\u9636\u6570\uff0c\u7136\u540e\u6839\u636e\u516c\u5f0f\u6765\u4f30\u7b97B+\u6811\u7684\u9ad8\u5ea6\uff0c\u5176\u4e2dM\u5e94\u8be5\u662f\u4f5c\u4e3a\u7d22\u5f15\u7684\u503c\u53ef\u4ee5\u53d6\u5230\u7684\u4e2a\u6570</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/review/#43_queryprocess","title":"4.3 \u67e5\u8be2\u5904\u7406 QueryProcess","text":"<p>\u5370\u8c61\u4e2d\u8fd9\u4e00\u90e8\u5206\u7684\u4f5c\u4e1a\u9898\u4ee5\u5957\u516c\u5f0f\u7b97\u4e3a\u4e3b</p> <ul> <li>\u67e5\u8be2\u5904\u7406\u7684\u57fa\u672c\u6b65\u9aa4</li> <li>Parsing and translation \u89e3\u6790\u548c\u7ffb\u8bd1</li> <li>Optimization \u4f18\u5316<ul> <li>\u4e00\u79cdSQL\u67e5\u8be2\u53ef\u80fd\u5bf9\u5e94\u4e86\u591a\u79cd\u7b49\u4ef7\u7684\u5173\u7cfb\u4ee3\u6570\u8868\u8fbe\u5f0f</li> <li>\u53ef\u4ee5\u901a\u8fc7\u4f30\u8ba1\u6bcf\u79cd\u65b9\u5f0f\u7684cost\u6765\u8bc4\u5224\u65b9\u6cd5\u7684\u597d\u574f</li> <li>\u67e5\u8be2\u4f18\u5316\u4f1a\u9009\u62e9\u6700\u8282\u7ea6\u7684\u65b9\u5f0f\u8fdb\u884c\u67e5\u8be2</li> </ul> </li> <li> <p>Evaluation</p> </li> <li> <p>Query cost\u7684\u8ba1\u7b97</p> </li> <li>\u4e3b\u8981\u7684cost\u6765\u6e90\uff1adisk access<ul> <li>seeks</li> <li>block read</li> <li>block written</li> </ul> </li> <li>cost\u8ba1\u7b97\u7684\u65b9\u5f0f\uff1a\u5728B\u4e2ablocks\u4e2d\u67e5\u8be2S\u6b21\u6240\u6d88\u8017\u7684\u65f6\u95f4=B*\u8f6c\u79fb\u5230\u4e00\u4e2ablock\u7684\u65f6\u95f4+S*\u4e00\u6b21\u67e5\u8be2\u7684\u65f6\u95f4\uff1a\\(B\\times t_T+S\\times t_S\\) \u5176\u4e2d\\(t_T\\) \u8868\u793a\u4e00\u6b21block transfer\u7684\u65f6\u95f4<ul> <li>cost\u4f9d\u8d56\u4e8e\u4e3b\u5b58\u4e2d\u7f13\u51b2\u533a\u7684\u5927\u5c0f\uff1a\u66f4\u591a\u7684\u5185\u5b58\u53ef\u4ee5\u51cf\u5c11disk access</li> <li>\u901a\u5e38\u8003\u8651\u6700\u574f\u7684\u60c5\u51b5\uff1a\u53ea\u63d0\u4f9b\u6700\u5c11\u7684\u5185\u5b58\u6765\u5b8c\u6210\u67e5\u8be2\u5de5\u4f5c</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/review/#431_selectcost","title":"4.3.1 select\u7684cost\u4f30\u8ba1","text":"<ul> <li> <p>Select \u64cd\u4f5c\u7684cost\u8ba1\u7b97</p> </li> <li> <p>Algorithm1:\u7ebf\u6027\u641c\u7d22\uff0c\u67e5\u8be2\u6bcf\u4e2ablock\u5224\u65ad\u662f\u5426\u6ee1\u8db3\u67e5\u8be2\u6761\u4ef6</p> <ul> <li> <p>Cost =  br block transfers + 1 seek\uff0c\u5176\u4e2d\\(b_r\\) \u662f\u5173\u7cfbr\u4e2d\u5b58\u50a8\u4e86\u8bb0\u5f55\u7684block\u7684\u6570\u91cf </p> </li> <li> <p>\u5982\u679c\u901a\u8fc7\u952e\u6765\u641c\u7d22\uff0c\u5728\u627e\u5230\u7684\u65f6\u5019\u5c31\u505c\u6b62\uff0c\u5219 cost = (br /2) block transfers + 1 seek</p> </li> <li> <p>\u4e8c\u5206\u641c\u7d22\u6b64\u65f6\u4e0d\u8d77\u4f5c\u7528\uff0c\u56e0\u4e3a\u6570\u636e\u4e0d\u662f\u8fde\u7eed\u5b58\u50a8\u7684</p> </li> </ul> </li> <li> <p>Index scan--\u4f7f\u7528\u7d22\u5f15\u8fdb\u884c\u641c\u7d22</p> </li> <li> <p>Algorithm2: primary index\uff0cequality on key\uff0c\u641c\u7d22\u4e00\u6761\u8bb0\u5f55</p> <ul> <li>\\(cost = (h_i+1)\\times(t_T+t_S)\\) --- hi\u662f\u7d22\u5f15\u7684\u9ad8\u5ea6</li> </ul> </li> <li> <p>Algorithm3: primary index, equality on non-key \u9700\u8981\u641c\u7d22\u591a\u6761\u8bb0\u5f55</p> <ul> <li>\u60f3\u8981\u7684\u7ed3\u679c\u4f1a\u5b58\u50a8\u5728\u8fde\u7eed\u7684block\u4e2d(\u56e0\u4e3a\u6709\u4e3b\u7d22\u5f15)</li> <li>\\(cost =h_i (t_T + t_S) + t_S + t_T * b\\) \u5176\u4e2db\u8868\u793a\u5305\u542b\u5339\u914d\u8bb0\u5f55\u7684block\u603b\u6570</li> <li>\u5f53\u4f7f\u7528B+\u6811\u4f5c\u4e3a\u7d22\u5f15\u65f6\u53ef\u4ee5\u8282\u7ea6\u4e00\u6b21seek\u7684\u65f6\u95f4\uff0c\\(cost =h_i (t_T + t_S)+ t_T * b\\) </li> </ul> </li> <li> <p>\u7b97\u6cd54\uff1aSecondary index</p> </li> <li> <p>\u7528\u5019\u9009\u4e3b\u952e\u4f5c\u4e3a\u7d22\u5f15\u68c0\u7d22\u5355\u6761\u8bb0\u5f55 \\(cost = (h_i + 1) \\times (t_T + t_S)\\) </p> </li> <li> <p>\u7528\u5019\u9009\u4e3b\u952e\u68c0\u7d22\u4e86n\u6761\u8bb0\u5f55(\u4e0d\u4e00\u5b9a\u5728\u540c\u4e00\u4e2ablock\u4e0a\u9762)</p> <p>\\(Cost = (h_i + n) \\times (t_T + t_S)\\) \u6709\u65f6\u5019\u4f1a\u975e\u5e38\u8017\u65f6</p> </li> </ul>"},{"location":"ZJU_CS/Database/review/#432_sortjoincost","title":"4.3.2 sort\u548cjoin\u7684cost\u4f30\u8ba1","text":"<ul> <li>Sort\uff1aexternal sort-merge \u5176\u5b9e\u7c7b\u4f3c\u4e8eads\u91cc\u9762\u7684\u5916\u90e8\u5f52\u5e76\u6392\u5e8f</li> <li> <p>M\u8868\u793a\u5185\u5b58\u7684\u5927\u5c0f\uff0c\\(b_r\\)\u8868\u793ablock\u7684\u6570\u91cf</p> <ul> <li>\u57fa\u672c\u6b65\u9aa4\u5982\u4e0b</li> <li>create sorted runs</li> <li>merge the runs</li> <li>\u9700\u8981\u7684merge pass\u603b\u6570 \\([ \\log_{M-1}(b_r/M)]\\) </li> <li>\u521b\u5efa\u548c\u6bcf\u6b21run\u8fc7\u7a0b\u4e2d\u7684disk access\u6570\u91cf 2br</li> <li>\u5916\u90e8\u6392\u5e8f\u4e2d\u603b\u7684disk access\u6b21\u6570 \\((2[ \\log_{M-1}(b_r/M)]+1)b_r\\) </li> </ul> </li> <li> <p>Join \u64cd\u4f5c\u7684cost\u4f30\u8ba1</p> </li> <li> <p>nested-loop join</p> <ul> <li>\u8ba1\u7b97theta-join\u8868\u8fbe\u5f0f\uff1a\\(r\\Join_{\\theta} s\\) \u7b97\u6cd5\u7684\u4f2a\u4ee3\u7801\u5982\u4e0b</li> </ul> <pre><code>for each tuple tr in r do begin \n    for each tuple ts in s do begin \n        test pair (tr,ts) to see if they satisfy the join condition\n        if they do, add tr \u2022 ts to the result\n    end\nend\n</code></pre> <ul> <li>block transfer\u6b21\u6570: \\(n_r\\times b_s+b_r\\)</li> <li>seeks\u7684\u6b21\u6570 \\(n_r+b_r\\) </li> </ul> </li> <li> <p>block nested-loop join \\(r\\Join_{\\theta} s\\) </p> <pre><code>for each block Br of r do begin     \n    for each block Bs of s do begin         \n        for each tuple tr in Br  do begin               \n            for each tuple ts in Bs do begin                                Check if (tr,ts) satisfy the join condition                 if they do, add tr \u2022 ts to the result.\n</code></pre> <ul> <li>\u6700\u574f\u60c5\u51b5\u7684cost</li> <li>block transfer \\(b_r\\times b_s+b_r\\)</li> <li>seeks \\(2b_r\\) </li> <li>\u6700\u597d\u60c5\u51b5\u7684cost</li> <li>block transfers \\(b_r+b_s\\) with 2 seeks</li> <li>\u4f18\u5316\uff1a\u4f7f\u7528M-2\u4e2ablock\u4f5c\u4e3ablocking unit(M\u662f\u5185\u5b58\u53ef\u4ee5\u5bb9\u7eb3\u7684block\u6570\u91cf)\uff0c\u6b64\u65f6\u7684</li> <li>block transfer\u6b21\u6570=\\(\\frac{b_r}{M-2}\\times b_s+b_r\\) </li> <li>seek\u6b21\u6570= \\(\\frac{2b_r}{M-2}\\) </li> </ul> </li> <li> <p>Index nested-loop join</p> <ul> <li>\u7d22\u5f15\u4e00\u5b9a\u7a0b\u5ea6\u4e0a\u53ef\u4ee5\u4ee3\u66fffile scan</li> <li>\\(cost=b_r(t_T+t_s)+c\\times n_r\\) \u5176\u4e2dc\u8868\u793a\u904d\u5386\u7d22\u5f15\u548c\u627e\u5230\u6240\u6709\u5339\u914d\u7684s\u4e2d\u7684tuple\u6240\u6d88\u8017\u7684\u65f6\u95f4\uff0c\u53ef\u4ee5\u7528\u4e00\u6b21s\u4e0a\u7684\u5355\u4e2aselection\u6765\u4f30\u8ba1s\u7684\u503c </li> </ul> </li> <li> <p>Merge-Join</p> <ul> <li>\u53ea\u80fd\u5728natural-join\u548cequal-join\u4e2d\u4f7f\u7528</li> <li>block transfer\u7684\u6b21\u6570=\\(b_r+b_s\\)\uff0cseek\u7684\u6b21\u6570=\\([b_r/b_b]+[b_s/b_b]\\) </li> </ul> </li> <li> <p>Hash join\uff1a\u4f7f\u7528hash\u51fd\u6570\u8fdb\u884cjoin</p> <ul> <li>h maps JoinAttrs values to {0, 1, ..., \\(n_h\\)},  \u5c06\u4e24\u4e2a\u5173\u7cfb\u8fdb\u884c\u6bd4\u8f83\u548c\u540c\u7c7b\u578b\u7684\u5339\u914d</li> <li>cost of hash-join</li> <li>block transfer: \\(3(b_r+b_s)+4n_h\\)<ul> <li>partition: \u8bfb \\(b_r+b_s\\) blocks \u5199 \\((b_r+b_s)+2n_h\\) blocks</li> <li>join: \u8bfb\\((b_r+b_s)+2n_h\\)</li> </ul> </li> <li>seeks: \\(2([b_r/b_b]+[b_s/b_b])\\) </li> <li>\u5982\u679c\u6240\u6709\u4e1c\u897f\u90fd\u80fd\u653e\u8fdb\u4e3b\u5b58\u91cc\uff0c\u5219\\(n_h=0\\) \u5e76\u4e14\u4e0d\u9700\u8981partition</li> <li>\u9700\u8981partition\u7684\u65f6\u5019 \\(cost=2(b_r+b_s[\\log_{M-1}(b_s)-1])+b_r+b_s\\) </li> </ul> </li> <li> <p>Evaluation of Expression \u8868\u8fbe\u5f0f\u6c42\u503c</p> </li> <li> <p>Materialization \u5b9e\u4f53\u5316</p> <ul> <li>\u4f9d\u6b21\u8fdb\u884c\u8868\u8fbe\u5f0f\u7684\u8ba1\u7b97\uff0c\u6784\u5efa\u524d\u7f00\u6811\u9012\u5f52\u8fdb\u884c</li> </ul> </li> <li>Pipelining \u6d41\u6c34\u7ebf\uff0c\u540c\u65f6\u8bc4\u4f30\u591a\u4e2a\u64cd\u4f5c<ul> <li>evaluate several operations simultaneously , passing the results of one operation on to the next.</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/review/#44_query_optimization","title":"4.4 \u67e5\u8be2\u4f18\u5316 Query Optimization","text":"<ul> <li>\u4e24\u79cd\u67e5\u8be2\u4f18\u5316\u7684\u529e\u6cd5</li> <li>\u627e\u5230\u7b49\u4ef7\u7684\u67e5\u8be2\u6548\u7387\u6700\u9ad8\u7684\u5173\u7cfb\u4ee3\u6570\u8868\u8fbe\u5f0f</li> <li>\u6307\u5b9a\u8be6\u7ec6\u7684\u7b56\u7565\u6765\u5904\u7406\u67e5\u8be2</li> </ul>"},{"location":"ZJU_CS/Database/review/#441","title":"4.4.1 \u7b49\u4ef7\u5173\u7cfb\u4ee3\u6570\u8868\u8fbe\u5f0f","text":"<ul> <li> <p>Equivalent Expressions \u7b49\u4ef7\u7684\u5173\u7cfb\u4ee3\u6570\u8868\u8fbe\u5f0f</p> </li> <li> <p>evaluation plan\uff1a\u7c7b\u4f3c\u4e8e\u7b97\u672f\u8868\u8fbe\u5f0f\u7684\u524d\u7f00\u6811\uff0c\u8868\u793a\u4e86\u6bcf\u90e8\u64cd\u4f5c\u8fdb\u884c\u7684\u8fc7\u7a0b</p> </li> <li> <p>Cost-based optimization\u57fa\u4e8ecost\u7684\u4f18\u5316</p> <ul> <li>\u57fa\u672c\u6b65\u9aa4</li> <li>\u7528\u8fd0\u7b97\u6cd5\u5219\u627e\u5230\u903b\u8f91\u4e0a\u7b49\u4ef7\u7684\u8868\u8fbe\u5f0f</li> <li>\u6ce8\u91ca\u7ed3\u679c\u8868\u8fbe\u5f0f\u6765\u83b7\u5f97\u67e5\u8be2\u8ba1\u5212</li> <li>\u9009\u62e9cost\u6700\u4f4e\u7684\u8868\u8fbe\u5f0f</li> <li>cost\u7684\u4f30\u7b97</li> <li>\u7edf\u8ba1\u4fe1\u606f\u91cf\u7684\u5927\u5c0f\uff0c\u6bd4\u5982tuples\u7684\u6570\u91cf\uff0c\u4e00\u4e2a\u5c5e\u6027\u4e0d\u540c\u53d6\u503c\u7684\u4e2a\u6570</li> <li>\u4e2d\u95f4\u7ed3\u679c\u7684\u6570\u91cf\uff0c\u7528\u4e8e\u590d\u6742\u8868\u8fbe\u5f0f\u7684\u4f18\u5316</li> <li>\u7b97\u6cd5\u7684\u6d88\u8017</li> <li>\u7b49\u4ef7\u8868\u8fbe\u5f0f\u7684\u89c4\u5219</li> <li>\u5408\u53d6\u9009\u62e9\u548c\u9009\u4e24\u6b21\u7b49\u4ef7\uff1a\\(\\sigma_{\\theta_1\\and\\theta_2}(E)=\\sigma_{\\theta_1}(\\sigma_{\\theta_2}(E))\\) </li> <li>\u9009\u62e9\u4e24\u6b21\u7684\u987a\u5e8f\u53ef\u4ee5\u4ea4\u6362\uff1b\\(\\sigma_{\\theta_1}(\\sigma_{\\theta_2}(E))=\\sigma_{\\theta_2}(\\sigma_{\\theta_1}(E))\\) </li> <li>\u5d4c\u5957\u7684\u6295\u5f71\u53ea\u9700\u8981\u770b\u6700\u5916\u5c42\u7684\uff1a\\(\\prod_{L_1}(\\prod_{L_2}(\\dots(E)))=\\prod_{L_1}(E)\\) </li> <li>\u9009\u62e9\u53ef\u4ee5\u53d8\u6210\u7b1b\u5361\u5c14\u79ef\u548ctheta join</li> </ul> </li> <li> <p>\\(\\sigma_{\\theta}(E_1\\times E_2)=E_1\\Join_{\\theta}E_2\\) </p> <ul> <li>\\(\\sigma_{\\theta_1}(E_1\\Join_{\\theta_2}E_2)=E_1\\Join_{\\theta_1\\and\\theta_2}E_2\\) </li> <li>Theta-join\u548c\u81ea\u7136\u8fde\u63a5\u53ef\u4ee5\u6539\u53d8\u8fde\u63a5\u7684\u4e24\u5f20\u8868\u7684\u987a\u5e8f\uff1a\\(E_1\\Join_{\\theta}E_2=E_2\\Join_{\\theta}E_1\\) </li> <li>\u81ea\u7136\u8fde\u63a5\u6ee1\u8db3\u7ed3\u5408\u5f8b\uff1a\\((E_1\\Join E_2)\\Join E_3=E_1\\Join (E_2\\Join E_3)\\) </li> <li>Theta-join\u7684\u7ed3\u5408\u89c4\u5219</li> </ul> </li> <li> <p>\\((E_1\\Join_{\\theta_1} E_2)\\Join_{\\theta_2\\and\\theta_3} E_3=E_1\\Join_{\\theta_1\\and\\theta_3} (E_2\\Join_{\\theta_2} E_3)\\) </p> <ul> <li>\u9009\u62e9\u64cd\u4f5c\u7684\u4f18\u5316</li> <li>\u5f53\\(\\theta_1\\) \u4e2d\u7684\u5c5e\u6027\u90fd\u53ea\u51fa\u73b0\u5728E1\u4e2d\u7684\u65f6\u5019\uff1a\\(\\sigma_{\\theta_1}(E_1\\Join_{\\theta_2}E_2)=\\sigma_{\\theta_1}(E_1)\\Join_{\\theta_2}E_2\\) </li> <li>\u5f53\\(\\theta_1,\\theta_2\\) \u5206\u522b\u53ea\u5305\u542bE1,E2\u4e2d\u7684\u5c5e\u6027\u65f6\uff1a\\(\\sigma_{\\theta_1\\and\\theta_2}(E_1\\Join_{\\theta}E_2)=\\sigma_{\\theta_1}(E_1)\\Join\\sigma_{\\theta_2}(E_2)\\) </li> <li>\u6295\u5f71\u64cd\u4f5c\u548cTheta-join\u7684\u6df7\u5408\u8fd0\u7b97</li> </ul> </li> <li> <p>\u5f53\u03b8\u53ea\u5305\u542b\\(L_1\\or L_2\\) \u4e2d\u7684\u5c5e\u6027\u7684\u65f6\u5019\uff1a\\(\\prod_{L_1\\or L_2}(E_1\\Join_{\\theta}E_2)=(\\prod_{L_1}(E_1))\\Join_{\\theta}(\\prod_{L_2}(E_2))\\) </p> <ul> <li>\u96c6\u5408\u8fd0\u7b97\u4e2d\u7684\u4ea4\u8fd0\u7b97\u548c\u5e76\u8fd0\u7b97\u6ee1\u8db3\u4ea4\u6362\u5f8b\u548c\u7ed3\u5408\u5f8b</li> <li>\u9009\u62e9\u64cd\u4f5c\u4e2d\u6709\u96c6\u5408\u7684\u8fd0\u7b97\u65f6\u6ee1\u8db3\u5206\u914d\u5f8b(\u6bd4\u5982\u8fdb\u884c\u5dee\u8fd0\u7b97\u518d\u9009\u62e9\u7b49\u4ef7\u4e8e\u5206\u522b\u9009\u62e9\u518d\u5dee\u8fd0\u7b97)</li> <li>\u6295\u5f71\u64cd\u4f5c\u4e2d\u6709\u5e76\u8fd0\u7b97\u65f6\u6ee1\u8db3\u5206\u914d\u5f8b</li> </ul> </li> <li>Join\u7684\u987a\u5e8f\u4f18\u5316\uff1a\u5f53\u6709\u82e5\u5e72\u5f20\u8868\u9700\u8981join\u7684\u65f6\u5019\uff0c\u5148\u4ecejoin\u540e\u6570\u636e\u91cf\u6700\u5c0f\u7684\u5f00\u59cb </li> <li>\u53ef\u4ee5\u901a\u8fc7\u5171\u4eab\u76f8\u540c\u7684\u5b50\u8868\u8fbe\u5f0f\u6765\u51cf\u5c11\u8868\u8fbe\u5f0f\u8f6c\u5316\u65f6\u7684\u7a7a\u95f4\u6d88\u8017\uff0c\u901a\u8fc7\u52a8\u6001\u89c4\u5212\u6765\u51cf\u5c11\u65f6\u95f4\u6d88\u8017</li> </ul>"},{"location":"ZJU_CS/Database/review/#442_cost","title":"4.4.2 cost\u7684\u4f30\u8ba1","text":"<ul> <li>\u57fa\u672c\u7684\u53d8\u91cf\u5b9a\u4e49</li> <li>\\(n_r\\) \u8868\u793a\u5173\u7cfbr\u4e2d\u5143\u7ec4\u7684\u6570\u91cf(\u4e5f\u5c31\u662f\u5173\u7cfbr\u7684size)</li> <li>\\(b_r\\) \u5305\u542br\u4e2d\u5143\u7ec4\u7684block\u6570\u91cf</li> <li>\\(l_r\\) r\u4e2d\u4e00\u4e2a\u5143\u7ec4\u7684size</li> <li>\\(f_r\\) block factor of r \u6bd4\u5982\u53ef\u4ee5\u9009\u53d6\u4e00\u4e2ablock\u80fd\u5bb9\u7eb3\u7684r\u4e2d\u5143\u7ec4\u7684\u5e73\u5747\u6570\u91cf</li> <li>V(A, r) \u5173\u7cfbr\u4e2d\u5c5e\u6027A\u53ef\u80fd\u53d6\u5230\u7684\u4e0d\u540c\u7684\u503c\u7684\u6570\u91cf</li> <li>\u5f53\u5173\u7cfbr\u4e2d\u7684\u5143\u7ec4\u90fd\u5b58\u50a8\u5728\u4e00\u4e2a\u6587\u4ef6\u4e2d\u7684\u65f6\u5019 \\(b_r=\\frac{n_r}{f_r}\\) </li> <li> <p>\u9009\u62e9\u7684\u4f30\u8ba1</p> </li> <li> <p>\u4ecer\u4e2d\u9009\u62e9A\u5c5e\u6027=x\u7684\\(cost = \\frac{n_r}{V(A,r)}\\) </p> </li> <li>\u9009\u62e9A\u5c5e\u6027\u5c0f\u4e8ex\u7684cost<ul> <li>\\(cost=0\\) if x &lt; min(A,r)</li> <li>\\(cost=n_r\\times \\frac{x-min(A,r)}{max(A,r)-min(A,r)}\\)</li> </ul> </li> <li>\u9009\u62e9A\u5c5e\u6027\u5927\u4e8ex\uff0c\u548c\u4e0a\u9762\u7684\u8868\u8fbe\u5f0f\u662f\u5bf9\u79f0\u7684</li> <li> <p>complex selection \u591a\u91cd\u9009\u62e9</p> </li> <li> <p>\u5047\u8bbe\\(s_i\\)\u662f\u6ee1\u8db3\u6761\u4ef6\\(\\theta_i\\)\u7684\u5143\u7ec4\u7684\u4e2a\u6570</p> </li> <li>conjunction \\(cost=n_r\\times\\frac{s_1\\times s_2\\times \u2026\\times s_n}{n_r^n}\\)</li> <li>disjunction  \\(cost=n_r\\times(1-(1-\\frac{s_1}{n_r})\\times\u2026\\times(1-\\frac{s_n}{n_r}))\\) </li> <li>negation \\(cost=n_r-size(\\delta_{\\theta}(r))\\) </li> <li> <p>join \u7684\u4f30\u8ba1</p> </li> <li> <p>\u7b1b\u5361\u5c14\u79ef\u7684\u60c5\u51b5\u4e0b\uff0c\u5173\u7cfbR,S\u7684join\u6700\u7ec8\u5143\u7ec4\u7684\u4e2a\u6570\u4e3a\\(n_r\\times n_s\\) </p> </li> <li>\u5982\u679cR\u2229S\u4e3a\u7a7a\uff0c\u5219\u81ea\u7136\u8fde\u63a5\u7684\u7ed3\u679c\u548c\u7b1b\u5361\u5c14\u79ef\u7684\u7ed3\u679c\u76f8\u540c</li> <li>\u5982\u679c\u975e\u7a7a\uff0c\u4e14R\u2229S\u662fR\u7684key\uff0c\u5219R,S\u7684\u81ea\u7136\u8fde\u63a5\u6700\u7ec8\u7ed3\u679c\u4e2d\u7684\u5143\u7ec4\u4e2a\u6570\u4e0d\u4f1a\u8d85\u8fc7r</li> <li>\u5982\u679cR\u2229S\u7684\u7ed3\u679c\u662fS\u5230R\u7684\u5916\u952e\uff0c\u5219\u6700\u540e\u7684\u5143\u7ec4\u6570\u548cs\u4e2d\u7684\u5143\u7ec4\u6570\u76f8\u540c</li> <li>\u4e00\u822c\u60c5\u51b5 \u81ea\u7136\u8fde\u63a5\u7684\u6700\u7ec8\u7ed3\u679c\u7684size\u4f30\u8ba1\u503c\u4e3a\\(\\frac{n_r\\times n_s}{max(V(A,r),V(A,s))}\\) </li> <li> <p>\u5176\u4ed6\u64cd\u4f5c\u7684\u4f30\u8ba1</p> </li> <li> <p>\u6295\u5f71\u7684size=V(A,r)</p> </li> <li> <p>\u805a\u5408\u64cd\u4f5c\u7684size=V(A,r)</p> </li> <li> <p>\u96c6\u5408\u64cd\u4f5c\uff1a\u6839\u636eDNA\u91cc\u7684\u9ad8\u4e2d\u6570\u5b66\u77e5\u8bc6\u81ea\u5df1\u7f16</p> </li> <li> <p>\u5916\u90e8\u8fde\u63a5\uff1a</p> <ul> <li>\u5de6\u5916\u8fde\u63a5\u7684size = \u81ea\u7136\u8fde\u63a5\u7684size + r\u7684size</li> <li>\u53f3\u5916\u8fde\u63a5\u7684size = \u81ea\u7136\u8fde\u63a5\u7684size + s\u7684size</li> <li>\u5168\u8fde\u63a5\u7684size = \u81ea\u7136\u8fde\u63a5\u7684size + r\u7684size + s \u7684size</li> </ul> </li> <li> <p>\u4e0d\u540c\u503c\u4e2a\u6570\u7684\u4f30\u8ba1</p> </li> <li>\u57fa\u4e8ecost\u7684join\u987a\u5e8f\u4f18\u5316</li> <li>n\u4e2a\u5173\u7cfb\u8fdb\u884c\u81ea\u7136\u8fde\u63a5\u6709\\(\\frac{(2n-2)!}{(n-1)!}\\)\u79cd\u4e0d\u540c\u7684join\u987a\u5e8f</li> <li>\u627e\u5230\u6700\u5408\u9002\u7684join-tree\u7684\u529e\u6cd5\uff1a\u9012\u5f52\u5730\u5c1d\u8bd5,\u5c40\u90e8\u641c\u7d22\u7684\u529e\u6cd5</li> <li>Left Deep Join Trees\u5de6\u503e\u6811\uff0c\u5f53\u7ed3\u5408\u65b9\u5f0f\u53ea\u8003\u8651\u5de6\u503e\u6811\u7684\u65f6\u5019\uff0c\u627e\u5230\u6700\u4f18\u89e3\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u662f\\(O(n2^n)\\) </li> <li>Heuristic Optimization \u63a2\u7d22\u5f0f\u7684\u4f18\u5316</li> <li>\u5c3d\u65e9\u8fdb\u884cselection</li> <li>\u5c3d\u65e9\u8fdb\u884cprojection</li> <li>\u9009\u62e9\u6700\u4e25\u683c\u7684selection\u548coperations\u64cd\u4f5c</li> <li>\u7528\u4e8e\u67e5\u8be2\u4f18\u5316\u7684\u7ed3\u6784</li> <li>pipelined evaluation plan</li> <li>optimization cost budget</li> <li>plan catching</li> </ul>"},{"location":"ZJU_CS/Database/review/#_5","title":"\u7b2c\u4e94\u90e8\u5206\uff1a\u4e8b\u52a1\u5904\u7406","text":"<ul> <li>\u8fd9\u4e00\u90e8\u5206\u611f\u89c9\u548c\u64cd\u4f5c\u7cfb\u7edf\u5173\u7cfb\u6bd4\u8f83\u5bc6\u5207</li> </ul>"},{"location":"ZJU_CS/Database/review/#51","title":"5.1 \u4e8b\u52a1\u548c\u5e76\u53d1\u63a7\u5236","text":""},{"location":"ZJU_CS/Database/review/#511","title":"5.1.1 \u57fa\u672c\u7684\u6982\u5ff5","text":"<ul> <li>\u4e8b\u52a1\u7684\u6982\u5ff5</li> <li>\u4e8b\u52a1\u65f6\u7a0b\u5e8f\u6267\u884c\u7684\u57fa\u672c\u5355\u4f4d\uff0c\u4f1a\u5f15\u8d77\u4e00\u4e9b\u6570\u636e\u9879\u7684\u66f4\u65b0\uff0c\u9700\u8981\u89e3\u51b3\u7684\u4e24\u4e2a\u95ee\u9898\uff1a<ul> <li>\u6570\u636e\u5e93\u7cfb\u7edf\u7684\u786c\u4ef6\u95ee\u9898\u548c\u7cfb\u7edf\u5954\u6e83</li> <li>\u591a\u4e8b\u52a1\u7684\u5e76\u884c\u6267\u884c</li> </ul> </li> <li>\u4e8b\u52a1\u5f00\u59cb\u548c\u7ed3\u675f\u7684\u65f6\u5019\u6570\u636e\u5e93\u90fd\u5fc5\u987b\u662fconsistent\u7684</li> <li> <p>\u4e8b\u7269\u7684\u56db\u4e2a\u6027\u8d28ACDI\uff1a</p> <ul> <li>\u4e8b\u52a1\u7684\u539f\u5b50\u6027 Atomicity</li> <li>\u4e8b\u52a1\u4e2d\u7684\u6240\u6709\u6b65\u9aa4\u53ea\u80fd\u5b8c\u5168\u6267\u884c(commit)\u6216\u8005\u56de\u6eda(rollback)</li> <li>\u4e8b\u52a1\u7684\u6301\u4e45\u6027 Durability</li> <li>\u66f4\u65b0\u4e4b\u540e\u54ea\u6015\u8f6f\u786c\u4ef6\u51fa\u4e86\u95ee\u9898\uff0c\u66f4\u65b0\u7684\u6570\u636e\u4e5f\u5fc5\u987b\u5b58\u5728</li> <li>\u4e8b\u52a1\u7684\u4e00\u81f4\u6027 Consistency</li> <li>\u5355\u72ec\u6267\u884c\u4e8b\u52a1\u53ef\u4ee5\u4fdd\u6301\u6570\u636e\u5e93\u7684\u4e00\u81f4\u6027</li> <li>\u4e8b\u52a1\u7684\u72ec\u7acb\u6027 Isolation </li> <li>\u4e8b\u52a1\u5728\u5e76\u884c\u6267\u884c\u7684\u65f6\u5019\u4e0d\u80fd\u611f\u77e5\u5230\u5176\u4ed6\u4e8b\u52a1\u6b63\u5728\u6267\u884c\uff0c\u6267\u884c\u4e2d\u95f4\u7ed3\u679c\u5bf9\u4e8e\u5176\u4ed6\u5e76\u53d1\u6267\u884c\u7684\u4e8b\u52a1\u662f\u9690\u85cf\u7684</li> </ul> </li> <li> <p>\u4e8b\u52a1\u7684\u72b6\u6001</p> </li> <li> <p>active \u521d\u59cb\u72b6\u6001\uff0c\u6267\u884c\u4e2d\u7684\u4e8b\u52a1\u90fd\u5904\u4e8e\u8fd9\u4e2a\u72b6\u6001</p> </li> <li>partially committed \u5728\u6700\u540e\u4e00\u53e5\u6307\u4ee4\u88ab\u6267\u884c\u4e4b\u540e</li> <li>failed \u5728\u53d1\u73b0\u6267\u884c\u5931\u8d25\u4e4b\u540e</li> <li>aborted \u56de\u6eda\u7ed3\u675f\uff0c\u4f1a\u9009\u62e9\u662f\u91cd\u65b0\u6267\u884c\u4e8b\u52a1\u8fd8\u662f\u7ed3\u675f</li> <li>committed \u4e8b\u52a1\u88ab\u5b8c\u6574\u7684\u6267\u884c</li> </ul>"},{"location":"ZJU_CS/Database/review/#512","title":"5.1.2 \u4e8b\u52a1\u7684\u5e76\u53d1\u6267\u884c","text":"<ul> <li>\u540c\u65f6\u6267\u884c\u591a\u4e2a\u4e8b\u52a1\uff0c\u53ef\u4ee5\u63d0\u9ad8\u8fd0\u884c\u7684\u6548\u7387\uff0c\u51cf\u5c11\u5e73\u5747\u6267\u884c\u65f6\u95f4</li> <li>\u5e76\u53d1\u63a7\u5236\u5904\u7406\u673a\u5236\uff1a\u8ba9\u5e76\u53d1\u7684\u4e8b\u52a1\u72ec\u7acb\u8fdb\u884c\uff0c\u63a7\u5236\u5e76\u53d1\u4e8b\u52a1\u4e4b\u95f4\u7684\u4ea4\u6d41</li> <li>Schedules \u8c03\u5ea6<ul> <li>\u4e00\u7cfb\u5217\u7528\u4e8e\u6307\u5b9a\u5e76\u53d1\u4e8b\u52a1\u7684\u6267\u884c\u987a\u5e8f\u7684\u6307\u4ee4</li> <li>\u9700\u8981\u5305\u542b\u4e8b\u52a1\u4e2d\u7684\u6240\u6709\u6307\u4ee4</li> <li>\u9700\u8981\u4fdd\u8bc1\u5355\u4e2a\u4e8b\u52a1\u4e2d\u7684\u6307\u4ee4\u7684\u76f8\u5bf9\u987a\u5e8f</li> <li>\u4e8b\u52a1\u7684\u6700\u540e\u4e00\u6b65</li> <li>\u6210\u529f\u6267\u884c\uff0c\u6700\u540e\u4e00\u6b65\u662fcommit instruction</li> <li>\u6267\u884c\u5931\u8d25\u6700\u540e\u4e00\u6b65\u662fabort instruction</li> <li>serial schedule \u4e32\u884c\u8c03\u5ea6\uff1a\u4e00\u4e2a\u4e8b\u52a1\u8c03\u5ea6\u5b8c\u6210\u4e4b\u540e\u518d\u8fdb\u884c\u4e0b\u4e00\u4e2a</li> <li>equivalent schedule \u7b49\u4ef7\u8c03\u5ea6\uff1a\u6539\u53d8\u5904\u7406\u7684\u987a\u5e8f\u4f46\u662f\u548c\u539f\u6765\u7b49\u4ef7</li> <li>Serializability\u53ef\u4e32\u884c\u5316</li> <li>\u57fa\u672c\u5047\u8bbe\uff1a\u4e8b\u52a1\u4e0d\u4f1a\u7834\u574f\u6570\u636e\u5e93\u7684\u4e00\u81f4\u6027\uff0c\u53ea\u8003\u8651\u8bfb\u5199\u4e24\u79cd\u64cd\u4f5c</li> <li>\u51b2\u7a81\u53ef\u4e32\u884c\u5316 conflict serializability<ul> <li>\u540c\u65f6\u8bfb\u4e0d\u5f15\u53d1\u51b2\u7a81\uff0c\u800c\u8bfb\u5199\u5e76\u884c\u6216\u8005\u540c\u65f6\u5199\u4f1a\u5f15\u53d1\u51b2\u7a81</li> <li>conflict equivalent\uff1a\u4e24\u4e2a\u8c03\u5ea6\u4e4b\u95f4\u53ef\u4ee5\u901a\u8fc7\u6539\u53d8\u4e00\u4e9b\u4e0d\u51b2\u7a81\u7684\u6307\u4ee4\u6765\u8f6c\u6362\uff0c\u5c31\u53eb\u505a\u51b2\u7a81\u7b49\u4ef7</li> <li>conflict serializable\uff1a\u51b2\u7a81\u53ef\u4e32\u884c\u5316\uff1a\u5f53\u4e14\u4ec5\u5f53\u4e00\u4e2a\u8c03\u5ea6S\u53ef\u4ee5\u548c\u4e00\u4e2a\u4e32\u884c\u8c03\u5ea6\u7b49\u4ef7</li> <li>Precedence graph  \u524d\u9a71\u56fe </li> <li>\u56fe\u4e2d\u7684\u9876\u70b9\u662f\u5404\u4e2a\u4e8b\u52a1\uff0c\u5f53\u4e8b\u52a1\\(T_i, T_j\\) \u51b2\u7a81\u5e76\u4e14\\(T_i\\) \u5148\u8bbf\u95ee\u51fa\u73b0\u51b2\u7a81\u7684\u6570\u636e\u7684\u65f6\u5019\uff0c\u5c31\u753b\u4e00\u6761\u8fb9\\(T_i\\rightarrow T_j\\) </li> <li>\u4e00\u4e2a\u8c03\u5ea6\u662f\u51b2\u7a81\u53ef\u4e32\u884c\u5316\u7684\u5f53\u4e14\u4ec5\u5f53\u524d\u9a71\u56fe\u662f\u65e0\u73af\u56fe</li> <li>\u5bf9\u4e8e\u65e0\u73af\u56fe\uff0c\u53ef\u4ee5\u4f7f\u7528\u62d3\u6251\u903b\u8f91\u6392\u5e8f\u83b7\u5f97\u4e00\u4e2a\u5408\u9002\u7684\u6267\u884c\u987a\u5e8f</li> </ul> </li> <li>Recoverable Schedules \u53ef\u6062\u590d\u8c03\u5ea6</li> <li>database must ensure that schedules are recoverable. \u4e0d\u7136\u4f1a\u51fa\u73b0dirty read</li> <li>\u5982\u679c\u4e00\u4e2a\u4e8b\u52a1\\(T_1\\)\u8981\u8bfb\u53d6\u67d0\u4e00\u90e8\u5206\u6570\u636e\uff0c\u800c\\(T_2\\)\u8981\u5199\u5165\u540c\u4e00\u90e8\u5206\u7684\u6570\u636e\uff0c\u5219\\(T_1\\)\u5fc5\u987b\u5728\\(T_2\\)commit\u4e4b\u524d\u5c31commit\uff0c\u5426\u5219\u5c31\u4f1a\u9020\u6210dirty read</li> <li>Cascading Rollbacks \u7ea7\u8054\u56de\u6eda</li> <li>\u5355\u4e2a\u4e8b\u52a1\u7684fail\u9020\u6210\u4e86\u4e00\u7cfb\u5217\u7684\u4e8b\u52a1\u56de\u6eda</li> <li>Cascadeless Schedules \u907f\u514d\u7ea7\u8054\u56de\u6eda\u7684\u8c03\u5ea6</li> <li>\u5bf9\u4e8e\u6bcf\u4e00\u7ec4\u4e8b\u52a1a\u548cb\u5e76\u4e14b\u9700\u8981\u8bfb\u5165\u4e00\u4e2aa\u5199\u5165\u7684\u6570\u636e\uff0c\u90a3\u4e48a\u5fc5\u987b\u5728b\u7684\u8bfb\u64cd\u4f5c\u5f00\u59cb\u4e4b\u524dcommit</li> <li>Cascadeless Schedules\u4e5f\u662f\u53ef\u6062\u590d\u7684\u8c03\u5ea6</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/review/#513_concurrency_control","title":"5.1.3 Concurrency Control \u5e76\u53d1\u63a7\u5236","text":"<ul> <li> <p>Lock-Based Protocols \u57fa\u4e8e\u9501\u7684\u534f\u8bae</p> </li> <li> <p>lock\u662f\u4e00\u79cd\u63a7\u5236\u5e76\u53d1\u8bbf\u95ee\u540c\u4e00\u6570\u636e\u9879\u7684\u673a\u5236</p> </li> <li> <p>\u4e24\u79cdlock mode </p> <ul> <li>exclusive(X) \uff1a\u8868\u793a\u6570\u636e\u9879\u53ef\u4ee5\u8bfb\u548c\u5199\uff0c\u7528lock-X\u8868\u793a</li> <li>shared(S) \uff1a\u8868\u793a\u6570\u636e\u9879\u53ea\u80fd\u8bfb\uff0c\u7528lock-S \u8868\u793a</li> </ul> </li> <li> <p>\u4e24\u4e2a\u4e8b\u52a1\u7684\u51b2\u7a81\u77e9\u9635\uff1a</p> S X S true flase X false false <ul> <li>\u5982\u679c\u8bf7\u6c42\u7684\u9501\u548c\u5176\u4ed6\u4e8b\u52a1\u5bf9\u8fd9\u4e2a\u6570\u636e\u9879\u5df2\u7ecf\u6709\u7684\u9501\u4e0d\u51b2\u7a81\uff0c\u90a3\u4e48\u5c31\u53ef\u4ee5\u7ed9\u4e00\u4e2a\u4e8b\u52a1\u6279\u51c6\u4e00\u4e2a\u9501</li> <li>\u5bf9\u4e8e\u4e00\u4e2a\u6570\u636e\u9879\uff0c\u53ef\u4ee5\u6709\u4efb\u610f\u591a\u7684\u4e8b\u52a1\u6301\u6709S\u9501\uff0c\u4f46\u662f\u5982\u679c\u6709\u4e00\u4e2a\u4e8b\u52a1\u6301\u6709X\u9501\uff0c\u5176\u4ed6\u7684\u4e8b\u52a1\u90fd\u4e0d\u53ef\u4ee5\u6301\u6709\u8fd9\u4e2a\u6570\u636e\u9879\u7684\u9501</li> <li>\u5982\u679c\u4e00\u4e2a\u9501\u6ca1\u6709\u88ab\u6279\u51c6\uff0c\u5c31\u4f1a\u4ea7\u751f\u4e00\u4e2a\u8bf7\u6c42\u4e8b\u52a1\uff0c\u7b49\u5230\u6240\u6709\u51b2\u7a81\u7684\u9501\u88abrelease\u4e4b\u540e\u518d\u7533\u8bf7 </li> </ul> </li> <li> <p>\u9501\u534f\u8bae\u4e2d\u7684\u7279\u6b8a\u60c5\u51b5</p> </li> <li> <p>dead lock \u6b7b\u9501\uff1a\u4e24\u4e2a\u4e8b\u52a1\u4e2d\u7684\u9501\u4e92\u76f8\u7b49\u5f85\u9020\u6210\u4e8b\u52a1\u65e0\u6cd5\u6267\u884c\uff0c\u6bd4\u5982\u4e8b\u52a12\u7684\u9501\u9700\u8981\u4e8b\u52a11\u5148release\uff0c\u4f46\u662f\u4e8b\u52a11\u7684release\u6b65\u9aa4\u518d\u4e8b\u52a12\u7684\u7533\u8bf7\u9501\u540e\u9762\uff0c\u5c31\u4f1a\u9020\u6210\u4e8b\u52a112\u7684\u6b7b\u9501</p> </li> <li> <p>Starvation \u9965\u8352\uff1a\u4e00\u4e2a\u4e8b\u52a1\u5728\u7b49\u4e00\u4e2a\u6570\u636e\u9879\u7684Xlock\uff0c\u4e00\u7fa4\u522b\u7684\u4e8b\u52a1\u5728\u7b49\u4ed6release\uff0c\u9020\u6210\u9965\u8352</p> </li> <li> <p>Two-Parse Locking Protocol \u4e8c\u9636\u6bb5\u9501\u534f\u8bae\uff1a\u786e\u4fdd\u51b2\u7a81\u53ef\u4e32\u884c\u5316\u7684\u8c03\u5ea6</p> </li> <li> <p>\u4e24\u4e2a\u9636\u6bb5 growing\u548cshrinking\uff0cgrowing\u53ea\u63a5\u53d7\u9501\u800c\u4e0d\u91ca\u653e\uff0cshrinking\u53cd\u4e4b</p> </li> <li>\u65e0\u6cd5\u89e3\u51b3\u6b7b\u9501\u7684\u95ee\u9898</li> <li>strict two-phase locking<ul> <li>\u6bcf\u4e2a\u4e8b\u52a1\u90fd\u8981\u4fdd\u6301\u6240\u6709\u7684exclusive\u9501\u76f4\u5230\u7ed3\u675f</li> <li>\u4e3a\u4e86\u89e3\u51b3\u7ea7\u8054\u56de\u6eda\u7684\u95ee\u9898</li> </ul> </li> <li> <p>Rigorous two-phase locking </p> <ul> <li>\u6240\u6709\u7684\u9501\u5fc5\u987b\u4fdd\u6301\u5230\u4e8b\u52a1commit\u6216\u8005abort</li> </ul> </li> <li> <p>Lock Conversions\u9501\u8f6c\u6362\uff1a\u63d0\u4f9b\u4e86\u4e00\u79cd\u5c06S\u9501\u5347\u7ea7\u4e3aX\u9501\u7684\u673a\u5236</p> </li> <li> <p>\u4e24\u4e2a\u9636\u6bb5</p> <ul> <li>\u7b2c\u4e00\u4e2a\u9636\u6bb5\u53ef\u4ee5\u8bbe\u7f6eS\u548cX\u9501\uff0c\u4e5f\u53ef\u4ee5\u5347\u7ea7S\u9501</li> <li>\u7b2c\u4e8c\u4e2a\u9636\u6bb5\u53ef\u4ee5\u91ca\u653eS\u548cX\u9501\uff0c\u4e5f\u53ef\u4ee5\u964d\u7ea7X\u9501</li> </ul> </li> <li>\u4e8b\u52a1\u4e0d\u9700\u8981\u663e\u5f0f\u8c03\u7528\u6240\u5f97\u8bf7\u6c42\uff0c\u6bd4\u5982read\u548cwrite\u7684\u6267\u884c\u8fc7\u7a0b\u5982\u4e0b<ul> <li>\u6240\u6709\u7684\u9501\u5728\u4e8b\u52a1commit\u6216\u8005abort\u4e4b\u540e\u518d\u88ab\u91ca\u653e</li> </ul> </li> </ul> <pre><code>if Ti has a lock on D\n  then read(D) \nelse\n  begin \n      if necessary wait until no other  \n      transaction has a lock-X on D\n      grant Ti a  lock-S on D;\n      read(D)\n  end\n</code></pre> <pre><code>if Ti has a  lock-X on D \n    then \n          write(D)\nelse\n    begin\n      if necessary wait until no other trans. has any lock on D,\n        if Ti has a lock-S on D\n          then\n              upgrade lock on D  to lock-X\n          else\n              grant Ti a lock-X on D\n          write(D)\n    end;\n</code></pre> <ul> <li> <p>\u9501\u7684\u5b9e\u73b0\uff1aLock Manager\u53ef\u4ee5\u88ab\u4f5c\u4e3a\u4e00\u4e2a\u72ec\u7acb\u7684\u8fdb\u7a0b\u6765\u63a5\u6536\u4e8b\u52a1\u53d1\u51fa\u7684\u9501\u548c\u89e3\u9501\u8bf7\u6c42</p> </li> <li> <p>Lock Manager\u4f1a\u56de\u590d\u7533\u8bf7\u9501\u7684\u8bf7\u6c42</p> </li> <li>\u53d1\u51fa\u8bf7\u6c42\u7684\u4e8b\u52a1\u4f1a\u7b49\u5f85\u8bf7\u6c42\u88ab\u56de\u590d\u518d\u7ee7\u7eed\u5904\u7406</li> <li> <p>lock manager\u7ef4\u62a4\u4e00\u4e2a\u5185\u5b58\u4e2d\u7684\u6570\u636e\u7ed3\u6784lock-table\u6765\u8bb0\u5f55\u5df2\u7ecf\u53d1\u51fa\u7684\u6279\u51c6</p> <ul> <li>Lock table \u662f\u4e00\u4e2ain-memory\u7684hash\u8868</li> <li>\u901a\u8fc7\u88ab\u4e0a\u9501\u7684\u6570\u636e\u9879\u4f5c\u4e3a\u7d22\u5f15\uff0c\u9ed1\u6846\u4ee3\u8868\u4e0a\u9501\uff0c\u800c\u767d\u6846\u8868\u793a\u5728\u7b49\u5f85</li> <li>\u65b0\u7684\u4e0a\u9501\u8bf7\u6c42\u88ab\u653e\u5728\u961f\u5217\u7684\u672b\u7aef\uff0c\u5e76\u4e14\u5728\u548c\u5176\u4ed6\u9501\u517c\u5bb9\u7684\u65f6\u5019\u4f1a\u88ab\u6388\u6743\u4e0a\u9501</li> <li>\u89e3\u9501\u7684\u8bf7\u6c42\u4f1a\u5220\u9664\u5bf9\u5e94\u7684\u8bf7\u6c42\uff0c\u68c0\u67e5\u540e\u9762\u7684\u8bf7\u6c42\u662f\u5426\u53ef\u4ee5\u88ab\u6388\u6743</li> <li>\u5982\u679c\u4e00\u4e2a\u4e8b\u52a1aborts\u4e86\uff0c\u6240\u6709\u8be5\u4e8b\u52a1\u7684\u8bf7\u6c42\u90fd\u4f1a\u88ab\u5220\u9664</li> <li>lock-manager\u4f1a\u7ef4\u62a4\u4e00\u4e2a\u8bb0\u5f55\u6bcf\u4e2a\u4e8b\u52a1\u4e0a\u9501\u60c5\u51b5\u7684\u8868\u6765\u63d0\u9ad8\u64cd\u4f5c\u7684\u6548\u7387</li> </ul> </li> <li> <p>Deadlock prevention protocols \u6b7b\u9501\u4fdd\u62a4\u534f\u8bae\uff0c\u4fdd\u8bc1\u7cfb\u7edf\u4e0d\u4f1a\u8fdb\u5165\u6b7b\u9501</p> <ul> <li>predeclaration \u6267\u884c\u4e4b\u524d\u5148\u68c0\u67e5\u4f1a\u4e0d\u4f1a\u51fa\u73b0\u6b7b\u9501\uff0c\u4fdd\u8bc1\u4e00\u4e2a\u4e8b\u52a1\u5f00\u59cb\u6267\u884c\u4e4b\u524d\u5bf9\u6d89\u53ca\u5230\u7684\u6240\u6709\u7684\u6570\u636e\u9879\u90fd\u4e0a\u9501</li> <li>graph-based protocol\uff1a\u4f7f\u7528\u504f\u5e8f\u6765\u786e\u5b9a\u6570\u636e\u9879\u4e0a\u9501\u7684\u987a\u5e8f</li> <li>wait-die scheme \u88ab\u52a8</li> <li>\u8001\u7684\u4e8b\u52a1\u7b49\u5f85\u65b0\u4e8b\u52a1\u91ca\u653e\uff0c\u4f46\u662f\u65b0\u7684\u4e8b\u52a1\u4e0d\u7b49\u8001\u7684\u800c\u662f\u76f4\u63a5\u56de\u6eda</li> <li>wound-wait scheme  \u4e3b\u52a8</li> <li>\u8001\u7684\u4e8b\u52a1\u5f3a\u5236\u8ba9\u65b0\u7684\u4e8b\u52a1\u56de\u6eda\u800c\u4e0d\u7b49\u5f85\u5176\u91ca\u653e\uff0c\u65b0\u7684\u4e8b\u52a1\u4f1a\u7b49\u8001\u7684\u4e8b\u52a1\u7ed3\u675f</li> <li>Timeout-Based Schemes</li> <li>\u53ea\u7b49\u5f85\u4e00\u6bb5\u65f6\u95f4\uff0c\u8fc7\u4e86\u65f6\u95f4\u5c31\u56de\u6eda</li> <li>\u5bb9\u6613\u5b9e\u73b0\uff0c\u4f46\u662f\u4f1a\u5bfc\u81f4starvation</li> </ul> </li> <li> <p>Deadlock Detection \u6b7b\u9501\u68c0\u6d4b</p> <ul> <li>wait-for \u56fe: \u6240\u6709\u7684\u4e8b\u52a1\u8868\u793a\u56fe\u4e2d\u7684\u70b9\uff0c\u5982\u679c\u4e8b\u52a1i\u9700\u8981j\u91ca\u653e\u4e00\u4e2adata item\u5219\u56fe\u4e2d\u753b\u4e00\u6761\u70b9i\u5230\u70b9j\u7684\u6709\u5411\u8fb9\uff0c\u5982\u679c\u56fe\u4e2d\u6709\u73af\uff0c\u8bf4\u660e\u7cfb\u7edf\u5b58\u5728\u4e00\u4e2a\u6b7b\u9501\u2014\u2014\u8ddf\u524d\u9a71\u56fe\u5f88\u76f8\u4f3c</li> <li>\u6b7b\u9501\u6062\u590d</li> <li>total rollback \u5c06\u4e8b\u52a1abort\u4e4b\u540e\u91cd\u542f</li> <li>partial rollback \u4e0d\u76f4\u63a5abort\u800c\u5b9e\u4ec5\u56de\u6eda\u5230\u80fd\u89e3\u9664\u6b7b\u9501\u7684\u72b6\u6001</li> <li>\u540c\u4e00\u4e2a\u4e8b\u52a1\u7ecf\u5e38\u53d1\u751f\u6b7b\u9501\u4f1a\u5bfc\u81f4starvation\uff0c\u56e0\u6b64\u907f\u514dstarvation\u7684\u8fc7\u7a0b\u4e2dcost\u8981\u8003\u8651\u56de\u6eda\u7684\u6b21\u6570</li> </ul> </li> <li> <p>Multiple Granularity \u591a\u7c92\u5ea6</p> </li> <li> <p>\u5141\u8bb8\u6570\u636e\u9879\u5177\u6709\u4e0d\u540c\u7684\u5927\u5c0f\uff0c\u5e76\u5b9a\u4e49\u6570\u636e\u7c92\u5ea6\u7684\u5c42\u6b21\u7ed3\u6784\uff0c\u5176\u4e2d\u5c0f\u7c92\u5ea6\u5d4c\u5957\u5728\u5927\u7c92\u5ea6\u4e2d</p> </li> <li> <p>\u53ef\u4ee5\u7528\u6811\u5f62\u7ed3\u6784\u6765\u8868\u793a</p> </li> <li> <p>\u9501\u7684\u7c92\u5ea6 (level in tree where locking is done)</p> <ul> <li>fine granularity(lower in tree) \u9ad8\u5e76\u53d1\uff0c\u9ad8\u5f00\u9500</li> <li> <p>coarse granularity(higher in tree) \u4f4e\u5e76\u53d1\uff0c\u4f4e\u5f00\u9500</p> </li> <li> <p>\u6700\u9ad8\u7b49\u7ea7\u7684\u662f\u6574\u4e2aDB</p> </li> <li>\u6700\u4f4e\u7b49\u7ea7\u7684\u662f\u533a\u57df\uff0c\u6587\u4ef6\u548c\u8bb0\u5f55</li> </ul> </li> <li> <p>\u6269\u5c55\u7684Lock Modes</p> </li> <li> <p>intention-shared (IS): indicates explicit locking at a lower level of the tree but only with shared locks.</p> </li> <li>intention-exclusive (IX): indicates explicit locking at a lower level with exclusive or shared locks</li> <li> <p>shared and intention-exclusive (SIX): the subtree rooted by that node is locked explicitly in shared mode and explicit locking is being done at a lower level with exclusive-mode locks.</p> </li> <li> <p>\u8fd9\u90e8\u5206\u611f\u89c9\u4e0d\u592a\u50cf\u4f1a\u8003\u7684\u6837\u5b50\uff0c\u5148\u4e0d\u7ba1\u4e86</p> </li> </ul>"},{"location":"ZJU_CS/Database/review/#52_recovery_system","title":"5.2 Recovery System \u4e8b\u52a1\u6062\u590d","text":"<ul> <li>\u6545\u969c\u7684\u5206\u7c7b</li> <li>Transaction failure \u4e8b\u52a1\u9519\u8bef\uff1a\u5305\u542b\u903b\u8f91\u9519\u8bef\u548c\u7cfb\u7edf\u9519\u8bef\uff0c\u6b7b\u9501\u5c5e\u4e8e\u7cfb\u7edf\u9519\u8bef</li> <li>System crash \u7cfb\u7edf\u5d29\u6e83\u5bfc\u81f4\u7684\u6545\u969c(\u78c1\u76d8\u6ca1\u51fa\u4e8b)</li> <li> <p>Disk failure \u78c1\u76d8\u4e2d\u7684\u95ee\u9898\u5bfc\u81f4\u78c1\u76d8\u5b58\u50a8\u88ab\u9500\u6bc1</p> </li> <li> <p>\u6062\u590d\u7b97\u6cd5\uff1a\u4fdd\u6301\u6570\u636e\u5e93\u7684\u4e00\u81f4\u6027\uff0c\u4e8b\u52a1\u7684\u539f\u5b50\u6027\u548c\u6301\u4e45\u6027</p> </li> <li>\u5728\u666e\u901a\u4e8b\u52a1\u5904\u7406\u4e2d\u8981\u4fdd\u8bc1\u6709\u8db3\u591f\u7684\u4fe1\u606f\u4fdd\u8bc1\u53ef\u4ee5\u4ece\u6545\u969c\u4e2d\u6062\u590d</li> <li> <p>\u5728\u6545\u969c\u53d1\u751f\u4e4b\u540e\u8981\u4fdd\u6301\u6570\u636e\u5e93\u7684\u4e00\u81f4\u6027\uff0c\u4e8b\u52a1\u7684\u539f\u5b50\u6027\u548c\u6301\u4e45\u6027</p> </li> <li> <p>Data Access \u6570\u636e\u8bbf\u95ee\u56de\u987e</p> </li> <li> <p>\u7269\u7406block\u662f\u78c1\u76d8\u4e0a\u7684\u533a\u5206</p> </li> <li>\u7f13\u51b2block\u662f\u5728\u4e3b\u5b58\u4e2d\u7684block</li> <li>\u78c1\u76d8\u548c\u4e3b\u5b58\u4e4b\u95f4\u7684\u6570\u636e\u79fb\u52a8\u4f9d\u8d56input\u548coutput\u64cd\u4f5c</li> <li> <p>\u6bcf\u4e2a\u4e8b\u52a1\\(T_i\\) \u5728\u5185\u5b58\u4e2d\u6709\u81ea\u5df1\u7684work-area\uff0c\u5e76\u4e14\u62f7\u8d1d\u4e86\u4e00\u4efd\u8be5\u4e8b\u52a1\u8981\u7528\u5230\u7684\u5168\u90e8\u6570\u636e</p> </li> <li> <p>\u4e8b\u52a1\u901a\u8fc7read\u548cwrite\u64cd\u4f5c\u628a\u6570\u636e\u5728\u81ea\u5df1\u7684\u5de5\u4f5c\u533a\u57df\u548cbuffer blocks\u533a\u95f4\u4e4b\u95f4\u8fdb\u884c\u4f20\u9012</p> </li> <li> <p>\u5982\u4f55\u5728\u4e8b\u52a1failure\u7684\u60c5\u51b5\u4e0b\u4ecd\u7136\u4fdd\u8bc1\u539f\u5b50\u6027</p> </li> <li>\u5148\u628a\u6570\u636e\u5b58\u50a8\u5728\u78c1\u76d8\u4e0a\uff0c\u800c\u4e0d\u662f\u76f4\u63a5\u5b58\u5230\u6570\u636e\u5e93\u4e2d</li> <li>\u7136\u540e\u5728\u63d0\u4ea4\u70b9\u5bf9\u6570\u636e\u5e93\u8fdb\u884c\u4fee\u6539\uff0c\u5982\u679c\u53d1\u751f\u9519\u8bef\u5c31\u7acb\u9a6c\u56de\u6eda<ul> <li>\u4f46\u8fd9\u4e2a\u65b9\u6cd5\u6548\u7387\u592a\u4f4e\u4e86\uff0c\u662f\u4e16\u4e0a\u6ca1\u6709\u88ab\u91c7\u7528</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/review/#521_log-based_recovery","title":"5.2.1 log-based Recovery\u57fa\u4e8e\u65e5\u5fd7\u7684\u6062\u590d","text":"<ul> <li>\u65e5\u5fd7(log)\u88ab\u5b58\u50a8\u5728\u7a33\u5b9a\u7684\u5b58\u50a8\u4e2d\uff0c\u5305\u542b\u4e00\u7cfb\u5217\u7684\u65e5\u5fd7\u8bb0\u5f55</li> <li>\u4e8b\u52a1\u5f00\u59cb<code>&lt;T start&gt;</code></li> <li>\u5199\u64cd\u4f5c\u4e4b\u524d\u4e4b\u524d\u7684\u65e5\u5fd7\u8bb0\u5f55<code>&lt;Ti,X,V1,V2&gt;</code>(X)\u662f\u5199\u7684\u4f4d\u7f6e\uff0cV1\uff0cV2\u5206\u522b\u662f\u5199\u4e4b\u524d\u548c\u4e4b\u540e\u7684X\u5904\u7684\u503c</li> <li> <p>\u4e8b\u52a1\u7ed3\u675f\u7684\u65f6\u5019\u5199\u5165<code>&lt;Ti commit&gt;</code></p> </li> <li> <p>\u66f4\u65b0\u4e8b\u52a1\u5bfc\u81f4\u7684\u4e0d\u4e00\u81f4\u6027</p> </li> <li>\u65b0\u7684\u6570\u636e\u5728\u63d0\u4ea4\u7684\u65f6\u5019\u4e0d\u4e00\u5b9a\u662f\u5b89\u5168\u7684\uff1a\u9519\u8bef\u53d1\u751f\u65f6\u96be\u4ee5\u4fdd\u62a4\u6539\u53d8\u540e\u7684\u503c\u4e0d\u53d8</li> <li>\u65e7\u7684\u6570\u636e\u5728\u63d0\u4ea4\u4e4b\u524d\u4e0d\u4e00\u5b9a\u662f\u5b89\u5168\u7684\uff1a\u5728commit\u4e4b\u524d\u53d1\u751f\u9519\u8bef\u5c06\u65e0\u6cd5\u56de\u6eda\u5230\u539f\u6765\u7684\u503c</li> <li>\u5bf9\u4e8e\u66f4\u65b0\u4e8b\u52a1\u7684\u4e24\u6761\u89c4\u5219<ul> <li>commit rule\uff1a\u65b0\u7684\u6570\u636e\u5728commit\u4e4b\u524d\u5fc5\u987b\u88ab\u5199\u5728\u975e\u6613\u5931\u6027\u7684\u5b58\u50a8\u5668\u4e2d</li> <li>logging rule\uff1a\u65e7\u7684\u503c\u5728\u65b0\u7684\u5199\u5165\u4e4b\u524d\u9700\u8981\u88ab\u5199\u5728\u65e5\u5fd7\u91cc</li> </ul> </li> <li> <p>\u65e5\u5fd7\u4e2d\u5199\u5165commit\u7684\u65f6\u5019\u89c6\u4e3a\u4e00\u4e2a\u4e8b\u52a1\u88ab\u63d0\u4ea4\u4e86\uff0c\u4f46\u6b64\u65f6buffer\u4e2d\u53ef\u80fd\u8fd8\u5728\u8fdb\u884cwrite\u64cd\u4f5c\uff0c\u56e0\u4e3alog\u7684\u5199\u5165\u5148\u4e8e\u64cd\u4f5c</p> </li> <li> <p>deferred database modification \u5ef6\u8fdf\u6570\u636e\u5e93\u66f4\u65b0\uff1a\u5148\u628a\u6240\u6709\u7684\u66f4\u65b0\u5199\u5728\u65e5\u5fd7\u91cc\uff0c\u5728\u5199\u5165commit\u4e4b\u540e\u518d\u5f00\u59cb\u5199\u5165\u6570\u636e\u5e93</p> </li> <li> <p>\u5047\u8bbe\u4e8b\u52a1\u662f\u4e32\u884c\u6267\u884c\u7684</p> </li> <li>\u4e8b\u52a1\u5f00\u59cb\u7684\u65f6\u5019\u8981\u5199\u5165<code>&lt;Ti start&gt;</code> </li> <li>write(X) \u64cd\u4f5c\u5bf9\u5e94\u7684\u65e5\u5fd7\u662f <code>&lt;Ti, X, V&gt;</code> \uff0cV\u8868\u793aX\u65b0\u7684\u503c</li> <li>\u4e8b\u52a1partially commits\u7684\u65f6\u5019\u9700\u8981\u5199\u5165commit</li> <li> <p>\u7136\u540e\u6839\u636e\u65e5\u5fd7\u6765\u5b9e\u9645\u6267\u884c\u4e00\u4e9bwrite\u7684\u64cd\u4f5c</p> <ul> <li>\u5f53\u9519\u8bef\u53d1\u751f\u65f6\uff0c\u5f53\u4e14\u4ec5\u5f53\u65e5\u5fd7\u4e2dstart\u548ccommit\u90fd\u6709\u7684\u65f6\u5019\uff0c\u4e8b\u52a1\u9700\u8981redo</li> </ul> </li> <li> <p>immediate database modification \u76f4\u63a5\u4fee\u6539\u6570\u636e\u5e93</p> </li> <li> <p>\u5148\u8981\u5199\u597d\u65e5\u5fd7\u8bb0\u5f55\uff0c\u5047\u8bbe\u65e5\u5fd7\u8bb0\u5f55\u76f4\u63a5output\u5230\u7a33\u5b9a\u7684\u5b58\u50a8\u4e2d</p> </li> <li> <p>block\u7684\u8f93\u51fa\u53ef\u4ee5\u53d1\u751f\u5728\u4efb\u4f55\u65f6\u95f4\u70b9\uff0c\u5305\u62ec\u4e8b\u52a1commit\u524d\u548ccommit\u540e\uff0cblock\u8f93\u51fa\u7684\u987a\u5e8f\u548cwrite\u7684\u987a\u5e8f\u4e0d\u4e00\u5b9a\u76f8\u540c</p> </li> <li> <p>\u6062\u590d\u7684\u8fc7\u7a0b\u4e2d\u6709\u4e24\u79cd\u64cd\u4f5c</p> <ul> <li>undo\uff1a\u64a4\u56de\uff0c\u5c06\u4e8b\u52a1\\(T_i\\) \u4e2d\u5df2\u7ecf\u66f4\u65b0\u7684\u503c\u53d8\u56de\u539f\u672c\u7684\u503c</li> <li>redo\uff1a\u4ece\u4e8b\u52a1\\(T_i\\) \u7684\u7b2c\u4e00\u6b65\u5f00\u59cb\u91cd\u65b0\u505a\uff0c\u5c06\u6240\u6709\u503c\u8bbe\u5b9a\u4e3a\u65b0\u7684\u503c</li> <li>\u4e24\u79cd\u64cd\u4f5c\u90fd\u9700\u8981idempotent\u2014\u2014\u4e5f\u5c31\u662f\u64cd\u4f5c\u6267\u884c\u591a\u6b21\u548c\u6267\u884c\u4e00\u6b21\u7684\u6548\u679c\u76f8\u540c</li> <li>undo\u7684\u6761\u4ef6\uff1a\u65e5\u5fd7\u4e2d\u5305\u542b\u8fd9\u4e2a\u4e8b\u52a1\u7684start\u800c\u4e0d\u5305\u542bcommit\uff0c\u5373\u4e8b\u52a1\u8fdb\u884c\u5230\u4e00\u534a\u4e2d\u65ad\u4e86</li> <li>redo\u7684\u6761\u4ef6\uff1a\u65e5\u5fd7\u4e2d\u5305\u542b\u8fd9\u4e2a\u4e8b\u52a1\u7684start\u548ccommit</li> </ul> </li> <li> <p>\u5e76\u884c\u63a7\u5236\u548c\u6062\u590d</p> </li> <li> <p>\u6240\u6709\u4e8b\u52a1\u5171\u7528\u4e00\u4e2a\u65e5\u5fd7\u548cdisk buffer</p> </li> <li>\u57fa\u672c\u7684\u5047\u8bbe<ul> <li>\u5982\u679c\u4e00\u4e2a\u4e8b\u52a1\u6539\u53d8\u4e86\u67d0\u4e2a\u6570\u636e\u9879\uff0c\u5176\u4ed6\u7684\u4e8b\u52a1\u76f4\u5230\u8fd9\u4e2a\u4e8b\u52a1commit\u6216\u8005abort\u4e4b\u524d\u90fd\u4e0d\u80fd\u6539\u53d8\u8fd9\u4e2a\u6570\u636e\u9879\u7684\u503c</li> <li>\u6ca1\u6709commited\u7684\u4e8b\u52a1\u5f15\u8d77\u7684\u66f4\u65b0\u4e0d\u80fd\u88ab\u5176\u4ed6\u4e8b\u52a1\u66f4\u65b0</li> </ul> </li> <li> <p>\u65e5\u5fd7\u4e2d\u4e0d\u540c\u4e8b\u52a1\u7684\u65e5\u5fd7\u53ef\u80fd\u4f1a\u76f8\u4ea4</p> </li> <li> <p>check point</p> </li> <li> <p>\u901a\u8fc7\u5b9a\u671f\u6267\u884ccheckpoint\u64cd\u4f5c\u6765\u5b8c\u6210\u7b80\u5316\u7684\u6062\u590d</p> <p>1.\u5c06\u5185\u5b58\u4e2d\u7684\u8bb0\u5f55\u90fd\u5199\u5230\u7a33\u5b9a\u7684\u5b58\u50a8\u4e2d</p> <p>2.\u5c06\u6240\u6709\u66f4\u6539\u8fc7\u7684block\u5199\u5165\u78c1\u76d8\u4e2d</p> <p>3.\u5199\u5165\u65e5\u5fd7\u8bb0\u5f55&lt; checkpoint L&gt; \uff0c\u5176\u4e2dL\u662f\u4e00\u4e2a\u5728checkpoint\u65f6\u4f9d\u7136\u5904\u4e8e\u8fdb\u884c\u72b6\u6001\u7684\u4e8b\u52a1</p> </li> <li> <p>\u901a\u8fc7checkpoint\uff0c\u5728\u65e5\u5fd7\u5904\u7406\u7684\u65f6\u5019\u5c31\u4e0d\u9700\u8981\u5904\u7406\u6240\u6709\u7684\u65e5\u5fd7\uff0c\u53ea\u9700\u8981\u5173\u6ce8\u5f02\u5e38\u65f6\u6b63\u5728\u6d3b\u8dc3\u7684\u4e8b\u52a1\uff0c\u6062\u590d\u7684\u6b65\u9aa4\u5982\u4e0b</p> <ul> <li>\u4ece\u65e5\u5fd7\u7684\u672b\u5c3e\u5411\u524d\u626b\u63cf\uff0c\u76f4\u5230\u53d1\u73b0\u6700\u8fd1\u7684checkpoint\u8bb0\u5f55</li> <li>\u53ea\u6709L\u4e2d\u8bb0\u5f55\u7684\uff0c\u6216\u8005\u5728L\u4e4b\u540e\u53d1\u751f\u7684\u4e8b\u52a1\u9700\u8981redo\u6216\u8005undo</li> <li>checkpoint\u4e4b\u524d\u7684\u8bb0\u5f55\u5df2\u7ecf\u751f\u6548\u5e76\u4fdd\u5b58\u5728\u4e86\u7a33\u5b9a\u7684\u5b58\u50a8\u4e2d</li> </ul> </li> <li> <p>\u65e5\u5fd7\u4e2d\u66f4\u65e9\u7684\u90e8\u5206\u6216\u8bb8\u9700\u8981undo\uff0c\u4f46\u4e00\u5b9a\u4e0d\u9700\u8981redo</p> <ul> <li>\u7ee7\u7eed\u5411\u524d\u626b\u63cf\u76f4\u5230\u53d1\u73b0\u4e00\u4e2a\u4e8b\u52a1\u7684start\u65e5\u5fd7</li> <li>\u6700\u65e9\u7684start\u4e4b\u524d\u7684\u65e5\u5fd7\u4e0d\u9700\u8981\u8fdb\u884c\u6062\u590d\u64cd\u4f5c\uff0c\u5e76\u4e14\u53ef\u4ee5\u6e05\u9664</li> </ul> </li> </ul> <p></p> <ul> <li> <p>\u5728\u4e0a\u9762\u8fd9\u4e2a\u56fe\u4e2d T1 ignored\uff0cT2\uff0cT3\u9700\u8981redo\uff0cT4 undo</p> </li> <li> <p>\u6062\u590d\u7b97\u6cd5</p> </li> <li> <p>\u5355\u4e2a\u4e8b\u52a1\u56de\u6eda\u65f6\u7684\u57fa\u672c\u64cd\u4f5c</p> <ul> <li>\u4ece\u540e\u5f80\u524d\u626b\u63cf\uff0c\u5f53\u53d1\u73b0\u8bb0\u5f55\\(&lt;T_i,X_i,V_1,V_2&gt;\\) \u7684\u65f6\u5019</li> <li>\u5c06X\u7684\u503c\u4fee\u6539\u4e3a\u539f\u672c\u7684\u503c</li> <li>\u5728\u65e5\u5fd7\u7684\u672b\u5c3e\u5199\u5165\u8bb0\u5f55\\(&lt;T_i,X_i,V_1&gt;\\) </li> <li>\u53d1\u73b0start\u8bb0\u5f55\u7684\u65f6\u5019\uff0c\u505c\u6b62\u626b\u63cf\u5e76\u5728\u65e5\u5fd7\u4e2d\u5199\u5165abort\u8bb0\u5f55</li> </ul> </li> <li> <p>\u6062\u590d\u7684\u4e24\u4e2a\u9636\u6bb5\uff1aredo\u548cundo</p> </li> <li> <p>redo\u9700\u8981\u5148\u627e\u5230\u6700\u540e\u4e00\u4e2acheck point\u5e76\u4e14\u8bbe\u7f6eundo-list</p> <p>1.\u4ececheckpoint\u5f00\u59cb\u5f80\u4e0b\u8bfb</p> <p>2.\u5f53\u53d1\u73b0\u4fee\u6539\u503c\u7684\u8bb0\u5f55\u7684\u65f6\u5019\uff0credo\u4e00\u6b21\u5c06X\u8bbe\u7f6e\u4e3a\u65b0\u7684\u503c</p> <p>3.\u5f53\u53d1\u73b0start\u7684\u65f6\u5019\u5c06\u8fd9\u4e2a\u4e8b\u52a1\u52a0\u5165undo-list</p> <p>4.\u5f53\u53d1\u73b0commit\u6216\u8005abort\u7684\u65f6\u5019\u5c06\u5bf9\u5e94\u7684\u4e8b\u52a1\u4eceundo-list\u4e2d\u79fb\u9664</p> </li> <li> <p>undo</p> <p>1.\u4ece\u65e5\u5fd7\u7684\u672b\u5c3e\u5f00\u59cb\u5f80\u56de\u8bfb</p> <p>2.\u5f53\u53d1\u73b0\u8bb0\u5f55 \u5e76\u4e14Ti\u5728undo-list\u4e2d\u7684\u65f6\u5019\uff0c\u8fdb\u884c\u4e00\u6b21\u56de\u6eda <p>3.\u5f53\u53d1\u73b0Ti start\u5e76\u4e14Ti\u5728undo-list\u4e2d\u7684\u65f6\u5019\uff0c\u5199\u5165abort\u65e5\u5fd7\u5e76\u4e14\u4eceundo-list\u4e2d\u79fb\u9664Ti</p> <p>4.\u5f53undo-list\u7a7a\u4e86\u7684\u65f6\u5019\u505c\u6b62undo</p> <li> <p>log record buffering \u7f13\u51b2\u65e5\u5fd7\u8bb0\u5f55</p> </li> <li> <p>\u65e5\u5fd7\u8bb0\u5f55\u4e00\u5f00\u59cb\u5728\u4e3b\u5b58\u7684\u7f13\u51b2\u533a\u4e2d\uff0c\u5f53\u65e5\u5fd7\u5728block\u4e2d\u6ee1\u4e86\u7684\u65f6\u5019\u6216\u8005\u8fdb\u884c\u4e86log force\u64cd\u4f5c(\u4e0a\u9762\u63d0\u5230\u7684checkpoint)\u65f6\u5199\u5165\u7a33\u5b9a\u7684\u5b58\u50a8\u4e2d</p> </li> <li> <p>\u9700\u8981\u9075\u5b88\u7684\u89c4\u5219</p> <ul> <li>\u5199\u5165\u7a33\u5b9a\u5b58\u50a8\u4e2d\u7684\u65f6\u5019\u65e5\u5fd7\u8bb0\u5f55\u6309\u7167\u539f\u672c\u7684\u987a\u5e8f\u5199\u5165</li> <li>\u5728commit\u8bb0\u5f55\u88ab\u5199\u5165\u7a33\u5b9a\u5b58\u50a8\u7684\u65f6\u5019\uff0cTi\u624d\u7b97\u8fdb\u5165commit\u72b6\u6001</li> <li>WAL(write-ahead logging)\u89c4\u5219\uff1a\u5728\u6570\u636eblock\u5199\u5165\u6570\u636e\u5e93\u4e4b\u524d\uff0c\u5fc5\u987b\u5148\u628a\u65e5\u5fd7\u5199\u5165\u7a33\u5b9a\u7684\u5b58\u50a8\u4e2d</li> </ul> </li> <li>\u4e2d\u95f4\u6709\u51e0\u9875\u5148\u7559\u7740\u6162\u6162\u5b66\u4e60\uff0c\u8fd9\u51e0\u9875\u770b\u8d77\u6765\u4e0d\u592a\u50cf\u8003\u8bd5\u5185\u5bb9\uff0cbuffer\u8fd9\u4e00\u90e8\u5206\u5e94\u8be5\u4e86\u89e3\u5c31\u597d</li>"},{"location":"ZJU_CS/Database/review/#522_aries_recovery_algorithmaries","title":"5.2.2 ARIES Recovery Algorithm\u2014\u2014Aries\u6062\u590d\u7b97\u6cd5","text":"<ul> <li>\u548c\u666e\u901a\u6062\u590d\u7b97\u6cd5\u7684\u533a\u522b\uff1a</li> <li>\u6700\u6838\u5fc3\u7684\u533a\u522b\u2014\u2014Aries\u7b97\u6cd5\u8003\u8bd5\u8003\u5230\u7684\u6982\u7387\u5f88\u9ad8</li> <li>\u4f7f\u7528LSN(log sequence number)\u6765\u6807\u6ce8\u65e5\u5fd7<ul> <li>\u4ee5\u9875\u7684\u5f62\u5f0f\u6765\u5b58\u50a8LSN\u6765\u6807\u6ce8\u6570\u636e\u5e93\u9875\u8868\u4e2d\u8fdb\u884c\u4e86\u54ea\u4e9b\u66f4\u65b0</li> </ul> </li> <li>\u751f\u7406redo(?)</li> <li>\u4f7f\u7528\u810f\u9875\u8868(dirty page table) \u6765\u907f\u514d\u4e0d\u5fc5\u8981\u7684redo</li> <li> <p>\u6a21\u7cca\u7684checkpoint\u673a\u5236\uff0c\u53ea\u8bb0\u5f55\u810f\u9875\u4fe1\u606f\u548c\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u4e0d\u9700\u8981\u628a\u810f\u9875\u5199\u5165\u78c1\u76d8</p> </li> <li> <p>ARIES\u4e2d\u7684\u6570\u636e\u7ed3\u6784</p> </li> <li>Log sequence number (LSN) <ul> <li>\u7528\u4e8e\u6807\u8bc6\u6bcf\u4e00\u6761\u8bb0\u5f55\uff0c\u9700\u8981\u662f\u7ebf\u6027\u589e\u957f\u7684</li> <li>\u5176\u5b9e\u662f\u4e00\u4e2aoffset\uff0c\u65b9\u4fbf\u4ece\u6587\u4ef6\u7684\u8d77\u70b9\u5f00\u59cb\u8bbf\u95ee</li> </ul> </li> <li>Page LSN \u6bcf\u4e00\u9875\u7684LSN<ul> <li>\u662f\u6bcf\u4e00\u9875\u4e2d\u6700\u540e\u4e00\u6761 \u8d77\u4f5c\u7528\u7684\u65e5\u5fd7\u8bb0\u5f55\u7684LSN\u7f16\u53f7</li> <li>\u6bcf\u5f53\u4e00\u4e2a\u66f4\u65b0\u7684\u64cd\u4f5c\u5728\u67d0\u4e00\u9875\u53d1\u751f\u7684\u65f6\u5019\uff0cPage LSN\u5c31\u53d8\u6210\u5bf9\u5e94\u7684Page LSN</li> <li>\u5728\u6062\u590d\u7684\u64a4\u9500\u9636\u6bb5\uff0cLSN\u503c\u4e0d\u8d85\u8fc7PageLSN\u7684\u65e5\u5fd7\u8bb0\u5f55\u5c06\u4e0d\u4f1a\u5728\u8be5\u9875\u4e0a\u6267\u884c\uff0c\u56e0\u4e3a\u5176\u52a8\u4f5c\u5df2\u7ecf\u5728\u8be5\u9875\u4e0a\u4e86</li> <li>\u53ef\u4ee5\u907f\u514d\u91cd\u590d\u7684redo</li> </ul> </li> <li>log record \u65e5\u5fd7\u8bb0\u5f55<ul> <li>\u6bcf\u4e00\u6761\u65e5\u5fd7\u8bb0\u5f55\u5305\u542b\u81ea\u5df1\u7684LSN\u548c\u540c\u4e00\u4e2a\u4e8b\u52a1\u4e2d\u524d\u4e00\u6b65\u64cd\u4f5c\u7684LSN\u2014\u2014PreLSN</li> <li>CLR\uff1a\u5728\u6062\u590d\u671f\u95f4\u4e0d\u9700\u8981undo\uff0c\u662fredo-only\u7684\u65e5\u5fd7\u8bb0\u5f55</li> <li>\u6709\u4e00\u4e2aUndoNextLSN\u533a\u57df\u7528\u4e8e\u8bb0\u5f55\u4e0b\u4e00\u4e2a(\u66f4\u65e9,\u5f80\u524d\u641c\u7d22)\u7684\u9700\u8981undo\u7684\u8bb0\u5f55</li> <li>\u5728\u8fd9\u4e4b\u95f4\u7684\u8bb0\u5f55\u5e94\u8be5\u65e9\u5c31\u5df2\u7ecfundo\u4e86</li> </ul> </li> <li>Dirty Page Table \u810f\u9875\u8868<ul> <li>\u5b58\u50a8\u5728\u7f13\u51b2\u533a\u7684\uff0c\u8bb0\u5f55\u5df2\u7ecf\u88ab\u66f4\u65b0\u8fc7\u7684page\u7684\u8868</li> <li>\u5305\u542b\u4ee5\u4e0b\u5185\u5bb9</li> <li>\u6bcf\u4e2a\u9875\u7684PageLSN</li> <li>\u6bcf\u4e2a\u9875\u7684RecLSN\uff0c\u8868\u793a\u8fd9\u4e00\u9875\u7684\u65e5\u5fd7\u8bb0\u5f55\u4e2d\uff0cLSN\u5728\u8fd9\u4e4b\u524d\u7684\u8bb0\u5f55\u5df2\u7ecf\u90fd\u88ab\u5199\u5165\u78c1\u76d8\u4e2d\u4e86<ul> <li>\u5f53page\u88ab\u63d2\u5165\u810f\u9875\u8868\u7684\u65f6\u5019\uff0c\u521d\u59cb\u5316\u4e3a\u5f53\u524d\u7684PageLSN </li> <li>\u8bb0\u5f55\u5728checkpoint\u4e2d\uff0c\u7528\u4e8e\u51cf\u5c11redo\u7684\u6b21\u6570</li> </ul> </li> <li>\u53ea\u8981\u9875\u88ab\u5199\u5165\u78c1\u76d8\uff0c\u5c31\u4ece\u810f\u9875\u8868\u4e2d\u79fb\u9664\u8be5\u9875</li> </ul> </li> <li> <p>checkpoint\u5904\u7684\u65e5\u5fd7\u8bb0\u5f55</p> <ul> <li>\u5305\u542b\uff1a\u810f\u9875\u8868\u548c\u5f53\u524d\u6d3b\u8dc3\u7684\u6240\u6709\u4e8b\u52a1</li> <li>\u5bf9\u6bcf\u4e00\u4e2a\u6d3b\u8dc3\u7684\u4e8b\u52a1\uff0c\u8bb0\u5f55\u4e86LastLSN\uff0c\u5373\u8fd9\u4e2a\u4e8b\u52a1\u5728\u65e5\u5fd7\u4e2d\u5199\u4e0b\u7684\u6700\u540e\u4e00\u6761\u8bb0\u5f55 </li> <li>\u5728checkpoint\u7684\u65f6\u95f4\u70b9\uff0c\u810f\u9875\u7684\u4fe1\u606f\u4e0d\u4f1a\u5199\u5165\u78c1\u76d8</li> </ul> </li> <li> <p>ARIES\u7b97\u6cd5\u7684\u6062\u590d\u64cd\u4f5c</p> </li> <li> <p>\u5206\u4e3a\u4e09\u4e2a\u9636\u6bb5\uff1a\u5206\u6790\u9636\u6bb5\uff0credo\u9636\u6bb5\u548cundo\u9636\u6bb5</p> <ul> <li>RedoLSN \u8bb0\u5f55\u4e86\u4ece\u54ea\u4e00\u6761\u5f00\u59cb\u9700\u8981redo</li> </ul> </li> <li> <p>\u5206\u6790\u9636\u6bb5\uff1a\u9700\u8981\u51b3\u5b9a\u54ea\u4e9b\u4e8b\u52a1undo\uff0c\u54ea\u4e9b\u9875\u662f\u810f\u9875</p> <ul> <li>\u4ece\u6700\u540e\u4e00\u6761\u5b8c\u6574\u7684checkpoint\u65e5\u5fd7\u8bb0\u5f55\u5f00\u59cb</li> <li>\u8bfb\u53d6\u810f\u9875\u8868\u7684\u4fe1\u606f</li> <li>\u8bbe\u7f6eRedoLSN = min RecLSN(\u810f\u9875\u8868\u4e2d\u7684)\uff0c\u5982\u679c\u810f\u9875\u8868\u662f\u7a7a\u7684\u5c31\u8bbe\u7f6e\u4e3acheckpoint\u7684LSN</li> <li>\u8bbe\u7f6eundo-list\uff1acheckpoint\u4e2d\u8bb0\u5f55\u7684\u4e8b\u52a1</li> <li>\u8bfb\u53d6undo-list\u4e2d\u6bcf\u4e00\u4e2a\u4e8b\u52a1\u7684\u6700\u540e\u4e00\u6761\u8bb0\u5f55\u7684LSN</li> <li>\u4ececheckpoint\u5f00\u59cb\u6b63\u5411\u626b\u63cf</li> <li>\u5982\u679c\u53d1\u73b0\u4e86\u4e0d\u5728undo-list\u4e2d\u7684\u8bb0\u5f55\u5c31\u5199\u5165undo-list</li> <li>\u5f53\u53d1\u73b0\u4e00\u6761\u66f4\u65b0\u8bb0\u5f55\u7684\u65f6\u5019\uff0c\u5982\u679c\u8fd9\u4e00\u9875\u4e0d\u5728\u810f\u9875\u8868\u4e2d\uff0c\u7528\u8be5\u8bb0\u5f55\u7684LSN\u4f5c\u4e3aRecLSN\u5199\u5165\u810f\u9875\u8868\u4e2d</li> <li>\u5982\u679c\u53d1\u73b0\u4e86\u6807\u5fd7\u4e8b\u52a1\u7ed3\u675f\u7684\u65e5\u5fd7\u8bb0\u5f55(commit, abort) \u5c31\u4eceundo-list\u4e2d\u79fb\u9664\u8fd9\u4e2a\u4e8b\u52a1</li> <li> <p>\u641c\u7d22\u76f4\u5230undo-list\u4e2d\u7684\u6bcf\u4e00\u4e2a\u4e8b\u52a1\u90fd\u5230\u4e86\u6700\u540e\u4e00\u6761</p> </li> <li> <p>\u5206\u6790\u7ed3\u675f\u4e4b\u540e</p> </li> <li>RedoLSN\u51b3\u5b9a\u4e86\u4ece\u54ea\u91cc\u5f00\u59cbredo</li> <li>\u6240\u6709undo-list\u4e2d\u7684\u4e8b\u52a1\u90fd\u9700\u8981\u56de\u6eda</li> </ul> </li> <li> <p>Redo\u9636\u6bb5</p> <ul> <li>\u4eceRedoLSN\u5f00\u59cb\u6b63\u5411\u626b\u63cf\uff0c\u5f53\u53d1\u73b0\u66f4\u65b0\u8bb0\u5f55\u7684\u65f6\u5019</li> <li>\u5982\u679c\u8fd9\u4e00\u9875\u4e0d\u5728\u810f\u9875\u8868\u4e2d\u3002\u6216\u8005\u8fd9\u4e00\u6761\u8bb0\u5f55\u7684LSN\u5c0f\u4e8e\u9875\u9762\u7684RecLSN\u5c31\u5ffd\u7565\u8fd9\u4e00\u6761</li> <li>\u5426\u5219\u4ece\u78c1\u76d8\u4e2d\u8bfb\u53d6\u8fd9\u4e00\u9875\uff0c\u5982\u679c\u78c1\u76d8\u4e2d\u5f97\u5230\u7684\u8fd9\u4e00\u9875\u7684PageLSN\u6bd4\u8fd9\u4e00\u6761\u8981\u5c0f\uff0c\u5c31redo\uff0c\u5426\u5219\u5c31\u5ffd\u7565\u8fd9\u4e00\u6761\u8bb0\u5f55</li> </ul> </li> <li> <p>Undo\u9636\u6bb5</p> <ul> <li>\u4ece\u65e5\u5fd7\u672b\u5c3e\u5148\u524d\u5411\u524d\u641c\u7d22\uff0cundo\u6240\u6709undo-list\u4e2d\u6709\u7684\u4e8b\u52a1</li> <li>\u7b26\u5408\u5982\u4e0b\u6761\u4ef6\u7684\u8bb0\u5f55\u53ef\u4ee5\u8df3\u8fc7 </li> <li>\u7528\u5206\u6790\u9636\u6bb5\u7684\u6700\u540e\u4e00\u4e2aLSN\u6765\u627e\u5230\u6bcf\u4e2a\u65e5\u5fd7\u6700\u540e\u7684\u8bb0\u5f55</li> <li>\u6bcf\u6b21\u9009\u62e9\u4e00\u4e2a\u6700\u5927\u7684LSN\u5bf9\u5e94\u7684\u4e8b\u52a1undo</li> <li>\u5728undo\u4e00\u6761\u8bb0\u5f55\u4e4b\u540e<ul> <li>\u5bf9\u4e8e\u666e\u901a\u7684\u8bb0\u5f55\uff0c\u5c06NextLSN\u8bbe\u7f6e\u4e3aPrevLSN</li> <li>\u5bf9\u4e8eCLR\u8bb0\u5f55\uff0c\u5c06NextLSN\u8bbe\u7f6e\u4e3aUndoNextLSN</li> </ul> </li> <li>\u5982\u4f55undo\uff1a\u5f53\u4e00\u6761\u8bb0\u5f55undo\u7684\u65f6\u5019</li> <li>\u751f\u6210\u4e00\u4e2a\u5305\u542b\u6267\u884c\u64cd\u4f5c\u7684CLR</li> <li>\u8bbe\u7f6eCLR\u7684UndoNextLSN \u4e3a\u66f4\u65b0\u8bb0\u5f55\u7684LSN</li> </ul> </li> <li>Aries\u7b97\u6cd5\u7684\u5176\u4ed6\u7279\u6027<ul> <li>Recovery Independence \u6062\u590d\u7684\u72ec\u7acb\u6027</li> <li>Savepoints \u5b58\u6863\u70b9</li> <li>Fine-grained locking \u7ec6\u7c92\u5ea6\u7684\u9501</li> <li>Recovery optimizations \u6062\u590d\u7684\u4f18\u5316</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/review/#xml","title":"\u7b2c\u516d\u90e8\u5206 XML","text":""},{"location":"ZJU_CS/Database/review/#61_xml","title":"6.1 XML\u7684\u5b9a\u4e49\u548c\u57fa\u672c\u7ed3\u6784","text":"<ul> <li>XML\uff1aExtensible Markup Language \u4e00\u79cd\u53ef\u6269\u5c55\u7684\u6807\u8bb0\u8bed\u8a00</li> <li>\u533a\u522b\u4e8eHTML(Hyper-Text Markup Language)</li> <li>XML\u53ef\u4ee5\u6709\u4efb\u610f\u540d\u79f0\u7684\u6807\u8bb0\uff0cHTML\u7684\u6807\u8bb0\u540d\u662f\u6709\u9650\u7684</li> <li>XML\u5df2\u7ecf\u6210\u4e3a\u4e00\u79cd\u4fe1\u606f\u4ea4\u4e92\u7684\u57fa\u672c\u7ed3\u6784\uff0c\u9002\u5408\u6570\u636e\u5e93\u4e4b\u95f4\u7684\u4ea4\u4e92</li> <li>XML\u7684\u7ed3\u6784</li> <li>Tag \u6807\u7b7e\uff0c\u8868\u660e\u4e00\u79cd\u6570\u636e\u7c7b\u578b</li> <li>Element \u88ab\u6807\u7b7e\u6240\u62ec\u8d77\u6765\u7684\u5185\u5bb9\uff0c\u6b63\u786e\u7684\u683c\u5f0f\u5e94\u8be5\u662f<code>&lt;tag&gt;element&lt;/tag&gt;</code> <ul> <li>\u6807\u7b7e\u5fc5\u987b\u8981\u6b63\u786e\u5d4c\u5957\uff0c\u53ef\u4ee5\u5d4c\u5957\u662fXML\u76f8\u6bd4\u4e8e\u5173\u7cfb\u4ee3\u6570\u7684\u4f18\u52bf</li> </ul> </li> <li>XML\u6587\u6863\u9700\u8981\u6709\u4e00\u4e2aroot</li> <li>\u4e00\u4e2a\u5143\u7d20\u53ef\u4ee5\u6709\u591a\u4e2a\u5c5e\u6027\uff0c\u4f46\u662f\u5c5e\u6027\u540d\u4e0d\u80fd\u91cd\u590d\uff0c\u7528<code>attr_name=value</code>\u7684\u5f62\u5f0f\u5185\u5d4c\u5728\u8d77\u59cbtag\u4e0a\u9762</li> <li>\u547d\u540d\u7a7a\u95f4namespaces<ul> <li>\u540c\u4e00\u4e2a\u6807\u7b7e\u540d\u5728\u4e0d\u540c\u7684\u5730\u65b9\u53ef\u80fd\u4ee3\u8868\u4e0d\u540c\u7684\u610f\u601d\uff0c\u9700\u8981\u5728tag\u524d\u9762\u52a0\u4e0a<code>namespace:</code>\u6807\u8bc6\u8fd9\u4e2atag\u662f\u88ab\u8c01\u5b9a\u4e49\u7684</li> </ul> </li> <li>\u6ca1\u6709\u5b50\u5143\u7d20\u7684\u5143\u7d20\u53ef\u4ee5\u53ea\u7528\u4e00\u4e2atag\u6807\u8bc6\uff1a<code>&lt;tag /&gt;</code> </li> <li>\u5f53tag\u8868\u793a\u5b57\u7b26\u4e32\u65f6\u53ef\u4ee5\u7528<code>CDATA[ ]</code> \u62ec\u8d77\u6765\u8868\u793a</li> </ul>"},{"location":"ZJU_CS/Database/review/#62_xml_document_schema","title":"6.2 XML Document Schema","text":"<ul> <li> <p>Document Type Definition (DTD) \u4f7f\u7528\u8f83\u4e3a\u5e7f\u6cdb\uff0c\u5b9a\u4e49\u4e86XML\u6587\u6863\u7ed3\u6784\u7684\u4e00\u79cd\u6807\u51c6</p> </li> <li> <p>\u4e0d\u9650\u5236\u6570\u636e\u7684\u79cd\u7c7b\uff0c\u6807\u7b7e\u4e0d\u9884\u5148\u89c4\u5b9a\u6709\u591a\u5c11\u79cd\uff0c\u53ef\u4ee5\u81ea\u7531\u5b9a\u4e49\uff0c\u4f46\u662f\u9650\u5236XML\u4e2d\u6570\u636e\u7684\u7ed3\u6784</p> <ul> <li>\u6709\u4ec0\u4e48\u5143\u7d20\u53ef\u4ee5\u51fa\u73b0</li> <li>\u5143\u7d20\u5fc5\u987b\u6709\u54ea\u4e9b\u5c5e\u6027</li> <li>\u6bcf\u4e2a\u5143\u7d20\u4e2d\u53ef\u4ee5\u51fa\u73b0\u54ea\u4e9b\u5b50\u5143\u7d20</li> </ul> </li> <li> <p>\u57fa\u672c\u7684\u8bed\u6cd5\u7ed3\u6784 </p> <pre><code>&lt;!ELEMENT element (subelements-specification) &gt;\n&lt;!ATTLIST element (attributes) &gt;\n</code></pre> <ul> <li>\u5b50\u5143\u7d20\u53ef\u4ee5\u58f0\u660e\u4e3a</li> <li>\u5b50\u5143\u7d20\u7684\u540d\u79f0</li> <li><code>#PCDATA(parsed character data)</code> \u88ab\u89e3\u6790\u7684\u5b57\u7b26\u6570\u636e</li> <li> <p>EMPTY \u6216\u8005 ANY \u8868\u793a\u6ca1\u6709\u5b50\u5143\u7d20\u6216\u8005\u4efb\u4f55\u4e1c\u897f\u90fd\u53ef\u4ee5\u4f5c\u4e3a\u5b50\u5143\u7d20</p> </li> <li> <p>\u5b50\u5143\u7d20\u7684\u58f0\u660e\u53ef\u4ee5\u4f7f\u7528\u6b63\u5219\u8868\u8fbe\u5f0f </p> </li> <li>\u201c | \u201d \u8868\u793a\u53ef\u4ee5\u4e92\u76f8\u66ff\u4ee3</li> <li>\u201c + \u201d \u81f3\u5c11\u51fa\u73b0\u4e00\u4e2a</li> <li>\u201c * \u201d \u51fa\u73b00\u4e2a\u6216\u591a\u4e2a</li> <li> <p>\u201c \uff1f\u201d \u4e0d\u51fa\u73b0\u6216\u8005\u51fa\u73b0\u4e00\u4e2a</p> </li> <li> <p>\u6bd4\u5982\u8bf4\u4e0b\u9762\u8fd9\u4e00\u6bb5</p> </li> </ul> <pre><code>&lt;!DOCTYPE note [\n  &lt;!ELEMENT note (to,from,heading,body)&gt;\n  &lt;!ELEMENT to      (#PCDATA)&gt;\n  &lt;!ELEMENT from    (#PCDATA)&gt;\n  &lt;!ELEMENT heading (#PCDATA)&gt;\n  &lt;!ELEMENT body    (#PCDATA)&gt;\n]&gt;\n</code></pre> <ul> <li>\u8fd9\u4e00\u6bb5DTD\u4e2d\uff0c\u7b2c\u4e00\u884c\u8868\u793a\u6587\u6863\u7c7b\u578b\u53ebnote\uff0c\u91cc\u9762\u6709\u82e5\u5e72\u4e2a\u5143\u7d20\uff0c\u5176\u4e2dnote\u5143\u7d20\u6709\u56db\u4e2a\u5b50\u5143\u7d20\uff0c\u90fd\u662f\u88ab\u89e3\u6790\u7684\u5b57\u7b26\u6570\u636e</li> </ul> </li> <li> <p>Attribute\u58f0\u660e\uff0c\u5bf9\u6bcf\u4e00\u4e2a\u5c5e\u6027\uff0c\u58f0\u660e</p> <ul> <li> <p>\u5c5e\u6027\u540dname</p> </li> <li> <p>\u5c5e\u6027\u79cd\u7c7btype</p> </li> <li>CDATA</li> <li>ID or IDREF(id\u7684\u7d22\u5f15) or IDREFS(\u591a\u91cdid\u7d22\u5f15)<ul> <li>\u6bcf\u4e2a\u5143\u7d20\u6700\u591a\u4e00\u4e2a\u5c5e\u6027\u4f5c\u4e3aID\uff0c\u5e76\u4e14\u5fc5\u987b\u662f\u4e0d\u540c\u7684\u503c</li> <li>IDREF\u7c7b\u578b\u7684\u5c5e\u6027\u5fc5\u987b\u5305\u542bID\u7684\u503c</li> </ul> </li> <li>\u5176\u4ed6\u5185\u5bb9<ul> <li><code>#REQUIED</code> \u5c5e\u6027\u662f\u5fc5\u987b\u7684</li> <li>\u662f\u5426\u6709\u9ed8\u8ba4\u503c</li> <li><code>#IMPLIED</code>\u5c5e\u6027\u4e0d\u662f\u5fc5\u987b\u7684</li> </ul> </li> </ul> <pre><code>&lt;!ATTLIST course course_id CDATA #REQUIRED&gt;, \u6216\u8005\n&lt;!ATTLIST course\n      course_id     ID          #REQUIRED\n        dept_name  IDREF   #REQUIRED\n      instructors    IDREFS #IMPLIED   &gt;\n</code></pre> </li> <li> <p>DTD\u7684\u4e00\u4e9b\u9650\u5236</p> <ul> <li>\u5143\u7d20\u548c\u5c5e\u6027\u6ca1\u6709\u7c7b\u578b</li> <li>IDs\u548cIDREFs\u662funtyped\uff0c\u6bcf\u4e2a\u5143\u7d20\u7684ID\u5c5e\u6027\u503c\u5fc5\u987b\u662f\u552f\u4e00\u7684</li> </ul> </li> <li> <p>XML Schema\u2014\u2014\u4e0d\u5e38\u7528</p> </li> <li>\u89e3\u51b3\u4e86DTD\u7684\u7f3a\u70b9\uff0c\u66f4\u590d\u6742\uff0c\u652f\u6301<ul> <li>\u503c\u7684\u7c7b\u578b\uff0c\u5305\u62ecinteger\uff0cstring\u7b49</li> <li>\u7528\u6237\u5b9a\u4e49\u7c7b\u578b\uff0c\u66f4\u590d\u6742\u7684\u7c7b\u578b</li> <li>\u66f4\u591a\u529f\u80fd\u5305\u62ec unique\u548cforeign key\u7684\u9650\u5236</li> <li>\u4f46\u6bd4DTD\u6a21\u5f0f\u66f4\u52a0\u5197\u4f59</li> </ul> </li> <li>\u8bed\u6cd5\u89c4\u5219<ul> <li>\u53ef\u4ee5\u4f7f\u7528xs\u7684namespace</li> <li>\u5c5e\u6027\u88abxs:attribute\u7684tag\u6240\u5b9a\u4e49</li> <li>\u952e\u7ea6\u675f\uff0c \u5916\u952e\u7ea6\u675f\uff1a\u901a\u8fc7xpath\u8fdb\u884c\u67e5\u8be2</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Database/review/#63_xml","title":"6.3 XML \u67e5\u8be2","text":"<ul> <li> <p>XML \u6570\u636e\u7684\u67e5\u8be2\u548c\u4f20\u8f93</p> </li> <li> <p>\u53ef\u4ee5\u7528\u4e8eXML\u67e5\u8be2\u548c\u4f20\u8f93\u7684\u8bed\u8a00</p> <ul> <li>XPath</li> <li>XSLT</li> <li>XQuery</li> </ul> </li> <li> <p>\u67e5\u8be2\u548c\u4ea4\u6362\u57fa\u4e8eXML\u7684\u6811\u6a21\u578b</p> <ul> <li>\u6811\u6a21\u578b\u4e2d\u7684\u8282\u70b9\u662fXML\u6587\u6863\u4e2d\u7684\u5143\u7d20\uff0c\u8282\u70b9\u5206\u4e3a\u5143\u7d20\u3001\u5c5e\u6027\u3001\u6587\u672c\u3001\u547d\u540d\u7a7a\u95f4\u3001\u5904\u7406\u6307\u4ee4\u3001\u6ce8\u91ca\u4ee5\u53ca\u6587\u6863\uff08\u6839\uff09\u8282\u70b9\uff0c\u5143\u7d20\u4e0b\u7684\u8282\u70b9\u662f\u5c5e\u6027\u6216\u8005\u5b50\u5143\u7d20\uff0c\u4e0a\u9762\u7684\u5219\u662f\u7236\u5143\u7d20</li> <li>\u6839\u8282\u70b9\u53ea\u6709\u4e00\u4e2a\u513f\u5b50\uff0c\u5c31\u662fXML\u6587\u6863\u7684\u6839\u5143\u7d20</li> </ul> </li> <li> <p>XPath </p> <ul> <li>\u7528\u7c7b\u4f3c\u4e8e\u6587\u4ef6\u8def\u5f84\u7684\u8868\u8fbe\u5f0f\u6765\u8fdb\u884c\u67e5\u8be2\uff0c\u7528\u659c\u6760\u8fdb\u884c\u8fde\u63a5</li> <li>\u7b2c\u4e00\u4e2a\u659c\u6760\u7684\u610f\u601d\u8868\u793a\u6839\u76ee\u5f55\uff0c\u8def\u5f84\u4e2d\u53ef\u4ee5\u6dfb\u52a0\u67e5\u8be2\u6761\u4ef6\uff0c\u9700\u8981\u7528<code>[]</code>\u62ec\u8d77\u6765</li> <li>\u6bd4\u5982<code>//title[@lang]</code> \u53ef\u4ee5\u9009\u53d6\u6240\u6709\u62e5\u6709\u5c5e\u6027\u540dlang\u7684\u5143\u7d20title</li> <li>\u6bd4\u5982<code>/bookstore/book[1]</code> \u8868\u793a\u9009\u53d6bookstore\u4e0b\u9762\u7b2c\u4e00\u4e2a\u67e5\u8be2\u5230\u7684book\u5143\u7d20</li> <li>\u8bbf\u95ee\u5c5e\u6027\u9700\u8981\u4f7f\u7528<code>@</code>\u6807\u8bb0(\u6ce8\u610f\u6807\u7b7e\u7684\u5c5e\u6027\u548c\u503c\u7684\u533a\u522b)</li> <li>\u53ef\u4ee5\u4f7f\u7528\u901a\u914d\u7b26\u6765\u67e5\u8be2\uff1a</li> <li>*\u53ef\u4ee5\u8868\u793a\u6240\u6709\u7684\u5143\u7d20\u8282\u70b9\uff0c\u6bd4\u5982<code>//*</code>  \u53ef\u4ee5\u83b7\u53d6\u6587\u6863\u4e2d\u7684\u6240\u6709\u5143\u7d20</li> <li>@*\u53ef\u4ee5\u8868\u793a\u6240\u6709\u7684\u5c5e\u6027\u8282\u70b9</li> <li>\u53ef\u4ee5\u7528 | \u6765\u8fde\u63a5\u4e24\u4e2a\u67e5\u8be2</li> <li> <p><code>//</code> \u53ef\u4ee5\u8df3\u8fc7\u591a\u5c42node\u76f4\u5954\u8981\u627e\u7684\u76ee\u6807</p> </li> <li> <p>\u67e5\u8be2\u8def\u5f84\u4e0d\u4ec5\u80fd\u5f80\u4e0b\u67e5\u8be2\uff0c\u4e5f\u53ef\u4ee5\u5f80\u4e0a\u67e5\u8be2\uff0c\u65e2\u53ef\u4ee5\u641c\u7d22\u5b50\u8282\u70b9\uff0c\u4e5f\u53ef\u4ee5\u641c\u7d22\u7236\u8282\u70b9</p> </li> <li>XPath\u4e2d\u63d0\u4f9b\u4e86\u4e00\u4e9b\u53ef\u4ee5\u4f7f\u7528\u7684\u51fd\u6570</li> <li>count\u51fd\u6570\u53ef\u4ee5\u7528\u6765\u8ba1\u7b97\u67d0\u4e2a\u8def\u5f84\u4e0b\u7684\u5143\u7d20\u4e2a\u6570\uff0c\u6bd4\u5982<code>/university-2/instructor[count(./teaches/course)&gt; 2]</code> \u53ef\u4ee5\u8868\u793a\u83b7\u53d6\u6240\u6709\u4e0a\u8bfe\u6570\u76ee\u8d85\u8fc72\u7684\u8001\u5e08</li> <li>\u5e03\u5c14\u51fd\u6570and\u548cor\u548cnot() \u53ef\u4ee5\u4f7f\u7528</li> <li>IDREFs\u53ef\u4ee5\u4f7f\u7528id()\u5f15\u7528</li> <li>\u4f7f\u7528doc\u6765\u8fd4\u56de\u6587\u6863\u7684\u540d\u79f0</li> </ul> </li> <li> <p>XQuery\uff1aXML\u6587\u6863\u7684\u4fe1\u606f\u67e5\u8be2</p> <ul> <li>XQuery\u4f7f\u7528\u7684\u8bed\u6cd5\u662f</li> <li><code>for xxx let xxx where xxx order by xxx return</code></li> <li>for\u76f8\u5f53\u4e8eSQL\u4e2d\u7684<code>select</code>\uff0clet\u5141\u8bb8\u4f7f\u7528\u4e34\u65f6\u53d8\u91cf </li> <li>\u4e00\u4e2a\u7b80\u5355\u7684\u6848\u4f8b\uff0c\u5bf9<code>&lt;course_id&gt;..&lt;/course_id&gt;</code>\u4e2d\u7684\u5185\u5bb9\u8fdb\u884c\u67e5\u8be2</li> </ul> <pre><code>for $x in /university/course\nlet %courseid:=$x/@course_id\nwhere $x/credits &gt; 3\nreturn &lt;course_id&gt;{$courseid}&lt;/course_id&gt;\n\n// \u53ef\u4ee5\u8fdb\u884c\u5982\u4e0b\u7684\u5316\u7b80\nfor $x in /university-3/course[credits &gt; 3]   \nreturn &lt;course_id&gt; { $x/@course_id } &lt;/course_id&gt;\n</code></pre> <ul> <li>join\u64cd\u4f5c\uff1a\u5728where\u540e\u9762\u7528\u903b\u8f91\u5173\u7cfb\u8fde\u63a5\u82e5\u5e72\u4e2a\u6761\u4ef6</li> <li>\u5d4c\u5957\u67e5\u8be2\uff1a\u7528\u6cd5\u662f\u5c06\u4e00\u4e2aXQeury\u8bed\u53e5\u5f53\u4f5creturn\u7684\u7ed3\u679c\u7528tags\u5305\u8d77\u6765</li> <li>\u805a\u5408\u64cd\u4f5c \u53ef\u4ee5\u4f7f\u7528sum\u7b49\u805a\u5408\u51fd\u6570\uff0c\u6bd4\u5982<code>fu:sum()</code></li> <li>\u4f7f\u7528order by\u8fdb\u884c\u6392\u5e8f</li> <li>\u53ef\u4ee5\u4f7f\u7528\u81ea\u5b9a\u4e49\u51fd\u6570\u6765\u8fdb\u884c\u67d0\u4e9b\u64cd\u4f5c</li> </ul> </li> </ul>"},{"location":"ZJU_CS/DigitalDesign/","title":"[\u5927\u4e8c\u79cb\u51ac] \u6570\u5b57\u903b\u8f91\u8bbe\u8ba1 | Digital Design","text":"<p>\u7531\u4e8eZJU\u6709\u592a\u591a\u4f18\u79c0\u5b66\u957f\u7684\u535a\u5ba2\uff0c\u6240\u4ee5\u672c\u8bfe\u6211clone\u4e86Xiu\u4f6c\u7684\u7b14\u8bb0\u5e76\u5728\u6b64\u57fa\u7840\u4e0a\u52a0\u4e0a\u81ea\u5df1\u7684\u8bb0\u5f55\u3002</p> <p>\u8bfe\u7a0b\u4fe1\u606f</p> <ul> <li>\u6388\u8bfe\uff1azmm</li> <li>\u667a\u4e91\u8bfe\u5802\u94fe\u63a5\uff1a\ud83d\udd17 \u8fd9\u91cc\u4e0d\u5efa\u8bae\u5927\u5bb6\u542czmm\u8001\u5e08\u7684\u667a\u4e91\uff0cmaybe\u81ea\u5b66\u6216\u8005\u9694\u58c1\u73ed\u7684md\u8001\u5e08\u53ef\u80fd\u4f1a\u6709\u66f4\u597d\u7684\u4f53\u9a8c</li> <li>\u6559\u6750\uff1aLogic and Computer Design Fundamentals, Fifth Edition</li> <li>\u7531\u4e8e\u672c\u4eba\u4ece\u672a\u5728\u6b64\u4e4b\u524d\u4e0a\u8fc7\u5b8c\u6574\u7684\u786c\u4ef6\u8bfe\u7a0b\uff08\u5982ICS\uff09\uff0c\u53ea\u662f\u96f6\u788e\u7684\u5438\u6536\u4e86\u8bb8\u591a\u6742\u4e03\u6742\u516b\u7684\u77e5\u8bc6\u3002\u540e\u8003\u8bd5\u8865\u5929\u6545\u9009\u62e9\u4e86GuaGua\u7b14\u8bb0\u548c\u4fee\u4f6c\u7684\u7f51\u7ad9\u6765\u76d8\u70b9<sub>~\u590d\u4e60</sub>~\u9884\u4e60\u3002\u5e0c\u671b\u5927\u5bb6\u6709\u4efb\u4f55\u610f\u89c1\u6216\u8005\u5efa\u8bae\u90fd\u5199\u5728\u8bc4\u8bba\u533a\u91cc\u8ba9\u6211\u77e5\u9053\uff01\u5e0c\u671b\u8fd9\u4efd\u8d44\u6599\u53ef\u4ee5\u7ed9\u4f60\u5e26\u6765\u5e2e\u52a9\uff01</li> </ul> <p>List</p> <p>\u8865\u5929\u65f6\u5019\u7684\u4e00\u70b9\u60f3\u6cd5\uff0c\u56e0\u4e3a\u8bfe\u672c\u6bcf\u4e00\u7ae0\u90fd\u6709\u4e00\u4e2a summary\uff0c\u6240\u4ee5\u5982\u679c\u8981\u770b\u4e66\u7684\u8bdd\u6216\u8bb8\u53ef\u4ee5\u5148\u770b\u90a3\u4e2a summary \u518d\u770b\u5177\u4f53\u7684\u3002</p> <ul> <li> Chap 1 Digital Systems and Information</li> <li> Chap 2 Combinational Logic Circuits</li> <li> Chap 3 Combinational Logic Design</li> <li> Chap 4 Sequential Circuits</li> <li> Chap 5 Digital Hardware Implementation \uff08\u7565\u7b80\u7565\uff09</li> <li> Chap 6 Registers &amp; Register Transfers</li> <li> Chap 7 Memory Basics </li> <li> Glossary</li> <li> \u5b66\u4e60\u601d\u8def\u4ee5\u53ca\u8d44\u6e90</li> </ul> <p>\u672c\u7b14\u8bb0\u4e3b\u8981\u53c2\u8003\u4e86 isshikih\uff0880%\uff09 \u548c Guahao\uff0810%\uff09\u3002\u81ea\u5df1\u5728\u6b64\u57fa\u7840\u4e0a\u5b89\u88c5\u65b0\u624b\u7684\u601d\u8def\u8fdb\u884c\u8c03\u6574\u4fee\u6539\u3002\u5f53\u6211\u4eec\u4e0d\u5f97\u4e0d\u627f\u8ba4\u4ed6\u4f1a\u66f4\u6709\u603b\u62ec\u6027\uff0c\u4e0d\u5b8c\u5168\u6309\u7167\u8bfe\u672c\u7ae0\u8282\uff0c\u751a\u81f3\u6bcf\u7ae0\u90fd\u6709\u8865\u5145\u3002\u66f4\u591a\u5185\u5bb9\u8bf7\u770b\u5b66\u4e60\u601d\u8def\u4ee5\u53ca\u8d44\u6e90</p>"},{"location":"ZJU_CS/DigitalDesign/Chap01/","title":"Chap 1 Digital Systems and Information","text":""},{"location":"ZJU_CS/DigitalDesign/Chap01/#information_representation","title":"\u4fe1\u606f\u8868\u8fbe | Information Representation","text":"<p>\u73b0\u5b9e\u4e16\u754c\u4e2d\u7684\u4fe1\u606f\u5f80\u5f80\u662f \u8fde\u7eed(continuous) \u7684\uff0c\u4f46\u5728\u4eba\u9020\u7269\u7684\u4e16\u754c\u4e2d\uff0c\u5927\u90e8\u5206\u4fe1\u606f\u90fd\u662f \u79bb\u6563(discrete) \u7684\u3002</p> <p>\u5728\u7535\u5b50\u4fe1\u606f\u7cfb\u7edf\u4e2d\uff0c\u4fe1\u53f7\u5206\u4e3a \u6a21\u62df\u4fe1\u53f7(analog signal) \u548c \u6570\u5b57\u4fe1\u53f7(digital signal) \u4e24\u79cd\u3002\u5176\u4e2d\uff0c\u5728 \u6570\u5b57\u4fe1\u53f7(digital signal) \u4e2d\u53c8\u6709\u591a\u79cd\u8868\u793a\u65b9\u6cd5\uff0c\u5982\u4eca\u6211\u4eec\u6700\u5e38\u7528\u7684\u662f \u4e8c\u8fdb\u5236(binary)\u3002\u5bf9\u5e94\u5230\u7535\u8def\u5c42\u9762\uff0c\u6211\u4eec\u5e38\u5e38\u7528 \u9ad8\u7535\u4f4d(HIGH) \u548c \u4f4e\u7535\u4f4d(LOW) \u6765\u8868\u5f81 1 \u548c 0\u3002</p> <p></p> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5728\u8f93\u5165\u548c\u8f93\u51fa\u4e2d\uff0c\u9ad8\u4f4e\u7535\u4f4d\u7684\u63a5\u53d7\u8303\u56f4\u662f\u4e0d\u540c\u7684\u3002\u53ef\u4ee5\u53d1\u73b0\uff0c\u8f93\u5165\u7684\u5224\u5b9a\u8303\u56f4\u6bd4\u8f93\u51fa\u7684\u5224\u5b9a\u8303\u56f4\u5927\uff0c\u5373 \u5bbd\u8fdb\u4e25\u51fa\u3002\u5176\u76ee\u7684\u662f\u4e3a\u4e86\u8fdb\u4e00\u6b65\u63d0\u9ad8\u7535\u8def\u5728\u566a\u97f3\u7b49\u5f02\u5e38\u5f71\u54cd\u4e0b\u4e5f\u80fd\u6b63\u5e38\u8868\u73b0\u7684\u80fd\u529b\u3002</p> HIGH output LOW output HIGH input LOW input 0.9 ~ 1.1 -0.1 ~ 0.1 0.6 ~ 1.1 -0.1 ~ 0.4 <p>\u6216\u8bb8\u4f60\u4e5f\u5df2\u7ecf\u6ce8\u610f\u5230\u4e86\uff0c\u5728\u56fe\u4e2d\uff0cHIGH \u7684\u63a5\u53d7\u8303\u56f4\u548c LOW \u7684\u63a5\u53d7\u8303\u56f4\u4e4b\u95f4\u8fd8\u5b58\u5728\u4e00\u6bb5\u533a\u57df\u3002\u843d\u5728\u8fd9\u4e00\u90e8\u5206\u7684\u7535\u5e73\u662f \u672a\u5b9a\u4e49(undefined) \u7684\uff0c\u4e5f\u88ab\u79f0\u4e3a\u662f \u6d6e\u52a8(floating) \u7684\u3002\u5982\u679c\u8f93\u51fa\u7684\u7535\u5e73\u662f\u5728\u6d6e\u52a8\u533a\u95f4\u7684\uff0c\u90a3\u4e48\u5176\u8ba4\u5b9a\u503c\u5c06\u662f\u968f\u673a\u7684\u3002</p> <p>\u4e8b\u5b9e\u4e0a\uff0c\u5728\u4fe1\u606f\u7684\u5bf9\u5e94\u4e0a\uff0c\u867d\u7136\u5c06\u9ad8\u4f4e\u7535\u5e73\u540c HIGH/LOW \u8054\u7cfb\u662f\u5f88\u81ea\u7136\u7684\uff0c\u4f46\u662f\u5c06\u4ed6\u4eec\u540c true/false \u6216\u8005 1/0 \u8054\u7cfb\u5176\u5b9e\u5e76\u4e0d\u552f\u4e00\u3002\u4f46\u662f\u5728\u4e00\u822c\u60c5\u51b5\u4e0b\uff08\u6211\u4eec\u79f0\u4e4b\u4e3a positive logic\uff09\uff0c\u6211\u4eec\u90fd\u8ba4\u4e3a HIGH ~ true ~ 1\uff0c LOW ~ false ~ 0\u3002</p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c(b) \u56fe\u4e2d\u7684\u6a21\u62df\u4fe1\u53f7\u5728\u7ecf\u8fc7\u6211\u4eec\u7684\u5668\u4ef6\u540e\uff0c\u4f1a\u88ab\u8ba4\u4e3a\u662f (c) \u56fe\u6240\u793a\u7684\u4fe1\u53f7\u3002\u800c\u8fd9\u4e9b\u64cd\u4f5c\u5728\u786c\u4ef6\u5c42\u9762\uff0c\u6211\u4eec\u901a\u8fc7 \u6676\u4f53\u7ba1(transistors) \u6765\u5b9e\u73b0\u3002</p> <p>\u8fd9\u4e5f\u7275\u626f\u5230\u6211\u4eec\u4e3a\u4ec0\u4e48\u6700\u7ec8\u4f7f\u7528\u4e8c\u8fdb\u5236\u6765\u8868\u793a\u4fe1\u606f\u3002\u4e00\u65b9\u9762\u662f\u56e0\u4e3a\u4e8c\u503c\u5668\u4ef6\u6bd4\u8f83\u5e38\u89c1\uff0c\u4ea6\u5373\u8fd9\u91cc\u63d0\u5230\u7684\u6676\u4f53\u7ba1\uff1b\u53e6\u5916\u4e00\u65b9\u9762\u662f\u4f7f\u7528\u4e8c\u8fdb\u5236\u53ef\u4ee5\u964d\u4f4e\u7535\u8def\u6210\u672c\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap01/#abstraction_layers_in_computer_systems_design","title":"\u8ba1\u7b97\u673a\u7cfb\u7edf\u8bbe\u8ba1\u4e2d\u7684\u62bd\u8c61\u5c42 | Abstraction Layers in Computer Systems Design","text":"\u8d8a\u4e0a\u5c42\u62bd\u8c61\u7a0b\u5ea6\u8d8a\u9ad8 Algorithms Programing Languages Operating Systems Instruction Set Architecture Microarchitecture Register Transfers Logic Gates Transistor Circuits"},{"location":"ZJU_CS/DigitalDesign/Chap01/#number_systems","title":"\u6570\u5b57\u7cfb\u7edf | Number Systems","text":"<p>\u9996\u5148\u9700\u8981\u6d89\u53ca\u7684\u95ee\u9898\u662f\u8fdb\u5236\u8f6c\u6362\u3002</p> <p>\u5bf9\u4e8e\u4e00\u4e2a\\(r\\)\u8fdb\u5236\u6570\uff0c\u5b83\u4e00\u822c\u88ab\u5199\u6210\u8fd9\u6837\uff1a</p> \\[(A_{n-1}A_{n-2}...A_1A_0A_{-1}...A_{-(m-1)}A_{-m})_{r}\\] <p>\u800c\u5b83\u5bf9\u5e94\u7684\u5341\u8fdb\u5236\u771f\u503c\u4e3a\uff1a</p> \\[ \\begin{align} \\sum_{n-1\\leq i \\leq m} A_ir^i\\;\\; =&amp;A_{n-1}r^{n-1}+A_{n-2}r^{n-2}+...\\\\ +&amp;A_{1}r^{1}+A_0r^0+A_{-1}r^{-1}+...\\\\ +&amp;A_{-(m-1)}r^{m-1}+A_{-m}r^{-m} \\end{align} \\] <p>\u8ba1\u7b97\u673a\u9886\u57df\u5e38\u89c1\u7684\u8fdb\u5236\u4e3b\u8981\u662f \u4e8c\u8fdb\u5236(binary)\uff0c\u516b\u8fdb\u5236(octal)\uff0c\u5341\u8fdb\u5236(decimal) \u548c \u5341\u516d\u8fdb\u5236(hexadecimal)\u3002</p> <p>\u5176\u4e2d\u4e8c\u3001\u516b\u3001\u5341\u516d\u8fdb\u5236\u4e4b\u95f4\u7684\u8f6c\u6362\u975e\u5e38\u7b80\u5355\uff0c\u5b58\u5728\u591a\u4f4d\u5230\u4e00\u4f4d\u4e4b\u95f4\u7684\u65e0\u540e\u6548\u6027\u6620\u5c04\uff0c\u4f8b\u5982\u4e8c\u8fdb\u5236\u8f6c\u6362\u5230\u5341\u516d\u8fdb\u5236\u53ea\u9700\u8981\u5c06\u4ece\u4f4e\u5230\u9ad8\u6bcf\u56db\u4f4d\u8f6c\u5316\u6210\u5341\u516d\u8fdb\u5236\u4e2d\u7684\u4e00\u4f4d\u5373\u53ef\u3002</p> <p>\u9700\u8981\u6ce8\u610f\uff0c\u7531\u4e8e\u4e8c\u8fdb\u5236\u548c\u5341\u8fdb\u5236\u5728\u96f6\u4f4d\u4e0a\u7684\u6743\u91cd\u76f8\u540c\uff0c\u8fd9\u610f\u5473\u7740\u5728\u6574\u6570\u90e8\u5206\uff0c\u4e8c\u8fdb\u5236\u548c\u5341\u8fdb\u5236\u662f\u53ef\u4ee5\u76f8\u4e92\u7cbe\u51c6\u8f6c\u5316\u7684\uff08\u5373\u6700\u5c0f\u7cbe\u5ea6\u662f\u4e00\u81f4\u7684\uff0c\u90fd\u662f 1\uff09\uff1b\u7136\u800c\u8be5\u6027\u8d28\u5728\u5c0f\u6570\u90e8\u5206\u5e76\u4e0d\u6210\u7acb\uff08\u56e0\u4e3a\u5c0f\u6570\u90e8\u5206\u4e0d\u5b58\u5728\u201c\u6700\u5c0f\u7cbe\u5ea6\u201d\u4e00\u8bf4\uff09\uff0c\u5373\u5341\u8fdb\u5236\u65e0\u6cd5\u7cbe\u51c6\u8f6c\u5316\u4e3a\u4e8c\u8fdb\u5236\uff0c\u4f46\u4e8c\u8fdb\u5236\u53ef\u4ee5\u8f6c\u5316\u4e3a\u5341\u8fdb\u5236\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap01/#arithmetic_operations","title":"\u7b97\u672f\u8fd0\u7b97 | Arithmetic Operations","text":"<p>\u8fd9\u91cc\u6d89\u53ca\u7684\u4e3b\u8981\u662f \u52a0\u6cd5(Addition)\u3001\u51cf\u6cd5(Subtraction)\u3001\u4e58\u6cd5(Multiplication)\u3002</p> <p>\u6574\u4f53\u6d41\u7a0b\u548c\u5c0f\u5b66\u7ad6\u5f0f\u52a0\u6cd5\u662f\u4e00\u81f4\u7684\u3002</p> <p>\u5176\u4e2d\u503c\u5f97\u6ce8\u610f\u7684\u662f\uff0c\u5b66\u4f1a\u7528\u53d6\u4f59\u6765\u5b9e\u73b0\u5341\u8fdb\u5236\u5230\u4e8c\u8fdb\u5236\u7684\u8f6c\u5316(\u5305\u62ec\u5c0f\u6570\u4f4d\u7f6e)</p> \u4e8c\u8fdb\u5236\u8fd0\u7b97 <p> </p>"},{"location":"ZJU_CS/DigitalDesign/Chap01/#codes","title":"\u7f16\u7801 | Codes","text":"<p>\u4e8c\u8fdb\u5236\u7f16\u7801\u4e3b\u8981\u5206\u4e3a\u8fd9\u4e48\u51e0\u79cd\uff1a</p> <ul> <li>Numeric<ul> <li>\u5fc5\u987b\u8868\u8fbe\u4e00\u5b9a\u8303\u56f4\u5185\u7684\u6570\u5b57\uff1b</li> <li>\u80fd\u591f\u652f\u6301\u7b80\u5355\u4e14\u666e\u904d\u7684\u8ba1\u7b97\uff1b</li> <li>\u548c\u4e8c\u8fdb\u5236\u6570\u503c\u672c\u8eab\u6709\u8f83\u5927\u5173\u8054\uff1b</li> </ul> </li> <li>Non-numeric<ul> <li>\u76f8\u5bf9\u7075\u6d3b\uff0c\u56e0\u4e3a\u4e0d\u9700\u8981\u9002\u914d\u666e\u904d\u7684\u8fd0\u7b97\u6cd5\u5219\uff1b<ul> <li>\u7075\u6d3b\u6027\u6307\uff0c\u4fdd\u8bc1\u7f16\u7801\u6620\u5c04\u5173\u7cfb\u662f\u552f\u4e00\u7684\u7684\u60c5\u51b5\u4e0b\u90fd\u53ef\u4ee5\u79f0\u4e3a\u5408\u6cd5\u7f16\u7801\uff1b</li> </ul> </li> <li>\u548c\u4e8c\u8fdb\u5236\u6570\u503c\u672c\u8eab\u672a\u5fc5\u6709\u5173\u7cfb\uff1b</li> </ul> </li> </ul>"},{"location":"ZJU_CS/DigitalDesign/Chap01/#_1","title":"\u72ec\u70ed\u7801 &amp; \u72ec\u51b7\u7801","text":"<p>\u72ec\u70ed\u7801(one-hot) \u8981\u6c42\u6bd4\u7279\u5411\u91cf\u4e2d\u53ea\u6709\u4e00\u4f4d\u662f <code>1</code>\uff1b\u5bf9\u5e94\u7684\u8fd8\u6709 \u72ec\u51b7\u7801(one-cold)\u3002Wiki</p> <p>\u4f7f\u7528\u8fd9\u79cd\u7f16\u7801\u7684\u597d\u5904\u662f\uff0c\u51b3\u5b9a\u6216\u6539\u53d8\u72b6\u6001\u673a\u76ee\u524d\u7684\u72b6\u6001\u7684\u6210\u672c\u76f8\u5bf9\u8f83\u4f4e\uff0c\u5bb9\u6613\u8bbe\u8ba1\u4e5f\u5bb9\u6613\u68c0\u6d4b\u975e\u6cd5\u884c\u4e3a\u7b49\u3002</p> <p>\u4f46\u662f\u76f8\u5bf9\u5e94\u7684\uff0c\u7f3a\u70b9\u662f\u4fe1\u606f\u8868\u793a\u7387\u8f83\u4f4e\uff0c\u975e\u6cd5\u72b6\u6001\u975e\u5e38\u591a\u800c\u6709\u6548\u72b6\u6001\u5f88\u5c11\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap01/#bcd","title":"BCD \u7801","text":"<p>\u7531\u4e8e\u771f\u5b9e\u4e16\u754c\u4e2d\u5927\u90e8\u5206\u6570\u636e\u8868\u8ff0\u90fd\u662f\u4ee5\u5341\u8fdb\u5236\u5b9e\u73b0\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u7814\u7a76\u5982\u4f55\u7528\u4e8c\u8fdb\u5236\u6765\u8868\u793a\u5341\u8fdb\u5236\u3002</p> <p>\u9996\u5148\uff0c\u4e00\u4f4d\u4e8c\u8fdb\u5236\u6570\u80fd\u5305\u542b\u7684\u4fe1\u606f\u662f 1bit\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u201c\u771f\u201d\u6216\u8005\u4e00\u4e2a\u201c\u5047\u201d\u3002\u6211\u4eec\u79f0\u4e00\u4e2a\u62e5\u6709 n \u4e2a\u5143\u7d20\u7684\u4e8c\u8fdb\u5236\u5411\u91cf\u4e3a\u4e00\u4e2a n\u4f4d\u4e8c\u8fdb\u5236\u7f16\u7801(n-bit binary code)\u3002\u4e00\u4e2a n \u4f4d\u4e8c\u8fdb\u5236\u6570\u62e5\u6709\\(2^{n}\\)\u79cd\u53ef\u80fd\u7684\u7ec4\u5408\uff0c\u56e0\u800c\u53ef\u4ee5\u8868\u793a\\(2^n\\)\u79cd\u4fe1\u606f\u3002</p> <p>\u800c\u6211\u4eec\u9700\u8981\u8bbe\u8ba1\u7684\u7f16\u7801\u7cfb\u7edf\uff0c\u5c31\u662f\u5c06\u6211\u4eec\u9700\u8981\u7684\u4fe1\u606f\u6620\u5c04\u5230\u8fd9\\(2^n\\)\u4e2a\u201c\u7a7a\u4f4d\u201d\u4e2d\u3002\u5f53\u7136\uff0c\u5f53\u6211\u4eec\u9700\u8981\u8868\u793a\u7684\u4fe1\u606f\u6570\u91cf\u5e76\u4e0d\u662f 2 \u7684\u5e42\u6b21\u65f6\u5019\uff0c\u4f1a\u51fa\u73b0\u4e00\u4e9b \u672a\u5206\u914d(unassigned) \u7684\u6bd4\u7279\u7ec4\u5408\u3002</p> <p>\u800c\u5728\u8fd9\u79cd\u7f16\u7801\u4e2d\uff0c\u6700\u5e38\u7528\u7684\u5c31\u662f BCD\u7801(binary-coded demical)\u3002\u5176\u6838\u5fc3\u601d\u8def\u5c31\u662f\uff0c\u5c06\u5341\u8fdb\u5236\u7684\u6bcf\u4e00\u4f4d \u5206\u522b \u7528 \u771f\u503c\u76f8\u7b49\u7684 4 \u4f4d\u4e8c\u8fdb\u5236 \u8868\u793a\uff0c\u5373 <code>0</code> ~ <code>9</code> \u5206\u522b\u7528 <code>0000</code> ~ <code>1001</code> \u8868\u793a\u3002</p> DecimalSymbol BCDDigit <code>0</code> <code>0000</code> <code>1</code> <code>0001</code> <code>2</code> <code>0010</code> <code>3</code> <code>0011</code> <code>4</code> <code>0100</code> <code>5</code> <code>0101</code> <code>6</code> <code>0110</code> <code>7</code> <code>0111</code> <code>8</code> <code>1000</code> <code>9</code> <code>1001</code> <p>eg</p> \\[ \\mathrm{ (185)_{10}\\;=\\;(0001\\;1000\\;0101)_{BCD}\\;=\\;(10111001)_2 } \\]"},{"location":"ZJU_CS/DigitalDesign/Chap01/#_2","title":"\u4f59\u4e09\u7801","text":"<p>\u4e00\u79cd BCD\u7801 \u7684\u6539\u8fdb\u662f \u4f59\u4e09\u7801(Excess3)\u3002\u5176\u6838\u5fc3\u601d\u8def\u662f\u5728 BCD\u7801\u7684\u57fa\u7840\u4e0a\uff0c\u589e\u52a0\u4e00\u4e2a\u5927\u5c0f\u4e3a 3 \u7684\u504f\u79fb\u91cf\u3002</p> DecimalSymbol Excess3Digit <code>0</code> <code>0011</code> <code>1</code> <code>0100</code> <code>2</code> <code>0101</code> <code>3</code> <code>0110</code> <code>4</code> <code>0111</code> <code>5</code> <code>1000</code> <code>6</code> <code>1001</code> <code>7</code> <code>1010</code> <code>8</code> <code>1011</code> <code>9</code> <code>1100</code> <p>\u4e3a\u4ec0\u4e48\u662f 3 \u5462\uff1f\u9996\u5148\u8fd9\u4e2a 3 \u6765\u81ea\u4e8e \\(\\frac{16-10}{2}\\)\uff0c\u4e5f\u5c31\u662f 8421 \u7801\u7684\u5bb9\u91cf\u51cf\u53bb\u6211\u4eec\u9700\u8981\u8868\u793a\u7684\u6570\u5b57\u6570\u91cf\uff0c\u518d\u9664\u4ee5\u4e8c\u3002\u8fd9\u6837\u7684\u597d\u5904\u662f\uff0c\u5341\u8fdb\u5236\u4e0b\u80fd\u8fdb\u4f4d\u7684\u4e24\u4e2a\u6570\uff0c\u5728\u4f59\u4e09\u7801\u4e0b\u76f8\u52a0\u4e5f\u521a\u597d\u8fdb\u4f4d\u3002</p> <p>\u4f46\u662f\u9700\u8981\u5f3a\u8c03\u7684\u4e00\u70b9\u662f\uff0c\u7f16\u7801\u548c\u6570\u503c\u662f\u5b58\u5728\u533a\u522b\u7684\uff0c\u867d\u7136\u6211\u4eec\u63d0\u5230\u4e86\u4f59\u4e09\u7801\u76f8\u52a0\uff0c\u4f46\u662f\u7f16\u7801\u505a\u8fd0\u7b97\u591a\u6570\u60c5\u51b5\u4e0b\u662f\u6ca1\u6709\u610f\u4e49\u7684\u3002\u201c\u8fd0\u7b97\u201d\u7684\u4e3b\u4f53\u66f4\u591a\u662f\u6570\u503c\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap01/#_3","title":"\u683c\u96f7\u7801","text":"<p>\u6b64\u5916\uff0c\u8fd9\u91cc\u4e0d\u5f97\u4e0d\u63d0\u7684\u53e6\u5916\u4e00\u4e2a\u7f16\u7801\u662f \u683c\u96f7\u7801(Gray Codes)\u3002\u683c\u96f7\u7801\u7684\u7279\u5f81\uff0c\u4e5f\u662f\u4ed6\u7684\u4f18\u70b9\uff0c\u5c31\u662f\u76f8\u90bb\u7684\u4e24\u4e2a\u6570\u5728\u4e8c\u8fdb\u5236\u4e0b\u7684\u8868\u793a\u53ea\u5dee\u4e00\u4f4d\uff08\u5f53\u5728\u5360\u6ee1\u65f6\uff0c\u5bf9\u4e8e\u6574\u4e2a\u7f16\u7801\u5e8f\u5217\uff0c\u73af\u72b6\u6ee1\u8db3\u8be5\u6761\u4ef6\uff09\u3002</p> <p>\u6bd4\u5982\u6709\u5982\u4e0b\u5e94\u7528\uff1a</p> <p></p> <p>\u4ee5\u53ca\u5728\u8bb8\u591a\u72b6\u6001\u63a7\u5236\u4e2d\u90fd\u6709\u7740\u5e7f\u6cdb\u7684\u5e94\u7528\u3002</p> <p>\u4ece\u7b14\u8bd5\u505a\u9898\u89d2\u5ea6\u6765\u8bf4\uff0c\u683c\u96f7\u7801\u6700\u9ebb\u70e6\u7684\u5176\u5b9e\u662f\u4e0e\u5341\u8fdb\u5236\u6570\u7684\u8f6c\u6362\u3002\uff08\u6b64\u5904 @CSP-S2019-Day1-T1\uff09</p> <p>\u6280\u5de7</p> <ol> <li>zmm\u8001\u5e08\u4e0a\u8bfe\u4e5f\u8bb2\u89e3\u8fc7\u4e00\u79cd\u7c7b\u4f3c\u4e8e\u955c\u9762\u6620\u5c04\u4e0d\u65ad\u5ef6\u62d3\u7684\u65b9\u6cd5\uff0c\u6bd4\u8f83\u5b9e\u7528\u3002</li> <li>\u4e2a\u4eba\u8ba4\u4e3a\u53ef\u4ee5\u66ff\u8eab\u601d\u7ef4\u505a\u6cd5\u5c31\u662f\uff0c\u5047\u8bbe\u6211\u4eec\u8981\u627e\u7684\u662f\u7b2c k \u4e2a\u683c\u96f7\u7801\uff0c\u5219\u5bf9\u5e94\u7684\u683c\u96f7\u7801\u4e3a\uff1a</li> </ol> \\[ k \\;\\;\\mathrm{XOR}\\;\\; (k&gt;&gt;1) \\] <ol> <li>\u6b64\u5916\u8bb0\u5f97\u6ce8\u610f0-9\u7684\u683c\u96f7\u7801\uff0c9\u6240\u5bf9\u5370\u7684\u683c\u96f7\u7801\u662f<code>1000</code>\u800c\u4e0d\u662f<code>1101</code></li> </ol> <p>\u6c47\u603b\uff1a </p>"},{"location":"ZJU_CS/DigitalDesign/Chap01/#ascii","title":"ASCII \u7801","text":"<p>\u5b57\u7b26\u7f16\u7801\u6240\u4f7f\u7528\u7684\u4e00\u822c\u662f ASCII \u7f16\u7801\uff0c\u7531\u4e8e ASCII \u5df2\u7ecf\u662f\u8001\u751f\u5e38\u8c08\u4e86\uff0c\u6240\u4ee5\u8fd9\u91cc\u4e0d\u518d\u5c55\u5f00\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap01/#_4","title":"\u5947\u5076\u6821\u9a8c\u4f4d","text":"<p>\u4fe1\u9053\u7f16\u7801\u4e0e\u4fe1\u6e90\u7f16\u7801\uff1a</p> <p></p> <p>\u5728\u4fe1\u53f7\u4f20\u8f93\u8fc7\u7a0b\u4e2d\uff0c\u53ef\u80fd\u7531\u4e8e\u73af\u5883\u5e72\u6270\u7b49\u539f\u56e0\uff0c\u51fa\u73b0\u5404\u79cd\u4fe1\u53f7\u6296\u52a8\uff0c\u6240\u4ee5\u4e3a\u4e86\u4fdd\u8bc1\u6570\u636e\u7684\u53ef\u4fe1\u5ea6\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u9519\u8bef\u68c0\u6d4b\u673a\u5236\u3002</p> <p>\u4e00\u79cd\u5e38\u89c1\u7684\u65b9\u6cd5\u662f \u5197\u4f59(Redundancy)\uff0c\u5373\u52a0\u5165\u4e00\u4e9b\u989d\u5916\u7684\u4fe1\u606f\u7528\u4ee5\u6821\u9a8c\u3002</p>  graph TD A[Error Detection Techniques] B[Single Parity Check] C[Cyclic Redundancy Check] D[Check Sum]  A--&gt;B A--&gt;C A--&gt;D   <p>\u5176\u4e2d\u4e00\u79cd\u505a\u6cd5\u662f\u5f15\u5165 \u5947\u5076\u6821\u9a8c\u4f4d(Parity Bit)\u3002\u5b83\u5206\u4e3a \u5947\u6821\u9a8c(Odd Parity) \u548c \u5076\u6821\u9a8c(Even Parity)\u3002\u5206\u522b\u901a\u8fc7\u5f15\u5165\u989d\u5916\u7684\u4e00\u4f4d\uff08\u52a0\u5728\u6700\u540e\uff09\uff0c\u6765\u4fdd\u8bc1\u6574\u4e2a\u4fe1\u606f\u4e32\u4e2d <code>1</code> \u7684\u6570\u91cf\u662f\u5947\u6570/\u5076\u6570\u3002</p> <p>\u7528\u4eba\u8bdd\u5c06\uff0c\u5c31\u662f\u5728\u6570\u5b57\u540e\u9762\u88650/1\u6765\u4f7f\u6570\u5b57\u6ee1\u8db3\u5947\u6570\u4e2a\u6216\u8005\u5076\u6570\u4e2a1\uff0c\u4ee5\u6b64\u6765\u68c0\u9a8c\u4fe1\u606f\u662f\u5426\u6b63\u786e\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/","title":"Chap 2 Combinational Logic Circuits","text":"<p>abstract</p> \u672c\u7ae0\u8bf4\u660e\u76ee\u5f55 <p>\u9644\u6ce8\uff1a\u672c\u8282\u539f\u7b14\u8005\u5728\u8f83\u591a\u7bc7\u5e45\u5f3a\u8c03\u4e860/1\u7684\u76f8\u5bf9\u6027\uff0c\u867d\u7136\u7bc7\u5e45\u8f83\u957f\uff0c\u4f46\u5e0c\u671b\u5404\u4f4d\u80fd\u9886\u4f1a\u5176\u7cbe\u534e\u6240\u5728\u3002</p> <ul> <li>Chap 2 Combinational Logic Circuits<ul> <li>\u903b\u8f91\u8fd0\u7b97</li> <li>\u903b\u8f91\u95e8<ul> <li>CMOS</li> <li>\u5ef6\u65f6</li> </ul> </li> <li>\u5e03\u5c14\u4ee3\u6570<ul> <li>\u8fd0\u7b97\u5f8b</li> <li>\u8fd0\u7b97\u5f8b\u63a8\u5e7f</li> <li>\u5bf9\u5076\u6cd5\u5219</li> <li>\u4e92\u8865\u51fd\u6570</li> <li>\u66ff\u4ee3\u6cd5\u5219</li> <li>\u4e00\u81f4\u6027\u5b9a\u7406</li> <li>\u5176\u4ed6\u516c\u5f0f</li> </ul> </li> <li>\u6807\u51c6\u5f62\u5f0f\u4e0e\u89c4\u8303\u5f62\u5f0f<ul> <li>\u6700\u5c0f\u9879\u4e4b\u548c SOM</li> <li>\u6700\u5927\u9879\u4e4b\u79ef POM</li> <li>\u7ec3\u4e60</li> </ul> </li> <li>\u7535\u8def\u5b9e\u73b0\u4e0e\u4f18\u5316<ul> <li>\u6210\u672c\u6807\u51c6<ul> <li>\u6309\u7167\u5b57\u9762\u91cf\u5b57\u9762\u91cf\u8ba1</li> <li>\u6309\u95e8\u8f93\u5165\u8ba1</li> </ul> </li> <li>\u5361\u8bfa\u56fe<ul> <li>\u5361\u8bfa\u56fe\u7684\u601d\u60f3</li> <li>\u5361\u8bfa\u56fe\u7684\u5c40\u9650\u6027</li> <li>\u5361\u8bfa\u56fe\u7684\u7ed3\u6784</li> <li>\u4f7f\u7528\u5361\u8bfa\u56fe\u4f18\u5316</li> <li>\u4e0d\u5b9a\u9879</li> <li>\u8574\u542b\u9879\u3001\u4e3b\u8574\u542b\u9879\u4e0e\u57fa\u672c\u4e3b\u8574\u542b\u9879</li> </ul> </li> </ul> </li> <li>\u7ecf\u5178\u7ec4\u5408\u7535\u8def<ul> <li>\u4e09\u6001\u95e8</li> <li>\u590d\u6742\u95e8</li> <li>Universal Gate</li> </ul> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_1","title":"\u903b\u8f91\u8fd0\u7b97","text":"<p>\u903b\u8f91\u8fd0\u7b97\u7684\u5bf9\u8c61\u662f\u5e03\u5c14\u53d8\u91cf\uff0c\u4e5f\u5c31\u662f 0/1 \u4e8c\u503c\u3002</p> <p>\u4e3b\u8981\u7684\u8fd0\u7b97\u5c31\u662f \u4e0e(AND)\uff0c\u6216(OR)\uff0c\u975e(NOT)\uff0c\u5f02\u6216(XOR)\uff0c\u4ee5\u53ca \u4e0e\u975e(NAND)\uff0c\u6216\u975e(NOR)\uff0c\u540c\u6216(XNOR)\u3002</p> <p>\u9ad8\u7ef4</p> <p>\u591a\u8f93\u5165\u7684\u5f02\u6216\u548c\u540c\u6216\u88ab\u79f0\u4e3a\u5947\u51fd\u6570\u548c\u5076\u51fd\u6570\u3002</p> <p>\u5176\u4e2d\u5f02\u6216\u662f\u53ef\u63a7\u903b\u8f91\u95e8</p> <p>\u53ef\u4ee5\u7528\u5b83\u4eec\u6765\u5b9e\u73b0\u5947\u6821\u9a8c\u548c\u5076\u6821\u9a8c\u3002</p> <p>\u800c\u4e14\u89c2\u5bdf\u5176\u5361\u8bfa\u56fe\u7684\u5f62\u72b6\uff08\u68cb\u76d8\u5f62\uff09\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u5b83\u4eec\u662f\u5929\u7136\u4f18\u5316\u7684\uff0c\u5373\u4e0d\u53ef\u4f18\u5316\u7684\u3002</p> <p>\u8fd0\u7b97\u89c4\u5219\u633a\u7b80\u5355\u7684\uff0c\u5728\u6b64\u7565\u53bb\u3002</p> <p>\u6bd4\u8f83\u57fa\u7840\u7684\uff0c\u9700\u8981\u4e86\u89e3\u4e0e\u6216\u975e\u7684\u7b26\u53f7\u8868\u793a\u3002</p> <ul> <li><code>A</code> <code>AND</code> <code>B</code> \u5199\u4f5c\\(A \\cdot B\\)\u6216\u8005\\(AB\\)\uff1b</li> <li><code>A</code> <code>OR</code> <code>B</code> \u5199\u4f5c\\(A+B\\)\uff1b</li> <li><code>NOT A</code> \u5199\u4f5c\\(\\overline{A}\\)\uff1b</li> <li><code>XOR</code> \u5199\u4f5c\\(\\overline{A}B+A\\overline{B}\\)</li> </ul> <p>\u7531\u6b64\u53ef\u4ee5\u8fdb\u884c\u4e00\u4e9b\u7ec4\u5408\uff0c\u4f8b\u5982\uff1a</p> <ul> <li><code>A</code> <code>NOR</code> <code>B</code> \u53ef\u5199\u4f5c \\(\\overline{A+B}\\)\uff1b</li> <li><code>A</code> <code>NAND</code> <code>B</code> \u53ef\u5199\u4f5c \\(\\overline{A\\cdot B}\\)\uff1b</li> </ul> <p>\u518d\u6b21\u8fd8\u9700\u8981\u63d0\u5230\u7684\u662f \u5fb7\u00b7\u6469\u6839\u5b9a\u5f8b(De Morgan's Laws)\uff0c\u5176\u8868\u8ff0\u4e3a\uff1a(\u4e0e\u6982\u7387\u8bba\u4e2d\u5341\u5206\u76f8\u4f3c)</p> <ul> <li>\\(\\overline{A+B} = \\overline{A}\\cdot\\overline{B}\\)\uff1b</li> <li>\\(\\overline{A\\cdot B} = \\overline{A}+\\overline{B}\\)\uff1b</li> </ul>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_2","title":"\u903b\u8f91\u95e8","text":"<p>\u903b\u8f91\u95e8\u662f\u5728\u786c\u4ef6\u5c42\u9762\u4e0a\u5b9e\u73b0\u5e03\u5c14\u4ee3\u6570\u7684\u903b\u8f91\u5355\u5143\u3002\u5176\u64cd\u4f5c\u5bf9\u8c61\u4e3a\u9ad8\u4f4e\u7535\u5e73\u3002</p> <p></p> <p>\u5982\u56fe\uff0c(a)\u4e2d\u7ed8\u5236\u4e86\u4e09\u4e2a\u5e38\u7528\u903b\u8f91\u95e8\u7684\u7b26\u53f7\uff1b(b)\u4e2d\u5219\u63cf\u8ff0\u4e86\u8fd9\u4e9b\u8fd0\u7b97\u5728 \u65f6\u5e8f\u56fe(timing diagram) \u4e2d\u7684\u72b6\u6001\uff1b\u00a9\u5219\u63cf\u8ff0\u4e86\u5728\u5ef6\u65f6\uff08\u89c1\u4e0b\uff09\u6548\u5e94\u4e0b\u7684\u65f6\u5e8f\u56fe\u3002</p> <p>\u8fd8\u6709\u4e00\u4e2a\u6ce8\u610f\u70b9\u662f\uff0c\u975e\u95e8\u5176\u5b9e\u66f4\u591a\u7684\u88ab\u79f0\u4e3a inverter\uff0c\u800c\u975e NOT\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#cmos","title":"CMOS","text":""},{"location":"ZJU_CS/DigitalDesign/Chap02/#_3","title":"\u5ef6\u65f6","text":"<p>\u4f46\u662f\u7531\u4e8e\u662f\u7269\u7406\u5c42\u9762\u7684\u5b9e\u73b0\uff0c\u6240\u4ee5\u4f1a\u6709\u4e00\u4e9b\u903b\u8f91\u8fd0\u7b97\u5c42\u9762\u4e0d\u4f1a\u51fa\u73b0\u7684\u95ee\u9898\uff0c\u6bd4\u5982 \u5ef6\u65f6(delay)\u3002</p> <p></p> <p>Source: https://en.wikipedia.org/wiki/Signal_propagation_delay#Electronics</p> <p>\u5ef6\u65f6\u7684\u957f\u77ed\u4e0e\u5f88\u591a\u56e0\u7d20\u6709\u5173\uff0c\u53d6\u51b3\u4e8e\u903b\u8f91\u95e8\u7684\u5b9e\u73b0\u6280\u672f\u3002\u800c\u4e14\u901a\u5e38\u6765\u8bf4\uff0c\u5bf9\u4e8e\u4e0d\u540c\u8fd0\u7b97\u53c2\u6570\uff0c\u5176\u5ef6\u65f6\u4e5f\u4f1a\u6709\u4e0d\u540c\u3002</p> <p>\u6b64\u5916\uff0c\u4e0e\u95e8\u548c\u6216\u95e8\u53ef\u80fd\u6709\u66f4\u591a\u7684\u8f93\u5165\u5f15\u811a\uff0c\u5982\u4e0b\uff1a</p> <p></p> <p>\u81f3\u6b64\uff0c\u7ed9\u51fa\u4e86 AND, OR, NOT \u4e09\u4e2a\u95e8\u7684\u7b26\u53f7\u8868\u793a\uff0c\u7c7b\u4f3c\u4e0a\u4e00\u5c0f\u8282\u63d0\u5230\u7684\u90a3\u6837\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5229\u7528\u8fd9\u4e09\u4e2a\u57fa\u7840\u7684\u95e8\u7535\u8def\u6765\u6784\u6210\u5176\u4ed6\u7684\u95e8\u7535\u8def\uff08\u867d\u7136\u901a\u5e38\u6765\u8bf4\uff0c\u6211\u4eec\u53ef\u80fd\u662f\u901a\u8fc7 NAND + NOT \u6765\u5b9e\u73b0 AND \u7684\uff09\u3002</p> <p>\u4e8e\u662f\u53c8\u5f15\u7533\u51fa\u4e00\u4e2a\u6982\u5ff5\u2014\u2014\u901a\u7528\u95e8(Universal Gate)\u3002\u4e00\u4e2a\u529f\u80fd\u5b8c\u5168\u7684\uff0c\u80fd\u591f\u8868\u793a\u5176\u4ed6\u6240\u6709\u95e8\u7684\u903b\u8f91\u95e8\u88ab\u79f0\u4e3a\u901a\u7528\u95e8\uff0c\u5728\u6211\u4eec\u5b66\u8fc7\u7684\u903b\u8f91\u95e8\u4e2d\uff0cNAND \u548c NOR \u90fd\u662f\u901a\u7528\u95e8\u3002</p> <p>\u63a8\u8350\u9605\u8bfb</p> <ul> <li>Title: Universal Logic Gates</li> <li>URL: https://www.electronics-tutorials.ws/logic/universal-gates.html</li> <li>Video: https://www.bilibili.com/video/BV1EW411u7th/</li> </ul> <p>Universal Logic gates can be used to produce any other logic or Boolean function with the NAND and NOR gates being minimal</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_4","title":"\u5e03\u5c14\u4ee3\u6570","text":"<p>literal ~ \u5b57\u9762\u91cf\uff0c\u4e5f\u5c31\u662f\u201c\u53d8\u91cf\u201d\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f, \u5982\u679c\u5df2\u77e5  \\(X+Y= X+Z\\) \u6216  \\(XY = XZ\\) , \u6211\u4eec\u4e0d\u80fd\u76f4\u63a5\u5f97\u5230  \\(Y = Z\\) .(\u4e0d\u80fd\u6d88\u53bb)</p> <p>\u5bf9\u4e8e\u6bcf\u2f00\u4e2a\u5e03\u5c14\u51fd\u6570, \u5b83\u7684\u771f\u503c\u8868\u662f\u552f\u2f00\u7684, \u4f46\u662f\u7ed9\u5b9a\u2f00\u4e2a\u771f\u503c\u8868, \u53ef\u80fd\u6709\u591a\u4e2a\u5e03\u5c14\u51fd\u6570\u4e0e\u4e4b\u5bf9\u5e94.(\u4ece\u5e03\u5c14\u51fd\u6570\u5230\u771f\u503c\u8868\u6620\u5c04\u6ee1\u5c04\u4f46\u4e0d\u5355\u5c04)</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_5","title":"\u8fd0\u7b97\u5f8b","text":"<p>\u8fd9\u5f20\u56fe\u7247\u603b\u7ed3\u4e86\u5e03\u5c14\u8fd0\u7b97\u4e2d\u7684\u8fd0\u7b97\u5f8b\uff0c\u4e2a\u4eba\u611f\u89c9\u6700\u9700\u8981\u5f3a\u5316\u8bb0\u5fc6\u7684\u662f 15 \u6761\uff0c\u56e0\u4e3a\u5e03\u5c14\u4ee3\u6570\u501f\u7528\u4e86\u666e\u901a\u4ee3\u6570\u7684\u7b26\u53f7\uff0c\u4f46\u7b2c 15 \u6761\u5728\u666e\u901a\u4ee3\u6570\u4e2d\u5e76\u4e0d\u6210\u7acb\uff0c\u6240\u4ee5\u9700\u8981\u6ce8\u610f\u3002</p> <p>\u5728\u8bb0\u5fc6\u8fd9\u5957\u8fd0\u7b97\u89c4\u5f8b\u7684\u65f6\u5019\uff0c\u4e00\u5b9a\u8981\u5efa\u7acb \u4e0e \u548c \u6216 \u662f\u5bf9\u7b49\u7684\u89c2\u5ff5\u3002\u6211\u4eec\u4e60\u60ef\u7528\u201c\u771f\u201d\u53bb\u7406\u89e3\u8fd9\u4e24\u4e2a\u8fd0\u7b97\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u5982\u679c\u4f60\u4ee5\u201c\u5047\u201d\u4e3a\u4e3b\u4f53\u53bb\u5206\u6790\u8fd9\u4e24\u4e2a\u8fd0\u7b97\uff0c\u4f1a\u53d1\u73b0\u548c\u201c\u771f\u201d\u662f\u5b8c\u5168\u5bf9\u79f0\u7684\u3002</p> <p>\u4f46\u662f\u8ba9\u8fd9\u4ef6\u4e8b\u53d8\u5f97\u53c8\u6ca1\u90a3\u4e48\u7b80\u5355\u7684\u4e8b\u60c5\u662f\uff0c\u867d\u7136 \u4e0e \u548c \u6216 \u662f\u5bf9\u7b49\u7684\uff0c\u4f46\u662f\u6211\u4eec\u5728\u501f\u7528\u666e\u901a\u4ee3\u6570\u7b26\u53f7\u4f53\u7cfb\u7684\u540c\u65f6\uff0c\u53c8\u4eba\u4e3a\u5730\u7ed9\u4ed6\u4eec\u6dfb\u52a0\u4e86\u4f18\u5148\u7ea7\uff08\u4f46\u662f\u8fd9\u4e5f\u662f\u5fc5\u8981\u7684\uff0c\u5426\u5219\u8868\u8fbe\u5f0f\u5c31\u4f1a\u5145\u6ee1\u62ec\u53f7\uff09\u3002</p> <p>\u4f18\u5148\u7ea7\u4ece\u9ad8\u5230\u4f4e\u4f9d\u6b21\u4e3a\uff1a</p> <ol> <li>\u62ec\u53f7 / ()\uff1b</li> <li>\u975e / NOT / \\(\\overline A\\)\uff1b</li> <li>\u4e0e / AND / \\(\\cdot\\)\uff1b</li> <li>\u6216 / OR / \\(+\\)\uff1b</li> </ol> <p>advice</p> <ol> <li>\u8bf7\u6ce8\u610f3\u30014 \u7684\u4f18\u5148\u7ea7</li> <li>\u5e76\u4e14\u8003\u524d\u53ef\u4ee5\u591a\u52a0\u7ec3\u4e60</li> </ol>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_6","title":"\u8fd0\u7b97\u5f8b\u63a8\u5e7f","text":"<p>\u9664\u6b64\u4e4b\u5916\uff0c\u4ece\u4e0a\u9762\u63d0\u5230\u7684\u8fd0\u7b97\u5f8b\u4e2d\u8fd8\u80fd\u63a8\u5e7f\u51fa\u5982\u4e0b\u51e0\u4e2a\u6a21\u578b\uff0c\u6bd4\u8f83\u91cd\u8981\uff1a</p> <p></p> <p>\u6d88\u9664\u5f8b\u771f\u7684\u5f88\u91cd\u8981</p> <p>\\(A + \\overline{A}B = A + B\\)</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_7","title":"\u5bf9\u5076\u6cd5\u5219","text":"<p>\u5bf9\u5076\u6cd5\u5219(Duality Rule)\uff1a\u4e00\u4e2a\u8868\u8fbe\u5f0f\u7684 \u5bf9\u5076(dual) \u4e3a\uff0c\u5c06\u6240\u6709\u7684 \u4e0e \u548c \u6216 \u5bf9\u8c03\u5f97\u5230\u7684\u5f0f\u5b50\uff08\u6ce8\u610f\uff01\u9700\u8981\u4fdd\u8bc1\u53c2\u4e0e\u8fd0\u7b97\u7684\u7ed3\u6784\u4e0d\u80fd\u53d8\uff08\u662f\u201c\u5e26\u62ec\u53f7\u201d\u7684\u5b8f\u5c55\u5f00\uff09\uff0c\u6bd4\u5982 \u4e00\u822c\u60c5\u51b5\u4e0b \\(A\\cdot B\\) \u4f1a\u88ab\u5bf9\u5076\u4e3a \\((A+B)\\) \u4ee5\u4fdd\u8bc1\u8fd0\u7b97\u987a\u5e8f\uff09\u3002</p> <p>eg</p> <ul> <li>\\(X+XY\\) \u548c \\(X(X+Y)\\) \u5bf9\u5076\uff1b</li> <li>\\(X(Y+Z)\\) \u548c \\(X+YZ\\) \u5bf9\u5076\uff1b</li> </ul> <p>\u800c\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u9664\u975e\u67d0\u4e2a\u8868\u8fbe\u5f0f\u662f \u81ea\u5bf9\u5076(self-dual) \u7684\uff0c\u90a3\u4e48\u5b83\u7684\u8868\u73b0\u90fd\u4e0e\u539f\u8868\u8fbe\u5f0f\u4e0d\u540c\u3002</p> <p>\u5bf9\u5076\u8868\u8fbe\u5f0f\u5177\u6709\u5982\u4e0b\u6027\u8d28\uff1a</p> <ul> <li>\u5982\u679c F \u7684\u5bf9\u5076\u662f G\uff0c\u90a3\u4e48 F \u4e5f\u662f G \u7684\u5bf9\u5076\uff0c\u5373\u5bf9\u5076\u5173\u7cfb\u662f\u5bf9\u6210\u7684\uff1b</li> <li>\u5982\u679c\u8868\u8fbe\u5f0f F \u548c G \u7b49\u4ef7\uff0c\u90a3\u4e48\u4ed6\u4eec\u7684\u5bf9\u5076\u4e5f\u7b49\u4ef7\uff1b</li> </ul>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_8","title":"\u4e92\u8865\u51fd\u6570","text":"<p>\u4e00\u4e2a \u51fd\u6570\u7684\u4e92\u8865(Complement of a Function) \u6307\u7684\u662f\uff0c\u5c06\u5b83\u7684 \u5bf9\u5076\u51fd\u6570 \u4e2d\u6bcf\u4e00\u4e2a \u53d8\u91cf \u90fd\u53d6\u53cd\u5f97\u5230\u7684\u51fd\u6570\uff0c\u800c\u8be5\u51fd\u6570\u6b63\u597d\u7b49\u4e8e\u539f\u51fd\u6570\u7684 \u975e(\u771f\u503c\u88680/1\u5bf9\u8c03)\u3002</p> <p>eg</p> <ul> <li>\u539f\u51fd\u6570\uff1a\\(F=\\overline{A}B+C\\overline{B}\\)\uff1b</li> <li>\u5176\u5bf9\u5076\u51fd\u6570\uff1a\\(F=(\\overline{A}+B)(C+\\overline{B})\\)\uff1b</li> <li>\u5176\u4e92\u8865\u51fd\u6570\uff1a\\(\\overline{F}=(A+\\overline{B})(\\overline{C}+D)\\)\uff1b\uff08\u5f53\u7136\u6211\u4eec\u4e5f\u53ef\u4ee5\u5bf9\u539f\u51fd\u6570\u76f4\u63a5\u53d6\u53cd\uff09</li> </ul>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_9","title":"\u66ff\u4ee3\u6cd5\u5219","text":"<p>\u66ff\u4ee3\u6cd5\u5219(Substitution Rules): \u5982\u679c\u5c06\u4e00\u4e2a\u7b49\u5f0f\u4e2d \u6240\u6709\u7684 \u67d0\u4e2a\u53d8\u91cf \u90fd\u66ff\u6362\u4e3a\u540c\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u5219\u7b49\u5f0f\u4f9d\u7136\u6210\u7acb\u3002</p> <p>eg</p> <ul> <li>\u539f\u7b49\u5f0f\uff1a\\(X(Y+Z)=XY+XZ\\)\uff1b</li> <li>\u5982\u679c\u4f7f\u7528 \\(X+YZ\\) \u66ff\u6362\u6240\u6709\u7684 \\(X\\)\uff0c\u5219\uff1a</li> <li>\u4fee\u6539\u540e\u7684\u7b49\u5f0f \\((X+YZ)(Y+Z)=(X+YZ)Y+(X+YZ)Z\\) \u4f9d\u7136\u6210\u7acb\uff1b</li> </ul>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_10","title":"\u4e00\u81f4\u6027\u5b9a\u7406","text":"<p>\u5728\u7b80\u5316\u903b\u8f91\u8868\u8fbe\u5f0f\u7684\u65f6\u5019\uff0c\u4e00\u81f4\u6027\u5b9a\u7406(Consensus Theorem) \u5982\u4e0b\uff08\u6bd4\u8f83\u597d\u7528\uff09\uff1a</p> \\[ XY+\\overline{X}Z+YZ=XY+\\overline{X}Z \\] <p>\u5176\u8bc1\u660e\u7684\u7b2c\u4e00\u6b65\u662f\u8fd9\u6837\u7684\uff1a \\(XY+\\overline{X}Z+YZ=XY+\\overline{X}Z+(X+\\overline{X})YZ\\)\uff0c\u90a3\u540e\u9762\u5c31\u5f88\u7b80\u5355\u4e86\u3002\u672c\u8d28\u4e0a\u8fd9\u4e2a\u7b49\u5f0f\u662f\u5229\u7528\u4e86\u88c2\u9879\uff0c\u9700\u8981\u5c06\u5176\u4e2d\u6700\u672c\u8d28\u7684\u90e8\u5206\uff0c\u6700\u5c0f\u7684\u7c92\u5ea6\u7ed9\u88c2\u5f00\u6765\uff0c\u7136\u540e\u518d\u6162\u6162\u6d88\u6389\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_11","title":"\u5176\u4ed6\u516c\u5f0f","text":""},{"location":"ZJU_CS/DigitalDesign/Chap02/#_12","title":"\u6807\u51c6\u5f62\u5f0f\u4e0e\u89c4\u8303\u5f62\u5f0f","text":"<p>\u5c0f\u6d4b\u4f1a\u8003\uff08\u72d7\u5934</p> <p>\u7531\u4e8e\u672c\u8d28\u4e0a\u76f8\u7b49\u7684\u5e03\u5c14\u8868\u8fbe\u5f0f\u5b9e\u9645\u4e0a\u6709\u5f88\u591a\u79cd\u5199\u6cd5\uff0c\u800c\u4e14\u968f\u7740\u53d8\u91cf\u8d8a\u6765\u8d8a\u590d\u6742\uff0c\u4ed6\u4eec\u4e4b\u95f4\u7684\u6bd4\u8f83\u4f1a\u5f88\u56f0\u96be\u3002\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5b9a\u4e49\u4e00\u79cd\u5f62\u5f0f\uff0c\u4f7f\u5f97\u6240\u6709\u76f8\u540c\u7684\u8868\u8fbe\u5f0f\u90fd\u80fd\u6bd4\u8f83\u65b9\u4fbf\u7684\u201c\u5316\u7b80\u201d\u4e3a\u540c\u4e00\u4e2a\u5f62\u5f0f\uff0c\u540c\u65f6\u4e5f\u80fd\u8fa8\u522b\u51fa\u4e24\u4e2a\u8868\u8fbe\u5f0f\u662f\u4e0d\u540c\u7684\u3002</p> <p>\u8fd9\u5c31\u5f15\u5165\u4e86 \u6807\u51c6\u5f62\u5f0f(Standard Forms)\uff0c\u5305\u62ec SOP \u548c POS\uff1b\u4ee5\u53ca \u89c4\u8303\u5f62\u5f0f(Canonical Forms)\uff0c\u5206\u522b\u4e3a \u6700\u5c0f\u9879\u4e4b\u548c(Sum of Minterms)SOM \u548c \u6700\u5927\u9879\u4e4b\u79ef(Product of Maxterms)POM\u3002</p> <p>\u4e3a\u4e86\u65b9\u4fbf\u63cf\u8ff0\uff0c\u5728\u7ee7\u7eed\u4e4b\u524d\uff0c\u6211\u4eec\u5148\u7ed9\u51fa\u8fd9\u6837\u4e00\u5f20 \ud83c\udf30 \u771f\u503c\u8868\u3002</p> \ud83c\udf30 Index X Y Z Output 0 / <code>000</code> <code>0</code> <code>0</code> <code>0</code> <code>0</code> 1 / <code>001</code> <code>0</code> <code>0</code> <code>1</code> <code>0</code> 2 / <code>010</code> <code>0</code> <code>1</code> <code>0</code> <code>1</code> 3 / <code>011</code> <code>0</code> <code>1</code> <code>1</code> <code>0</code> 4 / <code>100</code> <code>1</code> <code>0</code> <code>0</code> <code>1</code> 5 / <code>101</code> <code>1</code> <code>0</code> <code>1</code> <code>1</code> 6 / <code>110</code> <code>1</code> <code>1</code> <code>0</code> <code>0</code> 7 / <code>111</code> <code>1</code> <code>1</code> <code>1</code> <code>1</code> <p>\u6570\u503c\u662f\u968f\u4fbf\u6413\u7684\uff0c\u8bf7\u7559\u610f\u4e3a\u4ec0\u4e48\u4e3a\u8981\u5728 Index \u7279\u5730\u5199\u51fa\u4e8c\u8fdb\u5236\u7684\u8868\u8ff0\u3002</p> <p>\u5728\u5f00\u59cb\u4e4b\u524d\uff0c\u6211\u9700\u8981\u5f3a\u8c03\uff0c\u6211\u4eec\u5f15\u5165 SOM \u548c POM \u7684\u76ee\u7684\u662f\u5bfb\u627e\u4e00\u79cd\u6bd4\u8f83\u5178\u578b\u7684 \u8868\u8fbe\uff0c\u4f7f\u5f97\u4ed6\u4eec\u80fd\u591f \u786e\u5b9a \u4e00\u5f20\u771f\u503c\u8868\u3002\u5373\uff0c\u77e5\u9053\u8fd9\u79cd \u8868\u8fbe \u6211\u4eec\u5c31\u8db3\u591f\u5199\u51fa\u8fd9\u5f20\u771f\u503c\u8868\uff0c\u53cd\u4e4b\u4ea6\u7136\u3002</p> <p>\u6ce8\u610f</p> <p>\u8d77\u521d\u6211\u5728\u770b\u4fee\u4f6c\u7b14\u8bb0\u7684\u65f6\u5019\uff0c\u8ba4\u4e3a\u4ed6\u8fd9\u91cc\u662f\u6709\u4e9b\u201c\u5197\u957f\u201d\u6216\u8005\u8bf4\u5927\u8d39\u7bc7\u7ae0\u7684\uff0c\u4f46\u671f\u672b\u6700\u540e\u4e00\u6b21\u8003\u524d\u68b3\u7406\u7684\u65f6\u5019\u53d1\u73b0\uff0c\u81ea\u5df1\u4e00\u76f4\u6ca1\u6709\u641e\u6e05\u6700\u5c0f\u9879\u7684\u672c\u8d28\u662f\u4ec0\u4e48\u3002</p> <p>\u5efa\u8bae\u8bfb\u8005\u7b2c\u4e00\u6b21\u8bfb\u53ea\u9700\u5efa\u7acb\u4e00\u4e2a\u76f4\u89c2\u611f\u89c9\uff0c\u4e4b\u540e\u53ef\u4ee5\u518d\u56de\u6765\u770b\u4e00\u770b\u8ffd\u52a0\u8bf4\u660e\uff0c\u8fd9\u6837\u4f1a\u5bf9\u7406\u89e3\u975e\u5e38\u6709\u5e2e\u52a9\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#som","title":"\u6700\u5c0f\u9879\u4e4b\u548c SOM","text":"<p>\u8fd9\u91cc\u6211\u4eec\u4e0d\u5f97\u4e0d\u63d0\u53ca\u539f\u4f5c\u8005\u5bf9\u8fd9\u90e8\u5206\u7684\u89e3\u91ca\u6709\u4e9b\u8fc7\u4e8e\u5197\u957f\u4e86\uff0c\u4f46\u6211\u8ba4\u4e3a\u8fd9\u90e8\u5206\u7684\u89e3\u91ca\u662f\u975e\u5e38\u6709\u8da3\u548c\u5177\u6709\u542f\u53d1\u610f\u4e49\u7684\u3002</p> <p>\u8bfe\u672c\u4e2d\u6700\u5c0f\u9879\u7684\u5b9a\u4e49</p> <p>A product term in which all the variables appear exactly once, either complemented or uncomplemented, is called minterm.  Its characteristic property is that it represents exactly one combination of binary variable values in the truth table.</p> <p>\u7528\u6211\u7684\u8bdd\u6765\u8bf4\uff0c\u6700\u5c0f\u9879\u4e4b\u548c\u5c31\u662f\u6311\u51fa\u771f\u503c\u8868\u4e2d\u6240\u6709\u7ed3\u679c\u662f <code>1</code> \u7684\u6700\u5c0f\u9879\uff08\u6bd4\u8f83\u6a21\u7cca\u4f46\u76f4\u89c2\uff0c\u6240\u4ee5\u8bf7\u5148\u56eb\u56f5\u541e\u67a3\uff0c\u6211\u5728\u201c\u8ffd\u52a0\u8bf4\u660e\u201d\u4f1a\u8fdb\u4e00\u6b65\u8bf4\u660e\uff09\u7136\u540e <code>OR</code> \u8d77\u6765\u3002\u663e\u7136\uff0c\u6700\u5c0f\u9879\u4e4b\u548c\u7684\u542b\u4e49\u5c31\u662f\uff0c\u4e00\u65e6\u5b57\u9762\u91cf\u53d6\u503c\u7684\u7ec4\u5408\u5339\u914d\u4e86\u8fd9\u51e0\u4e2a\u201c\u6700\u5c0f\u9879\u201d\u7684\u5176\u4e2d\u4e00\u9879\uff0c\u90a3\u4e48\u7ed3\u679c\u5c31\u662f <code>1</code>\uff0c\u7b26\u5408\u4e86 <code>OR</code> \u7684\u201c\u67091\u5f971\u201d\u7684\u89c4\u5219\u3002</p> <p>\u6211\u4eec\u4f7f\u7528\u7b26\u53f7 \\(m_{idx}\\) \u6765\u8868\u793a\u53d8\u91cf\u7ec4\u5408 \\(idx\\) \u662f\u4e00\u4e2a\u6700\u5c0f\u9879\uff0c\u5176\u4e2d \\(idx\\) \u8868\u793a\u63cf\u8ff0\u7684\u90a3\u4e00\u9879\u5728\u771f\u503c\u8868\u7684\u5e8f\u53f7\uff0c\u540c\u65f6\u8fd9\u4e2a\u4e0b\u6807\u7684\u4e8c\u8fdb\u5236\u4e5f\u80fd\u53cd\u6620\u51fa\u5b57\u9762\u91cf\u7684\u7ec4\u5408\u3002</p> <p>\u4f8b\u5982\uff0c\u5728 \ud83c\udf30 \u4e2d\uff0coutput \u4e3a <code>1</code> \u7684\u9879\u6709\uff1a<code>010</code> <code>100</code> <code>101</code> <code>111</code> \u8fd9\u56db\u9879\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u6311\u51fa\u6765\u7684\u6700\u5c0f\u9879\u8868\u8fbe\u5c31\u5206\u522b\u662f \\(m_{2}=\\overline{X}Y\\overline{Z}, \\; m_{4}=X\\overline{Y}\\overline{Z}, \\; m_{5}=X\\overline{Y}Z, \\; m_{7}=XYZ\\)\uff0c\u8fd9\u4e9b\u53d8\u91cf\u8868\u8fbe\u5f0f\u90fd\u662f\u5f53\u4e14\u4ec5\u5f53\u53d8\u91cf\u7ec4\u5408\u4e3a\u5bf9\u5e94\u9879\u65f6\u624d\u4f1a\u53d6 <code>1</code> \u7684\u8868\u8fbe\u5f0f\uff0c\u53ef\u4ee5\u8ba4\u4e3a\uff0c\u8fd9\u4e9b\u8868\u8fbe\u5f0f\u552f\u4e00\u8868\u8fbe\u4e86\u8fd9\u4e9b\u771f\u503c\u8868\u4e2d\u7684 <code>1</code>\u3002</p> \u8ffd\u52a0\u8bf4\u660e\uff08\u7b80\u5355\uff0c\u4f46\u662f\u5efa\u8bae\u770b\u4e00\u770b\uff09 <p>\u6216\u8bb8\u60a8\u89c9\u5f97\u6700\u5c0f\u9879\u7684\u5f97\u5230\u975e\u5e38\u7684\u81ea\u7136\u4e14\u7b80\u5355\uff0c\u6211\u5efa\u8bae\u60a8\u4e5f\u5c1d\u8bd5\u7740\u770b\u4e00\u770b\u8ffd\u52a0\u8bf4\u660e\uff0c\u56e0\u4e3a\u8fd9\u5bf9\u7406\u89e3\u6700\u5927\u9879\u633a\u6709\u5e2e\u52a9\u7684\u3002</p> <p>\u90a3\u4e48\u4ec0\u4e48\u662f\u201c\u5217\u4e3e\u201d\u5462\uff1f\u8ba9\u6211\u4eec\u518d\u770b\u4e00\u773c\u4e0a\u9762\u5bf9\u6700\u5c0f\u9879\u4e4b\u548c\u7684\u63cf\u8ff0\uff1a\u201c\u4e00\u65e6\u5b57\u9762\u91cf\u53d6\u503c\u7684\u7ec4\u5408\u5339\u914d\u8fd9\u51e0\u4e2a\u2018\u6700\u5c0f\u9879\u2019\u7684\u5176\u4e2d\u4e00\u9879\uff0c\u90a3\u4e48\u7ed3\u679c\u5c31\u662f\u771f\u201d\uff0c\u8ffd\u672c\u6eaf\u6e90\uff0c\u5728\u6700\u5c0f\u9879\u4e2d\uff0c\u6211\u4eec\u5c31\u9700\u8981\u505a\u5230\u53ea\u6709\u5f53\u4e00\u4e2a\u7535\u8def\u7684\u72b6\u6001\u662f\u7279\u5b9a\u7ec4\u5408\u65f6\uff0c\u5176\u8fd4\u56de\u503c\u4e3a <code>1</code>\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u6bd4\u5982\uff0c\u5bf9\u4e8e \ud83c\udf30 \u4e2d\u7684 \\(m_{5}=X\\overline{Y}Z\\)\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u8fd9\u6837\u4e00\u79cd\u66f4\u5570\u55e6\u7684\u65b9\u5f0f\u8868\u8fbe\u51fa\u6765\u662f\u8fd9\u6837\u7684\uff1a</p> <pre><code>if(X == 1 &amp;&amp; Y == 0 &amp;&amp; Z == 1) {\n    Output = 1;\n} else {\n    Output = 0;\n}\n</code></pre> <p>\uff08\u5faa\u5e8f\u6e10\u8fdb\uff09\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u53d8\u5316\u4e3a\u8fd9\u6837\uff1a</p> <pre><code>if(X == 1 &amp;&amp; (!Y) == 1 &amp;&amp; Z == 1) {\n    Output = 1;\n} else {\n    Output = 0;\n}\n</code></pre> <p>\u5982\u679c\u4f60\u719f\u6089\u201c\u538b\u884c\u201d\u6280\u5de7\uff0c\u90a3\u4e48\u8fd9\u4e00\u6bb5\u90fd\u53ef\u4ee5\u5199\u6210\uff1a</p> <pre><code>Output = (X == 1 &amp;&amp; (!Y) == 1 &amp;&amp; Z == 1);\n</code></pre> <p>\u800c\u8fd9\u4e2a\u903b\u8f91\u8868\u8fbe\u5f0f\uff0c\u5b9e\u9645\u4e0a\u5df2\u7ecf\u548c \\(m_5=X\\overline{Y}Z\\) \u4e00\u6a21\u4e00\u6837\u4e86\u3002</p> <p>\u5728\u8fd9\u91cc\u7ed9\u51fa\u4e00\u4e2a\u603b\u7ed3\u6027\u7684\u8868\u8ff0\uff1a\u6240\u8c13\u7684\u201c\u6311\u51fa\u201d\uff0c\u5c31\u662f\u5bf9\u4e8e\u9009\u5b9a\u7684\u4e00\u4e2a\u5b57\u9762\u91cf\u53d6\u503c\u7684\u7ec4\u5408\uff0c\u7ed9\u51fa\u4e00\u4e2a\u7279\u5b9a\u7684\u8868\u8fbe\u5f0f\uff0c\u4f7f\u5f97\u53ea\u6709\u8fd9\u79cd\u7ec4\u5408\u7684\u7ed3\u679c\u662f \\(f\\)\uff0c\u800c\u5bf9\u4e8e\u4efb\u4f55\u5176\u4ed6\u53d6\u503c\u7684\u7ec4\u5408\uff0c\u8be5\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u90fd\u662f \\(\\overline{f}\\)\uff0c\u5373\u5b9e\u73b0\u4e86\u8be5\u8868\u8fbe\u5f0f\u80fd \u552f\u4e00\u8868\u8fbe \u8fd9\u4e2a\u53d6\u503c\u7ec4\u5408\u3002\uff08\u8fd9\u91cc\u4e4b\u6240\u4ee5\u5199\u7684\u662f \\(f\\) \u800c\u4e0d\u662f <code>1</code>\uff0c\u662f\u4e3a\u4e86\u7ed9\u4e4b\u540e\u5206\u6790 POM \u505a\u94fa\u57ab\uff0c\u5bf9\u4e8e POM\uff0c<code>0</code> \u624d\u662f\u552f\u4e00\u8868\u8fbe\u7684\u7279\u5f81\u7ed3\u679c\u3002\uff09</p> <p>\u81f3\u6b64\uff0c\u6211\u4eec\u5f97\u5230\u4e86 \ud83c\udf30 \u6240\u5bf9\u5e94\u7684 SOM\uff1a</p> \\[ \\begin{array}{l}     F(X,Y,Z)     &amp; = \\sum m(2,4,5,7) \\\\     &amp; = m_2+m_4+m_5+m_7 \\\\     &amp; = \\overline{X}Y\\overline{Z}+X\\overline{Y}\\,\\overline{Z}+X\\overline{Y}Z+XYZ \\end{array} \\] <p>\u518d\u6b21\u5f52\u7eb3\uff0c\u4f7f\u7528\u901a\u4fd7\u7684\u8bdd\u6765\u8bf4\uff0c\u6700\u5c0f\u9879\u4e4b\u548c\u66f4\u50cf\u662f\u201c\u679a\u4e3e\u4e86\u6240\u6709 <code>1</code> \u7684\u53ef\u80fd\u201d\uff0c\u53ea\u8981\u5339\u914d\u4e86\u8fd9\u4e2a\u201c\u548c\u201d\u4e2d\u7684\u67d0\u4e00\u9879\uff08\u4e8b\u5b9e\u4e0a\u4e0d\u505a\u5316\u7b80\u7684\u8bdd\u4f60\u4e5f\u53ea\u80fd\u6ee1\u8db3\u4e00\u9879\u7684\u503c\u53d6\u5230 <code>1</code>\uff09\uff0c\u8868\u8fbe\u5f0f\u7684\u503c\u5c31\u4f1a\u53d8\u6210 <code>1</code>\uff1b\u800c\u4e00\u4e2a\u90fd\u4e0d\u5339\u914d\u7684\uff0c\u81ea\u7136\u5c31\u53ea\u80fd\u5f97\u5230 <code>0</code>\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#pom","title":"\u6700\u5927\u9879\u4e4b\u79ef POM","text":"<p>\u5c31\u50cf\u6211\u4e4b\u524d\u4e0d\u65ad\u4e0d\u65ad\u4e0d\u65ad\u5f3a\u8c03\u7684\uff0c\u6240\u8c13\u7684 <code>1</code> \u548c <code>0</code> \u90fd\u53ea\u662f\u4eba\u4e3a\u5b9a\u4e49\u7684\uff0c\u6446\u8131\u6f5c\u610f\u8bc6\u91cc\u5bf9\u8fd9\u4e24\u8005\u4e4b\u4e00\u7684\u503e\u5411\uff08\u4f8b\u5982\u6211\u672c\u4eba\u5c31\u4e00\u76f4\u5f88\u503e\u5411\u4e8e\u4ee5 <code>1</code> \u4e3a\u4e3b\u4f53\u7814\u7a76\u95ee\u9898\uff09\u4f1a\u5bf9\u7406\u89e3\u6700\u5927\u9879\u4e4b\u79ef\u548c\u903b\u8f91\u8868\u8fbe\u5f0f\u5316\u7b80\u5f88\u6709\u5e2e\u52a9\u3002</p> <p>\u800c\u6700\u5927\u9879\u4e4b\u79ef\u2014\u2014\u4ee5\u6211\u4e2a\u4eba\u7684\u611a\u89c1\u2014\u2014\u5c31\u662f\u4ee5 <code>0</code> \u4e3a\u4e3b\u4f53\u6765\u7814\u7a76\u771f\u503c\u8868\u7684\u7279\u5f81\u7684\u3002</p> <p>\u8bfe\u672c\u4e2d\u5bf9\u6700\u5927\u9879\u7684\u5b9a\u4e49</p> <p>A sum term that contains all the variables in complemented or uncomplemented form is called a maxterm.</p> <p>\u4e0e\u6700\u5c0f\u9879\u5bf9\u6bd4\uff0c\u65e0\u975e\u662f\u628a \"product term\" \u6362\u6210\u4e86 \"sum term\"\uff0c\u4e5f\u5c31\u662f\u628a AND \u6362\u6210\u4e86 OR\u3002</p> <p>\u800c\u6700\u5927\u9879\u4e4b\u79ef\uff0c\u5c31\u662f\u6311\u51fa\u6240\u6709\u7ed3\u679c\u4e3a <code>0</code> \u7684\u6700\u5927\u9879\uff08\u201c\u6311\u51fa\u201d\u7684\u5b9a\u4e49\u6211\u5df2\u7ecf\u5728 SOM \u7684\u8ffd\u52a0\u8bf4\u660e\u4e2d\u7ed9\u51fa\uff0c\u5728 POM \u7684\u8ffd\u52a0\u8bf4\u660e\u4e2d\u6211\u8fd8\u4f1a\u518d\u4e00\u6b21\u63d0\u53ca\uff09\uff0c\u518d\u505a AND\u3002\u4ee5 <code>1</code> \u4e3a\u4e3b\u4f53\u63cf\u8ff0 AND \u662f\u201c\u90fd1\u51fa1\u201d\uff0c\u800c\u4ee5 <code>0</code> \u4e3a\u4e3b\u4f53\u63cf\u8ff0 AND \u5219\u662f\u201c\u67090\u51fa0\u201d\uff0c\u8fd9\u4e0e OR \u7684\u201c\u67091\u51fa1\u201d\u4e5f\u662f\u9ad8\u5ea6\u5bf9\u79f0\u7684\uff08\u53cd\u4e4b\u4ea6\u7136\uff09\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6700\u5927\u9879\u4e4b\u79ef\u7684\u542b\u4e49\u662f\uff0c\u5728\u6700\u5927\u9879\u4e4b\u79ef\u4e2d\uff0c\u53ea\u8981\u5b57\u9762\u91cf\u53d6\u503c\u7684\u7ec4\u5408\u5339\u914d\u8fd9\u51e0\u4e2a\u201c\u6700\u5927\u9879\u201d\u7684\u5176\u4e2d\u4e00\u9879\uff0c\u6574\u4e2a\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u5c31\u4f1a\u53d8\u6210 <code>0</code>\u3002</p> <p>\u7c7b\u4f3c\u7684\uff0c\u6211\u4eec\u4f7f\u7528\u7b26\u53f7 \\(M_{idx}\\) \u6765\u8868\u793a\u53d8\u91cf\u7ec4\u5408 \\(idx\\) \u662f\u4e00\u4e2a\u6700\u5927\u9879\uff0c\u5176\u4e2d \\(idx\\) \u8868\u793a\u63cf\u8ff0\u7684\u90a3\u4e00\u9879\u5728\u771f\u503c\u8868\u7684\u5e8f\u53f7\uff0c\u540c\u65f6\u8fd9\u4e2a\u4e0b\u6807\u7684\u4e8c\u8fdb\u5236\u4e5f\u80fd\u53cd\u6620\u51fa\u5b57\u9762\u91cf\u7684\u7ec4\u5408\u3002</p> <p>\u4f8b\u5982\uff0c\u5728 \ud83c\udf30 \u4e2d\uff0coutput \u4e3a <code>0</code> \u7684\u9879\u6709\uff1a<code>000</code> <code>001</code> <code>011</code> <code>110</code> \u8fd9\u56db\u9879\uff0c\u90a3\u4e48\u6211\u4eec\u9700\u8981\u6311\u51fa\u6765\u7684\u6700\u5c0f\u9879\u8868\u8fbe\u5c31\u5206\u522b\u662f\\(M_{0}=X+Y+Z, \\; M_{1}=X+Y+\\overline{Z}, \\; M_{3}=X+\\overline{Y}+\\overline{Z}, \\; M_{6}=\\overline{X}+\\overline{Y}+Z\\)\u3002\u53ef\u4ee5\u68c0\u9a8c\uff0c\u53ea\u6709\u4ee3\u5165\u4ed6\u4eec\u5bf9\u5e94\u7684\u90a3\u4e00\u884c\u771f\u503c\u8868\u7ec4\u5408\u65f6\uff0c\u4ed6\u4eec\u624d\u4f1a\u5f97\u5230 <code>0</code>\u3002</p> \u8ffd\u52a0\u8bf4\u660e <p>\u540c\u6837\u7684\uff0c\u56de\u987e\u6700\u5927\u9879\u4e4b\u79ef\u7684\u63cf\u8ff0\uff1a\u201c\u5728\u6700\u5927\u9879\u4e4b\u79ef\u4e2d\uff0c\u53ea\u8981\u5b57\u9762\u91cf\u53d6\u503c\u7684\u7ec4\u5408\u5339\u914d\u8fd9\u51e0\u4e2a\u2018\u6700\u5927\u9879\u2019\u7684\u5176\u4e2d\u4e00\u9879\uff0c\u6574\u4e2a\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u5c31\u4f1a\u53d8\u6210 <code>0</code>\u201d\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u6bd4\u5982\uff0c\u5bf9\u4e8e \ud83c\udf30 \u4e2d\u7684 \\(M_6=\\overline{X}+\\overline{Y}+Z\\)\uff0c\u6211\u4eec\u53ef\u4ee5\u5982\u4e0b\u63cf\u8ff0\uff1a</p> <pre><code>if(X == 1 &amp;&amp; Y == 1 &amp;&amp; Z == 0){\n    Output = 0;\n} else {\n    Output = 1;\n}\n</code></pre> <p>\u56de\u987e\u6700\u5927\u9879\u7684\u76ee\u7684\u662f\u6ee1\u8db3\u8fd9\u4e2a\u5206\u652f\u6761\u4ef6\u7684\u60c5\u51b5\u4e0b\u8f93\u51fa <code>0</code>\uff0c\u4e5f\u5c31\u662f\u8bf4\u6211\u4eec\u9700\u8981\u8868\u8fbe <code>(X == 1 &amp;&amp; Y == 1 &amp;&amp; Z == 0)</code> \u8fd9\u4e2a\u903b\u8f91\u6761\u4ef6\u3002\u4f46\u7531\u4e8e\u6700\u5927\u9879\u7684\u5b9e\u73b0\u5f62\u5f0f\u662f <code>OR</code>\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5c06 <code>&amp;&amp;</code> \u7684\u5f0f\u5b50\u4ee5 <code>||</code> \u7684\u5f62\u5f0f\u8868\u8fbe\u3002</p> <p>\u5f53\u7136\uff0c\u4f60\u53ef\u4ee5\u9009\u62e9\u4f7f\u7528\u5404\u79cd\u8fd0\u7b97\u5f8b\u6765\u5316\u7b80\uff0c\u4f46\u662f\u4e0d\u59a8\u60f3\u4e00\u60f3 <code>AND</code> \u548c <code>OR</code> \u7684\u8fd0\u7b97\u7279\u5f81\uff0c\u524d\u8005\u662f\u201c\u67090\u51fa0\u201d\uff0c\u540e\u8005\u662f\u201c\u67091\u51fa1\u201d\u3002\u800c\u5bf9\u4e8e <code>AND</code> \u6765\u8bf4\uff0c\u60f3\u8981\u505a\u5230\u6761\u4ef6\u7b5b\u9009\uff0c\u5c31\u9700\u8981\u6bcf\u4e00\u4e2a\u6761\u4ef6\u90fd\u662f <code>1</code>\uff0c\u6700\u540e\u5982\u679c\u7b5b\u9009\u6210\u529f\u7ed3\u679c\u5c31\u662f <code>1</code>\uff1b\u5bf9\u4e8e <code>OR</code> \u6765\u8bf4\uff0c\u5c31\u662f\u6bcf\u4e00\u4e2a\u6761\u4ef6\u90fd\u662f <code>0</code>\uff0c\u5982\u679c \u7b5b\u9009\u6210\u529f \u7684\u7ed3\u679c\u5c31\u662f <code>0</code>\u3002\u4e5f\u5c31\u662f\u8bf4\u5bf9\u4e8e\u6216\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u8868\u793a\uff1a</p> <pre><code>if((X == 0 || Y == 0 || (!Z) == 0) == 0){\n    Output = 0;\n} else {\n    Output = 1;\n}\n</code></pre> <p>\u540c\u6837\u8fdb\u884c\u4e00\u4e0b\u538b\u884c\uff1a</p> <pre><code>// It might be too complex.\nOutput = !((X == 0 || Y == 0 || (!Z) == 0) == 0);\n// So we can simplify it.\nOutput = (X == 0 || Y == 0 || (!Z) == 0);\n</code></pre> <p>\u8fd9\u4e5f\u6b63\u5bf9\u5e94\u4e86 \\(M_6=\\overline{X}+\\overline{Y}+Z\\)\u3002</p> <p>\u518d\u6b21\u7ed9\u51fa\u8fd9\u4e2a\u603b\u7ed3\u6027\u7684\u8868\u8ff0\uff1a\u6240\u8c13\u7684\u201c\u6311\u51fa\u201d\uff0c\u5c31\u662f\u5bf9\u4e8e\u9009\u5b9a\u7684\u4e00\u4e2a\u5b57\u9762\u91cf\u53d6\u503c\u7684\u7ec4\u5408\uff0c\u7ed9\u51fa\u4e00\u4e2a\u7279\u5b9a\u7684\u8868\u8fbe\u5f0f\uff0c\u4f7f\u5f97\u53ea\u6709\u8fd9\u79cd\u7ec4\u5408\u7684\u7ed3\u679c\u662f \\(f\\)\uff0c\u800c\u5bf9\u4e8e\u4efb\u4f55\u5176\u4ed6\u53d6\u503c\u7684\u7ec4\u5408\uff0c\u8be5\u8868\u8fbe\u5f0f\u7684\u7ed3\u679c\u90fd\u662f \\(\\overline{f}\\)\uff0c\u5373\u5b9e\u73b0\u4e86\u8be5\u8868\u8fbe\u5f0f\u80fd \u552f\u4e00\u8868\u8fbe \u8fd9\u4e2a\u53d6\u503c\u7ec4\u5408\u3002</p> <p>\u81f3\u6b64\uff0c\u6211\u4eec\u5f97\u5230\u4e86 \ud83c\udf30 \u6240\u5bf9\u5e94\u7684 POM\uff1a</p> \\[ \\begin{aligned}     F(X,Y,Z)     &amp; = \\prod M(0,1,3,6) \\\\     &amp; = M_0M_1M_3M_6 \\\\     &amp; = (X+Y+Z)(X+Y+\\overline{Z})(X+\\overline{Y}+\\overline{Z})(\\overline{X}+\\overline{Y}+Z) \\end{aligned} \\] <p>\u540c\u6837\u518d\u6b21\u5f52\u7eb3\uff0c\u4f7f\u7528\u901a\u4fd7\u7684\u8bdd\u6765\u8bf4\uff0c\u6700\u5927\u9879\u4e4b\u79ef\u66f4\u50cf\u662f\u201c\u679a\u4e3e\u4e86\u6240\u6709 <code>0</code> \u7684\u53ef\u80fd\u201d\uff0c\u53ea\u8981\u5339\u914d\u4e86\u8fd9\u4e2a\u201c\u79ef\u201d\u4e2d\u7684\u67d0\u4e00\u9879\uff0c\u8868\u8fbe\u5f0f\u7684\u503c\u5c31\u4f1a\u53d8\u6210 <code>0</code>\uff1b\u800c\u4e00\u4e2a\u90fd\u4e0d\u5339\u914d\u7684\uff0c\u81ea\u7136\u5c31\u53ea\u80fd\u5f97\u5230 <code>1</code>\u3002</p> <p>\u4e0e\u6700\u5c0f\u9879\u76f8\u6bd4\uff0c\u4e00\u4e2a\u679a\u4e3e\u4e86\u6240\u6709\u7684 <code>1</code> \u7684\u53ef\u80fd\uff0c\u4e00\u4e2a\u679a\u4e3e\u4e86\u6240\u6709\u662f <code>0</code> \u7684\u53ef\u80fd\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u4e8c\u503c\u8868\u8fbe\u5f0f\u6765\u8bf4\uff0c\u4e24\u79cd \u8868\u8fbe \u90fd\u662f\u5145\u8981\u7684\u3002</p> <p>\u6b64\u65f6\uff0c\u6211\u4eec\u8fd8\u80fd\u53d1\u73b0\uff1a</p> <p>\u4f8b\u5982\uff1a\\(M_5 = \\overline{X} + Y + \\overline{Z} = \\overline{ X\\overline{Y}Z } = \\overline{m}_5\\)</p> <p>\u5173\u4e8e\u8fd9\u4e2a\u53d1\u73b0\u7684\u66f4\u591a\u7684\u4f8b\u5b50\u548c\u8bf4\u660e\uff0c\u53ef\u4ee5\u770b\u4e0b\u9762\u7684\u7b2c\u4e00\u4e2a\u7ec3\u4e60\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_13","title":"\u7ec3\u4e60","text":"<p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u5c06\u901a\u8fc7\u4e00\u4e9b\u4f8b\u5b50\u6765\u8fdb\u4e00\u6b65\u5f3a\u5316\u8fd9\u4e9b\u7406\u89e3\uff0c\u5e76\u4e14\u6316\u6398\u4e00\u4e9b\u795e\u5947\u7684\u7279\u6027\u3002</p> \u9898\u9762 <p>\u8bf7\u5206\u522b\u5199\u51fa\u5982\u4e0b\u771f\u503c\u8868\u4e2d \\(F\\) \u548c \\(\\overline{F}\\) \u7684 SOM \u548c POM\u3002 </p> <p>\u200b    === \"\u7b54\u6848\"</p> <p>\u200b        \u7b54\u6848\uff1a</p> <pre><code>    $$\n            \\begin{aligned}\n                F(X,Y,Z)\n                &amp; = \\sum m(0,2,5,7) \\\\\n                &amp; = \\overline{X}\\,\\overline{Y}\\,\\overline{Z} + \\overline{X}Y\\overline{Z} + X\\overline{Y}Z + XYZ \\\\\n                &amp; = \\prod M(1,3,4,6) \\\\\n                &amp; = (X+Y+\\overline{Z})(X+\\overline{Y}+\\overline{Z})(\\overline{X}+Y+Z)(\\overline{X}+\\overline{Y}+Z)\n            \\end{aligned}\n    $$\n    $$\n            \\begin{array}{l}\n                \\overline{F}(X,Y,Z)\n                &amp; = \\sum m(1,3,4,6) \\\\\n                &amp; = \\overline{X}\\,\\overline{Y}Z + \\overline{X}YZ + X\\overline{Y}\\,\\overline{Z} + XY\\overline{Z} \\\\\n                &amp; = \\prod M(0,2,5,7) \\\\\n                &amp; = (X+Y+Z)(X+\\overline{Y}+Z)(\\overline{X}+Y+\\overline{Z})(\\overline{X}+\\overline{Y}+\\overline{Z})\n            \\end{array}\n    $$\n</code></pre> <p>\u4e8e\u662f\u6211\u4eec\u53d1\u73b0\u4e00\u4ef6\u5f88\u6709\u610f\u601d\u7684\u4e8b\u60c5\uff0c\\(F\\) \u7684 SOM \u7684\u4e0b\u6807\u4e0e \\(\\overline{F}\\) \u7684 POM \u7684\u4e0b\u6807\u662f\u4e00\u6837\u7684\uff1b\u5f53\u7136\u5bf9\u4e8e \\(F\\) \u7684 POM \u548c \\(\\overline{F}\\) \u7684 SOM \u4e5f\u662f\u4e00\u6837\u7684\u3002\u8fd9\u53c8\u53cc\u5370\u8bc1\u4e86\u5bf9\u79f0\u6027\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_14","title":"\u7535\u8def\u5b9e\u73b0\u4e0e\u4f18\u5316","text":"<p>\u5f15\u5165</p> <p>\u6211\u4eec\u5f53\u7136\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u6807\u51c6\u5f62\u5f0f\u6765\u5f97\u5230\u5bf9\u5e94\u7684\u7535\u8def\uff0c\u4f46\u662f\u5728\u5b9e\u9645\u60c5\u51b5\u4e2d\uff0c\u8fd9\u6837\u505a\u4f1a\u5bfc\u81f4\u6210\u672c\u8fc7\u9ad8\u4ee5\u53ca\u7535\u8def\u590d\u6742\uff08\u56e0\u4e3a\u95e8\u592a\u591a\u4e86\uff09\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5bf9\u7535\u8def\u8fdb\u884c\u4f18\u5316\u3002\u5728\u8fd9\u91cc\uff0c\u6211\u4eec\u4ecb\u7ecd\u901a\u8fc7 \u5361\u8bfa\u56fe(Karnaugh map) \u6765\u4f18\u5316\u903b\u8f91\u7535\u8def\u7684\u65b9\u6cd5\u3002</p> <p>\u4e0d\u8fc7\u518d\u5f00\u59cb\u201c\u4f18\u5316\u201d\u7684\u8bdd\u9898\u4e4b\u524d\uff0c\u6211\u4eec\u9700\u8981\u5b9a\u4e49\u4ec0\u4e48\u662f\u201c\u4f18\u201d\uff0c\u4e5f\u5c31\u662f\u7ed9\u51fa\u4e00\u4e2a\u7535\u8def\u6210\u672c\u7684\u8861\u91cf\u4f9d\u636e\uff0c\u5373 \u6210\u672c\u6807\u51c6(cost criteria)\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_15","title":"\u6210\u672c\u6807\u51c6","text":"<p>\u5728\u6210\u672c\u6807\u51c6\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u4ecb\u7ecd\u7684\u4e3b\u8981\u6709\u4e09\u79cd\u6807\u51c6\uff0c\u5206\u522b\u662f\uff1a</p> <ul> <li>\u6309\u7167\u5b57\u9762\u91cf\u5b57\u9762\u91cf\u8ba1(literal cost)\uff1a\\(L\\)</li> <li>\u6309\u95e8\u8f93\u5165\u8ba1\uff0c\u4e0d\u8ba1\u975e\u95e8(gate-input cost)\uff1a\\(G\\)</li> <li>\u6309\u95e8\u8f93\u5165\u8ba1\uff0c\u8ba1\u975e\u95e8(gate-input cost with NOTs)\uff1a\\(GN\\)</li> </ul>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_16","title":"\u6309\u7167\u5b57\u9762\u91cf\u5b57\u9762\u91cf\u8ba1","text":"<p>\u5f88\u76f4\u767d\uff0c\u5c31\u662f\u6309\u7167\u8868\u8fbe\u5f0f\u4e2d\u6709\u591a\u5c11\u5b57\u9762\u91cf\u6765\u8ba1\u7b97\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\\(F = BD + A\\overline{B}C + A\\overline{C}\\,\\overline{D}\\) \u4e2d \\(L = 8\\)\uff1b</li> <li>\\(F = ABC+\\overline{A}\\,\\overline{B}\\,\\overline{C}\\) \u4e2d \\(L = 6\\)\uff1b</li> <li>\\(F = (A+B+C)(\\overline{A}+\\overline{B} + \\overline{C})\\) \u4e2d \\(L = 6\\)\uff1b</li> </ul> <p>\u53ef\u4ee5\u60f3\u8c61\uff0c\u867d\u7136\u8fd9\u79cd\u8ba1\u7b97\u65b9\u6cd5\u975e\u5e38\u7684\u7b80\u5355\uff0c\u4f46\u662f\u611f\u89c9\u4e0d\u592a\u9760\u8c31\u3002\u6bd4\u5982\uff0c\u540e\u9762\u4e24\u4e2a\u4f8b\u5b50\uff0c\u867d\u7136\u4ed6\u4eec\u7684 literal cost \u662f\u4e00\u6837\u7684\uff0c\u4f46\u662f\u663e\u7136\u5f00\u9500\u4e0d\u592a\u4e00\u6837\uff08\u56e0\u4e3a\u4e00\u4e2a\u662f 3+3 \u4e00\u4e2a\u662f 2+2+2\uff09\u3002\u6240\u4ee5\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u66f4\u5408\u9002\u7684\u8ba1\u7b97\u65b9\u6cd5\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_17","title":"\u6309\u95e8\u8f93\u5165\u8ba1","text":"<p>\u6309\u7167\u95e8\u8f93\u5165\u8ba1\u5c31\u662f\u6309\u7167\u903b\u8f91\u95e8\u8f93\u5165\u5f15\u811a\u7684\u603b\u4e2a\u6570\u6765\u8ba1\u7b97\uff0c\u8fd9\u91cc\u7684\u8f93\u5165\u5e76\u4e0d\u4ec5\u4ec5\u662f\u76f4\u63a5\u6765\u81ea\u4e8e\u5b57\u9762\u91cf\u8f93\u5165\u7684\u90a3\u4e9b\u5f15\u811a\uff0c\u4e5f\u5305\u62ec\u5b57\u9762\u91cf\u505a\u8fd0\u7b97\u540e\u5f97\u5230\u7684\u7ed3\u679c\u4f5c\u4e3a\u8f93\u5165\u4f20\u5165\u4e0b\u4e00\u7ea7\u903b\u8f91\u95e8\u7684\u5f15\u811a\u3002</p> <p>\u6ce8\u610f</p> <p>\u867d\u7136\u975e\u95e8\u4e5f\u662f\u95e8\uff0c\u4f46\u662f\u6211\u4eec\u901a\u5e38\u4e0d\u628a\u975e\u95e8\u76f4\u63a5\u8ba1\u5165 gate-input cost\uff0c\u6240\u4ee5\u63a5\u4e0b\u6765\u63d0\u5230\u7684\u201c\u8f93\u5165\u5f15\u811a\u201d\u9ed8\u8ba4\u662f\u4e0d\u5305\u542b\u975e\u95e8\u7684\u8f93\u5165\u5f15\u811a\u7684\u3002</p> <p></p> <p>\u4f8b\u5982\u8fd9\u5f20\u5bf9\u5e94\u8868\u8fbe\u5f0f\\(F = A+BC+\\overline{B}\\,\\overline{C}\\) \u7684\u56fe\u4e2d\uff1a</p> <ul> <li>\u7eff\u8272\u539f\u70b9\u8868\u793a\u4e00\u7ea7\u8f93\u5165\u5f15\u811a\uff1b</li> <li>\u84dd\u8272\u65b9\u70b9\u8868\u793a\u4e8c\u7ea7\u8f93\u5165\u5f15\u811a\uff1b</li> <li>\u9ed1\u8272\u4e09\u89d2\u8868\u793a\u975e\u95e8\u7684\u8f93\u5165\u5f15\u811a\uff1b</li> </ul> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u8fd9\u91cc\u4e00\u5171\u6709 5 + 2 = 7 \u4e2a\u8f93\u5165\u5f15\u811a\uff0c\u4ee5\u53ca 2 \u4e2a\u975e\u95e8\u8f93\u5165\u5f15\u811a\u3002</p> <p>\u4ece\u8868\u8fbe\u5f0f\u6765\u770b\uff0c\u5b83\u53ef\u4ee5\u770b\u4f5c\u662f\u6bcf\u4e00\u5c42\u8fd0\u7b97\u7684\u53c2\u6570\u6570\u91cf\u6c42\u548c\uff0c\u4e0d\u8fc7\u6211\u4eec\u5ffd\u7565\u975e\u95e8\u3002</p> <p>\u4f8b\u5982\uff0c\u5f0f\u5b50\\(F=AB+\\overline{B}C+C\\overline{D}\\) \u4e2d\uff0c\u6700\u9876\u5c42\u7684\u8fd0\u7b97\u662f\u4e00\u4e2a\u4e09\u8f93\u5165\u6216\u8fd0\u7b97\uff0c\u6240\u4ee5\u6709 3 \u4e2a\u8f93\u5165\uff1b\u63a5\u4e0b\u6765\u6709\u4e09\u4e2a\u4e8c\u8f93\u5165\u4e0e\u8fd0\u7b97\uff0c\u6240\u4ee5\u5404\u8ba1 2 \u4e2a\u8f93\u5165\uff0c\u4e00\u5171 2 * 3 = 6 \u4e2a\u8f93\u5165\uff0c\u4e00\u5171\u662f 9 \u4e2a\u8f93\u5165\u3002</p> <p>\u5f53\u7136\uff0c\u5b9e\u9645\u4e0a\u4ece\u5e95\u5c42\u5f80\u4e0a\u6570\u66f4\u65b9\u4fbf\uff1a</p> <ul> <li>A \u548c B \u5404\u81ea\u7b97\u4e00\u4e2a\uff0cAB \u6574\u4f53\u7b97\u4e00\u4e2a\uff0c\u4e00\u5171 3 \u4e2a\uff1b</li> <li>\u4e00\u5171\u6709\u4e09\u7ec4\u7c7b\u4f3c AB \u7684\u7ed3\u6784\uff0c\u6240\u4ee5\u4e00\u5171\u662f 3 * 3 = 9 \u4e2a\uff1b</li> <li>\u5373\\(G=9\\)\uff1b</li> </ul> <p>Conclusion</p> <p>\u603b\u800c\u8a00\u4e4b\u6211\u4eec\u4e0d\u59a8\u6309\u7167\u62ec\u53f7\u4e00\u5c42\u4e00\u5c42\u5c42\u7ea7\u5f80\u4e0a\u8d70\u6570\u5373\u53ef\u3002</p> <p>\u800c\u5bf9\u4e8e gate-input cost with NOTs\uff0c\u53ea\u8981\u518d\u989d\u5916\u8ba1\u5165\u975e\u95e8\u7684\u8f93\u5165\u5373\u53ef\u3002\u4f8b\u5982\u4e0a\u9762\u90a3\u4e2a\u5f0f\u5b50\uff1a</p> <ul> <li>\u53d1\u73b0\u6709\u4e24\u4e2a\u88ab\u975e\u4e86\u7684\u5b57\u9762\u91cf\uff0c\u6240\u4ee5\u8981\u989d\u5916\u8ba1 2 \u4e2a\uff0c\u4e00\u5171\u662f 11 \u4e2a\uff1b</li> <li>\u5373\\(GN=11\\)\uff1b</li> </ul> <p>\u6ce8\u610f</p> <p>\u5982\u679c\u51fa\u73b0\u4e86\u6bd4\u5982 \\(F=\\overline{A}B+\\overline{A}C\\) \u7684\u60c5\u51b5\uff0c\u975e\u95e8\u53ea\u9700\u8981\u8ba1 1 \u4e2a\uff0c\u56e0\u4e3a\u6211\u4eec\u5b9e\u9645\u4e0a\u662f\u628a\u975e\u4e86\u4ee5\u540e\u7684\u4e1c\u897f\u5f53\u4f5c\u4e86\u4e00\u4e2a\u5b57\u9762\u91cf\u518d\u7528\u7684\uff0c\u5728\u5b9e\u9645\u7535\u8def\u4e2d\uff0c\u6211\u4eec\u53ea\u9700\u8981\u975e\u4e00\u6b21\uff0c\u4e4b\u540e\u53ea\u9700\u8981\u628a\u8fd9\u4e2a\u8f93\u51fa\u503c\u62ff\u8d70\u53bb\u7528\u5c31\u884c\u3002</p> <p>\u63a5\u4e0b\u6765\u653e\u51e0\u9053\u4f8b\u9898\u3002</p> \u9898\u9762 <p>\u8ba1\u7b97\\(F=ABC+\\overline{A}\\,\\overline{B}\\,\\overline{C}\\) \u7684 \\(L\\)\u3001\\(G\\)\u3001\\(GN\\)\u3002</p> <p>\u200b    === \"\u7b54\u6848\"         - \\(L = 6\\)\uff1b           - \\(G= 8\\)\uff1b           - \\(GN = 11\\)\uff1b    </p> \u9898\u9762\u7b54\u6848 <p>\u8ba1\u7b97 \\(F=(A+\\overline{C})(\\overline{B}+C)(\\overline{A}+B)\\) \u7684 \\(L\\)\u3001\\(G\\)\u3001\\(GN\\)\u3002</p> <ul> <li>\\(L = 6\\)\uff1b</li> <li>\\(G= 9\\)\uff1b</li> <li>\\(GN = 12\\)\uff1b</li> </ul> \u9898\u9762\u7b54\u6848 <p>\u8ba1\u7b97 \\(F=(A+\\overline{B})(A+D)(B+C+\\overline{D})(\\overline{B}+\\overline{C}+D)\\) \u7684 \\(L\\)\u3001\\(G\\)\u3001\\(GN\\)\u3002</p> <ul> <li>\\(L = 10\\)\uff1b</li> <li>\\(G= 14\\)\uff1b</li> <li>\\(GN = 17\\)\uff1b</li> </ul> <p>\u8fd9\u91cc\u9700\u8981\u6ce8\u610f\uff0c\u51fa\u73b0\u4e86\u91cd\u590d\u7684\u88ab\u975e\u4e86\u7684\u5b57\u9762\u91cf\uff0c\u4e0d\u8981\u91cd\u590d\u8ba1\u7b97\uff01</p> \u9898\u9762\u7b54\u6848 <p>\u8ba1\u7b97 \\(F=BD+A\\overline{B}C+A\\overline{B}\\,\\overline{D}+AB\\overline{C}\\) \u7684 \\(L\\)\u3001\\(G\\)\u3001\\(GN\\)\u3002</p> <ul> <li>\\(L = 11\\)\uff1b</li> <li>\\(G = 15\\)\uff1b</li> <li>\\(GN = 18\\)\uff1b</li> </ul> <p>\u8fd9\u91cc\u540c\u6837\u9700\u8981\u6ce8\u610f\uff0c\u51fa\u73b0\u4e86\u91cd\u590d\u7684\u88ab\u975e\u4e86\u7684\u5b57\u9762\u91cf\uff0c\u4e0d\u8981\u91cd\u590d\u8ba1\u7b97\uff01</p> \u9898\u9762\u7b54\u6848 <p>\u8ba1\u7b97 \\(F=\\overline{A}\\,\\overline{C}(B+\\overline{D})+AC(B+\\overline{D})\\) \u7684 \\(L\\)\u3001\\(G\\)\u3001\\(GN\\)\u3002</p> <ul> <li>\\(L = 8\\)\uff1b</li> <li>\\(G = 12\\)\uff1b</li> <li>\\(GN = 15\\)\uff1b</li> </ul> <p>\u5c0f\u7ed3\uff1a \u8fd9\u91cc\u540c\u6837\u9700\u8981\u6ce8\u610f\uff0c\u51fa\u73b0\u4e86\u6bd4\u8f83\u590d\u6742\u7684\u903b\u8f91\u8fd0\u7b97\uff0c\u4ee5 \\(\\overline{A}\\,\\overline{C}(B+\\overline{D})\\) \u4e3a\u4f8b\uff0c\u81ea\u9876\u5411\u4e0b\u662f\uff1a\u24f5\u4e09\u8f93\u5165\u4e0e\u95e8\uff0c\u24f6\u4e8c\u8f93\u5165\u6216\u95e8\uff1b\u6240\u4ee5\u5e94\u8be5\u662f \\(1^{\\overline{A}} + 1^{\\overline{C}} + 1^{B} + 1^{\\overline{D}} + 1^{B+\\overline{D}} + 1^{\\overline{A}\\,\\overline{C}(B+\\overline{D})}\\)\uff0c\u5373 6\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_18","title":"\u5361\u8bfa\u56fe","text":""},{"location":"ZJU_CS/DigitalDesign/Chap02/#_19","title":"\u5361\u8bfa\u56fe\u7684\u601d\u60f3","text":"<p>\u4f18\u5316\u903b\u8f91\u8868\u8fbe\u5f0f\u6700\u76f4\u767d\u7684\u601d\u60f3\u5c31\u662f\u51cf\u5c11\u95e8\u7535\u8def\uff0c\u4e5f\u5c31\u662f\u53bb\u51cf\u5c11 gate-input cost\u3002\u90a3\u4e48\u8981\u5982\u4f55\u505a\u5462\uff1f</p> <p>\u6211\u4eec\u8003\u8651\u5230\u903b\u8f91\u8fd0\u7b97\u5f8b\u4e2d\u7684\u8fd9\u4e2a\u63a8\u5e7f\\(XY+X\\overline{Y}=X(Y+\\overline{Y})=X\\)\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c\u4e24\u4e2a\u6700\u5c0f\u9879\u53ea\u5dee\u4e00\u4e2a\u5b57\u9762\u91cf\u7684\u975e\uff0c\u90a3\u4e48\u4ed6\u4eec\u662f\u53ef\u4ee5\u5408\u5e76\u7684\uff1b\u5f53\u7136\uff0c\u5bf9\u79f0\u7684\uff0c\u6839\u636e\\((X+\\overline{Y})(X+Y)=X+Y\\overline{Y}=X\\)\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u5f97\u5230\u8fd9\u4e2a\u7ed3\u8bba\u5bf9\u6700\u5927\u9879\u4e5f\u6210\u7acb\u3002</p> <p>\u662f\u4e0d\u662f\u89c9\u5f97\u201c\u53ea\u5dee\u4e00\u4e2a\u201d\u5f88\u8033\u719f\uff1f\u662f\u7684\uff01\u6211\u4eec\u60f3\u5230\u4e86\u683c\u96f7\u7801\uff01\u5047\u8bbe\u6211\u4eec\u5c06 n \u4e2a\u5b57\u9762\u91cf\u6392\u5217\u6210\u4e00\u4e2a n bits \u7684\u5411\u91cf\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u6309\u7167\u683c\u96f7\u7801\u6392\u5e8f\uff0c\u4e00\u65e6\u53d1\u73b0\u6709\u76f8\u90bb\u7684\u6700\u5c0f\u9879\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5408\u5e76\u4ed6\u4eec\u3002</p> <p>\u4f46\u8fd9\u8fd8\u4e0d\u591f\u5145\u5206\uff0c\u4f8b\u5982\u5728\u4e00\u4e2a\u6709\u4e09\u4e2a\u5b57\u9762\u91cf\u7684\u903b\u8f91\u8868\u8fbe\u5f0f\u4e2d\uff0c\u201c\u4e0e\u4e00\u4e2a\u8868\u8fbe\u5f0f\u76f8\u90bb\u201d\u7684\u8868\u8fbe\u5f0f\u5176\u5b9e\u6709\u4e09\u4e2a\uff0c\u4f46\u662f\u7528\u7ebf\u6027\u7684\u8868\u793a\u65b9\u6cd5\u53c8\u6ca1\u6cd5\u5f88\u597d\u7684\u8868\u793a\u8fd9\u4e00\u70b9\uff0c\u6240\u4ee5\u6211\u4eec\u60f3\u5230\u5c06\u5b83\u5199\u6210\u4e00\u5f20\u4e8c\u7ef4\u7684\u8868\uff0c\u5373\u5c06\u5b57\u9762\u91cf\u62c6\u6210\u4e24\u7ec4 bit \u5411\u91cf\uff0c\u5404\u81ea\u6309\u7167\u683c\u96f7\u7801\u6392\u5217\uff0c\u5f62\u6210\u4e00\u5f20\u4e8c\u7ef4\u8868\uff0c\u8fd9\u5c31\u662f \u5361\u8bfa\u56fe(Karnaugh Map)\uff0c\u4e5f\u53eb K-map\u3002</p> <p></p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u4efb\u610f\u4e24\u4e2a\u76f8\u90bb\u7684\u683c\u5b50\u90fd\u53ea\u5dee\u4e00\u4e2a\u5b57\u9762\u91cf\u7684\u975e\uff0c\u800c\u4e14\u662f\u5145\u8981\u7684\uff0c\u5373\u6240\u6709\u201c\u76f8\u90bb\u201d\u90fd\u53ef\u4ee5\u5728\u8fd9\u5f20\u56fe\u8868\u73b0\u51fa\u6765\u3002</p> <p>\u8bf4\u660e</p> <p>\u7531\u4e8e\u683c\u96f7\u7801\u7684\u6027\u8d28\u662f\u4e00\u4e2a\u5728\u201c\u6ee1\u201d\u72b6\u6001\u4e0b \u73af\u72b6\u6210\u7acb \u7684\u6027\u8d28\uff0c\u6240\u4ee5\u5361\u8bfa\u56fe\u4e5f\u9700\u8981\u7528\u201c\u73af\u72b6\u201d\u7684\u601d\u8def\u53bb\u770b\uff0c\u8fd9\u91cc\u53ef\u4ee5\u8054\u60f3\u4e00\u4e0b\u884c\u5217\u5f0f\u7684\u5f62\u8c61\u5316\u8ba1\u7b97\u65b9\u6cd5\uff0c\u5c06\u8fd9\u5f20\u8868\u5f53\u4f5c\u4e00\u4e2a\u65e0\u9650\u6269\u5c55\u7684\u8868\u683c\u3002</p> <p>\u601d\u8003\u9898</p> <p>\u5728\u8fd9\u91cc\uff0c\u4e5f\u53ef\u4ee5\u5c1d\u8bd5\u7740\u611f\u53d7\u4e00\u4e0b\u4e24\u4e2a\u5b57\u9762\u91cf\u7684\u60c5\u51b5\u4e0b\uff0c\u5373\u5b9e\u9645\u4e0a\u201c\u76f8\u90bb\u4e5f\u53ea\u67092\u4e2a\u201d\u7684\u60c5\u51b5\u4e0b\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u201c4\u4e2a\u76f8\u90bb\u201d\u7684\u5361\u8bfa\u56fe\u3002\u4e8b\u5b9e\u4e0a\uff0c\u4e09\u4e2a\u5b57\u9762\u91cf\u4e5f\u53ea\u6709\u201c3\u4e2a\u76f8\u90bb\u201d\uff0c\u4f46\u662f\u4e3a\u4ec0\u4e48\u53ef\u4ee5\u7528\u660e\u660e\u6709\u201c4\u4e2a\u76f8\u90bb\u201d\u7684\u5361\u8bfa\u56fe\u6765\u5b9e\u73b0\u5462\uff1f</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_20","title":"\u5361\u8bfa\u56fe\u7684\u5c40\u9650\u6027","text":"<p>\u7136\u800c\uff0c\u4e0a\u9762\u7684\u8bf4\u6cd5\u5176\u5b9e\u5f88\u7275\u5f3a\u3002\u56e0\u4e3a\u4e00\u5f20\u4e8c\u7ef4\u8868\u4e2d\uff0c\u80fd\u4e0e\u4e00\u4e2a\u5143\u7d20\u76f8\u90bb\u7684\u5143\u7d20\u6700\u591a\u53ea\u6709\u56db\u4e2a\uff0c\u4e5f\u5c31\u662f\u8bf4\u6211\u4eec\u6491\u6b7b\u4e5f\u53ea\u80fd\u7528\u5361\u8bfa\u56fe\u8868\u793a 4 \u4e2a\u5b57\u9762\u91cf\u7684\u60c5\u51b5\uff08\u5f53\u7136\u66f4\u591a\u7684\u53d8\u91cf\u4e5f\u6709\u5904\u7406\u7684\u65b9\u6cd5\uff0c\u4f46\u662f\u591a\u5c11\u6709\u70b9\u9ebb\u70e6\u4e86\uff09\u3002\u56e0\u6b64\uff0c\u5b9e\u9645\u4e0a\u5361\u8bfa\u56fe\u53ea\u80fd\u7528\u4e8e\u5316\u7b80\u975e\u5e38\u7b80\u5355\u7684\u903b\u8f91\u8868\u8fbe\u5f0f\u3002</p> <p>\u66f4\u591a\u60c5\u51b5\u4e0b\uff0c\u5361\u8bfa\u56fe\u5b9e\u9645\u4e0a\u53ea\u9002\u5408\u6211\u4eec\u505a\u9898\u3002\u4f46\u662f\u5176\u601d\u8def\u662f\u975e\u5e38\u6709\u610f\u601d\u7684\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_21","title":"\u5361\u8bfa\u56fe\u7684\u7ed3\u6784","text":"<p>\u8fd9\u91cc\u6211\u4eec\u4ee5 3 \u5143\u7684\u903b\u8f91\u8868\u8fbe\u5f0f\u4e3a\u4f8b\uff0c2 \u5143\u548c 4 \u5143\u7684\u601d\u8def\u662f\u4e00\u6837\u7684\u3002</p> <p>\u540c\u6837\uff0c\u4e3e\u4e00\u4e2a \ud83c\udf30 \uff1a\\(F(X,Y,Z) = \\sum m(2,3,4,5)\\)</p> <p>\u9996\u5148\u6211\u4eec\u6309\u7167\u6bd4\u7279\u5411\u91cf\u7684\u5f62\u5f0f\u628a\u6700\u5c0f\u9879\u5199\u51fa\u6765\uff1a</p> \u503c X Y Z 2 0 1 0 3 0 1 1 4 1 0 0 5 1 0 1 <p>\u63a5\u4e0b\u6765\uff0c\u6211\u4eec\u6765\u7ed8\u5236\u5361\u8bfa\u56fe\uff0c\u6211\u4eec\u5c06 bit \u5411\u91cf <code>[x, y, z]</code> \u62c6\u6210 <code>[x]</code> \u548c <code>[y, z]</code> \u505a\u5982\u4e0b\u8868\u683c\uff1a</p> <code>yz</code> = <code>00</code> <code>yz</code> = <code>01</code> <code>yz</code> = <code>11</code> <code>yz</code> = <code>10</code> <code>x</code> = <code>0</code> 0 0 1 1 <code>x</code> = <code>1</code> 1 1 0 0 <p>\u53e6\u5916\u4e00\u79cd\u6807\u6ce8\u8868\u683c\u7684\u65b9\u5f0f\u662f\u8fd9\u6837\uff0c\u5b83\u53ef\u80fd\u66f4\u6e05\u6670\uff1a</p> <p></p> <p>\u4f46\u662f\u4ed6\u4eec\u7684\u672c\u8d28\u90fd\u662f\u683c\u96f7\u7801\u3002</p> <p>4 \u5143\u5b57\u9762\u91cf\u7684\u5361\u8bfa\u56fe\u5219\u957f\u8fd9\u4e2a\u6837\u5b50\uff1a</p> <p></p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_22","title":"\u4f7f\u7528\u5361\u8bfa\u56fe\u4f18\u5316","text":"<p>\u5df2\u7ecf\u8bb2\u4e86\u601d\u60f3\u548c\u5361\u8bfa\u56fe\u7684\u7ed3\u6784\uff0c\u90a3\u4e48\u5230\u5e95\u8981\u5982\u4f55\u5229\u7528\u5361\u8bfa\u56fe\u8fdb\u884c\u4f18\u5316\u5462\uff1f</p> <p>\u8ba9\u6211\u4eec\u56de\u987e\u4f18\u5316\u7684\u65b9\u6cd5\uff0c\u5373\u5408\u5e76\u76f8\u90bb\u4e24\u9879\uff0c\u4e5f\u5c31\u662f\u627e\u5230\u5361\u8bfa\u56fe\u4e2d\u76f8\u90bb\u7684\u90e8\u5206\u3002\u4f46\u662f\u8fd9\u4e0d\u591f\uff0c\u6211\u4eec\u8fd8\u8981\u601d\u8003\u662f\u4e0d\u662f\u80fd\u5408\u5e76\u5df2\u7ecf\u76f8\u90bb\u7684\u90e8\u5206\uff0c\u6bd4\u5982\uff1a</p> <p>\u6211\u4eec\u901a\u8fc7\u5361\u8bfa\u56fe\uff0c\u9996\u5148\u5408\u5e76\u4e86 \\(WXYZ\\) \u548c \\(WXY\\overline{Z}\\)\uff0c\\(WX\\overline{Y}Z\\) \u548c \\(WX\\overline{Y}\\,\\overline{Z}\\)\uff0c\u5206\u522b\u5f97\u5230\u4e86 \\(WXY\\) \u548c \\(WX\\overline{Y}\\)\uff0c\u663e\u7136\u8fd9\u4e24\u4e2a\u4e1c\u897f\u4e5f\u662f\u53ef\u4ee5\u5408\u5e76\u7684\uff1b\u800c\u5728\u5361\u8bfa\u56fe\u4e0a\uff0c\u8fd9\u8868\u73b0\u4e3a\u4e24\u4e2a\u76f8\u90bb\u7684 <code>1*2</code> \u7684\u77e9\u5f62\u3002</p> <p>\u603b\u800c\u8a00\u4e4b\uff0c\u8fd9\u79cd\u8fed\u4ee3\u5408\u5e76\u7684\u884c\u4e3a\u6700\u7ec8\u53ef\u4ee5\u5212\u5f52\u4e3a\u8fd9\u6837\u4e00\u4e2a\u884c\u4e3a\uff1a</p> <p>\u6211\u4eec\u5728\u5361\u8bfa\u56fe\u4e2d\u5bfb\u627e\u82e5\u5e72 \u6781\u5927 \u7684 2 \u5e42\u77e9\u5f62\uff0c\u5373\u5143\u7d20\u4e2a\u6570\u4e3a 2 \u7684\u5e42\u6b21\uff08\u81ea\u7136\u8fb9\u957f\u4e5f\u90fd\u4e3a 2 \u7684\u5e42\u6b21\uff09\u7684\u77e9\u5f62\uff0c\u800c\u6bcf\u4e00\u4e2a\u77e9\u5f62\u6240\u8986\u76d6\u7684\u5143\u7d20\u90fd\u5e94\u8be5\u662f \u6700\u5c0f\u9879/\u6700\u5927\u9879\uff08\u4e00\u822c\u90fd\u662f\u505a\u6700\u5c0f\u9879\uff09\u3002\u9700\u8981\u6ce8\u610f\uff0c\u201c\u5faa\u73af\u201d\u7684\u6027\u8d28\u4ecd\u7136\u6ee1\u8db3\uff0c\u5373\u7b2c\u4e00\u5217\u548c\u6700\u540e\u4e00\u5217\uff0c\u7b2c\u4e00\u884c\u548c\u6700\u540e\u4e00\u884c\u4e5f\u53ef\u4ee5\u8ba4\u4e3a\u662f\u76f8\u90bb\u7684\u3002</p> <p></p> <p></p> <p>\u4f8b\u5982\uff1a</p> <p></p> <p>\u4f8b\u5982\uff1a</p> <p></p> <p>\u518d\u4f8b\u5982\uff1a</p> <p></p> <p>\u90fd\u662f\u5408\u7406\u7684\u5361\u8bfa\u56fe\u5212\u5206\u3002</p> <p>\u5728\u5f97\u5230\u8fd9\u4e9b\u5212\u5206\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u5f88\u65b9\u4fbf\u5730\u5c06\u8fd9\u4e9b\u9879\u62ce\u51fa\u6765\uff0c\u5199\u51fa\u5b83\u4eec\u7684\u8868\u8fbe\u5f0f\u3002</p> <p>\u800c\u81f3\u4e8e\u5982\u4f55\u62ce\u51fa\u6765\u2014\u2014\u4e0d\u96be\u53d1\u73b0\uff0c\u5982\u679c\u4e00\u4e2a\u65b9\u6846\u4e2d\uff0c\u67d0\u4e00\u4e2a\u5b57\u9762\u91cf\u7684\u503c\u65e2\u53ef\u4ee5\u662f <code>0</code>\uff0c\u53c8\u53ef\u4ee5\u662f <code>1</code> \u65f6\uff08\u8fd9\u91cc\u6307\u7684\u662f\u8f93\u5165\u7684\u503c\uff0c\u5e76\u975e\u8f93\u51fa\u7ed3\u679c\uff09\uff0c\u5728\u8fd9\u4e2a\u4f18\u5316\u9879\u7684\u7ed3\u679c\u4e2d\u5c31\u53ef\u4ee5\u4e0d\u7528\u5199\u51fa\u8fd9\u4e2a\u5b57\u9762\u91cf\uff1b\u53cd\u4e4b\uff0c\u5982\u679c\u8fd9\u4e2a\u5b57\u9762\u91cf\\(X\\) \u7684\u503c\u90fd\u662f <code>0</code>\uff0c\u5219\u7ed3\u679c\u4e2d\u4f1a\u5305\u542b \\(\\overline{X}\\)\uff0c\u5982\u679c\u90fd\u662f <code>1</code>\uff0c\u5219\u7ed3\u679c\u4e2d\u4f1a\u5305\u542b \\(X\\)\u3002</p> \u9898\u9762\u7b54\u6848 <p>\u5229\u7528\u5361\u8bfa\u56fe\u4f18\u5316\\(F(X,Y,Z) = \\sum m(0,1,2,4,6,7)\\) \u7684\u7ed3\u679c\u3002</p> <p>\u753b\u51fa\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u5bf9\u5e94\u7684\u5361\u8bfa\u56fe\uff1a</p> <p></p> <p>\u7136\u540e\u5212\u51fa\u5176\u4e2d\u7684\u6781\u5927\u6700\u5c0f\u9879\u4f18\u5316\u9879\uff1a</p> <p></p> <p>\u5199\u51fa\u6765\u662f\uff1a</p> <ul> <li>\u7eff\uff1a\\(x=0,\\;y=0,\\;z=0/1\\)<ul> <li>\u6240\u4ee5\u662f\uff1a\\(\\overline{X}\\,\\overline{Y}\\)\uff1b</li> </ul> </li> <li>\u84dd\uff1a\\(x=0/1,\\;y=0/1,\\;z=0\\)<ul> <li>\u6240\u4ee5\u662f\uff1a\\(\\overline{Z}\\)\uff1b</li> </ul> </li> <li>\u7ea2\uff1a\\(x=1,\\;y=1,\\;z=0/1\\)<ul> <li>\u6240\u4ee5\u662f\uff1a\\(XY\\)</li> </ul> </li> </ul> <p>\u7efc\u4e0a\u6240\u8ff0\uff0c\u4f18\u5316\u7ed3\u679c\u662f \\(F = \\overline{X}\\,\\overline{Y} + \\overline{Z} + XY\\)</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_23","title":"\u4e0d\u5b9a\u9879","text":"<p>\u63a8\u8350\u9605\u8bfb</p> <p>https://www.geeksforgeeks.org/dont-care-x-conditions-in-k-maps/</p> <p>\u4e0d\u5b9a\u9879(Don't Cares) \u6307\u7684\u662f\u9700\u8981\u5316\u7b80\u7684\u903b\u8f91\u51fd\u6570\u4e2d\uff0c\u6ca1\u6709\u7ed9\u51fa\u5b9a\u4e49\u7684\u51e0\u9879\uff0c\u5b83\u4eec\u53ef\u80fd\u662f\uff1a</p> <ul> <li>\u8f93\u5165\u7ec4\u5408\u4e0d\u4f1a\u51fa\u73b0\uff1b</li> <li>\u8f93\u5165\u7ec4\u5408\u7684\u8f93\u51fa\u4e0d\u88ab\u4f7f\u7528\uff1b</li> </ul> <p>\u5bf9\u4e8e\u8fd9\u79cd\u9879\uff0c\u5728\u5361\u8bfa\u56fe\u4e2d\u7528 X \u6765\u8868\u793a\uff0c\u5728\u6700\u5c0f\u9879\u4e4b\u548c\u4e2d\u7528 \\(\\sum d(...)\\) \u8868\u793a\u3002\u6211\u4eec\u53ef\u4ee5\u968f\u610f\u5b9a\u4e49\u5b83\u4eec\u7684\u8f93\u51fa\uff0c\u6b64\u65f6\u5c31\u53ef\u4ee5\u5229\u7528\u8fd9\u4e9b\u9879\u6765\u65b9\u4fbf\u6211\u4eec\u7684\u4f18\u5316\u2014\u2014\u5f53\u6211\u4eec\u753b\u51fa\u6765\u7684\u6781\u5927\u77e9\u9635\u8d8a\u5927\uff0c\u6210\u672c\u5c31\u8d8a\u4f4e\u3002</p> <p>\u4f8b\u5982\uff0c\u6211\u4eec\u5b9a\u4e49\u4e00\u4e2a\u51fd\u6570\uff0c\u5f53\u8f93\u5165\u7684 BCD \u7801\u8868\u793a\u7684\u6570\u5b57\u5927\u4e8e\u7b49\u4e8e 5 \u65f6\u8fd4\u56de <code>1</code>\uff0c\u5219\u5b83\u53ef\u4ee5\u901a\u8fc7\u8fd9\u6837\u7684\u5f62\u5f0f\u6765\u4f18\u5316\uff1a</p> <p></p> <p>\u6839\u636e\u7ed3\u679c\uff0c\u5199\u51fa\u4f18\u5316\u540e\u7684\u8868\u8fbe\u5f0f\u4e3a\uff1a\\(F(W,X,Y,Z) = W + XY + XZ\\)\u3002</p> <p>\u503c\u5f97\u601d\u8003\u7684\u4f8b\u9898\u2014\u2014\u7531\u5361\u8bfa\u56fe\u5f97\u5230\u4e58\u79ef\u7ed3\u679c</p> <p>\u5c3d\u7ba1\u6211\u4eec\u4e0d\u505c\u5f3a\u8c03 \u4e0e \u548c \u6216 \u662f\u5bf9\u79f0\u7684\uff0c\u4f46\u662f\u4ecd\u7136\u6709\u5f88\u591a\u64cd\u4f5c\u662f\u9274\u4e8e\u6211\u4eec\u5bf9 <code>1</code> \u7684\u504f\u7231\u624d\u4f1a\u987a\u624b\u7684\uff08\u4f60\u4f1a\u53d1\u73b0\uff0c\u628a\u4e58\u9664\u6362\u6210\u6211\u4eec\u5b8c\u5168\u4e0d\u719f\u6089\u7684\u7b26\u53f7\uff0c\u4f60\u751a\u81f3\u53ef\u80fd\u65e0\u4ece\u4e0b\u624b\uff09\u3002</p> <p>\u6240\u4ee5\uff0c\u5728\u5361\u8bfa\u56fe\u7684\u95ee\u9898\u4e2d\uff0c\u5982\u679c\u8981\u5229\u7528\u5361\u8bfa\u56fe\u5f97\u5230 \\(F\\) \u4f18\u5316\u540e\u7684\u4e58\u79ef\u5f62\u5f0f\uff0c\u4e5f\u53ef\u4ee5\u5c06\u95ee\u9898\u8f6c\u5316\u4e3a\u6c42 \\(\\overline{F}\\) \u4f18\u5316\u540e\u7684\u548c\u5f62\u5f0f\uff0c\u7136\u540e\u518d\u5bf9\u5176\u53d6\u53cd\u8fc7\uff0c\u5229\u7528\u5fb7\u00b7\u6469\u6839\u5b9a\u5f8b\u6765\u5f97\u5230\u7ed3\u679c\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\u5c31\u662f\u53cd\u8f6c K-map \u4e2d\u6240\u6709\u7684 <code>0</code> \u548c <code>1</code>\uff0c\u7136\u540e\u7740\u773c\u4e8e SOM \u8fdb\u884c\u4f18\u5316\uff0c\u6700\u540e\u518d\u5bf9\u7ed3\u679c\u53d6\u53cd\uff0c\u7528\u5fb7\u00b7\u6469\u6839\u5b9a\u5f8b\u6765\u5f97\u5230\u7ed3\u679c\u3002</p> eg <p></p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_24","title":"\u8574\u542b\u9879\u3001\u4e3b\u8574\u542b\u9879\u4e0e\u57fa\u672c\u4e3b\u8574\u542b\u9879","text":"<p>\u8574\u542b\u9879(implicant) \u5206\u4e3a \u4e3b\u8574\u542b\u9879(prime implicant) \u548c \u8d28\u4e3b\u8574\u542b\u9879(essential prime implicant) \uff08\u6709\u65f6\u4e5f\u88ab\u79f0\u4e3a\u7ef4\u5757\uff09\u3002 </p> <ul> <li>\u5728\u5361\u8bfa\u56fe\u4e2d\uff0c\u4e00\u4e2a\u8574\u542b\u9879\u5c31\u662f\u4efb\u610f\u4e00\u4e2a\u5305\u542b \\(2^n\\) \u4e2a <code>1</code> \u7684\u5355\u5143\uff1b</li> <li>\u800c\u4e3b\u8574\u542b\u9879\u5219\u662f\u5728\u5361\u8bfa\u56fe\u4e2d\u7684 \u6781\u5927 \u8574\u542b\u9879\uff08\u4e0d\u53ef\u80fd\u88ab\u66f4\u5927\u7684\u77e9\u5f62\u5708\u5305\u542b\uff09\uff1b<ul> <li>\u5bf9\u4e8e\u5b58\u5728 Dont'cares \u7684 K-map\uff0c\u5982\u679c\u6211\u4eec\u5173\u6ce8\u7684\u662f <code>1</code>\uff0c\u90a3\u6211\u4eec\u79ef\u6781\u5730\u5c06\u4ed6\u4eec\u5f53\u4f5c <code>1</code> \u6765\u5904\u7406\uff0c\u53cd\u4e4b\u4ea6\u7136\uff1b</li> <li>\u6ce8\u610f\uff1a \u5355\u72ec\u7684 <code>X</code> \u4e0d\u4f1a\u88ab\u8ba4\u4e3a\u662f\u4e3b\u8574\u542b\u9879\uff1b</li> </ul> </li> <li>\u8d28\u4e3b\u8574\u542b\u9879\u662f\u5305\u542b \u53ea\u88ab\u5b83(\u8d28\u4e3b\u8574\u542b\u9879)\u8986\u76d6\u7684 <code>1</code> \u7684\u4e3b\u8574\u542b\u9879\uff1b\uff08\u8fd9\u4e2a\u7a0d\u5fae\u54c1\u8bfb\u4e0b\u5373\u53ef\uff09</li> </ul> <p>\u563f\u563f\uff0c\u662f\u4e0d\u662f\u770b\u5b8c\u8fd8\u662f\u770b\u4e0d\u61c2\uff08doge\uff09\uff0c\u6211\u4e5f\u662f\uff0c\u6240\u4ee5\u4e0d\u5982\u76f4\u63a5\u770b\u4e2ab\u7ad9\u89c6\u9891</p> <p>\u4f8b\u5982</p> <p></p> <p>\u5982\u56fe\uff0c\u5de6\u4fa7\u7684\u4e24\u4e2a\u4e3b\u8574\u542b\u9879\u56e0\u4e3a\u5305\u62ec\u4e86 \u24f5 \u548c \u24f6 \u8fd9\u4e24\u4e2a\u552f\u4e00\u7684 <code>1</code>\uff0c\u6240\u4ee5\u662f\u57fa\u672c\u4e3b\u8574\u542b\u9879\uff1b</p> <p>\u800c\u53f3\u4fa7\u7684\u8574\u542b\u9879\u5219\u662f\u4e00\u4e2a\u5197\u4f59\u7684\u8574\u542b\u9879\uff1b</p> <p>Warning\uff1a \u5bf9\u4e8e\u4efb\u610f\u51fd\u6570\uff0c\u4e3b\u8574\u542b\u9879\u4e00\u5b9a\u5b58\u5728\uff0c\u4f46\u662f\u8d28\u4e3b\u8574\u542b\u9879\u4e0d\u4e00\u5b9a\u5b58\u5728\u3002</p> <p>\ud83e\udd14</p> <p>\u6b63\u56e0\u4e3a\u6709\u8d28\u4e3b\u8574\u542b\u9879\u7684\u5b58\u5728\uff0c\u5bf9\u4e8e\u4e00\u4e2a\u4efb\u610f\u51fd\u6570\uff0c\u4f18\u5316\u7684\u591a\u89e3\u7ed3\u679c\u603b\u6709\u4e00\u90e8\u5206\u662f\u4e0d\u53d8\u7684\uff08\u53ea\u4e0d\u8fc7\u6ca1\u6709\u8d28\u4e3b\u8574\u542b\u9879\u7684\u65f6\u5019\u8fd9\u90e8\u5206\u4e3a\u96f6\uff09\u3002</p> <p>\u9ea6\u514b\u62c9\u594e\u56e0\u7b97\u6cd5</p> <p>\u6709\u5f85\u7814\u7a76\uff01 \u94fe\u63a5\uff1ahttps://zh.wikipedia.org/wiki/%E5%A5%8E%E5%9B%A0-%E9%BA%A6%E5%85%8B%E6%8B%89%E6%96%AF%E5%9F%BA%E7%AE%97%E6%B3%95</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_25","title":"\u7ecf\u5178\u7ec4\u5408\u7535\u8def","text":"<p>\u5f15\u5165</p> <p>\u5728\u5b9e\u9645\u8bbe\u8ba1\u4e2d\uff0c\u6211\u4eec\u6709\u4e00\u4e9b\u73b0\u6210\u7684\u7ec4\u5408\u7535\u8def\u80fd\u591f\u4f7f\u7528\uff0c\u6765\u65b9\u4fbf\u6211\u4eec\u8bbe\u8ba1\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_26","title":"\u4e09\u6001\u95e8","text":"<p>\u4e09\u6001\u7f13\u51b2\u5668(3-State Buffer)</p> <p>\u9664\u4e86\u8f93\u5165\u548c\u8f93\u51fa\uff0c\u5b83\u8fd8\u6709\u4e00\u4e2a \u4f7f\u80fd\u7aef(enable) \u6765\u63a7\u5236\u8f93\u51fa\u3002</p> <p>\u6240\u8c13\u7684\u4e09\u6001\u6307\u7684\u662f\uff1a</p> <ul> <li>\u5f53\u4f7f\u80fd\u7aef\u4e3a <code>1</code>\uff0c\u4e14\u8f93\u5165\u4e3a <code>1</code> \u65f6\uff0c\u8f93\u51fa\u4e3a <code>1</code>\uff1b</li> <li>\u5f53\u4f7f\u80fd\u7aef\u4e3a <code>1</code>\uff0c\u4e14\u8f93\u5165\u4e3a <code>0</code> \u65f6\uff0c\u8f93\u51fa\u4e3a <code>0</code>\uff1b</li> <li>\u5f53\u4f7f\u80fd\u7aef\u4e3a <code>0</code>\uff0c\u8f93\u51fa\u4e3a <code>Hi-Z</code>/<code>Z</code>/<code>z</code>(\u6d6e\u52a8\uff0c\u9ad8\u963b\u6001)\uff1b</li> </ul> <p></p> <p>\u4f5c\u7528</p> <p>\u6211\u4eec\u53ef\u4ee5\u7528\u4e09\u6001\u95e8\u6765\u89e3\u51b3\u591a\u8def\u8f93\u51fa\u4e92\u8054\u7684\u95ee\u9898\u3002\u6b63\u5982\u5728 ICS \u7b14\u8bb0\u4e2d\u63d0\u5230\u7684\uff0c\u53ef\u4ee5\u8ba9\u591a\u4e2a\u8f93\u5165\u5728\u540c\u4e00\u65f6\u523b\u53ea\u6709\u4e00\u4e2a\u88ab\u8f93\u51fa\u5230\u603b\u7ebf\u4e2d\u2014\u2014\u5b9e\u73b0\u7684\u624b\u6bb5\u5c31\u662f\u901a\u8fc7\u7535\u8def\u6765\u4f7f\u540c\u4e00\u65f6\u523b\u53ea\u6709\u4e00\u4e2a\u4f7f\u80fd\u7aef\u4e3a <code>1</code>\u3002</p> <p>\u5728\u6570\u5b57\u903b\u8f91\u8bbe\u8ba1\u4e2d\uff0c\u4e09\u6001\u95e8\u5b9e\u73b0\u603b\u7ebf\u7684\u76f8\u5173\u77e5\u8bc6\u5c06\u5728 \u7b2c\u516d\u7ae0 \u63d0\u5230\u3002</p> <p>\u788e\u788e\u5ff5</p> <p>\u6240\u4ee5\u4ec0\u4e48\u662f\u300c\u9ad8\u963b\u6001\u300d\uff1f\u5b83\u8981\u5982\u4f55\u7406\u89e3\uff1f\u4ee5\u4e0b\u662f\u6211\u6839\u636e\u5b83\u7684\u5e94\u7528\u53cd\u63a8\u5f97\u5230\u7684\u7ed3\u8bba\uff1a</p> <p>\u9ad8\u963b\u6001\u540c\u5b83\u5b57\u9762\u610f\u601d\u76f8\u540c\uff0c\u6211\u4eec\u53ef\u4ee5\u5f53\u5b83\u6b64\u65f6\u662f\u65ad\u8def\uff0c\u800c\u9ad8\u963b\u6001\u91cd\u70b9\u8981\u4e0e\u4f4e\u7535\u5e73\u505a\u533a\u5206\uff1a\u5982\u679c\u73b0\u5728\u5b58\u5728\u4e00\u4e2a\u201c\u5bfc\u7ebf\u201d\uff0c\u5b83\u6709\u4e09\u4e2a\u7aef\uff0c\u5176\u4e2d\u6211\u4eec\u4eba\u4e3a\u5730\u8ba4\u4e3a\u5176\u4e2d\u4e24\u4e2a\u662f\u8f93\u5165\uff0c\u5206\u522b\u547d\u540d\u4e3a a \u548c b\uff0c\u53e6\u5916\u4e00\u4e2a\u8ba4\u4e3a\u662f\u8f93\u51fa\uff0c\u547d\u540d\u4e3a c\u3002</p> <p>\u6b64\u65f6\uff0c\u6211\u4eec\u662f\u4e0d\u5141\u8bb8 a \u548c b \u4e00\u4e2a\u4e3a\u9ad8\u7535\u5e73\uff0c\u4e00\u4e2a\u4e3a\u4f4e\u7535\u5e73\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u8fd9\u91cc\u4eba\u4e3a\u5b9a\u4e49\u7684\u8f93\u5165\u8f93\u51fa\u5e76\u4e0d\u5f71\u54cd\u7535\u6d41\u7684\u6d41\u52a8\u65b9\u5411\uff0c\u6240\u4ee5\u5f53 a \u4e3a <code>1</code>\uff0cb \u4e3a <code>0</code> \u65f6\uff0c\u7535\u6d41\u5f88\u53ef\u80fd\u4f1a\u53d8\u6210\u4ece a \u6d41\u5411 b\uff0c\u7535\u6e90\u53ef\u80fd\u76f4\u63a5\u63a5\u5730\uff0c\u8fd9\u662f\u6211\u4eec\u4e0d\u5e0c\u671b\u770b\u5230\u7684\uff0c\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u6216\u95e8\u6765\u5b9e\u73b0\u8fd9\u4e2a\u903b\u8f91\u884c\u4e3a\uff08\u6362\u8a00\u4e4b\uff0c\u8fd9\u79cd\u201c\u4e09\u7aef\u201d\u7535\u8def\u662f\u76f8\u5f53\u5371\u9669\u7684\uff0c\u4e0d\u8fc7\u5f53\u6211\u4eec\u4eba\u4e3a\u5b9a\u4e49\u591a\u4e2a\u8f93\u51fa\u65f6\uff0c\u4e00\u822c\u4f5c\u4e3a\u63a5\u6536\u7aef\u7684\u7535\u8def\u90fd\u6709\u4e8c\u6781\u7ba1\u9632\u6b62\u9006\u6d41\uff0c\u6240\u4ee5\u5355\u8f93\u5165\u591a\u8f93\u51fa\u662f\u5f88\u5e38\u89c1\u7684\uff09\u3002</p> <p>\u4ece\u66f4\u62bd\u8c61\u5730\u89d2\u5ea6\u6765\u7406\u89e3\uff0c\u4e00\u6839\u5bfc\u7ebf\u6700\u591a\u627f\u8f7d\u4e00\u4efd\u4fe1\u606f\uff0c\u7136\u800c\u6709\u4e24\u4e2a\u8f93\u5165\u4ecb\u5165\uff0c\u6b64\u65f6\u6211\u4eec\u53ea\u6709 <code>0</code>/<code>1</code> \u4e24\u6001\uff0c\u4e0d\u7ba1\u600e\u4e48\u6837\uff0c\u6211\u4eec\u90fd\u540c\u65f6\u62ff\u5230\u4e86\u6765\u81ea\u4e24\u4e2a\u8f93\u5165\u7684\u6570\u636e\uff0c\u800c\u5bf9\u4e8e\u53ea\u80fd\u627f\u8f7d\u4e00\u4efd\u4fe1\u606f\u7684\u5bfc\u7ebf\u6765\u8bf4\uff0c\u8fd9\u4e24\u4e2a\u4fe1\u606f\u51b2\u7a81\u4e86\u3002\u6240\u4ee5\u6211\u4eec\u9700\u8981 <code>MUX</code> \u6765\u9009\u62e9\u6211\u4eec\u9700\u8981\u7684\u5230\u5e95\u662f\u54ea\u4e2a\u4fe1\u606f\uff0c\u7136\u540e\u518d\u7ed9\u5bfc\u7ebf\u3002</p> <p>\u800c\u4e09\u6001\u95e8\uff0c\u5728\u9ad8\u4f4e\u7535\u5e73\u5916\u5f15\u5165\u4e86\u300c\u9ad8\u963b\u6001\u300d\uff0c\u5c31\u975e\u5e38\u5de7\u5999\u5730\u89e3\u51b3\u4e86\u8fd9\u4e2a\u300c\u591a\u8f93\u5165\u300d\u5371\u9669\u7684\u95ee\u9898\uff0c\u5f53\u6211\u4eec\u4e0d\u5e0c\u671b\u8fd9\u4e2a\u6570\u636e\u88ab\u8f93\u5165\u65f6\uff0c\u6211\u4eec\u76f4\u63a5\u628a\u5b83\u65ad\u5f00\uff0c\u7c7b\u4f3c\u4e8e\u76f4\u63a5\u628a\u5f00\u5173\u65ad\u5f00\uff0c\u53ea\u8981\u6211\u4eec\u8ba9\u5bfc\u7ebf\u7684\u82e5\u5e72\u8f93\u5165\u4e2d\u53ea\u6709\u4e00\u4e2a\u4e09\u6001\u95e8\u4e0d\u5728\u300c\u9ad8\u963b\u6001\u300d\uff0c\u5c31\u80fd\u591f\u4f18\u96c5\u5730\u5b9e\u73b0\u591a\u8def\u8f93\u51fa\u4e92\u8054\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#_27","title":"\u590d\u6742\u95e8","text":"<p>\u901a\u8fc7\u4e00\u4e9b\u57fa\u672c\u95e8\u7ec4\u5408\u51fa\u6765\u7684\u95e8\uff0c\u5b83\u4eec\u7684\u8868\u793a\u65b9\u6cd5\u5927\u81f4\u5982\u4e0b\uff1a</p> <p> </p>"},{"location":"ZJU_CS/DigitalDesign/Chap02/#universal_gate","title":"Universal Gate","text":"<p>\u6211\u4eec\u4e0d\u5f97\u4e0d\u63d0 \\(NAND\\) \u95e8\u662f\u81ea\u7136\u642d\u5efa\u901f\u5ea6\u6700\u5feb\u7684\u95e8\u3002</p> <p>\u5e38\u89c1\u7684\u95e8\u7684\u5b9e\u9645\u5b9e\u73b0\u5982\u4e0b\u56fe\u6240\u793a\uff1a </p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/","title":"Chap 3 Combinational Logic Design","text":"<p>\u5f15\u8a00</p> <p>\u6309\u7167\u529f\u80fd\uff0c\u903b\u8f91\u7535\u8def\u5206\u4e3a\u4e24\u7c7b\uff1a</p> <ul> <li>\u7ec4\u5408\u7535\u8def(Combinational Circuit)<ul> <li>\u62e5\u6709 m \u4e2a\u8f93\u5165\u548c n \u4e2a\u8f93\u51fa\uff0c\u5176\u4e2d\u5305\u542b\u4e86 \\(2^m\\) \u79cd\u8f93\u5165\u7ec4\u5408\uff0c\u4ee5\u53ca\u5bf9\u5e94\u7684 n \u4e2a\u4e0d\u540c\u7684\u51fd\u6570\uff1b</li> <li>\u6700\u5173\u952e\u7684\u662f\uff0c\u5b83\u7684 \u8f93\u51fa\u53ea\u4f9d\u8d56\u4e8e\u8fd9 m \u4e2a\u8f93\u5165\u7684\u7ec4\u5408\uff08\u4e0d\u5305\u542b\u56de\u8def\uff09\uff1b</li> </ul> </li> <li>\u65f6\u5e8f\u7535\u8def(Sequential Logic Cirtuit)<ul> <li>\u4e0e\u4e4b\u5bf9\u5e94\u7684\uff0c\u65f6\u5e8f\u7535\u8def\u5177\u6709\u8bb0\u5fc6\u529f\u80fd\uff0c\u5373\u5b83\u7684\u8f93\u51fa\u53ef\u80fd\u4f1a\u4f9d\u8d56\u4e4b\u524d\u7684\u7ed3\u679c\uff1b</li> </ul> </li> </ul> <p>\u672c\u7ae0\u7740\u773c\u4e8e\u7ec4\u5408\u7535\u8def\u7684\u76f8\u5173\u5185\u5bb9\uff0c\u65f6\u5e8f\u7535\u8def\u7684\u76f8\u5173\u5185\u5bb9\u5c06\u5728 \u4e0b\u4e00\u7ae0 \u4ecb\u7ecd\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_1","title":"\u7ec4\u5408\u7535\u8def\u8bbe\u8ba1","text":"<p>\u8868\u793a\u903b\u8f91\u7684\u65b9\u6cd5</p> <ol> <li>\u771f\u503c\u8868(Truth Table)\uff1b</li> <li>\u5e03\u5c14\u51fd\u6570(Boolean Function)\uff1b</li> <li>\u5361\u8bfa\u56fe(Karnaugh Maps)\uff1b</li> <li>\u65f6\u5e8f\u56fe(Timing Diagram)\uff1b</li> <li>\u903b\u8f91\u7535\u8def\u56fe(Logic Circuit)\uff1b</li> </ol> <p>\u5176\u4e2d\uff0c\u4e0b\u5212\u7ebf\u7684\u65b9\u6cd5\u5728\u529f\u80fd\u786e\u5b9a\u7684\u60c5\u51b5\u4e0b\uff0c\u5176\u8868\u793a\u662f\u552f\u4e00\u7684\u3002</p> <p>\u800c\u6211\u4eec\u7684\u8bbe\u8ba1\uff0c\u5c31\u662f\u5728\u6ee1\u8db3\u529f\u80fd\u7684\u524d\u63d0\u4e0b\uff0c\u5c3d\u53ef\u80fd\u4f18\u5316\u548c\u627e\u5230\u6700\u597d\u7684\u8bbe\u8ba1\u3002</p> <p>\u800c\u4e3b\u8981\u7684\u8bbe\u8ba1\u8fc7\u7a0b(Specification)\u5982\u4e0b\uff1a</p> <ol> <li>\u786e\u5b9a\u7cfb\u7edf\u7684\u884c\u4e3a\uff1b</li> <li>\u9610\u8ff0\u8f93\u5165\u548c\u8f93\u51fa\u4e4b\u95f4\u7684\u903b\u8f91\u5173\u7cfb\uff0c\u5e76\u7528\u771f\u503c\u8868\u6216\u903b\u8f91\u8868\u8fbe\u5f0f(Formulation)\u8868\u8fbe\u51fa\u6765\uff1b</li> <li>\u4f18\u5316\u903b\u8f91\u8868\u8fbe\u4ee5\u51cf\u5c11\u6210\u672c(\u6bd4\u5982\u4f7f\u7528\u5361\u8bfa\u56fe)\uff1b</li> <li>\u5c06\u4f18\u5316\u540e\u7684\u903b\u8f91\u8bbe\u8ba1\u5de5\u827a\u6620\u5c04\u5230\u786c\u4ef6\u5b9e\u73b0\u4e0a(Technology Mapping);</li> <li>\u9a8c\u8bc1\u6b63\u786e\u6027\uff08\u5728\u4eff\u771f\u73af\u5883\u4e2d\uff09\uff1b</li> </ol> <p>graph LR;  A[\"\u5b9e\u9645\u95ee\u9898\"] ===&gt; B[\"\u771f\u503c\u8868\"]  B ==&gt;|\"\u5316\u7b80\"| C[\"\u6700\u7b80\u529f\u80fd\"] ===&gt;|\"\u5de5\u827a\u6620\u5c04\"| D[\"\u7f51\u8868\"]  B ==&gt;|\"\u53d8\u6362\"| E[\"\u5408\u9002\u7684\u8868\u8fbe\u5f0f\"] ===&gt;|\"\u5de5\u827a\u6620\u5c04\"| D  </p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_2","title":"\u5206\u5c42\u8bbe\u8ba1","text":"<p>\u5206\u5c42\u8bbe\u8ba1\u5373\u5c06\u590d\u6742\u95ee\u9898\u6a21\u5757\u5316\u5206\u89e3\u4e3a\u82e5\u5e72\u5c42\u6b21\uff0c\u7136\u540e\u9010\u4e2a\u62bd\u8c61\u89e3\u51b3\u3002</p> <p>\u5176\u8bbe\u8ba1\u65b9\u6cd5\u5206\u4e3a \u81ea\u9876\u5411\u4e0b(Top-Down) \u548c \u81ea\u5e95\u5411\u4e0a(Bottom-Up)\u3002</p> <p>\u524d\u8005\u4ece\u9700\u6c42\u5f00\u59cb\uff0c\u81ea\u9876\u5411\u4e0b\u5206\u89e3\u529f\u80fd\u8bbe\u8ba1\uff1b\u540e\u8005\u6839\u636e\u73b0\u6709\u7684\u5143\u4ef6\u53bb\u7ec4\u5408\u6210\u76ee\u6807\u529f\u80fd\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_3","title":"\u96c6\u6210\u7535\u8def","text":"<p>\u96c6\u6210\u7535\u8def(integrated circuits) \u53c8\u53eb \u82af\u7247(chip)\uff0c\u5206\u4e3a\u5982\u4e0b\u82e5\u5e72\u7b49\u7ea7\uff1a</p> <ul> <li>SSI(small-scale integrated) \u5185\u542b\u4e0d\u5230 10 \u4e2a gates\uff1b</li> <li>MSI(medium-scale integrated) \u5185\u542b 10 ~ 100 \u4e2a gates\uff1b</li> <li>LSI(large-scale integrated) \u5185\u542b \u6210\u767e\u4e0a\u5343 \u4e2a gates\uff1b</li> <li>VLSI(very large-scale integrated) \u5185\u542b \u6210\u5343\u4e0a\u4ebf \u4e2a gates\uff1b</li> </ul>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_4","title":"\u6280\u672f\u53c2\u6570","text":"<p>\u95e8\u7684\u5b9e\u73b0\u4e3b\u8981\u901a\u8fc7\u8fd9\u4e9b\u53c2\u6570\u7279\u6027\u6765\u63cf\u8ff0\uff1a</p> Name Description Fan-in \u4e00\u4e2a\u95e8\u53ef\u7528\u7684\u8f93\u5165 Fan-out \u4e00\u4e2a\u6805\u6781\u8f93\u51fa\u9a71\u52a8\u7684\u6807\u51c6\u8d1f\u8f7d\u6570\u91cf Logic Levels \u88ab\u8ba4\u4e3a\u662f\u9ad8\u4f4e\u7535\u5e73\u7684\u8f93\u5165\u8f93\u51fa\u7535\u538b\u8303\u56f4 Noise Margin \u5bf9\u5916\u754c\u566a\u58f0\u7684\u5bb9\u5fcd\u80fd\u529b(\u5177\u4f53\u6765\u8bf4\u662f\u4e0d\u4f1a\u5bfc\u81f4\u884c\u4e3a\u5f02\u53d8\u7684\u6700\u5927\u566a\u58f0\u538b\u503c) Cost for a gate \u7ee7\u627f\u7535\u8def\u7684\u95e8\u6210\u672c Propagation Delay \u4fe1\u53f7\u6539\u53d8\u540e\u4ece\u8f93\u5165\u5230\u8f93\u51fa\u6240\u9700\u7684\u53d8\u5316\u65f6\u95f4 Power Dissipation \u7535\u6e90\u8f93\u51fa\u80fd\u8017\u548c\u95e8\u7684\u80fd\u8017"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_5","title":"\u6247\u5165\u6247\u51fa","text":"<p>\u6247\u5165\u63cf\u8ff0\u4e86\u4e00\u4e2a\u95e8\u80fd\u591f\u63a5\u53d7\u7684\u6700\u591a\u8f93\u5165\u91cf\uff0c\u5982\u4e00\u4e2a\u56db\u8f93\u5165\u4e0e\u975e\u95e8\u7684\u6247\u5165\u5c31\u662f 4\uff1b\u800c\u6247\u51fa\u63cf\u8ff0\u7684\u5219\u662f\u4e00\u4e2a\u95e8\u7684\u8f93\u51fa(\u6805\u6781\u8f93\u51fa)\u5728\u4e0d\u964d\u4f4e\u5de5\u4f5c\u6027\u80fd\u7684\u60c5\u51b5\u4e0b\u80fd\u591f\u8d1f\u8f7d\u591a\u5c11\u95e8\uff0c\u4f8b\u5982\u4e00\u4e2a\u975e\u95e8\u7684\u8f93\u51fa\u80fd\u591f\u540c\u65f6\u8d1f\u8f7d 4 \u4e2a\u975e\u95e8\u5e76\u4e14\u90fd\u80fd\u6b63\u5e38\u5de5\u4f5c\uff0c\u5219\u5176\u6247\u51fa\u4e3a 4\uff0c\u5176\u4e5f\u80fd\u901a\u8fc7\u6807\u51c6\u8d1f\u8f7d\u6765\u5b9a\u4e49\u3002</p> <p>\u6807\u51c6\u8d1f\u8f7d</p> <p>\u6240\u8c13\u7684\u6807\u51c6\u8d1f\u8f7d\uff0c\u662f\u8861\u91cf\u201c\u8d1f\u8f7d\u201d\u7684\u4e00\u4e2a\u201c\u5355\u4f4d\u781d\u7801\u201d\u3002\u5176\u5927\u5c0f\u7b49\u4e8e\u4e00\u4e2a\u975e\u95e8(\u9006\u53d8\u5668)\u8d21\u732e\u7684\u8d1f\u8f7d\u538b\u529b\u3002</p> <p>\u90a3\u4e48\u8981\u5982\u4f55\u8bc4\u4f30\u8d1f\u8f7d\u5462\uff1f\u9996\u5148\u6211\u4eec\u5f15\u5165 \u8fc7\u6e21\u65f6\u95f4(transition time)\uff1a</p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#transition_time","title":"\u8f6c\u6362\u65f6\u95f4 \uff08Transition Time\uff09","text":"<p>\u8f6c\u6362\u65f6\u95f4\u5206\u4e3a \\(\\mathrm{t_{LH}}\\)(rise time) \u548c \\(\\mathrm{t_{HL}}\\)(fall time) \u4e24\u4e2a\u90e8\u5206\u3002</p> <ul> <li>rise time \u7b49\u4e8e\u6805\u6781\u8f93\u51fa\u4ece \\(\\mathrm{V_{CC}}\\) \u7684 10% \u5347\u9ad8\u5230 90% \u6240\u9700\u8981\u7684\u65f6\u95f4\uff1b</li> <li>fall time \u7b49\u4e8e\u6805\u6781\u8f93\u51fa\u4ece \\(\\mathrm{V_{CC}}\\) \u7684 90% \u964d\u4f4e\u5230 10% \u6240\u9700\u8981\u7684\u65f6\u95f4\uff1b</li> </ul> <p>\u901a\u8fc7\u65f6\u5e8f\u56fe\u8868\u793a\u5c31\u662f\u8fd9\u6837\uff1a</p> <p></p> <p>\u968f\u7740\u8d1f\u8f7d\u589e\u52a0\uff0c\u8f6c\u6362\u65f6\u95f4\u4e5f\u4f1a\u589e\u52a0\uff08\u7ed9\u7535\u5bb9\u5145\u7535\u7684\u65f6\u95f4\u589e\u52a0\uff09\uff0c\u800c\u6247\u51fa\u5b9a\u4e49\u4e2d\u63d0\u5230\u7684\u201c\u6700\u5927\u8d1f\u8f7d\u201d\uff0c\u5c31\u662f\u6307\u5b83\u7684\u8f6c\u6362\u65f6\u95f4\u4e0d\u8d85\u8fc7\u5b83\u9884\u5b9a\u7684\u6700\u5927\u8f6c\u6362\u65f6\u95f4\u3002</p> <p></p> <p>\u4ece\u5de6\u5230\u53f3\u8868\u793a\u8d1f\u8f7d\u4e0d\u65ad\u589e\u52a0\u65f6\uff0crise time \u7684\u53d8\u5316\u8d8b\u52bf\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u7c7b\u4f3c\u7684\uff0c\u8d85\u51fa\u6247\u5165\u540e\uff0c\u95e8\u5bf9\u8f93\u5165\u7684\u53cd\u5e94\u5c31\u592a\u6162\u4e86\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#propagation_delay","title":"\u4f20\u64ad\u5ef6\u8fdf \uff08Propagation Delay\uff09","text":"<p>\u4f20\u64ad\u5ef6\u8fdf(propagation delay) \u8861\u91cf\u4e86\u95e8\u7684\u8f93\u5165\u53d8\u5316\u5bfc\u81f4\u8f93\u51fa\u53d8\u5316\u6240\u9700\u8981\u7684\u65f6\u95f4\u3002\u7531\u4e8e\u4ece\u4f4e\u7535\u5e73\u8f6c\u5316\u5230\u9ad8\u7535\u5e73\u548c\u9ad8\u7535\u5e73\u8f6c\u5316\u5230\u4f4e\u7535\u5e73\u6240\u9700\u8981\u7684\u65f6\u95f4\u4e0d\u4e00\u6837\uff0c\u6240\u4ee5\u4f20\u64ad\u5ef6\u8fdf\u540c\u6837\u6709\u4e24\u4e2a\u90e8\u5206\uff0c\u5206\u522b\u4f7f\u7528 \\(\\mathrm{t_{PHL}}\\) \u548c \\(\\mathrm{t_{PLH}} \u6765\u8868\u793a\\)\u3002</p> <p>\u66f4\u5177\u4f53\u7684\u6765\u8bf4\uff0c\u4f20\u64ad\u5ef6\u8fdf\u7684\u8ba1\u7b97\u65b9\u6cd5\u662f\u8f93\u5165\u548c\u8f93\u51fa\u7684\u53d8\u5316\u4e2d\u70b9\uff08\u5373\u53d8\u5316\u5230 \\(\\frac{1}{2}V_{CC}\\) \u65f6\uff09\u7684\u65f6\u95f4\u5dee\uff0c\u901a\u8fc7\u65f6\u5e8f\u56fe\u8868\u793a\u5c31\u662f\u8fd9\u6837\uff1a</p> <p></p> <p>\u6b64\u5916\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u5f15\u5165 \\(\\mathrm{ t_{pd} }\\) \u6765\u7edf\u4e00\u8868\u793a \\(\\mathrm{t_{PHL}}\\) \u548c \\(\\mathrm{t_{PLH}}\\)\u3002\u6570\u503c\u4e0a\uff0c\\(\\mathrm{ t_{pd} } = average(\\mathrm{t_{PHL}}, \\mathrm{t_{PLH}})\\) \u6216 \\(\\mathrm{ t_{pd} } = max(\\mathrm{t_{PHL}}, \\mathrm{t_{PLH}})\\)\u3002</p> <p>\u601d\u8003\u9898</p> \u9898\u9762\u7b54\u6848 <p>\u6839\u636e\u65f6\u5e8f\u56fe\uff0c\u5199\u51fa\u95e8\u7684\u4f20\u64ad\u5ef6\u8fdf\uff0c\u6b64\u5904 \\(\\mathrm{ t_{pd} } = average(\\mathrm{t_{PHL}}, \\mathrm{t_{PLH}})\\)\u3002</p> <p></p> <p></p> <p>Transition Time vs. Propagation Delay</p> <p>\u8f6c\u6362\u65f6\u95f4\u4e13\u6ce8\u4e8e\u8f93\u51fa\u7684\u53d8\u5316\uff0c\u800c\u4f20\u64ad\u5ef6\u8fdf\u5219\u5305\u542b\u4e86\u8f93\u5165\u7684\u53d8\u5316\u548c\u8f93\u51fa\u7684\u53d8\u5316\u6574\u4e2a\u8fc7\u7a0b\u3002</p> <p>\u4ece\u65f6\u5e8f\u56fe\u4e0a\u7684\u8868\u793a\u6765\u770b\uff0c\u8f6c\u6362\u65f6\u95f4\u53ea\u9700\u8981\u8f93\u51fa\u7684\u65f6\u5e8f\u56fe\u5373\u53ef\u8868\u793a\uff1b\u4f46\u4f20\u64ad\u5ef6\u8fdf\u5219\u662f\u901a\u8fc7\u6bd4\u8f83\u8f93\u5165\u548c\u8f93\u51fa\u7684\u504f\u5dee\u6765\u8868\u793a\u7684\u3002</p> <p></p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_6","title":"\u5ef6\u8fdf\u6a21\u578b","text":"<p>\u4e3a\u4e86\u7814\u7a76\u4e3a\u4ec0\u4e48\u4f1a\u5b58\u5728\u95e8\u5ef6\u8fdf\uff0c\u523b\u753b\u95e8\u7684 \u56fa\u6709\u95e8\u5ef6\u8fdf(inherent gate delay)\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u5176\u5efa\u6a21\uff0c\u5e38\u89c1\u7684 \u5ef6\u8fdf\u6a21\u578b(delay model) \u6709\u4ee5\u4e0b\u4e24\u79cd\uff1a</p> <ul> <li>\u4f20\u8f93\u5ef6\u8fdf(transport delay): \u8ba4\u4e3a\u8f93\u5165\u548c\u8f93\u51fa\u4e4b\u95f4\u7684\u5ef6\u8fdf\u662f\u4e00\u4e2a\u5b9a\u503c\u7684\uff1b</li> </ul> <p></p> <ul> <li>\u60ef\u6027\u5ef6\u8fdf(inertial delay): \u5f15\u5165\u4e86 \u62d2\u7edd\u65f6\u95f4(rejection time)\uff0c\u53ea\u6709\u5f53\u8f93\u5165\u8fbe\u5230\u4e00\u5b9a\u80fd\u91cf\u540e\uff0c\u624d\u4f1a\u51fa\u53d1\u6805\u6781\u8f93\u51fa\uff08\u5728\u8fd9\u79cd\u6a21\u578b\u4e0b\uff0c\u566a\u97f3\u7b49\u4f1a\u88ab\u8fc7\u6ee4\uff09\uff1b</li> </ul> <p></p> <p>\u5c06\u4e0d\u5b58\u5728\u5ef6\u8fdf\u7684\u6a21\u578b\u3001\u4f20\u8f93\u5ef6\u8fdf\u6a21\u578b\u548c\u60ef\u6027\u5ef6\u8fdf\u6a21\u578b\u505a\u6bd4\u8f83\u5730\u6765\u770b\uff0c\u5c31\u662f\u5982\u4e0b\u60c5\u51b5\uff1a</p> <p></p> Info <p>\u7531\u4e8e\u5b9e\u9645\u7535\u8def\u4e2d\u5b9e\u73b0\u5ef6\u8fdf\uff0c\u6570\u5b66\u4e0a\u7684\u903b\u8f91\u8868\u8fbe\u5f0f\u4e0e\u5b9e\u9645\u7535\u8def\u60c5\u51b5\u4f1a\u5b58\u5728\u4e0d\u540c\u2014\u2014\u5373\u5b58\u5728\u82e5\u5e72\u6570\u5b66\u4e0a\u65e0\u6cd5\u76f4\u63a5\u89e3\u51b3\u7684\u95ee\u9898\u3002</p> <p>\u6240\u4ee5\u7814\u7a76\u5ef6\u8fdf\u662f\u975e\u5e38\u5fc5\u8981\u7684\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_7","title":"\u5ef6\u8fdf\u8ba1\u7b97","text":"<p>\u8ba1\u7b97\u4e00\u4e2a\u7535\u8def\u7684\u5ef6\u8fdf\u65f6\uff0c\u6709\u4e24\u65b9\u9762\u9700\u8981\u8003\u8651\uff0c\u4e00\u65b9\u9762\u662f\u7535\u8def\u81ea\u8eab\u6240\u5bfc\u81f4\u7684\u4e00\u4e2a\u56fa\u5b9a\u5ef6\u8fdf\uff0c\u53e6\u5916\u4e00\u65b9\u9762\u5219\u662f\u7531\u4e8e\u4e0d\u540c\u7684\u8d1f\u8f7d\u5bfc\u81f4\u7684\u989d\u5916\u5ef6\u8fdf\u3002</p> <p></p> <p>\u6ce8</p> <p>\u5728\u8fd9\u4e2a\u4f8b\u5b50\u4e2d\uff0c0.07 \u4e3a\u56fa\u5b9a\u5ef6\u8fdf\uff0c0.021 \u4e3a\u4e00\u4e2a\u6807\u51c6\u8d1f\u8f7d\u5e26\u6765\u7684\u5ef6\u8fdf\u7cfb\u6570\uff0cSL(4.5 here) \u5219\u662f\u6807\u51c6\u5316\u7684\u8d1f\u8f7d\u91cf\u3002</p> <p>\u800c\u5177\u4f53\u7684\u8868\u8fbe\u5f0f\uff0c\u4f1a\u5728 Cell Library \u91cc\u5199\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_8","title":"\u5ef6\u8fdf\u5e26\u6765\u7684\u95ee\u9898","text":"<p>\u7531\u4e8e\u5b58\u5728\u5ef6\u8fdf\uff0c\u8bb8\u591a\u5728\u6570\u5b66\u610f\u4e49\u4e0a\u6ca1\u6709\u95ee\u9898\u7684\u903b\u8f91\u8868\u8fbe\u5f0f\u5728\u7535\u8def\u4e2d\u5c31\u5b58\u5728\u975e\u5e38\u5927\u7684\u95ee\u9898\u3002</p> <p>\u4f8b\u5982\uff0c\u4ece\u6570\u5b66\u89d2\u5ea6\u770b\uff0c\\(\\mathrm{Y=\\overline{A}A}\\) \u7684\u503c\u6052\u4e3a <code>0</code>\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u7531\u4e8e\u5ef6\u8fdf\uff0c\u5176\u4eff\u771f\u6ce2\u5f62\u4e2d\u4f1a\u51fa\u73b0\u8fd9\u6837\u4e00\u4e2a \u6bdb\u523a(glitch)\uff0c\u800c\u8fd9\u5728\u5de5\u7a0b\u610f\u4e49\u4e0a\u6709\u5f88\u5927\u7684\u95ee\u9898\u3002</p> <p></p> \u66f4\u590d\u6742\u7684 \ud83c\udf30 <p>\u8ba9\u6211\u4eec\u5206\u6790\u4e0b\u9762\u8fd9\u4e2a\u4e8c\u8def\u9009\u62e9\u5668\uff0c\u5176\u529f\u80fd\u662f\u901a\u8fc7 S \u63a7\u5236\u8f93\u51fa\u8868\u8fbe\u7684\u662f A \u8fd8\u662f B\uff0c\u5728\u4f20\u8f93\u5ef6\u8fdf\u6a21\u578b\u4e0b\uff0c\u5176\u6ce2\u5f62\u5982\u4e0b\uff1a</p> <p></p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0cY \u4e2d\u51fa\u73b0\u4e86\u610f\u6599\u4e4b\u5916\u7684\u6bdb\u523a\u3002</p> <p>\u800c\u8fd9\u4e2d\u6bdb\u523a\u53ef\u4ee5\u7528\u6dfb\u52a0\u5197\u4f59\u9879\u6765\u89e3\u51b3\uff1a</p> <p></p> <p>\u7531\u6b64\u53ef\u89c1\uff0c\u8868\u8fbe\u5f0f\u6700\u7b80\u5e76\u4e0d\u4e00\u5b9a\u662f\u6700\u597d\u7684</p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_9","title":"\u6b63\u903b\u8f91\u548c\u8d1f\u903b\u8f91","text":"<p>\u6b63\u903b\u8f91(positive logic) \u5c31\u662f <code>1</code> \u662f\u6709\u6548\u4fe1\u53f7\uff0c\u8d1f\u903b\u8f91(negative logic) \u5c31\u662f <code>0</code> \u662f\u6709\u6548\u4fe1\u53f7\u3002\u800c\u5728\u6b63\u903b\u8f91\u4e2d AND \u95e8\u7684\u4f5c\u7528\u5c31\u7b49\u6548\u4e8e\u8d1f\u903b\u8f91\u4e2d OR \u95e8\u7684\u4f5c\u7528\uff0c\u8fd9\u4e5f\u6b63\u662f\u524d\u51e0\u7ae0\u7684\u7b14\u8bb0\u4e2d\u63d0\u5230\u7684\u5bf9\u79f0\u3002</p> <p>\u800c\u6b63\u903b\u8f91\u7684\u7535\u8def\u7684\u7b26\u53f7\u4e00\u822c\u5c31\u662f\u6b63\u5e38\u7684\u903b\u8f91\u95e8\u7b26\u53f7\uff0c\u800c\u8d1f\u903b\u8f91\u7684\u903b\u8f91\u95e8\u7b26\u53f7\u5219\u53ef\u80fd\u6709\u5c0f\u4e09\u89d2\u6807\uff0c\u5373 \u6781\u6027\u6307\u793a\u5668(polarity indicator)\uff1a</p> <p></p> <p>\u5982\u56fe\uff0c\u5de6\u4fa7\u662f\u6b63\u903b\u8f91\u7535\u8def\u7684\u7b26\u53f7\uff0c\u53f3\u4fa7\u662f\u8d1f\u903b\u8f91\u7535\u8def\u7684\u7b26\u53f7\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_10","title":"\u5de5\u827a\u6620\u5c04","text":"<p>\u5de5\u827a\u6620\u5c04(technology mapping) \u662f\u6307\u5c06\u903b\u8f91\u56fe\u6216\u7f51\u8868\u8f6c\u5316\u4e3a\u53ef\u4ee5\u7528\u5de5\u827a\u5b9e\u73b0\u7684\u5fc3\u7684\u56fe\u6216\u7f51\u8868\u7684\u8fc7\u7a0b\u3002</p> <p>\u6709\u65f6\u6211\u4eec\u4f1a\u4f7f\u7528\u4e0e\u975e\u95e8\u548c\u975e\u95e8\u66ff\u6362\u4e0e\u95e8\u548c\u6216\u95e8(\u7535\u8def\u5c42\u9762\uff0c\u4e0e\u95e8\u5b9e\u9645\u4e0a\u5c31\u662f\u901a\u8fc7\u4e0e\u975e\u95e8\u5b9e\u73b0\u7684)\uff0c\u7136\u540e\u4f1a\u53d1\u73b0\u6709\u4e00\u4e9b\u8fde\u7eed\u5bf9\u975e\u95e8\u53ef\u4ee5\u76f8\u4e92\u62b5\u6d88\uff0c\u4f8b\u5982\u4e0b\u9762\u7684\u60c5\u51b5\uff1a</p> <p></p> <p>\u84dd\u7eff\u8272\u5757\u4e2d\u5373\u4e3a\u88ab\u66ff\u6362\u540e\u7684\u5185\u5bb9\uff0c\u7136\u540e\u6211\u4eec\u53d1\u73b0\u51fa\u73b0\u4e86\u82e5\u5e72\u53ef\u4ee5\u62b5\u6d88\u7684\u975e\u95e8\u3002</p> <p>\u5f53\u7136\uff0c\u4e5f\u53ef\u4ee5\u901a\u8fc7\u6216\u975e\u95e8\u6765\u5b9e\u73b0\uff0c\u6bd4\u5982\u4e0b\u9762\u7684\u60c5\u51b5\uff1a</p> <p></p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_11","title":"\u9a8c\u8bc1\u6b63\u786e\u6027","text":"<ul> <li>\u753b\u771f\u503c\u8868\u9a8c\u8bc1\uff08\u5373\u5b9e\u9a8c\u65f6\u7684\u4eff\u771f\uff09\u6216\u8005\u5e03\u5c14\u4ee3\u6570\u5f0f</li> <li>\u529f\u80fd\u5206\u6790<ul> <li>\u5b9a\u4e49\u5bf9\u4efb\u2f00\u4fe1\u53f7\u7684\u4f5c\u2f64\u4ee5\u53ca\u6574\u4e2a\u7535\u8def\u7684\u4f5c\u2f64</li> <li>\u753b\u65f6\u5e8f\u56fe</li> </ul> </li> </ul>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_12","title":"\u7ec4\u5408\u903b\u8f91","text":""},{"location":"ZJU_CS/DigitalDesign/Chap03/#_13","title":"\u57fa\u672c\u903b\u8f91\u51fd\u6570","text":"<ul> <li>\u5e38\u91cf\u51fd\u6570(Value-Fixing)\uff1a\\(F=0\\;\\;or\\;\\;F=1\\) | \u8f93\u51fa\u5b9a\u503c\uff1b</li> <li>\u4f20\u8f93\u51fd\u6570(Transferring)\uff1a\\(F=X\\) | \u76f4\u63a5\u8f93\u51fa\u8f93\u5165\u503c\uff1b</li> <li>\u9006\u53d8\u51fd\u6570(Inverting)\uff1a\\(F=\\overline{X}\\) | \u8f93\u51fa\u8f93\u5165\u7684\u76f8\u53cd\uff1b</li> <li>\u4f7f\u80fd\u51fd\u6570(Enabling)\uff1a\\(F=X\\cdot En \\;\\; or \\;\\; F = X + \\overline{En}\\) | \u901a\u8fc7\u4f7f\u80fd\u63a7\u5236\u8f93\u51fa\u662f\u5426\u53ef\u53d8\uff0c\u5206\u4e3a\u4e24\u79cd\uff0c\u6bd4\u5982\u4e0e\u7684\u5f62\u5f0f\u4e2d\uff0c\u53ea\u6709 \\(En\\) \u4e3a <code>1</code> \u65f6\uff0c\\(F\\) \u8868\u73b0\u4e3a \\(X\\) \u7684\u503c\uff1b\u53cd\u4e4b\u8f93\u51fa\u5fc5\u5b9a\u4e3a <code>0</code>\uff08\u6ce8\u610f\u533a\u5206\u5b83\u4e0e\u4e09\u6001\u95e8\u7684\u533a\u522b\uff0c\u9ad8\u963b\u6001or\u5b9a\u503c\uff09\uff1b</li> </ul> <p>\u77e5\u8bc6\u70b9</p> <ol> <li>\u2f00\u4e2a\u51fd\u6570\u7684\u5177\u4f53\u5b9e\u73b0\u79f0\u4e3a\u529f\u80fd\u5757.</li> <li>SSI MSI LSI \u2f29\u4e2d\u2f24\u89c4\u6a21\u96c6\u6210\u7535\u8def</li> <li>VLSI \u8d85\u2f24\u89c4\u6a21\u96c6\u6210\u7535\u8def</li> </ol>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_14","title":"\u57fa\u672c\u529f\u80fd\u5757","text":"<p>\u8fd9\u91cc\u6211\u4eec\u66f4\u63a8\u8350\u901a\u8fc7\u74dc\u8c6a\u5b66\u957f\u7684\u5b9e\u9a8c\u6587\u6863\u6765\u5b66\u4e60\u3002</p> <ul> <li>\u8bd1\u7801\u5668(Decoder)</li> <li> <p>\u7f16\u7801\u5668(Encoder)</p> </li> <li> <p>\uff08\u4e09\u7aef\uff09\u591a\u8def\u590d\u7528\u5668(Multiplexer) <code>MUX</code>\uff08\u7c7b\u4f3c\u4e8e\u65cb\u8f6c\u5f00\u5173\uff0c\u4f46\u5b9e\u9645\u4e0a\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7535\u8def\u56fe\u5b9e\u73b0\uff0c\u5177\u4f53\u53ef\u4ee5\u770b\u5b9e\u9a8c\u8bfe\uff09</p> </li> <li>\uff08\u4e09\u7aef\uff09\u4fe1\u53f7\u5206\u914d\u5668(Demultiplexer) <code>DEMUX</code></li> </ul>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_15","title":"\u8bd1\u7801\u5668","text":"<p>\u7a77\u4e3e\u53ef\u80fd\u6027\uff0c\u7a20\u5bc6 -&gt; \u7a20\u5bc6/\u7a00\u758f</p> <p>\u4e3a\u4e86\u8282\u7701\u95e8\u8f93\u5165\u6210\u672c\uff0c\u6211\u4eec\u5e38\u5e38\u4f7f\u7528 \u5206\u7ea7 (\u4ea6\u6216\u662f\u9012\u5f52) \u7684\u601d\u60f3\u6765\u6784\u9020\u591a\u8f93\u5165\u591a\u8bd1\u7801\u5668\u3002</p> <p>eg:</p> <p></p> <p>\u7531\u4e8e\u5e95\u5c42\u7684\u7535\u8def\u80fd\u591f\u76f4\u63a5\u5b9e\u73b0\u7684\u8fd0\u7b97\u5341\u5206\u5c40\u9650\uff0c\u6240\u4ee5\u9700\u8981\u7528\u8bd1\u7801\u5668\u6765\u5b9e\u73b0\u4e00\u4e9b\u57fa\u7840\u8fd0\u7b97\uff0c\u4f8b\u5982\u52a0\u6cd5\u3002</p> <p>\u4e00\u4f4d\u52a0\u6cd5\u5668\u5c31\u53ef\u4ee5\u901a\u8fc7\u8bd1\u7801\u5668\u548c\u6216\u95e8\u5b9e\u73b0\uff0c\u6838\u5fc3\u5c31\u662f\u679a\u4e3e\u8f93\u5165\u7684\u5404\u79cd\u60c5\u51b5\uff0c\u7136\u540e\u7528\u6216\u95e8\u62fe\u53d6 sum \u548c carry \u7684\u6700\u5c0f\u9879\u3002</p> <p></p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_16","title":"\u7f16\u7801\u5668","text":"<p>\u7a20\u5bc6/\u7a00\u758f -&gt; \u7a20\u5bc6</p> <p>\u5982\u4e0a\u5b9a\u4e49\u7684\u7f16\u7801\u5668\u6709\u4e00\u4e2a\u9650\u5236\uff0c\u5373\u4efb\u4f55\u65f6\u5019\u8f93\u5165\u53ea\u80fd\u6709\u4e00\u4e2a\u662f\u6d3b\u52a8\u7684\uff0c\u5373\u8f93\u5165\u662f one-hot \u7684\u3002</p> <p>\u4f18\u5148\u7f16\u7801\u5668</p> \u5b9a\u4e49\u4f8b\u5b50 \u4e2d\u65ad(interrupt)\u5224\u4f18\u5668 <p>\u4f18\u5148\u7f16\u7801\u5668\u80fd\u591f\u5b9e\u73b0\u4f18\u5148\u7ea7\u51fd\u6570\uff0c\u5b83\u4e0d\u8981\u6c42\u8f93\u5165\u662f one-hot \u7684\uff0c\u800c\u662f\u603b\u662f\u5173\u6ce8\u6709\u6548\u8f93\u5165\u4e2d\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u90a3\u4e00\u4e2a\u3002\u5373\u6bd4\u5982\u5f53\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u90a3\u4e00\u4f4d\u662f <code>1</code> \u65f6\uff0c\u5176\u5b83\u6240\u6709\u4f18\u5148\u7ea7\u4e0d\u5982\u5b83\u7684\u4f4d\u7f6e\u7684\u503c\u90fd\u662f\u6211\u4eec\u4e0d\u5173\u5fc3\u7684\u5185\u5bb9\u4e86\u3002</p> <p>\u4f18\u5148\u7f16\u7801\u5668\u7684\u4e00\u79cd\u5e94\u7528\u5c31\u662f\u4e2d\u65ad\u5224\u4f18\u5668\u3002</p> <p></p> <p>\u5176\u4e2d \\(V\\) \u8868\u793a\u8f93\u51fa\u662f\u5426\u6709\u6548\uff0c\u5728\u4e2d\u65ad\u5224\u4f18\u7cfb\u7edf\u4e2d\u5373\u8868\u793a\u662f\u5426\u6709\u4e2d\u65ad\u8bf7\u6c42\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_17","title":"\u591a\u8def\u590d\u7528\u5668","text":"<p>\u901a\u8fc7\u63a7\u5236\u7aef\u9009\u62e9\u8f93\u51fa\u7684\u662f\u82e5\u5e72\u8f93\u5165\u4e2d\u7684\u54ea\u4e00\u4e2a\u3002</p> <p>\u901a\u8fc7\u4e09\u6001\u95e8\u6765\u5b9e\u73b0 <code>MUX</code> \u80fd\u591f\u964d\u4f4e\u95e8\u8f93\u5165\u4ee3\u4ef7\u3002</p> eg <p></p> <p>\u5b8c\u5168\u4f7f\u7528\u4e09\u6001\u95e8\u6765\u5b9e\u73b0\u56db\u8f93\u5165 <code>MUX</code>\uff0c\u95e8\u8f93\u5165\u5927\u5927\u51cf\u5c11\u3002</p> <p><code>MUX</code> \u8fd8\u53ef\u4ee5 \u5b9e\u73b0\u4efb\u610f\u7684\u903b\u8f91\u51fd\u6570\uff1a</p> <ul> <li>\u5c06\u63a7\u5236\u7aef\u5f53\u4f5c\u8f93\u5165\uff0c\u539f\u6765\u7684\u8f93\u5165\u5f53\u4f5c\u7ed3\u679c\uff1b</li> <li>\u5373\u53ef\u4ee5\u5c06\u4e00\u4e2a\u56db\u8f93\u5165 <code>MUX</code> \u5f53\u4f5c\u4e00\u4e2a\u4e8c\u8f93\u5165\u7684\u51fd\u6570\uff1b</li> </ul> <p>\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u5c31\u662f\u5c06\u539f\u6765\u7684\u63a7\u5236\u7aef\u5f53\u4f5c\u8f93\u5165\u7aef\uff0c\u5e76\u5728\u539f\u6765\u7684\u8f93\u5165\u7aef\u5199\u5165\u903b\u8f91\u51fd\u6570\u7684\u771f\u503c\u8868\uff0c\u4ee5\u5b9e\u73b0\u4efb\u610f\u903b\u8f91\u51fd\u6570\u3002</p> <p>\u6211\u4eec\u8fd8\u53ef\u4ee5\u901a\u8fc7\u628a\u4e00\u90e8\u5206\u7684\u8f93\u5165\u5f53\u4f5c\u5e38\u91cf\u7aef\u6765\u7b80\u5316\u5143\u4ef6\uff08\u964d\u7ef4\uff09\uff1a</p> <p></p> <p>\u89c2\u5bdf\u5176\u6700\u5c0f\u9879\uff0c\u4f7f\u5176\u8f93\u51fa\u6240\u6709\u6700\u5c0f\u9879\u3002\u4f46\u662f\u5728\u964d\u7ef4\u8fc7\u7a0b\u4e2d\u5e76\u4e0d\u9700\u8981\u5168\u90fd\u662f C\uff0c\u5982\u679c\u5361\u8bfa\u56fe\u4e2d\u5b58\u5728\u53cc <code>1</code> \u6216\u8005\u53cc <code>0</code>\uff0c\u4e5f\u53ef\u4ee5\u4ecd\u7136\u4f7f\u7528\u5e38\u91cf\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_18","title":"\u4fe1\u53f7\u5206\u914d\u5668","text":"<p>\u7b80\u5199\u4e3a <code>DEMUX</code>\uff0c\u901a\u8fc7\u63a7\u5236\u7aef\u9009\u62e9\u8f93\u5165\u7ed9\u5230\u82e5\u5e72\u8f93\u51fa\u4e2d\u7684\u54ea\u4e00\u4e2a\u3002</p> <p></p> <p>\u540e\u7eed \ud83d\udc49 \u53ef\u91cd\u7f16\u7a0b\u6280\u672f</p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_19","title":"\u7b97\u672f\u903b\u8f91\u7535\u8def","text":"<p>\u6211\u4eec\u4e3b\u8981\u8ba8\u8bba\u7684\u8ba1\u7b97\u4e3b\u8981\u5305\u62ec\u903b\u8f91\u8fd0\u7b97\u548c\u7b97\u672f\u8fd0\u7b97\uff0c\u524d\u8005\u7531\u4e8e\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u57fa\u672c\u95e8\u5f88\u65b9\u4fbf\u5b9e\u73b0\uff0c\u6240\u4ee5\u6211\u4eec\u4e0d\u8fc7\u591a\u8003\u8651\uff1b\u5728\u6b64\u4e3b\u8981\u4ecb\u7ecd\u7b97\u6570\u8fd0\u7b97\u3002\u5728\u8ba1\u7b97\u673a\u786c\u4ef6\u4e2d\uff0c\u627f\u62c5\u8ba1\u7b97\u5de5\u4f5c\u7684\u4e3b\u8981\u90e8\u4ef6\u4e3a <code>ALU</code>(Arithmetic Logical Unit)\u3002</p> <p>\u5f15\u5165</p> <p>\u5728\u4e4b\u524d #\u8bd1\u7801\u5668 \u548c #\u591a\u8def\u590d\u7528\u5668 \u7684\u90e8\u5206\u4e2d\u5df2\u7ecf\u4ecb\u7ecd\u8fc7\u4e00\u4e9b\u5b9e\u73b0 1 bit \u52a0\u6cd5\u5668\u7684\u65b9\u6cd5\uff0c\u63a5\u4e0b\u6765\u6211\u4eec\u5c31\u6765\u8be6\u7ec6\u770b\u770b\u52a0\u6cd5\u5668\u8fd9\u4e2a\u4e1c\u897f\u3002</p> <p>\u9996\u5148\u6211\u4eec\u9700\u8981\u4e86\u89e3\u52a0\u6cd5\u5668\u6700\u5e95\u5c42\u7684\u5355\u5143\uff0c\u5373\u5b9e\u73b0 1 bit \u8fd0\u7b97\u7684 \u534a\u52a0\u5668(half adder) \u548c \u5168\u52a0\u5668(full adder)\uff0c\u63a5\u4e0b\u6765\u9700\u8981\u5c06\u4ed6\u4eec\u7ec4\u5408\u5728\u4e00\u8d77\uff0c\u5b9e\u73b0 n bits \u7684\u52a0\u6cd5\u5668\uff0c\u5176\u4e2d\u4e3b\u8981\u4ecb\u7ecd \u884c\u6ce2\u52a0\u6cd5\u5668(binary ripple carry adder)\u3002\u6b64\u5916\uff0c\u57fa\u4e8e\u4e00\u4e9b\u7f16\u7801\u7684\u77e5\u8bc6\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u5c06\u5b83\u6539\u88c5\u6210\u52a0\u51cf\u6cd5\u5668\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_20","title":"\u534a\u52a0\u5668 &amp; \u5168\u52a0\u5668","text":"<p>\u5bf9\u4e8e\u4e8c\u8fdb\u5236\u52a0\u6cd5\uff0c\u5176\u8f93\u51fa\u65e0\u7591\u6709\u5f53\u524d\u4f4d\u7684\u548c <code>S</code> \u548c\u8fdb\u4f4d <code>C</code>\uff0c\u800c\u8f93\u5165\u9664\u4e86\u4e24\u4e2a\u64cd\u4f5c\u6570 <code>X</code> \u548c <code>Y</code> \u4ee5\u5916\uff0c\u8fd8\u53ef\u80fd\u6709\u4e0a\u4e00\u4f4d\u7684\u8fdb\u4f4d <code>Z</code>(\u6216\u8005<code>C{n-1}</code>)\u3002\u800c\u5bf9\u4e8e\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6570\u7684\u7b2c\u4e00\u4f4d\uff0c\u663e\u7136\u4e0d\u4f1a\u6709\u8fdb\u4f4d\uff0c\u6216\u8005\u8bf4 <code>Z=0</code>\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e2a <code>Z</code> \u53bb\u6389\uff0c\u5373\u8f93\u5165\u53ea\u6709 <code>X</code> \u548c <code>Y</code>\uff0c\u8fd9\u5c31\u662f \u534a\u52a0\u5668(half adder)\uff1b\u663e\u7136\uff0c\u5bf9\u5e94\u7684\uff0c\u5982\u679c\u8f93\u5165\u4e2d\u6709\u4e0a\u4e00\u4f4d\u7684\u8fdb\u4f4d <code>Z</code>\uff0c\u5219\u79f0\u4e3a \u5168\u52a0\u5668(full adder)\u3002</p> \u534a\u52a0\u5668\u5168\u52a0\u5668 \u903b\u8f91\u8868\u8fbe\u5f0f\u771f\u503c\u8868\u7535\u8def\u56fe \\[ S=\\overline{X}Y+X\\overline{Y}=X\\oplus Y \\\\ C = XY \\] <p> </p> <p> </p> \u903b\u8f91\u8868\u8fbe\u5f0f\u771f\u503c\u8868\u5361\u8bfa\u56fe\u903b\u8f91\u8868\u8fbe\u5f0f with XOR \\[ S=\\overline{X}\\,\\overline{Y}Z + \\overline{X}Y\\overline{Z} + X\\overline{Y}\\,\\overline{Z} + XYZ \\\\ C = XY + XZ + YZ \\] <p> </p> <p> </p> \\[ S = (X\\oplus Y)\\oplus Z \\\\ C = XY + Z(X\\oplus Y) \\]"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_21","title":"\u884c\u6ce2\u52a0\u6cd5\u5668","text":"<p>\u884c\u6ce2\u52a0\u6cd5\u5668\u662f\u6734\u7d20\u7684 n bits \u52a0\u6cd5\u5668\u5b9e\u73b0\u3002\u5176\u6838\u5fc3\u601d\u60f3\u4e5f\u5c31\u662f\u6a21\u62df\u6211\u4eec\u4f7f\u7528\u201c\u7ad6\u5f0f\u201d\u6765\u8ba1\u7b97\u52a0\u6cd5\uff0c\u4ece\u4f4e\u4f4d\u5f00\u59cb\u9010\u4f4d\u8ba1\u7b97\uff0c\u5e76\u5c06\u8fdb\u4f4d\u7ed9\u5230\u4e0b\u4e00\u4f4d\u4f5c\u4e3a\u8f93\u5165\u3002</p> <p>\u5b9e\u9645\u4e0a\u65e0\u8bba\u662f\u53ea\u7528\u534a\u52a0\u5668\u6216\u662f\u53ea\u7528\u5168\u52a0\u5668\uff0c\u90fd\u53ef\u4ee5\u5b9e\u73b0\u884c\u6ce2\u52a0\u6cd5\u5668\uff0c\u4f46\u662f\u6b8a\u9014\u540c\u5f52\uff0c\u65e0\u975e\u662f\u901a\u8fc7\u5916\u90e8\u5668\u4ef6\u6765\u8fdb\u884c\u4e92\u76f8\u8f6c\u5316\u800c\u5df2\u3002\u5982\u679c\u53ea\u4f7f\u7528\u5168\u52a0\u5668\u6765\u5b9e\u73b0\uff0c\u5219\u4ee5 4 bits \u884c\u6ce2\u52a0\u6cd5\u5668\u4e3a\u4f8b\uff0c\u5176\u5927\u81f4\u903b\u8f91\u5982\u4e0b\uff1a</p> <p></p> <p>\u5176\u4e2d\uff0c\u5728\u52a0\u6cd5\u5668\u4e2d\uff0c\\(C_0\\) \u5fc5\u7136\u662f <code>0</code>\u3002</p> <p>\u52a0\u51cf\u6cd5\u5668\uff0c\u6216\u8005\u8bf4\u52a0\u6cd5\u5668\uff0c\u4e00\u822c\u60c5\u51b5\u4e0b\u5728 <code>ALU</code> \u4e2d\u662f\u6700\u5f71\u54cd\u6548\u7387\u7684\u90e8\u5206\uff0c\u800c\u4e14\u5982\u679c\u4f7f\u7528\u884c\u6ce2\u52a0\u6cd5\u5668\uff0c\u968f\u7740\u4f4d\u6570\u589e\u52a0\u6548\u7387\u4f1a\u8d8a\u6765\u8d8a\u6162\u3002</p> <p>\u6240\u4ee5\u4f1a\u6709\u7c7b\u4f3c\u4e8e\u8d85\u524d\u8fdb\u4f4d\u52a0\u6cd5\u5668\u4e4b\u7c7b\u7684\u4e1c\u897f\u6765\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>\u66f4\u591a\u7684\u5185\u5bb9\u53ef\u4ee5\u770b xyx \u7684\u8ba1\u7ec4\u7b14\u8bb0\u3002\uff08\u6570\u903b\u4e2d\u6700\u591a\u4e86\u89e3\u5230\u8d85\u524d\u8fdb\u4f4d\u52a0\u6cd5\u5668\u5373\u53ef\u3002\uff09</p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_22","title":"\u4e8c\u8fdb\u5236\u51cf\u6cd5","text":"<p>\u9996\u5148\uff0c\u5728\u5f00\u59cb\u4e8c\u8fdb\u5236\u51cf\u6cd5\u7684\u4ecb\u7ecd\u4e4b\u524d\uff0c\u4f60\u9700\u8981\u4e86\u89e3 \u8865\u7801(2's complement)\u3002</p> <p>\u7ed3\u5408\u8865\u7801\uff0c\u6211\u4eec\u518d\u6765\u89c2\u5bdf\u884c\u6ce2\u52a0\u6cd5\u5668\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u51cf\u6570\u7684\u6bcf\u4e00\u4f4d\u53d6\u53cd\uff0c\u5e76\u5bf9\u6574\u4e2a\u6570\u52a0\u4e00\uff0c\u518d\u76f4\u63a5\u5c06\u5b83\u4eec\u76f8\u52a0\u5373\u53ef\uff0c\u5373\u5c06\u51cf\u6cd5\u8f6c\u5316\u4e3a\u8865\u7801\u4e0b\u7684\u52a0\u6cd5\u3002</p> <p></p> <p>\u5176\u4e2d\u52a0\u4e00\u8fd9\u4e00\u6b65\u6070\u597d\u53ef\u4ee5\u901a\u8fc7\u5728\u52a0\u6cd5\u5668\u4e2d\u5fc5\u5b9a\u4e3a <code>0</code> \u7684 \\(C_0\\) \u6765\u5b9e\u73b0\uff0c\u7136\u540e\u6211\u4eec\u518d\u5728\u8f93\u5165\u4e2d\u6dfb\u52a0 <code>MUX</code>\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u52a0\u51cf\u6cd5\u5668\u3002</p> <p></p>"},{"location":"ZJU_CS/DigitalDesign/Chap03/#_23","title":"\u6709\u7b26\u53f7\u6570\u7684\u8868\u793a\u4e0e\u8ba1\u7b97","text":"<ul> <li>\u6ce8\u610flab8\u4e2d\u51cf\u6cd5\u64cd\u4f5c\u6570\u4e0e\u8fdb\u4f4d\u540e\u6709\u4e2aXOR\u95e8\uff01</li> </ul>"},{"location":"ZJU_CS/DigitalDesign/Chap04/","title":"Chap 4 Sequential Circuits","text":"<p>4.6\u4e0d\u5728\u8bfe\u7a0b\u5927\u7eb2\u4e0a</p> <p>\u4e0a\u4e00\u7ae0\u8bb2\u7684\u662f\u7ec4\u5408\u7535\u8def\uff0c\u867d\u7136\u7ec4\u5408\u7535\u8def\u80fd\u591f\u5b9e\u73b0\u8bf8\u591a\u529f\u80fd\uff0c\u4f46\u662f\u5b83\u4f9d\u7136\u5b58\u5728\u4e00\u4e9b\u7684\u95ee\u9898\uff1a</p> <ol> <li>\u5bf9\u4e8e\u590d\u6742\u7684\u903b\u8f91\uff0c\u62bd\u8c61\u5c42\u7ea7\u591a\uff0c\u5bfc\u81f4\u786c\u4ef6\u5c42\u9762\u5f00\u9500\u5927\u3001\u8017\u65f6\u957f\uff0c\u4e00\u65b9\u9762\u63d0\u9ad8\u6210\u672c\uff0c\u4e00\u65b9\u9762\u964d\u4f4e\u6548\u7387\uff1b</li> <li>\u7ec4\u5408\u7535\u8def\u6ca1\u6cd5\u5b9e\u73b0\u4fe1\u606f\u7684\u5b58\u50a8\uff0c\u6240\u6709\u7684\u529f\u80fd\u6a21\u5757\u5bf9\u4e8e\u7279\u5b9a\u7684\u8f93\u5165\u7ed9\u51fa\u76f8\u540c\u7684\u8f93\u51fa\uff1b</li> </ol> <p>\u800c\u65f6\u5e8f\u7535\u8def\u5219\u62e5\u6709\u5b58\u50a8\u4fe1\u606f\u7684\u80fd\u529b\uff0c\u5bf9\u4e8e\u65f6\u5e8f\u7535\u8def\u6765\u8bf4\uff0c\u8f93\u51fa\u9664\u4e86\u4e0e\u8f93\u5165\u6709\u5173\uff08\u751a\u81f3\u53ef\u4ee5\u6ca1\u6709\u8f93\u5165\uff09\uff0c\u4e5f\u53ef\u4ee5\u4e0e\u81ea\u8eab \u72b6\u6001(state) \u6709\u5173\u3002</p> <p>\u65f6\u5e8f\u7535\u8def\u4e3b\u8981\u5206\u4e3a\u4e24\u7c7b\uff08\u4e3b\u8981\u5206\u7c7b\u4f9d\u636e\u662f\u8f93\u5165\u4fe1\u53f7\u7684\u65f6\u95f4\u548c\u5185\u90e8\u72b6\u6001\u6539\u53d8\u7684\u65f6\u95f4\uff09\uff1a\u540c\u6b65\u65f6\u5e8f\u7535\u8def(synchronous sequential circuit) \u548c \u5f02\u6b65\u65f6\u5e8f\u7535\u8def(asynchronous sequential circuit)\u3002</p> <p>\u5b9a\u4e49</p> <p>The behavior of a synchronous sequential circuit can be defined from the knowledge of its signals at discrete instants of time. The behavior of an asynchronous sequential circuit depends upon the inputs at any instant of time and the order in continuous time in which the inputs change.</p> <p>\u4e00\u822c\u6765\u8bf4\uff0c\u5f02\u6b65\u7535\u8def\u7684\u8bbe\u8ba1\u76f8\u5bf9\u56f0\u96be\uff08\u884c\u4e3a\u4e0e\u95e8\u7684\u4f20\u64ad\u5ef6\u8fdf\u548c\u8f93\u5165\u4fe1\u53f7\u53d8\u5316\u7684\u65f6\u95f4\u5e8f\u5217\u5bc6\u5207\u76f8\u5173\uff09\uff0c\u4f46\u4ecd\u7136\u5341\u5206\u5fc5\u8981\uff0c\u6bd4\u5982\u89e6\u53d1\u5668\u5c31\u662f\u4ee5\u4e00\u90e8\u9501\u5b58\u5668\u4e3a\u6a21\u5757\u8bbe\u8ba1\u7684\uff1b\u800c\u540c\u6b65\u7535\u8def\u7684\u4f7f\u7528\u66f4\u52a0\u5e7f\u6cdb\uff0c\u901a\u5e38\u8fd9\u4e9b\u201c\u79bb\u6563\u7684\u65f6\u523b\u201d\u90fd\u662f\u7531 \u65f6\u949f\u53d1\u751f\u5668(clock generator) \u8fd9\u79cd\u65f6\u5e8f\u5668\u4ef6\u4ea7\u751f\u5468\u671f\u6027\u7684 \u65f6\u949f\u8109\u51b2(clock pulse) \u5e8f\u5217\u6765\u5b9e\u73b0\u7684\uff08\u8fd9\u79cd\u7535\u8def\u4e00\u822c\u88ab\u79f0\u4e3a \u949f\u63a7\u65f6\u5e8f\u7535\u8def(clocked sequential circuit)\uff0c\u7531\u4e8e\u8bbe\u8ba1\u76f8\u5bf9\u5bb9\u6613\uff0c\u9c81\u68d2\u6027\u5f3a\uff0c\u6240\u4ee5\u88ab\u5e7f\u6cdb\u5e94\u7528\uff09\u3002</p> <p>\u7f13\u51b2</p> <p>\u7f13\u51b2\u5668(buffer) \u4e00\u822c\u901a\u8fc7\u4e24\u4e2a\u975e\u95e8\u4e32\u8054\uff0c\u5e76\u5c06\u8f93\u5165\u8fde\u901a\u8f93\u51fa\u5b9e\u73b0\uff0c\u8fd9\u6837\u80fd\u591f\u5b9e\u73b0\u4fe1\u606f\u7684\u5b58\u50a8\uff0c\u7136\u800c\u65e0\u6cd5\u4fee\u6539\u3002\u800c\u9501\u5b58\u5668\u5c31\u662f\u5728\u7f13\u51b2\u5668\u7684\u57fa\u7840\u4e0a\uff0c\u5c06\u975e\u95e8\u66ff\u6362\u4e3a\u6216\u975e\u95e8\u6216\u4e0e\u975e\u95e8\u5b9e\u73b0\u7684\u3002</p> <p></p> <p>\u5176\u4e2d\uff0c\u4ece\u7ed9\u5b9a\u8f93\u5165\u5230\u66f4\u65b0\u8f93\u51fa\u6709\u4e00\u4e2a \\(t_G\\) \u7684\u5ef6\u65f6\u3002</p> <p>\u5f15\u5165</p> <p>\u663e\u7136\uff0c\u6839\u636e\u4e0a\u9762\u7684\u6982\u8ff0\uff0c\u65f6\u5e8f\u7535\u8def\u4e2d\u6700\u91cd\u8981\u7684\u5c31\u662f\u4fe1\u606f\u5b58\u50a8\u5143\u4ef6\u3002\u5f53\u8f93\u5165\u4fe1\u53f7\u4e0d\u53d1\u751f\u53d8\u5316\u65f6\uff08\u91cd\u70b9\u662f\u53d8\u5316\uff0c\u5373\u8f93\u5165\u548c\u5b58\u50a8\u4fe1\u606f\u672a\u5fc5\u5b58\u5728\u5bf9\u5e94\u5173\u7cfb\uff09\u5b58\u50a8\u5143\u4ef6\u5c31\u80fd\u591f\u4fdd\u6301\u5176\u5185\u90e8\u5b58\u50a8\u7684\u4e8c\u8fdb\u5236\u6570\u636e\u3002</p> <p>\u5b58\u50a8\u5143\u4ef6\u4e3b\u8981\u7531 \u9501\u5b58\u5668(latch) \u548c \u89e6\u53d1\u5668(flip-flop) \u4e24\u79cd\uff0c\u5176\u4e2d\u524d\u8005\u662f\u540e\u8005\u7684\u57fa\u7840\uff0c\u540e\u8005\u7531\u524d\u8005\u6784\u6210\uff0c \u6216\u8005\u8bf4\u591a\u6570\u60c5\u51b5\u4e0b\u6211\u4eec\u4f7f\u7528\u540e\u8005\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#latch","title":"\u9501\u5b58\u5668(latch)","text":""},{"location":"ZJU_CS/DigitalDesign/Chap04/#sr_sr","title":"SR &amp; S'R' \u9501\u5b58\u5668","text":"<p>SR \u9501\u5b58\u5668\u548c S'R' \u9501\u5b58\u5668\u7684\u57fa\u672c\u539f\u7406\u662f\u4e00\u81f4\u7684\uff0c\u53ea\u4e0d\u8fc7\u524d\u8005\u7528\u7684\u662f\u6216\u975e\u95e8\uff0c\u540e\u8005\u7528\u7684\u662f\u4e0e\u975e\u95e8\u3002</p> <p>SR \u9501\u5b58\u5668\u548c S'R' \u9501\u5b58\u5668\u7684\u8f93\u5165\u90fd\u662f S(Set) \u548c R(Reset) \u4e24\u4e2a\u90e8\u5206\uff0c\u8f93\u51fa\u90fd\u662f Q \u548c Q' \u4e24\u4e2a\u90e8\u5206\u3002</p> <p>\u540d\u79f0\u4e0a \u7684\u5171\u540c\u70b9\u662f\uff0c\u5f53 S \u4e3a <code>1</code> \u65f6\uff0cQ \u90fd\u4f1a\u662f <code>1</code>\uff1b\u5bf9\u4e8e R \u548c Q' \u4e5f\u662f\u8fd9\u6837\uff0c\u53ea\u4e0d\u8fc7\u8981\u6ce8\u610f\uff0cS'R'\u9501\u5b58\u5668\u8f93\u5165\u7684\u5e76\u4e0d\u662f\u8fd9\u91cc\u6240\u8bf4\u7684 S\uff0c\u800c\u662f\u5c06 S' \u4f5c\u4e3a\u8f93\u5165\u3002</p> SR \u9501\u5b58\u5668S'R' \u9501\u5b58\u5668 <p> </p> <p> </p> <p>\u4e00\u4e2a\u8bb0\u5fc6\u65b9\u6cd5\u662f\uff0cSR \u7684\u95e8\u5143\u4ef6\u5bf9 <code>1</code> \u654f\u611f\uff0c\u6240\u4ee5\u662f \u6216\u975e\u95e8 \u7684\u5b9e\u73b0\uff1b\u800c S'R' \u7684\u95e8\u5143\u4ef6\u5bf9 <code>0</code> \u654f\u611f\uff0c\u6240\u4ee5\u662f \u4e0e\u975e\u95e8 \u7684\u5b9e\u73b0\u3002\u800c\u901a\u8fc7 \u300c\u5f53 S \u4e3a <code>1</code> \u65f6\uff0cQ \u90fd\u4f1a\u662f <code>1</code>\u300d\u53ef\u4ee5\u5f97\u5230 S\u3001R \u4e0e Q\u3001Q' \u7684\u4f4d\u7f6e\u3002</p> <p>\u4f46\u662f\u5b9e\u9645\u7684\u5b58\u50a8\u5143\u4ef6\u5e76\u4e0d\u662f\u5355\u7eaf\u7684 SR/S'R' Latches\uff0c\u6240\u4ee5\u5b83\u4eec\u5f53\u7136\u662f\u5b58\u5728\u95ee\u9898\u7684\u3002\u7531\u4e8e\u7535\u8def\u5b58\u5728\u5ef6\u65f6\uff0c\u6240\u4ee5 S \u548c R \u7684\u8f93\u5165\u5f88\u96be\u540c\u65f6\u5230\u8fbe\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5728\u524d\u9762\u52a0\u4e00\u4e2a\u63a7\u5236\u7aef\uff0c\u5f53\u786e\u4fdd\u4e24\u4e2a\u8f93\u5165\u90fd\u5230\u4f4d\u7684\u65f6\u5019\u518d\u4f7f\u80fd\u3002</p> <p>\u4e8e\u662f\u6211\u4eec\u5f97\u5230\u4e86\uff0c\u5e26\u63a7\u5236\u8f93\u5165\u7684 SR \u9501\u5b58\u5668(SR Latch with Control Input)\uff08S'R'\u7565\uff09\uff1a</p> <p></p> <p>\u6ce8\u610f\uff01SR \u9501\u5b58\u5668\u901a\u8fc7 \u6216\u975e\u95e8 \u5b9e\u73b0\uff0c\u4f46\u5e26\u8f93\u5165\u63a7\u5236\u7684 SR \u9501\u5b58\u5668\u5219\u901a\u8fc7 \u4e0e\u975e\u95e8 \u5b9e\u73b0\uff01</p>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#d","title":"D \u9501\u5b58\u5668","text":"<p>D \u9501\u5b58\u5668\u5b9e\u9645\u4e0a\u662f\u5e26\u63a7\u5236\u8f93\u5165\u7684 SR \u9501\u5b58\u5668\u7684\u6539\u8fdb\u3002\u5176\u4e2d\u6211\u4eec\u5173\u6ce8\u5230\uff0c\u867d\u7136 S \u548c R \u8d77\u4f5c\u7528\u7684\u6709\u4e09\u79cd\u72b6\u6001</p> <p>\u6211\u4eec\u5173\u6ce8\u5230\uff0c\u5373\u4f7f\u662f\u5e26\u63a7\u5236\u8f93\u5165\u7684 SR \u9501\u5b58\u5668\uff0c\u4e5f\u5b58\u5728\u4e00\u4e2a\u300cundefined\u300d\u72b6\u6001\uff0c\u800c\u8fd9\u662f\u6211\u4eec\u4e0d\u5e0c\u671b\u51fa\u73b0\u7684\uff0c\u4e8e\u662f\u6211\u4eec\u60f3\uff0c\u80fd\u4e0d\u80fd\u907f\u514d\u8fd9\u79cd\u60c5\u51b5\u7684\u53d1\u751f\u3002\u8fd9\u65f6\u5019\u6211\u4eec\u89c2\u5bdf\u5230\uff0c\u7531\u4e8e\u53ef\u4ee5\u901a\u8fc7 C \u6765\u63a7\u5236\u662f\u5426\u4fdd\u6301\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u5f3a\u5236\u8981\u6c42 \\(S = \\overline R\\)\uff0c\u4e8e\u662f\u5c31\u907f\u514d\u4e86 undefined \u60c5\u51b5\u7684\u51fa\u73b0\uff0c\u8fd9\u5c31\u662f D \u9501\u5b58\u5668\u3002</p> <p></p> <p>\u53ea\u6709\u5f53 C \u4e3a <code>1</code> \u65f6\uff0cD \u9501\u5b58\u5668\u624d\u80fd\u5199\u5165\u6570\u636e\uff1b\u800c\u5f53 C \u4e3a <code>0</code> \u65f6\uff0cD \u9501\u5b58\u5668\u7684\u6570\u636e\u5c31\u4e0d\u4f1a\u53d8\u5316\u3002</p> <p>\u900f\u660e\u7684\u5371\u5bb3\uff1a\u7a7a\u7ffb</p> <p>\u5f53\u7136\uff0cD \u9501\u5b58\u5668\u4e5f\u5b58\u5728\u95ee\u9898\u3002\u5982\u679c\u6211\u95e8\u5c06 \\(\\overline Q\\) \u63a5\u5230 \\(D\\) \u4e0a\uff0c\u5c31\u4f1a\u53d1\u73b0 D \u9501\u5b58\u5668\u5c06\u4e0d\u505c\u7684\u53d8\u5316\u5176\u4e2d\u7684\u6570\u636e\uff0c\u51fa\u73b0 \u7a7a\u7ffb\uff0c\u5bfc\u81f4\u6211\u4eec\u65e0\u6cd5\u786e\u5b9a C \u7f6e <code>0</code> \u65f6 Q \u7684\u8f93\u51fa\u7a76\u7adf\u662f\u4ec0\u4e48\uff0c\u800c\u8fd9\u662f\u975e\u5e38\u5371\u9669\u7684\u3002</p> <p>\u8fd9\u4e3b\u8981\u662f\u56e0\u4e3a D \u9501\u5b58\u5668\u7684\u8f93\u5165\u548c\u8f93\u51fa\u90fd\u662f\u76f4\u63a5\u66b4\u9732\u51fa\u6765\u3001\u540c\u65f6\u5141\u8bb8\u53d8\u5316\u7684\uff08\u4e0d\u662f\u540c\u65f6\u53d8\u5316\uff0c\u662f\u6307\u5728 Input \u53ef\u4ee5\u53d8\u7684\u65f6\u5019 Output \u4e5f\u80fd\u53d8\uff09\uff0c\u5373 \u900f\u660e(transparent) \u7684\u3002\u8fd9\u5c31\u5bfc\u81f4\u4e86\u5728\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u91cc\uff0c\u540c\u65f6\u5b58\u5728 \u53ef\u4ee5\u4e92\u76f8\u5f71\u54cd \u7684\u4e24\u4e2a\u4e1c\u897f\u3002\u8fd9\u4e5f\u662f\u89e6\u53d1\u5668\u6240\u89e3\u51b3\u7684\u95ee\u9898\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#flip-flop","title":"\u89e6\u53d1\u5668\uff08flip-flop\uff09","text":"<p>\u4e3a\u4e86\u89e3\u51b3\u4e0a\u9762\u63d0\u5230\u7684\uff0c\u7531\u300c\u900f\u660e\u300d\u5f15\u53d1\u7684\u95ee\u9898\uff0c\u800c\u91c7\u7528\u89e6\u53d1\u5668\u7684\u8bbe\u8ba1\u3002\u901a\u8fc7\u7ec4\u5408\u4e24\u4e2a\u9501\u5b58\u5668\uff0c\u4e3b\u8981\u6709\u4e24\u79cd\u5b9e\u73b0\u65b9\u6cd5\uff1a</p> <ol> <li>\u5728\u6709\u8109\u51b2\uff08\u9ad8\u7535\u5e73\uff09\u65f6\uff0c\u4fee\u6539\u7b2c\u4e00\u4e2a\u9501\u5b58\u5668\u7684\u503c\uff0c\u4fdd\u6301\u7b2c\u4e8c\u4e2a\u9501\u5b58\u5668\u7684\u503c\uff1b\u5728\u6ca1\u6709\u8109\u51b2\uff08\u4f4e\u7535\u5e73\uff09\u65f6\u5019\u4fdd\u6301\u7b2c\u4e00\u4e2a\u9501\u5b58\u5668\u7684\u503c\uff0c\u4fee\u6539\u7b2c\u4e8c\u4e2a\u9501\u5b58\u5668\u7684\u503c\uff0c\u66f4\u65b0\u89e6\u53d1\u5668\u7684\u72b6\u6001\uff0c\u5373 \u4e3b\u4ece\u5f0f(master-slave)\u89e6\u53d1\u5668\uff1b</li> <li>\u4ec5\u5728\u65f6\u949f\u7684\u8fb9\u7f18\u89e6\u53d1\uff0c\u5373\u5728\u7279\u5b9a\u65f6\u523b\u4ec5\u63a5\u53d7\u4e00\u4e2a\u8f93\u5165\uff0c\u5373 \u8fb9\u6cbf\u89e6\u53d1\u5f0f(edge-triggered)\u89e6\u53d1\u5668\uff1b</li> </ol> <p>\u8fb9\u6cbf\u89e6\u53d1\u5f0f D \u89e6\u53d1\u5668\u662f\u76ee\u524d\u4f7f\u7528\u6700\u5e7f\u6cdb\u7684\u89e6\u53d1\u5668\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#sr","title":"SR \u4e3b\u4ece\u89e6\u53d1\u5668","text":"<p>\u867d\u7136\u5b83\u53eb FF\uff0c\u4f46\u5b83\u5e76\u4e0d\u7b26\u5408 FF \u7684\u7279\u5f81\uff0c\u7136\u800c\u5206\u7c7b\u4e0a\u53c8\u5c5e\u4e8e pulse-triggered FF\u3002</p> <p>SR \u89e6\u53d1\u5668\u77e5\u6240\u4ee5\u662f\u6240\u8c13\u7684 pulse-triggered \u7684\uff0c\u662f\u56e0\u4e3a\u5728 S \u548c R \u8f93\u5165\u90fd\u4e3a <code>0</code> \u65f6\uff0c\u5982\u679c\u51fa\u73b0\u566a\u97f3\uff0c\u5c31\u4f1a\u5bfc\u81f4 Slave \u5199\u5165\u5f02\u5e38\u6570\u636e\u3002</p> <p>\u4f46\u662f\u6211\u4e2a\u4eba\u8ba4\u4e3a\u8fd9\u662f SR \u81ea\u8eab\u6709\u4e24\u4e2a\u4fdd\u6301\u6001\u5bfc\u81f4\u7684\u5f0a\u7aef\uff0c\u800c\u5728\u5b9e\u9645\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u6211\u4eec\u5c31\u4e0d\u5e94\u8be5\u6709\u8f93\u5165\u4e3a S \u548c R \u90fd\u4e3a <code>0</code> \u7684\u60c5\u51b5\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#_1","title":"\u8fb9\u6cbf\u89e6\u53d1\u5f0f\u89e6\u53d1\u5668","text":"<p>\u4e0a\u9762\u5df2\u7ecf\u8bf4\u8fc7\u4e86\uff0c\u8fb9\u6cbf\u89e6\u53d1\u5f0f\u89e6\u53d1\u5668\u4e3b\u8981\u5bf9\u8109\u51b2\u7684 \u4e0a\u5347\u6cbf \u6216 \u4e0b\u964d\u6cbf \u654f\u611f\u3002</p> <p>\u4e0b\u56fe\u4e3a\u6b63\u8fb9\u6cbf\u89e6\u53d1 D \u89e6\u53d1\u5668\u7684\u5927\u81f4\u539f\u7406\u56fe\u3002</p> <p></p> <p>\u5173\u6ce8\u4e0a\u5347\u6cbf\u524d\u540e\uff0c\u4e0a\u5347\u6cbf\u524d\u4e00\u523b\uff0c\u4e3b\u9501\u5b58\u5668\u53ef\u5199\uff0c\u4ece\u9501\u5b58\u5668\u53ea\u8bfb\uff1b\u4e0a\u5347\u6cbf\u540e\u4e00\u523b\uff0c\u4e3b\u9501\u5b58\u5668\u53ea\u8bfb\uff0c\u4ece\u9501\u5b58\u5668\u53ea\u5199\uff0c\u4e14\u5199\u5165\u7684\u662f\u4e3b\u9501\u5b58\u5668\u5b58\u50a8\u7684\u503c\u2014\u2014\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u5b58\u7684\u662f\u4e0a\u5347\u6cbf\u524d\u4e00\u523b\u5199\u5165\u4e3b\u9501\u5b58\u5668\u7684\u5185\u5bb9\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u4e00\u70b9\u662f\uff0cD \u89e6\u53d1\u5668\u6ca1\u6709\u300c\u4fdd\u6301\u300d\u6001\u3002\u5982\u679c\u8981\u4f7f D \u89e6\u53d1\u5668\u4fdd\u6301\uff0c\u53ef\u4ee5\u4f7f\u65f6\u949f\u8109\u51b2\u5931\u6548\u6216\u901a\u8fc7 <code>MUX</code> \u5c06\u8f93\u51fa\u63a5\u5230\u8f93\u5165\u5b9e\u73b0\u3002\u5176\u4e2d\u524d\u8005\u4e0d\u592a\u5e38\u7528\uff0c\u56e0\u4e3a\u53d7\u95e8\u63a7\u7684\u65f6\u949f\u8109\u51b2\u8fdb\u5165\u89e6\u53d1\u5668\u65f6\u6709\u5ef6\u8fdf\uff0c\u5373 \u65f6\u949f\u504f\u79fb(clock skew)</p>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#jk","title":"JK \u89e6\u53d1\u5668","text":"<p>JK\u89e6\u53d1\u5668\u7684\u72b6\u6001\u8f6c\u6362\u89c4\u5219\u5982\u4e0b\uff1a</p> <ul> <li>\u5f53J=1\uff0cK=0\u65f6\uff0c\u89e6\u53d1\u5668\u5c06\u7f6e\u4f4d\uff08Q=1\uff09\uff1b</li> <li>\u5f53J=0\uff0cK=1\u65f6\uff0c\u89e6\u53d1\u5668\u5c06\u590d\u4f4d\uff08Q=0\uff09\uff1b</li> <li>\u5f53J=1\uff0cK=1\u65f6\uff0c\u89e6\u53d1\u5668\u5c06\u5207\u6362\u72b6\u6001\uff08\u5982\u679c\u4e4b\u524d\u662f\u7f6e\u4f4d\u72b6\u6001\uff0c\u5219\u53d8\u4e3a\u590d\u4f4d\u72b6\u6001\uff1b\u5982\u679c\u4e4b\u524d\u662f\u590d\u4f4d\u72b6\u6001\uff0c\u5219\u53d8\u4e3a\u7f6e\u4f4d\u72b6\u6001\uff09\uff1b</li> <li>\u5f53J=0\uff0cK=0\u65f6\uff0c\u89e6\u53d1\u5668\u4fdd\u6301\u539f\u72b6\u6001\u4e0d\u53d8</li> </ul>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#t","title":"T \u89e6\u53d1\u5668","text":"<p>\\(Q_{n+1} = \\overline{Q_n}T + Q_n\\overline{T} = Q_n \\oplus T\\)</p>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#_2","title":"\u6807\u51c6\u56fe\u5f62\u7b26\u53f7","text":"<p>\u5e26\u5706\u5708\u8868\u793a\u8d1f\u903b\u8f91\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#_3","title":"\u76f4\u63a5\u8f93\u5165","text":"<p>\u8fd9\u4e9b\u76f4\u63a5\u8f93\u5165\u5f80\u5f80\u662f\u5f02\u6b65\u7684\uff0c\u4e00\u822c\u7528\u6765\u5f02\u6b65\u7f6e\u4f4d\uff08\u76f4\u63a5\u7f6e\u4f4d\u6216\u9884\u7f6e\uff09\u6216\u5f02\u6b65\u590d\u4f4d\uff08\u76f4\u63a5\u590d\u4f4d\u6216\u6e05\u96f6\uff09\u3002</p> <p>\u5bf9\u4e8e\u65f6\u5e8f\u7535\u8def\u6765\u8bf4\uff0c\u300c\u590d\u4f4d\u300d\u6216\u300c\u7f6e\u4f4d\u300d\u8fd9\u79cd\u8f93\u5165\u5e38\u5e38\u4f5c\u4e3a\u521d\u59cb\u5316\uff0c\u5373\u786e\u5b9a\u5404\u4e2a\u89e6\u53d1\u5668\u7684\u300c\u521d\u59cb\u72b6\u6001\u300d\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#_4","title":"\u65f6\u5e8f\u7535\u8def\u5206\u6790","text":"<p>\u4e3a\u4e86\u5206\u6790\u65f6\u5e8f\u7535\u8def\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e9b\u5de5\u5177\u6765\u8868\u793a\u65f6\u5e8f\u7535\u8def\u7684\u4e00\u4e9b\u7279\u5f81\u4e0e\u903b\u8f91\u3002\u89c2\u5bdf\u65f6\u5e8f\u7535\u8def\u548c\u7ec4\u5408\u7535\u8def\u7684\u533a\u522b\uff0c\u53d1\u73b0\u6700\u6838\u5fc3\u7684\u5c31\u662f\u903b\u8f91\u8fd0\u7b97\u8fc7\u7a0b\u4e2d\u51fa\u73b0\u4e86\u300c\u72b6\u6001\u300d\u53c2\u4e0e\u8fd0\u7b97\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u5728\u5404\u4e2a\u7ec4\u5408\u7535\u8def\u5206\u6790\u4e2d\u91c7\u7528\u7684\u8868\u793a\u65b9\u6cd5\u4e2d\uff0c\u6dfb\u52a0\u8868\u793a\u300c\u72b6\u6001\u300d\u7684\u4fe1\u606f\u3002</p> <p>\u9664\u6b64\u4e4b\u5916\uff0c\u5982\u679c\u53ea\u662f\u5355\u7eaf\u7684\u5c06\u300c\u72b6\u6001\u300d\u4f5c\u4e3a\u4e00\u4e2a\u65b0\u7684\u8f93\u5165\uff0c\u4f5c\u4e3a\u589e\u91cf\u6dfb\u52a0\u5230\u8868\u8fbe\u65b9\u5f0f\u4e2d\uff0c\u4f1a\u53d1\u73b0\u8fd9\u4e9b\u8868\u8ff0\u4f1a\u663e\u5f97\u5f88\u91cd\u3002\u6240\u4ee5\u6211\u4eec\u4e5f\u9700\u8981\u5bfb\u627e\u4e00\u79cd\u66f4\u597d\u7684\u529e\u6cd5\u6765\u8868\u8fbe\u65f6\u5e8f\u7535\u8def\u4e2d\u7684\u903b\u8f91\uff0c\u8fd9\u5c31\u662f\u300c\u72b6\u6001\u56fe\u300d\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#_5","title":"\u89e6\u53d1\u5668\u7684\u8f93\u5165\u65b9\u7a0b","text":"<p>\u89e6\u53d1\u5668\u7684\u8f93\u5165\u65b9\u7a0b(flip-flop input equation) \u4e3b\u8981\u662f\u4e3a\u5176\u63d0\u4f9b\u4e00\u4e2a\u4ee3\u6570\u8868\u8fbe\u65b9\u5f0f\u3002\u5b83\u7684\u4e3b\u8981\u60f3\u6cd5\u662f\uff1a1.\u8868\u8fbe\u6bcf\u4e00\u4e2a\u89e6\u53d1\u5668\u7684\u8f93\u5165\u4e0e\u8f93\u51fa\u4e4b\u95f4\u7684\u5173\u7cfb\uff1b2.\u8868\u8fbe\u6bcf\u4e00\u4e2a\u76f4\u63a5\u8f93\u51fa\u7684\u903b\u8f91\u8868\u8fbe\u5f0f\u3002\u5176\u4e2d\uff0c\u89e6\u53d1\u5668\u7684\u8f93\u51fa\u7b26\u53f7\u8868\u793a\u4e86\u5176\u7c7b\u578b\uff08\u5373\u7b26\u53f7\uff09\u4e0e\u8f93\u51fa\uff08\u5373\u4e0b\u6807\uff09\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u4f8b\u5982\u4e0b\u9762\u8fd9\u4e2a\u7535\u8def\uff1a</p> <p></p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u5176\u4e2d\u5305\u542b\u4e24\u4e2a\u89e6\u53d1\u5668 \\(D_A\\) \u548c \\(D_B\\)\uff0c\u4ee5\u53ca\u4e00\u4e2a\u7ec4\u5408\u903b\u8f91\u8f93\u51fa \\(Y\\)\uff0c\u56e0\u800c\u53ef\u4ee5\u6839\u636e\u7535\u8def\u7684\u7279\u5f81\uff0c\u5f97\u5230\u4e0b\u9762\u8fd9\u51e0\u4e2a\u5f0f\u5b50\uff1a</p> \\[ \\begin{aligned}     D_A &amp; = AX + BX \\\\     D_B &amp; = \\overline{A}X \\\\     Y   &amp; = (A + B)\\overline{X} \\end{aligned} \\]"},{"location":"ZJU_CS/DigitalDesign/Chap04/#_6","title":"\u72b6\u6001\u8868","text":"<p>\u5f53\u7136\uff0c\u65f6\u5e8f\u7535\u8def\u7684\u903b\u8f91\u6709\u65f6\u5019\u4e5f\u53ef\u4ee5\u901a\u8fc7\u72b6\u6001\u8868\u6765\u63cf\u8ff0\uff0c\u53ea\u4e0d\u8fc7\u4e0e\u7ec4\u5408\u7535\u8def\u7684 \u771f\u503c\u8868 \u4e0d\u540c\uff0c\u72b6\u6001\u8868(state table) \u6709\u56db\u680f\uff1a\u5f53\u524d\u72b6\u6001(present state)\u3001\u8f93\u5165(input)\u3001\u4e0b\u4e00\u72b6\u6001(next state)\u3001\u8f93\u51fa(output)\u3002\u5176\u542b\u4e49\u662f\u6bd4\u8f83\u663e\u7136\u7684\uff0c\u53ea\u4e0d\u8fc7\u9700\u8981\u901a\u8fc7\u7535\u8def\u56fe\u5f97\u5230\u72b6\u6001\u8868\uff0c\u9700\u8981\u9996\u5148\u5f97\u5230\u300c\u5f53\u524d\u72b6\u6001\u300d\u5411\u300c\u4e0b\u4e00\u72b6\u6001\u300d\u8f6c\u79fb\u7684\u65b9\u7a0b\uff0c\u5373\u5bf9\u4e8e\u67d0\u4e2a\u65f6\u523b \\(t\\) \u7684\u89e6\u53d1\u5668 \\(A\\) \u7684\u8f93\u51fa \\(A(t)\\)\uff0c\u9700\u8981\u5f97\u5230\u5b83\u4e0b\u4e00\u523b\u7684\u72b6\u6001 \\(A(t+1) = f(A(t), ...)\\)\u3002</p> <p>\u540c\u6837\u4ee5\u8fd9\u4e2a\u7535\u8def\u4e3a \ud83c\udf30\uff1a</p> <p></p> <p>\u9996\u5148\u6211\u4eec\u5bf9 \\(D_A\\) \u5f97\u5230\u8f6c\u79fb\u65b9\u7a0b\uff1a\\(A(t+1) = D_A = A(t)X + B(t)X\\)\uff0c\u53ef\u4ee5\u7b80\u5199\u4e3a \\(A(t+1) = D_A = AX+BX\\)\u3002\u7c7b\u4f3c\u5730\u4e5f\u80fd\u5f97\u5230 \\(B\\) \u7684\u8f6c\u79fb\u65b9\u7a0b\u3002</p> <p>\u4e8e\u662f\uff0c\u6839\u636e\u8fd9\u4e9b\u4fe1\u606f\uff0c\u6211\u4eec\u53ef\u4ee5\u5199\u51fa\u5b83\u7684\u72b6\u6001\u8868\uff1a</p> Present State<code>AB</code> Input<code>X</code> Next State<code>AB</code> Output<code>Y</code> <code>00</code> <code>0</code> <code>00</code> <code>0</code> <code>00</code> <code>1</code> <code>01</code> <code>0</code> <code>01</code> <code>0</code> <code>00</code> <code>1</code> <code>01</code> <code>1</code> <code>11</code> <code>0</code> <code>10</code> <code>0</code> <code>00</code> <code>1</code> <code>10</code> <code>1</code> <code>10</code> <code>0</code> <code>11</code> <code>0</code> <code>00</code> <code>1</code> <code>11</code> <code>1</code> <code>10</code> <code>0</code> <p>Mealy model circuit &amp; Moore model circuit</p> <p>\u5982\u679c\u8f93\u51fa\u65e2\u4f9d\u8d56\u4e8e\u5f53\u524d\u72b6\u6001\uff0c\u4e5f\u4f9d\u8d56\u4e8e\u8f93\u5165\u7684\u65f6\u5e8f\u7535\u8def\uff0c\u5219\u79f0\u4e3a \u7c73\u52d2\u578b\u7535\u8def(Mealy model circuit)\uff1b\u800c\u5982\u679c\u8f93\u51fa\u53ea\u4f9d\u8d56\u4e8e\u5f53\u524d\u72b6\u6001\uff0c\u5219\u79f0\u4e3a \u6469\u5c14\u578b\u7535\u8def(Moore model circuit)\u3002</p> <p>\u5728 \u72b6\u6001\u56fe \u4e2d\uff0c\u6211\u4eec\u8fd8\u5c06\u518d\u4e00\u6b21\u9047\u5230\u8fd9\u4e24\u4e2a\u4eba\u540d\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#_7","title":"\u72b6\u6001\u56fe","text":"<p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u72b6\u6001\u8868\u6bd4\u8f83\u6e05\u6670\u7684\u8868\u8fbe\u4e86\u4e0d\u540c\u7684\u72b6\u6001\u548c\u8f93\u5165\u5f97\u5230\u7684\u7ed3\u679c\uff0c\u4f46\u662f\u5bf9\u4e8e\u300c\u4e0d\u540c\u72b6\u6001\u4e4b\u95f4\u662f\u5982\u4f55\u8f6c\u6362\u7684\u300d\u8fd9\u4ef6\u4e8b\u7684\u63cf\u8ff0\u5e76\u4e0d\u6e05\u6670\u3002\u800c\u5bf9\u4e8e\u300c\u8054\u7cfb\u300d\u8fd9\u4ef6\u4e8b\uff0c\u6709\u5411\u56fe\u662f\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u5f62\u5f0f\uff0c\u6240\u4ee5\u6211\u4eec\u5c06\u4ecb\u7ecd \u72b6\u6001\u56fe(state diagram)\u3002</p> <p>\u72b6\u6001\u56fe\u627f\u8f7d\u7684\u4fe1\u606f\u91cf\u548c\u72b6\u6001\u8868\u662f\u4e00\u6837\u7684\uff0c\u6240\u4ee5\u4e5f\u662f\u9700\u8981\u8868\u8fbe \u5f53\u524d\u72b6\u6001(present state)\u3001\u8f93\u5165(input)\u3001\u4e0b\u4e00\u72b6\u6001(next state)\u3001\u8f93\u51fa(output) \u8fd9\u56db\u4e2a\u4e1c\u897f\u3002\u53ea\u4e0d\u8fc7\u300c\u4e0b\u4e00\u72b6\u6001\u300d\u662f\u901a\u8fc7\u6709\u5411\u8fb9\u6765\u8868\u793a\u7684\u3002\u5f53\u524d\u72b6\u6001\u4f5c\u4e3a\u4e00\u4e2a node \u7684\u5c5e\u6027\uff1b\u800c\u8f93\u5165\u4f5c\u4e3a edge \u7684\u4e00\u4e2a\u5c5e\u6027\uff1b\u81f3\u4e8e\u8f93\u51fa\uff0c\u6839\u636e\u5b83\u662f\u653e\u5728 edge \u4e0a\u8fd8\u662f node \u4e0a\uff0c\u5206\u4e3a \u7c73\u52d2\u578b(Mealy) \u548c \u6469\u5c14\u578b(Moore) \u4e24\u79cd\u3002</p> <p>Mealy</p> <p>\u4f8b\u5982\uff0c\u8fd9\u662f\u4e00\u4e2a \u7c73\u52d2\u578b \u7684\u72b6\u6001\u56fe\uff0c\u4ee5\u53ca\u5bf9\u5e94\u7684\u72b6\u6001\u8868\u3002</p> <p></p> <p>\u56e0\u4e3a\u7c73\u52d2\u578b\u7535\u8def\u7684 \u8f93\u51fa\u4e0e\u5f53\u524d\u72b6\u6001\u548c\u8f93\u5165\u90fd\u6709\u5173\uff0c\u6240\u4ee5\u8f93\u51fa\u4f1a\u548c\u8f93\u5165\u653e\u5728\u4e00\u8d77\uff0c\u5373\u653e\u5728 edge \u91cc\u3002</p> <p>\u5bf9\u4e8e\u7c73\u52d2\u578b\uff0cnode \u5185\u7684\u4e8c\u8fdb\u5236\u4e3a present state \u4e2d\u7684 <code>AB</code>\uff1bedge \u4e0a\u5206\u522b\u4e3a input \u548c output\uff1a<code>X</code>/<code>Y</code>\uff1b\u6709\u5411\u8fb9\u8868\u8fbe\u4e86\u6bcf\u4e2a\u72b6\u6001\u5728\u7279\u5b9a\u8f93\u5165\u4e0b\u7684\u4e0b\u4e00\u4e2a\u72b6\u6001\u3002</p> <p>\u4f8b\u5982\uff0c\u5173\u6ce8 node <code>00</code>\uff0c\u5b83\u6709\u4e00\u6761\u81ea\u73af <code>0</code>/<code>0</code>\uff0c\u5bf9\u5e94 \u72b6\u6001\u8868 \u7684\u7b2c\u4e00\u884c\uff1b\u5b83\u6709\u4e00\u6761 edge <code>1</code>/<code>0</code> \u6307\u5411 node <code>01</code>\uff0c\u5bf9\u5e94 \u72b6\u6001\u8868\u7684\u7b2c\u4e8c\u884c\u3002</p> <p>\u5f53\u7136\uff0c\u7c73\u52d2\u578b\u662f\u6709 \u7f3a\u9677 \u7684\uff0c\u5728\u65f6\u5e8f\u7535\u8def\u8bbe\u8ba1\u4e4b\u540e\u7684\u6b65\u9aa4\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u6839\u636e\u5b83\u6765\u5bf9\u6bcf\u4e00\u4e2a\u72b6\u6001\u8bbe\u8ba1\u8f93\u51fa\u65b9\u7a0b\u3002\u6b64\u65f6\u7531\u4e8e\u4e24\u4e2a\u8f93\u51fa\u5171\u4eab\u540c\u4e00\u4e2a\u76ee\u6807\u72b6\u6001\uff0c\u6240\u4ee5\u6211\u4eec\u9700\u8981\u5c06\u4e24\u4e2a\u8f93\u51fa\u7ed3\u5408\u5230\u540c\u4e00\u4e2a\u5f0f\u5b50\u4e2d\uff0c\u8fd9\u5c06\u63d0\u9ad8\u8bbe\u8ba1\u96be\u5ea6\u548c\u7ec4\u5408\u7535\u8def\u6210\u672c\u3002</p> <p>Moore</p> <p>\u800c\u4e0b\u9762\u662f\u4e00\u4e2a \u6469\u5c14\u578b \u7684\u72b6\u6001\u56fe\uff0c\u4ee5\u53ca\u5bf9\u5e94\u7684\u72b6\u6001\u8868\u3002</p> <p></p> <p>\u56e0\u4e3a\u6469\u5c14\u578b\u7535\u8def\u7684 \u8f93\u51fa\u53ea\u4e0e\u5f53\u524d\u72b6\u6001\u6709\u5173\uff0c\u6240\u4ee5\u8f93\u51fa\u4f1a\u548c\u5f53\u524d\u72b6\u6001\u653e\u5728\u4e00\u8d77\uff0c\u5373\u653e\u5728 node \u91cc\u3002</p> <p>\u5bf9\u4e8e\u6469\u5c14\u578b\uff0cnode \u5185\u7684\u4e8c\u8fdb\u5236\u8868\u793a present state \u548c output\uff1a<code>A</code>/<code>Z</code>\uff1bedge \u4e0a\u5217\u4e3e\u4e86\u8fd9\u79cd\u8f6c\u79fb\u53ef\u80fd\u7684 inputs\uff1a<code>XY</code>\u3002</p> <p>\u4f8b\u5982\uff0c\u5173\u6ce8 node <code>0</code>/<code>0</code>\uff0c\u5b83\u6709\u4e24\u6761\u81ea\u73af <code>00</code> \u548c <code>11</code>\uff0c\u5206\u522b\u5bf9\u5e94 \u72b6\u6001\u8868 \u7684\u7b2c\u4e00\u884c\u548c\u7b2c\u56db\u884c\uff1b\u5b83\u6709\u4e24\u6761 edge <code>01</code> \u548c <code>10</code> \u6307\u5411 node <code>1</code>/<code>1</code>\uff0c\u5bf9\u5e94 \u72b6\u6001\u8868 \u7684\u7b2c\u4e8c\u884c\u548c\u7b2c\u4e09\u884c\u3002</p> <p>\u6469\u5c14\u578b\u4e5f\u5b58\u5728 \u7f3a\u9677 \u7684\uff0c\u975e\u5e38\u663e\u7136\uff0c\u76f8\u6bd4\u4e8e\u7c73\u52d2\u578b\uff0c\u6469\u5c14\u578b\u9700\u8981\u66f4\u591a\u7684\u72b6\u6001\u3002</p> <p>\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u7c73\u52d2\u578b\u503e\u5411\u4e8e\u8868\u8fbe\u300c\u5728\u7279\u5b9a\u72b6\u6001\u4e0b\uff0c\u7279\u5b9a\u8f93\u5165\u5c06\u5bfc\u81f4\u67d0\u79cd\u7ed3\u679c\uff0c\u4ee5\u53ca\u72b6\u6001\u8f6c\u79fb\u300d\uff1b\u800c\u6469\u5c14\u578b\u503e\u5411\u4e8e\u8868\u8fbe\u300c\u7279\u5b9a\u8f93\u5165\u5c06\u5bfc\u81f4\u67d0\u4e2a\u72b6\u6001\u5411\u53e6\u5916\u4e00\u4e2a\u72b6\u6001\u8f6c\u79fb\uff0c\u800c\u8f93\u51fa\u66f4\u50cf\u662f\u4e00\u79cd\u72b6\u6001\u7684\u7ed3\u679c\u300d\u3002</p> <p>\u72b6\u6001\u56fe\u8fd8\u6709\u8fdb\u9636\u5f62\u6001\uff0c\u4e4b\u540e\u4f1a\u63d0\u53ca\uff0c\u5c31\u662f \u72b6\u6001\u673a\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#_8","title":"\u7b49\u4ef7\u72b6\u6001","text":"<p>Hidden Table(\u662f\u8003\u70b9) \u5efa\u8bae\u53bb\u770b\u770bPPT\uff0c\u8fd9\u91cc\u5c31\u4e0d\u5199\u4e86\u3002</p> <p>\u5ef6\u65f6\u5206\u6790</p> <p>\u5ef6\u65f6\u5206\u6790\u662f\u4e00\u4e2a\u91cd\u96be\u70b9\uff0c\u5bf9\u4e8e\u65f6\u5e8f\u7535\u8def\u7684\u5ef6\u65f6\u5206\u6790\uff0c\u5c06\u5728\u4e4b\u540e\u5355\u72ec\u5f00\u4e00\u4e2a\u5c0f\u7ed3\u91cd\u70b9\u4ecb\u7ecd\u3002</p> <p>\u8bf7\u53c2\u8003 \u5ef6\u65f6\u5206\u6790\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#_9","title":"\u65f6\u5e8f\u7535\u8def\u7684\u8bbe\u8ba1","text":"<p>\u7c7b\u6bd4\u7ec4\u5408\u903b\u8f91\u7535\u8def\u901a\u8fc7\u771f\u503c\u8868\u8bbe\u8ba1\u7535\u8def\uff0c\uff08\u540c\u6b65\uff09\u65f6\u5e8f\u7535\u8def\u4e3b\u8981\u4f9d\u636e\u72b6\u6001\u8868\uff08\u6216\u7b49\u4ef7\u8868\u8fbe\uff0c\u5982\u72b6\u6001\u56fe\uff09\u6765\u8bbe\u8ba1\u7535\u8def\u3002\u5b9e\u9645\u8bbe\u8ba1\u4e2d\uff0c\u6211\u4eec\u9700\u8981\u8003\u8651\u89e6\u53d1\u5668\u4ee5\u53ca\u5176\u5b83\u7ec4\u5408\u7535\u8def\u7684\u9009\u62e9\u4e0e\u8bbe\u8ba1\uff1a</p> <ul> <li>\u89e6\u53d1\u5668\u7684\u6570\u91cf\u57fa\u672c\u53d6\u51b3\u4e8e\u6574\u4e2a\u9700\u6c42\u4e2d \u72b6\u6001 \u7684\u6570\u91cf\uff0c\\(n\\) \u4e2a\u89e6\u53d1\u5668\u80fd\u591f\u8868\u8fbe \\(2^n\\) \u4e2a\u4e8c\u8fdb\u5236\u72b6\u6001\uff1b</li> <li>\u7ec4\u5408\u7535\u8def\u7684\u4e3b\u8981\u8bbe\u8ba1\u56f4\u7ed5 \u89e6\u53d1\u5668 \u7684 \u8f93\u5165 \u548c \u8f93\u51fa \u5c55\u5f00\uff1b</li> </ul> <p>\u800c\u4e3b\u8981\u7684\u8bbe\u8ba1\u8fc7\u7a0b\u548c\u7ec4\u5408\u903b\u8f91\u7535\u8def\u7684\u8bbe\u8ba1\u662f\u7c7b\u4f3c\u7684\uff0c\u5982\u4e0b\uff1a</p> <ol> <li>\u786e\u5b9a\u7cfb\u7edf\u7684\u884c\u4e3a\uff1b<ol> <li>\u63cf\u8ff0\u7cfb\u7edf\u884c\u4e3a\u8fc7\u7a0b\u4e2d\uff0c\u8981\u6ce8\u610f\u72b6\u6001\u7684\u590d\u7528\uff08\u4e0d\u8fc7\u5e76\u975e\u72b6\u6001\u8d8a\u5c11\u6210\u672c\u5c31\u8d8a\u5c0f\uff0c\u8fd9\u91cc\u6709\u89e6\u53d1\u5668\u6570\u91cf\u548c\u7ec4\u5408\u903b\u8f91\u7535\u8def\u7684 trade-off\uff09\uff1b</li> <li>\u786e\u5b9a\u7535\u8def\u7684\u521d\u59cb\u72b6\u6001\uff08\u590d\u4f4d\u72b6\u6001(reset state)\uff0c\u901a\u8fc7\u7ed9\u5b9a\u590d\u4f4d(reset)\u4fe1\u53f7\u5b9e\u73b0\uff09\uff1b<ul> <li>\u590d\u4f4d\u4e00\u822c\u53ef\u4ee5\u662f\u5f02\u6b65\u7684\uff1b</li> </ul> </li> </ol> </li> <li>\u9610\u8ff0\u8f93\u5165\u548c\u8f93\u51fa\u4e4b\u95f4\u7684\u903b\u8f91\u5173\u7cfb\uff0c\u5e76\u7528\u771f\u503c\u8868\u6216\u903b\u8f91\u8868\u8fbe\u5f0f\u8868\u8fbe\u51fa\u6765\uff1b</li> <li>\u7ed9\u8bbe\u8ba1\u597d\u7684\u72b6\u6001\u7f16\u7801\u8d4b\u503c\uff0c\u5f97\u5230\u5177\u4f53\u7684\u72b6\u6001\u8868\uff1b<ol> <li>\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528 \u6309\u8ba1\u6570\u987a\u5e8f\u3001 \u6309\u683c\u96f7\u7801\u3001\u7528\u72ec\u70ed\u7801 \u6765\u7ed9\u72b6\u6001\u8d4b\u503c\uff0c\u66f4\u7cfb\u7edf\u7684\u65b9\u6cd5\u6bd4\u8f83\u590d\u6742\uff0c\u4e0d\u505a\u8ba8\u8bba\uff1b</li> <li>\u5176\u4e2d\u8fd8\u6709\u4e00\u79cd\u60c5\u51b5\u662f\u6240\u9700\u8981\u7684\u72b6\u6001\u4e0d\u80fd\u5b8c\u6574\u586b\u5145 \\(2^n\\) \u79cd\u60c5\u51b5\uff0c\u9700\u8981\u8bbe\u8ba1\u65e0\u6548\u72b6\u6001\uff0c\u8fd9\u79cd\u65f6\u5019\u53ef\u4ee5\u4e0d\u8003\u8651\u5b83\u4eec\uff1b</li> </ol> </li> <li>\u6839\u636e\u72b6\u6001\u8868\u786e\u5b9a\u4f7f\u7528\u7684\u89e6\u53d1\u5668\u53ca\u5176\u8f93\u5165\u65b9\u7a0b\uff1b</li> <li>\u6839\u636e\u72b6\u6001\u8868\u786e\u5b9a\u8f93\u51fa\u65b9\u7a0b\uff1b</li> <li>\u4f18\u5316\u8f93\u5165\u65b9\u7a0b\u548c\u8f93\u51fa\u65b9\u7a0b\uff1b</li> <li>\u5c06\u4f18\u5316\u540e\u7684\u903b\u8f91\u8bbe\u8ba1\u5de5\u827a\u6620\u5c04\u5230\u786c\u4ef6\u5b9e\u73b0\u4e0a\uff1b</li> <li>\u9a8c\u8bc1\u6b63\u786e\u6027\uff08\u5728\u4eff\u771f\u73af\u5883\u4e2d\uff09\uff1b<ul> <li>\u4e3b\u8981\u5c31\u662f\u770b\u80fd\u4e0d\u80fd\u590d\u73b0\u72b6\u6001\u56fe\uff1b</li> </ul> </li> </ol>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#_10","title":"\u72b6\u6001\u673a","text":"<p>\u5c3d\u7ba1\u5728\u5c0f\u89c4\u6a21\u7684\u8bbe\u8ba1\u4e2d\uff0c\u72b6\u6001\u56fe\u8868\u73b0\u826f\u597d\uff0c\u4f46\u662f\u968f\u7740\u8bbe\u8ba1\u7684\u7cfb\u7edf\u89c4\u6a21\u53d8\u5927\uff0c\u6211\u4eec\u9700\u8981\u4e00\u4e2a\u66f4\u52a0\u6cdb\u7528\u7684\u65b9\u5f0f\u6765\u8868\u8fbe\u7c7b\u4f3c\u7684\u65f6\u5e8f\u903b\u8f91\u3002</p> <p>\u4e8e\u662f\uff0c\u6211\u4eec\u5728\u72b6\u6001\u56fe\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u4fee\u6539\uff0c\u8bbe\u8ba1\u4e86 \u72b6\u6001\u673a(State-Machine Diagram) \u6765\u505a\u8fd9\u4ef6\u4e8b\u3002</p> <p>\u72b6\u6001\u673a\u6df7\u7528\u4e86\u7c73\u52d2\u578b\u548c\u6469\u5c14\u578b\u7684\u8f93\u51fa\u683c\u5f0f\uff0c\u4f18\u52a3\u5728 \u72b6\u6001\u56fe \u4e2d\u6709\u6240\u63d0\u53ca\u3002\u5e76\u4e14\uff0c\u6709\u9650\u56fe\u5c06\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u4e5f\u5199\u5165\uff0c\u603b\u4f53\u4e0a\u5bf9\u7535\u8def\u8bbe\u8ba1\u66f4\u53cb\u597d\u3002\u4e0b\u56fe\u662f\u72b6\u6001\u673a\u7684\u4e00\u4e2a\u201c\u8303\u5f0f\u201d\u3002</p> <p>Generic State Diagram Template</p> <p></p> <p>\u9996\u5148\u89e3\u91ca\u4e00\u4e0b\u8fd9\u4e2a\u201c\u8303\u5f0f\u201d\uff1a</p> <p>\u5177\u4f53\u89e3\u91ca\u72b6\u6001\u673a\u6709\u54ea\u4e9b\u5185\u5bb9\uff0c\u4ee5\u53ca\u5404\u4e2a\u90e8\u5206\u4e4b\u95f4\u7684\u903b\u8f91\u3002\u5173\u4e8e\u5404\u4e2a\u90e8\u5206\u51fa\u73b0\u7684\u4f4d\u7f6e\uff0c\u8bf7\u53c2\u8003 Template\u3002</p> <p>\u53e6\u5916\uff0c\u4e3a\u4e86\u7b80\u5316\u8bed\u53e5\uff0c\u4e0b\u9762\u7684\u8bf4\u6cd5\u7701\u7565\u4e86\u65f6\u949f\uff0c\u8bf7\u8bb0\u5f97\u8003\u8651\u3002</p> <p>\u72b6\u6001\u673a\u6a21\u578b\u4e3b\u8981\u6709\u4e09\u8981\u7d20\uff1a\u8f93\u5165\u6761\u4ef6(Input Conditions)\u3001\u72b6\u6001\u8f6c\u79fb(Transitions) \u548c \u8f93\u51fa\u884c\u4e3a(Output Actions)\u3002\u603b\u4f53\u6765\u8bf4\uff0c\u8f93\u5165\u6761\u4ef6\u544a\u8bc9\u6211\u4eec\u6574\u4e2a\u72b6\u6001\u673a\u8981\u5982\u4f55\u53d8\u5316\uff1b\u72b6\u6001\u8f6c\u79fb\u63cf\u8ff0\u4e86\u72b6\u6001\u673a\u7684\u5185\u90e8\u8f6c\u79fb\u884c\u4e3a\uff0c\u5373\u56fe\u8bba\u4e0a\u7684\u6709\u5411\u8054\u901a\u5173\u7cfb\uff1b\u8f93\u51fa\u884c\u4e3a\u63cf\u8ff0\u52a8\u6001\u53d8\u5316\u8fc7\u7a0b\u4e2d\u72b6\u6001\u673a\u7684\u5bf9\u5916\u8868\u8fbe\u3002\u5176\u4e2d\uff0c\u72b6\u6001\u8f6c\u79fb\u548c\u8f93\u51fa\u884c\u4e3a\u662f\u6211\u4eec\u9700\u8981\u5173\u6ce8\u7684\u72b6\u6001\u673a\u7684\u4e24\u4e2a\u7ef4\u5ea6\uff0c\u8f93\u5165\u6761\u4ef6\u662f\u6211\u4eec\u7528\u6765\u505a\u5b9e\u65f6\u5224\u65ad\u7684\u5916\u90e8\u4f9d\u636e\u3002</p> <p>\u300c\u8f93\u5165\u6761\u4ef6\u300d\u662f\u7531\u8f93\u5165\u53d8\u91cf\u5f62\u6210\u7684\u4e00\u4e2a\u5e03\u5c14\u65b9\u7a0b\uff0c\u5728\u6574\u4e2a\u72b6\u6001\u673a\u4e2d\uff0c\u8f93\u5165\u662f\u53d8\u5316\u7684\u201c\u56e0\u53d8\u91cf\u201d\uff0c\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u65e0\u8bba\u662f\u72b6\u6001\u8f6c\u79fb\u8fd8\u662f\u8f93\u51fa\uff0c\u90fd\u53d6\u51b3\u4e8e\u8f93\u5165\u6761\u4ef6\u3002\u800c\u5bfc\u81f4\u7279\u5b9a\u884c\u4e3a\u7684\u8f93\u5165\u6761\u4ef6\u5219\u88ab\u5206\u7c7b\u4e3a \u8f6c\u79fb\u6761\u4ef6(Transition Condition)TC \u548c \u8f93\u51fa\u6761\u4ef6(Output Condition)OC\u3002</p> <p>\u300c\u72b6\u6001\u8f6c\u79fb\u300d\u5728\u56fe\u4e2d\u8868\u73b0\u4e3a\u6709\u5411\u8fb9\uff0c\u5f53 TC \u6210\u7acb\u65f6\uff0c\u72b6\u6001\u8f6c\u79fb\u53d1\u751f\uff1b\u6216\u8005\u5bf9\u4e8e\u65e0\u6761\u4ef6\u8f6c\u79fb\uff0c\u53ea\u8981\u5f97\u5230\u65f6\u949f\u8109\u51b2\u5c31\u4f1a\u8f6c\u79fb\u5230\u4e0b\u4e00\u4e2a\u72b6\u6001\u3002</p> <p>\u300c\u8f93\u51fa\u884c\u4e3a\u300d\u5728\u72b6\u6001\u673a\u4e2d\u6709\u56db\u79cd\u89e6\u53d1\u65b9\u6cd5\uff08\u5373\u56db\u79cd OC\uff09\uff1aMoore\u3001\u4e0d\u4f9d\u8d56\u8f6c\u79fb(Transition-condition Independent)TCI Mealy\u3001\u4f9d\u8d56\u8f6c\u79fb(Transition-condition Dependent)TCD Mealy \u548c \u4f9d\u8d56\u8f6c\u79fb\u548c\u8f93\u51fa\u6761\u4ef6(Transition and Output-condition Dependent)TOCD Mealy\u3002\u6839\u636e\u5b57\u9762\u610f\u601d\u6765\u770b\uff1a</p> <ul> <li>Moore \u53ea\u4e0e\u72b6\u6001\u6709\u5173\uff0c\u6240\u4ee5\u5728\u56fe\u4e2d\u4ece\u72b6\u6001\u8282\u70b9\u5f15\u51fa\uff1b</li> <li>TCI Mealy \u4e0e\u72b6\u6001\u548c\u8f93\u51fa\u6761\u4ef6\u6709\u5173\uff0c\u6240\u4ee5\u5728\u56fe\u4e2d\u4ece\u72b6\u6001\u8282\u70b9\u5f15\u51fa\u5199\u5728 OC \u540e\u9762\uff08<code>OC</code>/<code>TCI OA</code>\uff09\uff1b</li> <li>TCD Mealy \u4e0e\u8f6c\u79fb\u6761\u4ef6\u6709\u5173\uff0c\u5f53\u8f6c\u79fb\u6210\u7acb\u7684\u65f6\u5019\u53d1\u751f Output Action\uff0c\u6240\u4ee5\u76f4\u63a5\u5199\u5728 TC \u540e\u9762\uff08<code>TC</code>/<code>TCD OA</code>\uff09\uff1b</li> <li>TOCD Mealy \u5728\u8f6c\u79fb\u53d1\u751f\u65f6\u5019\u624d\u53ef\u80fd\u6761\u4ef6\u6210\u7acb\uff0c\u5373\u5f53 TC \u548c OC \u90fd\u6210\u7acb\u65f6\u624d\u53d1\u751f Output Action\uff0c\u6240\u4ee5\u9700\u8981\u4ece TC \u5f15\u51fa OC\uff0c\u5e76\u8ddf\u5728 OC \u540e\u9762\uff08<code>TC</code>\u2014\u2014<code>OC</code>/<code>TOCD OA</code>\uff09\uff1b         - \u5982\u679c\u51fa\u73b0\u590d\u6570\u7684 TOCD OA\uff0c\u5219\u4f7f\u7528 <code>,</code> \u5206\u9694\uff1b</li> </ul> <p>In a given state, an output action occurs if: (a) it is unconditional (Moore), (b)  TCI and its output condition OC = 1, (c) TCD and its transition condition TD = 1, and (d) TOCD and its transition condition TC and output condition OC are both equal to 1, i.e, TC\u00b7OC = 1. Note that Moore and TCI output actions attached to a state, apply to all transitions from the state as well.</p> <p>\u56de\u5230\u8f93\u51fa\u884c\u4e3a\u672c\u8eab\uff0c\u5f53 OC \u6210\u7acb\u65f6\u8f93\u51fa\u884c\u4e3a\u53d1\u751f\uff0c\u4e00\u822c\u4f1a\u5c06\u8f93\u51fa\u53d8\u91cf\u6807\u51fa\uff0c\u5982\u679c\u5199\u7684\u662f NOT X\uff0c\u8868\u793a OC \u6210\u7acb\u65f6 X \u5e94\u4e3a <code>0</code>\uff1b\u5982\u679c\u5199\u7684\u662f X\uff0c\u5219\u8868\u793a OC \u6210\u7acb\u65f6 X \u4e3a <code>1</code>\u3002</p> <p>\u6ce8\u610f\u70b9</p> <p>\u6b64\u5916\uff0c\u8fd8\u6709\u4e00\u4e2a\u70b9\u9700\u8981\u8fa8\u6790\uff0c\u7531\u4e8e\u300cTransition\u300d\u8868\u793a\u7684\u662f\u201c\u4e0b\u4e00\u4e2a\u201d\u72b6\u6001\uff0c\u6240\u4ee5\u5bf9\u4e8e\u5f53\u524d\u65f6\u523b\uff0c\u5f53\u524d\u8282\u70b9\u7684\u8f93\u51fa\u548c\u51fa\u5ea6\u7684\u8f93\u51fa\u4e0d\u80fd\u51b2\u7a81\u3002\u4f8b\u5982\uff0c\u4e0b\u56fe\u56e0\u4e3a Moore \u8f93\u51fa\u884c\u4e3a\u7684 Z \u548c TC=AB \u90a3\u6761\u8fb9\u7684 Z' \u51b2\u7a81\uff0c\u6240\u4ee5\u975e\u6cd5\u3002</p> <p></p> <p>\u5f53\u7136\uff0c\u975e\u6cd5\u72b6\u6001\u673a\u5e76\u4e0d\u53ea\u6709\u8fd9\u4e00\u4e2a\u5224\u636e\u3002\u4e0d\u8fc7\u6838\u5fc3\u601d\u60f3\u5c31\u662f \u4e0d\u80fd\u6709\u6b67\u4e49\u6216\u51b2\u7a81\u4e14\u9700\u8981\u5145\u5206\uff0c\u66f4\u6570\u5b66\u7684\u8868\u8fbe\u662f\uff0c\u5fc5\u987b\u6ee1\u8db3\u5982\u4e0b\u4e24\u4e2a\u6761\u4ef6\uff1a</p> <p>1.\u975e\u4ea4\uff1a\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u72b6\u6001 \\(S_i\\)\uff0c\u5b83\u7684\u4efb\u610f\u4e24\u4e2a\u51fa\u5ea6 \\((T_{ij},T_{jk})\\) \u90fd\u4e0d\u80fd\u540c\u65f6\u6210\u7acb\uff0c\u5373\u5e94\u6709\uff1a</p> \\[ \\forall (T_{ij},T_{ik})\\;,\\;\\;T_{ij}\\cdot T_{ik} = 0 \\] <p>2.\u5145\u5206\uff1a\u5bf9\u4e8e\u6bcf\u4e00\u4e2a\u72b6\u6001 \\(S_i\\)\uff0c\u5b83\u7684\u6240\u6709\u51fa\u5ea6\u6761\u4ef6\u5e94\u8be5\u6db5\u76d6\u6240\u6709\u53ef\u80fd\uff0c\u5373\u5e94\u6709\uff1a</p> \\[ \\sum_{j}T_{ij} = 1 \\] <p>Tips: \u4e0a\u9762\u662f\u5bf9 Transition Condition \u7684\u7ea6\u675f\uff0c\u5c06 TC \u6362\u6210 OC \u4e5f\u9700\u8981\u6210\u7acb\u3002</p> \u7f29\u5199\u5bf9\u7167\u8868 \u7f29\u5199 \u542b\u4e49 \u6ce8\u91ca TC Transition Condition \u8f6c\u79fb\u6761\u4ef6\uff1a\u5bfc\u81f4 Transition \u7684 Input Condition OC Output Condition \u8f93\u51fa\u6761\u4ef6\uff1a\u5bfc\u81f4 Output Actions \u7684 Input Condition TCI Transition-condition Independent \u4e0d\u4f9d\u8d56\u8f6c\u79fb\uff1a\u53ea\u4e0e State \u6709\u5173\u7684 Output Actions TCD Transition-condition Dependent \u4f9d\u8d56\u8f6c\u79fb\uff1aTransition Condition \u6210\u7acb\u624d\u6709 Output Actions TOCD Transition and Output-condition Dependent \u4f9d\u8d56\u8f6c\u79fb\u548c\u8f93\u51fa\u65b9\u7a0b\uff1aTransition Condition \u548c Output Condition \u90fd\u6210\u7acb\u624d\u6709 Output Actions State Machine Diagram \ud83c\udf30 <p></p> <p>\u6ce8\u610f\uff0c\u56fe\u4e2d\u6709\u4e00\u4e2a\u9519\u8bef\uff08\u5927\u6982\uff09\uff0c\u53f3\u4fa7 \\(S_1\\) \u7684 OC \u5e94\u4e3a \\((\\overline{A}\\cdot\\overline{B})\\)\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#_11","title":"\u5ef6\u65f6\u5206\u6790","text":"<p>\u9996\u5148\uff0c\u81ea\u4e0a\u800c\u4e0b\u7684\u7ed9\u51fa\u89c2\u5ff5\uff0c\u65f6\u5e8f\u7535\u8def\u7684\u5ef6\u65f6\u5206\u6790\u6709\u4e24\u4e2a\u4e3b\u8981\u90e8\u5206\u548c\u4e00\u4e2a\u6b21\u8981\u90e8\u5206\uff1a</p> <ol> <li>\u7ec4\u5408\u7535\u8def\u5bfc\u81f4\u7684\u5ef6\u65f6\uff1b</li> <li>\u89e6\u53d1\u5668\u5bfc\u81f4\u7684\u5ef6\u65f6\uff1b</li> <li>\u7535\u8def\u7684\u677e\u5f1b\u65f6\u95f4\uff1b</li> </ol> <p>\u5e76\u4e14\u5f80\u5f80\u662f\u6839\u636e\u89e6\u53d1\u5668\u7684\u7c7b\u578b\uff0c\u8ba1\u7b97\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u7684\u65f6\u95f4\u3002\u6700\u6838\u5fc3\u7684\u95ee\u9898\u5c31\u662f\u8ba1\u7b97\u7535\u8def\u80fd\u591f\u6b63\u5e38\u5de5\u4f5c\u7684\u6700\u77ed\u65f6\u949f\u5468\u671f\u3002\u63a5\u4e0b\u6765\uff0c\u81ea\u4e0b\u800c\u4e0a\u7684\u8fdb\u884c\u7ec6\u8282\u8865\u5145\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#_12","title":"\u7ec4\u5408\u7535\u8def\u5ef6\u65f6","text":"<p>\u8fd9\u4e00\u90e8\u5206\u7684\u8be6\u7ec6\u5185\u5bb9\u5df2\u7ecf\u5728 \u4e0a\u4e00\u7ae0 \u4ecb\u7ecd\u8fc7\u4e86\uff0c\u5728\u8fd9\u91cc\uff0c\u4e3a\u4e86\u7b80\u5316\u8ba1\u7b97\u8fc7\u7a0b\uff0c\u6211\u4eec\u5168\u90e8\u91c7\u7528 \\(t_{pd}\\)\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#_13","title":"\u89e6\u53d1\u5668\u5ef6\u65f6","text":"<p>\u89e6\u53d1\u5668\u5ef6\u65f6\u76f8\u6bd4\u7ec4\u5408\u7535\u8def\u5ef6\u65f6\u590d\u6742\u5f88\u591a\uff0c\u4e3b\u8981\u76ee\u7684\u662f\u4e3a\u4e86\u4fdd\u8bc1\u91c7\u6837\u3002\u4e5f\u5c31\u662f\u8bf4\u5b83\u7684\u201c\u5ef6\u65f6\u201d\u5e76\u4e0d\u4ec5\u4ec5\u662f\u56e0\u4e3a\u7535\u4fe1\u53f7\u4f20\u64ad\u7684\u5ef6\u8fdf\uff0c\u8fd8\u6709\u4e3a\u4e86\u4fdd\u8bc1\u4fe1\u53f7\u7a33\u5b9a\u8bbe\u8ba1\u7684\u4e00\u4e9b\u5185\u5bb9\u3002</p> <p>\u5927\u81f4\u6765\u8bf4\u6709\u4e09\u4e2a\u90e8\u5206\uff1a</p> Time <p>t_{pd}\uff08\u4f20\u64ad\u5ef6\u8fdf\u65f6\u95f4\uff09\uff1a\u8fd9\u662f\u6307\u8f93\u5165\u53d1\u751f\u53d8\u5316\u540e\uff0c\u8f93\u51fa\u53d1\u751f\u53d8\u5316\u6240\u9700\u7684\u65f6\u95f4\u3002\u5b83\u8868\u793a\u4e86\u4ece\u8f93\u5165\u53d1\u751f\u53d8\u5316\u5230\u8f93\u51fa\u53d1\u751f\u53d8\u5316\u4e4b\u95f4\u7684\u5ef6\u8fdf\u65f6\u95f4\u3002 t_{s}\uff08Setup Time\uff09\uff1a\u8fd9\u662f\u6307\u5728\u65f6\u949f\u4fe1\u53f7\u4f5c\u7528\u4e0b\uff0c\u4f7f\u5f97\u89e6\u53d1\u5668\u7684\u8f93\u51fa\u4ece\u4f4e\u7535\u5e73\u53d8\u4e3a\u9ad8\u7535\u5e73\u6240\u9700\u7684\u65f6\u95f4\u3002\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\uff0c\u8bbe\u7f6e\u4fe1\u53f7\u5fc5\u987b\u4fdd\u6301\u7a33\u5b9a\uff0c\u4ee5\u786e\u4fdd\u89e6\u53d1\u5668\u6b63\u786e\u5730\u5c06\u8f93\u51fa\u7f6e\u4e3a\u9ad8\u7535\u5e73\u3002 t_{h}\uff08Hold Time\uff09\uff1a\u8fd9\u662f\u6307\u5728\u65f6\u949f\u4fe1\u53f7\u4f5c\u7528\u4e0b\uff0c\u4f7f\u5f97\u89e6\u53d1\u5668\u7684\u8f93\u51fa\u4ece\u9ad8\u7535\u5e73\u53d8\u4e3a\u4f4e\u7535\u5e73\u6240\u9700\u7684\u65f6\u95f4\u3002\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\uff0c\u4fdd\u6301\u4fe1\u53f7\u5fc5\u987b\u4fdd\u6301\u7a33\u5b9a\uff0c\u4ee5\u786e\u4fdd\u89e6\u53d1\u5668\u6b63\u786e\u5730\u5c06\u8f93\u51fa\u7f6e\u4e3a\u4f4e\u7535\u5e73\u3002</p> <ul> <li>Setup Time\uff1a\u91c7\u6837\u8fb9\u7f18\u524d\u8f93\u5165\u4fe1\u53f7\u9700\u8981\u4fdd\u6301\u7a33\u5b9a\u7684\u65f6\u95f4\uff1b</li> <li>Hold Time\uff1a\u91c7\u6837\u8fb9\u7f18\u540e\u8f93\u5165\u4fe1\u53f7\u9700\u8981\u4fdd\u6301\u7a33\u5b9a\u7684\u65f6\u95f4\uff1b</li> <li>Propagation Time\uff1a\u89e6\u53d1\u5668\u7684\u91c7\u6837\u8fb9\u7f18\u5230\u8f93\u51fa\u7a33\u5b9a\u7684\u65f6\u95f4\uff08\u4f20\u64ad\u65f6\u95f4\uff09\uff1b</li> </ul> <p>\u4e00\u7bc7\u4ecb\u7ecd Setup Time \u548c Hold Time \u7684 \u6587\u7ae0\u3002</p> <p>\u6839\u636e\u89e6\u53d1\u5668\u7684\u7c7b\u578b\u4e0d\u540c\uff0c\u4e3b\u8981\u7684 Setup Time \u4e5f\u4e0d\u540c\uff1a</p> <p></p> <p>\u5176\u4e2d\u6bd4\u8f83\u91cd\u8981\u7684\u4e00\u4e9b\u70b9\u662f\uff1a</p> <ol> <li>\u8fd9\u51e0\u4e2a\u65f6\u95f4\u70b9\u8d77\u70b9/\u7ec8\u70b9\u90fd\u662f\u89e6\u53d1\u8fb9\u7f18\uff1b</li> <li>Propagation Time \u4e00\u5b9a\u957f\u4e8e Hold Time\uff0c\u56e0\u6b64\u5728\u8ba1\u7b97\u7535\u8def\u5ef6\u8fdf\u65f6\u53ea\u8003\u8651 Propagation Time\uff1b</li> <li>Pulse-trigger \u548c Edge-trigger \u5728\u8868\u73b0\u4e0a\u7684\u533a\u522b\u5728\u4e8e Setup Time\uff0c\u524d\u8005\u9700\u8981\u8986\u76d6\u6574\u4e2a pulse(<code>pos</code> or <code>neg</code>)\uff1b</li> </ol>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#_14","title":"\u677e\u5f1b\u65f6\u95f4","text":"<p>\u5b9e\u9645\u4e0a\u8fd9\u5c31\u662f\u7ed9\u6574\u4e2a\u7535\u8def\u7684\u4e00\u4e2a\u201c\u5bb9\u5dee\u201d\u65f6\u95f4\uff0c\u7ed9\u5b9a\u4e00\u4e2a\u8bef\u5dee\uff0c\u4f46\u662f\u7531\u4e8e\u901a\u8fc7\u524d\u4e24\u8005\u8ba1\u7b97\u51fa\u6765\u7684\u662f\u6700\u77ed\u65f6\u95f4\uff0c\u6240\u4ee5\u677e\u5f1b\u65f6\u95f4\u5fc5\u5b9a\u975e\u8d1f\u3002\uff08\u4e0d\u80fd\u5012\u6263\uff01\uff09</p>"},{"location":"ZJU_CS/DigitalDesign/Chap04/#_15","title":"\u65f6\u5e8f\u7535\u8def\u5ef6\u65f6","text":"<p>\u65f6\u5e8f\u7535\u8def\u7684\u5ef6\u65f6\u8ba1\u7b97\u5b9e\u9645\u4e0a\u662f\u4e3a\u4e86\u8ba1\u7b97\u65f6\u5e8f\u7535\u8def\u8fd0\u4f5c\u7684\u6700\u5927\u9891\u7387\u4ee5\u8bbe\u8ba1\u65f6\u949f\u9891\u7387\u3002\u6240\u4ee5\u6211\u4eec\u9700\u8981\u7b97\u51fa\u7535\u8def\u80fd\u591f\u7a33\u5b9a\u5de5\u4f5c\u7684\u6700\u5c0f\u65f6\u949f\u671f\u3002</p> <p>\u5176\u8ba1\u7b97\u9075\u5faa\u4e00\u5b9a\u65b9\u6cd5\uff1a</p> <p></p> <p>\u56fe\u4e2d \\(t_{pd,FF}\\) \u6307\u89e6\u53d1\u5668\u7684 propagation time\uff0c\\(t_{COMB}\\) \u6307\u7ec4\u5408\u7535\u8def\u7684\u603b\u4f20\u64ad\u65f6\u95f4\uff08\u4e00\u822c\u60c5\u51b5\u4e0b \\(t_{COMB} = \\max{\\sum_i t_{pd,gate_i}}\\)\uff09\uff0c\\(t_{s}\\) \u6307\u89e6\u53d1\u5668\u7684 setup time\uff0c\\(t_{slack}\\) \u8868\u793a\u7535\u8def\u7684\u677e\u5f1b\u65f6\u95f4\u3002</p> <p>\uff08\u5047\uff09\u7ecf\u9a8c\u4e4b\u8c08</p> <p>\u4e00\u822c\u4ece\u4e00\u4e2a FF \u7684\u8f93\u51fa\u51fa\u53d1\u5230 FF \u7684\u8f93\u5165\u7ed3\u675f\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap05/","title":"Chap 5 Digital Hardware Implementation","text":"<p>\u6ce8\u610f</p> <p>\u672c\u7ae0\u8282\u5728\u8865\u5929\u4e2d\u5b8c\u6210\uff0c\u5185\u5bb9\u53ef\u80fd\u6bd4\u8f83\u7b80\u7565\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap05/#_1","title":"\u53ef\u91cd\u7f16\u7a0b\u6280\u672f","text":"<p>\u53ef\u91cd\u7f16\u7a0b\u6280\u672f(programmable implementation technologies)</p> <p>\u76f4\u63a5\u66f4\u6539\u7535\u8def\u6765\u4fee\u6539\u7535\u8def\u529f\u80fd\u88ab\u79f0\u4e3a\u786c\u7f16\u7a0b\uff0c\u800c\u53ef\u91cd\u53d8\u6210\u6280\u672f\u8ba9\u6211\u4eec\u80fd\u591f\u4e0d\u66f4\u6539\u786c\u4ef6\u5e03\u7ebf\u7684\u60c5\u51b5\u4e0b\uff0c\u5b9e\u73b0\u903b\u8f91\u529f\u80fd\u7684\u91cd\u65b0\u7f16\u8f91\u3002</p> <p>FPGA</p> <ul> <li>\u73b0\u573a\u53ef\u7f16\u7a0b\u903b\u8f91\u95e8\u9635\u5217(Field Programmable Gate Array)FPGA</li> <li>\u67e5\u627e\u8868(lookup table)LUT</li> </ul> <p>\u7f16\u7a0b\u6280\u672f(programming technologies) \u5728\u786c\u4ef6\u5c42\u9762\u6709\u4e09\u79cd\u5b9e\u73b0\u624b\u6bb5\uff1a</p> <ul> <li>\u63a7\u5236\u8fde\u63a5\u6765\u5b9e\u73b0\uff08\u4e0d\u662f\u53ef\u91cd\u7f16\u7a0b\uff09\uff1b<ul> <li>Mask programing\uff08\u63a9\u7801\u7f16\u7a0b\uff09</li> <li>Fuse\uff08\u4fdd\u9669\u4e1d\uff09</li> <li>Anti-fuse</li> </ul> </li> <li>\u63a7\u5236\u95e8\u7ea7\u7535\u8def\u7535\u538b\uff1b<ul> <li>Single-bit storage element</li> <li>Stored charge on a floating gate<ul> <li>Erasable</li> <li>Electrically erasable</li> <li>Flash (as in Flash Memory) </li> </ul> </li> </ul> </li> <li>\u4f7f\u7528\u67e5\u627e\u8868(LUT)\uff1b<ul> <li>Storage elements for the function<ul> <li>\u6bd4\u5982\u4f7f\u7528\u4e00\u4e2a <code>MUX</code>\uff0c\u5e76\u5c06\u8f93\u5165\u7aef\u63a5\u5185\u5b58\uff0c\u901a\u8fc7\u4fee\u6539\u5185\u5b58\u7684\u503c\u6765\u4fee\u6539 <code>MUX</code> \u7684\u884c\u4e3a\uff0c\u8fdb\u800c\u5b9e\u73b0\u51fd\u6570\u91cd\u7f16\u7a0b</li> </ul> </li> </ul> </li> </ul> <p>\u8bfe\u7a0b\u4e2d\u4ecb\u7ecd\u7684\u53ef\u91cd\u7f16\u7a0b\u7684\u5668\u4ef6\u4e3b\u8981\u6709\u5982\u4e0b\u56db\u79cd\uff1a</p> <ul> <li>\u53ea\u8bfb\u5185\u5b58 Read Only Memory (ROM) </li> <li>\u53ef\u7f16\u7a0b\u9635\u5217\u903b\u8f91 Programmable Array Logic (PAL^\u24c7^)</li> <li>\u53ef\u7f16\u7a0b\u903b\u8f91\u9635\u5217 Programmable Logic Array (PLA)</li> <li>Complex Programmable Logic Device (CPLD) or Field-Programmable Gate Array(FPGA)</li> </ul> <p>\u524d\u4e09\u8005\u90fd\u53ea\u80fd\u91cd\u5199\u4e00\u6b21\uff0c\u5982\u4e0b\u662f\u5b83\u4eec\u7684\u91cd\u5199\u5185\u5bb9\uff1a</p> <p></p> <p>\u5f15\u5165</p> <p>\u7531\u4e8e\u4e4b\u540e\u51fa\u73b0\u7684\u7535\u8def\u56fe\u4f1a\u975e\u5e38\u5e9e\u5927\uff0c\u6240\u4ee5\u9700\u8981\u5f15\u5165\u4e00\u4e9b\u903b\u8f91\u7b26\u53f7\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap05/#_2","title":"\u903b\u8f91\u7b26\u53f7\u4ecb\u7ecd","text":"<p>Buffer\u2014\u2014\u7b80\u5316\u8868\u793a\u4e00\u4e2a\u53d8\u91cf\u7684\u81ea\u8eab\u548c\u5176\u975e</p> <p></p> <p>Wire connecting</p> <p>\u5728\u53ef\u7f16\u7a0b\u903b\u8f91\u7535\u8def\u4e2d\uff0c\u7ebf\u7684\u8fde\u63a5\u4e0d\u518d\u53ea\u6709\u5355\u7eaf\u7684\u8fde\u901a\u548c\u4e0d\u8fde\u901a\u7684\u5173\u7cfb\uff1a</p> <p>\u5bf9\u4e8e\u4e24\u6761\u76f8\u4ea4\u5bfc\u7ebf\uff1a</p> <ul> <li>\u5982\u679c\u6ca1\u6709\u7279\u6b8a\u7b26\u53f7\uff0c\u5219\u8868\u793a\u8fd9\u4e2a\u4ea4\u53c9\u70b9 is not connected \uff1b</li> </ul> <p></p> <ul> <li>\u5982\u679c\u6709\u4e00\u4e2a \u274c\uff0c\u5219\u8868\u793a\u8fd9\u4e2a\u4ea4\u53c9\u70b9 programmable\uff1b</li> </ul> <p></p> <ul> <li>\u5982\u679c\u53ea\u6709\u4e00\u4e2a\u52a0\u7c97\u7684\u70b9\uff0c\u5219\u8868\u793a\u8fd9\u4e2a\u4ea4\u53c9\u70b9 not programmable\uff1b</li> </ul> <p></p> <p>\u7279\u522b\u7684\uff0c\u5982\u679c\u4e00\u4e2a\u5143\u5668\u4ef6\u7684\u6240\u6709\u8f93\u5165\u90fd\u662f programmable\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u9009\u62e9\u628a\u8fd9\u4e2a \u274c \u753b\u5230\u903b\u8f91\u95e8\u4e0a\uff08\u5982\u4e0b\u56fe e \u548c f\uff09\u3002</p> <p></p>"},{"location":"ZJU_CS/DigitalDesign/Chap05/#rom","title":"ROM","text":"<p>ROM \u7684\u57fa\u672c\u7ed3\u6784\u5982\u4e0b\uff1a \uff08\u56fa\u5b9a\u4e0e\u95e8\u548c\u53ef\u7f16\u7a0b\u6216\u95e8\u6784\u6210\uff09</p> <p></p> <p>\u800c ROM \u7684\u5927\u5c0f\u5982\u4e0b\u8ba1\u7b97\uff08\u4ee5\u4e0a\u56fe\u4e3a\u4f8b\uff09\uff1a</p> \\[ \\begin{aligned}     ROM\\;\\;size\\;\\;&amp;=\\;\\;address\\;\\;width\\;\\;\\times\\;\\;word\\;\\;width&amp;\\\\                    &amp;=\\;\\;2^2\\;\\;\\times\\;\\;4\\;\\;=\\;\\;16\\;\\;bit&amp; \\end{aligned} \\] eg <p>\u66f4\u6e05\u6670\u7684\u8868\u793a\u5176\u5185\u90e8\u903b\u8f91\u7684\uff0c\u53ef\u4ee5\u5c06 ROM \u5199\u6210\u8fd9\u6837\uff1a </p>"},{"location":"ZJU_CS/DigitalDesign/Chap05/#pal","title":"PAL","text":"<p>\u53ef\u91cd\u7f16\u7a0b\u8f93\u5165\u7ec4\u5408\u6765\u5f97\u5230\u56fa\u5b9a\u8f93\u51fa\u3002</p> <p>\u5176\u5177\u6709\u4e00\u4e2a\u7f3a\u9677\u662f\uff0c\u56e0\u4e3a\u8868\u8fbe\u51fd\u6570\u7684\u65b9\u6cd5\u4e0d\u662f\u901a\u8fc7 SOM \u6216\u8005 POM \u7684\u5f62\u5f0f\uff0c\u6240\u4ee5\u4e0d\u4e00\u5b9a\u80fd\u591f\u5b8c\u5907\u8868\u8fbe\u51fd\u6570\u3002</p> <p>\u5728\u6b64\u57fa\u7840\u4e0a\u7684\u4e00\u4e2a\u6539\u8fdb\u662f\uff0c\u901a\u8fc7\u5c06\u4e00\u4e2a\u65e2\u6709\u7684 PAL \u8f93\u51fa\u5f53\u4f5c\u8f93\u5165\uff0c\u8f93\u5165\u5230\u53e6\u5916\u4e00\u4e2a\u51fd\u6570\u4e2d\uff0c\u6765\u5f25\u8865\u9879\u4e0d\u8db3\u7684\u95ee\u9898\u3002</p> eg <p></p>"},{"location":"ZJU_CS/DigitalDesign/Chap05/#pla","title":"PLA","text":"<p>\u4e0e PAL \u7684\u533a\u522b\u5728\u4e8e\uff0c\u5728\u8f93\u51fa\u7684\u65f6\u5019\u4e5f\u80fd\u5bf9\u8f93\u51fa\u7ec4\u5408\u8fdb\u884c\u91cd\u7f16\u7a0b\u3002</p> <p>\u5176\u540c PAL \u4e00\u6837\u5177\u6709\u4e00\u4e2a\u7f3a\u9677\u662f\uff0c\u56e0\u4e3a\u8868\u8fbe\u51fd\u6570\u7684\u65b9\u6cd5\u4e0d\u662f\u901a\u8fc7 SOM \u6216\u8005 POM \u7684\u5f62\u5f0f\uff0c\u6240\u4ee5\u4e0d\u4e00\u5b9a\u80fd\u591f\u5b8c\u5907\u8868\u8fbe\u51fd\u6570\u3002</p> <p>\u5728\u57fa\u7840\u4e0a\u4e00\u4e2a\u6539\u8fdb\u662f\u5728\u8f93\u51fa\u7684\u65f6\u5019\u518d\u505a\u4e00\u6b21\u5f02\u6216\uff08\u4e0d\u7528\u975e\u95e8\u4f53\u73b0\u4e86\u53ef\u91cd\u7f16\u7a0b\u7684\u601d\u60f3\uff09\uff0c\u4ee5\u4ea7\u751f\u65b0\u7684\u9879\uff0c\u6765\u5f25\u8865\u9879\u4e0d\u8db3\u7684\u95ee\u9898\u3002 Attention:\u6ce8\u610fXOR\u7684\u4f5c\u7528\uff01\uff01\uff01</p> <p></p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u51fa\u73b0\u4e86\u65b0\u7684\u9879\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap05/#lookup_tables","title":"Lookup Tables","text":"<p>\u901a\u8fc7\u8ba9\u6570\u636e\u6e90\u63a5\u5185\u5b58\uff0c\u5e76\u901a\u8fc7\u4fee\u6539\u771f\u503c\u8868\u5185\u7684\u503c\uff0c\u5373\u4fee\u6539\u5185\u5b58\u91cc\u7684\u503c\uff0c\u6765\u5b9e\u73b0\u6570\u636e\u6e90\u7684\u53d8\u5316\uff0c\u6765\u6539\u53d8 <code>MUX</code> \u7684\u884c\u4e3a\u3002</p> <p>\u4f46\u662f\u5b9e\u9645\u5e94\u7528\u4e2d\uff0c\u51fd\u6570\u8f93\u5165\u7684\u6570\u91cf\u4f1a\u53d8\u5316\uff0c\u56e0\u6b64\u6211\u4eec\u9700\u8981\u901a\u8fc7\u7075\u6d3b\u7ec4\u5408\u7684\u65b9\u6cd5\uff08\u6bd4\u5982\u901a\u8fc7\u56db\u9009\u4e8c\u9009\u4e00\u7684\u65b9\u5f0f\uff0c\u7528\u4e09\u4e2a\u4e8c\u9009\u4e00\u7684 <code>MUX</code> \u6765\u5b9e\u73b0\u56db\u9009\u4e00\uff09\u6765\u5b9e\u73b0\u591a\u8f93\u5165\u3002</p> <p>\u5e38\u89c1\u7684 <code>LUT</code> \u5927\u5c0f\u4ee5 16bits \u6216 64bits \u7684 4 \u8f93\u5165\u6216 6 \u8f93\u5165\u4e3a\u4e3b\u3002</p> <p>\u7531\u4e8e <code>LUT</code> \u5b58\u7684\u672c\u8d28\u4e0a\u662f\u771f\u503c\u8868\uff0c\u6240\u4ee5\u5b83\u53ef\u4ee5\u5b9e\u73b0\u4efb\u610f\u8f93\u5165\u7b26\u5408\u8981\u6c42\u7684\u903b\u8f91\u51fd\u6570\u3002</p> <p>\u6240\u4ee5\uff0c\u95ee\u9898\u5c31\u53d8\u5316\u4e3a\u5982\u4f55\u7528\u8f83\u5c0f\u7684 <code>LUT</code> \u6765\u7ec4\u5408\u5b9e\u73b0\u590d\u6742\u7684\u903b\u8f91\u51fd\u6570\u3002</p> <p><code>LUT</code> \u7684\u57fa\u672c\u7ed3\u6784\u5982\u4e0b\uff1a</p> <p></p> <p><code>FPGA</code> \u7684\u57fa\u672c\u7ed3\u6784\u5982\u4e0b\uff1a</p> <p></p> <p>\u5176\u4e3b\u8981\u5206\u4e3a\u4e09\u4e2a\u7ec4\u6210\u90e8\u5206\uff1a</p> <ul> <li>CLB(Configurable Logic Block)<ul> <li>\u5927\u91cf\u5b58\u50a8 <code>LUT</code></li> </ul> </li> <li>SM(Switch Matrix)<ul> <li>\u53ef\u7f16\u7a0b\u7684\u4ea4\u6362\u77e9\u9635</li> </ul> </li> <li>IOB(Input &amp; Output Block)<ul> <li>\u53ef\u7f16\u7a0b\u7684\u8f93\u5165\u8f93\u51fa\u5355\u5143</li> </ul> </li> </ul>"},{"location":"ZJU_CS/DigitalDesign/Chap05/#clb","title":"CLB","text":"<p>CLB \u662f <code>FPGA</code> \u4e2d\u7684\u57fa\u7840\u903b\u8f91\u5355\u5143\u3002</p> <p></p>"},{"location":"ZJU_CS/DigitalDesign/Chap05/#sm","title":"SM","text":"<p>\u901a\u8fc7\u76f8\u5f53\u590d\u6742\u7684\u7b97\u6cd5\uff0c <code>SM</code> \u4f1a\u6839\u636e\u76ee\u6807\u903b\u8f91\uff0c\u9009\u62e9\u94fe\u63a5\u4e0d\u540c\u7684 <code>CLB</code> \u4ee5\u5b9e\u73b0\u590d\u6742\u903b\u8f91\u3002</p> <p>\u5b83\u5177\u6709\u8fd9\u4e9b\u57fa\u672c\u5c5e\u6027\uff1a</p> <ol> <li>Flexibility: \u8bc4\u4f30\u4e00\u6761\u7ebf\u53ef\u4ee5\u8fde\u63a5\u5230\u591a\u5c11\u7ebf\uff1b</li> <li>Topology: \u54ea\u4e9b\u7ebf\u53ef\u4ee5\u88ab\u8fde\u63a5\u5230\uff1b</li> <li>Routability: \u6709\u591a\u5c11\u56de\u8def\u53ef\u4ee5\u88ab\u8def\u7531\uff1b</li> </ol> <p></p>"},{"location":"ZJU_CS/DigitalDesign/Chap05/#iob","title":"IOB","text":"<p><code>IOB</code> \u7528\u6765\u5bf9\u5916\u90e8\u8bbe\u5907\u8fdb\u884c\u8fde\u63a5\uff0c\u7528\u6765\u63a7\u5236\u8f93\u5165\u548c\u8f93\u51fa\u3002</p> <p></p> eg for <code>FPGA</code> <p>\u901a\u8fc7 <code>FPGA</code> \u5b9e\u73b0 \\(f=x_1x_2+\\overline{x_2x_3}\\)\uff1a</p> <p>\u5206\u89e3\u95ee\u9898\uff1a\\(f_1 = x_1x_2,\\;\\;f_2=\\overline{x_2x_3},\\;\\;f=f_1+f_2\\)\u3002</p> <p></p> <p>\u5728\u8f6f\u4ef6\u5c42\u9762\u7f16\u7a0b\u5b8c\u540e\uff0c\u4f1a\u751f\u6210\u4f4d\u6d41\u6587\u4ef6(<code>bitfile</code>)\uff0c\u4e0b\u8f7d\u5230\u677f\u65f6\u4f1a\u66f4\u65b0 <code>FPGA</code> \u4e2d\u7684\u5185\u5bb9\u3002</p> <p>\u7ec4\u5408\u51fd\u6570\u7684\u5b9e\u73b0\u65b9\u6cd5</p> <p>\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u4e0d\u7ba1\u662f\u53ef\u91cd\u7f16\u7a0b\u8fd8\u662f\u4e0d\u53ef\u91cd\u7f16\u7a0b\uff0c\u90fd\u5df2\u7ecf\u4ecb\u7ecd\u4e86\u5f88\u591a\u65b9\u6cd5\uff0c\u8fd9\u91cc\u8fdb\u884c\u4e00\u6b21\u5c0f\u7ed3\uff1a</p> <ol> <li><code>Decoder</code>s &amp; <code>OR</code> gates<ul> <li>\u5c06\u8bd1\u7801\u51fa\u6765\u7684\u9700\u8981\u7684\u76ee\u6807\u7ec4\u5408\u90fd <code>OR</code> \u5728\u4e00\u8d77\uff1b</li> </ul> </li> <li><code>MUX</code>s<ul> <li>\u901a\u8fc7\u591a\u8def\u9009\u62e9\u5668\u5b9e\u73b0\u4efb\u610f\u903b\u8f91\u51fd\u6570\uff1b </li> </ul> </li> <li><code>ROM</code>s</li> <li><code>PAL</code>s</li> <li><code>PLA</code>s</li> <li><code>LUT</code>s</li> </ol>"},{"location":"ZJU_CS/DigitalDesign/Chap06/","title":"Chap 6 Registers &amp; Register Transfers","text":""},{"location":"ZJU_CS/DigitalDesign/Chap06/#_1","title":"\u5bc4\u5b58\u5668","text":"<p>\u5bc4\u5b58\u5668(registers) \u7c97\u7565\u7684\u6765\u8bf4\u5c31\u662f\u4e00\u5806\u89e6\u53d1\u5668\u4ee5\u53ca\u5bf9\u5e94\u7684\u72b6\u6001\u63a7\u5236\u7535\u8def\uff0c\u7528\u6765\u5b9e\u73b0\u591a\u4f4d\u6570\u636e\u7684\u5b58\u50a8\u7b49\u64cd\u4f5c\u3002</p> <p>\u5176\u4e2d\u6709\u4e00\u79cd\u7279\u6b8a\u7684\u5bc4\u5b58\u5668\u53eb \u8ba1\u6570\u5668(counter)\uff0c\u975e\u5e38\u76f4\u767d\u7684\uff0c\u5b83\u7684\u884c\u4e3a\u5c31\u662f\u968f\u7740\u65f6\u949f\u5468\u671f\u4e0d\u65ad\u5728\u56fa\u5b9a\u7684\u72b6\u6001\u5e8f\u5217\u4e2d\u5faa\u73af\u3002\u66f4\u5f62\u8c61\u7684\uff0c\u4e00\u822c\u662f\u5b9e\u73b0\u81ea\u52a8\u7684\u8ba1\u6570\u529f\u80fd\uff0c\u50cf\u7535\u5b50\u65f6\u949f\u90a3\u6837\u3002</p> <p>Registers are useful for storing and manipulating information; counters are employed in circuits that sequence and control operations in a digital system.</p> <p>\u5b9e\u73b0\u5bc4\u5b58\u5668\u4e00\u4e2a\u6700\u76f4\u767d\u7684\u60f3\u6cd5\u5c31\u662f\u516c\u7528\u63a7\u5236\u7ebf\u8def\u548c\u5206\u5217\u6570\u636e\u7ebf\u8def\u6765\u63a7\u5236\u591a\u4e2a\u89e6\u53d1\u5668\uff0c\u5982\u4e0b\u56fe\u662f\u4f7f\u7528 D <code>FF</code> \u5b9e\u73b0\u7684\u4e00\u4e2a 4-bit register\uff1a</p> <p></p> <p>\u6211\u4eec\u79f0\u65b0\u6570\u636e\u88ab\u5199\u5165\u5bc4\u5b58\u5668\u7684\u64cd\u4f5c\u4e3a \u8f7d\u5165(load)\uff0c\u800c\u5982\u679c\u8f7d\u5165\u64cd\u4f5c\u5728\u540c\u4e00\u4e2a\u65f6\u949f\u8109\u51b2\u4e2d\u5b8c\u6210\uff0c\u6211\u4eec\u79f0\u4e4b\u662f \u5e76\u884c(parallel) \u7684\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_2","title":"\u4fdd\u6301","text":"<p>\u4f46\u662f\u6211\u4eec\u53d1\u73b0\uff0c\u5982\u56fe\u7684\u5bc4\u5b58\u5668\u5728\u6bcf\u4e2a\u65f6\u949f\u90fd\u5141\u8bb8\u8f7d\u5165\uff0c\u6362\u53e5\u8bdd\u6765\u8bf4\u6bcf\u4e2a\u65f6\u949f\u5468\u671f\u90fd\u4f1a\u6539\u53d8\u4e3a\u8f93\u5165\u3002\u4f46\u662f\u6211\u4eec\u5e0c\u671b\u5373\u4f7f\u6211\u4eec\u4e0d\u7ba1\u5b83\u5b83\u4e5f\u80fd\u4fdd\u6301\u4e4b\u524d\u7684\u503c\uff0c\u4e3b\u8981\u6709\u4e24\u4e2a\u65b9\u6848\u3002</p> <p>\u65b9\u6848</p> plan Aplan B <p>\u5176\u4e2d\u4e00\u4e2a\u505a\u6cd5\u662f\u9700\u8981\u9009\u62e9\u6027\u7684\u8ba9\u5b83\u8ddf\u968f\u65f6\u949f\u8109\u51b2\u5207\u6362\u72b6\u6001\u3002\u505a\u6cd5\u5c31\u662f\u5c06 Control \u4fe1\u53f7\u4fee\u6539\u4e3a \\(C = \\overline{Load} + Clock\\)\uff0c\u5982\u6b64\u800c\u6765\uff0c\u5f53 \\(Load = 0\\) \u65f6\uff0c\u59cb\u7ec8\u6709 \\(C = 0\\)\uff0c\u8109\u51b2\u6d88\u5931\uff0c\u5bc4\u5b58\u5668\u65e0\u6cd5\u88ab\u8f7d\u5165\u3002\u5982\u4e0b\u56fe\uff0c\u8fd9\u79cd\u6280\u672f\u53eb \u95e8\u63a7\u65f6\u949f(clock gating)\u3002</p> <p></p> <p>\u53e6\u5916\u4e00\u4e2a\u505a\u6cd5\u662f\uff0c\u5728\u4e0d\u5e0c\u671b\u5b83\u4fee\u6539\u7684\u65f6\u5019\uff0c\u4e0d\u65ad\u5c06\u5b83\u7684\u8f93\u5165\u8f7d\u5165\uff0c\u4e5f\u5c31\u662f\u4fdd\u6301\u4e0d\u53d8\u3002\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2a <code>MUX</code> \u6765\u5b9e\u73b0\u8fd9\u4e2a\u529f\u80fd\uff0c\u7528 <code>EN</code> \u4f7f\u80fd\u7aef\u6765\u9009\u62e9\u662f\u8f7d\u5165\u65b0\u503c\u8fd8\u662f\u4fdd\u6301\u4e4b\u524d\u7684\u503c\uff0c\u5982\u4e0b\u56fe\u3002</p> <p></p> <p>clock skew</p> <p>\u7136\u800c\uff0c\u5728\u95e8\u63a7\u65f6\u949f\u6280\u672f\u4e2d\uff0c\u7531\u4e8e\u6dfb\u52a0\u4e86\u4e00\u4e2a\u989d\u5916\u7684\u903b\u8f91\u95e8\uff0c\u65f6\u949f\u8109\u51b2\u5230\u8fbe Control \u7684\u65f6\u5019\u4f1a\u51fa\u73b0\u989d\u5916\u7684\u4f20\u64ad\u5ef6\u65f6\uff0c\u5373 \u65f6\u949f\u504f\u79fb(clock skew)\u3002\u800c\u8fd9\u5fae\u5c0f\u7684\u5ef6\u65f6\u4f1a\u5bfc\u81f4\u5728\u6574\u4e2a\u540c\u6b65\u7cfb\u7edf\u4e2d\uff0c\u4e0d\u540c\u7ec4\u4ef6\u5f97\u5230\u7684\u65f6\u949f\u8109\u51b2\u6709\u504f\u5dee\uff0c\u800c\u8fd9\u662f\u6211\u4eec\u6240\u4e0d\u5e0c\u671b\u770b\u5230\u7684\u3002\u6240\u4ee5\u5728\u5b9e\u9645\u8bbe\u8ba1\u4e2d\uff0c\u6211\u4eec\u5e94\u5f53\u907f\u514d\u6216\u5c3d\u53ef\u80fd\u7f29\u5c0f\u65f6\u949f\u504f\u79fb\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_3","title":"\u5bc4\u5b58\u5668\u5355\u5143","text":"<p>\u5c0f\u8282\u5bfc\u8bfb</p> <p>\u672c\u5c0f\u8282\u5728\u4e66\u672c\u4e2d\u7684\u4f4d\u7f6e\u9760\u540e\uff0c\u4f46\u662f\u8003\u8651\u5230\u5185\u5bb9\u7684\u8fde\u7eed\u6027\u6211\u51b3\u5b9a\u63d0\u524d\uff0c\u672c\u8282\u5185\u5bb9\u4f1a\u6d89\u53ca\u4e00\u4e9b\u4e4b\u540e\u7684\u5185\u5bb9\uff0c\u5b9e\u9645\u4e0a\u7684\u7edd\u5bf9\u6027\u77e5\u8bc6\u8f83\u5c11\uff0c\u53ef\u4ee5\u7c97\u770b\u8fc7\u7559\u4e0b\u5370\u8c61\uff0c\u5927\u90e8\u5206\u77e5\u8bc6\u9700\u8981\u901a\u8fc7\u6848\u4f8b\u5206\u6790\u548c\u5b9e\u8df5\u83b7\u5f97\uff0c\u662f\u7c7b\u4f3c\u4e8e\u8bbe\u8ba1\u6307\u5bfc\u601d\u60f3\u7684\u5185\u5bb9\u3002</p> <p>\u5bc4\u5b58\u5668\u5355\u5143(Register Cell) \u662f\u5bc4\u5b58\u5668\u7684\u4e2a\u4f53\u5355\u5143\uff0c\u4e3b\u8981\u5305\u62ec\u4e00\u4e2a <code>FF</code> \u53ca\u5b9e\u73b0\u5176\u7ec4\u5408\u903b\u8f91\u7684\u7ec4\u5408\u7535\u8def\u3002</p> <p>A single-bit cell of an iterative combinational circuit, connected to a flip-flop that provides the output, forms a two-state sequential circuit called a register cell</p> <p>\u5bf9\u4e8e n bits \u7684\u5bc4\u5b58\u5668\u5355\u5143\uff0c\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5b9e\u73b0\u5176 1 bit \u7684\u5bc4\u5b58\u5668\u5355\u5143\uff0c\u5e76\u590d\u5236 n \u4efd\u5b9e\u73b0\u3002</p> <p>\u8bbe\u8ba1\u5bc4\u5b58\u5668\u5355\u5143\u65f6\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u5bc4\u5b58\u5668\u5355\u5143\u8fdb\u884c\u5b9a\u4e49\u3002\u800c\u6307\u5b9a(Specify)\u4e00\u4e2a\u5bc4\u5b58\u5668\u5355\u5143\u7684\u529f\u80fd\u7684\u4e3b\u8981\u6709\u8fd9\u4e9b\u65b9\u9762\uff1a</p> <ul> <li>\u5bc4\u5b58\u5668\u7684\u529f\u80fd\u51fd\u6570\uff1b<ul> <li>\u4e00\u822c\u6307\u5bc4\u5b58\u5668\u4f20\u8f93\uff1b</li> </ul> </li> <li>\u63a7\u5236\u4fe1\u53f7\u6784\u6210\uff1b<ul> <li>\u6709\u54ea\u4e9b\u63a7\u5236\u4fe1\u53f7\u3001\u662f\u5426\u7f16\u7801\u3001\u5982\u4f55\u51b3\u5b9a\u662f\u5426 Load \u7b49\uff1b</li> </ul> </li> <li>\u5bc4\u5b58\u5668\u7684\u8f93\u5165\u6570\u636e\uff1b<ul> <li>\u6709\u54ea\u4e9b\u8f93\u5165\u6570\u636e\u3001\u662f\u5426\u9700\u8981\u9884\u5148\u5904\u7406\u7b49\uff1b</li> </ul> </li> </ul> <p>\u5728\u5b9e\u9645\u5b9e\u73b0\u65f6\uff0c\u5206\u4e3a <code>MUX</code> \u5b9e\u73b0\u548c\u65f6\u5e8f\u903b\u8f91\u5b9e\u73b0\u4e24\u79cd\u65b9\u6cd5\u3002</p> <p>\u524d\u8005\u5c31\u662f \u57fa\u4e8e Mux \u5b9e\u73b0\u4f20\u8f93 \u4e2d\u5c06\u8981\u63d0\u5230\u7684\u90a3\u6837\uff0c\u5173\u4e8e\u4e0a\u9762\u54ea\u4e9b\u5185\u5bb9\u5728\u8be5\u5c0f\u8282\u4e2d\u7684\u4f53\u73b0\u5982\u4e0b\u56fe\uff1b</p> <p></p> <p>\u4e5f\u5c31\u662f\u901a\u8fc7\u5206\u522b\u5b9e\u73b0\u903b\u8f91\uff0c\u7136\u540e\u901a\u8fc7\u63a7\u5236\u4fe1\u53f7\u9009\u62e9\u6570\u636e\u8f93\u5165\u6765\u5b9e\u73b0\u3002</p> <p>\u800c\u540e\u8005\u6309\u7167\u65f6\u5e8f\u7535\u8def\u7684\u8bbe\u8ba1\u65b9\u6cd5\uff0c\u786e\u5b9a\u72b6\u6001\u56fe\u540e\u6839\u636e\u72b6\u6001\u53d8\u5316\u8bbe\u8ba1\u65f6\u5e8f\u7535\u8def\uff0c\u8bbe\u8ba1\u4f18\u5316\u51b3\u5b9a\u72b6\u6001\u8f6c\u79fb\u65b9\u7a0b\u5b9e\u73b0\uff0c\u5177\u4f53\u53ef\u4ee5\u53c2\u8003 \u7b2c\u56db\u7ae0#\u65f6\u5e8f\u7535\u8def\u8bbe\u8ba1\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#transfer","title":"\u5bc4\u5b58\u5668\u4f20\u8f93(transfer)","text":"<p>\u8bf4\u660e</p> <p>\u628a transfer \u7ffb\u8bd1\u4e3a\u201c\u4f20\u8f93\u201d\u662f\u6211\u8111\u74dc\u4e00\u62cd\u7684\u884c\u4e3a\uff0c\u6211\u5e76\u4e0d\u77e5\u9053\u7ffb\u8bd1\u6210\u4ec0\u4e48\u6bd4\u8f83\u5408\u9002\uff0c\u5982\u679c\u8bfb\u8005\u6709\u66f4\u597d\u7684\u7ffb\u8bd1\uff0c\u8bf7\u544a\u8bc9\u6211\uff01</p> <p>\u4e00\u4e2a\u590d\u6742\u7cfb\u7edf\u9664\u4e86\u4fe1\u606f\u7684\u5b58\u50a8\u8fd8\u9700\u8981\u4fe1\u606f\u7684\u4f20\u8f93\u548c\u5904\u7406\uff0c\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u4e3a\u4e86\u5b9e\u73b0\u7075\u6d3b\u3001\u590d\u6742\u7684\u8ba1\u7b97\uff0c\u6211\u4eec\u9700\u8981\u4fe1\u606f\u4e4b\u95f4\u80fd\u591f\u5e7f\u6cdb\u5730\u4ea4\u4e92\u3002\u5927\u90e8\u5206\u7535\u5b50\u7cfb\u7edf\u8bbe\u8ba1\u4e2d\uff0c\u90fd\u4f1a\u6709\u4e00\u4e2a \u63a7\u5236\u5355\u5143(Control Unit) \u6765\u8d1f\u8d23\u6307\u6325\uff08\u51b3\u5b9a\u6307\u4ee4\u7684\u5e8f\u5217\uff09 \u6570\u636e\u901a\u8def(Datapath) \u8fdb\u884c\u6570\u636e\u5904\u7406\u3002</p> <p>Datapaths are defined by their registers and the operations performed on binary data stored in the registers.</p> <p>\u5bf9\u4e8e\u5bc4\u5b58\u5668\u81ea\u8eab\u800c\u8a00\uff0c\u5b83\u53ef\u80fd\u5b9e\u73b0 \u8f7d\u5165(load)\u3001\u6e05\u7a7a(clear)\u3001\u4f4d\u79fb(shift)\uff08\u5173\u4e8e\u8fd9\u91cc\u7684shift\u7684\u542b\u4e49\u6211\u5b58\u7591\uff09 \u548c \u8ba1\u6570(count) \u7b49\u3002\u6b64\u5916\uff0c\u5bf9\u4e8e\u90a3\u4e9b\u5bc4\u5b58\u5668\u4e2d\u7684\u6570\u636e\u8fdb\u884c\u79fb\u52a8\u4e86\u7684\u52a0\u5de5\uff0c\u88ab\u79f0\u4e3a \u5bc4\u5b58\u5668\u4f20\u8f93\u64cd\u4f5c(Register Transfer Operations)\uff0c\u5b83\u4eec\u4e3b\u8981\u5305\u542b\u8fd9\u4e09\u4e2a\u90e8\u5206\uff1a</p> <ol> <li>\u7cfb\u7edf\u4e2d\u7684\u5bc4\u5b58\u5668\u96c6\u5408\uff1b</li> <li>\u5bf9\u4e8e\u6570\u636e\u7684\u64cd\u4f5c\uff1b</li> <li>\u76d1\u7763\u64cd\u4f5c\u5e8f\u5217\u7684\u63a7\u5236\uff1b</li> </ol> <p>\u5176\u4e2d\uff0c\u6700\u57fa\u7840\u7684\u90a3\u90e8\u5206\u64cd\u4f5c\u88ab\u79f0\u4e3a \u5fae\u64cd\u4f5c(microoperation)\uff0c\u5b83\u4eec\u662f\u5b9e\u73b0\u590d\u6742\u64cd\u4f5c\u7684\u57fa\u7840\uff0c\u4f8b\u5982\u5c06 R1 \u7684\u6570\u636e\u8f7d\u5165 R2\uff0c\u5c06 R1 \u548c R2 \u76f8\u52a0\uff0c\u6216\u662f\u81ea\u589e R1 \u7b49\u3002\u5b83\u4eec\u901a\u5e38\u4ee5\u6bd4\u7279\u5411\u91cf\u4e3a\u8f7d\u4f53\u5e76\u884c\u5b9e\u73b0\u7684\u3002</p> <p>Note that:</p> <p>the term \u201cmicrooperation,\u201d as used here, does not refer to any particular way of producing the control signals: specifically, it does not imply that the control signals are generated by a control unit based on a technique called microprogramming.</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_4","title":"\u5bc4\u5b58\u5668\u4f20\u8f93\u64cd\u4f5c &amp; \u5bc4\u5b58\u5668\u4f20\u8f93\u8bed\u8a00","text":"<p>\u5bf9\u4e8e\u7b80\u5355\u7684\u65f6\u5e8f\u903b\u8f91\u7cfb\u7edf\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u72b6\u6001\u673a\u7b49\u65b9\u5f0f\u6765\u63cf\u8ff0\u5b83\u4eec\u7684\u884c\u4e3a\uff0c\u4f46\u662f\u5bf9\u4e0e\u89c4\u6a21\u66f4\u5927\u7684\u7cfb\u7edf\u6765\u8bf4\uff0c\u8fd9\u662f\u4e00\u4ef6\u5f88\u75db\u82e6\u7684\u4e8b\u60c5\u3002\u6240\u4ee5\u6211\u4eec\u5f15\u5165\u4e86\u4e00\u79cd\u4e13\u6ce8\u4e8e\u884c\u4e3a\u903b\u8f91\u7684\u8bed\u8a00\u6765\u63cf\u8ff0\u5bc4\u5b58\u5668\u4f20\u8f93\u4e2d\u7684\u903b\u8f91\u884c\u4e3a\uff1a\u5bc4\u5b58\u5668\u4f20\u8f93\u8bed\u8a00(Register Transfer Language)RTL\u3002</p> <p>\u901a\u5e38\u5177\u6709\u7279\u6b8a\u529f\u80fd\u7684\u5bc4\u5b58\u5668\u90fd\u4f1a\u7528\u5176\u540d\u79f0\u7f29\u5199\u5927\u5199\u8868\u793a\uff0c\u4f8b\u5982 AR(Address Register)\uff0cPC(Program Counter)\uff0cIR(Instruction Register) \u6216\u8005\u66f4\u666e\u901a\u7684 R2(Register 2)\u3002</p> <p>Little-endian &amp; Big-endian</p> <p>\u6211\u4eec\u6709\u65f6\u5019\u4e5f\u4f1a\u7528\u8fd9\u4e9b\u5f62\u5f0f\u6765\u56fe\u5f62\u5316\u7684\u8868\u793a\u5bc4\u5b58\u5668\uff1a</p> <p></p> <p>\u6b64\u5916\uff0c\u5e38\u89c1\u64cd\u4f5c\u7528 RTL \u8868\u793a\u65b9\u6cd5\u548c\u7b26\u53f7\u5982\u4e0b\uff1a</p> <p></p> <p></p> <p>concatenation:\u4e00\u7cfb\u5217\u76f8\u5173\u7684\u4e8b\u60c5\uff1f</p> <p>\u9700\u8981\u989d\u5916\u8bf4\u660e\u7684\u662f\uff0c\u5982\u679c\u6211\u4eec\u60f3\u8868\u8fbe\u6761\u4ef6\u8bed\u53e5\uff0c\u4f8b\u5982\u6211\u4eec\u60f3\u8868\u8fbe\uff1a</p> \\[ if\\, (K_1 = 1) \\,then\\, (R2 \\leftarrow R1) \\] <p>\u5219\u53ef\u4ee5\u5199\u4e3a\uff1a</p> \\[ K_1 : R2 \\leftarrow R1 \\]"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_5","title":"\u5bc4\u5b58\u5668\u4f20\u8f93\u7684\u5b9e\u73b0","text":"<p>\u5f15\u5165</p> <p>\u5982\u4f55\u5b9e\u73b0\u5bc4\u5b58\u5668\u6240\u5b58\u50a8\u7684\u6570\u636e\u4e4b\u95f4\u7684\u5904\u7406\u4e0e\u4ea4\u4e92\u662f\u672c\u7ae0\u8282\u7684\u6838\u5fc3\u547d\u9898\u3002\u5982\u679c\u8bf4 \u5fae\u64cd\u4f5c \u5904\u7406\u7684\u662f\u6570\u636e\u4e4b\u95f4\u7684\u5904\u7406\uff0c\u90a3 \u5bc4\u5b58\u5668\u4f20\u8f93 \u5219\u7740\u773c\u4e8e\u6570\u636e\u4e4b\u95f4\u7684\u4ea4\u4e92\u3002</p> <p>\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u5982\u4f55\u628a\u6570\u636e\u7ed9\u5230\u522b\u7684\u5bc4\u5b58\u5668\u3001\u5982\u4f55\u83b7\u53d6\u522b\u7684\u5bc4\u5b58\u5668\u7ed9\u5230\u7684\u6570\u636e\u3001\u5982\u4f55\u4f20\u8f93\u548c\u9009\u62e9\u8fd9\u4e9b\u6570\u636e\uff0c\u5c31\u662f\u672c\u5c0f\u8282\u8981\u89e3\u51b3\u7684\u95ee\u9898\u3002</p> <p>\u7279\u522b\u7684\uff0c\u5bc4\u5b58\u5668\u4f20\u8f93\u7684\u5b9e\u73b0\u53ef\u4ee5\u76f4\u63a5\u5b9e\u73b0 \u8f6c\u79fb \u64cd\u4f5c\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#mux","title":"\u57fa\u4e8e MUX \u5b9e\u73b0\u4f20\u8f93","text":"<p>\u5bf9\u4e8e\u4e00\u4e2a\u5355\u4e00\u5bc4\u5b58\u5668\uff0c\u5b83\u7684 \u8f93\u5165 \u53ef\u80fd\u6709\u591a\u79cd\u6765\u6e90\uff0c\u4f8b\u5982\u5176\u5b83\u5bc4\u5b58\u5668\uff0c\u53c8\u6216\u8005\u662f\u5176\u4ed6\u64cd\u4f5c\u7684\u7ed3\u679c\u3002\u603b\u800c\u8a00\u4e4b\uff0c\u5b83\u7684\u8f93\u5165\u5f88\u53ef\u80fd\u662f\u4e0d\u552f\u4e00\u7684\uff0c\u800c\u540c\u4e00\u65f6\u523b\u6211\u4eec\u53ea\u80fd\u63a5\u53d7\u4e00\u4e2a\u6765\u6e90\u7684\u8f93\u5165\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u9700\u8981\u4f7f\u7528 <code>MUX</code> \u6765\u5bf9\u8f93\u5165\u8fdb\u884c\u9009\u62e9\u3002</p> <p>\u4e00\u4e2a\u7b80\u5355 \ud83c\udf30 \u5982\u4e0b\uff1a</p> <p></p> <p>\u7528\u8bed\u8a00\u6765\u63cf\u8ff0\u8fd9\u4e2a\u603b\u4f53\u67b6\u6784\u5c31\u662f\uff0c\u6211\u4eec\u901a\u8fc7\u4e00\u7cfb\u5217 one-hot \u7f16\u7801\uff08\u4e0d\u786e\u5b9a\uff0c\u4e5f\u8bb8\u53ef\u80fd\u90fd\u4e3a\u96f6\uff1f\u6211\u611f\u89c9\u53d6\u51b3\u4e8e \u4fdd\u6301 \u7684\u5b9e\u73b0\u3002\uff09\u6765\u8868\u793a\u9009\u62e9\u54ea\u4e2a\u8f93\u5165\u6e90\uff08\u4e0b\u56fe\u4e2d \\(K_0\\sim K_{n-1}\\)\uff09\uff0c\u518d\u901a\u8fc7 <code>Encoder</code> \u5c06\u5b83\u4eec\u7f16\u7801\u4f5c\u4e3a <code>MUX</code> \u7684\u8f93\u5165\u9009\u62e9\u4fe1\u53f7\uff08\u4e0b\u56fe\u4e2d \\(S_m \\sim S_0\\)\uff09\uff0c\u4ece\u591a\u4e2a\u8f93\u5165\u6e90\uff08\u4e0b\u56fe\u4e2d \\(0 \\sim k \\sim (n-1)\\)\uff09\u4e2d\u9009\u62e9\u5bf9\u5e94\u7684\u6e90\uff0c\u5e76\u8f93\u51fa\uff0c\u7ed9\u5230 R0\uff1b\u6b64\u5916\uff0c\u5c06\u9009\u62e9\u4fe1\u53f7\u90fd\u6216\u8d77\u6765\uff0c\u4f5c\u4e3a R0 \u7684 Load \u4fe1\u53f7\u8f93\u5165\u3002</p> <p></p> <p>\u5176\u4e2d <code>MUX</code> \u7684 \\(k \\sim (n-1)\\) \u5b9e\u73b0\u4e86 \u8f6c\u79fb \u64cd\u4f5c\u3002</p> <p>\u5c0f\u7ed3</p> <p>\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c<code>MUX</code> \u5b9e\u73b0\u4e3b\u8981\u7684\u5b9e\u73b0\u4e86 \u591a\u5bf9\u4e00 \u7684\u6570\u636e\u4f20\u8f93\u95ee\u9898\u3002\u5982\u679c\u6211\u4eec\u5355\u5355\u4f7f\u7528 <code>MUX</code> \u6765\u5b8c\u6210\u5bc4\u5b58\u5668\u4e4b\u95f4\u7684\u6570\u636e\u4ea4\u4e92\uff08\u5047\u8bbe\u6240\u6709\u5bc4\u5b58\u5668\u90fd\u80fd\u76f8\u4e92\u4f20\u8f93\u6570\u636e\uff09\uff0c\u90a3\u5c06\u8fd9\u4e2a\u6a21\u578b\uff08\u56fe\u4f8b\u5728\u4e0b\u4e00\u5c0f\u8282\uff09\u62bd\u8c61\u540e\uff0c\u6211\u4eec\u5f97\u5230\u7684\u5c06\u662f\u4e00\u5f20\u201c\u5b8c\u5168\u56fe\u201d\uff0c\u7136\u800c\u5b83\u8089\u773c\u53ef\u89c1\u7684\u5f00\u9500\u5927\u3002</p> <p>\u800c\u603b\u7ebf\u5219\u975e\u5e38\u5de7\u5999\u5730\u4f18\u5316\u4e86\u8fd9\u4e2a\u95ee\u9898\uff08\u5e76\u4e0d\u662f\u4e0a\u4f4d\u66ff\u4ee3\u5173\u7cfb\uff09\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_6","title":"\u57fa\u4e8e\u603b\u7ebf\u5b9e\u73b0\u4f20\u8f93","text":"<p>\u5728\u4e0a\u4e00\u5c0f\u8282\u7684\u5c0f\u7ed3\u4e2d\u6211\u4eec\u5df2\u7ecf\u63d0\u5230\u4e86 <code>MUX</code> \u5b9e\u73b0\u7684\u4f18\u52a3\uff0c\u4e5f\u63d0\u5230\u4e86 \u603b\u7ebf(bus) \u4f20\u8f93\u7684\u4f18\u52bf\uff0c\u90a3\u4e48\u5b83\u5177\u4f53\u6765\u8bf4\u5176\u5b9e\u73b0\u65b9\u6cd5\u6709\u4e24\u79cd\u2014\u2014\u901a\u8fc7\u5171\u6709 <code>MUX</code> \u5b9e\u73b0\uff0c\u6216\u901a\u8fc7\u4e09\u6001\u95e8\u5b9e\u73b0\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#mux_1","title":"\u5171\u6709 MUX \u5b9e\u73b0","text":"<p>\u8ba9\u6211\u4eec\u4ee5\u4e09\u4e2a\u5bc4\u5b58\u5668\u7684\u6a21\u578b\u4e3a\u4f8b\uff0c\u5bf9\u6bd4\u901a\u8fc7\u4e13\u6709 <code>MUX</code> \u5b9e\u73b0\u548c\u901a\u8fc7 \u5355\u4e00\u603b\u7ebf(single bus) \u5b9e\u73b0\u7684\u533a\u522b\uff1a</p> <p></p> <p>\u9996\u5148\u5bf9\u603b\u7ebf\u5b9e\u73b0\u8fdb\u884c\u8bf4\u660e\uff0c\u540c\u6837\u662f\u4f7f\u7528 <code>MUX</code>\uff0c\u4f46\u6b64\u65f6 <code>MUX</code> \u4e0d\u518d\u662f\u67d0\u4e2a\u5bc4\u5b58\u5668\u7684 \u4e13\u6709\u903b\u8f91(dedicated logic)\uff0c\u800c\u662f\u4e09\u4e2a\u5bc4\u5b58\u5668\u5171\u540c\u4f7f\u7528\u7684 \u5171\u6709\u903b\u8f91(shared logic)\u3002\u603b\u7ebf\u4e2d\u7684 <code>MUX</code> \u5728\u6240\u6709\u5bc4\u5b58\u5668\u7684\u8f93\u5165\u4e2d\u9009\u62e9\u5176\u4e2d\u4e00\u4e2a\uff0c\u5e76\u5c06\u5b83\u8f93\u51fa\uff0c\u7ed9\u5230\u6240\u6709\u5bc4\u5b58\u5668\uff1b\u800c\u603b\u7ebf\u901a\u8fc7\u63a7\u5236 Load \u4fe1\u53f7\u6765\u9009\u62e9\u8ba9\u54ea\u4e2a\uff08\u6216\u54ea\u4e9b\uff09\u5bc4\u5b58\u5668\u5f97\u5230\u8fd9\u4e2a\u4fe1\u53f7\u3002</p> <p>\u63a5\u4e0b\u6765\u8fdb\u884c\u5bf9\u6bd4\uff0c\u4ee5\u603b\u7ebf\u5b9e\u73b0\u4e3a\u4e3b\u4f53\uff0c\u4e0e <code>MUX</code> \u5b9e\u73b0\u5bf9\u6bd4\uff1a</p> <ul> <li>\u4f18\u52bf\uff1a<ul> <li>\u7535\u8def\u66f4\u7cbe\u7b80\uff0c\u6210\u672c\u66f4\u4f4e\uff0c\u968f\u7740\u5bc4\u5b58\u5668\u589e\u52a0\u8fd9\u4e2a\u7279\u70b9\u66f4\u52a0\u660e\u663e\uff1b</li> </ul> </li> <li>\u52a3\u52bf\uff1a<ul> <li>\u540c\u4e00\u65f6\u523b\u5185\u603b\u7ebf\u53ea\u80fd\u4f20\u8f93\u4e00\u4e2a\u6570\u636e\uff0c\u5373\u53ea\u6709\u4e00\u4e2a\u6570\u636e\u6e90(source)\uff1b<ul> <li>\u540c\u4e00\u65f6\u949f\u5468\u671f\u5185\u53ea\u6709\u4e00\u4e2a\u6570\u636e\u80fd\u4f20\u8f93\u5230\u522b\u7684\u5730\u65b9\uff0c\u4f8b\u5982\u4ea4\u6362\u64cd\u4f5c\u5c31\u9700\u8981\u81f3\u5c11\u4e24\u4e2a bus \u624d\u80fd\u5b9e\u73b0\uff1b</li> </ul> </li> </ul> </li> </ul> <p>\u800c\u56e0\u4e3a\u8fd9\u4e9b\u7279\u70b9\uff0c\u6211\u4eec\u9700\u8981\u8bc4\u4f30\u6211\u4eec\u7684\u9700\u6c42\uff0c\u9009\u62e9\u5408\u9002\u7684\u7ed3\u6784\u6765\u5b9e\u73b0\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_7","title":"\u4e09\u6001\u95e8\u5b9e\u73b0","text":"<p>\u4e09\u6001\u95e8\u7684\u76f8\u5173\u5185\u5bb9\u5df2\u7ecf\u5728\u524d\u9762\u4ecb\u7ecd\uff0c\u4f20\u8f93\u95e8\uff0c\u5173\u4e8e\u672c\u5c0f\u8282\u7684\u77e5\u8bc6\uff0c\u53ef\u4ee5\u91cd\u70b9\u5173\u6ce8 #\u4e09\u6001\u95e8/\u788e\u788e\u5ff5\u3002</p> <p>\u800c\u5173\u4e8e\u603b\u7ebf\u7684\u5b9e\u73b0\uff0c\u5f15\u7528\u4e00\u53e5\u6211\u5728 #\u4e09\u6001\u95e8/\u788e\u788e\u5ff5 \u91cc\u5199\u7684\u8bdd\uff1a</p> <p>\u53ea\u8981\u6211\u4eec\u8ba9\u5bfc\u7ebf\u7684\u82e5\u5e72\u8f93\u5165\u4e2d\u53ea\u6709\u4e00\u4e2a\u4e09\u6001\u95e8\u4e0d\u5728\u300c\u9ad8\u963b\u6001\u300d\uff0c\u5c31\u80fd\u591f\u4f18\u96c5\u5730\u5b9e\u73b0\u591a\u8def\u8f93\u51fa\u4e92\u8054\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u6240\u8c13\u7684\u4e09\u6001\u95e8\u5b9e\u73b0\u539f\u7406\u4e0a\u548c <code>MUX</code> \u5b9e\u73b0\u65e0\u4e8c\uff0c\u53ea\u4e0d\u8fc7\u6211\u4eec\u662f\u901a\u8fc7\u4e09\u6001\u95e8\u6765\u5b9e\u73b0\u300c\u8def\u7531\u300d\u8fd9\u4e2a\u903b\u8f91\u800c\u5df2\uff0c\u4e5f\u5c31\u662f\u4e66\u4e0a\u6240\u8bf4\u7684\uff1a</p> <p>Three-state buffer outputs can be connected together to form a multiplexed output line.</p> <p>\u4e0e <code>MUX</code> \u5b9e\u73b0\u76f8\u5bf9\u6bd4\uff0c\u4e09\u6001\u95e8\u5b9e\u73b0\u65b9\u5f0f\u5982\u4e0b\uff1a</p> <p></p> <p>\u8fdb\u884c\u7b80\u5355\u8bf4\u660e\uff0c(c) \u4e2d\u5bf9\u4e09\u6001\u95e8\u7684\u8868\u793a\u8fdb\u884c\u4e86\u7b80\u5316\uff0c\u542b\u4e49\u53c2\u8003 (a)\u3002\u5b83\u60f3\u8868\u8fbe\u7684\u4e3b\u8981\u542b\u4e49\u662f\uff0c\u5f53 <code>EN</code> \u4e3a <code>1</code> \u65f6\uff0c\u8868\u793a\u8f93\u51fa\uff1b\u53cd\u4e4b\u8868\u793a\u8f93\u5165\uff08\u5f53\u7136\uff0c\u771f\u6b63\u51b3\u5b9a\u662f\u5426\u8bfb\u5165\u5bc4\u5b58\u5668\u7684\u8fd8\u662f <code>LD</code>\uff09\u3002</p> \u4e2a\u4eba\u7591\u60d1 <p>\u4e66\u4e2d\u7684\u8868\u8ff0\u662f\uff1a</p> <p>If the three-state buffers are enabled, then the lines are outputs; if the three-state buffers are disabled, then the lines can be inputs.</p> <p>\u4f46\u662f\u770b (a) \u7684\u8868\u8fbe\uff0c\u4e0d\u7ba1 <code>EN</code> \u662f\u4ec0\u4e48\uff0c\u5b83\u5e94\u5f53\u90fd\u6709\u8f93\u5165\u624d\u5bf9\uff0c\u771f\u6b63\u51b3\u5b9a\u662f\u5426\u8f93\u5165\u8fdb\u6765\u7684\u5e94\u8be5\u8fd8\u662f <code>LD</code>\uff1f</p> <p>\u5bf9\u6bd4\u6765\u770b\uff0c\u4e09\u6001\u95e8\u7684\u5b9e\u73b0\u5927\u5927\u964d\u4f4e\u4e86\u603b\u7ebf\u7684\u5b9e\u73b0\u6210\u672c\uff0c\u7cbe\u7b80\u4e86\u7535\u8def\u7684\u5b9e\u73b0\uff0c\u6240\u4ee5\u901a\u5e38\u6765\u8bf4\u66f4\u5e38\u7528\u3002</p> \u4e2a\u4eba\u60f3\u6cd5 <p>\u867d\u7136\u4e66\u4e2d\u8bf4\u4e09\u6001\u95e8\u7684\u63a5\u7ebf\u6bd4 <code>MUX</code> \u7684\u5c11\u4e86\u4e00\u534a\uff0c\u4f46\u6211\u89c9\u7684\u4e09\u6001\u95e8\u53ea\u662f\u628a\u7ebf\u5206\u5c94\u7684\u5730\u65b9\u79fb\u52a8\u5230\u4e86\u5bc4\u5b58\u5668\u9644\u8fd1\uff0c\u6362\u53e5\u8bdd\u6765\u8bf4\u4e0d\u5982\u8bf4\u662f\u8282\u7701\u4e86\u5bfc\u7ebf\u7684\u957f\u5ea6\u3002\u4f46\u662f\u968f\u7740\u8f93\u5165\u7684\u589e\u52a0\uff0c<code>MUX</code> \u7684\u7ed3\u6784\u4f1a\u8d8a\u6765\u8d8a\u590d\u6742\u4e14\u9700\u8981\u91cd\u65b0\u8bbe\u8ba1\uff0c\u4f46\u4e09\u6001\u95e8\u53ea\u9700\u8981\u91cf\u7684\u589e\u52a0\u5c31\u884c\u4e86\uff0c\u6240\u4ee5\u786e\u5b9e\u662f\u66f4\u52a0\u5438\u5f15\u4eba\u3002\uff08\u5f53\u7136\uff0c\u867d\u7136\u4e66\u4e2d\u6ca1\u8bf4\uff0c\u4f46\u662f\u6211\u89c9\u5f97 Enable \u5fc5\u987b at most one-hot\uff0c\u800c\u8fd9\u90e8\u5206\u7684\u903b\u8f91\u5bf9\u4e8e\u4e24\u4e2a\u5b9e\u73b0\u65b9\u6cd5\u6765\u8bf4\u662f\u4e00\u6837\u7684\uff09</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_8","title":"\u5fae\u64cd\u4f5c\u53ca\u5176\u5b9e\u73b0","text":"<p>A microoperation is an elementary operation performed on data stored in registers or in memory.</p> <p>\u5fae\u64cd\u4f5c\u4e00\u822c\u5206\u4e3a\u8fd9\u56db\u79cd\uff1a</p> <ol> <li>\u8f6c\u79fb\uff0ctransfer microoperations\uff0c\u5c06\u6570\u636e\u4ece\u4e00\u4e2a\u5bc4\u5b58\u5668\u8f6c\u79fb\u5230\u53e6\u5916\u4e00\u4e2a\u5bc4\u5b58\u5668\uff1b</li> <li>\u7b97\u672f\uff0carithmetic microoperations\uff0c\u5bf9\u6570\u636e\u7684\u7b97\u672f\u8fd0\u7b97\u64cd\u4f5c\uff1b</li> <li>\u903b\u8f91\uff0clogic microoperations\uff0c\u5bf9\u6570\u636e\u7684\u903b\u8f91\u8fd0\u7b97\u64cd\u4f5c\uff1b</li> <li>\u4f4d\u79fb\uff0cshift microoperations\uff0c\u5bf9\u6570\u636e\u7684\u4f4d\u79fb\u64cd\u4f5c\uff1b</li> </ol> <p>A given microoperation may be of more than one type. For example, a 1s complement operation is both an arithmetic microoperation and a logic microoperation.</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_9","title":"\u8f6c\u79fb","text":"<p>\u4e0d\u6539\u53d8\u6570\u636e\u672c\u8eab\uff0c\u53ea\u662f\u4ece\u4e00\u4e2a\u5bc4\u5b58\u5668\u4e2d\u628a\u6570\u636e\u79fb\u52a8\u5230\u53e6\u5916\u4e00\u4e2a\u5bc4\u5b58\u5668\u3002</p> <p>\u5c06 R0 \u4e2d\u7684\u6570\u636e\u8f6c\u79fb\u5230 R1 \u4e2d\uff0c\u7528 RTL \u8868\u793a\u5c31\u662f \\(R0 \\leftarrow R1\\)\u3002</p> <p>\u8fd9\u4e00\u90e8\u5206\u7684\u5b9e\u73b0\u9014\u5f84\u5728 \u5bc4\u5b58\u5668\u4f20\u8f93\u7684\u5b9e\u73b0 \u5df2\u7ecf\u9610\u8ff0\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_10","title":"\u7b97\u672f","text":"<p>Multiplication and division are not listed in Table 6-3. Multiplication can be represented by the symbol * and division by /. These two operations are not included in the basic set of arithmetic microoperations because they are assumed to be implemented by sequences of basic microoperations. However, multiplication can be considered as a microoperation if implemented by a combinational circuit. In such a case, the result is transferred into a destination register at the clock edge after all signals have propagated through the entire combinational circuit</p> <p>\u52a0\u51cf\u6cd5\u5668</p> <p>\u5c31\u50cf\u6211\u4eec\u4e4b\u524d\u5b66\u8fc7\u7684\uff0c\u7528\u52a0\u6cd5\u5668\u5b9e\u73b0\u52a0\u51cf\u6cd5\u5668\uff0c\u5728 RTL \u548c\u6a21\u5757\u903b\u8f91\u7535\u8def\u7684\u7ef4\u5ea6\u4e0b\uff0c\u53ef\u4ee5\u8fd9\u4e48\u8868\u793a\uff1a</p> \\[ \\begin{aligned}     &amp;\\overline{X}K_1:R_1\\leftarrow R_1 + R_2 \\\\     &amp;XK_1:R_1\\leftarrow R_1 + \\overline{R_2} + 1 \\end{aligned} \\] <p></p> <p>\u6ce8\u610f</p> <p>\u5bf9\u4e8e\u5982\u4e0a\u51fa\u73b0\u7684\u5f62\u5f0f\u5982\uff1a\\(condition: reg \\leftarrow options one regs\\) \u7684\u8868\u8fbe\u5f0f\uff0c<code>:</code> \u5de6\u4fa7\u51fa\u73b0\u7684 <code>+</code> \u8868\u793a\u6216\uff0c\u53f3\u4fa7\u7684\u5219\u8868\u793a\u52a0\uff08\u201c\u4e58\u201d\u4e5f\u662f\u8fd9\u6837\uff09\uff01</p> <p>\u76f8\u5bf9\u5e94\u7684\uff0c\u52a0\u51cf\u6cd5\u7684\u5b9e\u73b0\u53ef\u4ee5\u901a\u8fc7\u52a0\u51cf\u6cd5\u5668\u5b9e\u73b0\uff0c\u4e58\u6cd5\u53ef\u4ee5\u7528 \u4f4d\u79fb \u64cd\u4f5c\u5b9e\u73b0\uff0c\u800c\u9664\u6cd5\u76f8\u5bf9\u590d\u6742\u3002</p> <p>\u4e58\u6cd5\u5b9e\u73b0\u7684\u5927\u81f4\u601d\u8def</p> <p>\u5047\u8bbe\u6211\u4eec\u9700\u8981\u8ba1\u7b97 \\(a \\cdot b\\)\uff0c\u4e14 \\(a\\)\uff0c\\(b\\) \u90fd\u662f\u6574\u6570\uff0c\u5219\u53ef\u4ee5\u5c06 \\(b\\) \u5199\u6210\u4e8c\u8fdb\u5236\u5f62\u5f0f \\((b_{n-1}b_{n-2}...b_1b_0)_2\\)\uff0c\u4e8e\u662f\uff1a</p> \\[ \\begin{aligned}     a \\cdot b &amp;= a \\cdot (b_{n-1}b_{n-2}...b_1b_0)_2 \\\\               &amp;= a \\cdot \\left[ (b_{n-1}0...00)_2 + \\cdot (0b_{n-2}...00)_2 + ... + \\cdot (00...b_10)_2 + \\cdot(00...0b_0)_2 \\right]\\\\               &amp;= a \\cdot \\sum_{i = 0} ^{n-1} b_i \\cdot 2^{i} \\\\               &amp;= \\left(a \\cdot \\sum_{i = 0} ^{n-1} b_i\\right) \\;\\mathrm{&lt;&lt;}\\; i \\;\\;\\; \\text{where \"&lt;&lt;\" means \"Shift Left\"} \\end{aligned} \\] <p>\u4e8e\u662f\u5c31\u53ef\u4ee5\u901a\u8fc7 \u4f4d\u79fb \u7684\u76f8\u5173\u77e5\u8bc6\u6765\u5b9e\u73b0\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_11","title":"\u903b\u8f91","text":"<p>\u903b\u8f91\u8fd0\u7b97\u7684\u5b9e\u73b0\u76f8\u6bd4\u7b97\u672f\u66f4\u52a0\u76f4\u63a5\uff0c\u56e0\u4e3a\u5927\u90e8\u5206\u903b\u8f91\u90fd\u53ef\u4ee5\u901a\u8fc7\u903b\u8f91\u95e8\u6765\u5b9e\u73b0\u3002</p> <p>tips</p> <p>\u800c\u627f\u62c5\u903b\u8f91\u548c\u7b97\u672f\u8fd0\u7b97\u7684\u786c\u4ef6\u6a21\u5757\uff0c\u4e00\u822c\u88ab\u79f0\u4e3a ALU\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_12","title":"\u4f4d\u79fb","text":"<p>\u4f4d\u79fb\u7684\u5b9e\u73b0\u901a\u8fc7 \u4f4d\u79fb\u5bc4\u5b58\u5668(Shift Register)SHR \u5b9e\u73b0\u3002</p> <p>\u5f15\u5165</p> <p>\u4f4d\u79fb\u64cd\u4f5c\u4ece\u672c\u8d28\u4e0a\u6765\u8bb2\uff0c\u662f\u901a\u8fc7 \u89e6\u53d1\u5668\u968f\u7740\u65f6\u949f\u8109\u51b2\uff0c\u5c06\u4e32\u884c\u6570\u636e\u4e00\u4f4d\u4e00\u4f4d\u5730\u79fb\u52a8 \u5b9e\u73b0\u7684\u3002\u4f46\u662f\u5982\u679c\u8bfb\u8005\u5c1a\u672a\u7406\u89e3\u5176\u5b9e\u73b0\u539f\u7406\uff0c\u9605\u8bfb\u4ee5\u4e0b\u5185\u5bb9\u521a\u5f00\u59cb\u53ef\u80fd\u4f1a\u89c9\u5f97\u6709\u4e9b\u83ab\u540d\u5176\u5999\uff0c\u4f46\u662f\u8bf7\u5148\u9605\u8bfb \u4e32\u884c\u5b9e\u73b0 \u548c \u5e76\u884c\u5316 \u7684\u5185\u5bb9\uff0c\u77e5\u9053\u5b83\u4eec\u7684\u884c\u4e3a\u540e\uff0c\u53ef\u4ee5\u5148\u6682\u65f6\u8df3\u8fc7 \u53cc\u5411\u4f4d\u79fb\u5bc4\u5b58\u5668\uff0c\u518d\u6765\u770b\u672c\u8282\u672b\u5c3e\u7684\u603b\u7ed3\uff0c\u4e5f\u8bb8\u80fd\u591f\u8ba9\u60a8\u660e\u767d\u5b83\u7a76\u7adf\u662f\u600e\u4e48\u5b9e\u73b0\u7684\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_13","title":"\u4e32\u884c\u5b9e\u73b0","text":"<p>\u4f4d\u79fb\u64cd\u4f5c\u6700\u7b80\u5355\u7684\u5b9e\u73b0\u53ea\u9700\u8981\u4e0e\u8f93\u5165\u6570\u76f8\u540c\u4f4d\u6570\u7684\u89e6\u53d1\u5668\u5b9e\u73b0\u3002\u5b83\u7684\u57fa\u672c\u7ed3\u6784\u5982\u4e0b\uff1a</p> <p></p> <p>\u56db\u4e2a\u89e6\u53d1\u5668\u9996\u5c3e\u76f8\u8fde\uff0c\u6700\u524d\u9762 \u4e32\u884c\u8f93\u5165(Serial Input)SI \u6570\u636e\uff0c\u672b\u7aef\u5f97\u5230 \u4e32\u884c\u8f93\u51fa(Serial Output)SO\uff0c\u5728\u4e0d\u540c\u65f6\u949f\u5468\u671f\u7684\u504f\u5dee\u4e0b\uff0c\u8fde\u7eed\u8bfb\u5165\u7684 n bits \u5373\u4e3a\u4e0d\u540c\u4f4d\u6570\u4f4d\u79fb\u7684\u7ed3\u679c\u3002</p> <p>\u4e32\u884c\u4f4d\u79fb\u64cd\u4f5c\u5b9e\u73b0\u7684\u6a21\u62df\u89e3\u91ca</p> <p>\u5047\u8bbe\u73b0\u5728\u6211\u4eec\u6709 4 \u4e2a <code>FF</code> \u9996\u5c3e\u76f8\u8fde\uff0c\u73b0\u5728\u4e32\u884c\u8f93\u5165 <code>1001</code> \u8fd9 4bits \u7684\u6570\u636e\uff08\u5f53\u7136\uff0c\u5b8c\u5168\u8f93\u5165\u9700\u8981 4 \u4e2a\u65f6\u949f\u5468\u671f\uff09\u3002</p> <p>\u5047\u8bbe\u7b2c 1 \u4e2a\u5468\u671f\u7ed3\u675f\u540e\uff0c<code>1001</code> \u6700\u53f3\u4fa7\u7684 <code>1</code> \u88ab\u5b58\u5728\u4e86\u7b2c\u4e00\u4e2a FF\uff0c\u5219\uff1a</p> \u5468\u671f \u5f85\u8f93\u5165 FF1 FF2 FF3 FF4 SO 1 <code>100</code> <code>1</code> ? ? ? <code>1???</code> 2 <code>10</code> <code>0</code> <code>1</code> ? ? <code>01??</code> 3 <code>1</code> <code>0</code> <code>0</code> <code>1</code> ? <code>001?</code> 4 <code>1</code> <code>0</code> <code>0</code> <code>1</code> <code>1001</code> 5 ? <code>1</code> <code>0</code> <code>0</code> <code>?100</code> 6 ? ? <code>1</code> <code>0</code> <code>??10</code> 7 ? ? ? <code>1</code> <code>???1</code> <p>\u8fd9\u91cc\u7684 SO \u6307\u7684\u662f\u4ece\u5f53\u524d\u8f6e\u6b21\u5f00\u59cb\uff0c\u8bfb\u5165 4bits \u6570\u636e\u5f97\u5230\u7684\u4e32\u884c\u8f93\u51fa\u7ed3\u679c\uff0c\u8fd9\u91cc\u7684 4bits \u5f53\u7136\u662f\u5bf9\u5e94\u8f93\u5165\u7684 4bits\u3002</p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u5728\u7b2c\u56db\u8f6e\u524d\u540e\u7684\u7ed3\u679c\u5206\u522b\u662f\u5de6\u79fb\u548c\u53f3\u79fb\u7684\u7ed3\u679c\uff0c\u5f53\u7136\uff0c\u5982\u679c\u662f\u8981\u8003\u8651\u5177\u6709\u5b9e\u9645\u8ba1\u7b97\u4ef7\u503c\u7684\u4f4d\u79fb\uff0c\u6211\u4eec\u5f53\u7136\u9700\u8981\u586b\u5145 <code>?</code> \u7684\u503c\uff0c\u4e0d\u8fc7\u8fd9\u90fd\u662f\u5c0f\u4e8b\u60c5\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_14","title":"\u5e76\u884c\u5316","text":"<p>\u5e76\u884c\u5316\u4e3b\u8981\u6709\u4e24\u4e2a\u65b9\u9762\uff0c\u5373 \u5e76\u884c\u8f93\u51fa(parallel output) \u548c \u5e76\u884c\u8f7d\u5165(parallel load)\uff0c\u5206\u522b\u5bf9\u5e94\u7740 \u5728\u540c\u4e00\u4e2a\u65f6\u95f4\u5468\u671f\u5185 \u5f97\u5230\u6bcf\u4e00\u4e2a <code>FF</code> \u7684\u7ed3\u679c \u548c \u5bf9\u6bcf\u4e00\u4e2a <code>FF</code> \u8f7d\u5165\u6570\u636e\u3002</p> <p>\u5e76\u884c\u8f93\u51fa\u7684\u5b9e\u73b0\u975e\u5e38\u7b80\u5355\uff0c\u53ea\u9700\u8981\u7ed9\u6bcf\u4e00\u4e2a <code>FF</code> \u7684\u8f93\u51fa\u5f15\u51fa\u4e00\u6761\u7ebf\u5c31\u884c\u4e86\uff0c\u5b83\u4e0e\u4e32\u884c\u8f93\u51fa\u53ef\u4ee5\u76f4\u63a5\u540c\u65f6\u5b58\u5728\uff1b\u800c\u5e76\u884c\u8f93\u5165\u5219\u4e0e\u4e32\u884c\u8f93\u5165\u51b2\u7a81\uff0c\u4e00\u6b21\u53ea\u80fd\u5b9e\u73b0\u5176\u4e2d\u4e00\u4e2a\uff0c\u6240\u4ee5\u9700\u8981\u4e00\u4e9b\u63a7\u5236\u7535\u8def\uff1a</p> <p></p> <p>\u770b\u8d77\u6765\u6709\u70b9\u590d\u6742\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u903b\u8f91\u8fd8\u662f\u5f88\u6e05\u6670\u7684\u3002</p> <ul> <li>\u7eb5\u5411\u89c2\u5bdf\u53f3\u4fa7\u7684\u56db\u4e2a <code>FF</code>\uff0c\u53ef\u4ee5\u53d1\u73b0\u57fa\u672c\u4e0a\u5c31\u662f\u4e32\u884c\u4f4d\u79fb\u5b9e\u73b0\uff0c\u53ea\u4e0d\u8fc7\u5176\u8f93\u5165\u4e0d\u518d\u662f\u76f4\u63a5\u4ece\u4e0a\u4e00\u4e2a <code>FF</code> \u90a3\u8fb9\u62ff\u6765\u7684\uff1b</li> <li>\u56db\u4e2a <code>FF</code> \u7684\u8f93\u5165\u662f\u7c7b\u4f3c\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u4ec5\u5173\u6ce8\u6700\u4e0a\u9762\u7684\u90a3\u4e09\u4e2a\u4e0e\u95e8\u548c\u4e00\u4e2a\u6216\u95e8\uff0c\u8868\u793a\u6570\u636e\u8f93\u5165\u6709\u4e09\u4e2a\u53ef\u80fd\u7684\u6765\u6e90\uff1b<ol> <li>\u7b2c\u4e00\u4e2a\u4e0e\u95e8\uff0c\\(F_i=Shift \\cdot SI\\)\uff08\u5bf9\u4e8e\u540e\u9762\u51e0\u4e2a <code>FF</code>\uff0c\u5219\u662f \\(F_i=Shift \\cdot FF_{i-1}\\)\uff09\uff0c\u53ef\u4ee5\u53d1\u73b0\uff0c\u6b64\u65f6\u7535\u8def\u7684\u884c\u4e3a\u4e0e \u4e32\u884c\u4f4d\u79fb\u5b9e\u73b0 \u4e00\u81f4\uff1b<ul> <li>\u5373 \\(Shift\\) \u4e3a <code>1</code> \u65f6\uff0c<code>SHR</code> \u8868\u73b0\u4e3a\u300c\u6bcf\u4e2a\u5468\u671f\u6267\u884c\u4e00\u6b21\u4f4d\u79fb\u300d\uff1b</li> </ul> </li> <li>\u7b2c\u4e8c\u4e2a\u4e0e\u95e8\uff0c\\(F_i=\\overline{Shift} \\cdot Load \\cdot D_i\\)\uff0c\u6b64\u65f6\u7535\u8def\u7684\u884c\u4e3a\u662f\u4f7f\u7528\u6bd4\u7279\u5411\u91cf\u5bf9\u6bcf\u4e00\u4e2a <code>FF</code> \u8d4b\u503c\uff0c\u5373 \u5e76\u884c\u8f7d\u5165\uff1b<ul> <li>\u5373 \\(\\overline{Shift} \\cdot Load\\) \u4e3a <code>1</code> \u65f6\uff0c<code>SHR</code> \u8868\u73b0\u4e3a\u300c\u5e76\u884c\u8f7d\u5165\u300d\uff1b</li> </ul> </li> <li>\u7b2c\u4e09\u4e2a\u4e0e\u95e8\uff0c\\(F_i=\\overline{Shift} \\cdot \\overline{Load} \\cdot Q_i\\)\uff0c\u6b64\u65f6\u7535\u8def\u7684\u884c\u4e3a\u662f\u4fdd\u6301\u4e0a\u4e00\u5468\u671f\u7684\u7ed3\u679c\uff1b<ul> <li>\u5373 \\(\\overline{Shift} \\cdot \\overline{Load}\\) \u4e3a <code>1</code> \u65f6\uff0c<code>SHR</code> \u8868\u73b0\u4e3a\u300c\u4fdd\u6301\u300d\uff1b</li> </ul> </li> </ol> </li> </ul> <p>\u603b\u548c\u6765\u8bf4\uff0c\u5c31\u662f\uff1a</p> \\[ \\begin{aligned}       Shift :&amp; Q\\leftarrow \\mathrm{sl}\\; Q \\\\          \\overline{Shift}\\cdot Load :&amp; Q\\leftarrow D \\\\          \\overline{Shift}\\cdot \\overline{Load} :&amp; Q\\leftarrow Q \\end{aligned} \\] <p></p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_15","title":"\u53cc\u5411\u4f4d\u79fb\u5bc4\u5b58\u5668","text":"<p>\u4e0a\u9762\u4ecb\u7ecd\u7684\u4f4d\u79fb\u5bc4\u5b58\u5668\u968f\u7740\u65f6\u949f\u5468\u671f\u7684\u4f9b\u7ed9\uff0c\u53ea\u80fd\u4e0d\u53ef\u9006\u3001\u5355\u5411\u5730\u8fdb\u884c\u4f4d\u79fb\uff0c\u8fd9\u79cd\u4f4d\u79fb\u5bc4\u5b58\u5668\u79f0\u4e3a \u65e0\u5411\u4f4d\u79fb\u5bc4\u5b58\u5668(Unidirectional SHR)\uff1b\u5bf9\u5e94\u7684\uff0c\u5982\u679c\u80fd\u591f\u652f\u6301\u53ef\u63a7\u5236\u7684\u5de6\u79fb\u53f3\u79fb\uff0c\u5219\u88ab\u79f0\u4e3a \u53cc\u5411\u4f4d\u79fb\u5bc4\u5b58\u5668(Bidirectional SHR)\u3002</p> <p>\u5176\u884c\u4e3a\u5982\u4e0b\uff1a</p> \\[ \\begin{aligned}     \\overline{S_0} \\cdot \\overline{S_1} :&amp; Q \\leftarrow Q\\\\     S_0 \\cdot \\overline{S_1} :&amp; Q\\leftarrow\\mathrm{Sl}\\; Q \\\\     \\overline{S_0} \\cdot S_1 :&amp; Q\\leftarrow\\mathrm{Sr}\\; Q \\\\     S_0 \\cdot S_1:&amp; Q\\leftarrow D \\end{aligned} \\] <p>\u5176\u5355\u5143\u5b9e\u73b0\u5982\u4e0b\uff1a</p> <p></p> <p>\u5176\u672c\u8d28\u4e0a\u5c31\u662f\u6dfb\u52a0\u4e86\u4e00\u4e2a <code>MUX</code> \u6765\u9009\u62e9\u4e0b\u4e00\u4e2a\u65f6\u949f\u662f\u7ee7\u627f \\((i+1)\\)\u3001\\((i-1)\\)\u3001\\(D_i\\) \u8fd8\u662f \\(Q\\)\u3002</p> <p>\u7efc\u5408\u9610\u8ff0</p> <p>\u4ee3\u7801\u610f\u4e49\u4e0a\u7684\u4f4d\u79fb\u4e00\u822c\u6307\u7684\u662f\u4e00\u4e2a\u53cc\u76ee\u64cd\u4f5c\uff0c\u5373\u53ef\u4ee5\u6307\u5b9a\u4f4d\u79fb\u591a\u5c11\u4f4d\uff0c\u8fd9\u4e2a\u53c2\u6570\u88ab\u79f0\u4e3a \u4f4d\u79fb\u91cf(Shift Amount)\u3002</p> <p>\u4f46\u5728\u786c\u4ef6\u5c42\u9762\u7684\u5b9e\u73b0\u4e0a\uff0c\u8fd9\u4e2a\u591a\u5c11\u201c\u4f4d\u201d\u53ea\u80fd\u901a\u8fc7\u5faa\u73af\u548c\u5df2\u7ecf\u5b9e\u73b0\u7684\u3001\u6709\u9650\u79cd \u786e\u5b9a\u4f4d\u79fb\u91cf\u7684\u4f4d\u79fb\u5b9e\u73b0\uff0c\u5728\u6211\u4eec\u63d0\u5230\u7684\u5b9e\u73b0\u4e2d\uff0c\u6307\u7684\u5c31\u662f\u6211\u4eec\u786c\u4ef6\u53ea\u5b9e\u73b0\u300c\u4e00\u4f4d\u4f4d\u79fb\u300d\uff0c\u5e76\u901a\u8fc7\u5faa\u73af\u5b9e\u73b0\u300c\u4efb\u610f\u4f4d\u4f4d\u79fb\u300d\uff0c\u800c\u8fd9\u4e2a\u201c\u5faa\u73af\u201d\uff0c\u5c31\u662f\u5728\u65f6\u949f\u5468\u671f\u4e0b\uff0c<code>FF</code> \u4e0d\u65ad\u7ee7\u627f\u4e0a\u4e00\u4e2a <code>FF</code> \u7684\u503c\u6765\u5b9e\u73b0\u7684\u3002</p> <p>\u800c\u5e76\u884c\u4e0e\u4e32\u884c\u5b9e\u73b0\u65e0\u975e\u662f\u4f53\u73b0\u8fd9\u4e2a\u7279\u5f81\u7684\u4e24\u79cd\u5b9e\u73b0\u65b9\u6cd5\u800c\u5df2\u3002</p> \u5173\u4e8e\u5e76\u884c\u548c\u4e32\u884c <p>\u8fd9\u662f\u4e00\u4e2a\u9898\u5916\u8bdd\uff0c\u6211\u6682\u65f6\u4e0d\u77e5\u9053\u653e\u54ea\u91cc\uff0c\u521a\u597d\u8fd9\u91cc\u63d0\u5230\u4e86\u5c31\u5728\u8fd9\u91cc\u8bf4\u4e86\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u867d\u7136\u770b\u8d77\u6765\u5e76\u884c\u7684\u6548\u7387\u4f1a\u6bd4\u4e32\u884c\u9ad8\u5f88\u591a\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u5f88\u591a\u9ad8\u901f\u4f20\u8f93\u8bbe\u5907\u6216\u534f\u8bae\u7528\u7684\u90fd\u662f\u4e32\u884c\u3002\u8fd9\u662f\u56e0\u4e3a\uff0c\u5e76\u884c\u5355\u6b21\u4f20\u8f93\u7ebf\u8def\u591a\uff0c\u7ebf\u8def\u4e4b\u95f4\u7684\u8ddd\u79bb\u5c0f\uff0c\u5e72\u6270\u5927\uff0c\u6240\u4ee5\u76f8\u5bf9\u6765\u8bf4\u6b63\u5e38\u5de5\u4f5c\u6240\u4e0b\u5bf9\u9891\u7387\u7684\u8981\u6c42\u66f4\u9ad8\uff1b\u800c\u4e32\u884c\u7531\u4e8e\u53ef\u4ee5\u4f7f\u7528\u66f4\u9ad8\u7684\u9891\u7387\u5de5\u4f5c\uff0c\u6240\u4ee5\u5728\u67d0\u4e9b\u60c5\u51b5\u4e0b\u6548\u7387\u66f4\u9ad8\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_16","title":"\u8ba1\u6570\u5668","text":"<p>\u8ba1\u6570\u5668(counter) \u662f\u4ec0\u4e48\uff0c\u5df2\u7ecf\u5728 #\u5bc4\u5b58\u5668 \u4e2d\u89e3\u91ca\u4e86\uff0c\u6839\u636e\u5b9e\u73b0\u539f\u7406\uff0c\u4e3b\u8981\u5206\u4e3a \u884c\u6ce2\u8ba1\u6570\u5668(Ripple Counter) \u548c \u540c\u6b65\u8ba1\u6570\u5668(Synchronous Counter) \u4e24\u79cd\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_17","title":"\u884c\u6ce2\u8ba1\u6570\u5668","text":"<p>\u884c\u6ce2\u8ba1\u6570\u5668\u7684\u4e3b\u8981\u601d\u60f3\u5c31\u662f\u5c06\u4e00\u4e2a\u4e0d\u65ad\u81ea\u53cd\u7684 <code>FF</code> \u7684\u8f93\u51fa\u76f4\u63a5\u6216\u95f4\u63a5\u4f5c\u4e3a\u4e0b\u4e00\u4e2a <code>FF</code> \u7684\u65f6\u949f\u8109\u51b2\u3002\u7531\u4e8e\u5f62\u6210\u4e00\u6b21\u8109\u51b2\u9700\u8981\u4e00\u5bf9 <code>0</code>&amp;<code>1</code>\uff0c\u6240\u4ee5\u524d\u4e00\u4e2a <code>FF</code> \u53d6\u53cd\u4e24\u6b21\u624d\u80fd\u5f15\u8d77\u4e0b\u4e00\u4e2a <code>FF</code> \u53d6\u53cd\u4e00\u6b21\uff0c\u5982\u679c\u4e0b\u4e00\u4e2a <code>FF</code> \u662f\u5728\u4e0a\u4e00\u4e2a <code>FF</code> \u7684\u8f93\u51fa\u4ece <code>1</code> \u53d8 <code>0</code> \u65f6\u89e6\u53d1\uff0c\u90a3\u4e24\u4e2a <code>FF</code> \u7684\u53d8\u5316\u521a\u597d\u5bf9\u5e94\u4e8e\u4e8c\u8fdb\u5236\u81ea\u589e\u7684\u8fdb\u4f4d\u89c4\u5f8b\uff1a<code>(0,0)</code>\uff0c<code>(0,1)</code>\uff0c<code>(1,0)</code>\uff0c<code>(1,1)</code>\uff0c<code>0,0</code>\uff0c...</p> <p>\u4e8e\u662f\uff0c\u4e00\u4e2a 4-Bit \u884c\u6ce2\u8ba1\u6570\u5668\u7684\u903b\u8f91\u56fe\u5c31\u5982\u4e0b\uff1a</p> <p></p> <ul> <li>\u4e0a\u56fe\u4e2d\uff0c\u4e0b\u4e00\u4e2a <code>FF</code> \u7684\u65f6\u949f\u6765\u81ea\u4e8e\u4e0a\u4e00\u4e2a <code>FF</code> \u7684\u8f93\u51fa\u53d6\u53cd\uff0c\u4e5f\u5c31\u662f\u5bf9\u4e8e\u4e0a\u5347\u6cbf\u89e6\u53d1\u7684 <code>FF</code> \u6765\u8bf4\uff0c\u4e0b\u4e00\u4e2a <code>FF</code> \u4f1a\u5728\u4e0a\u4e00\u4e2a <code>FF</code> \u7684\u8f93\u51fa\u4ece <code>1</code> \u5230 <code>0</code> \u65f6\u81ea\u53cd\uff0c\u6240\u4ee5\u662f \u6b63\u5411\u8ba1\u65f6(Upward Counting)\uff1b</li> <li>\u53cd\u4e4b\uff0c\u5982\u679c\u4e0b\u4e00\u4e2a <code>FF</code> \u7684\u65f6\u949f\u6765\u81ea\u4e8e\u4e0a\u4e00\u4e2a <code>FF</code> \u7684\u76f4\u63a5\u8f93\u51fa\uff0c\u4e5f\u5c31\u662f\u5bf9\u4e8e\u4e0a\u5347\u6cbf\u89e6\u53d1\u7684 <code>FF</code> \u6765\u8bf4\uff0c\u4e0b\u4e00\u4e2a <code>FF</code> \u4f1a\u5728\u4e0a\u4e00\u4e2a <code>FF</code> \u7684\u8f93\u51fa\u4ece <code>0</code> \u5230 <code>1</code> \u65f6\u81ea\u53cd\uff0c\u6240\u4ee5\u662f \u9006\u5411\u8f93\u51fa(Downward Counting)\uff1b</li> </ul> <p></p> <p>\u53ef\u4ee5\u53d1\u73b0\uff0c\u884c\u6ce2\u8ba1\u6570\u5668\u7684\u4f18\u70b9\u662f\u7535\u8def\u7b80\u5355\uff0c\u6210\u672c\u4f4e\uff1b\u4f46\u662f\u7f3a\u70b9\u4e5f\u5f88\u660e\u663e\uff0c\u65e2\u7136\u5b83\u4e0e\u540c\u6b65\u8ba1\u6570\u5668\u76f8\u533a\u5206\uff0c\u5c31\u8bf4\u660e\u5b83\u4e0d\u662f\u540c\u6b65\u7535\u8def\uff0c\u6bcf\u4e00\u4e2a <code>FF</code> \u90fd\u4f1a\u6709\u4f20\u64ad\u5ef6\u65f6\uff0c\u968f\u7740\u8ba1\u6570\u8303\u56f4\u589e\u5927\uff0c\u603b\u4f20\u64ad\u5ef6\u65f6\u4e5f\u4f1a\u589e\u52a0\uff0c\u800c\u4e3a\u4e86\u8ba9\u7535\u8def\u6b63\u5e38\u5de5\u4f5c\uff0c\u65f6\u949f\u9891\u7387\u4e5f\u8981\u56e0\u6b64\u4e0b\u964d\u3002</p> <p>\u7531\u4e8e\u8fd9\u4e9b\uff0c\u4e66\u4e0a\u5bf9\u884c\u6ce2\u8ba1\u6570\u5668\u7684\u8bc4\u4ef7\u662f\u591a\u6570\u60c5\u51b5\u4e0b\u884c\u6ce2\u52a0\u6cd5\u5668\u53ea\u4f1a\u5728\u4f4e\u529f\u8017\u7535\u8def\u4e2d\u88ab\u91c7\u7528\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_18","title":"\u540c\u6b65\u8ba1\u6570\u5668","text":"<p>\u540c\u6b65\u8ba1\u6570\u5668\u4ece\u5b9e\u73b0\u81ea\u589e\u7684\u539f\u7406\u4e0a\u6765\u8bf4\uff0c\u548c\u884c\u6ce2\u8ba1\u6570\u5668\u4e5f\u662f\u7c7b\u4f3c\u7684\uff0c\u540c\u6837\u662f\u5728\u4e0a\u4e00\u4e2a <code>FF</code> \u5b8c\u6210\u4e00\u6b21\u7ffb\u8f6c\u7684\u65f6\u5019\u8ba9\u4e0b\u4e00\u4e2a <code>FF</code> \u53d8\u5316\u3002\u53ea\u4e0d\u8fc7\u540c\u6b65\u8ba1\u6570\u5668\u4e0d\u662f\u63a7\u5236\u65f6\u949f\uff0c\u800c\u662f\u63a7\u5236\u300c<code>FF</code> \u5185\u7684\u503c\u662f\u5426\u53d6\u53cd\u300d\u6765\u5b9e\u73b0\uff0c\u800c\u5b83\u662f\u901a\u8fc7\u5f02\u6216\u95e8\u6765\u5b9e\u73b0\u7684\u3002</p> <p>\u6211\u4eec\u77e5\u9053\uff0c\\(0 \\;\\mathrm{XOR}\\; X = X\\)\uff0c\u800c \\(1 \\;\\mathrm{XOR}\\; X = \\overline{X}\\)\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ef\u4ee5\u63a7\u5236 <code>XOR</code> \u7684\u67d0\u4e2a\u8f93\u5165\u662f <code>0</code> \u8fd8\u662f <code>1</code> \u6765\u5b9e\u73b0\u53d6\u53cd\u8fd8\u662f\u4fdd\u6301\u7684\u5207\u6362\u3002</p> <p>\u4e0d\u8fc7\u9700\u8981\u533a\u5206\u7684\u662f\uff0c\u884c\u6ce2\u8ba1\u6570\u5668\u662f\u5728\u4e0a\u4e00\u4e2a <code>FF</code> \u53d8\u5316\u5b8c\u624d\u5f71\u54cd\u4e0b\u4e00\u4e2a\u7684\uff0c\u6240\u4ee5\u662f <code>1</code> \u53d8 <code>0</code> \u65f6\u9700\u8981\u8fdb\u4f4d\uff1b\u800c\u540c\u6b65\u8ba1\u6570\u5668\u7684\u6240\u6709 <code>FF</code> \u662f\u4e00\u8d77\u53d8\u5316\u7684\uff0c\u6240\u4ee5\u53ea\u6709\u5728\u524d\u9762\u90fd\u662f <code>1</code> \u65f6\u5019\uff0c\u8868\u793a\u4e0b\u4e00\u523b\u5b83\u4eec\u90fd\u8981\u8fdb\u4f4d\u4e86\uff0c\u5f53\u524d <code>FF</code> \u624d\u8fdb\u4f4d\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u884c\u6ce2\u8ba1\u6570\u5668\u662f\u5efa\u7acb\u5728\u524d\u4e00\u4e2a <code>FF</code> \u7684\u7ed3\u679c\u8fdb\u884c\u53d8\u5316\uff1b\u800c\u5e76\u884c\u52a0\u6cd5\u5668\u662f\u5efa\u7acb\u5728\u4e0a\u4e00\u523b\u6240\u6709\u5173\u8054 <code>FF</code> \u7684\u72b6\u6001\uff0c\u5bf9\u4e0b\u4e00\u72b6\u6001\u7684\u9884\u5224\u3002</p> <p>\u5728\u8fd9\u57fa\u7840\u4e0a\uff0c\u540c\u6b65\u8ba1\u6570\u5668\u7684 \u81ea\u589e\u5668(incrementer) \u6709\u4e24\u79cd\u4e0d\u540c\u7684\u5b9e\u73b0\u65b9\u6cd5\uff1a</p> <p></p> <p>(b) \u7684\u84dd\u8272\u90e8\u5206\u66ff\u6362 (a) \u7684\u84dd\u6846\u90e8\u5206\u4e3a\u7b2c\u4e8c\u79cd\u3002\u4e24\u79cd\u5206\u522b\u4e3a \u95e8\u4e32\u884c\u5b9e\u73b0 \u548c \u95e8\u5e76\u884c\u5b9e\u73b0\u3002</p> <p>\u4e24\u79cd\u5b9e\u73b0\u5176\u5b9e\u539f\u7406\u90fd\u662f\u4e00\u6837\u7684\uff0c\u53ea\u4e0d\u8fc7\u95e8\u4e32\u884c\u727a\u7272\u67d0\u4e9b\u60c5\u51b5\u4e0b\u7684\u8fd0\u884c\u6548\u7387\uff0c\u8282\u7ea6\u4e86\u95e8\u6210\u672c\uff1b\u800c\u95e8\u5e76\u884c\u63d0\u9ad8x\u4e86\u95e8\u6210\u672c\uff0c\u51cf\u5c11\u4e86\u67d0\u4e9b\u60c5\u51b5\u4e0b\u7684\u95e8\u5ef6\u8fdf\u3002</p> <p>\u5f53\u7136\uff0c\u65e2\u7136\u4f7f\u7528\u7684\u662f\u81ea\u589e\u5668\uff0c\u90a3\u4e48\u5b9e\u73b0\u7684\u81ea\u7136\u5c31\u662f\u6b63\u5411\u8ba1\u6570\u5668\u3002\u4e3a\u4e86\u5b9e\u73b0\u9006\u5411\u8ba1\u6570\u5668\uff0c\u6211\u4eec\u5219\u9700\u8981\u5c06\u81ea\u589e\u5668\u6362\u4e3a\u81ea\u51cf\u5668\u3002\u505a\u6cd5\u53ea\u4e0d\u8fc7\u662f\u5c06\u5f02\u6216\u95e8\u7684\u63a7\u5236\u4fe1\u53f7\u53d6\u53cd\u3002</p> <p>\u5177\u4f53\u6765\u8bf4\uff0c\u8f93\u5165\u51fd\u6570\u53d8\u4e3a\uff1a</p> \\[ \\begin{aligned}     D_{A0} = &amp; Q_0 \\oplus EN \\\\     D_{A1} = &amp; Q_1 \\oplus \\left(         (Q_0 \\cdot \\overline{S} + \\overline{Q_0} \\cdot S) \\cdot EN     \\right) \\\\     D_{A2} = &amp; Q_2 \\oplus \\left(         (Q_0 \\cdot Q_1 \\cdot \\overline{S} + \\overline{Q_0} \\cdot \\overline{Q_1} \\cdot S) \\cdot EN     \\right) \\\\     D_{A3} = &amp; Q_3 \\oplus \\left(         (Q_0 \\cdot Q_1 \\cdot Q_2 \\cdot \\overline{S} + \\overline{Q_0} \\cdot \\overline{Q_1} \\cdot \\overline{Q_2} \\cdot S) \\cdot EN     \\right) \\end{aligned} \\] <p>\u4ece\u8fd9\u4e2a\u8868\u8fbe\u5f0f\u4e5f\u53ef\u4ee5\u7565\u5fae\u611f\u53d7\u5230\u95e8\u4e32\u884c\u548c\u95e8\u5e76\u884c\u7684\u533a\u522b\u7a76\u7adf\u5728\u54ea\u91cc\uff0c\u5b83\u4eec\u4f7f\u7528\u540c\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff0c\u53ea\u4e0d\u8fc7\u7528\u4e0d\u540c\u7684\u65b9\u5f0f\u6765\u5b9e\u73b0\u591a\u4f4d <code>AND</code> \u8fd0\u7b97\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_19","title":"\u540c\u6b65\u8f7d\u5165","text":"<p>\u8fd9\u91cc\u540c\u6b65\u8f7d\u5165\u7684\u542b\u4e49\u53ef\u4ee5\u540c \u4f4d\u79fb\u5bc4\u5b58\u5668\u7684\u5e76\u884c\u8f7d\u5165 \u7c7b\u6bd4\uff0c\u5176\u4e3b\u8981\u76ee\u7684\u662f\u5c06\u8ba1\u6570\u5668\u7684\u5f53\u524d\u503c\u8bbe\u4e3a\u4e00\u4e2a\u6211\u4eec\u9700\u8981\u7684\u6570\u5b57\u3002</p> <p>\u4ee5\u95e8\u4e32\u884c\u5b9e\u73b0\u4e3a\u4f8b\uff0c\u6dfb\u52a0\u529f\u80fd\u63a7\u5236\u903b\u8f91\u540e\u7684\u8bbe\u8ba1\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_20","title":"\u4efb\u610f\u8ba1\u6570\u5e8f\u5217","text":"<p>\u73b0\u5728\u8ba9\u6211\u4eec\u56de\u5f52\u8ba1\u6570\u5668\u7684\u884c\u4e3a\uff1a\u968f\u7740\u65f6\u949f\u5468\u671f\u4e0d\u65ad\u5728\u56fa\u5b9a\u7684\u72b6\u6001\u5e8f\u5217\u4e2d\u5faa\u73af\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u8fd9\u4e2a\u5e8f\u5217\u672a\u5fc5\u9700\u8981\u662f\u6574\u6570\u81ea\u589e\u81ea\u51cf\u5e8f\u5217\u3002\u800c\u5b9e\u73b0\u67d0\u4e00\u5e8f\u5217\u7684\u8ba1\u6570\u884c\u4e3a\uff0c\u5b9e\u9645\u4e0a\u53ea\u8981\u8bbe\u8ba1\u597d\u6709\u9650\u72b6\u6001\u548c\u72b6\u6001\u4e4b\u95f4\u7684\u8f6c\u79fb\u5373\u53ef\u3002</p> <p>\u5f53\u7136\uff0c\u8fd9\u4e2a\u8bdd\u9898\u592a\u8fc7\u5bbd\u6cdb\uff0c\u6211\u4eec\u5728\u8fd9\u91cc\u5177\u4f53\u8ba8\u8bba\u7684\u8fd8\u662f\u6574\u6570\u81ea\u589e\u5e8f\u5217\uff0c\u53ea\u4e0d\u8fc7\u9650\u5236\u4e86\u4e0a\u4e0b\u754c\u3002\u4e66\u4e0a\u63d0\u4f9b\u7684\u6848\u4f8b\u662f BCD \u7801\u7684\u5faa\u73af\u8ba1\u6570\uff0c\u90a3\u6211\u4eec\u4e5f\u8ddf\u7740\u8fd9\u4e2a\u6848\u4f8b\u6765\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#bcd","title":"BCD \u7801\u5faa\u73af\u8ba1\u6570","text":"<p>\u9996\u5148\u6211\u4eec\u9700\u8981\u6839\u636e\u65f6\u5e8f\u7535\u8def\u7684\u8bbe\u8ba1\u89c4\u5219\uff0c\u641e\u6e05\u695a\u72b6\u6001\u5e8f\u5217\uff0c\u663e\u7136\uff0c\u6839\u636e BCD \u7801\u7684\u5b9a\u4e49\uff0c\u6211\u4eec\u53ef\u4ee5\u6bdb\u6bdb\u5730\u8ba4\u4e3a\u5b83\u662f\u4e0b\u786e\u754c\u4e3a <code>0</code>\uff0c\u4e0a\u786e\u754c\u4e3a <code>9</code> \u7684 4 \u6bd4\u7279\u6574\u6570\u5e8f\u5217\u3002\u6362\u53e5\u8bdd\u8bf4\uff0c\u6211\u4eec\u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u8ba1\u6570\u5230 <code>9</code> \u540e\u4e0b\u4e00\u4e2a\u72b6\u6001\u662f <code>0</code> \u7684 4 \u6bd4\u7279\u8ba1\u6570\u5668\u3002</p> <p>\u4e8e\u662f\u6211\u4eec\u53ef\u4ee5\u5f53\u8ba1\u6570\u5668\u7684\u8f93\u51fa\u4e3a <code>9</code> \u65f6\uff0c\u4e0b\u4e00\u5468\u671f\u8ba9\u8ba1\u6570\u5668\u8f7d\u5165 <code>0</code>\uff1a</p> <p></p> <p>\u6309\u7406\u6765\u8bf4\u8fd9\u91cc\u5e94\u8be5\u662f \\(Load = Q_0\\cdot\\overline{Q_1}\\cdot\\overline{Q_2}\\cdot Q_3\\)\uff0c\u4ee5\u5bf9\u5e94 <code>9D=1001B</code>\uff0c\u4f46\u662f\u7531\u4e8e\u81ea\u589e\u8fc7\u7a0b\u4e2d\uff0c<code>1001</code> \u662f\u7b2c\u4e00\u4e2a\u6ee1\u8db3 <code>1??1</code> \u7684\u7ec4\u5408\uff0c\u6240\u4ee5\u53ef\u4ee5\u76f4\u63a5\u7b80\u5316\u4e3a \\(Load = Q_0\\cdot Q_3\\)\u3002</p> <p>\u5982\u4e0a\u662f\u4fee\u6539\u4e0a\u786e\u754c\u7684\u65b9\u6cd5\uff0c\u800c\u4fee\u6539\u4e0b\u786e\u754c\u7684\u65b9\u6cd5\u5219\u662f\u4fee\u6539 \\(D_i\\) \u5e8f\u5217\uff0c\u4f8b\u5982\u4e0a\u56fe\u4e2d \\(D\\) \u63a5\u5730\uff0c\u6240\u4ee5\u4e0b\u786e\u754c\u662f <code>0000B</code>\u3002</p> <p>Mod N \u8ba1\u6570\u5668</p> <p>\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u53ef\u4ee5\u628a BCD \u7801\u5faa\u73af\u8ba1\u6570\u5668\u770b\u4f5c\u662f\u7279\u6b8a\u7684 Mod N \u8ba1\u6570\u5668\uff0c\u5373 N = 10 \u7684 Mod N \u8ba1\u6570\u5668\u3002</p> <p>\u6216\u8bb8\u4f60\u4f1a\u60f3\uff0c\u5b9e\u73b0 Mod N \u8ba1\u6570\u5668\u80fd\u4e0d\u80fd\u5728\u6ee1\u8db3\u8f93\u51fa\u6761\u4ef6\u540e\u76f4\u63a5\u4f7f\u7528 <code>Clear</code> \u8f93\u5165\u3002\u4f46\u662f\u8bf7\u4e0d\u8981\u5fd8\u8bb0\u4e86\uff0c<code>Clear</code> \u4e5f\u597d\uff0c<code>Set</code> \u4e5f\u7f62\uff0c\u5b83\u4eec\u90fd\u662f\u5f02\u6b65\u64cd\u4f5c\u3002\u6211\u4eec\u6ca1\u6709\u5fc5\u8981\u4e5f\u4e0d\u5e94\u8be5\u4f7f\u7528\u5f02\u6b65\u64cd\u4f5c\uff0c\u6240\u4ee5\u6700\u597d\u7684\u505a\u6cd5\u8fd8\u662f\u4f7f\u7528 <code>Load</code>\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap06/#_21","title":"\u5bc4\u5b58\u5668\u4f20\u8f93\u7684\u63a7\u5236","text":"<p>\u672a\u5b8c\u6210</p> <p>Control Unit</p> <ul> <li>Programmable sys<ul> <li>instructions (usually stored in memory RAM/ROM)</li> <li>program counter</li> </ul> </li> <li>Nonprogrammable sys<ul> <li>focus on this</li> <li>State machine diagrams for Control Unit design.</li> </ul> </li> </ul> <ol> <li>Write a detailed system specification.</li> <li>Define all external data and control input signals, all external data, control, and status output signals, and the registers of the datapath and control unit.</li> <li>Find a state machine diagram for the system including the register transfers in the datapath and in the control unit.</li> <li>Define internal control and status signals. Use these signals to separate output conditions and actions, including register transfers, from the state diagram flow and represent them in tabular form.</li> <li>Draw a block diagram of the datapath including all control and status inputs and outputs. Draw a block diagram of the control unit if it includes register transfer hardware.</li> <li>Design any specialized register transfer logic in both the control and datapath.</li> <li>Design the control unit logic.</li> <li>Verify the correct operation of the combined datapath and control logic. If verification fails, debug the system and reverify it.</li> </ol> <p>\u91cd\u70b9\u770b\u4e66\u4e0a\u7684\u4f8b\u5b50\u3002</p>"},{"location":"ZJU_CS/DigitalDesign/Chap07/","title":"Chap 7 Memory Basics","text":"<p>\u6846\u67b6</p> <ul> <li>Two types: RAM &amp; ROM<ul> <li>RAM ship consists of an array of RAM cells, decoders, write circuits, read circuits, output circuits</li> <li>RAM bit slice</li> <li>DRAM</li> <li>Error-detection and correction codes, often based on Hamming codes</li> </ul> </li> <li>R&amp;W operations have specific steps and associated timing parameters: access time &amp; write cycle time</li> <li>static(SRAM) or dynamic(DRAM), volatile or nonvolatile</li> </ul>"},{"location":"ZJU_CS/DigitalDesign/Chap07/#7-1_memory","title":"7-1 Memory","text":"<p>Defination: Two types of memories are used in various parts of a computer: random-access memory (RAM) and read-only memory (ROM). RAM accepts new information for storage to be available later for use. The process of storing new information in memory is referred to as a memory write operation. The process of transferring the stored information out of memory is referred to as a memory read operation. RAM can perform both the write and the read operations, whereas ROM, as introduced in Section 6-8, performs only read operations. RAM sizes may range from hundreds to billions of bits.</p> <p>Memory is a collection of binary storage cells together with associated circuits needed to transfer information into and out of the cells.</p> word\u76f8\u5173 <ol> <li>A word is an entity of bits that moves in and out of memory as a unit\u2014a group of 1s and 0s that represents a number, an instruction, one or more alphanumeric characters, or other binary-coded information.</li> <li>A group of eight bits is called a byte. </li> <li>Most computer memories use words that are multiples of eight bits in length. Thus, a 16-bit word contains two bytes, and a 32-bit word is made up of four bytes. The capacity of a memory unit is usually stated as the total number of bytes that it can store.</li> <li>Communication between a memory and its environment is achieved through data input and output lines, address selection lines, and control lines that specify the direction of transfer of information.</li> <li>Computer memory varies greatly in size. It is customary to refer to the number of words (or bytes) in memory with one of the letters K (kilo), M (mega), or G (giga). K is equal to 2^10, M to 2^20, and G to 2^30.</li> </ol>"},{"location":"ZJU_CS/DigitalDesign/Chap07/#memory_organization","title":"Memory Organization","text":"<p>The memory is organized as an array of storage cells, each of which is capable of storing one bit of information. The cells are arranged in rows and columns. The intersection of a row and a column is called a memory address. The number of rows and columns determines the capacity of the memory.  </p>"},{"location":"ZJU_CS/DigitalDesign/Chap07/#memory_operations","title":"Memory Operations","text":"<p>The memory is accessed by specifying the address of the desired word. The address is applied to the memory address input lines. The memory then selects the addressed word and transfers it to the memory output lines. The memory is also capable of accepting a word from the memory input lines and storing it in the addressed word location. The memory is controlled by a set of control lines that specify the direction of transfer of information.</p> <p>Pay attention to the order of reading and writing</p> <p>Read: - \u5c06\u6709\u6548\u7684\u5730\u5740\u653e\u5230address input lines\u4e0a\u3002 - \u5c06read control line\u7f6e\u4e3a1\u3002 - \u7b49\u5f85\u8bfb\u51fa\u7684\u6570\u636e\u7a33\u5b9a\uff0c\u5c06\u6570\u636e\u4ecememory output lines\u8bfb\u51fa\u3002 </p> <p>Write: - \u5c06\u6709\u6548\u7684\u5730\u5740\u653e\u5230address input lines\u4e0a\u3002\u5c06\u5199\u5165\u7684\u6570\u636e\u653e\u5230data input lines\u4e0a\u3002 - \u6fc0\u6d3b\u5199\u5165\u63a7\u5236\u3002 </p> <p>Data\u2f00\u5b9a\u8981\u57280-1\u524d\u4fdd\u6301\u2f00\u6bb5\u65f6\u95f4\u6765\u5efa\u2f74\u5e76\u4e140-1\u540e\u7ef4\u6301\u2f00\u6bb5\u65f6\u95f4\u624d\u80fd\u6b63\u786e\u5199\u2f0a.</p>"},{"location":"ZJU_CS/DigitalDesign/Chap07/#random-access_memory_ram","title":"random-access memory (RAM)","text":"<p>RAM\u5206\u4e3a\u4e24\u79cd\uff1astatic RAM (SRAM) and dynamic RAM (DRAM)\u3002SRAM\u662f\u9759\u6001\u7684\uff0cDRAM\u662f\u52a8\u6001\u7684\u3002SRAM\u7684\u901f\u5ea6\u6bd4DRAM\u5feb\uff0c\u4f46\u662fDRAM\u7684\u5bb9\u91cf\u6bd4SRAM\u5927\u3002SRAM\u7684\u5355\u5143\u662f\u7531flip-flop\u6784\u6210\u7684\uff0cDRAM\u7684\u5355\u5143\u662f\u7531capacitor\u548ctransistor\u6784\u6210\u7684\u3002\uff08\u6bcf\u9694\u4e00\u6bb5\u65f6\u95f4\u9700\u8981refresh\uff09</p> <p>\u8fd8\u5206\u6325\u53d1\u4e0e\u975e\u6325\u53d1</p>"},{"location":"ZJU_CS/DigitalDesign/Chap07/#sram","title":"SRAM","text":"<p> - SRAM\u7684\u5355\u5143\u662f\u7531flip-flop\u6784\u6210\u7684\uff0c\u6bcf\u4e2a\u5355\u5143\u9700\u89816\u4e2atransistor\u3002\u56e0\u6b64SRAM\u7684\u9762\u79ef\u6bd4DRAM\u5927\uff0c\u4f46\u662f\u901f\u5ea6\u5feb\uff0c\u4e0d\u9700\u8981refresh\u3002 - Logic diagram\u5982\u4e0b\uff1a</p>"},{"location":"ZJU_CS/DigitalDesign/exam/","title":"\u5386\u5e74\u5377\u68b3\u7406","text":""},{"location":"ZJU_CS/DigitalDesign/exam/#18-19","title":"18-19","text":"<ol> <li>\u4e8c\u8fdb\u5236\u7684\u8865\u7801\uff08Complement\uff09\u548c\u53cd\u7801\uff08Inverse Code\uff09\u7684\u6982\u5ff5\u53ca\u5176\u8ba1\u7b97\u65b9\u6cd5\u3002(1's complement, 2's complement)</li> <li>The setup time of a flip-flop is the minimum amount of time that an input must remain stable before an active clock transition.</li> <li>The complement of a flip-flop.</li> <li>The gate input cost.</li> <li>The dual of function.</li> <li>LUT(look up table): FPGA used it.</li> <li>\u4f1a\u8003JK\u89e6\u53d1\u5668\u7684\u5de5\u4f5c\u539f\u7406\u3002</li> <li>The steps of RAM</li> <li>\u6e05\u695a\u4e0b\u5217\u51fd\u6570\u7684\u542b\u4e49 <pre><code>or(x, B, C, D);\n</code></pre></li> <li>\u719f\u6089\u884c\u6ce2\u8ba1\u6570\u5668\u548c\u540c\u6b65\u8ba1\u6570\u5668\u7684\u5de5\u4f5c\u539f\u7406\u3002</li> </ol>"},{"location":"ZJU_CS/DigitalDesign/glossary/","title":"\u8bcd\u6c47\u8868","text":"<p>\ud83d\ude4f</p> <p>\u8bcd\u6c47\u8868\u662f cm \u8001\u5e08\u6574\u7406\u7684\uff0c\u8ba9\u6211\u4eec\u8bf4 \u8c22\u8c22 cm \uff01</p>"},{"location":"ZJU_CS/DigitalDesign/glossary/#1_ch11-7","title":"1)   Ch1.1-7","text":"<p>odometer\uff1a\u91cc\u7a0b\u8868\uff0c\u8ba1\u7a0b\u5668</p> <p>signal conditioning: \u4fe1\u53f7\u8c03\u7406\u3001\u4fe1\u53f7\u5904\u7406</p> <p>capacitor\uff1a\u7535\u5bb9\u5668\uff0ce.g., capacitor charge\uff0c\u7535\u5bb9\u5668\u5145\u7535</p> <p>radix\uff1a\u57fa\u6570(= base)</p> <p>radix point\uff1a\u5c0f\u6570\u70b9</p> <p>number = integer portion(\u6574\u6570\u90e8\u5206) + fraction portion(\u5c0f\u6570\u90e8\u5206)</p> <p>power series\uff1a\u5e42\u7ea7\u6570</p> <p>binary\uff1a\u4e8c\u8fdb\u5236\uff0coctal\uff1a\u516b\u8fdb\u5236\uff0cdecimal\uff1a\u5341\u8fdb\u5236\uff1bhexadecimal\uff1a\u5341\u516d\u8fdb\u5236</p> <p>augend\uff1a\u88ab\u52a0\u6570</p> <p>addend\uff1a\u52a0\u6570</p> <p>minuend: \u88ab\u51cf\u6570</p> <p>subtrahend\uff1a\u51cf\u6570</p> <p>padding\uff1a\u586b\u5145</p> <p>weighted code\uff1a\u6709\u6743\u7801</p> <p>arithmetic\uff1a\u7b97\u672f\u3001\u56db\u5219\u8fd0\u7b97</p> <p>significant digit\uff1a\u6709\u6548\u4f4d</p> <p>punched paper\uff1a\u6253\u5b54\u7eb8\u5e26</p> <p>parity\uff1a\u5947\u5076\u6821\u9a8c</p> <p>even\uff1a\u5076\u6570</p> <p>odd\uff1a\u5947\u6570</p> <p>source coding\uff1a\u4fe1\u6e90\u7f16\u7801</p> <p>channel coding\uff1a\u4fe1\u9053\u7f16\u7801</p> <p>optical Shaft Encoder\uff1a\u5149\u8f74\u7f16\u7801\u5668</p> <p>positional number system\uff1a\u6309\u4f4d\u8bb0\u6570\u5236</p>"},{"location":"ZJU_CS/DigitalDesign/glossary/#2_ch21-3","title":"2)   Ch2.1-3","text":"<p>notation: \u6807\u8bb0\u6cd5</p> <p>operator\uff1a\u8fd0\u7b97\u7b26\u3001\u7b97\u5b50\uff0ce.g., logical operator \u903b\u8f91\u8fd0\u7b97\u7b26</p> <p>operand\uff1a\u64cd\u4f5c\u6570</p> <p>identifier\uff1a\u6807\u8bc6\u7b26=designator\uff0ce.g., variable identifier\uff1a\u53d8\u91cf\u6807\u8bc6\u7b26</p> <p>overbar: ( \u00af )\u4e0a\u6a2a\u7ebf</p> <p>single quote mark (')\uff1a\u5355\u5f15\u53f7</p> <p>normally-closed switch\uff1a\u5e38\u95ed\u5f00\u5173,e.g. Normally-Open(NO), Normally-Closed(NC)</p> <p>magnetic field\uff1a\u78c1\u573a</p> <p>energizing coil\uff1a\u6fc0\u52b1\u7ebf\u5708</p> <p>relay\uff1a\u7ee7\u7535\u5668</p> <p>transistor: \u6676\u4f53\u7ba1\u3001\u4e09\u6781\u7ba1</p> <p>precedence\uff1a\u4f18\u5148\u6743\uff0ce.g., Boolean Operator Precedence</p> <p>parenthesis\uff1a\u62ec\u53f7\uff08\u5355\u6570\u5f62\u5f0fparenthesis\uff09</p> <p>leave out\uff1a\u9057\u6f0f, e.g., If the meaning is unambiguous, we leave out the symbol  \u201c\u00b7\u201d.</p> <p>idempotence: \u5e42\u7b49\u6027</p> <p>involution: \u4e58\u65b9</p> <p>dual\uff1a\u5bf9\u5076= duality\uff0ce.g., The dual of an algebraic expression is obtained by interchanging +  and \u00b7 and interchanging 0\u2019s and 1\u2019s.</p> <p>dual function\uff1a\u5bf9\u5076\u51fd\u6570</p> <p>complement function: \u8865\u51fd\u6570</p> <p>canonical form\uff1a\u89c4\u8303\u5f62\u5f0f</p> <p>standard form\uff1a\u6807\u51c6\u5f62\u5f0f</p> <p>designator\uff1a\u6807\u8bc6\u7b26= identifier\uff0ce.g., We drop the \u201cm\u201d designators\uff1a\u6211\u4eec\u5220\u9664\u4e86m\u53d8\u91cf\u6807\u8bc6\u7b26</p> <p>identity: \u540c\u4e00\u6027\uff1b\u4e00\u81f4\uff1b\u76f8\u7b49\uff1be.g., Prove the identity of each of the following Boolean  equations, using algebraic manipulation.</p> <p>indices\uff1aindex\u7684\u590d\u6570(=indexes) \u4e00\u822c\u5728\u6570\u5b66\uff0c\u91d1\u878d\u548c\u76f8\u5173\u9886\u57df\u4f7f\u7528</p> <p>subscript\uff1a\u4e0b\u6807</p>"},{"location":"ZJU_CS/DigitalDesign/glossary/#3_ch24-7","title":"3)   Ch2.4-7","text":"<p>Venn diagram\uff1a\u7ef4\u6069\u56fe</p> <p>Implicant\uff1a\u8574\u6db5\u9879\uff1b\u8574\u542b\u9879\uff1b\u9690\u542b\u6570</p> <p>Prime implicant: \u4e3b\u8574\u542b\u9879</p> <p>essential prime implicant\uff1a\u57fa\u672c\u7d20\u8574\u6db5; \u5b9e\u8d28\u672c\u539f\u8574\u6db5</p> <p>Don't cares: \u65e0\u5173\u6700\u5c0f\u9879</p> <p>degenerate: \u9000\u5316, e.g., A NAND gate with one input degenerates to an inverter.</p> <p>Hi-Impedance Outputs: \u9ad8\u963b\u6001\u8f93\u51fa</p>"},{"location":"ZJU_CS/DigitalDesign/glossary/#4_ch3_1-2","title":"4)   ch3. 1-2","text":"<p>rudimentary:\u57fa\u7840\u7684\uff1b\u57fa\u672c\u7684\uff1b\u672a\u5145\u5206\u53d1\u5c55\u7684\uff1b\u539f\u59cb\u7684</p> <p>die: \u88f8\u7247\u3001\u82af\u7247</p> <p>wafer\uff1a\u6676\u5706</p> <p>margin: \u8fb9\u7f18\u3001\u5dee\u989d\uff0ce.g., noise margin\uff0c\u566a\u58f0\u5bb9\u9650</p> <p>superimpose: v.\u4f7f\uff08\u7532\uff09\u53e0\u6620\u5728\uff08\u4e59\uff09\u4e0a\uff1b\u4f7f\u91cd\u53e0, e.g., Noise margin refers to the maximum external  noise voltage superimposed on a normal input value that will not cause an undesirable change  in the circuit output</p> <p>dissipation: n.\u6d88\u8017\uff1b\u653e\u8361\uff1b\u6d6a\u8d39\uff1be.g., power dissipation = power consumption</p> <p>propagation delay\uff1a\u4f20\u64ad\u5ef6\u8fdf</p> <p>transition time\uff1a\u8f6c\u6362\u65f6\u95f4</p> <p>transport delay\uff1a\u4f20\u8f93\u5ef6\u8fdf</p> <p>inertial delay\uff1a\u60ef\u6027\u5ef6\u8fdf</p> <p>full custom: \u5b8c\u5168\u5b9a\u5236</p> <p>fabrication: \u5236\u9020\u3001\u5236\u4f5c</p> <p>cell library\uff1a\u5143\u4ef6\u5e93</p> <p>schematic\uff1a\u539f\u7406\u56fe\uff0c\u7b80\u56fe</p>"},{"location":"ZJU_CS/DigitalDesign/glossary/#5_ch3_3-9","title":"5)   ch3. 3-9","text":"<p>decoder\uff1a\u8bd1\u7801\u5668</p> <p>encoder\uff1a\u7f16\u7801\u5668</p> <p>multiplexer\uff1a\u591a\u8def\u590d\u7528\u5668\uff0cMultiplexer means many into one.</p> <p>demultiplexer\uff1a\u4fe1\u53f7\u5206\u79bb\u5668\u3001\u591a\u8def\u5206\u914d\u5668\uff0cThe demultiplexer means one into many.</p> <p>anode: \u9633\u6781\uff0c\u6b63\u6781</p> <p>cathode: \u9634\u6781\uff0c\u8d1f\u6781</p>"},{"location":"ZJU_CS/DigitalDesign/glossary/#6_ch3_8-10","title":"6)   Ch3. 8-10","text":"<p>Iterative array\uff1a\u8fed\u4ee3\u9635\u5217</p> <p>Ripple Carry Adder\uff1a\u884c\u6ce2\u8fdb\u4f4d\u52a0\u6cd5\u5668</p> <p>Carry Look-ahead Adder: \u8d85\u524d\u8fdb\u4f4d\u52a0\u6cd5\u5668</p> <p>bit-wise: \u4ee5\u4f4d\u4e3a\u64cd\u4f5c\u5bf9\u8c61\u7684(wise\u662f\u65b9\u5f0f\u4e4b\u610f),\u5982bit-wise operators(\u4f4d\u8fd0\u7b97\u7b26), 2-input bit-wise  addition functional block</p>"},{"location":"ZJU_CS/DigitalDesign/glossary/#7_ch311-12","title":"7)   Ch3.11-12","text":"<p>1's Complement\uff1a\u53cd\u7801</p> <p>2's Complement\uff1a\u8865\u7801</p> <p>magnitude\uff1a\u6570\u503c</p> <p>Signed-Magnitude\uff1a\u7b26\u53f7\u2014\u6570\u503c\u8868\u793a\u6cd5</p> <p>Signed-Complement\uff1a\u7b26\u53f7\u2014\u8865\u7801\u8868\u793a\u6cd5</p> <p>contraction\uff1a(n.) \u6536\u7f29\u3001\u7d27\u7f29\uff1bcontract\uff1a(v.) \u6536\u7f29</p>"},{"location":"ZJU_CS/DigitalDesign/glossary/#8_ch5_2","title":"8)   Ch5. 2","text":"<p>fuse intact\uff1a\u7194\u4e1d\u4fdd\u7559</p> <p>fuse blown\uff1a\u7194\u4e1d\u7194\u65ad</p> <p>volatile\uff1a\u6613\u5931\u6027\u7684</p> <p>non-volatile\uff1a\u975e\u6613\u5931\u6027\u7684</p>"},{"location":"ZJU_CS/DigitalDesign/glossary/#9_ch4_1-4","title":"9)   Ch4. 1-4","text":"<p>tractable: (adj.) \u6613\u5904\u7406\u7684\uff1b\u6613\u9a7e\u9a6d\u7684</p> <p>oscillator: (n.) \u632f\u8361\u5668</p> <p>capacitors: (n.) \u7535\u5bb9\u5668</p> <p>inductor: (n.) \u7535\u611f\u5668</p> <p>latch\uff1a\u9501\u5b58\u5668</p> <p>flip-flop\uff1a\u89e6\u53d1\u5668</p> <p>metastable state\uff1a\u4e9a\u7a33\u6001</p> <p>alternating clock\uff1a\u4ea4\u66ff\u65f6\u949f</p> <p>disposable sampling = 1s catching\uff1a\u4e00\u6b21\u91c7\u6837</p> <p>setup time\uff1a\u5efa\u7acb\u65f6\u95f4</p> <p>hold time\uff1a\u4fdd\u6301\u65f6\u95f4</p> <p>pulse-triggering\uff1a\u8109\u51b2\u89e6\u53d1</p> <p>level triggering\uff1a\u7535\u5e73\u89e6\u53d1</p> <p>edge triggering\uff1a\u8fb9\u6cbf\u89e6\u53d1</p> <p>self-recovery capability\uff1a\u81ea\u6062\u590d\u80fd\u529b</p> <p>equivalent state\uff1a\u7b49\u4ef7\u72b6\u6001</p>"},{"location":"ZJU_CS/DigitalDesign/glossary/#10_ch6_1-5","title":"10)  Ch6. 1-5","text":"<p>register\uff1a\u5bc4\u5b58\u5668</p> <p>register transfer operation\uff1a\u5bc4\u5b58\u5668\u4f20\u8f93\u64cd\u4f5c</p> <p>microoperation\uff1a\u5fae\u64cd\u4f5c</p> <p>register transfer structure\uff1a\u5bc4\u5b58\u5668\u4f20\u8f93\u7ed3\u6784</p> <p>bus\uff1a\u603b\u7ebf</p> <p>lateral: (adj.) \u4fa7\u9762\u7684\uff1b\u6a2a\u5411\u7684\uff1b\u5411\u4fa7\u9762\u79fb\u52a8\u7684</p> <p>laterally: (adv.) \u4fa7\u9762\u5730\uff1b\u6a2a\u5411\u5730\uff1b\u5411\u4fa7\u9762\u79fb\u52a8\u5730</p> <p>serial gating\uff1a\u4e32\u884c\u95e8\u63a7</p> <p>parallel gating\uff1a\u5e76\u884c\u95e8\u63a7</p> <p>counter\uff1a\u8ba1\u6570\u5668</p> <p>data path\uff1a\u6570\u636e\u901a\u9053</p> <p>control unit\uff1a\u63a7\u5236\u5355\u5143</p>"},{"location":"ZJU_CS/DigitalDesign/glossary/#11_ch7_1-7","title":"11)  Ch7. 1-7","text":"<p>strobe\uff1a\u9009\u901a\uff1b\u9009\u901a\u8109\u51b2\uff1b\u95f8\u95e8</p> <p>SRAM\uff1a\u9759\u6001\u5185\u5b58</p> <p>DRAM\uff1a\u52a8\u6001\u5185\u5b58</p> <p>coincident selection\uff1a\u91cd\u5408\u9009\u62e9</p> <p>word extension\uff1a\u5b57\u6269\u5c55</p> <p>bit extension\uff1a\u4f4d\u6269\u5c55</p> <p>address multiplexing\uff1a\u5730\u5740\u590d\u7528\uff08\u6307DRAM\uff09</p> <p>refresh\uff1a\u5237\u65b0</p> <p>synchronous DRAM(SDRAM)\uff1a\u540c\u6b65DRAM</p> <p>burst read\uff1a\u7206\u53d1\u6a21\u5f0f\u8bfb\u53d6\u6570\u636e</p> <p>burst length\uff1a\u7206\u53d1\u6a21\u5f0f\u7684\u6570\u636e\u8bfb/\u5199\u957f\u5ea6</p> <p>memory bandwidth\uff1a\u5185\u5b58\u5e26\u5bbd</p>"},{"location":"ZJU_CS/DigitalDesign/learnskill/","title":"\u5b66\u4e60\u601d\u8def\u4ee5\u53ca\u8d44\u6e90","text":"<p>Guahao\u7684\u590d\u4e60\u7b14\u8bb0 Xiulao\u7684\u539f\u7f51\u7ad9 verilog \u5b9e\u9a8c\u7ec3\u4e60 \u5386\u5e74\u5377</p> <p>\u5e0c\u671b\u5927\u5bb6\u4e0d\u8981\u50cf\u6211\u8fd9\u6837\u72fc\u72c8\uff0c\u800c\u662f\u80fd\u591f\u5408\u7406\u5229\u7528\u8d44\u6e90\u5b66\u4e60\u3002</p> <p>\u5f53\u7136\u6211\u4eec\u4e0d\u5f97\u4e0d\u627f\u8ba4\u6570\u903b\u8fd9\u4e2a\u8bfe\u662f\u53ef\u4ee510\u5929\u5de6\u53f3\u901f\u6210\u7684?\u8fd8\u671b\u5927\u5bb6\u53c2\u8003\u3002</p>"},{"location":"ZJU_CS/Discrete%20math/","title":"\u79bb\u6563\u6570\u5b66","text":"<p>\u8bfe\u7a0b\u4fe1\u606f</p> <p>\u672c\u8bfe\u7a0b\u662f\u7afa\u9662\u6df7\u5408\u73ed\u6570\u5b66\u6a21\u5757\u8bfe\u300a\u79bb\u6563\u6570\u5b66H\u300b\u8bfe\u7a0b\u7684\u7b14\u8bb0\u8bb0\u5f55\u3002 \u8bfe\u7a0b\u662f\u7531\u8ba1\u7b97\u673a\u5b66\u9662\u7684\u91d1\u5c0f\u521a\u8001\u5e08\u6388\u8bfe\uff0c\u8fd9\u91cc\u5c31\u4e0d\u5efa\u8bae\u5927\u5bb6\u542c\u667a\u4e91\u5b66\u4e60\u4e86\uff0c\u4f46\u8bb2\u771f\u8001\u5e08\u7684PPT\u8d28\u91cf\u975e\u5e38\u9ad8\uff01\u76f8\u6bd4\u4e8e\u8bfb\u539a\u539a\u7684\u5927\u4e66\u53ef\u80fd\u66f4\u5bb9\u6613\u5b66\u4e60\u4e9b\u3002</p> <p>\u672c\u7b14\u8bb0\u6574\u4f53\u76f8\u5bf9\u7c97\u7cd9\uff0c\u7b97\u662f\u8003\u524d\u7684\u8865\u5929\u6323\u624e\u5427hhh\u3001</p>"},{"location":"ZJU_CS/Discrete%20math/exam/","title":"\u8003\u70b9\u8bb0\u5f55","text":""},{"location":"ZJU_CS/Discrete%20math/exam/#_2","title":"\u903b\u8f91\u8868\u8fbe\u5f0f","text":"<ol> <li>\\(p \\rightarrow q \\equiv \\neg p \\lor q\\)</li> <li>Think reason: \\[ (p \\land \\neg r) \\lor (q \\land \\neg r) \\lor p \\\\ \\Leftrightarrow p \\lor(q \\land \\neg r)\\] </li> <li></li> </ol>"},{"location":"ZJU_CS/Discrete%20math/note/","title":"\u79bb\u6563\u77e5\u8bc6\u70b9\u68b3\u7406","text":"<p>\u76ee\u5f55</p> <p>=== \"info\"       \u5982\u82e5latex\u516c\u5f0f\u65e0\u6cd5\u663e\u793a\uff0c\u8bf7\u91cd\u65b0\u5237\u65b0\u754c\u9762\u5373\u53ef\u3002</p> <p>=== \"index\"       [TOC]</p>"},{"location":"ZJU_CS/Discrete%20math/note/#chapter_1_logic_and_proofs","title":"Chapter 1 Logic and Proofs","text":"<p>\u6458\u8981</p> \u672c\u7ae0\u8981\u70b9 <p>\u672c\u7ae0\u4e3b\u8981\u662f\u903b\u8f91\u8868\u8fbe\u5f0f\u4ee5\u53caquantifier\u7684\u4e00\u4e9b\u6982\u5ff5\uff0c\u4ee5\u53ca\u4e00\u4e9b\u8bc1\u660e\u65b9\u6cd5\u7684\u4ecb\u7ecd\u3002</p> <p>=== \"glossary\"       |\u82f1\u6587|\u4e2d\u6587|\u6570\u5b66\u7b26\u53f7\u6216\u542b\u4e49|       |:--:|:--:|----|       |proposition|\u547d\u9898| \\(p,q,r\\)|       |negation|\u5426\uff08\u547d\u9898\uff09| \\(\\neg\\)|       |disjunction|\u5e76|\\(\\vee\\)|       |conjunction | \u4ea4 | \\(\\wedge\\) |       |implication | \u8574\u542b | \\(\\rightarrow\\) |       |equivalence | \u7b49\u4ef7 | \\(\\Leftrightarrow\\) |       |tautology | \u6052\u771f\u5f0f |  |       |contradiction | \u77db\u76fe\u5f0f |  |       |contingence | \u53ef\u80fd\u5f0f |  |       |axiom | \u516c\u7406 | true without proof |       |theorem | \u5b9a\u7406 | can be shown to be true |       |lemma | \u5f15\u7406 | small theorem |       |corollary | \u63a8\u8bba |  |       |conjecture | \u731c\u60f3 |  |\u8fbe\u4ee5\u53ca\u63a8\u5bfc\uff08\u6ce8\u610fquantifier\uff09</p>"},{"location":"ZJU_CS/Discrete%20math/note/#propositional_logic","title":"Propositional Logic","text":"<ol> <li>Proposition must be statements.</li> <li>Disjunction and conjunction.</li> <li>Implication:\\(p \\rightarrow q\\) means that: <ul> <li>if p then q</li> <li>p implies q</li> <li>p only if q</li> <li>q is necessary for p</li> <li>p is sufficient for q</li> <li>if q whenever p <p>Truth table \uff08Notice: \\(p \\rightarrow q\\) is false only when \\(p\\) is true and \\(q\\) is false.\uff09 p - hypothesis or premise q - conclusion or consequence |p|q|\\(p \\rightarrow q\\)| |:--:|:--:|:--:| |T|T|T| |T|F|F| |F|T|T| |F|F|T| </p> </li> </ul> </li> </ol> \u9898\u76ee <p>sentence\uff1a\"You can not ride the roller coaster if you are under 4 feet tall unless you are older than 16 years old.\"</p> <ul> <li>p: you can ride the roller coaster</li> <li>q: you are under 4 feet tall</li> <li>r: you are older than 16 years old</li> <li>\\((q\\wedge \\neg r) \\rightarrow \\neg q\\)</li> </ul> <ol> <li>Biconditional: \\(p \\leftrightarrow q\\) means that:</li> <li>p if and only if q</li> <li>p is necessary and sufficient for q</li> <li> <p>p implies q and q implies p</p> <p>Truth table(same to XOR) |p|q|\\(p \\leftrightarrow q\\)| |:--:|:--:|:--:| |T|T|T| |T|F|F| |F|T|F| |F|F|T|</p> </li> <li> <p>We need to notice the priority of the operators.</p> </li> <li>\\(\\neg\\) has the highest priority.</li> <li>\\(\\wedge\\) has higher priority than \\(\\vee\\).</li> <li>\\(\\vee\\) has higher priority than \\(\\rightarrow\\) and \\(\\leftrightarrow\\).</li> <li>\\(\\rightarrow\\) and \\(\\leftrightarrow\\) have the lowest priority.</li> </ol> \u5c0f\u6d4b <p>\u53ef\u80fd\u4f1a\u8003\u4f60 another logical operators, such as Sheffer stroke, Peirce arrow, NAND, NOR, XOR, XNOR.</p> <p>Sheffer stroke: \\(p \\uparrow q \\equiv \\neg (p \\wedge q)\\)    Peirce arrow: \\(p \\downarrow q \\equiv \\neg (p \\vee q)\\)    Must be functionally complete, which means that any logical expression can be expressed by using only the operator.</p> <ol> <li>Tautology, Contradiction and Contingency.</li> <li>Logical equivalence: Formulae A and B are called logical equivalence if \\(A \\leftrightarrow B\\) is a tautology.    - Example: \\(\\neg p \\vee q\\) and \\(p \\rightarrow q\\) are logically equivalent.    - Example: \\(p \\rightarrow q\\) and \\(\\neg q \\rightarrow \\neg p\\) are logically equivalent.    - Example: \\(p \\leftrightarrow q\\) and \\((p \\rightarrow q) \\wedge (q \\rightarrow p)\\) are \\((\\neg p \\vee q) \\wedge (\\neg q \\vee p)\\) are logically equivalent.</li> </ol> <p>\u8fd9\u91cc\u51e0\u4e4e\u540c\u6982\u7edf\u548c\u6570\u903b</p> <ol> <li>There are two types of normal forms in proposition calculus.</li> <li>disjunctive normal form(DNF):\\(p \\vee q \\vee \\neg r\\)</li> <li> <p>conjunctive normal form(CNF):\\((p \\vee q \\vee \\neg r) \\wedge (p \\vee \\neg q \\vee r)\\)</p> </li> <li> <p>Deductive reasoning: A conclusion is deduced from a set of premises by means of logical steps.</p> </li> </ol> How to solve <ol> <li>if conclusion in form of \\(p \\rightarrow q\\), then we can convert the original proposition into \\(p_1 \\wedge p_2 \\wedge \\dots \\wedge p_n \\Rightarrow q\\).</li> <li>Another important proof technique is proof by contradiction. We assume that the conclusion is false and then show that this assumption leads to a contradiction.</li> <li>To construct proofs using resolution as the only rule of inference, the hypothesis and the conclusion must be expressed as clauses.</li> </ol>"},{"location":"ZJU_CS/Discrete%20math/note/#predicate_and_quantifier","title":"Predicate and Quantifier","text":"<ol> <li>Predicate: A predicate is a statement involving one or more variables that becomes a proposition when values are substituted for the variables. <p>Example: \\(P(x): x^2 - 5x + 6 = 0\\) is a predicate. Example: \\(Q(x): x^2 - 5x + 6 &gt; 0\\) is a predicate. Example: \\(R(x,y): x + y = 0\\) is a predicate.</p> </li> <li>Quantifier: A quantifier is a symbol that indicates the generality of the open sentence.</li> <li>Universal quantifier: \\(\\forall\\) means \"for all\" or \"for every\".</li> <li>Existential quantifier: \\(\\exists\\) means \"there exists\" or \"there is at least one\".</li> <li>Example: \\(\\forall x P(x)\\) is a proposition.</li> <li> <p>Example: \\(\\exists x P(x)\\) is a proposition.</p> </li> <li> <p>Banding variables</p> <p>Remark: The order of the quantifiers is important. \\(\\forall x (P(x) \\rightarrow \\exists y Q(x,y))\\) is not logically equivalent to \\(\\exists y (\\forall x (P(x) \\rightarrow Q(x,y)))\\).</p> </li> </ol> <p>some important equivalent predicate Formula</p> <ul> <li>De Morgan's laws:<ul> <li>\\(\\neg (\\forall x P(x)) \\equiv \\exists x (\\neg P(x))\\)</li> <li>\\(\\neg (\\exists x P(x)) \\equiv \\forall x (\\neg P(x))\\)</li> </ul> </li> <li>Quantifier -- handle with care! <ul> <li>\\(\\forall x (p(x) \\wedge q(x)) \\equiv (\\forall x p(x)) \\wedge (\\forall x q(x))\\)</li> <li>\\(\\exists x (p(x) \\vee q(x)) \\equiv (\\exists x p(x)) \\vee (\\exists x q(x))\\)</li> </ul> </li> <li>But:<ul> <li>\\(\\forall x (p(x) \\vee q(x)) \\Leftarrow (\\forall x p(x)) \\vee (\\forall x q(x))\\)</li> <li>\\(\\exists x (p(x) \\wedge q(x)) \\Rightarrow (\\exists x p(x)) \\wedge (\\exists x q(x))\\)</li> </ul> </li> </ul>"},{"location":"ZJU_CS/Discrete%20math/note/#chapter_2_basic_structures_sets_functions","title":"Chapter 2 Basic Structures: Sets &amp; Functions","text":"<ol> <li>\u533a\u5206\\(\\in\\) &amp; \\(\\subset\\)</li> <li>Set operation: union:\\(\\cup\\) Intersection\\(\\cap\\) <p>If \\(A \\cap B = \\emptyset\\), then \\(A\\) and \\(B\\) are disjoint.</p> </li> <li>Difference: \\(A - B = \\{x | x \\in A \\wedge x \\notin B\\}\\)</li> <li>Complement: \\(\\bar{A} = U - A\\)</li> <li>Symmetric Difference: \\(A \\oplus B = (A - B) \\cup (B - A)\\) </li> </ol> <p>The power Set</p> <p>Definition: The power set of a set \\(A\\), denoted by \\(P(A)\\) or \\(2^S\\), is the set of all subsets of \\(A\\). \\(\\(2^S = \\{T | T \\subseteq S\\}\\)\\)</p>"},{"location":"ZJU_CS/Discrete%20math/note/#chapter_7_relations","title":"Chapter 7 Relations","text":""},{"location":"ZJU_CS/Discrete%20math/note/#71_relations_and_their_properties","title":"7.1 Relations and their properties","text":"<ol> <li>We write  \\(aRb\\)  for \\((a,b) \\in R\\)</li> </ol> <p>Definition: A binary relation R between A and B is a subset of Cartesian product \\(A \\times B\\) : \\(R \\subseteq A \\times B\\)</p> <p>When \\(A=B\\), \\(R\\) is called a relation on set \\(A\\).</p> <ol> <li> <p>Distinguish domain and range. (just like function)</p> </li> <li> <p>n-ary relation: n is called its degree.</p> </li> <li> <p>The composite of R and S is the relation: \\(S \\circ R = \\{(a,c)|a \\in A, c \\in C \\quad \\exists b \\in B\\}\\) such that  \\((a,b)\\in R\\) and \\((b,c)\\in S\\)</p> </li> <li> <p>Power: \\(R^{n+1} = R^n \\circ R\\)</p> </li> <li> <p>Inverse:\\(R^{-1} = \\{(y,x)|(x,y) \\in R\\}\\)</p> </li> <li> <p>Reflexive / Irreflexive: R is reflexive \\(\\Leftrightarrow \\forall x \\in A, (x,x) \\in R\\) </p> </li> <li> <p>symmetric / antisymmetric: </p> </li> </ol> <p>R is symmetric \\(\\Leftrightarrow \\forall x, y \\in A, (x,y)\\in R \\Rightarrow (y,x)\\in R \\Leftrightarrow R^{-1} = R\\)</p> <p>R is antisymmetric: \\(\\Leftrightarrow \\forall x, y \\in A, (x,y)\\in R \\quad and \\quad (y,x)\\in R \\Rightarrow x = y \\Leftrightarrow R \\cap R^{-1} \\subseteq R_=\\)</p> <p>Non-symmetric \\(\\not\\Leftrightarrow\\) antisymmetric (eg. \\(R_=\\))</p> <ol> <li>R is transitive \\(\\Leftrightarrow \\forall x, y, z \\in A((x,y)\\in R \\wedge(y,z) \\in R) \\Rightarrow (x,z)\\in R\\)</li> </ol> <p>Theorem:R on a set A is transitive if and only if \\(R^n \\subseteq R\\) for \\(n = 2, 3, \\dots\\)</p> <p>Inductive step: \\(R^{n+1}\\) is also a subset of \\(R\\)</p>"},{"location":"ZJU_CS/Discrete%20math/note/#72_representing_relations","title":"7.2 Representing Relations","text":"<ol> <li>Matrices representation.</li> </ol> <ul> <li>reflexive \\(\\Leftrightarrow\\) All terms \\(m_{ii}\\) in the main diagonal of \\(M_R\\) are 1</li> <li>symmetric \\(\\Leftrightarrow m_{ij} = m_{ji}\\) for all \\(i,j\\).</li> <li>anti-symmetric \\(\\Leftrightarrow\\) if $m_{ij} = 1 $ and \\(i\\not= j\\) then \\(m_{ij} = 0\\)</li> <li>Transitive \\(\\Leftrightarrow\\)  whenever \\(c_{ij}\\) in \\(C=M_R^2\\) is nonzero then entry \\(m_{ij}\\) in \\(M_R\\) is also nonzero</li> </ul> <ol> <li>Digraphs representation.</li> </ol> <ul> <li>A edge \\((a,b)\\), a isiInitial vertx and b is terminal vertex</li> <li>A edge of form \\((a,a)\\), called loop</li> <li>reflexible \\(\\Leftrightarrow\\) There are loops at every vertex of digraph.</li> <li>symmetric \\(\\Leftrightarrow\\) Every edge between distinct vertices is accompanied by a edge in the opposite direction.</li> </ul>"},{"location":"ZJU_CS/Discrete%20math/note/#73_closures_of_relations","title":"7.3 Closures of Relations","text":"<ol> <li>Definition: \\(R \\&amp; S\\) are relation,while S satisfy:</li> </ol> <ul> <li>S with property P and \\(R \\subseteq S\\)</li> <li>\\(\\forall S'\\) with property P and \\(R \\subseteq S'\\) , then \\(S \\subseteq S'\\)</li> </ul> <ol> <li>Theorem: R be a relation on set A.</li> </ol> <ul> <li>The reflexive closure of relation R:     $$    r(R) =R \\cup \\Delta    $$    , where \\(\\Delta = \\{(a,a)|a \\in A\\}\\)</li> <li>The symmmetric closure of relation R:     $$    S(R) = R \\cup R^{-1}    $$</li> </ul> <ol> <li>Definition: Path is a sequence of one or more edges in graph G.</li> </ol> <p>Theorem:  Let R be a relation on set \\(A\\). There is a path of length n from a to b \\(\\Leftrightarrow (a,b) \\in R^n\\)</p> <ol> <li>Definition: The connectivity relation \\(R^* = \\{(a,b)|\\text{there is a path from a to b}\\}\\).     $$    R^* = \\cup^{\\infin}_{n=1} R^n    $$</li> </ol> <p>Theorem: The transitive closure of R :    $$    t(R) = R^*    $$</p> <ol> <li>WARSHALL'S algorithm!</li> </ol>"},{"location":"ZJU_CS/Discrete%20math/note/#74_equivalence_relations","title":"7.4 Equivalence Relations","text":"<ol> <li> <p>Definition: Relation \\(R\\)~ : \\(A \\leftrightarrow A\\) is an equivalence relation, if it reflexive, symmetric and transitive.</p> </li> <li> <p>Definition: Let \\(R: A \\leftrightarrow A\\) is an equivalence relation. For any \\(a \\in A\\), the equivalence class of a is the set of the elements related to a.     $$    [a]_R = {x\\in A|(x,a) \\in R}    $$ .     If \\(b\\in [a]_R\\). b is called a representative of this equivalence class.</p> <p>The properties of equivalence classes are: 1. \\(\\forall a \\in A, a[R] \\not ={\\emptyset}\\)( by reflexive, \\(a \\in [a]_R\\) ) 2. \\(\\forall a,b \\in A, [a]_R = [b]_R\\) or \\([a]_R \\cap [b]_R = \\emptyset\\) (by symmetric and transitive)  3. $ \\cup_{a\\in A}[a]_R = A$ (\\(A \\subseteq \\cup_{a\\in A}, [a]_R \\subseteq A\\)) 4. \\([a]_R \\cap [b]_R \\not = \\emptyset \\Rightarrow [a]_R = [b]_R\\) (by symmetric and transitive)</p> </li> <li> <p>Definition: The set of all equivalence classes of R is called the quotient set of A by R.     $$    A/R = {[a]_R|a \\in A}    $$</p> <p>Remark: 1. If A is finite, then $|A/R| $ is also finite. 2. If A has n elements, and if every \\([a]_R\\) has m elements, then \\(|A/R| = n/m\\)</p> </li> <li> <p>Definition: A partition \\(\\pi\\) on a set \\(S\\) is a family of nonempty subsets of \\(S\\) such that every element of \\(S\\) is in exactly one of these subsets.  $$    \\pi = {A_1, A_2, \\dots, A_n}\\</p> </li> <li>\\cup_{k=1}^n A_k =S \\ </li> <li>A_j \\cap A_k = \\emptyset \\text{ for every j,k with }j \\not= k, 1 &lt; j, k &lt; n $$ <p>Theorem: Let \\(R\\) be an equivalence relation on a set \\(S\\). Then the equivalence of classes of \\(R\\) form a partition of \\(X\\). Conversely, given a partition \\(\\{A_i|i \\in I\\}\\) of \\(S\\), there is an equivalence relation \\(R\\) on \\(S\\) such that the equivalence classes of \\(R\\) are the sets \\(A_i\\).</p> </li> </ol>"},{"location":"ZJU_CS/Discrete%20math/note/#75_partial_orderings","title":"7.5 Partial Orderings","text":"<ol> <li> <p>Definition: A relation \\(R_{\\preceq}\\) on a set \\(S\\) (\\(S \\leftrightarrow S\\)) is a partial ordering if it is reflexive, antisymmetric and transitive.</p> </li> <li> <p>Definition: The element a and b of s poset \\(S\\) are comparable if either \\(a \\preceq b\\) or \\(b \\preceq a\\). Otherwise, a and b are incomparable.</p> </li> <li>Definition: A poset \\(S\\) is a total ordering or linear ordering if every pair of elements of \\(S\\) is comparable. A totaly ordered set is also called a chain.</li> <li>Lexicograpic order: Construct a poset \\(S\\) by taking the Cartesian product of two posets \\(S_1\\) and \\(S_2\\). The relation \\(\\preceq\\) on \\(S\\) is defined by     $$    (a_1, a_2) \\preceq (b_1, b_2) \\Leftrightarrow a_1 \\preceq_1 b_1 \\text{ and } a_2 \\preceq_2 b_2    $$</li> <li> <p>hasse diagram: A hasse diagram of a poset \\(S\\) is a diagram that represents the poset \\(S\\) using points and line segments. The points of the diagram are the elements of \\(S\\), and there is a line segment between \\(a\\) and \\(b\\) if \\(a \\prec b\\) and there is no element \\(c\\) such that \\(a \\prec c \\prec b\\).</p> <ol> <li>Start with the directed graph for the relation.</li> <li>Remove all loops.</li> <li>Remove all edges that must be present because of the transitive property.</li> <li>Finally, arrange each edges so that its initial vertex is below its terminal vertex, Remove all arrows.</li> </ol> </li> <li> <p>Definition: Let \\((A, \\preceq)\\) be a partial ordered set, \\(B\\subseteq A\\).</p> <ol> <li>a is a maximal element of B if there is no element \\(b \\in B\\) such that \\(a \\prec b\\).</li> <li>b is a minimal element of B if there is no element \\(b \\in B\\) such that \\(b \\prec a\\).</li> <li>a is a greatest element of B if \\(a \\preceq b\\) for every \\(b \\in B\\).</li> <li>b is a least element of B if \\(b \\preceq a\\) for every \\(b \\in B\\). </li> <li>a is an upper bound of B if \\(b \\preceq a\\) for every \\(b \\in B\\).</li> <li>b is a lower bound of B if \\(a \\preceq b\\) for every \\(b \\in B\\).</li> <li>a is the least upper bound of B if a is an upper bound of B and if \\(a \\preceq c\\) for every upper bound c of B.</li> <li>b is the greatest lower bound of B if b is a lower bound of B and if \\(c \\preceq b\\) for every lower bound c of B.</li> </ol> <p>Remark: Can have many minimal/maximal elements, but only one least/greatest element.</p> </li> <li> <p>Definition: A poset \\(S\\) is a lattice if every pair of elements of \\(S\\) has a least upper bound and a greatest lower bound.</p> </li> </ol>"},{"location":"ZJU_CS/Discrete%20math/note/#chapter_8_graph","title":"Chapter 8 Graph","text":""},{"location":"ZJU_CS/Discrete%20math/note/#81_basic_introduction","title":"8.1 Basic introduction","text":"<ol> <li> <p>Definition: A graph \\(G\\) is an ordered pair \\((V,E)\\), where \\(V\\) is a finite nonempty set and \\(E\\) is a set of two-element subsets of \\(V\\) which is called edges.</p> <p>Definition: A multigraph is a graph that is permitted to have multiple edges with the same endpoints.(don't have loops)</p> <p>Definition: A pseudograph is a graph that is permitted to have loops. Sum table: </p> </li> <li> <p>Terminology:    - Two vertices u and v are adjacent or neighbors if {u,v} is an edge of G.    - If {u,v} is an edge of G, then u and v are incident with the edge {u,v}.    - The degree of a vertex v, denoted by deg(v), is the number of edges incident with v, with loops counted twice.(Pendant vertex: deg(v) = 1)</p> </li> <li> <p>Theorem: Let \\(G = (V,E)\\) be a graph with \\(n\\) vertices and \\(m\\) edges. Then    $$    \\sum_{v \\in V} deg(v) = 2m    $$</p> <p>Corollary(\u7ed3\u8bba): The number of vertices of odd degree in any graph is even. Corollary:  $$ \\sum_{i=1}^{n}{deg^{-}{v_i}} = \\sum_{i=1}^{n}{deg^{+}{v_i}} = |E|$$</p> </li> <li> <p>Some simple graph:</p> </li> </ol> <ul> <li>complete graph: \\(K_n\\) is a simple graph with n vertices and exactly one edge between each pair of distinct vertices.(\\(|E| = \\frac{n(n-1)}{2}\\))</li> <li>cycles: \\(C_n\\) is a simple graph with n vertices \\(v_1, v_2, \\dots, v_n\\) and edges \\(\\{v_1, v_2\\}, \\{v_2, v_3\\}, \\dots, \\{v_{n-1}, v_n\\}, \\{v_n, v_1\\}\\)</li> <li>wheels: \\(W_n\\) is a simple graph with n vertices \\(v_1, v_2, \\dots, v_n\\) and edges \\(\\{v_1, v_2\\}, \\{v_2, v_3\\}, \\dots, \\{v_{n-1}, v_n\\}, \\{v_n, v_1\\}, \\{v_1, v_3\\}, \\{v_1, v_4\\}, \\dots, \\{v_1, v_n\\}\\) </li> <li>n-cubes: \\(Q_n\\) is a simple graph with \\(2^n\\) vertices \\(v_1, v_2, \\dots, v_{2^n}\\) and edges \\(\\{v_i, v_j\\}\\) if and only if \\(v_i\\) and \\(v_j\\) differ in exactly one bit position.</li> <li>bipartite graph: A graph \\(G = (V,E)\\) is bipartite if $$ V = V_1 \\cup V_2 \\ V_1 \\cap V_2 = \\emptyset$$ such that no edge has both endpoints in the same subset.</li> <li>complete bipartite graph: \\(K_{m,n}\\) is a bipartite graph with \\(m+n\\) vertices \\(v_1, v_2, \\dots, v_m\\) and \\(u_1, u_2, \\dots, u_n\\) and edges \\(\\{v_i, u_j\\}\\) for all \\(i = 1, 2, \\dots, m\\) and \\(j = 1, 2, \\dots, n\\).</li> </ul> <ol> <li>New graphs from old:</li> </ol> <ul> <li>subgraph: \\(G' = (V', E')\\) is a subgraph of \\(G = (V,E)\\) if \\(V' \\subseteq V\\) and \\(E' \\subseteq E\\).</li> <li>complement: \\(G' = (V, E')\\) is the complement of \\(G = (V,E)\\) if \\(E' = \\{ \\{u,v\\} | u,v \\in V, u \\not= v, \\{u,v\\} \\not\\in E\\}\\)</li> <li>union: \\(G_1 = (V_1, E_1)\\) and \\(G_2 = (V_2, E_2)\\), then \\(G_1 \\cup G_2 = (V_1 \\cup V_2, E_1 \\cup E_2)\\)</li> <li>join: \\(G_1 = (V_1, E_1)\\) and \\(G_2 = (V_2, E_2)\\), then \\(G_1 \\vee G_2 = (V_1 \\cup V_2, E_1 \\cup E_2 \\cup \\{ \\{u,v\\} | u \\in V_1, v \\in V_2\\})\\)</li> </ul>"},{"location":"ZJU_CS/Discrete%20math/note/#82_representing_graphs","title":"8.2 Representing graphs:","text":"<ol> <li>adjacency matrix: \\(A = (a_{ij})\\) is a \\(n \\times n\\) matrix such that \\(a_{ij} = 1\\) if \\(\\{v_i, v_j\\} \\in E\\) and \\(a_{ij} = 0\\) otherwise.</li> <li>incidence matrix: \\(B = (b_{ij})\\) is a \\(n \\times m\\) matrix such that \\(b_{ij} = 1\\) if \\(v_i\\) is incident with \\(e_j\\) and \\(b_{ij} = 0\\) otherwise. </li> <li>adjacency list: For each vertex \\(v_i\\), we have a list of all vertices adjacent to \\(v_i\\). (for directed graph, we have two lists for each vertex, one for the vertices adjacent to \\(v_i\\) and one for the vertices from which there is an edge to \\(v_i\\))</li> </ol>"},{"location":"ZJU_CS/Discrete%20math/note/#83_connection","title":"8.3 Connection","text":"<ol> <li>A path or circuit is simple if it does not contain a repeated edge.</li> <li></li> <li>Counting paths between vertices: The number of paths of length n from vertex \\(v_i\\) to vertex \\(v_j\\) in a graph G is the \\((i,j)\\) entry of the matrix \\(A^n\\).</li> </ol>"},{"location":"ZJU_CS/Discrete%20math/note/#84_euler_and_hamilton_paths","title":"8.4 Euler and Hamilton Paths","text":"<ol> <li>Definition: A Euler path in a graph G is a simple path that contains every edge of G. A Euler circuit is a simple circuit that contains every edge of G.</li> <li></li> <li> <p>Euler path judge. </p> </li> <li> <p>Definition: A Hamilton path in a graph G is a simple path that contains every vertex of G.\\(V = \\{v_1, v_2, \\dots, v_n\\}\\), then \\(v_1, v_2, \\dots, v_n\\) is a Hamilton path if and only if \\(\\{v_1, v_2\\}, \\{v_2, v_3\\}, \\dots, \\{v_{n-1}, v_n\\}\\) are edges of G.</p> <p>Remark: A Hamilton circuit in a graph G is a simple circuit that contains every vertex of G.</p> </li> </ol>"},{"location":"ZJU_CS/Discrete%20math/note/#85_planar_graphs","title":"8.5 Planar Graphs","text":"<ol> <li>Definition: A graph is planar if it can be drawn in the plane without any edges crossing.</li> <li>Theorem: Euler Formula -&gt; Let \\(G = (V,E)\\) be a connected planar graph with \\(n\\) vertices, \\(m\\) edges and \\(r\\) regions. Then \\(n - m + r = 2\\). </li> </ol>"},{"location":"ZJU_CS/Discrete%20math/note/#86_coloring_graphs","title":"8.6 Coloring Graphs","text":""},{"location":"ZJU_CS/Discrete%20math/note/#chapter_9_trees","title":"Chapter 9 Trees","text":"<p>\u672c\u7ae0\u548cfds\u5b66\u4e60\u7684\u5185\u5bb9\u57fa\u672c\u76f8\u4f3c\u3002</p> glosssary \u82f1\u6587 \u4e2d\u6587 \u6570\u5b66\u7b26\u53f7\u6216\u542b\u4e49 ancestor \u7956\u5148 descendant \u540e\u4ee3 siblings \u5144\u5f1f"},{"location":"ZJU_CS/Discrete%20math/note/#91_introduction_to_trees","title":"9.1 Introduction to Trees","text":"<ol> <li>Definition: A tree is a connected undirected graph with no cycles.(simple circuit)</li> <li>Definition: A forest is a undirected graph with no cycles.</li> <li>m-ary tree: A tree in which every internal vertex has no more than m children.</li> <li>full m-ary tree: A m-ary tree in which every internal vertex has exactly m children.(which has i internal vertices) <p>Attributes: 1. contains \\(n = mi + 1\\) vertices 2. contains \\(l = [(m-1)n +1]/m\\) leaves. 3. height \\(h \\ge [log_m^l]\\), if full and balanced, \\(h = [log_m^l]\\)</p> </li> <li>ordered rooted tree: A rooted tree in which the children of each internal vertex are ordered.</li> </ol>"},{"location":"ZJU_CS/Discrete%20math/note/#92_applications_of_trees","title":"9.2 applications of trees","text":"<ol> <li>balanced tree: A tree is balanced if all its leaves are at h or h-1 level.</li> <li>prefix code: can be represented using a binary tree in which no codeword is a prefix of another codeword.(Huffman code)</li> <li>decision tree: A decision tree is a rooted tree in which each internal vertex corresponds to a decision, with a subtree for each possible outcome of the decision.</li> <li>tree traversal: preorder, inorder, postorder.</li> </ol>"},{"location":"ZJU_CS/Discrete%20math/note/#93_spanning_trees","title":"9.3 Spanning Trees","text":"<ol> <li>Definition: A spanning tree of a connected graph \\(G\\) is a subgraph of \\(G\\) that is a tree containing every vertex of \\(G\\).</li> <li>minimum spanning tree: A spanning tree of a weighted graph \\(G\\) with weight function \\(w\\) is a spanning tree with minimum weight. <p>Kruskal's algorithm: 1. Sort the edges of \\(G\\) in increasing order of weight. 2. Add the edges to \\(T\\) in increasing order of weight, unless doing so would create a cycle. Prim's algorithm: 1. Choose a vertex \\(v\\) to start the tree. 2. Add the edge of least weight incident with \\(v\\) to the tree. 3. Repeat step 2 until all vertices are in the tree.</p> </li> </ol>"},{"location":"ZJU_CS/FDS/","title":"Index","text":""},{"location":"ZJU_CS/FDS/#fds","title":"FDS","text":"<p>\u8fd9\u91cc\u662f\u6d59\u6c5f\u5927\u5b6623-24Fall\u9648\u8d8a\u8001\u5e08\u6570\u636e\u7ed3\u6784\u57fa\u7840\u7684\u7b14\u8bb0\u3002\u4ec5\u4f9b\u53c2\u8003\uff01</p> <p>\u6458\u8981</p> \u5fc3\u5f97\u5b66\u4e60\u8d44\u6e90 <ol> <li>\u672c\u4eba\u5b66\u4e60\u4ece\u672a\u542c\u8fc7\u8bfeor\u770b\u8fc7\u4e66\uff0c\u5168\u4e3a\u81ea\u5b66\u5b8c\u6210\u3002\u57fa\u672c\u4e0a\u8ddf\u7740\u6559\u5b66\u8fdb\u5ea6\u6bcf\u5468\u8fdb\u884c\u5b66\u4e60\u4e0d\u4f1a\u6709\u592a\u5927\u96be\u5ea6\u7684\u3002</li> <li>\u6b64\u5916\u4fbf\u662f\u8001\u751f\u5e38\u8c08\u7684\u201c\u5e94\u8bd5\u6559\u80b2\u201d\uff0c\u5bf9\u4e8efds\u8fd9\u95e8\u8bfe\u7a0b\uff0c\u5237\u9898\u662f\u5341\u5206\u6709\u5fc5\u8981\u7684\u3002</li> </ol> <ol> <li>\u8fd9\u91cc\u63a8\u8350\u4e00\u4e2a\u975e\u5e38\u597d\u7684\u5f00\u6e90\u7b97\u6cd5\u4e66hello-algo\u3002\u5b66\u671f\u518580%\u7684\u5185\u5bb9\u6211\u90fd\u662f\u901a\u8fc7\u8fd9\u4e2a\u7f51\u7ad9\u5b66\u4e60\uff0c\u7136\u540e\u901a\u8fc7\u4f5c\u4e1a\u67e5\u6f0f\u8865\u7f3a</li> </ol>"},{"location":"ZJU_CS/FDS/algorithm/","title":"\u7b97\u6cd5\u5206\u6790","text":"<p>\u4e00\u4e2a\u7b97\u6cd5(algorithm) \u662f\u4e3a\u4e86\u5b9e\u73b0\u7279\u5b9a\u4efb\u52a1\u7684\u4e00\u4e2a\u6709\u9650\u6761\u6307\u4ee4\u7684\u96c6\u5408</p> <p>\u7b97\u6cd5\u6ee1\u8db3\u8fd9\u4e9b\u6027\u8d28\uff1a </p> <ul> <li>Input</li> <li>Output</li> <li>Definiteness</li> <li>Finiteness</li> <li>Effectiveness</li> </ul> <p>Note: program \u53ef\u4ee5\u4e0d finite(e.g. \u64cd\u4f5c\u7cfb\u7edf)</p>"},{"location":"ZJU_CS/FDS/algorithm/#_2","title":"\u5206\u6790\u5185\u5bb9","text":"<ul> <li>\u8fd0\u884c\u65f6\u95f4\uff1a\u4e0e\u673a\u5668\u3001\u7f16\u8bd1\u5668\u6709\u5173</li> <li>\u65f6\u95f4 &amp; \u7a7a\u95f4\u590d\u6742\u5ea6\uff1a\u4e0e\u673a\u5668\u3001\u7f16\u8bd1\u5668\u65e0\u5173</li> </ul> <p>\u5047\u8bbe\uff1a</p> <ul> <li>\u6307\u4ee4\u6309\u987a\u5e8f\u6267\u884c</li> <li>\u6bcf\u6761\u6307\u4ee4\u662f\u7b80\u5355\u7684\uff0c\u53ea\u9700\u8981\u4e00\u4e2a\u65f6\u95f4\u5355\u4f4d\u6267\u884c</li> <li>\u6570\u636e\u89c4\u6a21\u662f\u7ed9\u5b9a\u7684\uff0c\u800c\u7a7a\u95f4\u662f\u65e0\u9650\u7684</li> </ul> <p>\u901a\u5e38\u6211\u4eec\u9700\u8981\u5206\u6790 \\(T_{avg}(N) \\&amp; T_{worst}(N)\\), \\(N\\) \u662f\u8f93\u5165\u89c4\u6a21\uff08\u53ef\u4ee5\u6709\u591a\u4e2a\u8f93\u5165\uff09</p>"},{"location":"ZJU_CS/FDS/algorithm/#_3","title":"\u6e10\u8fdb\u7b26\u53f7","text":""},{"location":"ZJU_CS/FDS/algorithm/#_4","title":"\u5b9a\u4e49","text":"<p>\u5927 \\(O\\) \u8868\u793a\u6cd5 \\(T(N) = O(f(N))\\)\uff0c\u5982\u679c\u5b58\u5728\u5e38\u6570 \\(c\\) \u548c \\(n_0\\)\u200b\u4f7f\u5f97\u5f53 \\(N\\geq n_0\\) \u65f6 \\(T(N)\\leq c\\cdot f(N)\\) \u6e10\u8fdb\u4e0a\u754c\uff0c\u5373 \\(T(N)\\) \u7684\u9636\u4e0d\u4f1a\u9ad8\u4e8e \\(f(N)\\)\uff08\u589e\u957f\u6bd4 \\(f(N)\\) \u6162\u6216\u76f8\u540c\uff0c\\(\\leq\\)\uff09</p> <p>\u5927 \\(\\Omega\\) \u8868\u793a\u6cd5 \\(T(N) = \\Omega(g(N))\\)\uff0c\u5982\u679c\u5b58\u5728\u5e38\u6570 \\(c\\) \u548c \\(n_0\\)\u200b\u4f7f\u5f97\u5f53 \\(N\\geq n_0\\) \u65f6 \\(T(N)\\geq c\\cdot f(N)\\) \u6e10\u8fdb\u4e0b\u754c\uff0c\u5373 \\(T(N)\\) \u7684\u9636\u4e0d\u4f1a\u4f4e\u4e8e \\(f(N)\\)\uff08\u589e\u957f\u6bd4 \\(f(N)\\) \u5feb\u6216\u76f8\u540c\uff0c\\(\\geq\\)\uff09</p> <p>\u5927 \\(\\Theta\\) \u8868\u793a\u6cd5 \\(T(N) = \\Theta(h(N))\\)\uff0c\u5f53\u4e14\u4ec5\u5f53 \\(T(N) = O(h(N))\\) \u4e14 \\(T(N) = \\Omega(h(N))\\) \u6e10\u8fdb\u7d27\u786e\u754c\uff0c\u5373 \\(T(N)\\) \u4e0e \\(h(N)\\) \u540c\u9636\uff08\u589e\u957f\u901f\u5ea6\u76f8\u540c\uff0c\\(=\\))</p> <p>\u5c0f \\(o\\) \u8868\u793a\u6cd5 \\(T(N) = o(p(N))\\)\uff0c\u5f53 \\(T(N)=O(p(N))\\) \u4e14 \\(T(N)\\neq \\Theta(p(N))\\) \u65f6\u6210\u7acb \u975e\u6e10\u8fdb\u7d27\u786e\u4e0a\u754c\uff0c\uff08\u5373 \\(T(N)\\) \u589e\u957f\u6bd4 \\(p(N)\\)\u6162\uff0c\\(&lt;\\)\uff09</p> <p>\u5c0f \\(w\\) \u8868\u793a\u6cd5 \\(T(N) = w(p(N))\\)\uff0c\u5f53 \\(T(N)=\\Omega(p(N))\\) \u4e14 \\(T(N)\\neq \\Theta(p(N))\\) \u65f6\u6210\u7acb \u975e\u6e10\u8fdb\u7d27\u786e\u4e0b\u754c\uff0c\uff08\u5373 \\(T(N)\\) \u589e\u957f\u6bd4 \\(p(N)\\)\u5feb\uff0c\\(&gt;\\)\uff09</p>"},{"location":"ZJU_CS/FDS/algorithm/#_5","title":"\u8fd0\u7b97\u89c4\u5219","text":"<ul> <li>\u82e5 \\(T_1(N)=O(f(N)), T_2(N)=O(g(N))\\) <ul> <li>\\(T_1(N)+T_2(N)=\\max(O(f(N)), O(g(N))\\)</li> <li>\\(T_1(N)\\cdot T_2(N)=O(f(N)\\cdot g(N))\\)</li> </ul> </li> <li>\u82e5 \\(T(N)\\) \u662f\u6700\u9ad8\u6b21\u6570\u4e3a k \u6b21\u7684\u591a\u9879\u5f0f\uff0c\u90a3\u4e48 \\(T(N)=\\Theta ((N^k))\\) </li> <li>\u5bf9\u4e8e\u4efb\u610f\u5e38\u6570 \\(k\\), \u90fd\u6709 \\(\\log^kN=O(N)\\)\uff0c\u8fd9\u8bf4\u660e\u5bf9\u589e\u957f\u975e\u5e38\u7f13\u6162\u3002</li> <li>\u5206\u6790\u65f6\u7684\u89c4\u5219<ul> <li>for loop \u8fd0\u884c\u65f6\u95f4\u662f\u5faa\u73af\u5185\u90e8\u8bed\u53e5\u7684\u6700\u957f\u65f6\u95f4\uff08\u5305\u62ec for \u8fb9\u754c\u5224\u65ad\uff09\u4e58\u5faa\u73af\u7684\u6b21\u6570</li> <li>\u5d4c\u5957 for loop \u8fd0\u884c\u65f6\u95f4\u662f\u5404\u4e2a for loop \u7684\u8fd0\u884c\u65f6\u95f4\u9010\u6b21\u76f8\u4e58</li> <li>\u8fde\u7eed\u6267\u884c\u7684\u8bed\u53e5 \u76f8\u52a0</li> <li>if else \u8fd0\u884c\u65f6\u95f4\u4e0d\u4f1a\u8d85\u8fc7\u5224\u65ad\u65f6\u95f4\u52a0\u4e0a\u7528\u65f6\u6700\u591a\u7684\u8bed\u53e5\u5757\u7684\u65f6\u95f4</li> </ul> </li> </ul>"},{"location":"ZJU_CS/FDS/exam/","title":"Exam","text":""},{"location":"ZJU_CS/FDS/exam/#_1","title":"\u5386\u5e74\u5377","text":""},{"location":"ZJU_CS/FDS/exam/#_2","title":"\u5224\u65ad\u9898","text":"<ol> <li>In a graph G, if we have to do BFS twice to visit every one of its vertices, then there must be a cycle in G. (F) \uff08\u53cd\u4f8b\uff1a\u4e8c\u5206\u56fe\uff09 \uff08However\uff0cDFS is true\uff09</li> </ol>"},{"location":"ZJU_CS/FDS/exam/#_3","title":"\u9009\u62e9\u9898","text":"<ol> <li>\u7528\u6808\u6765\u6a21\u62df\u4e2d\u5e8f\u5386\u904d</li> </ol>"},{"location":"ZJU_CS/FDS/exam/#_4","title":"\u7a0b\u5e8f\u586b\u7a7a\u9898","text":""},{"location":"ZJU_CS/FDS/exam/#quiz_4","title":"Quiz 4","text":"<ol> <li>\u5806\u7684\u7efc\u5408\u8003\u5bdf\uff1a     </li> </ol> \u5927\u9876\u5806\u8f6c\u5c0f\u9876\u5806\u7684\u7ebf\u6027\u65b9\u6cd5 <p>\u5c06\u4e00\u4e2a\u5927\u9876\u5806\u8f6c\u6362\u4e3a\u5c0f\u9876\u5806\u7684\u7ebf\u6027\u7b97\u6cd5\u53ef\u4ee5\u901a\u8fc7\u4e00\u79cd\u79f0\u4e3a\"Heapify\"\u7684\u8fc7\u7a0b\u6765\u5b9e\u73b0\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u53ef\u4ee5\u5728\u7ebf\u6027\u65f6\u95f4\u5185\u5b8c\u6210\uff0c\u5177\u4f53\u6b65\u9aa4\u5982\u4e0b\uff1a - \u4ece\u5927\u9876\u5806\u7684\u6700\u540e\u4e00\u4e2a\u975e\u53f6\u5b50\u8282\u70b9\u5f00\u59cb\uff0c\u4f9d\u6b21\u5411\u524d\u904d\u5386\u6bcf\u4e2a\u8282\u70b9\u3002 - \u5bf9\u4e8e\u6bcf\u4e2a\u8282\u70b9\uff0c\u6bd4\u8f83\u5b83\u4e0e\u5176\u5b50\u8282\u70b9\u7684\u503c\uff0c\u627e\u5230\u5176\u4e2d\u6700\u5c0f\u7684\u503c\u3002 - \u5982\u679c\u5b50\u8282\u70b9\u7684\u503c\u66f4\u5c0f\uff0c\u5c31\u4ea4\u6362\u8282\u70b9\u548c\u5b50\u8282\u70b9\u7684\u503c\u3002 - \u7ee7\u7eed\u5411\u524d\u904d\u5386\uff0c\u76f4\u5230\u5806\u9876\uff0c\u8fd9\u6837\u5c31\u80fd\u591f\u5c06\u6574\u4e2a\u5927\u9876\u5806\u8f6c\u6362\u4e3a\u5c0f\u9876\u5806\u3002</p>"},{"location":"ZJU_CS/FDS/exam/#mid-term","title":"Mid-term","text":"<ol> <li>\u4e00\u822c\u6765\u8bf4\uff0c\u5728N\u8f83\u5c0f\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4f1a\u9009\u62e9\\(O(N^2)\\)\u7684\u7b97\u6cd5\uff0c\u800c\u5728N\u8f83\u5927\u7684\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u4f1a\u9009\u62e9\\(O(NlogN)\\)\u7684\u7b97\u6cd5\u3002\u56e0\u6b64\uff0c\u5e76\u4e0d\u662f\u6240\u6709\u60c5\u51b5\u4e0b\\(O(N^2)\\)\u7684\u7b97\u6cd5\u90fd\u6bd4\\(O(NlogN)\\)\u7684\u7b97\u6cd5\u5feb.</li> <li>The answer is true. Because the depth of the set must be less than \\(O(logN)\\).    </li> <li></li> <li>Partial order is a precedence relation which is both transitive and irreflexive.</li> </ol>"},{"location":"ZJU_CS/FDS/graph/","title":"\u56fe\u8bba","text":""},{"location":"ZJU_CS/FDS/graph/#_2","title":"\u5b9a\u4e49","text":"<ul> <li> <p>\u4e00\u4e2a\u56fe \\(G=(V,E)\\) \u5176\u4e2d \\(V\\) \u662f\u8282\u70b9\u7684\u6709\u9650\u975e\u7a7a\u96c6\u5408, \\(E\\) \u662f\u8fb9\u7684\u6709\u9650\u975e\u7a7a\u96c6\u5408. \u6bcf\u4e00\u6761\u8fb9\u5c31\u662f\u4e00\u4e2a\u70b9\u5bf9 \\((v,w)\\).  </p> <ul> <li>\u65e0\u5411\u56fe: \\((v_i,v_j)=(v_j,v_i)\\) \u8868\u793a\u540c\u4e00\u6761\u8fb9</li> <li>\u6709\u5411\u56fe: \\((v_i,v_j)\\neq (v_j,v_i)\\) \u5176\u4e2d \\((v_i,v_j)\\) \u8868\u793a\u7531 \\(v_i\\) (tail) \u6307\u5411 \\(v_j\\) (head) \u7684\u4e00\u6761\u8fb9\u3002</li> <li>\u9650\u5236\uff1a\u81ea\u73af\u662f\u4e0d\u5408\u6cd5\u7684\uff0c\u540c\u65f6\u6211\u4eec\u4e0d\u8003\u8651\u591a\u91cd\u56fe </li> <li>\u5bf9\u4e8e \\((v_i,v_j)\\) \u8fd9\u6761\u8fb9\uff0c\u6211\u4eec\u79f0 \\(v_i,v_j\\) \u662f\u90bb\u63a5\u7684(adjacent), \u79f0 \\((v_i,v_j)\\) \u9644\u5c5e\u4e8e(incident) \\(v_i/v_j\\)</li> <li>\u5b8c\u5168\u56fe: \u6bcf\u4e00\u5bf9\u8282\u70b9\u95f4\u90fd\u5b58\u5728\u4e00\u6761\u8fb9\u7684\u56fe  </li> <li>\u5b50\u56fe: \\(G'\\sub G\\) \u5373 \\(G'\\) \u4e2d\u7684\u70b9\u548c\u8fb9\u90fd\u5305\u542b\u5728 G \u4e2d(\\(V(G')\\sube V(G)\\quad E(G')\\sube E(G)\\))  </li> <li>\u8def\u5f84: \\(\\{v_p,v_{i1},v_{i2},\\ldots, v_{in},v_q\\}((v_i,v_i)\\in E)\\) \u79f0\u4e3a\u4ece \\(v_p\\) \u5230 \\(v_q\\) \u7684\u4e00\u6761\u8def\u5f84</li> <li>\u8def\u5f84\u7684\u957f\u5ea6\uff1a\u8def\u5f84\u7ecf\u8fc7\u7684\u8fb9\u7684\u6570\u91cf</li> <li>\u7b80\u5355\u8def\u5f84: \\(v_{i1},v_{i2}...\\) \u5404\u4e0d\u76f8\u540c(\u6ce8\u610f\u7b2c\u4e00\u4e2a\u70b9\u53ef\u4ee5\u548c\u6700\u540e\u4e00\u4e2a\u70b9\u76f8\u540c)</li> <li>\u5708: \\(v_p=v_q\\) \u7684\u7b80\u5355\u8def\u5f84</li> <li>\u5982\u679c\u4e00\u4e2a\u65e0\u5411\u56fe\u4e2d\u6bcf\u4e00\u4e2a\u9876\u70b9\u5230\u53e6\u4e00\u4e2a\u5176\u4ed6\u9876\u70b9\u90fd\u5b58\u5728\u4e00\u6761\u8def\u5f84\uff0c\u90a3\u4e48\u65e0\u5411\u56fe\u662f\u8fde\u901a\u7684\u3002\u5177\u6709\u8fd9\u6837\u6027\u8d28\u7684\u6709\u5411\u56fe\u79f0\u4e3a\u5f3a\u8fde\u901a\u3002\u5982\u679c\u6709\u5411\u56fe\u4e0d\u662f\u5f3a\u8fde\u901a\uff0c\u4f46\u4ed6\u7684\u57fa\u7840\u56fe\uff08\u8fb9\u53bb\u6389\u65b9\u5411\u6240\u5f62\u6210\u7684\u56fe\uff09\u662f\u8fde\u901a\u7684\uff0c\u90a3\u4e48\u79f0\u4e3a\u5f31\u8054\u901a\u3002</li> <li>DAG: Directed Acyclic Graph(\u6709\u5411\u65e0\u73af\u56fe)\uff0c\u6811\u662f\u8fde\u901a\u7684\u6709\u5411\u65e0\u73af\u56fe  </li> <li>\u5ea6\u6570: \u9644\u5c5e\u4e8e \\(v\\) \u7684\u8fb9\u7684\u6570\u91cf\u3002\u5bf9\u4e8e\u4e00\u4e2a\u6709\u5411\u56fe\uff0c\u8fd8\u5206\u4e3a\u51fa\u5ea6\u548c\u5165\u5ea6\u3002\u7ed9\u4e00\u4e2a \\(n\\) \u4e2a\u8282\u70b9\u7684\u56fe \\(G\\), \u6211\u4eec\u6709 \\(e=\\dfrac{\\sum\\limits_{i=0}^{n-1}d_i}{2}\\) \uff08\u5176\u4e2d \\(d_i=degree(v_i)\\)</li> </ul> </li> </ul>"},{"location":"ZJU_CS/FDS/graph/#_3","title":"\u56fe\u7684\u8868\u793a","text":""},{"location":"ZJU_CS/FDS/graph/#_4","title":"\u90bb\u63a5\u77e9\u9635","text":"\\[ adj\\_mat[i][j]=\\left\\{ \\begin{matrix} 1\\quad if\\ (v_i,v_j)\\ or\\ &lt;v_i,v_j&gt;\\in E(G)\\\\ 0\\quad \\quad \\quad \\quad \\quad \\quad  \\quad \\quad \\quad \\ \\ \\ otherwise \\end{matrix} \\right. \\] <p>\u5982\u679c \\(G\\) \u662f\u65e0\u5411\u56fe\uff0c\u90a3\u4e48\u90bb\u63a5\u77e9\u9635\u662f\u5bf9\u79f0\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u53ea\u5b58\u4e00\u534a\u7684\u6570\u636e\u3002</p> <p>\\(deg(i)=\\sum\\limits_{j=0}^{n-1}adj\\_mat[i][j]+\\sum\\limits_{j=0}^{n-1}adj\\_mat[j][i]\\)</p> <p>\u4f46\u8fd9\u6837\u7684\u7a7a\u95f4\u9700\u6c42\u662f \\(\\Theta(|V|^2)\\), \u5bf9\u4e8e\u975e\u7a20\u5bc6\u56fe\u5f00\u9500\u592a\u5927\u3002</p>"},{"location":"ZJU_CS/FDS/graph/#_5","title":"\u90bb\u63a5\u8868","text":"<p>\u5bf9\u6bcf\u4e00\u4e2a\u9876\u70b9\uff0c\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u94fe\u8868\u5b58\u653e\u5176\u6240\u6709\u90bb\u63a5\u7684\u9876\u70b9\uff0c\u6b64\u65f6\u7684\u7a7a\u95f4\u9700\u6c42\u4e3a \\(O(|E|+|V|)\\)</p> <p>\u5728\u65e0\u5411\u56fe\u4e0a\uff0c\u6bcf\u6761\u8fb9 \\((u,v)\\) \u51fa\u73b0\u5728\u4e24\u4e2a\u8868\u4e2d\uff0c\u56e0\u6b64\u7a7a\u95f4\u7684\u4f7f\u7528\u662f\u53cc\u500d\u7684\uff0c$S=n heads + 2e edges $</p> <p>\u5728\u65e0\u5411\u56fe\u4e2d\uff0c\\(v\\) \u7684\u5ea6\u6570\u5c31\u662f \\(graph[v]\\) \u4e2d\u7684\u8282\u70b9\u4e2a\u6570\u3002\u5982\u679c \\(G\\) \u662f \u6709\u5411\u56fe\uff0c\u8fd9\u6837\u53ea\u80fd\u627e\u5230\u51fa\u5ea6\uff0c\u5bf9\u4e8e\u5165\u5ea6\uff0c\u6211\u4eec\u6709\u4e24\u79cd\u65b9\u6cd5:</p> <ul> <li>\u589e\u52a0\u4e00\u4e2a\u94fe\u8868\uff0c\u5c06\u8fb9\u53cd\u5411\u5e76\u5b58\u5165 </li> <li>\u4f7f\u7528\u591a\u91cd\u8868</li> </ul>"},{"location":"ZJU_CS/FDS/graph/#_6","title":"\u90bb\u63a5\u591a\u91cd\u8868\u5217","text":""},{"location":"ZJU_CS/FDS/graph/#_7","title":"\u62d3\u6251\u6392\u5e8f","text":"<ul> <li>AOV \u7f51\u7edc\uff1a\u6709\u5411\u56fe\u4e2d\uff0c\u7528\u9876\u70b9\u8868\u793a\u6d3b\u52a8\uff0c\u7528\u5f27\u8868\u793a\u6d3b\u52a8\u4e4b\u95f4\u7684\u4f18\u5148\u5173\u7cfb</li> <li>\u5728\u6709\u5411\u56fe\u4e2d\uff0c\u6211\u4eec\u79f0 \\(i\\) \u662f \\(j\\) \u7684\u524d\u9a71\uff0c\u5982\u679c\u5b58\u5728\u4e00\u6761\u4ece \\(i\\) \u5230 \\(j\\) \u7684\u8def\u5f84  </li> <li>\u6211\u4eec\u79f0 \\(i\\) \u662f \\(j\\) \u7684\u76f4\u63a5\u524d\u9a71\uff0c\u5982\u679c \\(&lt;i,j&gt;\\in E(G)\\). \u540c\u65f6 \\(j\\) \u79f0\u4e3a \\(i\\) \u7684\u76f4\u63a5\u540e\u7ee7</li> </ul> <p>\u53ef\u5b9e\u73b0\u7684 AOV \u7f51\u7edc\u4e00\u5b9a\u662f DAG.  </p> <p>\u62d3\u6251\u6392\u5e8f\u662f\u5bf9\u6709\u5411\u65e0\u73af\u56fe\u7684\u9876\u70b9\u7684\u4e00\u79cd\u6392\u5e8f\uff0c\u5b83\u4f7f\u5f97\u5982\u679c \\(i\\) \u662f \\(j\\) \u7684\u524d\u9a71\uff0c\u90a3\u4e48\u5728\u62d3\u6251\u5e8f\u5217\u4e2d \\(i\\) \u4e00\u5b9a\u51fa\u73b0\u5728 \\(j\\) \u7684\u524d\u9762\u3002</p> <p>\u5b9e\u73b0\u601d\u8def\uff1a\u5728\u5bb9\u5668\u4e2d\uff08\u961f\u5217/\u6808\uff09\u653e\u672a\u88ab\u6392\u5e8f\u4e14\u5ea6\u6570\u4e3a 0 \u7684\u8282\u70b9</p> <pre><code>void Topsort( Graph G )\n{   Queue  Q;\n    int  Counter = 0;\n    Vertex  V, W;\n    Q = CreateQueue( NumVertex );  MakeEmpty( Q );\n    for ( each vertex V )\n    if ( Indegree[ V ] == 0 )   Enqueue( V, Q );\n    while ( !IsEmpty( Q ) ) {\n    V = Dequeue( Q );\n    TopNum[ V ] = ++ Counter; /* assign next */\n    for ( each W adjacent to V )\n        if ( \u2013 \u2013 Indegree[ W ] == 0 )  Enqueue( W, Q );\n    }  /* end-while */\n    if ( Counter != NumVertex )\n    Error( \u201cGraph has a cycle\u201d );\n    DisposeQueue( Q ); /* free memory */\n}\n</code></pre> <p>Note</p> <p>\u62d3\u6251\u6392\u5e8f\u53ef\u80fd\u4e0d\u662f\u552f\u4e00\u7684</p>"},{"location":"ZJU_CS/FDS/graph/#_8","title":"\u6700\u77ed\u8def","text":"<p>\u7ed9\u5b9a\u6709\u5411\u56fe \\(G=(V,E)\\) \u4ee5\u53ca\u4e00\u4e2a\u82b1\u8d39\u51fd\u6570 \\(c(e), e\\in E(G)\\). \u4ece\u6e90\u70b9\u5230\u7ec8\u70b9\u7684\u4e00\u6761\u8def\u5f84 \\(P\\) \u7684\u957f\u5ea6\u5b9a\u4e49\u4e3a \\(\\sum\\limits_{e_i\\sub P}c(e_i)\\) \uff08\u4e5f\u79f0\u4e3a\u5e26\u6743\u8def\u5f84\u957f\uff09 </p>"},{"location":"ZJU_CS/FDS/graph/#_9","title":"\u5355\u6e90\u6700\u77ed\u8def\u5f84","text":"<p>\u7ed9\u5b9a\u4e00\u4e2a\u8d4b\u6743\u56fe\u548c\u4e00\u4e2a\u7279\u5b9a\u9876\u70b9 \\(s\\) \u4f5c\u4e3a\u8f93\u5165\uff0c\u627e\u51fa\u4ece \\(s\\) \u5230 \\(G\\) \u4e2d\u6bcf\u4e00\u4e2a\u5176\u4ed6\u9876\u70b9\u7684\u6700\u77ed\u5e26\u6743\u8def\u5f84\u3002 \u6ce8\u610f: \u5982\u679c\u8fd9\u91cc\u6709\u8d1f\u73af\uff0c\u90a3\u4e48\u6700\u77ed\u8def\u5f84\u5b9a\u4e49\u4e3a 0. </p>"},{"location":"ZJU_CS/FDS/graph/#_10","title":"\u65e0\u6743\u6700\u77ed\u8def\u5f84","text":"<p>\u91c7\u7528 BFS(Breadth-First Search) \u7684\u65b9\u5f0f\uff0c\u4ece \\(s\\) \u51fa\u53d1\u5bfb\u627e\u6240\u6709\u8ddd\u79bb\u4e3a 1 \u7684\u9876\u70b9(\u5373\u4e0e \\(s\\) \u90bb\u63a5)\u968f\u540e\u5bfb\u627e\u4e0e \\(s\\) \u8ddd\u79bb\u4e3a 2 \u7684\u9876\u70b9\uff0c\u5373\u4e0e\u521a\u521a\u90a3\u4e9b\u9876\u70b9\u90bb\u63a5\u7684\u9876\u70b9\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</p> <pre><code>void Unweighted( Table T )\n{   /* T is initialized with the source vertex S given */\n    Queue  Q;\n    Vertex  V, W;\n    Q = CreateQueue (NumVertex );  MakeEmpty( Q );\n    Enqueue( S, Q ); /* Enqueue the source vertex */\n    while ( !IsEmpty( Q ) ) {\n        V = Dequeue( Q );\n        T[ V ].Known = true; /* not really necessary */\n        for ( each W adjacent to V )\n    if ( T[ W ].Dist == Infinity ) {\n        T[ W ].Dist = T[ V ].Dist + 1;\n        T[ W ].Path = V;\n        Enqueue( W, Q );\n    } /* end-if Dist == Infinity */\n    } /* end-while */\n    DisposeQueue( Q ); /* free memory */\n}\n</code></pre>"},{"location":"ZJU_CS/FDS/graph/#dijkstra","title":"Dijkstra \u7b97\u6cd5","text":"<p>\u4ee4 S \u8868\u793a\u6e90\u70b9 s \u4ee5\u53ca\u5176\u4ed6\u5df2\u7ecf\u627e\u5230\u6700\u77ed\u8def\u7684\u8282\u70b9\u7684\u96c6\u5408\uff0c\u5bf9\u4e8e\u4e0d\u5728 S \u96c6\u5408\u4e2d\u7684\u8282\u70b9 u, \u6211\u4eec\u5b9a\u4e49 \\(dist[u]\\) \u8868\u793a\u6700\u77ed\u7684\u8def\u5f84\u957f\u5ea6\uff0c\u5176\u4e2d\u8def\u5f84\u662f\u4ece \\(s\\rightarrow v_i\\rightarrow u(v_i\\in S)\\). \u5982\u679c\u8def\u5f84\u662f\u975e\u964d\u5e8f\u751f\u6210\u7684\uff0c\u90a3\u4e48</p> <ul> <li>\u6700\u77ed\u8def\u5f84\u4e00\u5b9a\u662f\u4ece \\(S\\) \u4e2d\u7684\u67d0\u4e2a\u70b9 \\(v_i\\) \u5230 \\(u\\).  </li> <li>\\(dist[u]=\\min\\{w\\notin S\\ |\\ dist[w]\\}\\). \u5373\u6211\u4eec\u4ece \\(S\\) \u4e4b\u5916\u7684\u8282\u70b9\u4e2d\u9009\u62e9 \\(dist[u]\\) \u6700\u5c0f\u7684\u4f5c\u4e3a\u4e0b\u4e00\u4e2a \\(u\\).  </li> <li>\u5982\u679c \\(dist[u_1]&lt;dist[u_2]\\) \u540c\u65f6\u6211\u4eec\u5c06 \\(u_1\\) \u52a0\u5165\u4e86 \\(S\\), \u90a3\u4e48 \\(dist[u_2]\\) \u53ef\u80fd\u4f1a\u6539\u53d8\uff0c\u5982\u679c\u6539\u53d8\u4e86\uff0c\u90a3\u4e48 \\(dist[u_2]=dist[u_1]+length&lt;u_1,u_2&gt;\\).  </li> </ul> <pre><code>void Dijkstra( Table T )\n{   /* T is initialized by Figure 9.30 on p.303 */\n    Vertex  V, W;\n    for ( ; ; ) { /* O( |V| ) */\n        V = smallest unknown distance vertex;\n        if ( V == NotAVertex )\n    break; \n        T[ V ].Known = true;\n        for ( each W adjacent to V )\n    if ( !T[ W ].Known ) \n        if ( T[ V ].Dist + Cvw &lt; T[ W ].Dist ) {\n            Decrease( T[ W ].Dist  to\n             T[ V ].Dist + Cvw );\n        T[ W ].Path = V;\n        } /* end-if update W */\n    } /* end-for( ; ; ) */\n}\n/* not work for edge with negative cost  */\n</code></pre> <p>\u603b\u7684\u8fd0\u884c\u65f6\u95f4 \\(O(|E|+|V|^2)\\) </p> <p>\u5177\u4f53\u5b9e\u73b0:</p> <ul> <li>\u901a\u8fc7\u626b\u63cf\u6574\u4e2a\u8868\u6765\u627e\u5230 smallest unknown distance vertex - \\(O(|V|^2+|E|)\\) \uff08\u5f53\u56fe\u662f\u7a20\u5bc6\u7684\u65f6\u5019\uff0c\u8fd9\u79cd\u65b9\u6cd5\u662f\u597d\u7684\uff09</li> <li>\u4f7f\u7528\u5806\u3002\u9996\u5148\u6211\u4eec <code>DeleteMin</code>, \u968f\u540e\u53ef\u4ee5 <code>DecreaseKey</code> \u6765\u8fdb\u884c\u66f4\u65b0\uff0c\u8fd9\u6837\u6211\u4eec\u9700\u8981\u8bb0\u5f55 \\(d_i\\) \u7684\u503c\u5728\u5806\u4e2d\u7684\u4f4d\u7f6e\uff0c\u5f53\u5806\u53d1\u751f\u53d8\u5316\u65f6\u6211\u4eec\u4e5f\u9700\u8981\u66f4\u65b0\uff1b\u53e6\u4e00\u79cd\u65b9\u5f0f\u662f\u5728\u6bcf\u6b21\u66f4\u65b0\u540e\u5c06 \\(w\\) \u548c\u65b0\u503c \\(d_w\\) \u63d2\u5165\u5806\uff0c\u8fd9\u6837\u5806\u4e2d\u53ef\u80fd\u6709\u540c\u4e00\u9876\u70b9\u7684\u591a\u4e2a\u4ee3\u8868\u3002\u5f53\u5220\u9664\u6700\u5c0f\u503c\u7684\u65f6\u5019\u9700\u8981\u68c0\u67e5\u8fd9\u4e2a\u70b9\u662f\u4e0d\u662f\u5df2\u7ecf\u77e5\u9053\u7684\u3002</li> </ul>"},{"location":"ZJU_CS/FDS/graph/#_11","title":"\u8d1f\u6743\u8fb9\u7684\u56fe","text":"<pre><code>void  WeightedNegative( Table T )\n{   /* T is initialized by Figure 9.30 on p.303 */\n    Queue  Q;\n    Vertex  V, W;\n    Q = CreateQueue (NumVertex );  MakeEmpty( Q );\n    Enqueue( S, Q ); /* Enqueue the source vertex */\n    while ( !IsEmpty( Q ) ) { /* each vertex can dequeue at most |V| times */\n        V = Dequeue( Q );\n        for ( each W adjacent to V )\n    if ( T[ V ].Dist + Cvw &lt; T[ W ].Dist ) {\n        T[ W ].Dist = T[ V ].Dist + Cvw;\n        T[ W ].Path = V;\n        if ( W is not already in Q )\n            Enqueue( W, Q );\n    } /* end-if update */\n    } /* end-while */\n    DisposeQueue( Q ); /* free memory */\n}\n/* negative-cost cycle will cause indefinite loop */\n</code></pre>"},{"location":"ZJU_CS/FDS/graph/#_12","title":"\u65e0\u5708\u56fe","text":"<p>\u5982\u679c\u56fe\u662f\u65e0\u5708\u7684\uff0c\u6211\u4eec\u4ee5\u62d3\u6251\u5e8f\u9009\u62e9\u8282\u70b9\u6765\u6539\u8fdb\u7b97\u6cd5\u3002\u5f53\u9009\u62e9\u4e00\u4e2a\u9876\u70b9\u540e\uff0c\u6309\u7167\u62d3\u6251\u5e8f\u4ed6\u6ca1\u6709\u4ece\u672a\u77e5\u9876\u70b9\u53d1\u51fa\u7684\u8fdb\u5165\u8fb9\uff0c\u56e0\u6b64\u4ed6\u7684\u8ddd\u79bb\u4e0d\u53ef\u80fd\u518d\u964d\u4f4e\uff0c\u7b97\u6cd5\u5f97\u4ee5\u4e00\u6b21\u5b8c\u6210\u3002</p> <p>\\(T=O(|V|+|E|)\\) \u800c\u4e14\u4e0d\u9700\u8981\u5806</p> <p>\u5e94\u7528\uff1aAOE (Activity On Edge) \u7f51\u7edc</p> <p>Info</p> <p>digraph: \u6709\u5411\u56fe Multigraph: \u591a\u91cd\u56fe\uff0c\u5373\u6709\u91cd\u8fb9\u7684\u56fe  cycle: \u5708  underlying graph: \u57fa\u7840\u56fe   Adjacency Matrix: \u90bb\u63a5\u77e9\u9635   Adjacency Lists: \u90bb\u63a5\u8868 Adjacency Multilists: \u90bb\u63a5\u591a\u91cd\u8868\u5217  </p>"},{"location":"ZJU_CS/FDS/graph/#_13","title":"\u6700\u5927\u6d41","text":""},{"location":"ZJU_CS/FDS/graph/#_14","title":"\u6700\u5c0f\u751f\u6210\u6811","text":"<p>\u6700\u5c0f\u751f\u6210\u6811\uff08\u82f1\u8bed\uff1aMinimum spanning tree\uff0c\u7b80\u79f0MST\uff09\u662f\u6700\u5c0f\u6743\u91cd\u751f\u6210\u6811\uff08\u82f1\u8bed\uff1aMinimum weight spanning tree\uff09\u7684\u7b80\u79f0\uff0c\u662f\u4e00\u526f\u8fde\u901a\u52a0\u6743\u65e0\u5411\u56fe\u4e2d\u4e00\u68f5\u6743\u503c\u6700\u5c0f\u7684\u751f\u6210\u6811\u3002</p> <p>\u5728\u4e00\u7ed9\u5b9a\u7684\u65e0\u5411\u56fe \\(G=(V,E)\\) \u4e2d, \\((u,v)\\) \u4ee3\u8868\u8fde\u63a5\u9876\u70b9 u \u4e0e\u9876\u70b9 v \u7684\u8fb9, \u800c \\(w(u,v)\\) \u4ee3\u8868\u6b64\u8fb9\u7684\u6743\u91cd\uff0c\u82e5\u5b58\u5728 T \u4e3a E \u7684\u5b50\u96c6\uff08\u5373 \\(T \\subseteq  E\\) ) \u4e14 (V, T) \u4e3a\u6811\uff0c\u4f7f\u5f97\uff1a $$ w(T) = \\sum_{(u,v) \\in T}{w(u,v)} $$ \u7684 w(T) \u6700\u5c0f\uff0c\u5219\u6b64 T \u4e3a G \u7684\u6700\u5c0f\u751f\u6210\u6811\u3002</p>"},{"location":"ZJU_CS/FDS/graph/#prim","title":"Prim\u7b97\u6cd5","text":"<p>\u4e2a\u4eba\u8ba4\u4e3a\u8fd9\u4e2a\u7b97\u6cd5\u548c<code>dijkstra</code>\u6709\u975e\u5e38\u76f8\u4f3c\u7684\u5730\u65b9\uff0c\u5018\u82e5\u4f60\u5df2\u7ecf\u5f7b\u5e95\u7406\u89e3<code>dijkstra</code>\u7b97\u6cd5\u7684\u8bdd\uff0c\u76f8\u4fe1\u4f60\u4e00\u5b9a\u80fd\u5f88\u5feb\u6d1e\u6089\u5176\u4e2d\u7684\u9053\u7406\u3002</p>"},{"location":"ZJU_CS/FDS/graph/#kruskal","title":"Kruskal\u7b97\u6cd5","text":"<p>\u4e0ePrim\u7b97\u6cd5\u5c06\u70b9\u8bbe\u4e3a\u5bf9\u8c61\u4e0d\u540c\uff0cKruskal\u7b97\u6cd5\u662f\u5c06\u8fb9\u8bbe\u4e3a\u5bf9\u8c61 \u2014\u2014 \u5c06\u6240\u6709\u8fb9\u4ece\u5c0f\u5230\u5927\u6392\u5e8f\uff0c\u4f9d\u6b21\u52a0\u5165\u5230\u751f\u6210\u6811\u5f53\u4e2d\u3002</p>"},{"location":"ZJU_CS/FDS/hash/","title":"\u6563\u5217","text":""},{"location":"ZJU_CS/FDS/hash/#_2","title":"\u57fa\u672c\u601d\u60f3","text":"<p>\u7406\u60f3\u7684\u6563\u5217\u8868\u662f\u4e00\u4e2a\u542b\u6709\u5173\u952e\u5b57\u7684\u5177\u6709\u56fa\u5b9a\u5927\u5c0f\u7684\u6570\u7ec4\u3002</p> <p>ADT \u6a21\u578b</p> <ul> <li>\u5bf9\u8c61\uff1a\u4e00\u7ec4 \u540d\u79f0-\u5c5e\u6027 \u5bf9\uff0c\u5176\u4e2d\u540d\u79f0\u662f\u552f\u4e00\u7684\u3002</li> <li>\u64cd\u4f5c<ul> <li>\u521b\u5efa\u6563\u5217\u8868</li> <li>\u67e5\u8be2\u5173\u952e\u5b57\u662f\u5426\u5728\u6563\u5217\u8868\u4e2d</li> <li>\u67e5\u8be2\u5173\u952e\u5b57</li> <li>\u63d2\u5165\u5173\u952e\u5b57</li> <li>\u5220\u9664\u5173\u952e\u5b57</li> </ul> </li> </ul> <p>\u5bf9\u6bcf\u4e2a\u6807\u8bc6\u7b26 <code>x</code>, \u6211\u4eec\u5b9a\u4e49\u4e86\u4e00\u4e2a\u6563\u5217\u51fd\u6570 <code>f(x)=</code>position of <code>x</code> in <code>ht[ ]</code> (i.e. the index of the bucket that contains <code>x</code>)  </p> <p>\u8fd9\u91cc\u6211\u4eec\u7528 \\(T\\) \u8868\u793a <code>x</code> \u53ef\u80fd\u7684\u4e0d\u540c\u503c; \\(n\\) \u8868\u793a <code>ht[]</code> \u4e2d\u6240\u6709\u4e0d\u540c\u6807\u8bc6\u7b26\u7684\u4e2a\u6570; \u6807\u8bc6\u7b26\u5bc6\u5ea6\u5b9a\u4e49\u4e3a \\(\\dfrac{n}{T}\\); \u88c5\u8f7d\u5bc6\u5ea6\u5b9a\u4e49\u4e3a \\(\\dfrac{n}{sb}\\) </p> <ul> <li>\u5f53\u6211\u4eec\u628a\u4e24\u4e2a\u4e0d\u540c\u7684\u6807\u8bc6\u7b26\u6620\u5c04\u5230\u540c\u4e00\u4e2a\u6876\u91cc\u65f6\uff0c\u51b2\u7a81\u53d1\u751f\u4e86(i.e. \\(f(i_1)=f(i_2), i_1\\neq i_2\\))</li> <li>\u5f53\u6211\u4eec\u5c06\u4e00\u4e2a\u65b0\u7684\u6807\u8bc6\u7b26\u6620\u5c04\u5230\u4e00\u4e2a\u6ee1\u7684\u6876\u91cc\u65f6\uff0c\u6ea2\u51fa\u53d1\u751f\u4e86  </li> </ul> <p>\u6ca1\u6709\u6ea2\u51fa\u65f6, \\(T_{search} = T_{insert} = T_{delete} = O( 1 )\\)</p>"},{"location":"ZJU_CS/FDS/hash/#_3","title":"\u6563\u5217\u51fd\u6570","text":"<p>\\(f\\) \u8981\u6ee1\u8db3\u7684\u6027\u8d28\uff1a</p> <ul> <li>\u5bb9\u6613\u8ba1\u7b97\uff0c\u6700\u5c0f\u5316\u51b2\u7a81\u7684\u6570\u91cf</li> <li>\\(f\\) \u5e94\u8be5\u662f\u65e0\u504f\u89c1\u7684\uff0c\u5373 \\(\\forall x,i\\) \u6211\u4eec\u6709 \\(P(f(x)=i)=\\dfrac{1}{b}\\). \u8fd9\u6837\u7684\u6563\u5217\u51fd\u6570\u79f0\u4e3a\u5747\u5300\u6563\u5217\u51fd\u6570.  </li> </ul> <p>TableSize \u5e94\u8be5\u662f\u4e00\u4e2a\u7d20\u6570\uff0c\u8fd9\u6837\u5bf9\u968f\u673a\u8f93\u5165\uff0c\u5173\u952e\u5b57\u7684\u5206\u5e03\u6bd4\u8f83\u5747\u5300 \u5982 \\(f(x)=(\\sum x[N-i-1]*32^i)\\%TableSize\\) </p>"},{"location":"ZJU_CS/FDS/hash/#_4","title":"\u5206\u79bb\u94fe\u63a5","text":"<p>\u89e3\u51b3\u51b2\u7a81\u7684\u7b2c\u4e00\u79cd\u65b9\u6cd5\u53eb\u4f5c\u5206\u79bb\u94fe\u63a5\u6cd5\u3002\u5176\u505a\u6cd5\u662f\u5c06\u6563\u5217\u6620\u5c04\u5230\u540c\u4e00\u4e2a\u503c\u7684\u6240\u6709\u5143\u7d20\u4fdd\u5b58\u5728\u4e00\u4e2a\u5217\u8868\u4e2d\uff0c\u4e00\u822c\u4f7f\u7528\u94fe\u8868\u7684\u65b9\u5f0f\u5b58\u50a8\u3002</p> <ul> <li> <p>\u7ed3\u6784\u4f53\u5b9a\u4e49      <p><pre><code>struct  ListNode; \ntypedef  struct  ListNode  *Position; \nstruct  HashTbl; \ntypedef  struct  HashTbl  *HashTable; \nstruct  ListNode { \n    ElementType  Element; \n    Position  Next; \n}; \ntypedef  Position  List; \n/* List *TheList will be an array of lists, allocated later */ \n/* The lists use headers (for simplicity), */ \n/* though this wastes space */ \nstruct  HashTbl { \n    int  TableSize; \n    List  *TheLists; \n}; \n</code></pre> </p> <li> <p>\u521b\u5efa\u7a7a\u8868      <p><pre><code>HashTable  InitializeTable( int TableSize ) \n{   HashTable  H; \n    int  i; \n    if ( TableSize &lt; MinTableSize ) { \n        Error( \"Table size too small\" );  return NULL;  \n    } \n    H = malloc( sizeof( struct HashTbl ) );  /* Allocate table */\n    if ( H == NULL )    FatalError( \"Out of space!!!\" ); \n    H-&gt;TableSize = NextPrime( TableSize );  /* Better be prime */\n    H-&gt;TheLists = malloc( sizeof( List ) * H-&gt;TableSize );  /*Array of lists*/\n    if ( H-&gt;TheLists == NULL )   FatalError( \"Out of space!!!\" ); \n    for( i = 0; i &lt; H-&gt;TableSize; i++ ) {   /* Allocate list headers */\n    H-&gt;TheLists[ i ] = malloc( sizeof( struct ListNode ) ); /* Slow! */\n    if ( H-&gt;TheLists[ i ] == NULL )  FatalError( \"Out of space!!!\" ); \n    else    H-&gt;TheLists[ i ]-&gt;Next = NULL;\n    } \n    return  H; \n} \n</code></pre> </p> <li> <p>\u67e5\u8be2\u5173\u952e\u5b57      <p><pre><code>Position  Find ( ElementType Key, HashTable H ) \n{ \n    Position P; \n    List L; \n\n    L = H-&gt;TheLists[ Hash( Key, H-&gt;TableSize ) ]; \n\n    P = L-&gt;Next; \n    while( P != NULL &amp;&amp; P-&gt;Element != Key )  /* Probably need strcmp */ \n    P = P-&gt;Next; \n    return P; \n} \n</code></pre> </p> <li> <p>\u63d2\u5165\u5173\u952e\u5b57     \u9996\u5148\u6211\u4eec\u67e5\u627e\u8fd9\u4e2a\u503c\uff0c\u5982\u679c\u8fd9\u4e2a\u503c\u5df2\u7ecf\u5b58\u5728\u90a3\u4e48\u6211\u4eec\u5c31\u4ec0\u4e48\u4e5f\u4e0d\u505a\u3002      <p><pre><code>void  Insert ( ElementType Key, HashTable H ) \n{ \n    Position   Pos, NewCell; \n    List  L; \n    Pos = Find( Key, H ); \n    if ( Pos == NULL ) {   /* Key is not found, then insert */\n    NewCell = malloc( sizeof( struct ListNode ) ); \n    if ( NewCell == NULL )     FatalError( \"Out of space!!!\" ); \n    else { \n        L = H-&gt;TheLists[ Hash( Key, H-&gt;TableSize ) ]; \n        NewCell-&gt;Next = L-&gt;Next; \n        NewCell-&gt;Element = Key; /* Probably need strcpy! */ \n        L-&gt;Next = NewCell; \n    } \n    } \n} \n</code></pre> </p>"},{"location":"ZJU_CS/FDS/hash/#_5","title":"\u5f00\u653e\u5730\u5740","text":"<p>\u5f00\u653e\u5730\u5740\u6cd5\uff0c\u5f53\u6709\u51b2\u7a81\u53d1\u751f\u65f6\uff0c\u5c1d\u8bd5\u9009\u62e9\u5176\u4ed6\u7684\u5355\u5143\uff0c\u76f4\u5230\u627e\u5230\u7a7a\u7684\u5355\u5143\u4e3a\u6b62\u3002 \u4e00\u822c\u5730, \\(h_0(X),h_1(X),\\ldots,\\) \u5176\u4e2d $h_i(X)=(Hash(X)+F(i)) mod TableSize $ \u4e00\u822c\u6765\u8bf4 \\(\\lambda&lt;0.5\\) </p> <pre><code>Algorithm: insert key into an array of hash table\n{\n    index = hash(key);\n    initialize i = 0 ------ the counter of probing;\n    while ( collision at index ) {\n    index = ( hash(key) + f(i) ) % TableSize;\n    if ( table is full )    break;\n    else    i ++;\n    }\n    if ( table is full )\n    ERROR (\u201cNo space left\u201d);\n    else\n    insert key at index;\n}\n</code></pre>"},{"location":"ZJU_CS/FDS/hash/#_6","title":"\u7ebf\u6027\u63a2\u6d4b\u6cd5","text":"<p>\u5728\u7ebf\u6027\u63a2\u6d4b\u6cd5\u4e2d\uff0c\u51fd\u6570 \\(F\\) \u662f \\(i\\) \u7684\u7ebf\u6027\u51fd\u6570\uff0c\u5178\u578b\u60c5\u5f62\u662f \\(F(i)=i\\). \u8fd9\u76f8\u5f53\u4e8e\u9010\u4e2a\u63a2\u6d4b\u5355\u5143\uff08\u5fc5\u8981\u65f6\u53ef\u4ee5\u7ed5\u56de\u5230\u7b2c\u4e00\u4e2a\u5355\u5143\uff09\u4ee5\u67e5\u627e\u51fa\u4e00\u4e2a\u7a7a\u5355\u5143\u3002</p> <p>\u53ef\u4ee5\u8bc1\u660e\uff0c\u4f7f\u7528\u7ebf\u6027\u63a2\u6d4b\u7684\u63a2\u6d4b\u6b21\u6570\u5bf9\u4e8e\u63d2\u5165\u548c\u4e0d\u6210\u529f\u7684\u67e5\u627e\u6765\u8bf4\u7ea6\u4e3a \\(\\dfrac{1}{2}(1+\\dfrac{1}{(1-\\lambda)^2})\\) \u6b21; \u5bf9\u4e8e\u6210\u529f\u7684\u67e5\u627e\u6765\u8bf4\u5219\u9700 \\(\\dfrac{1}{2}(1+\\dfrac{1}{1-\\lambda})\\) \u6b21</p>"},{"location":"ZJU_CS/FDS/hash/#_7","title":"\u5e73\u65b9\u63a2\u6d4b\u6cd5","text":"<p>\u5e73\u65b9\u63a2\u6d4b\u6cd5\u662f\u6d88\u9664\u7ebf\u6027\u63a2\u6d4b\u4e2d\u4e00\u6b21\u805a\u96c6\u95ee\u9898\u7684\u51b2\u7a81\u89e3\u51b3\u65b9\u6cd5\u3002\u51b2\u7a81\u51fd\u6570\u4e3a\u4e8c\u6b21\u51fd\u6570\uff0c\u4e00\u822c\u4e3a \\(F(i)=i^2\\) </p> <p>\u5b9a\u7406: \u5982\u679c\u4f7f\u7528\u5e73\u65b9\u63a2\u6d4b\uff0c\u4e14\u8868\u7684\u5927\u5c0f\u662f\u7d20\u6570\uff0c\u90a3\u4e48\u5f53\u8868\u81f3\u5c11\u6709\u4e00\u534a\u4e3a\u7a7a\u65f6\uff0c\u603b\u80fd\u63d2\u5165\u4e00\u4e2a\u65b0\u7684\u5143\u7d20\u3002</p> <p>\u5bf9\u4e8e\u4efb\u610f\u5143\u7d20 \\(x\\), \u5b83\u6709 \\(\\lceil TableSize/2 \\rceil\\) \u4e2a\u4e0d\u540c\u7684\u4f4d\u7f6e\u53ef\u80fd\u653e\u7f6e\u8fd9\u4e2a\u5143\u7d20\u3002\u5982\u679c\u6700\u591a $\\lfloor TableSize/2 \\rfloor $ \u4f4d\u7f6e\u88ab\u4f7f\u7528\uff0c\u90a3\u4e48\u603b\u80fd\u627e\u5230\u653e \\(x\\) \u7684\u7a7a\u5355\u5143\u3002</p> <ul> <li> <p>\u67e5\u627e\u5143\u7d20 \\(F(i)=F(i-1)+i^2-(i-1)^2=F(i-1)+2i-1\\)     \u8fd9\u91cc <code>while</code> \u8bed\u53e5\u7684\u6d4b\u8bd5\u987a\u5e8f\u4e0d\u80fd\u6539\u53d8\u3002\u5982\u679c\u662f <code>empty</code>\uff0c\u5219 <code>key</code> \u6ca1\u6709\u5b9a\u4e49\uff0c\u5148\u5224\u65ad\u4f1a\u51fa\u9519\u3002     \u5047\u8bbe\u63a2\u6d4b\u6b65\u6570 i \u4e0d\u8d85\u8fc7 \\(\\dfrac{TS}{2}+1\\) \u6b65\uff0c\u5373\u5047\u8bbe\u8868 \\(&lt;50\\%\\)\u3002\u8fd9\u65f6 <code>CurrentPos+2i-1 &lt;= 2TS-1</code>\uff0c\u6240\u4ee5\u53ef\u4ee5\u7528\u51cf\u6cd5\u3002</p> <p><pre><code>Position  Find ( ElementType Key, HashTable H ) \n{   Position  CurrentPos; \n    int  CollisionNum; \n    CollisionNum = 0; \n    CurrentPos = Hash( Key, H-&gt;TableSize ); \n    while( H-&gt;TheCells[ CurrentPos ].Info != Empty &amp;&amp; \n    H-&gt;TheCells[ CurrentPos ].Element != Key ) { \n    CurrentPos += 2 * ++CollisionNum \uf02d 1; \n    if ( CurrentPos &gt;= H-&gt;TableSize )  CurrentPos \uf02d = H-&gt;TableSize; \n    } \n    return CurrentPos; \n} \n</code></pre> </p> <li> <p>\u63d2\u5165\u5143\u7d20      <p><pre><code>void  Insert ( ElementType Key, HashTable H ) \n{ \n    Position  Pos; \n    Pos = Find( Key, H ); \n    if ( H-&gt;TheCells[ Pos ].Info != Legitimate ) { /* OK to insert here */ \n    H-&gt;TheCells[ Pos ].Info = Legitimate; \n    H-&gt;TheCells[ Pos ].Element = Key; /* Probably need strcpy */ \n    } \n} \n</code></pre> </p> <p>\u6563\u5217\u5230\u540c\u4e00\u4f4d\u7f6e\u4e0a\u7684\u90a3\u4e9b\u5143\u7d20\u5c06\u63a2\u6d4b\u76f8\u540c\u7684\u5907\u9009\u5355\u5143\uff0c\u8fd9\u79f0\u4e3a\u4e8c\u6b21\u805a\u96c6\u3002</p>"},{"location":"ZJU_CS/FDS/hash/#_8","title":"\u53cc\u6563\u5217","text":"<p>\\(f(i)=i*hash_2(X)\\)  \u6211\u4eec\u5728 \\(X\\) \u8ddd\u79bb \\(hash_2(X),2hash_2(X),\\ldots\\) \u7b49\u4f4d\u7f6e\u8fdb\u884c\u63a2\u6d4b\u3002 \u5e38\u7528 \\(hash_2(X)=R-(X mod R)\\), \u5176\u4e2d \\(R\\) \u662f\u4e00\u4e2a\u6bd4 \\(TableSize\\) \u5c0f\u7684\u7d20\u6570\u3002</p> <ul> <li>\u5982\u679c\u6b63\u786e\u5b9e\u73b0\u4e86\u53cc\u91cd\u54c8\u5e0c\uff0c\u6a21\u62df\u8868\u660e\u9884\u671f\u7684\u63a2\u6d4b\u6570\u91cf\u51e0\u4e4e\u4e0e\u968f\u673a\u51b2\u7a81\u89e3\u51b3\u7b56\u7565\u76f8\u540c\u3002</li> <li>\u4e8c\u6b21\u63a2\u6d4b\u4e0d\u9700\u8981\u4f7f\u7528\u7b2c\u4e8c\u4e2a\u54c8\u5e0c\u51fd\u6570\uff0c\u56e0\u6b64\u5728\u5b9e\u8df5\u4e2d\u53ef\u80fd\u66f4\u7b80\u5355\u3001\u66f4\u5feb\u3002</li> </ul>"},{"location":"ZJU_CS/FDS/hash/#_9","title":"\u518d\u6563\u5217","text":"<p>\u5bf9\u4e8e\u4f7f\u7528\u5e73\u65b9\u63a2\u6d4b\u7684\u5f00\u653e\u5730\u5740\u6563\u5217\u6cd5\uff0c\u5982\u679c\u8868\u7684\u5143\u7d20\u8fc7\u591a\uff0c\u90a3\u4e48\u64cd\u4f5c\u7684\u8fd0\u884c\u65f6\u95f4\u5c06\u5f00\u59cb\u6d88\u8017\u8fc7\u957f\u3002  </p> <ul> <li>\u5efa\u7acb\u4e00\u4e2a\u4e24\u500d\u5927\u7684\u8868</li> <li>\u626b\u63cf\u539f\u59cb\u6563\u5217\u8868</li> <li>\u5229\u7528\u65b0\u7684\u6563\u5217\u51fd\u6570\u5c06\u5143\u7d20\u6620\u5c04\u5230\u65b0\u7684\u6563\u5217\u503c\uff0c\u5e76\u63d2\u5165</li> </ul> <p>\\(T(N)=O(N)\\) </p> <p>\u4ec0\u4e48\u65f6\u5019\u518d\u6563\u5217\uff1f</p> <ul> <li>\u8868\u586b\u6ee1\u4e00\u534a\u5c31\u518d\u6563\u5217</li> <li>\u5f53\u63d2\u5165\u5931\u8d25\u65f6</li> <li>\u5f53\u8868\u8fbe\u5230\u67d0\u4e00\u4e2a\u88c5\u586b\u56e0\u5b50\u65f6\u8fdb\u884c\u518d\u6563\u5217\u3002  </li> </ul> <p>\u901a\u5e38\u5728\u91cd\u54c8\u5e0c\u4e4b\u524d\u5e94\u8be5\u6709 \\(N/2\\) \u4e2a\u63d2\u5165\uff0c\u6240\u4ee5 \\(O(N)\\) \u91cd\u54c8\u5e0c\u53ea\u4f1a\u7ed9\u6bcf\u4e2a\u63d2\u5165\u589e\u52a0\u4e00\u4e2a\u6052\u5b9a\u7684\u4ee3\u4ef7\u3002 \u7136\u800c\uff0c\u5728\u4ea4\u4e92\u5f0f\u7cfb\u7edf\u4e2d\uff0c\u4e0d\u5e78\u7684\u7528\u6237\u7684\u63d2\u5165\u5bfc\u81f4\u91cd\u65b0\u6563\u5217\uff0c\u53ef\u80fd\u4f1a\u770b\u5230\u901f\u5ea6\u51cf\u6162\u3002</p>"},{"location":"ZJU_CS/FDS/heap/","title":"\u4f18\u5148\u961f\u5217\uff08\u5806\uff09","text":""},{"location":"ZJU_CS/FDS/heap/#adt","title":"ADT \u6a21\u578b","text":"<ul> <li>\u5bf9\u8c61\uff1a\u4e00\u4e2a\u6709\u9650\u7684\u6709\u5e8f\u96c6</li> <li>\u64cd\u4f5c\uff1a<ul> <li>\u521d\u59cb\u5316</li> <li>\u63d2\u5165</li> <li>\u5220\u9664\u6700\u5c0f\u7684\u5143\u7d20</li> <li>\u5bfb\u627e\u6700\u5c0f\u7684\u5143\u7d20</li> </ul> </li> </ul>"},{"location":"ZJU_CS/FDS/heap/#_2","title":"\u7b80\u5355\u7684\u5b9e\u73b0","text":"<ul> <li>\u6570\u7ec4\uff1a<ul> <li>\u63d2\u5165\u5143\u7d20\u5230\u672b\u5c3e \\(\\Theta(1)\\) </li> <li>\u627e\u5230\u6700\u5927/\u6700\u5c0f\u5143\u7d20 \\(\\Theta(n)\\), \u5220\u9664\u5143\u7d20\u79fb\u52a8\u6570\u7ec4 \\(O(n)\\)</li> </ul> </li> <li>\u94fe\u8868\uff1a<ul> <li>\u63d2\u5165\u5143\u7d20\u5230\u94fe\u8868\u5f00\u5934 \\(\\Theta(1)\\)</li> <li>\u627e\u5230\u6700\u5927/\u6700\u5c0f\u5143\u7d20 \\(\\Theta(n)\\), \u5220\u9664\u5143\u7d20 \\(\\Theta(1)\\) </li> </ul> </li> <li>\u6709\u5e8f\u6570\u7ec4\uff1a<ul> <li>\u63d2\u5165 \u627e\u5230\u5408\u9002\u7684\u4f4d\u7f6e \\(O(n)\\), \u79fb\u52a8\u6570\u7ec4\u5e76\u63d2\u5165\u5143\u7d20 \\(O(n)\\)</li> <li>\u5220\u9664\u5f00\u5934/\u672b\u5c3e\u5143\u7d20 \\(\\Theta(1)\\)</li> </ul> </li> <li>\u6709\u5e8f\u94fe\u8868\uff1a<ul> <li>\u63d2\u5165 \u627e\u5230\u5408\u9002\u7684\u4f4d\u7f6e \\(O(n)\\), \u63d2\u5165\u5143\u7d20 \\(\\Theta(1)\\)</li> <li>\u5220\u9664\u5f00\u5934/\u672b\u5c3e\u5143\u7d20 \\(\\Theta(1)\\)</li> </ul> </li> </ul>"},{"location":"ZJU_CS/FDS/heap/#_3","title":"\u4e8c\u53c9\u5806","text":""},{"location":"ZJU_CS/FDS/heap/#_4","title":"\u7ed3\u6784\u6027\u8d28","text":"<p>\u5806\u662f\u4e00\u68f5\u88ab\u5b8c\u5168\u586b\u6ee1\u7684\u4e8c\u53c9\u6811\uff0c\u6709\u53ef\u80fd\u7684\u4f8b\u5916\u662f\u5728\u5e95\u5c42\uff1a\u5e95\u5c42\u4e0a\u7684\u5143\u7d20\u4ece\u5de6\u5230\u53f3\u586b\u5165\u3002\u8fd9\u6837\u7684\u6811\u79f0\u4e3a\u5b8c\u5168\u4e8c\u53c9\u6811\u3002</p> <p>\u4e00\u68f5\u9ad8 h \u7684\u5b8c\u5168\u4e8c\u53c9\u6811\u7684\u8282\u70b9\u4e2a\u6570\u4ecb\u4e8e \\(2^h\\) \u5230 \\(2^{h+1}-1\\) \u4e4b\u95f4\uff0c\u5373\u5b8c\u5168\u4e8c\u53c9\u6811\u7684\u9ad8\u5ea6\u662f \\(\\lfloor \\log N\\rfloor\\)</p> <p>\u5bf9\u4e8e\u4e0b\u6807\u4e3a \\(i\\) \u7684\u5143\u7d20\uff0c\u5176\u5de6\u513f\u5b50\u4f4d\u4e8e \\(2i\\) \u4e0a\uff0c\u53f3\u513f\u5b50\u4f4d\u4e8e \\(2i+1\\) \u4e0a\uff0c\u4ed6\u7684\u7236\u4eb2\u4f4d\u4e8e \\(\\lfloor i/2 \\rfloor\\) \u4e0a\u3002</p>"},{"location":"ZJU_CS/FDS/heap/#_5","title":"\u5806\u5e8f\u6027\u8d28","text":"<p>\u5982\u679c\u4e00\u68f5\u6811\uff0c\u6bcf\u4e2a\u8282\u70b9\u7684\u503c\u90fd\u4e0d\u5927\u4e8e\u5176\u513f\u5b50\u8282\u70b9\u7684\u503c\uff0c\u90a3\u4e48\u8fd9\u662f\u4e00\u68f5\u5c0f\u6839\u6811\u3002\u5c0f\u6839\u5806\u5c31\u662f\u6ee1\u8db3\u5c0f\u6839\u6811\u6027\u8d28\u7684\u5b8c\u5168\u4e8c\u53c9\u6811\u3002</p>"},{"location":"ZJU_CS/FDS/heap/#_6","title":"\u57fa\u672c\u7684\u5806\u64cd\u4f5c","text":""},{"location":"ZJU_CS/FDS/heap/#_7","title":"\u63d2\u5165","text":"<p>\u5bf9\u4e8e\u65b0\u7684\u8282\u70b9\uff0c\u552f\u4e00\u53ef\u4ee5\u653e\u7684\u4f4d\u7f6e\u5c31\u662f\u4e0b\u4e00\u4e2a\u7a7a\u95f2\u4f4d\u7f6e\uff0c\u5426\u5219\u5806\u5c06\u4e0d\u518d\u662f\u5b8c\u5168\u6811\uff0c\u4f46\u8fd9\u6837\u53ef\u80fd\u7834\u574f\u5806\u7684\u5e8f\uff0c\u6211\u4eec\u4e00\u822c\u91c7\u7528\u4e0a\u6d6e\u7684\u7b56\u7565\u3002</p> <pre><code>/* H-&gt;Element[ 0 ] is a sentinel */ \nvoid  Insert( ElementType  X,  PriorityQueue  H ) \n{ \n     int  i; \n\n     if ( IsFull( H ) ) { \n    Error( \"Priority queue is full\" ); \n    return; \n     } \n\n     for ( i = ++H-&gt;Size; H-&gt;Elements[ i / 2 ] &gt; X; i /= 2 ) \n    H-&gt;Elements[ i ] = H-&gt;Elements[ i / 2 ]; \n\n     H-&gt;Elements[ i ] = X; \n}\n</code></pre> <p>\u6ce8\u610f\u8fd9\u91cc\u4ee3\u7801\u5b9e\u73b0\u4e2d\uff0c\u6211\u4eec\u6ca1\u6709\u4f7f\u7528\u4ea4\u6362\u64cd\u4f5c\uff0c\u56e0\u4e3a\u4ea4\u6362\u64cd\u4f5c\u7684\u65f6\u95f4\u6210\u672c\u66f4\u9ad8\u3002</p>"},{"location":"ZJU_CS/FDS/heap/#_8","title":"\u5220\u9664\u6700\u5c0f\u5143","text":"<p>\u6211\u4eec\u4e00\u822c\u91c7\u7528\u4e0b\u6ee4\u7684\u7b56\u7565\u3002\u5220\u9664\u6700\u5c0f\u5143\u540e\uff0c\u5728\u6839\u8282\u70b9\u4ea7\u751f\u4e00\u4e2a\u7a7a\u7a74\u3002\u540c\u65f6\u5806\u5c11\u4e86\u4e00\u4e2a\u5143\u7d20\uff0c\u6211\u4eec\u5fc5\u987b\u628a\u5806\u6700\u540e\u4e00\u4e2a\u5143\u7d20 X \u79fb\u52a8\u5230\u5806\u7684\u67d0\u4e2a\u5730\u65b9\u3002\u4ece\u6839\u8282\u70b9\u7684\u7a7a\u7a74\u5f00\u59cb\u6211\u4eec\u5c06\u7a7a\u7a74\u7684\u4e24\u4e2a\u513f\u5b50\u4e2d\u7684\u8f83\u5c0f\u8005\u79fb\u5165\u7a7a\u7a74\uff0c\u8fd9\u6837\u5c31\u628a\u7a7a\u7a74\u5f80\u4e0b\u63a8\u4e86\u4e00\u5c42\u3002\u91cd\u590d\u6b65\u9aa4\u76f4\u5230 X \u53ef\u4ee5\u653e\u5165\u7a7a\u7a74\u3002</p> <pre><code>ElementType  DeleteMin( PriorityQueue  H ) \n{ \n    int  i, Child; \n    ElementType  MinElement, LastElement; \n    if ( IsEmpty( H ) ) { \n         Error( \"Priority queue is empty\" ); \n         return  H-&gt;Elements[ 0 ];   } \n    MinElement = H-&gt;Elements[ 1 ];  /* save the min element */\n    LastElement = H-&gt;Elements[ H-&gt;Size-- ];  /* take last and reset size */\n    for ( i = 1; i * 2 &lt;= H-&gt;Size; i = Child ) {  /* Find smaller child */ \n         Child = i * 2; \n         if (Child != H-&gt;Size &amp;&amp; H-&gt;Elements[Child+1] &lt; H-&gt;Elements[Child]) \n           Child++;     \n         if ( LastElement &gt; H-&gt;Elements[ Child ] )   /* Percolate one level */ \n           H-&gt;Elements[ i ] = H-&gt;Elements[ Child ]; \n         else     break;   /* find the proper position */\n    } \n    H-&gt;Elements[ i ] = LastElement; \n    return  MinElement; \n}\n</code></pre>"},{"location":"ZJU_CS/FDS/heap/#_9","title":"\u5176\u4ed6\u7684\u5806\u64cd\u4f5c","text":"<p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5bf9\u4e8e\u5c0f\u6839\u5806\uff0c\u627e\u9664\u4e86\u6700\u5c0f\u5143\u4ee5\u5916\u7684\u5143\u7d20\u90fd\u9700\u8981\u7ebf\u6027\u641c\u7d22\u6574\u4e2a\u5806\u3002</p> <ul> <li><code>DecreaseKey</code> DecreaseKey(P,\\(\\Delta\\),H) \u64cd\u4f5c\u964d\u4f4e\u5728\u4f4d\u7f6e P \u5904\u7684\u5173\u952e\u5b57\u7684\u503c\u3002\u6211\u4eec\u9700\u8981\u4e0a\u6ee4\u64cd\u4f5c\u5bf9\u5806\u8fdb\u884c\u8c03\u6574\u3002</li> <li><code>IncreaseKey</code> IncreaseKey(P,\\(\\Delta\\),H) \u64cd\u4f5c\u589e\u52a0\u5728\u4f4d\u7f6e P \u5904\u7684\u5173\u952e\u5b57\u7684\u503c\u3002\u6211\u4eec\u9700\u8981\u4e0b\u6ee4\u64cd\u4f5c\u5bf9\u5806\u8fdb\u884c\u8c03\u6574\u3002</li> <li><code>Delete</code> Delete(P,H) \u64cd\u4f5c\u5220\u9664\u5806\u4e2d\u4f4d\u7f6e P \u4e0a\u7684\u8282\u70b9\u3002\u8fd9\u4e2a\u64cd\u4f5c\u9996\u5148\u6267\u884c DecreaseKey(P,\\(\\infty\\),H) \u518d\u6267\u884c DeleteMin \u5373\u53ef\u3002</li> <li><code>BuildHeap</code> BuildHeap(H) \u64cd\u4f5c\u628a N \u4e2a\u5173\u952e\u5b57\u4f5c\u4e3a\u8f93\u51fa\u5e76\u628a\u5b83\u4eec\u653e\u5728\u7a7a\u961f\u4e2d\uff0c\u53ef\u4ee5\u4f7f\u7528 N \u4e2a\u76f8\u7ee7\u7684 Insert \u64cd\u4f5c\u5b8c\u6210\u3002 \u4e5f\u53ef\u4ee5\u5c06 N \u4e2a\u5173\u952e\u5b57\u4ee5\u4efb\u610f\u987a\u5e8f\u653e\u5165\u6811\u4e2d\u6784\u6210\u4e00\u68f5\u5b8c\u5168\u4e8c\u53c9\u6811\uff0c\u4ece\u5012\u6570\u7b2c\u4e8c\u5c42\u5f00\u59cb\u4f9d\u6b21 percolate down. \u53ef\u4ee5\u8bc1\u660e\u8fd9\u65f6\u53ea\u9700\u8981\u7ebf\u6027\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u5c31\u53ef\u4ee5\u5b8c\u6210\u6811\u7684\u6784\u5efa\u3002</li> </ul> <p>\u5b9a\u7406\uff1a\u5305\u542b \\(2^{h+1}-1\\) \u4e2a\u8282\u70b9\uff0c\u9ad8\u5ea6\u4e3a \\(h\\) \u7684\u7406\u60f3\u4e8c\u53c9\u6811\uff0c\u5176\u8282\u70b9\u7684\u9ad8\u5ea6\u548c\u4e3a \\(2^{h+1}-1-(h+1)\\) \u8bc1\u660e\uff1a\\(S=\\sum\\limits_{i=0}^h 2^i(h-i)\\) \u56e0\u6b64 BuildHeap \u7684\u64cd\u4f5c\u662f\u7ebf\u6027\u7684</p>"},{"location":"ZJU_CS/FDS/heap/#d-heaps","title":"d-Heaps","text":"<p>d-\u5806\u662f\u4e8c\u53c9\u5806\u7684\u63a8\u5e7f\uff0c\u6240\u6709\u7684\u8282\u70b9\u90fd\u6709 d \u4e2a\u513f\u5b50\uff08\u56e0\u6b64\u4e8c\u53c9\u5806\u662f 2-\u5806\uff09 d-\u5806\u6bd4\u4e8c\u53c9\u5806\u6d45\uff0c\u56e0\u6b64 Insert \u64cd\u4f5c\u6539\u8fdb\u4e3a \\(O(\\log_dN)\\) \u4f46\u5bf9\u4e8e\u5927\u7684 d, DeleteMin \u4f1a\u82b1\u8d39\u66f4\u591a\u65f6\u95f4\uff0c\u56e0\u4e3a\u6211\u4eec\u6bcf\u5c42\u90fd\u8981\u627e\u51fa d \u4e2a\u513f\u5b50\u4e2d\u7684\u6700\u5c0f\u8005\u3002\u8fd9\u6837\u64cd\u4f5c\u7684\u7528\u65f6\u5c31\u662f \\(O(d\\log_dN)\\)\u3002\u800c\u4e14\u5f53 d \u4e0d\u662f 2 \u7684\u5e42\u6b21\u65f6\uff0c\u627e\u51fa\u513f\u5b50\u548c\u7236\u4eb2\u4f1a\u82b1\u8d39\u66f4\u591a\u7684\u65f6\u95f4\u3002</p> <p>Info</p> <p>Priority queue: \u4f18\u5148\u961f\u5217  Binary heap: \u4e8c\u53c9\u5806 \u5806\u5e8f: heap order \u4e0a\u6d6e\uff1apercolate up \u4e0b\u6ee4\uff1apercolate down  </p>"},{"location":"ZJU_CS/FDS/homework/","title":"\u4f5c\u4e1a\u8981\u70b9","text":"<p>\u8fd9\u91cc\u8bb0\u5f55\u7740\u6240\u6709homework\u4e2d\u7684\u8981\u70b9\uff0c\u4fbf\u4e8e\u590d\u4e60\uff01\uff08\u9884\u4e60</p> <p>\u76ee\u5f55</p> infoindex <p>\u5982\u82e5latex\u516c\u5f0f\u65e0\u6cd5\u663e\u793a\uff0c\u8bf7\u91cd\u65b0\u5237\u65b0\u754c\u9762\u5373\u53ef\u3002</p> <ul> <li>\u4f5c\u4e1a\u8981\u70b9<ul> <li>HW1 Algorithm</li> <li>HW2 linked-list</li> <li>HW3 Stack &amp; Queue</li> <li>HW4 Binary tree</li> <li>HW5 search tree</li> <li>HW6 Heap</li> <li>HW7 Union/Find set</li> <li>HW8 Graph</li> <li>HW9 Shortest_Path</li> <li>HW10 MST &amp; Maxstream</li> <li>HW11 DFS &amp; InsertionSort</li> <li>HW12 shellsort &amp; Heapsort &amp; Mergesort</li> <li>HW13 QuickSort &amp; RadixSort</li> <li>HW14&amp;15 Hash</li> </ul> </li> </ul>"},{"location":"ZJU_CS/FDS/homework/#hw1_algorithm","title":"HW1 Algorithm","text":"<p>\u6458\u8981</p> Knowledgeglossary <p>\u672c\u8282\u4f60\u9700\u8981\u5b66\u4f1a\u57fa\u7840\u7684\u7b97\u6cd5\u65f6\u95f4\u548c\u7a7a\u95f4\u590d\u6742\u5ea6\u7684\u5206\u6790\u3002</p> \u82f1\u6587 \u4e2d\u6587 complexity \u590d\u6742\u5ea6 <ol> <li>The Fibonacci number sequence \\({F_N}\\) is defined as: \\(F_0 = 0\\), \\(F_1=1\\),\\(F_N=F_{N\u22121}+F_{N\u22122}, N=2, 3, ....\\) The time complexity of the function which calculates \\(F_N\\) recursively is \u0398(N!).</li> </ol> Tips <p>F</p> <p>\u5728\u9012\u5f52\u6811\u4e2d\uff0c\u6bcf\u4e2a\u8282\u70b9\u8868\u793a\u4e00\u4e2a\u9012\u5f52\u8c03\u7528\uff0c\u800c\u6811\u7684\u6df1\u5ea6\u8868\u793a\u9012\u5f52\u7684\u5c42\u6570\u3002\u5bf9\u4e8e\u6590\u6ce2\u90a3\u5951\u6570\u5217\uff0c\u6bcf\u4e2a\u8282\u70b9\u4f1a\u751f\u6210\u4e24\u4e2a\u5b50\u8282\u70b9\uff0c\u56e0\u4e3a\u6bcf\u4e2a\u6570\u90fd\u4f9d\u8d56\u4e8e\u524d\u4e24\u4e2a\u6570\u7684\u548c\u3002</p> <p>\u5047\u8bbe\u6211\u4eec\u8981\u8ba1\u7b97\u7b2cn\u4e2a\u6590\u6ce2\u90a3\u5951\u6570\uff0c\u9012\u5f52\u6811\u7684\u6df1\u5ea6\u5c06\u662fn\u3002\u6bcf\u4e2a\u8282\u70b9\u7684\u8ba1\u7b97\u65f6\u95f4\u662f\u5e38\u6570\u65f6\u95f4\uff0c\u56e0\u4e3a\u5b83\u53ea\u6d89\u53ca\u5230\u7b80\u5355\u7684\u52a0\u6cd5\u64cd\u4f5c\u3002</p> <p>\u56e0\u6b64\uff0c\u9012\u5f52\u65b9\u6cd5\u8ba1\u7b97\u6590\u6ce2\u90a3\u5951\u6570\u5217\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u53ef\u4ee5\u8868\u793a\u4e3aO(2^n)\u3002\u8fd9\u662f\u56e0\u4e3a\u9012\u5f52\u6811\u7684\u8282\u70b9\u6570\u662f\u6307\u6570\u7ea7\u589e\u957f\u7684\u3002</p> <ol> <li> \\[ P_1:T(1) = 1, T(N) = T(N/3)+1\\\\P_2:T(1) = 1, T(N) = 3T(N/3) \\] </li> </ol> <p>\u6c42 \\(P_1, P_2\\) \u7684\u590d\u6742\u5ea6</p> Tips <p>\\(O(logN)\\) for P1, \\(O(N)\\) for P2</p>"},{"location":"ZJU_CS/FDS/homework/#hw2_linked-list","title":"HW2 linked-list","text":"<p>\u6458\u8981</p> Knowledgeglossary <p>\u672c\u8282\u4f60\u9700\u8981\u6e29\u4e60\u5728\u4e4b\u524dC\u8bed\u8a00\u8bfe\u7a0b\u4e2d\u5bf9\u57fa\u7840ADT\u7684\u4f7f\u7528\u3002\u719f\u7ec3\u638c\u63e1\u94fe\u8868\u7684\u64cd\u4f5c\u4ee5\u53ca\u57fa\u672c\u6982\u5ff5\u662f\u975e\u5e38\u6709\u5fc5\u8981\u7684\u3002</p> \u82f1\u6587 \u4e2d\u6587 complexity \u590d\u6742\u5ea6 <ol> <li>Attention\uff1a Linear List\uff08\u7ebf\u6027\u8868\uff09\u7684\u521d\u59cb\u5b9a\u4e49\u662f\u6570\u7ec4\u3002</li> <li>insertNode \u51fd\u6570\u53ef\u4ee5\u80cc\u4e0b\u6765</li> </ol> code <pre><code>void insertNode(struct Node* head, int Element) {\n    // \u521b\u5efa\u65b0\u8282\u70b9\n    struct Node* newNode = (struct Node*)malloc(sizeof(struct Node));\n    newNode-&gt;Element = Element;\n\n    newNode-&gt;Next = (head)-&gt;Next;\n    (head)-&gt;Next = newNode;\n}\n</code></pre> <ol> <li>\u6e29\u4e60<code>`Mergesort</code>\u4e2dmerge\u7684\u601d\u60f3</li> </ol> code <pre><code>#define type int\nvoid Mergesort(type num[], int start, int end) {\n    if (start &gt;= end) return;\n    int mid = start + (end-start)/2;\n    Mergesort(num, start, mid);\n    Mergesort(num, mid+1, end);\n\n    Merge(num, start, mid, end);\n}\n\nvoid Merge(int num[], int start, int mid, int end) {\n    int* temp = (int*)malloc((end-start+1)*sizeof(type));\n    int i = start;\n    int j = mid + 1;\n    int k = 0;\n    while (i &lt;= mid &amp;&amp; j &lt;= end) {\n        if (num[i] &lt;= num[j]){\n            temp[k++] = num[i++];\n        } else {\n            temp[k++] = num[j++];\n        }\n    }\n    while (i &lt;= mid) {\n        temp[k++] = num[i++];\n    }\n    while (j &lt;= end) {\n        temp[k++] = num[j++];\n    }\n}\n</code></pre>"},{"location":"ZJU_CS/FDS/homework/#hw3_stack_queue","title":"HW3 Stack &amp; Queue","text":"<p>\u6458\u8981</p> Knowledgeglossary <p>\u672c\u8282\u4f60\u9700\u8981\u6e29\u4e60\u5728\u4e4b\u524dC\u8bed\u8a00\u8bfe\u7a0b\u4e2d\u5bf9\u57fa\u7840ADT\u7684\u4f7f\u7528\u3002\u719f\u7ec3\u638c\u63e1\u961f\u5217\u548c\u6808\u3002\u5305\u62ec\u53ef\u4ee5\u91c7\u7528structue\u5d4c\u5957\u6570\u7ec4\u7684\u65b9\u5f0f\u6765\u96c6\u6210\u5b9e\u73b0</p> <p>\u7f16\u7a0b\u9898\uff1aOI\u91cc\u5c06\u8fd9\u79cd\u601d\u60f3\u5f52\u7eb3\u4e3a\u201c\u6a21\u62df\u201d</p> \u82f1\u6587 \u4e2d\u6587 front \u524d rare \u540e <ol> <li>stack pop <code>ooops</code>\u6709\u591a\u5c11\u79cd\u65b9\u5f0f\uff1f   </li> </ol> Tips <p>5 \u7b14\u8005\u7b2c\u4e00\u6b21\u505a\u65f6\u7c97\u7cd9\u7684\u8ba4\u4e3a\u662f4\u79cd\u3002\u6700\u540e\u5206\u6790\u8ba4\u4e3a\u8fd8\u662f\u753b\u7c7b\u4f3c\u6811\u5f62\u6d41\u7a0b\u56fe\u6700\u4e3a\u9760\u8c31</p> <ol> <li>stack\u7684\u4e00\u79cd\u96c6\u6210\u65b9\u6cd5</li> </ol> <pre><code>//\u521d\u59cb\u5316\u65f6\u5c06top\u8d4b\u503c\u4e3a-1\ntypedef struct {\n    int stack[MAX_SIZE];\n    int top;\n} Stack;\n\nvoid push(Stack *s, int num) {\n    s-&gt;stack[++s-&gt;top] = num;\n}\n\nint pop(Stack *s) {\n    return s-&gt;stack[s-&gt;top--];\n}\n</code></pre> <ol> <li>Suppose that an array of size 6 is used to store a circular queue, and the values of front and rear are 0 and 4, respectively. Now after 2 dequeues and 2 enqueues, what will the values of front and rear be?</li> </ol> Tips <p>[] Unfinished! 2 0</p>"},{"location":"ZJU_CS/FDS/homework/#hw4_binary_tree","title":"HW4 Binary tree","text":"<p>\u6458\u8981</p> Knowledgeglossary <p>\u672c\u8282\u4f60\u9700\u8981\u5b66\u4e60\u4e8c\u53c9\u6811\u7684\u4e00\u4e9b\u57fa\u7840\u6982\u5ff5\u4e0e\u64cd\u4f5c\u3002</p> <p>\u51fd\u6570\u9898\u5145\u5206\u5c55\u73b0\u4e86\u9012\u5f52\u601d\u60f3\uff0c\u7f16\u7a0b\u9898\u662f\u5bf9\u4e4b\u524d\u77e5\u8bc6\u7684\u7efc\u5408\u4f7f\u7528</p> \u4e2d\u6587 \u82f1\u6587 \u6982\u5ff5 \u6811 tree A tree is a connected acyclic undirected graph\uff08DAG not\uff09 \u6839\u8282\u70b9 root node \u4f4d\u4e8e\u4e8c\u53c9\u6811\u9876\u5c42\u7684\u8282\u70b9\uff0c\u6ca1\u6709\u7236\u8282\u70b9 \u53f6\u8282\u70b9 leaf node \u6ca1\u6709\u5b50\u8282\u70b9\u7684\u8282\u70b9\uff0c\u5176\u4e24\u4e2a\u6307\u9488\u5747\u6307\u5411 \u8fb9 edge \u8fde\u63a5\u4e24\u4e2a\u8282\u70b9\u7684\u7ebf\u6bb5\uff0c\u5373\u8282\u70b9\u5f15\u7528\uff08\u6307\u9488\uff09 \u5c42 level \u4ece\u9876\u81f3\u5e95\u9012\u589e\uff0c\u6839\u8282\u70b9\u6240\u5728\u5c42\u4e3a 1 \u5ea6 degree \u8282\u70b9\u7684\u5b50\u8282\u70b9\u7684\u6570\u91cf\u3002\u5728\u4e8c\u53c9\u6811\u4e2d\uff0c\u5ea6\u7684\u53d6\u503c\u8303\u56f4\u662f 0\u30011\u30012 \u9ad8\u5ea6 height \u4ece\u6839\u8282\u70b9\u5230\u6700\u8fdc\u53f6\u8282\u70b9\u6240\u7ecf\u8fc7\u7684\u8fb9\u7684\u6570\u91cf \u6df1\u5ea6 depth \u4ece\u6839\u8282\u70b9\u5230\u8be5\u8282\u70b9\u6240\u7ecf\u8fc7\u7684\u8fb9\u7684\u6570\u91cf \u9ad8\u5ea6 height \u4ece\u8ddd\u79bb\u8be5\u8282\u70b9\u6700\u8fdc\u7684\u53f6\u8282\u70b9\u5230\u8be5\u8282\u70b9\u6240\u7ecf\u8fc7\u7684\u8fb9\u7684\u6570\u91cf \u904d\u5386 traversal <p>\u4e0b\u9762\u5148\u8ba9\u6211\u4eec\u770b\u770b\u57fa\u672c\u6982\u5ff5\u5427\uff08From hello-algo\uff09</p> <p>\u4e8c\u53c9\u6811\u57fa\u672c\u6982\u5ff5</p> \u5b8c\u7f8e\u4e8c\u53c9\u6811 perfect BT\u5e73\u8861\u4e8c\u53c9\u6811 balance BT\u5b8c\u5168\u4e8c\u53c9\u6811 complete BT\u5b8c\u6ee1\u4e8c\u53c9\u6811 full BT <p></p> <p></p> <p></p> <p></p> <ol> <li>There exists a binary tree with 2016 nodes in total, and with 16 nodes having only one child.</li> </ol> Tips <p>F \u672c\u9898\u662f\u4e2a\u8111\u7ecf\u6025\u8f6c\u5f2f\u9898\u76ee</p> <ol> <li>Given a tree of degree 3. Suppose that there are 3 nodes of degree 2 and 2 nodes of degree 3. Then the number of leaf nodes must be ____.</li> </ol> <p>\u505a\u9898\u6280\u5de7</p> <p>8</p> <p>\u901a\u89e3\uff1a 1. \u7b97\u513f\u5b50\uff0c $ 3n_3+2n_2+n_1+1=N $ 2. \u7b97\u6240\u6709\uff0c $ n_3+n_2+n_1+n_0=N $</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u6982\u5ff5\uff1a \u7ed3\u70b9\u7684\u5ea6\uff08Degree\uff09\uff1a\u7ed3\u70b9\u7684\u5b50\u6811\u4e2a\u6570 \u6811\u7684\u5ea6\uff1a\u6811\u7684\u6240\u6709\u7ed3\u70b9\u4e2d\u6700\u5927\u7684degree</p> <ol> <li>If a general tree T is converted into a binary tree BT, then which of the following BT traversals gives the same sequence as that of the post-order traversal of T?</li> </ol> Tips <p>\u666e\u901a\u6811\u8f6c\u4e8c\u53c9\u6811</p> <p>\u53ef\u4ee5\u8fd9\u6837\u6d45\u663e\u7684\u7406\u89e3\uff1a 1. \u5728\u6240\u6709\u5144\u5f1f\u8282\u70b9\u95f4\u6dfb\u52a0\u4e00\u6761\u8fde\u7ebf 2. \u5bf9\u6bcf\u4e2a\u8282\u70b9\uff0c\u9664\u4e86\u4fdd\u7559\u4e0e\u7b2c\u4e00\u4e2a\u513f\u5b50\u7684\u8fde\u7ebf\u5916\uff0c\u5220\u9664\u522b\u7684\u8fde\u7ebf\u3002 </p> <p>conclusion</p> <p>T\u7684preorder = BT\u7684preorder T\u7684postorder = BT\u7684inorder</p> <ol> <li>Threaded Binary Trees(\u4e00\u79cd\u5bf9\u4e8c\u53c9\u6811\u7684\u4f18\u5316\uff0c\u8001\u5e08\u4e0d\u8bb2\u4f46\u8981\u638c\u63e1) </li> </ol> <p>Note</p> <p>\u7ebf\u7d22\u4e8c\u53c9\u6811</p> <p>\u4e00\u4e2a\u76f4\u89c2\u7684\u5feb\u901f\u89e3\u9898\u7684\u65b9\u6cd5\u4fbf\u662f\u5199\u51fa\u539f\u672c\u6811\u7684\u904d\u5386\u7ed3\u679c\uff0c\u7136\u540e\u7528\u4f7f\u7528\u5de6\u53f3\u6307\u9488\u4e0e\u5b83\u7684\u524d\u540e\u503c\u63a5\u8d77\u6765\u5373\u53ef\uff01</p>"},{"location":"ZJU_CS/FDS/homework/#hw5_search_tree","title":"HW5 search tree","text":"<p>\u6458\u8981</p> Knowledgeglossary <p>\u672c\u8282\u4f60\u9700\u8981\u5b66\u4e60\u4e8c\u53c9\u6811\u7684\u4e00\u4e9b\u57fa\u7840\u6982\u5ff5\u4e0e\u64cd\u4f5c\u3002</p> <p>\u51fd\u6570\u9898\u5145\u5206\u5c55\u73b0\u4e86\u9012\u5f52\u601d\u60f3\uff0c\u7f16\u7a0b\u9898\u662f\u5bf9\u4e4b\u524d\u77e5\u8bc6\u7684\u7efc\u5408\u4f7f\u7528</p> \u4e2d\u6587 \u82f1\u6587 \u6982\u5ff5 <ol> <li>In a binary search tree which contains several integer keys including 4, 5, and 6, if 4 and 6 are on the same level, then 5 must be their parent.</li> </ol> Tips <p>**F **</p> <p>5 could be their grandparents</p> <ol> <li>2-3</li> <li></li> </ol> <p>\u8003\u5bdf\u4e8c\u53c9\u6811\u5220\u9664\u7ed3\u70b9</p> <p></p> <ol> <li>\u4ec0\u4e48\u662fdecision tree?</li> <li>A binary search tree if ood nodes, \u5982\u679c\u6211\u4eec\u9009<code>i/2</code>\uff0c\u4e4b\u540e\u6bcf\u6b21\u90fd\u9009<code>i/2</code>\uff1b\u9009<code>i/2+1</code>\u5219\u90fd\u9009<code>i/2+1</code>\u3002</li> <li>\u7ea2\u9ed1\u6811</li> </ol>"},{"location":"ZJU_CS/FDS/homework/#hw6_heap","title":"HW6 Heap","text":"<p>\u6458\u8981</p> Knowledgeglossary <p>\u672c\u8282\u4f60\u9700\u8981\u5b66\u4e60\u5806\u7684\u4e00\u4e9b\u57fa\u7840\u6982\u5ff5\u4e0e\u64cd\u4f5c\u3002\u4e2a\u4eba\u8ba4\u4e3a\u672c\u8282\u5728hello-algo\u4e2d\u89e3\u91ca\u7684\u662f\u975e\u5e38\u5b8c\u5168\u7684\u3002</p> <p>Notice\uff1a\u7f16\u7a0b\u9898\u6709\u5e8f\u6570\u5b57\u4e32\u5efa\u5b8c\u5168\u4e8c\u53c9\u6811\u53ef\u4ee5\u5229\u7528\u4e2d\u5e8f\u5386\u904d\u7684\u601d\u60f3\u6765\u5efa\u6811\u3002</p> \u4e2d\u6587 \u82f1\u6587 \u6982\u5ff5"},{"location":"ZJU_CS/FDS/homework/#hw7_unionfind_set","title":"HW7 Union/Find set","text":"<p>\u6458\u8981</p> Knowledgeglossary <p>\u672c\u8282\u4f60\u9700\u8981\u5b66\u4e60\u5e76\u67e5\u96c6\u7684\u4e00\u4e9b\u57fa\u7840\u6982\u5ff5\u4e0e\u64cd\u4f5c\u3002</p> <p>\u51fd\u6570\u9898\u5145\u5206\u5c55\u73b0\u4e86\u9012\u5f52\u601d\u60f3\uff0c\u7f16\u7a0b\u9898\u662f\u5bf9\u4e4b\u524d\u77e5\u8bc6\u7684\u7efc\u5408\u4f7f\u7528</p> \u4e2d\u6587 \u82f1\u6587 \u6982\u5ff5 \u4e0d\u76f8\u4ea4\u96c6\u5408 disjoint set \u5e76\u67e5\u96c6 union-find set <ol> <li>In Union/Find algorithm, if Unions are done by size, the depth of any node must be no more than \\(N/2\\) , but not \\(O(logN)\\).</li> </ol> Tips <p>F \u5047\u8bbe\u6700\u521d\u6bcf\u4e2a\u8282\u70b9\u7684\u6df1\u5ea6\u90fd\u4e3a0\uff0c\u90a3\u4e48\u5728\u8fdb\u884cN-1\u6b21\u6309\u5927\u5c0f\u5408\u5e76\u540e\uff0c\u6bcf\u4e2a\u8282\u70b9\u7684\u6df1\u5ea6\u6700\u591a\u4e3a1\u3002\u56e0\u6b64\uff0c\u4efb\u610f\u8282\u70b9\u7684\u6df1\u5ea6\u4e0d\u4f1a\u8d85\u8fc7N/2\u3002 \u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u8fd9\u4e2a\u7ed3\u8bba\u662f\u5728\u6309\u5927\u5c0f\u5408\u5e76\u7684\u60c5\u51b5\u4e0b\u6210\u7acb\u7684\u3002\u5982\u679c\u4f7f\u7528\u5176\u4ed6\u5408\u5e76\u7b56\u7565\uff0c\u4f8b\u5982\u6309\u79e9\u5408\u5e76\uff08\u5c06\u6df1\u5ea6\u8f83\u5c0f\u7684\u6811\u5408\u5e76\u5230\u6df1\u5ea6\u8f83\u5927\u7684\u6811\u4e2d\uff09\uff0c\u90a3\u4e48\u8282\u70b9\u7684\u6df1\u5ea6\u53ef\u80fd\u4f1a\u66f4\u5c0f\uff0c\u751a\u81f3\u53ef\u80fd\u8fbe\u5230O(logN)\u3002</p> <ol> <li>The array representation of a disjoint set containing numbers 0 to 8 is given by { 1, -4, 1, 1, -3, 4, 4, 8, -2 }. Then to union the two sets which contain 6 and 8 (with union-by-size), the index of the resulting root and the value stored at the root are:</li> </ol> Tips <p>4 -5</p> <ol> <li>Let T be a tree created by union-by-size with N nodes, then the height of T can be .</li> </ol> Tips <p>at most \\(log(N) + 1\\)</p> <ol> <li>A relation R is defined on a set S. If for every element e in S, \"e R e\" is always true, then R is said to be reflexive over S.</li> </ol>"},{"location":"ZJU_CS/FDS/homework/#hw8_graph","title":"HW8 Graph","text":"<p>\u6458\u8981</p> Knowledgeglossary <p>\u672c\u8282\u4f60\u9700\u8981\u5b66\u4e60\u56fe\u7684\u4e00\u4e9b\u57fa\u7840\u6982\u5ff5\u4e0e\u64cd\u4f5c\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u6982\u5ff5\uff1a\u56fe\u8bba\u4e2d\u7684degree\u662f\u6307\u4e0e\u8be5\u8282\u70b9\u6240\u8fde\u63a5\u7684\u8fb9\u7684\u4e2a\u6570\uff0cBy contrast\uff0c \u6811\u4e2d\u7684degree\u662f\u6307\u5b50\u8282\u70b9\u7684\u4e2a\u6570</p> \u4e2d\u6587 \u82f1\u6587 \u6982\u5ff5 \u8fde\u901a\u56fe connected graph \u8fde\u901a\u5206\u91cf connected component \u8fd9\u4e2a\u6982\u5ff5\u5f88\u91cd\u8981\uff0c\u5bb9\u6613\u8bef\u89e3 \u62d3\u6251\u5e8f\u5217 topological order <ol> <li> <p>In a connected graph, the number of edges must be equal or greater than the number of vertices minus 1.</p> </li> <li> <p>A graph with 90 vertices and 20 edges must have at least __ connected component(s)</p> </li> </ol> Tips <p>70</p>"},{"location":"ZJU_CS/FDS/homework/#hw9_shortest_path","title":"HW9 Shortest_Path","text":"<p>\u6458\u8981</p> Knowledgeglossary <p>\u672c\u8282\u4f60\u9700\u8981\u638c\u63e1Dijkstra\u7b97\u6cd5\u4ee5\u53caFloyd\u7b97\u6cd5\u7684\u601d\u60f3\u4e0e\u5b9e\u73b0\u3002</p> <p>\u9700\u8981\u6ce8\u610f\u7684\u6982\u5ff5\uff1a\u56fe\u8bba\u4e2d\u7684degree\u662f\u6307\u4e0e\u8be5\u8282\u70b9\u6240\u8fde\u63a5\u7684\u8fb9\u7684\u4e2a\u6570\uff0cBy contrast\uff0c \u6811\u4e2d\u7684degree\u662f\u6307\u5b50\u8282\u70b9\u7684\u4e2a\u6570</p> \u4e2d\u6587 \u82f1\u6587 \u6982\u5ff5 <ol> <li>Let P be the shortest path from S to T. If the weight of every edge in the graph is incremented by 2, P will still be the shortest path from S to T.</li> </ol> <p>key</p> <p>F</p> <p>Because if shortest road has 6 nodes with 12 while 2<sup>nd</sup>-shortest road has 4 nodes with 13. After every edge incremented by 2. The last shortest road is 24 while last 2<sup>nd</sup>-shortest road is 21 which means it is the current shortest road!</p> <ol> <li>Use Dijkstra algorithm to find the shortest paths from 1 to every other vertices. In which order that the destinations must be obtained?</li> </ol>"},{"location":"ZJU_CS/FDS/homework/#hw10_mst_maxstream","title":"HW10 MST &amp; Maxstream","text":"<p>\u6458\u8981</p> Knowledgeglossary <p>\u672c\u6b21\u4f5c\u4e1a\uff0c\u4f60\u9700\u8981\u5bf9\u6700\u5c0f\u751f\u6210\u6811\uff08minimum spanning tree\uff09\u7684\u4e24\u4e2a\u7b97\u6cd5\u6e05\u6670\u7684\u8bb0\u5fc6\uff0c\u5173\u4e8e\u6700\u5927\u6d41\u5e94\u5f53\u5b66\u4f1a\u8ba1\u7b97\u3002</p> \u4e2d\u6587 \u82f1\u6587 \u6982\u5ff5 <ol> <li>The minimum spanning tree of any weighted graph ____</li> </ol> Tips <p>May not exits. Exit if it is connected.</p> <ol> <li>An example question about max stream.</li> </ol> Question <p></p>"},{"location":"ZJU_CS/FDS/homework/#hw11_dfs_insertionsort","title":"HW11 DFS &amp; InsertionSort","text":"<p>\u6458\u8981</p> Knowledgeglossary <p>[] finshed? 1. \u672c\u8282\u9700\u8981\u638c\u63e1'biconnected\"(\u91cd\u8fde\u63a5)\u76f8\u5173\u7684\u77e5\u8bc6 2. u is an articulation point if</p> <p>(1)  u is the root and has at least 2 children;  or (2)  u is not the root, and has at least 1 child such that  \\(Low(child) \\ge Num(u)\\) 3. Euler circuit: \u7b80\u5355\u6765\u8bf4\u5c31\u662f\u201c\u4e00\u7b14\u753b\u201d\u95ee\u9898\uff0c\u53ef\u770bEular path 4. \u4ee5\u53ca\u4f60\u9700\u8981\u5bf9dfs\u4ee5\u53ca\u6392\u5e8f\u6709\u719f\u7ec3\u638c\u63e1\uff08\u76f8\u4fe1\u5b66\u5230\u8fd9\u91cc\u5e94\u8be5\u6ca1\u6709\u4e0d\u719f\u7ec3\u7684\u4e86\u5427hhhh</p> \u82f1\u6587 \u4e2d\u6587 articulation point \u5173\u8282\u70b9 biconnected \u91cd\u8054\u901a acyclic graph \u65e0\u73af\u56fe <ol> <li>For a graph, if each vertex has an even degree or only two vertexes have odd degree, we can find a cycle that visits every edge exactly once</li> </ol> Tips <p>F</p> <p>It has to be a Euler Cycle, thus only if each vertex has even degrees\uff1bEuler Circuit -&gt; exact 2 vertices have odd degrees / all vertices have even degrees</p> <ol> <li>Apply DFS to a directed acyclic graph, and output the vertex before the end of each recursion. The output sequence will be:</li> </ol> Tips <p>reversely topologically sorted</p> <ol> <li>Graph G is an undirected completed graph of 20 nodes. Is there an Euler circuit in G? If not, in order to have an Euler circuit, what is the minimum number of edges which should be removed from G?</li> </ol> Tips <p>Each Node has exactly 19 degrees</p> <ul> <li> <p>Euler Circuit (Strong Form) requires every node to be even degrees</p> </li> <li> <p>Euler Tour (Weak Form) requires 0 or 2 odd degrees</p> </li> </ul> <p>Remove 1 edge, every 2 nodes will lose 1 degrees, so we lose 10 edges</p>"},{"location":"ZJU_CS/FDS/homework/#hw12_shellsort_heapsort_mergesort","title":"HW12 shellsort &amp; Heapsort &amp; Mergesort","text":"<p>\u6458\u8981</p> Knowledge <p>\u672c\u8282\u4f60\u5c06\u5b66\u4e60\u5230\u5404\u79cd\u6392\u5e8f\u7b97\u6cd5\u7684\u601d\u60f3\u4ee5\u53ca\u5b9e\u73b0\u3002\u5e76\u4e14\u9700\u8981\u638c\u63e1\u5404\u79cd\u6392\u5e8f\u7b97\u6cd5\u7684\u65f6\u95f4\u590d\u6742\u5ea6\u4ee5\u53ca\u7a7a\u95f4\u590d\u6742\u5ea6\u3002</p> <p>\u5176\u4e2d\u503c\u5f97\u6ce8\u610f\u7684\u662fshell sort\u548cheap sort\u7684\u5b9e\u73b0\uff0c\u4ee5\u53ca\u5bf9\u4e8equick sort\u7684\u7406\u89e3\u3002</p> <ol> <li>Shellsort\u7684\u5b9e\u73b0\u5982\u4e0b\uff1a</li> </ol> Shellsort <pre><code>// Shellsort\nvoid Shellsort( ElementType A[ ], int N ) \n{ \n    int  i, j, Increment; \n    ElementType  Tmp; \n    for ( Increment = N / 2; Increment &gt; 0; Increment /= 2 )  \n    /*h sequence */\n    for ( i = Increment; i &lt; N; i++ ) { /* insertion sort */\n        Tmp = A[ i ]; \n        for ( j = i; j &gt;= Increment; j - = Increment ) \n        if( Tmp &lt; A[ j - Increment ] ) \n            A[ j ] = A[ j - Increment ]; \n        else \n            break; \n        A[ j ] = Tmp; \n    } /* end for-I and for-Increment loops */\n}\n</code></pre> <ol> <li>Heapsort\u7684\u5b9e\u73b0\u5982\u4e0b\uff1a</li> </ol> Heapsort <pre><code>void PercDown( ElementType A[ ], int i, int N ) \n{ \n    int  Child; \n    ElementType  Tmp; \n    for ( Tmp = A[ i ]; LeftChild( i ) &lt; N; i = Child ) { \n        Child = LeftChild( i ); \n        if( Child != N - 1 &amp;&amp; A[ Child + 1 ] &gt; A[ Child ] ) \n            Child++; \n        if( Tmp &lt; A[ Child ] ) \n            A[ i ] = A[ Child ]; \n        else \n            break; \n    } \n    A[ i ] = Tmp; \n} \n\nvoid Heapsort( ElementType A[ ], int N ) \n{ \n    int  i; \n    for ( i = N / 2; i &gt;= 0; i-- ) /* BuildHeap */\n        PercDown( A, i, N ); \n    for ( i = N - 1; i &gt; 0; i-- ) { \n        Swap( &amp;A[ 0 ], &amp;A[ i ] ); /* DeleteMax */\n        PercDown( A, 0, i ); \n    } \n}\n</code></pre>"},{"location":"ZJU_CS/FDS/homework/#hw13_quicksort_radixsort","title":"HW13 QuickSort &amp; RadixSort","text":"<p>\u6458\u8981</p> Knowledgeglossary <p></p> \u82f1\u6587 \u4e2d\u6587 inversion \u9006\u5e8f\u5bf9 <ol> <li>If there are less than 20 inversions in an integer array, the Quick Sort will be the best method among Quick Sort, Heap Sort and Insertion Sort.</li> </ol> Tips <p>F</p> <p>\u9006\u5e8f\u5bf9\u7684\u6570\u91cf\u8d8a\u5c11\uff0c\u5feb\u6392\u7684\u6548\u7387\u8d8a\u9ad8\u3002\u5f53\u9006\u5e8f\u5bf9\u7684\u6570\u91cf\u4e3a0\u65f6\uff0c\u5feb\u6392\u7684\u6548\u7387\u6700\u9ad8\uff0c\u6b64\u65f6\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(NlogN)\u3002\u5f53\u9006\u5e8f\u5bf9\u7684\u6570\u91cf\u4e3aN(N-1)/2\u65f6\uff0c\u5feb\u6392\u7684\u6548\u7387\u6700\u4f4e\uff0c\u6b64\u65f6\u65f6\u95f4\u590d\u6742\u5ea6\u4e3aO(N^2)\u3002</p>"},{"location":"ZJU_CS/FDS/homework/#hw1415_hash","title":"HW14&amp;15 Hash","text":"<p>\u6458\u8981</p> Knowledgeglossary <p>\u672c\u8282\u4f60\u5c06\u5b66\u4e60hash\u7684\u4e00\u4e9b\u57fa\u7840\u6982\u5ff5\u4e0e\u64cd\u4f5c\u3002\u4e2a\u4eba\u8ba4\u4e3ahello-algo\u5b8c\u5168\u6db5\u76d6\u4e86\u4f60\u9700\u8981\u7406\u89e3\u7684\u5185\u5bb9\u3002</p> \u82f1\u6587 \u4e2d\u6587 <ol> <li> <p>\u8fd9\u4e2a\u9898\u6709\u70b9\u4e89\u8bae\uff0c\u6309\u7167\u9053\u7406\u6765\u8bb2\u5e73\u5747\u67e5\u627e\u65f6\u95f4\u590d\u6742\u5ea6\u662fO(1),\u5982\u679c\u6709\u51b2\u7a81\u7684\u8bdd\u53ef\u80fd\u4f1a\u9000\u5316\u5230O(N) </p> </li> <li> <p>Which of the following statements about HASH is true?</p> </li> </ol> The answer is D <p>A.the expected number of probes for insertions is greater than that for successful searches in linear probing method</p> <p>B.if the table size is prime and the table is at least half empty, a new element can always be inserted with quadratic probing</p> <p>C.in separate chaining method, if duplicate elements are allowed in the list, insertions are generally quicker than deletions</p> <p>D. all of the above</p> <ol> <li>Hash quadratic probing \u4f1a\u5728index\u7684\\(\\pm pow(i,2)\\)\u7684\u4f4d\u7f6e\u68c0\u67e5\u3002</li> <li>\u7b54\u6848\u662fB    </li> <li>\u7b54\u6848\u662fC    </li> </ol>"},{"location":"ZJU_CS/FDS/set/","title":"\u5e76\u67e5\u96c6","text":""},{"location":"ZJU_CS/FDS/set/#_2","title":"\u524d\u7f6e\u77e5\u8bc6","text":"<p>\u4e00\u4e2a\u5173\u7cfb R \u5b9a\u4e49\u5728\u96c6\u5408 S \u4e0a, \u8868\u793a\u4e3a\u5bf9\u4e8e\u6bcf\u4e00\u5bf9 \\((a,b),a,b\\in S\\), \\(aRb\\) \u8981\u4e48\u4e3a\u771f\u8981\u4e48\u4e3a\u5047. \u5982\u679c \\(aRb\\) \u4e3a\u771f\uff0c\u90a3\u4e48\u6211\u4eec\u79f0 \\(a\\) \u548c \\(b\\) \u6709\u5173\u7cfb\u3002</p> <p>\u7b49\u4ef7\u5173\u7cfb\u662f\u6ee1\u8db3\u81ea\u53cd\u6027(\\(\\forall a\\in S, aRa\\))\uff0c\u5bf9\u79f0\u6027(\\(aRb\\Leftrightarrow bRa\\))\uff0c\u4f20\u9012\u6027(\\(aRb, bRc \\Rightarrow aRc\\))\u7684\u5173\u7cfb\uff0c\u4e00\u822c\u7528 ~ \u8868\u793a\u7b49\u4ef7\u5173\u7cfb\u3002</p> <p>S \u4e2d\u7684\u4e24\u4e2a\u5143\u7d20 \\(x\\) \\(y\\) \u5728\u540c\u4e00\u4e2a\u7b49\u4ef7\u7c7b\u4e2d\u5f53\u4e14\u4ec5\u5f53 \\(a\\) ~ \\(b\\)</p>"},{"location":"ZJU_CS/FDS/set/#_3","title":"\u52a8\u6001\u7b49\u4ef7\u6027\u95ee\u9898","text":"<ul> <li>\u96c6\u5408\u7684\u5143\u7d20: \\(1,2,3\\ldots,N\\)</li> <li>\u96c6\u5408: \\(S_1,S_2,\\ldots\\) \u4e14 \\(S_i\\cap S_j=\\empty\\) (\u82e5 \\(i\\neq j\\)), \u5373\u96c6\u5408\u4e4b\u95f4\u4e0d\u76f8\u4ea4</li> <li>\u64cd\u4f5c:<ul> <li><code>Find(i)</code> \u8fd4\u56de\u7ed9\u5b9a\u5143\u7d20\u7684\u6240\u5728\u7684\u96c6\u5408\uff08\u7b49\u4ef7\u7c7b\uff09</li> <li><code>Union(i,j)</code> \u6c42\u5e76\u8fd0\u7b97\uff0c\u5c06\u542b\u6709 a \u548c b \u7684\u4e24\u4e2a\u7b49\u4ef7\u7c7b\u5408\u5e76\u4e3a\u4e00\u4e2a\u7b49\u4ef7\u7c7b  </li> </ul> </li> </ul>"},{"location":"ZJU_CS/FDS/set/#_4","title":"\u57fa\u672c\u6570\u636e\u7ed3\u6784","text":"<p>\u6211\u4eec\u7528\u6811\u6765\u8868\u793a\u6bcf\u4e00\u4e2a\u96c6\u5408\uff0c\u6811\u7684\u6839\u547d\u540d\u8fd9\u4e2a\u96c6\u5408\uff08\u4ee3\u8868\u5143\uff09\uff0c\u6811\u7684\u96c6\u5408\u6784\u6210\u4e86\u4e00\u4e2a\u68ee\u6797\u3002 \u521d\u59cb\u65f6\uff0c\u6bcf\u68f5\u6811\u90fd\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\u3002\u5f53\u9700\u8981\u6267\u884c <code>Union</code> \u64cd\u4f5c\u65f6\uff0c\u6211\u4eec\u5c06\u4e00\u4e2a\u8282\u70b9\u7684\u6839\u6307\u9488\u6307\u5411\u53e6\u4e00\u68f5\u6811\u7684\u6839\u8282\u70b9\u3002\u5f53\u9700\u8981\u6267\u884c <code>Find</code> \u64cd\u4f5c\u65f6\uff0c\u6211\u4eec\u53ea\u9700\u8981\u4ece\u5143\u7d20 X \u4e00\u76f4\u5411\u4e0a\u76f4\u5230\u6839\u4e3a\u6b62\u3002</p> <pre><code>void SetUnion ( DisjSet S, SetType Rt1, SetType Rt2 )\n{    \n    S [ Rt2 ] = Rt1 ;     \n}\nSetType Find ( ElementType X, DisjSet S )\n{   \n    for ( ; S[X] &gt; 0; X = S[X] );\n    return  X ;\n}\n</code></pre> <p>\u5b9e\u9645\u8fd0\u7528\u4e2d\uff0c<code>Union</code> \u548c <code>Find</code> \u64cd\u4f5c\u901a\u5e38\u6210\u5bf9\u51fa\u73b0:</p> <pre><code>/* Algorithm using union-find operations */\n{  Initialize  Si = { i }  for  i = 1, ..., 12 ;\n   for  ( k = 1; k &lt;= 9; k++ )  {  /* for each pair  i \uf0ba j */\n      if  ( Find( i ) != Find( j ) )\n          SetUnion( Find( i ), Find( j ) );\n   }\n}\n</code></pre>"},{"location":"ZJU_CS/FDS/set/#_5","title":"\u7075\u5de7\u6c42\u5e76\u7b97\u6cd5","text":"<ul> <li>\u6309\u5927\u5c0f\u6c42\u5e76 \u5373\u6bcf\u6b21\u5408\u5e76\u65f6\uff0c\u6211\u4eec\u6539\u53d8\u8f83\u5c0f\u7684\u6811 \u8bbe \\(T\\) \u662f\u6309\u5927\u5c0f\u5408\u5e76\u7684 \\(N\\) \u4e2a\u8282\u70b9\u7684\u6811\uff0c\u90a3\u4e48 \\(height(T)\\leq\\lfloor \\log_2N\\rfloor +1\\) (\u53ef\u7528\u5f52\u7eb3\u6cd5\u8bc1\u660e)  \u56e0\u6b64\u5bf9\u4e8e \\(N\\) \u4e2a <code>Union</code> \u64cd\u4f5c \\(M\\) \u4e2a <code>Find</code> \u64cd\u4f5c\uff0c\u6240\u7528\u65f6\u95f4\u4e3a \\(O(N+M\\log_2N)\\)</li> <li>\u6309\u9ad8\u5ea6\u6c42\u5e76 \u5373\u6bcf\u6b21\u5408\u5e76\u65f6\uff0c\u6211\u4eec\u6539\u53d8\u8f83\u77ee\u7684\u6811</li> </ul>"},{"location":"ZJU_CS/FDS/set/#_6","title":"\u8def\u5f84\u538b\u7f29","text":"<pre><code>SetType  Find ( ElementType  X, DisjSet  S )\n{   ElementType  root,  trail,  lead;\n    for ( root = X; S[ root ] &gt; 0; root = S[ root ] )\n        ;  /* find the root */\n    for ( trail = X; trail != root; trail = lead ) {\n       lead = S[ trail ] ;   \n       S[ trail ] = root ;   \n    }  /* collapsing */\n    return  root ;\n}\n</code></pre> <p>\u8def\u5f84\u538b\u7f29\u7684\u6548\u679c\u662f\uff0c\u4ece X \u5230\u6839\u7684\u8def\u5f84\u4e0a\u6bcf\u4e00\u4e2a\u8282\u70b9\u90fd\u4f7f\u5b83\u7684\u7236\u8282\u70b9\u53d8\u6210\u6839\u3002 \u8def\u5f84\u538b\u7f29\u4e0e\u6309\u5927\u5c0f\u6c42\u5e76\u5b8c\u5168\u517c\u5bb9\uff0c\u53ef\u4ee5\u540c\u65f6\u5b9e\u73b0\uff0c\u4f46\u4e0d\u80fd\u4e0e\u6309\u9ad8\u5ea6\u6c42\u5e76\uff08\u6709\u65f6\u79f0\u4e3a\u79e9\uff09</p>"},{"location":"ZJU_CS/FDS/set/#_7","title":"\u6309\u79e9\u6c42\u5e76\u548c\u8def\u5f84\u538b\u7f29\u7684\u6700\u574f\u60c5\u5f62","text":"<p>\u4ee4 \\(T(M,N)\\) \u6267\u884c \\(M\\geq N\\) \u6b21 <code>Find</code> \u548c \\(N-1\\) \u6b21 <code>Union</code> \u64cd\u4f5c\u7684\u6700\u574f\u7528\u65f6\u3002\u90a3\u4e48 \\(k_1M\\alpha(M,N)\\leq T(M,N)\\leq k_2 M\\alpha(M,N)\\) \u5bf9\u4e8e\u67d0\u4e2a\u6b63\u5e38\u6570 \\(k_1,k_2\\). \u5176\u4e2d \\(\\alpha(M,N)\\) \u662f Ackermann \u51fd\u6570.  </p> \\[ \\begin{align*} A(i,j)=\\left\\{ \\begin{matrix}2^j\\quad    &amp; i=1\\ and\\ j\\geq 1\\\\ A(i-1,2)\\quad &amp; i\\geq 2\\ and\\ j=1\\\\ A(i-1,A(i,j-1))\\ &amp; i\\geq 2\\ and\\ j\\geq 2 \\end{matrix}\\right. \\end{align*} \\] <p>Info</p> <p>\u5e76\u67e5\u96c6: the disjoint set  \u7b49\u4ef7\u5173\u7cfb: equivalence relations \u6309\u5927\u5c0f\u6c42\u5e76: union by size \u8def\u5f84\u538b\u7f29: path compression  </p>"},{"location":"ZJU_CS/FDS/sort/","title":"\u6392\u5e8f","text":"<p>\u6211\u4eec\u5047\u8bbe \"&lt;\" \"&gt;\" \u8fd0\u7b97\u7b26\u5b58\u5728\uff0c\u8fd9\u4e24\u79cd\u8fd0\u7b97\u662f\u4ec5\u6709\u7684\u5141\u8bb8\u5bf9\u8f93\u5165\u6570\u636e\u8fdb\u884c\u7684\u64cd\u4f5c\uff0c\u8fd9\u79f0\u4e3a\u57fa\u4e8e\u6bd4\u8f83\u7684\u6392\u5e8f. \u6211\u4eec\u5047\u5b9a N \u4e3a\u8981\u6392\u5e8f\u7684\u5143\u7d20\u4e2a\u6570\uff0c\u6570\u636e\u4ece\u4f4d\u7f6e 0 \u5f00\u59cb\u3002</p>"},{"location":"ZJU_CS/FDS/sort/#_2","title":"\u63d2\u5165\u6392\u5e8f","text":"<p>\u63d2\u5165\u6392\u5e8f\u6709 N-1 \u8d9f(pass), \u5bf9\u4e8e \\(P=1\\) \u5230 \\(P=N-1\\) \u8d9f\u6211\u4eec\u4fdd\u8bc1\u4f4d\u7f6e 0 \u5230\u4f4d\u7f6e \\(P-1\\) \u4e0a\u7684\u5143\u7d20\u662f\u5df2\u7ecf\u6392\u5e8f\u597d\u7684\uff0c\u800c\u7b2c \\(P\\) \u8d9f\u8981\u505a\u7684\u5c31\u662f\u5c06\u4f4d\u7f6e \\(P\\) \u7684\u5143\u7d20\u5411\u5de6\u79fb\u52a8\u5230\u5b83\u5728\u524d \\(P+1\\) \u4e2a\u5143\u7d20\u4e2d\u7684\u6b63\u786e\u4f4d\u7f6e\u4e0a\u3002  </p> <pre><code>void InsertionSort ( ElementType A[ ], int N ) \n{ \n    int j, P; \n    ElementType  Tmp; \n\n    for ( P = 1; P &lt; N; P++ ) { \n    Tmp = A[ P ];  /* the next coming card */\n    for ( j = P; j &gt; 0 &amp;&amp; A[ j - 1 ] &gt; Tmp; j-- ) \n          A[ j ] = A[ j - 1 ]; \n          /* shift sorted cards to provide a position \n                       for the new coming card */\n    A[ j ] = Tmp;  /* place the new card at the proper position */\n      }  /* end for-P-loop */\n}\n</code></pre> <ul> <li>\u6700\u4f73\u60c5\u51b5 - \u8f93\u5165\u6570\u636e\u662f\u5df2\u7ecf\u6392\u597d\u5e8f\u7684\uff0c\u90a3\u4e48\u8fd0\u884c\u65f6\u95f4\u4e3a \\(O(N)\\) </li> <li>\u6700\u574f\u60c5\u51b5 - \u8f93\u5165\u6570\u636e\u662f\u9006\u5e8f\u7684\uff0c\u90a3\u4e48\u8fd0\u884c\u65f6\u95f4\u4e3a \\(O(N^2)\\)</li> </ul>"},{"location":"ZJU_CS/FDS/sort/#_3","title":"\u7b80\u5355\u6392\u5e8f\u7b97\u6cd5\u7684\u4e0b\u754c","text":"<p>\u4e00\u4e2a\u9006\u5e8f\u662f\u6307\u6570\u7ec4\u4e2d \\(i&lt;j\\) \u4f46 \\(A[i]&gt;A[j]\\) \u7684\u5e8f\u5076 \\((A[i],A[j])\\) </p> <p>\u4ea4\u6362\u4e0d\u6309\u539f\u5e8f\u6392\u5217\u7684\u76f8\u90bb\u5143\u7d20\u4f1a\u6070\u597d\u6d88\u9664\u4e00\u4e2a\u9006\u5e8f\uff0c\u56e0\u6b64\u63d2\u5165\u6392\u5e8f\u7684\u8fd0\u884c\u65f6\u95f4\u4e3a \\(O(I+N)\\). \u5176\u4e2d \\(I\\) \u4e3a\u539f\u59cb\u6570\u7ec4\u4e2d\u7684\u9006\u5e8f\u6570\uff0c\u5f53\u9006\u5e8f\u6570\u8f83\u5c11\u65f6\u63d2\u5165\u6392\u5e8f\u4ee5\u7ebf\u6027\u65f6\u95f4\u8fd0\u884c\u3002</p> <p>\\(N\\) \u4e2a\u4e92\u5f02\u6570\u7684\u6570\u7ec4\u7684\u5e73\u5747\u9006\u5e8f\u6570\u4e3a \\(\\dfrac{N(N-1)}{4}\\) </p> <p>\u901a\u8fc7\u4ea4\u6362\u76f8\u90bb\u5143\u7d20\u8fdb\u884c\u6392\u5e8f\u7684\u4efb\u4f55\u7b97\u6cd5\u5e73\u5747\u9700\u8981 \\(\\Omega(N^2)\\) \u65f6\u95f4</p>"},{"location":"ZJU_CS/FDS/sort/#_4","title":"\u5e0c\u5c14\u6392\u5e8f","text":"<p>\u5e0c\u5c14\u6392\u5e8f\u4f7f\u7528\u4e00\u4e2a \\(h_1,h_2,\\ldots,h_t\\) \u7684\u589e\u91cf\u5e8f\u5217(\\(h_1=1\\)). \\(h_k\\)-sort \u7684\u4e00\u822c\u505a\u6cd5\u662f\uff0c\u5bf9\u4e8e \\(h_k,h_k+1,\\ldots,N-1\\) \u4e2d\u7684\u6bcf\u4e00\u4e2a\u4f4d\u7f6e \\(i\\), \u5c06\u5176\u5143\u7d20\u653e\u5230 \\(i,i-h_k,i-2h_k,\\ldots\\) \u4e2d\u95f4\u7684\u6b63\u786e\u4f4d\u7f6e\u4e0a\u3002\u76f8\u5f53\u4e8e\u5bf9 \\(h_k\\) \u4e2a\u72ec\u7acb\u7684\u5b50\u6570\u7ec4\u5404\u8fdb\u884c\u4e00\u6b21\u63d2\u5165\u6392\u5e8f\u3002\\(h_k\\)-sort \u4e4b\u540e\uff0c\u5bf9\u4e8e\u6bcf\u4e00\u4e2a \\(i\\) \u6211\u4eec\u90fd\u6709 \\(a_i\\leq a_{i+h_k}\\), \u6b64\u65f6\u6210\u79f0\u4e3a \\(h_k\\)-sorted. </p> <p>\u5e0c\u5c14\u6392\u5e8f\u7684\u4e00\u4e2a\u91cd\u8981\u6027\u8d28: \u4e00\u4e2a \\(h_k\\)-sorted \u7684\u6587\u4ef6\uff08\u6b64\u540e\u5c06\u662f \\(h_{k-1}\\)-sorted\uff09\u4fdd\u6301\u4ed6\u7684 \\(h_k\\)-sorted \u6027\u8d28\u3002  </p>"},{"location":"ZJU_CS/FDS/sort/#_5","title":"\u5e0c\u5c14\u589e\u91cf\u5e8f\u5217","text":"<p>\\(h_t=\\lfloor N/2 \\rfloor, h_k=\\lfloor h_{k+1}/2 \\rfloor\\)(\u53ef\u4ee5\u6709\u66f4\u597d\u7684\u589e\u91cf\u5e8f\u5217)</p> <pre><code>void Shellsort( ElementType A[ ], int N ) \n{ \n      int  i, j, Increment; \n      ElementType  Tmp; \n      for ( Increment = N / 2; Increment &gt; 0; Increment /= 2 )  \n    /*h sequence */\n    for ( i = Increment; i &lt; N; i++ ) { /* insertion sort */\n          Tmp = A[ i ]; \n          for ( j = i; j &gt;= Increment; j - = Increment ) \n        if( Tmp &lt; A[ j - Increment ] ) \n              A[ j ] = A[ j - Increment ]; \n        else \n              break; \n        A[ j ] = Tmp; \n    } /* end for-I and for-Increment loops */\n}\n</code></pre> <ul> <li> <p>\u6700\u574f\u60c5\u5f62\u5206\u6790  </p> <p>\u4f7f\u7528\u5e0c\u5c14\u589e\u91cf\u65f6\u7684\u5e0c\u5c14\u6392\u5e8f\u7684\u6700\u574f\u60c5\u5f62\u8fd0\u884c\u65f6\u95f4\u4e3a \\(\\Theta(N^2)\\) </p> </li> <li> <p>Hibbard \u589e\u91cf\u5e8f\u5217 \\(h_k= 2^k-1\\), \u4e14\u5176\u6700\u574f\u60c5\u5f62\u4e0b\u8fd0\u884c\u65f6\u95f4\u4e3a \\(O(N^{3/2})\\)</p> </li> </ul>"},{"location":"ZJU_CS/FDS/sort/#_6","title":"\u5806\u6392\u5e8f","text":"<p>\u5982\u679c\u6211\u4eec\u5148 <code>BuildHeap</code>, \u518d Delete N \u6b21\u6700\u5c0f\u5143\u7d20\uff0c\u8fd9\u6837\u9700\u8981\u591a\u4f7f\u7528\u4e00\u4e2a\u9644\u52a0\u6570\u7ec4\uff0c\u4f7f\u5f97\u5b58\u50a8\u9700\u6c42\u589e\u52a0\u4e00\u500d\u3002  </p> <p>\u6bcf\u6b21 <code>DeleteMin</code> \u540e\uff0c\u5806\u7684\u5927\u5c0f\u7f29\u5c0f\u4e86 1, \u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u7528\u5806\u4e2d\u6700\u540e\u7684\u5355\u5143\u6765\u5b58\u653e\u521a\u521a\u5220\u53bb\u7684\u5143\u7d20\u3002  </p> <p>\u6574\u4f53\u6d41\u7a0b\uff1a</p> <ul> <li>\u4ee5\u7ebf\u6027\u65f6\u95f4\u5efa\u4e00\u4e2a Max \u5806</li> <li>\u5c06\u5806\u4e2d\u6700\u540e\u5143\u7d20\u4e0e\u7b2c\u4e00\u4e2a\u5143\u7d20\u4ea4\u6362\uff0c\u7f29\u51cf\u5806\u7684\u5927\u5c0f\u5e76\u8fdb\u884c\u4e0b\u6ee4\u3002\u6267\u884c N-1 \u6b21 <code>DeleteMax</code> \u64cd\u4f5c  </li> <li>\u7b97\u6cd5\u7ec8\u6b62\u65f6\uff0c\u6570\u7ec4\u6309\u987a\u5e8f\u5373\u4e3a\u4ece\u5c0f\u5230\u5927\u7684\u6392\u5e8f\u7ed3\u679c</li> </ul> <pre><code>void Heapsort( ElementType A[ ], int N ) \n{  int i; \n    for ( i = N / 2; i &gt;= 0; i - - ) /* BuildHeap */ \n        PercDown( A, i, N ); \n    for ( i = N - 1; i &gt; 0; i - - ) { \n        Swap( &amp;A[ 0 ], &amp;A[ i ] ); /* DeleteMax */ \n        PercDown( A, 0, i ); \n    } \n}\n</code></pre> <p>\u6ce8\uff1a\u8fd9\u91cc\u7684\u5806\u6211\u4eec\u662f\u4ece 0 \u5f00\u59cb\u8ba1\u6570\u7684\uff0c\u56e0\u6b64\u5de6\u513f\u5b50\u5e94\u8be5\u662f <code>2*i+1</code> </p> <p>\u5bf9 N \u4e2a\u4e92\u5f02\u9879\u7684\u968f\u673a\u6392\u5217\u8fdb\u884c\u5806\u6392\u5e8f\uff0c\u5e73\u5747\u6bd4\u8f83\u6b21\u6570\u4e3a \\(2N\\log N-O(N\\log\\log N)\\)</p>"},{"location":"ZJU_CS/FDS/sort/#_7","title":"\u5f52\u5e76\u6392\u5e8f","text":"<p>\u57fa\u672c\u64cd\u4f5c\uff1a\u5408\u5e76\u4e24\u4e2a\u5df2\u6392\u5e8f\u7684\u8868\uff0c\u6211\u4eec\u53ef\u4ee5\u7528\u53cc\u6307\u9488\u7684\u65b9\u6cd5\u5728\u7ebf\u6027\u65f6\u95f4\u5185\u5b8c\u6210\u4e24\u4e2a\u8868\u7684\u5408\u5e76\uff0c\u5177\u4f53\u64cd\u4f5c\u5982\u4e0b</p> <ul> <li>\u53d6\u4e24\u4e2a\u8f93\u5165\u6570\u7ec4 A \u548c B, \u4e00\u4e2a\u8f93\u51fa\u6570\u7ec4 C, \u4ee5\u53ca\u4e09\u4e2a\u8ba1\u6570\u5668 Aptr, Bptr, Cptr, \u5206\u522b\u5bf9\u5e94\u6570\u7ec4\u7684\u5f00\u7aef\u3002</li> <li>\u6bcf\u6b21 <code>A[Aptr]</code> \u548c <code>B[Bptr]</code> \u4e2d\u7684\u8f83\u5c0f\u8005\u4f1a\u88ab\u62f7\u8d1d\u5230 C \u4e2d\u7684\u4e0b\u4e00\u4e2a\u4f4d\u7f6e\uff0c\uff0c\u76f8\u5173\u7684\u8ba1\u6570\u5668\u5411\u524d\u63a8\u8fdb\u4e00\u6b65\u3002</li> <li>\u5f53\u4e24\u4e2a\u8f93\u5165\u8868\u4e2d\u6709\u4e00\u4e2a\u7528\u5b8c\u65f6\uff0c\u5c06\u53e6\u4e00\u4e2a\u8868\u7684\u5269\u4f59\u90e8\u5206\u62f7\u8d1d\u5230 C \u4e2d\u3002</li> <li>\u6211\u4eec\u6700\u591a\u8fdb\u884c \\(N-1\\) \u6b21\u6bd4\u8f83\uff0c\u56e0\u6b64\u5408\u5e76\u65f6\u95f4\u663e\u7136\u662f\u7ebf\u6027\u7684\u3002</li> </ul> <p>\u56e0\u6b64\u5f52\u5e76\u6392\u5e8f\u7684\u6d41\u7a0b\u5c31\u662f\uff0c\u5982\u679c <code>N=1</code> \u90a3\u4e48\u53ea\u6709\u4e00\u4e2a\u5143\u7d20\u9700\u8981\u6392\u5e8f\uff0c\u7b54\u6848\u662f\u663e\u7136\u7684\uff1b\u5426\u5219\u9012\u5f52\u5730\u5c06\u524d\u534a\u90e8\u5206\u6570\u636e\u548c\u540e\u534a\u90e8\u5206\u6570\u636e\u5404\u81ea\u5f52\u5e76\u6392\u5e8f\uff0c\u5f97\u5230\u6392\u5e8f\u540e\u7684\u4e24\u90e8\u5206\u6570\u636e\uff0c\u7136\u540e\u4f7f\u7528\u521a\u521a\u63cf\u8ff0\u7684\u5408\u5e76\u64cd\u4f5c\u5c06\u8fd9\u4e24\u4e2a\u90e8\u5206\u5408\u5e76\u5230\u4e00\u8d77\u3002  </p> <p>\u9700\u8981\u6ce8\u610f\u7684\u662f\uff0c\u5982\u679c\u6211\u4eec\u6bcf\u6b21\u9012\u5f52\u8c03\u7528 Merge \u90fd\u5c40\u90e8\u58f0\u660e\u4e00\u4e2a\u4e34\u65f6\u6570\u7ec4\uff0c\u90a3\u4e48\u4efb\u610f\u65f6\u523b\u5c31\u4f1a\u6709 \\(\\log N\\) \u4e2a\u4e34\u65f6\u6570\u7ec4\u5904\u4e8e\u6d3b\u52a8\u671f\uff0c\u8fd9\u5bf9\u4e8e\u5c0f\u5185\u5b58\u7684\u673a\u5668\u662f\u81f4\u547d\u7684\u3002\u6ce8\u610f\u5230 Merge \u53ea\u5728\u6bcf\u6b21\u9012\u5f52\u8c03\u7528\u7684\u6700\u540e\u4e00\u884c\uff0c\u56e0\u6b64\u4efb\u4f55\u65f6\u523b\u53ea\u9700\u8981\u4e00\u4e2a\u4e34\u65f6\u6570\u7ec4\u6d3b\u52a8\uff0c\u800c\u4e14\u53ef\u4ee5\u4f7f\u7528\u8be5\u4e34\u65f6\u6570\u7ec4\u7684\u4efb\u610f\u90e8\u5206\uff0c\u8fd9\u6837\u8282\u7ea6\u4e86\u7a7a\u95f4\u3002</p> <pre><code>void MSort( ElementType A[ ], ElementType TmpArray[ ], \n        int Left, int Right ) \n{   int  Center; \n    if ( Left &lt; Right ) {  /* if there are elements to be sorted */\n    Center = ( Left + Right ) / 2; \n    MSort( A, TmpArray, Left, Center );     /* T( N / 2 ) */\n    MSort( A, TmpArray, Center + 1, Right );    /* T( N / 2 ) */\n    Merge( A, TmpArray, Left, Center + 1, Right );  /* O( N ) */\n    } \n} \n\nvoid Mergesort( ElementType A[ ], int N ) \n{   ElementType  *TmpArray;  /* need O(N) extra space */\n    TmpArray = malloc( N * sizeof( ElementType ) ); \n    if ( TmpArray != NULL ) { \n    MSort( A, TmpArray, 0, N - 1 ); \n    free( TmpArray ); \n    } \n    else  FatalError( \"No space for tmp array!!!\" ); \n}\n/* Lpos = start of left half, Rpos = start of right half */ \nvoid Merge( ElementType A[ ], ElementType TmpArray[ ], \n           int Lpos, int Rpos, int RightEnd ) \n{   int  i, LeftEnd, NumElements, TmpPos; \n    LeftEnd = Rpos - 1; \n    TmpPos = Lpos; \n    NumElements = RightEnd - Lpos + 1; \n    while( Lpos &lt;= LeftEnd &amp;&amp; Rpos &lt;= RightEnd ) /* main loop */ \n        if ( A[ Lpos ] &lt;= A[ Rpos ] ) \n    TmpArray[ TmpPos++ ] = A[ Lpos++ ]; \n        else \n    TmpArray[ TmpPos++ ] = A[ Rpos++ ]; \n    while( Lpos &lt;= LeftEnd ) /* Copy rest of first half */ \n        TmpArray[ TmpPos++ ] = A[ Lpos++ ]; \n    while( Rpos &lt;= RightEnd ) /* Copy rest of second half */ \n        TmpArray[ TmpPos++ ] = A[ Rpos++ ]; \n    for( i = 0; i &lt; NumElements; i++, RightEnd - - ) \n         /* Copy TmpArray back */ \n        A[ RightEnd ] = TmpArray[ RightEnd ]; \n}\n</code></pre> <ul> <li>\u8fd0\u884c\u65f6\u95f4\u5206\u6790  </li> </ul> \\[ \\begin{align*} T(1) &amp; = 1\\\\ T(N) &amp; = 2T(N/2)+O(N) \\\\     &amp; = 2^kT(N/2^k) + k*O(N)\\\\     &amp; = N *T(1) +\\log N *O(N)\\\\     &amp; = O(N+N\\log N) \\end{align*} \\] <p>\u6ce8\uff1aMergesort \u9700\u8981\u7ebf\u6027\u5916\u90e8\u5185\u5b58\uff0c\u590d\u5236\u6570\u7ec4\u7f13\u6162\uff0c\u56e0\u6b64\u4e0d\u9002\u5408\u7528\u4e8e\u5185\u90e8\u6392\u5e8f\uff0c\u4f46\u5bf9\u4e8e\u5916\u90e8\u6392\u5e8f\u662f\u6709\u7528\u7684\u3002</p>"},{"location":"ZJU_CS/FDS/sort/#_8","title":"\u5feb\u901f\u6392\u5e8f","text":"<p>\u5feb\u901f\u6392\u5e8f\u662f\u5728\u5b9e\u8df5\u4e2d\u5df2\u77e5\u7684\u6700\u5feb\u7684\u6392\u5e8f\u7b97\u6cd5\uff0c\u5e73\u5747\u8fd0\u884c\u65f6\u95f4\u662f \\(O(N\\log N)\\) \u5feb\u901f\u6392\u5e8f\u7684\u7b97\u6cd5\u6d41\u7a0b\uff1a\uff08\u5c06\u6570\u7ec4 S \u6392\u5e8f\uff09</p> <ul> <li>\u5982\u679c S \u4e2d\u7684\u5143\u7d20\u4e2a\u6570\u662f 0 \u6216\u8005 1 \u5219\u8fd4\u56de</li> <li>\u4ece S \u4e2d\u53d6\u4efb\u610f\u5143\u7d20\u4e3a\u4e3b\u5143</li> <li>\u5c06 \\(S-\\{v\\}\\) \u5206\u4e3a\u4e24\u4e2a\u4e0d\u76f8\u4ea4\u7684\u96c6\u5408 \\(S_1=\\{x\\in S-\\{v\\}|x\\leq v\\}, S_2=\\{x\\in S-\\{v\\}|x\\geq v\\}\\) </li> <li>\u8fd4\u56de \\(quicksort(S_1), v, quicksort(S_2)\\) </li> </ul> <p>\u5bf9\u4e8e\u4e0d\u540c\u4e3b\u5143\u7684\u9009\u53d6\uff0c\u5206\u5272\u7684\u63cf\u8ff0\u4e0d\u662f\u552f\u4e00\u7684\u3002</p>"},{"location":"ZJU_CS/FDS/sort/#_9","title":"\u9009\u53d6\u4e3b\u5143","text":"<ul> <li>\u9519\u8bef\u7684\u65b9\u6cd5 <code>Pivot=A[0]</code> \u8fd9\u6837\u5982\u679c\u8f93\u5165\u662f\u987a\u5e8f\u6216\u8005\u53cd\u5e8f\u7684\uff0c\u90a3\u4e48\u6bcf\u6b21\u5212\u5206\u6240\u6709\u5143\u7d20\u5168\u90e8\u843d\u5165 \\(S_1\\) \u6216\u8005 \\(S_2\\), \u9009\u53d6\u4e3b\u5143\u5e76\u6ca1\u6709\u5e26\u6765\u4efb\u4f55\u5e2e\u52a9\uff0c\u5b8c\u6210\u6392\u5e8f\u9700\u8981 \\(O(N^2)\\) \u7684\u65f6\u95f4\u3002  </li> <li>\u5b89\u5168\u505a\u6cd5 <code>Pivot = random select from A[]</code> \u4f46\u968f\u673a\u6570\u7684\u4ea7\u751f\u662f\u6602\u8d35\u7684  </li> <li>\u4e09\u6570\u4e2d\u503c\u5206\u5272\u6cd5 <code>Pivot = median(left, center, right)</code> \u4e00\u7ec4 N \u4e2a\u6570\u7684\u4e2d\u503c\u662f\u7b2c \\(\\lceil N/2 \\rceil\\) \u5927\u7684\u6570\uff0c\u4e3b\u5143\u6700\u597d\u662f\u9009\u62e9\u4e2d\u503c\uff0c\u4f46\u8fd9\u5f88\u96be\u7b97\u51fa\uff0c\u800c\u4e14\u4f1a\u660e\u663e\u51cf\u6162\u6392\u5e8f\u7684\u901f\u5ea6\u3002\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u5de6\u7aef\u3001\u53f3\u7aef\u548c\u4e2d\u5fc3\u4f4d\u7f6e\u4e0a\u7684\u4e09\u4e2a\u5143\u7d20\u7684\u4e2d\u503c\u4f5c\u4e3a\u4e3b\u5143\u3002 \u8fd9\u6837\u6d88\u9664\u4e86\u9519\u8bef\u65b9\u6cd5\u4e2d\u7684\u6700\u574f\u60c5\u5f62\uff0c\u51cf\u5c11\u4e86\u5feb\u901f\u6392\u5e8f\u5927\u6982 5% \u7684\u8fd0\u884c\u65f6\u95f4\u3002  </li> </ul>"},{"location":"ZJU_CS/FDS/sort/#_10","title":"\u5212\u5206\u7b56\u7565","text":"<p>\u9996\u5148\u6211\u4eec\u5c06\u4e3b\u5143\u548c\u6700\u540e\u7684\u5143\u7d20\u4ea4\u6362\uff0c\u4f7f\u5f97\u4e3b\u5143\u79bb\u5f00\u5c06\u8981\u5206\u5272\u7684\u6570\u636e\u6bb5\uff0c\u968f\u540e i \u4ece\u7b2c\u4e00\u4e2a\u5143\u7d20\u5f00\u59cb\uff0cj \u4ece\u5012\u6570\u7b2c\u4e8c\u4e2a\u5143\u7d20\u5f00\u59cb\u3002\uff08\u5047\u8bbe\u6240\u6709\u5143\u7d20\u4e92\u5f02\uff09  </p> <ul> <li>\u5f53 i \u5728 j \u7684\u5de6\u8fb9\u65f6\uff0c\u6211\u4eec\u5c06 i \u53f3\u79fb\uff0c\u79fb\u8fc7\u90a3\u4e9b\u5c0f\u4e8e\u4e3b\u5143\u7684\u5143\u7d20\uff0c\u5e76\u5c06 j \u5de6\u79fb\uff0c\u79fb\u8fc7\u90a3\u4e9b\u5927\u4e8e\u4e3b\u5143\u7684\u5143\u7d20\u3002</li> <li>\u5f53 i \u548c j \u505c\u6b62\u65f6\uff0ci \u6307\u5411\u4e00\u4e2a\u5927\u5143\u7d20\u800c j \u6307\u5411\u4e00\u4e2a\u5c0f\u5143\u7d20\uff0c\u5982\u679c i \u5728 j \u7684\u5de6\u8fb9\u90a3\u4e48\u5c06\u8fd9\u4e24\u4e2a\u5143\u7d20\u4e92\u6362\u3002</li> <li>\u76f4\u5230 i \u548c j \u5f7c\u6b64\u4ea4\u9519\u65f6\uff0c\u505c\u6b62\u4ea4\u6362</li> <li>\u5c06 i \u548c\u4e3b\u5143\u4ea4\u6362</li> </ul> <p>\u5bf9\u4e8e\u90a3\u4e9b\u7b49\u4e8e\u4e3b\u5143\u7684\u5173\u952e\u5b57\uff0c\u6211\u4eec\u91c7\u7528\u505c\u6b62 i j \u5e76\u4ea4\u6362\u7684\u7b56\u7565\u3002\u56e0\u4e3a\u82e5 i j \u4e0d\u505c\u6b62\uff0c\u5bf9\u4e8e\u6570\u7ec4\u4e2d\u6240\u6709\u5173\u952e\u5b57\u90fd\u76f8\u540c\u7684\u60c5\u51b5\uff0c\u6211\u4eec\u9700\u8981\u6709\u7a0b\u5e8f\u9632\u6b62 i j \u8d85\u51fa\u6570\u7ec4\u7684\u754c\u9650\u3002\u6700\u540e\u6211\u4eec\u4f1a\u628a\u4e3b\u5143\u4ea4\u6362\u5230 i \u7684\u6700\u540e\u4f4d\u7f6e\u4e0a\uff0c\u4e5f\u5c31\u662f\u5012\u6570\u7b2c\u4e8c\u4e2a\u4f4d\u7f6e\uff0c\u8fd9\u6837\u6211\u4eec\u53c8\u9677\u5165\u4e86\u6700\u574f\u60c5\u51b5\u3002</p>"},{"location":"ZJU_CS/FDS/sort/#_11","title":"\u5c0f\u6570\u7ec4","text":"<p>\u5bf9\u4e8e\u5f88\u5c0f\u7684\u6570\u7ec4(\\(N\\leq 20\\))\u5feb\u901f\u6392\u5e8f\u4e0d\u5982\u63d2\u5165\u6392\u5e8f\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u8bbe\u7f6e\u4e00\u4e2a\u622a\u6b62\u8303\u56f4 Cutoff(e.g. 10). \u5f53 N \u5c0f\u4e8e\u9608\u503c\u7684\u65f6\u5019\u91c7\u7528\u63d2\u5165\u6392\u5e8f.  </p>"},{"location":"ZJU_CS/FDS/sort/#_12","title":"\u5b9e\u73b0","text":"<pre><code>void  Quicksort( ElementType A[ ], int N ) \n{ \n    Qsort( A, 0, N - 1 ); \n    /* A:   the array   */\n    /* 0:   Left index  */\n    /* N \u2013 1: Right index   */\n}\n/* Return median of Left, Center, and Right */ \n/* Order these and hide the pivot */ \n\nElementType Median3( ElementType A[ ], int Left, int Right ) \n{ \n    int  Center = ( Left + Right ) / 2; \n    if ( A[ Left ] &gt; A[ Center ] ) \n        Swap( &amp;A[ Left ], &amp;A[ Center ] ); \n    if ( A[ Left ] &gt; A[ Right ] ) \n        Swap( &amp;A[ Left ], &amp;A[ Right ] ); \n    if ( A[ Center ] &gt; A[ Right ] ) \n        Swap( &amp;A[ Center ], &amp;A[ Right ] ); \n    /* Invariant: A[ Left ] &lt;= A[ Center ] &lt;= A[ Right ] */ \n    Swap( &amp;A[ Center ], &amp;A[ Right - 1 ] ); /* Hide pivot */ \n    /* only need to sort A[ Left + 1 ] \u2026 A[ Right \u2013 2 ] */\n    return  A[ Right - 1 ];  /* Return pivot */ \n}\nvoid  Qsort( ElementType A[ ], int Left, int Right ) \n{   int  i,  j; \n    ElementType  Pivot; \n    if ( Left + Cutoff &lt;= Right ) {  /* if the sequence is not too short */\n        Pivot = Median3( A, Left, Right );  /* select pivot */\n        i = Left;     j = Right \u2013 1;  /* why not set Left+1 and Right-2? */\n        for( ; ; ) { \n     while ( A[ + +i ] &lt; Pivot ) { }  /* scan from left */\n     while ( A[ \u2013 \u2013j ] &gt; Pivot ) { }  /* scan from right */\n     if ( i &lt; j ) \n        Swap( &amp;A[ i ], &amp;A[ j ] );  /* adjust partition */\n     else     break;  /* partition done */\n        } \n        Swap( &amp;A[ i ], &amp;A[ Right - 1 ] ); /* restore pivot */ \n        Qsort( A, Left, i - 1 );      /* recursively sort left part */\n        Qsort( A, i + 1, Right );   /* recursively sort right part */\n    }  /* end if - the sequence is long */\n    else /* do an insertion sort on the short subarray */ \n        InsertionSort( A + Left, Right - Left + 1 );\n}\n</code></pre> <ul> <li>\u5728\u6700\u5f00\u59cb\u9009\u53d6\u4e3b\u5143\u65f6\uff0c\u6211\u4eec\u5c06 <code>A[left],A[mid],A[Right]</code> \u8fdb\u884c\u6392\u5e8f\u3002\u8fd9\u6837\u7684\u8bdd\u6211\u4eec\u5c06\u8f83\u5c0f\u503c\u653e\u5728\u4e86\u6700\u5de6\u8fb9\uff0c\u8f83\u5927\u503c\u653e\u5728\u4e86\u6700\u53f3\u8fb9\uff0c\u8fd9\u7b26\u5408\u5206\u5272\u7684\u8981\u6c42\u3002\u6b64\u5916\u7531\u4e8e <code>A[left]</code> \u6bd4\u4e3b\u5143\u5c0f\uff0c\u6211\u4eec\u4e0d\u7528\u62c5\u5fc3 j \u8d8a\u754c\u3002</li> </ul>"},{"location":"ZJU_CS/FDS/sort/#_13","title":"\u590d\u6742\u5ea6\u5206\u6790","text":"<p>\\(T(N)=T(i)+T(N-i-1+)+cN\\) \u5176\u4e2d \\(i=|S_1|\\) </p> <ul> <li>\u6700\u574f\u60c5\u5f62\uff1a\u4e3b\u5143\u59cb\u7ec8\u662f\u6700\u5c0f\u5143\u7d20\uff0c\u6b64\u65f6 \\(i=0\\) \u5219\u9012\u63a8\u5173\u7cfb\u4e3a \\(T(N)=T(N-1)+cN,N&gt;1\\) \u90a3\u4e48 \\(T(N)=T(1)+d\\sum\\limits_{i=2}^N i=O(N^2)\\) </li> <li>\u6700\u597d\u60c5\u5f62\uff1a\u4e3b\u5143\u6b63\u597d\u4f4d\u4e8e\u4e2d\u95f4 \\(T(N)=2T(N/2)+cN\\Rightarrow T(N)=O(N\\log N)\\) </li> <li>\u5e73\u5747\u60c5\u5f62\uff1a\\(T(N)=\\dfrac{2}{N}\\sum\\limits_{j=0}^{N-1}T(j)+cN\\Rightarrow T(N)=O(N\\log N)\\)</li> </ul>"},{"location":"ZJU_CS/FDS/sort/#_14","title":"\u5927\u578b\u7ed3\u6784\u7684\u6392\u5e8f","text":"<p>\u4ea4\u6362\u4e24\u4e2a\u5927\u578b\u7684\u7ed3\u6784\u53ef\u80fd\u662f\u975e\u5e38\u6602\u8d35\u7684\uff0c\u56e0\u6b64\u6211\u4eec\u8ba9\u8f93\u5165\u6570\u7ec4\u5305\u542b\u6307\u5411\u7ed3\u6784\u7684\u6307\u9488\uff0c\u901a\u8fc7\u6bd4\u8f83\u6307\u9488\u6307\u5411\u7684\u5173\u952e\u5b57\uff0c\u5fc5\u8981\u65f6\u4ea4\u6362\u6307\u9488\u6765\u8fdb\u884c\u6392\u5e8f\u3002</p>"},{"location":"ZJU_CS/FDS/sort/#_15","title":"\u6392\u5e8f\u7684\u4e00\u822c\u4e0b\u754c","text":"<p>\u53ea\u4f7f\u7528\u6bd4\u8f83\u7684\u4efb\u610f\u6392\u5e8f\u7b97\u6cd5\u6700\u574f\u60c5\u5f62\u4e0b\u90fd\u9700\u8981 \\(\\Omega(N\\log  N)\\) </p> <p>\u4f7f\u7528\u51b3\u7b56\u6811\u8bc1\u660e\uff1a\u5171 \\(N!\\) \u79cd\u6392\u5e8f\u53ef\u80fd\uff0c\u56e0\u6b64\u51b3\u7b56\u4e8c\u53c9\u6811\u6709 \\(N!\\) \u7247\u53f6\u5b50\uff0c\u5219\u6811\u7684\u6df1\u5ea6\u81f3\u5c11\u4e3a \\(\\log(N!)=\\Omega(N\\log N)\\) </p>"},{"location":"ZJU_CS/FDS/sort/#_16","title":"\u6876\u6392\u5e8f","text":"<p>\u82e5\u8f93\u5165\u6570\u636e \\(A_1,A_2,\\ldots,A_N\\) \u90fd\u5c0f\u4e8e \\(M\\), \u90a3\u4e48\u6211\u4eec\u53ef\u4ee5\u7528\u4e00\u4e2a\u5927\u5c0f\u4e3a \\(M\\) \u7684 <code>Count</code> \u6570\u7ec4\uff0c\u521d\u59cb\u5316\u4e3a\u5168 0. \u4e8e\u662f <code>Count</code> \u6709 \\(M\\) \u4e2a\u6876\uff0c\u8bfb\u5165\u5230 \\(A_i\\) \u65f6 <code>Count[Ai]</code> \u81ea\u589e\u4e00\u3002\u6240\u6709\u6570\u636e\u8bfb\u5b8c\u540e\u626b\u63cf\u6570\u7ec4 <code>Count</code> \u6253\u5370\u6392\u5e8f\u540e\u7684\u8868\u3002  </p> <pre><code>{\n    initialize count[ ];\n    while (read in a student\u2019s record)\n        insert to list count[stdnt.grade];\n    for (i=0; i&lt;M; i++) {\n        if (count[i])\n            output list count[i];\n    }\n}\n</code></pre> <p>\\(O(M+N)\\)</p> <p>LSB MSB</p>"},{"location":"ZJU_CS/FDS/tree/","title":"\u6811","text":""},{"location":"ZJU_CS/FDS/tree/#_2","title":"\u9884\u5907\u77e5\u8bc6","text":""},{"location":"ZJU_CS/FDS/tree/#_3","title":"\u57fa\u672c\u6982\u5ff5","text":"<ul> <li>\u6811\u662f\u4e00\u4e2a\u8282\u70b9\u7684\u96c6\u5408\u3002\u5f53\u96c6\u5408\u975e\u7a7a\u65f6\uff0c\u6811\u5305\u62ec<ul> <li>\u6839</li> <li>0 \u6216\u591a\u4e2a\u975e\u7a7a\u7684\u5b50\u6811 \\(T_1,T_2,\\ldots,T_k\\)\uff0c\u8fd9\u4e9b\u5b50\u6811\u4e2d\u6bcf\u4e00\u68f5\u5b50\u6811\u90fd\u88ab\u6765\u81ea\u6839 r \u7684\u4e00\u6761\u6709\u5411\u7684\u8fb9\u6240\u8fde\u63a5\u3002</li> </ul> </li> <li>\u6bcf\u4e00\u68f5\u5b50\u6811\u7684\u6839\u53eb\u505a\u6839 r \u7684\u513f\u5b50\uff0c\u800c r \u662f\u6bcf\u4e00\u68f5\u5b50\u6811\u7684\u6839\u7684\u7236\u4eb2\u3002</li> <li>\u4e00\u68f5\u6811\u662f \\(N\\) \u4e2a\u8282\u70b9\u548c \\(N-1\\) \u6761\u8fb9\u7684\u96c6\u5408\u3002</li> <li>\u6ca1\u6709\u513f\u5b50\u7684\u8282\u70b9\u79f0\u4e3a\u6811\u53f6</li> <li>\u5177\u6709\u76f8\u540c\u7236\u4eb2\u7684\u8282\u70b9\u79f0\u4e3a\u5144\u5f1f</li> <li>\u4e00\u4e2a\u70b9\u7684\u5ea6\uff0c\u662f\u8fd9\u4e2a\u70b9\u7684\u513f\u5b50\u6570\u91cf</li> <li>\u4e00\u68f5\u6811\u7684\u5ea6\uff0c\u662f\u8fd9\u68f5\u6811\u91cc\u70b9\u7684\u5ea6\u6570\u7684\u6700\u5927\u503c\uff0c\u5373 \\(\\max\\limits_{node\\in tree}\\{deg(node)\\}\\) </li> <li>\u4ece\u8282\u70b9 \\(n_1\\) \u5230 \\(n_k\\) \u7684\u8def\u5f84\u5b9a\u4e49\u4e3a \\(n_1,n_2,\\ldots,n_k\\) \u7684\u4e00\u4e2a\u5e8f\u5217\uff0c\u4f7f\u5f97\u5bf9\u4e8e \\(1\\leq i &lt; k\\) \u8282\u70b9 \\(n_i\\) \u662f \\(n_{i+1}\\) \u7684\u7236\u4eb2\u3002\u8fd9\u6761\u8def\u5f84\u662f\u552f\u4e00\u7684\u3002</li> <li>\u8def\u5f84\u7684\u957f\u5ea6\u5c31\u662f\u8def\u5f84\u4e0a\u7684\u8fb9\u7684\u6570\u91cf</li> <li>\u5bf9\u4e8e\u4efb\u610f\u8282\u70b9 \\(n_i\\), \\(n_i\\) \u7684\u6df1\u5ea6\u4e3a\u4ece\u6839\u5230 \\(n_i\\) \u7684\u552f\u4e00\u8def\u5f84\u7684\u957f\u5ea6\u3002</li> <li>\u5bf9\u4e8e\u4efb\u610f\u8282\u70b9 \\(n_i\\), \\(n_i\\) \u7684\u9ad8\u5ea6\u4e3a\u4ece \\(n_i\\) \u5230\u4e00\u7247\u6811\u53f6\u7684\u6700\u957f\u8def\u5f84\u7684\u957f\u5ea6\u3002</li> <li>\u4e00\u68f5\u6811\u7684\u9ad8\u5ea6/\u6df1\u5ea6\uff1a\u6839\u7684\u9ad8\u5ea6</li> <li>\u5982\u679c\u5b58\u5728\u4ece \\(n_1\\) \u5230 \\(n_2\\) \u7684\u4e00\u6761\u8def\u5f84\uff0c\u90a3\u4e48 \\(n_1\\) \u662f \\(n_2\\) \u7684\u4e00\u4f4d\u7956\u5148\uff0c\u800c \\(n_2\\) \u662f \\(n_1\\) \u7684\u4e00\u4e2a\u540e\u88d4\uff0c\u5982\u679c \\(n_1\\neq n_2\\) \u79f0\u4e3a\u771f\u7956\u5148\u548c\u771f\u540e\u88d4\u3002</li> </ul>"},{"location":"ZJU_CS/FDS/tree/#_4","title":"\u5b9e\u73b0","text":"<p>\u6211\u4eec\u8fd9\u91cc\u4f7f\u7528 FirstChild-NextSibling Representation, \u5c06\u6bcf\u4e2a\u8282\u70b9\u7684\u6240\u6709\u513f\u5b50\u653e\u5728\u6811\u8282\u70b9\u7684\u94fe\u8868\u4e2d</p> <pre><code>typedef struct TreeNode *PrtToNode;\n\nstruct Tree Node {\n    ElementType Element;\n    PtrToNode FirstChild;\n    PtrToNode NextSibling;\n}\n</code></pre>"},{"location":"ZJU_CS/FDS/tree/#_5","title":"\u4e8c\u53c9\u6811","text":"<p>\u4e8c\u53c9\u6811\u662f\u4e00\u68f5\u6811\uff0c\u5176\u4e2d\u6bcf\u4e2a\u8282\u70b9\u7684\u513f\u5b50\u4e0d\u80fd\u591a\u4e8e\u4e24\u4e2a\u3002</p>"},{"location":"ZJU_CS/FDS/tree/#_6","title":"\u8868\u8fbe\u5f0f\u6811","text":"<p>\u8868\u8fbe\u5f0f\u6811\u7684\u6811\u53f6\u662f\u64cd\u4f5c\u6570\uff0c\u6bd4\u5982\u5e38\u6570\u6216\u53d8\u91cf\uff0c\u800c\u5176\u4ed6\u7684\u8282\u70b9\u4e3a\u64cd\u4f5c\u7b26\u3002\u56e0\u4e3a\u6211\u4eec\u7684\u64cd\u4f5c\u7b26\u4e00\u822c\u662f\u4e8c\u5143\u7684\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u5f97\u5230\u4e00\u68f5\u4e8c\u53c9\u6811\u3002\u5982\u679c\u6709\u5355\u76ee\u64cd\u4f5c\u7b26\uff0c\u90a3\u4e48\u8282\u70b9\u5c31\u53ea\u6709\u4e00\u4e2a\u513f\u5b50\u3002</p> Example <p>\\(A+B*C/D\\) \u8868\u793a\u5982\u4e0b\uff1a  </p>"},{"location":"ZJU_CS/FDS/tree/#_7","title":"\u6811\u7684\u904d\u5386","text":"<p>\u6811\u7684\u904d\u5386\u5373\u6bcf\u4e2a\u8282\u70b9\u8bbf\u95ee\u4e00\u6b21</p> <ul> <li>\u524d\u5e8f\u904d\u5386  </li> </ul> <pre><code>void  preorder ( tree_ptr  tree )\n{  if  ( tree )   {\n        visit ( tree );\n        for (each child C of tree )\n            preorder ( C );\n    }\n}\n</code></pre> <ul> <li>\u540e\u5e8f\u904d\u5386  </li> </ul> <pre><code>void  postorder ( tree_ptr  tree )\n{  if  ( tree )   {\n        for (each child C of tree )\n            postorder ( C );\n        visit ( tree );\n    }\n}\n</code></pre> <ul> <li>\u5c42\u5e8f\u904d\u5386  </li> </ul> <pre><code>void  levelorder ( tree_ptr  tree )\n{   enqueue ( tree );\n    while (queue is not empty) {\n        visit ( T = dequeue ( ) );\n        for (each child C of T )\n            enqueue ( C );\n    }\n}\n</code></pre> <ul> <li>\u4e2d\u5e8f\u904d\u5386  </li> </ul> <pre><code>void  inorder ( tree_ptr  tree )\n{  if  ( tree )   {\n        inorder ( tree-&gt;Left );\n        visit ( tree-&gt;Element );\n        inorder ( tree-&gt;Right );\n   }\n}\n</code></pre> Example <p>  \u4e2d\u5e8f\u904d\u5386: \\(A+B*C/D\\)  \u524d\u5e8f\u904d\u5386: \\(+A/*BCD\\) * \u540e\u5e8f\u904d\u5386: \\(ABC*D/+\\)</p>"},{"location":"ZJU_CS/FDS/tree/#_8","title":"\u7ebf\u7d22\u4e8c\u53c9\u6811","text":"<p>\u89c4\u5219: </p> <ul> <li>\u5982\u679c <code>Tree-&gt;Left</code> \u4e3a\u7a7a\uff0c\u7528\u4e00\u4e2a\u6307\u5411\u4e2d\u5e8f\u904d\u5386\u4e2d\u5f53\u524d\u8282\u70b9\u7684\u524d\u9a71\u7684\u6307\u9488\u4ee3\u66ff\u5b83</li> <li>\u5982\u679c <code>Tree-&gt;Right</code> \u4e3a\u7a7a\uff0c\u7528\u4e00\u4e2a\u6307\u5411\u4e2d\u5e8f\u904d\u5386\u4e2d\u5f53\u524d\u8282\u70b9\u7684\u540e\u7ee7\u7684\u6307\u9488\u4ee3\u66ff\u5b83 </li> <li>\u8fd9\u91cc\u6ca1\u6709\u7a7a\u95f2\u7684\u6307\u9488\uff0c\u56e0\u6b64\u4e00\u68f5\u7ebf\u7d22\u4e8c\u53c9\u6811\u9700\u8981\u6709\u4e00\u4e2a\u5de6\u513f\u5b50\u6307\u9488\u6307\u5411\u7b2c\u4e00\u4e2a\u8282\u70b9\u7684\u5934\u8282\u70b9\u3002</li> </ul> <pre><code>typedef  struct  ThreadedTreeNode  *PtrTo  ThreadedNode;\ntypedef  struct  PtrToThreadedNode  ThreadedTree;\ntypedef  struct  ThreadedTreeNode {\n       int                  LeftThread;   /* if it is TRUE, then Left */\n       ThreadedTree     Left;      /* is a thread, not a child ptr.   */\n       ElementType  Element;\n       int                  RightThread; /* if it is TRUE, then Right */\n       ThreadedTree     Right;    /* is a thread, not a child ptr.   */\n}\n</code></pre> Example <p>  \u90a3\u4e48\u5b83\u5bf9\u5e94\u7684\u7ebf\u7d22\u4e8c\u53c9\u6811\u5982\u4e0b:   </p> <p>Note</p> <p>\u5728\u6811\u91cc\u9762\uff0c\u513f\u5b50\u7684\u6b21\u5e8f\u6ca1\u6709\u5f71\u54cd\u3002\u4f46\u5bf9\u4e8e\u4e8c\u53c9\u6811\u800c\u8a00\uff0c\u5de6\u513f\u5b50\u548c\u53f3\u513f\u5b50\u662f\u4e0d\u540c\u7684\u3002</p> <p>\u5b8c\u5168\u4e8c\u53c9\u6811</p> <p>\u6240\u6709\u53f6\u8282\u70b9\u90fd\u4f4d\u4e8e\u76f8\u90bb\u7684\u4e24\u4e2a\u5c42\u4e0a</p>"},{"location":"ZJU_CS/FDS/tree/#_9","title":"\u4e8c\u53c9\u6811\u7684\u6027\u8d28","text":"<ul> <li>\u7b2c i \u5c42\u8282\u70b9\u4e2a\u6570\u6700\u591a\u4e3a \\(2^{i-1},i\\geq 1\\). \u6df1\u5ea6\u4e3a k \u7684\u4e8c\u53c9\u6811\u6700\u591a\u6709 \\(2^k-1\\) \u4e2a\u8282\u70b9\u3002</li> <li> <p>\u5bf9\u4e8e\u4efb\u4f55\u975e\u7a7a\u4e8c\u53c9\u6811\u90fd\u6709 \\(n_0=n_2+1\\). \u5176\u4e2d \\(n_0\\) \u662f\u53f6\u5b50\u8282\u70b9\u7684\u4e2a\u6570\uff0c\\(n_2\\) \u662f\u5ea6\u6570\u4e3a 2 \u7684\u8282\u70b9\u4e2a\u6570\u3002</p> Proof <p>\u4ee4 \\(n_1\\) \u8868\u793a\u5ea6\u6570\u4e3a 1 \u7684\u8282\u70b9\u4e2a\u6570\uff0c\u90a3\u4e48\u6211\u4eec\u6709 \\(n=n_0+n_1+n_2\\). \u4ee4 \\(B\\) \u8868\u793a\u6240\u6709\u7684\u8fb9\uff0c\u90a3\u4e48 \\(B=n-1\\)\uff0c\u540c\u65f6\u53c8\u6709 \\(B=n_1+2n_2\\). \u8054\u7acb\u53ef\u5f97\u5230 \\(n_0=n_2+1\\).  </p> </li> </ul>"},{"location":"ZJU_CS/FDS/tree/#adt","title":"\u67e5\u627e\u6811ADT\u2014\u2014\u4e8c\u53c9\u67e5\u627e\u6811","text":""},{"location":"ZJU_CS/FDS/tree/#_10","title":"\u5b9a\u4e49","text":"<p>\u4e00\u68f5\u4e8c\u53c9\u67e5\u627e\u6811\u662f\u4e8c\u53c9\u7684\uff0c\u5982\u679c\u975e\u7a7a\uff0c\u90a3\u4e48\u6ee1\u8db3\u4e0b\u5217\u6027\u8d28:</p> <ul> <li>\u6bcf\u4e2a\u8282\u70b9\u6709\u4e00\u4e2a\u5173\u952e\u5b57\uff0c\u662f\u5404\u4e0d\u76f8\u540c\u7684\u6574\u6570</li> <li>\u5982\u679c\u5de6\u5b50\u6811\u975e\u7a7a\uff0c\u90a3\u4e48\u5de6\u5b50\u6811\u6240\u6709\u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\u5c0f\u4e8e\u5f53\u524d\u8282\u70b9\u7684\u5173\u952e\u5b57</li> <li>\u5982\u679c\u53f3\u5b50\u6811\u975e\u7a7a\uff0c\u90a3\u4e48\u53f3\u5b50\u6811\u6240\u6709\u5173\u952e\u5b57\u7684\u503c\u5fc5\u987b\u5927\u4e8e\u5f53\u524d\u8282\u70b9\u7684\u5173\u952e\u5b57</li> <li>\u5de6\u5b50\u6811\u548c\u53f3\u5b50\u6811\u4ecd\u662f\u4e8c\u53c9\u67e5\u627e\u6811</li> </ul>"},{"location":"ZJU_CS/FDS/tree/#adt_1","title":"ADT \u6a21\u578b","text":"<ul> <li>\u5bf9\u8c61: \u4e00\u4e2a\u6709\u9650\u7684\u6709\u5e8f\u96c6</li> <li>\u64cd\u4f5c:<ul> <li>\u521d\u59cb\u5316</li> <li>\u67e5\u627e\u5173\u952e\u5b57</li> <li>\u67e5\u627e\u6700\u5927/\u6700\u5c0f\u7684\u5173\u952e\u5b57</li> <li>\u63d2\u5165\u5173\u952e\u5b57</li> <li>\u5220\u9664\u5173\u952e\u5b57</li> <li>\u68c0\u7d22\u4f4d\u7f6e</li> </ul> </li> </ul>"},{"location":"ZJU_CS/FDS/tree/#_11","title":"\u5b9e\u73b0","text":"<ul> <li>\u67e5\u627e\u5173\u952e\u5b57 \u8fd4\u56de\u6811 T \u4e2d\u5177\u6709\u5173\u952e\u5b57 X \u8282\u70b9\u7684\u6307\u9488\uff0c\u6211\u4eec\u53ef\u4ee5\u5bf9\u6811 T \u7684\u5de6\u5b50\u6811\u6216\u8005\u53f3\u5b50\u6811\u8fdb\u884c\u9012\u5f52\u8c03\u7528\uff0c\u67e5\u627e\u54ea\u4e2a\u5b50\u6811\u53d6\u51b3\u4e8e X \u4e0e\u5f53\u524d\u6839\u8282\u70b9\u5173\u952e\u5b57\u7684\u5927\u5c0f\u5173\u7cfb\u3002 \\(T(N)=S(N)=O(d)\\), \u8fd9\u91cc d \u662f\u6811\u7684\u6df1\u5ea6  </li> </ul> <pre><code>Position  Find( ElementType X,  SearchTree T ) \n{ \n      if ( T == NULL ) \n          return  NULL;  /* not found in an empty tree */\n      if ( X &lt; T-&gt;Element )  /* if smaller than root */\n          return  Find( X, T-&gt;Left );  /* search left subtree */\n      else \n          if ( X &gt; T-&gt;Element )  /* if larger than root */\n      return  Find( X, T-&gt;Right );  /* search right subtree */\n          else   /* if X == root */\n      return  T;  /* found */\n} \n</code></pre> <p>\u6ce8\u610f\u5230\u8fd9\u662f\u4e00\u4e2a\u5c3e\u9012\u5f52\uff0c\u56e0\u6b64\u6211\u4eec\u53ef\u4ee5\u4f18\u5316\u4e3a\u8fed\u4ee3\u7248\u672c</p> <pre><code>Position  Iter_Find( ElementType X,  SearchTree T ) \n{ \n      /* iterative version of Find */\n      while  ( T )   {\n          if  ( X == T-&gt;Element )  \n    return T ;  /* found */\n          if  ( X &lt; T-&gt;Element )\n             T = T-&gt;Left ; /*move down along left path */\n          else\n    T = T-&gt; Right ; /* move down along right path */\n      }  /* end while-loop */\n      return  NULL ;   /* not found */\n} \n</code></pre> <ul> <li>\u67e5\u627e\u6700\u5c0f/\u6700\u5927\u5173\u952e\u5b57 \u67e5\u627e\u6700\u5c0f\u5143\u7d20\uff0c\u53ea\u9700\u8981\u4ece\u6839\u8282\u70b9\u5f00\u59cb\uff0c\u53ea\u8981\u6709\u5de6\u513f\u5b50\u5c31\u5411\u5de6\u8fdb\u884c\uff0c\u7ec8\u6b62\u70b9\u5c31\u662f\u6700\u5c0f\u7684\u5143\u7d20\u4e86\u3002\u67e5\u627e\u6700\u5927\u5143\u7d20\u7c7b\u4f3c\u3002 \\(T(N)=O(d)\\)</li> </ul> <pre><code>Position  FindMin( SearchTree T ) \n{ \n      if ( T == NULL )   \n          return  NULL; /* not found in an empty tree */\n      else \n          if ( T-&gt;Left == NULL )   return  T;  /* found left most */\n          else   return  FindMin( T-&gt;Left );   /* keep moving to left */\n} \nPosition  FindMax( SearchTree T ) \n{ \n      if ( T != NULL ) \n          while ( T-&gt;Right != NULL )   \n    T = T-&gt;Right;   /* keep moving to find right most */\n      return T;  /* return NULL or the right most */\n} \n</code></pre> <ul> <li>\u63d2\u5165 \u63d2\u5165\u53ef\u4ee5\u7528\u67e5\u627e\u7684\u601d\u8def\uff0c\u5982\u679c\u627e\u5230 X \u90a3\u4e48\u5c31\u4ec0\u4e48\u4e5f\u4e0d\u505a\uff08\u6216\u8005\u505a\u4e00\u4e9b\u66f4\u65b0\uff09\uff0c\u5426\u5219\u5c31\u5c06 X \u63d2\u5165\u5230\u904d\u5386\u8def\u5f84\u4e0a\u7684\u6700\u540e\u4e00\u70b9\u4e0a\u3002 \\(T(N)=O(d)\\) </li> </ul> <pre><code>SearchTree  Insert( ElementType X, SearchTree T ) \n{ \n    if ( T == NULL ) { /* Create and return a one-node tree */ \n    T = malloc( sizeof( struct TreeNode ) ); \n    if ( T == NULL ) \n       FatalError( \"Out of space!!!\" ); \n    else { \n       T-&gt;Element = X; \n       T-&gt;Left = T-&gt;Right = NULL; } \n      }  /* End creating a one-node tree */\n     else  /* If there is a tree */\n    if ( X &lt; T-&gt;Element ) \n       T-&gt;Left = Insert( X, T-&gt;Left ); \n    else \n       if ( X &gt; T-&gt;Element ) \n          T-&gt;Right = Insert( X, T-&gt;Right ); \n       /* Else X is in the tree already; we'll do nothing */ \n    return  T;   /* Do not forget this line!! */ \n}\n</code></pre> <ul> <li>\u5220\u9664 \u5982\u679c\u8981\u5220\u9664\u7684\u8282\u70b9\u662f\u6811\u53f6\uff0c\u6211\u4eec\u53ef\u4ee5\u7acb\u5373\u5220\u9664\uff0c\u5982\u679c\u8282\u70b9\u6709\u4e00\u4e2a\u513f\u5b50\uff0c\u53ef\u4ee5\u5728\u7236\u8282\u70b9\u8c03\u6574\u6307\u9488\u540e\u7ed5\u8fc7\u8be5\u8282\u70b9\u5e76\u5220\u9664\u3002 \u4f46\u5982\u679c\u6709\u4e24\u4e2a\u513f\u5b50\uff0c\u4e00\u822c\u7684\u5220\u9664\u7b56\u7565\u662f\u7528\u5176\u53f3\u5b50\u6811\u4e2d\u6700\u5c0f\u5143\uff08\u6216\u8005\u5de6\u5b50\u6811\u4e2d\u7684\u6700\u5927\u5143\uff09\u4ee3\u66ff\u8be5\u8282\u70b9\u7684\u6570\u636e\u5e76\u9012\u5f52\u5730\u5220\u9664\u90a3\u4e2a\u8282\u70b9\u3002 \\(T(N)=O(h)\\), \u5176\u4e2d h \u662f\u6811\u7684\u9ad8\u5ea6\u3002   </li> </ul> <pre><code>SearchTree  Delete( ElementType X, SearchTree T ) \n{    Position  TmpCell; \n      if ( T == NULL )   Error( \"Element not found\" ); \n      else  if ( X &lt; T-&gt;Element )  /* Go left */ \n        T-&gt;Left = Delete( X, T-&gt;Left ); \n               else  if ( X &gt; T-&gt;Element )  /* Go right */ \n               T-&gt;Right = Delete( X, T-&gt;Right ); \n             else  /* Found element to be deleted */ \n               if ( T-&gt;Left &amp;&amp; T-&gt;Right ) {  /* Two children */ \n                   /* Replace with smallest in right subtree */ \n                   TmpCell = FindMin( T-&gt;Right ); \n                   T-&gt;Element = TmpCell-&gt;Element; \n                   T-&gt;Right = Delete( T-&gt;Element, T-&gt;Right );  } /* End if */\n               else {  /* One or zero child */ \n                   TmpCell = T; \n                   if ( T-&gt;Left == NULL ) /* Also handles 0 child */ \n                 T = T-&gt;Right; \n                   else  if ( T-&gt;Right == NULL )  T = T-&gt;Left; \n                   free( TmpCell );  }  /* End else 1 or 0 child */\n      return  T; \n</code></pre> <p>Note</p> <p>\u5982\u679c\u8fd9\u91cc\u6ca1\u6709\u5f88\u591a\u5220\u9664\u64cd\u4f5c\uff0c\u901a\u5e38\u4f7f\u7528\u61d2\u60f0\u64cd\u4f5c\u7684\u7b56\u7565\uff0c\u5f53\u4e00\u4e2a\u8282\u70b9\u88ab\u5220\u9664\u65f6\uff0c\u6211\u4eec\u4e0d\u5220\u9664\u5b83\uff0c\u505a\u4e00\u4e2a\u5220\u9664\u7684\u8bb0\u53f7\uff0c\u8fd9\u6837\u7684\u597d\u5904\u662f\u5728\u6709\u91cd\u590d\u5173\u952e\u5b57\u65f6\u53ef\u4ee5\u76f4\u63a5\u5728\u9891\u7387\u4e0a\u52a0\u51cf\u3002  </p>"},{"location":"ZJU_CS/FDS/tree/#_12","title":"\u5e73\u5747\u60c5\u5f62\u5206\u6790","text":"<p>Q. \u628a n \u4e2a\u5143\u7d20\u653e\u5728\u4e8c\u53c9\u67e5\u627e\u6811\u4e2d\uff0c\u8fd9\u68f5\u6811\u53ef\u4ee5\u6709\u591a\u9ad8\uff1f A. \u9ad8\u5ea6\u53d6\u51b3\u4e8e\u63d2\u5165\u7684\u987a\u5e8f\u3002\u6700\u574f\u53ef\u4ee5\u8fbe\u5230 \\(N\\)</p> Example <ul> <li>\u63d2\u5165\u987a\u5e8f 4, 2, 1, 3, 6, 5, 7 </li> </ul> <p> </p> <ul> <li>\u63d2\u5165\u987a\u5e8f 1, 2, 3, 4, 5, 6, 7</li> </ul> <p> </p> <p>Info</p> <p>\u5144\u5f1f: sibling \u64cd\u4f5c\u6570: operand \u524d\u5e8f\u904d\u5386: preorder traversal \u540e\u5e8f\u904d\u5386: postorder traversal \u5c42\u5e8f\u904d\u5386: levelorder traversal \u4e2d\u5e8f\u904d\u5386: inorder traversal \u7ebf\u7d22\u4e8c\u53c9\u6811: Threaded Binary Trees</p>"},{"location":"ZJU_CS/HPC/","title":"ZJUSCT","text":"<p>\u8fd9\u91cc\u662fZJUCS\u5927\u4e00\u6691\u5047\u77ed\u5b66\u671f\u8d85\u7b97\u8bfe\u7a0b\uff0c\u6211\u5c06\u4f1a\u628a\u6211\u7684\u7b14\u8bb0\u3001lab\u3001\u4ee5\u53ca\u5b66\u4e60\u8fc7\u7a0b\u8bb0\u5f55\u5728\u8fd9\u91cc\u3002</p>"},{"location":"ZJU_CS/HPC/AIPP/","title":"\u5e76\u884c\u8ba1\u7b97\u8bbe\u8ba1\u5bfc\u8bba","text":""},{"location":"ZJU_CS/HPC/AIPP/#chapter_2","title":"Chapter 2  \u5e76\u884c\u8ba1\u7b97\u76f8\u5173\u7684\u57fa\u7840\u77e5\u8bc6\u4ee5\u53ca\u786c\u4ef6","text":""},{"location":"ZJU_CS/HPC/AIPP/#chapter_3_mpi","title":"Chapter 3 \u7528MPI\u8fdb\u884c\u5206\u5e03\u5f0f\u5185\u5b58\u7f16\u7a0b","text":"<p>MPI is designed to work in a heterogeneous\uff08\u5f02\u6784\uff09 environment.</p> <p>fairly heavily\uff08\u76f8\u5f53\uff09dispatch\uff08\u5206\u53d1\uff0c\u8c03\u5ea6\uff09</p> <p>\u8ba1\u7b97\u673a\u53ef\u4ee5\u5927\u81f4\u5206\u4e3a\uff1a\u5206\u5e03\u5f0f\u5185\u5b58\u7cfb\u7edf\u548c\u5171\u4eab\u5185\u5b58\u7cfb\u7edf\u3002\u672c\u7ae0\u4e3b\u8981\u8ba8\u8bba\u5982\u4f55\u4f7f\u7528\u6d88\u606f\u4f20\u9012\u6765\u5bf9\u5206\u5e03\u5f0f\u5185\u5b58\u7cfb\u7edf\u8fdb\u884c\u7f16\u7a0b\u3002</p> <p>\u6ce8\uff1a\u672c\u7ae0\u5185\u5bb9\u53ef\u4ee5\u7ed3\u5408\u8bfe\u672c\u4ee5\u53ca<code>CMU 15-418 Recitation 6</code> \u5171\u540c\u5b66\u4e60\u3002\uff08Recitation 6 \u7684\u5185\u5bb9\u540e\u534a\u90e8\u5206\u662f\u4e00\u4e9b\u77e9\u9635\u4f18\u5316\u76f8\u5173\u7684\u5185\u5bb9\uff0c\u4e0d\u60f3\u770b\u53ef\u4ee5\u4e0d\u770b\uff09</p>"},{"location":"ZJU_CS/HPC/AIPP/#hello_world","title":"\u7b2c\u4e00\u4e2a\u7c7b\u4f3c\u4e8eHello world \u7684\u7a0b\u5e8f","text":"<pre><code>#include &lt;stdio.h&gt;\n#include &lt;string.h&gt;\n#include &lt;mpi.h&gt;\n\nconst int MAX_STRING = 100;\n\nint main (void){\n    char greeting[MAX_STRING];\n    int comm_sz;\n    int my_rank;\n\n    MPI_Init( NULL , NULL);\n    MPI_Comm_size( MPI_COMM_WORLD , &amp;comm_sz);\n    MPI_Comm_rank( MPI_COMM_WORLD, &amp;my_rank);\n\n    if (my_rank != 0) {\n        sprintf(greeting, \"Greetings from process %d of %d!\\n\", my_rank, comm_sz);\n        MPI_Send(greeting, strlen(greeting)+1, MPI_CHAR, 0, 0, MPI_COMM_WORLD);\n    } else {\n        printf(\"Greetings from process %d of %d!\\n\", my_rank, comm_sz);\n        for(int i = 1; i &lt; comm_sz; i++)\n        {\n            MPI_Recv(greeting, MAX_STRING, MPI_CHAR, i, 0, MPI_COMM_WORLD, MPI_STATUS_IGNORE);\n            printf(\"%s\", greeting);\n        }\n    }\n\n    MPI_Finalize();\n    return 0;\n}\n</code></pre> <p>\u7528<code>mpicc -g -Wall -o hello hello.c</code>\u6765\u7f16\u8bd1</p> <p>\u7528<code>mpiexec -n 1 ./hello</code>\u6765\u8fd0\u884c</p>"},{"location":"ZJU_CS/HPC/AIPP/#mpi","title":"\u4e00\u70b9\u70b9MPI\u7a0b\u5e8f\u7684\u4ee3\u7801\u8981\u70b9","text":"<ol> <li>\u6bcf\u4e2a\u7a0b\u5e8f\u662f\u7531MPI_Init\u548cMPI_Finalize\u8fdb\u884c\u5fc5\u8981\u7684\u521d\u59cb\u5316\u548c\u7ed3\u675f\u3002\u4e0eMPI\u6709\u5173\u7684\u51fd\u6570\u90fd\u8981\u5728\u8fd9\u91cc\u9762\u8fdb\u884c\uff08\u5176\u4e2d\uff0cMPI_Init\u4f20\u5165\u7684\u662fargc\u548cargv\u7684\u6307\u9488\u3002</li> <li>\u901a\u4fe1\u5b50\uff08communicator\uff09\u3001MPI_Comm_size \u548c MPI_Comm_rank \uff08\u4e00\u822c\u6765\u8bf4\uff0ccomm_sz\u8868\u793a\u8fdb\u7a0b\u7684\u6570\u91cf\uff0cmy_rank\u8868\u793a\u8fdb\u7a0b\u53f7\uff09\uff08\u5e76\u4e14\u8981\u521d\u59cb\u5316\uff01\uff01\uff01\uff09</li> </ol>"},{"location":"ZJU_CS/HPC/AIPP/#spmd","title":"SPMD\u7f16\u7a0b","text":"<p>Single Program and Multiple Data\uff1a\u6211\u4eec\u79f0\u4e3a\u5355\u7a0b\u5e8f\u591a\u6570\u636e\u3002\u7406\u8bba\u4e0a\u662f\u6bcf\u4e2a\u8fdb\u7a0b\u7f16\u8bd1\u4e0d\u540c\u7684\u7a0b\u5e8f\u3002\u4f46\u662f\u6211\u4eec\u5e38\u7528\u7684\u624b\u6bb5\u662f\u7f16\u5199\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u6839\u636e\u4e0d\u540c\u7684\u8fdb\u7a0b\u53f7\u6765\u5206\u914d\u8fdb\u7a0b\u3002</p>"},{"location":"ZJU_CS/HPC/AIPP/#_2","title":"\u901a\u4fe1","text":"<p>\u5728\u4e0a\u9762\u7684\u793a\u4f8b\u7a0b\u5e8f\u4e2d\uff0c\u6211\u4eec\u5c06\u4fe1\u606f\u901a\u8fc7<code>printf &amp; sprintf</code>\u6765\u4f20\u9012\u3002\u901a\u8fc7MPI_Send\u6765\u53d1\u9001MPI_Recv\u6765\u63a5\u53d7\u3002</p> <p></p> <p></p> <p>\u503c\u5f97\u6ce8\u610f\u7684\u662fsize\u8981\u52a0\u4e0a'\\0'\u3002Data type could make the program portable.</p> <p>\uff08\u8fd8\u6709\u4e24\u4e2a\u51fd\u6570\u662fMPI_Isend\u548cMPI_IRecv\uff09</p> <p></p> <p>\u6ce8\u610f\uff1a</p> <ol> <li> <p>\u6d88\u606f\u7684\u5927\u5c0f\u4e0d\u8981\u8d85\u8fc7\u6211\u4eec\u6240\u5206\u914d\u7684\u7f13\u51b2\u533a\u3002</p> </li> <li> <p><code>c    recv_comm = send_comm    recv_tag = send_tag    dest = r    src = q    \u4e14\u524d\u4e09\u4e2a\u4fe1\u606f\u517c\u5bb9</code></p> </li> </ol> <p>\u200b   \u8fd9\u610f\u5473\u7740q\u53f7\u8fdb\u7a0b\u7684\u4fe1\u606f\u53ef\u4ee5\u88abr\u53f7\u8fdb\u7a0b\u6536\u5230</p> <ol> <li>MPI\u4f7f\u7528\u7684\u662f\u201c\u63a8\u201d\u901a\u4fe1\u673a\u5236</li> <li>MPI\u6d88\u606f\u4e0d\u53ef\u8d85\u8d8a\u3002</li> </ol>"},{"location":"ZJU_CS/HPC/AIPP/#_3","title":"\u6f5c\u5728\u7684\u4e00\u4e9b\u9677\u9631","text":"<ul> <li>\u6211\u4eec\u9700\u8981\u6bcf\u6761\u63a5\u53d7\u8bed\u53e5\u6709\u76f8\u5e94\u7684\u53d1\u9001\u8bed\u53e5\u5339\u914d\uff0c\u9632\u6b62\u8fdb\u7a0b\u60ac\u6302\u3002</li> </ul> <ul> <li> <p>also have a function <code>MPI_Probe</code>is like a mpi receive.</p> </li> <li> <p>unblocking IO \u4f1a\u4f7f\u7f16\u7a0b\u53d8\u590d\u6742\u3002</p> </li> </ul> <p></p>"},{"location":"ZJU_CS/HPC/AIPP/#io","title":"I/O\u5904\u7406","text":"<p>\u4e66\u4e2d\u4e3e\u7684\u4f8b\u5b50\u662f\u5e76\u884c\u79ef\u5206\u65b9\u6cd5\u3002</p> <p>\u5176\u4e2d\u7684\u4e00\u4e9b\u8981\u70b9\u5982\u4e0b\uff1a</p> <ol> <li>MPI\u5141\u8bb8\u591a\u4e2a\u8f93\u51fa\uff0c\u4f46\u8f93\u51fa\u7684\u987a\u5e8f\u5e76\u4e0d\u4e00\u5b9a\u8ddf<code>my_rank</code>\u6709\u5173\uff0c\u53ef\u80fd\u662f\u4e71\u5e8f\u7684\u3002</li> <li>\u4f46\u8f93\u5165\u7684\u8bdd\u6211\u4eec\u4e00\u822c\u53ea\u89c4\u5b9a0\u53f7\u8fdb\u7a0b\u8d1f\u8d23\u8bfb\u53d6\uff0c\u518d\u5c06\u4fe1\u606f\u5206\u53d1\u7ed9\u5404\u4e2a\u8fdb\u7a0b\u3002</li> <li>\u96c6\u5408\u901a\u4fe1\uff08collective communication\uff09\uff0c\u53ef\u4ee5\u7528\u6765\u63d0\u9ad8\u6548\u7387\u3002\u4e66\u4e2d\u7684\u4e3e\u4f8b\u662f\u4e00\u4e2a\u4e8c\u53c9\u6811\u5f62\u7ed3\u6784\u6765\u901a\u4fe1</li> <li>MPI_Reduce\uff1a\u7528\u6765\u4f18\u5316\u5168\u5c40\u6c42\u548c\u51fd\u6570</li> </ol> <pre><code>double local_x[N], sum[N]\nMPI_Reduce(local _x, sum, N, MPI_DOUBLE, MPI_SUM, 0, MPI_COMM_WORLD)\n//\u524d\u4e24\u4e2a\u53c2\u6570\u5fc5\u987b\u662f\u5730\u5740\u4f20\u53c2\n</code></pre> <p></p> <p>\u5c0f\u7ed3\uff1a\u6211\u4eec\u4e0d\u96be\u6ce8\u610f\u5230\u70b9\u5bf9\u70b9\u901a\u4fe1\u548c\u96c6\u5408\u901a\u4fe1\u7684\u4e0d\u540c\u3002\u4ed6\u4eec\u90fd\u6709\u4e9b\u7279\u70b9\uff1a\u5fc5\u987b\u6709\u5339\u914d\u7684\u96c6\u5408\u901a\u4fe1\u51fd\u6570\uff1b\u4f20\u9012\u7684\u53c2\u6570\u5fc5\u987b\u201c\u76f8\u5bb9\uff1f\u201d\uff1b\u5fe0\u544a\u5c31\u662f\u4e0d\u5efa\u8bae\u5c06\u540c\u4e00\u5757\u7f13\u51b2\u533a\u4f5c\u4e3a\u8f93\u5165\u548c\u8f93\u51fa\u540c\u65f6\u8c03\u7528\uff01</p>"},{"location":"ZJU_CS/HPC/AIPP/#_4","title":"\u5411\u91cf\u5904\u7406\u7684\u6280\u5de7","text":"<p>\u8fd9\u91cc\u4f1a\u6d89\u53ca\u5230CMU\u8bfe\u7a0b\u540e\u534a\u90e8\u5206\u4ee5\u53ca\u4e66\u4e0a\u7684\u4e00\u4e9b\u77e5\u8bc6\u70b9\uff1a</p> <ol> <li>\u6570\u636e\u5206\u53d1\uff1a\u5757\u5212\u5206\u3001\u5faa\u73af\u5212\u5206\u3001\u5757-\u5faa\u73af\u5212\u5206</li> <li>\u6563\u5c04:<code>MPI_Scatter</code>; \u805a\u96c6\uff1a<code>MPI_Gather</code>\uff1bMPI_ALLgather:\u53ef\u4ee5\u5c06\u6bcf\u4e2a\u8fdb\u7a0b\u4e2d\u7684send_buf_p\u5185\u5bb9\u4e32\u8054\u8d77\u6765\u3002</li> <li>\u4e66\u4e2d\u6709\u77e9\u9635\u4e58\u6cd5\u548c\u52a0\u6cd5\u7684\u793a\u4f8b\u3002</li> </ol>"},{"location":"ZJU_CS/HPC/AIPP/#mpi_1","title":"MPI\u6027\u80fd","text":"<ol> <li>\u8ba1\u65f6\uff1a<code>MPI_Wtime</code>\u7528double\u7c7b\u578b\u7684\u53d8\u91cf\u8bb0\u5f55\u8fd4\u56de\u503c\u53ca\u53ef\u3002</li> <li><code>MPI_Barrier</code>\u7528\u6765\u540c\u6b65\u8fdb\u7a0b\u3002\u5728\u540c\u4e00\u901a\u4fe1\u5b50\u7684\u6240\u6709\u8fdb\u7a0b\u8c03\u7528\u8be5\u51fd\u6570\u4e4b\u524d\u6240\u6709\u8c03\u7528MPI_Barrier \u7684\u8fdb\u7a0b\u90fd\u4e0d\u80fd\u8fd4\u56de\u3002</li> <li>\u6392\u5e8f\u7b97\u6cd5\u7684\u5e76\u884c\u4f18\u5316\u3002</li> </ol>"},{"location":"ZJU_CS/HPC/AIPP/#chapter_5_openmp","title":"Chapter 5 \u7528OpenMP\u8fdb\u884c\u5171\u4eab\u5185\u5b58\u7f16\u7a0b","text":"<p>OpenMP\u4e2d\u7684MP\u4ee3\u8868\u7740\u201c\u591a\u5904\u7406\u201d\uff0c\u662f\u4e00\u4e2a\u5171\u4eab\u5185\u5b58\u5e76\u884c\u7f16\u7a0b\u540c\u4e00\u7684\u672f\u8bed\u3002</p>"},{"location":"ZJU_CS/HPC/class/","title":"note of class","text":"<p>\u8fd9\u91cc\u662f\u6d59\u6c5f\u5927\u5b66\u5927\u4e00\u8d85\u7b97\u77ed\u5b66\u671f\u7684\u8bfe\u5802\u7b14\u8bb0  </p>"},{"location":"ZJU_CS/HPC/class/#_1","title":"\u5173\u4e8e\u672c\u8bfe\u7684\u5b66\u4e60\u5efa\u8bae","text":"<p>\u5927\u5bb6\u53ef\u4ee5\u5148\u50a8\u5907\u4e00\u4e9b\u6570\u903b\u548c\u796d\u7956\u7684\u77e5\u8bc6\u3002\u6bd4\u5982\u901a\u8fc7cs\u901f\u6210\u8bfe\uff0c\u4ee5\u53caDRAM\u6765\u8865\u5145\u4e00\u4e9b\u77e5\u8bc6\uff0c\u4fbf\u4e8e\u4f60\u7406\u89e3\u3002</p> <p>Table</p> Date Target 7\u67083\u65e5 \u4e00\u4e9b\u4e9b\u4ecb\u7ecd\u4e0e\u7f51\u7edc\u77e5\u8bc6 7\u67084\u65e5 \u8ba1\u7b97\u673a\u4f53\u7cfb\u7ed3\u6784\u548c\u9ad8\u6027\u80fd\u8ba1\u7b97\u57fa\u7840 7\u67085\u65e5 \u9ad8\u6027\u80fd\u8ba1\u7b97\u65b9\u6cd5\u8bba\uff08HPC\uff09 7\u67086\u65e5 \u96c6\u7fa4\u8f6f\u786c\u4ef6\u53ca\u8fd0\u7ef4\u57fa\u7840"},{"location":"ZJU_CS/HPC/class/L1/","title":"7\u67084\u65e5 \u8ba1\u7b97\u673a\u4f53\u7cfb\u7ed3\u6784\u548c\u9ad8\u6027\u80fd\u8ba1\u7b97\u57fa\u7840","text":""},{"location":"ZJU_CS/HPC/class/L1/#overview","title":"Overview","text":"<ul> <li>ISA and x86 Instructions</li> <li>Processor Architecture</li> <li>Memory Hierarchy</li> <li>Concurrency Basic</li> </ul>"},{"location":"ZJU_CS/HPC/class/L1/#prerequisite_checklist","title":"Prerequisite Checklist","text":"<ul> <li>Digital representation of values</li> <li>Memory &amp; Address</li> <li>C code</li> </ul>"},{"location":"ZJU_CS/HPC/class/L1/#isa_x86_instruction","title":"ISA &amp; x86 instruction","text":"<ol> <li>ISA: instruction ser architecture.</li> <li>Assembly Language</li> </ol>"},{"location":"ZJU_CS/HPC/class/L1/#processor_architecture","title":"Processor Architecture","text":"<ol> <li>Microarchitecture is implementation.(could make faster)</li> <li>thread\uff08\u7ebf\u7a0b\uff09</li> <li>fetch -&gt; Decode -&gt; Execute -&gt; Commit </li> <li>Data hazards: You haven't already written but the next process need to call the data.</li> <li>control hazard: parallel processing could make a fault.</li> <li>structure hazard : like fetch and execute could make conflict.</li> <li>SRAM &amp; DRAM\uff1aSRAM = cache\uff08\u9ad8\u7f13\u51b2\uff09.</li> </ol>"},{"location":"ZJU_CS/HPC/class/L1/#memory_layout","title":"Memory Layout","text":"<ol> <li>Stack: Runtime stack (8MB limit) local variables.</li> <li>Heap: Dynamically allocated as needed.</li> <li>Data: statically allocated data.</li> <li>virtual memory: OS utilizes virtual memory to isolate address space of different processes and provide each process the same linear address space(\u7ebf\u6027\u6620\u5c04\uff0c\u7c7b\u4f3c\u4e8e\u54c8\u5e0c)</li> <li>Translation Lookaside buffer\uff08TLB\uff09 -&gt; could accelerate the virtual memory and physical memory interactive.</li> <li>NVM: between SSD and SRAM.</li> <li>Cache Organization(valid bit; dirty bit ; Tag: check if matching)</li> <li>Cache usage : Read hit ; Read miss ; Write hit(write-back); Write miss(write-allocate)</li> <li>Multiple Cache Hierarchy\u3002\uff08L1 L2 L3)</li> <li>Processes vs. Threads.</li> </ol> <p>differences: Threads in one process share memory but processes not.</p> <pre><code>//\u5f53\u4e24\u4e2a\u7ebf\u7a0b\u4e00\u5757\u8fdb\u884c\u8fd9\u4e2a\u4ee3\u7801\u65f6\uff0c\u6700\u5c0f\u7684\u8ba1\u7b97\u7ed3\u679c\u662f2\uff0c\u601d\u8003\u4e3a\u4ec0\u4e48\uff1f\nfor(int i=1; i &lt; 10000; i++)\n{\n    counter++;\n}\n</code></pre>"},{"location":"ZJU_CS/HPC/class/L1/#x86_microarchitecture","title":"x86 microarchitecture","text":""},{"location":"ZJU_CS/HPC/class/L2/","title":"7\u67085\u65e5 \u9ad8\u6027\u80fd\u8ba1\u7b97\u65b9\u6cd5\u8bba\uff08HPC\uff09","text":""},{"location":"ZJU_CS/HPC/class/L2/#overview","title":"Overview","text":"<ul> <li>Basic Theories for HPC</li> <li>Performance Analysis and Optimization Methodology</li> <li>Practical Optimization Strategies</li> <li>HPC Skill Tree</li> <li>How to Learn HPC/CS</li> </ul>"},{"location":"ZJU_CS/HPC/class/L2/#basic_theories_for_hpc","title":"Basic Theories for HPC","text":"<p>Factor affecting performance:</p> <ol> <li>Algorithms</li> <li>Models </li> <li>Software</li> <li>Hardware</li> <li>Physics</li> </ol> <p>Example: Large Matrix Multiplication(\u8be6\u60c5\u53ef\u770bAIPP\u4e2d\u7684MPI\u4f18\u5316\u548cBLAS\u77e9\u9635\u8ba1\u7b97\uff0cGPU\u901f\u5ea6\u4f1a\u6bd4CPU\u8dd1\u5f97\u5feb)</p>"},{"location":"ZJU_CS/HPC/class/L2/#performance_analysis_and_optimization_methodology","title":"Performance Analysis and Optimization Methodology","text":"<ol> <li>\u6590\u6ce2\u90a3\u5951\u6570\u5217\u8ba1\u7b97\uff0c\u7f16\u8bd1\u5668\u4f1a\u6709\u4f18\u5316\uff08O2\u3001O3\uff09\u3002\u53ef\u4ee5\u901a\u8fc7IDA\u53cd\u7f16\u8bd1\u770b\u770b\u5b9e\u9645\u8fd0\u7b97\u7684\u4ee3\u7801\u3002</li> <li>Maximize performance\uff1a Speed\u3001Throughout\u3001Latency\uff08\u5ef6\u8fdf\uff09or Resource is limited\uff08quota\u914d\u989d\uff09</li> <li>black box  Dominant component</li> </ol> <p>Roofline Performance Mode:</p> <p>Arithmetic Intensity(AI) = FLOP's/Bytes (this could judge the performance of program)</p> <p>\u5c4b\u9876\u7ebf\u53ef\u4ee5\u5224\u65ad CPU \u548c\u7f13\u5b58\u7684\u4f7f\u7528\u60c5\u51b5\u3002\u6211\u4eec\u662f\u7684\u6700\u7ec8\u76ee\u7684\u662f\u4e3a\u4e86\u8ba9\u5b83\u8fbe\u5230\u62d0\u70b9\uff01</p> <p>\u800c2020\u540e\u6709\u6df1\u5ea6\u5b66\u4e60\u6a21\u578b\u6765\u8bad\u7ec3\u9ed1\u7bb1\u6d4b\u6574\u4f53\u6027\u80fd</p> <ol> <li>Amadal\u2019s law\uff08\u6c34\u6876\u6548\u5e94\uff0c\u8865\u5168\u6700\u77ed\u7684\uff09</li> <li>Methods \uff1a Analysis in math\uff1b Hardware simulator\uff1b Profile: sampling some usage of a resource; Trace: collecting highly detailed data about the execution of a system.</li> <li>General Optimization Pipeline</li> </ol>"},{"location":"ZJU_CS/HPC/class/L2/#practical_optimization_strategies","title":"Practical Optimization Strategies","text":"<ol> <li>Algorithm Optimization - Prefetch &amp; Prediction</li> <li>Caching \uff1astores results from previous executions ; Limited cache size.</li> <li>Lock - Free: Use atomic primitives(CAS Atomic_add)</li> </ol> <p>Negative example: GIL in Python</p> <ol> <li>Load Balancing(make or cores to work)</li> <li>Reduce Precision(\u7cbe\u5ea6)</li> <li>Reduce Branching(skip list or like binary tree of branch)</li> <li>Vectorization(High-level: vectorized computation graph ; Instruction-level: SIMD instructions)</li> </ol> <p>See in your lab2</p> <ol> <li>Optimize Memory Access Locality</li> </ol> <ul> <li>GEMM</li> <li>Blocking</li> <li>Loop Permutation(\u6392\u5217)</li> <li>Array Packing</li> </ul> <p>See in your lab3</p> <ol> <li>Instruction / Data Alignment</li> </ol> <p>eg: compiler could auto optimize.\uff08\u4f8b\u5982\u7ed3\u6784\u4f53\u4f1a\u5185\u5b58\u81ea\u52a8\u5bf9\u9f50\uff09</p>"},{"location":"ZJU_CS/HPC/class/L2/#discussion","title":"Discussion","text":"<ul> <li>Domain Specific Language </li> <li>Manual Optimization is indispensable</li> <li>Core Affinity\uff08\u4eb2\u548c\u529b\uff09\uff08NUMA non-uniform memory access\uff09</li> <li>Adapts general code to local machine</li> <li>Auto - learning eg. black-box method : TVM</li> <li>You can learn something about TPU and DPU and FPGA.</li> </ul>"},{"location":"ZJU_CS/HPC/class/L2/#hpc_skill_tree","title":"HPC skill tree","text":"<ul> <li>Linux:  \u64cd\u4f5c\u7cfb\u7edf\u76f8\u5173\u77e5\u8bc6\u3001Linux\u57fa\u672c\u7ed3\u6784\u3001 Shell\u4f7f\u7528</li> <li>\u96c6\u7fa4\u8fd0\u7ef4\u548c\u7f51\u7edc\u7ba1\u7406\uff08\u5206\u5e03\u5f0f\uff09\uff1aNFS\uff1b</li> <li>\u534f\u4f5c\u5f00\u53d1\u4e0e\u7248\u672c\u63a7\u5236</li> <li>\u811a\u672c\u81ea\u52a8\u5316\uff08Linux shell \u6216\u8005 Python\uff09</li> <li>\u5e26\u4f9d\u8d56\u7a0b\u5e8f\u7684\u624b\u52a8\u7f16\u8bd1\u94fe\u63a5</li> <li>\u5e76\u884c\u7a0b\u5e8f\u8bbe\u8ba1\u3001\u6d4b\u8bd5\u548c\u4f18\u5316</li> <li>\u529f\u8017\u63a7\u5236\u4e0e\u8c03\u53c2</li> </ul>"},{"location":"ZJU_CS/HPC/class/L2/#_1","title":"\u5982\u4f55\u5b66\u4e60","text":""},{"location":"ZJU_CS/HPC/class/L3/","title":"7\u67086\u65e5 \u96c6\u7fa4\u8f6f\u786c\u4ef6\u4ee5\u53ca\u8fd0\u7ef4\u57fa\u7840","text":"<ul> <li>7\u67086\u65e5 \u96c6\u7fa4\u8f6f\u786c\u4ef6\u4ee5\u53ca\u8fd0\u7ef4\u57fa\u7840<ul> <li>Linux\u57fa\u7840\u64cd\u4f5c</li> <li>\u96c6\u7fa4</li> <li>\u5e94\u7528\u548c\u529f\u8017</li> </ul> </li> </ul>"},{"location":"ZJU_CS/HPC/class/L3/#linux","title":"Linux\u57fa\u7840\u64cd\u4f5c","text":"<p>\u672c\u8bb2\u6709\u90e8\u5206\u5185\u5bb9\u6211\u653e\u5230/missing semester/Linux \u4e2d\u53bb\u4e86</p> <ol> <li> <p>\u5b66\u4e60\u5efa\u8bae\uff1aChatGPT \uff1b-- help\uff1b man</p> </li> <li> <p>Linux\u4f1a\u6709\u5f88\u591a\u53d1\u884c\u7248\uff0cUbuntu\u7b14\u8bb0\u5bb9\u6613\u4e0a\u624b\uff0c\u5927\u591a\u96c6\u7fa4\u4f7f\u7528\u7684\u662fDebian\u3002</p> </li> <li> <p>\u7528\u6237\u7ba1\u7406\uff1a<code>/etc/passwd</code>(\u7528\u6237\u540d\uff1a\u5bc6\u7801\u8868\u793a\uff1aUID\uff1aGID\u7ec4\u522b\uff1a\u63cf\u8ff0\u6027\u5185\u5bb9\uff1a\u4e3b\u76ee\u5f55\uff1a\u9ed8\u8ba4shell)</p> </li> </ol> <p>\u5bc6\u7801\u5728<code>/etc/shadow</code></p> <ol> <li> <p><code>passwd [user]</code>(\u96c6\u7fa4\u4e0b\u5982\u679c\u5f00\u4e86NIS\u5219\u8981\u7528<code>yppasswd</code>)</p> </li> <li> <p>\u6587\u4ef6\u7cfb\u7edf</p> </li> </ol> <p></p> <p>\u6ce8\uff1a/opt\u4e2d\u4f1a\u6709\u4e00\u4e9b\u53ef\u9009\u7684\u4e1c\u897f\uff1b/mnt\u4e00\u822c\u7528\u6765\u6302\u5728\u786c\u76d8</p> <ol> <li><code>lsblk</code>\u7528\u6765\u663e\u793a\u5206\u533a ; <code>df</code>\u53ef\u4ee5\u770b\u5230\u78c1\u76d8\u4f7f\u7528\u60c5\u51b5</li> <li><code>mount</code>(need the su authority)</li> <li><code>umount -l(lazy) -f(forced)</code> </li> <li>git\u7684\u4f7f\u7528\uff01\uff01\uff01\uff08\u667a\u4e91\u8bfe\u580242\uff1a34\u5de6\u53f3\u5f00\u59cb\uff09\uff08\u53ef\u4ee5\u4e0b\u8f7dgit line\u63d2\u4ef6\uff09</li> <li><code>make &amp;&amp; make install</code></li> <li><code>ps</code>\u8fdb\u7a0b\u7ba1\u7406\uff0c<code>kill</code>\u6740\u6b7b\u8fdb\u7a0b\uff0c<code>htop</code>\u5728\u7ebf\u76d1\u7ba1</li> <li>\u7ec8\u7aef\u5206\u5757\uff1a<code>tmux</code></li> </ol> <pre><code>$ tmux new -s &lt;name&gt;\n\n# \u5206\u79bb\u5bf9\u8bdd\n$ tmux detach \n\u6216\u8005 ctrl+B \u518d\u6309 D\n# \u91cd\u65b0\u5efa\u7acb\u8fde\u63a5\n$ tmux attach -t &lt;name&gt; \n# \u4f7f\u7528\u4f1a\u8bdd\u540d\u79f0\n$ tmux switch -t &lt;session-name&gt;\n# rename\n$ tmux rename-session -t 0 &lt;new-name&gt;\n\n\u62c6\u6210\u5de6\u53f3\u4e24\u8fb9\nctrl+B+%\n\u770b\u6240\u6709section\nctrl+S\n\n# \u5217\u51fa\u6240\u6709\u5feb\u6377\u952e\uff0c\u53ca\u5176\u5bf9\u5e94\u7684 Tmux \u547d\u4ee4\n$ tmux list-keys\n# \u5217\u51fa\u6240\u6709 Tmux \u547d\u4ee4\u53ca\u5176\u53c2\u6570\n$ tmux list-commands\n# \u5217\u51fa\u5f53\u524d\u6240\u6709 Tmux \u4f1a\u8bdd\u7684\u4fe1\u606f\n$ tmux info\n# \u91cd\u65b0\u52a0\u8f7d\u5f53\u524d\u7684 Tmux \u914d\u7f6e\n$ tmux source-file ~/.tmux.conf\n</code></pre> <ol> <li>ctrl+B \u518d\u6309 '['\u5c31\u53ef\u4ee5\u4e0a\u4e0b\u6d3b\u52a8\u5149\u6807</li> <li>\u7f51\u7edc\uff1a\u4f1a\u6709\u7aef\u53e3</li> </ol> <pre><code>netstat -a   # \u5217\u51fa\u6240\u6709\u7aef\u53e3\nnetstat -pt  # \u663e\u793a\u6240\u6709PID\u548c\u8fdb\u7a0b\u7684\u540d\u5b57\niptables -L -n   # \u67e5\u770b\u7aef\u53e3\u662f\u5426\u5f00\u653e\n</code></pre> <p></p> <p>NAS00 \u8d77\u5230\u8df3\u677f\u673a\u7684\u4f5c\u7528</p> <ol> <li>\u4f20\u8f93\u6587\u4ef6\u53ef\u4ee5\u901a\u8fc7<code>scp</code>\u6216\u8005<code>xftp/xshell</code></li> </ol>"},{"location":"ZJU_CS/HPC/class/L3/#_1","title":"\u96c6\u7fa4","text":"<ol> <li>HPC\u96c6\u7fa4\uff0cnode\u8282\u70b9</li> <li>\u670d\u52a1\u5668\uff08\u4e3b\u6d41\u9ad8\u6027\u80fdNVlink AI\u670d\u52a1\u5668\uff1b\u5f00\u653e\u52a0\u901f\u751f\u6001OAM AI\u670d\u52a1\u5668\uff1b\u9ad8\u9002\u5e94\u6027PCLeAI\u670d\u52a1\u5668\uff09</li> <li>FLOPS\uff08\u6bcf\u79d2\u6d6e\u70b9\u8fd0\u7b97\u6b21\u6570\uff09\uff1b Latency\uff08\u5ef6\u8fdf\uff09\uff1b Bandwidth or throughout\uff08\u541e\u5410\u91cf\uff09</li> <li>PCLe(Peripheral Component Interconnect Express): \u9ad8\u901f\u4e32\u884c\u8ba1\u7b97\u673a\u6269\u5c55\u603b\u7ebf\u6807\u51c6</li> <li>\u5b58\u50a8\u534f\u8bae\uff1aSATA\uff1bNVMe</li> <li>M.2\u662f\u4e00\u79cd\u63a5\u53e3</li> <li>NVLinke\u670d\u52a1\u5668\u662fNVIDIA\u7684\u663e\u5361\u4ea4\u4e92\u7684\u901a\u4fe1\u534f\u8bae</li> <li>IPMI\uff08intelligentPlatform Management Interfere\uff09\u667a\u80fd\u5e73\u53f0\u7ba1\u7406\u63a5\u53e3</li> <li>BMC\u7f51\u7edc\u7ba1\u7406\u5e73\u53f0</li> <li>\u73af\u5883\u7ba1\u7406\u53ef\u4ee5\u770b\u770b\uff1aenvironment Module</li> <li>Slurm\u96c6\u7fa4\u7ba1\u7406\u548c\u4f18\u5316\u7528</li> </ol> <ol> <li>sbatch:\u7528\u4e8e\u5c06\u4f5c\u4e1a\u63d0\u4ea4\u5230\u961f\u5217</li> <li>srun\uff1a\u76f4\u63a5\u518dSlurm\u96c6\u7fa4\u8fd0\u884c\u547d\u4ee4\u6216\u8005\u7a0b\u5e8f</li> <li>squeue\uff1a\u67e5\u770b\u5728\u961f\u5217\u4e2d\u7684\u4f5c\u4e1a</li> <li>sinfo\uff1a\u7528\u4e8e\u67e5\u770bSlurm\u7ba1\u7406\u7684\u8282\u70b9\u548c\u5206\u533a\u7684\u60c5\u51b5</li> <li>Scancel\uff1a\u7528\u4e8e\u53d6\u6d88\u5df2\u7ecf\u63d0\u4ea4\u7684\u4f5c\u4e1a</li> <li>Salloc\uff1a\u4ea4\u4e92\u5f0f\u4f5c\u4e1a\u8bf7\u6c42\u8d44\u6e90</li> </ol> <ol> <li>NVIDIA\u548cIntel\u90fd\u6709\u76f8\u5173HPC\u7684\u5957\u4ef6</li> </ol>"},{"location":"ZJU_CS/HPC/class/L3/#_2","title":"\u5e94\u7528\u548c\u529f\u8017","text":""},{"location":"ZJU_CS/HPC/class/L4/","title":"7\u67088\u65e5 \u5411\u91cf\u5316\u5e76\u884c\u8ba1\u7b97\u57fa\u7840","text":"<ul> <li> <p>python\u3001numpy \u3001\u5411\u91cf\u5316\u8ba1\u7b97\u2026\u2026</p> </li> <li> <p>\u5411\u91cf\u5316\u8ba1\u7b97\u662f\u4ec0\u4e48\uff1f</p> </li> <li> <p>Array Programming \u5bf9\u6570\u7ec4\u76f4\u63a5\u8fdb\u884c\u8fd0\u7b97\u64cd\u4f5c</p> </li> <li>Automatic/Manual vectorization</li> </ul>"},{"location":"ZJU_CS/HPC/class/L4/#what_is_array_programming","title":"What is array programming","text":"<ol> <li>c\u8bed\u8a00\u5b8c\u6210\u7684\u77e9\u9635\u4e58\u6cd5\uff0c\u662f\u4ece\u57fa\u672c\u4e58\u6cd5\u4e00\u4e2a\u4e2a\u89c4\u5b9a\u5143\u7d20\u7684\u8ba1\u7b97\u3002</li> </ol> <p>\u5b9e\u73b0\u6548\u7387\u4f4e\uff1b\u4ee3\u7801\u8026\u5408\uff1b\u4ee3\u7801\u590d\u7528\u56f0\u96be</p> <ol> <li>\u9ad8\u5c42\u6b21\u5411\u91cf\u5316\u7684\u6838\u5fc3\uff1a\u8ba1\u7b97\u8bed\u610f\u4e0e\u8c03\u5ea6\u5206\u79bb\u3002</li> </ol> <ol> <li>\u7f16\u5199\u7a0b\u5e8f\u53ef\u4ee5\u4e13\u6ce8\u4e8e\u8ba1\u7b97\u8bed\u4e49\u672c\u8eab\uff0c\u4e0d\u9700\u8981\u5206\u5fc3\u5982\u4f55\u9ad8\u6548\u5b9e\u73b0\u7b97\u5b50</li> <li>\u7075\u6d3b\u4f7f\u7528\u7b2c\u4e09\u65b9\u5e93\u63d0\u4f9b\u7684\u9ad8\u6027\u80fd\u5b9e\u73b0\u5927\u5e45\u8282\u7ea6\u5f00\u53d1\u6210\u672c</li> <li>\u4ee3\u7801\u5177\u6709\u66f4\u9ad8\u7684\u53ef\u79fb\u690d\u6027\uff0c\u540c\u4e00\u4efd\u4ee3\u7801\u53ef\u4ee5\u4f7f\u7528\u4e0d\u540c\u7684\u540e\u7aef\u5b9e\u73b0\u52a0\u901f</li> </ol> graph LR a[Numpy API] --&gt; b[Numpy] a --&gt; c[Jax Numpy] a --&gt; d[Cupy]"},{"location":"ZJU_CS/HPC/class/L4/#numpy","title":"Numpy","text":"<p>NumPy \u662f Python \u4e2d\u79d1\u5b66\u8ba1\u7b97\u7684\u57fa\u7840\u5305\u3002\u5b83\u662f\u4e00\u4e2a Python \u5e93\uff0c\u63d0\u4f9b\u591a\u7ef4\u6570\u7ec4\u5bf9\u8c61\uff0c\u5404\u79cd\u6d3e\u751f\u5bf9\u8c61\uff08\u5982\u63a9\u7801\u6570\u7ec4\u548c\u77e9\u9635\uff09\uff0c\u4ee5\u53ca\u7528\u4e8e\u6570\u7ec4\u5feb\u901f\u64cd\u4f5c\u7684\u5404\u79cd API\uff0c\u6709\u5305\u62ec\u6570\u5b66\u3001\u903b\u8f91\u3001\u5f62\u72b6\u64cd\u4f5c\u3001\u6392\u5e8f\u3001\u9009\u62e9\u3001\u8f93\u5165\u8f93\u51fa\u3001\u79bb\u6563\u5085\u7acb\u53f6\u53d8\u6362\u3001\u57fa\u672c\u7ebf\u6027\u4ee3\u6570\uff0c\u57fa\u672c\u7edf\u8ba1\u8fd0\u7b97\u548c\u968f\u673a\u6a21\u62df\u7b49\u7b49\u3002</p> <p>Numpy \u4ee3\u7801\u4e00\u822c\u91c7\u7528\u5411\u91cf\u5316\uff08\u77e2\u91cf\u5316\uff09\u63cf\u8ff0\uff0c\u8fd9\u4f7f\u5f97\u4ee3\u7801\u4e2d\u6ca1\u6709\u4efb\u4f55\u663e\u5f0f\u7684\u5faa\u73af\uff0c\u7d22\u5f15\u7b49\uff0c\u8fd9\u6837\u7684\u4ee3\u7801\u6709\u4ee5\u4e0b\u597d\u5904\uff1a</p> <ul> <li>\u5411\u91cf\u5316\u4ee3\u7801\u66f4\u7b80\u6d01\uff0c\u66f4\u6613\u4e8e\u9605\u8bfb</li> <li>\u66f4\u5c11\u7684\u4ee3\u7801\u884c\u901a\u5e38\u610f\u5473\u7740\u66f4\u5c11\u7684\u9519\u8bef</li> <li>\u4ee3\u7801\u66f4\u63a5\u8fd1\u4e8e\u6807\u51c6\u7684\u6570\u5b66\u7b26\u53f7</li> </ul> <p>\u53e6\u5916\uff0c\u5411\u91cf\u5316\u7684\u4ee3\u7801\u80fd\u591f\u89c4\u907f\u6389 Python \u4e2d\u7f13\u6162\u7684\u8fed\u4ee3\u5faa\u73af\uff0c\u88ab\u5e95\u5c42\u7684\u5b9e\u73b0\u66f4\u597d\u7684\u8c03\u5ea6\uff0c\u5982\u63a5\u5165 BLAS \u77e9\u9635\u8fd0\u7b97\u5e93\uff0c\u4ece\u800c\u5b9e\u73b0\u66f4\u9ad8\u7684\u6027\u80fd\u3002</p>"},{"location":"ZJU_CS/HPC/class/L4/#numpy_api","title":"NumPy API","text":"<p>\u7531\u4e8e\u8bfe\u4e0a\u5df2\u7ecf\u4ecb\u7ecd\u8fc7\u8fd9\u90e8\u5206\u5185\u5bb9\uff0c\u5177\u4f53\u53ef\u4ee5\u53c2\u8003 NumPy \u7684\u6587\u6863\uff08\u771f\u7684\u4e00\u5b9a\u4e00\u5b9a\u8981\u597d\u597d\u67e5\u6587\u6863\uff0c\u5f88\u591a\u4eba\u53ef\u80fd\u4f1a\u8bf4\u901f\u901a\u600e\u4e48\u6837\uff0c\u4f46\u6211\u89c9\u5f97\u8fd8\u662f\u8981\u6253\u597dpython\u7684\u57fa\u7840\u3002\uff09</p>"},{"location":"ZJU_CS/HPC/class/L4/#_1","title":"\u53ef\u80fd\u7684\u8c03\u5ea6\u4f18\u5316","text":"<p>\u5e76\u884c\uff1a\u591a\u4e2a\u6838\u5fc3\u4e00\u8d77\u8ba1\u7b97</p> <p>SIMD\uff1a\u4f7f\u7528\u5904\u7406\u5668\u7684SIMD\u6307\u4ee4\u52a0\u901f</p> <p>Trade Off \u662f\u95e8\u827a\u672f\uff01\uff01\uff01</p>"},{"location":"ZJU_CS/HPC/class/L4/#numpy_1","title":"NumPy\u4f7f\u7528","text":"<p>\uff08ps\uff1a\u8fd9\u91cc\u63a8\u8350\u4e00\u4e2ab\u7ad9up\u4e3b\u201c\u5947\u4e50\u7f16\u7a0b\u5b66\u9662\u201d\uff0c\u4ed6\u7684\u89c6\u9891\u7684\u51dd\u805a\u5ea6\u5f88\u9ad8\uff0c\u9002\u5408\u901f\u901a\uff09</p> <pre><code>import numpy as np\n&gt;&gt;&gt; a = np.zeros((3,2)) # initialize the matrix\n&gt;&gt;&gt; a.shape # got the size\n(3,2)\n\n&gt;&gt;&gt; a = np.ones((2,4))\na = array([[1,1,1,1],\n           [1,1,1,1]])\n\n&gt;&gt;&gt; np.arange(3,7)\narray([3, 4, 5, 6])\n\n# random elements\n&gt;&gt;&gt; np.random.rand(2,4)\narray([[0.26649161, 0.92231931, 0.9729259 , 0.4400486 ],\n       [0.80943781, 0.53395907, 0.16488674, 0.33438204]])\n\n&gt;&gt;&gt; np.linspace(0,1,5) # notice the spell\narray([0.  , 0.25, 0.5 , 0.75, 1.  ])\n\n# numpy\u4e2d\u9ed8\u8ba4\u7684\u6570\u636e\u7c7b\u578b\u662f64\u4f4d\u6d6e\u70b9\u6570\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u81ea\u5df1\u6307\u5b9a\uff0c\u5982\u4e0b\uff1a\n&gt;&gt;&gt; a = np.zeros((4,2), dtype = np.int32)\n\n&gt;&gt;&gt; a\narray([[0., 0.],\n       [0., 0.],\n       [0., 0.],\n       [0., 0.]])\n&gt;&gt;&gt; a.dtype\ndtype('float64')\n&gt;&gt;&gt; a = a.astype(int)\n&gt;&gt;&gt; a.dtype\ndtype('int64')\n\n# \u4e24\u4e2a\u76f8\u540c\u4f4d\u7f6e\u7684\u6570\u7ec4\uff0c\u53ef\u4ee5\u76f4\u63a5\u8fdb\u884c\u56db\u5219\u8fd0\u7b97\u3002\u5b83\u4f1a\u5c06\u6570\u7ec4\u540c\u4f4d\u7f6e\u7684\u5143\u7d20\u8fdb\u884c\u52a0\u51cf\u4e58\u9664\n# \u70b9\u4e58\u662f\u4f7f\u7528dot\u51fd\u6570\n# @\u662f\u77e9\u9635\u4e58\u6cd5\u8fd0\u7b97\n&gt;&gt;&gt;a = np.array([1,2,3])\n&gt;&gt;&gt;b = np.array([4,5,6])\n&gt;&gt;&gt;np.dot(a,b)\n32\n\n#\u6c42\u5e73\u65b9\u6839/sin/cos/log/power\n&gt;&gt;&gt; a\narray([1, 2, 3])\n&gt;&gt;&gt; np.sqrt(a)\narray([1.        , 1.41421356, 1.73205081])\n&gt;&gt;&gt; np.sin(a)\narray([0.84147098, 0.90929743, 0.14112001])\n\n# \u5e7f\u64ad\n&gt;&gt;&gt; a\narray([1, 2, 3])\n&gt;&gt;&gt; a*5\narray([ 5, 10, 15])\n&gt;&gt;&gt; b\narray([[1],\n       [2],\n       [3]])\n&gt;&gt;&gt; a+b\narray([[2, 3, 4],\n       [3, 4, 5],\n       [4, 5, 6]])\n\n# min \u6216\u8005 max\uff0c\u8fd4\u56de\u6570\u7ec4\u6700\u5c0f\u6216\u6700\u5927\n# argmin \u6216\u8005 argmax\u4f1a\u8fd4\u56de\u6700\u5c0f\u6216\u6700\u5927\u7684\u7d22\u5f15\n# sum\u4f1a\u8fd4\u56de\u6240\u6709\u6570\u636e\u7684\u603b\u548c\n# mean\u6216\u8005median\u4f1a\u8fd4\u56de\u6570\u636e\u7684\u5e73\u5747\u503c\n# var\u662f\u65b9\u5dee\uff0cstd\u662f\u6807\u51c6\u65b9\u5dee\u7b49\n# \u4ee5\u4e0a\u53ef\u4ee5\u6307\u5b9aaxis\uff0caxis=0\u4ee3\u8868\u7b2c\u4e00\u4e2a\u7ef4\u5ea6\u884c\uff0c=1\u4ee3\u8868\u5217\n&gt;&gt;&gt; c\narray([[2, 3, 4],\n       [3, 4, 5],\n       [4, 5, 6]])\n&gt;&gt;&gt; c.sum(axis=0)\narray([ 9, 12, 15])\n&gt;&gt;&gt; c.min(axis=0)\narray([2, 3, 4])\n&gt;&gt;&gt; c.mean(axis=0)\narray([3., 4., 5.])\n&gt;&gt;&gt; c.var(axis=0)\narray([0.66666667, 0.66666667, 0.66666667])\n\n# \u4e0epython list\u76f8\u540c\uff0c\u53ef\u4ee5\u6709\u8bb8\u591a\u65b0\u5947\u7684\u64cd\u4f5c\u5982\u4e0b\n&gt;&gt;&gt; c\narray([[2, 3, 4],\n       [3, 4, 5],\n       [4, 5, 6]])\n&gt;&gt;&gt; c[0,1]\n3\n# \u6ce8\u610f\uff1a\u4e0ec\u4e0d\u540c\uff0c\u4e0e\u548c\u6216\u53ea\u6253\u4e00\u4e2a\u7b26\u53f7\n&gt;&gt;&gt; c[(c&gt;3) &amp; (c%2 == 0)]\narray([4, 4, 4, 6])\n&gt;&gt;&gt; c[0,0:2]\narray([2, 3])\n&gt;&gt;&gt; a[0:] || a[0]\narray([1, 2, 3])\n&gt;&gt;&gt; a[0:3:2]\narray([1, 3])\n&gt;&gt;&gt; a[::-1]\narray([3, 2, 1])\n</code></pre> <p>\u66f4\u6df1\u5165\u7684\u5b66\u4e60\u53ef\u4ee5\u53c2\u52a0From python to numpy</p>"},{"location":"ZJU_CS/HPC/class/L4/#_2","title":"\u4f7f\u7528\u6280\u5de7","text":"<ul> <li>\u5411\u91cf\u5316\u9664\u4e86\u5355\u4e2a\u7b97\u5b50\u5185\u90e8\u7684\u8c03\u5ea6\u4f18\u5316\u5916\uff0c\u53ef\u4ee5\u4e0d\u4e00\u4e2a\u7b97\u5b50\u4e00\u4e2a\u7b97\u5b50\u7684\u6267\u884c\uff0c\u6240\u6709\u9700\u8981\u6267\u884c\u7684\u7b97\u5b50\u53ef\u4ee5\u6784\u6210\u8ba1\u7b97\u56fe</li> <li>\u5728\u8ba1\u7b97\u56fe\u4e0a\u7684\u8c03\u5ea6\u4f18\u5316\u4e0d\u518d\u5c40\u9650\u4e8e\u7b97\u5b50\u5185\u90e8\uff0c\u800c\u53ef\u4ee5\u8de8\u7b97\u5b50\u6d88\u9664\u5197\u4f59\uff0c\u589e\u5f3a\u7f13\u5b58\u53cb\u597d\u578b\u51cf\u5c11\u8bbf\u5b58\uff0c\u5e76\u884c\u6267\u884c\u591a\u4e2a\u7b97\u5b50\u7b49\u7b49\u66f4\u7075\u6d3b\u7684\u4f18\u5316\u3002</li> </ul>"},{"location":"ZJU_CS/HPC/class/L4/#automaticmanual_vectorization","title":"Automatic/Manual vectorization","text":""},{"location":"ZJU_CS/HPC/class/L4/#automatic_vectorization","title":"Automatic vectorization","text":"<p>\u7f16\u8bd1\u5668\u4f1a\u81ea\u52a8\u8bc6\u522b\u5e76\u5c06\u4f60\u7684\u4ee3\u7801\u5411\u91cf\u5316</p> <p>Single Instruction Multiple Data. Generally speaking, SIMD is combined with SSE and AVX.</p>"},{"location":"ZJU_CS/HPC/class/L5/","title":"7\u67089\u65e5 GPU (Graphic Processing Unit)","text":"<p>\u672c\u8282\u8bfe\u4e3b\u8981\u7531\u5219\u53ef\u8001\u5e08\u8fdb\u884c\u4e00\u4e2a\u5f15\u5bfc\uff0c\u4e4b\u540e\u4fbf\u662f\u901a\u8fc7\u5b98\u7f51\u5bf9CUDA\u7684\u5b66\u4e60\uff0c\u4ee5\u53cappt\u4e0a\u6709\u4e00\u4e9b\u6ca1\u8bb2\u5230\u7684\u77e5\u8bc6\u53ef\u4ee5\u53c2\u8003\u5b66\u4e60\u3002\u5f53\u7136\u6211\u4e5f\u5efa\u8bae\u5927\u5bb6\u53ef\u4ee5\u53bb\u770bCMU 15-418.\u53ef\u4ee5\u83b7\u5f97\u4e00\u4e2a\u77e5\u8bc6\u4e0a\u7684\u8865\u5145\u3002\uff08\u8fd9\u91cc\u5219\u53ef\u8001\u5e08\u5bf9\u6574\u4e2a\u8ba1\u7b97\u673a\u786c\u4ef6\u6709\u4e00\u5f20\u975e\u5e38\u597d\u7684\u6846\u67b6\u56fe\u3002</p> <p></p>"},{"location":"ZJU_CS/HPC/class/L5/#why_gpu","title":"Why GPU","text":"<ol> <li> <p>\u7b97\u529b\u7684\u9700\u6c42</p> </li> <li> <p>Von Neumann Model has two key properties:</p> </li> </ol> <ol> <li>Stored program (Instruction stored in a linear memory array; the interpretation of a stored  )</li> <li>Sequential instruction processing(fixed output; one instruction processed at a time; )</li> </ol> <ol> <li>Each instruction takes a single clock cycle to execute.</li> </ol> <p>AS: Architecture state</p> <ol> <li>Multi-Cycle Microarchitecture</li> </ol> <p>\u5355\u5468\u671f\uff0c\u4e2d\u95f4\u6267\u884c\u591a\u4e2a\u547d\u4ee4\u7684\u72b6\u6001</p> <ol> <li>Pipeline CPU</li> <li>GPU\u4f1a\u66f4\u504f\u5411\u8dd1\u5e76\u884c\u7684\u3002</li> <li>distinguish between Programming Model and Executing Model\u3002</li> </ol>"},{"location":"ZJU_CS/HPC/class/L5/#cuda","title":"CUDA\u67b6\u6784\u4ee5\u53ca\u57fa\u7840\u77e5\u8bc6","text":"<p>\u82f1\u4f1f\u8fbe\u6709\u81ea\u5df1\u7684GPU\u67b6\u6784\u4ee5\u53ca\u7f16\u7a0b\u8bed\u8a00\u3002</p> <p></p> <p></p> <p>\u4ee5\u4e0a\u4e24\u4e2a\u56fe\u7247\u89e3\u91ca\u4e86GPU\u7684\u7ed3\u6784\u8bbe\u8ba1\u3002\uff08Global Memory and shared memory\uff09\uff08Kernel\u3001 threads\u3001 block\u3001 grid \u3001 warp\u7b49\u6982\u5ff5\u8981\u6e05\u6670\uff09</p> <p></p> <p>SM is a division of a block created within the sm to assign the work.</p> <p></p> <p>\u8fd9\u91cc\u6709\u4e00\u4e2a\u793a\u4f8b\u7684GPU\u5411\u91cf\u8ba1\u7b97\u7684\u4f8b\u5b50\u3002\u4e4b\u540e\u6211\u4eec\u4f1a\u8be6\u7ec6\u4ecb\u7ecd\u6bcf\u4e2a\u51fd\u6570\u7684\u4f7f\u7528\u3002\uff08\u5c24\u5176\u662f\u4ece\u67b6\u6784\u7684\u89d2\u5ea6\u51fa\u53d1\u7406\u89e3\u7b97\u6cd5\u8bbe\u8ba1\u5c24\u5176\u662f\u201c\u6d41\u201d\u7684\u4f7f\u7528\u3002\uff09</p> <p></p> <p>\u4e00\u4e9b\u7f16\u7a0b\u5efa\u8bae\u5982\u4e0b\uff1a</p> <p></p> <p>\u9605\u8bfb\u5b8c\u4ee5\u4e0a\u57fa\u672c\u5185\u5bb9\uff0c\u6b64\u540e\u4fbf\u5f00\u59cbCUDA\u8bed\u6cd5\u7684\u4ecb\u7ecd\u4e86\uff01\uff01\uff01</p>"},{"location":"ZJU_CS/HPC/class/L5/#gpu","title":"GPU \u51fd\u6570\u7684\u7528\u6cd5\u4ee5\u53ca\u540c\u6b65","text":"<pre><code>//'__global__' before GPU function\nvoid CPUFunction()\n{\n  printf(\"This function is defined to run on the CPU.\\n\");\n}\n\n__global__ void GPUFunction()\n{\n  printf(\"This function is defined to run on the GPU.\\n\");\n}\n\nint main()\n{\n  CPUFunction();\n\n  GPUFunction&lt;&lt;&lt;1, 1&gt;&gt;&gt;(); // &lt;&lt;&lt;m,n&gt;&gt;&gt; m is the number of blocks,n is the num of threads in one block\n  cudaDeviceSynchronize(); //\u540c\u6b65\n}\n</code></pre> <pre><code>//CUDA \u6838\u51fd\u6570\u53ef\u4ee5\u8bbf\u95ee\u80fd\u591f\u8bc6\u522b\u5982\u4e0b\u4e24\u79cd\u7d22\u5f15\u7684\u7279\u6b8a\u53d8\u91cf\uff1a\u6b63\u5728\u6267\u884c\u6838\u51fd\u6570\u7684\u7ebf\u7a0b\uff08\u4f4d\u4e8e\u7ebf\u7a0b\u5757\u5185\uff09\u7d22\u5f15\u548c\u7ebf\u7a0b\u6240\u5728\u7684\u7ebf\u7a0b\u5757\uff08\u4f4d\u4e8e\u7f51\u683c\u5185\uff09\u7d22\u5f15\u3002\u8fd9\u4e24\u79cd\u53d8\u91cf\u5206\u522b\u4e3a threadIdx.x \u548c blockIdx.x\n\n// Note the address of `a` is passed as first argument.\ncudaMallocManaged(&amp;a, size);\n// Use `a` on the CPU and/or on any GPU in the accelerated system.\ncudaFree(a);\n</code></pre> <pre><code>//\u5904\u7406\u5757\u914d\u5236\u4e0e\u6240\u9700\u7ebf\u7a0b\u6570\u4e0d\u5339\u914d\n// Assume `N` is known\nint N = 100000;\n\n// Assume we have a desire to set `threads_per_block` exactly to `256`\nsize_t threads_per_block = 256;\n\n// Ensure there are at least `N` threads in the grid, but only 1 block's worth extra\nsize_t number_of_blocks = (N + threads_per_block - 1) / threads_per_block;\n\nsome_kernel&lt;&lt;&lt;number_of_blocks, threads_per_block&gt;&gt;&gt;(N);\n</code></pre> <pre><code>//CUDA \u63d0\u4f9b\u4e00\u4e2a\u53ef\u7ed9\u51fa\u7f51\u683c\u4e2d\u7ebf\u7a0b\u5757\u6570\u7684\u7279\u6b8a\u53d8\u91cf\uff1agridDim.x\u3002\u7136\u540e\u8ba1\u7b97\u7f51\u683c\u4e2d\u7684\u603b\u7ebf\u7a0b\u6570\uff0c\u5373\u7f51\u683c\u4e2d\u7684\u7ebf\u7a0b\u5757\u6570\u4e58\u4ee5\u6bcf\u4e2a\u7ebf\u7a0b\u5757\u4e2d\u7684\u7ebf\u7a0b\u6570\uff1agridDim.x * blockDim.x\u3002\u5e26\u7740\u8fd9\u6837\u7684\u60f3\u6cd5\u6765\u770b\u770b\u4ee5\u4e0b\u6838\u51fd\u6570\u4e2d\u7f51\u683c\u8de8\u5ea6\u5faa\u73af\u7684\u8be6\u7ec6\u793a\u4f8b\uff1a\n\n__global void kernel(int *a, int N)\n{\n  int indexWithinTheGrid = threadIdx.x + blockIdx.x * blockDim.x;\n  int gridStride = gridDim.x * blockDim.x;\n\n  for (int i = indexWithinTheGrid; i &lt; N; i += gridStride)\n  {\n    // do work on a[i];\n  }\n}\n</code></pre> <pre><code>\u9519\u8bef\u5904\u7406\n\u4e0e\u5728\u4efb\u4f55\u5e94\u7528\u7a0b\u5e8f\u4e2d\u4e00\u6837\uff0c\u52a0\u901f CUDA \u4ee3\u7801\u4e2d\u7684\u9519\u8bef\u5904\u7406\u540c\u6837\u81f3\u5173\u91cd\u8981\u3002\u5373\u4fbf\u4e0d\u662f\u5927\u591a\u6570\uff0c\u4e5f\u6709\u8bb8\u591a CUDA \u51fd\u6570\uff08\u4f8b\u5982\uff0c\u5185\u5b58\u7ba1\u7406\u51fd\u6570\uff09\u4f1a\u8fd4\u56de\u7c7b\u578b\u4e3a cudaError_t \u7684\u503c\uff0c\u8be5\u503c\u53ef\u7528\u4e8e\u68c0\u67e5\u8c03\u7528\u51fd\u6570\u65f6\u662f\u5426\u53d1\u751f\u9519\u8bef\u3002\u4ee5\u4e0b\u662f\u5bf9\u8c03\u7528 cudaMallocManaged \u51fd\u6570\u6267\u884c\u9519\u8bef\u5904\u7406\u7684\u793a\u4f8b\uff1a\n\ncudaError_t err;\nerr = cudaMallocManaged(&amp;a, N)                    // Assume the existence of `a` and `N`.\n\nif (err != cudaSuccess)                           // `cudaSuccess` is provided by CUDA.\n{\n  printf(\"Error: %s\\n\", cudaGetErrorString(err)); // `cudaGetErrorString` is provided by CUDA.\n}\n\u542f\u52a8\u5b9a\u4e49\u4e3a\u8fd4\u56de void \u7684\u6838\u51fd\u6570\u540e\uff0c\u5c06\u4e0d\u4f1a\u8fd4\u56de\u7c7b\u578b\u4e3a cudaError_t \u7684\u503c\u3002\u4e3a\u68c0\u67e5\u542f\u52a8\u6838\u51fd\u6570\u65f6\u662f\u5426\u53d1\u751f\u9519\u8bef\uff08\u4f8b\u5982\uff0c\u5982\u679c\u542f\u52a8\u914d\u7f6e\u9519\u8bef\uff09\uff0cCUDA \u63d0\u4f9b cudaGetLastError \u51fd\u6570\uff0c\u8be5\u51fd\u6570\u4f1a\u8fd4\u56de\u7c7b\u578b\u4e3a cudaError_t \u7684\u503c\u3002\n\n/*\n * This launch should cause an error, but the kernel itself\n * cannot return it.\n */\n\nsomeKernel&lt;&lt;&lt;1, -1&gt;&gt;&gt;();  // -1 is not a valid number of threads.\n\ncudaError_t err;\nerr = cudaGetLastError(); // `cudaGetLastError` will return the error from above.\nif (err != cudaSuccess)\n{\n  printf(\"Error: %s\\n\", cudaGetErrorString(err));\n}\n\u6700\u540e\uff0c\u4e3a\u6355\u6349\u5f02\u6b65\u9519\u8bef\uff08\u4f8b\u5982\uff0c\u5728\u5f02\u6b65\u6838\u51fd\u6570\u6267\u884c\u671f\u95f4\uff09\uff0c\u8bf7\u52a1\u5fc5\u68c0\u67e5\u540e\u7eed\u540c\u6b65 CUDA \u8fd0\u884c\u65f6 API \u8c03\u7528\u6240\u8fd4\u56de\u7684\u72b6\u6001\uff08\u4f8b\u5982 cudaDeviceSynchronize\uff09\uff1b\u5982\u679c\u4e4b\u524d\u542f\u52a8\u7684\u5176\u4e2d\u4e00\u4e2a\u6838\u51fd\u6570\u5931\u8d25\uff0c\u5219\u5c06\u8fd4\u56de\u9519\u8bef\u3002\n</code></pre>"},{"location":"ZJU_CS/HPC/class/L5/#debugging","title":"Debugging","text":"<pre><code>inline cudaError_t checkCuda(cudaError_t result)\n{\n  if (result != cudaSuccess) {\n    fprintf(stderr, \"CUDA Runtime Error: %s\\n\", cudaGetErrorString(result));\n    assert(result == cudaSuccess);\n  }\n  return result;\n}\n</code></pre> <pre><code>const int a = 2&lt;&lt;20; // \u5de6\u79fb20\u4f4d\n</code></pre>"},{"location":"ZJU_CS/HPC/class/L5/#nsys","title":"\u4f7f\u7528nsys\u6027\u80fd\u5206\u6790\u5668\u5e2e\u52a9\u5e94\u7528\u7a0b\u5e8f\u8fed\u4ee3\u5730\u8fdb\u884c\u4f18\u5316","text":"<p>\u5982\u8981\u786e\u4fdd\u4f18\u5316\u52a0\u901f\u4ee3\u7801\u5e93\u7684\u5c1d\u8bd5\u771f\u6b63\u53d6\u5f97\u6210\u529f\uff0c\u552f\u4e00\u65b9\u6cd5\u4fbf\u662f\u5206\u6790\u5e94\u7528\u7a0b\u5e8f\u4ee5\u83b7\u53d6\u6709\u5173\u5176\u6027\u80fd\u7684\u5b9a\u91cf\u4fe1\u606f\u3002<code>nsys</code> \u662f\u6307 NVIDIA \u7684Nsight System\u547d\u4ee4\u884c\u5206\u6790\u5668\u3002\u8be5\u5206\u6790\u5668\u9644\u5e26\u4e8eCUDA\u5de5\u5177\u5305\u4e2d\uff0c\u63d0\u4f9b\u5206\u6790\u88ab\u52a0\u901f\u7684\u5e94\u7528\u7a0b\u5e8f\u6027\u80fd\u7684\u5f3a\u5927\u529f\u80fd\u3002</p> <p><code>nsys</code> \u4f7f\u7528\u8d77\u6765\u5341\u5206\u7b80\u5355\uff0c\u6700\u57fa\u672c\u7528\u6cd5\u662f\u5411\u5176\u4f20\u9012\u4f7f\u7528 <code>nvcc</code> \u7f16\u8bd1\u7684\u53ef\u6267\u884c\u6587\u4ef6\u7684\u8def\u5f84\u3002\u968f\u540e <code>nsys</code> \u4f1a\u7ee7\u7eed\u6267\u884c\u5e94\u7528\u7a0b\u5e8f\uff0c\u5e76\u5728\u6b64\u4e4b\u540e\u6253\u5370\u5e94\u7528\u7a0b\u5e8f GPU \u6d3b\u52a8\u7684\u6458\u8981\u8f93\u51fa\u3001CUDA API \u8c03\u7528\u4ee5\u53ca\u7edf\u4e00\u5185\u5b58\u6d3b\u52a8\u7684\u76f8\u5173\u4fe1\u606f\u3002\u6211\u4eec\u7a0d\u540e\u4f1a\u5728\u672c\u5b9e\u9a8c\u4e2d\u8be6\u7ec6\u4ecb\u7ecd\u8fd9\u4e00\u4e3b\u9898\u3002</p> <p>\u5728\u52a0\u901f\u5e94\u7528\u7a0b\u5e8f\u6216\u4f18\u5316\u5df2\u7ecf\u52a0\u901f\u7684\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u6211\u4eec\u5e94\u8be5\u91c7\u7528\u79d1\u5b66\u7684\u8fed\u4ee3\u65b9\u6cd5\u3002\u4f5c\u51fa\u66f4\u6539\u540e\u9700\u5206\u6790\u5e94\u7528\u7a0b\u5e8f\u3001\u505a\u597d\u8bb0\u5f55\u5e76\u8bb0\u5f55\u4efb\u4f55\u91cd\u6784\u53ef\u80fd\u4f1a\u5bf9\u6027\u80fd\u9020\u6210\u4f55\u79cd\u5f71\u54cd\u3002\u5c3d\u65e9\u4e14\u7ecf\u5e38\u8fdb\u884c\u6b64\u7c7b\u89c2\u5bdf\u901a\u5e38\u4f1a\u8ba9\u60a8\u8f7b\u677e\u83b7\u5f97\u8db3\u591f\u7684\u6027\u80fd\u63d0\u5347\uff0c\u4ee5\u52a9\u60a8\u53d1\u5e03\u52a0\u901f\u5e94\u7528\u7a0b\u5e8f\u3002\u6b64\u5916\uff0c\u7ecf\u5e38\u5206\u6790\u5e94\u7528\u7a0b\u5e8f\u5c06\u4f7f\u60a8\u4e86\u89e3\u5230\u5bf9 CUDA \u4ee3\u7801\u5e93\u4f5c\u51fa\u7684\u7279\u5b9a\u66f4\u6539\u4f1a\u5bf9\u5176\u5b9e\u9645\u6027\u80fd\u9020\u6210\u4f55\u79cd\u5f71\u54cd\uff1a\u800c\u5f53\u53ea\u5728\u4ee3\u7801\u5e93\u4e2d\u8fdb\u884c\u591a\u79cd\u66f4\u6539\u540e\u518d\u5206\u6790\u5e94\u7528\u7a0b\u5e8f\u65f6\uff0c\u5c06\u5f88\u96be\u5f97\u77e5\u8fd9\u4e00\u70b9\u3002</p> <p><code>nsys profile</code>\u5c06\u751f\u6210\u4e00\u4e2a<code>qdrep</code>\u62a5\u544a\u6587\u4ef6\uff0c\u8be5\u6587\u4ef6\u53ef\u4ee5\u4ee5\u591a\u79cd\u65b9\u5f0f\u4f7f\u7528\u3002 \u6211\u4eec\u5728\u8fd9\u91cc\u4f7f\u7528<code>--stats = true</code>\u6807\u5fd7\u8868\u793a\u6211\u4eec\u5e0c\u671b\u6253\u5370\u8f93\u51fa\u6458\u8981\u7edf\u8ba1\u4fe1\u606f\u3002 \u8f93\u51fa\u7684\u4fe1\u606f\u6709\u5f88\u591a.</p> <pre><code>!nsys profile --stats=true ./single-thread-vector-add\n</code></pre> <p>\u53ef\u4ee5\u5411<code>nsys profile</code>\u63d0\u4f9b<code>-f</code>\u6807\u5fd7\u4ee5\u5141\u8bb8\u8986\u76d6\u73b0\u6709\u7684\u62a5\u544a\u6587\u4ef6</p>"},{"location":"ZJU_CS/HPC/class/L5/#streaming_multiprocessorsgpu","title":"\u6d41\u591a\u5904\u7406\u5668\uff08Streaming Multiprocessors\uff09\u53ca\u67e5\u8be2GPU\u7684\u8bbe\u5907\u914d\u7f6e","text":"<p>\u672c\u8282\u5c06\u63a2\u8ba8\u4e86\u89e3 GPU \u786c\u4ef6\u7684\u7279\u5b9a\u529f\u80fd\uff0c\u4ee5\u8fdb\u4e00\u6b65\u4fc3\u8fdb\u4f18\u5316\u3002\u5b66\u4e60\u5b8c\u6d41\u591a\u5904\u7406\u5668\u540e\uff0c\u60a8\u5c06\u5c1d\u8bd5\u8fdb\u4e00\u6b65\u4f18\u5316\u81ea\u5df1\u4e00\u76f4\u6267\u884c\u7684\u52a0\u901f\u5411\u91cf\u52a0\u6cd5\u7a0b\u5e8f\u3002</p> <pre><code>#include &lt;stdio.h&gt;\n\nint main()\n{\n  /*\n   * Device ID is required first to query the device.\n   */\n\n  int deviceId;\n  cudaGetDevice(&amp;deviceId);\n\n  cudaDeviceProp props;\n  cudaGetDeviceProperties(&amp;props, deviceId);\n\n  /*\n   * `props` now contains several properties about the current device.\n   */\n\n  int computeCapabilityMajor = props.major;\n  int computeCapabilityMinor = props.minor;\n  int multiProcessorCount = props.multiProcessorCount;\n  int warpSize = props.warpSize;\n\n\n  printf(\"Device ID: %d\\nNumber of SMs: %d\\nCompute Capability Major: %d\\nCompute Capability Minor: %d\\nWarp Size: %d\\n\", deviceId, multiProcessorCount, computeCapabilityMajor, computeCapabilityMinor, warpSize);\n}\n</code></pre>"},{"location":"ZJU_CS/HPC/class/L5/#_1","title":"\u83b7\u5f97\u7edf\u4e00\u5185\u5b58\u7684\u7ec6\u8282","text":"<p>\u60a8\u4e00\u76f4\u4f7f\u7528 <code>cudaMallocManaged</code> \u5206\u914d\u65e8\u5728\u4f9b\u4e3b\u673a\u6216\u8bbe\u5907\u4ee3\u7801\u4f7f\u7528\u7684\u5185\u5b58\uff0c\u5e76\u4e14\u73b0\u5728\u4ecd\u5728\u4eab\u53d7\u8fd9\u79cd\u65b9\u6cd5\u7684\u4fbf\u5229\u4e4b\u5904\uff0c\u5373\u5728\u5b9e\u73b0\u81ea\u52a8\u5185\u5b58\u8fc1\u79fb\u4e14\u7b80\u5316\u7f16\u7a0b\u7684\u540c\u65f6\uff0c\u800c\u65e0\u9700\u6df1\u5165\u4e86\u89e3 <code>cudaMallocManaged</code> \u6240\u5206\u914d\u7edf\u4e00\u5185\u5b58 (UM) \u5b9e\u9645\u5de5\u4f5c\u539f\u7406\u7684\u8be6\u7ec6\u4fe1\u606f\u3002<code>nsys profile</code> \u63d0\u4f9b\u6709\u5173\u52a0\u901f\u5e94\u7528\u7a0b\u5e8f\u4e2d UM \u7ba1\u7406\u7684\u8be6\u7ec6\u4fe1\u606f\uff0c\u5e76\u5728\u5229\u7528\u8fd9\u4e9b\u4fe1\u606f\u7684\u540c\u65f6\u7ed3\u5408\u5bf9 UM \u5de5\u4f5c\u539f\u7406\u7684\u66f4\u6df1\u5165\u7406\u89e3\uff0c\u8fdb\u800c\u4e3a\u4f18\u5316\u52a0\u901f\u5e94\u7528\u7a0b\u5e8f\u521b\u9020\u66f4\u591a\u673a\u4f1a\u3002</p>"},{"location":"ZJU_CS/HPC/class/L5/#um","title":"\u7edf\u4e00\u5185\u5b58(UM)\u7684\u8fc1\u79fb","text":"<p>\u5206\u914d UM \u65f6\uff0c\u5185\u5b58\u5c1a\u672a\u9a7b\u7559\u5728\u4e3b\u673a\u6216\u8bbe\u5907\u4e0a\u3002\u4e3b\u673a\u6216\u8bbe\u5907\u5c1d\u8bd5\u8bbf\u95ee\u5185\u5b58\u65f6\u4f1a\u53d1\u751f \u9875\u9519\u8bef\uff0c\u6b64\u65f6\u4e3b\u673a\u6216\u8bbe\u5907\u4f1a\u6279\u91cf\u8fc1\u79fb\u6240\u9700\u7684\u6570\u636e\u3002\u540c\u7406\uff0c\u5f53 CPU \u6216\u52a0\u901f\u7cfb\u7edf\u4e2d\u7684\u4efb\u4f55 GPU \u5c1d\u8bd5\u8bbf\u95ee\u5c1a\u672a\u9a7b\u7559\u5728\u5176\u4e0a\u7684\u5185\u5b58\u65f6\uff0c\u4f1a\u53d1\u751f\u9875\u9519\u8bef\u5e76\u89e6\u53d1\u8fc1\u79fb\u3002</p> <p>\u80fd\u591f\u6267\u884c\u9875\u9519\u8bef\u5e76\u6309\u9700\u8fc1\u79fb\u5185\u5b58\u5bf9\u4e8e\u5728\u52a0\u901f\u5e94\u7528\u7a0b\u5e8f\u4e2d\u7b80\u5316\u5f00\u53d1\u6d41\u7a0b\u5927\u6709\u52a9\u76ca\u3002\u6b64\u5916\uff0c\u5728\u5904\u7406\u5c55\u793a\u7a00\u758f\u8bbf\u95ee\u6a21\u5f0f\u7684\u6570\u636e\u65f6\uff08\u4f8b\u5982\uff0c\u5728\u5e94\u7528\u7a0b\u5e8f\u5b9e\u9645\u8fd0\u884c\u4e4b\u524d\u65e0\u6cd5\u5f97\u77e5\u9700\u8981\u5904\u7406\u7684\u6570\u636e\u65f6\uff09\uff0c\u4ee5\u53ca\u5728\u5177\u6709\u591a\u4e2a GPU \u7684\u52a0\u901f\u7cfb\u7edf\u4e2d\uff0c\u6570\u636e\u53ef\u80fd\u7531\u591a\u4e2a GPU \u8bbe\u5907\u8bbf\u95ee\u65f6\uff0c\u6309\u9700\u8fc1\u79fb\u5185\u5b58\u5c06\u4f1a\u5e26\u6765\u663e\u8457\u4f18\u52bf\u3002</p> <p>\u6709\u4e9b\u60c5\u51b5\u4e0b\uff08\u4f8b\u5982\uff0c\u5728\u8fd0\u884c\u65f6\u4e4b\u524d\u9700\u8981\u5f97\u77e5\u6570\u636e\uff0c\u4ee5\u53ca\u9700\u8981\u5927\u91cf\u8fde\u7eed\u7684\u5185\u5b58\u5757\u65f6\uff09\uff0c\u6211\u4eec\u8fd8\u80fd\u6709\u6548\u89c4\u907f\u9875\u9519\u8bef\u548c\u6309\u9700\u6570\u636e\u8fc1\u79fb\u6240\u4ea7\u751f\u7684\u5f00\u9500\u3002</p> <p>\u672c\u5b9e\u9a8c\u7684\u540e\u7eed\u5185\u5bb9\u5c06\u4fa7\u91cd\u4e8e\u5bf9\u6309\u9700\u8fc1\u79fb\u7684\u7406\u89e3\uff0c\u4ee5\u53ca\u5982\u4f55\u5728\u5206\u6790\u5668\u8f93\u51fa\u4e2d\u8bc6\u522b\u6309\u9700\u8fc1\u79fb\u3002\u8fd9\u4e9b\u77e5\u8bc6\u53ef\u8ba9\u60a8\u5728\u4eab\u53d7\u6309\u9700\u8fc1\u79fb\u4f18\u52bf\u7684\u540c\u65f6\uff0c\u51cf\u5c11\u5176\u4ea7\u751f\u7684\u5f00\u9500\u3002</p>"},{"location":"ZJU_CS/HPC/class/L5/#_2","title":"\u5f02\u6b65\u5185\u5b58\u9884\u53d6","text":"<p>\u5728\u4e3b\u673a\u5230\u8bbe\u5907\u548c\u8bbe\u5907\u5230\u4e3b\u673a\u7684\u5185\u5b58\u4f20\u8f93\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u4f7f\u7528\u4e00\u79cd\u6280\u672f\u6765\u51cf\u5c11\u9875\u9519\u8bef\u548c\u6309\u9700\u5185\u5b58\u8fc1\u79fb\u6210\u672c\uff0c\u6b64\u5f3a\u5927\u6280\u672f\u79f0\u4e3a\u5f02\u6b65\u5185\u5b58\u9884\u53d6\u3002\u901a\u8fc7\u6b64\u6280\u672f\uff0c\u7a0b\u5e8f\u5458\u53ef\u4ee5\u5728\u5e94\u7528\u7a0b\u5e8f\u4ee3\u7801\u4f7f\u7528\u7edf\u4e00\u5185\u5b58 (UM) \u4e4b\u524d\uff0c\u5728\u540e\u53f0\u5c06\u5176\u5f02\u6b65\u8fc1\u79fb\u81f3\u7cfb\u7edf\u4e2d\u7684\u4efb\u4f55 CPU \u6216 GPU \u8bbe\u5907\u3002\u6b64\u4e3e\u53ef\u4ee5\u51cf\u5c11\u9875\u9519\u8bef\u548c\u6309\u9700\u6570\u636e\u8fc1\u79fb\u6240\u5e26\u6765\u7684\u6210\u672c\uff0c\u5e76\u8fdb\u800c\u63d0\u9ad8 GPU \u6838\u51fd\u6570\u548c CPU \u51fd\u6570\u7684\u6027\u80fd\u3002</p> <p>\u6b64\u5916\uff0c\u9884\u53d6\u5f80\u5f80\u4f1a\u4ee5\u66f4\u5927\u7684\u6570\u636e\u5757\u6765\u8fc1\u79fb\u6570\u636e\uff0c\u56e0\u6b64\u5176\u8fc1\u79fb\u6b21\u6570\u8981\u4f4e\u4e8e\u6309\u9700\u8fc1\u79fb\u3002\u6b64\u6280\u672f\u975e\u5e38\u9002\u7528\u4e8e\u4ee5\u4e0b\u60c5\u51b5\uff1a\u5728\u8fd0\u884c\u65f6\u4e4b\u524d\u5df2\u77e5\u6570\u636e\u8bbf\u95ee\u9700\u6c42\u4e14\u6570\u636e\u8bbf\u95ee\u5e76\u672a\u91c7\u7528\u7a00\u758f\u6a21\u5f0f\u3002</p> <p>CUDA \u53ef\u901a\u8fc7 <code>cudaMemPrefetchAsync</code> \u51fd\u6570\uff0c\u8f7b\u677e\u5c06\u6258\u7ba1\u5185\u5b58\u5f02\u6b65\u9884\u53d6\u5230 GPU \u8bbe\u5907\u6216 CPU\u3002\u4ee5\u4e0b\u6240\u793a\u4e3a\u5982\u4f55\u4f7f\u7528\u8be5\u51fd\u6570\u5c06\u6570\u636e\u9884\u53d6\u5230\u5f53\u524d\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u7684 GPU \u8bbe\u5907\uff0c\u7136\u540e\u518d\u9884\u53d6\u5230 CPU\uff1a</p> <pre><code>int deviceId;\ncudaGetDevice(&amp;deviceId);                                         // The ID of the currently active GPU device.\n\ncudaMemPrefetchAsync(pointerToSomeUMData, size, deviceId);        // Prefetch to GPU device.\ncudaMemPrefetchAsync(pointerToSomeUMData, size, cudaCpuDeviceId); // Prefetch to host. `cudaCpuDeviceId` is a\n                                                                  // built-in CUDA variable.\n</code></pre>"},{"location":"ZJU_CS/HPC/class/L5/#_3","title":"\u624b\u52a8\u5185\u5b58\u5206\u914d\u548c\u590d\u5236","text":"<p>\u5c3d\u7ba1 <code>cudaMallocManaged</code> \u548c <code>cudaMemPrefetchAsync</code> \u51fd\u6570\u6027\u80fd\u51fa\u4f17\u5e76\u80fd\u5927\u5e45\u7b80\u5316\u5185\u5b58\u8fc1\u79fb\uff0c\u4f46\u6709\u65f6\u4e5f\u6709\u5fc5\u8981\u4f7f\u7528\u66f4\u591a\u624b\u52a8\u5185\u5b58\u5206\u914d\u65b9\u6cd5\u3002\u8fd9\u5728\u5df2\u77e5\u53ea\u9700\u5728\u8bbe\u5907\u6216\u4e3b\u673a\u4e0a\u8bbf\u95ee\u6570\u636e\u65f6\u5c24\u5176\u5982\u6b64\uff0c\u5e76\u4e14\u56e0\u514d\u4e8e\u8fdb\u884c\u81ea\u52a8\u6309\u9700\u8fc1\u79fb\u800c\u80fd\u591f\u6536\u56de\u6570\u636e\u8fc1\u79fb\u6210\u672c\u3002</p> <p>\u6b64\u5916\uff0c\u901a\u8fc7\u624b\u52a8\u5185\u5b58\u7ba1\u7406\uff0c\u60a8\u53ef\u4ee5\u4f7f\u7528\u975e\u9ed8\u8ba4\u6d41\u540c\u65f6\u5f00\u5c55\u6570\u636e\u4f20\u8f93\u4e0e\u8ba1\u7b97\u5de5\u4f5c\u3002\u5728\u672c\u8282\u4e2d\uff0c\u60a8\u5c06\u5b66\u4e60\u4e00\u4e9b\u57fa\u672c\u7684\u624b\u52a8\u5185\u5b58\u5206\u914d\u548c\u62f7\u8d1d\u6280\u672f\uff0c\u4e4b\u540e\u4f1a\u5ef6\u4f38\u5e94\u7528\u8fd9\u4e9b\u6280\u672f\u4ee5\u540c\u65f6\u5f00\u5c55\u6570\u636e\u62f7\u8d1d\u4e0e\u8ba1\u7b97\u5de5\u4f5c\u3002</p> <p>\u4ee5\u4e0b\u662f\u4e00\u4e9b\u7528\u4e8e\u624b\u52a8\u5185\u5b58\u7ba1\u7406\u7684 CUDA \u547d\u4ee4\uff1a</p> <ul> <li><code>cudaMalloc</code> \u547d\u4ee4\u5c06\u76f4\u63a5\u4e3a\u5904\u4e8e\u6d3b\u52a8\u72b6\u6001\u7684 GPU \u5206\u914d\u5185\u5b58\u3002\u8fd9\u53ef\u9632\u6b62\u51fa\u73b0\u6240\u6709 GPU \u5206\u9875\u9519\u8bef\uff0c\u800c\u4ee3\u4ef7\u662f\u4e3b\u673a\u4ee3\u7801\u5c06\u65e0\u6cd5\u8bbf\u95ee\u8be5\u547d\u4ee4\u8fd4\u56de\u7684\u6307\u9488\u3002</li> <li><code>cudaMallocHost</code> \u547d\u4ee4\u5c06\u76f4\u63a5\u4e3a CPU \u5206\u914d\u5185\u5b58\u3002\u8be5\u547d\u4ee4\u53ef\u201c\u56fa\u5b9a\u201d\u5185\u5b58(pinned memory)\u6216\u201c\u9875\u9501\u5b9a\u201d\u5185\u5b58(page-locked memory)\uff0c\u6b64\u4e3e\u5141\u8bb8\u5c06\u5185\u5b58\u5f02\u6b65\u62f7\u8d1d\u81f3 GPU \u6216\u4ece GPU \u5f02\u6b65\u62f7\u8d1d\u81f3\u5185\u5b58\u3002\u56fa\u5b9a\u5185\u5b58\u8fc7\u591a\u5219\u4f1a\u5e72\u6270 CPU \u6027\u80fd\uff0c\u56e0\u6b64\u8bf7\u52ff\u65e0\u7aef\u4f7f\u7528\u8be5\u547d\u4ee4\u3002\u91ca\u653e\u56fa\u5b9a\u5185\u5b58\u65f6\u5e94\u4f7f\u7528 <code>cudaFreeHost</code> \u547d\u4ee4\u3002</li> <li>\u65e0\u8bba\u662f\u4ece\u4e3b\u673a\u5230\u8bbe\u5907\u8fd8\u662f\u4ece\u8bbe\u5907\u5230\u4e3b\u673a\uff0c<code>cudaMemcpy</code> \u547d\u4ee4\u5747\u53ef\u62f7\u8d1d\uff08\u800c\u975e\u4f20\u8f93\uff09\u5185\u5b58\u3002</li> </ul>"},{"location":"ZJU_CS/HPC/class/L5/#_4","title":"\u624b\u52a8\u5185\u5b58\u7ba1\u7406\u793a\u4f8b","text":"<p>\u4ee5\u4e0b\u662f\u4e00\u6bb5\u6f14\u793a\u4f7f\u7528\u4e0a\u8ff0 CUDA API \u8c03\u7528\u7684\u4ee3\u7801\u3002</p> <pre><code>int *host_a, *device_a;        // Define host-specific and device-specific arrays.\ncudaMalloc(&amp;device_a, size);   // `device_a` is immediately available on the GPU.\ncudaMallocHost(&amp;host_a, size); // `host_a` is immediately available on CPU, and is page-locked, or pinned.\n\ninitializeOnHost(host_a, N);   // No CPU page faulting since memory is already allocated on the host.\n\n// `cudaMemcpy` takes the destination, source, size, and a CUDA-provided variable for the direction of the copy.\ncudaMemcpy(device_a, host_a, size, cudaMemcpyHostToDevice);\n\nkernel&lt;&lt;&lt;blocks, threads, 0, someStream&gt;&gt;&gt;(device_a, N);\n\n// `cudaMemcpy` can also copy data from device to host.\ncudaMemcpy(host_a, device_a, size, cudaMemcpyDeviceToHost);\n\nverifyOnHost(host_a, N);\n\ncudaFree(device_a);\ncudaFreeHost(host_a);          // Free pinned memory like this.\n</code></pre> <p>\u9664\u4e86<code>cudaMemcpy</code>\u4e4b\u5916\uff0c\u8fd8\u6709<code>cudaMemcpyAsync</code>\uff0c\u53ea\u8981\u56fa\u5b9a\u4e86\u4e3b\u673a\u5185\u5b58\uff0c\u5b83\u5c31\u53ef\u4ee5\u4ece\u4e3b\u673a\u5230\u8bbe\u5907\u6216\u4ece\u8bbe\u5907\u5230\u4e3b\u673a\u5f02\u6b65\u590d\u5236\u5185\u5b58\uff0c\u8fd9\u53ef\u4ee5\u901a\u8fc7\u4f7f\u7528<code>cudaMallocHost</code>\u5206\u914d\u5b83\u6765\u5b8c\u6210\u3002</p> <p>\u4e0e\u6838\u51fd\u6570\u7684\u6267\u884c\u7c7b\u4f3c\uff0c<code>cudaMemcpyAsync</code>\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4ec5\u76f8\u5bf9\u4e8e\u4e3b\u673a\u662f\u5f02\u6b65\u7684\u3002\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u5b83\u5728\u9ed8\u8ba4\u6d41\u4e2d\u6267\u884c\uff0c\u56e0\u6b64\u5bf9\u4e8eGPU\u4e0a\u53d1\u751f\u7684\u5176\u4ed6CUDA\u64cd\u4f5c\u800c\u8a00\uff0c\u5b83\u662f\u963b\u585e\u64cd\u4f5c\u3002\u4f46\u662f\uff0c<code>cudaMemcpyAsync</code>\u51fd\u6570\u5c06\u975e\u9ed8\u8ba4\u6d41\u4f5c\u4e3a\u53ef\u9009\u7684\u7b2c5\u4e2a\u53c2\u6570\u3002\u901a\u8fc7\u5411\u5176\u4f20\u9012\u975e\u9ed8\u8ba4\u6d41\uff0c\u53ef\u4ee5\u5c06\u5185\u5b58\u4f20\u8f93\u4e0e\u5176\u4ed6\u975e\u9ed8\u8ba4\u6d41\u4e2d\u53d1\u751f\u7684\u5176\u4ed6CUDA\u64cd\u4f5c\u5e76\u53d1\u3002</p> <p>\u4e00\u79cd\u5e38\u89c1\u4e14\u6709\u7528\u7684\u6a21\u5f0f\u662f\u7ed3\u5408\u4f7f\u7528\u56fa\u5b9a\u4e3b\u673a\u5185\u5b58\uff0c\u975e\u9ed8\u8ba4\u6d41\u4e2d\u7684\u5f02\u6b65\u5185\u5b58\u526f\u672c\u548c\u975e\u9ed8\u8ba4\u6d41\u4e2d\u7684\u6838\u51fd\u6570\u6267\u884c\uff0c\u4ee5\u4f7f\u5185\u5b58\u4f20\u8f93\u4e0e\u6838\u51fd\u6570\u7684\u6267\u884c\u91cd\u53e0\u3002</p> <p>\u5728\u4ee5\u4e0b\u793a\u4f8b\u4e2d\uff0c\u6211\u4eec\u5e76\u975e\u5728\u7b49\u5f85\u6574\u4e2a\u5185\u5b58\u62f7\u8d1d\u5b8c\u6210\u4e4b\u540e\u518d\u5f00\u59cb\u8fd0\u884c\u6838\u51fd\u6570\uff0c\u800c\u662f\u62f7\u8d1d\u5e76\u5904\u7406\u6240\u9700\u7684\u6570\u636e\u6bb5\uff0c\u5e76\u8ba9\u6bcf\u4e2a\u62f7\u8d1d/\u5904\u7406\u4e2d\u7684\u6570\u636e\u6bb5\u5747\u5728\u5404\u81ea\u7684\u975e\u9ed8\u8ba4\u6d41\u4e2d\u8fd0\u884c\u3002\u901a\u8fc7\u4f7f\u7528\u6b64\u6280\u672f\uff0c\u60a8\u53ef\u4ee5\u5f00\u59cb\u5904\u7406\u90e8\u5206\u6570\u636e\uff0c\u540c\u65f6\u4e3a\u540e\u7eed\u6bb5\u5e76\u53d1\u6267\u884c\u5185\u5b58\u4f20\u8f93\u3002\u4f7f\u7528\u6b64\u6280\u672f\u8ba1\u7b97\u64cd\u4f5c\u6b21\u6570\u7684\u6570\u636e\u6bb5\u7279\u5b9a\u503c\u548c\u6570\u7ec4\u5185\u7684\u504f\u79fb\u4f4d\u7f6e\u65f6\u5fc5\u987b\u683c\u5916\u5c0f\u5fc3\uff0c\u5982\u4e0b\u6240\u793a\uff1a</p> <pre><code>int N = 2&lt;&lt;24;\nint size = N * sizeof(int);\n\nint *host_array;\nint *device_array;\n\ncudaMallocHost(&amp;host_array, size);               // Pinned host memory allocation.\ncudaMalloc(&amp;device_array, size);                 // Allocation directly on the active GPU device.\n\ninitializeData(host_array, N);                   // Assume this application needs to initialize on the host.\n\nconst int numberOfSegments = 4;                  // This example demonstrates slicing the work into 4 segments.\nint segmentN = N / numberOfSegments;             // A value for a segment's worth of `N` is needed.\nsize_t segmentSize = size / numberOfSegments;    // A value for a segment's worth of `size` is needed.\n\n// For each of the 4 segments...\nfor (int i = 0; i &lt; numberOfSegments; ++i)\n{\n  // Calculate the index where this particular segment should operate within the larger arrays.\n  segmentOffset = i * segmentN;\n\n  // Create a stream for this segment's worth of copy and work.\n  cudaStream_t stream;\n  cudaStreamCreate(&amp;stream);\n\n  // Asynchronously copy segment's worth of pinned host memory to device over non-default stream.\n  cudaMemcpyAsync(&amp;device_array[segmentOffset],  // Take care to access correct location in array.\n                  &amp;host_array[segmentOffset],    // Take care to access correct location in array.\n                  segmentSize,                   // Only copy a segment's worth of memory.\n                  cudaMemcpyHostToDevice,\n                  stream);                       // Provide optional argument for non-default stream.\n\n  // Execute segment's worth of work over same non-default stream as memory copy.\n  kernel&lt;&lt;&lt;number_of_blocks, threads_per_block, 0, stream&gt;&gt;&gt;(&amp;device_array[segmentOffset], segmentN);\n\n  // `cudaStreamDestroy` will return immediately (is non-blocking), but will not actually destroy stream until\n  // all stream operations are complete.\n  cudaStreamDestroy(stream);\n}\n</code></pre>"},{"location":"ZJU_CS/HPC/class/L6/","title":"7\u670810\u65e5 OpenMP","text":""},{"location":"ZJU_CS/HPC/class/L7/","title":"7\u670811\u53f7 \u673a\u5668\u5b66\u4e60\uff08Machine Learning)","text":""},{"location":"ZJU_CS/HPC/class/L7/#why_ml_in_an_hpc_course","title":"Why ML in an HPC course?","text":"<ul> <li>ML(especially DL) is a special serious of application requiring large computing power.</li> <li>ML can be used to guide system optimization</li> <li>Emerging research topic : MLsys()</li> </ul>"},{"location":"ZJU_CS/HPC/class/L7/#preview","title":"Preview","text":"<ul> <li> <p>Introduction</p> </li> <li> <p>Basic of Machine Learning</p> </li> <li> <p>Typical Network Architectures</p> </li> </ul> <p>CNN</p> <p>Attention</p> <ul> <li>DL Hardware &amp; Software</li> <li>MLSys</li> </ul>"},{"location":"ZJU_CS/HPC/class/L7/#ml","title":"ML","text":"<ol> <li>Machine Learning Problems(classification / Regression / Clustering / Dimensionality reduction)</li> <li>Learning method((un)Supervised learning / transfer learning / reinforcement learning)</li> <li>Gradient Descent, and learning rate (just like \u6b65\u957f) (Stochastic\u968f\u673a)</li> <li>About fit.</li> </ol>"},{"location":"ZJU_CS/HPC/class/L7/#dl","title":"DL","text":"<ol> <li> <p>Multilayer Perceptions(Input  Hidden  Output)</p> </li> <li> <p>Forward / Back Propagation(follow chain rules)</p> </li> </ol> <p></p> <p>Preview</p> <ol> <li> <p>Layers(Activation Function  Loss Function  Regularization  Dropout  Normalization)</p> </li> <li> <p>Optimizers</p> </li> <li> <p>Problems in DL(Gradient Vanishment  Overfitting  Fitting Non\u2010linear Functions )</p> </li> </ol> <ol> <li>Activation Function(sigmoid(\u5bb9\u6613\u68af\u5ea6\u6d88\u5931) / tanh / Rectified Linear Unit\uff08\u53ef\u907f\u514d\u68af\u5ea6\u6d88\u5931\uff09 )</li> </ol> <p></p> <p></p> <ol> <li>Loss Function(\u2022Cross Entropy / Mean Square Error)</li> <li>Regularization(\u6b63\u5219\u5316)</li> <li> <p>Dropout</p> </li> <li> <p>Batch Normalization(skip math)</p> </li> <li>Optimizer(link)</li> </ol> <p>SGD; SGD + Momentum; AdaGrad; Adam</p>"},{"location":"ZJU_CS/HPC/class/L7/#cnn","title":"CNN","text":"<p>\u5b66\u957f\u8bb2\u4e86\u4e0d\u5c11\uff0c\u4f46\u662f\u4e0d\u592a\u60f3\u8bb0\u4e86\u3002\u4e3b\u8981\u542c\u542c\u5c31\u597d</p>"},{"location":"ZJU_CS/HPC/class/L8/","title":"\u9ad8\u6027\u80fd\u8ba1\u7b97\u9ad8\u7ea7\u8bdd\u672f","text":"<ul> <li>\u9ad8\u6027\u80fd\u8ba1\u7b97\u9ad8\u7ea7\u8bdd\u672f<ul> <li>CPU GPU FPGA</li> <li>\u670d\u52a1\u5668</li> <li>RC4ML\u5b9e\u9a8c\u5ba4\u7684\u7cfb\u7edf\u7814\u7a76</li> </ul> </li> </ul>"},{"location":"ZJU_CS/HPC/class/L8/#cpu_gpu_fpga","title":"CPU GPU FPGA","text":"<ol> <li>CPU\u7ecf\u5178\u4e94\u7ea7\u6d41\u6c34</li> <li>CPU\uff1a\u8d85\u6807\u91cfSuperscalar\uff08CISC\u6307\u4ee4\u5185\u90e8RISC\u5316\u3001\u6307\u4ee4\u591a\u5e76\u53d1\uff09</li> </ol>"},{"location":"ZJU_CS/HPC/class/L8/#_2","title":"\u670d\u52a1\u5668","text":"<ol> <li>1U\u30012U\u30014U\u6839\u636e\u5927\u5c0f\u5224\u65ad\u30024U\u4e00\u822c\u80fd\u653e2\u4e2acpu8\u4e2aGPU\u3002</li> </ol>"},{"location":"ZJU_CS/HPC/class/L8/#rc4ml","title":"RC4ML\u5b9e\u9a8c\u5ba4\u7684\u7cfb\u7edf\u7814\u7a76","text":""},{"location":"ZJU_CS/HPC/homework/lab1/","title":"Lab-1","text":"<ul> <li>Lab-1<ul> <li>Lab Description</li> <li>Introduction Knowledge(\u53ef\u4ee5\u8df3\u8fc7\u4e0d\u770b)<ul> <li>\u96c6\u7fa4</li> <li>Linux\u547d\u4ee4</li> <li>HPL</li> <li>UFW</li> <li>BLAS</li> <li>MPI</li> <li>SSH</li> <li>Makefile</li> <li>\u5185\u7f51 IP</li> </ul> </li> <li>Lab Design &amp; Test Result<ul> <li>\u865a\u62df\u673a</li> <li>HPL\u73af\u5883\u642d\u5efa<ul> <li>\u865a\u62df\u673a\u73af\u5883\u914d\u5236</li> <li>Openmpi\u5b89\u88c5</li> <li>OpenBLAS\u5b89\u88c5</li> </ul> </li> <li>HPL\u7684\u5b89\u88c5\u4ee5\u53ca\u73af\u5883\u914d\u5236</li> <li>\u514b\u9686\u8282\u70b9</li> <li>\u6d4b\u8bd5\u96c6\u7fa4<ul> <li>ping\u901a</li> <li>\u914d\u5236SSH</li> <li>mpirun\u5c1d\u8bd5</li> </ul> </li> </ul> </li> <li>Discussion</li> </ul> </li> </ul>"},{"location":"ZJU_CS/HPC/homework/lab1/#lab_description","title":"Lab Description","text":"<p>ps\uff1a\u8fd9\u4e2a\u5b9e\u9a8c\u662f\u6d59\u6c5f\u5927\u5b66\u8ba1\u7b97\u673a\u79d1\u5b66\u4e0e\u8ba1\u7b97\u4e13\u4e1a\u5927\u4e00\uff082023\uff09\u77ed\u5b66\u671f\u2014\u2014\u8d85\u7b97\u8bfe\u7a0b\u7684\u5b9e\u9a8c\uff0c\u8be6\u60c5\u8bf7\u70b9\u51fb\u6b64\u5904</p> <p>\u672c\u6b21\u5b9e\u9a8c\u8981\u6c42\u4f7f\u7528\u56db\u53f0\u865a\u62df\u673a\u642d\u5efa\u4e00\u4e2a\u7b80\u6613\u7684\u96c6\u7fa4\uff0c\u5e76\u5bf9\u8be5\u96c6\u7fa4\u8fdb\u884c\u6027\u80fd\u6d4b\u8bd5\uff0c\u6700\u540e\u63d0\u4ea4\u6d4b\u8bd5\u7ed3\u679c\u548c\u5b9e\u9a8c\u62a5\u544a\u3002</p> <p>\u96c6\u7fa4\u642d\u5efa\u7684\u4efb\u52a1\u5305\u62ec\u521b\u5efa\u865a\u62df\u673a\u3001\u5b89\u88c5 Linux \u53d1\u884c\u7248\u3001\u914d\u7f6e\u7f51\u7edc\u548c ssh \u901a\u4fe1\u3002</p> <p>\u6027\u80fd\u6d4b\u8bd5\u901a\u8fc7\u4f7f\u7528 OpenMPI \u5c06 HPL \u6d4b\u8bd5\u7a0b\u5e8f\u5206\u914d\u5230\u56db\u4e2a\u865a\u62df\u673a\u8282\u70b9\u4e0a\u6267\u884c\u3002\u56e0\u6b64\uff0c\u9700\u8981\u4e0b\u8f7d\u5e76\u7f16\u8bd1 OpenMPI\u3001BLAS \u548c HPL \u7684\u6e90\u4ee3\u7801\uff0c\u5176\u4e2d OpenMPI\u3001BLAS\u662f HPL \u7684\u4f9d\u8d56\u9879\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab1/#introduction_knowledge","title":"Introduction Knowledge(\u53ef\u4ee5\u8df3\u8fc7\u4e0d\u770b)","text":"<p>(ps:\u82e5\u4e0d\u60f3\u770b\u53ef\u8df3\u8fc7\uff0c\u540e\u9762\u5b9e\u9a8c\u8fc7\u7a0b\u4e2d\u770b\u4e0d\u61c2\u4e86\u53ef\u4ee5\u518d\u6765\u5b66\u4e60)</p>"},{"location":"ZJU_CS/HPC/homework/lab1/#_1","title":"\u96c6\u7fa4","text":"<p>\u8ba1\u7b97\u673a\u96c6\u7fa4\uff08\u82f1\u8bed\uff1acomputer cluster\uff09\u662f\u4e00\u7ec4\u677e\u6563\u6216\u7d27\u5bc6\u8fde\u63a5\u5728\u4e00\u8d77\u5de5\u4f5c\u7684\u8ba1\u7b97\u673a\u3002\u7531\u4e8e\u8fd9\u4e9b\u8ba1\u7b97\u673a\u534f\u540c\u5de5\u4f5c\uff08\u5e76\u884c\u8ba1\u7b97\uff09\uff0c\u5728\u8bb8\u591a\u65b9\u9762\u5b83\u4eec\u53ef\u4ee5\u88ab\u89c6\u4e3a\u5355\u4e2a\u7cfb\u7edf\u3002\u4e0e\u7f51\u683c\u8ba1\u7b97\u673a\u4e0d\u540c\uff0c\u8ba1\u7b97\u673a\u96c6\u7fa4\u5c06\u6bcf\u4e2a\u8282\u70b9\u8bbe\u7f6e\u4e3a\u6267\u884c\u76f8\u540c\u7684\u4efb\u52a1\uff0c\u7531\u8f6f\u4ef6\u63a7\u5236\u548c\u8c03\u5ea6\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab1/#linux","title":"Linux\u547d\u4ee4","text":"<p>\u8fd9\u4e2a\u611f\u89c9\u7f51\u4e0a\u90fd\u4f1a\u6709\u5f88\u591a\u6559\u7a0b\uff0c\u53ef\u4ee5\u81ea\u5df1\u719f\u6089\u4e00\u4e0b\u5c31\u80fd\u5b66\u4f1a\u3002 \uff08Tips\uff1aman\u5f88\u591a\u65f6\u5019\u662f\u4e2a\u597d\u4e1c\u897f\uff09</p> <pre><code>cd ls clear mkdir rmdir \u2026\u2026\n</code></pre>"},{"location":"ZJU_CS/HPC/homework/lab1/#hpl","title":"HPL","text":"<p>HPL\uff08The High-Performance Linpack Benchmark\uff09\u662f\u6d4b\u8bd5\u9ad8\u6027\u80fd\u8ba1\u7b97\u96c6\u7fa4\u7cfb\u7edf\u6d6e\u70b9\u6027\u80fd\u7684\u57fa\u51c6\u7a0b\u5e8f\u3002HPL\u901a\u8fc7\u5bf9\u9ad8\u6027\u80fd\u8ba1\u7b97\u96c6\u7fa4\u91c7\u7528\u9ad8\u65af\u6d88\u5143\u6cd5\u6c42\u89e3\u4e00\u5143N\u6b21\u7a20\u5bc6\u7ebf\u6027\u4ee3\u6570\u65b9\u7a0b\u7ec4\u7684\u6d4b\u8bd5\uff0c\u8bc4\u4ef7\u9ad8\u6027\u80fd\u8ba1\u7b97\u96c6\u7fa4\u7684\u6d6e\u70b9\u8ba1\u7b97\u80fd\u529b\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab1/#ufw","title":"UFW","text":"<p>Uncomplicated Firewall[1]\uff0c\u7b80\u79f0UFW\uff0c\u662fUbuntu\u7cfb\u7edf\u4e0a\u9ed8\u8ba4\u7684\u9632\u706b\u5899\u7ec4\u4ef6\u3002UFW\u662f\u4e3a\u8f7b\u91cf\u5316\u914d\u7f6eiptables\u800c\u5f00\u53d1\u7684\u4e00\u6b3e\u5de5\u5177\u3002UFW \u63d0\u4f9b\u4e00\u4e2a\u975e\u5e38\u53cb\u597d\u7684\u754c\u9762\u7528\u4e8e\u521b\u5efa\u57fa\u4e8eIPV4\uff0cIPV6\u7684\u9632\u706b\u5899\u89c4\u5219\u3002UFW \u5728 Ubuntu 8.04 LTS \u540e\u7684\u6240\u6709\u53d1\u884c\u7248\u4e2d\u9ed8\u8ba4\u53ef\u7528[2]\u3002UFW \u7684\u56fe\u5f62\u7528\u6237\u754c\u9762\u53ebGufw</p>"},{"location":"ZJU_CS/HPC/homework/lab1/#blas","title":"BLAS","text":"<p>BLAS\uff08\u82f1\u8bed\uff1aBasic Linear Algebra Subprograms\uff0c\u57fa\u7840\u7ebf\u6027\u4ee3\u6570\u7a0b\u5e8f\u96c6\uff09\u662f\u4e00\u4e2a\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff08API\uff09\u6807\u51c6\uff0c\u7528\u4ee5\u89c4\u8303\u53d1\u5e03\u57fa\u7840\u7ebf\u6027\u4ee3\u6570\u64cd\u4f5c\u7684\u6570\u503c\u5e93\uff08\u5982\u77e2\u91cf\u6216\u77e9\u9635\u4e58\u6cd5\uff09\u3002\u8be5\u7a0b\u5e8f\u96c6\u6700\u521d\u53d1\u5e03\u4e8e1979\u5e74\uff0c\u5e76\u7528\u4e8e\u521b\u5efa\u66f4\u5927\u7684\u6570\u503c\u7a0b\u5e8f\u5305\uff08\u5982LAPACK\uff09\u3002\u5728\u9ad8\u6027\u80fd\u8ba1\u7b97\u9886\u57df\uff0cBLAS\u88ab\u5e7f\u6cdb\u4f7f\u7528\u3002\u4f8b\u5982\uff0cLINPACK\u7684\u8fd0\u7b97\u6210\u7ee9\u5219\u5f88\u5927\u7a0b\u5ea6\u4e0a\u53d6\u51b3\u4e8eBLAS\u4e2d\u5b50\u7a0b\u5e8fDGEMM\u7684\u8868\u73b0\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab1/#mpi","title":"MPI","text":"<p>\u6d88\u606f\u4f20\u9012\u63a5\u53e3\uff08\u82f1\u8bed\uff1aMessage Passing Interface\uff0c\u7f29\u5199MPI\uff09\u662f\u4e00\u4e2a\u5e76\u884c\u8ba1\u7b97\u7684\u5e94\u7528\u7a0b\u5e8f\u63a5\u53e3\uff08API\uff09\uff0c\u5e38\u5728\u8d85\u7ea7\u7535\u8111\u3001\u7535\u8111\u96c6\u7fa4\u7b49\u975e\u5171\u4eab\u5185\u5b58\u73af\u5883\u7a0b\u5e8f\u8bbe\u8ba1\u3002</p> <p>\u800c\u672c\u6b21\u5b9e\u9a8c\u7684OpenMPI\u662fMPI\u7684\u4e00\u79cd\uff0c\u5171\u4eab\u5185\u5b58\u7684\u5e76\u884c\u7f16\u7a0b\u7684\u4e00\u4e2aAPI\u3002OpenMPI \u5c06 HPL \u6d4b\u8bd5\u7a0b\u5e8f\u5206\u914d\u5230\u56db\u4e2a\u865a\u62df\u673a\u8282\u70b9\u4e0a\u6267\u884c\u3002MPI\u7684\u6838\u5fc3\u4e3b\u8981\u662f\uff1a\u7aef\u5230\u7aef\u901a\u4fe1\uff0c\u6570\u636e\u7c7b\u578b\uff0c\u548c\u96c6\u5408\u901a\u4fe1\uff08Collective Communication\uff09\u3002\u5177\u4f53\u5185\u5bb9\u53ef\u4ee5\u89c1MPI\u53c2\u8003\u624b\u518c</p>"},{"location":"ZJU_CS/HPC/homework/lab1/#ssh","title":"SSH","text":"<p>\u5b89\u5168\u5916\u58f3\u534f\u8bae\uff08Secure Shell Protocol\uff0c\u7b80\u79f0SSH\uff09\u662f\u4e00\u79cd\u52a0\u5bc6\u7684\u7f51\u7edc\u4f20\u8f93\u534f\u8bae\uff0c\u53ef\u5728\u4e0d\u5b89\u5168\u7684\u7f51\u7edc\u4e2d\u4e3a\u7f51\u7edc\u670d\u52a1\u63d0\u4f9b\u5b89\u5168\u7684\u4f20\u8f93\u73af\u5883[1]\u3002SSH\u901a\u8fc7\u5728\u7f51\u7edc\u4e2d\u521b\u5efa\u5b89\u5168\u96a7\u9053\u6765\u5b9e\u73b0SSH\u5ba2\u6237\u7aef\u4e0e\u670d\u52a1\u5668\u4e4b\u95f4\u7684\u8fde\u63a5[2]\u3002SSH\u6700\u5e38\u89c1\u7684\u7528\u9014\u662f\u8fdc\u7a0b\u767b\u5f55\u7cfb\u7edf\uff0c\u4eba\u4eec\u901a\u5e38\u5229\u7528SSH\u6765\u4f20\u8f93\u547d\u4ee4\u884c\u754c\u9762\u548c\u8fdc\u7a0b\u6267\u884c\u547d\u4ee4\u3002\uff08\u6211\u4eec\u53ef\u4ee5\u8fdc\u7a0b\u8bbf\u95ee\u684c\u9762\u6216\u8005\u670d\u52a1\u5668\uff09</p> <p>\u6b64\u5916\uff0c\u6211\u4eec\u5e38\u7528\u7684Github\u4e5f\u662f\u6bd4\u8f83\u5efa\u8bae\u91c7\u7528SSH\u901a\u4fe1\uff0c\u8fd9\u6837\u8bbf\u95ee\u6bd4\u8f83\u7a33\u5b9a\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab1/#makefile","title":"Makefile","text":"<p>\u6211\u4eec\u5e38\u8bf4\u7684Makefile\u5c31\u662fGNU make.\u5b83\u80fd\u591f\u5e2e\u52a9\u6211\u4eec\u5feb\u901f\u5b8c\u6210\u7f16\u8bd1\u3002\u4e0a\u8fc7C\u5927\u7684\u540c\u5b66\u5e94\u8be5\u5df2\u7ecf\u6709\u6240\u4e86\u89e3\u4e86\u3002\u6211\u4e5f\u4e0d\u5728\u6b64\u8fc7\u591a\u8bf4\u660e\u3002\u4f46\u662f\u6709\u4e00\u4e2a\u6df1\u5165\u6d45\u51fa\u7684\u624b\u518c\u653e\u5728\u8fd9\u91cc\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab1/#ip","title":"\u5185\u7f51 IP","text":"<p>\u672c\u6b21\u5b9e\u9a8c\u4e2d\uff0c\u6211\u4eec\u91c7\u53d6\u7684\u662f\u5185\u7f51IP\u4e92\u901a\u3002\u7531\u4e8e\u7f51\u5173\u7684\u5b58\u5728\uff0c\u4e0d\u540c\u5c40\u57df\u7f51\u5185\u7684\u5185\u7f51IP\u662f\u53ef\u4ee5\u91cd\u590d\u7684\u3002</p> <p>\u5185\u7f51IP\u5730\u5740\uff0c\u4e5f\u5c31\u662f\u5c40\u57df\u7f51\u7f51\u7edc\u5730\u5740\uff0c\u5185\u7f51\u7684\u8ba1\u7b97\u673a\u4ee5NAT\uff08\u7f51\u7edc\u5730\u5740\u8f6c\u6362\uff09\u534f\u8bae\uff0c\u901a\u8fc7\u4e00\u4e2a\u516c\u5171\u7684\u7f51\u5173\u8bbf\u95eeInternet\u3002\u5185\u7f51\u7684\u8ba1\u7b97\u673a\u53ef\u5411Internet\u4e0a\u7684\u5176\u4ed6\u8ba1\u7b97\u673a\u53d1\u9001\u8fde\u63a5\u8bf7\u6c42\uff0c\u4f46Internet\u4e0a\u5176\u4ed6\u7684\u8ba1\u7b97\u673a\u65e0\u6cd5\u5411\u5185\u7f51\u7684\u8ba1\u7b97\u673a\u53d1\u9001\u8fde\u63a5\u8bf7\u6c42\u3002</p> <p>NAT\uff08Network Address Translator\uff09\u662f\u7f51\u7edc\u5730\u5740\u8f6c\u6362\uff0c\u5b83\u5b9e\u73b0\u5185\u7f51\u7684IP\u5730\u5740\u4e0e\u516c\u7f51\u7684\u5730\u5740\u4e4b\u95f4\u7684\u76f8\u4e92\u8f6c\u6362\uff0c\u5c06\u5927\u91cf\u7684\u5185\u7f51IP\u5730\u5740\u8f6c\u6362\u4e3a\u4e00\u4e2a\u6216\u5c11\u91cf\u7684\u516c\u7f51IP\u5730\u5740\uff0c\u51cf\u5c11\u5bf9\u516c\u7f51IP\u5730\u5740\u7684\u5360\u7528\u3002NAT\u7684\u6700\u5178\u578b\u5e94\u7528\u662f\uff1a\u5728\u4e00\u4e2a\u5c40\u57df\u7f51\u5185\uff0c\u53ea\u9700\u8981\u4e00\u53f0\u8ba1\u7b97\u673a\u8fde\u63a5\u4e0aInternet\uff0c\u5c31\u53ef\u4ee5\u5229\u7528NAT\u5171\u4eabInternet\u8fde\u63a5\uff0c\u4f7f\u5c40\u57df\u7f51\u5185\u5176\u4ed6\u8ba1\u7b97\u673a\u4e5f\u53ef\u4ee5\u4e0a\u7f51\u3002</p> <p>\u800c\u672c\u6b21\u5b9e\u9a8c\u7684\u96c6\u7fa4\u53ca\u91c7\u53d6\u8fd9\u6837\u7684\u6a21\u5f0f\uff0c\u6765\u5efa\u7acb\u96c6\u7fa4\u95f4\u7684\u7f51\u7edc\u8fde\u63a5\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab1/#lab_design_test_result","title":"Lab Design &amp; Test Result","text":""},{"location":"ZJU_CS/HPC/homework/lab1/#_2","title":"\u865a\u62df\u673a","text":"<ol> <li> <p>\u7531\u4e8e\u6211\u4e4b\u524d\u5bd2\u5047\u60f3\u4e0a\u624b\u4e0bLinux\u7cfb\u7edf\uff0c\u6545\u5df2\u7ecf\u5728\u81ea\u5df1\u7535\u8111\u4e0a\u5b89\u88c5\u8fc7<code>VMware</code>\uff0c\u6b64\u524d\u4f7f\u7528\u7684\u662f<code>redhat</code>\u3002\u73b0\u5728\u53ea\u9700\u8981\u4e0b\u8f7dLinux\u7684\u955c\u50cf\u6587\u4ef6\u5373\u53ef\u3002\u7531\u4e8e\u81ea\u5df1\u5df2\u7ecf\u4f7f\u7528\u4e86\u534a\u5e74\u591a\u7684<code>WSL2</code>\uff0c\u6545\u9009\u62e9\u4e0b\u8f7d\u7684\u662fUbuntu\u7cfb\u7edf\uff0c\u53ef\u4ee5\u76f4\u63a5\u8bbf\u95eeZJU-mirror\u5373\u53ef\u3002\uff08\u6211\u5efa\u8bae\u4f7f\u7528Desktop\u7248\u672c\uff0c\u4f60\u4f1a\u5feb\u4e50\u5f88\u591a\uff0c\u540e\u9762\u4e5f\u4f1a\u65b9\u4fbf\u5f88\u591a\uff09</p> </li> <li> <p>\u5efa\u8bae\u4f7f\u7528\u865a\u62df\u673a\u7684\u8bdd\u53ef\u4ee5\u5355\u72ec\u51fa\u6765\u78c1\u76d8\u4fbf\u4e8e\u7ba1\u7406\u4ee5\u53ca\u5b89\u5168\u3002</p> </li> </ol> <p></p> <ol> <li>VMware\u865a\u62df\u673a\u7684\u5efa\u7acb\uff0c\u7f51\u4e0a\u4e5f\u6709\u5f88\u591a\u6559\u7a0b\uff0c\u6545\u4e0d\u5728\u6b64\u8bf4\u660e\u3002(ps:\u57fa\u672c\u4e0a\u9009\u62e9\u4f60\u521a\u4e0b\u8f7d\u597d\u7684iso\u955c\u50cf\uff0c\u9009\u62e9\u597d\u914d\u7f6e\u540e\u4e00\u8def\u786e\u5b9a\u5373\u53ef)</li> </ol> <ul> <li>\u865a\u62df\u673a\u521b\u5efa\u6210\u529f\uff0c\u5982\u56fe\uff1a</li> </ul>"},{"location":"ZJU_CS/HPC/homework/lab1/#hpl_1","title":"HPL\u73af\u5883\u642d\u5efa","text":"<p>HPL\u662f<code>Linpack</code>\u6d4b\u8bd5\u7684\u4e00\u79cd\uff0c\u9700\u8981\u4f9d\u8d56<code>OpenMPI</code>&amp;<code>OpenBLAS</code>\u6765\u5b9e\u73b0\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab1/#_3","title":"\u865a\u62df\u673a\u73af\u5883\u914d\u5236","text":"<p>\u76ee\u6807\uff1a\u5b89\u88c5\u76f8\u5173\u7f16\u8bd1\u5668\u4ee5\u53camake\u5de5\u5177\u548c\u7f51\u7edc\u5de5\u5177</p> <ol> <li><code>sudo apt install gcc g++ python3 gfortran -y</code></li> </ol> <p>\u68c0\u67e5\u7684\u8bdd\u6709<code>\u2026 --version</code>\u5373\u53ef\uff0c\u6216\u8005<code>apt list --installed</code>(\u4f46\u8fd9\u4e2a\u592a\u8822\u4e86)</p> <ol> <li> <p><code>sudo apt install make net-tools -y</code></p> </li> <li> <p><code>sudo apt install openssh-server -y</code></p> </li> </ol> <p>\u7528<code>sudo systemctl status ssh</code>\u548c<code>ifconfig</code>\u9a8c\u8bc1\u7f51\u7edc\u5de5\u5177\u548cSSH Server</p> <ol> <li>UFW\u6253\u5f00SSH\u7aef\u53e3</li> </ol> <p><code>sudo ufw allow ssh</code></p>"},{"location":"ZJU_CS/HPC/homework/lab1/#openmpi","title":"Openmpi\u5b89\u88c5","text":"<ol> <li>\u4e0b\u8f7d\u5e76\u89e3\u538bOpenMPI</li> </ol> <p>\u7f51\u5740\u4e3a\uff1aOpen MPI: Version 4.1 (open-mpi.org)</p> <p>\u7528\u706b\u72d0\u6d4f\u89c8\u5668\u6253\u5f00\u70b9\u51fb\u4e0b\u8f7d\u540e\uff0c\u4ece\u7ec8\u7aef\u6253\u5f00\u5f53\u524d\u6587\u4ef6\u5939\uff0c\u4f7f\u7528\uff1a <code>tar xvf openmpi-4.1.1.tar.gz</code>(\u5b66\u4f1a\u4f7f\u7528<code>tab</code>\u8865\u5168)</p> <p>\uff08ps\uff1a\u7528\u684c\u9762\u7248\u7684\u597d\u5904\u6765\u5566\uff01\uff09</p> <p>\u975e\u684c\u9762\u7248\u7684\u7528\u6237\u5c31\u6b63\u5e38\u7528<code>wget</code>\u548c<code>curl</code>\u4e0b\u8f7d\u5c31\u884c\u3002</p> <p></p> <ol> <li>\u5b89\u88c5OpenMPI</li> </ol> <pre><code>cd openmpi-4.1.4\n./configure\nsudo make all install\n</code></pre> <p>\u200b    \u5173\u4e8e<code>sudo make all</code>&amp;<code>sudo make install</code>\u7684\u539f\u7406\uff0c\u6709\u4e00\u7bc7\u535a\u4e3b\u5199\u7684\u86ee\u4e0d\u9519\u7684\u3002link</p> <ol> <li>\u6dfb\u52a0\u8def\u5f84</li> </ol> <p><code>sudo vim /etc/profile</code>(\u8fd9\u91cc\u9700\u8981\u4e00\u70b9\u70b9vim\u7684\u77e5\u8bc6)</p> <p>\u5728profile\u6587\u4ef6\u672b\u5c3e\u6dfb\u52a0</p> <p></p> <p>\u6267\u884c\u4ee5\u4e0b\u8bed\u53e5\u4f7f\u914d\u5236\u751f\u6548</p> <p><code>source /etc/profile</code></p> <p>(ps:\u53ef\u80fd\u7528\u6237\u540d\u4f1a\u53d8\u6210\u767d\u8272\uff0c\u4f46\u662f\u4e0d\u5f71\u54cd\u73af\u5883\u66f4\u65b0)</p> <p>4.\u6d4b\u8bd5\u73af\u5883</p> <pre><code>cd Downloads/openmpi-4.1.4/examples\nmake &amp;&amp; mpirun -np 2 hello_c.c\n</code></pre> <ul> <li> <p>\u6d4b\u8bd5\u7ed3\u679c</p> <p></p> </li> </ul>"},{"location":"ZJU_CS/HPC/homework/lab1/#openblas","title":"OpenBLAS\u5b89\u88c5","text":"<ul> <li> <p>\u7528<code>sudo apt-get install libopenblas-dev</code>\u547d\u4ee4\u5b89\u88c5</p> </li> <li> <p>\u5b89\u88c5\u8def\u5f84\u5728<code>/usr/lib/x86_64-linux-gnu/openblas-pthread</code></p> </li> </ul> <p>\u60f3\u8981\u6d4b\u8bd5\u81ea\u5df1\u662f\u5426\u5b89\u88c5\u6210\u529f\u53ef\u4ee5\u5728\u672c\u5730\u5199\u4e2a\u7a0b\u5e8f\u6d4b\u8bd5\uff0c\u4ee3\u7801\u89c1link</p> <p></p>"},{"location":"ZJU_CS/HPC/homework/lab1/#hpl_2","title":"HPL\u7684\u5b89\u88c5\u4ee5\u53ca\u73af\u5883\u914d\u5236","text":"<ul> <li>\u4e0b\u8f7d\u5e76\u89e3\u538b<code>hpl-2.3.tar.gz</code></li> </ul> <p><code>tar xvf hpl-2.3.tar.gz</code></p> <ul> <li>\u590d\u5236\u5e76\u7c98\u8d34Make\u6587\u4ef6\uff08\u5f53\u7136\u4e5f\u53ef\u4ee5\u56fe\u5f62\u5316\u64cd\u4f5c\u55bd\uff09</li> </ul> <pre><code>cp Downloads/hpl-2.3/setup/Make.Linux_PII_CBLAS Downloads/hpl-2.3/Make.test\nmv hpl-2.3 hpl(\u91cd\u547d\u540d)\n</code></pre> <ul> <li>\u4fee\u6539makefile</li> </ul> <p>\u8fd9\u91cc\u4e0d\u5f97\u4e0d\u5410\u69fd\u4e00\u4e0b\uff0c\u5e94\u8be5\u662f\u6211\u76ee\u524d\u6765\u8bf4\u8d39\u65f6\u6700\u957f\u7684\u5730\u65b9\uff0c\u57fa\u672c\u4e0a\u81ea\u5df1\u628a\u6574\u4e2aMakefile\u5168\u90e8\u91cd\u65b0\u8bfb\u548c\u5199\u4e86\u4e00\u904d\uff0c\u6a21\u677f\u57fa\u672c\u4e0a\u4e0d\u80fd\u600e\u4e48\u7528\u3002\u7136\u540e\u81ea\u5df1\u770b\u7740make\u7f16\u8bd1\u51fa\u6765\u7684\u62a5\u9519\u4e00\u70b9\u70b9\u6539\u3002\u57fa\u672c\u4e0a\u5c31\u5bf9\u5e94\u81ea\u5df1\u627e\u4e86\u4e00\u904d\u3002\u5982\u679c\u662f\u5b8c\u5168\u6309\u7167\u6211\u4e4b\u524d\u6b65\u9aa4\u6765\u7684\uff0c\u90a3\u4e48\u53ef\u4ee5\u76f4\u63a5\u7167\u6284\u6211\u7684Makefile\u4e86</p> <pre><code>  SHELL        = /bin/sh\n  CD           = cd\n  CP           = cp\n  LN_S         = ln -s\n  MKDIR        = mkdir\n  RM           = /bin/rm -f\n  TOUCH        = touch\n  ARCH = test\n\n  TOPdir       = $(HOME)/Downloads/hpl\n  INCdir       = $(TOPdir)/include\n  BINdir       = $(TOPdir)/bin/$(ARCH)\n  LIBdir       = $(TOPdir)/lib/$(ARCH)\n  HPLlib       = $(LIBdir)/libhpl.a\n\n  MPdir = /usr/local/lib/openmpi\n  MPinc =\n  MPlib = /usr/local/lib/libmpi.so\n\n  LAdir        = /usr/lib/x86_64-linux-gnu/openblas-pthread\n  LAinc        =\n  LAlib        = $(LAdir)/libblas.a $(LAdir)/libblas.so\n\n  F2CDEFS      =\n\n  HPL_INCLUDES = -I$(INCdir) -I$(INCdir)/$(ARCH) $(LAinc) $(MPinc)\n  HPL_LIBS     = $(HPLlib) $(LAlib) $(MPlib)\n\n  HPL_OPTS     =\n\n  HPL_DEFS     = $(F2CDEFS) $(HPL_OPTS) $(HPL_INCLUDES)\n\n  CC           = /usr/local/bin/mpicc\n  CCNOOPT      = $(HPL_DEFS)\n  CCFLAGS      = $(HPL_DEFS) -fomit-frame-pointer -O3 -funroll-loops -w -Wall -pthread\n\n  LINKER       = /usr/local/bin/mpif77\n  LINKFLAGS    = $(CCFLAGS)\n\n  ARCHIVER     = ar\n  ARFLAGS      = r\n  RANLIB       = echo\n\n  arch = test\n</code></pre> <ul> <li>\u7f16\u8bd1\u5e76\u68c0\u67e5\u662f\u5426\u6210\u529f</li> </ul> <pre><code>make arch=test(\u4e00\u5b9a\u4e0d\u8981\u56e0\u4e3a\u53d8\u6210\u7684\u4e60\u60ef\u5728\u7b49\u53f7\u4e24\u8fb9\u591a\u6253\u7a7a\u683c)\ncd hpl/bin/test\ndir\nHPL.dat xhpl(\u8bc1\u660e\u5b89\u88c5\u6210\u529f!\u5982\u56fe)\n</code></pre> <p></p>"},{"location":"ZJU_CS/HPC/homework/lab1/#_4","title":"\u514b\u9686\u8282\u70b9","text":"<p>\u5728VMware\u4e2d\u514b\u9686\u5df2\u7ecf\u914d\u7f6e\u597d\u7684\u8282\u70b9\uff0c\u6210\u4e3a\u96c6\u7fa4\u7684\u5176\u4ed6\u4e09\u4e2a\u8282\u70b9.</p> <p>\u53ef\u4ee5\u5728\u514b\u9686\u524d\u5728\u4e3b\u673a\u4e0a\u5148\u5b89\u88c5\u597d<code>SSH</code>.\u540e\u9762\u80fd\u8282\u7ea6\u4e00\u70b9\u70b9\u65f6\u95f4\u3002</p> <p>\uff08Tips\uff1a\u4e00\u822c\u5148\u4f1a\u5728\u5de6\u4e0a\u89d2\u7684\u7f16\u8f91\u8fdb\u5165 \u2192\u865a\u62df\u7f51\u7edc\u7f16\u8f91\u5668\uff0c\u5c06\u5b50\u7f51IP\u66f4\u6539\u4e3a\u4e0d\u662f192.168.64\uff08\u53ef\u4ee5\u662f65\u2026\uff09\u3002\u7136\u540e\u518d\u53f3\u952e\u514b\u9686\uff0c\u8bb0\u5f97\u63d0\u524d\u683c\u51fa\u6765\u8fd1100G\u78c1\u76d8\uff0c\u5e76\u5728\u91cc\u9762\u5efa\u56db\u4e2a\u5c0f\u6587\u4ef6\u5939\u6709\u52a9\u4e8e\u7ba1\u7406\u548c\u865a\u62df\u673a\u7684\u7a33\u5b9a\uff09</p> <p></p>"},{"location":"ZJU_CS/HPC/homework/lab1/#_5","title":"\u6d4b\u8bd5\u96c6\u7fa4","text":""},{"location":"ZJU_CS/HPC/homework/lab1/#ping","title":"ping\u901a","text":"<ul> <li>\u83b7\u5f97\u6bcf\u53f0\u865a\u62df\u673a\u7684IP\u5730\u5740</li> </ul> <p><code>ifconfig</code></p> <p></p> <ul> <li>\u83b7\u5f97\u7684\u865a\u62df\u673a\u5730\u5740\u5982\u4e0b\uff1a</li> </ul> <pre><code>192.168.253.129\n192.168.253.130\n192.168.253.131\n192.168.253.132\n</code></pre> <ul> <li>\u786e\u8ba4\u80fd\u76f8\u4e92ping\u901a</li> </ul> <p><code>ping 192.168.253.130 \u2026\u2026</code> </p> <p></p>"},{"location":"ZJU_CS/HPC/homework/lab1/#ssh_1","title":"\u914d\u5236SSH","text":"<ol> <li>\u751f\u6210\u516c\u94a5\u79c1\u94a5\u5bf9</li> </ol> <p>\u200b   <code>ssh-kegen -t rsa</code></p> <p>\u200b   \u8fd9\u91cc\u8ddfgit\u524d\u671f\u6b65\u9aa4\u4e00\u6837\uff0c\u8be6\u60c5\u53ef\u4ee5\u89c1git\u7b14\u8bb0</p> <ol> <li>\u5c06\u4e3b\u673a\u4e0a\u7684\u516c\u94a5\u62f7\u8d1d\u5230\u53e6\u5916\u4e09\u53f0\u865a\u62df\u673a\u7684\u76ee\u5f55\u4e0b</li> </ol> <p></p> <ol> <li>\u8fdc\u7a0b\u514d\u5bc6\u8bbf\u95ee\u6d4b\u8bd5</li> </ol> <p><code>ssh username@192.168.***.***</code></p> <p>\u590d\u5236\u5b8c\u6210\u540e\uff0c\u6ce8\u610f\u68c0\u67e5 <code>authorized_keys</code> (600) \u548c <code>.ssh/</code> (700) \u76ee\u5f55\u7684\u6743\u9650\uff0c\u5426\u5219\u65e0\u6cd5\u987a\u5229 <code>ssh</code>\u3002</p> <p>ssh passphrase \u2014\u2014 \u5982\u679c\u81ea\u5df1\u7684\u5bc6\u94a5\u6709 passphrase\uff0c\u90a3\u4e48\u8bf7\u4f7f\u7528 <code>ssh-agent</code> \u786e\u4fdd\u80fd\u6682\u65f6\u4e0d\u7528\u8f93\u5165 passphrase\uff0c\u4ee5\u514d\u4e4b\u540e\u5f71\u54cd <code>mpirun</code> \u6b63\u786e\u8fd0\u884c\u3002</p> <p>\u6ce8\uff1a\u6211\u4eec\u8fd8\u662f\u7528<code>ifconfig</code>\u5224\u65ad\u81ea\u5df1\u5f53\u524d\u6240\u5728\u4f4d\u7f6e\uff1b\u7528<code>logout</code>\u9000\u51faSSH\u8bbf\u95ee</p>"},{"location":"ZJU_CS/HPC/homework/lab1/#mpirun","title":"mpirun\u5c1d\u8bd5","text":"<ol> <li>\u521b\u5efa\u4e3b\u673a\u4e2d\u7684hostfile\u6587\u4ef6\uff08\u4e0d\u7528\u5728\u610f\u683c\u5f0f\uff09</li> </ol> <p><code>vim myhostfile</code></p> <p>\uff08slots\u662f\u6838\u5fc3\u6570\u7684\u610f\u601d\uff0c\u8fd9\u8ddf\u4f60\u5728\u521b\u5efa\u865a\u62df\u7684\u65f6\u5019\u8bbe\u5b9a\u6709\u5173\uff0c\u8bb0\u5f97\u4e00\u5b9a\u52a0s\uff09</p> <pre><code>192.168.253.129 slots=2\n192.168.253.130 slots=2\n192.168.253.131 slots=2\n192.168.253.132 slots=2\n</code></pre> <ol> <li>\u67e5\u770b\u6bcf\u4e2a\u8282\u70b9\u4e0a\u7ebf\u65f6\u95f4</li> </ol> <p><code>mpirun --hostfile myhostfile uptime</code></p> <p></p> <ol> <li>\u8fd0\u884cHPL</li> </ol> <p><code>mpirun --hostfile myhostfile ./xhpl</code></p> <p>\u8fd0\u884c\u7ed3\u679c\uff1a</p> <p></p>"},{"location":"ZJU_CS/HPC/homework/lab1/#discussion","title":"Discussion","text":"<p>\u9996\u5148\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u5728\u672c\u6b21\u5b9e\u9a8c\u4e2d\u6211\u6536\u83b7\u4e86\u5f88\u591a\uff0c\u4e00\u65b9\u9762\u4e86\u89e3\u4e86\u8d85\u7ea7\u8ba1\u7b97\u673a\u5728\u5e76\u884c\u8fd0\u7b97\u65b9\u9762\u7684\u4e00\u4e9b\u7b80\u5355\u539f\u7406\uff1b\u6b64\u5916\uff0c\u6211\u5b66\u4e60\u5230\u4e86\u8bb8\u591a\u7f51\u7edc\u4e0e\u901a\u4fe1\u76f8\u5173\u7684\u77e5\u8bc6\uff0c\u5e76\u4e14\u5f88\u5927\u7a0b\u5ea6\u4e0a\u5728\u505alab\u7684\u8fc7\u7a0b\u5f53\u4e2d\uff0c\u6211\u53d1\u73b0\u6211\u81ea\u5df1\u4e4b\u524d\u6240\u5b66\u4e60\u5230\u7684\u77e5\u8bc6\u90fd\u80fd\u6574\u5408\u8d77\u6765\u5e76\u8fd0\u7528\u3002</p> <p>\u6b64\u5916\uff0c\u5728\u672c\u6b21\u5b9e\u9a8c\u4e2d\uff0c\u5728OpenMPI\u5b89\u88c5\u5e76\u6d4b\u8bd5\u7a0b\u5e8f\uff08\u7531\u4e8e\u5ffd\u7565\u4e86<code>&amp;&amp;</code>\u8fde\u63a5\u547d\u4ee4\u7b26\uff0c\u5bfc\u81f4\u803d\u6401\u4e86\u5f88\u591a\u65f6\u95f4\uff09\u4ee5\u53ca\u5728HPL\u7684makefile\u7f16\u5199\u8fc7\u7a0b\uff08\u6700\u7ec8\u81ea\u5df1\u76f8\u5f53\u4e8e\u627e\u76ee\u5f55\u91cd\u65b0\u624b\u5199\u4e86\u4e00\u904dmakefile\uff09\uff0c\u7565\u6709\u78d5\u7eca\uff0c\u5176\u4ed6\u60c5\u51b5\u90fd\u7b97\u987a\u5229\u3002\u672c\u6b21\u5b9e\u9a8c\u8fd8\u6709\u4e00\u4e2a\u5fc3\u5f97\u4f53\u4f1a\u5c31\u662f\u6211\u4eec\u4e00\u5b9a\u8981\u5b66\u4f1a\u770b\u7ec8\u7aef\u53cd\u9988\u56de\u6765\u7684\u62a5\u9519\uff0c\u4e0d\u80fd\u76f2\u76ee\u5728\u7f51\u4e0a\u67e5\u627e\u6559\u7a0b\uff08\u56fd\u5185\u6559\u7a0b\u62c9\u7684\u4e00\u5339\uff09\uff0c\u8fd9\u6837\u80fd\u591f\u6709\u6548\u5e76\u4e14\u5feb\u901f\u7684\u5e2e\u52a9\u6211\u4eec\u627e\u51fa\u81ea\u5df1\u7684\u95ee\u9898\u6240\u5728\u3002</p> <p>\u6700\u540e\u6d4b\u8bd5\u7684\u5b9e\u9a8c\u7ed3\u679c\u5982\u4e0a\u56fe\uff0c\u867d\u7136\u7ed3\u679c\u6709\u53cd\u9988\uff0c\u4f46\u4ecd\u6709\u56f0\u60d1\u7684\u70b9\u5c31\u662f\u4e0d\u77e5\u9053\u5982\u4f55\u53bb\u5bf9\u6bd4\u4f53\u73b0\u5e76\u884c\u8ba1\u7b97\u7684\u4f18\u8d8a\u6027\u3002\u8fd9\u4e2alab\u7ed9\u6211\u7684\u4e94\u6708\u753b\u4e0a\u4e86\u4e00\u4e2a\u8fd8\u7b97\u5706\u6ee1\u7684\u53e5\u53f7\u3002\u5e0c\u671b\u80fd\u591f\u52a0\u5165<code>ZJUSCT</code>\uff0c\u5728\u6bb5\u5b66\u671f\u5185\u6536\u83b7.</p>"},{"location":"ZJU_CS/HPC/homework/lab2.5/","title":"Lab-2 bonus","text":"<ul> <li>Lab-2 bonus<ul> <li>Lab Description</li> <li>Introduction Knowledge(\u53ef\u4ee5\u8df3\u8fc7\u4e0d\u770b)<ul> <li>SIMD</li> <li>\u5411\u91cf\u5316\u6307\u4ee4</li> <li>\u6c47\u7f16\u8bed\u8a00</li> </ul> </li> <li>Lab Design &amp; Test Result<ul> <li>Code Design</li> <li>\u6c47\u7f16\u6bd4\u8f83<ul> <li>SIMD\u7684\u6c47\u7f16</li> <li>\u666e\u901a\u7684\u6c47\u7f16</li> <li>\u6e90\u4ee3\u7801\u4e2d\u666e\u901a\u8868\u8fbe\u5f0f\u7684\u6c47\u7f16</li> </ul> </li> <li>\u5b9e\u9a8c\u7ed3\u679c</li> </ul> </li> <li>Discussion</li> </ul> </li> </ul>"},{"location":"ZJU_CS/HPC/homework/lab2.5/#lab_description","title":"Lab Description","text":"<p>\u4f7f\u7528\u8fd9\u4e9b\u51fd\u6570 API \u9700\u8981 include \u5bf9\u5e94\u7684\u5934\u6587\u4ef6\uff0c\u4e0d\u540c SIMD \u6307\u4ee4\u96c6\u9700\u8981\u7684\u5934\u6587\u4ef6\u4e0d\u540c\uff0c\u5177\u4f53\u9700\u8981\u53c2\u8003 Intel \u76f8\u5173\u6587\u6863\u3002</p> <pre><code>#include &lt;smmintrin.h&gt;\n#include &lt;emmintrin.h&gt;\n#include &lt;immintrin.h&gt;\n</code></pre> <p>\u672c\u6b21\u5b9e\u9a8c\u7684\u5b9e\u9a8c\u76ee\u6807\uff1a\u901a\u8fc7\u4f7f\u7528\u624b\u5199 SIMD \u5411\u91cf\u5316\u7684\u65b9\u5f0f\u5bf9\u8fd9\u4e2a\u5faa\u73af\u8fdb\u884c\u4f18\u5316</p> <pre><code>/* \u53ef\u4ee5\u4fee\u6539\u7684\u4ee3\u7801\u533a\u57df */\n// -----------------------------------\nfor (int i = 0; i &lt; MAXN; ++i)\n{\n    c[i] += a[i] * b[i];\n}\n// -----------------------------------\n</code></pre> <p>\u8be6\u60c5\u8bf7\u770b\u5b9e\u9a8c\u6307\u5bfc</p>"},{"location":"ZJU_CS/HPC/homework/lab2.5/#introduction_knowledge","title":"Introduction Knowledge(\u53ef\u4ee5\u8df3\u8fc7\u4e0d\u770b)","text":""},{"location":"ZJU_CS/HPC/homework/lab2.5/#simd","title":"SIMD","text":"<p>\u5355\u6307\u4ee4\u6d41\u591a\u6570\u636e\u6d41\uff08\u82f1\u8bed\uff1aSingle Instruction Multiple Data\uff0c\u7f29\u5199\uff1aSIMD\uff09\u662f\u4e00\u79cd\u91c7\u7528\u4e00\u4e2a\u63a7\u5236\u5668\u6765\u63a7\u5236\u591a\u4e2a\u5904\u7406\u5668\uff0c\u540c\u65f6\u5bf9\u4e00\u7ec4\u6570\u636e\uff08\u53c8\u79f0\u201c\u6570\u636e\u5411\u91cf\u201d\uff09\u4e2d\u7684\u6bcf\u4e00\u4e2a\u5206\u522b\u6267\u884c\u76f8\u540c\u7684\u64cd\u4f5c\u4ece\u800c\u5b9e\u73b0\u7a7a\u95f4\u4e0a\u7684\u5e76\u884c\u6027\u7684\u6280\u672f\u3002</p> <p>\u5728\u5fae\u5904\u7406\u5668\u4e2d\uff0c\u5355\u6307\u4ee4\u6d41\u591a\u6570\u636e\u6d41\u6280\u672f\u5219\u662f\u4e00\u4e2a\u63a7\u5236\u5668\u63a7\u5236\u591a\u4e2a\u5e73\u884c\u7684\u5904\u7406\u5fae\u5143\uff0c\u4f8b\u5982Intel\u7684MMX\u6216SSE\uff0c\u4ee5\u53caAMD\u76843D Now!\u6307\u4ee4\u96c6\u3002</p> <p>\u56fe\u5f62\u5904\u7406\u5668\uff08GPU\uff09\u62e5\u6709\u5f3a\u5927\u7684\u5e76\u53d1\u5904\u7406\u80fd\u529b\u548c\u53ef\u7f16\u7a0b\u6d41\u6c34\u7ebf\uff0c\u9762\u5bf9\u5355\u6307\u4ee4\u6d41\u591a\u6570\u636e\u6d41\u65f6\uff0c\u8fd0\u7b97\u80fd\u529b\u8fdc\u8d85\u4f20\u7edfCPU\u3002OpenCL\u548cCUDA\u5206\u522b\u662f\u76ee\u524d\u6700\u5e7f\u6cdb\u4f7f\u7528\u7684\u5f00\u6e90\u548c\u4e13\u5229\u901a\u7528\u56fe\u5f62\u5904\u7406\u5668\uff08GPGPU\uff09\u8fd0\u7b97\u8bed\u8a00\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab2.5/#_1","title":"\u5411\u91cf\u5316\u6307\u4ee4","text":"<p>\u73b0\u4ee3\u5904\u7406\u5668\u4e00\u822c\u90fd\u652f\u6301\u5411\u91cf\u5316\u6307\u4ee4\uff0cx86 \u67b6\u6784\u4e0b Intel \u548c AMD \u4e24\u5bb6\u7684\u5904\u7406\u5668\u90fd\u63d0\u4f9b\u4e86\u8bf8\u5982 SSE\uff0cAVX \u7b49 SIMD \u6307\u4ee4\u96c6\uff0c\u4e00\u6761\u6307\u4ee4\u53ef\u4ee5\u540c\u65f6\u64cd\u4f5c\u591a\u4e2a\u6570\u636e\u8fdb\u884c\u8fd0\u7b97\uff0c\u5927\u5927\u63d0\u9ad8\u4e86\u73b0\u4ee3\u5904\u7406\u5668\u7684\u6570\u636e\u541e\u5410\u91cf\u3002</p> <p>\u73b0\u4ee3\u7f16\u8bd1\u5668\u5728\u9ad8\u4f18\u5316\u7b49\u7ea7\u4e0b\uff0c\u5177\u6709\u81ea\u52a8\u5411\u91cf\u5316\u7684\u529f\u80fd\uff0c\u5bf9\u4e8e\u7ed3\u6784\u6e05\u6670\uff0c\u5faa\u73af\u8fb9\u754c\u6e05\u6670\u7684\u7a0b\u5e8f\uff0c\u7f16\u8bd1\u5668\u7684\u81ea\u52a8\u5411\u91cf\u5316\u5df2\u7ecf\u53ef\u4ee5\u8fbe\u5230\u5f88\u4f18\u79c0\u7684\u7a0b\u5ea6\u4e86\u3002\u7136\u800c\uff0c\u7f16\u8bd1\u5668\u7684\u4f18\u5316\u59cb\u7ec8\u662f\u4fdd\u5b88\u7684\uff0c\u5f88\u591a\u60c5\u51b5\u4e0b\u7f16\u8bd1\u5668\u65e0\u6cd5\u5b8c\u6210\u4f7f\u7528 SIMD \u6307\u4ee4\u8fdb\u884c\u5411\u91cf\u5316\u7684\u5de5\u4f5c\uff0c\u4e3a\u4e86\u8ffd\u6c42\u6027\u80fd\uff0c\u9ad8\u6027\u80fd\u8ba1\u7b97\u9886\u57df\u7ecf\u5e38\u9700\u8981\u624b\u5199 SIMD \u4ee3\u7801\u8fdb\u884c\u4ee3\u7801\u4f18\u5316\u3002</p> <p>\u663e\u7136\u76f4\u63a5\u624b\u5199\u6c47\u7f16\u6307\u4ee4\u8fc7\u4e8e\u56f0\u96be\uff0c\u5728 C \u8bed\u8a00\u73af\u5883\u4e0b\uff0cIntel \u63d0\u4f9b\u4e86\u4e00\u6574\u5957\u5173\u4e8e SIMD \u6307\u4ee4\u7684\u51fd\u6570\u5c01\u88c5\u63a5\u53e3\u548c\u6307\u4ee4\u76f8\u5173\u884c\u4e3a\u7684\u53c2\u7167\u624b\u518c\uff0c\u53ef\u4ee5\u5728\u53c2\u8003\u8d44\u6599\u4e2d\u627e\u5230\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab2.5/#_2","title":"\u6c47\u7f16\u8bed\u8a00","text":"<p>\u6c47\u7f16\u8bed\u8a00\uff08\u82f1\u8bed\uff1aassembly language\uff09[\u6ce8 1][1]\u662f\u4efb\u4f55\u4e00\u79cd\u7528\u4e8e\u7535\u5b50\u8ba1\u7b97\u673a\u3001\u5fae\u5904\u7406\u5668\u3001\u5fae\u63a7\u5236\u5668\uff0c\u6216\u5176\u4ed6\u53ef\u7f16\u7a0b\u5668\u4ef6\u7684\u4f4e\u7ea7\u8bed\u8a00\u3002\u5728\u4e0d\u540c\u7684\u8bbe\u5907\u4e2d\uff0c\u6c47\u7f16\u8bed\u8a00\u5bf9\u5e94\u7740\u4e0d\u540c\u7684\u673a\u5668\u8bed\u8a00\u6307\u4ee4\u96c6\u3002\u4e00\u79cd\u6c47\u7f16\u8bed\u8a00\u4e13\u7528\u4e8e\u67d0\u79cd\u8ba1\u7b97\u673a\u7cfb\u7edf\u7ed3\u6784\uff0c\u800c\u4e0d\u50cf\u8bb8\u591a\u9ad8\u7ea7\u8bed\u8a00\uff0c\u53ef\u4ee5\u5728\u4e0d\u540c\u7cfb\u7edf\u5e73\u53f0\u4e4b\u95f4\u79fb\u690d\u3002</p> <p>\u4f7f\u7528\u6c47\u7f16\u8bed\u8a00\u7f16\u5199\u7684\u6e90\u4ee3\u7801\uff0c\u7136\u540e\u901a\u8fc7\u76f8\u5e94\u7684\u6c47\u7f16\u7a0b\u5e8f\u5c06\u5b83\u4eec\u8f6c\u6362\u6210\u53ef\u6267\u884c\u7684\u673a\u5668\u4ee3\u7801\u3002\u8fd9\u4e00\u8fc7\u7a0b\u88ab\u79f0\u4e3a\u6c47\u7f16\u8fc7\u7a0b\u3002</p> <p>\u5173\u4e8e\u6c47\u7f16\uff1a</p> <ol> <li>\u5b66\u4e60\u5185\u5bb9\u5341\u5206\u63a8\u8350\u53bb\u770bCSAPP</li> <li>\u6709\u4e2a\u5728\u7ebf\u7684\u7f16\u8bd1\u5668\u80fd\u591f\u6709\u52a9\u4e8e\u4f60\u7406\u89e3!</li> <li>\u5f53\u7136\u6211\u4e5f\u5efa\u8bae\u5927\u5bb6\u53ef\u4ee5\u5728\u81ea\u5df1\u672c\u5730\u7684\u7535\u8111\u4e0a\u901a\u8fc7gcc\u7684\u4e00\u4e9b\u53c2\u6570\u9009\u9879\u81ea\u5df1\u6765\u4e86\u89e3\u6c47\u7f16\u3002</li> </ol>"},{"location":"ZJU_CS/HPC/homework/lab2.5/#lab_design_test_result","title":"Lab Design &amp; Test Result","text":""},{"location":"ZJU_CS/HPC/homework/lab2.5/#code_design","title":"Code Design","text":"<p>My Code:</p> <pre><code>for (int n = 0; n &lt; 20; ++n)\n{\n    /* \u53ef\u4ee5\u4fee\u6539\u7684\u4ee3\u7801\u533a\u57df */\n    // -----------------------------------\n    __m256 vecA, vecB, vecC, vecAB;\n    for (int i = 0; i &lt; MAXN; i += 8) \n    {\n        vecA = _mm256_loadu_ps(a + i);\n        vecB = _mm256_loadu_ps(b + i);\n        vecC = _mm256_loadu_ps(c + i);\n\n        // vecAB = _mm256_mul_ps(vecA, vecB);\n        // vecC = _mm256_add_ps(vecAB, vecC);\n        vecC = _mm256_fmadd_ps(vecA, vecB, vecC);\n        _mm256_storeu_ps(c + i, vecC);\n    }\n}\n</code></pre> <p>ps: \u8fd9\u6bb5\u4ee3\u7801\u4e5f\u6ca1\u6709\u8003\u8651\u5185\u5b58\u5bf9\u9f50\u95ee\u9898\uff0c\u5982\u679c\u4f60\u7684\u6570\u636e\u662f\u5bf9\u9f50\u7684\uff0c\u4f60\u5f53\u7136\u53ef\u4ee5\u4f7f\u7528<code>_mm256_load_ps</code>\u548c<code>_mm256_store_ps</code>\u6765\u63d0\u9ad8\u6027\u80fd\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab2.5/#_3","title":"\u6c47\u7f16\u6bd4\u8f83","text":""},{"location":"ZJU_CS/HPC/homework/lab2.5/#simd_1","title":"SIMD\u7684\u6c47\u7f16","text":""},{"location":"ZJU_CS/HPC/homework/lab2.5/#_4","title":"\u666e\u901a\u7684\u6c47\u7f16","text":""},{"location":"ZJU_CS/HPC/homework/lab2.5/#_5","title":"\u6e90\u4ee3\u7801\u4e2d\u666e\u901a\u8868\u8fbe\u5f0f\u7684\u6c47\u7f16","text":"<p>\u6211\u4eec\u4e0d\u96be\u770b\u5230\u4ed6\u7684\u5904\u7406\u4e5f\u5df2\u7ecf\u6709SIMD\uff08\u5982\uff1a<code>vmovss</code>\u3001<code>vaddss</code>\uff09\u7b49\u7684\u4f18\u5316\u4e86</p> <p></p>"},{"location":"ZJU_CS/HPC/homework/lab2.5/#_6","title":"\u5b9e\u9a8c\u7ed3\u679c","text":"<p>ps:\u8bb0\u5f97\u6dfb\u52a0<code>gcc</code>\u7684\u7f16\u8bd1\u9009\u9879\uff0c\u5426\u5219\u53ef\u80fd\u4e0d\u901a\u8fc7!</p> <p></p> <p>\u7ed3\u8bba\uff1a\u6700\u540e\u7684\u52a0\u901f\u6bd4\u5c06\u8fd12.</p>"},{"location":"ZJU_CS/HPC/homework/lab2.5/#discussion","title":"Discussion","text":"<p>\u901a\u8fc7\u624b\u5199SIMD\u7684\u5206\u88c5\u51fd\u6570\u5b9e\u73b0\u6c47\u7f16\u4e0a\u7684\u4f18\u5316\u3002\u5728\u5b66\u4e60\u7684\u8fc7\u7a0b\u4e2d\u6211\u8fd8\u770b\u5230\uff0c\u73b0\u4ee3\u7f16\u8bd1\u5668\u90fd\u5341\u5206\u667a\u80fd\uff0c\u6211\u4eec\u751a\u81f3\u53ef\u4ee5\u901a\u8fc7\u4f8b\u5982\u50cf\uff1a<code>GCC</code>\u7f16\u8bd1\u5668\uff1a\u4f7f\u7528<code>-O3</code>\u9009\u9879\u542f\u7528\u6240\u6709\u4f18\u5316\uff0c\u5e76\u4f7f\u7528<code>-ftree-vectorize</code>\u9009\u9879\u542f\u7528\u81ea\u52a8\u5411\u91cf\u5316\u3002\uff08\u5982\u4e0b\u56fe\uff09\u5f53\u7136\u6709\u7684\u65f6\u5019\u53ef\u80fd\u56e0\u4e3a\u5206\u652f\u590d\u6742\u7684\u539f\u56e0\u65e0\u6cd5\u8fdb\u884c\u4f18\u5316\uff0c\u6211\u4eec\u4e5f\u53ef\u4ee5\u6dfb\u52a0\u7f16\u8bd1\u6307\u5bfc\u8bed\u53e5\u4f8b\u5982\uff1a<code>\\#pragma omp parallel for reduction(+:sum) private(x)</code>\u6765\u63d0\u793a\u7f16\u8bd1\u5668\u5e2e\u6211\u4eec\u4f18\u5316</p> <p></p> <p>\u5b9e\u9645\u81ea\u52a8\u4f18\u5316\u7684\u52a0\u901f\u6bd4\u5df2\u7ecf\u975e\u5e38\u63a5\u8fd1\u624b\u52a8\u4f18\u5316\u7684\u4e86\uff1a</p> <p></p> <p>\u6b64\u5916\uff0c\u8fd9\u4e9b\u5c01\u88c5\u51fd\u6570\u7684\u5e95\u5c42\u5b9e\u73b0\u8fd8\u662f\u6539\u53d8\u6c47\u7f16\u8bed\u8a00\u3002\u8fd9\u5f53\u7136\u5f97\u76ca\u4e8e\u73b0\u4ee3\u8ba1\u7b97\u673a\u9ad8\u901f\u53d1\u5c55\u4f7f\u5f97cpu\u4e0a\u80fd\u5b9e\u73b0\u66f4\u591a\u7684\u6307\u4ee4\u52a0\u901f\u5de5\u4f5c\u3002\u5411\u91cf\u5316\u7684\u601d\u60f3\u4ee5\u53ca\u8fd9\u4e2a\u51fd\u6570\u7684\u6574\u4f53\u6784\u9020\uff0c\u5176\u5b9e\u8ddf\u6211\u4eec\u5728<code>CUDA</code>\u7f16\u7a0b\u8bfe\u4e0a\u5206\u914dthreads\u53bb\u5b8c\u6210\u52a0\u6cd5\u5de5\u4f5c\u4e00\u6837\u5341\u5206\u76f8\u4f3c\u3002\u5305\u62ec\u4e00\u4e9bMPI\u7684\u8bbe\u8ba1\u7ed3\u6784\u4e5f\u662f\u5982\u6b64\u3002\u901a\u8fc7\u5411\u91cf\u5316\uff08\u4ea6\u6216\u662f\u5c01\u88c5\u7edf\u4e00\u5904\u7406\u7684\u601d\u60f3\uff09\u6765\u5b9e\u73b0high performance\uff01</p> <p>\u6700\u540e\u7684\u6700\u540e\u6211\u60f3\u8bf4\u7684\u662f\uff1a\u6b63\u5982\u5b9e\u9a8c\u6307\u5bfc\u548c\u4e0a\u8bfe\u8bb2\u8fc7\u7684\u90a3\u6837\uff1a\u201c\u6df1\u5165\u5230\u8fd9\u4e2a\u7ea7\u522b\u7684\u4f18\u5316\u5df2\u7ecf\u5f00\u59cb\u9700\u8981\u8003\u8651\u5177\u4f53\u5904\u7406\u5668\u7684\u4f53\u7cfb\u7ed3\u6784\u7ec6\u8282\u4e86\uff0c\u5982\u67d0\u4e2a\u67b6\u6784\u4e0b\u67d0\u6761\u6307\u4ee4\u7684\u5b9e\u73b0\u5ef6\u65f6\u548c\u541e\u5410\u91cf\u662f\u591a\u5c11\uff0c\u5904\u7406\u5668\u63d0\u4f9b\u4e86\u591a\u5c11\u5411\u91cf\u5bc4\u5b58\u5668\uff0c\u8bbf\u5b58\u7684\u5bf9\u9f50\u7b49\u7b49\u3002\u8fd9\u79cd\u65f6\u5019\u7f16\u8bd1\u5668\u5177\u4f53\u4ea7\u751f\u7684\u6c47\u7f16\u4ee3\u7801\u80fd\u6bd4 C \u8bed\u8a00\u4ee3\u7801\u63d0\u4f9b\u66f4\u591a\u7684\u4fe1\u606f\uff0c\u4f60\u80fd\u4e86\u89e3\u5230\u81ea\u5df1\u4f7f\u7528\u4e86\u591a\u5c11\u5bc4\u5b58\u5668\uff0c\u7f16\u8bd1\u5668\u662f\u5426\u751f\u6210\u4e86\u9884\u671f\u5916\u7684\u4ee3\u7801\u7b49\u7b49\u3002\u4f46\u8fd9\u4e00\u5b9a\u662f\u4f60\u6700\u540e\u518d\u53bb\u8003\u8651\u53bb\u901a\u8fc7SIMD\u4f18\u5316\u4ee3\u7801\u201d\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab2/","title":"Lab2 \u5411\u91cf\u5316\u8ba1\u7b97","text":"<ul> <li>Lab2 \u5411\u91cf\u5316\u8ba1\u7b97<ul> <li>Lab Description</li> <li>Introduction Knowledge(\u53ef\u4ee5\u8df3\u8fc7\u4e0d\u770b)</li> <li>Lab Design &amp; Test Result<ul> <li>Code Design</li> <li>Test Result</li> </ul> </li> <li>Discussion</li> </ul> </li> </ul>"},{"location":"ZJU_CS/HPC/homework/lab2/#lab_description","title":"Lab Description","text":"<p>\u672c\u5b9e\u9a8c\u7684\u76ee\u6807\u662f\u4f7f\u7528<code>numpy</code>\uff0c\u7528\u5411\u91cf\u5316\u7684\u8bed\u8a00\u6539\u5199\u53cc\u7ebf\u6027\u63d2\u503c\uff01\uff08\u4e0d\u8981\u51fa\u73b0for\uff09</p> <ol> <li>\u57fa\u51c6\u4ee3\u7801</li> </ol> <pre><code>def bilinear_interp_baseline(a: np.ndarray, b: np.ndarray) -&gt; np.ndarray:\n    \"\"\"\n    This is the baseline implementation of bilinear interpolation without vectorization.\n    - a is a ND array with shape [N, H1, W1, C], dtype = int64\n    - b is a ND array with shape [N, H2, W2, 2], dtype = float64\n    - return a ND array with shape [N, H2, W2, C], dtype = int64\n    \"\"\"\n    # Get axis size from ndarray shape\n    N, H1, W1, C = a.shape\n    N1, H2, W2, _ = b.shape\n    assert N == N1\n\n    # Do iteration\n    res = np.empty((N, H2, W2, C), dtype=int64)\n    for n in range(N):\n        for i in range(H2):\n            for j in range(W2):\n                x, y = b[n, i, j]\n                x_idx, y_idx = int(np.floor(x)), int(np.floor(y))\n                _x, _y = x - x_idx, y - y_idx\n                # For simplicity, we assume:\n                # - all x are in [0, H1 - 1)\n                # - all y are in [0, W1 - 1)\n                res[n, i, j] = a[n, x_idx, y_idx] * (1 - _x) * (1 - _y) + \\\n                               a[n, x_idx + 1, y_idx] * _x * (1 - _y) + \\\n                               a[n, x_idx, y_idx + 1] * (1 - _x) * _y + \\\n                               a[n, x_idx + 1, y_idx + 1] * _x * _y\n    return res\n</code></pre> <ol> <li>\u5b8c\u6210\u5411\u91cf\u5316\u5b9e\u73b0</li> </ol> <p>\u5728\u6e90\u4ee3\u7801\u4e2d\u7684 <code>bilinear_interp/vectorized.py</code> \u4e2d\uff0c\u4f7f\u7528numpy\u5b8c\u6210 <code>bilinear_interp_vectorized</code> \u51fd\u6570\u3002</p> <ol> <li>\u68c0\u67e5\u6b63\u786e\u6027\u4ee5\u53ca\u52a0\u901f\u6bd4</li> </ol> <p>\u8be6\u7ec6\u7684\u5b9e\u9a8c\u6307\u5bfc\u8bf7\u70b9\u51fb</p> <p>\u63d0\u793a\uff1a</p> <ol> <li>\u4e00\u5b9a\u4e00\u5b9a\u6ce8\u610f\u672c\u5b9e\u9a8c\u4e2d\u6240\u751f\u6210\u7684\\((N,H_2,W_2,2)\\)\u4e2d\u7684\u20182\u2019\u662f\u6307\u6bcf\u4e2a\u50cf\u7d20\u6240\u60f3\u8981\u91c7\u6837\u7684 a' \u56fe\u4e2d\u5bf9\u5e94\u70b9\u7684\u5750\u6807\uff0c\u5e76\u5c06\u91c7\u6837\u7ed3\u679c\u8fd4\u56de\u3002\u5e76\u4e14\u8fd9\u4e2a\u51fd\u6570\u4e0e\u56fe\u7247\u7684\u653e\u5927\u7f29\u5c0f\u6ca1\u6709\u4efb\u4f55\u5173\u7cfb\uff01\uff01\uff01 (\u66f4\u5177\u4f53\u6765\u8bf4\u5e94\u8be5\u662f\u5c5e\u6027\u7a7a\u95f4\u548c\u6837\u672c\u7a7a\u95f4\u8fd9\u6837\u4e00\u4e2a\u6982\u5ff5)</li> <li>\u6b64\u5916\u5408\u7406\u5229\u7528<code>numpy</code>\u81ea\u8eab\u7684\u5e7f\u64ad\u6216\u8005\u63d2\u8f74\u7b49\u65b9\u6cd5\u6765\u8ba1\u7b97\uff08\u4e0d\u8981\u51fa\u73b0<code>for</code>)</li> </ol>"},{"location":"ZJU_CS/HPC/homework/lab2/#introduction_knowledge","title":"Introduction Knowledge(\u53ef\u4ee5\u8df3\u8fc7\u4e0d\u770b)","text":"<ol> <li>Numpy\uff1aNumPy\u662fPython\u8bed\u8a00\u7684\u4e00\u4e2a\u6269\u5c55\u7a0b\u5e8f\u5e93\u3002\u652f\u6301\u9ad8\u9636\u5927\u89c4\u6a21\u7684\u591a\u7ef4\u6570\u7ec4\u4e0e\u77e9\u9635\u8fd0\u7b97\uff0c\u6b64\u5916\u4e5f\u9488\u5bf9\u6570\u7ec4\u8fd0\u7b97\u63d0\u4f9b\u5927\u91cf\u7684\u6570\u5b66\u51fd\u6570\u5e93\u3002\u5176\u5e95\u5c42\u662fc\u8bed\u8a00\u6765\u5b9e\u73b0\u3002\u901a\u8fc7\u63a5\u53e3\u4ee5\u53ca\u5411\u91cf\u5316\u7684\u8868\u8ff0\u907f\u514d\u4e86python\u4e2d\u5faa\u73af\u8c03\u7528\u7684\u5f00\u9500\uff0c\u6781\u5927\u52a0\u5feb\u4e86\u901f\u5ea6\u3002</li> </ol> <p>\u6211\u8bb0\u5f55\u4e86\u4e00\u4e9bnumpy\u7684\u4f7f\u7528\u5728\u8bfe\u7a0b\u7b14\u8bb0\u4e2d\uff0c\u4ec5\u4f5c\u4e3a\u53c2\u8003</p> <ol> <li>\u53cc\u7ebf\u6027\u63d2\u503c\uff1a\u5982\u4e0b\u56fe\uff0c\u76f8\u4fe1\u80fd\u591f\u5f88\u5feb\u7684\u7406\u89e3\u5176\u4e2d\u7684\u610f\u601d</li> </ol> <p></p>"},{"location":"ZJU_CS/HPC/homework/lab2/#lab_design_test_result","title":"Lab Design &amp; Test Result","text":""},{"location":"ZJU_CS/HPC/homework/lab2/#code_design","title":"Code Design","text":"<p>\u6211\u8ba4\u4e3a\u672c\u5b9e\u9a8c\u7684\u8bbe\u8ba1\u7684\u76ee\u6807\u5728\u4e8e\u80fd\u591f\u719f\u6089<code>numpy</code>\u4ee5\u53ca\u5176\u4e2d<code>\u5e7f\u64ad</code>\u7684\u4e00\u4e9b\u7279\u6027\uff0c\u4ee5\u53ca\u77e9\u9635/\u5411\u91cf\u7684\u8ba1\u7b97\u3002\u6211\u8bbe\u8ba1\u7684\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>def bilinear_interp_vectorized(a: np.ndarray, b: np.ndarray) -&gt; np.ndarray:\n\n    # TODO: Implement vectorized bilinear interpolation\n\n    # Get axis size from ndarray shape\n    N, H1, W1, C = a.shape\n    N1, H2, W2, _ = b.shape\n    assert N == N1\n\n    # Calculate floor indices\n    x_int = np.floor(b[:, :, :, 0]).astype(int)\n    y_int = np.floor(b[:, :, :, 1]).astype(int)\n\n    # Calculate fractional parts\n    x_frac = b[:, :, :, 0] - x_int\n    y_frac = b[:, :, :, 1] - y_int\n\n    # Calculate interpolation weights\n    w1 = (1 - x_frac) * (1 - y_frac)\n    w2 = x_frac * (1 - y_frac)\n    w3 = (1 - x_frac) * y_frac\n    w4 = x_frac * y_frac\n\n    # Perform vectorized bilinear interpolation using numpy.\n    res = a[np.arange(N)[:, np.newaxis, np.newaxis],\n            x_int, y_int] * w1[:, :, :, np.newaxis] + \\\n          a[np.arange(N)[:, np.newaxis, np.newaxis],\n            x_int + 1, y_int] * w2[:, :, :, np.newaxis] + \\\n          a[np.arange(N)[:, np.newaxis, np.newaxis],\n            x_int, y_int + 1] * w3[:, :, :, np.newaxis] + \\\n          a[np.arange(N)[:, np.newaxis, np.newaxis],\n            x_int + 1, y_int + 1] * w4[:, :, :, np.newaxis]\n\n    return res.astype(int)\n</code></pre> <p>\u5176\u4e2d\u503c\u5f97\u4e00\u63d0\u7684\u662f\u6700\u540e\u7684\u8ba1\u7b97\u65b9\u6cd5\uff08\u901a\u8fc7\u7f51\u7edc\u4e0a\u7684\u5b66\u4e60\uff09\uff1a</p> <p><code>a[np.arange(N)[:, np.newaxis, np.newaxis], x_idx, y_idx]</code>\u662f\u4e00\u79cd\u4f7f\u7528NumPy\u7684\u9ad8\u7ea7\u7d22\u5f15\u6280\u5de7\uff0c\u7528\u4e8e\u4ece\u6570\u7ec4<code>a</code>\u4e2d\u83b7\u53d6\u7279\u5b9a\u4f4d\u7f6e\u7684\u5143\u7d20\u3002</p> <p>\u5177\u4f53\u5206\u6790\u5982\u4e0b\uff1a</p> <ol> <li><code>np.arange(N)</code>\u521b\u5efa\u4e00\u4e2a\u957f\u5ea6\u4e3aN\u7684\u4e00\u7ef4\u6570\u7ec4\uff0c\u5305\u542b\u4ece0\u5230N-1\u7684\u6574\u6570\u3002</li> <li><code>[:, np.newaxis, np.newaxis]</code>\u4f7f\u7528\u5207\u7247\u64cd\u4f5c\u548c<code>np.newaxis</code>\u5c06\u4e00\u7ef4\u6570\u7ec4\u8f6c\u6362\u4e3a\u4e09\u7ef4\u6570\u7ec4\u3002\u8fd9\u6837\u505a\u662f\u4e3a\u4e86\u4e0e<code>x_idx</code>\u548c<code>y_idx</code>\u7684\u7ef4\u5ea6\u5339\u914d\u3002</li> <li><code>x_idx</code>\u548c<code>y_idx</code>\u662f\u4e4b\u524d\u8ba1\u7b97\u5f97\u5230\u7684\u6574\u6570\u7d22\u5f15\u6570\u7ec4\uff0c\u5b83\u4eec\u7684\u5f62\u72b6\u4e3a[N, H2, W2]\u3002</li> <li><code>a[np.arange(N)[:, np.newaxis, np.newaxis], x_idx, y_idx]</code>\u4f7f\u7528\u8fd9\u4e9b\u7d22\u5f15\u6570\u7ec4\u6765\u83b7\u53d6<code>a</code>\u4e2d\u5bf9\u5e94\u4f4d\u7f6e\u7684\u5143\u7d20\u3002\u8fd9\u91cc\u7684\u9ad8\u7ea7\u7d22\u5f15\u64cd\u4f5c\u4f1a\u540c\u65f6\u5728\u4e09\u4e2a\u7ef4\u5ea6\u4e0a\u8fdb\u884c\u7d22\u5f15\uff0c\u8fd4\u56de\u4e00\u4e2a\u5f62\u72b6\u4e3a[N, H2, W2, C]\u7684\u6570\u7ec4\u3002</li> </ol> <p>\u603b\u7ed3\u8d77\u6765\uff0c<code>a[np.arange(N)[:, np.newaxis, np.newaxis], x_idx, y_idx]</code>\u7684\u4f7f\u7528\u9ad8\u7ea7\u7d22\u5f15\u64cd\u4f5c\u4ece\u6570\u7ec4<code>a</code>\u4e2d\u83b7\u53d6\u7279\u5b9a\u4f4d\u7f6e\u7684\u5143\u7d20\u3002\u901a\u8fc7\u5728\u4e09\u4e2a\u7ef4\u5ea6\u4e0a\u540c\u65f6\u8fdb\u884c\u7d22\u5f15\uff0c\u53ef\u4ee5\u5b9e\u73b0\u5bf9\u5e94\u4f4d\u7f6e\u7684\u63d2\u503c\u8ba1\u7b97\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab2/#test_result","title":"Test Result","text":"<p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u52a0\u901f\u6bd4\uff1a\u8fd1\u4e4e34\u500d\uff0c\u53ef\u89c1\u5411\u91cf\u5316\u8ba1\u7b97\u7684\u597d\u5904\uff01</p> <p></p>"},{"location":"ZJU_CS/HPC/homework/lab2/#discussion","title":"Discussion","text":"<p>\u901a\u8fc7\u672c\u6b21\u5b9e\u9a8c\uff0c\u6211\u9996\u5148\u901a\u8fc7\u6559\u5b66\u4ee5\u53ca\u5b98\u65b9\u6587\u6863\u7684\u9605\u8bfb\u5b66\u4e60\u4e86<code>NumPy</code>\u7684\u57fa\u672c\u4f7f\u7528\u3002\u901a\u8fc7\u7f51\u7edc\u5de5\u5177\u7684\u5e2e\u52a9\u5b66\u4e60\u5230\u4e86\u4e00\u79cd\u9ad8\u9636\u7684\u7d22\u5f15\u6280\u5de7\u4ee5\u53ca\u6570\u636e\u8ba1\u7b97\u7684\u65b9\u6cd5\u3002</p> <p>\u672c\u6b21\u4e3b\u8981\u78d5\u7eca\u81ea\u5df1\u7684\u5b9e\u9a8c\u96be\u70b9\u662f\u6ca1\u6709\u81ea\u5df1\u8bfb\u9898\uff0c\u4e3b\u89c2\u4ee3\u5165\u4ee5\u4e3a\u662f\u8981\u901a\u8fc7\u63d2\u503c\u6765\u8fdb\u884c\u56fe\u7247\u7684\u653e\u7f29\u64cd\u4f5c\uff0c\u4f46\u5b9e\u9645\u5219\u4e0d\u662f\u8fd9\u6837\u3002\u540e\u6765\u81ea\u5df1\u9605\u8bfb\u4e86\u4ee3\u7801\uff0c\u641e\u6e05\u6bcf\u53e5\u8bed\u6cd5\u4ee5\u53ca\u610f\u4e49\u4e4b\u540e\u5f88\u5feb\u89e3\u51b3\u4e86\u8fd9\u4e2alab\uff01</p> <p>\u6700\u540e\u611f\u8c22\u8001\u5e08\u548c\u5b66\u957f\uff0c\u8ba9\u6211\u901a\u8fc7\u672c\u6b21lab\u7684\u7ec3\u4e60\u5bf9\u9ad8\u6027\u80fd\u8ba1\u7b97\u4ee5\u53ca\u4f18\u5316\u6709\u4e86\u4e00\u4e2a\u66f4\u6e05\u6670\u7684\u8ba4\u8bc6\uff01</p>"},{"location":"ZJU_CS/HPC/homework/lab3/","title":"Lab-3 \u57fa\u4e8eCUDA\u5bf9GEMM\u7684\u4f18\u5316","text":"<ul> <li>Lab-3 \u57fa\u4e8eCUDA\u5bf9GEMM\u7684\u4f18\u5316<ul> <li>Lab Description</li> <li>Introduction Knowledge(\u53ef\u4ee5\u8df3\u8fc7\u4e0d\u770b)</li> <li>Lab Design &amp; Test Result<ul> <li>AdderCudaKernel</li> <li>Shared Memory</li> <li>\u5faa\u73af\u5c55\u5f00</li> <li>\u6d4b\u8bd5\u7ed3\u679c</li> </ul> </li> <li>Discussion</li> <li>Bonus</li> </ul> </li> </ul>"},{"location":"ZJU_CS/HPC/homework/lab3/#lab_description","title":"Lab Description","text":"<p>\u5177\u4f53\u63cf\u8ff0\u8bf7\u89c1{\u5b9e\u9a8c\u624b\u518c}(https://zjusct.pages.zjusct.io/summer-course-2023/HPC101-Labs-2023/Lab3-Cuda/)</p> <p>\u901a\u7528\u77e9\u9635\u4e58\u6cd5\uff08General matrix multiply, GEMM\uff09\u662f BLAS \u4e2d\u7ecf\u5178\u7684\u5b50\u7a0b\u5e8f\u4e4b\u4e00\u3002[2] \u4f5c\u4e3a\u5f53\u4eca\u79d1\u5b66\u8ba1\u7b97\u6700\u5e38\u89c1\u7684\u8ba1\u7b97\u4efb\u52a1\u4e4b\u4e00\uff0cGEMM \u9700\u8981\u5b9e\u73b0\u4e00\u4e2a\u975e\u5e38\u9ad8\u6548\u7684\u77e9\u9635\u4e58\u6cd5\u3002\u4f18\u5316 GEMM \u4e5f\u662f HPC \u754c\u975e\u5e38\u57fa\u7840\u7684\u4efb\u52a1\u3002</p> <p>\u672c\u6b21\u5b9e\u9a8c\u9700\u8981\u4f60\u4f7f\u7528 CUDA \u5b8c\u6210\u4e00\u4e2a\u9ad8\u6027\u80fd GEMM \u5b9e\u73b0\u3002</p> <p>Bonus\uff1a\u53e6\u5916\u672c\u6b21\u5b9e\u9a8c\u63d0\u4f9b\u7684 GPU \u4e0a\uff0c\u5305\u542b\u4e0a\u8ff0\u63d0\u53ca\u7684 Tensor Core \u6a21\u5757\u3002\u5408\u7406\u7684\u4f7f\u7528\u5b83\u80fd\u591f\u8fdb\u4e00\u6b65\u52a0\u901f\u5377\u79ef\u7684\u8ba1\u7b97\u3002\u5728 Cuda 9.0 \u4e4b\u540e\uff0c\u4f60\u53ef\u4ee5\u4f7f\u7528\u5185\u5d4c <code>PTX</code> \u6c47\u7f16\u6216\u8005 CUDA \u7684 C++ \u6269\u5c55 <code>nvcuda::wmma</code> \u7684\u65b9\u5f0f\u6765\u663e\u5f0f\u5730\u8c03\u7528 Tensor Core \u6765\u8fdb\u884c\u8ba1\u7b97\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab3/#introduction_knowledge","title":"Introduction Knowledge(\u53ef\u4ee5\u8df3\u8fc7\u4e0d\u770b)","text":"<ol> <li> <p>CUDA\u4f7f\u7528\uff1a\u5efa\u8bae\u4e0a\u5b98\u7f51\u3002\u81f3\u4e8elab\u4e2d\u63d0\u5230\u7684\u4e0d\u540cAPI\u7684\u533a\u522b\uff0c\u53ef\u89c1\u535a\u5ba2</p> </li> <li> <p>\u5173\u4e8e\u9ad8\u6027\u80fd\u8ba1\u7b97\u77e9\u9635\u4e58\u6cd5\uff08GEMM\uff09\u7684\u8bf4\u660e. CS217</p> </li> <li> <p>Introduction to shared memory.(link) </p> </li> <li> <p>\u4e00\u4e2aGithub\u4e0a\u4e0d\u540c\u4f18\u5316\u65b9\u6cd5\u7684\u5bf9\u6bd4</p> </li> <li> <p>CUDA\u81ea\u5df1\u5bf9shared memory \u7684\u4f7f\u7528\u7684\u793a\u4f8b3.2.4 GEMM</p> </li> <li> <p>\u6709\u4e9b\u77e5\u8bc6\u611f\u89c9\u95eegpt\u83b7\u53d6\u7684\u901f\u5ea6\u4f1a\u66f4\u5feb\uff0c\u4f46\u662f\u5177\u4f53\u7684\u7ec6\u8282\u8fd8\u662f\u5728\u5b98\u7f51\u4e0a\u67e5\u9605\u66f4\u597d\uff08\u5b98\u7f51\u7684\u77e5\u8bc6\u4ecb\u7ecd\u975e\u5e38\u5168\uff09\\</p> </li> </ol>"},{"location":"ZJU_CS/HPC/homework/lab3/#lab_design_test_result","title":"Lab Design &amp; Test Result","text":"<pre><code>/// \\brief Let A to be A + B.\n__global__ void AdderCudaKernel(double *__restrict__ a,\n                                  const double *__restrict__ b)\n{\n    // const int i = blockIdx.x * block_size + threadIdx.x;\n    // const int j = blockIdx.y * block_size + threadIdx.y;\n    // if (i &lt; size &amp;&amp; j &lt; size)\n    // {\n    //   a(i, j) += b(i, j);\n    // }\n    __shared__ double shared_a[block_size][block_size];\n    __shared__ double shared_b[block_size][block_size];\n\n    int i = blockIdx.x * block_size + threadIdx.x;\n    int j = blockIdx.y * block_size + threadIdx.y;\n\n    if (i &lt; size &amp;&amp; j &lt; size) {\n        shared_a[threadIdx.x][threadIdx.y] = a[i * size + j];\n        shared_b[threadIdx.x][threadIdx.y] = b[i * size + j];\n        __syncthreads();\n\n        shared_a[threadIdx.x][threadIdx.y] += shared_b[threadIdx.x][threadIdx.y];\n        __syncthreads();\n\n        a(i,j) = shared_a[threadIdx.x][threadIdx.y];\n    }\n}\n\n/// \\brief Do Matrix Multiplication on GPU.\n__global__ void MultipleCudaKernel(const double *__restrict__ a, \n                                   const double *__restrict__ b, \n                                   double *__restrict__ result) \n{     \n    // Get the index of the current thread\n    const int row = blockIdx.y * blockDim.y + threadIdx.y;\n    const int col = blockIdx.x * blockDim.x + threadIdx.x;\n    const int block_num = (size + block_size - 1) / block_size;\n\n    // Define shared memory\n    alignas(32) __shared__ double shared_a[block_size][block_size];\n    alignas(32) __shared__ double shared_b[block_size][block_size];\n\n    // Perform matrix multiplication operation\n    double sum = 0.0f;\n    for (int i = 0; i &lt; block_num; i++) {\n        // Load data from A and B into shared memory\n        int idx_a = row * size + i * block_size + threadIdx.x;\n        int idx_b = (i * block_size + threadIdx.y) * size + col;\n        shared_a[threadIdx.y][threadIdx.x] = (row &lt; size &amp;&amp; (i * block_size + threadIdx.x) &lt; size) ? a[idx_a] : 0.0f;\n        shared_b[threadIdx.y][threadIdx.x] = ((i * block_size + threadIdx.y) &lt; size &amp;&amp; col &lt; size) ? b[idx_b] : 0.0f;\n         // Synchronize to make sure the matrices are loaded before starting the computation\n        __syncthreads();\n\n        #pragma unroll\n        for (int j = 0;  j &lt; block_size; j ++) {\n            // sum = fma(shared_a[threadIdx.y][j], shared_b[j][threadIdx.x], sum);\n            // sum = fma(shared_a[threadIdx.y][j + 1], shared_b[j + 1][threadIdx.x], sum);\n            // sum = fma(shared_a[threadIdx.y][j + 2], shared_b[j + 2][threadIdx.x], sum);\n            // sum = fma(shared_a[threadIdx.y][j + 3], shared_b[j + 3][threadIdx.x], sum);\n            sum += shared_a[threadIdx.y][j] * shared_b[j][threadIdx.x];\n        }\n        // Synchronize to make sure the computation is done before loading the next sub-matrix\n        __syncthreads();\n    }\n\n    if(row &lt; size &amp;&amp; col &lt; size) {\n        // Write the result back to result_kernel\n        result(row, col) = sum;\n    }\n}\n</code></pre> <p>Baseline\u5206\u6790\uff1a\u5bf9\u4e8ebaseline\u800c\u8a00\uff0c\u5176\u901f\u5ea6\u6162\u7684\u539f\u56e0\u4e00\u65b9\u9762\u662f\u53ea\u80fd\u4e32\u884c\u7ebf\u6027\u8fdb\u884c\u8ba1\u7b97\uff1b\u53e6\u4e00\u65b9\u9762\u5728\u4e8e\u6bcf\u6b21\u5faa\u73af\u90fd\u8981\u5bf9\u4e3b\u5b58\u8fdb\u884c\u6570\u636e\u7684\u8bfb\u5199\u3002\u6545\u6211\u4eec\u8981\u9488\u5bf9\u4ee5\u4e0a\u7684\u5185\u5bb9\u8fdb\u884c\u4f18\u5316\u3002</p> <p>\u4f18\u5316\u7b56\u7565\uff1a\u5171\u4eab\u5185\u5b58\uff0c\u5185\u5b58\u5bf9\u9f50\uff0c\u5faa\u73af\u5c55\u5f00\uff08\u7f16\u8bd1\u5668\u4f1a\u81ea\u52a8\u5b9e\u73b0\uff09\u3001fma\u7b49</p>"},{"location":"ZJU_CS/HPC/homework/lab3/#addercudakernel","title":"AdderCudaKernel","text":"<p>\u7b2c\u4e00\u4e2a\u662f\u5e38\u89c4\u7684AdderCudaKernel\u7684\u6d4b\u8bd5\uff0c\u7b2c\u4e8c\u4e2a\u662f\u4f7f\u7528\u5171\u4eab\u5185\u5b58\u7684\u6d4b\u8bd5\u65f6\u95f4\uff0c\u7531\u4e8e\u6bcf\u6b21\u6d4b\u8bd5\u5177\u6709\u968f\u673a\u4ee5\u53ca\u4e0d\u7a33\u5b9a\u6027\uff0c\u9488\u5bf9\u8fd9\u79cd\u60c5\u51b5\u6211\u5206\u6790\u53ef\u80fd\u662f<code>__syncthreads()\uff1b</code>\u5bfc\u81f4\u505c\u987f\u7684\u65f6\u95f4\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab3/#shared_memory","title":"Shared Memory","text":"<p>\u5171\u4eab\u5185\u5b58\u662f\u6d4b\u8bd5\u4e2d\u52a0\u901f\u7684\u4e3b\u8981\u539f\u56e0\uff0c\u6211\u4eec\u5176\u4e2d\u4f7f\u7528\u5185\u5b58\u5bf9\u9f50\u7684\u65b9\u5f0f\u80fd\u591f\u6709\u4e9b\u8bb8\u52a0\u901f\u3002</p> <p>\u5728\u6d4b\u8bd5\u4e2d\u6211\u4eec\u53d1\u73b0\u5171\u4eab\u5185\u5b58\u7684\u5927\u5c0f\u662f<code>0xc000</code>,\u56e0\u6b64\u6211\u4eec\u5c06blocksize\u7684\u5927\u5c0f\u8bbe\u7f6e\u4e3a16\u6bd4\u8f83\u5408\u9002\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab3/#_1","title":"\u5faa\u73af\u5c55\u5f00","text":"<p>\u8fd9\u662f\u4e00\u4e2a\u6bd4\u8f83\u5e38\u89c1\u7684\u4f18\u5316\u624b\u6bb5\uff0c\u4f46\u662f\u56e0\u4e3a\u6211\u4eec\u4f7f\u7528\u7684\u662fO3\u4f18\u5316\uff0c\u4ee5\u53ca<code>#pragma unroll</code>,\u63d0\u793a\u7f16\u8bd1\u5668\uff0c\u6545\u5728\u6211\u7684\u6d4b\u8bd5\u4e2d\u53d1\u73b0\u4e0d\u7528\u81ea\u5df1\u624b\u5199\u5faa\u73af\u5c55\u5f00\u7684\u4f18\u5316\u3002</p> <p>\u5176\u4e2d<code>fma</code> \u503c\u5f97\u6211\u4eec\u5b66\u4e60\uff0c\u8fd9\u662fCUDA\u672c\u8eab\u81ea\u5e26\u7684\u4e00\u79cd\u52a0\u901f\u6307\u4ee4\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab3/#_2","title":"\u6d4b\u8bd5\u7ed3\u679c","text":"<p>\u6545\u52a0\u901f\u6bd4\u4e3a0.94818</p>"},{"location":"ZJU_CS/HPC/homework/lab3/#discussion","title":"Discussion","text":"<p>\u672c\u6b21lab\u6559\u4f1a\u4e86\u6211\u5982\u4f55\u4f7f\u7528CUDA\u8fdb\u884cGPU\u7f16\u7a0b\uff0c\u5728\u6574\u4e2a\u7f16\u7a0b\u8fc7\u7a0b\u4e2d\uff0c\u57fa\u672c\u9605\u8bfb\u4e86\u5b98\u65b9\u6587\u6863\uff0c\u5e76\u4e14\u4e86\u89e3\u4e86thread\u548cwarp\u7f16\u7a0b\u601d\u60f3\uff0c\u4ee5\u53ca\u7ed3\u5408\u8bfe\u4e0a\u7684\u77e5\u8bc6\uff0c\u6df1\u5165\u7406\u89e3\u4e86\u5185\u5b58\u7684\u5185\u90e8\u6784\u9020\u4ee5\u53caNVIDA\u663e\u5361\u7684\u81ea\u8eab\u7ed3\u6784\u7279\u6027\uff0c\u5728\u6b64\u57fa\u7840\u4e0a\u8fdb\u884c\u4e86\u4f18\u5316\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab3/#bonus","title":"Bonus","text":"<p>\u5173\u4e8eBonus\uff0c\u867d\u7136\u81ea\u5df1\u6ca1\u6709\u5b8c\u6574\u505a\u51fa\u6765\u7528tensor core\u7684\u8ba1\u7b97\u65b9\u6cd5\uff0c\u4f46\u81ea\u5df1\u4e5f\u5728\u8fd9\u4e2a\u4e0a\u9762\u6295\u5165\u4e86\u6bd4\u8f83\u591a\u7684\u7cbe\u529b\uff0c\u6700\u540e\u6839\u636e\u6211\u7684\u6d4b\u8bd5\u5e94\u8be5\u95ee\u9898\u8fd8\u662f\u51fa\u73b0\u5728\u4e86block\u548cgrid\u7684\u6570\u76ee\u914d\u7f6e\u4e0a\uff0c\u56e0\u6b64\u5bfc\u81f4\u8ba1\u7b97\u7ed3\u679c\u6709\u8bef\u3002\u6211\u7684\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>dim3 grid((size + block_size * WMMA_M - 1) / (block_size * WMMA_M),\n            (size + block_size * WMMA_N - 1) / (block_size * WMMA_N));\ndim3 block(block_size, block_size);\n\nconst int WMMA_M = 8;\nconst int WMMA_N = 8;\nconst int WMMA_K = 4;\n\n/// \\brief Do Matrix Multiplication on GPU.\n__global__ void MultipleCudaKernel(const double *__restrict__ a, \n                                   const double *__restrict__ b, \n                                   double *__restrict__ result) \n{\n    // Tile using a 2D grid\n    const int warpM = (blockIdx.x * blockDim.x + threadIdx.x) / warpSize;\n    const int warpN = (blockIdx.y * blockDim.y + threadIdx.y);\n\n    // Declare the fragments\n    using namespace nvcuda;\n    wmma::fragment&lt;wmma::matrix_a, WMMA_M, WMMA_N, WMMA_K, double, wmma::col_major&gt; a_frag;\n    wmma::fragment&lt;wmma::matrix_b, WMMA_M, WMMA_N, WMMA_K, double, wmma::col_major&gt; b_frag;\n    wmma::fragment&lt;wmma::accumulator, WMMA_M, WMMA_N, WMMA_K, double&gt; acc_frag;\n    //initialize\n    wmma::fill_fragment(acc_frag, 0.0);\n\n    // Loop over size\n    for (int i = 0; i &lt; size; i += WMMA_K) {\n        int aRow = warpM * WMMA_M;\n        int aCol = i;\n\n        int bRow = i;\n        int bCol = warpN * WMMA_N;\n\n        // Bounds checking\n        if (aRow &lt; size &amp;&amp; aCol &lt; size &amp;&amp; bRow &lt; size &amp;&amp; bCol &lt; size) {\n          // Load the inputs\n          wmma::load_matrix_sync(a_frag, a + aRow + aCol * size, size);\n          wmma::load_matrix_sync(b_frag, b + bRow + bCol * size, size);\n\n          // Perform the matrix multiplication\n          wmma::mma_sync(acc_frag, a_frag, b_frag, acc_frag);\n        }\n    }\n\n    int cRow = warpM * WMMA_M;\n    int cCol = warpN * WMMA_N;\n    // Store the output\n    if (cRow &lt; size &amp;&amp; cCol &lt; size) {\n    wmma::store_matrix_sync(result + cRow + cCol * size, acc_frag, size, wmma::mem_col_major);\n    }\n}\n</code></pre> <p></p> <p>\u7ed3\u8bba\uff1a\u901a\u8fc7tensor core\u7684\u8ba1\u7b97\uff0c\u6211\u4eec\u80fd\u5f88\u5927\u7a0b\u5ea6\u4e0a\u907f\u514d\u51b2\u7a81\u5e76\u4e14\u52a0\u901f\u8ba1\u7b97\u3002\u901a\u8fc7printf\u5927\u6cd5\u6211\u770b\u51fa\u6211\u7684\u8ba1\u7b97\u7ed3\u679c\u4e0e\u6b63\u786e\u7684\u8ba1\u7b97\u7ed3\u679c\u76f8\u5dee\u4e86\u5927\u7ea64\u500d\u5de6\u53f3\uff0c\u4f46\u4e0d\u592a\u7406\u89e3\u81ea\u5df1\u9519\u5728\u4e86\u54ea\u91cc\uff1f\u5982\u679c\u53ef\u4ee5\u7684\u8bdd\u5e0c\u671b\u8d85\u7b97\u961f\u7684\u5b66\u957f\u53ef\u4ee5\u5e2e\u5fd9\u6307\u51fa\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab4/","title":"Lab-4 PCG\u7b97\u6cd5\u5728OMP\u548cMPI\u4e0b\u7684\u4f18\u5316","text":"<ul> <li>Lab-4 PCG\u7b97\u6cd5\u5728OMP\u548cMPI\u4e0b\u7684\u4f18\u5316<ul> <li>Lab Description</li> <li>Introduction Knowledge(\u53ef\u4ee5\u8df3\u8fc7\u4e0d\u770b)</li> <li>Lab Design &amp; Test Result<ul> <li>OMP</li> <li>MPI</li> <li>SIMD\u548c\u5faa\u73af\u5c55\u5f00</li> </ul> </li> <li>Profile<ul> <li>Intel trace analyzer</li> <li>Vtune</li> </ul> </li> <li>Bonus</li> <li>Discussion</li> </ul> </li> </ul>"},{"location":"ZJU_CS/HPC/homework/lab4/#lab_description","title":"Lab Description","text":"<p>\u6211\u4eec\u63d0\u4f9b<code>PCG</code>\u4ee3\u7801\u7684\u4e32\u884c\u7248\u672c\u4f5c\u4e3a\u57fa\u51c6\u4ee3\u7801\u3002\u5728\u8fd9\u4e2a\u4ee3\u7801\u6846\u67b6\u4e2d\u6709\u4e00\u90e8\u5206\u4ee3\u7801\u4e0d\u5141\u8bb8\u4fee\u6539\uff0c\u89c1\u4ee3\u7801\u7684<code>README</code>\u6587\u4ef6\uff08\u5982\u679c\u4f60\u8ba4\u4e3a\u4ee3\u7801\u6846\u67b6\u6709\u4e0d\u8db3\u4e4b\u5904\uff0c\u6216\u662f\u6709\u5176\u4ed6\u503c\u5f97\u4fee\u6539\u7684\u5730\u65b9\uff0c\u6b22\u8fce\u5411\u6211\u4eec\u63d0\u51fa\u610f\u89c1\uff09\u3002\u7531\u4e8e\u8fed\u4ee3\u7b97\u6cd5\u7684\u65f6\u95f4\u7a33\u5b9a\u6027\u8f83\u5dee\uff0c<code>main.c</code>\u5c06\u5728\u540c\u6837\u4e00\u7ec4\u8f93\u5165\u4e0a\u91cd\u590d\u8fd0\u884c<code>pcg</code>\u4ee3\u780110\u6b21\uff0c\u603b\u65f6\u95f4\u4f5c\u4e3a\u5728\u8be5\u7ec4\u8f93\u5165\u4e0a\u7684\u8bc4\u6d4b\u6807\u51c6\u3002</p> <p>\u4ee3\u7801\u5728\u6d4b\u8bd5\u65f6\u5c06\u6d4b\u8bd54\u7ec4\u56fa\u5b9a\u7684\u8f93\u5165\uff0c\u5176\u4e2d\u4e09\u7ec4\u516c\u5e03\u4e8e\u57fa\u51c6\u4ee3\u7801\u4e2d\uff0c\u76f8\u5bf9\u5e94\u7684\u77e9\u9635\ufffd\u89c4\u6a21\u5206\u522b\u4e3a2001x2001\u30014001x4001\u30016001x6001\uff0c\u6700\u540e\u4e00\u7ec4\u8f93\u5165\u4e0d\u516c\u5e03\u3002<code>PCG</code>\u7b97\u6cd5\u901a\u5e38\u7528\u4e8e\u6c42\u89e3\u5927\u89c4\u6a21\u7684\u7a00\u758f\u77e9\u9635\uff0c\u7a00\u758f\u77e9\u9635\u4e0a\u53ef\u4ee5\u91c7\u53d6\u7279\u6b8a\u7684\u5b58\u50a8\u65b9\u5f0f\u6765\u8282\u7701\u7a7a\u95f4\u548c\u52a0\u901f\u8ba1\u7b97\u3002\u4e3a\u4e86\u4ee3\u7801\u7b80\u5355\uff0c\u6211\u4eec\u4e0d\u8003\u8651\u9488\u5bf9\u7a00\u758f\u77e9\u9635\u8fdb\u884c\u7684\u4f18\u5316\uff0c\u7ed9\u51fa\u7684\u8f93\u5165\u6570\u636e\u90fd\u662f\u7a20\u5bc6\u77e9\u9635\u3002</p> <p>\u6b64\u5916\uff0c\u4f60\u8fd8\u9700\u8981\u5728\u4ee3\u7801\u4e0a\u8fdb\u884cProfile\u3002\u4f9d\u636eProfile\u7ed3\u679c\uff0c\u4f60\u81f3\u5c11\u9700\u8981\u5f97\u5230</p> <ul> <li>\u8017\u65f6\u6700\u591a\u7684\u4e09\u4e2aMPI\u51fd\u6570\uff1b</li> <li>\u7a0b\u5e8f\u5728MPI\u4e0a\u6d88\u8017\u7684\u603b\u65f6\u95f4\u3002</li> </ul> <p>Profiler\u8fd8\u4f1a\u63d0\u4f9b\u66f4\u591a\u5176\u4ed6\u7684\u4fe1\u606f\u3002\u5982\u679c\u4f60\u80fd\u591f\u83b7\u5f97\u5e76\u89e3\u91ca\u5176\u4ed6Profile\u83b7\u5f97\u7684\u6570\u636e\u548c\u56fe\u8868\uff0c\u6216\u8005\u80fd\u591f\u6839\u636eProfile\u7684\u7ed3\u679c\u5bf9\u7a0b\u5e8f\u8fdb\u884c\u6709\u6548\u7684\u4f18\u5316\uff0c\u5c06\u80fd\u591f\u5728Profile\u90e8\u5206\u83b7\u5f97\u66f4\u597d\u7684\u5206\u6570\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab4/#introduction_knowledge","title":"Introduction Knowledge(\u53ef\u4ee5\u8df3\u8fc7\u4e0d\u770b)","text":"<p>PCG\uff08\u82f1\u8bed\uff1apreconditioned conjugate gradient\uff0c\u9884\u5904\u7406\u5171\u8f6d\u68af\u5ea6\u7b97\u6cd5\uff09\u662f\u4e00\u79cd\u5229\u7528\u591a\u6b21\u8fed\u4ee3\u5bf9\u65b9\u7a0b\u7ec4\u8fdb\u884c\u6c42\u89e3\u7684\u65b9\u6cd5\u3002\u76f8\u6bd4\u4e8e\u4f7f\u7528\u76f4\u63a5\u6cd5\u6c42\u89e3\u65b9\u7a0b\u7ec4\uff0c\u5176\u5bf9\u4e8e\u5b58\u50a8\u7a7a\u95f4\u7684\u8981\u6c42\u4e0d\u9ad8\u4e14\u6269\u5c55\u6027\u826f\u597d\uff0c\u5728\u6d89\u53ca\u65b9\u7a0b\u7ec4\u6c42\u89e3\u7684\u79d1\u5b66\u8ba1\u7b97\u5e94\u7528\u4e2d\u5177\u6709\u4e00\u5b9a\u7684\u4f18\u52bf\u3002\u5927\u89c4\u6a21\u65b9\u7a0b\u7ec4\u6c42\u89e3\u5728\u9ad8\u6027\u80fd\u8ba1\u7b97\u673a\u4e0a\u8fdb\u884c\u8ba1\u7b97\u65f6\uff0c\u4f7f\u7528\u76f4\u63a5\u6cd5\u5f80\u5f80\u4f1a\u56e0\u4e3a\u7a0b\u5e8f\u7684\u5d29\u6e83\u800c\u5bfc\u81f4\u4e4b\u524d\u7684\u8ba1\u7b97\u6210\u4e3a\u65e0\u6548\u8ba1\u7b97\u3002\u518d\u6b21\u8fdb\u884c\u8ba1\u7b97\u65f6\uff0c\u4e4b\u524d\u5df2\u7ecf\u8ba1\u7b97\u8fc7\u7684\u90e8\u5206\u8981\u8fdb\u884c\u91cd\u65b0\u8ba1\u7b97\uff0c\u6d6a\u8d39\u4e86\u5927\u91cf\u7684\u65f6\u95f4\u4e0e\u8ba1\u7b97\u8d44\u6e90\uff0c\u4f7f\u7528PCG\u7b97\u6cd5\u80fd\u591f\u6709\u6548\u5730\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\u3002</p> <p>MPI\u7684\u4f7f\u7528\u65b9\u6cd5\u53ef\u4ee5\u53c2\u89c1\u6211\u7684AIPP\u7b14\u8bb0</p> <p>OpenMP \u7684\u4f7f\u7528\u76f8\u5bf9\u7b80\u5355\uff0c\u53ef\u4ee5\u53bb\u770bxg\u7684\u7b14\u8bb0</p>"},{"location":"ZJU_CS/HPC/homework/lab4/#lab_design_test_result","title":"Lab Design &amp; Test Result","text":""},{"location":"ZJU_CS/HPC/homework/lab4/#omp","title":"OMP","text":"<p>\u7531\u4e8e\u6700\u521d\u5bf9mpi\u4f7f\u7528\u8fd8\u4e0d\u591f\u719f\u6089\uff0c\u6211\u5148\u8003\u8651\u4f7f\u7528OpenMP\u8fdb\u884c\u4f18\u5316\u3002\u7ecf\u8fc7\u6d4b\u8bd5\u53d1\u73b0\uff0c\u5982\u679c\u5728<code>PCG()\u51fd\u6570</code>\u8fd0\u884c\u7684for\u5faa\u73af\u5916\u5957\u7528OpenMP\uff0c\u5219\u53ef\u4ee5\u5145\u5206\u5229\u7528\u4e86\u5355\u8282\u70b9\u591a\u6838\u5fc3\u7684\u4f18\u52bf\uff0c\u5c06\u65f6\u95f4\u76f4\u63a5\u7f29\u77ed10\u500d\u5de6\u53f3\u3002</p> <pre><code># pragma omp parallel for\nfor (int i = 0; i &lt; 10; ++i) {\n    PCG(size, A, b);\n}\n</code></pre> <p>\u4f7f\u7528<code>srun -N 4 -n 4 --cpu-bind=cores --cpus-per-task=24 ./pcg input_1.bin</code></p> <p>\u6b64\u5916\u503c\u5f97\u4e00\u63d0\u7684\u662f\uff0c\u5e76\u4e0d\u662f\u5bf9\u6709\u5faa\u73af\u7684\u90e8\u5206\u4f7f\u7528OpenMP\u90fd\u53ef\u4ee5\u52a0\u901f\uff0c\u8fd9\u91cc\u503c\u5f97\u601d\u8003\u3002</p> <p></p>"},{"location":"ZJU_CS/HPC/homework/lab4/#mpi","title":"MPI","text":"<p>PCG \u7b97\u6cd5\u7684\u4e3b\u8981\u8fed\u4ee3\u8fc7\u7a0b\u4ec5\u6d89\u53ca\u77e9\u9635\u5411\u91cf\u4e58\u6cd5\u3001\u5411\u91cf\u5185\u79ef\u4ee5\u53ca\u5411\u91cf\u7684\u6570\u91cf\u79ef\uff0c\u5747\u4e3a\u5178\u578b\u7684 embarrassingly parallel \u60c5\u5f62\uff0c\u56e0\u6b64\u53ef\u8f7b\u677e\u5229\u7528 MPI \u4f18\u5316\u7a0b\u5e8f\u3002\uff08\u6b64\u5916\uff0cMPI\u7684\u4ee3\u7801\u65e0\u6cd5\u5957\u7528OMP\u4e2d\u5bf9PCG\u51fd\u6570\u7684\u5e76\u884c\uff01\uff09</p> <p>\u8d77\u5148\u7531\u4e8eOpenMP\u7684\u4f18\u5316\u601d\u8def\uff0c\u7531\u4e8e<code>void MatrixMulVec \uff08\uff09</code>\u8ba1\u7b97\u4e3a\\(O(n^2)\\)\u7ea7\u522b\u7684\uff0c\u6240\u4ee5\u53ea\u60f3\u7528MPI\u5bf9\u8fd9\u4e2a\u51fd\u6570\u8fdb\u884c\u4f18\u5316\uff0c\u53ef\u64cd\u4f5c\u540e\u53d1\u73b0\u8fd9\u6837\u662f\u4e0d\u53ef\u884c\u7684\uff0c\u5177\u4f53\u7684\u539f\u56e0\u4ecd\u7136\u672a\u77e5(\u540e\u6765\u53d1\u73b0\u7531\u4e8e\u7ebf\u7a0b\u5757\u5927\u5c0f\u4e0d\u4e00\u5b9a\uff0c\u6545\u5e94\u5f53\u4f7f\u7528MPI_GatherV\u51fd\u6570\u800c\u4e0d\u662fMPI_ALLGather\u51fd\u6570\u3002</p> <p>\u56e0\u6b64\u6211\u5728ddl\u7684\u4e24\u5929\u524d\u5f00\u59cb\u91cd\u65b0\u66f4\u6362\u601d\u8def\uff0c\u76f4\u63a5\u5bf9\u6574\u4e2a<code>PCG</code>\u51fd\u6570\u8fdb\u884cMPI\u5e76\u884c\u64cd\u4f5c\u3002</p> <p></p> <p>\u518d\u901a\u8fc7<code>printf</code>\u77e5\u9053\u4e86\u4e2d\u95f4\u51fa\u73b0\u4e86NA\u7684\u60c5\u51b5\uff0c\u662f\u7531\u4e8e<code>MatrixMulVec</code>\u51fd\u6570\u7684\u5199\u6cd5\u51fa\u73b0\u4e86\u95ee\u9898\uff0c\u4ecd\u7136\u5f52\u548e\u5230MPIGatherV\u4e0a\u9762\u3002\uff08\u4f46\u8fd9\u91cc\u4ecd\u6709\u8ff7\u60d1\u7684\u70b9\u662f\u5982\u679c\u6211\u73af\u5883\u4e09\u4e2a\u90fd\u52a0\u8f7d\u90a3\u4e48\u4e0d\u80fd\u8dd1\u901a\uff0c\u4f46\u5982\u679c\u6211\u53ea\u542f\u7528OpenMP\u5219\u90fd\u53ef\u4ee5\u8dd1\u901a\uff09</p> <p>\u601d\u8def\u65e2\u662f\u5bf9\u6240\u6709\u77e9\u9635\u8fdb\u884c\u62c6\u5206\uff0c\u5229\u7528\u901a\u4fe1\u7684\u4f18\u52bf\u5e76\u884c\u8ba1\u7b97\u3002</p> <p>\u540e\u6765\u7ecf\u8fc7\u81ea\u5df1\u7684\u52aa\u529b\u5c1d\u8bd5\uff0c\u53d1\u73b0\u53ef\u4ee5\u6b63\u5e38\u8ba1\u7b97\u4f46\u7ed3\u679c\u6709\u8bef\uff0c\u539f\u56e0\u662f\uff1f\u4e00\u6a21\u4e00\u6837\u7684\u4ee3\u7801\u6628\u5929\u8dd1\u901a\u51e0\u5929\u8dd1\u4e0d\u901a\u771f\u7684\u5f88\u5947\u602a</p> <p>\u4ee3\u7801\u5982\u4e0b\uff1a</p> <pre><code>#include \"judge.h\"\n\ndouble dot(double a[], double b[], int size) {\n    double dot_sum = 0;\n    double local_dot_sum = 0;\n    #pragma omp parallel for reduction(+:local_dot_sum)\n    for (int i = 0; i &lt; size; ++i) {\n        local_dot_sum += a[i] * b[i];\n    }\n    MPI_Allreduce(&amp;local_dot_sum, &amp;dot_sum, 1, MPI_DOUBLE, MPI_SUM, MPI_COMM_WORLD);\n    return dot_sum;\n}\n\nvoid MatrixMulVec(int size, double A[][size], double x[], double b[], int start, int end) {    \n    #pragma omp parallel for\n    for (int i = start; i &lt; end; ++i) {\n        double temp = 0;\n        for (int j = 0; j &lt; size; ++j) {\n            temp += A[i][j] * x[j];\n        }\n        #pragma omp critical\n        {\n            b[i - start] = temp;\n        }\n    }\n}\n\nvoid PCG(int size, double A[][size], double b[]) {\n\n    int rank, num_procs;\n    MPI_Comm_rank(MPI_COMM_WORLD, &amp;rank);\n    MPI_Comm_size(MPI_COMM_WORLD, &amp;num_procs);\n    MPI_Bcast(A, size * size, MPI_DOUBLE, 0, MPI_COMM_WORLD);\n    MPI_Bcast(b, size, MPI_DOUBLE, 0, MPI_COMM_WORLD);\n    if (rank == 0) {\n        start_timer();\n    }\n\n    int chunk_size = size / num_procs;\n    int remainder = size % num_procs;\n\n    int start = rank * chunk_size;\n    int end = start + chunk_size;\n    if (rank == num_procs - 1) {\n        end += remainder;\n    }\n    int counts = end - start;\n\n    double r[counts], x[counts], z[counts], p[counts];\n    double alpha, beta, gamma, r_dot_z, A_dot_p[counts];\n\n    /* initialization */\n    // #pragma omp parallel for\n    for (int i = start; i &lt; end; ++i){\n        x[i - start] = 0;\n        r[i - start] = b[i];\n        z[i - start] = r[i - start] / A[i][i];\n        p[i - start] = z[i - start];\n    }\n\n    /* solve */\n    int iter = 0;\n    double loss = 0;\n    int quit = 1;\n    r_dot_z = dot(r, z, counts);\n\n    double* local_x = (double*)malloc(size * sizeof(double));\n    double* local_p = (double*)malloc(size * sizeof(double));\n    int* recvcounts = (int*)malloc(num_procs * sizeof(int));\n    int* displs = (int*)malloc(num_procs * sizeof(int));\n    if (local_x == NULL || local_p == NULL) {\n        fprintf(stderr, \"Failed to allocate memory for local memory\\n\");\n        exit(1);\n    }\n\n    MPI_Allgather(&amp;counts, 1, MPI_INT, recvcounts, 1, MPI_INT, MPI_COMM_WORLD);\n\n    displs[0] = 0;\n    for (int i = 1; i &lt; num_procs; i++) {\n        displs[i] = displs[i-1] + recvcounts[i-1];\n    }\n\n    do {            \n        /* A * p_k */\n        MPI_Allgatherv(p, counts, MPI_DOUBLE, local_p, recvcounts, displs, MPI_DOUBLE, MPI_COMM_WORLD);\n        MatrixMulVec(size, A, local_p, A_dot_p, start, end);\n\n        /* alpha */\n        alpha = r_dot_z / dot(p, A_dot_p, counts);\n\n        /* x */\n        #pragma omp parallel for\n        for (int i = 0; i &lt; counts; ++i) {\n            x[i] += alpha * p[i];\n        }\n\n        /* r &amp; loss */\n\n        double my_loss = 0.0;\n        // #pragma omp parallel for reduction(+:loss)\n        for (int i = 0; i &lt; counts; ++i) {\n            r[i] = r[i] - alpha * A_dot_p[i];\n            if (r[i]) quit = 0;\n            my_loss += fabs(r[i]);\n        }\n        if (quit) break;\n        MPI_Allreduce(&amp;my_loss, &amp;loss, 1, MPI_DOUBLE, MPI_SUM, MPI_COMM_WORLD);\n\n        /* z */\n        // #pragma omp parallel for\n        for (int i = start; i &lt; end; ++i) {\n            z[i - start] = r[i - start] / A[i][i];\n        }\n\n        /* beta */\n        double temp = dot(z, r, counts);\n        beta = temp / r_dot_z;\n        r_dot_z = temp;\n\n        /* p */\n        // #pragma omp simd\n        for (int i = 0; i &lt; counts; ++i) {\n            p[i] = z[i] + beta * p[i];\n        }\n    }\n    while (++iter &lt; MAXITER &amp;&amp; loss &gt; EPI);\n\n\n    MPI_Gatherv(x, counts, MPI_DOUBLE, local_x, recvcounts, displs, MPI_DOUBLE, 0, MPI_COMM_WORLD);\n\n    if (rank == 0) {\n        check(size, A, local_x, b, iter);\n    }\n    free(local_x);\n    free(local_p);\n    free(recvcounts);\n    free(displs);\n}\n</code></pre> <p>OpenMPI\u5b9e\u9a8c\u7ed3\u679c\uff1a</p> <p></p> <p>IntelMPI\u5b9e\u9a8c\u7ed3\u679c\uff1a</p> <p></p> <p>ps\uff1ainput_2\u5927\u6982\u662f30\u591as\uff0cinput_3\u662f180\u591as\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab4/#simd","title":"SIMD\u548c\u5faa\u73af\u5c55\u5f00","text":"<p>\u901a\u8fc7\u7f51\u7ad9\u89c2\u5bdf\u6c47\u7f16\u540e\u6211\u4eec\u53d1\u73b0,\u5f53\u6211\u4eec\u542f\u7528<code>O3</code>\u7f16\u8bd1\u7f16\u8bd1\u5668\u4f1a\u5e2e\u6211\u4eec\u81ea\u52a8\u5411\u91cf\u5316\u548c\u5faa\u73af\u5c55\u5f00\u3002\u6545\u4e0d\u518d\u6b21\u4f18\u5316\u3002</p> <p></p>"},{"location":"ZJU_CS/HPC/homework/lab4/#profile","title":"Profile","text":"<p>\u8fd9\u4e2a\u677f\u5757\u5efa\u8bae\u4e0b\u8f7d\u6210\u672c\u5730\u7684\u5206\u6790\u8f6f\u4ef6\uff0c\u975e\u5e38\u4fbf\u6377\u7684\u5c31\u80fd\u5b8c\u6210\u5206\u6790\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab4/#intel_trace_analyzer","title":"Intel trace analyzer","text":"<p>\u7a0b\u5e8f\u5728MPI\u4e2d\u603b\u8017\u65f648.7s\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u89c2\u5bdf\u5230\uff0c\u5728\u6211\u7684\u7a0b\u5e8f\u7248\u672c\u4e2d\uff0cMPI Calls\u7684\u65f6\u95f4\u8fd8\u662f\u8fc7\u957f\u4e86\uff0c\u5177\u4f53\u5206\u6790\u540e\u5f97\u5230\u5177\u4f53\u6570\u636e\uff1a</p> <p></p> <p>\u8017\u65f6\u6700\u957f\u7684\u4e09\u4e2a\u51fd\u6570\u662f\uff1a<code>MPI_Allreduce</code> <code>MPI_Allgatherv</code> <code>MPI_Bcast</code></p> <p>\u7531\u6b64\u6211\u4eec\u770b\u5230\uff0c\u5728\u6211\u7684\u4ee3\u7801\u4e2d\uff0cAllreduce\u6240\u5360\u7528\u7684\u65f6\u95f4\u592a\u591a\u3002\u5206\u6790\u6765\u770b\u4e3b\u8981\u662f\u5728\u505adot\u8fd0\u7b97\u65f6\u6211\u4f1a\u8ba9\u4e0d\u540c\u7684\u8282\u70b9\u53bb\u505a\u4e0d\u540c\u5411\u91cf\u7247\u6bb5\u7684\u8ba1\u7b97\u540ereduce\u3002\u7ecf\u8fc7\u4e4b\u540e\u7684\u8ba1\u7b97\u5206\u6790\uff0c\u5f88\u53ef\u80fd\u4f7f\u7528Allreduce\u7684\u4ee3\u4ef7\u4f1a\u5927\u4e8e\u5176\u5e26\u7ed9\u6211\u4eec\u7684\u597d\u5904\u3002</p> <p>\u6b64\u5916AllGatherv\u7684\u5f00\u9500\u662f\u4ee4\u6211\u6ca1\u6709\u60f3\u5230\u7684\uff0c\u5728\u8fd9\u91cc\u4e3b\u8981\u7684\u4ee3\u4ef7\u5728\u4e8eA_dot_p\u6240\u4f7f\u7528\u7684\u5206\u5757\u8ba1\u7b97\u7684\u96c6\u5408\uff0c\u6211\u8ba4\u4e3a\u6b64\u5904\u7684\u65f6\u95f4\u635f\u5931\u5b8c\u5168\u53ef\u4ee5\u4ece\u4ee3\u7801\u8bbe\u8ba1\u4e0a\u6240\u907f\u514d\uff0c\u4f46\u7531\u4e8e\u5047\u671f\u5185\u5e76\u6ca1\u592a\u5408\u7406\u5b89\u6392\u81ea\u5df1\u7684\u65f6\u95f4\u5bfc\u81f4\u6240\u5269\u65f6\u95f4\u8f83\u5c11\uff0c\u65e0\u6cd5\u5728\u8fd9\u4e2a\u65b9\u9762\u8fdb\u884c\u8fdb\u4e00\u6b65\u7684\u4f18\u5316\u4e86\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab4/#vtune","title":"Vtune","text":"<p>\u4f7f\u7528Vtune\u6211\u4eec\u53ef\u4ee5\u89c2\u5bdf\u7a0b\u5e8f\u4e2d\u7684\u4e00\u4e9b\u6c47\u7f16\u4ee3\u7801\u4ee5\u53ca\u51fd\u6570\u6267\u884c\u7684\u65f6\u673a\u3002\u6211\u4eec\u53d1\u73b0\u5728\u6211\u7684\u7a0b\u5e8f\u4e2d\u8bbe\u8ba1\u7684\u5e76\u884c\u6027\u8f83\u9ad8\uff0c\u4f46MPI\u51fd\u6570\u7684\u65f6\u95f4\u635f\u5931\u8fd8\u662f\u8fc7\u591a\u4e86\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab4/#bonus","title":"Bonus","text":"<p>\u5173\u4e8ebonus\u7684Fortran\u90e8\u5206\uff0c\u7531\u4e8e\u65f6\u95f4\u539f\u56e0\u52a0\u4e0a\u4e2a\u4eba\u5b89\u6392\u3002\u81ea\u5df1\u6ca1\u6709\u592a\u591a\u65f6\u95f4\u5b8c\u6574\u5b66\u4e60Fortran\u8bed\u8a00\uff0c\u4e5f\u4e0d\u60f3chatgpt\u968f\u4fbf\u66f4\u6539\uff0c\u6545\u518d\u6ca1\u5b8c\u6210\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab4/#discussion","title":"Discussion","text":"<p>\u901a\u8fc7\u672c\u6b21\u5b9e\u9a8c\uff0c\u81ea\u5df1\u5b8c\u6574\u7f16\u5199\u4e86MPI\u7684\u7a0b\u5e8f\uff0c\u719f\u6089\u4e86\u5206\u5e03\u5f0f\u7f16\u7a0b\u7684\u7279\u6027\u4ee5\u53cadebug\u7684\u65b9\u6cd5\uff0c\u4e86\u89e3\u4e86\u4e0d\u540cMPI\u7f16\u8bd1\u5668\u4e4b\u95f4\u7684\u5dee\u5f02\u3002</p> <p>\u4e0e\u6b64\u540c\u65f6\uff0c\u81ea\u5df1\u5b66\u4e60\u4e86intelMPI profile\u4e2d\u6240\u4f7f\u7528\u5230\u7684\u4e00\u4e9b\u5de5\u5177\u4ee5\u53ca\u65b9\u6cd5\uff0c\u4ece\u800c\u66f4\u52a0\u719f\u7ec3\u7684\u7f16\u5199\u4e0e\u6539\u8fdb\u7a0b\u5e8f\u3002\u4e5f\u7ed9\u81ea\u5df1\u5bf9HPC\u6709\u4e86\u66f4\u6df1\u7684\u4e86\u89e3\u3002</p>"},{"location":"ZJU_CS/HPC/homework/lab5/","title":"Lab-5 AI\u76f8\u5173","text":"<ul> <li>Lab-5 AI\u76f8\u5173<ul> <li>Lab Description</li> <li>Introduction Knowledge(\u53ef\u4ee5\u8df3\u8fc7\u4e0d\u770b)</li> <li>Lab Design &amp; Test Result<ul> <li>LeNet<ul> <li>Environment</li> <li>Optimizer</li> <li>Learing Rate</li> <li>GPU Occupation</li> <li>Tensorboard</li> </ul> </li> <li>GELU<ul> <li>Python</li> </ul> </li> <li>C++</li> </ul> </li> <li>Bonus<ul> <li>\u591a\u5361\u8bad\u7ec3</li> <li>\u6df7\u5408\u7cbe\u5ea6</li> </ul> </li> <li>Discussion</li> </ul> </li> </ul>"},{"location":"ZJU_CS/HPC/homework/lab5/#lab_description","title":"Lab Description","text":"<ol> <li>\u4f7f\u7528 <code>PyTorch</code> \u5b9e\u73b0\u6700\u57fa\u672c\u7684\u5377\u79ef\u795e\u7ecf\u7f51\u7edc LeNet-5\uff0c\u5e76\u5728 MNIST \u6570\u636e\u96c6\u4e0a\u4f7f\u7528 GPU \u8fdb\u884c\u8bad\u7ec3\uff0c\u5e76\u5bf9\u6d4b\u8bd5\u96c6\u8fdb\u884c\u6d4b\u8bd5\u3002</li> <li>\u7f16\u5199 <code>GELU</code> \u7b97\u5b50\uff0c\u5e76\u5728 LeNet-5 \u4e2d\u4f7f\u7528\u8be5\u7b97\u5b50\uff0c\u9a8c\u8bc1\u5176\u6b63\u786e\u6027\u3002</li> <li>\u4f60\u9700\u8981\u63d0\u4ea4\uff1a</li> <li>\u5168\u90e8\u4ee3\u7801</li> <li>\u5b9e\u9a8c\u62a5\u544a\uff0c\u5176\u4e2d\u9700\u8981\u5305\u542b\uff1a<ol> <li>\u7b80\u8981\u5b9e\u9a8c\u8fc7\u7a0b</li> <li>\u8d34\u4e0a\u8bad\u7ec3\u8fc7\u7a0b\u7684 GPU \u5360\u7528\u7387\u622a\u56fe\uff08\u4f7f\u7528 <code>nvidia-smi</code> \u67e5\u770b\uff09</li> <li>Tensorboard \u6a21\u578b\u7684\u635f\u5931\u66f2\u7ebf\u3001LeNet-5 \u7684\u51c6\u786e\u7387\u66f2\u7ebf\u7b49\u622a\u56fe</li> <li>\u5bf9\u4e8e LeNet-5\uff0c\u4f60\u9700\u8981\u5199\u660e\u6d4b\u8bd5\u96c6\u4e0a\u7684\u8bc6\u522b\u6b63\u786e\u7387</li> <li>\u5bf9\u4e8e Bonus\uff0c\u4f60\u9700\u8981\u5199\u660e\u8bad\u7ec3\u65f6\u95f4\u3001\u52a0\u901f\u7b56\u7565\u3001\u52a0\u901f\u6548\u679c</li> </ol> </li> </ol>"},{"location":"ZJU_CS/HPC/homework/lab5/#introduction_knowledge","title":"Introduction Knowledge(\u53ef\u4ee5\u8df3\u8fc7\u4e0d\u770b)","text":"<ol> <li>GELU\u4ecb\u7ecd</li> <li>\u795e\u7ecf\u7f51\u7edc\u57fa\u7840</li> <li>3b1b\u7684\u89c6\u9891\u5f88\u6709\u542f\u53d1\u610f\u4e49\uff01</li> </ol>"},{"location":"ZJU_CS/HPC/homework/lab5/#lab_design_test_result","title":"Lab Design &amp; Test Result","text":""},{"location":"ZJU_CS/HPC/homework/lab5/#lenet","title":"LeNet","text":""},{"location":"ZJU_CS/HPC/homework/lab5/#environment","title":"Environment","text":"<p>\u672c\u6b21\u5b9e\u9a8c\u6211\u9009\u62e9\u4f7f\u7528conda\u81ea\u5df1\u7ba1\u7406\u73af\u5883\u3002\u4f7f\u7528salloc\u7684\u65b9\u6cd5\u57282080Ti\u4e0a\u5b8c\u6210\u5b9e\u9a8c\u3002</p> <pre><code>conda create -n mytorch python=3.10\nconda activate mytorch\nconda install pytorch torchvision tensorboard -c pytorch -c nvidia\n# conda deactivate\n</code></pre>"},{"location":"ZJU_CS/HPC/homework/lab5/#optimizer","title":"Optimizer","text":"<p>Adam \u4f18\u5316\u5668\u4f1a\u6bd4SGD\u6548\u7387\u9ad8\u5f88\u591a\uff0c\u51c6\u786e\u7387\u4e5f\u4f1a\u9ad8\u5f88\u591a</p>"},{"location":"ZJU_CS/HPC/homework/lab5/#learing_rate","title":"Learing Rate","text":"<p>\u901a\u8fc7\u5b9e\u9a8c\u8bb0\u5f55\u6211\u4eec\u53ef\u4ee5\u770b\u5230\u5982\u679c\u5b66\u4e60\u7387\u4e3a0.002\u65f6\u53cd\u800c\u6d4b\u8bd5\u7ed3\u679c\u4e0d\u7406\u60f3\u3002\u6700\u540e\u9009\u62e90.001</p>"},{"location":"ZJU_CS/HPC/homework/lab5/#gpu_occupation","title":"GPU Occupation","text":"<p>\u5927\u7ea6\u9700\u898130s\u5de6\u53f3GPU\u5360\u7528\u8fbe\u5230\u5cf0\u503c\uff0c\u5927\u7ea6\u7ef4\u6301\u57281098Mib\u3002</p> <p></p>"},{"location":"ZJU_CS/HPC/homework/lab5/#tensorboard","title":"Tensorboard","text":"<p>\u4f7f\u7528<code>ssh -L 16006:127.0.0.1:6006 dzz@clusters.zju.edu.cn -p 80</code>\uff0c\u4f46\u662f\u5728H248\u4e0a\u4f7f\u7528tensorboard\uff0c\u7136\u540e\u518d\u5728\u672c\u5730\u8bbf\u95ee http://127.0.0.1:16006/\uff0c\u65e2\u53ef\u4ee5\u770b\u5230\u9875\u9762\u3002</p> <p></p> <p></p> <pre><code>[Epoch 1, Batch 200] loss: 0.681\n[Epoch 1, Batch 400] loss: 0.171\n[Epoch 1, Batch 600] loss: 0.117\n[Epoch 1, Batch 800] loss: 0.092\n[Epoch 2, Batch 200] loss: 0.076\n[Epoch 2, Batch 400] loss: 0.063\n[Epoch 2, Batch 600] loss: 0.060\n[Epoch 2, Batch 800] loss: 0.058\n[Epoch 3, Batch 200] loss: 0.052\n[Epoch 3, Batch 400] loss: 0.050\n[Epoch 3, Batch 600] loss: 0.048\n[Epoch 3, Batch 800] loss: 0.045\n[Epoch 4, Batch 200] loss: 0.035\n[Epoch 4, Batch 400] loss: 0.039\n[Epoch 4, Batch 600] loss: 0.037\n[Epoch 4, Batch 800] loss: 0.037\n[Epoch 5, Batch 200] loss: 0.028\n[Epoch 5, Batch 400] loss: 0.032\n[Epoch 5, Batch 600] loss: 0.030\n[Epoch 5, Batch 800] loss: 0.029\n[Epoch 6, Batch 200] loss: 0.021\n[Epoch 6, Batch 400] loss: 0.026\n[Epoch 6, Batch 600] loss: 0.033\n[Epoch 6, Batch 800] loss: 0.029\n[Epoch 7, Batch 200] loss: 0.018\n[Epoch 7, Batch 400] loss: 0.020\n[Epoch 7, Batch 600] loss: 0.022\n[Epoch 7, Batch 800] loss: 0.022\n[Epoch 8, Batch 200] loss: 0.019\n[Epoch 8, Batch 400] loss: 0.018\n[Epoch 8, Batch 600] loss: 0.019\n[Epoch 8, Batch 800] loss: 0.018\n[Epoch 9, Batch 200] loss: 0.017\n[Epoch 9, Batch 400] loss: 0.014\n[Epoch 9, Batch 600] loss: 0.017\n[Epoch 9, Batch 800] loss: 0.015\n[Epoch 10, Batch 200] loss: 0.011\n[Epoch 10, Batch 400] loss: 0.016\n[Epoch 10, Batch 600] loss: 0.017\n[Epoch 10, Batch 800] loss: 0.019\nAccuracy on the test set: 99.02%\n</code></pre>"},{"location":"ZJU_CS/HPC/homework/lab5/#gelu","title":"GELU","text":""},{"location":"ZJU_CS/HPC/homework/lab5/#python","title":"Python","text":"<pre><code>import torch\nimport math\nimport torch.nn.functional as F\nfrom torch.autograd import Function\n\n\nclass MyGELUFunction(Function):\n    @staticmethod\n    def forward(ctx, input):\n        output = input * 0.5 * (1 + torch.erf(input / math.sqrt(2)))\n        ctx.save_for_backward(input,output)\n        return output\n\n    @staticmethod\n    def backward(ctx, grad_output):\n        input, output = ctx.saved_tensors\n        grad_input = grad_output * (0.5 * (1 + torch.erf(input / math.sqrt(2))) + input * torch.exp(-(input)**2 / 2) / math.sqrt(2) / math.sqrt(math.pi))\n        return grad_input\n</code></pre> <p>\uff08\u63a8\u5bfc\u8fc7\u7a0b\u53ef\u4ee5\u89c1 Introduction Knowledge\uff09</p> <p>\u5b9e\u9a8c\u7ed3\u679c\uff1a</p> <p></p> <p>\u7531\u4e8e\u6d6e\u70b9\u7cbe\u5ea6\u7684\u95ee\u9898\uff0c\u8be5\u8bef\u5dee\u53ef\u4ee5\u5ffd\u7565\u4e0d\u8bb0\u4e86\u3002\uff08\u5df2\u6253\u5370grad\u5f20\u91cf\u6bd4\u8f83\u8fc7\uff09</p>"},{"location":"ZJU_CS/HPC/homework/lab5/#c","title":"C++","text":"<p>\u540c\u6837\u7684\uff0c\u6211\u4eec\u9605\u8bfb\u5b98\u7f51\u8d44\u6599\uff0c\u901a\u8fc7\u6b63\u5e38\u7684\u6539\u5199c++\u4ee3\u7801\u5373\u53ef\u5b8c\u6210\u8be5\u6a21\u5757\u3002\u6ce8\uff1a\u6b64\u5904\u6211\u4f7f\u7528\u7684\u662fJIT\u52a8\u6001\u7f16\u8bd1\u3002</p> <p>\u5176\u4e2dgelu.cpp\u5185\u5bb9\u5982\u4e0b\uff1a</p> <pre><code>#include &lt;torch/torch.h&gt;\ntorch::Tensor gelu_fwd(torch::Tensor input){\n    return input * torch::sigmoid(1.702*input);\n}\n\ntorch::Tensor gelu_bwd(torch::Tensor grad_out, torch::Tensor input){\n    auto tmp = torch::sigmoid(1.702*input);\n    return grad_out * (tmp+1.702*input*tmp*(1.0-tmp));\n}\n\nPYBIND11_MODULE(TORCH_EXTENSION_NAME, m){\n    m.def(\"forward\", &amp;gelu_fwd, \"GELU forward\"); \n    m.def(\"backward\", &amp;gelu_bwd, \"GELU backward\");\n}\n</code></pre> <p></p> <p></p>"},{"location":"ZJU_CS/HPC/homework/lab5/#bonus","title":"Bonus","text":"<p>\u901a\u8fc7\u5728\u57fa\u51c6\u4ee3\u7801\u4e0a\u7f16\u5199\uff0c\u5b9e\u9a8c\u57fa\u672c\u7ed3\u679c\u5982\u4e0b\uff08loss\u9ad8\u7684\u5413\u4eba\uff09</p> <p></p>"},{"location":"ZJU_CS/HPC/homework/lab5/#_1","title":"\u591a\u5361\u8bad\u7ec3","text":"<p>\u5f53\u6211\u4f7f\u7528lightning\u91cd\u6784\u591a\u5361\u8bad\u7ec3\u6a21\u578b\u540e\uff0c\u7531\u4e8e\u672a\u77e5\u539f\u56e0\uff08\uff1f\u53ef\u80fd\u662f0\u663e\u5361\u672a\u542f\u7528)\u5bfc\u81f4\u8bad\u7ec3\u65f6\u95f4\u660e\u663e\u53d8\u6162\u4e86</p> <p></p> <p></p>"},{"location":"ZJU_CS/HPC/homework/lab5/#_2","title":"\u6df7\u5408\u7cbe\u5ea6","text":"<p>\u6839\u636e\u7f16\u8bd1\u5668\u7684\u63d0\u793a\uff0c\u6211\u4eec\u66f4\u6539\u4ee3\u7801\uff1a</p> <pre><code>if __name__ == '__main__':\n    torch.set_float32_matmul_precision('medium')\n    main()\n</code></pre> <p></p>"},{"location":"ZJU_CS/HPC/homework/lab5/#discussion","title":"Discussion","text":"<p>\u901a\u8fc7\u672c\u6b21\u5b66\u4e60\uff0c\u81ea\u5df1\u4e3a\u4e86\u80fd\u6709\u66f4\u592f\u5b9e\u7684\u57fa\u7840\uff0c\u5b66\u4e60\u4e86\u7ecf\u5178\u7684CS50\u8bfe\u7a0b\uff0c\u4e24\u5c4a\u4e86\u795e\u7ecf\u7f51\u7edc\u7684\u57fa\u672c\u6846\u67b6\u3002\u901a\u8fc7\u5bf9PyTorch\u5b98\u7f51\u8d44\u6599\u7684\u9605\u8bfb\uff0c\u4ee5\u53ca\u4f18\u5316\u8fc7\u7a0b\u4e2d\u5bf9PyTorch-Lightning\u7684\u4f7f\u7528\uff0c\u80fd\u591f\u7f16\u5199\u7b80\u5355\u7684\u795e\u7ecf\u7f51\u7edc\uff0c\u4e3a\u81ea\u5df1\u672a\u6765\u7684\u5b66\u4e60\u6709\u542f\u53d1\u6027\u610f\u4e49\u5e76\u6253\u4e0b\u826f\u597d\u57fa\u7840\u3002</p> <p>\u5176\u4e2d\u5bf9GELU\u7b97\u5b50\u7684\u7f16\u5199\uff0c\u4e5f\u4e3a\u6211\u6253\u5f00\u4e86MLSys\u7684\u5927\u95e8\uff0c\u4e86\u89e3\u4e86\u5982\u4f55\u5c06c\u52a0\u8f7d\u5982python\u4e2d\uff08\u4e3a\u4e86\u63d0\u5347\u6548\u7387\uff09\uff0c\u5e0c\u671b\u81ea\u5df1\u672a\u6765\u80fd\u5728\u8fd9\u4e2a\u611f\u5174\u8da3\u7684\u9886\u57df\u6709\u6240\u7814\u7a76\u3002</p> <p>ps\uff1abonus\u90e8\u5206\u7531\u4e8e\u4e2a\u4eba\u65f6\u95f4\u539f\u56e0\uff08\u6700\u8fd1\u8fd9\u6bb5\u65f6\u95f4\u5bb6\u4e2d\u6709\u4e9b\u4e8b\u60c5\uff09\uff0c\u6709\u90e8\u5206\u4f18\u5316\u65b9\u6cd5\u672a\u5b8c\u6574\u4f7f\u7528\uff0c\u8fd8\u8bf7\u52a9\u6559\u8c05\u89e3\u3002</p>"},{"location":"ZJU_CS/OS/","title":"\u64cd\u4f5c\u7cfb\u7edf\u539f\u7406\u4e0e\u5b9e\u8df5","text":"<p>Abstract</p> <p>\u6d59\u6c5f\u5927\u5b66 \u201c\u64cd\u4f5c\u7cfb\u7edf\u539f\u7406\u4e0e\u5b9e\u8df5\u201d \u8bfe\u7a0b\u53ca\u76f8\u5173\u77e5\u8bc6\u7b14\u8bb0  </p> <ul> <li>\u8001\u5e08: \u7533\u6587\u535a</li> <li>\u52a9\u6559: Xingkai Wang, Ruorong Guo, Zichen Zhao, Ganhao Chen</li> <li>\u5b9e\u9a8c\u7f51\u5740\uff1ahttps://zju-sec.github.io/os24fall-stu/lab0/</li> <li>\u666e\u901a\u73edyuque\u6307\u5bfc\uff1ahttps://yuque.zju.edu.cn/ytqfu3/mgf5fz/gfkr8r</li> </ul>"},{"location":"ZJU_CS/OS/chap01/","title":"Chap01 | OS Structures","text":"Abstract <ul> <li>Operating System Services</li> <li>User and Operating System-Interface</li> <li>System Calls</li> <li>System Services</li> <li>Linkers and Loaders</li> <li>Why Applications are Operating System Specific</li> <li>Operating-System Design and Implementation</li> <li>Operating System Structure</li> <li>Building and Booting an Operating System</li> <li>Operating System Debugging</li> </ul> <p>linux \u6e90\u7801\u89e3\u8bfb</p>"},{"location":"ZJU_CS/OS/chap01/#operating_system_services","title":"Operating System Services","text":"<p>A View of Operating System Services</p> <p>\u7ea2\u8272\u90e8\u5206\u662f helpful to user, \u84dd\u8272\u90e8\u5206\u662f better efficiency/operation. </p> <p>User Operating System Interface</p> <ul> <li>CLI Comand Line Interface<ul> <li>shells</li> </ul> </li> <li>GUI User-friendly desktop metaphor interface</li> </ul>"},{"location":"ZJU_CS/OS/chap01/#system_calls","title":"System Calls","text":"<p>Programming interface to the services provided by the OS \u7528\u6237\u7a7a\u95f4\u8fdb\u5165\u5185\u6838\u7684\u63a5\u53e3 interface.  </p> <p>\u7528\u6765\u505a<code>privileged operations</code>\uff0c\u6bd4\u5982 <code>I/O</code>\uff0c<code>memory management</code>\uff0c<code>process management</code>\uff0c<code>file management</code>\uff0c<code>communication</code>\uff0c<code>protection</code>\u3002</p> <p>\u4e00\u822c\u7528\u9ad8\u7ea7\u8bed\u8a00\u7f16\u5199\uff0c\u79f0\u4e3a API(Application Programming Interface) e.g. Win32 API, POSIX API(for Unix, Linux, Mac OSX), Java API(for JVM)</p>"},{"location":"ZJU_CS/OS/chap01/#example_of_system_call_-_write","title":"Example of System Call - <code>write</code>","text":"<p><code>unist</code>: Unix Standard <code>printf</code> \u662f <code>write</code> (system call) \u7684\u4e00\u4e2a wrapper\u3002\u8fd9\u91cc\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7 <code>man 2 write</code> \u67e5\u770b\u7cfb\u7edf\u8c03\u7528\u7684\u7528\u6cd5\uff082 \u8868\u793a\u67e5\u8be2\u7cfb\u7edf\u8c03\u7528\uff09 <pre><code>ssize_t write(int fd, const void *buf, size_t count);\n</code></pre></p> <ul> <li><code>fd=1</code> \u8868\u793a\u6807\u51c6\u8f93\u51fa\u3002</li> <li><code>buf</code> \u662f\u8981\u8f93\u51fa\u7684\u5185\u5bb9\uff0c\u6307\u5411 <code>hello world\\n</code> \u8fd9\u4e2a\u5b57\u7b26\u4e32\u9996\u5730\u5740\u3002</li> <li><code>count=13</code> \u662f\u8981\u8f93\u51fa\u7684\u5b57\u8282\u6570\uff08\u5305\u542b\u4e86 <code>\\n</code>\uff09</li> </ul> <p>\u53ef\u4ee5\u770b\u5230\uff0c<code>write</code> \u7684\u7cfb\u7edf\u8c03\u7528\u53f7\u4e3a 1\u3002  </p> <p><code>objdump -d</code> \u7ffb\u8bd1\u6210\u6c47\u7f16\u53ef\u4ee5\u770b\u5230\uff0c<code>main</code> \u91cc\u4f1a\u8c03\u7528 <code>__libc_write</code>\u3002</p> <p>\u5728 <code>__libc_write</code> \u91cc\u4f1a\u5c06 1\uff08\u7cfb\u7edf\u8c03\u7528\u53f7\uff09\u632a\u5230\u5bc4\u5b58\u5668 <code>%eax</code> \u91cc\u968f\u540e\u8c03\u7528\u4e86 <code>syscall</code> \u6307\u4ee4\uff0c\u8df3\u5230 kernel space\uff0c\u5e76\u4e14\u5207\u6362 mode\u3002  </p> <p>\u5728 kernel \u7a7a\u95f4\uff0c</p> <ul> <li>\u8c03\u7528 <code>kernel_entry</code> \u6765\u4fdd\u62a4\u5bc4\u5b58\u5668\u3002</li> <li>\u4ece syscall_table \u91cc\u62ff\u5230\u51fd\u6570\u6307\u9488\uff0c\u8df3\u5230 <code>write</code> \u7684\u5904\u7406\u7a0b\u5e8f\u3002<ul> <li>syscall_table \u662f\u4e00\u4e2a array\uff0c\u7cfb\u7edf\u8c03\u7528\u53f7\u4f5c\u4e3a index\uff0c\u901a\u8fc7 index \u53d6\u5bf9\u5e94\u7cfb\u7edf\u8c03\u7528\u7684\u51fd\u6570\u6307\u9488\u3002</li> </ul> </li> <li>\u5199\u5b8c\u540e\u8c03\u7528 <code>ret_to_user</code>\u3002<ul> <li>\u6062\u590d\u5bc4\u5b58\u5668</li> <li>\u8fd4\u56de\u5230 user\u3002</li> </ul> </li> </ul> <p>The caller need know nothing about how the system call is implemented. \u7528\u6237\u4e0d\u9700\u8981\u77e5\u9053\u7cfb\u7edf\u8c03\u7528\u5177\u4f53\u5b9e\u73b0\uff0cOS \u5df2\u7ecf\u5b9e\u73b0\u597d\u4e86\u3002</p> <p>The Hidden Syscall Table</p> <p>ARM64 \u67b6\u6784\u7684 <code>sys.c</code>:  </p> <p>\u8fd9\u91cc\u6211\u4eec\u9700\u8981\u901a\u8fc7 C \u9884\u5904\u7406\u5f97\u5230\u5b8f\u5c55\u5f00\u7684\u6587\u4ef6\uff1a </p> <p><code>make</code> <code>.i</code> \u6587\u4ef6\u53ef\u4ee5\u5f97\u5230\u9884\u5904\u7406\u540e\u7684\u6587\u4ef6\u3002</p> <code>write</code> <p>\u5176\u5b9e <code>write</code> \u4e5f\u662f\u4e00\u4e2a wrapper\uff0c\u5c01\u88c5\u4e86\u5f88\u591a\u5c42\u3002\u5177\u4f53\u53ef\u4ee5\u542c\u8001\u5e08\u4e0a\u8bfe\u8bb2\u7684\u3002</p>"},{"location":"ZJU_CS/OS/chap01/#system_calls_1","title":"System Calls","text":"<p><code>strace</code></p> <p>On Linux there is a \u201ccommand\u201d called <code>strace</code> that gives details about which system calls were placed by a program during execution. <code>strace</code>: system call trace. e.g. <code>strace cp main.c main</code> \u53ef\u4ee5\u770b\u5230\u6211\u4eec\u8c03\u7528 <code>cp main.c main</code> \u65f6\uff0c\u8c03\u7528\u4e86\u54ea\u4e9b\u7cfb\u7edf\u8c03\u7528\u3002 \u53ef\u4ee5\u7528 <code>strace</code> \u77e5\u9053\u6211\u4eec\u7684\u7a0b\u5e8f\u8c03\u7528\u4e86\u4ec0\u4e48\u7cfb\u7edf\u8c03\u7528\u4e4b\u540e\u51fa\u95ee\u9898\u3002</p> <p><code>time</code></p> <p><code>time</code> \u53ef\u4ee5\u8f93\u51fa real, user, sys \u7684\u65f6\u95f4\u3002\uff08real \u8868\u793a\u65f6\u949f\u7684\u65f6\u95f4\uff09 \u6709\u65f6 user \u548c sys \u662f\u591a\u8fdb\u7a0b\u540c\u65f6\u8fdb\u884c\uff0c\u6240\u4ee5\u52a0\u8d77\u6765\u7684\u65f6\u95f4\u6bd4\u65f6\u949f\u7684\u65f6\u95f4\u957f\u3002</p> <p><code>ag</code></p> <p>silver searcher\uff0c\u6bd4 <code>grep</code> \u66f4\u5feb\u3002</p>"},{"location":"ZJU_CS/OS/chap01/#system_call_parameter_passing","title":"System Call Parameter Passing","text":"<p>\u4f20\u53c2\uff0c\u5982\u679c\u53c2\u6570\u5c0f\uff0c\u76f4\u63a5\u653e\u5728\u5bc4\u5b58\u5668\u91cc\uff1b\u5426\u5219\u53ef\u4ee5\u628a\u5730\u5740\u653e\u5728\u5bc4\u5b58\u5668\u91cc\uff0c\u901a\u8fc7\u5730\u5740\u8bbf\u95ee\u3002</p>"},{"location":"ZJU_CS/OS/chap01/#types_of_system_calls","title":"Types of System Calls","text":"<ul> <li>Process control create process, terminate process; end, abort; </li> <li>File management</li> <li>Device management</li> <li>Information maintenance</li> <li>Communications</li> <li>Protection</li> </ul>"},{"location":"ZJU_CS/OS/chap01/#linkers_and_loaders","title":"Linkers and Loaders","text":"<p>\u4ece <code>.c</code> \u6587\u4ef6\u5230 <code>.o</code> \u6587\u4ef6\u7ecf\u8fc7\u4e86\u4e0b\u9762\u7684\u6d41\u7a0b\uff1a</p> <ul> <li>\u9884\u5904\u7406 <code>cpp main.c -o main.i</code></li> <li>\u7f16\u8bd1 <code>gcc -S main.i -o main.s</code></li> <li>\u6c47\u7f16 <code>as main.s -i main.o</code> </li> </ul> <p>\u600e\u4e48\u751f\u6210 main\uff1f\u5982\u4f55\u628a main \u52a0\u8f7d\u5230\u5185\u5b58\u91cc\u6267\u884c\uff1f</p> <p>Linker combines these into single binary executable file. Loader loads executable file into memory and starts execution.</p>"},{"location":"ZJU_CS/OS/chap01/#elf_binary_basics","title":"ELF binary basics","text":"<ul> <li>Executable and Linkable Format - ELF</li> <li>Section header &amp; Program header \u4e00\u4e2a\u7ed9 Linker \u7528\uff0c\u4e00\u4e2a\u7ed9 Loader \u7528\u3002</li> <li><code>.text</code>: code</li> <li><code>.rodata</code>: initialized read-only data</li> <li><code>.data</code>: initialized data</li> <li><code>.bss</code>: uninitialized data</li> </ul> <p><code>readelf</code></p> <p>static variables \u5728 <code>.data</code> \u6bb5\uff0cstatic const \u5728 <code>.rodata</code> \u6bb5\uff0cconst \u5728 <code>.data</code> \u6bb5\u3002 </p> <p>\u5b58\u6709\u6bcf\u4e2a\u6bb5\u7684\u8d77\u59cb\u5730\u5740\uff0c\u5927\u5c0f\uff0c\u6743\u9650\u7b49\u4fe1\u606f\u3002</p>"},{"location":"ZJU_CS/OS/chap01/#linking","title":"Linking","text":"<p>Linking \u5206\u4e3a static \u548c dynamic </p> <ul> <li>Static linking: All needed code is packed in single binary, leading to large binary  <ul> <li>\u628a\u6240\u6709\u7684\u4ee3\u7801\u90fd\u653e\u5230\u4e00\u4e2a\u4e8c\u8fdb\u5236\u6587\u4ef6\uff0c\u5927\u3002  </li> <li>\u6ca1\u6709 <code>.interp</code> \u6bb5</li> </ul> </li> <li>Dynamic linking: Reuse libraries to reduce ELF file size  <ul> <li>\u4ee3\u7801\u5206\u6563\u5728\u591a\u4e2a\u6587\u4ef6\uff0c\u8fd0\u884c\u65f6\u518d\u52a0\u8f7d\uff0c\u5c0f\u3002  </li> <li>\u6709 <code>.interp</code> \u6bb5\uff0c\u5b58\u7684\u662f loader\u3002</li> </ul> </li> </ul> <p>loader resolve symbols at runtime</p>"},{"location":"ZJU_CS/OS/chap01/#running_a_binary","title":"Running a binary","text":"<p>\u8fd0\u884c\u65f6\u7684\u5185\u5b58\u5e03\u5c40\uff1a</p> <p>ELF section \u88ab\u6620\u5c04\u5230\u5185\u5b58\u91cc\u9762\u7684\u4e0d\u540c segment\u3002 \u6ce8\u610f\u533a\u5206\u5806\u548c\u6808\uff0c\u5206\u914d\u6570\u636e\u65f6 stack \u5feb\uff0cheap \u6162\u3002</p> <ul> <li>who setup ELF files mapping?<ul> <li>Kernel</li> <li>exec syscall</li> </ul> </li> <li>who setup stack and heap?<ul> <li>Kernel</li> <li>exec syscall</li> </ul> </li> <li>who setups libraries?<ul> <li>Loader</li> <li>ld-xxx</li> </ul> </li> </ul> <ul> <li>text: r-xp </li> <li>r--p: rodatas</li> <li>rw-p: data</li> <li>.bss: uninitialized variables. \u7ed9\u4e00\u4e2a\u5168\u5c40\u53d8\u91cf\u4e0d\u7ed9\u503c\uff0c\u65e9\u671f\u7f16\u8bd1\u5668\u8bb0\u5f55\u5b83\u5728 <code>.bss</code> \u6bb5\u91cc\uff0c\u4f46\u6ca1\u6709\u5b9e\u9645\u7a7a\u95f4\uff0c\u6620\u5c04\u5230\u5185\u5b58\u65f6\u5c31\u521d\u59cb\u5316\u4e3a 0\u3002</li> <li>heap/stack \u533f\u540d\u6620\u5c04\uff0c\u6ca1\u6709\u4e00\u4e2a\u6587\u4ef6\u652f\u6301\u3002\u6620\u5c04\u4e3a\u53ef\u8bfb\u53ef\u5199\u3002</li> </ul>"},{"location":"ZJU_CS/OS/chap01/#running_a_binary_statically-linked","title":"Running a binary (Statically-linked)","text":"<p>\u9996\u5148\u6211\u4eec\u901a\u8fc7 <code>strace</code> \u67e5\u770b\u8fd0\u884c\u9759\u6001\u94fe\u63a5\u6587\u4ef6\u8fc7\u7a0b\u4e2d\u53d1\u751f\u7684\u7cfb\u7edf\u8c03\u7528\u3002</p> <ul> <li><code>execve</code> \u6267\u884c\u5bf9\u5e94\u8def\u5f84\u7684\u6587\u4ef6</li> <li><code>brk</code> \u6269\u5145\u6808</li> <li><code>write</code> \u6267\u884c\u7a0b\u5e8f\u91cc\u7684 <code>printf</code> \u529f\u80fd</li> </ul> <p>\u7cfb\u7edf\u5982\u4f55\u77e5\u9053\u6211\u4eec\u8981\u6267\u884c\u7684\u7a0b\u5e8f\u4ece\u54ea\u4e00\u884c\u5f00\u59cb\u6267\u884c\uff1f</p> <p>\u901a\u8fc7 entry point address! <code>sys_execve()</code> \u91cc\u6709 <code>load_elf_binary</code> \u51fd\u6570\uff0c\u4ece ELF \u5934\u8bfb\u5730\u5740\u5230 <code>elf_entry</code>\uff0c\u628a\u5730\u5740\u5f53\u4f5c <code>regs-&gt;pc</code>\u3002\u7136\u540e\u8c03\u7528 <code>start_thread</code> \u51fd\u6570\u3002</p> <p>ELF \u91cc\u6709 entry point address\uff08\u901a\u8fc7 <code>readelf -h</code>\uff09</p> <p>entry point address \u4e0d\u662f <code>main()</code> \u7684\u5730\u5740\uff0c\u800c\u662f <code>_start</code> \u7684\u5730\u5740\uff0c\u91cc\u9762\u4f1a\u8c03\u7528 <code>__libc_start_main</code> \u51fd\u6570\uff0c\u91cc\u9762\u624d\u8c03\u7528 <code>main()</code> \u51fd\u6570\u3002 <code>_start</code> \u662f\u5728\u8bfb\u53d6\u547d\u4ee4\u884c\u53c2\u6570\u5e76\u4e14\u4f20\u7ed9 <code>main</code>\u3002</p> <p><code>cat /proc/pid/maps</code> \u91cc\u53ef\u4ee5\u770b\u5230\u8fdb\u7a0b\u7684\u5185\u5b58\u6620\u5c04\u3002static \u7684\u6761\u76ee\u66f4\u5c11\uff0c\u56e0\u4e3a\u9700\u8981\u7684\u4e1c\u897f\u5df2\u7ecf\u6253\u5305\u5230 <code>a.static</code> \u5185\u4e86\uff0c\u4e0d\u9700\u8981\u5916\u90e8\u7684\u5e93\u3002\u800c dynamic \u9700\u8981\u5916\u90e8\u7684\u5e93\u3002</p> <p>Summary</p> <p></p>"},{"location":"ZJU_CS/OS/chap01/#running_a_binary_dynamically-linked","title":"Running a binary (Dynamically-linked)","text":"<p>\u76f8\u6bd4\u4e8e\u9759\u6001\u94fe\u63a5\uff0c\u52a8\u6001\u94fe\u63a5\uff1a</p> <ul> <li>\u9700\u8981\u4e00\u4e2a loader\u3002</li> <li>\u52a8\u6001\u94fe\u63a5\u7684\u5185\u5b58\u5e03\u5c40\u4e2d\u6761\u76ee\u66f4\u591a\u3002</li> <li>\u52a8\u6001\u94fe\u63a5\u7684\u7cfb\u7edf\u8c03\u7528\u6bd4\u9759\u6001\u7684\u591a\u3002</li> <li>\u52a8\u6001\u94fe\u63a5\u7684 entry point \u7684\u5730\u5740\u5f88\u5c0f\uff0c\u4e5f\u662f\u5bf9\u5e94 <code>_start</code> \u7684\u5730\u5740\uff0c\u91cc\u9762\u6709\u4e9b symbol \u8fd8\u6ca1\u6709\u88ab\u89e3\u6790\u3002</li> </ul> <p>\u7c7b\u4f3c\u5730\uff0c\u6211\u4eec\u5148\u901a\u8fc7 <code>strace</code> \u67e5\u770b\u8fd0\u884c\u52a8\u6001\u94fe\u63a5\u6587\u4ef6\u4e2d\u4f7f\u7528\u4e86\u54ea\u4e9b\u7cfb\u7edf\u8c03\u7528\u3002 \u53ef\u4ee5\u770b\u5230\u76f8\u6bd4\u4e8e\u9759\u6001\u94fe\u63a5\uff0c\u591a\u51fa\u6765\u7684\u7cfb\u7edf\u90fd\u7528\u90fd\u548c ld \u6709\u5173\uff0c\u5373 dynamic loader\u3002  </p> <p>\u52a8\u6001\u94fe\u63a5\u6709 <code>.interp</code> \u6bb5\uff0c\u5728 <code>load_elf_binary</code> \u51fd\u6570\u4e2d\u4f1a\u8d70\u53e6\u4e00\u4e2a\u5206\u652f\uff1aentry point \u4f1a\u6307\u5411 loader \u7684\u5730\u5740\u3002</p> <p>Summary</p> <p></p> <p>\u591a\u51fa\u6765\u7684\u7cfb\u7edf\u8c03\u7528\u662f\u4e3a\u4e86\u5148\u628a loader \u52a0\u8f7d\u8fdb\u6765\uff0cloader \u518d\u628a libc \u52a0\u8f7d\u3002 \u5185\u5b58\u5e03\u5c40\u91cc\u591a\u6620\u5c04\u7684\u6761\u76ee\u4e5f\u662f\u4e3a\u4e86\u7ed9 loader \u4f7f\u7528\u3002</p>"},{"location":"ZJU_CS/OS/chap01/#why_applications_are_operating_system_specific","title":"Why Applications are Operating System Specific","text":"<ul> <li>\u5f00\u53d1\u7684\u8f6f\u4ef6\u4e0d\u80fd\u76f4\u63a5\u8de8\u5e73\u53f0\u8c03\u7528\uff0c\u56e0\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u4e0d\u540c\u5bfc\u81f4\u7cfb\u7edf\u8c03\u7528\u4e0d\u540c\uff0c\u4e0b\u9762\u7684\u786c\u4ef6\u4e5f\u4e0d\u540c\u3002  <ul> <li>\u50cf Java \u5f00\u53d1\u7684\u8f6f\u4ef6\u53ef\u4ee5\uff0c\u56e0\u4e3a\u6709 JVM \u63d0\u4f9b\u4e86\u8de8\u7cfb\u7edf\u7684\u5e73\u53f0\u3002</li> </ul> </li> <li>Application Binary Interface (ABI) is architecture equivalent of API, defines how different components of binary code can interface for a given operating system on a given architecture, CPU, etc... Application Binary Interface (ABI) \u66f4\u8d34\u8fd1\u786c\u4ef6\u67b6\u6784</li> </ul>"},{"location":"ZJU_CS/OS/chap01/#operating-system_design_and_implementation","title":"Operating-System Design and Implementation","text":"<p>\u7b56\u7565 VS \u673a\u5236\uff1a</p> <ul> <li>Policy: What will be done?  </li> <li>Mechanism: How to do it?</li> </ul> <p>The separation of policy from mechanism. \u628a\u7b56\u7565\u548c\u673a\u5236\u5206\u5f00\u3002</p> The Door Example <p>\u6211\u4eec\u7684\u4e00\u4e2a\u7b56\u7565\uff1a\u53ea\u5141\u8bb8\u4e0a OS \u7684\u540c\u5b66\u8fdb\u5165\u66f9\u897f-201\u3002\u5bf9\u5e94\u7684\u5b9e\u73b0\uff08\u673a\u5236\uff09\u53ef\u4ee5\u662f\uff1a\u6211\u4eec\u505a\u4e00\u628a\u9501\uff0c\u7ed9 88 \u4e2a\u540c\u5b66\u90fd\u914d\u4e00\u628a\u3002\u4f46\u8fd9\u6837\u7684\u7b56\u7565\u5b58\u5728\u5f88\u591a\u88ab break \u7684\u53ef\u80fd\u3002\u53e6\u4e00\u4e2a\u673a\u5236\uff1a\u6bcf\u4e2a\u4eba\u51ed\u5b66\u751f\u5361/\u4eba\u8138\u8bc6\u522b\u8fdb\u5165\u3002</p>"},{"location":"ZJU_CS/OS/chap01/#implementation","title":"Implementation","text":"<p>\u5b8f\u5185\u6838\u91cc\u653e\u6709\u5f88\u591a driver\uff0c\u800c driver \u51fa\u95ee\u9898\uff0c\u76f4\u63a5\u5f71\u54cd\u5230 CPU \u7684 scheduler.    </p> <p>microkernel: Moves as much from the kernel into user space.  \u628a driver, file system... \u90fd\u653e\u5230 user space\uff0c\u53ea\u7559\u4e0b\u6700\u6838\u5fc3\u7684\u4e1c\u897f\u5728 kernel space. make linux map</p> <ul> <li>benefits: <ul> <li>Easier to extend a microkernel</li> <li>Easier to port the operating system to new architectures</li> <li>More reliable (less code is running in kernel mode)</li> <li>More secure</li> </ul> </li> <li>detriments: <ul> <li>Performance overhead of user space to kernel space communication  </li> </ul> </li> </ul> <p>Many modern operating systems implement loadable kernel modules (LKMs).  </p> <p>Operating-System Debugging</p> <p>Kernighan\u2019s Law: \u201cDebugging is twice as hard as writing the code in the first place. Therefore, if you write the code as cleverly as possible, you are, by definition, not smart enough to debug it.\u201d</p>"},{"location":"ZJU_CS/OS/chap02/","title":"Chap02 | Processes","text":"Abstract <ul> <li>Process Concept</li> <li>Process Control Block</li> <li>Process State<ul> <li>Process Creation</li> <li>Process Termination</li> <li>Process and Signal</li> </ul> </li> <li>Process Scheduling</li> </ul>"},{"location":"ZJU_CS/OS/chap02/#process_concept","title":"Process Concept","text":"<p>Process: a unit of resource allocation and protection  </p> <ul> <li>A process is a program in execution \u4e00\u4e2a\u5728\u6267\u884c\u7684\u7a0b\u5e8f\uff08ELF \u6587\u4ef6\uff09\uff0c\u8dd1\u8d77\u6765\u540e\u8981\u5206\u914d\u8d44\u6e90\uff08CPU\uff0c\u5185\u5b58\uff0cIO\uff09\uff0c\u5c31\u6210\u4e3a\u4e86\u4e00\u4e2a\u8fdb\u7a0b\u3002</li> <li>Multiple processes can be associated to the same program. \u4e00\u4e2a program \u53ef\u4ee5\u8fd0\u884c\u591a\u6b21\uff0c\u6bcf\u6b21\u8fd0\u884c\u90fd\u4ea7\u751f\u4e00\u4e2a\u65b0\u7684\u8fdb\u7a0b\u3002</li> <li>A running system consists of multiple processes.  </li> <li>\u201cjob\u201d and \u201cprocess\u201d are used interchangeably in OS texts.  </li> </ul> <p>Process includes\uff08\u5176\u4e2d\u524d\u56db\u9879\u5728 ELF \u4e2d\uff0c\u5806\u548c\u6808\u662f\u8fd0\u884c\u65f6\u7684\u4fe1\u606f\u5728 ELF \u4e4b\u5916\uff09</p> <ul> <li>code (also called the text) initially stored on disk in an executable file</li> <li>data section global variables (<code>.bss</code> and <code>.data</code> in x86 assembly)</li> <li>program counter points to the next instruction to execute (i.e., an address in the code)</li> <li>content of the processor\u2019s registers</li> <li>a stack</li> <li>a heap</li> </ul> <p>Memory Layout of a C Program</p> <p></p> <ul> <li><code>int x;</code> unitialized data, </li> <li><code>int y = 15;</code> initialized data <p>\u6ce8\u610f\u26a0\ufe0f\uff1aelf\u91cc\u7684data\u6bb5\u6570\u636e\u4e0d\u53d8\uff1b\u53d8\u7684\u662f\u5185\u5b58\u4e0a\u7684\u503c\u53d8\u5316\u3002</p> </li> <li>\u4e34\u65f6\u53d8\u91cf\u5728\u6808\u4e0a\uff0cmalloc \u5728\u5806\u4e0a\u3002</li> </ul> Tips <p>sp vs fp</p>"},{"location":"ZJU_CS/OS/chap02/#the_stack","title":"The Stack","text":"<p>\u6bcf\u4e2a\u51fd\u6570\u8fd0\u884c\u65f6\u90fd\u4f1a\u5206\u914d\u6808\u7684\u4e00\u90e8\u5206\uff0c\u5373\u4e00\u4e2a\u6808\u5e27 stack frame. </p> Simple Runtime Stack <p></p> <p>**\u5f15\u5165\u6808\u662f\u4e3a\u4e86\u89e3\u51b3\u51fd\u6570\u8c03\u7528\u7684\u95ee\u9898\u3002  **</p> <p>Any function needs to have some \u201cstate\u201d so that it can run. </p> <ul> <li>Parameters passed to it by whatever function called it</li> <li>Local variables</li> <li>The address of the instruction that should be executed once the function returns: the return address</li> <li>The value that it will return</li> </ul> <p>\u6808\u4ece\u4e0a\uff08\u9ad8\u5730\u5740\uff09\u5f80\u4e0b\uff08\u4f4e\u5730\u5740\uff09\uff0c\u5806\u4ece\u4e0b\u5f80\u4e0a\u3002\u5982\u679c\u78b0\u9762\u5c31\u53d1\u751f\u4e86\u6ea2\u51fa\u3002</p> <p>Runtime Stack Growth</p> <p>\u5982\u679c\u6211\u4eec\u8fd0\u884c\u4e00\u4e2a\u7a0b\u5e8f\u4e24\u6b21\uff0c\u5185\u5b58\u5e03\u5c40\u4e0d\u4e00\u5b9a\u76f8\u540c\u3002 </p> <p>stack \u548c heap \u79f0\u4e3a\u52a8\u6001\u5185\u5b58\uff0c\u76f8\u5f53\u4e8e\u662f OS \u7ed9\u8fdb\u7a0b\u7684\u4e24\u5f20\u8349\u7a3f\u7eb8\uff0c\u7528\u591a\u5c11\u53d6\u51b3\u4e8e\u5f53\u524d\u7684\u6267\u884c\u72b6\u6001\u3002</p>"},{"location":"ZJU_CS/OS/chap02/#process_control_block_pcb","title":"Process Control Block (PCB)","text":"<p>Each process has and only has a PCB. Information associated with each process. \u63a7\u5236\u5757\uff0c\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u6709\u4e14\u53ea\u6709\u4e00\u4e2a PCB. \u6574\u4e2a PCB \u5b58\u5728\u5185\u5b58\u91cc\u3002  </p> <ul> <li>Process state</li> <li>Program counter</li> <li>CPU registers</li> <li>CPU-scheduling information</li> <li>Memory-management information</li> <li>Accounting information</li> <li>I/O status information</li> </ul> <p>Represented by the C structure <code>task_struct</code>. </p> <p>\u6240\u6709\u7684 <code>task_struct</code> \u662f\u901a\u8fc7\u94fe\u8868\u4e32\u8d77\u6765\u7684\u3002</p> <p></p>"},{"location":"ZJU_CS/OS/chap02/#process_state","title":"Process State","text":"<p>As a process executes, it changes state</p> <ul> <li>New: The process is being created</li> <li>Running: Instructions are being executed</li> <li>Waiting: The process is waiting for some events to occur</li> <li>Ready: The process is waiting to be assigned to a processor</li> <li>Terminated: The process has finished execution</li> </ul>"},{"location":"ZJU_CS/OS/chap02/#process_creation","title":"Process Creation","text":"<p>A process may create new processes, in which case it becomes a parent.</p> <p>Each process has a pid (process ID).  </p> <ul> <li> <p>ppid refers to the parent\u2019s pid</p> Process Tree <p></p> </li> <li> <p>The child may inherit/share some of the resources of its parent, or may have entirely new ones. \u5b50\u8fdb\u7a0b\u7ee7\u627f\u7236\u8fdb\u7a0b\u7684\u8d44\u6e90\uff08\u5982\u6253\u5f00\u7684\u6587\u4ef6\uff09</p> </li> <li>A parent can also pass input to a child.  </li> <li>Upon creation of a child, the parent can either<ul> <li>continue execution, or</li> <li>wait for the child\u2019s completion</li> </ul> </li> <li>The child could be either<ul> <li>a clone of the parent (i.e., have a copy of the address space), or </li> <li>be an entirely new program</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap02/#the_fork_system_call","title":"The <code>fork()</code> System Call","text":"<p><code>fork()</code> creates a new process.   The child is is a copy of the parent, but</p> <ul> <li>It has a different pid (and thus ppid)</li> <li>Its resource utilization (so far) is set to 0</li> <li>**<code>fork()</code> returns the child\u2019s pid to the parent, and 0 to the child.  ** <code>fork</code> \u4f1a\u628a child \u7684 pid \u8fd4\u56de\u7ed9 parent\uff0c\u7ed9 child \u8fd4\u56de 0. implement</li> <li>Both processes continue execution after the call to <code>fork()</code></li> </ul> Example <p>What does the following code print? <pre><code>#include &lt;unistd.h&gt;\nint a = 12;\npid_t pid = fork();\nif (pid) { // PARENT\n    // ask the OS to put me in waiting\n    sleep(10);\n    fprintf(stdout,\u201da = %d\\n\u201d,a);\n    while (1);\n} else { // CHILD\n    a += 3;\n    while (1);\n}\n</code></pre> The answer should be 12. <code>fork</code> \u4e4b\u540e\u53d8\u91cf\u7684\u503c\u76f8\u540c\uff0c\u4f46\u5e76\u4e0d\u662f\u540c\u4e00\u4e2a\u53d8\u91cf\u3002\uff08\u76f8\u5f53\u4e8e\u4e00\u4efd\u62f7\u8d1d\uff09  </p> Example <p>How many processes does this C program create? <pre><code>int main (int argc, char *arg[])\n{\n    fork ();\n    if (fork ()) {\n        fork ();\n    }\n    fork (); \n}\n</code></pre> The answer should be 12.</p>"},{"location":"ZJU_CS/OS/chap02/#the_execve_system_call","title":"The <code>execve()</code> System Call","text":"<p><code>execve()</code> system call used after a <code>fork()</code> to replace the process\u2019 memory space with a new program. <code>execve()</code> \u4f1a\u628a\u4e4b\u524d\u7684\u8fdb\u7a0b\u8d44\u6e90\u5168\u90e8\u4e22\u6389\uff0c\u518d load \u65b0\u7684 binary\uff0c\u6620\u5c04\u65b0\u7684\u5185\u5b58\uff0c\u5206\u7684\u65b0\u7684\u5806\u548c\u6808\uff0c\u5e38\u63a5\u5728 <code>fork()</code> \u540e\u9762\u4f7f\u7528\u3002</p> <p>the pros and cons of <code>fork()</code></p> <ul> <li>Pros<ul> <li>\u7b80\u6d01\uff1a\u4e0d\u9700\u8981\u53c2\u6570</li> <li>\u5206\u5de5\uff1a<code>fork</code> \u642d\u8d77\u9aa8\u67b6\uff0c<code>exec</code> \u8d4b\u4e88\u7075\u9b42</li> <li>\u8054\u7cfb\uff1a\u4fdd\u6301\u8fdb\u7a0b\u4e0e\u8fdb\u7a0b\u4e4b\u95f4\u7684\u5173\u7cfb</li> </ul> </li> <li>Cons<ul> <li>\u590d\u6742\uff1a\u4e24\u4e2a\u7cfb\u7edf\u8c03\u7528</li> <li>\u6027\u80fd\u5dee</li> <li>\u5b89\u5168\u95ee\u9898</li> </ul> </li> <li>Clone syscal: fork + exec</li> </ul>"},{"location":"ZJU_CS/OS/chap02/#process_terminations","title":"Process Terminations","text":"<p>A process terminates itself with the <code>exit()</code> system call. \u8c03\u7528 exit \u540e\u7ec8\u6b62\u8fdb\u7a0b\uff0c\u91ca\u653e\u8d44\u6e90\u3002</p> <ul> <li>This call takes as argument an integer that is called the process\u2019s exit/return/error code.  </li> <li>All resources of a process are deallocated by the OS. <code>exit</code> \u7ec8\u6b62\u4e4b\u540e\u4f1a\u628a\u8d44\u6e90\u90fd\u91ca\u653e\u3002</li> <li>A process can cause the termination of another process.  <ul> <li>Using something called \u201csignals\u201d and the <code>kill()</code> system call</li> </ul> </li> <li>A parent can wait for a child to complete. <code>wait()</code> and <code>waitpid()</code></li> </ul>"},{"location":"ZJU_CS/OS/chap02/#processes_and_signals","title":"Processes and Signals","text":"<p>A process can receive signals. And each signal causes a default behavior in the process. e.g. \u5f53\u6211\u4eec\u60f3\u8981\u7ec8\u6b62\u4e00\u4e2a\u7a0b\u5e8f\u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u6572\u5165 <code>Ctrl+C</code>\uff0c\u8fd9\u76f8\u5f53\u4e8e\u5bf9\u5f53\u524d\u8fdb\u7a0b\u53d1\u9001\u4e86 <code>SIGINT</code> \u4fe1\u53f7\uff0c\u5c31\u4f1a\u7ec8\u6b62\u5f53\u524d\u8fdb\u7a0b\u3002</p> <p>Manipulating Signals</p> <ul> <li>The <code>signal()</code> system call allows a process to specify what action to do on a signal \u6211\u4eec\u53ef\u4ee5\u4fee\u6539\u6709\u4e9b\u4fe1\u53f7\u7684\u5904\u7406\u7a0b\u5e8f\u3002</li> <li>Signals like <code>SIGKILL</code> and <code>SIGSTOP</code> cannot be ignored or handled by the user, for security reasons</li> </ul>"},{"location":"ZJU_CS/OS/chap02/#zombie","title":"Zombie","text":"<p>When a child process terminates</p> <ul> <li>Remains as a zombie in an \u201cundead\u201d state.  </li> <li>Until it is \u201creaped\u201d (garbage collected) by the OS. \u4e00\u4e2a\u8fdb\u7a0b\u7ed3\u675f\u4e86\uff0c\u4f46\u4f9d\u7136\u8fd8\u5728\u5360\u7528\u8d44\u6e90\u3002\uff08\u4ed6\u53ef\u4ee5\u91ca\u653e\u81ea\u5df1\u7684\u8d44\u6e90\uff0c\u9664\u4e86 PCB \u662f\u4e0d\u80fd\u7531\u81ea\u5df1\u91ca\u653e\u7684\uff09</li> </ul> <p>Get rid of zombies: When a child exits, a <code>SIGCHLD</code> signal is sent to the parent. \u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u7ed9 <code>SIGCHILD</code> \u4fe1\u53f7\u52a0\u4e00\u4e2a handler\uff0c\u91cc\u9762\u8c03\u7528 <code>wait</code> \u6765\u56de\u6536\u8fdb\u7a0b\u3002</p>"},{"location":"ZJU_CS/OS/chap02/#orphans","title":"Orphans","text":"<p>An orphan process is one whose parent has died. \u5b50\u8fdb\u7a0b\u8fd8\u5728\u8fd0\u884c\u65f6\uff0c\u5b83\u7684\u7236\u8fdb\u7a0b\u7ec8\u6b62\u4e86\uff0c\u90a3\u4e48\u5b83\u5c31\u6210\u4e3a\u4e86\u4e00\u4e2a\u5b64\u513f\u8fdb\u7a0b\u3002</p> <p>pid 1 \u4f1a\u6536\u517b orphan\uff0c\u56e0\u6b64\u5b64\u513f\u8fdb\u7a0b\u4e0d\u4f1a\u6210\u4e3a zombie\u3002\uff08pid 1 \u8fdb\u7a0b\u4e00\u5b9a\u4f1a\u56de\u6536\u5b50\u8fdb\u7a0b\uff09</p> <p>\u8fd9\u91cc\u5b58\u5728\u4e00\u4e2a trick\uff0c\u53ef\u4ee5\u521b\u5efa\u4e00\u4e2a\u4e0e\u5f53\u524d\u8fdb\u7a0b\u7684\u7236\u8fdb\u7a0b\u5b8c\u5168\u65e0\u5173\u7684\u8fdb\u7a0b\uff1a\u5148 <code>fork()</code> \u4e00\u4e2a\u8fdb\u7a0b\uff0c\u968f\u540e\u6740\u6b7b\u81ea\u5df1\uff0c\u90a3\u4e48\u5f53\u524d\u8fdb\u7a0b\u7684\u5b50\u8fdb\u7a0b\u5c31\u4f1a\u88ab pid 1 \u6536\u517b\uff0c\u5c31\u8131\u79bb\u4e86\u539f\u6765\u7684\u7236\u8fdb\u7a0b\u3002</p>"},{"location":"ZJU_CS/OS/chap02/#process_scheduling","title":"Process Scheduling","text":"<p>\u4e00\u4e2a CPU \u53ea\u80fd\u8fd0\u884c\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u6211\u4eec\u5e0c\u671b\u63d0\u9ad8\u4f7f\u7528\u6548\u7387\u3002\u8fdb\u7a0b\u5904\u4e8e Waiting \u72b6\u6001\u7684\u65f6\u5019 CPU \u5982\u679c\u8ddf\u7740\u7b49\u5f85\u662f\u5bf9\u8d44\u6e90\u7684\u6d6a\u8d39\u3002</p> <p>Process scheduler selects among ready processes for next execution on CPU core.  </p> <p>Maintains scheduling queues of processes: </p> <ul> <li>Ready queue - set of all processes residing in main memory, ready and waiting to execute. \u53ea\u6709\u4e00\u4e2a ready queue, ready queue \u4e0d\u4f1a\u7a7a\uff0c\u56e0\u4e3a IDLE \u8fdb\u7a0b\u4e00\u76f4\u5728\u91cc\u9762\u3002</li> <li>Wait queue - set of processes waiting for an event. \u5f88\u591a\u4e2a\u7b49\u5f85\u961f\u5217\uff0c\u4e00\u4e2a\u88ab\u7b49\u5f85\u7684\u4e8b\u4ef6\u5bf9\u5e94\u4e00\u4e2a\u7b49\u5f85\u961f\u5217\u3002\u5f53\u6211\u4eec\u8fd9\u4e2a\u4e8b\u4ef6\u5230\u6765\u4e4b\u65f6\uff0c\u6211\u4eec\u4ece\u4e8b\u4ef6\u5bf9\u5e94\u7684\u961f\u5217\u9009\u62e9\u4e00\u4e2a\u8fdb\u7a0b\u3002</li> <li>Processes migrate among the various queues.  </li> </ul> <p>Ready and Wait Queue</p> <p>\u5f53\u6211\u4eec\u60f3\u8981\u63d2\u5165\u4e00\u4e2a\u65b0\u7684\u8fdb\u7a0b\u65f6\uff0c\u76f4\u63a5\u901a\u8fc7\u53cc\u5411\u94fe\u8868\u63a5\u4e0a\u5373\u53ef\u3002\u901a\u8fc7\u504f\u79fb\u91cf\u627e\u5230\u5bf9\u5e94\u5730\u5740\uff0c\u5e76\u901a\u8fc7\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u5f97\u5230 <code>task_struct</code>\u3002 </p> <p>\u9996\u5148\u4ece ready queue \u4e2d\u62ff\u4e00\u4e2a\u8fdb\u7a0b\u53bb CPU\uff0c</p> <ul> <li>\u5982\u679c\u5230\u65f6\u95f4\u4e86\uff08\u8fc7\u4e86\u4e00\u4e2a\u65f6\u95f4\u7247\uff09\uff0c\u5c31\u76f4\u63a5\u628a\u81ea\u5df1\u653e\u5230 ready queue; </li> <li>\u5982\u679c\u8981\u7b49\u5f85 I/O \u4e8b\u4ef6\uff0c\u5c31\u628a\u81ea\u5df1\u653e\u8fdb wait queue\uff0c\u7b49\u5f85 I/O \u4e8b\u4ef6\u53d1\u751f\u540e\u518d\u628a\u81ea\u5df1\u5524\u9192\uff0c\u653e\u56de ready queue.</li> <li>\u521b\u5efa\u5b50\u8fdb\u7a0b\u4e4b\u540e\u5b50\u8fdb\u7a0b\u653e\u5230 ready queue \u4e2d\uff0c\u5982\u679c\u8c03\u7528\u4e86 <code>wait</code>\uff0c\u90a3\u4e48\u7236\u8fdb\u7a0b\u7b49\u5f85\u5b50\u8fdb\u7a0b\u7ec8\u6b62\u540e\uff0c\u8fdb\u5165 ready queue.</li> </ul>"},{"location":"ZJU_CS/OS/chap02/#context_switch","title":"Context Switch","text":"<p>A context switch occurs when the CPU switches from one process to another.</p> <ul> <li>When CPU switches to another process, the system must save the state of the old process and load the saved state for the new process via a context switch. \u4e0a\u4e0b\u6587\u5207\u6362\u65f6\uff0c\u5b58\u50a8\u5f53\u524d\u8fdb\u7a0b\u7684\u72b6\u6001\uff0c\u5e76\u52a0\u8f7d\u76ee\u6807\u8fdb\u7a0b\u7684\u72b6\u6001\u3002</li> <li>Context of a process represented in the PCB state \u4e3b\u8981\u6307\u5bc4\u5b58\u5668\u7684\u503c\uff0c\u9875\u8868...</li> <li>Context-switch time is overhead; the system does no useful work while switching.  \u4e0a\u4e0b\u6587\u5207\u6362\u4e0d\u505a\u6709\u610f\u4e49\u7684\u4e8b\u60c5\uff0c\u662f pure overhead. </li> </ul> <ul> <li><code>cpu_context</code> \u5728 <code>task_struct</code> \u4e2d\uff0c\u4e14\u6709\u4e00\u4e2a\u504f\u79fb\u91cf\u3002\u56e0\u6b64\u8fd9\u91cc\u6211\u4eec\u5148 load \u8fd9\u4e2a\u504f\u79fb\u91cf\u5230\u5bc4\u5b58\u5668 <code>x10</code>\u3002</li> <li><code>x8</code> \u6307\u5411\u8981\u88ab\u6362\u51fa\u53bb\u7684\u8fdb\u7a0b\u7684 <code>task_struct</code>, \u968f\u540e\u6211\u4eec\u5c06\u8981\u5b58\u7684\u5bc4\u5b58\u5668\u5b58\u5165 <code>task_struct</code> \u4e2d\u3002</li> <li>\u968f\u540e <code>x8</code> \u6307\u5411\u8981\u88ab\u6362\u8fdb\u6765\u7684\u8fdb\u7a0b\u7684 <code>task_struct</code>, \u968f\u540e\u6211\u4eec\u5c06\u8981\u53d6\u7684\u5bc4\u5b58\u5668\u4ece <code>task_struct</code> \u4e2d\u53d6\u51fa\u3002</li> </ul> <p>\u4e3a\u4ec0\u4e48 switch \u4e2d\u53ea\u4fdd\u5b58\u90e8\u5206\u5bc4\u5b58\u5668\uff1f</p> <p>\u6211\u4eec\u4e0a\u4e0b\u6587\u5207\u6362\u65f6\u4f1a\u8c03\u7528 <code>cpu_switch_to</code> \u51fd\u6570\u3002\u5176\u4ed6\u5bc4\u5b58\u5668\u5728 arm \u67b6\u6784\u4e2d\u5c5e\u4e8e caller-saved registers\uff0c\u56e0\u6b64\u4e0d\u7528\u5728 <code>cpu_switch_to</code> \u4e2d\u4fdd\u5b58\uff0c<code>cpu_switch_to</code> \u4e2d\u5b58\u7684\u662f callee-saved registers. </p> <p>\u4e00\u4e2a\u8fdb\u7a0b\u5728\u5185\u6838\u4e2d\u8fd0\u884c\u65f6\u91cd\u8981\u7684 data structures: </p> <ul> <li> <p>\u5185\u6838\u6808\u4f4e\u5730\u5740\u5904\u6709 <code>thread_info</code>, \u6307\u5411 <code>task_struct</code>, \u5185\u6709 <code>cpu_context</code>.</p> <p>\u6ce8\u610f\u5230 <code>task_struct</code> \u5e76\u4e0d\u5728\u6808\u4e0a\uff0c\u53ea\u662f\u6709\u6307\u9488\u6307\u5411\u4ed6\u3002\uff08\u56e0\u4e3a <code>task_struct</code> \u592a\u5927\u4e86\uff0c\u56e0\u6b64\u653e\u4e86\u4e2a\u6307\u9488\u3002\u540e\u6765\u5927\u5bb6\u8ba4\u4e3a\u6808\u4f4d\u7f6e\u66b4\u9732\u540e\u5c31\u80fd\u627e\u5230 <code>task_struct</code> \u7684\u5730\u5740\uff0c\u56e0\u6b64\u540e\u6765\u6307\u9488\u4e5f\u6ca1\u4e86\uff09</p> </li> <li> <p>\u5185\u6838\u6808\u9ad8\u5730\u5740\u5904\u6709 <code>pt_regs</code>, \u4fdd\u5b58\u4e86\u5bc4\u5b58\u5668\u7684\u503c\u3002\uff08\u4e0d\u662f <code>cpu_context</code> \u4e2d\u7684\u5bc4\u5b58\u5668\uff09 \u4ece\u7528\u6237\u7a7a\u95f4\u5230\u5185\u6838\u7a7a\u95f4\u65f6\uff0c\u4e5f\u4f1a\u6709\u4e00\u6b21\u4e0a\u4e0b\u6587\u5207\u6362\uff0c\u8fd9\u65f6\u5019\u4f1a\u4fdd\u5b58\u7528\u6237\u7a7a\u95f4\u7684\u6240\u6709\u5bc4\u5b58\u5668\uff0c\u7136\u540e\u52a0\u8f7d\u5185\u6838\u7a7a\u95f4\u7684\u5bc4\u5b58\u5668\u3002</p> </li> <li> <p>stack frame</p> <p>\u6267\u884c\u51fd\u6570\u8c03\u7528\u7684\u65f6\u5019\uff0c\u4f1a\u6709\u4e00\u4e2a\u6808\u5e27\uff0c\u5148\u5b58\u50a8\u8fd4\u56de\u5730\u5740\u3002\u6240\u4ee5\u6808\u4e00\u65e6\u5207\u6362\uff0c\u7a0b\u5e8f\u5bf9\u5e94\u7684\u8fd4\u56de\u5730\u5740\u4e5f\u88ab\u5207\u6362\u4e86\u3002</p> </li> </ul> <p>Context switching between two kernel threads. context \u4e00\u5b9a\u5728 kernel mode \u6267\u884c\u3002\u4e3a\u4e86\u5b89\u5168\uff0c\u4e0a\u4e0b\u6587\u5207\u6362\u6d89\u53ca\u5230\u5bc4\u5b58\u5668\u7684\u4fee\u6539\u3002</p> <p>Context Switch Scenarios - kernel</p> <p>When and where are the context (regs) been saved?  </p> <ul> <li>When: In <code>context_switch</code>, more specifically, in cpu_switch_to</li> <li>Where: In PCB, more specifically, in cpu_context</li> <li>All regs are running kernel code, termed kernel context </li> </ul> <p>Context Switch Scenarios - user</p> <ul> <li>When and where are the user context (regs) been saved?<ul> <li>When: <code>kernel_entry</code>\uff08\u8fdb\u5165\u5185\u6838\u65f6\u5b58\u5bc4\u5b58\u5668\uff09\uff0c<code>kernel_exit</code>\uff08\u79bb\u5f00\u5185\u6838\u65f6\u53d6\u51fa\u5bc4\u5b58\u5668\uff09; Where: per-thread kernel stack, more specifically <code>pt_regs</code></li> </ul> </li> <li>When and where are the kernel context (regs) saved saved?<ul> <li>When: <code>cpu_switch_to</code>; Where: <code>cpu_context</code> </li> </ul> </li> </ul> <p><code>fork()</code> return values</p> <p>How does <code>fork()</code> return two values?</p> <ul> <li>\u8c03\u7528 <code>fork</code> \u540e\u4f1a\u8c03\u7528 <code>do_fork</code> \u51fd\u6570\uff0c\u968f\u540e\u8c03\u7528 <code>copy_process</code> \u6700\u540e\u8fdb\u5165 <code>copy_thread</code> \u51fd\u6570\u3002\u5b83\u4f1a\u628a <code>task_struct</code> \u91cc\u7684 <code>thread</code> \u8fdb\u884c\u62f7\u8d1d\u3002</li> <li> <p>\u5bf9\u4e8e\u7236\u8fdb\u7a0b\uff0c<code>fork</code> \u76f8\u5f53\u4e8e\u662f\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528\u3002\u901a\u8fc7 <code>kernel_entry</code> \u8fdb\u5165\u5185\u6838\u6001\uff0c\u5c06\u7528\u6237\u6001\u4e0a\u4e0b\u6587\u5b58\u5728 <code>pt_regs</code> \u4e2d\u3002\u8fd4\u56de\u503c\uff08pid\uff09\u901a\u8fc7 <code>pt_regs</code> \u7684\u5bc4\u5b58\u5668\u503c\u8fd4\u56de\u3002 \uff08\u7cfb\u7edf\u8c03\u7528\u7684\u8fd4\u56de\u503c\u5728 <code>x0</code> \u4e2d\uff0c\u6211\u4eec\u628a\u8fd9\u4e2a\u503c\u5b58\u5230 <code>pt_regs</code> \u4e2d\uff0c\u8fd9\u6837\u540e\u9762\u4ece\u5185\u6838\u5207\u6362\u5230\u7528\u6237\u6001\u65f6\u5c31\u53ef\u4ee5\u52a0\u8f7d\u8fd4\u56de\u503c\u5230 <code>x0</code>\uff09 </p> </li> <li> <p>\u5bf9\u4e8e\u5b50\u8fdb\u7a0b\uff0c\u4f1a\u8c03\u7528 <code>copy_thread</code> \u51fd\u6570\u3002\u4ed6\u4f1a\u62f7\u8d1d\u5bc4\u5b58\u5668\uff0c\u5e76\u628a <code>regs[0]=0</code>\u3002\u8fd9\u6837\u5728\u540e\u7eed <code>kernel_exit</code> \u540e\u5c31\u53ef\u4ee5\u628a\u503c\u8fd4\u56de\u5230\u5b50\u8fdb\u7a0b\u3002 \u6ce8\u610f\u5230\u6b64\u65f6\u5b50\u8fdb\u7a0b\u7684 <code>pc</code>\uff08ARM \u91cc\u7684 <code>pc</code> \u7c7b\u4f3c\u4e8e RISC-V \u91cc\u7684 <code>ra</code>\uff0c\u5b58\u50a8\u8fd4\u56de\u5730\u5740\uff09\u88ab\u8bbe\u7f6e\u4e3a\u4e86 <code>ret_from_fork</code>\uff08\u8c03\u7528 <code>ret_to_user</code>\uff0c\u518d\u8c03\u7528 <code>kernel_exit</code>\uff09\uff0c<code>sp</code> \u88ab\u8bbe\u7f6e\u4e3a\u4e86 <code>pt_regs</code>. </p> </li> <li> <p>\u6ce8\u610f\u5230\u5f53 <code>fork</code> \u4e4b\u540e\uff0c\u6211\u4eec\u4ece\u7236\u8fdb\u7a0b\u8fd4\u56de\uff0c\u6b64\u65f6\u5b50\u8fdb\u7a0b\u5904\u4e8e READY \u72b6\u6001\uff0c\u7b49\u5f85 CPU \u7684\u8c03\u5ea6\u3002\u7b2c\u4e00\u6b21\u8c03\u5ea6\u65f6\u5b50\u8fdb\u7a0b\u5728\u5207\u6362\u4e0a\u4e0b\u6587\u4e4b\u540e\u4f1a\u4ece <code>ret_from_fork</code> \u5f00\u59cb\u6267\u884c\uff0c\u968f\u540e\u8c03\u7528 <code>ret_to_user</code>\uff0c\u518d\u8c03\u7528 <code>kernel_exit</code>\uff08\u628a\u5b58\u5728 <code>pt_regs</code> \u91cc\u7684\u5bc4\u5b58\u5668\u5168\u90e8\u6062\u590d\uff09\uff0c\u4ece\u800c\u8fd4\u56de 0\u3002</p> </li> </ul> <p>\u8c03\u7528 <code>write</code> \u7684\u7cfb\u7edf\u8c03\u7528\u4f1a\u4e0d\u4f1a\u6709\u4e0a\u4e0b\u6587\u5207\u6362</p> <p>\u4e0d\u4f1a\uff0c\u53ea\u662f\u4ece user space \u901a\u8fc7 <code>kernel_entry</code> \u8fdb\u5165 kernel space\uff0c\u6267\u884c\u5bf9\u5e94\u7684 handler\uff0c\u6267\u884c\u5b8c\u540e\u901a\u8fc7 <code>kernel_exit</code> \u8fd4\u56de user space\u3002</p>"},{"location":"ZJU_CS/OS/chap02/#takeaway","title":"Takeaway","text":"<p>Takeaway</p> <ul> <li>Process Concept<ul> <li>Process vs Program</li> </ul> </li> <li>Process Control Block<ul> <li><code>task_struct</code></li> </ul> </li> <li>Process State<ul> <li>Five states, who has a queue</li> <li>How to create and terminate a process </li> </ul> </li> <li>Process Scheduling<ul> <li><code>cpu_switch_to</code><ul> <li>Where are registers saved?</li> </ul> </li> <li><code>fork</code><ul> <li>Why returns two values?</li> </ul> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap03/","title":"Chap03 | Inter-Process Communication","text":"<p>Processes within a host may be independent or cooperating. Reasons for cooperating processes:</p> <ul> <li>Information sharing</li> <li>Computation speedup</li> <li>Modularity</li> <li>Convenience</li> </ul> <p>\u8fdb\u7a0b\u4fdd\u62a4\u7684\u592a\u597d\u4e86\uff0c\u9700\u8981\u6709\u4e92\u76f8\u901a\u4fe1\u7684\u624b\u6bb5\u3002</p> <p>Models of IPC</p> <ul> <li>Shared memory</li> <li>Message passing</li> <li>Signal</li> <li>Pipe</li> <li>Socket</li> </ul>"},{"location":"ZJU_CS/OS/chap03/#ipc_communication_models","title":"IPC Communication Models","text":"<ul> <li>Message-passing \u9700\u8981\u5185\u6838\u7a7a\u95f4\u652f\u6301<ul> <li>useful for exchanging small amounts of data</li> <li>simple to implement in the OS</li> <li>sometimes cumbersome for the user as code is sprinkled with send/recv operations</li> <li>high-overhead: one syscall per communication operation</li> </ul> </li> <li>Shared memory \u975e\u5185\u6838\u7a7a\u95f4 <ul> <li>low-overhead: a few syscalls initially, and then none   </li> <li>more convenient for the user since we\u2019re used to simply reading/writing from/to RAM</li> <li>more difficult to implement in the OS</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap03/#shared_memory","title":"Shared Memory","text":"<p>Processes need to establish a shared memory region.  </p> <p>producer/consumer example</p> <p></p> <p>Example</p> <p></p> <p><code>ipcs -a</code> \u53ef\u4ee5\u67e5\u770b\u5f53\u524d IPC \u7684\u72b6\u6001\u3002</p> <p>\u5b58\u5728\u95ee\u9898\uff1a\u4e0d\u5b89\u5168\u3002\u4efb\u4f55\u4eba\u62ff\u5230 <code>share_id</code> \u90fd\u53ef\u4ee5\u628a\u5171\u4eab\u5185\u5b58 attach \u5230\u81ea\u5df1\u8fdb\u7a0b\u4e0a\uff0c\u53ef\u4ee5\u89c2\u5bdf\u5230\u5176\u4ed6\u8fdb\u7a0b\u7684\u6570\u636e\u3001\u751a\u81f3\u505a DOS \u653b\u51fb\u3002</p> <p>\u800c\u4e14\u5f88 cubersome\uff0c\u4f1a\u53d1\u751f\u5404\u79cd error \u9700\u8981\u5904\u7406\u3002\uff08\u73b0\u5728\u4f7f\u7528\u4e0d\u591a\uff09</p>"},{"location":"ZJU_CS/OS/chap03/#message_passing","title":"Message Passing","text":"<p>Two fundamental operations:</p> <ul> <li>send: to send a message (i.e., some bytes)</li> <li>recv: to receive a message</li> </ul> <p>If processes P and Q wish to communicate they</p> <ul> <li> <p>establish a communication \u201clink\u201d between them</p> <p>This \u201clink\u201d is an abstraction that can be implemented in many ways (even with shared memory!!)</p> </li> <li> <p>place calls to <code>send()</code> and <code>recv()</code></p> </li> <li>optionally shutdown the communication \u201clink\u201d</li> </ul>"},{"location":"ZJU_CS/OS/chap03/#implementing_message-passing","title":"Implementing Message-Passing","text":"<p>Implementation of communication link</p> <ul> <li>Physical:<ul> <li>Shared memory</li> <li>Hardware bus</li> <li>Network</li> </ul> </li> <li> <p>Logical:</p> <ul> <li> <p>Direct or indirect</p> <ul> <li> <p>Direct  </p> <p>\u6709\u4e00\u4e2a P \u548c Q\uff0c\u76f4\u63a5\u53d1\u4fe1\u606f\u3002\u5982\u679c\u6709 n \u4e2a\u8fdb\u7a0b\uff0c\u9700\u8981\u5efa\u7acb \\(C_2^n\\) \u4e2a\u8fde\u63a5\u3002</p> </li> <li> <p>Indirect</p> <p>\u6709\u4e00\u4e2a mailbox\uff0c\u53d1\u4fe1\u606f\u76f8\u5f53\u4e8e\u53d1\u7ed9\u4e00\u4e2a mailbox\u3002\u5982\u679c\u6709\u591a\u4e2a\u8fdb\u7a0b\uff0c\u6211\u4eec\u9700\u8981\u786e\u5b9a\u662f\u7531\u54ea\u4e2a\u8fdb\u7a0b\u63a5\u6536\u4fe1\u606f\u3002</p> </li> </ul> </li> <li> <p>Synchronous or asynchronous</p> <ul> <li> <p>Synchronous: Blocking is considered synchronous</p> <p>\u5373\u6211\u4eec\u53d1\u4fe1\u606f\uff0c\u5982\u679c\u63a5\u6536\u8005\u6ca1\u6536\u5230\u4fe1\u606f\uff0c\u53d1\u9001\u8005\u5c31\u5835\u585e\u7740\u4e0d\u8d70\uff1b\u6211\u4eec\u6536\u4fe1\u606f\uff0c\u5982\u679c\u53d1\u9001\u8005\u6ca1\u6709\u53d1\u9001\u4fe1\u606f\uff0c\u63a5\u9001\u8005\u5c31\u5835\u585e\u7740\u4e0d\u8d70\u3002</p> </li> <li> <p>Asynchronous: Non-blocking is considered asynchronous</p> </li> <li>\u5f02\u6b65\u6548\u7387\u66f4\u9ad8\uff0c\u540c\u6b65\u65f6\u6548\u6027\u66f4\u9ad8\u3002<ul> <li>Automatic or explicit buffering</li> </ul> </li> <li>Zero capacity - no messages are queued on a link. Sender must wait for receiver. </li> <li>Bounded capacity - finite length of n messages. Sender must wait if link full.X</li> <li>Unbounded capacity - infinite length. Sender never waits.</li> </ul> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap03/#pipes","title":"Pipes","text":"<ul> <li> <p>Ordinary pipes </p> <p>\u6ca1\u6709\u540d\u5b57\uff0c\u53ea\u80fd\u901a\u8fc7 <code>fork()</code> \u6765\u4f20\u64ad\u3002</p> <ul> <li>Producer writes to one end (the write-end of the pipe)</li> <li>Consumer reads from the other end (the read-end of the pipe)</li> </ul> <p></p> <p>\u6ce8\u610f <code>fd[0]</code> \u662f read-end\uff0c<code>fd[1]</code> \u662f write-end\uff08\u5bf9\u4e8e\u53cc\u65b9\u90fd\u662f\uff09</p> </li> <li> <p>Named pipes</p> <p>\u53ef\u4ee5\u628a\u540d\u5b57\u901a\u8fc7\u7f51\u7edc/\u6587\u4ef6\u4f20\u64ad\uff0c\u8fd9\u6837\u5c31\u80fd\u4ea4\u4e92\u3002\uff08\u53ef\u4ee5\u4f7f\u7528 <code>mkfifo</code> \u521b\u5efa named pipes\uff09</p> </li> </ul> <p>In UNIX, a pipe is mono-directional.  \u8981\u5b9e\u73b0\u4e24\u4e2a\u65b9\u5411\u4e00\u5b9a\u9700\u8981\u4e24\u4e2a pipe\u3002</p>"},{"location":"ZJU_CS/OS/chap03/#client-server_communication","title":"Client-Server Communication","text":"<p>\u5e7f\u4e49\u4e0a\u7684 IPC\uff0c\u56e0\u4e3a\u662f\u8dd1\u5728\u4e24\u4e2a\u7269\u7406\u673a\u5668\u4e0a\u7684\u4ea4\u4e92\u3002</p> <ul> <li>Sockets</li> <li> <p>RPCs</p> <p>\u6240\u6709\u7684\u4ea4\u4e92\u90fd\u662f\u548c stub \u901a\u4fe1\uff0cstub \u4f1a\u548c\u8fdc\u7aef\u7684 server \u901a\u4fe1\u3002 \u5b58\u5728\u7f51\u7edc\u95ee\u9898\uff0c\u5982\u4e22\u5305\u3002</p> </li> <li> <p>Java RMI</p> <p>RPC in Java</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap03/#takeaway","title":"Takeaway","text":"<p>Takeaway</p> <ul> <li>Communicating processes are the basis for many programs/services</li> <li>OSes provide two main ways for processes to communicate<ul> <li>shared memory</li> <li>message-passing</li> </ul> </li> <li>Each way comes with many variants and in many flavors</li> <li>Signals, Pipes, Sockets, RPCs, RMIs, etc.</li> </ul>"},{"location":"ZJU_CS/OS/chap04/","title":"Chap04 | Threads","text":"<p>How can we make a process run faster</p> <ul> <li>Multiple execution units with a process     </li> </ul>"},{"location":"ZJU_CS/OS/chap04/#thread_definition","title":"Thread Definition","text":"<ul> <li>A thread is a basic unit of execution within a process.  <ul> <li>Each thread has its own</li> <li>thread ID</li> <li>program counter</li> <li>register set</li> <li>Stack</li> </ul> </li> <li>It shares the following with other threads within the same process <ul> <li>code section</li> <li>data section</li> <li>the heap (dynamically allocated memory)</li> <li>open files and signals</li> </ul> </li> <li>Concurrency: A multi-threaded process can do multiple things at once</li> </ul> Example <p>\u7ebf\u7a0b\u6267\u884c\u7684\u4ee3\u7801\u5f88\u6709\u53ef\u80fd\u4e0d\u4e00\u6837\u3002</p> <ul> <li> <p>Advantages of Threads</p> <ul> <li> <p>Economy  </p> <ul> <li> <p>Creating a thread is cheap</p> <p>\u5982\u679c\u5df2\u7ecf\u6709\u4e86\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u90a3\u4e48\u6211\u4eec\u521b\u5efa\u65b0\u7684\u7ebf\u7a0b\u53ea\u9700\u8981\u7ed9\u5b83\u5206\u914d\u4e00\u4e2a\u6808\u3002Code\uff0cdata\uff0cheap \u90fd\u5df2\u7ecf\u5728\u5185\u5b58\u91cc\u5206\u914d\u597d\u4e86\u3002</p> </li> <li> <p>Context switching between threads is cheap</p> <p>Cache is hot, no need to cache flush.      * Resource Sharing         * Threads naturally share memory</p> <p>\u4e0d\u9700\u8981 IPC\u3002</p> </li> <li> <p>Having concurrent activities in the same address space is very powerful</p> <ul> <li>Responsiveness</li> </ul> </li> </ul> <p>\u5982\u5728 web server \u4e2d\uff0c\u4e00\u4e2a\u7ebf\u7a0b\u5728\u7b49\u5f85 I/O\uff0c\u5f53\u6709\u8bf7\u6c42\u6765\u65f6\u5c31\u518d\u5206\u914d\u4e00\u4e2a\u7ebf\u7a0b\u53bb\u5904\u7406\u3002\uff08\u8fdb\u7a0b\u4e5f\u53ef\u4ee5\uff0c\u4f46\u662f\u4ee3\u4ef7\u66f4\u5927\uff09</p> </li> <li> <p>Scalability</p> <ul> <li>multi-core machine</li> </ul> </li> </ul> </li> <li> <p>Drawbacks of Threads</p> <ul> <li> <p>Weak isolation between threads</p> <p>\u5982\u679c\u6709\u4e00\u4e2a\u7ebf\u7a0b\u51fa\u9519\uff0c\u90a3\u4e48\u6574\u4e2a\u8fdb\u7a0b\u90fd\u4f1a\u51fa\u9519\u3002</p> </li> </ul> </li> <li> <p>Typical challenges of multi-threaded programming</p> <ul> <li>Deal with data dependency and synchronization</li> <li>Dividing activities among threads</li> <li>Balancing load among threads</li> <li>Split data among threads</li> <li>Testing and debugging</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap04/#user_threads_vs_kernel_threads","title":"User Threads vs. Kernel Threads","text":"<p>\u5982\u679c\u5185\u6838\u4e0d\u77e5\u9053\u4f60\u8fd9\u4e2a user thread\uff0c\u5b8c\u5168\u5728 user space \u6267\u884c\uff0c\u5c31\u662f user space-based thread; \u5982\u679c\u5185\u6838\u77e5\u9053\u4f60\u8fd9\u4e2a user thread\uff0c\u5c31\u662f kernel-based thread\u3002</p> <ul> <li> <p>Many-to-One Model</p> <p>\u7f3a\u70b9\uff1a\u5185\u6838\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u65e0\u6cd5\u53d1\u6325 multi-core \u7684\u4f18\u52bf\uff1b\u4e00\u65e6\u4e00\u4e2a\u7ebf\u7a0b\u88ab\u963b\u585e\uff0c\u5176\u4ed6\u7ebf\u7a0b\u4e5f\u4f1a\u88ab\u963b\u585e\u3002 </p> </li> <li> <p>One-to-One Model</p> <p>\u628a\u7ebf\u7a0b\u7684\u7ba1\u7406\u53d8\u5f97\u5f88\u7b80\u5355\uff0c\u73b0\u5728 Linux\uff0cWindows \u90fd\u662f\u8fd9\u79cd\u6a21\u578b\u3002 </p> </li> <li> <p>Many-to-Many Model</p> <p>m to n \u7ebf\u7a0b\uff0c\u6298\u4e2d\u3002\u7f3a\u70b9\u662f\u592a\u590d\u6742\u3002 </p> </li> <li> <p>Two-Level Model</p> <p>\u53ef\u4ee5\u9009\u62e9 many to many \u6216\u8005 one to one\u3002 </p> </li> </ul>"},{"location":"ZJU_CS/OS/chap04/#thread_libraries","title":"Thread Libraries","text":"<ul> <li>In C/C++: pthreads and Win32 threads</li> <li>In C/C++: OpenMP</li> <li>In Java: Java Threads</li> </ul>"},{"location":"ZJU_CS/OS/chap04/#pthreads","title":"Pthreads","text":"<p>Specification, not implementation</p> <p>\u53ea\u8981\u7b26\u5408\u63a5\u53e3\u7684\u5b9a\u4e49\uff0c\u5c31\u53ef\u4ee5\u53eb pthreads\u3002</p> Example <p> </p>"},{"location":"ZJU_CS/OS/chap04/#openmp","title":"OpenMP","text":"<p>Identifies parallel regions \u2013 blocks of code that can run in parallel <pre><code>#pragma omp parallel\n</code></pre></p> Example <pre><code>#include &lt;omp.h&gt;\n#include &lt;stdio.h&gt;\nint main(int argc, char *argv[])\n{\n    /* sequential code */\n    #pragma omp parallel\n    {\n        printf(\"I am a parallel region.\");\n    }\n    /* sequential code */\n    return 0;\n}\n\n#pragma omp parallel for\nfor (i = 0; i &lt; N; i++)\n{\n    c[i] = a[i] + b[i];\n}\n</code></pre> <p>\u4f7f\u7528\u4e4b\u540e\u7f16\u8bd1\u5668\u4f1a\u4e3a\u6211\u4eec\u5207\u5206\u51fa\u82e5\u5e72\u4e2a\u5e76\u884c\u5757\uff0c\u521b\u9020\u51fa\u5bf9\u5e94\u7684\u7ebf\u7a0b\uff0c\u6700\u540e\u4f7f\u7528 join \u628a\u7ebf\u7a0b\u5408\u5e76\u3002</p>"},{"location":"ZJU_CS/OS/chap04/#java_threads","title":"Java Threads","text":"<ul> <li>Java threads may be created by:<ul> <li>Extending Thread class</li> <li>Implementing the Runnable interface</li> </ul> </li> </ul> Example <pre><code>class MyThread extends Thread {\n    public void run() {\n        . . .\n    }\n}\n    MyThread t = new MyThread();\n    public interface Runnable {\n    public abstract void run();\n}\n</code></pre>"},{"location":"ZJU_CS/OS/chap04/#threading_issues","title":"Threading Issues","text":"<p>\u7ebf\u7a0b\u7684\u52a0\u5165\u8ba9\u8fdb\u7a0b\u7684\u64cd\u4f5c\u53d8\u5f97\u66f4\u590d\u6742\u3002</p>"},{"location":"ZJU_CS/OS/chap04/#semantics_of_fork_and_exec","title":"Semantics of <code>fork()</code> and <code>exec()</code>","text":"<p>\u5982\u679c\u4e00\u4e2a\u7ebf\u7a0b\u8c03\u7528\u4e86 <code>fork()</code>\uff0c\u53ef\u80fd\u53d1\u751f\u4e24\u79cd\u60c5\u51b5\uff1a\u53ea\u590d\u5236\u8c03\u7528\u7ebf\u7a0b\uff0c\u6216\u8005\u590d\u5236\u6240\u6709\u7ebf\u7a0b\u3002</p> <p>Some OSes provide both options</p> <ul> <li> <p>In Linux the first option above is used  </p> <p>\u56e0\u4e3a\u5927\u90e8\u5206\u65f6\u5019 <code>fork</code> \u4e4b\u540e\u4f1a\u63a5 <code>exec</code>\uff0c\u62b9\u6389\u6240\u6709\u7684\u6570\u636e\uff0c\u56e0\u6b64\u76f4\u63a5\u590d\u5236\u8c03\u7528\u7ebf\u7a0b\u5c31\u53ef\u4ee5\u4e86\u3002</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap04/#signals","title":"Signals","text":"<p>\u4fe1\u53f7\u662f\u7ed9\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u7ed9\u6240\u6709\u7ebf\u7a0b\uff0c\u7ed9\u4e00\u4e2a\u56fa\u5b9a\u7684\u7ebf\u7a0b\u8fd8\u662f\u7528\u4e00\u4e2a\u7279\u5b9a\u7684\u7ebf\u7a0b\u6765\u5904\u7406\u4fe1\u53f7\uff1f</p> <p>Most UNIX versions: a thread can say which signals it accepts and which signals it doesn\u2019t accept.  </p> <p>On Linux: dealing with threads and signals is tricky but well understood with many tutorials on the matter and man pages</p> <p>Linux\u628a\u8fd9\u4e2a\u90e8\u5206\u63d0\u4f9b\u63a5\u53e3\u7ed9\u7528\u6237\uff0c\u8ba9\u7528\u6237\u81ea\u5df1\u6765\u5904\u7406\u3002</p>"},{"location":"ZJU_CS/OS/chap04/#safe_thread_cancellation","title":"Safe Thread Cancellation","text":"<p>\u628a\u4e00\u4e2a\u7ebf\u7a0b\u7684\u5de5\u4f5c\u53d6\u6d88\u6389\uff0c\u5982\u4f55\u4fdd\u8bc1\u53d6\u6d88\u540e\u4e0d\u5f71\u54cd\u7cfb\u7edf\u7684\u7a33\u5b9a\u6027\u3002</p> <ul> <li> <p>Asynchronous cancellation</p> <p>\u7acb\u5373\u7ec8\u6b62\u3002</p> </li> <li> <p>Deferred cancellation</p> <p>\u7ebf\u7a0b\u4f1a\u81ea\u5df1\u8fdb\u884c\u5468\u671f\u6027\u68c0\u67e5\uff0c\u5982\u679c\u53d6\u6d88\u6389\u4e0d\u4f1a\u5f71\u54cd\u7cfb\u7edf\u7684\u7a33\u5b9a\u6027\uff0c\u5c31\u628a\u81ea\u5df1\u53d6\u6d88\u6389\u3002</p> </li> </ul> <p>Invoking thread cancellation requests cancellation, but actual cancellation depends on thread state.</p> <p>\u5e26\u6765\u5f88\u591a\u95ee\u9898\uff1a\u6bd4\u5982\u4e00\u4e2a\u7ebf\u7a0b\u6b63\u5728\u5199\u53d8\u91cf\uff0c\u503c\u8fd8\u6ca1\u6709\u540c\u6b65\u5230\u5185\u5b58\u6216\u8005 cache\uff0c\u8fd9\u4e2a bug \u5f88\u96be\u88ab\u590d\u73b0\u3002</p> <p>In Java, the <code>Thread.stop()</code> method is deprecated, and so cancellation has to be deferred. </p>"},{"location":"ZJU_CS/OS/chap04/#linux_threads","title":"Linux Threads","text":"<p>In Linux, a thread is also called a light-weight process(LWP).</p> <p>The <code>**clone()**</code> syscall is used to create a thread or a process. </p> <p>Note</p> <p><code>clone</code> \u6709\u4e00\u4e2a\u53c2\u6570 <code>CLONE_VM</code>\uff0c\u5982\u679c\u4e0d\u8bbe\u7f6e\u90a3\u4e48\u7c7b\u4f3c\u4e8e <code>fork</code>\uff0c\u6bcf\u4e2a\u7ebf\u7a0b\u90fd\u6709\u81ea\u5df1\u7684\u5185\u5b58\u7a7a\u95f4\uff1b\u5982\u679c\u8bbe\u7f6e\u4e86\u90a3\u4e48\u7ebf\u7a0b\u8dd1\u5728\u540c\u4e00\u5730\u5740\u7a7a\u95f4\u4e0a\u3002</p> <p>\u6ce8\u610f\u7ebf\u7a0b\u80fd\u8bbf\u95ee\u5230\u5176\u4ed6\u7ebf\u7a0b\u7684\u6808\uff0c\u4e5f\u80fd\u8bfb\u5199\uff0c\u53ea\u662f\u6b63\u5e38\u4f7f\u7528\u60c5\u51b5\u4e0b\u662f\u7528\u7684\u81ea\u5df1\u6808\u3002</p> <p>TCB \u7528\u6765\u5b58\u50a8\u7ebf\u7a0b\u7684\u4fe1\u606f\uff0cLinux \u5e76\u4e0d\u533a\u5206 PCB \u548c TCB\uff0c\u90fd\u662f\u7528 <code>task_struct</code> \u6765\u8868\u793a\u3002</p> <p>Example</p> <p></p> <p>PID \u5982\u679c\u548c LWP \u76f8\u540c\uff0c\u8bf4\u660e\u8fd9\u4e2a\u8fdb\u7a0b\u53ea\u6709\u8fd9\u4e00\u4e2a\u7ebf\u7a0b\u3002\u5982\u679c\u4e0d\u76f8\u540c\uff0c\u8bf4\u660e\u8fdb\u7a0b\u6709\u591a\u4e2a\u7ebf\u7a0b\uff0c\u6b64\u65f6\u8fdb\u7a0b\u7684 PID \u662f\u4e3b\u7ebf\u7a0b\u7684 LWP\u3002</p> <p>A process is </p> <ul> <li>either a single thread + an address space <ul> <li>PID is thread ID</li> </ul> </li> <li>or multiple threads + an address space<ul> <li>PID is the leading thread ID</li> </ul> </li> </ul> <p>Threads with Process \u2013 What is shared</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230 <code>mm_struct</code> \uff08\u4e0e\u5185\u5b58\u7ba1\u7406\u76f8\u5173\u7684\u4fe1\u606f\uff0c\u5982\u9875\u8868\uff0c<code>vm_struct</code>\uff09\u662f\u5171\u4eab\u7684\uff0c<code>task_struct, pid, stack, comm\uff08\u4e00\u822c\u6765\u8bf4\u662f\u4e00\u6837\u7684\uff0c\u4f46\u662f\u56e0\u4e3a\u662f\u6570\u7ec4\u6240\u4ee5\u4e0d\u5171\u4eab\uff09</code> \u662f\u4e0d\u5171\u4eab\u7684\u3002</p> <p>PID stack \u662f<code>0x4000</code>(16KB)\u5bf9\u9f50</p> <ul> <li>One task in Linux<ul> <li>Same task_struct (PCB) means same thread\uff08\u4e00\u4e2a PCB \u6307\u7684\u662f\u4e00\u4e2a\u7ebf\u7a0b\uff09<ul> <li>Also viewed as 1:1 mapping</li> <li>One user thread maps to one kernel thread</li> <li>But actually, they are the same thread</li> </ul> </li> </ul> </li> <li>Can be executed in user space<ul> <li>User code, user space stack</li> </ul> </li> <li>Can be executed in kernel space<ul> <li>Kernel code, kernel space stack</li> </ul> </li> </ul> <p>\u4f8b\u5982\u6211\u4eec\u4f7f\u7528\u4e86\u4e00\u4e2a\u7cfb\u7edf\u8c03\u7528\uff0c\u7ebf\u7a0b\u5207\u6362\u5230\u5185\u6838\u6a21\u5f0f\uff0c\u76f8\u5f53\u4e8e\u662f\u7528\u6237\u7ebf\u7a0b\u5bf9\u5e94\u7684\u5185\u6838\u7ebf\u7a0b\u5728\u6267\u884c\uff0c\u6b64\u65f6\u5c31\u4f7f\u7528\u5185\u6838\u7a7a\u95f4\u7684\u6808\u3002</p>"},{"location":"ZJU_CS/OS/chap04/#takeaway","title":"Takeaway","text":"<p>Takeaway</p> <ul> <li>Thread is the basic execution unit<ul> <li>Has its own registers, pc, stack </li> </ul> </li> <li>Thread vs Process<ul> <li>What is shared and what is not</li> </ul> </li> <li>Pros and cons of thread</li> </ul>"},{"location":"ZJU_CS/OS/chap05/","title":"Chap05 |S cheduling","text":""},{"location":"ZJU_CS/OS/chap05/#cpu_scheduling","title":"CPU Scheduling","text":"<p>Definition: The decisions made by the OS to figure out which ready processes/threads should run and for how long. \u8c01\u7528\uff1f\u7528\u591a\u4e45\uff1f</p> <ul> <li> <p>The policy is the scheduling strategy</p> <p>\u600e\u4e48\u9009\u62e9\u4e0b\u4e00\u4e2a\u8981\u6267\u884c\u7684\u8fdb\u7a0b\u3002</p> </li> <li> <p>The mechanism is the dispatcher</p> <p>\u600e\u6837\u5feb\u901f\u5730\u5207\u6362\u5230\u4e0b\u4e00\u4e2a\u8fdb\u7a0b\u3002</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap05/#cpu-io_burst_cycle","title":"CPU-I/O Burst Cycle","text":"<ul> <li> <p>I/O-bound process</p> <p>\u4e3b\u8981\u662f\u7b49 I/O\u3002\u5927\u90e8\u5206\u7684\u64cd\u4f5c\u90fd\u662f I/O-bound \u7684\u3002  </p> <p>e.g. <code>/bin/cp</code></p> </li> <li> <p>CPU-bound process</p> <p>\u4e3b\u8981\u662f\u7b49 CPU\u3002  </p> <p>e.g. \u79d1\u5b66\u8ba1\u7b97\uff08\u5982\u628a\u5706\u5468\u7387\u8ba1\u7b97\u540e\u4e00\u767e\u4e07\u4f4d\uff09\uff0c\u6e32\u67d3</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap05/#the_cpu_scheduler","title":"The CPU Scheduler","text":"<p>\u5f53 CPU \u7a7a\u95f2\u65f6\uff0c\u4ece\u6240\u6709\u7684 ready processes \u4e2d\u9009\u4e00\u4e2a\u7ee7\u7eed\u8dd1\u3002</p> <ul> <li> <p>Non-preemptive scheduling: a process holds the CPU until it is willing to give it up.  </p> <p>\u975e\u62a2\u5360\u5f0f\uff0c\u5b83\u4e00\u76f4\u5360\u7740 CPU\uff0c\u76f4\u5230\u5b83\u81ea\u5df1\u653e\u5f03\u3002</p> </li> <li> <p>Preemptive scheduling: a process can be preempted even though it could have happily continued executing.</p> <p>\u62a2\u5360\u5f0f\uff0cCPU \u51b3\u5b9a\u6bcf\u4e2a\u8fdb\u7a0b\u80fd\u8dd1\u591a\u4e45\uff0c\u53ef\u4ee5\u5f3a\u5236\u4e2d\u6b62\u6b63\u5728\u8dd1\u7684\u8fdb\u7a0b\u3002</p> </li> </ul> <p>\u64cd\u4f5c\u7cfb\u7edf\u4e2d\u4e00\u822c\u4f7f\u7528\u62a2\u5360\u5f0f\u7684\uff08\u5426\u5219\u64cd\u4f5c\u7cfb\u7edf\u5c31\u4e0d\u592a\u9700\u8981\u505a\u8c03\u5ea6\u4e86\uff09</p>"},{"location":"ZJU_CS/OS/chap05/#scheduling_decision_points","title":"Scheduling Decision Points","text":"<p>Scheduling decisions can occur</p> <ul> <li> <p>A process goes from RUNNING to WAITING</p> <p>e.g. waiting for I/O to complete</p> </li> <li> <p>A process goes from RUNNING to READY</p> <p>e.g. when an interrupt occurs (such as a timer going off)</p> </li> <li> <p>A process goes from WAITING to READY</p> <p>e.g. an I/O operation has completed</p> </li> <li> <p>A process goes from RUNNING to TERMINATED</p> </li> <li>A process goes from NEW to READY</li> <li>A process goes from READY to WAITING</li> </ul> <p>\u5728\u975e\u62a2\u5360\u5f0f\u7684\u60c5\u51b5\u4e2d\uff0c\u53ea\u6709\u7b2c\u4e8c\u79cd\u60c5\u51b5\u4e0d\u4f1a\u53d1\u751f\u3002\u5728\u62a2\u5360\u5f0f\u7684\u60c5\u51b5\u4e2d\uff0c\u6240\u6709\u7684\u60c5\u51b5\u90fd\u4f1a\u53d1\u751f\u3002</p> <p>Preemptive scheduling is good, since the OS remains in control, but is complex. </p>"},{"location":"ZJU_CS/OS/chap05/#scheduling_mechanisms","title":"Scheduling Mechanisms","text":""},{"location":"ZJU_CS/OS/chap05/#scheduling_queues","title":"Scheduling Queues","text":"<ul> <li>The Ready Queue contains processes that are in the READY state</li> <li> <p>Device Queues contain processes waiting for particular devices</p> <p>\u6bcf\u4e2a\u88ab\u7b49\u5f85\u7684 devices \u90fd\u6709\u4e00\u4e2a device queues, \u901a\u8fc7\u53cc\u5411\u94fe\u8868\u8fde\u63a5\u3002</p> </li> </ul> <p>Example</p> <p></p> <p>\u6bd4\u5982\u8fd9\u91cc\uff0c\u6211\u4eec\u5c06\u8fdb\u7a0b 2 \u8fd0\u884c\uff0c\u5c31\u5c06\u5b83\u4ece ready queue \u91cc\u62ff\u51fa\u6765\u3002\u968f\u540e\u5982\u679c\u4ed6\u8981\u8bfb\u786c\u76d8\uff0c\u6211\u4eec\u5c31\u628a PCB2 \u6302\u8f7d\u5230 disk unit 0 \u7684 device queue \u4e0a\u3002</p> <p>Example</p> <p></p> <p>parent call fork \u4e4b\u540e\uff0c\u5b50\u8fdb\u7a0b\u8fdb\u5165 ready queue\u3002\u5982\u679c\u7236\u8fdb\u7a0b\u4f7f\u7528\u4e86 <code>wait</code>\uff0c\u4ed6\u5c31\u4f1a\u88ab\u653e\u5230\u5b50\u8fdb\u7a0b\u7684 waiting queue \u91cc\uff08\u5b9e\u9645\u4e0a\u6bcf\u4e2a\u88ab\u7b49\u5f85\u7684\u5bf9\u8c61\u90fd\u6709\u4e00\u4e2a waiting queue\uff09\u3002\u5f53\u5b50\u8fdb\u7a0b\u62ff\u5230 CPU \u65f6\uff0c\u5b83\u7ed3\u675f\u4e4b\u540e\uff0c\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u628a\u7236\u8fdb\u7a0b\u5524\u9192\uff0c\u968f\u540e\u7236\u8fdb\u7a0b\u8fdb\u5165 ready queue\u3002</p> <p>\u5f53 CPU \u518d\u6b21\u88ab\u7236\u8fdb\u7a0b\u62ff\u5230\u65f6\uff0c\u5b83\u4f1a\u56de\u6536\u5b50\u8fdb\u7a0b\u8fd9\u4e2a zombie\u3002</p>"},{"location":"ZJU_CS/OS/chap05/#dispatcher","title":"Dispatcher","text":"<p>Dispatcher module gives control of the CPU to the process selected by the scheduler. </p> <ul> <li> <p>switching to kernel mode</p> <p><code>kernel_entry</code>, \u7528\u6237\u6001\u7684\u4fe1\u606f\u5b58\u5728 <code>pt_regs</code> \u4e2d\u3002</p> </li> <li> <p>switching context</p> <p>\u4e0a\u4e0b\u6587\u5b58\u5728 PCB \u4e2d\u3002</p> </li> <li> <p>switching to user mode</p> </li> <li>jumping to the proper location in the user program to restart that program</li> </ul> <p>Dispatch latency \u2013 time it takes for the dispatcher to stop one process and start another to run. \u8fd9\u662f pure overhead\uff0c\u56e0\u4e3a CPU \u6ca1\u6709\u505a\u5b9e\u9645\u7684\u5de5\u4f5c\u3002</p>"},{"location":"ZJU_CS/OS/chap05/#scheduling_algorithms","title":"Scheduling Algorithms","text":"<p>Scheduling Objectives</p> <ul> <li>Maximize CPU Utilization</li> <li>Maximize Throughput</li> <li> <p>Minimize Turnaround Time</p> <p>\u5468\u8f6c\u65f6\u95f4\uff0c\u6307\u8fdb\u7a0b\u4ece\u521b\u5efa\u5230\u5b8c\u6210\u7684\u65f6\u95f4\u3002</p> </li> <li> <p>Minimize Waiting Time</p> </li> <li> <p>Minimize Response Time</p> <p>\u54cd\u5e94\u65f6\u95f4\uff0c\u6307\u8fdb\u7a0b\u4ece\u521b\u5efa\u5230\u7b2c\u4e00\u6b21\u54cd\u5e94\u88ab\u63a5\u53d7\u7684\u65f6\u95f4\u3002</p> </li> </ul> <p>\u6211\u4eec\u5f88\u96be\u8bf4\u4e00\u4e2a\u7b97\u6cd5\u600e\u6837\u624d\u662f\u597d\u7684\uff08\u4e0a\u8ff0\u7684\u76ee\u6807\u5b9e\u9645\u4e0a\u4e92\u76f8\u4e4b\u95f4\u662f\u6709\u77db\u76fe\u7684\uff09\u3002</p> <p>One thing is certain: the algorithms cannot be overly complicated so that they can be fast. \u5373\u7b97\u6cd5\u4e0d\u8981\u8fc7\u4e8e\u590d\u6742\u3002</p> <p>\u7528\u4e0b\u9762\u7684\u6307\u6807\u6765\u8861\u91cf\u7b97\u6cd5\u7684\u597d\u574f\uff1a</p> <ul> <li>CPU utilization \u2013 keep the CPU as busy as possible</li> <li>Throughput \u2013 # of processes that complete their execution per time unit</li> <li>Turnaround time \u2013 amount of time to execute a particular process</li> <li>Waiting time \u2013 amount of time a process has been waiting in the ready queue</li> <li>Response time \u2013 amount of time it takes from when a request was submitted until the first response is produced, not output (for time sharing environment)</li> </ul>"},{"location":"ZJU_CS/OS/chap05/#first-come_first-served_scheduling_fcfs","title":"First-Come, First-Served Scheduling (FCFS)","text":"<ul> <li>Waiting time = start time \u2013 arrival time</li> <li>Turnaround time = finish time \u2013 arrival time</li> </ul> <p>Example</p> <p> </p> <p>Convoy effect - short process behind long process \u6162\u8f66\u5728\u5feb\u8f66\u540e\u9762\uff0c\u6240\u6709\u8f66\u90fd\u5728\u540e\u9762\u7b49\u7740\u3002</p>"},{"location":"ZJU_CS/OS/chap05/#shortest-job-first_sjf_scheduling","title":"Shortest-Job-First (SJF) Scheduling","text":"<p>Use these lengths to schedule the process with the shortest time.  </p> <p>Example</p> <p>\u6ce8\u610f\u5206\u4e3a\u62a2\u5360\u5f0f\u548c\u975e\u62a2\u5360\u5f0f\u7684\uff01  </p> <p>\u6709\u591a\u6bb5\u7684\u6267\u884c\uff0c\u7b49\u5f85\u65f6\u95f4\u6211\u4eec\u8981\u8ba1\u7b97\u8fd9\u4e2a\u8fdb\u7a0b\u5728\u6267\u884c\u7ed3\u675f\u524d\uff0c\u6709\u591a\u5c11\u65f6\u95f4\u6ca1\u6709\u88ab\u6267\u884c\uff0c\u5373 25-10=15\u3002</p> <p>SJF is provably optimal for average wait time</p> <p>\u4f46\u6211\u4eec\u6267\u884c\u4e00\u4e2a\u4efb\u52a1\u4e4b\u524d\uff0c\u6211\u4eec\u5982\u4f55\u77e5\u9053\u4e00\u4e2a\u4efb\u52a1\u9700\u8981\u591a\u957f\u65f6\u95f4\uff1f\uff08burst durations\uff09</p>"},{"location":"ZJU_CS/OS/chap05/#predicting_cpu_burst_durations","title":"Predicting CPU burst durations","text":"<p>\u6839\u636e\u4e4b\u524d\u7684\u65f6\u95f4\uff0c\u9884\u6d4b\u4e00\u4e2a\u8fdb\u7a0b\u7684\u4e0b\u4e00\u6b21\u6267\u884c\u65f6\u95f4\uff1a\\(\\tau_{n+1}=\\alpha t_n + (1-\\alpha)\\tau_n\\)</p>"},{"location":"ZJU_CS/OS/chap05/#round-robin_scheduling","title":"Round-Robin Scheduling","text":"<p>RR Scheduling is preemptive and designed for time-sharing. </p> <p>\u7ed9\u8fdb\u7a0b\u4e00\u4e2a\u56fa\u5b9a\u65f6\u95f4\u7247\uff0c\u7528\u5b8c\u4e86\u5c31\u8dd1\u5230 ready queue \u672b\u5c3e\u6392\u961f\u3002</p> <p>Ready Queue is a FIFO. Whenever a process changes its state to READY it is placed at the end of the FIFO.</p> <p>Scheduling:</p> <ul> <li>Pick the first process from the ready queue</li> <li>Set a timer to interrupt the process after 1 quantum</li> <li>Dispatch the process</li> </ul> <p>Example</p> <p></p> <ul> <li> <p>No starvation, so better response time  </p> <p>\u5728 SJF \u4e2d\uff0c\u5982\u679c\u4e0d\u505c\u7684\u6709\u65f6\u95f4\u77ed\u7684\u8fdb\u7a0b\u8fdb\u6765\uff0c\u90a3\u4e48\u957f\u8fdb\u7a0b\u5c31\u53ef\u80fd\u6c38\u8fdc\u65e0\u6cd5\u6267\u884c\uff0c\u79f0\u4e3a starvation\u3002</p> </li> <li> <p>The wait time is bounded.</p> </li> <li>Trade-off<ul> <li>Short quantum: great response/interactivity but high overhead</li> <li>Long quantum: poor response/interactivity, but low overhead</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap05/#priority_scheduling","title":"Priority Scheduling","text":"<p>\u4f18\u5148\u7ea7\u9ad8\u7684\u5148\u88ab\u8c03\u5ea6\uff0c\u4f18\u5148\u7ea7\u4f4e\u7684\u540e\u88ab\u8c03\u5ea6\u3002\uff08No convention: low number can mean low or high priority\uff09</p> <ul> <li> <p>Priorities can be internal.</p> <p>e.g. in SJF it\u2019s the predicted burst time, the number of open files. </p> </li> <li> <p>Priorities can be external.</p> <p>e.g. set by users to specify relative importance of jobs. </p> </li> </ul> <p>Example</p> <p></p> <p>Example</p> <p></p> <p>\u4e3a\u4e86\u5b9e\u73b0\u4f18\u5148\u7ea7\u8c03\u5ea6\uff0c\u6211\u4eec\u53ef\u4ee5\u4f7f\u7528\u4f18\u5148\u961f\u5217\u6765\u4ee3\u66ff\u961f\u5217\u3002</p> <p>\u5b58\u5728\u95ee\u9898\uff1a\u4f18\u5148\u7ea7\u4f4e\u7684\u8fdb\u7a0b\u53ef\u80fd\u6c38\u8fdc\u65e0\u6cd5\u6267\u884c\uff0c\u5373 starvation\u3002</p> <p>A solution: Priority aging</p> <ul> <li>Increase the priority of a process as it ages</li> </ul>"},{"location":"ZJU_CS/OS/chap05/#multilevel_feedback_queues","title":"Multilevel Feedback Queues","text":"<ul> <li>use one ready queue per class of processes.</li> <li>Scheduling within queues<ul> <li>Each queue has its own scheduling policy</li> </ul> </li> </ul> <p>\u4e00\u4e2a\u961f\u5217\u91cc\u7528\u4e00\u79cd\u8c03\u5ea6\u65b9\u6cd5\uff0c\u4e0d\u540c\u7684\u961f\u5217\u91cc\u53ef\u4ee5\u7528\u4e0d\u540c\u8c03\u5ea6\u65b9\u6cd5\u3002</p> <p>Processes can move among the queues.</p> <p>Example</p> <p>\u6709\u4e09\u5c42\u961f\u5217\uff0c\u7b2c\u4e00\u3001\u4e8c\u5c42\u662f Round-Robin\u3002\u6765\u4e86\u4e00\u4e2a\u8fdb\u7a0b\u5148\u653e\u5230\u7b2c\u4e00\u4e2a\u961f\u5217\u91cc\u51c6\u5907\u6267\u884c\uff0c\u5982\u679c\u6ca1\u6267\u884c\u5b8c\u5c31\u653e\u5230\u7b2c\u4e8c\u4e2a\u961f\u5217\u91cc\uff0c\u5982\u679c\u8fd8\u6ca1\u6267\u884c\u5b8c\u5c31\u653e\u5230\u7b2c\u4e09\u4e2a\u961f\u5217\u91cc FCFS\u3002 </p> <p>\u5982\u679c\u6700\u5f00\u59cb\u5728 Q0 \u5c31\u6267\u884c\u5b8c\u4e86\uff0c\u5f88\u53ef\u80fd\u662f I/O bound \u7684\u8fdb\u7a0b\uff0c\u6211\u4eec\u628a\u5b83\u7684\u4f18\u5148\u7ea7\u8bbe\u7684\u5f88\u9ad8\uff1b\u5426\u5219\u53ef\u80fd\u662f CPU-bound \u6211\u4eec\u5c31\u964d\u4f4e\u5b83\u7684\u4f18\u5148\u7ea7\u3002</p> <p>Rationale: non-CPU-intensive jobs should really get the CPU quickly on the rare occasions they need them, because they could be interactive processes (this is all guesswork, of course). \u975e CPU-intensive \u7684\u8fdb\u7a0b\u5e94\u8be5\u5c3d\u5feb\u5f97\u5230 CPU\uff0c\u56e0\u4e3a\u5b83\u4eec\u53ef\u80fd\u662f\u4ea4\u4e92\u5f0f\u8fdb\u7a0b\u3002</p> <p>\u53ef\u4ee5\u505a\u7684\u6bd4\u8f83\u901a\u7528\u3002 The Multilevel Feedback Queues scheme is very general because highly configurable</p> <ul> <li>Number of queues</li> <li>Scheduling algorithm for each queue</li> <li>Scheduling algorithm across queues</li> <li>Method used to promote/demote a proces</li> </ul>"},{"location":"ZJU_CS/OS/chap05/#thread_scheduling","title":"Thread Scheduling","text":"<ul> <li> <p>process-contention scope (PCS) </p> <p>\u6bcf\u4e2a\u8fdb\u7a0b\u5206\u5230\u65f6\u95f4\u7247\u4e00\u6837\uff0c\u7136\u540e\u8fdb\u7a0b\u5185\u90e8\u518d\u5bf9\u7ebf\u7a0b\u8fdb\u884c\u8c03\u5ea6\u3002</p> </li> <li> <p>system-contention scope (SCS)</p> <p>\u6240\u6709\u7ebf\u7a0b\u8fdb\u884c\u8c03\u5ea6\u3002</p> </li> </ul> <p>\u73b0\u5728\u4e3b\u6d41 CPU \u90fd\u662f\u4ee5\u7ebf\u7a0b\u4e3a\u7c92\u5ea6\u8fdb\u884c\u8c03\u5ea6\u7684\u3002</p>"},{"location":"ZJU_CS/OS/chap05/#multiple-processor_scheduling","title":"Multiple-Processor Scheduling","text":"<p>Multi-processor may be any one of the following architectures:</p> <ul> <li>Multi-core CPUs</li> <li>Multi-threaded cores</li> </ul>"},{"location":"ZJU_CS/OS/chap05/#multithreaded_multicore_system","title":"Multithreaded Multicore System","text":"<ul> <li>All threads may be in a common ready queue (a)</li> <li> <p>Each processor may have its own private queue of threads (b)  </p> <p>\u73b0\u5728\u5927\u90e8\u5206\u662f\u8fd9\u79cd\u67b6\u6784\u3002 </p> </li> </ul> <p>CPU \u4e2d\u8ba1\u7b97\u5355\u5143\u5f88\u5feb\uff0c\u4f46\u662f\u5185\u5b58\u8bbf\u95ee\u662f\u5f88\u6162\u7684\uff0c\u9700\u8981 stall\u3002\u4e3a\u4e86\u5229\u7528\u8fd9\u6bb5 stall \u7684\u65f6\u95f4\uff0c\u6211\u4eec\u5c31\u591a\u7528\u4e00\u4e2a thread\uff0c\u5728\u8fd9\u4e2a thread stall \u65f6\u6267\u884c\u53e6\u4e00\u4e2a thread\u3002\uff08hyperthreading\uff09</p> <p>Chip-multithreading (CMT) assigns each core multiple hardware threads. (Intel refers to this as hyperthreading.)</p> <p>hyperthreading \u5c5e\u4e8e\u786c\u4ef6\u7ebf\u7a0b\uff0c\u7531\u786c\u4ef6\u6765\u8c03\u5ea6\uff0c\u4e0d\u540c\u4e8e OS \u91cc\u7684 thread\u3002</p>"},{"location":"ZJU_CS/OS/chap05/#multiple-processor_scheduling_1","title":"Multiple-Processor Scheduling","text":""},{"location":"ZJU_CS/OS/chap05/#load_balancing","title":"Load Balancing","text":"<ul> <li>Load balancing attempts to keep workload evenly distributed</li> <li> <p>Push migration \u2013 periodic task checks load on each processor, and if found pushes task from overloaded CPU to other CPUs.</p> <p>core \u4e0a\u5de5\u4f5c\u592a\u591a\uff0c\u8981\u63a8\u7ed9\u5176\u4ed6\u7684 core\u3002</p> </li> <li> <p>Pull migration \u2013 idle processors pulls waiting task from busy processor.</p> <p>core \u4e0a\u5de5\u4f5c\u592a\u5c11\uff0c\u5c31\u4ece\u5176\u4ed6\u7684 core \u4e0a\u62c9\u4e00\u4e9b\u4efb\u52a1\u8fc7\u6765\u3002</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap05/#processor_affinity","title":"Processor Affinity","text":"<p>\u6709\u7684\u8fdb\u7a0b\u6211\u4eec\u60f3\u8981\u5728\u4e00\u4e2a core \u4e0a\u8dd1\u3002</p> <ul> <li>Soft affinity \u2013 the operating system attempts to keep a thread running on the same processor, but no guarantees.</li> <li>Hard affinity \u2013 allows a process to specify a set of processors it may run on.</li> </ul>"},{"location":"ZJU_CS/OS/chap05/#linux_scheduling","title":"Linux Scheduling","text":"<ul> <li>Nice command <ul> <li>\u6570\u8d8a\u5c0f\uff0c\u4f18\u5148\u7ea7\u8d8a\u9ad8</li> <li><code>ps -e -o uid,pid,ppid,pri,ni,cmd</code></li> </ul> </li> </ul> <p>Linux Scheduling: 0.11</p> <p>Round-Robin + priority. \u7b2c\u4e00\u4e2a\u7ea2\u6846 \\(O(N)\\) \u627e <code>counter</code> \u6700\u5927\u7684\u8fdb\u7a0b\uff0c\u5982\u679c <code>counter</code> \u4e0d\u4e3a 0 \u5c31\u6267\u884c\uff0c\u5426\u5219\u8bf4\u660e\u6240\u6709\u7684\u8fdb\u7a0b\u90fd\u5df2\u7ecf\u8dd1\u5b8c\u81ea\u5df1\u7684\u65f6\u95f4\u7247\u4e86\uff0c\u91cd\u65b0\u8d4b\u503c\u65f6\u95f4\u7247\uff0c\u6309\u7167\u4f18\u5148\u7ea7\u8d4b\u503c\u3002\uff08\u5f53\u65f6\u6570\u8d8a\u5927\uff0c\u8bf4\u660e\u4f18\u5148\u7ea7\u8d8a\u9ad8\uff0c\u540e\u6765\u76f8\u53cd\u4e86\uff09 </p> <p>\u6bcf\u6b21\u627e\u8fdb\u7a0b\u90fd\u8981 \\(O(N)\\)\uff0c\u540e\u6765\u6539\u4e3a\u4e86 \\(O(1)\\) \u7684\u7b97\u6cd5\uff08Linux 2.6\uff09</p> <p>The kernel keeps two arrays of round-robin queues</p> <ul> <li>One for active tasks: one Round Robin queue per priority level</li> <li>One for expired tasks: one Round Robin queue per priority level</li> </ul> <p>\u6bcf\u4e2a\u4f18\u5148\u7ea7\u90fd\u5bf9\u5e94\u4e00\u4e2a\u6570\u7ec4\uff0c\u6bcf\u4e2a\u6570\u7ec4\u91cc\u6709\u4e00\u4e2a Round Robin \u961f\u5217\u3002</p> <pre><code>struct prio_array {\n    int nr_active; // total num of tasks\n    unsigned long bitmap[5]; // priority bitmap\n    struct list_head queue[MAX_PRIO]; // the queues\n}\n</code></pre> <p>The bitmap contains one bit for each priority level. <code>bitmap</code> \u5b58\u54ea\u4e2a\u4f18\u5148\u7ea7\u91cc\u8fd8\u6709\u5143\u7d20\uff0c\u6700\u5f00\u59cb\u6240\u6709\u4f4d\u90fd\u662f 0\uff0c\u5982\u679c\u6709\u4f18\u5148\u7ea7\u91cc\u6709\u8fdb\u7a0b\uff0c\u5c31\u628a\u5bf9\u5e94\u7684\u4f4d\u8bbe\u4e3a 1\u3002\u627e\u4f18\u5148\u7ea7\u6700\u9ad8\u7684\u5c31\u662f\u4ece\u5de6\u5f80\u53f3\u904d\u5386\uff0c\u627e\u5230\u7b2c\u4e00\u4e2a 1 \u7684\u4f4d\u3002x86 \u4e0a\u6b63\u597d\u6709\u4e00\u4e2a\u6307\u4ee4 <code>bsfl</code>\uff08bit scan forward - from right to left\uff09\u53ef\u4ee5\u76f4\u63a5\u627e\u5230\u5bf9\u5e94\u7684\u4f4d\uff0c\u7136\u540e\u518d\u4ece\u5bf9\u5e94\u7684 <code>task_list</code> \u53d6\u51fa\u4e00\u4e2a\u8fdb\u7a0b\u3002 <pre><code>prio_array.head_queue[bsfl(bitmap)].task_struct\n</code></pre></p> <p>\u4e00\u4e2a\u4efb\u52a1\u6267\u884c\u5b8c\u5b83\u7684\u65f6\u95f4\u7247\u540e\uff0c\u5c31\u4ece active array \u79fb\u5230 expired array\u3002\u5f53 active array \u4e3a\u7a7a\u65f6\uff0c\u5c31\u628a expired array \u548c active array \u4ea4\u6362\u3002</p> <p>\u95ee\u9898\u5728\u4e8e\uff1a\u4f18\u5148\u7ea7\u6570\u91cf\u53d7\u9650\u5236\uff1b\u800c\u4e14 policy \u548c mechanism \u7d27\u5bc6\u7ed1\u5b9a\uff0c\u96be\u4ee5\u7ef4\u62a4\uff0c\u6240\u4ee5\u540e\u6765\u6ca1\u6709\u7ee7\u7eed\u4f7f\u7528\u3002</p> <p>CFS: Completely Fair Scheduler</p> <ul> <li>Developed by the developer of \\(O(1)\\), with ideas from others</li> <li>Main idea: keep track of how fairly the CPU has been allocated to tasks, and \u201cfix\u201d the unfairness</li> <li>For each task, the kernel keeps track of its virtual time<ul> <li>The sum of the time intervals during which the task was given the CPU since the task started</li> <li>Could be much smaller than the time since the task started</li> </ul> </li> <li>Goal of the scheduler: give the CPU to the task with the smallest virtual time. i.e., to the task that\u2019s the least \"happy\"</li> </ul>"},{"location":"ZJU_CS/OS/chap05/#takeaway","title":"Takeaway","text":"<p>Takeaway</p> <ul> <li>There are many options for CPU scheduling</li> <li>Modern OSes use preemptive scheduling</li> <li>Some type of multilevel feedback priority queues is what most OSes do right now</li> <li>A common concern is to ensure interactivity</li> <li>I/O bound processes often are interactive, and thus should have high priority</li> <li>Having \u201cquick\u201d short-term scheduling is paramoun</li> </ul>"},{"location":"ZJU_CS/OS/chap06/","title":"Chap06 | Synchoronization","text":"<ul> <li>Processes/threads can execute concurrently</li> <li>Concurrent access to shared data may result in data inconsistency</li> </ul>"},{"location":"ZJU_CS/OS/chap06/#race_condition","title":"Race Condition","text":"Example <p>Several processes (or threads) access and manipulate the same data concurrently and the outcome of the execution depends on the particular order in which the access takes place, is called a race-condition. \u591a\u4e2a\u8fdb\u7a0b\u5e76\u884c\u5730\u5199\u6570\u636e\uff0c\u7ed3\u679c\u53d6\u51b3\u4e8e\u5199\u7684\u5148\u540e\u987a\u5e8f\uff0c\u8fd9\u5c31\u662f\u7ade\u4e89\u6761\u4ef6\u3002</p> <p>\u5728\u5185\u6838\u4e2d\uff0c\u6bd4\u5982\u4e24\u4e2a\u8fdb\u7a0b\u540c\u65f6 <code>fork</code>\uff0c\u5b50\u8fdb\u7a0b\u53ef\u80fd\u62ff\u5230\u4e00\u6837\u7684 pid\u3002</p>"},{"location":"ZJU_CS/OS/chap06/#critical_section","title":"critical section","text":"<p>\u4fee\u6539\u5171\u540c\u53d8\u91cf\u7684\u533a\u57df\u79f0\u4e3a critical section\uff1b\u5171\u540c\u533a\u57df\u4e4b\u524d\u53eb entry section\uff0c\u4e4b\u540e\u53eb exit section\u3002</p> <ul> <li>Single-core system: preventing interrupts \uff08\u5173\u95ed\u4e2d\u65ad\uff09</li> <li>Multiple-processor: preventing interrupts are not feasible (depending on if kernel is preemptive or non-preemptive)<ul> <li>Preemptive \u2013 allows preemption of process when running in kernel mode</li> <li>Non-preemptive \u2013 runs until exits kernel mode, blocks, or voluntarily yields CPU</li> <li>\u4e00\u5b9a\u7528synchronization\u6765\u4fdd\u62a4\u3002</li> </ul> </li> </ul> <p>\u671f\u672b\u8003\u70b9 \u4e09\u4e2a\u6761\u4ef6</p> <ul> <li>Mutual Exclusion\uff08\u4e92\u65a5\u8bbf\u95ee\uff09<ul> <li>\u5728\u540c\u4e00\u65f6\u523b\uff0c\u6700\u591a\u53ea\u6709\u4e00\u4e2a\u7ebf\u7a0b\u53ef\u4ee5\u6267\u884c\u4e34\u754c\u533a</li> </ul> </li> <li>Progress\uff08\u7a7a\u95f2\u8ba9\u8fdb\uff09<ul> <li>\u5f53\u6ca1\u6709\u7ebf\u7a0b\u5728\u6267\u884c\u4e34\u754c\u533a\u4ee3\u7801\u65f6\uff0c\u5fc5\u987b\u5728\u7533\u8bf7\u8fdb\u5165\u4e34\u754c\u533a\u7684\u7ebf\u7a0b\u4e2d\u9009\u62e9\u4e00\u4e2a\u7ebf\u7a0b\uff0c\u5141\u8bb8\u5176\u6267\u884c\u4e34\u754c\u533a\u4ee3\u7801\uff0c\u4fdd\u8bc1\u7a0b\u5e8f\u6267\u884c\u7684\u8fdb\u5c55</li> </ul> </li> <li>Bounded waiting\uff08\u6709\u9650\u7b49\u5f85\uff09<ul> <li>\u5f53\u4e00\u4e2a\u8fdb\u7a0b\u7533\u8bf7\u8fdb\u5165\u4e34\u754c\u533a\u540e\uff0c\u5fc5\u987b\u5728\u6709\u9650\u7684\u65f6\u95f4\u5185\u83b7\u5f97\u8bb8\u53ef\u5e76\u8fdb\u5165\u4e34\u754c\u533a\uff0c\u4e0d\u80fd\u65e0\u9650\u7b49\u5f85</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap06/#petersons_solution","title":"Peterson\u2019s Solution","text":"<p>Peterson\u2019s solution solves two-processes/threads synchronization (Only works for two processes case)</p> <ul> <li>It assumes that LOAD and STORE are atomic<ul> <li>atomic: execution cannot be interrupted</li> </ul> </li> <li>Two processes share two variables<ul> <li><code>boolean flag[2]</code>: whether a process is ready to enter the critical section</li> <li><code>int turn</code>: whose turn it is to enter the critical section</li> </ul> </li> </ul> <p>\u9a8c\u8bc1\u4e09\u4e2a\u6761\u4ef6\uff08\u8003\u8bd5\u8003\u70b9\uff09</p> <ul> <li>Mutual exclusion<ul> <li>P0 enters CS:<ul> <li>Either <code>flag[1]=false</code> or <code>turn=0</code></li> <li>Now prove P1 will not be able to enter CS</li> </ul> </li> <li>Case 1: <code>flag[1]=false</code> -&gt; P1 is out CS</li> <li>Case 2: <code>flag[1]=true</code>, <code>turn=1</code> -&gt; P0 is looping, contradicts with P0 is in CS</li> <li>Case 3: <code>flag[1]=true</code>, <code>turn=0</code> -&gt; P1 is looping</li> </ul> </li> <li> <p>Process requirement</p> <p></p> </li> <li> <p>Bounded waiting</p> <p></p> <p>Whether P0 enters CS depends on P1; Whether P1 enters CS depends on P0; P0 will enter CS after one limited entry P1</p> </li> </ul> <p>Peterson\u2019s Solution is not guaranteed to work on modern architectures.</p> <ul> <li>Only works for two processes case</li> <li>It assumes that LOAD and STORE are atomic</li> <li> <p>Instruction reorder</p> <p>\u6307\u4ee4\u4f1a\u4e71\u5e8f\u6267\u884c\u3002</p> </li> </ul> <p>Example</p> <p></p> <p>100 is the expected output. \u4f46\u662f\u7ebf\u7a0b 2 \u7684\u4ee3\u7801\u53ef\u80fd\u88ab\u4e71\u5e8f\uff0c\u4e24\u6761\u6307\u4ee4\u4ea4\u6362\u987a\u5e8f\uff0c\u8fd9\u6837\u8f93\u51fa\u5c31\u53ef\u80fd\u53d8\u6210 0\u3002 </p>"},{"location":"ZJU_CS/OS/chap06/#hardware_support_for_synchronization","title":"Hardware Support for Synchronization","text":"<p>Many systems provide hardware support for critical section code</p> <ul> <li>Uniprocessors: disable interrupts</li> <li>Solutions:<ul> <li>Memory barriers</li> <li>Hardware instructions<ul> <li>test-and-set: either test memory word and set value</li> <li>compare-and-swap: compare and swap contents of two memory words</li> </ul> </li> <li>Atomic variables</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap06/#memory_barriers","title":"Memory Barriers","text":"<p>Memory model are the memory guarantees a computer architecture makes to application programs.</p> <ul> <li> <p>Strongly ordered \u2013 where a memory modification of one processor is immediately visible to all other processors.</p> <p>\u4e00\u4e2a\u5185\u5b58\u7684\u4fee\u6539\u8981\u7acb\u523b\u88ab\u6240\u6709\u7684 processors \u770b\u5230\u3002</p> </li> <li> <p>Weakly ordered \u2013 where a memory modification of one processor may not be immediately visible to all other processors.</p> </li> </ul> <p>A memory barrier is an instruction that forces any change in memory to be propagated (made visible) to all other processors.  </p> <p>Example</p> <p></p> <ul> <li>X86 support<ul> <li>\u5199\u5185\u5b58\u5c4f\u969c (Store Memory Barrier)\uff1a\u5728\u6307\u4ee4\u540e\u63d2\u5165 Store Barrier\uff0c\u80fd\u8ba9\u5199\u5165\u7f13\u5b58\u4e2d\u6700\u65b0\u6570\u636e\u66f4\u65b0\u5199\u5165\u5185\u5b58\u4e2d\uff0c\u8ba9\u5176\u4ed6\u7ebf\u7a0b\u53ef\u89c1\u3002 \u5f3a\u5236\u5199\u5165\u5185\u5b58\uff0c\u8fd9\u79cd\u663e\u5f0f\u8c03\u7528\uff0c\u4e0d\u4f1a\u8ba9 CPU \u53bb\u8fdb\u884c\u6307\u4ee4\u91cd\u6392\u5e8f\u3002</li> <li>\u8bfb\u5185\u5b58\u5c4f\u969c (Load Memory Barrier)\uff1a\u5728\u6307\u4ee4\u540e\u63d2\u5165 Load Barrier\uff0c\u53ef\u4ee5\u8ba9\u9ad8\u901f\u7f13\u5b58\u4e2d\u7684\u6570\u636e\u5931\u6548\uff0c\u5f3a\u5236\u91cd\u65b0\u4ece\u5185\u5b58\u4e2d\u52a0\u8f7d\u6570\u636e\u3002\u4e5f\u662f\u4e0d\u4f1a\u8ba9 CPU \u53bb\u8fdb\u884c\u6307\u4ee4\u91cd\u6392\u3002</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap06/#hardware_instructions","title":"Hardware Instructions","text":"<p>Special hardware instructions that allow us to either test-and modify the content of a word, or two swap the contents of two words atomically (uninterruptable)</p>"},{"location":"ZJU_CS/OS/chap06/#test-and-set_instruction","title":"Test-and-Set Instruction","text":"<p>Defined as below, but atomically.  <pre><code>bool test_set (bool *target)\n{\n    bool rv = *target;\n    *target = TRUE;\n    return rv:\n}\n</code></pre></p> <p>Lock with Test-and-Set</p> <pre><code>bool lock = FALSE\ndo {\n    while (test_set(&amp;lock)); // busy wait\n    critical section\n    lock = FALSE;\n    remainder section \n} while (TRUE);\n</code></pre> <p>Bounded Waiting for Test-and-Set Lock</p> <p>\u4e0a\u9762\u7684\u7a0b\u5e8f\u6ee1\u8db3\u524d\u4e24\u4e2a\u6761\u4ef6\uff0c\u4e0d\u4e00\u5b9a\u6ee1\u8db3 bounded waiting\u3002\u4e0b\u9762\u7684\u4ee3\u7801\u53ef\u4ee5\u628a\u9501\u4ece T0 \u4f20\u5230 T1\uff0c\u518d\u4f20\u5230 T2\u3002 </p>"},{"location":"ZJU_CS/OS/chap06/#compare-and-swap_instruction","title":"Compare-and-Swap Instruction","text":"<p>Executed atomically, the swap takes place only under this condition.</p> <pre><code>int compare_and_swap(int *value, int expected, int new_value)\n{\n    int temp = *value;\n    if (*value == expected)\n        *value = new_value;\n    return temp;\n}\n</code></pre> <p>Shared integer lock initialized to 0; <pre><code>while (true)\n{\n    while (compare_and_swap(&amp;lock, 0, 1) != 0); /* do nothing */\n    /* critical section */\n    lock = 0;\n    /* remainder section */\n}\n</code></pre></p> <p>x86 \u4e2d\u5b9e\u73b0\u4e86 <code>cmpxchg</code>\u3002</p>"},{"location":"ZJU_CS/OS/chap06/#atomic_variables","title":"Atomic Variables","text":"<p>One tool is an atomic variable that provides atomic (uninterruptible) updates on basic data types such as integers and booleans. </p> <p>The <code>increment()</code> function can be implemented as follows: <pre><code>void increment(atomic_int *v) {\n    int temp;\n    do {\n        temp = *v;\n    } while (temp != (compare_and_swap(v,temp,temp+1)));\n}\n</code></pre></p>"},{"location":"ZJU_CS/OS/chap06/#mutex_lock","title":"Mutex Lock","text":"<p>Mutex Locks \u652f\u6301 <code>acquire()</code> \uff08\u83b7\u5f97\u8fd9\u4e2a\u9501\uff09<code>release()</code>\uff08\u91ca\u653e\u8fd9\u4e2a\u9501\uff09\u3002\u56e0\u6b64 <code>acquire, release</code> \u662f\u539f\u5b50\u7684\u3002</p> <p>This solution requires busy waiting</p> <ul> <li>This lock therefore called a spinlock</li> </ul> <pre><code>bool locked = false;\nacquire() {\n    while (compare_and_swap(&amp;locked, false, true))\n    ; //busy waiting\n}\nrelease() {\n    locked = false;\n}\n</code></pre> <p>\u95ee\u9898\uff1a\u5982\u679c\u4e00\u4e2a\u8fdb\u7a0b\u6709\u65f6\u95f4\u7247\uff0c\u4f46\u662f\u62ff\u4e0d\u5230\u9501\uff0c\u4e00\u76f4 spin\uff0c\u4f1a\u6d6a\u8d39 CPU \u65f6\u95f4\u3002</p> <p>we put the busy waiting thread into suspended (yield-&gt; moving from running to sleeping) When the lock is locked, change process\u2019s state to SLEEP, add to the queue, and call <code>schedule()</code></p>"},{"location":"ZJU_CS/OS/chap06/#semaphore","title":"Semaphore","text":"<p>Synchronization tool that provides more sophisticated ways (than Mutex locks) for process to synchronize their activities.</p> <p>Can only be accessed via two indivisible (atomic) operations</p> <ul> <li> <p><code>wait()</code> and <code>signal()</code> (Originally called P() and V() Dutch)</p> <ul> <li> <p><code>wait()</code></p> <p>\u60f3\u62ff\u5230\u8fd9\u4e2a semaphore\uff0c\u5982\u679c\u62ff\u4e0d\u5230\uff0c\u5c31\u4e00\u76f4\u7b49\u5f85\u3002 <pre><code>wait(S) { \n    while (S &lt;= 0) ; // busy wait\n    S--;\n}\n</code></pre></p> </li> <li> <p><code>signal()</code></p> <p>\u91ca\u653e semaphore\u3002 <pre><code>signal(S) { \n    S++;\n}\n</code></pre></p> </li> </ul> </li> <li> <p>Counting semaphore \u2013 integer value can range over an unrestricted domain</p> </li> <li>Binary semaphore \u2013 integer value can range only between 0 and 1<ul> <li>Same as a mutex lock</li> </ul> </li> </ul> <p>Example</p> <p>\u53ef\u4ee5\u7528\u6765\u89e3\u51b3\u540c\u6b65\u95ee\u9898\uff1a </p>"},{"location":"ZJU_CS/OS/chap06/#semaphore_w_waiting_queue","title":"Semaphore w/ waiting queue","text":"<p>\u8981yield\u7136\u540esleep\uff0c\u6240\u4ee5\u9700\u8981context switch</p> <p>With each semaphore there is an associated waiting queue. </p> <pre><code>typedef struct { \n    int value; \n    struct list_head * waiting_queue; \n} semaphore; \n</code></pre> <p>Two operations:</p> <ul> <li> <p><code>block</code> \u2013 place the process invoking the operation on the appropriate waiting queue.</p> <p>\u628a\u5f53\u524d\u7684\u8fdb\u7a0b sleep\uff0c\u653e\u5230 waiting queue \u91cc\u9762\u3002</p> </li> <li> <p><code>wakeup</code> \u2013 remove one of processes in the waiting queue and place it in the ready queue.</p> <p>\u4ece waiting queue \u91cc\u9762\u62ff\u51fa\u4e00\u4e2a\u8fdb\u7a0b\uff0c\u653e\u5230 ready queue \u91cc\u9762\u3002</p> </li> </ul> <p>Implemetation with waiting queue: (need to be atomic by spinlock)</p> <pre><code>wait(semaphore *S) {\n    S-&gt;value--;\n    if (S-&gt;value &lt; 0) {\n        add this process to S-&gt;list;\n        block();\n    }\n}\nsignal(semaphore *S) {\n    S-&gt;value++;\n    if (S-&gt;value &lt;= 0) {\n        remove a proc.P from S-&gt;list;\n        wakeup(P);\n    }\n}\n</code></pre> <p>\u8fd9\u91cc\u6709 busy waiting, \u4f46\u5728 critical section \u91cc\u4e0d\u9700\u8981\uff08\u6ca1\u6709\u62ff\u5230 semaphor \u5c31\u4f1a sleep\uff0c\u8fd8\u6ca1\u6709\u8d70\u5230 critical section\uff09\uff0c\u53ea\u6709 <code>wait</code> \u548c <code>signal</code> \u91cc\u9700\u8981 busy wait\u3002</p> <p>Comparison between mutex and semaphore</p> <ul> <li>Mutex or spinlock<ul> <li>Pros: no blocking</li> <li>Cons: Waste CPU on looping</li> <li>Good for short critical section</li> </ul> </li> <li>Semaphore<ul> <li>Pros: no looping</li> <li>Cons: context switch is time-consuming</li> <li>Good for long critical section</li> </ul> </li> </ul> Semaphore w/ waiting queue in practice <p>\u771f\u5b9e\u5b9e\u73b0\u91cc\uff0c\u9700\u8981\u6709 spinlock \u6765\u4fdd\u62a4 semaphore \u64cd\u4f5c\u7684\u539f\u5b50\u6027\u3002 21\u884c\u548c22\u884c\u4e00\u5b9a\u4e0d\u80fd\u4e92\u6362\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u6b7b\u9501\u3002  </p>"},{"location":"ZJU_CS/OS/chap06/#deadlock_and_starvation","title":"Deadlock and Starvation","text":"<ul> <li> <p>Deadlock: two or more processes are waiting indefinitely for an event that can be caused by only one of the waiting processes.</p> <p></p> </li> <li> <p>Starvation: indefinite blocking. a process may never be removed from the semaphore\u2019s waiting queue.</p> </li> </ul> <p>Deadlock \u662f\u5927\u5bb6\u90fd\u62ff\u4e0d\u5230\u9501\uff0cStarvation \u662f\u6709\u7684\u8fdb\u7a0b\u62ff\u4e0d\u5230\u9501\u3002</p>"},{"location":"ZJU_CS/OS/chap06/#priority_inversion","title":"Priority Inversion","text":"<p>Priority Inversion: a higher priority process is indirectly preempted by a lower priority task. </p> <p>\u9ad8\u4f18\u5148\u7ea7\u7b49\u4f4e\u4f18\u5148\u7ea7\uff08\u9501\u5148\u88ab\u4f4e\u4f18\u5148\u7ea7\u62ff\u5230\uff09\uff0c\u4f46\u662f\u4f4e\u4f18\u5148\u7ea7\u7684\u8fdb\u7a0b\u62ff\u4e0d\u5230 CPU\uff0c\u5c31\u65e0\u6cd5\u91ca\u653e\u9501\u3002</p> <p>Priority Inversion</p> <p></p> <p>Solution: priority inheritance </p> <ul> <li> <p>temporary assign the highest priority of waiting process (PH) to the process holding the lock (PL)</p> <p>\u5982\u679c\u4f4e\u4f18\u5148\u7ea7\u7684\u8fdb\u7a0b\u62ff\u5230\u4e86\u9501\uff0c\u800c\u4e14\u8fd9\u4e2a\u9501\u4e0a\u6709\u9ad8\u4f18\u5148\u7ea7\u7684\u8fdb\u7a0b\u5728\u7b49\uff0c\u5c31\u63d0\u9ad8\u4f4e\u4f18\u5148\u7ea7\u7684\u8fdb\u7a0b\u7684\u4f18\u5148\u7ea7\uff0c\u7ee7\u627f\u9501\u7684\u4f18\u5148\u7ea7\uff08\u53d6\u51b3\u4e8e\u5728\u8fd9\u4e2a\u9501\u4e0a\u7b49\u5f85\u7684\u8fdb\u7a0b\u7684\u6700\u9ad8\u7684\u4f18\u5148\u7ea7\uff09\u3002</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap06/#linux_synchronization","title":"Linux Synchronization","text":"<p>2.6 \u4ee5\u524d\u7684\u7248\u672c\u7684 kernel \u4e2d\u901a\u8fc7\u7981\u7528\u4e2d\u65ad\u6765\u5b9e\u73b0\u4e00\u4e9b\u77ed\u7684 critical section\uff1b2.6 \u53ca\u4e4b\u540e\u7684\u7248\u672c\u7684 kernel \u662f\u62a2\u5360\u5f0f\u7684\u3002</p> <p>Linux \u63d0\u4f9b\uff1a</p> <ul> <li>Atomic integers</li> <li>Spinlocks</li> <li> <p>Semaphores</p> <p>\u5728 <code>linux/include/linux/semaphore.h</code> \u4e2d\uff0c<code>down()</code> \u662f lock\uff08\u5982\u679c\u8981\u8fdb\u5165 sleep\uff0c\u5b83\u4f1a\u5148\u91ca\u653e\u9501\u518d\u7761\u7720\uff0c\u5524\u9192\u4e4b\u540e\u4f1a\u7acb\u523b\u91cd\u65b0\u83b7\u5f97\u9501\uff09\uff0c<code>up()</code> \u662f unlock\u3002 * Reader-writer locks</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap06/#posix_synchronization","title":"POSIX Synchronization","text":"<p>POSIX API provides</p> <ul> <li>mutex locks</li> <li>semaphores</li> <li>condition variable</li> </ul>"},{"location":"ZJU_CS/OS/chap06/#mutex_locks","title":"Mutex Locks","text":"<ul> <li> <p>Creating and initializing the lock</p> <pre><code>#include &lt;pthread.h&gt;\npthread_mutex_t mutex;\n/* create and initialize the mutex lock */\npthread_mutex_init(&amp;mutex, NULL);\n</code></pre> </li> <li> <p>Acquiring and releasing the lock</p> <pre><code>/* acquire the mutex lock */\npthread_mutex_lock(&amp;mutex);\n/* critical section */\n/* release the mutex lock */\npthread_mutex_unlock(&amp;mutex);\n</code></pre> </li> </ul>"},{"location":"ZJU_CS/OS/chap06/#semaphores","title":"Semaphores","text":"<p>Named semaphores can be used by unrelated processes, unnamed cannot. <code>sem_open(), sem_init(), sem_wait(), sem_post()</code></p> <pre><code>#include &lt;stdio.h&gt;\n#include &lt;pthread.h&gt;\n#include &lt;semaphore.h&gt;\n#include &lt;unistd.h&gt;\n\n#define NUM_THREADS 5\n\nsem_t semaphore;  // \u5b9a\u4e49\u4fe1\u53f7\u91cf\n\nvoid* access_resource(void* arg) {\n    int thread_id = *(int*)arg;\n\n    printf(\"Thread %d: Waiting to access resource...\\n\", thread_id);\n\n    // \u7b49\u5f85\u4fe1\u53f7\u91cf\uff0c\u5c1d\u8bd5\u8bbf\u95ee\u8d44\u6e90\n    sem_wait(&amp;semaphore);\n\n    printf(\"Thread %d: Accessing resource...\\n\", thread_id);\n    sleep(1);  // \u6a21\u62df\u8bbf\u95ee\u8d44\u6e90\u7684\u64cd\u4f5c\n    printf(\"Thread %d: Releasing resource...\\n\", thread_id);\n\n    // \u91ca\u653e\u4fe1\u53f7\u91cf\uff0c\u8868\u793a\u79bb\u5f00\u8d44\u6e90\n    sem_post(&amp;semaphore);\n\n    return NULL;\n}\n\nint main() {\n    pthread_t threads[NUM_THREADS];\n    int thread_ids[NUM_THREADS];\n\n    // \u521d\u59cb\u5316\u4fe1\u53f7\u91cf\uff0c\u8bbe\u5b9a\u521d\u59cb\u503c\u4e3a3\uff0c\u8868\u793a\u6700\u591a\u5141\u8bb83\u4e2a\u7ebf\u7a0b\u540c\u65f6\u8bbf\u95ee\u8d44\u6e90\n    sem_init(&amp;semaphore, 0, 3);\n\n    // \u521b\u5efa\u591a\u4e2a\u7ebf\u7a0b\n    for (int i = 0; i &lt; NUM_THREADS; i++) {\n        thread_ids[i] = i + 1;\n        pthread_create(&amp;threads[i], NULL, access_resource, &amp;thread_ids[i]);\n    }\n\n    // \u7b49\u5f85\u6240\u6709\u7ebf\u7a0b\u5b8c\u6210\n    for (int i = 0; i &lt; NUM_THREADS; i++) {\n        pthread_join(threads[i], NULL);\n    }\n\n    // \u9500\u6bc1\u4fe1\u53f7\u91cf\n    sem_destroy(&amp;semaphore);\n\n    return 0;\n}\n</code></pre>"},{"location":"ZJU_CS/OS/chap06/#unamed_semaphores","title":"Unamed Semaphores","text":"<ul> <li> <p>Creating an initializing the semaphore:</p> <pre><code>#include &lt;semaphore.h&gt;\nsem_t sem;\n/* Create the semaphore and initialize it to 1 */\nsem_init(&amp;sem, 0, 1);\n</code></pre> </li> <li> <p>Acquiring and releasing the semaphore:</p> <pre><code>/* acquire the semaphore */\nsem_wait(&amp;sem);\n/* critical section */\n/* release the semaphore */\nsem_post(&amp;sem);\n</code></pre> </li> </ul>"},{"location":"ZJU_CS/OS/chap06/#named_semaphores","title":"Named Semaphores","text":"<ul> <li> <p>Creating an initializing the semaphore:</p> <pre><code>#include &lt;semaphore.h&gt;\nsem_t *sem;\n/* Create the semaphore and initialize it to 1 */\nsem = sem_open(\"SEM\", O_CREAT, 0666, 1);\n</code></pre> </li> <li> <p>Another process can access the semaphore by referring to its name SEM.</p> </li> <li> <p>Acquiring and releasing the semaphore:</p> <pre><code>/* acquire the semaphore */\nsem_wait(sem);\n/* critical section */\n/* release the semaphore */\nsem_post(sem);\n</code></pre> </li> </ul>"},{"location":"ZJU_CS/OS/chap06/#condition_variable","title":"Condition Variable","text":"<p>When should we use condition variables?</p> <p></p> <p>Operations supported by a condition variable are:</p> <ul> <li> <p><code>wait(condition, lock)</code>: release lock, put thread to sleep until condition is signaled; when thread wakes up again, re-acquire lock before returning.</p> <p>\u7b49\u5f85\u4e00\u4e2a\u6761\u4ef6\uff08\u5148\u653e\u9501\u7136\u540e\u7761\u7720\uff0c\u7b49\u5f85\u88ab\u5524\u9192\uff0c\u88ab\u5524\u9192\u4e4b\u540e\u91cd\u65b0\u83b7\u5f97\u9501\uff09\u3002</p> </li> <li> <p><code>signal(condition, lock)</code>: if any threads are waiting on condition, wake up one of them. Caller must hold lock, which must be the same as the lock used in the wait call.</p> <p>\u5524\u9192\u4e00\u4e2a\u7b49\u5f85\u7ebf\u7a0b\u3002</p> </li> <li> <p><code>broadcast(condition, lock)</code>: same as signal, except wake up all waiting threads.</p> <p>\u5524\u9192\u6240\u6709\u7684\u7b49\u5f85\u7ebf\u7a0b\u3002</p> </li> </ul> <pre><code>pthread_mutex_t mutex; \npthread_cond_t cond_var;\npthread_mutex_init(&amp;mutex, NULL); \npthread_cond_init(&amp;cond_var, NULL);\n// Thread waiting for the condition a == b to become true:\npthread_mutex_lock(&amp;mutex);\nwhile(a != b)                               // \u4e00\u822c\u8981\u91cd\u590d\u5c1d\u8bd5\uff0c\u6240\u4ee5\u7528 while \u800c\u4e0d\u662f if\n    pthread_cond_wait(&amp;cond_var, &amp;mutex);   // release lock when wait, acquire lock when being signaled\npthread_mutex_unlock(&amp;mutex);\n// Thread signaling another thread waiting on the condition variable:\npthread_mutex_lock(&amp;mutex);\na = b;\npthread_cond_signal(&amp;cond_var);\npthread_mutex_unlock(&amp;mutex);\n</code></pre> Example <p></p> <ul> <li>Condition variable can wake up all threads, semaphore can only wake up one by one.   </li> <li> <p>Sometimes we only care if the queue is empty or not, while don\u2019t care the queue length.</p> <p>\u6709\u7684\u65f6\u5019\u6211\u4eec\u4e0d\u5173\u5fc3\u7b49\u5f85\u961f\u5217\u7684\u957f\u5ea6\uff0c\u90a3\u4e48 semaphore \u7684 val \u5c31\u6ca1\u6709\u7528\u5904\u4e86\u3002</p> </li> <li> <p>Mutex is used to guarantee that operations are atomic.</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap06/#synchronization_examples","title":"Synchronization Examples","text":"<p>\u6bcf\u5e74\u5fc5\u8003\u4e00\u4e2a\u5927\u9898\uff0c\u96be\u5ea6\u57281\u30012 \u4e4b\u95f4</p> <p>\u4e00\u822c\u6211\u4eec\u7528\u4fe1\u53f7\u91cf\u89e3\u51b3\u95ee\u9898\uff0c\u56e0\u4e3a\u4fe1\u53f7\u91cf\u76f8\u5bf9\u6765\u8bf4\u529f\u80fd\u66f4\u591a\uff0c\u800c\u4e14\u5f88\u591a\u64cd\u4f5c\u7cfb\u7edf\u5bf9\u4fe1\u53f7\u91cf\u505a\u4e86\u66f4\u591a\u8bbe\u8ba1\uff0c\u7528\u6765\u907f\u514d busy waiting \u7b49\u95ee\u9898\u3002</p> <p>\u4e00\u4e2a\u4fe1\u53f7\u91cf\u7528\u6765\u8868\u793a \u4e00\u7c7b\u8d44\u6e90\u7684\u4f59\u91cf\uff1b<code>wait()</code> \u7b49\u5f85\u5230\u5176\u6709\u4f59\u91cf\u65f6\u4ece\u4e2d\u53d6\u8d70\u4e00\u4e2a\uff0c\u800c <code>signal()</code> \u91ca\u653e\u4e00\u4e2a\u8d44\u6e90\u3002</p>"},{"location":"ZJU_CS/OS/chap06/#bounded-buffer_problem","title":"Bounded-Buffer Problem","text":"<p>Two processes, the producer and the consumer share n buffers</p> <ul> <li> <p>the producer generates data, puts it into the buffer.</p> <ul> <li> <p>the producer won\u2019t try to add data into the buffer if it is full.</p> <p>\u5f53 buffer \u6ee1\u7684\u65f6\u5019\uff0c\u751f\u4ea7\u8005\u4e0d\u80fd\u518d\u653e\u6570\u636e\uff0c\u5e94\u8be5 sleep\u3002</p> </li> </ul> </li> <li> <p>the consumer consumes data by removing it from the buffer.</p> <ul> <li> <p>the consumer won\u2019t try to remove data from an empty buffer.</p> <p>\u5f53 buffer \u7a7a\u7684\u65f6\u5019\uff0c\u6d88\u8d39\u8005\u4e0d\u80fd\u518d\u53d6\u6570\u636e\uff0c\u5e94\u8be5 sleep\u3002</p> </li> </ul> </li> </ul> <p>\u5b9a\u4e49\u54ea\u4e9b mutex \u548c semaphor? buffer \u9700\u8981\u4e92\u65a5\u7684\u4fdd\u62a4\uff0c\u56e0\u6b64\u9700\u8981\u4e00\u4e2a mutex\u3002\u5f53\u5b83\u6ee1\u4e86\u7684\u65f6\u5019\u5c31\u8ba9 producer \u7761\u7720\uff0c\u5f53\u5b83\u7a7a\u7684\u65f6\u5019\u5c31\u8ba9 consumer \u7761\u7720\uff0c\u56e0\u6b64\u9700\u8981\u4e24\u4e2a semaphor\u3002</p> <ul> <li>The producer process     <pre><code>do {\n    //produce an item\n    ...\n    wait(empty-slots);      // \u628a empty-slots \u51cf\u4e00\uff08\u521d\u59cb\u4e3a N\uff09\n    wait(mutex);\n    //add the item to the buffer\n    ...\n    signal(mutex);\n    signal(full-slots);\n} while (TRUE)\n</code></pre>     \u8fd9\u91cc <code>wait()</code> \u7684\u987a\u5e8f\u4e0d\u80fd\u8c03\u6362\uff1a\u5982\u679c\u5148 <code>wait(mutex)</code>\uff0c\u90a3\u4e48 <code>wait(empty-slots)</code> \u4e4b\u540e\uff0c\u5982\u679c buffer \u7a7a\u4e86\uff0c\u90a3\u4e48\u8fd9\u4e2a\u65f6\u5019\u5c31\u4f1a\u5e26\u7740 mutex \u4f11\u7720\uff0c\u8fd9\u6837\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u4e5f\u62ff\u4e0d\u5230\u8fd9\u4e2a\u9501\u4e86\u3002</li> <li>The consumer process     <pre><code>do {\n    //produce an item\n    ...\n    wait(full-slots);           // \u628a full-slots \u51cf\u4e00\uff08\u521d\u59cb\u4e3a 0\uff09\n    wait(mutex);\n    //remove the item to the buffer\n    ...\n    signal(mutex);\n    signal(empty-slots);\n} while (TRUE)\n</code></pre></li> </ul>"},{"location":"ZJU_CS/OS/chap06/#readers-writers_problem","title":"Readers-writers problem","text":"<p>A data set is shared among a number of concurrent processes</p> <ul> <li>readers: only read the data set; they do not perform any updates</li> <li>writers: can both read and write</li> </ul> <p>\u591a\u4e2a reader \u53ef\u4ee5\u5171\u4eab\uff0c\u5373\u540c\u65f6\u8bfb\uff1b\u4f46\u53ea\u80fd\u6709\u4e00\u4e2a write \u8bbf\u95ee\u6570\u636e\uff08\u5199\u548c\u8bfb\u4e5f\u4e0d\u5171\u4eab\uff09\u3002</p> <p>Solution:</p> <ul> <li>semaphore mutex initialized to 1</li> <li>semaphore write initialized to 1</li> <li> <p>integer readcount initialized to 0</p> </li> <li> <p>The writer process   <pre><code>The writer process\ndo {\n    wait(write);\n    //write the shared data\n    ....\n    signal(write);\n} while (TRUE);\n</code></pre></p> </li> <li>The reader process     <pre><code>do {\n    wait(mutex);\n    readcount++;\n    if (readcount == 1) \n        wait(write);\n    signal(mutex)\n\n    //reading data\n    ...\n    wait(mutex);\n    readcount--;\n    if (readcount == 0) \n        signal(write);\n    signal(mutex);\n} while(TRUE);\n</code></pre>     mutex \u7528\u6765\u4fdd\u62a4 <code>readcount</code>\u3002\u8fd9\u91cc\u5982\u679c count \u662f 1\uff0c\u5c31\u83b7\u5f97 <code>write</code> \u7684\u9501\u6765\u4fdd\u62a4\u8fd9\u4e2a read\u3002\u5047\u8bbe writer \u62ff\u5230\u4e86\u9501\uff0c\u6765\u4e86 5 \u4e2a reader\uff0c\u90a3\u4e48\u7b2c\u4e00\u4e2a\u4f1a sleep \u5728 write \u4e0a\uff0c\u5269\u4e0b 4 \u4e2a reader \u4f1a sleep \u5728 mutex \u4e0a\u3002     \u600e\u6837\u624d\u80fd\u4e0d\u5e26\u7740\u9501\u4f11\u7720\uff1f</li> </ul> <p>Two variations of readers-writers problem</p> <ul> <li> <p>Reader first</p> <p>\u5982\u679c\u6709 reader holds data\uff0cwriter \u6c38\u8fdc\u62ff\u4e0d\u5230\u9501\uff0c\u8981\u7b49\u6240\u6709\u7684 reader \u7ed3\u675f\u3002</p> </li> <li> <p>Writer first</p> <p>\u5982\u679c write ready \u4e86\uff0c\u4ed6\u5c31\u4f1a\u5c3d\u53ef\u80fd\u65e9\u5730\u8fdb\u884c\u5199\u64cd\u4f5c\u3002\u5982\u679c\u6709 reader hold data\uff0c\u90a3\u4e48\u9700\u8981\u7b49\u5f85 ready writer \u7ed3\u675f\u540e\u518d\u8bfb\u3002</p> </li> </ul> <p>\u4e0a\u9762\u7684\u4ee3\u7801\u662f Reader first\u3002</p> write first <p>\u5728 Readers-Writers \u95ee\u9898\u4e2d\uff0cWrite-First \u7b56\u7565\u4f18\u5148\u8003\u8651\u5199\u8005\uff0c\u786e\u4fdd\u4e00\u65e6\u6709\u5199\u8005\u8bf7\u6c42\u5199\u5165\uff0c\u8bfb\u8005\u5c06\u88ab\u963b\u6b62\uff0c\u76f4\u5230\u5199\u64cd\u4f5c\u5b8c\u6210\u3002\u8fd9\u6837\u53ef\u4ee5\u9632\u6b62\u5199\u8005\u957f\u65f6\u95f4\u7b49\u5f85\uff0c\u4f46\u53ef\u80fd\u5bfc\u81f4\u8bfb\u8005\u5ef6\u8fdf\u3002</p> <p>\u4ee5\u4e0b\u662f Write-First \u7b56\u7565\u7684\u4f2a\u4ee3\u7801\uff1a</p> <p>\u521d\u59cb\u5316\u53d8\u91cf</p> <p>int read_count = 0             // \u5f53\u524d\u6b63\u5728\u8bfb\u7684\u8bfb\u8005\u6570\u91cf boolean writer_waiting = false // \u6307\u793a\u662f\u5426\u6709\u5199\u8005\u7b49\u5f85 semaphore mutex = 1            // \u4fdd\u62a4\u8bfb\u8005\u8ba1\u6570\u5668\u7684\u9501 semaphore write_lock = 1       // \u63a7\u5236\u5bf9\u8d44\u6e90\u7684\u5199\u5165 semaphore read_lock = 1        // \u63a7\u5236\u5bf9\u8d44\u6e90\u7684\u8bfb\u53d6\uff08\u9632\u6b62\u5199\u4f18\u5148\u65f6\u8bfb\u8005\u62a2\u5360\u8d44\u6e90\uff09</p> <p>\u5199\u8005\uff08Writer\uff09\u8fc7\u7a0b <pre><code>writer() {\n    wait(mutex)\n    writer_waiting = true       // \u6807\u8bb0\u6709\u5199\u8005\u7b49\u5f85\n    signal(mutex)\n\n    wait(write_lock)            // \u8bf7\u6c42\u5199\u5165\u6743\u9650\n\n    // \u8fdb\u884c\u5199\u64cd\u4f5c\n    write_data()\n\n    signal(write_lock)          // \u91ca\u653e\u5199\u5165\u6743\u9650\n\n    wait(mutex)\n    writer_waiting = false      // \u6e05\u9664\u5199\u8005\u7b49\u5f85\u6807\u8bb0\n    if (read_count &gt; 0)         // \u82e5\u6709\u8bfb\u8005\u7b49\u5f85\uff0c\u5141\u8bb8\u5176\u8bfb\u53d6\n        signal(read_lock)\n    signal(mutex)\n}\n</code></pre></p> <p>\u8bfb\u8005\uff08Reader\uff09\u8fc7\u7a0b <pre><code>reader() {\n    wait(mutex)\n    if (writer_waiting)         // \u82e5\u6709\u5199\u8005\u7b49\u5f85\uff0c\u963b\u6b62\u8bfb\u8005\u8fdb\u5165\n        wait(read_lock)         // \u7b49\u5f85\u5199\u8005\u5b8c\u6210\u540e\u624d\u5141\u8bb8\u8fdb\u5165\n    read_count += 1\n    if (read_count == 1)        // \u7b2c\u4e00\u4e2a\u8bfb\u8005\u9700\u8981\u83b7\u5f97\u5199\u5165\u6743\u9650\uff08\u9632\u6b62\u5199\u8005\u6253\u65ad\u8bfb\u8005\uff09\n        wait(write_lock)\n    signal(mutex)\n\n    // \u8fdb\u884c\u8bfb\u64cd\u4f5c\n    read_data()\n\n    wait(mutex)\n    read_count -= 1\n    if (read_count == 0)        // \u6700\u540e\u4e00\u4e2a\u8bfb\u8005\u91ca\u653e\u5199\u5165\u6743\u9650\n        signal(write_lock)\n    signal(mutex)\n}\n</code></pre></p> <p>\u4f2a\u4ee3\u7801\u8bf4\u660e:     1.  \u5199\u8005\u4f18\u5148\uff1a\u5199\u8005\u5728\u8bf7\u6c42\u65f6\u4f1a\u8bbe\u7f6e writer_waiting \u6807\u5fd7\uff0c\u5e76\u8bf7\u6c42 write_lock\u3002\u5728\u5199\u8005\u8bf7\u6c42\u5199\u5165\u540e\uff0c\u540e\u7eed\u5230\u6765\u7684\u8bfb\u8005\u5728 read_lock \u5904\u7b49\u5f85\uff0c\u76f4\u5230\u5199\u8005\u5b8c\u6210\u3002     2.  \u8bfb\u8005\u63a7\u5236\uff1a     \u2022   \u7b2c\u4e00\u4e2a\u8bfb\u8005\u8fdb\u5165\u65f6\uff0c\u4f1a\u9501\u5b9a write_lock\uff0c\u9632\u6b62\u5199\u8005\u5728\u8bfb\u8005\u8bfb\u5b8c\u524d\u62a2\u5360\u8d44\u6e90\u3002     \u2022   \u6700\u540e\u4e00\u4e2a\u8bfb\u8005\u79bb\u5f00\u65f6\u91ca\u653e write_lock\uff0c\u5141\u8bb8\u5199\u8005\u8fdb\u5165\u3002     3.  \u5199\u8005\u548c\u8bfb\u8005\u7b49\u5f85\u91ca\u653e\uff1a\u5f53\u5199\u8005\u5b8c\u6210\u540e\uff0c\u82e5\u6709\u8bfb\u8005\u7b49\u5f85\u4e14 read_count &gt; 0\uff0c\u5219\u901a\u8fc7 read_lock \u5141\u8bb8\u8bfb\u8005\u8fdb\u5165\u3002</p>"},{"location":"ZJU_CS/OS/chap06/#dining-philosophers_problem","title":"Dining-philosophers problem","text":"<p>Philosophers spend their lives thinking and eating, they sit in a round table, but don\u2019t interact with each other.  </p> <p>\u6bcf\u6b21\u53ea\u80fd\u62ff\u4e00\u6839\u7b77\u5b50\uff0c\u4f46\u662f\u8981\u62ff\u5230\u4e24\u53ea\u7b77\u5b50\u624d\u80fd\u5403\u996d\u3002\u4f8b\u5982\u5982\u679c\u6bcf\u4e2a\u4eba\u90fd\u5148\u62ff\u81ea\u5df1\u53f3\u8fb9\u7684\u7b77\u5b50\uff0c\u518d\u51c6\u5907\u62ff\u5de6\u8fb9\u7684\u7b77\u5b50\uff0c\u5c31\u4f1a\u5361\u6b7b\u3002</p> <p>Solution: only odd philosophers start left-hand first, and even philosophers start right-hand first. This does not deadlock.</p>"},{"location":"ZJU_CS/OS/chap06/#takeaway","title":"Takeaway","text":"<p>Takeaway</p> <ul> <li>Data race<ul> <li>Less than 2M example</li> <li>Reason</li> </ul> </li> <li>Critical section<ul> <li>Three requirements</li> </ul> </li> <li>Peterson\u2019s Solution</li> <li>Hardware Support for Synchronization<ul> <li>Memory barrier, hardware instruction, atomic variables</li> </ul> </li> <li>Mutex lock</li> <li>Semaphore</li> <li>Linux provides:<ul> <li>atomic integers</li> <li>spinlocks</li> <li>semaphores</li> <li>reader-writer lock</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap07/","title":"Chap07 | Deadlock","text":"<ul> <li>Deadlock problem</li> <li>System model</li> <li>Handling deadlocks<ul> <li>deadlock prevention</li> <li>deadlock avoidance</li> <li>deadlock detection </li> <li>deadlock recovery</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap07/#the_deadlock_problem","title":"The Deadlock Problem","text":"<p>Deadlock: a set of blocked processes each holding a resource and waiting to acquire a resource held by another process in the set. </p> Example <p></p> <p>Note: most OSes do not prevent or deal with deadlocks. </p> <p>Deadlock in program</p> <p>resource allocation graph \u4e2d\u51fa\u73b0\u4e86\u73af\uff0c\u8bf4\u660e\u6709\u6b7b\u9501\u3002  </p>"},{"location":"ZJU_CS/OS/chap07/#system_model_of_deadlock","title":"System Model of deadlock","text":"<ul> <li>Resources: \\(R_1, R_2, \\ldots, R_m\\)<ul> <li>each represents a different resource type e.g. CPU cycles, memory space, I/O devices</li> <li>each resource type \\(R_i\\) has Wi instances</li> </ul> </li> <li>Each process utilizes a resource in the following pattern<ul> <li>request </li> <li>use </li> <li>release</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap07/#four_conditions_of_deadlock","title":"Four Conditions of Deadlock","text":"<p>cheatsheet\u5fc5\u5907</p> <ul> <li> <p>Mutual exclusion: a resource can only be used by one process at a time.</p> <p>\u4e92\u65a5\uff0c\u8d44\u6e90\u5728\u4e00\u4e2a\u65f6\u95f4\u53ea\u80fd\u88ab\u4e00\u4e2a\u8fdb\u7a0b\u4f7f\u7528\u3002</p> </li> <li> <p>Hold and wait: a process holding at least one resource is waiting to acquire additional resources held by other processes.</p> <p>\u5df2\u7ecf\u6709\u4e86\u4e00\u4e9b\u8d44\u6e90\uff0c\u540c\u65f6\u60f3\u8981\u66f4\u591a\u8d44\u6e90\u3002</p> </li> <li> <p>No preemption: a resource can be released only voluntarily by the process holding it, after it has completed its task.</p> <p>\u5df2\u7ecf\u83b7\u5f97\u7684\u8d44\u6e90\u4e0d\u80fd\u88ab\u62a2\u5360\uff0c\u53ea\u80fd\u7531\u81ea\u5df1\u91ca\u653e\u3002</p> </li> <li> <p>Circular wait: there exists a set of waiting processes \\(\\{P_1, P_2, \\ldots, P_m\\}\\)</p> <ul> <li>\\(P_0\\) is waiting for a resource that is held by \\(P_1\\)</li> <li>\\(P_1\\) is waiting for a resource that is held by \\(P_2\\) ...</li> <li>\\(P_{n\u20131}\\) is waiting for a resource that is held by \\(P_n\\)</li> <li>\\(P_n\\) is waiting for a resource that is held by \\(P_0\\)</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap07/#resource-allocation_graph","title":"Resource-Allocation Graph","text":"<ul> <li>Two types of nodes:<ul> <li>\\(P = \\{P_1, P_2, \\ldots, P_n\\}\\), the set of all the processes in the system</li> <li>\\(R = \\{R_1, R_2, \\ldots,R_m\\}\\), the set of all resource types in the system</li> </ul> </li> <li> <p>Two types of edges:</p> <ul> <li> <p>request edge: directed edge \\(P_i \\rightarrow R_j\\)</p> <p>\u8fdb\u7a0b\u9700\u8981\u8fd9\u4e2a\u8d44\u6e90\u3002</p> </li> <li> <p>assignment edge: directed edge \\(R_j \\rightarrow P_i\\)</p> <p>\u8d44\u6e90\u5df2\u7ecf\u5206\u914d\u7ed9\u8fd9\u4e2a\u8fdb\u7a0b\u3002</p> </li> </ul> </li> </ul> <p>Example</p> <p></p> <p>\u8fd9\u91cc\u6ca1\u6709\u6b7b\u9501\uff0cP3 \u5148\u6267\u884c\uff0c\u968f\u540e\u91ca\u653e R3\uff0c\u518d\u6267\u884c P2\uff0c\u6700\u540e P1\u3002 \u4e0b\u9762\u7684\u4f8b\u5b50\u5c31\u6709\u6b7b\u9501\uff1a\uff08\u6709\u73af\uff09 </p> <p>\u8fd9\u91cc\u5982\u679c\u628a R2-&gt;P1 \u62b9\u6389\uff0c\u5c31\u6ca1\u6709\u6b7b\u9501\u4e86\uff08\u56e0\u4e3a R2 \u53e6\u4e00\u4e2a\u8d44\u6e90\u53ef\u4ee5\u7ed9 P3\uff09\uff1b\u5982\u679c\u628a P1-&gt;R1 \u62b9\u6389\uff0c\u4e5f\u6ca1\u6709\u6b7b\u9501\u3002\u5982\u679c\u628a R2-&gt;P1 \u4ee5\u53ca R2 \u7684\u53e6\u4e00\u4e2a\u8d44\u6e90\u62b9\u6389\uff0c\u4ecd\u7136\u6709\u6b7b\u9501\u3002</p> <p>Circular wait does not necessarily lead to deadlock. \u6709\u73af\u4e0d\u4e00\u5b9a\u6709\u6b7b\u9501\uff0c\u4f46\u6709\u6b7b\u9501\u4e00\u5b9a\u6709\u73af\u3002</p> <p>Example</p> <p></p> <p>Note</p> <ul> <li>If graph contains no cycles \\(\\rightarrow\\) no deadlock</li> <li>If graph contains a cycle <ul> <li>if only one instance per resource type, \\(\\rightarrow\\) deadlock</li> <li>if several instances per resource type \\(\\rightarrow\\) possibility of deadlock</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap07/#how_to_handle_deadlocks","title":"How to Handle Deadlocks","text":"<ul> <li>Ensure that the system will never enter a deadlock state<ul> <li>Prevention</li> <li>Avoidance</li> </ul> </li> <li>Allow the system to enter a deadlock state and then recover - database<ul> <li>Deadlock detection and recovery</li> </ul> </li> <li> <p>Ignore the problem and pretend deadlocks never occur in the system</p> <p>\u73b0\u5728\u64cd\u4f5c\u7cfb\u7edf\u90fd\u662f\u8fd9\u6837\u505a\uff0c\u5047\u88c5\u65e0\u4e8b\u53d1\u751f\uff0c\u56e0\u4e3a\u65e0\u6cd5\u63d0\u524d\u9884\u6d4b\u6b7b\u9501\u7684\u53d1\u751f\u3002</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap07/#deadlock_prevention","title":"Deadlock Prevention","text":"<p>\u6253\u7834\u6b7b\u9501\u7684\u4efb\u4e00\u4e00\u4e2a\u6761\u4ef6\u3002</p> <ul> <li> <p>How to prevent mutual exclusion</p> <p>sharable \u7684\u53ef\u4ee5\uff0cnon-sharable \u7684\u6ca1\u529e\u6cd5\u3002</p> </li> <li> <p>How to prevent hold and wait</p> <ul> <li> <p>whenever a process requests a resource, it doesn\u2019t hold any other resources</p> <ul> <li>require process to request all its resources before it begins execution</li> <li> <p>allow process to request resources only when the process has none</p> <p>\u7533\u8bf7\u8d44\u6e90\u65f6\u4e0d\u80fd\u6709\u5176\u4ed6\u8d44\u6e90\uff0c\u8981\u4e00\u6b21\u6027\u7533\u8bf7\u6240\u6709\u9700\u8981\u7684\u8d44\u6e90\u3002</p> </li> </ul> </li> <li> <p>low resource utilization; starvation possible</p> <p>\u5229\u7528\u7387\u4f4e\uff0c\u800c\u4e14\u53ef\u80fd\u6709\u8fdb\u7a0b\u6c38\u8fdc\u62ff\u4e0d\u5230\u6240\u6709\u9700\u8981\u7684\u8d44\u6e90\uff0c\u56e0\u6b64\u65e0\u6cd5\u6267\u884c\u3002</p> </li> </ul> </li> <li> <p>How to prevent no preemption</p> <p>\u53ef\u4ee5\u62a2\uff0c\u4f46\u4e0d\u5b9e\u7528\u3002</p> </li> <li> <p>How to handle circular wait</p> <ul> <li> <p>impose a total ordering of all resource types</p> <p>\u7ed9\u9501\u4e00\u4e2a\u4f18\u5148\u7ea7\u6392\u5e8f\uff0c\u53d6\u9501\u7684\u65f6\u5019\u8981\u6c42\u4ece\u9ad8\u5f80\u4f4e\u53d6\u9501\u3002</p> </li> <li> <p>require that each process requests resources in an increasing order</p> </li> <li>Many operating systems adopt this strategy for some locks.</li> </ul> </li> </ul> <p>For dynamic acquired lock</p> <p>\u6709\u7684\u65f6\u5019\uff0c\u7ed9\u9501\u6392\u5e8f\u7684\u65b9\u6cd5\u4e0d\u9002\u7528\uff1a\u5728\u94f6\u884c\u8f6c\u8d26\u7684\u65f6\u5019\uff0c\u5982\u679c\u90fd\u5148\u9501 from \u518d\u9501 to\uff0c\u5c31\u4f1a\u6b7b\u9501\u3002 </p>"},{"location":"ZJU_CS/OS/chap07/#deadlock_avoidance","title":"Deadlock Avoidance","text":"<p>avoidance \u7528\u4e86\u4e00\u4e9b\u7b97\u6cd5\uff0c\u5728\u5206\u914d\u8d44\u6e90\u4e4b\u524d\uff0c\u5148\u5224\u65ad\u662f\u5426\u4f1a\u6b7b\u9501\uff0c\u5982\u679c\u4f1a\u6b7b\u9501\u5c31\u4e0d\u5206\u914d\u3002</p> <p>Safe State</p> <ul> <li>there exists a sequence \\(&lt;P_1, P_2, \\ldots, P_m&gt;\\) of all processes in the system</li> <li> <p>for each \\(P_i\\), resources that \\(P_i\\) can still request can be satisfied by currently available resources + resources held by all the \\(P_j\\).</p> <p>\u5e8f\u5217\u91cc\u7684\u6bcf\u4e00\u4e2a\u8fdb\u7a0b\u90fd\u53ef\u4ee5\u88ab\u6ee1\u8db3\u3002\uff08\u7a7a\u95f2\u7684\u8d44\u6e90\u548c\u4e4b\u524d\u7684\u8fdb\u7a0b\u91ca\u653e\u7684\u8d44\u6e90\uff09</p> </li> </ul> <p>Safe state can guarantee no deadlock. </p> <ul> <li>if \\(P_i\\)\u2019s resource needs are not immediately available: <ul> <li>wait until all \\(P_j\\) have finished</li> <li>when \\(P_j\\) has finished, \\(P_i\\) can obtain needed resources, </li> </ul> </li> <li>when \\(P_i\\) terminates, \\(P_{i+1}\\) can obtain its needed resources, and so on.</li> </ul> <p>Note</p> <ul> <li>If a system is in safe state \\(\\rightarrow\\) no deadlocks</li> <li>If a system is in unsafe state \\(\\rightarrow\\) possibility of deadlock</li> <li>Deadlock avoidance \\(\\rightarrow\\) ensure a system never enters an unsafe state</li> </ul> <p></p> <p>Example</p> <p></p> <p>What if we allocate 1 more for P2? \u4e0d\u662f\u4e00\u4e2a safe state\uff0c\u56e0\u4e3a\u505a\u5b8c P1 \u540e\uff0c\u6211\u4eec\u53ea\u6709 4 \u4e2a\u53ef\u7528\uff0cP0 \u548c P2 \u90fd\u65e0\u6cd5\u6ee1\u8db3\u3002</p> <ul> <li>Single instance of each resource type \\(\\rightarrow\\) use resource-allocation graph</li> <li>Multiple instances of a resource type \\(\\rightarrow\\) use the banker\u2019s algorithm</li> </ul>"},{"location":"ZJU_CS/OS/chap07/#single-instance_deadlock_avoidance","title":"Single-instance Deadlock Avoidance","text":"<p>Resource-allocation graph can be used for single instance resourcedeadlock avoidance</p> <ul> <li> <p>one new type of edge: claim edge</p> <ul> <li> <p>claim edge \\(P_i\\rightarrow R_j\\) indicates that process \\(P_i\\) may request resource \\(R_j\\)</p> <p>\u60f3\u8981\uff0c\u4f46\u8fd8\u6ca1\u6709 request\u3002</p> </li> <li> <p>claim edge is represented by a dashed line</p> </li> <li>resources must be claimed a priori in the system.</li> </ul> <p>(\u8981\u4e8b\u5148\u58f0\u660e, \u4e0d\u4f18\u96c5)</p> </li> </ul> <p>Transitions in between edges</p> <ul> <li>claim edge converts to request edge when a process requests a resource.</li> <li>request edge converts to an assignment edge when the resource is allocated to the process.</li> <li>assignment edge reconverts to a claim edge when a resource is released by a process.</li> </ul> <p>Algorithm</p> <ul> <li>Suppose that process \\(P_i\\) requests a resource \\(R_j\\)</li> <li>The request can be granted only if:<ul> <li>converting the request edge to an assignment edge does not result in the formation of a cycle. </li> <li>no cycle \\(\\rightarrow\\) safe state</li> </ul> </li> </ul> <p>\u6bd4\u5982\u8fd9\u91cc\u5206\u914d\u4e4b\u540e\u5c31\u6709\u4e00\u4e2a\u73af\uff0cno safe state. </p>"},{"location":"ZJU_CS/OS/chap07/#bankers_algorithm","title":"Banker\u2019s Algorithm","text":"<p>\u6211\u4eec\u901a\u8fc7 available\uff08\u5f53\u524d\u8fd8\u6ca1\u6709\u88ab\u5206\u914d\u7684\u7a7a\u95f2\u8d44\u6e90\uff09, max\uff08\u8fdb\u7a0b\u6240\u9700\u8981\u7684\u8d44\u6e90\uff09, allocation\uff08\u5df2\u7ecf\u5206\u914d\u7684\u8d44\u6e90\uff09, need\uff08\u8fd8\u9700\u8981\u5206\u914d\u591a\u5c11\u8d44\u6e90\uff09 \u8fd9\u56db\u4e2a\u77e9\u9635\u523b\u753b\u4e00\u4e2a\u65f6\u95f4\u5185\u5404\u4e2a\u8fdb\u7a0b\u5bf9\u5404\u79cd\u8d44\u6e90\u7684\u6301\u6709\u548c\u9700\u6c42\u60c5\u51b5\u3002</p> <p>\u9009\u53d6\u4e00\u4e2a need\uff08\u7684\u6bcf\u4e00\u9879\u90fd\u5bf9\u5e94\u5730\uff09\u5c0f\u4e8e available\uff08\u7684\u5bf9\u5e94\u9879\uff09\u7684\u8fdb\u7a0b\uff0c\u5176\u8fd0\u884c\u5b8c\u540e\u4f1a\u5c06 allocation \u91ca\u653e\u56de work\uff08\u524d\u9762\u7684\u8fdb\u7a0b\u6267\u884c\u5b8c\u6bd5\u540e\uff0c\u7a7a\u95f2\u7684\u8d44\u6e90\uff09\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</p> <p>Example</p> <p> </p>"},{"location":"ZJU_CS/OS/chap07/#deadlock_detection","title":"Deadlock Detection","text":"<p>Allow system to enter deadlock state, but detect and recover from it.</p>"},{"location":"ZJU_CS/OS/chap07/#single_instance_resources","title":"Single Instance Resources","text":"<p>\u4f7f\u7528 wait-for graph. </p> <p>\\(P_i \\rightarrow P_j\\) if \\(P_i\\) is waiting for \\(P_j\\) </p> <p>Periodically invoke an algorithm that searches for a cycle in the graph</p> <ul> <li> <p>if there is a cycle, there exists a deadlock</p> <p>\u6709\u73af\u5c31\u6709 deadlock\u3002</p> </li> <li> <p>an algorithm to detect a cycle in a graph requires an order of \\(n^2\\) operations,</p> <ul> <li>where \\(n\\) is the number of vertices in the graph.</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap07/#multi-instance_resources","title":"Multi-Instance Resources","text":"<p>\u7c7b\u4f3c\u94f6\u884c\u5bb6\u7b97\u6cd5\u3002\u5982\u679c\u627e\u4e0d\u5230\u4efb\u4f55\u5b89\u5168\u5e8f\u5217\uff0c\u5219\u8bf4\u660e\u7cfb\u7edf\u5904\u4e8e\u6b7b\u9501\u72b6\u6001\u3002</p> <p>Example</p> <p></p>"},{"location":"ZJU_CS/OS/chap07/#deadlock_recovery","title":"Deadlock Recovery","text":""},{"location":"ZJU_CS/OS/chap07/#terminate_deadlocked_processes","title":"Terminate deadlocked processes.","text":"<p>options:</p> <ul> <li>abort all deadlocked processes.</li> <li>abort one process at a time until the deadlock cycle is eliminated.</li> </ul> <p>In which order should we choose to abort?</p> <ul> <li>priority of the process</li> <li>how long process has computed, and how much longer to completion</li> <li>resources the process has used</li> <li>resources process needs to complete</li> <li>how many processes will need to be terminated</li> <li>is process interactive or batch?</li> </ul>"},{"location":"ZJU_CS/OS/chap07/#resource_preemption","title":"Resource preemption","text":"<ul> <li>Select a victim</li> <li>Rollback</li> <li>Starvation<ul> <li>How could you ensure that the resources do not preempt from the same process?</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap07/#takeaway","title":"Takeaway","text":"<p>Takeaway</p> <ul> <li>Deadlock occurs in which condition?</li> <li>Four conditions for deadlock</li> <li>Deadlock can be modeled via resource-allocation graph</li> <li>Deadlock can be prevented by breaking one of the four conditions</li> <li>Deadlock can be avoided by using the banker\u2019s algorithm</li> <li>A deadlock detection algorithm</li> <li>Deadlock recover</li> </ul>"},{"location":"ZJU_CS/OS/chap08/","title":"Chap08 | Main Memory","text":"<p>Program must be brought (from disk) into memory and placed within a process for it to be run.</p> <p>Main memory and registers are only storage that CPU can access directly.</p> <ul> <li>Register access is done in one CPU clock (or less)</li> <li>Main memory can take many cycles, causing a stall</li> </ul> <p>Protection of memory is required to ensure correct operation.</p>"},{"location":"ZJU_CS/OS/chap08/#partition_evolution","title":"Partition evolution","text":"<p>\u6700\u5f00\u59cb\u6211\u4eec\u628a\u4e00\u4e2a\u7a0b\u5e8f\u52a0\u8f7d\u5230\u7269\u7406\u5185\u5b58\u91cc\uff0c\u53ea\u80fd\u6267\u884c\u4e00\u4e2a job\uff08\u5982\u679c job \u6bd4\u7269\u7406\u5185\u5b58\u8fd8\u5927\u5c31\u8981\u5206\u6cbb\uff09\uff0c\u540e\u6765\u6211\u4eec\u6709\u591a\u4e2a\u8fdb\u7a0b\u8981\u540c\u65f6\u8fdb\u884c\uff0c\u5c31\u4f7f\u7528 partition \u5206\u533a\u7684\u65b9\u6cd5\uff0c\u4e0d\u540c\u7684\u5206\u533a\u6267\u884c\u4e0d\u540c\u7684\u8fdb\u7a0b\u3002</p> <p>Partition requirements</p> <ul> <li>Protection \u2013 keep processes from smashing each other</li> <li>Fast execution \u2013 memory accesses can\u2019t be slowed by protection mechanisms</li> <li>Fast context switch \u2013 can\u2019t take forever to setup mapping of addresses</li> </ul>"},{"location":"ZJU_CS/OS/chap08/#simplest_implementation_-_partition","title":"Simplest Implementation - Partition","text":"<p>Logical address \u903b\u8f91\u5730\u5740\uff0c\u7531\u6211\u4eec\u81ea\u5df1\u5b9a\u4e49\u7684\u5730\u5740\u5f62\u5f0f\u3002CPU \u4e0a\u4f7f\u7528\u7684\u5730\u5740\u90fd\u662f\u903b\u8f91\u5730\u5740\uff0c\u5185\u5b58\u7ba1\u7406\u770b\u5230\u7684\u662f\u7269\u7406\u5730\u5740\u3002CPU \u4e2d\u8981\u5c06\u903b\u8f91\u5730\u5740\u8f6c\u4e3a\u7269\u7406\u5730\u5740\u3002</p> <p>Base and Limit registers</p> <ul> <li>Base added to all addresses</li> <li> <p>Limit checked on all memory references</p> <p>\u6bcf\u6b21\u8bbf\u95ee\u65f6\u68c0\u67e5\u662f\u5426\u8d85\u8fc7\u4e86 Limit\uff0c\u5982\u679c\u662f\u5c31\u8bf4\u660e\u8d8a\u754c\u4e86\u3002</p> </li> <li> <p>Loaded by OS at each context switch</p> <p>\u6bcf\u4e2a\u8fdb\u7a0b\u6709\u81ea\u5df1\u7684 base \u548c limit \u5bc4\u5b58\u5668\uff0c\u6bcf\u6b21\u8fdb\u7a0b\u5207\u6362\u65f6\uff0cOS \u90fd\u4f1a\u5c06 base \u548c limit \u5bc4\u5b58\u5668\u7684\u503c\u66f4\u65b0\u4e3a\u5f53\u524d\u8fdb\u7a0b\u7684\u503c\u3002\uff08\u7ebf\u7a0b\u4e0d\u9700\u8981\uff0c\u56e0\u4e3a\u7ebf\u7a0b\u662f\u5171\u4eab\u7684\u5730\u5740\u7a7a\u95f4\uff09</p> </li> </ul> Example <p></p> <p>Hardware Address Protection CPU must check every memory access generated in user mode to be sure it is between base and limit for that user.</p> <p>CPU \u9996\u5148\u53d1\u51fa\u903b\u8f91\u5730\u5740\uff08\u5373\u504f\u79fb\u91cf\uff09\u968f\u540e\u5224\u65ad\u662f\u5426\u8d85\u8fc7 limit \u8303\u56f4\uff0c\u968f\u540e\u518d\u52a0\u4e0a\u91cd\u5b9a\u4f4d\u5bc4\u5b58\u5668\uff08\u5373 base\uff09\u5c31\u5f97\u5230\u4e86\u771f\u6b63\u7684\u7269\u7406\u5730\u5740\u3002</p> <p>Advantages</p> <ul> <li>Built-in protection provided by Limit<ul> <li>No physical protection per page or block</li> </ul> </li> <li>Fast execution<ul> <li>Addition and limit check at hardware speeds within each instruction</li> </ul> </li> <li>Fast context switch<ul> <li>Need only change base and limit registers</li> </ul> </li> <li>No relocation of program addresses at load time<ul> <li>All addresses relative to zero</li> </ul> </li> <li> <p>Partition can be suspended and moved at any time</p> <ul> <li> <p>Process is unaware of change</p> <p>\u4fee\u6539 base \u5373\u53ef\u79fb\u52a8\u8fdb\u7a0b\uff0c\u8fdb\u7a0b\u662f\u610f\u8bc6\u4e0d\u5230\u7684\u3002</p> </li> <li> <p>Expensive for large processes</p> <p>\u79fb\u52a8\u8fdb\u7a0b\u9700\u8981\u6539 base\uff0c\u8fd8\u8981\u628a\u65e7\u7684\u5185\u5bb9\u5168\u90e8\u6539\u5230\u65b0\u7684\u4f4d\u7f6e\uff0c\u8017\u65f6\u3002</p> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap08/#memory_allocation_strategies","title":"Memory Allocation Strategies","text":"<ul> <li>Fixed partitions</li> <li>Variable partitions</li> </ul> <p>\u53d6\u51b3\u4e8e\u957f\u5ea6\u662f\u5426\u4f1a\u53d8\u5316\u3002</p>"},{"location":"ZJU_CS/OS/chap08/#fixed_partitions","title":"Fixed partitions","text":"<ul> <li>Fixed Partitions \u2013 divide memory into equal sized pieces (except for OS)<ul> <li>Degree of multiprogramming = number of partitions</li> <li> <p>Simple policy to implement</p> <ul> <li> <p>All processes must fit into partition space.</p> <p>\u6bcf\u4e2a piece \u90fd\u53ef\u4ee5\u653e\u4e00\u4e2a\u8fdb\u7a0b\u3002</p> </li> <li> <p>Find any free partition and load process.</p> </li> </ul> </li> </ul> </li> </ul> <p>size \u8981\u5207\u591a\u5927\uff1f\u5982\u679c\u5207\u7684\u592a\u5c0f\uff0c\u53ef\u80fd\u6709\u5927\u8fdb\u7a0b\u65e0\u6cd5\u52a0\u8f7d\u8fdb\u6765\uff1b\u5982\u679c\u5207\u7684\u592a\u5927\uff0c\u4f1a\u6709\u5185\u90e8\u788e\u7247\uff08\u56e0\u4e3a\u5728\u4e00\u4e2a partition \u5185\u90e8\uff09\u3002</p> <p>Internal Fragmentation</p> <p></p> <p>Memory allocated may be larger than the requested size</p> <ul> <li>This size difference is memory internal to a partition, but not being used.</li> <li>Sophisticated algorithms are designed to avoid fragmentation.</li> </ul>"},{"location":"ZJU_CS/OS/chap08/#variable_partitions","title":"Variable partitions","text":"<p>\u957f\u5ea6\u4e0d\u4e00\u81f4\uff0c\u6309\u9700\u5212\u5206\u3002\u5373\u8981\u7ed9\u4e00\u4e2a\u8fdb\u7a0b\u5206\u914d\u7a7a\u95f4\u65f6\uff0c\u6211\u4eec\u627e\u5230\u6bd4\u4ed6\u5927\u7684\u6700\u5c0f\u7684 partition\uff0c\u7136\u540e\u628a\u4ed6\u653e\u8fdb\u53bb\u3002</p> <ul> <li>Memory is dynamically divided into partitions based on process needs<ul> <li>More complex management problem<ul> <li>Need data structures to track free and used memory</li> <li>New process allocated memory from hole large enough to fit it</li> </ul> </li> </ul> </li> <li>Problem \u2013 External Fragmentation<ul> <li> <p>Unused memory between partitions too small to be used by any processes</p> <p>\u5728 partition \u4e4b\u5916\u7684\u7a7a\u95f2\u7a7a\u95f4\u592a\u5c0f\uff0c\u65e0\u6cd5\u88ab\u4efb\u4f55\u8fdb\u7a0b\u4f7f\u7528\u3002</p> </li> </ul> </li> </ul> <p>Example</p> <p></p> <p>How to satisfy a request of size n from a list of free memory blocks?</p> <ul> <li>first-fit: allocate from the first block that is big enough</li> <li>best-fit: allocate from the smallest block that is big enough</li> <li>worst-fit: allocate from the largest hole</li> </ul> <p>Variable partitions \u53ef\u4ee5\u907f\u514d\u5185\u90e8\u788e\u7247\uff0c\u4f46\u65e0\u8bba\u5982\u4f55\u603b\u662f\u6709\u5916\u90e8\u788e\u7247\u3002</p>"},{"location":"ZJU_CS/OS/chap08/#external_fragmentation","title":"External fragmentation","text":"<ul> <li>total amount of free memory space is larger than a request.</li> <li>the request cannot be fulfilled because the free memory is not contiguous.</li> </ul> <p>External fragmentation can be reduced by compaction.</p> <ul> <li>shuffle memory contents to place all free memory in one large block.</li> <li>program needs to be relocatable at runtime.</li> <li>performance overhead, timing to do this operation.</li> </ul> <p>External Fragmentation</p> <p></p>"},{"location":"ZJU_CS/OS/chap08/#segmentation","title":"Segmentation","text":"<p>\u5229\u7528 partition \u7684\u6982\u5ff5\u5b9e\u73b0\u4e86 Segmentation \u7684\u673a\u5236\u3002</p> <p>\u8ba4\u4e3a text\u3001data\u3001stack \u662f\u591a\u4e2a\u533a\u57df\uff0c\u6bcf\u4e2a\u533a\u57df\u5c31\u53ef\u4ee5\u7528\u4e00\u4e2a partition \u6765\u4ee3\u8868\u5b83\u3002</p> <ul> <li> <p>Logical address consists of a pair:</p> <ul> <li> <p><code>&lt;segment-number, offset&gt;</code></p> <p>segment-number \u8868\u793a\u5c5e\u4e8e\u7b2c\u51e0\u7ec4\u3002</p> </li> <li> <p>Offset is the address offset within the segment.</p> </li> <li>Segment table where each entry has:</li> <li>Base: starting physical address</li> <li>Limit: length of segment</li> </ul> </li> </ul> <p>\u6839\u636e number \u5728 table \u91cc\u627e\u5230\u5bf9\u5e94\u7684 base \u548c limit\uff0c\u7136\u540e\u52a0\u4e0a offset \u5c31\u5f97\u5230\u4e86\u771f\u6b63\u7684\u7269\u7406\u5730\u5740\u3002</p> <p>\u5df2\u7ecf\u6709\u903b\u8f91\u5730\u5740\u7684\u6982\u5ff5\uff08\u5373\u5730\u5740\u5982\u4f55\u89e3\u91ca\u662f\u7531\u6211\u4eec\u81ea\u5df1\u5b9a\u4e49\u7684\uff09\uff0c\u4f46\u662f\u6ca1\u6709\u89e3\u51b3\u5916\u90e8\u788e\u7247\u7684\u95ee\u9898\u3002</p>"},{"location":"ZJU_CS/OS/chap08/#address_binding","title":"Address Binding","text":"<p>\u5728\u7a0b\u5e8f\u7684\u4e0d\u540c\u9636\u6bb5\uff0c\u5730\u5740\u6709\u4e0d\u540c\u7684\u8868\u73b0\u65b9\u5f0f\uff1a</p> <ul> <li>source code addresses are usually symbolic. (e.g., variable name)</li> <li>compiler binds symbols to relocatable addresses. (e.g., \u201c14 bytes from beginning of this module\u201d)</li> <li>linker (or loader) binds relocatable addresses to absolute addresses.</li> </ul> <p>\u8be6\u7ec6\u53ef\u89c1 CSAPP Chapter 7.</p> <p>Address binding of instructions and data to memory addresses can happen at three different stages.</p> <ul> <li>Compile time: If memory location known a priori, absolute code can be generated; must recompile code if starting location changes.</li> <li>Load time: Must generate relocatable code if memory location is not known at compile time.</li> <li>Execution time: Binding delayed until run time if the process can be moved during its execution from one memory segment to another.</li> </ul>"},{"location":"ZJU_CS/OS/chap08/#logical_vs_physical_address","title":"Logical vs. Physical Address","text":"<ul> <li> <p>Logical address \u2013 generated by the CPU; also referred to as virtual address.</p> <p>CPU \u770b\u4e0d\u5230\u7269\u7406\u5730\u5740\uff0c\u53ea\u7528\u903b\u8f91\u5730\u5740\uff0c\u9700\u8981\u7ecf\u8fc7\u7279\u5b9a\u7684\u90e8\u4ef6\u8f6c\u5316\u4e3a\u7269\u7406\u5730\u5740\u3002</p> </li> <li> <p>Physical address \u2013 address seen by the memory unit.</p> <p>\u5185\u5b58\u5355\u5143\u53ea\u80fd\u7406\u89e3\u7269\u7406\u5730\u5740\uff0c\u5b83\u662f\u65e0\u6cd5\u6539\u53d8\u7684\u3002</p> </li> </ul> <p>\u903b\u8f91\u5730\u5740\u5bf9\u5e94\u903b\u8f91\u5730\u5740\u7a7a\u95f4\uff08Logical Address Space\uff09\uff0c\u7269\u7406\u5730\u5740\u5bf9\u5e94\u7269\u7406\u5730\u5740\u7a7a\u95f4\uff08Physical Address Space\uff09\u3002</p>"},{"location":"ZJU_CS/OS/chap08/#memory-management_unit","title":"Memory-Management Unit","text":"<p>Hardware device that at run time maps logical to physical address.</p> <p>\u76f8\u5f53\u4e8e\u5728 CPU \u548c\u5185\u5b58\u4e4b\u95f4\u505a\u4e86\u5730\u5740\u7684\u7ffb\u8bd1\u3002</p> <p>MMU</p> <p> </p>"},{"location":"ZJU_CS/OS/chap08/#paging","title":"Paging","text":"<p>Contiguous -&gt; Noncontiguous</p> <p>Physical address space of a process can be noncontiguous; process is allocated physical memory whenever the latter is available. Fixed \u548c Variable \u5212\u5206\u90fd\u662f\u7269\u7406\u8fde\u7eed\u7684\u5206\u914d\uff0cPaging \u662f\u628a\u6240\u6709\u5185\u5b58\u90fd\u53d8\u6210\u4e0d\u8fde\u7eed\u7684\uff0c\u8fd9\u6837\u7a7a\u95f2\u7684\u5185\u5b58\u4e0d\u7ba1\u5728\u54ea\uff0c\u90fd\u53ef\u4ee5\u5206\u914d\u7ed9\u8fdb\u7a0b\uff0c\u907f\u514d\u4e86\u5916\u90e8\u788e\u7247\u3002</p> <p>Basic methods</p> <ul> <li>Divide physical address into fixed-sized blocks called frames\uff08\u5e27\uff09<ul> <li>Size is power of 2, usually 4KB.</li> </ul> </li> <li>Divide logical address into blocks of same size called pages\uff08\u9875\uff09</li> <li>Keep track of all free frames.</li> <li> <p>To run a program of size N pages, need to find N free frames and load program.</p> <p>\u628a N \u4e2a\u5e27\u6620\u5c04\u5230 N \u4e2a\u9875\u3002\uff08\u9875\u548c\u5e27\u662f\u4e00\u6837\u5927\u7684\uff09</p> </li> <li> <p>Set up a mapping to translate logical to physical addresses.</p> <ul> <li> <p>This mapping is called page table.</p> <p>\u5b58\u50a8\u5e27\u5230\u9875\u7684\u6620\u5c04\uff0c\u8fd9\u4e2a\u6570\u636e\u7ed3\u6784\u53eb\u9875\u8868\u3002</p> </li> </ul> </li> </ul> <p>Paging has no external fragmentation, but internal fragmentation.  </p> <ul> <li> <p>worst case internal fragmentation: 1 frame \u2013 1 byte</p> <p>\u524d\u9762\u7684\u9875\u90fd\u88ab\u586b\u6ee1\u4e86\uff0c\u53ea\u6709\u6700\u540e\u7684\u9875\u624d\u4f1a\u6709\u788e\u7247\u3002</p> </li> <li> <p>average internal fragmentation: 1 / 2 frame size</p> </li> </ul> <p>\u9875\u5982\u679c\u5c0f\uff0c\u788e\u7247\u5c11\uff0c\u4f46\u662f\u6620\u5c04\u66f4\u591a\uff0c\u9875\u8868\u9700\u8981\u66f4\u5927\u7684\u7a7a\u95f4\uff1b\u53cd\u4e4b\u9875\u5982\u679c\u5927\uff0c\u788e\u7247\u591a\u4f46\u6620\u5c04\u66f4\u5c11\uff0c\u9875\u8868\u8f83\u5c0f\u3002\u73b0\u5728\u9875\u9010\u6e10\u53d8\u5927\uff08\u56e0\u4e3a\u5185\u5b58\u53d8\u5f97 cheap\uff09\u3002</p>"},{"location":"ZJU_CS/OS/chap08/#page_table","title":"Page Table","text":"<ul> <li>Page table: Stores the logical page to physical frame mapping</li> <li> <p>Frame table</p> <p>\u4e00\u4e2a Bitmap\uff0c\u6807\u8bb0\u54ea\u4e9b frame \u662f\u7a7a\u95f2\u7684\u3002</p> </li> </ul> <p>\u9875\u8868\u4e0d\u5b58\u9875\u53f7\uff08\u9875\u53f7\u7528\u4f5c\u7d22\u5f15\uff09\uff0c\u53ea\u5b58\u7269\u7406\u5e27\u53f7\u3002</p> <p>Example</p> <p> https://cdn.hobbitqia.cc/20231117152200.png</p>"},{"location":"ZJU_CS/OS/chap08/#address_translation","title":"Address Translation","text":"<p>A logical address is divided into:</p> <ul> <li>page number (p) <ul> <li>used as an index into a page table</li> <li>page table entry contains the corresponding physical frame number</li> </ul> </li> <li>page offset (d)<ul> <li>offset within the page/frame</li> <li>combined with frame number to get the physical address</li> </ul> </li> </ul> <p>\u9996\u5148\u628a p \u62ff\u51fa\u6765\uff0c\u5230\u9875\u8868\u91cc\u8bfb\u51fa\u8bfb\u51fa\u7269\u7406\u5e27\u53f7\uff0c\u968f\u540e\u548c d \u62fc\u63a5\u8d77\u6765\u5c31\u5f97\u5230\u4e86\u7269\u7406\u5730\u5740\u3002</p>"},{"location":"ZJU_CS/OS/chap08/#paging_hardware","title":"Paging Hardware","text":"<p>\u65e9\u671f\u60f3\u6cd5\uff1a\u6bcf\u4e2a\u9875\u7528\u4e00\u7ec4\u5bc4\u5b58\u5668\u5b9e\u73b0\uff0c\u4f18\u52bf\u662f\u975e\u5e38\u5feb\uff0c\u4f46\u662f\u7f3a\u70b9\u662f\u5bc4\u5b58\u5668\u6570\u91cf\u6709\u9650\uff0c\u65e0\u6cd5\u5b58\u50a8\u591a\u7684\u9875\u8868\u3002\uff08\u5982 32 bit \u5730\u5740\uff0c20 \u4f4d\u4f5c\u4e3a\u7269\u7406\u9875\u53f7\uff0c\u4f1a\u6709 \\(2^{20}\\) \u4e2a\u9875\uff09</p> <p>One big page table maps logical address to physical address</p> <ul> <li>the page table should be kept in main memory</li> <li> <p>page-table base register (PTBR) points to the page table</p> <p>PTBR \u6307\u5411\u9875\u8868\u7684\u8d77\u59cb\u5730\u5740\u3002\uff08RISC-V \u4e0a\u53eb SATP\uff0cARM \u4e0a\u53eb TTBR\uff0cx86 \u4e0a\u53eb CR3\uff09</p> </li> <li> <p>page-table length register (PTLR) indicates the size of the page table</p> </li> </ul> <p>\u8fd9\u6837\u6bcf\u6b21\u6570\u636e/\u6307\u4ee4\u8bbf\u95ee\u9700\u8981\u4e24\u6b21\u5185\u5b58\u8bbf\u95ee\uff0c\u7b2c\u4e00\u6b21\u628a\u9875\u8868\u8bfb\u51fa\u6765\uff0c\u7b2c\u4e8c\u6b21\u518d\u6839\u636e\u9875\u8868\u53bb\u8bfb\u6570\u636e\u3002</p>"},{"location":"ZJU_CS/OS/chap08/#tlb","title":"TLB","text":"<p>How to reduce memory accesses caused by page table?</p> <ul> <li>CPU can cache the translation to avoid one memory access (TLB)</li> </ul> <p>TLB (translation look-aside buffer) caches the address translation.</p> <ul> <li>TLB hit: if page number is in the TLB, no need to access the page table.</li> <li>TLB miss: if page number is not in the TLB, need to replace one TLB entry.</li> <li> <p>TLB usually use a fast-lookup hardware cache called associative memory.</p> <p>Associative memory: memory that supports parallel search. If page# is in associative memory\u2019s key, return frame# (value) directly.</p> <p>\u4e0e\u9875\u8868\u4e0d\u540c\u7684\u662f\uff0cTLB \u91cc\u5b58\u50a8\u7684\u65e2\u6709 page number \u53c8\u6709 frame number\uff0c\u901a\u8fc7\u6bd4\u8f83 page number \u6765\u627e\u5230\u5bf9\u5e94\u7684 frame number\uff08\u76f8\u5f53\u4e8e\u5168\u76f8\u8054\u7684 cache\uff09\u3002</p> </li> <li> <p>TLB is usually small, 64 to 1024 entries.</p> <p>TLB \u6570\u91cf\u6709\u9650\uff0c\u4e3a\u4e86\u8986\u76d6\u66f4\u5927\u7684\u533a\u57df\uff0c\u6211\u4eec\u4e5f\u60f3\u8981\u628a\u9875\u53d8\u5f97\u66f4\u5927\u3002</p> </li> </ul> <p>\u6bcf\u4e2a\u8fdb\u7a0b\u6709\u81ea\u5df1\u7684\u9875\u8868\uff0c\u6240\u4ee5\u6211\u4eec context switch \u65f6\u4e5f\u8981\u5207\u6362\u9875\u8868\uff0c\u8981\u628a TLB \u6e05\u7a7a\u3002</p> <p>TLB must be consistent with page table</p> <ul> <li>Option I: Flush TLB at every context switch, or, </li> <li> <p>Option II: Tag TLB entries with address-space identifier (ASID) that uniquely identifies a process.</p> <p>\u901a\u7528\u7684\u5168\u5c40 entries \u4e0d\u5237\u6389\uff0c\u628a\u8fdb\u7a0b\u72ec\u6709\u7684 entries \u5237\u6389\u3002</p> </li> </ul> <p>\u5728 MIPS \u4e0a TLB miss \u662f\u7531 OS \u5904\u7406\u7684\uff0c\u4f46\u662f\u5728 RISC-V \u4e0a\u662f\u7531\u786c\u4ef6\u5904\u7406\u7684\u3002</p> <p>EAT (Effective Access Time)</p> <p></p>"},{"location":"ZJU_CS/OS/chap08/#memory_protection","title":"Memory Protection","text":"<p>\u5230\u76ee\u524d\u4e3a\u6b62\uff0c\u9875\u8868\u91cc\u653e\u4e86\u7269\u7406\u5e27\u53f7\u3002\u6211\u4eec\u53ef\u4ee5\u4ee5\u9875\u4e3a\u7c92\u5ea6\u653e\u4e0a\u4fdd\u62a4\u7684\u4e00\u4e9b\u6743\u9650\uff08\u5982\u53ef\u8bfb\u3001\u5199\u3001\u6267\u884c\uff09\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5b9e\u73b0\u5185\u5b58\u4fdd\u62a4\u3002</p> <ul> <li>Each page table entry has a present (aka. valid) bit <ul> <li>present: the page has a valid physical frame, thus can be accessed.</li> </ul> </li> <li>Each page table entry contains some protection bits.<ul> <li>Any violations of memory protection result in a trap to the kernel.</li> </ul> </li> <li> <p>XN: protecting code</p> <ul> <li> <p>Segregate areas of memory for use by either storage of processor instructions (code) or for storage of data.</p> <p>\u4ee3\u7801\u65e0\u8bba\u5728 user \u8fd8\u662f kernel \u72b6\u6001\u4e0b\u90fd\u4e0d\u80fd\u6267\u884c\u3002</p> <p>e.g. Intel: XD(execute disable), AMD: EVP (enhanced virus protection), ARM: XN (execute never)</p> </li> </ul> </li> <li> <p>PXN: Privileged Execute Never</p> <ul> <li> <p>A Permission fault is generated if the processor is executing at EL1(kernel) and attempts to execute an instruction fetched from the corresponding memory region when this PXN bit is 1 (usually user space memory)</p> <p>\u5728\u7279\u6743\u6a21\u5f0f\u4e0b\u4e0d\u80fd\u6267\u884c\u3002</p> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap08/#page_sharing","title":"Page Sharing","text":"<p>Paging allows to share memory between processes</p> <ul> <li>shared memory can be used for inter-process communication</li> <li>shared libraries</li> </ul> <p>\u628a ELF \u91cc\u4e0d\u53d8\u7684\u90e8\u5206\u901a\u8fc7\u9875\u8868\u6620\u5c04\u5230\u4e0d\u540c\u7684\u8fdb\u7a0b\u91cc\u3002 \u5206\u9875\u53ef\u4ee5\u5141\u8bb8\u8fdb\u7a0b\u95f4\u5171\u4eab\u4ee3\u7801\uff0c\u4f8b\u5982\u540c\u4e00\u7a0b\u5e8f\u7684\u591a\u4e2a\u8fdb\u7a0b\u53ef\u4ee5\u4f7f\u7528\u540c\u4e00\u4efd\u4ee3\u7801\uff0c\u53ea\u8981\u8fd9\u4efd\u4ee3\u7801\u662f reentrant code\uff08or non-self-modifying code:never changes between execution\uff09\u3002</p> <p>Example</p> <p>\u56fe\u4e2d\u6240\u8ff0\u7684\u662f\u591a\u4e2a\u8fdb\u7a0b\u5171\u4eab\u4e00\u4efd\u5e93\u4ee3\u7801\uff08ed\uff09\u7684\u60c5\u51b5\u3002 </p>"},{"location":"ZJU_CS/OS/chap08/#structure_of_page_table","title":"Structure of Page Table","text":"<p>Page table must be physically contiguous.</p> <p>\u5982\u679c\u53ea\u6709\u4e00\u7ea7\u7684\u9875\u8868\uff0c\u90a3\u4e48\u9875\u8868\u6240\u5360\u7528\u7684\u5185\u5b58\u5f88\u5927\u3002e.g. 32-bit logical address space and 4KB page size. page table would have 1 million entries (\\(2^{32}\\) / \\(2^{12}\\)). If each entry is 4 bytes -&gt; 4 MB of memory for page table alone.</p> <p>\u6211\u4eec\u9700\u8981\u6709\u65b9\u6cd5\u538b\u7f29\u9875\u8868\u3002</p> <ul> <li>Break up the logical address space into multiple-level of page tables. e.g. two-level page table  </li> <li>First-level page table contains the frame# for second-level page tables.</li> </ul>"},{"location":"ZJU_CS/OS/chap08/#two-level_paging","title":"Two-Level Paging","text":"<p>\u6700\u574f\u60c5\u51b5\u4e0b\uff0c\u5982\u679c\u53ea\u8bbf\u95ee\u7b2c\u4e00\u4e2a\u9875\u548c\u6700\u540e\u4e00\u9875\uff0c\u90a3\u4e48\u53ea\u7528\u4e00\u7ea7\u9875\u8868\u9700\u8981 1K \u4e2a\u9875\u7528\u6765\u653e\u9875\u8868\uff08\u8fd9\u4e2a\u9875\u8868\u6709 \\(2^{20}\\) \u4e2a\u6761\u76ee\uff09\uff0c\u4f46\u662f\u5bf9\u4e8e\u4e8c\u7ea7\u9875\u8868\u5c31\u53ea\u9700\u8981 3 \u4e2a\u9875\u8868\uff081 \u4e2a\u4e00\u7ea7\u548c 2 \u4e2a\u4e8c\u7ea7\u9875\u8868\uff09\uff0c\u5373 3 \u4e2a\u9875\u6765\u653e\u9875\u8868\u3002</p> <p>A logical address is divided into:</p> <ul> <li>a page directory number (first level page table)</li> <li>a page table number (2<sup>nd</sup> level page table)</li> <li>a page offset</li> </ul> <p>Page Table in Linux</p> <p></p>"},{"location":"ZJU_CS/OS/chap08/#64-bit_logical_address_space","title":"64-bit Logical Address Space","text":"<p>64 bit \u4e0b\uff0c\u6bcf\u4e2a\u9875\u8868 entry \u53d8\u4e3a 8B\uff0c\u56e0\u6b64\u4e00\u4e2a\u9875\u53ef\u4ee5\u653e \\(2^9=512\\) entries\u3002</p> <ul> <li>64-bit logical address space requires more levels of paging</li> <li>usually not support full 64-bit virtual address space.<ul> <li>AMD-64 supports 48-bit</li> <li>ARM64 supports 39-bit, 48-bit</li> </ul> </li> </ul> <p>ARM64</p> <p>ARM64: 39 bits = 9+9+9+12 </p> <p>\u9875\u8868\u91cc\u5b58\u7684\u90fd\u662f\u7269\u7406\u5730\u5740\uff08\u7269\u7406\u9875\u53f7\uff09</p> <p>\u9875\u8868\u4e3a\u4ec0\u4e48\u53ef\u4ee5\u7701\u5185\u5b58\uff0c\u5982\u679c\u6b21\u7ea7\u9875\u8868\u5bf9\u5e94\u7684\u9875\u90fd\u6ca1\u6709\u88ab\u4f7f\u7528\uff0c\u5c31\u4e0d\u9700\u8981\u5206\u914d\u8fd9\u4e2a\u9875\u8868\u3002</p> Page Table Quiz <p></p> <p>\u5982\u679c\u9875\u9762\u5927\u5c0f\u53d8\u5927\uff08\u5982 64KB\uff09\uff0c\u9875\u9762 offset \u4f4d\u6570\u53d8\u591a\uff0c\u524d\u9762\u53ef\u7528\u6765\u7d22\u5f15\u9875\u8868\u7684\u4f4d\u6570\u5c31\u53d8\u5c11\u4e86\uff0c\u9875\u8868\u7684\u5c42\u7ea7\u5c31\u53ef\u80fd\u53d8\u5c11\u3002</p>"},{"location":"ZJU_CS/OS/chap08/#hashed_page_tables","title":"Hashed Page Tables","text":"<p>In hashed page table, virtual page# is hashed into a frame#.</p> <ul> <li> <p>Each element contains: page#, frame#, and a pointer to the next element (resolving conflict)</p> <p>\u54c8\u5e0c\u9875\u8868\u7684\u6bcf\u4e00\u4e2a\u6761\u76ee\u9664\u4e86 page number \u548c frame number \u4ee5\u5916\uff0c\u8fd8\u6709\u4e00\u4e2a\u6307\u5411\u6709\u540c\u4e00\u54c8\u5e0c\u503c\u7684\u4e0b\u4e00\u4e2a\u9875\u8868\u9879\u7684\u6307\u9488\u3002\u8fd9\u4e2a\u7ed3\u6784\u4e0e\u4e00\u822c\u7684\u54c8\u5e0c\u8868\u662f\u4e00\u81f4\u7684\u3002</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap08/#inverted_page_tables","title":"Inverted Page Tables","text":"<p>Inverted page tables \u7d22\u5f15 physical address \u800c\u4e0d\u662f logical address\uff0c\u4e5f\u5c31\u662f\u8bf4\uff0c\u6574\u4e2a\u7cfb\u7edf\u53ea\u6709\u4e00\u4e2a\u9875\u8868\uff0c\u5e76\u4e14\u6bcf\u4e2a\u7269\u7406\u5185\u5b58\u7684 frame \u53ea\u6709\u4e00\u6761\u76f8\u5e94\u7684\u6761\u76ee\u3002\u5bfb\u5740\u65f6\uff0cCPU \u904d\u5386\u9875\u8868\uff0c\u627e\u5230\u5bf9\u5e94\u7684 pid \u548c page number\uff0c\u5176\u5728\u9875\u8868\u4e2d\u6240\u5904\u7684\u4f4d\u7f6e\u5373\u4e3a frame number\u3002</p> <p>\u6bcf\u6b21\u8981\u904d\u5386\u6574\u4e2a\u9875\u8868\uff0c\u6548\u7387\u4f4e\u4e0b\u3002\u800c\u4e14\u8fd9\u6837\u4e0d\u80fd\u5171\u4eab\u5185\u5b58\uff08\u56e0\u4e3a\u4e00\u4e2a\u7269\u7406\u5e27\u53ea\u80fd\u6620\u5c04\u5230\u4e00\u4e2a\u9875\uff09\u3002</p>"},{"location":"ZJU_CS/OS/chap08/#swapping","title":"Swapping","text":"<ul> <li>Swapping extends physical memory with backing disks.<ul> <li>A process can be swapped temporarily out of memory to a backing store.</li> <li>The process will be brought back into memory for continued execution.</li> </ul> </li> <li>Swapping is usually only initiated under memory pressure.</li> <li>Context switch time can become very high due to swapping.</li> </ul> <p>\u7528 disk \u5907\u4efd\u5185\u5b58\uff08\u56e0\u4e3a\u5185\u5b58\u53ef\u80fd\u4e0d\u591f\u7528\uff09\uff0c\u5c31\u628a frame \u7684\u503c\u4ea4\u6362\u5230 disk \u4e0a\uff0c\u7136\u540e\u628a frame \u91ca\u653e\u51fa\u6765\u3002\u5f53\u8fdb\u7a0b\u8981\u6267\u884c\u7684\u65f6\u5019\uff0c\u518d\u628a frame \u4ece disk \u8bfb\u56de\u6765\u3002\u6362\u56de\u6765\u65f6\u4e0d\u9700\u8981\u76f8\u540c\u7684\u7269\u7406\u5730\u5740\uff0c\u4f46\u662f\u903b\u8f91\u5730\u5740\u8981\u662f\u4e00\u6837\u7684\u3002</p> <p>Swapping with Paging</p>"},{"location":"ZJU_CS/OS/chap08/#takeaway","title":"Takeaway","text":"<p>Takeaway</p> <ul> <li> <ul> <li>Partition evolution</li> </ul> </li> <li>Contiguous allocation<ul> <li>Fixed, variable<ul> <li>first, best, worst fit</li> <li>fragmentation: internal/ external</li> </ul> </li> <li>Segmentation<ul> <li>Logical address vs physical address</li> </ul> </li> </ul> </li> <li>Fragmentation<ul> <li>Internal\uff0c external</li> </ul> </li> <li>MMU: address translation + protection</li> <li>Paging<ul> <li>Page table<ul> <li>Hierarchical, hashed page table, inverted</li> <li>Two-level, three-level, four-level</li> <li>For 32 bits and 64 bits architectures</li> </ul> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap09/","title":"Chap09 | Virtual Memory","text":""},{"location":"ZJU_CS/OS/chap09/#introduction","title":"Introduction","text":"<p>\u4ee3\u7801\u9700\u8981\u5728\u5185\u5b58\u91cc\u6267\u884c\uff0c\u4f46\u662f\u6574\u4e2a\u7a0b\u5e8f\u51e0\u4e4e\u4e0d\u4f1a\u540c\u65f6\u88ab\u4f7f\u7528\u3002 \u6bd4\u5982\u6211\u4eec\u7684\u4ee3\u7801\u5728 3 \u9875\u91cc\uff0c\u6700\u5f00\u59cb\u6267\u884c\u65f6\u53ea\u6709\u7b2c\u4e00\u9875\u5728\u5185\u5b58\u91cc\uff0c\u540e\u9762\u7684\u9875\u9700\u8981\u5728\u9700\u8981\u7684\u65f6\u5019\u624d\u4f1a\u88ab\u52a0\u8f7d\u5230\u5185\u5b58\u91cc\u3002\u5373\u6211\u4eec\u53ef\u4ee5\u628a\u8fd8\u6ca1\u7528\u5230\u7684 code \u548c data \u5ef6\u8fdf\u52a0\u8f7d\u5230\u5185\u5b58\u91cc\uff0c\u7528\u5230\u65f6\u518d\u52a0\u8f7d\u3002</p> <p>Consider ability to execute partially-loaded program</p> <ul> <li>program no longer constrained by limits of physical memory</li> <li>programs could be larger than physical memory</li> </ul> <p>\u4e3a\u4e86\u5b9e\u73b0\u90e8\u5206\u52a0\u8f7d\uff0c\u6211\u4eec\u6709\u4e00\u4e2a\u865a\u62df\u5185\u5b58\uff08\u5728\u8fd9\u95e8\u8bfe\u91cc\u548c\u903b\u8f91\u5730\u5740\u662f\u7b49\u4ef7\u7684\uff09\u7684\u6982\u5ff5\uff0c\u4e3b\u8981\u9760 Paging \u6765\u5b9e\u73b0\u3002</p> <p>Virtual memory is larger than physical memory. \u9700\u8981\u6ce8\u610f\u7684\u662f\u865a\u62df\u5730\u5740\u53ea\u662f\u8303\u56f4\uff0c\u5e76\u4e0d\u80fd\u771f\u6b63\u7684\u5b58\u50a8\u6570\u636e\uff0c\u6570\u636e\u53ea\u80fd\u5b58\u5728\u7269\u7406\u7a7a\u95f4\u91cc\u3002</p> <p>Virtual-address Space</p> <p></p>"},{"location":"ZJU_CS/OS/chap09/#demand_paging","title":"Demand Paging","text":"<p>Demand paging brings a page into memory only when it is demanded.</p> <ul> <li> <p>demand means access (read/write)</p> <p>\u5f53\u6211\u4eec\u8981\u8bfb\u5199\u8fd9\u4e2a\u9875\u7684\u65f6\u5019\uff0c\u8bf4\u660e\u9700\u8981\u8fd9\u4e2a\u9875\uff0c\u8fd9\u65f6\u518d\u628a\u8fd9\u4e00\u9875\u8c03\u5165\u5185\u5b58\u3002</p> </li> <li> <p>if page is invalid (error) -&gt; abort the operation.</p> </li> <li>if page is valid but not in memory (physical) -&gt; bring it to memory.<ul> <li>This is called page fault.</li> <li>no unnecessary I/O, less memory needed, slower response, more apps.</li> </ul> </li> </ul> <p>Some questions about demand paging:</p> <ul> <li>Demand paging vs page fault<ul> <li>What is the relationship?</li> </ul> </li> <li>What causes page fault\uff1f<ul> <li>User space program accesses an address</li> </ul> </li> <li>Which hardware issues page fault?<ul> <li>MMU</li> </ul> </li> <li>Who handles page fault\uff1f<ul> <li>Operating system</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap09/#what_causes_page_fault","title":"What causes page fault?","text":"<p>Example</p> <p><code>malloc</code> \u6700\u540e\u4e5f\u4f1a\u8c03\u7528 <code>brk()</code>\uff0c\u589e\u957f\u5806\u7684\u5927\u5c0f\u3002 VMA \u662f Virtual Memory Area\uff0c<code>brk()</code> \u53ea\u662f\u589e\u5927\u4e86 VMA \u7684\u5927\u5c0f\uff08\u4fee\u6539 <code>vm_end</code>\uff09\uff0c\u4f46\u662f\u5e76\u6ca1\u6709\u771f\u6b63\u7684\u5206\u914d\u5185\u5b58\uff0c\u53ea\u6709\u5f53\u6211\u4eec\u771f\u6b63\u8bbf\u95ee\u8fd9\u4e2a\u5730\u5740\u7684\u65f6\u5019\uff0c\u4f1a\u89e6\u53d1 page fault\uff0c\u7136\u540e\u627e\u4e00\u4e2a\u7a7a\u95f2\u5e27\u771f\u6b63\u5206\u914d\u5185\u5b58\uff0c\u5e76\u505a\u4e86\u6620\u5c04\u3002 </p> <p>MMU issues page fault.</p> <p>Each page table entry has a valid\u2013invalid (present) bit</p> <ul> <li>v -&gt; frame mapped, i -&gt; frame not mapped</li> <li>initially, valid\u2013invalid bit is set to i on all entries</li> <li> <p>during address translation, if the entry is invalid, it will trigger a page fault.</p> <p>\u5373\u8d70\u5230\u9875\u8868\u6700\u4f4e\u5c42\u7684\u65f6\u5019\u53d1\u73b0\u5bf9\u5e94\u7684\u6761\u76ee\u7684 valid bit \u4e0d\u4e3a 1\uff0c\u8bf4\u660e\u5e76\u6ca1\u6709\u6620\u5c04\uff0c\u5c31\u89e6\u53d1\u4e86 page fault\u3002</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap09/#who_handles_page_fault","title":"Who handles page fault?","text":"<p>Linux implementation</p> <p>Page Fault \u51fa\u73b0\u6709\u4e24\u79cd\u60c5\u51b5\uff0c\u4e00\u79cd\u662f\u5730\u5740\u672c\u8eab\u8d85\u8fc7\u4e86 <code>vma</code> \u7684\u8303\u56f4\uff0c\u6216\u8005\u843d\u5728 Heap \u5185\u4f46\u6743\u9650\u4e0d\u5bf9\uff0c\u8fd9\u79cd\u60c5\u51b5\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u6740\u6b7b\u8fdb\u7a0b\uff1b\u4e00\u79cd\u662f\u843d\u5728 Heap \u91cc\uff0c\u800c\u4e14\u6743\u9650\u4e5f\u6b63\u786e\uff0c\u90a3\u4e48\u8fd9\u4e2a\u65f6\u5019 OS \u5c31\u4f1a\u5206\u914d\u4e00\u4e2a\u7a7a\u95f2\u5e27\uff0c\u7136\u540e\u628a\u8fd9\u4e2a\u9875\u6620\u5c04\u5230\u8fd9\u4e2a\u5e27\u4e0a\u3002</p> <p>\u4e3a\u4e86\u5224\u65ad\u5730\u5740\u662f\u5426\u843d\u5728 vma \u91cc\uff0cLinux \u4f7f\u7528\u4e86\u7ea2\u9ed1\u6811\u6765\u52a0\u901f\u67e5\u627e\u3002</p> <p>Page Fault Handling</p>"},{"location":"ZJU_CS/OS/chap09/#page_fault","title":"Page Fault","text":"<ul> <li>First reference to a non-present page will trap to kernel: page fault.</li> <li> <p>Operating system looks at memory mapping to decide:</p> <ul> <li> <p>invalid reference -&gt; deliver an exception to the process</p> <ul> <li> <p>Via check vma in Linux</p> <p>\u6ce8\u610f\u8fd9\u91cc\u7684 valid \u4e0d\u662f\u6307 page table \u7684\u6709\u6548\uff0c\u800c\u662f\u8bbf\u95ee\u7684\u5730\u5740\u5728 vma \u91cc\uff0c\u800c\u4e14\u6743\u9650\u6b63\u786e\u3002</p> </li> </ul> </li> <li> <p>valid but not in physical memory -&gt; bring in</p> <ul> <li>get an empty physical frame</li> <li>bring page into frame via disk operation</li> <li>set page table entry to indicate the page is now in memory</li> <li>restart the instruction that caused the page fault</li> </ul> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap09/#swapper","title":"swapper","text":"<ul> <li>Lazy swapper: never swaps a page in memory unless it will be needed.<ul> <li>the swapper that deals with pages is also caller a pager.</li> </ul> </li> <li>Pre-Paging: pre-page all or some of pages a process will need, before they are referenced.<ul> <li>it can reduce the number of page faults during execution.</li> <li>if pre-paged pages are unused, I/O and memory was wasted.</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap09/#get_free_frame","title":"Get Free Frame","text":"<p>Most operating systems maintain a free-frame list -- a pool of free frames for satisfying such requests.</p> <p>Page fault \u53d1\u751f\u65f6\uff0cOS \u5c31\u4ece free list \u91cc\u62ff\u4e00\u4e2a\u7a7a\u95f2\u5e27\u8fdb\u884c\u5206\u914d\u3002</p> <p>Operating system typically allocate free frames using a technique known as zero-fill-on-demand -- the content of the frames zeroed out before being allocated. \u4e3a\u4e86\u9632\u6b62\u4fe1\u606f\u6cc4\u9732\uff0c\u5728\u5206\u914d\u65f6\u628a\u5e27\u7684\u6240\u6709\u4f4d\u90fd\u7f6e 0\u3002</p> <p>Stages in Demand Paging \u2013 Worse Case</p> <ol> <li>Trap to the operating system.  </li> <li>Save the user registers and process state. (<code>pt_regs</code>)  </li> <li>Determine that the interrupt was a page fault.  </li> <li>Check that the page reference was legal and determine the location of the page on the disk.  </li> <li>Issue a read from the disk to a free frame:     5.1 Wait in a queue for this device until the read request is serviced.     5.2 Wait for the device seek and/or latency time.     5.3 Begin the transfer of the page to a free frame.  </li> <li>While waiting, allocate the CPU to other process.  </li> <li>Receive an interrupt from the disk I/O subsystem. (I/O completed)      7.1 Determine that the interrupt was from the disk.     7.2 Mark page fault process ready.  </li> <li>Handle page fault: wait for the CPU to be allocated to this process again.     8.1 Save registers and process state for other process.     8.2 Context switch to page fault process.     8.3 Correct the page table and other tables to show page is now in memory.  </li> <li>Return to user: restore the user registers, process state, and new page table, and then resume the interrupted instruction.  </li> </ol> <p></p>"},{"location":"ZJU_CS/OS/chap09/#demand_paging_optimizations","title":"Demand Paging Optimizations","text":"<p>Page fault rate: \\(0\\leq p\\leq 1\\). Effective Access Time(EAT): \\((1-p)\\)\\(\\times\\) memory access \\(+\\) p\\(\\times\\)\\((\\)page fault overhead \\(+\\) swap page out \\(+\\) swap page in \\(+\\) instruction restart overhead\\()\\)</p> <p>Demand Paging Example</p> <p></p> <ul> <li>Swap space I/O faster than file system I/O even if on the same device.<ul> <li>Swap allocated in larger chunks, less management needed than file system.</li> </ul> </li> <li>Demand page in from program binary on disk, but discard rather than paging out when freeing frame (and reload from disk next time)<ul> <li>Following cases still need to write to swap space<ul> <li>Pages not associated with a file (like stack and heap) \u2013 anonymous memory</li> <li>Pages modified in memory but not yet written back to the file system</li> </ul> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap09/#copy-on-write","title":"Copy-on-Write","text":"<p>Copy-on-write (COW) allows parent and child processes to initially share the same pages in memory.</p> <p>\u63d0\u5347 fork \u6548\u7387\uff0c\u6700\u5f00\u59cb\u9875\u90fd\u662f\u5171\u4eab\u7684\uff0c\u53ea\u6709\u5f53\u7236\u8fdb\u7a0b\u6216\u5b50\u8fdb\u7a0b\u4fee\u6539\u4e86\u9875\u7684\u5185\u5bb9\u65f6\uff0c\u624d\u4f1a\u771f\u6b63\u4e3a\u4fee\u6539\u7684\u9875\u5206\u914d\u5185\u5b58\u3002</p> <p>vfork syscall optimizes the case that child calls exec immediately after fork.</p> <ul> <li>parent is suspend until child exits or calls exec.</li> <li> <p>child shares the parent resource, including the heap and the stack.</p> <ul> <li> <p>child cannot return from the function or call <code>exit</code>, should call <code>_exit</code>.</p> <p>\u5171\u4eab\u5806\u548c\u6808\uff0c\u6240\u4ee5\u5982\u679c\u8c03\u7528 <code>exit</code> \u5c31\u4f1a\u5f04\u4e71\u7236\u8fdb\u7a0b\u7684\u5806\u548c\u6808\uff0c\u56e0\u6b64\u53ea\u80fd\u8c03\u7528 <code>_exit</code>\u3002</p> </li> </ul> </li> <li> <p>vfork could be fragile, it is invented when COW has not been implemented.</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap09/#page_replacement","title":"Page Replacement","text":"<p>\u6ca1\u6709\u7a7a\u95f2\u7684\u7269\u7406\u5e27\u65f6\u5e94\u8be5\u600e\u4e48\u529e\u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u4ea4\u6362\u51fa\u53bb\u4e00\u6574\u4e2a\u8fdb\u7a0b\u4ece\u800c\u91ca\u653e\u5b83\u7684\u6240\u6709\u5e27\uff1b\u66f4\u5e38\u89c1\u5730\uff0c\u6211\u4eec\u627e\u5230\u4e00\u4e2a\u5f53\u524d\u4e0d\u5728\u4f7f\u7528\u7684\u5e27\uff0c\u5e76\u91ca\u653e\u5b83\u3002</p> <p>Page replacement \u2013 find some page in memory, but not really in use, page it out.  </p> <p>\u4e0e\u7269\u7406\u5730\u5740\u65e0\u5173</p>"},{"location":"ZJU_CS/OS/chap09/#page_replacement_mechanism","title":"Page Replacement Mechanism","text":"<p>Page Fault Handler (with Page Replacement)</p> <p>To page in a page:</p> <ul> <li>find the location of the desired page on disk</li> <li>find a free frame:<ul> <li>if there is a free frame, use it</li> <li>if there is none, use a page replacement policy to pick a victim frame, write victim frame to disk if dirty</li> </ul> </li> <li>bring the desired page into the free frame; update the page tables</li> <li>restart the instruction that caused the trap.</li> </ul> <p>\u4e00\u6b21 page fault \u53ef\u80fd\u53d1\u751f 2 \u6b21 page I/O\uff0c\u4e00\u6b21 out(\u53ef\u80fd\u8981\u628a\u810f\u9875\u5199\u56de) \u4e00\u6b21 in\u3002</p>"},{"location":"ZJU_CS/OS/chap09/#page_replacement_algorithms","title":"Page Replacement Algorithms","text":"<p>FIFO, optimal, LRU, LFU, MFU...</p> <p>\u5982\u4f55\u8bc4\u4ef7\u4e00\u4e2a\u7b97\u6cd5\u597d\u574f\uff1a\u7528\u4e00\u4e32 memory reference string\uff0c\u6bcf\u4e2a\u6570\u5b57\u90fd\u662f\u4e00\u4e2a\u9875\u53f7\uff0c\u7ed9\u51fa\u7269\u7406\u9875\u7684\u6570\u91cf\uff0c\u770b\u6709\u591a\u5c11\u4e2a page faults\u3002</p>"},{"location":"ZJU_CS/OS/chap09/#first-in-first-out_fifo","title":"First-In-First-Out (FIFO)","text":"<p>FIFO: replace the first page loaded.</p> <p>For FIFO, adding more frames can cause more page faults! It's called Belady's Anomaly.</p> <p>Example</p> <p></p>"},{"location":"ZJU_CS/OS/chap09/#optimal_algorithm","title":"Optimal Algorithm","text":"<p>Optimal: replace page that will not be used for the longest time.</p> <p>How do you know which page will not be used for the longest time?</p> <ul> <li>can\u2019t read the future.</li> <li> <p>used for measuring how well your algorithm performs.</p> <p>\u65e0\u6cd5\u9884\u6d4b\u672a\u6765\u4ec0\u4e48\u65f6\u5019\u4f1a\u8bbf\u95ee\u8fd9\u4e9b\u9875\uff0c\u56e0\u6b64\u53ea\u80fd\u7528\u6765\u8bc4\u4ef7\u7b97\u6cd5\u7684\u597d\u574f\u3002</p> </li> </ul> <p>Example</p> <p>\u76f8\u540c\u7684\u4f8b\u5b50\uff0c\u53ea\u6709 9 \u6b21 page fault. </p>"},{"location":"ZJU_CS/OS/chap09/#least_recently_used_lru","title":"Least Recently Used (LRU)","text":"<p>LRU replaces pages that have not been used for the longest time.</p> <p>LRU and OPT do NOT have Belady\u2019s Anomaly.</p> <p>Example</p> <p>12 page faults. </p> <p>How to implement LRU?</p> <ul> <li> <p>counter-based</p> <ul> <li> <p>every page table entry has a counter.</p> <p>\u5b58\u4e86\u4e00\u4e2a\u65f6\u95f4\u6233\uff0c\u6bcf\u6b21\u8bbf\u95ee\u8fd9\u4e2a\u9875\u7684\u65f6\u5019\u66f4\u65b0\u65f6\u95f4\u6233\u3002\u9700\u8981\u9a71\u9010\u7684\u65f6\u5019\u627e\u65f6\u95f4\u6233\u6700\u5c0f\u7684\u9875\u3002</p> </li> <li> <p>every time page is referenced, copy the clock into the counter.</p> </li> <li>when a page needs to be replaced, search for page with smallest counter.</li> </ul> </li> <li> <p>stack-based</p> <ul> <li>keep a stack of page numbers (in double linked list).</li> <li> <p>when a page is referenced, move it to the top of the stack.</p> <p>\u5f53\u4e00\u4e2a\u9875\u88ab\u8bbf\u95ee\u7684\u65f6\u5019\uff0c\u628a\u5b83\u79fb\u5230\u6808\u9876\u3002</p> </li> <li> <p>each update is more expensive, but no need to search for replacement.</p> </li> </ul> </li> </ul> LRU Implementation <p></p> <p>LRU Approximation Implementation: Counter-based and stack-based LRU have high performance overhead. \u65f6\u95f4\u6233\u53ef\u80fd\u5f88\u5927\uff0c\u6211\u4eec\u6709\u8fd1\u4f3c\u7684\u529e\u6cd5\u3002</p> <ul> <li> <p>LRU approximation with a reference bit.</p> <ul> <li>associate with each page a reference bit, initially set to 0.</li> <li>when page is referenced, set the bit to 1 (done by the hardware).</li> <li>replace any page with reference bit = 0 (if one exists).</li> <li> <p>We do not know the order, however.</p> <p>\u5f53\u6240\u6709\u4f4d\u90fd\u8bbe\u4e3a 1 \u7684\u65f6\u5019\u5c31\u53ea\u80fd\u968f\u673a\u9009\u4e00\u4e2a\uff0c\u800c\u4e14\u6211\u4eec\u65e0\u6cd5\u77e5\u9053\u4ed6\u4eec\u7684\u8bbf\u95ee\u987a\u5e8f\u3002</p> </li> </ul> </li> <li> <p>Additional-Reference-Bits Algorithm</p> <ul> <li>8-bits byte for each page</li> <li>During a time interval (100ms), shifts bit rights by 1 bit, sets the high bit if used, and then discards the low-order bits.</li> </ul> </li> <li> <p>Second-chance algorithm</p> <ul> <li>Clock replacement</li> <li>If page to be replaced has <ul> <li>Reference bit = 0 -&gt; replace it</li> <li> <p>reference bit = 1 then:</p> <ul> <li>set reference bit 0, leave page in memory</li> <li>replace next page, subject to same rules</li> </ul> <p></p> </li> </ul> </li> </ul> </li> <li> <p>Enhanced Second-Chance Algorithm</p> <ul> <li>Improve algorithm by using reference bit and modify bit (if available) in concert.</li> <li>Take ordered pair (reference, modify):<ul> <li>(0, 0) neither recently used not modified \u2013 best page to replace.</li> <li>(0, 1) not recently used but modified \u2013 not quite as good, must write out before replacement.</li> <li>(1, 0) recently used but clean \u2013 probably will be used again soon.</li> <li>(1, 1) recently used and modified \u2013 probably will be used again soon and need to write out before  replacement.</li> </ul> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap09/#counting-based_page_replacement","title":"Counting-based Page Replacement","text":"<p>Keep the number of references made to each page.</p> <ul> <li>Least Frequently Used (LFU) replaces page with the smallest counter.</li> <li>Most Frequently Used (MFU) replaces page with the largest counter.</li> <li>LFU and MFU are not common.</li> </ul>"},{"location":"ZJU_CS/OS/chap09/#page-buffering_algorithms","title":"Page-Buffering Algorithms","text":"<ul> <li> <p>Keep a pool of free frames, always</p> <ul> <li> <p>frame available when needed, no need to find at fault time.</p> <p>\u7ef4\u6301\u4e00\u4e2a\u7a7a\u95f2\u5e27\u7684\u6c60\u5b50\uff0c\u5f53\u9700\u8981\u7684\u65f6\u5019\u76f4\u63a5\u4ece\u6c60\u5b50\u91cc\u53d6\u4e00\u4e2a\u5373\u53ef\u3002</p> </li> <li> <p>When convenient, evict victim.</p> <p>\u7cfb\u7edf\u4e0d\u7e41\u5fd9\u7684\u65f6\u5019\uff0c\u5c31\u628a\u4e00\u4e9b victime frame \u91ca\u653e\u6389\u3002\uff08\u5199\u56de\u5230\u78c1\u76d8\uff0c\u8fd9\u6837\u5e27\u53ef\u4ee5\u52a0\u5230 free list \u91cc\uff09</p> </li> </ul> </li> <li> <p>Possibly, keep list of modified pages.</p> </li> <li>Possibly, keep free frame contents intact and note what is in them - a kind of cache.</li> </ul> <p>Memory intensive applications can cause double buffering - a waste of memory. User \u548c OS \u90fd\u7f13\u5b58\u4e86\u540c\u4e00\u4efd\u5185\u5bb9\uff0c\u5bfc\u81f4\u4e00\u4e2a\u6587\u4ef6\u5360\u7528\u4e86\u4e24\u4e2a\u5e27\u3002   </p> <p>Operating system can given direct access to the disk, getting out of the way of the applications - Raw disk mode. \u8d4b\u4e88\u64cd\u4f5c\u7cfb\u7edf\u76f4\u63a5\u8bbf\u95ee\u78c1\u76d8\u7684\u6743\u9650\u3002</p>"},{"location":"ZJU_CS/OS/chap09/#allocation_of_frames","title":"Allocation of Frames","text":"<p>Each process needs minimum number of frames - according to instructions semantics. e.g. IBM 370 \u2013 6 pages to handle SS MOVE instruction.</p> <p>\u7ed9\u4e0d\u540c\u7684\u8fdb\u7a0b\u5206\u914d frame\uff0c\u6211\u4eec\u8be5\u5982\u4f55\u5206\u914d\uff1f</p> <ul> <li>Equal allocation</li> <li>Proportional allocation - Allocate according to the size of process.</li> </ul> <p>\u5f53\u5e27\u4e0d\u591f\u7528\u7684\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u6709\u66ff\u6362\u3002</p> <ul> <li> <p>Global replacement \u2013 process selects a replacement frame from the set of all frames; one process can take a frame from another.</p> <p>\u53ef\u4ee5\u62a2\u5176\u4ed6\u8fdb\u7a0b\u7684\u5e27\u3002</p> <ul> <li> <p>Reclaiming Pages: page replacement is triggered when the list falls below a certain threshold.</p> <p>\u5982\u679c free list \u91cc\u7684\u5e27\u6570\u4f4e\u4e8e\u9608\u503c\uff0c\u5c31\u89e6\u53d1 page replacement\u3002\u8fd9\u4e2a\u7b56\u7565\u5e0c\u671b\u4fdd\u8bc1\u8fd9\u91cc\u6709\u5145\u8db3\u7684\u81ea\u7531\u5185\u5b58\u6765\u6ee1\u8db3\u65b0\u7684\u9700\u6c42\u3002</p> <p>Reclaiming Pages</p> <p>\u5f53\u4f4e\u4e8e minimum \u9608\u503c\u7684\u65f6\u5019\u5c31\u5524\u9192\uff0c\u56de\u6536\u5230 maximum \u9608\u503c\u5c31\u505c\u6b62\u56de\u6536\u3002 </p> </li> </ul> </li> <li> <p>Local replacement \u2013 each process selects from only its own set of allocated frames.</p> <p>\u53ea\u80fd\u4ece\u81ea\u5df1\u7684\u5e27\u91cc\u9009\u3002</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap09/#non-uniform_memory_access","title":"Non-Uniform Memory Access","text":"<p>\u4e0d\u540c CPU \u8ddd\u79bb\u4e0d\u540c\u7684\u5185\u5b58\u7684\u8ddd\u79bb\u4e0d\u540c\uff0c\u56e0\u6b64\u8bbf\u95ee\u65f6\u95f4\u4e5f\u4e0d\u540c\u3002</p>"},{"location":"ZJU_CS/OS/chap09/#major_and_minor_page_faults","title":"Major and minor page faults","text":"<ul> <li> <p>Major: page is referenced but not in memory\u3002</p> <ul> <li> <p>Can only be satisfied by disk</p> <p>\u8fd9\u4e2a\u8bbf\u95ee\u7684\u6570\u636e\u53ea\u5728\u78c1\u76d8\u91cc\uff0c\u56e0\u6b64\u9700\u8981\u8bfb\u78c1\u76d8\u6dfb\u52a0\u6620\u5c04\u3002</p> </li> <li> <p>do_anonymous_page is not major</p> </li> <li>Minor: mapping does not exist, but the page is in memory.</li> <li> <p>Shared library</p> <p>\u73b0\u5728\u4e3b\u8981\u90fd\u662f minor page fault\uff0c\u6bd4\u5982\u5171\u4eab\u5e93\u3002 </p> </li> <li> <p>Reclaimed and not freed yet</p> <p>\u6570\u636e\u8fd8\u5728\u5185\u5b58\u91cc\uff0c\u6211\u4eec\u53ea\u9700\u8981\u518d\u6b21\u6620\u5c04\u5c31\u53ef\u4ee5\u4e86\u3002</p> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap09/#thrashing","title":"Thrashing","text":"<p>Thrashing: a process is busy swapping pages in and out.</p> <p>\u5982\u679c\u6211\u4eec\u7684\u8fdb\u7a0b\u4e00\u76f4\u5728\u6362\u8fdb\u6362\u51fa\u9875\uff0c\u90a3\u4e48 CPU \u4f7f\u7528\u7387\u53cd\u800c\u4f1a\u964d\u4f4e\u3002\u8fdb\u7a0b\u8d8a\u591a\uff0c\u53ef\u80fd\u53d1\u751f\u4e00\u4e2a\u8fdb\u7a0b\u7684\u9875\u521a\u52a0\u8f7d\u8fdb\u6765\u53c8\u88ab\u53e6\u4e00\u4e2a\u8fdb\u7a0b\u6362\u51fa\u53bb\uff0c\u6700\u540e\u5927\u90e8\u5206\u8fdb\u7a0b\u90fd\u5728 sleep\u3002</p> <ul> <li>Why does demand paging work?<ul> <li>process memory access has high locality.</li> <li>process migrates from one locality to another, localities may overlap.</li> </ul> </li> <li>Why does thrashing occur? <ul> <li> <p>total memory size &lt; total size of locality</p> <p>\u4e00\u4e2a locality \u5927\u5c0f\u6bd4\u5185\u5b58\u5927\uff0c\u56e0\u6b64\u6211\u4eec\u4e0d\u5f97\u4e0d\u4e00\u76f4\u6362\u8fdb\u6362\u51fa\u9875\u3002</p> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap09/#resolve_thrashing","title":"Resolve thrashing","text":"<p>Note</p> <p>\u8fdb\u7a0b\u4e0d\u65ad\u4ece\u4e00\u4e2a locality \u79fb\u5230\u53e6\u4e00\u4e2a locality\uff0c\u800c\u4e14\u8fd9\u4e24\u4e2a locality \u53ef\u80fd\u6709\u91cd\u53e0\u3002 </p> <p>\u6211\u4eec\u4f7f\u7528\u5de5\u4f5c\u96c6\u6a21\u578b (working set model) \u6765\u89e3\u51b3 thrashing\u3002</p> <ul> <li> <p>Working-set window(\\(\\delta\\)): a fixed number of page references</p> <p>\u628a\u6240\u6709\u7684 locality \u79f0\u4e3a\u4e00\u4e2a\u5de5\u4f5c\u96c6\uff0cwindows \u662f\u4e00\u4e2a\u5173\u4e8e\u65f6\u95f4\u7684\u7a97\u53e3\uff0c\u4ee3\u8868\u6700\u8fd1 \\(\\delta\\) \u6b21\u5bf9\u9875\u9762\u7684\u8bbf\u95ee\u3002</p> </li> <li> <p>Working set of process \\(p_i\\) (WSSi): total number of pages referenced in the most recent \\(\\delta\\) (varies in time)</p> </li> <li>Total working sets: \\(D = \\sum\\) WSSi</li> </ul> <p>\u786e\u5b9a\u4e00\u4e2a\u8fdb\u7a0b\u9891\u7e41\u8bbf\u95ee\u7684\u9875\u9762\uff0c\u4fdd\u8bc1\u8fd9\u4e9b\u9875\u9762\u4e0d\u88ab\u6362\u51fa\uff1b\u9700\u8981\u8c03\u9875\u65f6\u4ece\u5269\u4f59\u7684\u9875\u9762\u8fdb\u884c\u4ea4\u6362\u3002\u5982\u679c\u9891\u7e41\u8bbf\u95ee\u7684\u9875\u9762\u6570\u5df2\u7ecf\u5927\u4e8e\u4e86\u5f53\u524d\u8fdb\u7a0b\u53ef\u7528\u7684\u9875\u9762\u6570\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5c31\u5e94\u5f53\u628a\u6574\u4e2a\u8fdb\u7a0b\u6362\u51fa\uff0c\u4ee5\u9632\u6b62\u51fa\u73b0\u6296\u52a8\u73b0\u8c61\u3002</p> <p>Example</p> <p>\\(\\delta=10\\) </p> <p>\u600e\u6837\u627e\u5230\u5de5\u4f5c\u96c6\uff1f an interval timer + a reference bit\uff0c\u8bbf\u95ee\u4e86\u8fd9\u4e2a\u754c\u9762\u5c31\u628a reference bit \u7f6e 1\uff0c\u5f53\u5b9a\u65f6\u5668\u5230\u4e86\u4e4b\u540e\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6839\u636e reference bit \u6765\u5c06\u8fd9\u4e2a\u9875\u9762\u653e\u5230\u5de5\u4f5c\u96c6\u4e2d\u3002 </p>"},{"location":"ZJU_CS/OS/chap09/#other_considerations","title":"Other Considerations","text":"<ul> <li> <p>Prepaging </p> <p>page fault \u65f6\uff0c\u9664\u4e86\u88ab fault \u7684 page\uff0c\u5176\u4ed6\u76f8\u90bb\u7684\u9875\u4e5f\u4e00\u8d77\u52a0\u8f7d\u3002</p> </li> <li> <p>Page Size</p> <ul> <li>Fragmentation -&gt; small page size</li> <li>Page table size -&gt; large page size</li> <li>Resolution -&gt; small page size</li> <li>I/O overhead -&gt; large page size</li> <li>Number of page faults -&gt; large page size</li> <li>Locality -&gt; small page size</li> <li>TLB size and effectiveness -&gt; large page size</li> <li>On average, growing over time</li> </ul> </li> <li> <p>TLB Reach: the amount of memory accessible from the TLB</p> <ul> <li>TLB reach = (TLB size) \\(\\times\\) (page size)</li> <li>Increase the page size to reduce TLB pressure</li> </ul> </li> <li> <p>Program Structure</p> <p>Program structure can affect page faults. </p> </li> <li> <p>I/O interlock: Pages must sometimes be locked into memory.</p> <p>\u628a\u9875\u9762\u9501\u4f4f\uff0c\u8fd9\u6837\u5c31\u4e0d\u4f1a\u88ab\u6362\u51fa\u53bb\u3002</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap09/#memory_management_in_linux","title":"Memory management in Linux","text":"<p>page fault \u662f\u9488\u5bf9 user space \u7684\uff0ckernel \u5206\u914d\u7684\u5185\u5b58\u4e0d\u4f1a\u53d1\u751f page fault\uff08\u5426\u5219\u4f1a\u5d4c\u5957\uff09\u3002</p> <p>\u4e00\u4e2a\u8fdb\u7a0b\u6709\u81ea\u5df1\u7684 <code>mm_struct</code>\uff0c\u6240\u6709\u7ebf\u7a0b\u5171\u4eab\u540c\u4e00\u4e2a\u540c\u4e00\u4e2a\u9875\u8868\uff0c\u5185\u6838\u7a7a\u95f4\u6709\u81ea\u5df1\u7684\u9875\u8868 <code>swapper_pg_dir</code>\u3002 \u6ce8\u610f\u8fd9\u91cc\u7684 <code>pgd</code> \u5b58\u7684\u662f\u865a\u62df\u5730\u5740\uff0c\u4f46\u5f53\u52a0\u8f7d\u5230 <code>satp</code> \u91cc\u65f6\u4f1a\u8f6c\u4e3a\u7269\u7406\u5730\u5740\u3002</p>"},{"location":"ZJU_CS/OS/chap09/#linux_buddy_system","title":"Linux Buddy System","text":"<p>Buddy system \u4ece\u7269\u7406\u8fde\u7eed\u7684\u6bb5\u4e0a\u5206\u914d\u5185\u5b58\uff1b\u6bcf\u6b21\u5206\u914d\u5185\u5b58\u5927\u5c0f\u662f 2 \u7684\u5e42\u6b21\u65b9\uff0c\u4f8b\u5982\u8bf7\u6c42\u662f 11KB\uff0c\u5219\u5206\u914d 16KB\u3002</p> <p>\u5f53\u5206\u914d\u65f6\uff0c\u4ece\u7269\u7406\u6bb5\u4e0a\u5207\u5206\u51fa\u5bf9\u5e94\u7684\u5927\u5c0f\uff08\u6bcf\u6b21\u5207\u5206\u90fd\u662f\u5e73\u5206\uff09\u3002</p> <p>Example</p> <p>\u5206\u914d 21KB \u65f6\u7684\u60c5\u51b5\uff0c\\(C_L\\) \u4f1a\u88ab\u5206\u914d\u3002 </p> <p>\u5f53\u5b83\u88ab\u91ca\u653e\u65f6\uff0c\u4f1a\u5408\u5e76 (coalesce) \u76f8\u90bb\u7684\u5757\u5f62\u6210\u66f4\u5927\u7684\u5757\u4f9b\u4e4b\u540e\u4f7f\u7528\u3002</p> <ul> <li> <p>advantage: it can quickly merge unused chunks into larger chunk.</p> <p>\u53ef\u4ee5\u8fc5\u901f\u7ec4\u88c5\u6210\u5927\u5185\u5b58\uff08\u91ca\u653e\u540e\u5373\u53ef\u5408\u5e76\uff09\u3002</p> </li> <li> <p>disadvantage: internal fragmentation</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap09/#slab_allocation","title":"Slab Allocation","text":"<p>\u8981\u5206\u914d\u5f88\u591a <code>task_struct</code>\uff0c\u5982\u4f55\u8fc5\u901f\u5206\u914d\u3002\u6211\u4eec\u628a\u591a\u4e2a\u8fde\u7eed\u7684\u9875\u9762\u653e\u5230\u4e00\u8d77\uff0c\u5c06 objects \u7edf\u4e00\u5206\u914d\u5230\u8fd9\u4e9b\u9875\u9762\u4e0a\u3002</p> <p>Slab allocator is a cache of objects.</p> <ul> <li>a cache in a slab allocator consists of one or more slabs</li> <li>a slab contains one or more pages, divided into equal-sized objects</li> </ul> <p>Upon request, slab allocator</p> <ul> <li>Uses free struct in partial slab</li> <li>If none, takes one from empty slab</li> <li>If no empty slab, create new empty</li> </ul> <p>Example</p> <p>A 12k slab (3 pages) can store 4 3k objects. </p>"},{"location":"ZJU_CS/OS/chap09/#takeaway","title":"Takeaway","text":"<p>Takeaway</p> <ul> <li>Page fault</li> <li>Valid virtual address, invalid physical address</li> <li>Page replacement</li> <li>FIFO, Optimal, LRU, 2<sup>nd</sup> chance</li> <li>Thrashing and working set</li> <li>Buddy system</li> <li>slab</li> </ul>"},{"location":"ZJU_CS/OS/chap10/","title":"Chap10 | Mass-Storage Structure","text":""},{"location":"ZJU_CS/OS/chap10/#overview","title":"Overview","text":"<p>Magnetic disks provide bulk of secondary storage of computer system.  hard disk is most popular.</p>"},{"location":"ZJU_CS/OS/chap10/#disk_structure","title":"Disk Structure","text":"<p>\u53ef\u89c1 DB \u7b14\u8bb0</p> <ul> <li> <p>Positioning time(random-access time) is time to move disk arm to desired sector</p> <ul> <li>seek time: move disk to the target cylinder</li> <li>rotational latency: for the target sector to rotate under the disk head</li> </ul> </li> <li> <p>Performance</p> <ul> <li>transfer rate: theoretical 6 Gb/sec; effective (real) about 1Gb/sec</li> <li>seek time from 3ms to 12ms (9ms common for desktop drives)</li> <li>latency based on spindle speed: 1/rpm * 60<ul> <li>average latency = \u00bd latency</li> </ul> </li> </ul> </li> </ul> <p>Example</p> <p></p> <p>\u4e3b\u8981\u6162\u5728 seek \u548c rotation \u90e8\u5206\u3002</p>"},{"location":"ZJU_CS/OS/chap10/#disk_scheduling","title":"Disk Scheduling","text":"<p>\u78c1\u76d8\u4e5f\u9700\u8981\u8c03\u5ea6\uff0c\u4ee5\u51cf\u5c11 access time\u3002</p> <p>\u4ee5\u524d OS \u4f1a\u8d1f\u8d23\u8c03\u5ea6\uff0c\u73b0\u5728\u7531 firmware \u8d1f\u8d23\uff08disk controller\uff09\u3002</p> <p>There are many disk scheduling algorithms</p> <ul> <li>FCFS</li> <li>SSTF</li> <li>SCAN, C-SCAN</li> <li>LOOK, C-LOOK</li> </ul> <p>We use a request queue of cylinders \u201c98, 183, 37, 122, 14, 124, 65, 67\u201d ([0, 199]), and initial head position 53 as the example. \u6ce8\u610f\u8fd9\u91cc\u8bf4\u7684\u662f cyclinder \u67f1\u9762\uff08\u5305\u542b\u82e5\u5e72\u7b49\u8ddd\u79bb\u7684 track\uff09\uff0c\u53ea\u6709\u4e0d\u5728\u540c\u4e00\u67f1\u9762\u7684\u624d\u9700\u8981 seek\uff0c\u540c\u4e00\u67f1\u9762\u4e0d\u540c track \u4e0d\u9700\u8981\u52a8\u78c1\u5934\uff0c\u4e0d\u540c sector \u5c31\u9760\u8f6c\u52a8\u3002</p>"},{"location":"ZJU_CS/OS/chap10/#fcfs","title":"FCFS","text":"<p>First-come first-served, simplest scheduling algorithm.</p> <p>Example</p> <p>Total head movements of 640 cylinders </p> <ul> <li>Advantage:<ul> <li>Every request gets a fair chance</li> <li>No indefinite postponement</li> </ul> </li> <li>Disadvantages:<ul> <li>Does not try to optimize seek time</li> <li>May not provide the best possible service</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap10/#sstf","title":"SSTF","text":"<p>shortest seek time first.</p> <p>\u7c7b\u4f3c SJF\uff0c\u9009\u62e9\u79bb\u73b0\u5728 head position \u6700\u8fd1\u7684 request\u3002\u4f46\u662f SSTF \u4e0d\u4e00\u5b9a\u6700\u597d\u3002\u53ef\u80fd\u53d1\u751f starvation\u3002</p> <p>Example</p> <p></p> <ul> <li> <p>Advantages:</p> <ul> <li>Average Response Time decreases</li> <li>Throughput increases  </li> </ul> </li> <li> <p>Disadvantages</p> <ul> <li>Overhead to calculate seek time in advance</li> <li>Starvation may exist</li> <li>High variance : favors only some requests</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap10/#scan","title":"SCAN","text":"<p>\u4e5f\u53eb elevator \u7535\u68af\u7b97\u6cd5\uff0c\u5148\u626b\u5230\u4e00\u5934\uff0c\u518d\u5f80\u53e6\u4e00\u5934\u626b\uff0c\u5982\u679c\u9047\u5230 request \u5c31\u8bfb\u53d6\u3002</p> <p>Example</p> <p></p> <ul> <li>Advantages:<ul> <li>Average Response Time</li> <li>High Throughput</li> <li>Low variance of response time</li> </ul> </li> <li>Disadvantages:<ul> <li> <p>Long waiting time for requests for locations just visited by disk arm</p> <p>\u5982\u679c\u521a\u597d\u9519\u8fc7\u7535\u68af\uff0c\u5c31\u8981\u7b49\u7535\u68af\u89e6\u5e95\u518d\u4e0a\u6765\uff0c\u7b49\u5f85\u65f6\u95f4\u5f88\u957f\u3002</p> </li> </ul> </li> </ul> <p>C-SCAN(Circular-SCAN) is designed to provides a more uniform wait time. \u53ea\u505a\u5355\u5411\u7684\u626b\uff0c\u5230\u8fbe\u4e00\u7aef\u65f6\u7acb\u523b\u56de\u5230\u5f00\u5934\uff0c\u968f\u540e\u4ece\u5e95\u5f80\u4e0a\u626b\uff0c\u8fd9\u6837\u6700\u591a\u53ea\u7528\u7b49\u5f85\u4e00\u5708\u3002</p>"},{"location":"ZJU_CS/OS/chap10/#look","title":"LOOK","text":"<p>\u5728 SCAN / C-SCAN \u7684\u57fa\u7840\u4e0a\uff0c\u53ea\u8d70\u5230\u4e00\u7aef\u6700\u540e\u4e00\u4e2a\u4efb\u52a1\uff08look \u662f\u5426\u6709\u8bf7\u6c42\uff09\u800c\u4e0d\u8d70\u5230 disk \u7684\u5934\u3002</p> <p>LOOK is a version of SCAN, C-LOOK is a version of C-SCAN.</p> <p>Example</p> <p></p> <ul> <li>Advantage:<ul> <li>Prevents the extra delay which occurred due to unnecessary traversal to the end of the disk.</li> </ul> </li> </ul> <p>Selecting Disk-Scheduling Algorithm</p> <p>\u4f9d\u8d56\u4e8e\u8bf7\u6c42\u7684\u6a21\u5f0f\uff0c\u800c\u8bf7\u6c42\u672c\u8eab\u53c8\u4f9d\u8d56\u4e8e\u6587\u4ef6\u5206\u914d\u7b56\u7565\u3002\u6587\u4ef6\u7cfb\u7edf\u5982\u679c\u6ce8\u91cd\u7a7a\u95f4\u5c40\u90e8\u6027\uff0c\u80fd\u591f\u63d0\u4f9b\u5f88\u597d\u7684\u8868\u73b0\u63d0\u5347\u3002</p> <p>\u5982\u679c I/O \u6bd4\u8f83\u5c11\uff0cFCFS \u548c SSTF \u5373\u53ef\u3002\u5982\u679c\u662f\u5927\u578b\u7684\u670d\u52a1\u5668\u6216\u8005\u6570\u636e\u5e93\uff0c\u4e00\u822c\u4f7f\u7528 C-LOOK\u3002\u5982\u679c\u662f SSD\uff08\u4e0d\u7528 seek\uff09\uff0c\u4e00\u822c\u4f7f\u7528 FCFS\u3002</p>"},{"location":"ZJU_CS/OS/chap10/#nonvolatile_memory_devices","title":"Nonvolatile Memory Devices","text":"<p>If disk-drive like, then called solid-state disks (SSDs). \u56fa\u6001\u786c\u76d8</p> <p>Can be more reliable than HDDs\uff0c</p> <p>\u4e0e\u78c1\u76d8\u76f8\u6bd4\uff0c\u5bff\u547d\u77ed\uff0c\u5bb9\u91cf\u5c0f\uff0c\u901f\u5ea6\u5feb\uff08Bus \u6162\uff0c\u9700\u8981\u76f4\u63a5\u8fde\u5230 PCIE \u4e0a\uff09\u3002\u6ca1\u6709 arm \u4e5f\u4e0d\u9700\u8981\u8f6c\uff0c\u56e0\u6b64\u4e0d\u5b58\u5728 seek time \u548c rotational latency.</p> <ul> <li> <p>Read and written in \u201cpage\u201d increments (think sector) but can\u2019t overwrite in place.</p> <ul> <li>Must first be erased, and erases happen in larger \u201cblock\u201d</li> <li>Assume block size: 64k</li> <li> <p>Can only be erased a limited number of times before worn out \u2013 ~ 100,000</p> <p>\u5bff\u547d\u77ed\uff0c\u91cc\u9762\u662f\u7528\u95e8\u7535\u8def\u5b9e\u73b0\u3002\u5145\u653e\u7535\uff08\u64e6\u5199\uff09\u95e8\u4f1a\u88ab\u51fb\u7a7f\uff0c\u5c31\u65e0\u6cd5\u533a\u5206 0/1 \u4e86\u3002</p> </li> <li> <p>Life span measured in drive writes per day(DWPD)</p> </li> </ul> </li> </ul> <p>Each cell has lifespan, so need to write equally to all cells.</p>"},{"location":"ZJU_CS/OS/chap10/#magnetic_tape","title":"Magnetic Tape","text":"<p>\u78c1\u5e26\uff0c\u5bb9\u91cf\u5f88\u5927\uff0c\u4f46\u662f\u5f88\u6162\u3002\u56e0\u4e3a\u9700\u8981\u5012\u5e26\uff0c\u4e00\u822c\u90fd\u505a\u987a\u5e8f\u8bbf\u95ee\u800c\u4e0d\u662f\u968f\u673a\u8bbf\u95ee\u3002\u73b0\u5728\u4e3b\u8981\u7528\u6765\u505a\u5907\u4efd\u3002</p> <p>data stored on the tape are relatively permanent.</p>"},{"location":"ZJU_CS/OS/chap10/#disk_management","title":"Disk Management","text":"<p>\u4f7f\u7528\u8fd9\u4e9b\u4ecb\u8d28\uff08\u78c1\u76d8\u3001\u56fa\u6001\u786c\u76d8\u3001\u78c1\u5e26\uff09\u7684\u65f6\u5019\uff0c\u9700\u8981\u5148\u683c\u5f0f\u5316\u3002</p> <p>Physical formatting: divide disk into sectors for controller to read/write. \u5373\u628a\u4ecb\u8d28\u4e0a\u5206\u597d\u4e0d\u540c\u7684\u90e8\u5206\u3002</p> <ul> <li>partition disk into groups of cylinders, each treated as a logical disk.</li> <li>logical formatting partitions to make a file system on it.</li> </ul>"},{"location":"ZJU_CS/OS/chap10/#disk_attachment","title":"Disk Attachment","text":"<ul> <li> <p>host-attached storage</p> <ul> <li> <p>hard disk, RAID arrays, CD, DVD, tape...</p> <p>\u53ef\u4ee5\u63d2\u5230 I/O Bus \u4e0a\u3002 </p> </li> </ul> </li> <li> <p>network-attached storage</p> </li> <li>storage area network</li> </ul>"},{"location":"ZJU_CS/OS/chap10/#raid","title":"RAID","text":"<p>Disks are unreliable, slow, but cheap. Simple idea: let\u2019s use redundancy to improve reliability and speed.</p> <p>HDDs \u8d8a\u6765\u8d8a\u5c0f\u548c\u4fbf\u5b9c\uff0c\u56e0\u6b64\u5982\u679c\u4e00\u4e2a\u7cfb\u7edf\u53ef\u4ee5\u62e5\u6709\u5927\u91cf\u78c1\u76d8\uff0c\u90a3\u4e48\u5c31\u80fd\u6539\u5584\u6570\u636e\u7684\u8bfb\u5199\u901f\u7387\uff08\u56e0\u4e3a\u53ef\u4ee5\u5e76\u884c\uff09\u548c\u53ef\u9760\u6027\uff08\u4f7f\u7528\u5197\u4f59\u6765\u964d\u4f4e\u51fa\u73b0\u9519\u8bef\u7684\u671f\u671b\uff09\u3002\u8fd9\u6837\u7684\u78c1\u76d8\u7ec4\u7ec7\u6280\u672f\u79f0\u4e3a \u78c1\u76d8\u5197\u4f59\u9635\u5217 (Redundant Arrays of Independent Disk, RAID) \u6280\u672f\u3002</p> <ul> <li> <p>Data Mirroring</p> <ul> <li>Keep the same data on multiple disks</li> </ul> </li> <li> <p>Data Striping</p> <ul> <li>Keep data split across multiple disks to allow parallel reads</li> </ul> </li> <li> <p>Error-Code Correcting (ECC) - Parity Bits</p> <ul> <li>Keep information from which to reconstruct lost bits due to a drive failing</li> </ul> </li> </ul> <p>\u8fd9\u91cc RAID 0 \u7684\u6280\u672f\u4e3b\u8981\u662f Striping\uff0cRAID 1 \u7684\u6280\u672f\u4e3b\u8981\u662f Mirroring\uff0c\u56e0\u6b64\u6211\u4eec\u6709\u65f6\u4f1a\u8bf4 5+1\uff0c5+0\uff0c\u8868\u793a\u51e0\u4e2a\u6280\u672f\u7ed3\u5408\u3002</p>"},{"location":"ZJU_CS/OS/chap10/#raid_0","title":"RAID 0","text":"<p>\u6ca1\u6709 redundancy\uff0c\u4ec0\u4e48\u4e5f\u4e0d\u505a\uff0c\u628a\u6570\u636e\u5206\u6563\u5728\u4e0d\u540c\u7684\u78c1\u76d8\u3002</p> <p>Improves performance, but not reliability.</p> <p>Example</p> <ul> <li>Fixed strip size</li> <li>5 files of various sizes</li> <li>4 disks</li> </ul> <p></p>"},{"location":"ZJU_CS/OS/chap10/#raid_1","title":"RAID 1","text":"<p>\u4e5f\u88ab\u79f0\u4e3a mirroring\uff0c\u5b58\u5728\u4e24\u4e2a\u78c1\u76d8\uff0c\u4e00\u4e2a\u662f\u4e3b\u78c1\u76d8\uff0c\u4e00\u4e2a\u662f\u5907\u4efd\u78c1\u76d8\u3002\u4e3b\u78c1\u76d8\u5199\u5165\u6570\u636e\u540e\uff0c\u5907\u4efd\u78c1\u76d8\u4e5f\u5199\u5165\u76f8\u540c\u7684\u6570\u636e\u3002</p> <p>Example</p> <ul> <li>5 files of various sizes</li> <li>4 disks</li> </ul> <p></p> <p>Reliability is ensured unless you have (extremely unlikely) simultaneous failures, performance can be boosted by reading from the disk with the fastest seek time.</p> <p>\u4f46\u662f\u6d6a\u8d39\u4e86\u4e00\u534a\u7684\u78c1\u76d8\u3002</p>"},{"location":"ZJU_CS/OS/chap10/#raid_2","title":"RAID 2","text":"<p>stripes data at the bit-level; uses Hamming code for error correction (not used).</p> <p>\u6ca1\u6709\u88ab\u5b9e\u9645\u5e94\u7528\uff0c\u56e0\u4e3a\u7c92\u5ea6\u592a\u5c0f\uff0c\u73b0\u5728\u65e0\u6cd5\u5355\u72ec\u8bfb\u51fa\u6765\u4e00\u4e2a\u6bd4\u7279\uff0c\u81f3\u5c11\u8bfb\u51fa\u4e00\u4e2a\u5b57\u8282\u3002</p>"},{"location":"ZJU_CS/OS/chap10/#raid_3","title":"RAID 3","text":"<p>Data is striped across multiple disks, with one dedicated parity disk that stores the parity information for all the data disks.</p> <p>\u7ea0\u9519\u7801\u5c31\u5728\u4e00\u4e2a\u78c1\u76d8\u91cc\u3002</p>"},{"location":"ZJU_CS/OS/chap10/#raid_456","title":"RAID 4\uff0c5\uff0c6","text":"<ul> <li> <p>RAID 4: Basically like RAID 3, but interleaving it with strips (blocks)</p> <p>\u7528\u5757\u6765\u505a strip\uff0c\u7ea0\u9519\u7801\u5355\u72ec\u5b58\u5728\u4e00\u4e2a\u76d8\u91cc\u3002\u8fd9\u4e2a\u7ea0\u9519\u76d8\u4e00\u76f4\u4f1a\u88ab\u8bfb\u5199\uff0c\u5f88\u6709\u53ef\u80fd\u5148\u635f\u574f\u3002</p> </li> <li> <p>RAID 5: Like RAID 4, but parity is spread all over the disks as opposed to having just one parity disk.</p> <p>parity bit \u88ab\u5206\u6563\u5730\u5b58\u5230\u4e86\u4e0d\u540c\u7684\u78c1\u76d8\u91cc\u3002\u76f8\u6bd4\u4e8e RAID 4\uff0c\u6bcf\u4e2a\u76d8\u7684\u8bfb\u5199\u6bd4\u8f83\u5747\u8861\u3002</p> </li> <li> <p>RAID 6: extends RAID 5 by adding an additional parity block.</p> <p>\u53c8\u52a0\u4e86\u4e00\u4e2a parity bit\uff0c\u4e5f\u662f\u5206\u6563\u5b58\u50a8\u3002</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap10/#raid_and_file_systems","title":"RAID and File Systems","text":"<p>RAID \u53ea\u68c0\u6d4b\u78c1\u76d8\u5931\u6548\uff0c\u5e76\u4e0d\u77e5\u9053\u5bf9\u5e94\u7684\u662f\u54ea\u4e2a\u6587\u4ef6\u5931\u6548\u3002</p> <p>ZFS adds checksums to all FS data and metadata. \u8fd9\u6837\u53ef\u4ee5\u68c0\u9a8c\u78c1\u76d8\u662f\u5426\u5199\u9519\u3002</p>"},{"location":"ZJU_CS/OS/chap10/#takeaway","title":"Takeaway","text":"<p>Takeaway</p> <ul> <li>Disk structure</li> <li>Disk scheduling<ul> <li>FCFS, SSTF, SCAN, C-SCAN, LOOK, C-LOOK</li> </ul> </li> <li>RAID 0-6</li> </ul>"},{"location":"ZJU_CS/OS/chap11/","title":"Chap11 | I/O Systems","text":""},{"location":"ZJU_CS/OS/chap11/#overview","title":"Overview","text":"<p>I/O management is a major component of OS design and operation.</p> <ul> <li>important aspect of computer operation</li> <li> <p>I/O devices vary greatly</p> <p>IO \u8bbe\u5907\u5dee\u5f02\u5f88\u5927\uff0c\u5982\u7f51\u5361\u3001\u9f20\u6807\u952e\u76d8\u3001\u663e\u793a\u5668\u3002</p> </li> <li> <p>new types of devices frequently emerge</p> </li> </ul> <p>\u4e0b\u56fe\u91cc\u9664\u4e86\u5904\u7406\u5668\u548c\u5185\u5b58\uff0c\u5747\u662f\u5916\u8bbe\u3002</p>"},{"location":"ZJU_CS/OS/chap11/#io_hardware","title":"I/O Hardware","text":"<p>Common concepts: signals from I/O devices interface with computer</p> <ul> <li> <p>bus</p> <p>\u7528\u6765\u505a\u8bbe\u5907\u548c CPU \u7684\u4e92\u8fde\u3002</p> </li> <li> <p>port</p> </li> <li>controller</li> </ul> <p>I/O access can use polling or interrupt.</p> <ul> <li> <p>Some CPU architecture has dedicated I/O instructions.</p> <p>\u5982 x86 \u91cc\u6709 <code>in</code>, <code>out</code>\u3002</p> </li> <li> <p>Devices are assigned addresses for registers or on-device memory</p> <ul> <li> <p>direct I/O instructions</p> <p>\u6269\u5c55\u6027\u5dee\uff0c\u73b0\u5728\u4f7f\u7528\u7684\u5c11\u3002</p> </li> <li> <p>memory-mapped I/O</p> <p>\u628a\u5916\u8bbe\u6620\u5c04\u5230\u5185\u5b58\u5730\u5740\u7a7a\u95f4\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u7528\u5185\u5b58\u8bbf\u95ee\u6307\u4ee4\u6765\u8bbf\u95ee\u5916\u8bbe\u3002</p> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap11/#polling","title":"Polling","text":"<p>CPU \u4e3b\u52a8\u8be2\u95ee\u8bbe\u5907\uff0c\u662f\u5426\u9700\u8981\u670d\u52a1\u3002</p> <p>For each I/O operation:</p> <ul> <li> <p>busy-wait if device is busy (status register)</p> <ul> <li>Cannot accept any command if busy</li> </ul> </li> <li> <p>send the command to the device controller (command register)</p> </li> <li>read status register until it indicates command has been executed</li> <li>read execution status, and possibly reset device status</li> </ul> <p>Polling requires busy wait. busywait \u9700\u8981\u9501\uff0c\u4f1a sleep\u3002\u6240\u4ee5\u5982\u679c\u8bbe\u5907\u5f88\u5feb\u90a3\u4e48\u8f6e\u8be2\u662f\u5408\u7406\u7684\uff1b\u5982\u679c\u8bbe\u5907\u5f88\u6162\u90a3\u4e48\u4f1a\u5f88\u4f4e\u6548\u3002</p>"},{"location":"ZJU_CS/OS/chap11/#interrupts","title":"Interrupts","text":"<p>Interrupts can avoid busy-wait</p> <ul> <li>device driver (part of OS) send a command to the controller (on device), and return</li> <li>OS can schedule other activities</li> <li>device will interrupt the processor when command has been executed</li> <li>OS retrieves the result by handling the interrupt</li> </ul> <p>Interrupt-based I/O requires context switch at start and end. \u5982\u679c\u4e2d\u65ad\u53d1\u751f\u7684\u9891\u7387\u5f88\u9ad8\uff0c\u90a3\u4e48\u4e0a\u4e0b\u6587\u5207\u6362\u4f1a\u6d6a\u8d39\u5f88\u591a CPU \u65f6\u95f4\u3002</p> <ul> <li>Interrupt is also used for exceptions<ul> <li>protection error for access violation</li> <li>page fault for memory access error</li> <li>software interrupt for system calls</li> </ul> </li> <li>Multi-CPU systems can process interrupts concurrently<ul> <li>sometimes a CPU may be dedicated to handle interrupts</li> <li>interrupts can also have CPU affinity</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap11/#direct_memory_access","title":"Direct Memory Access","text":"<p>DMA transfer data directly between I/O device and memory.</p> <p>GPU \u8bbf\u95ee\u5185\u5b58\u4e5f\u7b97 DMA\uff0c\u53ea\u8981\u4e0d\u7ecf\u8fc7 CPU \u5c31\u7b97\u3002</p>"},{"location":"ZJU_CS/OS/chap11/#application_io_interface","title":"Application I/O Interface","text":"<p>I/O system calls encapsulate device behaviors in generic classes.</p> <ul> <li>in Linux, devices can be accessed as files; low-level access with <code>ioctl</code>.</li> </ul> <p>Device-driver layer hides differences among I/O controllers from kernel.</p> <p>Devices vary in many dimensions</p> <p>\u5982\u679c\u60f3\u5bf9\u8bbe\u5907\u53d1\u8d77\u63a7\u5236\u3001\u547d\u4ee4\uff0c\u4f1a\u4f7f\u7528 <code>ioctl</code> \u8fd9\u4e2a\u7cfb\u7edf\u8c03\u7528\u3002</p> <p>\u8bbe\u5907\u53ef\u4ee5\u88ab\u5927\u81f4\u5206\u4e3a\uff1a</p> <ul> <li> <p>Block and Character Devices</p> <p>\u4ee5\u5757\u4e3a\u5355\u4f4d\u8bbf\u95ee\u6570\u636e\u3002\u652f\u6301 read, write, seek \u64cd\u4f5c\u3002\u53ef\u4ee5\u901a\u8fc7\u5185\u5b58\u6620\u5c04\u8bbf\u95ee\uff0c\u4e5f\u6709 DMA\u3002  </p> <p>\u5176\u4e2d character I/O \u6307\u9010\u4e2a\u5b57\u8282\u4f20\u8f93\uff08Stream\uff09\u3002</p> </li> <li> <p>Network Devices</p> <p>socket</p> </li> <li> <p>Clocks and Timers</p> <p>provide current time, elapsed time, timer.</p> </li> <li> <p>memory-mapped file access</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap11/#kernel_io_subsystem","title":"Kernel I/O Subsystem","text":"<ul> <li>I/O scheduling</li> <li>Buffering - store data in memory while transferring between devices.</li> <li>Caching: hold a copy of data for fast access.</li> <li>Spooling: A spool is a buffer that holds the output (device\u2019s input) if device can serve only one request at a time.</li> <li>Device reservation: provides exclusive access to a device.</li> <li>OS needs to protect I/O devices.</li> </ul>"},{"location":"ZJU_CS/OS/chap11/#transforming_io_requests_to_hardware_operations","title":"Transforming I/O Requests to Hardware Operations","text":""},{"location":"ZJU_CS/OS/chap11/#performance","title":"Performance","text":"<p>I/O is a major factor in system performance.</p> <p>Improve Performance</p> <ul> <li>Reduce number of context switches</li> <li>Reduce data copying</li> <li>Reduce interrupts by using large transfers, smart controllers, polling</li> <li>Use DMA</li> <li>Use smarter hardware devices</li> <li>Balance CPU, memory, bus, and I/O performance for highest throughput</li> <li>Move user-mode processes / daemons to kernel threads</li> </ul>"},{"location":"ZJU_CS/OS/chap12/","title":"Chap12 | File System Interface","text":""},{"location":"ZJU_CS/OS/chap12/#file_concept","title":"File concept","text":"<p>\u5982\u4f55\u4f7f\u7528\u5927\u89c4\u6a21\u5b58\u50a8\u548c IO\uff1f\u540e\u6765\u6709\u4e86\u6587\u4ef6\u7cfb\u7edf\uff0c\u5bf9\u78c1\u76d8\u63d0\u4f9b\u4e86\u62bd\u8c61\u3002</p> <ul> <li> <p>File system presents abstraction of disk\u3002</p> <ul> <li>File &lt;-&gt; Track/sector</li> </ul> </li> <li> <p>How to use file system?</p> <ul> <li>How to use file?</li> <li>How to use directory?</li> </ul> </li> <li>How to implement file system?<ul> <li>How to implement file?</li> <li>How to implement directory?</li> </ul> </li> </ul> <p>File is a contiguous logical space for storing information.</p> <ul> <li>data: character, binary, and application-specific</li> <li>program</li> <li>special one: <code>proc</code> file system - use file-system interface to retrieve system information.</li> </ul>"},{"location":"ZJU_CS/OS/chap12/#file_attributes","title":"File Attributes","text":"<ul> <li>Name \u2013 only information kept in human-readable form</li> <li>Identifier \u2013 unique tag (number) identifies file within file system</li> <li>Type \u2013 needed for systems that support different types</li> <li>Location \u2013 pointer to file location on device</li> <li>Size \u2013 current file size</li> <li>Protection \u2013 controls who can do reading, writing, executing</li> <li>Time, date, and user identification \u2013 data for protection, security, and usage monitoring</li> </ul> <p>\u8fd9\u4e9b\u4fe1\u606f\u662f\u76ee\u5f55\u7ed3\u6784 (directory structure) \u7684\u4e00\u90e8\u5206\uff0c\u4e5f\u5b58\u5728\u78c1\u76d8\u4e0a\u3002 \u53ef\u80fd\u6709\u5176\u4ed6\u5c5e\u6027\uff0c\u4f8b\u5982 checksum\uff0c\u8fd9\u4e9b\u4f1a\u5b58\u5230 extended file attributes \u91cc\u3002</p> <p>Example</p> <p></p> <p>modify \u662f\u4fee\u6539\u6587\u4ef6\u5185\u5bb9 content data\uff0cchange \u662f\u4fee\u6539\u6587\u4ef6 Metadata \u7684\u65f6\u95f4\u3002</p>"},{"location":"ZJU_CS/OS/chap12/#file_operations","title":"File Operations","text":"<ul> <li>create:<ul> <li>space in the file system should be found</li> <li>an entry must be allocated in the directory</li> </ul> </li> <li>open: most operations need to file to be opened first<ul> <li>return a handler for other operations</li> </ul> </li> <li> <p>read/write: need to maintain a pointer    </p> <ul> <li> <p>reposition within file \u2013 seek</p> <p>\u5c06 current-file-position pointer \u7684\u4f4d\u7f6e\u91cd\u65b0\u5b9a\u4f4d\u5230\u7ed9\u5b9a\u503c\uff0c\u4f8b\u5982\u6587\u4ef6\u5f00\u5934\u6216\u7ed3\u5c3e\u3002</p> </li> </ul> </li> <li> <p>close</p> </li> <li>delete<ul> <li>Release file space</li> <li>Hardlink: maintain a counter - delete the file until the last link is deleted</li> </ul> </li> <li> <p>truncate: empty a file but maintains its attributes</p> <p>\u628a\u6587\u4ef6\u7684\u6240\u6709 content \u6e05\u7a7a\uff0c\u4f46\u4fdd\u7559 metadata\u3002</p> </li> </ul> <p>\u5176\u4ed6\u64cd\u4f5c\u53ef\u4ee5\u901a\u8fc7\u4e0a\u9762\u8fd9\u4e9b\u64cd\u4f5c\u5b9e\u73b0\u3002\u5982\u62f7\u8d1d\u5c31\u662f create+read&amp;write\u3002</p>"},{"location":"ZJU_CS/OS/chap12/#open_files","title":"Open Files","text":"<p>Several data are needed to manage open files:</p> <ul> <li>Open-file table: tracks open files</li> <li>File pointer: pointer to last read/write location, per process that has the file open</li> <li>File-open count: counter of number of times a file is open \u2013 to allow removal of data from open-file table when last processes closes it</li> <li>Disk location of the file: cache of data access information</li> <li>Access rights: per-process access mode information</li> </ul> <p>\u6587\u4ef6\u53ef\u80fd\u88ab\u5e76\u53d1\u8bbf\u95ee\uff0c\u6211\u4eec\u9700\u8981\u9501\u3002\u6709 Shared lock \u548c Exclusive lock\uff0c\u4ee5\u53ca\u4e24\u79cd\u9501\u7684\u673a\u5236 mandatory lock\uff08\u4e00\u65e6\u8fdb\u7a0b\u83b7\u53d6\u4e86\u72ec\u5360\u9501\uff0c\u64cd\u4f5c\u7cfb\u7edf\u5c31\u963b\u6b62\u4efb\u4f55\u5176\u4ed6\u8fdb\u7a0b\u8bbf\u95ee\u5bf9\u5e94\u6587\u4ef6\uff09\u548c advisory lock\uff08\u8fdb\u7a0b\u53ef\u4ee5\u81ea\u5df1\u5f97\u77e5\u9501\u7684\u72b6\u6001\u7136\u540e\u51b3\u5b9a\u8981\u4e0d\u8981\u575a\u6301\u8bbf\u95ee\uff09\u3002</p>"},{"location":"ZJU_CS/OS/chap12/#file_types","title":"File Types","text":"<p>\u8bc6\u522b\u4e0d\u540c\u7684\u6587\u4ef6\u7c7b\u578b\uff1a</p> <ul> <li> <p>as part of the file names - file extension</p> <p>\u4f8b\u5982\u89c4\u5b9a\u53ea\u6709\u6269\u5c55\u540d\u662f .com, .exe, .sh \u7684\u6587\u4ef6\u624d\u80fd\u6267\u884c\u3002</p> </li> <li> <p>magic number of the file </p> <p>\u5728\u6587\u4ef6\u5f00\u59cb\u90e8\u5206\u653e\u4e00\u4e9b magic number \u6765\u8868\u660e\u6587\u4ef6\u7c7b\u578b\u3002\u4f8b\u5982 7f45 4c46 \u662f ASCII \u5b57\u7b26\uff0c\u8868\u793a ELF\uff0c\u4ee3\u8868 elf \u6587\u4ef6\u683c\u5f0f\u3002</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap12/#file_structure","title":"File Structure","text":"<p>A file can have different structures, determined by OS or program</p> <ul> <li>No structure: a stream of bytes or words</li> <li> <p>Simple record structure</p> <ul> <li>Lines of records, fixed length or variable length</li> </ul> </li> <li> <p>Complex structures</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap12/#access_methods","title":"Access Methods","text":"<ul> <li> <p>Sequential access</p> <ul> <li> <p>a group of elements is access in a predetermined order</p> <p>\u6bcf\u6b21\u90fd\u53ea\u80fd\u4ece\u5934\u5f00\u59cb\u8bbf\u95ee\u3002</p> </li> </ul> </li> <li> <p>Direct access</p> <ul> <li> <p>access an element at an arbitrary position in a sequence in (roughly) equal time, independent of sequence size.</p> <p>\u53ef\u4ee5\u8df3\u5230\u4efb\u610f\u7684\u4f4d\u7f6e\u8bbf\u95ee\uff0c\u4e5f\u79f0\u4e3a\u968f\u673a\u8bbf\u95ee\u3002</p> </li> </ul> </li> </ul> <p>\u5728\u76f4\u63a5\u8bbf\u95ee\u7684\u65b9\u6cd5\u4e4b\u4e0a\uff0c\u8fd8\u6709\u53ef\u80fd\u63d0\u4f9b\u7d22\u5f15\uff0c\u5373\u5148\u5728\u7d22\u5f15\u4e2d\u5f97\u77e5\u6240\u9700\u8bbf\u95ee\u7684\u5185\u5bb9\u5728\u54ea\u91cc\uff0c\u7136\u540e\u53bb\u8bbf\u95ee\u3002\u4e5f\u6709\u53ef\u80fd\u4f7f\u7528\u591a\u5c42\u7d22\u5f15\u8868\u3002</p>"},{"location":"ZJU_CS/OS/chap12/#directory_structure","title":"Directory structure","text":"<p>Disk can be subdivided into partitions</p> <ul> <li>partitions also known as minidisks, slices</li> <li> <p>different partitions can have different file systems</p> <p>\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u53ef\u4ee5\u6709\u591a\u4e2a disk\uff0c\u4e00\u4e2a disk \u53ef\u4ee5\u6709\u591a\u4e2a partition\uff0c\u4e00\u4e2a partition \u53c8\u6709\u81ea\u5df1\u7684\u6587\u4ef6\u7cfb\u7edf\u3002</p> </li> <li> <p>disk or partition can be used raw. (without a file system)</p> <p>partition \u4e5f\u53ef\u4ee5\u4e0d\u5bf9\u5e94\u4e00\u4e2a\u6587\u4ef6\u7cfb\u7edf\u3002</p> </li> </ul> <p>Directory is a collection of nodes containing information about all files. \u6587\u4ef6\u540d\u7684\u96c6\u5408</p>"},{"location":"ZJU_CS/OS/chap12/#operations_performed_on_directory","title":"Operations Performed on Directory","text":"<ul> <li>Create a file: new files need to be created and added to directory</li> <li>delete a file: remove a file from directory</li> <li>List a directory: list all files in directory</li> <li>Search for a file: pattern matching</li> <li>Traverse the file system: access every directory and file within a directory</li> </ul>"},{"location":"ZJU_CS/OS/chap12/#single-level_directory","title":"Single-Level Directory","text":"<p>\u6211\u4eec\u8bbe\u8ba1\u7684 directory\uff0c\u8981\u80fd\u5feb\u901f\u5b9a\u4f4d\u6587\u4ef6\uff1b\u8981\u517c\u987e\u6548\u7387\u3001\u4fbf\u4e8e\u4f7f\u7528\u3001\u4fbf\u4e8e\u6309\u4e00\u4e9b\u5c5e\u6027\u805a\u5408\u3002</p> <p>A single directory for all users:</p> <p>\u5b58\u5728 Naming problems and grouping problems\uff0c\u5982\u679c\u4e24\u4e2a\u7528\u6237\u60f3\u7528\u76f8\u540c\u7684\u6587\u4ef6\u540d\uff0c\u65e0\u6cd5\u5b9e\u73b0\u3002</p>"},{"location":"ZJU_CS/OS/chap12/#two-level_directory","title":"Two-Level Directory","text":"<p>Separate directory for each user</p> <ul> <li>Different user can have the same name for different files<ul> <li>Each user has his own user file directory (UFD), it is in the master file directory (MFD).</li> </ul> </li> <li>Efficient to search</li> </ul>"},{"location":"ZJU_CS/OS/chap12/#tree-structured_directories","title":"Tree-Structured Directories","text":"<p>Files organized into trees</p> <ul> <li>efficient in searching, can group files, convenient naming</li> </ul> <p>\u5982\u679c\u6240\u9700\u76ee\u5f55\u4e0d\u5728\u5f53\u524d\u76ee\u5f55\uff0c\u90a3\u4e48\u7528\u6237\u5c31\u5fc5\u987b\u63d0\u4f9b\u4e00\u4e2a\u8def\u5f84\u540d (path name) \u6765\u6307\u5b9a\u3002 File can be accessed using absolute or relative path name</p> <ul> <li>absolute path name: <code>/home/alice/..</code></li> <li>relative path is relative to the current directory (pwd)</li> </ul> <p>\u64cd\u4f5c\uff1a</p> <ul> <li>Creating a new file: touch  <li>Delete a file: rm  <li>Creating a new subdirectory: <code>mkdir &lt;dir-name&gt;</code></li> <li>Delete directory: <ul> <li>If directory is empty, then it\u2019s easy to handle</li> <li>If not<ul> <li>Option I: directory cannot be deleted, unless it\u2019s empty</li> <li>Option II: delete all the files, directories and sub-directories</li> <li><code>sudo rm -rf /</code></li> </ul> </li> </ul> </li> <p>\u8fd9\u91cc\u4e0d\u80fd share \u4e00\u4e2a\u6587\u4ef6\uff08\u5373\u591a\u4e2a\u6307\u9488\u6307\u5411\u540c\u4e00\u4e2a\u6587\u4ef6\uff09\uff0c\u56e0\u4e3a\u8fd9\u6837\u5c31\u4f1a\u5f62\u6210\u4e00\u4e2a\u56fe\u800c\u4e0d\u662f\u6811\u3002</p>"},{"location":"ZJU_CS/OS/chap12/#acyclic-graph_directories","title":"Acyclic-Graph Directories","text":"<p>allow links to a directory entry/files for aliasing (no longer a tree)</p> <ul> <li> <p>Dangling pointer problem:   </p> <p>e.g., if delete file <code>/dict/all</code>, <code>/dict/w/list</code> and <code>/spell/words/list</code> are dangling pointers.  </p> <ul> <li>Solution: back pointers/reference counter<ul> <li>Back pointers record all the pointers to the entity, a variable size record</li> <li> <p>Or count # of links to it and only (physically) delete it when counter is zero</p> <p>\u5982\u679c\u4e00\u4e2a\u6587\u4ef6\u88ab\u5220\u9664\uff0c\u90a3\u4e48\u5b83\u7684 reference counter \u5c31\u4f1a\u51cf\u4e00\uff0c\u5f53\u51cf\u5230 0 \u65f6\uff0c\u624d\u771f\u6b63\u5220\u9664\u3002</p> </li> </ul> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap12/#general_graph_directory","title":"General Graph Directory","text":"<p>Allowing arbitrary links may generate cycles in the directory structure.</p> <p>\u5141\u8bb8\u76ee\u5f55\u4e2d\u6709\u73af\u3002</p> <ul> <li> <p>allow cycles, but use garbage collection to reclaim disk spaces</p> <p>\u5982\u679c\u6ca1\u6709\u5916\u754c\u76ee\u5f55\u6307\u5411\u4e00\u4e2a\u73af\uff0c\u90a3\u4e48\u5c31\u628a\u8fd9\u4e2a\u73af\u90fd\u56de\u6536\u4e86\u3002</p> </li> <li> <p>every time a new link is added use a cycle detection algorithm</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap12/#file_system_mounting","title":"File System Mounting","text":"<p>A file system must be mounted before it can be accessed.</p> <ul> <li>mounting links a file system to the system, usually forms a single name space.</li> <li>the location of the file system being mounted is call the mount point.</li> <li>a mounted file system makes the old directory at the mount point invisible.</li> </ul> <p>Mounting a file system</p> <p></p>"},{"location":"ZJU_CS/OS/chap12/#file_sharing","title":"File Sharing","text":"<p>share \u6587\u4ef6\u9700\u8981\u6709\u4e00\u5b9a\u7684\u4fdd\u62a4\u3002</p> <ul> <li> <p>User IDs identify users, allowing protections to be per-user.</p> <p>\u5141\u8bb8\u67d0\u4e9b\u7528\u6237\u8bbf\u95ee\u3002</p> </li> <li> <p>Group IDs allow users to be in groups, permitting group access rights.</p> <p>\u5141\u8bb8\u67d0\u4e9b\u7ec4\u7684\u7528\u6237\u8bbf\u95ee\u3002</p> </li> </ul> <p>\u5728\u5206\u5e03\u5f0f\u7cfb\u7edf\u91cc\uff0c\u6587\u4ef6\u53ef\u4ee5\u901a\u8fc7\u7f51\u7edc\u6765\u5171\u4eab\u3002</p>"},{"location":"ZJU_CS/OS/chap12/#protection","title":"Protection","text":"<p>\u6587\u4ef6\u7684\u6240\u6709\u8005/\u521b\u5efa\u8005\u5e94\u8be5\u80fd\u63a7\u5236\u6587\u4ef6\u53ef\u4ee5\u88ab\u8c01\u8bbf\u95ee\uff0c\u80fd\u88ab\u505a\u4ec0\u4e48\u3002</p> <p>Types of access</p> <ul> <li>read, write, append</li> <li>execute</li> <li>delete</li> <li>list</li> </ul> <p>\u7ed9\u6bcf\u4e2a\u6587\u4ef6\u548c\u76ee\u5f55\u7ef4\u62a4\u4e00\u4e2a Access Control List (ACL)\uff0c\u6307\u5b9a\u6bcf\u4e2a\u7528\u6237\u53ca\u5176\u5141\u8bb8\u7684\u8bbf\u95ee\u7c7b\u578b\u3002 \u4f18\u70b9\u662f\u53ef\u4ee5\u63d0\u4f9b\u7ec6\u7c92\u5ea6\u7684\u63a7\u5236\uff0c\u7f3a\u70b9\u662f\u5982\u4f55\u6784\u5efa\u8fd9\u4e2a\u5217\u8868\uff0c\u4ee5\u53ca\u5982\u4f55\u5c06\u8fd9\u4e2a\u5217\u8868\u5b58\u5728\u76ee\u5f55\u91cc\u3002</p> <p>Unix Access Control</p> <p></p> <p>Example</p> <p></p>"},{"location":"ZJU_CS/OS/chap12/#takeaway","title":"Takeaway","text":"<p>!! Summary \"Takeway\"     * File system     * File operations         * Create, open, read/write, close     * File type     * File structure     * File access     * Directory structure         * Single level, two-level, tree, acyclic-graph, general graph     * Protection         * ACL</p> <ul> <li>How to use file system?<ul> <li>How to use file?</li> <li>How to use directory?</li> </ul> </li> <li>How to implement file system?<ul> <li>How to implement file?</li> <li>How to implement directory?</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap13/","title":"Chap13 | File System Implementation","text":""},{"location":"ZJU_CS/OS/chap13/#layered_file_system","title":"Layered File System","text":"<ul> <li> <p>Logical file system</p> <ul> <li>Keep all the meta-data necessary for the file system</li> <li>It stores the directory structure</li> <li>It stores a data structure that stores the file description (File Control Block - FCB)</li> <li>Input from above:<ul> <li>Open/Read/Write filepath</li> </ul> </li> <li>Output to below:<ul> <li>Read/Write logical blocks</li> </ul> </li> </ul> </li> <li> <p>File-organization module</p> <ul> <li> <p>Knows about logical file blocks (from 0 to N) and corresponding physical file blocks: it performs translation</p> <p>\u628a\u903b\u8f91\u5757\u6620\u5c04\u5230\u7269\u7406\u5757\u3002\u8f93\u5165\u662f\u903b\u8f91\u5757\u53f7\uff0c\u8f93\u51fa\u662f\u7269\u7406\u5757\u53f7\u3002</p> </li> <li> <p>It also manages free space</p> </li> </ul> </li> <li> <p>Basic file system</p> <ul> <li> <p>Allocates/maintains various buffers that contain file-system, directory, and data blocks.</p> <p>\u63d0\u4f9b buffer\uff0c\u7528\u4e8e\u7f13\u5b58\u6587\u4ef6\u7cfb\u7edf\u3001\u76ee\u5f55\u548c\u6570\u636e\u5757\u3002\u5728 Linux \u4e2d\u79f0\u4e3a IO buffer\u3002</p> </li> </ul> </li> <li> <p>I/O Control</p> <p>Device drivers and interrupt handlers.</p> <p>I/O control \u5c06\u4e0a\u5c42\u7684\u6307\u4ee4\u8f6c\u6362\u4e3a low-level, hardware-specific \u7684\u6307\u4ee4\u6765\u5b9e\u73b0\u76f8\u5173\u64cd\u4f5c\u3002\u540c\u65f6\u4e5f\u53ef\u4ee5\u53d1\u4e2d\u65ad\u3002</p> </li> </ul> <p>\u5206\u5c42\u662f\u4e3a\u4e86\u964d\u4f4e\u590d\u6742\u5ea6\uff0c\u901a\u8fc7\u63a5\u53e3\u6765\u9694\u79bb\u4e0d\u540c\u5c42\u3002\u4f46\u4e5f\u964d\u4f4e\u4e86\u6027\u80fd\u3002</p>"},{"location":"ZJU_CS/OS/chap13/#file_system_data_structures","title":"File System Data Structures","text":"<p>on-disk \u7684\u662f\u53ef\u6301\u4e45\u5316\u7684\uff08persisitant\uff09\uff0cin-memory \u7684\u662f\u6613\u5931\u7684\uff08volatile\uff09\u3002</p> <ul> <li> <p>On-disk structures</p> <ul> <li>An optional boot control block</li> <li>A volume control block</li> <li>A directory</li> <li>A per-file File Control Block (FCB) </li> </ul> </li> <li> <p>In-memory structures</p> <ul> <li>A mount table with one entry per mounted volume</li> <li>A directory cache for fast path translation (performance)</li> <li>A global open-file table</li> <li>A per-process open-file table</li> <li>Various buffers holding disk blocks \u201cin transit\u201d (performance)</li> </ul> </li> </ul>"},{"location":"ZJU_CS/OS/chap13/#file_control_block","title":"File Control Block","text":"<p>\u5728 UNIX \u4e2d\uff0cFCB \u88ab\u79f0\u4e3a inode\uff1b\u5728 NTFS \u4e2d\uff0c\u6bcf\u4e2a FCB \u662f\u4e00\u4e2a\u53eb master file table \u7684\u7ed3\u6784\u7684\u4e00\u884c\u3002</p> <p>Example</p> <p>\u8fd9\u91cc\u524d\u9762\u7684\u662f metadata\uff0c\u540e\u9762\u5b58\u6709\u6570\u636e\u5757\u7684\u6307\u9488\u3002 </p>"},{"location":"ZJU_CS/OS/chap13/#file_creation","title":"File Creation","text":"<p>\u903b\u8f91\u6587\u4ef6\u7cfb\u7edf\u4e3a\u8fd9\u4e2a\u65b0\u7684\u6587\u4ef6\u5206\u914d\u4e00\u4e2a\u65b0\u7684 FCB\uff08\u4e0e\u6587\u4ef6\u4e00\u5bf9\u4e00\u6620\u5c04\uff09\uff0c\u968f\u540e\u628a\u5b83\u653e\u5230\u4e00\u4e2a\u76ee\u5f55\u91cc\uff0c\u5c06\u5bf9\u5e94\u7684 directory \u8bfb\u5230\u5185\u5b58\uff0c\u5e76\u7528 filename \u548c FCB \u66f4\u65b0 directory\u3002</p>"},{"location":"ZJU_CS/OS/chap13/#file_open_close","title":"File Open &amp; Close","text":"<p>\u7cfb\u7edf\u8c03\u7528 <code>open()</code> \u5c06\u6587\u4ef6\u540d\u4f20\u7ed9 logical file system\uff0c\u540e\u8005\u641c\u7d22 system-wide open-file table \u4ee5\u786e\u5b9a\u8be5\u6587\u4ef6\u662f\u5426\u6b63\u5728\u88ab\u5176\u4ed6\u8fdb\u7a0b\u4f7f\u7528\u3002</p> <ul> <li>\u5982\u679c\u6709\uff0c\u5219\u76f4\u63a5\u5728\u5f53\u524d\u8fdb\u7a0b\u7684 per-process open-file table \u4e2d\u65b0\u5efa\u4e00\u4e2a entry\uff0c\u6307\u5411 system-wide open-file table \u4e2d\u7684\u5bf9\u5e94\u9879\u5373\u53ef\u3002</li> <li>\u5426\u5219\uff0c\u9700\u8981\u5728 directory \u4e2d\u627e\u5230\u8fd9\u4e2a file name\uff0c\u5e76\u5c06\u5176 FCB \u4ece\u78c1\u76d8\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u5e76\u5c06\u5176\u653e\u5728 system-wide open-file table \u4e2d\u3002\u7136\u540e\uff0c\u5728\u5f53\u524d\u8fdb\u7a0b\u7684 per-process open-file table \u4e2d\u65b0\u5efa\u4e00\u4e2a entry\uff0c\u6307\u5411 system-wide open-file table \u4e2d\u7684\u5bf9\u5e94\u9879\u3002</li> </ul> <p>\uff08\u8fd9\u91cc\u7684 index \u5c31\u662f file descriptor\uff09</p> <p>\u6253\u5f00\u6587\u4ef6\u4e4b\u540e\u5c31\u62ff\u5230\u4e86\u4e00\u4e2a pointer\uff0c\u6307\u5411\u8fd9\u4e2a\u6587\u4ef6\u3002</p> <p>\u5982\u679c\u8981\u5173\u95ed\u6587\u4ef6\uff0cper-process open-file table \u4e2d\u5bf9\u5e94 entry \u5c06\u88ab\u5220\u9664\uff0csystem-wide open-file table \u4e2d\u7684 counter \u5c06\u88ab -1\uff1b\u5982\u679c\u8be5 counter \u6e05\u96f6\uff0c\u5219\u66f4\u65b0\u7684 metadata \u5c06\u88ab\u5199\u4f1a\u78c1\u76d8\u4e0a\u7684 directory structure \u4e2d\uff0csystem-wide open-file table \u7684\u5bf9\u5e94 entry \u5c06\u88ab\u5220\u9664\u3002</p> <p>\u5728 Unix \u91cc\u9762\uff08UFS\uff09System-Wide Open-File Table \u4f1a\u653e\u8bbe\u5907\u3001\u7f51\u7edc\uff0c\u6240\u4ee5\u6211\u4eec\u7684\u8bbe\u5907\u4e5f\u662f\u7528\u6587\u4ef6\u6765\u8868\u793a\u7684\uff0c\u8bfb\u5199\u6587\u4ef6\u76f8\u5f53\u4e8e\u8bfb\u5199\u8bbe\u5907\u3002 </p>"},{"location":"ZJU_CS/OS/chap13/#virtual_file_systems","title":"Virtual File Systems","text":"<p>\u64cd\u4f5c\u7cfb\u7edf\u53ef\u4ee5\u540c\u65f6\u652f\u6301\u591a\u79cd\u7c7b\u578b\u7684\u6587\u4ef6\u7cfb\u7edf\u3002</p> <p>VFS provides an object-oriented way of implementing file systems.</p> <ul> <li>OS defines a common interface for FS, all fses implement them.</li> <li>System call is implemented based on this common interface.</li> </ul> <p>Example</p> <p></p> <p>VFS Implementation Write syscall -&gt; <code>vfs_write</code> -&gt; indirect call -&gt; <code>ext4_file_write_iter</code></p> <p>\u5728\u9700\u8981\u8c03\u7528\u67d0\u4e2a\u51fd\u6570\u65f6\uff0c\u53bb\u5bf9\u5e94 FS \u7684\u51fd\u6570\u8868\u7684\u7ea6\u5b9a\u4f4d\u7f6e\u627e\u5230\u51fd\u6570\u6307\u9488\u5c31\u53ef\u4ee5\u8bbf\u95ee\u4e86\u3002\u8fd9\u548c C++ \u4e2d\u591a\u6001\u7684\u865a\u51fd\u6570\u8868\u662f\u7c7b\u4f3c\u7684\u3002</p> <p>\u5728\u6211\u4eec\u521b\u5efa\u8fd9\u4e2a\u6587\u4ef6\u7684\u65f6\u5019\uff0c<code>file-&gt;f_op</code> \u5c31\u88ab\u8bbe\u4e3a\u4e86\u5bf9\u5e94\u7684\u51fd\u6570\u8868\u7684\u5730\u5740\uff08<code>f_op</code> \u662f\u6307\u9488\uff09\u3002</p> <p><code>struct file</code> \u91cc\u5b58\u4e86\u6587\u4ef6\u7684 <code>file_operations</code>\uff0c\u4f46\u6ca1\u6709\u5b58\u6587\u4ef6\u7684 type\uff0c\u56e0\u4e3a\u6211\u4eec\u6709\u77e5\u9053\u64cd\u4f5c\u5bf9\u5e94 fs \u7684\u6587\u4ef6\uff0c\u5c31\u4e0d\u9700\u8981\u77e5\u9053\u6587\u4ef6\u7684\u7c7b\u578b\u4e86\u3002</p>"},{"location":"ZJU_CS/OS/chap13/#directory_implementation","title":"Directory Implementation","text":"<p>Directory is a special file, storing the mapping from file name to inode.</p> <p>\u4ed6\u7684\u6570\u636e\u5757\u6709\u81ea\u5df1\u7684\u540d\u5b57\uff08\u76ee\u5f55\u9879 <code>dir_entry</code>\uff09\uff0c\u6bcf\u4e00\u4e2a\u76ee\u5f55\u9879\u6709\u4e00\u4e2a inode\u3001\u76ee\u5f55\u9879\u957f\u5ea6\u3001\u540d\u5b57\u957f\u5ea6\u3002</p> <p>\u6700\u7b80\u5355\u7684\u5b9e\u73b0\u65b9\u5f0f\u662f linear list\uff0c\u5373\u7ef4\u62a4 <code>dir_entry[]</code>\u3002\u8fd9\u79cd\u65b9\u6848\u7684\u7f3a\u70b9\u662f\u67e5\u627e\u6587\u4ef6\u5f88\u8d39\u65f6\u3002</p> <p>\u4f7f\u7528\u6709\u5e8f\u6570\u636e\u7ed3\u6784\uff08\u6709\u5e8f\u8868\u3001\u5e73\u8861\u6811\u3001B+ \u6811\u7b49\uff09\u80fd\u591f\u4f18\u5316\u8fd9\u4e00\u95ee\u9898\u3002</p> <p>\u4f7f\u7528 hash table \u4e5f\u53ef\u4ee5\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\u3002</p> <p>\u521b\u5efa\u4e00\u4e2a\u6587\u4ef6\uff1a\u9996\u5148\u627e\u5230\u5f53\u524d\u76ee\u5f55\u7684 inode\uff0c\u5728\u5176\u6307\u5411\u7684\u6570\u636e\u5757\u91cc\u52a0\u4e0a\u4e00\u4e2a\u76ee\u5f55\u9879\u3002\uff08\u5728\u4e4b\u524d\u8981\u5148\u5206\u914d\u4e00\u4e2a inode \u968f\u540e\u624d\u80fd\u653e\u5165\u76ee\u5f55\u9879\uff09</p>"},{"location":"ZJU_CS/OS/chap13/#disk_block_allocation","title":"Disk Block Allocation","text":"<p>Files need to be allocated with disk blocks to store data.</p> <p>\u8fd9\u91cc\u4ecb\u7ecd 3 \u79cd\u4e0d\u540c\u7684 policy\u3002</p>"},{"location":"ZJU_CS/OS/chap13/#contiguous_allocation","title":"Contiguous Allocation","text":"<p>Each file is in a set of contiguous blocks.</p> <p>\u4f18\u70b9\u662f\u987a\u5e8f\u8bbf\u95ee\u5f88\u5feb\uff0c\u540c\u65f6\u76ee\u5f55\u4e5f\u53ea\u9700\u8981\u7ef4\u62a4\u6587\u4ef6\u7684\u8d77\u59cb block \u53ca\u5176\u957f\u5ea6\uff1b\u7f3a\u70b9\u662f\u4f1a\u5e26\u6765\u788e\u7247\uff08\u78c1\u76d8\u901a\u5e38\u591f\u5927\uff0c\u6211\u4eec\u53ef\u80fd\u4e0d\u5728\u610f\u8fd9\u4e2a\u95ee\u9898\uff09\uff0c\u6587\u4ef6\u53ef\u80fd\u4f1a\u589e\u5927\uff0c\u9700\u8981\u91cd\u65b0\u5206\u914d\u7a7a\u95f4\u3002</p> <p>Example</p> <p></p>"},{"location":"ZJU_CS/OS/chap13/#linked_allocation","title":"Linked Allocation","text":"<p>Linked allocation: each file is a linked list of disk blocks.</p> <p>\u5141\u8bb8\u5757\u5206\u5e03\u5728\u78c1\u76d8\u4e0a\u7684\u4efb\u4f55\u5730\u65b9\uff0c\u53ea\u9700\u8981\u7ef4\u62a4\u6bcf\u4e2a\u5757\u7684\u4e0b\u4e00\u4e2a\u5757\u7684\u5730\u5740\u5373\u53ef\u3002\u8fd9\u6837\u5c31\u6ca1\u6709\u5916\u90e8\u788e\u7247\u4e86\u3002\u7f3a\u70b9\u662f\u5b9a\u4f4d\u67d0\u4e2a\u5757\u9700\u8981\u904d\u5386\u94fe\u8868\uff0c\u9700\u8981\u5f88\u591a IO\u3002\u800c\u4e14 reliablity \u4e5f\u4e0d\u597d\uff0c\u5982\u679c\u67d0\u4e2a\u5757\u7684\u6307\u9488\u574f\u6389\uff0c\u540e\u9762\u7684\u5757\u5c31\u90fd\u8bbf\u95ee\u4e0d\u5230\u4e86\u3002\u800c\u4e14\u8fd9\u79cd\u5b9e\u73b0\u65b9\u5f0f\u4e0d\u652f\u6301 random access\u3002</p> <p>\u89e3\u51b3\u65b9\u6848\u4e4b\u4e00\u662f\uff0c\u5c06\u591a\u4e2a\u5757\u7ec4\u6210 cluster\u3002\u8fd9\u79cd\u65b9\u6848\u4f1a\u589e\u52a0\u5185\u90e8\u788e\u7247\u3002</p> <p>Example</p> <p></p> <p>FAT</p> <p></p>"},{"location":"ZJU_CS/OS/chap13/#indexed_allocation","title":"Indexed Allocation","text":"<p>Indexed allocation: each file has its own index blocks of pointers to its data blocks.</p> <p>\u7528\u4e00\u4e2a\u5757\u53ea\u505a index\uff0c\u91cc\u9762\u5b58\u653e\u6307\u5411\u6570\u636e\u5757\u7684\u6307\u9488\u3002\u8fd9\u6837\u53ef\u4ee5\u652f\u6301 random access\u3002\u7f3a\u70b9\u662f reliability \u4e0d\u597d\uff0c\u5982\u679c index \u5757\u574f\u4e86\uff0c\u6587\u4ef6\u5c31\u8bbf\u95ee\u4e0d\u5230\u4e86\uff1b\u6d6a\u8d39\u7a7a\u95f4\uff08\u9700\u8981\u4e00\u4e2a\u5757\u505a index\uff09\u3002</p> <p>Example</p> <p></p> <p>\u9700\u8981\u4e00\u4e2a\u65b9\u6cd5\u5206\u914d index block \u7684\u5927\u5c0f\uff08\u592a\u5927\u4f1a\u6d6a\u8d39\uff0c\u592a\u5c0f\u90a3\u4e48\u6307\u5411\u7684\u7a7a\u95f4\u5c0f\uff09\u3002\u6211\u4eec\u53ef\u4ee5\u628a index block \u94fe\u63a5\u8d77\u6765\uff0c\u6216\u8005\u7528\u591a\u7ea7\u7d22\u5f15\u3002</p> <p>Example</p> <p></p> <p>\u5982\u679c block size \u4e3a 4KB\uff0c\u90a3\u4e48 Linux \u4e2d\u80fd\u521b\u5efa\u7684\u6700\u5927\u6587\u4ef6\u5927\u5c0f\u4e3a 4TB+4GB+4MB+48KB\u3002\u5982\u679c\u6211\u4eec\u6709\u4e00\u4e2a 10KB \u7684\u6587\u4ef6\uff0c\u90a3\u4e48\u53ea\u9700\u8981\u524d 3 \u4e2a direct pointer \u5c31\u53ef\u4ee5\uff0c\u540e\u9762\u7684\u6307\u9488\u90fd\u662f NULL\uff0c\u4e0d\u9700\u8981\u5c55\u5f00\u3002</p>"},{"location":"ZJU_CS/OS/chap13/#free-space_management","title":"Free-Space Management","text":"<ul> <li> <p>Bitmap</p> <p>\u6bcf\u4e00\u4e2a block \u90fd\u7528\u4e00\u4e2a\u6bd4\u7279\u8bb0\u5f55\u5206\u914d\u72b6\u6001\u3002\u5bb9\u6613\u627e\u5230\u8fde\u7eed\u7684\u7a7a\u95f2\u7a7a\u95f4\uff0c\u4f46\u662f\u5360\u7528\u989d\u5916\u7a7a\u95f4\u3002</p> <p>Example</p> <p></p> </li> <li> <p>Linked Free Space</p> <p>Keep free blocks in linked list.  </p> <p>\u597d\u5904\u662f\u4e0d\u4f1a\u6d6a\u8d39\u7a7a\u95f4\uff0c\u4f46\u662f\u4e0d\u80fd\u5feb\u901f\u627e\u5230\u8fde\u7eed\u7684\u7a7a\u95f2\u7a7a\u95f4\uff0c\u6548\u7387\u4f4e\u3002</p> <p>Example</p> <p></p> </li> <li> <p>Grouping</p> <p>Use indexes to group free blocks. Store address of n-1 free blocks in the first free block, plus a pointer to the next index block.</p> <p>\u7ef4\u62a4\u82e5\u5e72\u4e2a block \u5f62\u6210\u7684\u94fe\u8868\uff0c\u6bcf\u4e2a block \u4fdd\u5b58\u82e5\u5e72\u7a7a\u95f2\u5757\u7684\u5730\u5740\u3002</p> </li> <li> <p>Counting</p> <p>a link of clusters (starting block + # of contiguous blocks).</p> <p>\u7ef4\u62a4\u7684\u662f\u8fde\u7eed\u7684\u7a7a\u95f2\u5757\u7684\u94fe\u8868\uff0c\u5373\u94fe\u8868\u7684\u6bcf\u4e2a\u7ed3\u70b9\u662f\u8fde\u7eed\u7684\u7a7a\u95f2\u5757\u7684\u9996\u5757\u6307\u9488\u548c\u8fde\u7eed\u7a7a\u865a\u5757\u7684\u6570\u91cf\u3002</p> </li> </ul>"},{"location":"ZJU_CS/OS/chap13/#file_system_performance","title":"File System Performance","text":"<p>To improve file system performance</p> <ul> <li>Keeping data and metadata close together</li> <li>Use cache: separate section of main memory for frequently used blocks</li> <li>Use asynchronous writes, it can be buffered/cached, thus faster</li> <li>Free-behind and read-ahead</li> </ul>"},{"location":"ZJU_CS/OS/chap13/#takeaway","title":"Takeaway","text":"<p>Takeaway</p> <ul> <li>File system layers</li> <li>File system implementation<ul> <li>On-disk structure, in-memory structure</li> <li>inode</li> </ul> </li> <li>File creation(), open()</li> <li>VFS</li> <li>Directory Implementation</li> <li>Allocation Methods<ul> <li>Contiguous, linked, indexed</li> </ul> </li> <li>Free-Space Management</li> </ul>"},{"location":"ZJU_CS/OS/mid-review/","title":"Mid Review","text":"<ul> <li>Computer architecture</li> <li>OS overview</li> <li>OS structure</li> <li>Process management</li> <li>schedule</li> <li>IPC</li> <li>Thread</li> <li>synchronization</li> <li>deadlock</li> </ul>"},{"location":"ZJU_CS/OS/mid-review/#os_overview_structures","title":"OS overview &amp; structures","text":"<p>OS is a resource abstractor and allocator \u6240\u6709\u548c\u786c\u4ef6\u8d44\u6e90\u6709\u5173\u7684\u64cd\u4f5c\u90fd\u662fprivileged\u7684\uff0c\u6240\u4ee5\u9700\u8981OS\u6765\u7ba1\u7406\u3002</p> <p>OS is a control program</p> <p>There are two kinds of events: interrupt and trap.</p>"},{"location":"ZJU_CS/OS/mid-review/#system_call","title":"system call","text":"<p>system call is a software trap.</p> <p>normal syscall</p> <p>x86-32: <code>int 0x80</code> x86-64: <code>syscall</code> ARM: <code>svc</code> MIPS: <code>ecall</code></p> <p>syscall table \u91cc\u7684 index \u662f syscall number\uff0c\u5bf9\u5e94\u7684\u662f syscall handler \u7684\u5730\u5740\u3002</p> <p>\u4e0d\u540cthread\u7684context\u662f\u4e0d\u540c\u7684\uff0c\u6240\u4ee5\u9700\u8981 context switch\u3002\u4f1a\u5206\u522b\u5b58\u653e\u5230thread\u5bf9\u5e94\u7684kernel stack\u91cc\uff0c \u5b58\u653ept_regs, pc, sp\u7b49\u3002  \u6700\u540e\u8c03\u7528<code>ret_to_user</code>\u8fd4\u56de\u5230user\u3002</p> <p></p> <ul> <li>\u9700\u8981\u660e\u6670dynamic link\u548cstatic link\u7684\u4f18\u7f3a\u70b9</li> <li>dynamic\u901a\u8fc7<code>.interp</code>\u627e\u5230<code>ld-linux.so</code>\uff0c\u7136\u540e\u627e\u5230<code>.dynsym</code>\uff0c\u6700\u540e\u627e\u5230<code>.text</code>\u3002</li> </ul> <p><code>execve</code>\u4f1a\u628a\u65b0\u7684\u7a0b\u5e8f\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u8c03\u5ea6\u6240\u9700\u8981\u7684\u5185\u5bb9\u3002 </p> <p><code>entry point address</code> \u662f <code>_start</code> \u7684\u5730\u5740\uff0c\u91cc\u9762\u4f1a\u8c03\u7528 <code>__libc_start_main</code> \u51fd\u6570\uff0c\u91cc\u9762\u624d\u8c03\u7528 <code>main()</code> \u51fd\u6570\u3002\u5e76\u4e14\u5b58\u5230user\u7684pc\u91cc\u3002</p> \u5fc5\u8003\u4e24\u4e2a\u56fe <p> </p> <p>\u8981\u533a\u5206Policy\u548cMechanism\uff0cPolicy\u662f\u51b3\u7b56\uff0cMechanism\u662f\u5b9e\u73b0\u3002</p>"},{"location":"ZJU_CS/OS/mid-review/#process","title":"Process","text":"<p>A process is a program in execution. </p> <p>\u795e\u56fe</p> <p></p>"},{"location":"ZJU_CS/OS/mid-review/#_1","title":"\u4e94\u4e2a\u72b6\u6001","text":"<ul> <li>fork() \u4f1a\u590d\u5236\u7236\u8fdb\u7a0b\u7684PCB\uff0c\u4f46\u662f\u4e0d\u4f1a\u590d\u5236\u5185\u5b58\uff0c\u53ea\u662f\u5171\u4eab\u5185\u5b58\u3002</li> <li>exec() \u4f1a\u628a\u65b0\u7684\u7a0b\u5e8f\u52a0\u8f7d\u5230\u5185\u5b58\u4e2d\uff0c\u8c03\u5ea6\u6240\u9700\u8981\u7684\u5185\u5bb9\u3002</li> <li>wait() \u4f1a\u7b49\u5f85\u5b50\u8fdb\u7a0b\u7ed3\u675f\uff0c\u7136\u540e\u8fd4\u56de\u5b50\u8fdb\u7a0b\u7684\u72b6\u6001\u3002</li> </ul> <p>\u4e00\u5b9a\u8981\u4f1a\u6570\u6709\u591a\u5c11\u4e2a\u8fdb\u7a0b</p> <p>\u4e4b\u540e\u8bb2\u4e86orphan\u548czombie\u8fdb\u7a0b\uff0c\u4ee5\u53ca\u8fdb\u7a0b\u7684\u521b\u5efa\u548c\u9500\u6bc1\u3002</p> <p>Process schedule\uff1a\u6709\u591a\u5c11\u4e2a<code>schedule</code>\u5c31\u6709\u591a\u5c11\u4e2a<code>queue</code></p>"},{"location":"ZJU_CS/OS/mid-review/#cpu_switch_to","title":"CPU switch to","text":"<p>\u8981\u660e\u6670context switch\u7684\u795e\u56fe</p> <p>\u5185\u6838\u7684</p> <p>\u591a\u4e86pt_regs\uff1b\u4ee5\u53ca\u6709\u5927\u5c0f\u9650\u5236</p> <p><code>task_struct</code>\u76f8\u5f53\u4e8ePCB\uff0c\u91cc\u9762\u6709<code>mm_struct</code>\uff0c<code>files_struct</code>\u7b49\u3002 \u4ee5\u53cacaller saved\u548ccallee saved\u3002</p> <p>context_switch \u6ca1\u6709\u5355\u72ec\u7684<code>syscall</code>\uff0c\u53ea\u662ftimer\u8c03\u7528\u540e\u81ea\u52a8schedule\u4e86\u3002</p> <p>\u4e3a\u4ec0\u4e48fork\u4f1a\u8fd4\u56de\u4e24\u4e2a\u503c</p> <p>\u56e0\u4e3a\u4f1a\u6709\u4e24\u4e2acontext\uff0c\u4e00\u4e2a\u662f\u7236\u8fdb\u7a0b\u7684\uff0c\u4e00\u4e2a\u662f\u5b50\u8fdb\u7a0b\u7684\uff1b\u5206\u522b\u8fd4\u56de0\u548c\u5b50\u8fdb\u7a0b\u7684pid\u3002</p> <p></p> <p>\u4e24\u4e2apc\u7684\u503c\u533a\u522b\u5728\u4e8e\uff0ctask_struct\u91cc\u7684<code>thread_info</code>\u7684cpu_context\u91cc\u7684<code>pc</code>\u5b58\u7684\u662fkernel\u7684\u5730\u5740\uff0c\u800c<code>pt_regs</code>\u91cc\u7684<code>pc</code>\u5b58\u7684\u662fuser\u7684\u5730\u5740\u3002</p>"},{"location":"ZJU_CS/OS/mid-review/#ipc","title":"IPC","text":"<ul> <li>shared memory\u548cmessage passing</li> </ul>"},{"location":"ZJU_CS/OS/mid-review/#thread","title":"Thread","text":"<p>\u795e\u56fe</p> <p></p> <p>\u662fred-hat\u5e2e\u52a9linux\u5f00\u53d1\u7684thread\u7684\u5b9e\u73b0\u3002 \u4e00\u822c\u6765\u8bf4\u662f\u4f7f\u7528one to one\u7684mapping</p>"},{"location":"ZJU_CS/OS/mid-review/#synchronization","title":"Synchronization","text":"<p>semaphore\u91cc\u5fc5\u987b\u6709spinlock\uff0c\u56e0\u4e3a\u6709\u53ef\u80fd\u4f1a\u88ab\u6253\u65ad\u3002 \u8981\u660e\u6670\u56db\u4e2a\u6982\u5ff5 \u8fd9\u91cc\u4e00\u822c\u6765\u8bf4\u4f1a\u51fa\u4e00\u4e2a\u5927\u9898</p>"},{"location":"ZJU_CS/computer_organization/","title":"\u5199\u5728\u524d\u9762","text":"<p>\u672c\u6587\u662f\u56fe\u7075\u73ed\u59dc\u5973\u58eb\u7684\u8ba1\u7b97\u673a\u7ec4\u6210\uff0c\u5728\u54b8\u9c7c\u55a7\u7b14\u8bb0\u7684\u57fa\u7840\u4e0a\u8fdb\u884c\u6574\u7406\u5b66\u4e60\u3002</p> <p>\u8bfe\u7a0b\u6210\u7ee9\u5360\u6bd4\u4e3a\uff1aquiz+6homework 20%\uff0c\u671f\u4e2d10%\uff0c\u671f\u672b40%\uff0c\u5b9e\u9a8c30%\uff08bonus 5%\uff09\uff1b</p> <p>\u5176\u4e2d\u9a8c\u653660%\uff0c\u62a5\u544a40%\u3002\u8fdf\u4ea4\u6bcf\u5929\u6263 20%\ud83d\ude2d\uff08\u75db\u7684\u6559\u8bad\uff09 \u671f\u4e2d\u53ef\u4ee5\u7ffb\u5f80\u5e74\u667a\u4e91\uff0c\u59dc\u5973\u58eb\u4e00\u822c\u6765\u8bf4\u90fd\u4f1a\u6177\u6168\u8bb2\u89e3\u7684 \u5efa\u8bae\u5e73\u65f6\u90fd\u8ba4\u771f\u5b8c\u6210\u4f5c\u4e1a\uff0c\u4e0d\u8981\u5b66\u6211\u6d51\u6c34\u6478\u9c7c</p> <p>\u8fd9\u662f\u8ba1\u7b97\u673a\u7ec4\u6210\u8bfe\u7a0b\u7684\u5b66\u4e60\u8bb0\u5f55\u3002</p> <p>\u4f7f\u7528\u7684\u8bfe\u672c\u662f Computer Organization and Design - The Hardware / Software Interface (RISC-V Edition)\uff1a</p> <p>\u5b9e\u9a8c\u4ee3\u7801\u53c2\u8003\uff1ahttps://github.com/liangchenwater/RISC-V-CPU \u4f5c\u4e1a\u7b54\u6848\u53ef\u53c2\u8003\uff1ahttps://github.com/dmohindru/cod5e/blob/master/solutions</p> <p>(\u5207\u8bb0,\u7531\u4e8e\u6307\u4ee4\u96c6\u4e0d\u540c\uff0c\u7b54\u6848\u4e0d\u5b8c\u5168\u4e00\u6837\uff0c\u6284\u7684\u65f6\u5019\u9700\u4fdd\u6301\u6e05\u9192Orz)</p> <p></p> <p>\u8bf4\u660e</p> <p>\u6211\u81ea\u8ba4\u4e3a\u5728 3 Arithmetic, 4 Processor, 5 Cache \u4e09\u7ae0\u4e2d\u7684\u6574\u7406\u548c\u8bb2\u89e3\u662f\u975e\u5e38\u8be6\u7ec6\u7684\uff0c\u5982\u679c\u8fd9\u4e9b\u90e8\u5206\u5b58\u5728\u770b\u4e0d\u61c2\u7684\u5730\u65b9\uff0c\u8bf7\u52a1\u5fc5\u8054\u7cfb\u6211\uff08xuan\u4f6c\uff09\u3002</p> <p>\u8bfe\u7a0b\u901f\u89c8</p> <ul> <li> Chapter1: Computer Abstraction and Technology</li> <li> Chapter 2: Instructions: Language of  the Computer</li> <li> Chapter 3: Arithmetic for Computers</li> <li> Chapter 4:The Processor\uff1aDatapath and Control</li> <li> Chapter 5:Large and Fast:  Exploiting Memory Hierarchy</li> <li> Chapter 6: Parallel processor from client to Cloud (\u9009\u8bb2\uff0c\u975e\u8003\u8bd5\u5185\u5bb9)</li> <li> Appendix: Storage, Networks, and Other Peripherals (Ch8 of Version 3,\u4e86\u89e3\u6982\u5ff5)</li> </ul>"},{"location":"ZJU_CS/computer_organization/1_prelude/","title":"1 Prelude","text":"<p>\u524d\u8a00</p> <p>\u672c\u7ae0\u5185\u5bb9\u6709\u4e0d\u5c11\u6982\u8ff0\u6027\u7684\u5185\u5bb9\uff0c\u5f88\u591a\u5185\u5bb9\u5f88\u6d45\u4e5f\u5f88\u6563\uff0c\u4e4b\u540e\u7ae0\u8282\u90fd\u4f1a\u8be6\u7ec6\u5c55\u5f00\uff0c\u6b64\u5904\u66f4\u591a\u7684\u662f\u4ecb\u7ecd\u3002\u5efa\u8bae\u91cd\u70b9\u5173\u6ce8\u4ee5\u4e0b\u90e8\u5206\uff1a</p> <ul> <li>1.1 Eight Great Ideas</li> <li>1.5 Performance</li> </ul> <ul> <li>\u51af\u00b7\u504c\u4f0a\u66fc\u67b6\u6784</li> <li>\u8ba1\u7b97\u4e0e\u5b58\u50a8\u5206\u79bb</li> <li>\u6570\u636e\u548c\u6307\u4ee4\u653e\u5728\u540c\u4e00\u4e2a\u5b58\u50a8\u5668</li> </ul> <p></p> graph LR; A[\"Computer\\nSystem\"] B[\"Software\"] C[\"Hardware\"] D[\"CPU\"] E[\"Memory\"] F[\"I/O\\ninterface\"] G[\"Control\\nunit\"] H[\"Datapath\"]  A---&gt;B A---&gt;C C---&gt;D C---&gt;E C---&gt;F D---&gt;G D---&gt;H"},{"location":"ZJU_CS/computer_organization/1_prelude/#11_eight_great_ideas","title":"1.1 Eight Great Ideas","text":"<p>\u90e8\u5206\u5728\u5b9e\u9645\u9898\u76ee\u4e2d\u8fd8\u633a\u96be\u533a\u5206\u7684\uff0c\u6ce8\u610f\u8bc6\u522b\u9898\u76ee\u4e2d\u7684\u5173\u952e\u6697\u793a\u3002\u6b64\u5916\uff0c\u5148\u5b66\u4e60\u4e86\u4e4b\u540e\u7684\u5185\u5bb9\u4f1a\u5bf9\u90e8\u5206\u601d\u60f3\u6709\u66f4\u6df1\u523b\u7684\u7406\u89e3\u3002</p> <ul> <li>Design for Moore\u2019s Law \uff08\u8bbe\u8ba1\u7d27\u8ddf\u6469\u5c14\u5b9a\u5f8b\uff09<ul> <li>Moore's Law: Integrated circuit resources double every 18-24 months.</li> <li>Design for where it will be when finishes rather than design for where it starts.</li> </ul> </li> <li>Use Abstraction to Simplify Design (\u91c7\u7528\u62bd\u8c61\u7b80\u5316\u8bbe\u8ba1)<ul> <li>\u5c42\u6b21\u5316\u3001\u6a21\u5757\u5316\u7684\u8bbe\u8ba1</li> </ul> </li> <li>Make the Common Case Fast (\u52a0\u901f\u5927\u6982\u7387\u4e8b\u4ef6)</li> <li>Performance via Parallelism (\u901a\u8fc7\u5e76\u884c\u63d0\u9ad8\u6027\u80fd)</li> <li>Performance via Pipelining (\u901a\u8fc7\u6d41\u6c34\u7ebf\u63d0\u9ad8\u6027\u80fd)<ul> <li>\u6362\u53e5\u8bdd\u8bf4\u5c31\u662f\uff0c\u6bcf\u4e2a\u6d41\u7a0b\u540c\u65f6\u8fdb\u884c\uff0c\u53ea\u4e0d\u8fc7\u6bcf\u4e00\u4e2a\u6d41\u7a0b\u5de5\u4f5c\u7684\u5bf9\u8c61\u662f\u65f6\u95f4\u4e0a\u76f8\u90bb\u7684\u82e5\u5e72\u4ea7\u54c1\uff1b</li> <li>\u76f8\u6bd4\u4e8e\u7b49\u4e00\u4e2a\u4ea7\u54c1\u5b8c\u5168\u751f\u4ea7\u5b8c\u518d\u5f00\u59cb\u4e0b\u4e00\u4e2a\u4ea7\u54c1\u7684\u751f\u4ea7\uff0c\u4f1a\u5feb\u5f88\u591a\uff1b</li> <li>\u5e0c\u671b\u6bcf\u4e00\u4e2a\u6d41\u7a0b\u7684\u65f6\u95f4\u662f\u76f8\u5bf9\u5747\u5300\u7684\uff1b</li> </ul> </li> <li>Performance via Prediction (\u901a\u8fc7\u9884\u6d4b\u63d0\u9ad8\u6027\u80fd)<ul> <li>\u4f8b\u5982\u5148\u5f53\u4f5c <code>if()</code> \u6761\u4ef6\u6210\u7acb\uff0c\u6267\u884c\u5b8c\u5185\u90e8\u5185\u5bb9\uff0c\u5982\u679c\u540e\u6765\u53d1\u73b0\u786e\u5b9e\u6210\u7acb\uff0c\u90a3\u4e48\u76f4\u63a5 apply\uff0c\u5426\u5219\u5c31\u518d\u91cd\u65b0\u6b63\u5e38\u505a\uff1b</li> <li>\u8fd9\u4e48\u505a\u5c31\u597d\u5728\uff08\u53c8\u6216\u8005\u8bf4\u53ea\u6709\u8fd9\u79cd\u60c5\u51b5\u9002\u5408\u9884\u6d4b\uff09\uff0c\u9884\u6d4b\u6210\u529f\u4e86\u5c31\u52a0\u901f\u4e86\uff0c\u9884\u6d4b\u5931\u8d25\u4e86\u7ea0\u6b63\u7684\u6210\u672c\u4e5f\u4e0d\u9ad8\uff1b </li> </ul> </li> <li>Hierarchy of Memories (\u5b58\u50a8\u5668\u5c42\u6b21)<ul> <li>Disk / Tape -&gt; Main Memory(DRAM) -&gt; L2-Cache(SRAM) -&gt; L1-Cache(On-Chip) -&gt; Registers</li> </ul> </li> <li>Dependability via Redundancy (\u901a\u8fc7\u5197\u4f59\u63d0\u9ad8\u53ef\u9760\u6027)<ul> <li>\u7c7b\u4f3c\u4e8e\u5361\u8f66\u7684\u591a\u4e2a\u8f6e\u80ce\uff0c\u4e00\u4e2a\u6a21\u5757 down \u4e86\u4ee5\u540e\u4e0d\u4f1a\u5267\u70c8\u5f71\u54cd\u6574\u4e2a\u7cfb\u7edf\uff1b</li> </ul> </li> </ul>"},{"location":"ZJU_CS/computer_organization/1_prelude/#12_below_program","title":"1.2 Below Program","text":"graph TD; A[\"High-level language program\"] B[\"Assembly language program\"]   C[\"Binary machine language\"] A ---&gt;|\"Compiler\"| B ---&gt;|\"Assembler\"| C   <ul> <li>\u9ad8\u7ea7\u8bed\u8a00\u7684\u51fa\u73b0\u4f53\u73b0\u4e86\u201c\u62bd\u8c61\u201d\u7684\u601d\u60f3\uff1b</li> </ul> \u6765\u770b\u770bC\u7684\u4e00\u4e2a\u7f16\u8bd1\u8fd0\u884c\u8fc7\u7a0b\u5427"},{"location":"ZJU_CS/computer_organization/1_prelude/#13_components_of_a_computer","title":"1.3 Components of a computer","text":"<p>The five classic components of a computer:</p> <ul> <li>input;</li> <li>output;</li> <li>memory (DRAM);<ul> <li>\u7a0b\u5e8f\u3001\u6570\u636e\u5b58\u50a8\u7684\u5730\u65b9\uff0c\u4e5f\u662f\u7a0b\u5e8f\u201c\u8fd0\u884c\u7684\u4f4d\u7f6e\u201d\uff1b</li> <li>cache memory (SRAM): buffer for the DRAM memory;</li> </ul> </li> <li>datapath;<ul> <li>\u8d1f\u8d23\u5b9e\u9645\u7684\u6570\u636e\u5904\u7406\uff1b</li> </ul> </li> <li>control;<ul> <li>\u8d1f\u8d23\u6307\u6325\u63a7\u5236\u5982\u4f55\u8fdb\u884c\u6570\u636e\u5904\u7406\uff0c\u7ed9\u51fa\u63a7\u5236\u4fe1\u53f7\uff1b</li> </ul> </li> </ul> <p>processor / (central processor unit)CPU = datapath + control</p> <p>\u4e3a\u4e86\u5b9e\u73b0\u62bd\u8c61\uff0c\u6211\u4eec\u8bbe\u8ba1\u4e86\u4e00\u5957\u786c\u4ef6\u548c\u6700\u4f4e\u62bd\u8c61\u7a0b\u5ea6\u7684\u8f6f\u4ef6\u4e4b\u95f4\u7684\u63a5\u53e3\u2014\u2014instruction set architecture (ISA)\uff0c\u672c\u8bfe\u7a0b\u5c06\u4f1a\u4ee5 RISC-V \u4e3a\u4f8b\u8fdb\u884c\u4ecb\u7ecd\uff0c\u8be6\u7ec6\u5185\u5bb9\u5c06\u653e\u5728\u7b2c\u4e8c\u7ae0\u3002</p> <p>\u6b64\u5916\uff0c\u6839\u636e\u662f\u5426\u5177\u6709\u6613\u5931\u6027\uff0c\u5185\u5b58\u88ab\u5206\u4e3a\u4e24\u7c7b\uff1amain memory / prime memory (eg. DRAM) \u548c secondary memory (eg. magnetic disks, flash memory)\u3002</p>"},{"location":"ZJU_CS/computer_organization/1_prelude/#14_technologies_for_building_processors_and_memory","title":"1.4 Technologies for Building Processors and Memory","text":"<ul> <li>integrated circuit (IC): dozens to hundreds of transistors into a single chip;</li> <li>very large-scale integrated circuit (VLIC): billions of combinations of conductors, insulators, and switches manufactured in a single small package;</li> </ul> <p>\u96c6\u6210\u7535\u8def\u52a0\u5de5\u7ed5\u4e0d\u5f00\u7684\u4e00\u4e2a\u8bdd\u9898\u5c31\u662f\u7845\u6676\u52a0\u5de5\uff0c\u7845\u6676\u952d(silicon crystal ingot)\u4f1a\u88ab\u52a0\u5de5\u6210\u7845\u7247(silicon wafer)\uff0c\u7136\u540e\u518d\u8fdb\u884c\u52a0\u5de5\uff0c\u6700\u540e\u6210\u4e3a\u96c6\u6210\u7535\u8def\u3002\u4e00\u4e2a\u7845\u7247\u4f1a\u88ab\u5207\u6210\u5f88\u591a\u5c0f\u5757\uff0c\u5176\u4e2d\u96be\u514d\u6709\u4e00\u4e9b\u574f\u7684(defects)\uff0c\u800c\u90a3\u4e9b\u597d\u7684\u5c31\u88ab\u79f0\u4e3a dies\uff0c\u6216\u8005\u8bf4 chips\u3002\u800c\u8fd9\u4e2a\u5de5\u827a\u7684\u4ea7\u91cf\u5219\u7531\u4e0b\u9762\u8fd9\u4e2a\u516c\u5f0f\u5b9a\u4e49\uff1a</p> \\[ \\begin{aligned} \\text{Cost per die} &amp;= \\frac{\\text{Cost per wafer}}{\\text{Dies per wafer} \\times \\text{yield}} \\\\ \\text{Dies per wafer} &amp;\\approx \\frac{\\text{Wafer area}}{\\text{Die area}} \\\\ \\text{Yield} &amp;= \\frac{1}{\\left(     1 + (\\text{Defects per area} \\times \\text{Die area} / 2) \\right) ^ 2} \\end{aligned} \\] <p>\u6700\u540e\u4e00\u4e2a\u5f0f\u5b50\u57fa\u4e8e\u7ecf\u9a8c\u89c2\u5bdf\u5f97\u5230\uff0c\u5176\u4e2d\u6307\u6570\u5b9e\u9645\u4e0a\u4e0e\u52a0\u5de5\u6b65\u9aa4\u6570\u91cf\u6709\u5173\u3002</p>"},{"location":"ZJU_CS/computer_organization/1_prelude/#15_performance","title":"1.5 Performance","text":"<p>\u8861\u91cf\u8ba1\u7b97\u673a\u7684\u6027\u80fd\u548c\u8868\u73b0\uff0c\u65e0\u8bba\u5bf9\u4e8e\u5de5\u7a0b\u5e08\u8fd8\u662f\u6d88\u8d39\u8005\u90fd\u662f\u4e00\u4e2a\u975e\u5e38\u5fc5\u8981\u7684\u9700\u6c42\u3002\u5176\u4e2d\u4e00\u4e2a\u91cd\u8981\u7684\u6807\u51c6\u5c31\u662f\u201c\u8fd0\u884c\u901f\u5ea6\u201d\uff0c\u5177\u4f53\u6765\u8bf4\uff1a</p> <ul> <li>Response Time / Execution Time    \u4ece\u7a0b\u5e8f\u5f00\u59cb\u5230\u7ed3\u675f\u7684\u65f6\u95f4</li> <li>Throughput / Bandwidth    \u5355\u4f4d\u65f6\u95f4\u5185\u5b8c\u6210\u7684\u4efb\u52a1\u6570\u91cf</li> </ul> <p>\u5e76\u4e14\u6211\u4eec\u8fd9\u6837\u8054\u7cfb performance \u548c execution time\uff1a</p> \\[ \\text{Performance}_X = \\frac{1}{\\text{Execution time}_X} \\] <p>\u800c\u76f8\u5bf9\u6027\u80fd(Relative Performance)\u5c31\u662f\u975e\u5e38 naive \u5730\u5bf9\u4e24\u4e2a\u6bd4\u8f83\u5bf9\u8c61\u6c42\u6bd4\u503c\uff0c\u6211\u4eec\u901a\u5e38\u6240\u8bf4\u7684\u6bd4\u8f83\u4e24\u4e2a\u4e1c\u897f\u7684\u6027\u80fd\uff0c\u4e5f\u5c31\u662f\u6307\u8ba1\u7b97\u5b83\u4eec\u7684\u76f8\u5bf9\u6027\u80fd\u3002</p> <p>\u5f53\u6211\u4eec\u9700\u8981\u8861\u91cf\u4e00\u4e2a CPU \u7684\u6027\u80fd\uff0c\u6216\u8005\u5177\u4f53\u53bb\u5206\u6790\u4e00\u4e2a CPU \u7684\u6027\u80fd\u6784\u6210\u65f6\uff0c\u5c31\u9700\u8981\u66f4\u52a0\u5177\u4f53\u7684\u6307\u6807\uff1a</p> <ul> <li>CPU (execution) time\uff08CPU \u6267\u884c\u65f6\u95f4\uff09</li> <li>CPU clock cycle\uff08\u65f6\u949f\u5468\u671f\u6570\uff09</li> <li>clock rate\uff08\u65f6\u949f\u9891\u7387\uff09 / clock cycle time\uff08\u65f6\u949f\u5468\u671f\uff09</li> </ul> \\[ \\begin{aligned}     \\text{CPU execution time} &amp;= \\text{CPU clock cycles} \\times \\text{Clock cycle time} \\\\     &amp;= \\frac{\\text{CPU clock cycles}}{\\text{Clock rate}} \\end{aligned} \\] <p>\u540c\u65f6\uff0c\u8fd8\u6709\u4e00\u4e2a\u5bb9\u6613\u5f97\u5230\u7684\u5173\u7cfb\uff1a</p> \\[ \\begin{aligned}     \\text{CPU clock cycles} &amp;= \\text{Instructions count} \\times \\text{Average cycles per instruction} \\end{aligned} \\] <p>\u5176\u4e2d\uff0c\u6bcf\u6761\u6307\u4ee4\u7684\u5e73\u5747\u5468\u671f\u6570(Average cycles per instruction)\u53c8\u7f29\u5199\u4e3a CPI\u3002</p> <p>CPI(clock cycles per instruction), the average number of clock cycles each instruction takes to execute = \\(\\frac{\\text{CPU clock cycles}}{\\text{Instruction count}}\\);</p> <p>\u4e8e\u662f\uff0c\u5c06\u4e0a\u9762\u7684\u4e24\u5757\u5173\u7cfb\u6574\u5408\u8d77\u6765\u5c31\u5f97\u5230\uff1a</p> \\[ \\begin{aligned}     \\text{CPU time} &amp;= \\text{Instruction count} \\times \\text{CPI} \\times \\text{Clock cycle time} \\\\      &amp;= \\frac{\\text{Instruction count} \\times \\text{CPI}}{\\text{Clock rate}} \\end{aligned} \\] \u7ec3\u4e60 Question1Question2 \u9898\u9762\u7b54\u6848 <p>\u7f16\u8bd1\u5668\u53ef\u80fd\u63d0\u4f9b\u4e24\u79cd\u4ee3\u7801\u5e8f\u5217\uff0c\u6bcf\u4e00\u4e2a\u5e8f\u5217\u90fd\u5305\u542b A\u3001B\u3001C \u4e09\u79cd\u7c7b\u578b\u7684\u6307\u4ee4\uff0c\u6bcf\u79cd\u6307\u4ee4\u7684 CPI \u5982\u4e0b\u8868\u6240\u793a\u3002</p> A B C CPI 1 2 3 Instruction count \\@ seq 1 2 1 2 Instruction count \\@ seq 2 4 1 1 <ol> <li>\u54ea\u4e00\u4e2a seq \u6267\u884c\u4e86\u6700\u591a\u7684\u6307\u4ee4\uff1f</li> <li>\u54ea\u4e00\u4e2a seq \u66f4\u5feb\uff1f</li> <li>\u6bcf\u4e00\u4e2a seq \u7684 CPI \u662f\u591a\u5c11\uff1f</li> </ol> <p>1.\u5f31\u667a\u9898\uff0c\u52a0\u8d77\u6765\u5c31\u884c\u3002</p> \\[ \\begin{aligned}     \\text{instruction count @ seq 1} = 2 + 1 + 2 = 5 \\\\     \\text{instruction count @ seq 2} = 4 + 1 + 1 = 6 \\end{aligned} \\] <p>\u6240\u4ee5 2 \u591a\u3002</p> <p>2.\u7531\u4e8e\u4ea7\u751f\u5dee\u5f02\u7684\u5730\u65b9\u662f\u7f16\u8bd1\u5668\uff0c\u6240\u4ee5\u6211\u4eec\u9ed8\u8ba4\u65f6\u949f\u5468\u671f\u76f8\u540c\uff0c\u6240\u4ee5\u6bd4\u8f83 CPU time \u7b49\u6548\u4e8e\u6bd4\u8f83 clock cycles\u3002</p> \\[ \\begin{aligned}     \\text{clock cycles @ seq 1} = 2 \\times 1 + 1 \\times 2 + 2 \\times 3 = 10 \\\\     \\text{clock cycles @ seq 2} = 4 \\times 1 + 1 \\times 2 + 1 \\times 3 = 9 \\end{aligned} \\] <p>\u6240\u4ee5 2 \u5feb\u3002</p> <p>3.seq \u7684 CPI \u5c31\u662f seq \u7684 clock cycles \u9664\u4ee5 seq \u7684 instruction count\uff1a</p> \\[ \\begin{aligned}     \\text{CPI @ seq 1} = \\frac{10}{5} = 2 \\\\     \\text{CPI @ seq 2} = \\frac{9}{6} = 1.5 \\end{aligned} \\] \u9898\u9762\u7b54\u6848 <p>A given application written in Java runs 15 seconds on a desktop processor. A new  Java compiler is released that requires only 0.6 as many instructions as the old  compiler. Unfortunately, it increases the CPI by 1.1. How fast can we expect the application to run using this new compiler? Pick the right answer from the three  choices below:</p> <ol> <li>\\(\\frac{15\\times 0.6}{1.1} = 8.2 sec\\);</li> <li>\\(15\\times 0.6\\times 1.1 = 9.9 sec\\);</li> <li>\\(\\frac{15\\times 1.1}{0.6} = 27.5 sec\\);</li> </ol> <p>\u5df2\u77e5\u516c\u5f0f\uff1a</p> \\[ \\begin{aligned}     \\text{CPU time} &amp;= \\text{CPI} * \\text{instruction count} * \\text{clock cycle time} \\end{aligned} \\] <p>\u73b0\u5728 CPI \u53d8\u6210 1.1 \u500d\uff0cinstruction count \u53d8\u6210 0.6 \u500d\uff0c\u6240\u4ee5\u5e94\u8be5\u9009 2\u3002</p>"},{"location":"ZJU_CS/computer_organization/1_prelude/#others","title":"Others","text":"<ul> <li> <p>\u2026\u2026\u4e0d\u662f\u5f88\u60f3\u5b66\u4e86 \u518d\u8bf4\u5427</p> </li> <li> <p>\\(KB = 10^3 B, KiB = 2^{10} B\\)</p> </li> <li>K M G T P E Z Y</li> <li> <p>Amdahl Law \\(T_{\\text{improved}} = \\cfrac{T_{\\text{affected}}}{\\text{Improvement Factor}}+T_\\text{unaffected}\\) \ud83d\udd17 Wiki</p> </li> <li> <p>MIPS: Millions of Instructions Per Seconds</p> </li> </ul> \\[ \\begin{aligned} \\text{MIPS} &amp;= \\frac{\\text{\\#Instructions}}{\\text{Execution time} \\times 10^6} \\\\ &amp;= \\frac{\\text{\\#Instructions}}{     \\frac{         \\text{Instruction count} \\times \\text{CPI}     }{         \\text{Clock rate}     } \\times 10^6 } \\\\ &amp;= \\frac{\\text{Clock rate}}{\\text{CPI} \\times 10^6} \\end{aligned} \\]"},{"location":"ZJU_CS/computer_organization/1_prelude/#_1","title":"\u5185\u5b58","text":""},{"location":"ZJU_CS/computer_organization/2_instructions/","title":"2 Instructions","text":"<p>Warning</p> <p>\u672c\u7ae0\u90e8\u5206\u5185\u5bb9\u5efa\u7acb\u5728\u638c\u63e1\u81f3\u5c11\u4e00\u95e8\u6c47\u7f16\u8bed\u8a00\u7684\u57fa\u7840\u4e0a\uff0c\u4f8b\u5982\u4fee\u8bfb\u8fc7\u8ba1\u7b97\u673a\u7cfb\u7edf\u6982\u8bba\u6216\u6c47\u7f16\u8bed\u8a00\u7b49\u8bfe\u7a0b\u3002 \u53ef\u80fd\u59dc\u8001\u5e08\u73ed\u4e0a\u7684\u540c\u5b66\u4f1a\u4f20\u627fzzh\u5b66\u957f\u7ed9\u4f60\u4eec\u7559\u7684\u4f5c\u4e1a\u54df\u3002\u653e\u4e2a\u7f51\u7ad9https://hackmd.io/@gofzKoaiTI6mFzp4FTuenw/HJg3Q-lb6\uff0c \u5927\u5bb6\u81ea\u884c\u4fdd\u91cd\ud83d\ude4f\u3002</p> <p>\u6211\u4eec\u8ba8\u8bba\u8fc7\uff0c\u8ba1\u7b97\u673a\u7684 performance \u53d7 #inst, clock cycle time \u548c clock cycles per inst (CPI) \u51b3\u5b9a\u3002\u7ed9\u5b9a\u4e00\u4e2a\u7a0b\u5e8f\uff0c\u9700\u8981\u4f7f\u7528\u7684 #inst \u53d7\u7f16\u8bd1\u5668\u548c inst set architecture \u51b3\u5b9a\u3002</p> <p>\u672c\u7ae0\u4ecb\u7ecd RISC-V \u7684 ISA\u3002</p> Preview Question <p></p>"},{"location":"ZJU_CS/computer_organization/2_instructions/#21","title":"2.1 \u5bc4\u5b58\u5668\uff0c\u5bfb\u5740\u65b9\u5f0f","text":""},{"location":"ZJU_CS/computer_organization/2_instructions/#_1","title":"\u5bc4\u5b58\u5668","text":"<p>RISC-V architecture \u63d0\u4f9b 32 \u4e2a\u6570\u636e\u5bc4\u5b58\u5668\uff0c\u5206\u522b\u547d\u540d\u4e3a <code>x0</code> ~ <code>x31</code> \uff0c\u6bcf\u4e2a\u5bc4\u5b58\u5668\u7684\u5927\u5c0f\u662f <code>64</code> \u4f4d\u3002\u5728 RISC-V architecture \u4e2d\uff0c\u4e00\u4e2a word \u4e3a 32 \u4f4d\uff0c\u4e00\u4e2a doubleword \u4e3a 64 \u4f4d\u3002\u8fd9\u4e9b\u5bc4\u5b58\u5668\u4e2d\u7684\u4e00\u90e8\u5206\u6709\u4e13\u95e8\u7684\u7528\u9014\uff0c\u6211\u4eec\u7a0d\u540e\u5bf9\u5176\u8fdb\u884c\u8ba8\u8bba\u3002</p> <p>RISC-V architecture \u4e5f\u63d0\u4f9b\u4e00\u7cfb\u5217\u6d6e\u70b9\u6570\u5bc4\u5b58\u5668 <code>f0</code> ~ <code>f31</code> \uff0c\u8fd9\u4e0d\u662f\u6211\u4eec\u8ba8\u8bba\u7684\u91cd\u70b9\u3002</p>"},{"location":"ZJU_CS/computer_organization/2_instructions/#_2","title":"\u5bfb\u5740","text":"<p>RISC-V architecture \u7684\u5730\u5740\u662f 64 \u4f4d\u7684\uff0c\u5730\u5740\u4e3a\u5b57\u8282\u5730\u5740\uff0c\u56e0\u6b64\u603b\u5171\u53ef\u4ee5\u5bfb\u5740 \\(2^{64}\\) \u4e2a\u5b57\u8282\uff0c\u5373 \\(2^{61}\\) \u4e2a dword (doubleword, \u4e0b\u540c)\uff0c\u56e0\u4e3a\u4e00\u4e2a dword \u5360 \\(\\log_2{\\frac{64}{8}}=3\\) \u4f4d\u3002</p> <p>\u5728\u4e00\u4e9b architecture \u4e2d\uff0cword \u7684\u8d77\u59cb\u5730\u5740\u5fc5\u987b\u662f word \u5927\u5c0f\u7684\u6574\u500d\u6570\uff0cdword \u4e5f\u4e00\u6837\uff0c\u8fd9\u79cd\u8981\u6c42\u79f0\u4e3a alignment restriction\u3002RISC-V \u5141\u8bb8\u4e0d\u5bf9\u9f50\u7684\u5bfb\u5740\uff0c\u4f46\u662f\u6548\u7387\u4f1a\u4f4e\u3002</p> <p>RISC-V \u4f7f\u7528 little endian \u5c0f\u7aef\u7f16\u5740\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u6211\u4eec\u4ece 0x1000 \u8fd9\u4e2a\u5730\u5740\u8bfb\u51fa\u4e00\u4e2a dword \u65f6\uff0c\u6211\u4eec\u8bfb\u5230\u7684\u5b9e\u9645\u4e0a\u662f 0x1000~0x1007 \u8fd9 8 \u4e2a\u5b57\u8282\uff0c\u5e76\u5c06 0x1000 \u5b58\u5165\u5bc4\u5b58\u5668\u4f4e\u4f4d\uff0c0x1007 \u5b58\u5165\u9ad8\u4f4d\u3002</p> <p></p> <p>\u4e00\u4e2a\u8bb0\u5fc6\u65b9\u6cd5\u662f\uff0c\u5982\u679c\u4f60\u5c06\u5730\u5740\u6a2a\u7740\u5199\uff0c\u5373\u4ece\u5de6\u5230\u53f3\u9012\u589e\uff0c\u90a3\u4e48\u5bf9\u4e8e\u5927\u7aef\u6765\u8bf4\u662f\u6bd4\u8f83\u81ea\u7136\u7684\uff0c\u4f46\u662f\u5bf9\u4e8e\u5c0f\u7aef\u6765\u8bf4\u4f1a\u6bd4\u8f83\u4e0d\u81ea\u7136\u3002\u4ee5\u4e0a\u9762\u7684 <code>0A0B0C0D</code> \u4e3a\u4f8b\u5b50\uff0c\u5927\u7aef\u4e3a\u4ece\u4f4e\u5730\u5740\u5230\u9ad8\u5730\u5740\u662f <code>0A</code> <code>0B</code> <code>0C</code> <code>0D</code>\uff0c\u800c\u5c0f\u7aef\u4ece\u4f4e\u5230\u9ad8\u5730\u5740\u5219\u662f <code>0D</code> <code>0C</code> <code>0B</code> <code>0A</code>\u3002</p> <p>RISC-V \u652f\u6301 PC relative \u5bfb\u5740\u3001\u7acb\u5373\u6570\u5bfb\u5740 ( <code>lui</code> )\u3001\u95f4\u63a5\u5bfb\u5740 ( <code>jalr</code> )\u3001\u57fa\u5740\u5bfb\u5740 ( <code>8(sp)</code> )\uff1a</p> Different addressing modes details <ol> <li> <p>\u76f4\u63a5\u5bfb\u5740\uff08Direct Addressing\uff09: \u76f4\u63a5\u5bfb\u5740\u662f\u6700\u7b80\u5355\u7684\u5bfb\u5740\u65b9\u5f0f\u3002\u5728\u8fd9\u79cd\u6a21\u5f0f\u4e0b\uff0c\u6307\u4ee4\u4e2d\u76f4\u63a5\u5305\u542b\u4e86\u64cd\u4f5c\u6570\u7684\u5730\u5740\u3002\u8fd9\u610f\u5473\u7740\u7a0b\u5e8f\u8ba1\u6570\u5668\uff08PC\uff09\u4ece\u6307\u4ee4\u4e2d\u83b7\u53d6\u5185\u5b58\u5730\u5740\uff0c\u7136\u540e\u76f4\u63a5\u8bbf\u95ee\u8be5\u5730\u5740\u4e2d\u7684\u6570\u636e\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u6307\u4ee4LOAD 2000\uff0c\u8fd9\u91cc\u76842000\u5c31\u662f\u64cd\u4f5c\u6570\u7684\u76f4\u63a5\u5730\u5740\u3002CPU\u5c06\u76f4\u63a5\u4ece\u5185\u5b58\u5730\u57402000\u5904\u8bfb\u53d6\u6570\u636e\u3002</p> </li> <li> <p>\u5bc4\u5b58\u5668\u5bfb\u5740\uff08Register Addressing\uff09: \u5bc4\u5b58\u5668\u5bfb\u5740\u662f\u6307\u6307\u4ee4\u76f4\u63a5\u5f15\u7528CPU\u5185\u90e8\u7684\u5bc4\u5b58\u5668\u6765\u83b7\u53d6\u6216\u5b58\u50a8\u64cd\u4f5c\u6570\u3002\u8fd9\u79cd\u65b9\u5f0f\u975e\u5e38\u5feb\u901f\uff0c\u56e0\u4e3a\u5bc4\u5b58\u5668\u4f4d\u4e8eCPU\u5185\u90e8\uff0c\u8bbf\u95ee\u901f\u5ea6\u8fdc\u9ad8\u4e8e\u5185\u5b58\u3002 \u4f8b\u5982\uff0c\u5982\u679c\u6709\u4e00\u4e2a\u6307\u4ee4ADD R1, R2\uff0c\u8fd9\u91cc\u7684R1\u548cR2\u662f\u5bc4\u5b58\u5668\u7684\u7f16\u53f7\u3002CPU\u5c06\u4f7f\u7528\u8fd9\u4e9b\u5bc4\u5b58\u5668\u4e2d\u5b58\u50a8\u7684\u6570\u636e\u8fdb\u884c\u52a0\u6cd5\u64cd\u4f5c\u3002</p> </li> <li> <p>\u57fa\u5740\u5bfb\u5740\uff08Base Addressing\uff09: \u5728\u57fa\u5740\u5bfb\u5740\u4e2d\uff0c\u6307\u4ee4\u5305\u542b\u4e00\u4e2a\u57fa\u5740\u5bc4\u5b58\u5668\u548c\u4e00\u4e2a\u504f\u79fb\u91cf\u3002CPU\u5c06\u57fa\u5740\u5bc4\u5b58\u5668\u4e2d\u7684\u503c\u4e0e\u504f\u79fb\u91cf\u76f8\u52a0\uff0c\u5f62\u6210\u6700\u7ec8\u7684\u5185\u5b58\u5730\u5740\u3002 \u4f8b\u5982\uff0cLOAD R0, [R1+100]\uff0c\u8fd9\u91ccR1\u662f\u57fa\u5740\u5bc4\u5b58\u5668\uff0c100\u662f\u504f\u79fb\u91cf\uff0cCPU\u5c06\u8ba1\u7b97R1+100\u5f97\u5230\u5b9e\u9645\u5730\u5740\u3002</p> </li> <li> <p>\u76f8\u5bf9\u5bfb\u5740\uff08Relative Addressing\uff09: \u76f8\u5bf9\u5bfb\u5740\u6d89\u53ca\u5230\u4f7f\u7528\u7a0b\u5e8f\u8ba1\u6570\u5668\uff08PC\uff09\u6216\u6307\u4ee4\u4e2d\u7684\u504f\u79fb\u91cf\u6765\u786e\u5b9a\u64cd\u4f5c\u6570\u7684\u5730\u5740\u3002\u8fd9\u79cd\u65b9\u5f0f\u5e38\u7528\u4e8e\u5b9e\u73b0\u8df3\u8f6c\u6307\u4ee4\u3002 \u4f8b\u5982\uff0cJMP PC+100\uff0c\u8fd9\u91ccPC\u662f\u7a0b\u5e8f\u8ba1\u6570\u5668\uff0c100\u662f\u76f8\u5bf9\u4e8e\u5f53\u524dPC\u7684\u504f\u79fb\u91cf\u3002</p> </li> </ol> <p></p>"},{"location":"ZJU_CS/computer_organization/2_instructions/#2s_complement","title":"\u8865\u7801 2's complement","text":"<p>\\(x + \\bar x = 111\\dots111_2 = -1\\)\uff0c\u56e0\u6b64 \\(-x = \\bar x + 1\\)\u3002\u524d\u5bfc 0 \u8868\u793a\u6b63\u6570\uff0c\u524d\u5bfc 1 \u8868\u793a\u8d1f\u6570\u3002See also</p> <p>\u552f\u4e00\u503c\u5f97\u4e00\u63d0\u7684\u662f<code>INT_MIN</code>\u503c\u4e3a\\(-2^{31}\\), <code>INT_MAX</code>\u503c\u4e3a\\(2^{31}-1\\)\uff0c\u56e0\u4e3a <code>-INT_MIN</code> \u4f1a\u6ea2\u51fa\u3002</p> <p>different complement</p> <p></p> <p>\u56e0\u6b64\u5728\u5c06\u4e0d\u8db3 64 \u4f4d\u7684\u6570\u636e\u8f7d\u5165\u5bc4\u5b58\u5668\u65f6\uff0c\u5982\u679c\u6570\u636e\u662f\u65e0\u7b26\u53f7\u6570\uff0c\u53ea\u9700\u8981\u4f7f\u7528 0 \u5c06\u5bc4\u5b58\u5668\u7684\u5176\u4ed6\u90e8\u5206\u586b\u5145 (zero extension)\uff1b\u800c\u5982\u679c\u662f\u7b26\u53f7\u6570\uff0c\u5219\u9700\u8981\u7528\u6700\u9ad8\u4f4d\u5373\u7b26\u53f7\u4f4d\u586b\u5145\u5269\u4f59\u90e8\u5206\uff0c\u79f0\u4e3a\u7b26\u53f7\u6269\u5c55 (sign extension)\u3002</p> Sign extension <p></p> <p>\u5373\uff0c\u5728\u6307\u4ee4\u4e2d\u7684 <code>lw</code> ,  <code>lh</code> ,  <code>lb</code> \u4f7f\u7528 sign extension\uff0c\u800c <code>lwu</code> ,  <code>lhu</code> ,  <code>lbu</code> \u4f7f\u7528 zero extension\u3002</p> <p>18~19 Final</p> <p></p> \u7b54\u6848 <p>-0x52F00000, -0x0FFFFCDF</p>"},{"location":"ZJU_CS/computer_organization/2_instructions/#22_arithmetic_shift","title":"2.2 arithmetic shift","text":"<p>\u5728\u6570\u903b\u4e2d\u6211\u4eec\u5b66\u5230\u7684\u5168\u52a0\u5668\u548c\u534a\u52a0\u5668\u518d\u4e0d\u591a\u8d58\u8ff0\uff0c\u4e0b\u9762\u6211\u4eec\u770b\u770bRISC-V\u7684\u62d3\u5c55\u7248\u672c\uff1a </p>"},{"location":"ZJU_CS/computer_organization/2_instructions/#23","title":"2.3 \u6307\u4ee4\uff0c\u6307\u4ee4\u683c\u5f0f","text":"<p>\u8bfe\u672c\u4e0a\u4ecb\u7ecd\u7684 RISC-V \u6307\u4ee4\uff08 <code>lr.d</code> ,  <code>sc.d</code> \u88ab\u7701\u7565\u4e86\uff09\u5217\u8868\u5982\u4e0b\uff1a</p> <p></p> <p>\u5728 RISC \u6307\u4ee4\u96c6\u4e2d\uff0c\u53ea\u6709 load \u7cfb\u5217\u548c store \u7cfb\u5217\u6307\u4ee4\u80fd\u591f\u8bbf\u95ee\u5185\u5b58\u3002</p> <p>RISC-V \u7684\u8df3\u8f6c\u6307\u4ee4\u7684 offset \u662f\u57fa\u4e8e\u5f53\u524d\u6307\u4ee4\u7684\u5730\u5740\u7684\u504f\u79fb\uff1b\u8fd9\u4e0d\u540c\u4e8e\u5176\u4ed6\u4e00\u4e9b\u6c47\u7f16\u662f\u57fa\u4e8e\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u504f\u79fb\u7684\u3002\u5373\u5982\u679c\u662f\u8df3\u8f6c\u8bed\u53e5 <code>PC</code> \u5c31\u4e0d +4 \u4e86\uff0c\u800c\u662f\u76f4\u63a5 +offset\u3002</p> <p><code>lw</code> ,  <code>lwu</code> \u7b49\u64cd\u4f5c\u90fd\u4f1a\u6e05\u96f6\u9ad8\u4f4d\u3002</p> <p>RISC-V \u6307\u4ee4\u683c\u5f0f\u5982\u4e0b\uff1a</p> <p> \u5176\u4e2d <code>I</code> \u578b\u6307\u4ee4\u6709\u4e24\u4e2a\u6761\u76ee\uff1b\u8fd9\u662f\u56e0\u4e3a\u7acb\u5373\u6570\u79fb\u4f4d\u64cd\u4f5c <code>slli</code> , <code>srli</code> , <code>srai</code> \u5e76\u4e0d\u53ef\u80fd\u5bf9\u4e00\u4e2a 64 \u4f4d\u5bc4\u5b58\u5668\u8fdb\u884c\u5927\u4e8e 63 \u4f4d\u7684\u79fb\u4f4d\u64cd\u4f5c\uff0c\u56e0\u6b64 12 \u4f4d imm \u4e2d\u53ea\u6709\u540e 6 \u4f4d\u80fd\u5b9e\u9645\u88ab\u7528\u5230\uff0c\u56e0\u6b64\u524d\u9762 6 \u4f4d\u88ab\u7528\u6765\u4f5c\u4e3a\u4e00\u4e2a\u989d\u5916\u7684\u64cd\u4f5c\u7801\u5b57\u6bb5\uff0c\u5982\u4e0a\u56fe\u4e2d\u7b2c\u4e8c\u4e2a <code>I</code> \u6761\u76ee\u90a3\u6837\u3002\u5176\u4ed6 <code>I</code> \u578b\u6307\u4ee4\u9002\u7528\u7b2c\u4e00\u4e2a <code>I</code> \u6761\u76ee\u3002</p> <p>\u53e6\u5916\uff0c\u4e3a\u4ec0\u4e48 <code>SB</code> \u548c <code>UJ</code> \u4e0d\u5b58\u7acb\u5373\u6570\uff08\u4e5f\u5c31\u662f\u504f\u79fb\uff09\u7684\u6700\u4f4e\u4f4d\u5462\uff1f\uff08\u5173\u6ce8\u8868\u683c\uff0c\u53ef\u4ee5\u53d1\u73b0\u53ea\u5305\u62ec <code>i[12:1]</code> \u6216\u8005 <code>i[20:1]</code>\uff0c\u7f3a\u5931 <code>i[0]</code>\uff09\u56e0\u4e3a\uff0c\u504f\u79fb\u7684\u6700\u540e\u4e00\u4f4d\u4e00\u5b9a\u662f 0\uff0c\u5373\u5730\u5740\u4e00\u5b9a\u662f 2 \u5b57\u8282\u5bf9\u9f50\u7684\uff0c\u56e0\u6b64\u6ca1\u6709\u5fc5\u8981\u4fdd\u5b58\u3002</p> \u65e2\u7136\u6bcf\u4e2a\u6307\u4ee4\u90fd\u662f 4 \u5b57\u8282\u5bf9\u9f50\u7684\uff0c\u4e3a\u4ec0\u4e48\u4e0d\u662f\u6700\u540e\u4e24\u4f4d\u90fd\u7701\u7565\uff0c\u800c\u662f\u53ea\u7701\u7565\u4e00\u4f4d\u5462\uff1f <p>\u5b9e\u9645\u4e0a\uff0c\u662f\u5b58\u5728\u6307\u4ee4\u957f\u4e3a 2 \u5b57\u8282\u7684 extension \u7684\uff0c\u53ea\u4e0d\u8fc7\u6211\u4eec\u6ca1\u5b66\uff1a</p> <p></p> <p>\u8bfe\u672c P116</p> <p></p> <p>RISC-V Spec V20191213 P15</p>"},{"location":"ZJU_CS/computer_organization/2_instructions/#23_1","title":"2.3 \u4f2a\u6307\u4ee4\u53ca\u5176\u5b9e\u73b0","text":"<p>\u6ce8\uff1a <code>j imm</code> \u4e5f\u53ef\u4ee5\u7528 <code>beq x0, x0, imm</code> \u5b9e\u73b0\uff0c\u4f46\u662f\u6b64\u6cd5\u7684 <code>imm</code> \u7684\u4f4d\u6570\u4f1a\u8f83\u77ed\uff0c\u6240\u4ee5\u4e0d\u91c7\u7528\u3002</p> \u6307\u4ee4\u603b\u7ed3 <ul> <li>lw\u548csw\u6307\u4ee4\u7684\u504f\u79fb\u91cf\u662f\u5b57\u8282\u504f\u79fb\u91cf\u3002\u6b64\u5916\u5bf9\u5e94\u7740\u5bc4\u5b58\u5668\u548c\u5185\u5b58\u7684\u6570\u636e\u4f20\u8f93\u3002</li> </ul>"},{"location":"ZJU_CS/computer_organization/2_instructions/#24","title":"2.4 \u5206\u652f\u548c\u5faa\u73af","text":""},{"location":"ZJU_CS/computer_organization/2_instructions/#25","title":"2.5 \u5faa\u73af","text":""},{"location":"ZJU_CS/computer_organization/2_instructions/#26","title":"2.6 \u5206\u652f","text":"<p>beq 12\u4f4d\uff0cjalr 20 \u4f4d\u3002</p> jalr switch"},{"location":"ZJU_CS/computer_organization/2_instructions/#27","title":"2.7 \u8fc7\u7a0b\u8c03\u7528\u548c\u6808","text":"<p>RISC-V \u7ea6\u5b9a\uff1a</p> <ul> <li><code>x5</code> - <code>x7</code> \u4ee5\u53ca <code>x28</code> - <code>x31</code> \u662f temp reg\uff0c\u5982\u679c\u9700\u8981\u7684\u8bdd caller \u4fdd\u5b58\uff1b\u4e5f\u5c31\u662f\u8bf4\uff0c\u4e0d\u4fdd\u8bc1\u5728\u7ecf\u8fc7\u8fc7\u7a0b\u8c03\u7528\u4e4b\u540e\u8fd9\u4e9b\u5bc4\u5b58\u5668\u7684\u503c\u4e0d\u53d8\u3002</li> <li><code>x8</code> - <code>x9</code> \u548c <code>x18</code> - <code>x27</code> \u662f saved reg\uff0ccallee \u9700\u8981\u4fdd\u8bc1\u8c03\u7528\u524d\u540e\u8fd9\u4e9b\u5bc4\u5b58\u5668\u7684\u503c\u4e0d\u53d8\uff1b\u4e5f\u5c31\u662f\u8bf4\uff0c\u5982\u679c callee \u8981\u7528\u5230\u8fd9\u4e9b\u5bc4\u5b58\u5668\uff0c\u5fc5\u987b\u4fdd\u5b58\u4e00\u4efd\uff0c\u8fd4\u56de\u524d\u6062\u590d\u3002</li> <li><code>x10</code> - <code>x17</code> \u662f 8 \u4e2a\u53c2\u6570\u5bc4\u5b58\u5668\uff0c\u51fd\u6570\u8c03\u7528\u7684\u524d 8 \u4e2a\u53c2\u6570\u4f1a\u653e\u5728\u8fd9\u4e9b\u5bc4\u5b58\u5668\u4e2d\uff1b\u5982\u679c\u53c2\u6570\u8d85\u8fc7 8 \u4e2a\u7684\u8bdd\u5c31\u9700\u8981\u653e\u5230\u6808\u4e0a\uff08\u653e\u5728 <code>fp</code> \u4e0a\u65b9\uff0c <code>fp + 8</code> \u662f\u7b2c 9 \u4e2a\u53c2\u6570\uff0c <code>fp + 16</code> \u7684\u7b2c 10 \u4e2a\uff0c\u4ee5\u6b64\u7c7b\u63a8\uff09\u3002\u540c\u65f6\uff0c\u8fc7\u7a0b\u7684\u7ed3\u679c\u4e5f\u4f1a\u653e\u5230\u8fd9\u4e9b\u5bc4\u5b58\u5668\u4e2d\uff08\u5f53\u7136\uff0c\u5bf9\u4e8e C \u8bed\u8a00\u8fd9\u79cd\u53ea\u80fd\u6709\u4e00\u4e2a\u8fd4\u56de\u503c\u7684\u8bed\u8a00\uff0c\u53ef\u80fd\u53ea\u4f1a\u7528\u5230 <code>x10</code> \uff09\u3002</li> <li><code>x1</code> \u7528\u6765\u4fdd\u5b58\u8fd4\u56de\u5730\u5740\uff0c\u6240\u4ee5\u4e5f\u53eb <code>ra</code> \u3002\u56e0\u6b64\uff0c\u4f2a\u6307\u4ee4 <code>ret</code> \u5176\u5b9e\u5c31\u662f <code>jalr x0, 0(x1)</code> \u3002</li> <li>\u6808\u6307\u9488\u662f <code>x2</code> \uff0c\u4e5f\u53eb <code>sp</code> \uff1b\u59cb\u7ec8\u6307\u5411 \u6808\u9876\u5143\u7d20\u3002\u6808\u4ece\u9ad8\u5730\u5740\u5411\u4f4e\u5730\u5740\u589e\u957f\u3002<ul> <li><code>addi sp, sp, -24</code> ,  <code>sd x5, 16(sp)</code> ,  <code>sd x6, 8(sp)</code> ,  <code>sd x20, 0(sp)</code> \u53ef\u4ee5\u5b9e\u73b0\u5c06 x5, x6, x20 \u538b\u6808\u3002</li> </ul> </li> <li>\u4e00\u4e9b RISC-V \u7f16\u8bd1\u5668\u4fdd\u7559\u5bc4\u5b58\u5668 <code>x3</code> \u7528\u6765\u6307\u5411\u9759\u6001\u53d8\u91cf\u533a\uff0c\u79f0\u4e3a global pointer  <code>gp</code> \u3002</li> <li>\u4e00\u4e9b RISC-V \u7f16\u8bd1\u5668\u4f7f\u7528 <code>x8</code> \u6307\u5411 activation record \u7684\u7b2c\u4e00\u4e2a dword\uff0c\u65b9\u4fbf\u8bbf\u95ee\u5c40\u90e8\u53d8\u91cf\uff1b\u56e0\u6b64 <code>x8</code> \u4e5f\u79f0\u4e3a frame pointer  <code>fp</code> \u3002\u5728\u8fdb\u5165\u51fd\u6570\u65f6\uff0c\u7528 <code>sp</code> \u5c06 <code>fp</code> \u521d\u59cb\u5316\u3002<ul> <li><code>fp</code> \u7684\u65b9\u4fbf\u6027\u5728\u4e8e\u5728\u6574\u4e2a\u8fc7\u7a0b\u4e2d\u5bf9\u5c40\u90e8\u53d8\u91cf\u7684\u6240\u6709\u5f15\u7528\u76f8\u5bf9\u4e8e <code>fp</code> \u7684\u504f\u79fb\u90fd\u662f\u56fa\u5b9a\u7684\uff0c\u4f46\u662f\u5bf9 <code>sp</code> \u4e0d\u4e00\u5b9a\u3002\u5f53\u7136\uff0c\u5982\u679c\u8fc7\u7a0b\u4e2d\u6ca1\u6709\u4ec0\u4e48\u6808\u7684\u53d8\u5316\u6216\u8005\u6839\u672c\u6ca1\u6709\u5c40\u90e8\u53d8\u91cf\uff0c\u90a3\u5c31\u6ca1\u6709\u5fc5\u8981\u7528 <code>fp</code> \u4e86\u3002</li> </ul> </li> </ul> <p>\u81f3\u6b64\uff0c\u6211\u4eec\u5c06\u6240\u6709\u5bc4\u5b58\u5668\u53ca\u5176\u7528\u9014\u603b\u7ed3\u5982\u4e0b\uff1a</p> <p></p> <p>\u5176\u4e2d \"preserved on call\" \u7684\u610f\u601d\u662f\uff0c\u662f\u5426\u4fdd\u8bc1\u8c03\u7528\u524d\u540e\u8fd9\u4e9b\u5bc4\u5b58\u5668\u7684\u503c\u4e0d\u53d8\u3002</p> <p></p> <p>\u6709\u4e00\u4e2a\u4f8b\u5b50\uff1a</p> <p></p>"},{"location":"ZJU_CS/computer_organization/2_instructions/#28","title":"2.8 \u5176\u4ed6\u8bdd\u9898","text":"<ul> <li>\u68c0\u67e5 index out of bounds\uff1a\u5982\u679c <code>x20 = i, x11 = size</code> \uff0c\u90a3\u4e48 <code>bgeu x20, x11, IndexOutOfBounds</code> \uff0c\u5373  <code>x20 &gt;= x11 || x20 &lt; 0</code> </li> <li>\u5927\u7acb\u5373\u6570</li> <li><code>lui</code> \u5c06 20 \u4f4d\u5e38\u6570\u52a0\u8f7d\u5230\u76ee\u6807\u5bc4\u5b58\u5668\u7684 31 \u5230 12 \u4f4d\uff1b\u7136\u540e\u7528 <code>addi</code> \u586b\u5145\u540e\u9762 12 \u4f4d\uff0c\u5c31\u53ef\u4ee5\u5b9e\u73b0\u52a0\u8f7d\u4e00\u4e2a\u5927\u7acb\u5373\u6570\u4e86\u3002</li> <li>\u4f46\u662f\uff0c\u5982\u679c\u540e 12 \u4f4d\u7684\u9996\u4f4d\u662f 1\uff0c\u5728 <code>addi</code> \u7684\u65f6\u5019\u5c31\u4f1a\u56e0\u4e3a <code>sign ext</code> \u989d\u5916\u52a0\u4e0a <code>0xFFFFF000</code> \u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ea\u9700\u8981\u5c06 <code>lui</code> \u7684 imm \u589e\u52a0 1\uff0c\u8fd9\u6837 <code>lui</code> \u52a0\u8f7d\u540e\u5b9e\u9645\u4e0a\u5c31\u662f\u589e\u52a0\u4e86 <code>0x00001000</code> \uff0c\u548c <code>0xFFFFF000</code> \u76f8\u52a0\u540e\u5c31\u53ef\u4ee5\u62b5\u6d88\u5f71\u54cd\u4e86\u3002</li> <li>ASCII\uff0c\u662f 8 \u4f4d\u7684\uff0c\u53ef\u4ee5\u7528 <code>lbu</code> </li> <li>Unicode\uff0c\u662f 16 \u4f4d\u7684\uff0c\u53ef\u4ee5\u7528 <code>lhu</code> </li> <li>\u5c3e\u9012\u5f52 tail call / tail recursion\uff0c\u53ef\u4ee5\u8f6c\u6210\u5faa\u73af\u3002</li> </ul>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/","title":"3 Arithmetic","text":"<p>\u63d0\u793a</p> <p>\u5728\u5f00\u59cb\u672c\u7ae0\u4e4b\u524d\uff0c\u8bf7\u786e\u4fdd\u81ea\u5df1\u4e86\u89e3\u5404\u79cd\u4e8c\u8fdb\u5236\u4e0b\u8868\u793a\u6570\u7684\u76f8\u5173\u65b9\u6cd5\u3002</p>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#31_alu","title":"3.1 \u4e00\u4e2a\u57fa\u672c\u7684 ALU","text":"<p>\u4e16\u754c\u4e0a\u4e0d\u5b58\u5728\u51cf\u6cd5\u3002\u4f17\u6240\u5468\u77e5\uff0c\u51cf\u6cd5\u5c31\u662f\u52a0\u4e0a\u76f8\u53cd\u6570\u3002\u6240\u4ee5\u8fd9\u4e2a\u4e16\u754c\u4e0a\u4e0d\u5b58\u5728\u51cf\u6cd5\u3002</p> <p>Overflow\u3002\u786c\u4ef6\u89c4\u6a21\u662f\u6709\u9650\u7684\uff0c\u56e0\u6b64\u8fd0\u7b97\u7ed3\u679c\u8d85\u8fc7\u8fd9\u4e2a\u9650\u5236\u65f6\uff0c\u5c31\u4f1a\u53d1\u751f\u6ea2\u51fa\u3002\u5bf9\u4e8e\u6709\u7b26\u53f7\u52a0\u6cd5\uff0c\u5f53\u6b63\u6570\u548c\u6b63\u6570\u76f8\u52a0\u5f97\u5230\u8d1f\u6570\uff0c\u6216\u8005\u8d1f\u6570\u548c\u8d1f\u6570\u76f8\u52a0\u5f97\u5230\u6b63\u6570\u65f6\uff0c\u5c31\u53ef\u4ee5\u5224\u5b9a\u6ea2\u51fa\u3002\u5bf9\u4e8e\u65e0\u7b26\u53f7\u52a0\u6cd5\uff0c\u5982\u679c\u7ed3\u679c\u5c0f\u4e8e\u4e8c\u8005\u4e2d\u4efb\u610f\u4e00\u4e2a\uff0c\u4e5f\u53ef\u4ee5\u5224\u5b9a\u6ea2\u51fa\u3002</p> <ul> <li>\u5173\u4e8e Overflow\uff0c\u786c\u4ef6\u5c42\u9762\u9700\u8981\u80fd\u68c0\u6d4b\u6ea2\u51fa\uff0c\u7136\u540e\u5c06\u8fd9\u4e2a\u6307\u4ee4\u7684\u5730\u5740\u5b58\u50a8\u5230\u4e00\u4e2a\u7279\u522b\u7684\u5bc4\u5b58\u5668 EPC \u91cc\uff0c\u7136\u540e\u8df3\u8f6c\u5230 OS \u4e2d\u4e13\u95e8\u7684\u7a0b\u5e8f\u4e2d\u6765\u5904\u7406\u8fd9\u4e2a\u6ea2\u51fa\uff08\u5f02\u5e38\u5904\u7406\uff09\uff1b</li> </ul> <p>ALU, Arithmetic Logic Unit\uff0c\u7b97\u672f\u903b\u8f91\u5355\u5143\uff0c\u6267\u884c\u4e00\u4e9b\u7b97\u672f\u8fd0\u7b97\u6216\u8005\u903b\u8f91\u8fd0\u7b97\u3002</p> <ul> <li>\u6570\u903b\u91cc\u7684 ALU</li> </ul>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#311_1-bit_alu","title":"3.1.1 1-bit ALU","text":"<p>\uff08\u4e0b\u9762\u8fd9\u90e8\u5206\u5185\u5bb9\u5728\u8bfe\u672c\u9644\u5f55 A.5 \u5f00\u59cb\u7684\u5730\u65b9\uff09</p> <p>\u5728\u6570\u5b57\u903b\u8f91\u8bbe\u8ba1\u8fd9\u95e8\u8bfe\u7a0b\u4e2d\uff0c\u6211\u4eec\u5b66\u8fc7 AND, OR, XOR \u8fd9\u4e9b gates\uff0c\u4ee5\u53ca inverter \u548c mux \u8fd9\u4e9b\u4e1c\u897f\uff0c\u6211\u4eec\u5c1d\u8bd5\u7528\u8fd9\u4e9b\u4e1c\u897f\u6512\u4e00\u4e2a ALU \u51fa\u6765\u3002\u5728\u8fd9\u4e00\u8282\u4e2d\uff0c\u6211\u4eec\u5e0c\u671b ALU \u5177\u6709\u52a0\u6cd5\u3001\u51cf\u6cd5\u3001\u4e0e\u8fd0\u7b97\u3001\u6216\u8fd0\u7b97\u548c\u6bd4\u8f83\u7684\u80fd\u529b\u3002</p> <p>\u6211\u4eec\u5148\u8003\u8651 1 bit ALU \u7684\u6784\u9020\u3002\u6211\u4eec\u5b66\u4e60\u8fc7 1 bit Full Adder \u7684\u6784\u9020\uff1a </p> <p>\u4e0a\u5de6\u56fe\u662f\u5168\u52a0\u5668\u7684\u5177\u4f53\u6784\u9020\uff0c\u53f3\u56fe\u662f\u6211\u4eec\u5c06\u5176\u8fdb\u884c\u5c01\u88c5\u540e\u7684\u8868\u793a\u65b9\u5f0f\u3002</p> <p>\u6211\u4eec\u7ed3\u5408\u4e00\u4e2a mux\uff0c\u5c31\u53ef\u4ee5\u6784\u9020\u4e00\u4e2a\u652f\u6301\u4e0e\u3001\u6216\u4ee5\u53ca\u52a0\u6cd5\u8fd0\u7b97\u7684 1 bit ALU\uff1a </p> <p>\u5176\u4e2d <code>Operation</code> \u662f\u7528\u6765\u6307\u660e mux \u91c7\u53d6\u54ea\u4e2a\u7ed3\u679c\u7684\u4fe1\u53f7\uff0c\u503c\u4e3a 00 01 10 \u5206\u522b\u5bf9\u5e94\u4e0e\u3001\u6216\u3001\u52a0\u6cd5\u8fd0\u7b97\u3002</p>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#312_nor","title":"3.1.2 \u52a0\u4e0a\u51cf\u6cd5\u548c NOR\uff01","text":"<p>\u51cf\u6cd5\u8fd0\u7b97\u600e\u4e48\u529e\u5462\uff1f\u4f17\u6240\u5468\u77e5\uff0c\u7531\u4e8e\u8865\u7801\u6709 \\(x + \\bar x = 111\\dots111_2 = -1\\)\uff0c\u56e0\u6b64 \\(-x = \\bar x + 1\\)\uff0c\u6240\u4ee5 \\(a - b = a + (-b) = a + \\bar b + 1\\)\u3002\u636e\u6b64\u6211\u4eec\u53ef\u4ee5\u6784\u9020\u8fd9\u6837\u7684\u7ed3\u6784\uff1a</p> <p></p> <p>\u5176\u4e2d <code>Binvert</code> \u7528\u6765\u6307\u660e\u662f\u5426\u9700\u8981\u5c06\u7ed3\u679c\u53d6\u53cd\uff1b\u5728\u8ba1\u7b97\u51cf\u6cd5\u65f6\uff0c\u6211\u4eec\u5c06 <code>Binvert</code> \u8bbe\u4e3a <code>1</code> \uff0c\u7136\u540e\u5c06 <code>CarryIn</code> \u4e5f\u8bbe\u4e3a <code>1</code> \uff0c <code>Operation</code> \u8bbe\u4e3a <code>2</code> \uff0c\u8fd9\u6837\u6211\u4eec\u7684\u7ed3\u679c\u5c31\u662f \\(a + \\bar b + 1\\)\u3002</p> <p><code>NOR</code> \u8fd0\u7b97\uff1a <code>a NOR b = NOT(a OR b) = (NOT a) AND (NOT b)</code> \uff0c\u56e0\u6b64 <code>NOR</code> \u8fd0\u7b97\u53ef\u4ee5\u8fd9\u6837\u5b9e\u73b0\uff1a</p> <p></p> <p>\u4e0a\u53f3\u56fe\u662f\u6211\u4eec\u76ee\u524d\u7684 1 bit ALU \u7684\u62bd\u8c61\u7ed3\u6784\u3002</p>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#313_64-bit_alu","title":"3.1.3 \u4e32\u8054\u5f97\u5230 64-bit ALU\uff01","text":"<p>\u6709\u4e86 1 bit \u7684 ALU\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u6784\u9020\u51fa RISC-V \u6240\u9700\u7684 64 bits \u7684 ALU \u4e86\uff1a</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5bf9\u4e8e 64 \u4f4d\u7684\u52a0\u6cd5\u3001\u51cf\u6cd5\u3001AND, OR, NOR \u8fd0\u7b97\uff0c\u8fd9\u6837\u7684 64 \u4f4d ALU \u90fd\u53ef\u4ee5\u5b8c\u6210\u3002</p> <p>\u540c\u65f6\u4e5f\u53ef\u4ee5\u6ce8\u610f\u5230\uff0c\u8fd9\u91cc\u9762\u9664\u4e86\u6211\u4eec\u719f\u6089\u7684\u5185\u5bb9\u5916\uff0c\u8fd8\u591a\u4e86 <code>Less</code> ,  <code>Set</code> \u548c <code>Overflow</code> \u8fd9\u4e9b\u4f4d\u3002\u5b83\u4eec\u662f\u7528\u6765\u5e72\u4ec0\u4e48\u7684\u5462\uff1f</p> <p>\u9996\u5148 <code>Overflow</code> \u662f\u5bb9\u6613\u7406\u89e3\u7684\uff0c\u5b83\u7528\u6765\u8868\u793a\u52a0\u6cd5\u6216\u51cf\u6cd5\u6709\u6ca1\u6709\u51fa\u73b0\u6ea2\u51fa\u7684\u73b0\u8c61\uff1b\u663e\u7136\u8fd9\u4e2a\u5224\u65ad\u53ea\u9700\u8981\u5728 ALU63\uff0c\u5373 Most Significant Bit \u624d\u9700\u8981\u8fdb\u884c\u3002\u5bb9\u6613\u8bc1\u660e\uff0c\u5982\u679c \\(C_{in} \\oplus C_{out} = 1\\)\uff0c\u90a3\u4e48\u5b58\u5728\u6ea2\u51fa\uff1b\u56e0\u6b64 ALU63 \u53ea\u9700\u8981\u6dfb\u52a0\u4e00\u4e2a\u989d\u5916\u7684 XOR \u95e8\u5373\u53ef\u5b8c\u6210\u8fd9\u4e00\u5224\u65ad\u3002</p> <p>Tip: \u8fd9\u91cc\u63d0\u5230\u7684 \\(C_{in}\\) \u548c \\(C_{out}\\) \u6307\u7684\u90fd\u662f\u6700\u540e\u4e00\u4e2a ALU \u7684 carry in \u548c carry out\u3002</p> <p>\u7b80\u5355\u505a\u89e3\u91ca\uff0c\u9996\u5148\uff0c\u6700\u540e\u4e00\u4f4d\u662f\u7b26\u53f7\u4f4d\u3002\\(C_{in} \\oplus C_{out} = 1\\) \u610f\u5473\u7740\u5176\u4e2d\u4e00\u4e2a\u662f 1\uff0c\u53e6\u5916\u4e00\u4e2a\u662f 0\uff1b - \u5047\u8bbe \\(C_{in} = 1, \\, C_{out} = 0\\)\uff0c\u5219\u610f\u5473\u7740 \\(a_{63}\\) \u548c \\(b_{63}\\) \u90fd\u4e3a 0\uff0c\u5373\u4e24\u4e2a operand \u90fd\u662f\u6b63\u6570\uff0c\u6b64\u65f6\u7531\u4e8e \\(C_{in} = 1\\)\uff0c\u6240\u4ee5 \\(res_{63}=1\\) \u5373\u7ed3\u679c\u662f\u8d1f\u6570\uff0c\u4e24\u6b63\u6570\u76f8\u52a0\u5f97\u5230\u8d1f\u6570\uff0c\u53d1\u751f overflow\uff1b - \u5047\u8bbe \\(C_{in} = 0, \\, C_{out} = 1\\)\uff0c\u5219\u610f\u5473\u7740 \\(a_{63}\\) \u548c \\(b_{63}\\) \u90fd\u4e3a 1\uff0c\u5373\u4e24\u4e2a operand \u90fd\u662f\u8d1f\u6570\uff0c\u6b64\u65f6\u7531\u4e8e \\(C_{out} = 0\\)\uff0c\u6240\u4ee5 \\(res_{63}=0\\) \u5373\u7ed3\u679c\u662f\u6b63\u6570\uff0c\u4e24\u8d1f\u6570\u76f8\u52a0\u5f97\u5230\u6b63\u6570\uff0c\u53d1\u751f overflow\uff1b</p> <p><code>Less</code> \u548c <code>Set</code> \u5171\u540c\u4f7f\u7528\uff0c\u662f\u4e3a\u4e86\u5b9e\u73b0 <code>slt rd, rs1, rs2</code> \u8fd9\u4e2a\u64cd\u4f5c\uff08\u5373\u5b9e\u73b0\u6bd4\u8f83\u64cd\u4f5c\uff09\uff08SLT \u5373 Set Less Than\uff09\u7684\u3002\u8fd9\u4e2a\u64cd\u4f5c\u7684\u542b\u4e49\u662f\uff0c\u5982\u679c <code>rs1 &lt; rs2</code> \uff0c\u90a3\u4e48\u5c06 <code>rd</code> \u7f6e\u4e3a <code>1</code> \uff0c\u5426\u5219\u7f6e\u4e3a <code>0</code> \u3002\u5982\u4f55\u8fdb\u884c\u8fd9\u4e00\u5224\u65ad\u5462\uff1f\u5f88\u7b80\u5355\uff0c<code>rs1 &lt; rs2</code> \u5373 <code>rs1 - rs2 &lt; 0</code>\uff0c\u4e5f\u5c31\u662f\u8bf4\u5982\u679c <code>rs1 - rs2</code> \u7ed3\u679c\u7684\u6700\u9ad8\u4f4d\u662f <code>1</code> \uff0c\u90a3\u4e48\u5c31\u8bf4\u660e <code>rs1 &lt; rs2</code> \u3002\u6240\u4ee5\u5bf9\u4e8e <code>slt</code> \u8fd9\u4e2a\u64cd\u4f5c\uff0c\u6211\u4eec\u53ea\u9700\u8981\u8ba1\u7b97 <code>rs1 - rs2</code>\uff0c\u800c\u540e\u5c06 ALU63 \u4e2d\u52a0\u6cd5\u5668\u7684\u7ed3\u679c\uff08\u5373\u6700\u7ec8\u7ed3\u679c\u7684\u7b26\u53f7\u4f4d\uff09\u8d4b\u503c\u7ed9 <code>Result[0]</code> \uff0c\u5373\u8fd0\u7b97\u7ed3\u679c\u7684 Least Significant Bit\uff0c\u800c\u5c06\u5176\u4ed6\u4f4d\u7684\u7ed3\u679c <code>Result[1:63]</code> \u90fd\u8bbe\u6210 0\uff0c\u5c31\u53ef\u4ee5\u5b8c\u6210 <code>slt</code> \u64cd\u4f5c\u4e86\u3002</p> <p>\u6240\u4ee5\u53ef\u4ee5\u770b\u5230\uff0c\u4e0a\u56fe\u4e2d\uff0c\u9664\u4e86 ALU0 \u7684 <code>Less</code> \u6765\u81ea ALU63 \u7684 <code>Set</code> \u5916\uff0c\u5176\u4ed6 ALU \u7684 <code>Less</code> \u90fd\u662f <code>0</code> \u3002</p> <p>\u7ed3\u5408\u4e0a\u8ff0\u8ba8\u8bba\uff0c\u4e0a\u56fe\u4e2d ALU0 ~ ALU62 \u7684\u7ed3\u6784\u5982\u4e0b\u7b2c\u4e00\u5f20\u56fe\u6240\u793a\uff0cALU63 \u7684\u7ed3\u6784\u5982\u4e0b\u7b2c\u4e8c\u5f20\u56fe\u6240\u793a\uff1a</p> <p></p> <p></p> <p>\uff08\u6ce8\uff1a\u7b2c\u4e8c\u5f20\u56fe\u4e2d\u7684 Overflow Detection \u88ab\u590d\u6742\u5316\u4e86\uff0c\u5b9e\u9645\u4e0a\u53ef\u4ee5\u901a\u8fc7 <code>CarryIn</code> \u548c <code>CarryOut</code> \u7684\u5f02\u6216\u5b8c\u6210\u7684\u3002\uff09</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c <code>Operation</code> \u589e\u52a0\u4e86 <code>3</code> \u7684\u53d6\u503c\uff0c\u8fd9\u4e2a\u53d6\u503c\u8868\u793a\u8fdb\u884c <code>slt</code> \u64cd\u4f5c\u3002</p>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#314","title":"3.1.4 \u4e00\u70b9\u4f18\u5316\uff01","text":"<p>\u4e4b\u524d\u6211\u4eec\u4e5f\u8ba8\u8bba\u8fc7\uff0c\u5982\u679c\u505a\u51cf\u6cd5\u6216\u8005 <code>slt</code> \u7684\u8bdd\uff0c\u9700\u8981\u5c06 <code>Binvert</code> \u548c ALU0 \u7684 <code>CarryIn</code> \u8bbe\u6210 <code>1</code> \uff0c\u5982\u679c\u662f\u52a0\u6cd5\u7684\u8bdd\u8fd9\u4e24\u4e2a\u4fe1\u53f7\u90fd\u662f <code>0</code> \uff1b\u5176\u4ed6\u8fd0\u7b97\u7528\u4e0d\u5230\u8fd9\u4e24\u4e2a\u4fe1\u53f7\u3002\u56e0\u6b64\u8fd9\u4e24\u4e2a\u4fe1\u53f7\u59cb\u7ec8\u53d6\u503c\u76f8\u7b49\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u8fd9\u4e24\u4e2a\u4fe1\u53f7\u5408\u5e76\u4e3a\u4e00\u4e2a\uff0c\u79f0\u4e4b\u4e3a <code>Bnegate</code> \u3002</p> <p>\u53e6\u5916\uff0c\u6211\u4eec\u4e5f\u6709 <code>beq</code> \uff0c <code>bne</code> \u8fd9\u6837\u7684\u64cd\u4f5c\uff0c\u7ed3\u5408 Common case fast \u7684\u8bbe\u8ba1\u601d\u60f3\uff0c\u6211\u4eec\u5c06\u5224\u65ad\u7ed3\u679c\u662f\u5426\u4e3a 0 \u7684\u529f\u80fd\u4e5f\u76f4\u63a5\u52a0\u5230 ALU \u91cc\u3002</p> <p>\u7ed3\u5408\u4e0a\u8ff0\u4e24\u4e2a\u601d\u8def\uff0c\u6211\u4eec\u5f62\u6210\u4e86\u6700\u7ec8\u7684 64-bit ALU\uff01</p> <p> \u5bf9\u4e8e\u8fd9\u6837\u7684\u4e00\u4e2a ALU\uff0c\u6211\u4eec\u9700\u8981 4 bits \u7684 control lines\uff0c\u5206\u522b\u662f <code>Ainvert</code> ,  <code>Bnegate</code> \u548c <code>Operation</code> (2 bits)\u3002ALU \u7684\u7b26\u53f7\u548c control lines \u7684\u542b\u4e49\u5982\u4e0b\uff1a</p> <p></p>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#315","title":"3.1.5 \u66f4\u5feb\u7684\u52a0\u6cd5","text":"<p>\u4e0a\u9762\u7684 64 \u4f4d\u52a0\u6cd5\u7684\u5b9e\u73b0\u65b9\u5f0f\u662f\u901a\u8fc7 1 \u4f4d\u52a0\u6cd5\u5668\u4e32\u8054\u5b9e\u73b0\u7684\uff0c\u8fd9\u79cd\u65b9\u5f0f\u52bf\u5fc5\u9700\u8981\u7b49\u5f85\u524d\u4e00\u4e2a\u52a0\u6cd5\u5668\u7b97\u51fa\u7ed3\u679c\u540e\u624d\u80fd\u7b97\u540e\u4e00\u4e2a\u7684\u3002\u8fd9\u79cd\u591a\u4f4d\u52a0\u6cd5\u5668\u7684\u5b9e\u73b0\u79f0\u4e3a\u884c\u6ce2\u52a0\u6cd5\u5668 Ripple Carry Adder, RCA\u3002\u663e\u7136\uff0c\u8fd9\u79cd\u5b9e\u73b0\u65b9\u5f0f\u6bd4\u8f83\u6162\u3002</p> <p>\u90a3\u4e48\uff0c\u5982\u4f55\u52a0\u901f\u5462\uff1f</p>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#3151_carry_lookahead_adder_cla","title":"3.1.5.1 Carry Lookahead Adder, CLA","text":"<p>\u8bfe\u672c\u6307\u51fa\uff0cRCA \u7f13\u6162\u7684\u91cd\u8981\u539f\u56e0\u662f\u540e\u4e00\u4e2a adder \u9700\u8981\u7b49\u524d\u4e00\u4e2a adder \u7684 carry \u7ed3\u679c\uff1b\u4f46\u6211\u4eec\u4e0d\u59a8\u8ba8\u8bba\u51fa\u73b0 carry \u7684\u53ef\u80fd\u3002\u7b2c\u4e00\u79cd\u53ef\u80fd\u662f\uff0c\u5982\u679c \\(a\\) \u548c \\(b\\) \u90fd\u662f 1\uff0c\u90a3\u4e48\u4e00\u5b9a\u4f1a \u751f\u6210 \u4e00\u4e2a carry\uff1b\u53e6\u4e00\u79cd\u53ef\u80fd\u662f\uff0c\u5982\u679c \\(a\\) \u548c \\(b\\) \u4e2d\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a\u662f 1\uff0c\u90a3\u4e48\u5982\u679c\u4f20\u5165\u7684 carry \u662f 1\uff0c\u5219\u8fd9\u91cc\u4e5f\u4f1a carry\uff0c\u5373 carry \u88ab \u4f20\u64ad \u4e86\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\\(c_{out} = a \\cdot b + (a + b)\\cdot c_{in}\\)\u3002\u6211\u4eec\u8bb0 generate \\(g = a\\cdot b\\)\uff0cpropagate \\(p = a + b\\)\uff0c\u5219\u6709 \\(c_{out} = g + p \\cdot c_{in}\\)\u3002\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u8fd9\u6837\u6784\u9020\u4e00\u4e2a\u5168\u52a0\u5668\uff1a</p> <p></p> <p>\u6240\u4ee5\uff0c\u6211\u4eec\u53ef\u4ee5\u63a8\u5bfc\u51fa\u5982\u4e0b\u5173\u7cfb\uff08\u53ef\u4ee5\u5f62\u8c61\u7406\u89e3\u6bcf\u4e00\u4e2a\u7b49\u5f0f\u7684\u6bcf\u4e00\u4e2a term \u7684\u6765\u6e90\uff09\uff1a</p> <p></p> <p>\u5229\u7528\u8fd9\u4e2a\u5173\u7cfb\uff0c\u6211\u4eec\u53ef\u4ee5\u6784\u9020\u8fd9\u6837\u4e00\u4e2a\u56db\u4f4d\u52a0\u6cd5\u5668\uff1a </p> <p>\u4e0a\u9762\u7684 PFA, Partial Fully Adder\uff0c\u5c31\u662f\u524d\u9762\u6211\u4eec\u6784\u9020\u7684\u65b0\u5168\u52a0\u5668\u7684\u4e00\u90e8\u5206\u3002\u53ef\u4ee5\u770b\u5230\uff0c\u901a\u8fc7\u8fd9\u6837\u7684\u65b9\u5f0f\uff0c\u6211\u4eec\u53ef\u4ee5\u52a0\u901f\u52a0\u6cd5\u7684\u8fd0\u7b97\uff1b\u4f46\u662f\u6ce8\u610f\u5230\u8d8a\u5230\u9ad8\u4f4d\uff0c\u95e8\u7684 fan-in \u5c31\u8d8a\u5927\uff0c\u56e0\u6b64\u4e0d\u80fd\u4e00\u76f4\u589e\u52a0\u7684\u3002\u6240\u4ee5\u5bf9\u4e8e\u66f4\u591a\u4f4d\u6570\u7684\u52a0\u6cd5\u5668\uff0c\u6211\u4eec\u5c06\u4e0a\u9762\u8fd9\u6837\u6784\u6210\u7684 4-bit CLA \u518d\u901a\u8fc7\u7c7b\u4f3c\u7684\u65b9\u5f0f\u4e32\u8d77\u6765\uff01</p> <p></p>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#3152_carry_skip_adder","title":"3.1.5.2 Carry Skip Adder (\u9a6c\u5fb7\u5148\u751f\u6ca1\u8bb2)","text":""},{"location":"ZJU_CS/computer_organization/3_arithmetic/#3153_carry_select_adder_csa","title":"3.1.5.3 Carry Select Adder, CSA","text":"<p>\u4f53\u73b0\u4e86 \u9884\u6d4b / \u5197\u4f59 \u7684\u601d\u60f3\u3002</p> <p>\u8fd9\u4e2a\u601d\u8def\u5176\u5b9e\u6bd4\u8f83\u7b80\u5355\uff0c\u5c31\u662f\u628a\u8f93\u5165 carry \u4e3a 0 \u6216\u8005 1 \u7684\u60c5\u51b5\u90fd\u7b97\u4e00\u904d\uff0c\u7136\u540e\u6839\u636e\u5b9e\u9645\u7684\u60c5\u51b5\u4ece\u4e2d\u9009\u51fa\u6b63\u786e\u7684\u90a3\u79cd\u5c31\u597d\u4e86\uff1a</p> <p></p>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#32","title":"3.2 \u4e58\u6cd5","text":"<p>\uff5e\uff5e\u6682\u65f6\u4e0d\u60f3\u5b66\u4e86\uff0c\u542c\u8bf4\u8003\u7684\u4e0d\u591a\uff5e\uff5e</p>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#v1","title":"V1","text":"<ul> <li>\u5927\u81f4\u539f\u7406</li> </ul> <p>\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u6240\u8c13\u7684\u4e58\u6cd5\u5b9e\u9645\u4e0a\u662f\u6839\u636e Multiplier \u7684 0/1 \u6765\u9009\u62e9\u662f\u5426\u8981\u5c06 Multiplicand \u7684\u5bf9\u5e94\u4f4d\u79fb\u7ed3\u679c\u52a0\u5230 Product \u4e0a\u3002</p> <p>64 bits \u4e58\u6cd5\u5668\u7684\u786c\u4ef6\u5b9e\u73b0\u5927\u81f4\u5982\u4e0b\uff1a</p> <p></p> <p>\u7b80\u5355\u505a\u89e3\u91ca\uff0c\u4e00\u5171\u8fdb\u884c 64 \u6b21\uff1a</p> <ol> <li>\u5224\u65ad Multiplier \u5bc4\u5b58\u5668\u7684\u6700\u4f4e\u4f4d\u662f\u5426\u662f 1\uff1a</li> <li>\u5982\u679c\u662f\uff0c\u5219\u5c06 Multiplicand \u5bc4\u5b58\u5668\u7684\u503c\u52a0\u5230 Product \u5bc4\u5b58\u5668\u91cc\uff1b</li> <li>\u5982\u679c\u5426\uff0c\u8fdb\u5165\u4e0b\u4e00\u6b65\uff1b</li> <li>\u5c06 Multiplier \u5bc4\u5b58\u5668\u7684\u503c\u53f3\u79fb\u4e00\u4f4d\uff08\u8fd9\u662f\u4e3a\u4e86\u4e0d\u65ad\u62ff\u51fa\u6bcf\u4e00\u4f4d\uff0c\u76f8\u5f53\u4e8e\u5728\u679a\u4e3e Multiplier \u7684\u6bcf\u4e00\u4f4d\uff09\uff0c\u5c06 Multiplicand \u5bc4\u5b58\u5668\u7684\u503c\u5de6\u79fb\u4e00\u4f4d\uff08\u5bf9\u5e94\u4e8e\u548c Multiplier \u7684\u7b2c\u51e0\u4f4d\u4e58\u5f97\u5230\u7684\u4f4d\u79fb\uff0c\u5177\u4f53\u53c2\u8003\u4e0a\u9762\u7684\u94fe\u63a5\u5185\u5bb9\uff09\uff1b</li> <li>\u5224\u65ad\u662f\u5426\u505a\u6ee1 64 \u6b21\uff0c\u51b3\u5b9a\u662f\u5426\u7ec8\u6b62\uff1b</li> </ol>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#v2","title":"V2","text":"<p>\u53ef\u4ee5\u53d1\u73b0\uff0cV1 \u4e2d\u505a\u4e86\u5927\u91cf\u7684 128 \u4f4d\u52a0\u6cd5\uff0c\u4f46\u662f\u5b9e\u9645\u4e0a\u88ab\u52a0\u8fc7\u53bb\u7684 Multiplicand \u6709\u6548\u5185\u5bb9\u53ea\u6709 64 \u4f4d\u3002V2 \u6b63\u662f\u89e3\u51b3\u4e86\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p></p> <p>\u5b83\u5c06 Multiplicand \u5bc4\u5b58\u5668\u6362\u4e3a\u4e86 64 \u4f4d\uff0c\u800c\u5c06\u4f4d\u79fb\u64cd\u4f5c\u8f6c\u79fb\u5230\u4e86 Product \u5bc4\u5b58\u5668\u4e2d\u8fdb\u884c\u3002\u8fd9\u91cc\u6700\u91cd\u8981\u7684\u4e00\u70b9\u5c31\u662f\uff0c64 \u4f4d\u52a0\u6cd5\u53ea\u5f71\u54cd Product \u5bc4\u5b58\u5668\u5de6\u4fa7\u7684 64 \u4f4d\uff0c\u800c\u4e4b\u540e\u7684\u53f3\u79fb\u64cd\u4f5c\u5219\u662f 128 \u4f4d\u3002\u8fd9\u6837\uff0c\u867d\u7136\u6700\u4f4e\u4f4d\u7684\u7ed3\u679c\u4e00\u5f00\u59cb\u4f1a\u88ab\u653e\u5728 Product \u5bc4\u5b58\u5668\u7684\u7b2c 65 \u4f4d\u91cc\uff0c\u4f46\u662f\u5728\u7ecf\u8fc7 64 \u6b21\u53f3\u79fb\u4e4b\u540e\uff0c\u5b83\u5c31\u51fa\u73b0\u5728\u7b2c\u4e00\u4f4d\u4e86\u3002\u4e8e\u662f\uff0c\u6240\u6709\u7684 128 \u4f4d\u52a0\u6cd5\u90fd\u88ab 64 \u4f4d\u52a0\u6cd5\u66ff\u4ee3\uff0c\u5b9e\u73b0\u4e86\u52a0\u901f\u3002</p> <p>\u5176\u6d41\u7a0b\u5927\u6982\u662f\uff0c\u4e00\u5171\u8fdb\u884c 64 \u6b21\uff1a</p> <ol> <li>\u5224\u65ad Multiplier \u5bc4\u5b58\u5668\u7684\u6700\u4f4e\u4f4d\u662f\u5426\u662f 1\uff1a</li> <li>\u5982\u679c\u662f\uff0c\u5219\u5c06 Multiplicand \u5bc4\u5b58\u5668\u7684\u503c\u52a0\u5230 Product \u5bc4\u5b58\u5668\u7684\u5de6\u534a\u90e8\u5206\u91cc\uff1b</li> <li>\u5982\u679c\u5426\uff0c\u8fdb\u5165\u4e0b\u4e00\u6b65\uff1b</li> <li>\u5c06 Multiplier \u5bc4\u5b58\u5668\u7684\u503c\u53f3\u79fb\u4e00\u4f4d\uff0c\u5c06 Product \u5bc4\u5b58\u5668\u7684\u503c\u53f3\u79fb\u4e00\u4f4d\uff1b</li> <li>\u5224\u65ad\u662f\u5426\u505a\u6ee1 64 \u6b21\uff0c\u51b3\u5b9a\u662f\u5426\u7ec8\u6b62\uff1b</li> </ol>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#v3","title":"V3","text":"<p>\u6211\u4eec\u8fd8\u53d1\u73b0\uff0c\u6211\u4eec\u5bf9 Multiplier \u7684\u53f3\u79fb\u662f\u4e3a\u4e86\u679a\u4e3e\u6700\u4f4e\u4f4d\uff0c\u4f46\u662f\u4e3a\u4e86\u5b9e\u73b0\u8fd9\u4e2a\u679a\u4e3e\uff0c\u6211\u4eec\u6bcf\u6b21\u90fd\u8981\u505a 64 \u4f4d\u7684\u53f3\u79fb\uff1b\u9664\u6b64\u4e4b\u5916\uff0c\u5728\u4e00\u5f00\u59cb\u7684\u51e0\u6b21\u4e2d\uff0cProduct \u7684\u53f3\u534a\u90e8\u5206\u5927\u90e8\u5206\u6ca1\u6709\u610f\u4e49\uff0c\u4f46\u662f\u4ecd\u7136\u5728 128 \u4f4d\u7684\u53f3\u79fb\u4e2d\u5f71\u54cd\u6548\u7387\u3002\u4ed4\u7ec6\u4e00\u770b\uff0c\u6211\u4eec\u80fd\u53d1\u73b0\uff0c\u6211\u4eec\u6bcf\u53f3\u79fb\u4e00\u6b21 Multiplier \u5bc4\u5b58\u5668\uff0c\u5c31\u4f1a\u53f3\u79fb\u4e00\u6b21 Product \u5bc4\u5b58\u5668\uff0c\u800c\u524d\u8005\u5c06\u5bfc\u81f4 Multiplier \u5bc4\u5b58\u5668\u4e2d\u51fa\u73b0\u4e00\u4e2a\u6ca1\u610f\u4e49\u7684 bit\uff0c\u540e\u8005\u5c06\u5bfc\u81f4 Product \u5bc4\u5b58\u5668\u4e2d\u6d88\u5931\u4e00\u4e2a\u6ca1\u610f\u4e49\u7684\u522b\u7279\u3002</p> <p>V3 \u6b63\u662f\u6293\u4f4f\u4e86\u8fd9\u4e2a\u70b9\uff0c\u76f4\u63a5\u5c06 Multiplier \u5b58\u5728\u4e86 Product \u7684\u4f4e 64 \u4f4d\u4e2d\u3002\u5f53\u6211\u4eec\u4ece\u4e2d\u53d6\u51fa\u6700\u4f4e\u4f4d\u5e76\u7ecf\u8fc7\u4e00\u6b21\u5224\u65ad\u540e\uff0c\u8fd9\u4e00\u4f4d\u5c31\u4e0d\u91cd\u8981\u4e86\uff0c\u800c\u6070\u597d Product \u9700\u8981\u53f3\u79fb\uff0c\u5c31\u5c06\u8fd9\u4e00\u4f4d\u6d88\u9664\uff0c\u65b9\u4fbf\u6211\u4eec\u4e0b\u4e00\u6b21\u4ece\u6700\u4f4e\u4f4d\u62ff\u51fa\u4e0b\u4e00\u4e2a\u6bd4\u7279\uff01</p> <p>\u90a3\u4e48\u8fd9\u4e48\u505a\u7684\u597d\u5904\u5728\u54ea\u91cc\u5462\uff1f\u9996\u5148\uff0c\u5c11\u4e86\u4e00\u4e2a\u5bc4\u5b58\u5668\uff0c\u8282\u7701\u4e86\u7a7a\u95f4\uff1b\u5176\u6b21\uff0c\u539f\u672c\u9700\u8981 Multiplier \u5bc4\u5b58\u5668\u548c Product \u5bc4\u5b58\u5668\u90fd\u505a\u53f3\u79fb\uff0c\u73b0\u5728\u53ea\u9700\u8981 Product \u5bc4\u5b58\u5668\u53f3\u79fb\u5373\u53ef\uff0c\u51cf\u5c11\u4e86\u4e00\u4e2a 64 \u4f4d\u53f3\u79fb\u64cd\u4f5c\u3002</p> <p></p> <p>\u5176\u6d41\u7a0b\u5927\u6982\u662f\uff0c\u4e00\u5171\u8fdb\u884c 64 \u6b21\uff1a</p> <ol> <li>\u5224\u65ad Product \u5bc4\u5b58\u5668\u7684\u6700\u4f4e\u4f4d\u662f\u5426\u662f 1\uff1a</li> <li>\u5982\u679c\u662f\uff0c\u5219\u5c06 Multiplicand \u5bc4\u5b58\u5668\u7684\u503c\u52a0\u5230 Product \u5bc4\u5b58\u5668\u7684\u5de6\u534a\u90e8\u5206\u91cc\uff1b</li> <li>\u5982\u679c\u5426\uff0c\u8fdb\u5165\u4e0b\u4e00\u6b65\uff1b</li> <li>\u5c06 Product \u5bc4\u5b58\u5668\u7684\u503c\u53f3\u79fb\u4e00\u4f4d\uff1b</li> <li>\u5224\u65ad\u662f\u5426\u505a\u6ee1 64 \u6b21\uff0c\u51b3\u5b9a\u662f\u5426\u7ec8\u6b62\uff1b</li> </ol> <p>\u4e58\u6709\u7b26\u53f7\u6570\u4e3b\u8981\u662f\u8f6c\u5316\u4e3a\u4e58\u65e0\u7b26\u53f7\u6570\u6765\u505a\u3002\u9996\u5148\u5b58\u50a8\u4e24\u4e2a\u6570\u7684\u7b26\u53f7\uff0c\u7136\u540e\u5c06\u5b83\u4eec\u8f6c\u5316\u4e3a\u65e0\u7b26\u53f7\u6570\u3002\u63a5\u4e0b\u6765\u5bf9\u4e24\u4e2a\u65e0\u7b26\u53f7\u6570\u505a\u65e0\u7b26\u53f7\u4e58\u6cd5\uff0c\u6700\u540e\u6839\u636e\u4e4b\u524d\u5b58\u50a8\u7684\u7b26\u53f7\u51b3\u5b9a\u7ed3\u679c\u7684\u7b26\u53f7\u5e76\u8f6c\u5316\u4e3a\u6709\u7b26\u53f7\u6570\u3002</p> <p>\u4e00\u79cd\u6539\u8fdb\u7684\u4e58\u6cd5\u65b9\u6cd5\u662f Booth's Algorithm\u3002</p>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#booths_algorithm","title":"Booth's Algorithm\u3002","text":"<ul> <li>Booth's Algorithm\uff08\u6709\u70b9\u7c7b\u4f3c\u4e8e\u5dee\u5206\u7b97\u6cd5\uff09</li> </ul> <p>\u6211\u4e2a\u4eba\u89c9\u5f97 xyx \u653e\u7684\u8fd9\u5f20\u56fe\u4e0d\u662f\u5f88\u6e05\u6670\uff0c\u628a\u5b83\u6298\u53e0\u4e86\u3002</p> xyx's img <p></p> <p>\u5728\u6211\u770b\u6765\uff0cBooth's Algorithm \u7684\u4e3b\u8981\u601d\u60f3\u5728\u4e8e\uff0c\u51cf\u5c11\u4e58\u6570\u4e2d\u201c<code>1</code>\u201d\u7684\u6570\u91cf\u3002\u5177\u4f53\u6765\u8bf4\uff0c\u5728\u6211\u4eec\u539f\u5148\u7684\u4e58\u6cd5\u7b56\u7565\u4e2d\uff0c\u6bcf\u5f53\u4e58\u6570\u4e2d\u6709\u4e00\u4f4d <code>1</code> \u65f6\uff0c\u90fd\u4f1a\u9700\u8981\u4e00\u4e2a\u52a0\u6cd5\uff08\u5c06\u4f4d\u79fb\u540e\u7684\u88ab\u4e58\u6570\u7d2f\u52a0\u5230\u7ed3\u679c\u4e2d\uff09\u3002\u4f46\u662f\uff0c\u5982\u679c\u4e58\u6570\u4e2d\u6709\u8f83\u957f\u7684\u4e00\u4e32 <code>1</code> \u65f6\uff0c\u6211\u4eec\u53ef\u4ee5\u5c06\u5b83\u8f6c\u5316\u4e3a\u4e00\u4e2a\u5927\u6570\u5b57\u51cf\u4e00\u4e2a\u5c0f\u6570\uff0c\u5982\uff1a<code>00111100 = 01000000 - 00000100</code>\uff0c\u6b64\u65f6 4 \u4e2a <code>1</code> \u53d8\u4e3a 2 \u4e2a <code>1</code>\uff0c\u6211\u4eec\u5c31\u53ef\u4ee5\u51cf\u5c11\u505a\u52a0\u6cd5\u7684\u6b21\u6570\u3002\u8fd9\u4e5f\u662f\u4e3a\u4ec0\u4e48 xyx \u8bf4\u6709\u70b9\u50cf\u5dee\u5206\u4e86\u3002</p> <p></p> <p>\u90a3\u4e48\u5728\u5b9e\u9645\u6267\u884c\u8fc7\u7a0b\u4e2d\uff0cBooth's Algorithm \u4e3b\u8981\u9075\u5faa\u4e24\u4f4d\u6bd4\u7279\u7684\u6a21\u5f0f\u8fdb\u884c\u64cd\u4f5c\u3002</p> <p> </p> <p>\u5bf9\u4e8e\u4e0a\u9762\u8fd9\u5f20\u56fe\u7684\u7406\u89e3\uff0c\u7a0d\u5fae\u505a\u4e00\u4e9b\u89e3\u91ca\u3002\u5b83\u5b9e\u9645\u4e0a\u7684\u8868\u793a\u662f\u632a\u7528\u4e86 V3 \u7684\u4e58\u6cd5\u5668\u3002product \u4e00\u5217\u4ee3\u8868\u7684\u662f product \u5bc4\u5b58\u5668\uff0c\u5de6\u4e00\u534a\u4e00\u5f00\u59cb\u7f6e 0\uff0c\u53f3\u4e00\u534a\u4e00\u5f00\u59cb\u5b58\u653e\u7684\u662f\u4e58\u6570\uff0c\u800c\u4e0a\u9762\u63d0\u5230\u7684\u5c06\u88ab\u4e58\u6570\u52a0\u51cf\u7d2f\u8ba1\u5230\u7ed3\u679c\u4e2d\u7684\u64cd\u4f5c\uff0c\u4e5f\u662f\u5bf9\u4e8e\u5de6\u534a\u90e8\u5206\u6765\u8bf4\u7684\uff08\u6362\u53e5\u8bdd\u6765\u8bf4\u5c31\u662f\u7528 V3 \u505a Booth's\uff09\u3002\u9700\u8981\u63d0\u9192\u7684\u662f\uff0c\u5728 Booth's Algorithm \u4e2d\uff0c\u4e24\u4f4d\u8bc6\u522b\u662f\u4ece\u7b2c\u4e00\u4f4d\u5f00\u59cb\u7684\uff0c\u6b64\u65f6\u7b2c\u4e00\u4f4d\u4f5c\u4e3a\u4e24\u4f4d\u4e2d\u7684\u9ad8\u4f4d\uff0c\u4f4e\u4f4d\u4e3a 0\uff0c\u800c\u540e\u5728\u4e0b\u4e00\u8f6e\u4e2d\u7b2c\u4e00\u4f4d\u4f5c\u4e3a\u4f4e\u4f4d\uff0c\u7b2c\u4e8c\u4f4d\u4f5c\u4e3a\u9ad8\u4f4d\uff0c\u4ee5\u6b64\u7c7b\u63a8\u3002</p> <p>\u6709\u610f\u601d\u7684\u4e8b\u51fa\u73b0\u4e86\uff0cBooth's Algorithm \u4e5f\u80fd\u5e94\u7528\u4e8e\u8d1f\u6570\u3002</p> <p>\u4ed4\u7ec6\u60f3\u60f3\u5c31\u4f1a\u53d1\u73b0\u5176\u5b9e\u5f88\u5408\u7406\uff0c\u5bf9\u4e8e\u6b63\u6570\uff0c\u5176\u6700\u9ad8\u4f4d\u4e00\u5b9a\u662f <code>0</code>\uff0c\u56e0\u6b64\u4e0d\u7ba1\u600e\u4e48\u6837\u5b83\u6700\u7ec8\u90fd\u4f1a\u5339\u914d\u5230\u4e00\u4e2a <code>01</code> \u7684\u6a21\u5f0f\uff0c\u6765\u7ed9\u4e00\u4e2a <code>1111..</code> \u6536\u5c3e\u3002\u4f46\u662f\u8d1f\u6570\u4e0d\u7136\uff0c\u8d1f\u6570\u7684\u6700\u9ad8\u4f4d\u662f <code>1</code>\uff0c\u8fd9\u4e5f\u610f\u5473\u7740\u5b83\u6700\u7ec8\u4e0d\u4f1a\u6267\u884c\u6240\u8c13\u7684 <code>01</code> \u5bf9\u5e94\u7684\u52a0\u6cd5\u64cd\u4f5c\u6765\u7ed9 <code>111...</code> \u6536\u5c3e\u3002\u6362\u53e5\u8bdd\u6765\u8bf4\uff0c\u5b83\u597d\u50cf\u201c\u4e8f\u201d\u4e86\u4e00\u4e2a\u5728\u4e0b\u4e00\u4f4d\u7684\u52a0\u6cd5\u3002\uff08\u5177\u4f53\u7684\u4e3a\u4ec0\u4e48\u6211\u6765\u4e0d\u53ca\u7ec6\u60f3\u4e86\uff0c\u4f46\u662f\u53ea\u7ba1\u4e0a\u7406\u89e3\u8fd9\u4e2a\u201c\u4e8f\u201d\u5f88\u5408\u7406.\uff09</p>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#33","title":"3.3 \u9664\u6cd5 \u6682\u65f6\u4e0d\u60f3\u5b66\u4e86\uff0c\u542c\u8bf4\u8003\u7684\u4e0d\u591a","text":"<p>\u548c\u4e58\u6cd5\u5f88\u50cf\u3002</p>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#34","title":"3.4 \u6d6e\u70b9\u8fd0\u7b97","text":"<p>\u5927\u90e8\u5206\u5904\u7406\u5668\u53ef\u80fd\u672c\u8eab\u5e76\u4e0d\u652f\u6301\u6d6e\u70b9\u8fd0\u7b97\uff0c\u53ea\u4e0d\u8fc7\u5728\u8f6f\u4ef6\u5c42\u9762\u53ef\u4ee5\u5c06\u6d6e\u70b9\u8fd0\u7b97\u8f6c\u6362\u4e3a\u6574\u6570\u8fd0\u7b97\u3002</p>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#341_ieee_754","title":"3.4.1 IEEE 754 \u6d6e\u70b9\u8868\u793a","text":"<p>\u6211\u4eec\u5c06\u5c0f\u6570\u70b9\u5de6\u8fb9\u53ea\u6709 1 \u4f4d\u6570\u5b57\u7684\u8868\u793a\u6570\u7684\u65b9\u6cd5\u79f0\u4e3a \u79d1\u5b66\u8bb0\u6570\u6cd5, scientific notation\uff0c\u800c\u5982\u679c\u5c0f\u6570\u70b9\u5de6\u8fb9\u7684\u6570\u5b57\u4e0d\u662f 0\uff0c\u6211\u4eec\u79f0\u8fd9\u4e2a\u6570\u7684\u8868\u793a\u662f\u4e00\u4e2a \u89c4\u683c\u5316\u6570, normalized number\u3002\u79d1\u5b66\u8bb0\u6570\u6cd5\u80fd\u7528\u6765\u8868\u793a\u5341\u8fdb\u5236\u6570\uff0c\u5f53\u7136\u4e5f\u80fd\u7528\u6765\u8868\u793a\u4e8c\u8fdb\u5236\u6570\u3002</p> <p>IEEE 754 \u89c4\u5b9a\u4e86\u4e00\u79cd\u6d6e\u70b9\u6570\u6807\u51c6\uff1a\u6211\u4eec\u5c06\u6d6e\u70b9\u6570\u8868\u793a\u4e3a \\((-1)^S \\times F \\times 2^E\\) \u7684\u5f62\u5f0f\uff0c\u8fd9\u91cc\u7684 \\(F \\times 2^E\\) \u662f\u4e00\u4e2a\u89c4\u683c\u5316\u6570\uff0c\u800c \\((-1)^S\\) \u7528\u6765\u8868\u793a\u7b26\u53f7\u4f4d\uff1a\\(S\\) \u4e3a 0 \u8bf4\u660e\u8be5\u6d6e\u70b9\u6570\u4e3a\u6b63\u6570\uff0c\u4e3a 1 \u5219\u4e3a\u8d1f\u6570\uff1b\\(F\\) \u548c \\(E\\) \u4e5f\u7528\u82e5\u5e72 bits \u8868\u793a\uff0c\u5206\u522b\u8868\u793a\u5c3e\u6570\u548c\u6307\u6570\uff0c\u6211\u4eec\u7a0d\u540e\u8ba8\u8bba\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u5c06\u5176\u8868\u793a\u4e3a \\(1.\\text{xxxxx}_2\\times 2^{\\text{yyyy}}\\) \u7684\u5f62\u5f0f\u8fd9\u610f\u5473\u7740\u6211\u4eec\u6ca1\u6cd5\u76f4\u63a5\u901a\u8fc7\u8fd9\u79cd\u8868\u8fbe\u5f62\u5f0f\u8868\u793a 0\uff08\u4e3a\u4ec0\u4e48\u5c0f\u6570\u70b9\u5de6\u8fb9\u662f 1 \u5462\uff1f\u56e0\u4e3a\u4e8c\u8fdb\u5236\u53ea\u6709 0 \u548c 1\uff0c\u800c\u89c4\u683c\u5316\u8981\u6c42\u5c0f\u6570\u70b9\u5de6\u8fb9\u4e0d\u80fd\u4e3a 0\uff09\u3002\u6211\u4eec\u901a\u8fc7\u79d1\u5b66\u8bb0\u6570\u6cd5\u8c03\u6574\u4e86\u5c0f\u6570\u70b9\u7684\u4f4d\u7f6e\u4f7f\u5176\u6ee1\u8db3\u89c4\u683c\u5316\u7684\u8981\u6c42\uff0c\u56e0\u6b64\u6211\u4eec\u79f0\u8fd9\u79cd\u6570\u7684\u8868\u793a\u65b9\u6cd5\u4e3a \u6d6e\u70b9, floating point\u3002</p> <p>\u5c0f\u6570\u70b9\u7684\u82f1\u6587\u662f decimal point\uff0c\u4f46\u662f\u6211\u4eec\u8fd9\u79cd\u8868\u793a\u65b9\u6cd5\u4e0d\u518d\u662f decimal \u7684\u4e86\uff0c\u56e0\u6b64\u6211\u4eec\u8d77\u4e2a\u65b0\u540d\u5b57\uff1a\u4e8c\u8fdb\u5236\u5c0f\u6570\u70b9, binary point\u3002</p> <p>IEEE 754 \u89c4\u5b9a\u4e86\u4e24\u79cd\u7cbe\u5ea6\u7684\u6d6e\u70b9\u6570\u683c\u5f0f\uff0c\u5206\u522b\u662f single precision \u548c double precision\uff08\u5206\u522b\u5bf9\u5e94 C \u8bed\u8a00\u4e2d\u7684 <code>float</code> \u548c <code>double</code> \uff09\uff0cRISC-V \u8fd9\u4e24\u79cd\u90fd\u652f\u6301\uff1a</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\uff0cfraction \u7684\u4f4d\u6570\u8d8a\u591a\uff0c\u6d6e\u70b9\u6570\u7684\u7cbe\u5ea6\u5c31\u8d8a\u9ad8\uff1b\u800c exponent \u7684\u4f4d\u6570\u8d8a\u591a\uff0c\u6d6e\u70b9\u6570\u80fd\u4fdd\u5b58\u7684\u8303\u56f4\u5c31\u8d8a\u5927\u3002</p> <p>\u90a3\u4e48\u5bf9\u4e8e \\((-1)^S \\times F \\times 2^E\\)\uff0c\\(S\\) \u7684\u4e8c\u8fdb\u5236\u8868\u793a\u65b9\u6cd5\u662f\u663e\u7136\u7684\uff0c\u4ec5\u9700\u8981\u4e00\u4e2a bit \u5c31\u597d\u4e86\u3002\u90a3\u4e48 \\(F\\) \u548c \\(E\\) \u600e\u4e48\u8868\u793a\u5462\uff1f\u5982\u6211\u4eec\u4e4b\u524d\u6240\u8bf4\uff0c\\(F\\) \u5c31\u662f \\(1.\\text{.xxxxx}_2\\) \u7684\u5f62\u5f0f\uff0c\u8fd9\u4e2a 1 \u662f\u56fa\u5b9a\u7684\uff0c\u56e0\u6b64 \\(F\\) \u53ea\u9700\u8981\u4fdd\u5b58 \\(\\text{.xxxxx}\\) \u7684\u90e8\u5206\u5c31\u53ef\u4ee5\u4e86\uff08\u4f46\u662f\u8bf7\u6ce8\u610f\uff0c\u5b83\u7684\u6743\u91cd\u4ece\u5de6\u5230\u53f3\u5206\u522b\u662f \\(2^{-1}, 2^{-2}, ...\\)\uff09\uff01\u90a3\u4e48 \\(E\\) \u600e\u4e48\u529e\u5462\uff1f\u6ce8\u610f\u5230\u8fd9\u4e2a\u6307\u6570\u5728\u5b9e\u9645\u4f7f\u7528\u4e2d\u53ef\u80fd\u662f\u6b63\u6574\u6570\u3001\u8d1f\u6574\u6570\u6216 0\uff0c\u56e0\u6b64\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u504f\u79fb\uff0c\u5bf9\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\u504f\u79fb 127\uff0c\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570\u504f\u79fb 1023\uff08\u521a\u597d\u662f\u8868\u793a\u8303\u56f4\u7684\u4e00\u534a\uff01\uff09\uff0c\u4e5f\u5c31\u662f\u8bf4\u6211\u4eec\u4fdd\u5b58\u7684  <code>exponent</code>  \u5176\u5b9e\u662f \\(E + bias\\) \u7684\u4e8c\u8fdb\u5236\u3002\u4e5f\u5c31\u662f\u8bf4\uff0c\u5bf9\u4e8e\u8fd9\u6837\u7684\u4e00\u4e2a\u8868\u793a\uff0c\u5176\u503c\u662f\uff1a</p> \\[(-1)^S\\cdot (1 + \\text{fraction}) \\cdot 2 ^ {\\text{exponent} - \\text{bias}}\\] <p>\u8bfe\u672c\u7ed9\u51fa\u4e86\u4e00\u4e2a\u4f8b\u5b50\uff1a</p> <p></p> <p>\u806a\u660e\u7684\u5c0f\u670b\u53cb\u53ef\u80fd\u4f1a\u95ee\uff0c0 \u5e94\u8be5\u600e\u4e48\u4fdd\u5b58\u5462\uff1f\u6bd5\u7adf 0 \u6ca1\u6709\u524d\u5bfc 1\u3002\u5bf9\u4e8e\u8fd9\u6837\u7684\u7279\u6b8a\u60c5\u5f62\uff0cIEEE 754 \u6709\u7279\u522b\u89c4\u5b9a\uff0c\u7528\u7279\u6b8a\u7684\u503c\u4fdd\u5b58\u5b83\u4eec\uff1a</p> <p></p> <p>\u5728\u4e0a\u8868\u4e2d\uff1a</p> <ul> <li>\u7b2c 1 \u6761\u8868\u793a 0\uff1b</li> <li>\u7b2c 2 \u6761\u8868\u793a\u975e\u89c4\u683c\u5316\u6570\uff0c\u8fd9\u79cd\u6570\u4e3b\u8981\u662f\u4e3a\u4e86\u7528\u6765\u8868\u793a\u4e00\u4e9b\u5f88\u5c0f\u7684\u6570\uff0c\u5b83\u7684\u53d6\u503c\u4e3a \\((-1)^S\\cdot (\\mathbf{0} + \\text{fraction}) \\cdot 2 ^ {- \\text{bias}}\\)\uff1b\u4f46\u662f\u5e76\u975e\u6240\u6709\u673a\u5668\u90fd\u652f\u6301\u8fd9\u79cd\u8868\u793a\uff0c\u6709\u7684\u673a\u5668\u4f1a\u76f4\u63a5\u629b\u51fa\u4e00\u4e2a exception\u3002\u6211\u4eec\u4e0d\u8003\u8651\u975e\u89c4\u683c\u6570\u7684\u5b58\u5728\uff1b</li> <li>\u7b2c 3 \u6761\u8868\u793a\u6b63\u5e38\u7684\u6d6e\u70b9\u6570\uff1b</li> <li>\u7b2c 4 \u6761\u8868\u793a\u65e0\u7a77\u5927\u6216\u8005\u65e0\u7a77\u5c0f\uff0c\u51fa\u73b0\u5728 exponent overflow \u6216\u8005\u6d6e\u70b9\u6570\u8fd0\u7b97\u4e2d\u975e 0 \u6570\u9664\u4ee5 0 \u7684\u60c5\u51b5\uff1b</li> <li>\u7b2c 5 \u6761\u8868\u793a\u975e\u6570\uff0c\u51fa\u73b0\u5728 0/0, inf / inf, inf - inf, inf * 0 \u7684\u60c5\u51b5</li> </ul> <p>\uff08\u5982\u679c\u6570\u5b57\u8fc7\u5927\u4e0d\u80fd\u8868\u793a\uff0c\u5373 overflow\uff0c\u5219\u7ed3\u679c\u7f6e\u4e3a inf\uff1b\u5982\u679c\u6570\u5b57\u8fc7\u5c0f\u4e0d\u80fd\u8868\u793a\uff0c\u5373 underflow\uff0c\u5219\u7ed3\u679c\u7f6e\u4e3a 0\u3002\uff09</p> <p>\u8fd9\u4e24\u79cd\u8868\u793a\u6cd5\u7684\u8303\u56f4\u548c\u7cbe\u5ea6\u5206\u522b\u662f\u591a\u5c11\u5462\uff1f</p> <ul> <li> <p>\u8303\u56f4</p> <ul> <li>\u80fd\u8868\u793a\u503c\u7684 \u7edd\u5bf9\u503c \u7684\u8303\u56f4\u662f \\(1.0_2 \\times 2^{1-\\text{bias}} \\sim 1.11\\dots 11_2 \\times 2^{11\\dots 11_2-1-\\text{bias}}\\)\uff0c\u5373 \\(1\\times 2^{1 - \\text{bias}}\\sim(2 - 2^\\text{-Fra#})\\times 2^{(2^\\text{Exp#} - 1) - 1 - \\text{bias}}\\)\uff0c\u5176\u4e2d <code>Fra#</code> \u548c <code>Exp#</code> \u5206\u522b\u8868\u793a fraction \u548c exponent \u7684\u4f4d\u6570\uff1b</li> <li>\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff1a\\(\\pm 1\\times 2^{-126}\\sim \\pm(2 - 2^{-23}) \\times 2^{127}\\)</li> <li>\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff1a\\(\\pm 1\\times 2^{-1022}\\sim \\pm(2 - 2^{-52}) \\times 2^{1023}\\)</li> </ul> </li> <li> <p>\u7cbe\u5ea6</p> <ul> <li>\\(2^ \\text{-Fra#}\\)</li> <li>\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff1a\\(2^{-23}\\)</li> <li>\u53cc\u7cbe\u5ea6\u6d6e\u70b9\u6570\uff1a\\(2^{-52}\\)</li> </ul> </li> </ul> <p>\u6709\u65f6\u5019\u9898\u76ee\u91cc\u4f1a\u51fa\u4e0d\u540c\u7684\u6d6e\u70b9\u6570\u8868\u793a\u6cd5\uff0c\u8ba9\u4f60\u6bd4\u8f83\u7cbe\u5ea6\uff0c\u6b64\u65f6\u4e00\u822c\u6307\u7684\u662f\uff0cfraction + exponent \u603b\u4f4d\u6570\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0cfraction \u66f4\u591a\u7684\u4e00\u822c\u66f4\u7cbe\u786e\uff0c\u4e5f\u5c31\u662f\u8bf4\u8fd9\u4e2a\u7cbe\u5ea6\u66f4\u503e\u5411\u4e8e\u201c\u80fd\u8868\u793a\u66f4\u591a\u7684\u5c0f\u6570\u4f4d\u201d\u3002</p> <p>18~19 Final</p> <p></p> \u7b54\u6848 <p>+inf, 0xBF800000</p> <p>\u53ef\u4ee5\u8bd5\u4e00\u4e0b -32.6\uff0c\u7ed3\u679c\u53ef\u4ee5\u81ea\u5df1\u5728 IEEE-754 Floating Point Converter \u91cc\u9762\u627e~</p>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#342","title":"3.4.2 \u6d6e\u70b9\u52a0\u6cd5","text":"<p>\u4ee5 \\(1.000_2\\times2^{-1}-1.110_2\\times2^{-2}\\) \u4e3a\u4f8b\uff0c \u6d6e\u70b9\u6570\u7684\u52a0\u51cf\u6cd5\u5206\u4e3a\u4ee5\u4e0b\u51e0\u6b65\uff1a</p> <ol> <li>Alignment: \u6307\u6570\u5bf9\u9f50\uff0c\u5c06\u5c0f\u6307\u6570\u5bf9\u9f50\u5230\u5927\u6307\u6570\uff1a\\(-1.110_2\\times2^{-2} = -0.111\\times2^{-1}\\)<ol> <li>\u4e3a\u4ec0\u4e48\u662f\u5c0f\u5bf9\u5927\uff1f\u9996\u5148\uff0c\u5c0f\u5bf9\u5927\u7684\u8fc7\u7a0b\u662f\u5728\u5c0f\u6307\u6570\u7684 fraction \u524d\u8865 <code>0</code>\uff0c\u53ef\u80fd\u5bfc\u81f4\u672b\u5c3e\u6570\u636e\u4e22\u5931\uff1b\u5927\u5bf9\u5c0f\u7684\u8fc7\u7a0b\u662f\u5728\u5927\u6307\u6570\u7684 fraction \u540e\u8865 <code>0</code>\uff0c\u53ef\u80fd\u5bfc\u81f4\u524d\u9762\u7684\u6570\u636e\u4e22\u5931\u3002\u5728\u8ba1\u7b97\u8fc7\u7a0b\u4e2d\uff0c\u6211\u4eec\u4fdd\u6301\u7684\u7cbe\u786e\u4f4d\u6570\u662f\u6709\u9650\u7684\uff0c\u800c\u5728\u8feb\u4e0d\u5f97\u5df2\u4e22\u53bb\u7cbe\u5ea6\u7684\u8fc7\u7a0b\u4e2d\uff0c\u8ba9\u5c0f\u7684\u90a3\u4e2a\u6570\u7684\u672b\u51e0\u4f4d\u88ab\u4e22\u6389\u7684\u4ee3\u4ef7\u6bd4\u5927\u7684\u524d\u51e0\u4f4d\u4e22\u5931\u8981\u5c0f\u592a\u591a\u4e86\uff1b</li> </ol> </li> <li>Addiction Fraction \u90e8\u5206\u76f8\u52a0\u51cf\uff1a\\(1.000-0.111=0.001\\)</li> <li>Normalization: \u5c06\u7ed3\u679c\u89c4\u683c\u5316\uff1a\\(0.001\\times2^{-1}=1.000\\times2^{-4}\\)\uff1b\u540c\u65f6\u9700\u8981\u68c0\u67e5\u662f\u5426\u51fa\u73b0 overflow \u6216\u8005 underflow\uff0c\u5982\u679c\u51fa\u73b0\u5219\u89e6\u53d1 Exception</li> <li>Rounding: \u5c06 Fraction \u90e8\u5206\u820d\u5165\u5230\u6b63\u786e\u4f4d\u6570\uff1b\u820d\u5165\u7ed3\u679c\u53ef\u80fd\u8fd8\u9700\u8981\u89c4\u683c\u5316\uff0c\u6b64\u65f6\u56de\u5230\u6b65\u9aa4 3 \u7ee7\u7eed\u8fd0\u884c</li> </ol> <p></p> <p></p>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#343","title":"3.4.3 \u6d6e\u70b9\u4e58\u6cd5","text":"<p>\u5206\u522b\u5904\u7406\u7b26\u53f7\u4f4d\u3001exponent \u548c fraction\uff1a</p> <ul> <li>\u5c06\u4e24\u4e2a Exponent \u76f8\u52a0\u5e76 \u51cf\u53bb\u4e00\u4e2a bias\uff0c\u56e0\u4e3a bias \u52a0\u4e86 2 \u6b21</li> <li>\u5c06\u4e24\u4e2a (1 + Fraction) \u76f8\u4e58\uff0c\u5e76\u5c06\u5176\u89c4\u683c\u5316\uff1b\u6b64\u65f6\u540c\u6837\u8981\u8003\u8651 overflow \u548c underflow\uff1b\u7136\u540e\u820d\u5165\uff0c\u5982\u679c\u8fd8\u9700\u8981\u89c4\u683c\u5316\u5219\u91cd\u590d\u6267\u884c</li> <li>\u6839\u636e\u4e24\u4e2a\u64cd\u4f5c\u6570\u7684\u7b26\u53f7\u51b3\u5b9a\u7ed3\u679c\u7684\u7b26\u53f7</li> </ul> <p></p>"},{"location":"ZJU_CS/computer_organization/3_arithmetic/#344","title":"3.4.4 \u7cbe\u786e\u7b97\u672f","text":"<p>IEEE 754 \u89c4\u5b9a\u4e86\u4e00\u4e9b\u989d\u5916\u7684\u820d\u5165\u63a7\u5236\uff0c\u7528\u6765\u4fdd\u8bc1\u820d\u5165\u7684\u7cbe\u786e\u6027\u3002</p> <p>Round modes</p> <ul> <li><code>guard</code> / <code>round</code> / <code>sticky</code></li> </ul> <p></p> <p>Round to nearest even \u53ea\u5bf9 0.5 \u6709\u6548\uff0c\u522b\u7684\u90fd\u548c\u56db\u820d\u4e94\u5165\u4e00\u6837</p> <p>\u4e00\u822c\u7684\u6d6e\u70b9\u6570\u540e\u9762\u8fd8\u4f1a\u6709 2 bits\uff0c\u5206\u522b\u79f0\u4e3a guard \u548c round\uff0c\u5176\u4e3b\u8981\u76ee\u7684\u662f\u8ba9\u8ba1\u7b97\u7ed3\u679c\u7684\u820d\u5165\u66f4\u52a0\u7684\u7cbe\u786e\uff1a </p> <p></p> <p>\u4e8b\u5b9e\u4e0a\u52a0\u6cd5\u53ea\u9700\u8981\u7528\u5230 guard\uff0c\u4f46\u662f\u5bf9\u4e8e\u4e58\u6cd5\uff0c\u5982\u679c\u5b58\u5728\u524d\u5bfc 0\uff0c\u9700\u8981\u5c06\u7ed3\u679c\u5de6\u79fb\uff0c\u8fd9\u65f6\u5019 round bit \u5c31\u6210\u4e86\u6709\u6548\u4f4d\uff0c\u80fd\u907f\u514d\u7cbe\u5ea6\u7684\u635f\u5931\u3002</p> <p>\u53e6\u5916\u8fd8\u6709\u4e00\u4e2a\u4f4d\u53eb sticky bit\uff0c\u5176\u5b9a\u4e49\u662f\uff1a\u53ea\u8981 round \u53f3\u8fb9\u51fa\u73b0\u8fc7\u975e\u96f6\u4f4d\uff0c\u5c31\u5c06 sticky \u7f6e 1\uff0c\u8fd9\u4e00\u70b9\u53ef\u4ee5\u7528\u5728\u52a0\u6cd5\u7684\u53f3\u79fb\u4e2d\uff0c\u53ef\u4ee5\u8bb0\u4f4f\u662f\u5426\u6709 1 \u88ab\u79fb\u51fa\uff0c\u4ece\u800c\u80fd\u591f\u5b9e\u73b0 \"round to nearest even\"\u3002</p> <p><code>units in the last place(ulp)</code>: The number of bits in error in the leas t significant bits of the significant between the actual number and the number that can be represented.</p>"},{"location":"ZJU_CS/computer_organization/4_processor/","title":"4 Processor","text":"<p>Warning</p> <p>\u7531\u4e8e\u65f6\u95f4\u539f\u56e0\uff0c\u672c\u6587\u540e\u534a\u90e8\u5206\u6709\u4e00\u4e9b\u5730\u65b9\u4e0d\u5b8c\u6574\u3002</p> <p>\u9644\u4e0a\u4e00\u4e2a\u4e2a\u4eba\u8ba4\u4e3a\u6740\u75af\u4e86\u7684ppt</p> <p>\u6211\u4eec\u8ba8\u8bba\u8fc7\uff0c\u8ba1\u7b97\u673a\u7684 performance \u53d7 inst#, clock cycle time \u548c clock cycles per inst (CPI) \u51b3\u5b9a\u3002Clock cycle time \u548c CPI \u53d7 processor \u7684\u5b9e\u73b0\u65b9\u5f0f\u5f71\u54cd\u3002\u672c\u7ae0\u4ecb\u7ecd RISC-V \u7684 processor \u4e00\u79cd\u5b9e\u73b0\u3002</p>"},{"location":"ZJU_CS/computer_organization/4_processor/#41_datapath","title":"4.1 Datapath","text":""},{"location":"ZJU_CS/computer_organization/4_processor/#411_overview","title":"4.1.1 Overview","text":"<p>\u4e0a\u56fe\u5c55\u793a\u4e86\u4e00\u4e2a RISC-V \u6838\u5fc3\u6307\u4ee4\u7684\u5b9e\u73b0\uff08\u5e76\u4e0d\u5b8c\u6574\uff09\uff0c\u5305\u62ec  <code>ld</code>  ,   <code>sd</code>  ,   <code>add</code>  ,   <code>sub</code>  ,   <code>and</code>  ,   <code>or</code>  ,   <code>beq</code>  \u3002\u6211\u4eec\u7b80\u5355\u8fdb\u884c\u5206\u6790\u3002</p> <ul> <li>PC \u5bc4\u5b58\u5668\u5b58\u50a8\u5f53\u524d\u8fd0\u884c\u5230\u7684\u6307\u4ee4\u7684\u5730\u5740\u3002PC \u5bc4\u5b58\u5668\u8fde\u5230 Instruction memory \u4e2d\uff0c\u8bfb\u51fa\u7684\u7ed3\u679c\u5c31\u662f\u5f53\u524d\u8981\u8fd0\u884c\u7684\u6307\u4ee4\u3002\u8fd9\u4e2a\u6307\u4ee4\u88ab Control \u89e3\u6790\u4ea7\u751f\u76f8\u5e94\u7684\u4fe1\u53f7\u3002\u6211\u4eec\u5728 4.1.6 \u5c0f\u8282\u4e2d\u5177\u4f53\u8bf4\u660e\u5b83\u7684\u5b9e\u73b0\u3002</li> </ul> Control signal Different types of instructions RegWrite MemtoReg MemWrite ALUSrc Branch MemRead ALUOp Jump"},{"location":"ZJU_CS/computer_organization/4_processor/#412_r","title":"4.1.2 R \u578b\u6307\u4ee4","text":"<ul> <li><code>add</code>  ,   <code>sub</code>  ,   <code>and</code>  ,   <code>or</code>  \u8fd9\u51e0\u4e2a R \u578b\u6307\u4ee4\u603b\u5171\u9700\u8981\u8bbf\u95ee 3 \u4e2a\u5bc4\u5b58\u5668\uff0c\u5982\u4e0b\u56fe\u6240\u793a\uff1a</li> </ul> <ul> <li>(1) \u5904\u53d6\u51fa\u6307\u4ee4\uff0c  <code>[6:0]</code>  \u88ab\u9001\u5230 Control \u4ea7\u751f\u5bf9\u5e94\u7684\u63a7\u5236\u4fe1\u53f7\uff0c\u6211\u4eec\u7a0d\u540e\u53ef\u4ee5\u770b\u5230\uff1b  <code>[19:15]</code>  ,   <code>[24:20]</code>  ,   <code>[11:7]</code>  \u5206\u522b\u5bf9\u5e94  <code>rs1</code>  ,  <code>rs2</code>  ,  <code>rd</code>  \uff0c\u88ab\u8fde\u5165 Registers \u8fd9\u4e2a\u7ed3\u6784\uff0c\u5bf9\u5e94\u5730  <code>Read data 1</code>  \u548c  <code>Read data 2</code>  \u4e24\u5904\u7684\u503c\u5373\u53d8\u4e3a  <code>rs1</code>  ,  <code>rs2</code>  \u7684\u503c\uff1b</li> <li>(2) \u5904 MUX \u5728  <code>ALUSrc = 0</code>  \u7684\u4fe1\u53f7\u4f5c\u7528\u4e0b\u9009\u62e9  <code>Read data 2</code>  \u4f5c\u4e3a ALU \u7684\u8f93\u5165\u4e0e  <code>Read data 1</code>  \u8fdb\u884c\u8fd0\u7b97\uff0c\u5177\u4f53\u7684\u8fd0\u7b97\u7531  <code>ALU control</code>  \u63d0\u4f9b\u7684\u4fe1\u53f7\u6307\u660e\uff08\u6211\u4eec\u5728 4.1.3 \u5c0f\u8282 \u8ba8\u8bba\u8fd9\u4e2a\u8bdd\u9898\uff09\u3002\u8fd0\u7b97\u7ed3\u679c\u5728  <code>ALU result</code>  \u4e2d\u3002</li> <li>(3) \u5904 MUX \u5728  <code>MemtoReg = 0</code>  \u7684\u4fe1\u53f7\u4f5c\u7528\u4e0b\u9009\u62e9  <code>ALU result</code>  \u4f5c\u4e3a\u5199\u56de Register \u7684\u503c\uff0c\u8fde\u5230 (4) \u5904\uff1b\u5728 (5) \u5904  <code>RegWrite = 1</code>  \u4fe1\u53f7\u63a7\u5236\u4e0b\uff0c\u8be5\u503c\u5199\u5165\u5230  <code>rd</code>  \u5bc4\u5b58\u5668\u4e2d\u3002</li> </ul> <p>\u8fd9\u5c31\u662f R \u578b\u6307\u4ee4\u7684\u8fd0\u884c\u8fc7\u7a0b\u3002\u6267\u884c\u5b8c\u6307\u4ee4\u540e PC \u4f1a +4\uff0c\u6211\u4eec\u5728 4.1.4 \u5c0f\u8282 \u8ba8\u8bba\u8fd9\u4e00\u64cd\u4f5c\u7684\u5b9e\u73b0\u3002</p> <p>Info</p> <p>\u6709\u806a\u660e\u7684\u5c0f\u670b\u53cb\u53ef\u80fd\u4f1a\u95ee\uff0c\u4e3a\u4ec0\u4e48\u9700\u8981  <code>RegWrite</code>  \u8fd9\u4e2a\u63a7\u5236\u4fe1\u53f7\u5462\uff1f\u975e\u5e38\u7b80\u5355\uff0c\u56e0\u4e3a  <code>Write register</code>  \u548c  <code>Write data</code>  \u8fd9\u4e24\u6761\u7ebf\u59cb\u7ec8\u662f\u8fde\u7740\u7684\uff0cReg files \u9700\u8981\u77e5\u9053\u4ec0\u4e48\u65f6\u5019\u9700\u8981\u5199\u5165\u5bc4\u5b58\u5668\uff0c\u56e0\u6b64\u53ea\u6709\u5f53  <code>RegWrite = 1</code>  \u65f6\u624d\u4f1a\u88ab\u5bf9\u5e94\u5730\u5199\u5165\u3002</p> <p>\u806a\u660e\u7684\u5c0f\u670b\u53cb\u53ef\u80fd\u53c8\u4f1a\u95ee\u4e86\uff0c\u4e3a\u4ec0\u4e48  <code>PC</code>  \u5bc4\u5b58\u5668\u4e5f\u8981\u5199\u5165\uff0c\u4f46\u662f\u4e0d\u9700\u8981\u63a7\u5236\u4fe1\u53f7\u5462\uff1f\u975e\u5e38\u7b80\u5355\uff0c\u56e0\u4e3a  <code>PC</code>  \u5728 \u6bcf\u4e2a \u65f6\u949f\u5468\u671f\u90fd\u4f1a\u88ab\u5199\u5165\uff0c\u6240\u4ee5\u53ea\u9700\u8981\u5728\u65f6\u949f\u7684 \u6bcf\u4e2a \u4e0a\u5347\u6cbf\u6216\u8005\u4e0b\u964d\u6cbf\u89e6\u53d1\u5c31\u597d\u4e86\uff08\u6211\u4eec\u91c7\u53d6\u7684\u8bbe\u8ba1\u662f\u4e0b\u964d\u6cbf\u89e6\u53d1\uff0c\u6211\u4eec\u5728 4.3.3 \u5c0f\u8282 \u518d\u8ba8\u8bba\u4e3a\u4ec0\u4e48\u8fd9\u6837\u8bbe\u8ba1\uff09\uff0c\u4e0d\u9700\u8981\u989d\u5916\u7684\u63a7\u5236\u4fe1\u53f7\u4e86\u3002</p>"},{"location":"ZJU_CS/computer_organization/4_processor/#413_alu_control","title":"4.1.3 ALU Control","text":"<p>\u5728 3.1 \u8282\u4e2d\uff0c\u6211\u4eec\u8bbe\u8ba1\u7684 ALU \u9700\u8981\u8fd9\u6837\u7684\u63a7\u5236\u7ed3\u6784\uff1a</p> <p></p> <p>\u6211\u4eec\u5217\u4e00\u4e0b\u9700\u8981\u4f7f\u7528 ALU \u7684\u6307\u4ee4\u7684\u8868\u683c\uff08\u6211\u4eec\u5728\uff09\uff1a</p> <p></p> <p>\u6211\u4eec\u6839\u636e\u8fd9\u4e2a\u8868\u5217\u51fa\u771f\u503c\u8868\uff1a</p> <p></p> <p>\u5176\u4e2d\u53ef\u4ee5\u53d1\u73b0\uff0c\u6807\u4e3a\u7eff\u8272\u7684\u5217\u7684\u53d6\u503c\u8981\u4e48\u662f 0 \u8981\u4e48\u662f\u65e0\u5173\u7684\uff0c\u56e0\u6b64\u5b83\u4eec\u5e76\u4e0d\u5f71\u54cd\u7ed3\u679c\u3002</p> <p>\u6839\u636e\u8fd9\u4e2a\u771f\u503c\u8868\u6784\u9020\u95e8\u7535\u8def\uff0c\u5c31\u53ef\u4ee5\u6784\u9020\u51fa ALU control \u5355\u5143\u4e86\u3002\u5982\u56fe\u4e2d\u6240\u793a\uff0c\u8be5\u5355\u5143\u4f9d\u8d56 Control \u5355\u5143\u7ed9\u51fa\u7684  <code>ALUOp</code>  \u4fe1\u53f7\u4ee5\u53ca  <code>I[30, 14:2]</code>  \uff1a</p> <p></p> <p>Info</p> <p>ALU control \u6a21\u5757\u53ef\u4ee5\u8fd9\u6837\u5b9e\u73b0\uff1a</p> <p></p> <p>\u9700\u8981\u7406\u89e3\u7684\u662f\uff0c\u6211\u4eec\u5e76\u4e0d\u662f\u6839\u636e\u673a\u5668\u7801\u6765\u6784\u9020\u7535\u8def\u7684\uff0c\u800c\u662f\u76f8\u53cd\uff1a\u7535\u8def\u7684\u8bbe\u8ba1\u53c2\u8003\u4e86\u5f88\u591a\u65b9\u9762\u7684\u95ee\u9898\uff0c\u673a\u5668\u7801\u5e94\u5f53\u4e3b\u8981\u8fce\u5408\u7535\u8def\u4f7f\u5176\u8bbe\u8ba1\u66f4\u52a0\u65b9\u4fbf\u3002</p>"},{"location":"ZJU_CS/computer_organization/4_processor/#414_imm_gen","title":"4.1.4 \u8df3\u8f6c\u6307\u4ee4\u4e0e Imm Gen \u6a21\u5757","text":"<ul> <li>\u5728\u4e00\u6761\u6307\u4ee4\u8fd0\u884c\u5b8c\u540e\uff0c\u5982\u679c\u4e0d\u53d1\u751f\u8df3\u8f6c\uff0cPC + 4\uff0c\u5426\u5219 PC \u8df3\u8f6c\u5230 PC + offset \u7684\u4f4d\u7f6e\u53bb\u3002\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u5982\u4f55\u5b8c\u6210\u7684\u5462\uff1f\u770b\u4e0b\u56fe\uff1a</li> </ul> <ul> <li>(1) \u4e2d\u6709\u4e24\u4e2a\u52a0\u6cd5\u5668\uff0c\u4e00\u4e2a\u7684\u7ed3\u679c\u662f PC + 4\uff0c\u53e6\u4e00\u4e2a\u662f PC + offset\uff0c\u5176\u4e2d offset \u662f\u6765\u81ea\u5f53\u524d instruction \u7684\uff1b\u8fd9\u4e24\u4e2a\u52a0\u6cd5\u5668\u901a\u8fc7 MUX \u9001\u7ed9 PC</li> <li>MUX \u7684\u63a7\u5236\u4fe1\u53f7\u6765\u81ea  (2)\uff0c (2) \u662f\u4e00\u4e2a\u4e0e\u95e8\uff0c\u5373\u5f53\u4e14\u4ec5\u5f53\u4e24\u4e2a\u8f93\u5165\u4fe1\u53f7\u90fd\u4e3a\u771f\u65f6\u624d\u4f1a\u8f93\u51fa 1\uff0c\u4ece\u800c\u5728\u4e0a\u8ff0 MUX \u4e2d\u9009\u62e9\u8df3\u8f6c\u3002 (2) \u7684\u4e24\u4e2a\u8f93\u5165\u5206\u522b\u6765\u81ea\uff1a<ul> <li>(5) \u8fd9\u4e2a ALU \u7684 Zero \u4fe1\u53f7\uff0c\u8fd9\u662f\u7b2c 3 \u7ae0\u4e2d\u6211\u4eec\u8bbe\u8ba1\u7684\u53ef\u4ee5\u7528\u6765\u5b9e\u73b0  <code>beq</code>  \u7684\u7ed3\u6784\uff1b\u6211\u4eec\u8ba8\u8bba\u8fc7\u5b9e\u73b0  <code>beq</code>  \u5176\u5b9e\u5c31\u662f\u8ba1\u7b97  <code>rs1 - rs2</code>  \u5224\u65ad\u5176\u662f\u5426\u4e3a 0\uff0c\u6240\u4ee5\u8fd9\u91cc\u6839\u636e Zero \u662f\u5426\u4e3a 0 \u5c31\u80fd\u5224\u65ad\u4e24\u4e2a\u5bc4\u5b58\u5668\u662f\u5426\u76f8\u7b49</li> <li>(4) \u5904 Control \u7ed9\u51fa\u7684  <code>Branch</code>  \u4fe1\u53f7\uff0c\u5373\u5982\u679c\u8fd9\u4e2a\u8bed\u53e5\u662f\u8df3\u8f6c\u8bed\u53e5\uff0c\u90a3\u4e48\u5bf9\u5e94\u7684\u4fe1\u53f7\u4f1a\u7f6e\u4e3a 1</li> </ul> </li> </ul> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u5f53\u4e14\u4ec5\u5f53\u8bed\u53e5\u786e\u5b9e\u662f  <code>beq</code>  \u800c\u4e14  <code>Zero</code>  \u4fe1\u53f7\u7684\u503c\u786e\u5b9e\u4e3a 1 \u65f6\u624d\u4f1a\u8fdb\u884c\u8df3\u8f6c\u3002</p> <ul> <li>\u518d\u6765\u770b\u770b\u5f53\u8fdb\u884c\u8df3\u8f6c\u7684\u65f6\u5019\uff0c (3) \u5904\u7684 offset \u6765\u81ea\u54ea\u91cc\u3002\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u5b9e\u9645\u4e0a\u8fd9\u4e2a offset \u6765\u81ea\u4e8e  <code>I[31:0]</code>  \uff0c\u4e5f\u5c31\u662f\u6574\u4e2a\u6307\u4ee4\uff1b\u5b83\u88ab\u4f20\u7ed9 Imm Gen \u6a21\u5757\uff0c\u5c06\u6307\u4ee4\u4e2d\u7684\u7acb\u5373\u6570\u7b26\u53f7\u6269\u5c55\u5230 64 \u4f4d\uff1b\u7136\u540e\u5728  (3) \u5904\u5de6\u79fb 1 \u4f4d\uff08\u8bf7\u56de\u987e\uff0c\u56e0\u4e3a RISC-V \u6307\u4ee4\u603b\u662f 2 \u5b57\u8282\u5bf9\u9f50 [\u6211\u4eec\u5b66\u7684\u90fd\u662f 4 \u5b57\u8282\u5bf9\u9f50]\uff0c\u6240\u4ee5\u6211\u4eec\u6ca1\u6709\u4fdd\u5b58\u504f\u79fb\u7684\u6700\u4f4e\u4e00\u4f4d\uff09\u518d\u4e0e PC \u76f8\u52a0\u3002</li> </ul> <p>Imm Gen \u6a21\u5757</p> <p>\u8fd9\u4e2a\u6a21\u5757\u8bc6\u522b  <code>load</code>  \u7c7b\u6307\u4ee4\u3001  <code>store</code>  \u7c7b\u6307\u4ee4\u548c  <code>branch</code>  \u7c7b\u6307\u4ee4\u7684\u7acb\u5373\u6570\u6a21\u5f0f\u5e76\u5c06\u5176 \u7b26\u53f7\u6269\u5c55 \u5230 64 \u4f4d\uff0c\u6839\u636e  <code>I[5:6]</code>  \u7684\u4e0d\u540c\u53d6\u503c\u533a\u5206\u8fd9\u4e09\u79cd\u60c5\u51b5\uff0c\u6784\u9020\u4e00\u4e2a 3:1 MUX \u9009\u62e9\u5b9e\u9645\u7684\u7acb\u5373\u6570\uff0c\u5c06\u5176\u4f20\u7ed9\u540e\u9762\u7684\u4f7f\u7528\u3002</p>"},{"location":"ZJU_CS/computer_organization/4_processor/#415_load_store","title":"4.1.5 Load \u6307\u4ee4\u548c Store \u6307\u4ee4","text":"<p>\u61d2\u5f97\u5199\u4e86\uff0c\u53ef\u4ee5\u81ea\u5df1\u7406\u89e3\u4e00\u4e0b\u3002</p> <p>\u7528\u6587\u5316\u4eba\u7684\u8bdd\u6765\u8bf4\uff0cLoad \u6307\u4ee4\u548c Store \u6307\u4ee4\u7684\u6570\u636e\u901a\u8def\u64cd\u4f5c\u7559\u4f5c\u4e60\u9898\u3002</p>"},{"location":"ZJU_CS/computer_organization/4_processor/#416_control","title":"4.1.6 Control","text":"<p>\u770b\u5b8c\u4e0a\u8ff0\u82e5\u5e72\u5c0f\u8282\uff0ccontrol \u5355\u5143\u7684\u8bbe\u8ba1\u4e5f\u975e\u5e38\u663e\u7136\u4e86\u3002\u6211\u4eec\u5f88\u5bb9\u6613\u7ed9\u51fa\u5982\u4e0b\u771f\u503c\u8868\uff1a</p> <p></p> <p>\u540e\u9762\u5c31\u662f\u8fde\u7535\u8def\u7684\u5de5\u4f5c\u4e86\u3002\u8fde\u51fa\u6765\u957f\u8fd9\u6837\uff1a</p> <p></p>"},{"location":"ZJU_CS/computer_organization/4_processor/#417_why_a_single-cycle_implementation_is_not_used_today","title":"4.1.7 Why a Single-Cycle Implementation is not Used Today","text":"<p>\u5355\u5468\u671f\u7684\u5b9e\u73b0\u662f\u6307\uff0c\u4e00\u4e2a\u6307\u4ee4\u7684\u6240\u6709\u5de5\u4f5c\u90fd\u5728\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u5185\u5b8c\u6210\uff0c\u4e5f\u5c31\u662f CPI = 1\u3002\u90a3\u4e48\uff0c\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u7684\u957f\u5ea6\u5c31\u8981\u8db3\u591f\u6700\u957f\u7684\u90a3\u4e2a\u6307\u4ee4\u5b8c\u6210\u8fd0\u884c\u3002\u4f46\u662f\uff0c\u4f8b\u5982  <code>load</code>  \u7c7b\u7684\u6307\u4ee4\u8981\u7ecf\u8fc7 inst mem, reg file, ALU, data mem, reg file \u8fd9\u4e48\u591a\u7684\u6b65\u9aa4\uff0c\u8fd9\u4f1a\u4f7f\u5f97\u65f6\u949f\u5468\u671f\u53d8\u5f97\u5f88\u957f\uff0c\u5bfc\u81f4\u6574\u4f53\u6027\u80fd\u53d8\u5f97\u5f88\u5dee\u3002\u5355\u5468\u671f\u7684\u5b9e\u73b0\u8fdd\u53cd\u4e86 common case fast \u8fd9\u4e00\u8bbe\u8ba1\u539f\u5219\u3002</p> <p>\u56e0\u6b64\uff0c\u6211\u4eec\u5f15\u5165\u4e00\u79cd\u65b0\u7684\u5b9e\u73b0\u6280\u672f\uff0c\u53eb \u6d41\u6c34\u7ebf (Pipeline)\u3002</p>"},{"location":"ZJU_CS/computer_organization/4_processor/#42_interrupts_and_exceptions","title":"4.2 Interrupts and Exceptions","text":"<p>\u4e2d\u65ad\u662f\u6307\u4e00\u4e9bI/O\u8bbe\u5907\u8bf7\u6c42CPU\u7684\u670d\u52a1\uff0c\u800c\u5f02\u5e38\u662f\u6307\u7a0b\u5e8f\u8fd0\u884c\u65f6\u51fa\u73b0\u7684\u9519\u8bef\uff0c\u5982\uff1a\u9664\u96f6\u9519\u8bef\u3001\u5185\u5b58\u8d8a\u754c\u3001\u672a\u5b9a\u4e49opcode\u3001\u6ea2\u51fa\u7b49\u3002\u8fd9\u4e24\u8005\u90fd\u4f1a\u5bfc\u81f4\u7a0b\u5e8f\u7684\u6b63\u5e38\u6267\u884c\u88ab\u6253\u65ad\uff0cCPU\u9700\u8981\u505a\u51fa\u76f8\u5e94\u7684\u5904\u7406\u3002</p>"},{"location":"ZJU_CS/computer_organization/4_processor/#421_handling_exceptions","title":"4.2.1 Handling Exceptions","text":"<ul> <li>\u5f53\u5f02\u5e38\u53d1\u751f\u65f6\uff0cCPU\u4f1a\u5c06\u5f02\u5e38\u7684\u539f\u56e0\u4fdd\u5b58\u5728 Cause Register \u4e2d\uff0c\u5c06\u5f02\u5e38\u53d1\u751f\u65f6\u7684\u6307\u4ee4\u5730\u5740\u4fdd\u5b58\u5728 EPC Register \u4e2d\uff0c\u7136\u540e\u8df3\u8f6c\u5230\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u3002</li> <li>\u4fdd\u5b58\u95ee\u9898\u7684\u539f\u56e0\u548c\u5730\u5740\u662f\u4e3a\u4e86\u5728\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u4e2d\u80fd\u591f\u77e5\u9053\u5f02\u5e38\u53d1\u751f\u7684\u539f\u56e0\u548c\u5f02\u5e38\u53d1\u751f\u65f6\u7684\u6307\u4ee4\u5730\u5740\uff0c\u4ee5\u4fbf\u8fdb\u884c\u76f8\u5e94\u7684\u5904\u7406\u3002 <p>\u5728RISC-V\u4e2d\uff0cSEPC\u548cSCAUSE\uff082 for undefined opcode, 12 for hardware malfunction\uff09\u5206\u522b\u5bf9\u5e94EPC\u548cCause Register\u3002</p> </li> <li>Jump to Handler\u7684\u8fc7\u7a0b\u662f\u901a\u8fc7 Exception Vector \u5b9e\u73b0\u7684\uff0c\u5373\u5728\u5f02\u5e38\u53d1\u751f\u65f6\uff0cCPU\u4f1a\u6839\u636e\u5f02\u5e38\u7684\u539f\u56e0\u8df3\u8f6c\u5230\u76f8\u5e94\u7684\u5f02\u5e38\u5904\u7406\u7a0b\u5e8f\u3002 <p>\u5728RISC-V\u4e2d\uff0c\u8fd9\u4e2a\u8fc7\u7a0b\u662f\u901a\u8fc7 Vectored Interrupt \u5b9e\u73b0\u7684\u3002</p> </li> </ul>"},{"location":"ZJU_CS/computer_organization/4_processor/#422_csrcontrol_and_status_registers","title":"4.2.2 CSR\uff08Control and Status Registers\uff09","text":""},{"location":"ZJU_CS/computer_organization/4_processor/#43_pipeline","title":"4.3 Pipeline","text":""},{"location":"ZJU_CS/computer_organization/4_processor/#431_intro","title":"4.3.1 Intro","text":"<p>\u5728\u5c0f\u5b66\u5965\u6570\u4e2d\u6211\u4eec\u5c31\u5b66\u8fc7\uff0c\u5e76\u884c\u80fd\u591f\u63d0\u9ad8\u6574\u4f53\u7684\u6548\u7387\uff0c\u4f8b\u5982\u8fd9\u4e2a\u6d17\u8863\u670d\u7684\u4f8b\u5b50\uff1a</p> <p></p> <p>\u5bf9\u4e8e\u5355\u4e2a\u5de5\u4f5c\uff0c\u6d41\u6c34\u7ebf\u6280\u672f\u5e76\u6ca1\u6709\u7f29\u77ed\u5176\u8fd0\u884c\u65f6\u95f4\uff1b\u4f46\u662f\u7531\u4e8e\u591a\u4e2a\u5de5\u4f5c\u53ef\u4ee5\u5e76\u884c\u5730\u6267\u884c\uff0c\u6d41\u6c34\u7ebf\u6280\u672f\u53ef\u4ee5\u66f4\u597d\u5730\u538b\u69a8\u8d44\u6e90\uff0c\u4f7f\u5f97\u5b83\u4eec\u88ab\u540c\u65f6\u800c\u4e0d\u662f\u8f6e\u6d41\u4f7f\u7528\uff0c\u5728\u5de5\u4f5c\u6bd4\u8f83\u591a\u7684\u65f6\u5019\u53ef\u4ee5\u589e\u52a0\u6574\u4f53\u7684 \u541e\u5410\u7387 throughput\uff0c\u4ece\u800c\u51cf\u5c11\u4e86\u5b8c\u6210\u6574\u4e2a\u4efb\u52a1\u7684\u65f6\u95f4\u3002</p> <p>\u5728\u672c\u4f8b\u4e2d\uff0c\u7531\u4e8e\u6d41\u6c34\u7ebf\u5f00\u59cb\u548c\u7ed3\u675f\u7684\u65f6\u5019\u5e76\u6ca1\u6709\u5b8c\u5168\u5145\u6ee1\uff0c\u56e0\u6b64\u541e\u5410\u7387\u4e0d\u53ca\u539f\u6765\u7684 4 \u500d\uff084 \u6765\u81ea\u4e8e\u4f8b\u5b50\u4e2d\u6709 4 \u4e2a\u6b65\u9aa4\uff09\uff1b\u4f46\u662f\u5f53\u5de5\u4f5c\u6570\u8db3\u591f\u591a\u7684\u65f6\u5019\uff0c\u541e\u5410\u7387\u5c31\u51e0\u4e4e\u662f\u539f\u6765\u7684 4 \u500d\u4e86\u3002</p> <p>\u56de\u5230 RISC-V \u4e2d\u6765\uff0c\u4e00\u4e2a\u6307\u4ee4\u901a\u5e38\u88ab\u5212\u5206\u4e3a 5 \u4e2a\u9636\u6bb5\uff1a</p> <ol> <li>IF, Inst Fetch\uff0c\u4ece\u5185\u5b58\u4e2d\u83b7\u53d6\u6307\u4ee4</li> <li>ID, Inst Decode\uff0c\u8bfb\u53d6\u5bc4\u5b58\u5668\u3001\u6307\u4ee4\u8bd1\u7801</li> <li>EX, Execute\uff0c\u8ba1\u7b97\u64cd\u4f5c\u7ed3\u679c\u548c/\u6216\u5730\u5740</li> <li>MEM, Memory\uff0c\u5185\u5b58\u5b58\u53d6\uff08\u5982\u679c\u9700\u8981\u7684\u8bdd\uff09</li> <li>WB, Write Back\uff0c\u5c06\u7ed3\u679c\u5199\u56de\u5bc4\u5b58\u5668\uff08\u5982\u679c\u9700\u8981\u7684\u8bdd\uff09</li> </ol> <p>\u5404\u9636\u6bb5\u4f1a\u7528\u5230\u7684\u7ec4\u4ef6\u5982\u4e0b\u56fe\u6240\u793a\uff08\u8fd9\u4e2a\u56fe\u8fd8\u6709\u5f88\u591a\u95ee\u9898\uff0c\u6211\u4eec\u540e\u9762\u6162\u6162\u8ba8\u8bba~\uff09\uff0c\u53ef\u4ee5\u770b\u5230\u8fd9\u4e9b\u90e8\u5206\u662f\u53ef\u4ee5\u5e76\u884c\u6267\u884c\u7684\uff08\u6bd4\u5982 Reg File \u53ef\u4ee5\u4e00\u8fb9\u8bfb\u4e00\u8fb9\u5199\uff09\uff1a</p> <p></p> <p>\u5176\u52a0\u901f\u7684\u6838\u5fc3\u4e3b\u65e8\u662f\uff0c\u5b83\u4eec\u90fd\u5e0c\u671b\u4e00\u4e2a\u5468\u671f\u80fd\u5b8c\u6210\u4e00\u6761\u6307\u4ee4\uff0c\u4f46\u662f\u5355\u5468\u671f CPU \u7684\u4e00\u4e2a\u5468\u671f\u9700\u8981\u627f\u62c5\u4e00\u4e2a\u6307\u4ee4\u7684\u6240\u6709\u6b65\u9aa4\uff1b\u800c\u6d41\u6c34\u7ebf\u6280\u672f\u5f15\u5165\u540e\uff0c\u7531\u4e8e\u5b83\u53ef\u4ee5\u5e76\u884c\u5730\u540c\u65f6\u6267\u884c\u4e94\u4e2a\u9636\u6bb5\u7684\u6b65\u9aa4\uff0c\u6240\u4ee5\u6b64\u65f6\u7684\u5468\u671f\u53ea\u9700\u8981\u4e00\u4e2a\u9636\u6bb5\u7684\u957f\u5ea6\u3002\u603b\u7684\u6765\u8bf4\uff0c\u5355\u5468\u671f CPU \u7684\u65f6\u949f\u5468\u671f\u7531\u603b\u8017\u65f6\u6700\u957f\u7684\u6307\u4ee4\u51b3\u5b9a\uff0c\u6d41\u6c34\u7ebf CPU \u7684\u65f6\u949f\u5468\u671f\u7531\u8017\u65f6\u6700\u957f\u7684\u6307\u4ee4\u9636\u6bb5\uff08IF, ID \u7b49\uff09\u51b3\u5b9a\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u672c\u6765\u662f\u5728\u4e00\u4e2a\u5468\u671f\u4e2d\u5b8c\u6210\u4e00\u4e2a\u6307\u4ee4\uff0c\u800c\u73b0\u5728\u662f\u5728\u4e00\u4e2a\u5468\u671f\u4e2d\u5b8c\u6210\u4e94\u4e2a\u4e0d\u540c\u6307\u4ee4\u7684\u4e0d\u540c\u9636\u6bb5\u3002\u5f53\u7136\uff0c\u6bcf\u4e2a\u65f6\u949f\u5468\u671f\u7684\u957f\u5ea6\u4e5f\u9700\u8981\u8db3\u591f\u4efb\u4f55\u4e00\u4e2a\u9636\u6bb5\u5b8c\u6210\u6267\u884c\u3002</p> <p>RISC-V \u4e5f\u6709\u5f88\u591a\u6d41\u6c34\u7ebf\u53cb\u597d\u7684\u8bbe\u8ba1\uff0c\u4f8b\u5982\uff1a</p> <ul> <li>\u6240\u6709 RISC-V \u7684\u6307\u4ee4\u957f\u5ea6\u76f8\u540c\uff0c\u8fd9\u53ef\u4ee5\u65b9\u4fbf  <code>IF</code>  \u548c  <code>ID</code>  \u7684\u5de5\u4f5c</li> <li>RISC-V \u7684\u6307\u4ee4\u683c\u5f0f\u6bd4\u8f83\u5c11\uff0c\u800c\u4e14\u6e90\u5bc4\u5b58\u5668\u3001\u76ee\u6807\u5bc4\u5b58\u5668\u7684\u4f4d\u7f6e\u76f8\u540c</li> <li>\u53ea\u5728 load \u6216 store \u6307\u4ee4\u4e2d\u64cd\u4f5c data memory \u800c\u4e0d\u4f1a\u5c06\u5b58\u53d6\u7684\u7ed3\u679c\u505a\u8fdb\u4e00\u6b65\u8fd0\u7b97\uff0c\u8fd9\u6837\u5c31\u53ef\u4ee5\u5c06  <code>MEM</code>  \u653e\u5728\u6bd4\u8f83\u540e\u9762\u7684\u4f4d\u7f6e\uff1b\u5982\u679c\u8fd8\u80fd\u5bf9\u7ed3\u679c\u505a\u8fd0\u7b97\u5219\u8fd8\u9700\u8981\u4e00\u4e2a\u989d\u5916\u7684\u9636\u6bb5\uff0c\u6b64\u65f6\u6d41\u6c34\u7ebf\u7684\u53d8\u957f\u5e76\u6ca1\u6709\u4ec0\u4e48\u6b63\u9762\u6548\u679c</li> </ul> <p>Hazards \u6307\u7684\u662f\u963b\u6b62\u4e0b\u4e00\u4e2a\u6307\u4ee4\u5728\u4e0b\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u5b8c\u6210\u7684\u4e00\u4e9b\u60c5\u51b5\u3002\u4e3b\u8981\u5206\u4e3a\u4e09\u79cd\uff1a</p> <ul> <li>Structure hazards<ul> <li>\u4e00\u4e2a\u88ab\u8bf7\u6c42\u7684\u8d44\u6e90\u4ecd\u5904\u4e8e\u5fd9\u788c\u72b6\u6001</li> </ul> </li> <li>Data hazards<ul> <li>\u9700\u8981\u7b49\u5f85\u4e0a\u4e00\u4e2a\u6307\u4ee4\u5b8c\u6210\u6570\u636e\u8bfb\u5199</li> </ul> </li> <li>Control hazards<ul> <li>\u4e00\u4e9b\u63a7\u5236\u53d6\u51b3\u4e8e\u4e0a\u4e00\u6761\u6307\u4ee4\u7684\u7ed3\u679c</li> </ul> </li> </ul>"},{"location":"ZJU_CS/computer_organization/4_processor/#432_structure_hazards","title":"4.3.2 Structure hazards","text":"<p>\u4f46\u662f\uff0c\u806a\u660e\u7684\u5c0f\u670b\u53cb\u4e5f\u53ef\u4ee5\u770b\u51fa\u4e00\u4e9b\u95ee\u9898\uff01\u6bd4\u5982\uff0c\u524d\u4e00\u4e2a\u6307\u4ee4\u5728  <code>ID</code>  \u9636\u6bb5\u7684\u65f6\u5019\uff0c\u4f1a\u4f7f\u7528\u5230\u5176\u5728  <code>IF</code>  \u9636\u6bb5\u8bfb\u51fa\u7684\u6307\u4ee4\u7684\u5185\u5bb9\uff1b\u4f46\u4e0e\u6b64\u540c\u65f6\u540e\u4e00\u4e2a\u6307\u4ee4\u5df2\u7ecf\u8fd0\u884c\u5230  <code>IF</code>  \u9636\u6bb5\u5e76\u8bfb\u51fa\u4e86\u65b0\u7684\u6307\u4ee4\uff0c\u90a3\u4e48\u524d\u4e00\u4e2a\u6307\u4ee4\u5c31\u6ca1\u7684\u7528\u4e86\uff01\u8fd9\u4e2a\u73b0\u8c61\u5728\u5f88\u591a\u5730\u65b9\u666e\u904d\u5b58\u5728\uff0c\u5305\u62ec Control \u4fe1\u53f7\u7684\u4f20\u9012\uff0c\u56e0\u6b64\u6211\u4eec\u5b9e\u9645\u4e0a\u4f1a\u5728\u6bcf\u4e24\u4e2a stage \u4e4b\u95f4\u7528\u4e00\u4e9b\u5bc4\u5b58\u5668\u4fdd\u5b58\u8fd9\u4e9b\u5185\u5bb9\uff1a</p> <p></p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u4e0a\u9762\u8fd9\u4e2a\u56fe\u9664\u4e86\u52a0\u4e86\u4e00\u4e9b\u7ad6\u6761\u6761\u4ee5\u5916\u548c\u4e4b\u524d\u6ca1\u6709\u6d41\u6c34\u7ebf\u7684\u65f6\u5019\u51e0\u4e4e\u6ca1\u4ec0\u4e48\u5dee\u522b\u3002\u8fd9\u4e9b\u7ad6\u6761\u6761\u5c31\u662f pipeline registers\uff0c\u4f8b\u5982  <code>IF/ID</code>  \u5c31\u662f  <code>IF</code>  \u548c  <code>ID</code>  \u9636\u6bb5\u4e4b\u95f4\u7684\u4e00\u4e9b\u5bc4\u5b58\u5668\u3002</p> <p>Tip</p> <p>\u806a\u660e\u7684\u5c0f\u670b\u53cb\u53ef\u80fd\u4f1a\u56de\u5fc6\u8d77\u6211\u4eec\u5728 4.1.2 \u5c0f\u8282 \u4e2d\u63d0\u5230\u7684\uff0c\u7531\u4e8e PC \u6bcf\u4e2a\u65f6\u949f\u5468\u671f\u90fd\u4f1a\u88ab\u5199\u5165\uff0c\u6240\u4ee5\u4e0d\u9700\u8981\u50cf Reg files \u548c Data mem \u90a3\u6837\u9700\u8981\u989d\u5916\u7684\u63a7\u5236\u4fe1\u53f7  <code>RegWrite</code>  \u548c  <code>MemWrite</code>  \u6765\u63a7\u5236\u5199\u5165\uff0c\u53ea\u9700\u8981\u5728\u6bcf\u4e2a\u4e0b\u964d\u6cbf\u5199\u5165\u5c31\u597d\u3002Pipeline registers \u4e5f\u662f\u8fd9\u6837\uff0c\u5b83\u4eec\u6bcf\u4e2a\u65f6\u949f\u5468\u671f\u90fd\u4f1a\u88ab\u5199\u5165\u4e00\u6b21\uff0c\u6240\u4ee5\u4e5f\u4e0d\u9700\u8981\u989d\u5916\u7684\u4fe1\u53f7\uff0c\u4e5f\u662f\u5728\u6bcf\u4e2a\u4e0b\u964d\u6cbf\u5199\u5165\u5c31\u597d\u3002</p> <p>\u6211\u4eec\u4e4b\u524d\u5e76\u6ca1\u6709\u8ba8\u8bba\u4e3a\u4ec0\u4e48\u8981\u5728\u4e0b\u964d\u6cbf\u5199\u5165\uff0c\u672c\u8282\u4e0b\u4e00\u4e2a Info \u6846\u6846\u5c31\u4f1a\u8bf4\u660e\u5566\uff01</p> <p>\u6211\u4eec\u5173\u6ce8 datapath \u4e2d\u4e24\u4e2a\u4ece\u53f3\u5f80\u5de6\u4f20\u4e1c\u897f\u7684\u60c5\u51b5\uff01\u4e00\u4e2a\u662f  <code>WB</code>  \u9636\u6bb5\u5199\u56de\u6570\u636e\uff0c\u4e00\u4e2a\u662f  <code>MEM</code>  \u9636\u6bb5\u5224\u65ad\u662f\u5426\u53d1\u751f\u8df3\u8f6c\u3002\u5206\u522b\u5173\u6ce8\u5bf9\u5e94\u589e\u52a0\u7684 datapath\uff1a</p> <p></p> <p>\u5bf9\u4e8e  <code>WB</code>  \u6765\u8bf4\uff0c\u6211\u4eec\u5199\u56de\u65f6\u9700\u8981\u8bb0\u5f55\u5199\u5230\u54ea\u4e2a register \u4e2d\uff0c\u8fd9\u4e2a\u4fe1\u606f\u662f  <code>ID</code>  \u9636\u6bb5\u4ece Instruction \u4e2d  <code>[11:7]</code>  \u7684\u4f4d\u7f6e\u53d6\u51fa\u7684\uff0c\u4f46\u662f\u76f4\u5230  <code>WB</code>  \u9636\u6bb5\u624d\u88ab\u7528\u5230\uff0c\u56e0\u6b64\u8fd9\u4e2a\u4fe1\u606f\u88ab\u5b58\u5230\u4e86  <code>ID/EX</code>  \uff0c\u4e0b\u4e00\u4e2a\u5468\u671f\u5b58\u5230\u4e86  <code>EX/MEM</code>  \uff0c\u4e0b\u4e00\u4e2a\u5468\u671f\u5b58\u5230\u4e86  <code>MEM/WB</code>  \uff0c\u7136\u540e\u4e0b\u4e00\u4e2a\u5468\u671f\u88ab\u4f7f\u7528\u3002</p> <p><code>MEM</code>  \u5224\u65ad\u662f\u5426\u53d1\u751f\u8df3\u8f6c\u7684\u903b\u8f91\u7c7b\u4f3c\uff0c\u7565\u3002</p> <p>\u53e6\u5916\uff0c\u7531\u4e8e\u5728\u6d41\u6c34\u7ebf\u4e2d IF \u548c MEM \u90fd\u6709\u53ef\u80fd\u7528\u5230\u5185\u5b58\uff0c\u4e3a\u4e86\u4e0d\u51fa\u73b0\u7ed3\u6784\u7ade\u4e89\uff0c\u6211\u4eec\u5c06\u6570\u636e\u548c\u6307\u4ee4\u653e\u5728\u4e0d\u540c\u7684\u5730\u65b9\uff0c\u4ee5\u907f\u514d\u540c\u65f6\u51fa\u73b0\u8981\u8bbf\u95ee\u5185\u5b58\u800c\u5bfc\u81f4\u7684\u7ed3\u6784\u7ade\u4e89\u3002</p>"},{"location":"ZJU_CS/computer_organization/4_processor/#433_data_hazards","title":"4.3.3 Data Hazards","text":"<p>\u4f46\u662f\uff0c\u806a\u660e\u7684\u5c0f\u670b\u53cb\u4ecd\u7136\u53ef\u4ee5\u770b\u51fa\u4e00\u4e9b\u95ee\u9898\uff01\u8003\u8651\u8fd9\u6837\u7684\u6307\u4ee4\u5e8f\u5217\uff1a</p> <p></p> <p>\u7528\u7b80\u5316\u7684\u6570\u636e\u901a\u8def\u67e5\u770b\u4e00\u4e0b\u5404\u6307\u4ee4\u5404 stage \u7684\u6267\u884c\u65f6\u95f4\uff1a</p> <p></p> <p>\u6211\u4eec\u7b80\u5355\u4ecb\u7ecd\u4e00\u4e0b\u8fd9\u5f20\u56fe\u3002\u6700\u4e0a\u9762\u662f\u6a2a\u8f74\uff0c\u4e5f\u5c31\u662f\u65f6\u95f4\u8f74\uff0cCC \u4ee3\u8868 Clock Cycle\uff1b\u4e0b\u9762\u7684 10, -20 \u8fd9\u79cd\u6570\u636e\u662f  <code>x2</code>  \u5bc4\u5b58\u5668\u7684\u503c\uff1b\u63a5\u4e0b\u6765\u7684\u6bcf\u4e00\u884c\u90fd\u662f\u4e00\u4e2a\u8bed\u53e5\u7684\u6267\u884c\u8fc7\u7a0b\uff0c  <code>IM</code>  \u5c31\u662f inst mem\uff0c\u5bf9\u5e94  <code>IF</code>  stage\uff1b  <code>Reg</code>  \u5c31\u662f reg file\uff0c\u5bf9\u5e94  <code>ID</code>  stage\uff1b\u957f\u5f97\u50cf ALU \u7684\u5c31\u662f ALU\uff0c\u5bf9\u5e94  <code>EX</code>  stage\uff1b  <code>DM</code>  \u5c31\u662f data mem\uff0c\u5bf9\u5e94  <code>MEM</code>  stage\uff1b\u6700\u540e\u9762\u7684  <code>Reg</code>  \u4e5f\u662f reg file\uff0c\u5bf9\u5e94  <code>WB</code>  stage\u3002\u6bcf\u4e2a stage \u5360\u7528\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u3002</p> <p>\u56fe\u4e2d\u6df1\u8272\uff08\u7070\u8272\u3001\u84dd\u8272\uff09\u7684\u90e8\u5206\u5c31\u662f\u5bf9\u5e94\u6307\u4ee4\u4f1a\u4f7f\u7528\u5230\u7684\u7ec4\u4ef6\uff0c\u5176\u4e2d mem \u548c reg file \u7528\u5de6\u534a\u8fb9\u4e3a\u6df1\u8272\u65f6\u8868\u793a \u5199\u5165\uff0c\u53f3\u534a\u8fb9\u4e3a\u6df1\u8272\u65f6\u8868\u793a \u8bfb\u53d6\u3002\u6211\u4eec\u7a0d\u540e\u89e3\u91ca\u8fd9\u6837\u8868\u793a\u7684\u539f\u56e0\u3002</p> <p>\u53ef\u4ee5\u770b\u5230\uff0c\u5f53\u7b2c\u4e00\u6761\u8bed\u53e5  <code>sub x2, x1, x3</code>  \u8fd0\u884c\u5230\u7b2c 5 \u4e2a\u65f6\u949f\u5468\u671f\u65f6\uff0c\u8ba1\u7b97\u7ed3\u679c\u624d\u88ab\u5199\u56de  <code>x2</code>  \uff08\u5982\u7eff\u8272\u6846\u6846\u6240\u793a\uff09\uff0c\u4f46\u662f\u5728\u7b2c 3 \u4e2a\u5468\u671f\u65f6\u7b2c\u4e8c\u6761\u8bed\u53e5  <code>and x12, x2, x5</code>  \u5c31\u8fd0\u884c\u5230  <code>ID</code>  \u9636\u6bb5\uff0c\u9700\u8981\u7528\u5230  <code>x2</code>  \u7684\u503c\uff08\u5982\u6a59\u8272\u6846\u6846\u6240\u793a\uff09\u3002\u5982\u679c\u8fd9\u65f6\u5019\u4e0d\u52a0\u5904\u7406\uff0c\u7b2c\u4e8c\u6761\u8bed\u53e5\u8bfb\u5230\u7684\u503c\u5c31\u662f\u9519\u8bef\u7684\uff01\u8fd9\u4e00\u95ee\u9898\u540c\u65f6\u4f1a\u53d1\u751f\u5728\u7b2c 3 \u6761\u6307\u4ee4\u90a3\u91cc\uff0c\u5b83\u5728\u7b2c 4 \u4e2a\u65f6\u949f\u5468\u671f\u9700\u8981\u7528\u5230  <code>x2</code>  \u7684\u503c\uff0c\u4f46\u662f\u8fd9\u65f6\u5019  <code>x2</code>  \u7684\u503c\u4ecd\u672a\u88ab\u66f4\u65b0\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u7531\u4e8e\u6307\u4ee4\u6240\u9700\u7684\u6570\u636e\u4f9d\u8d56\u4e8e\u524d\u9762\u4e00\u6761\u5c1a\u672a\u5b8c\u6210\u7684\u6307\u4ee4\uff0c\u56e0\u6b64\u6307\u4ee4\u4e0d\u80fd\u5728\u9884\u671f\u7684\u65f6\u949f\u5468\u671f\u5185\u6267\u884c\uff0c\u8fd9\u79cd\u60c5\u51b5\u6211\u4eec\u79f0\u4e4b\u4e3a data hazard\u3002</p> Info <p>\u5728\u7b2c 5 \u4e2a\u65f6\u949f\u5468\u671f\u5185\uff0c\u5173\u4e8e Reg files \u6211\u4eec\u9700\u8981\u5b8c\u6210 2 \u4ef6\u4e8b\uff1a  <code>sub x2, x1, x3</code>  \u7684  <code>WB</code>  \u9636\u6bb5\u5c06  <code>x2</code>  \u7684\u65b0\u503c\u5199\u5165 Reg files\uff0c\u4ee5\u53ca  <code>add x14, x2, x2</code>  \u7684  <code>ID</code>  \u9636\u6bb5\u5c06  <code>x2</code>  \u7684\u503c\u8bfb\u51fa\u6765\u5e76\u4e14\u5b58\u5230  <code>ID/EX</code>  \u5bc4\u5b58\u5668\u4e2d\u3002\u8fd9\u4e24\u4e2a\u4e8b\u60c5\u6709\u6ca1\u6709\u53ef\u80fd\u6b63\u786e\u6267\u884c\u5462\uff1f\u7b54\u6848\u662f\u6709\u7684\uff01</p> <p>\u4f17\u6240\u5468\u77e5\uff0c\u65f6\u949f\u4fe1\u53f7\u6709\u4e0a\u5347\u6cbf\u548c\u4e0b\u964d\u6cbf\uff0c\u6211\u4eec\u65e2\u53ef\u4ee5\u89c4\u5b9a\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u7531\u4e00\u4e2a\u4e0a\u5347\u6cbf\u5f00\u59cb\u5230\u53e6\u4e00\u4e2a\u4e0a\u5347\u6cbf\u7ed3\u675f\uff0c\u4e5f\u53ef\u4ee5\u89c4\u5b9a\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u4ece\u4e00\u4e2a\u4e0b\u964d\u6cbf\u5f00\u59cb\u5230\u53e6\u4e00\u4e2a\u4e0b\u964d\u6cbf\u7ed3\u675f\uff1a</p> <p></p> <p>\u5728\u8bfe\u672c\u7684\u8bbe\u8ba1\u4e2d\uff0c\u6211\u4eec\u91c7\u53d6\u524d\u8005\uff0c\u4e5f\u5c31\u662f\u4e00\u4e2a\u65f6\u949f\u5468\u671f\u5c31\u662f\u76f8\u90bb\u4e24\u6b21\u4e0a\u5347\u6cbf\u4e4b\u95f4\u7684\u65f6\u95f4\u6bb5\u3002</p> <p>\u800c\u5bc4\u5b58\u5668\u7684\u5199\u5165\u53ef\u4ee5\u7531\u4e0a\u5347\u6cbf\u89e6\u53d1\uff0c\u4e5f\u53ef\u4ee5\u7531\u4e0b\u964d\u6cbf\u89e6\u53d1\u3002\u5982\u679c\u6211\u4eec\u89c4\u5b9a Reg files \u4e2d\u7684\u5bc4\u5b58\u5668\u5728\u4e0a\u5347\u6cbf\u89e6\u53d1\u5199\u5165\uff0c\u4e5f\u5c31\u662f\u5728\u524d\u534a\u4e2a\u5468\u671f\u4e2d\u5b8c\u6210\u5199\u5165 Reg files \u5bc4\u5b58\u5668\u7684\u5de5\u4f5c\uff1b\u800c\u89c4\u5b9a Pipeline registers \u5728\u4e0b\u964d\u6cbf\u89e6\u53d1\u5199\u5165\uff0c\u4e5f\u5c31\u662f\u5728\u540e\u534a\u4e2a\u5468\u671f\u5b8c\u6210\u5199\u5165\u5de5\u4f5c\uff0c\u90a3\u4e48\uff0c\u5728\u7b2c 5 \u4e2a\u65f6\u949f\u5468\u671f\u7684\u4e0a\u534a\uff0c  <code>x2</code>  \u7684\u65b0\u503c\u88ab\u5199\u5165 Reg\uff1b\u4e0b\u534a\u5468\u671f\u4ece Reg \u8bfb\u51fa  <code>x2</code>  \u5e76\u5199\u5165  <code>ID/EX</code>  Reg \u7684\u503c\u5c31\u662f  <code>x2</code>  \u7684\u65b0\u503c\u4e86\u3002\u6240\u4ee5\u8bf4\uff0c\u8fd9\u6837\u7684\u8bbe\u8ba1\u4f7f\u5f97\u8fd9\u79cd\u60c5\u51b5\u4e0b\u4e0d\u4f1a\u51fa\u73b0 structure hazard\u3002</p> <p>\u8fd9\u4e5f\u5c31\u80fd\u89e3\u91ca\u4e3a\u4ec0\u4e48  <code>PC</code>  \u8981\u5728\u4e0b\u964d\u6cbf\u5199\u5165\u4e86\uff0c\u770b datapath \u7684\u8fd9\u4e00\u90e8\u5206\uff1a</p> <p></p> <p>\u5982\u679c  <code>PC</code>  \u5728\u4e0a\u5347\u6cbf\u5199\u5165\uff0c\u4e5f\u5c31\u662f\u5728\u4e0a\u5347\u6cbf\u66f4\u65b0\u5230\u4e0b\u4e00\u6761\u6307\u4ee4\u7684\u4f4d\u7f6e\uff0c\u90a3\u4e48\u5728\u4e0b\u964d\u6cbf\u8981\u5c06\u5f53\u524d\u6307\u4ee4\u5199\u5165  <code>IF/ID</code>  \u7684\u65f6\u5019\uff0c\u4ece inst mem \u4e2d\u8bfb\u51fa\u7684\u6307\u4ee4\u5df2\u7ecf\u662f\u4e0b\u4e00\u6761\u800c\u4e0d\u662f\u5f53\u524d\u6307\u4ee4\u4e86\uff01\u6240\u4ee5\u6211\u4eec\u5fc5\u987b\u8ba9  <code>PC</code>  \u5728\u4e0b\u964d\u6cbf\u5199\u5165\uff0c\u8fd9\u6837\u624d\u80fd\u8bfb\u53d6\u5230\u6b63\u786e\u7684\u6307\u4ee4\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0cReg files \u7684\u5199\u5165\u5747\u53d1\u751f\u5728\u4e0a\u534a\u5468\u671f\uff0c\u4e5f\u5c31\u662f\u4e0a\u5347\u6cbf\uff1b\u800c Pipeline registers \u548c  <code>PC</code>  \u7684\u5199\u5165\u5747\u53d1\u751f\u5728\u4e0b\u534a\u5468\u671f\uff0c\u4e5f\u5c31\u662f\u4e0b\u964d\u6cbf\u3002</p> <p>\u8fd9\u4e5f\u662f\u56fe\u4f8b\u4e2d reg file \u7528\u5de6\u534a\u8fb9\u4e3a\u6df1\u8272\u8868\u793a\u5199\u5165\uff0c\u53f3\u534a\u8fb9\u4e3a\u6df1\u8272\u8868\u793a\u8bfb\u53d6\u7684\u539f\u56e0\uff1a\u5199\u5165\u53d1\u751f\u5728\u4e0a\u534a\u4e2a\u5468\u671f\uff0c\u800c\u4f7f\u7528\u8bfb\u53d6\u7684\u7ed3\u679c\u53d1\u751f\u5728\u4e0b\u534a\u4e2a\u5468\u671f\u3002</p> <p>\u90a3\u4e48\uff0c\u5982\u4f55\u89e3\u51b3 data hazard \u5462\uff1f\u56de\u987e\u521a\u521a\u7684\u90a3\u5f20\u56fe\uff1a</p> <p></p> <p>\u6211\u4eec\u6ce8\u610f\u5230\uff0c\u867d\u7136  <code>sub x2, x1, x3</code>  \u5728\u7b2c 5 \u4e2a\u65f6\u949f\u5468\u671f\u7684  <code>WB</code>  \u9636\u6bb5\u624d\u5c06\u7ed3\u679c\u5199\u56de\uff0c\u4f46\u662f\u5728\u7b2c 3 \u4e2a\u65f6\u949f\u5468\u671f\u7684  <code>EX</code>  \u9636\u6bb5\u5176\u5b9e\u5c31\u7b97\u51fa\u6765\u4e86\uff01\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u589e\u52a0\u989d\u5916\u7684\u786c\u4ef6\u7ed3\u6784\uff0c\u4f7f\u5f97 ALU \u7684\u8f93\u5165\u4e0d\u4ec5\u53ef\u4ee5\u6765\u6e90\u4e8e\u5bc4\u5b58\u5668\u4e2d\u8bfb\u51fa\u6765\u7684\u3001\u653e\u5728  <code>ID/EX</code>  \u4e2d\u7684\u503c\uff0c\u8fd8\u53ef\u4ee5\u6765\u6e90\u4e8e  <code>EX/MEM</code>  \u4e2d\u6216\u8005  <code>MEM/WB</code>  \u4e2d\u7684\u503c\uff0c\u5b83\u4eec\u5206\u522b\u5bf9\u5e94\u524d\u4e00\u6761\u548c\u518d\u524d\u4e00\u6761\u6307\u4ee4\u7684 ALU \u7684\u8ba1\u7b97\u7ed3\u679c\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a </p> <p></p> <p>\u5728\u7b2c 3 \u4e2a\u65f6\u949f\u5468\u671f\uff0c\u7b2c\u4e00\u6761\u6307\u4ee4\u7684\u7ed3\u679c\u88ab\u7b97\u51fa\u5e76\u4fdd\u5b58\u5728  <code>EX/MEM</code> </p> <p>\u5b66\u4e0d\u5b8c\u4e86\uff0c\u6682\u65f6\u4e0d\u8be6\u7ec6\u5199\u4e86\uff0c\u5927\u610f\u5c31\u662f   <code>X = 1, 2 = if (MEM.Rd != x0 &amp;&amp; EX.RsX == MEM.Rd) ForwardX = 10; else if (WB.Rd != x0 &amp;&amp; EX.RsX == WB.Rd) ForwardX = 01; else ForwardX = 00;</code>  \uff1a</p> <p></p> <p>\u4f46\u662f\u9047\u5230 load \u6307\u4ee4\u4e0d\u5f97\u4e0d stall\uff0c\u521a\u521a\u53ef\u4ee5\u662f\u56e0\u4e3a EX \u548c ID \u5c31\u5dee\u4e86\u4e00\u8f6e\uff0c\u4f46\u662f load \u7684\u6570\u636e\u8981\u5230 MEM \u624d\u6709\uff0c\u6240\u4ee5\u5982\u679c\u4e0b\u4e00\u6761\u6307\u4ee4\u8981\u7528\uff0c\u4e0a\u4e00\u6761\u4e5f\u62ff\u4e0d\u51fa\u6765\uff0c\u53ea\u80fd\u8981 stall \u7b49\u624d\u884c\uff1a</p> <p></p> <p></p> <p>\u5728 ID \u9636\u6bb5\u53ef\u4ee5\u5224\u5b9a hazard\uff1a  <code>if (EX.MemRead &amp;&amp; EX.Rd == ID.RsX) Hazard();</code> </p> <p>\u5982\u4f55 stall \u5462\uff1f\u4e24\u4e2a\u4efb\u52a1\uff1a\u8ba9\u5f53\u524d\u6307\u4ee4\u4e0d\u8981\u4ea7\u751f\u6548\u679c (\u6e05\u7a7a  <code>RegWrite</code>  \u548c  <code>MemWrite</code>  )\u3001\u8ba9\u540e\u9762\u7684\u8bed\u53e5\u4e0d\u8981\u53d7\u5230\u5f71\u54cd (\u4fdd\u7559  <code>PC</code>  \u548c  <code>IF/ID</code>  \u4e00\u5468\u671f\u4e0d\u6539)\uff1a</p> <p></p> <p>\u8fd8\u6709\u4e00\u79cd\u529e\u6cd5\u662f\u5bf9\u6307\u4ee4\u8fdb\u884c\u7b49\u4ef7\u6362\u5e8f\uff0c\u8ba9\u67d0\u4e9b\u6307\u4ee4\u5c3d\u91cf\u665a\u4e00\u70b9\u6267\u884c\uff0c\u4ee5\u907f\u514d\u6570\u636e\u7ade\u4e89\u3002\u8fd9\u79cd\u65b9\u6cd5\u53eb code scheduling\u3002</p> <p></p>"},{"location":"ZJU_CS/computer_organization/4_processor/#434_control_hazards_branch_hazards","title":"4.3.4 Control Hazards / Branch Hazards","text":"<p>\u4f8b\u9898</p> <p>\u4e0b\u9762\u4e00\u6bb5\u4ee3\u7801\u5728\u4e0d\u8003\u8651\u89e3\u51b3 hazard \u7684\u60c5\u51b5\u4e0b\u7684\u8fd0\u884c\u7ed3\u679c\u662f\u4ec0\u4e48\uff1f\u5047\u8bbe\u6240\u6709\u5bc4\u5b58\u5668\u521d\u59cb\u503c\u4e3a 0\uff0cMem(1) = 0x99, Mem(8) = 0xaa, Mem(9) = 0xbb\u3002</p> <p></p> \u89e3\u7b54 <p>\u6211\u4eec\u53ef\u4ee5\u6a21\u62df\u6bcf\u6761\u6307\u4ee4\u5404\u9636\u6bb5\u7684\u6267\u884c\u60c5\u51b5\uff1a</p> <p></p> <p>\u4ece\u4e2d\u6211\u4eec\u4e5f\u53ef\u4ee5\u603b\u7ed3\u51fa\u89c4\u5f8b\uff08\u8fd9\u548c\u6d41\u6c34\u7ebf\u7684\u5177\u4f53\u8bbe\u8ba1\u6709\u5173\uff01\uff09\uff0c\u5373\uff1a</p> <ul> <li>\u67d0\u6761\u6307\u4ee4 (\u4f8b\u5982  <code>#10</code> )  <code>WB</code>  \u9636\u6bb5\u505a\u7684\u5bc4\u5b58\u5668\u66f4\u6539\uff0c\u5176\u4e4b\u540e\u7b2c\u4e09\u6761\u6307\u4ee4 ( <code>#13</code> ) \u7684  <code>ID</code>  \u9636\u6bb5\u624d\u80fd\u8bfb\u51fa\u65b0\u7684\u503c\uff1b</li> <li>\u67d0\u6761\u6307\u4ee4 (\u4f8b\u5982  <code>#10</code> )  <code>MEM</code>  \u9636\u6bb5\u4ea7\u751f  <code>PCSrc = 1</code>  \u7684\u4fe1\u53f7\uff0c\u6b64\u65f6\u5176\u4e4b\u540e\u7b2c\u4e09\u6761\u6307\u4ee4 ( <code>#13</code> ) \u6b63\u5728\u8fd0\u884c  <code>IF</code>  \u9636\u6bb5\uff0c\u5b83\u8fd0\u884c\u7ed3\u675f\u540e\u624d\u4f1a\u5c06  <code>PC</code>  \u7f6e\u4e3a\u5b9e\u9645\u4e0a\u8981\u8df3\u8f6c\u7684\u6307\u4ee4\uff0c\u56e0\u6b64\u5982\u679c\u8981\u8df3\u8f6c\u7684\u8bdd\uff0c <code>#11</code> ,  <code>#12</code> ,  <code>#13</code>  \u8fd9\u4e09\u6761\u8bed\u53e5\u662f\u989d\u5916\u8fd0\u884c\u7684\uff1b\u5982\u679c\u4e0d\u7528\u8df3\u8f6c\u5c31\u4ec0\u4e48\u4e8b\u90fd\u6ca1\u6709\u4e86\uff1b</li> <li>\u4e0d\u5b58\u5728\u5176\u4ed6\u5f71\u54cd\u7ed3\u679c\u7684\u60c5\u51b5\u4e86\uff01</li> </ul> <p>\u5229\u7528\u8fd9\u4e9b\u89c4\u5f8b\uff0c\u6211\u4eec\u53ef\u4ee5\u7b80\u5316\u6211\u4eec\u7684\u89e3\u9898\u65b9\u5f0f\uff1a</p> <p>Reg: \u5230\u54ea\u4e00\u6b21\u6267\u884c\u7684 ID \u9636\u6bb5\u5f00\u59cb\uff0c\u8bfb\u51fa\u7684 Reg \u503c\u4f1a\u662f\u8be5\u503c PC: \u5230\u54ea\u4e00\u6b21\u6267\u884c \u4e4b\u540e\uff0cPC \u7684\u503c\u4f1a\u88ab\u6539\u4e3a\u8be5\u503c</p> <p></p>"},{"location":"ZJU_CS/computer_organization/4_processor/#43_exceptions","title":"4.3 Exceptions","text":"<p>Exception \u548c Interrupt \u5728\u5f88\u591a\u5730\u65b9\u662f\u4e0d\u4f5c\u533a\u5206\u7684\uff0c\u4f46\u662f\u6211\u4eec\u505a\u4e00\u4e2a\u7b80\u5355\u7684\u533a\u5206\uff1a</p> <p></p> <p>\u5f53 exception \u53d1\u751f\u65f6\uff0c\u5728 Supervisor Exception Program Counter, SEPC \u8fd9\u4e2a\u5bc4\u5b58\u5668\u4e2d\u4fdd\u5b58\u53d1\u751f exception \u7684\u6307\u4ee4\u5730\u5740\uff0c\u7136\u540e\u5c06\u63a7\u5236\u6743\u4ea4\u7ed9\u64cd\u4f5c\u7cfb\u7edf\u3002\u64cd\u4f5c\u7cfb\u7edf\u8fd8\u5fc5\u987b\u77e5\u9053\u53d1\u751f exception \u7684\u539f\u56e0\uff0cRISC-V \u4e2d\u4f7f\u7528\u7684\u65b9\u6cd5\u662f\u5728 Supervisor Exception Cause Register, SCAUSE \u8fd9\u4e2a\u5bc4\u5b58\u5668\u4e2d\u8bb0\u5f55 exception \u7684\u539f\u56e0\u3002\u53ef\u4ee5\u9009\u62e9\u7684\u53e6\u4e00\u79cd\u65b9\u6cd5\u662f vectored interrupt\uff0c</p>"},{"location":"ZJU_CS/computer_organization/5_cache/","title":"5 Cache","text":""},{"location":"ZJU_CS/computer_organization/5_cache/#51_memory_hierarchy_introduction","title":"5.1 Memory Hierarchy Introduction","text":"<p>\u4f17\u6240\u5468\u77e5\uff0c\u6307\u4ee4\u548c\u6570\u636e\u90fd\u9700\u8981\u5728 memory \u91cc\u624d\u80fd\u8bbf\u95ee\u3002\u800c\u8bbf\u95ee memory \u6bd4\u8f83\u6162\u3002</p> <p>\u5173\u6ce8\u5230\u7a0b\u5e8f\u5bf9 memory \u7684\u8bbf\u95ee\u6709\u5982\u4e0b\u7279\u70b9\uff1a</p> <ul> <li>Temporal locality, \u65f6\u95f4\u5c40\u90e8\u6027\uff0c\u5373\u8fd1\u671f\u8bbf\u95ee\u7684\u9879\u76ee\u5f88\u6709\u53ef\u80fd\u4f1a\u5728\u77ed\u65f6\u95f4\u5185\u518d\u6b21\u88ab\u8bbf\u95ee\u3002\u4f8b\u5982\u5faa\u73af\u4e2d\u7684\u6307\u4ee4\u3001induction variables (\u5faa\u73af\u4e2d\u7528\u6765\u8ba1\u6570\u7684\u53d8\u91cf) \u7b49</li> <li>Spatial locality, \u7a7a\u95f4\u5c40\u90e8\u6027\uff0c\u5373\u8fd1\u671f\u8bbf\u95ee\u9879\u76ee\u9644\u8fd1\u7684\u9879\u76ee\u4e5f\u6709\u53ef\u80fd\u4f1a\u5728\u77ed\u65f6\u95f4\u5185\u518d\u6b21\u88ab\u8bbf\u95ee\u3002\u4f8b\u5982\u8fde\u7eed\u7684\u6307\u4ee4\u6267\u884c\uff0c\u6216\u8005\u6570\u7ec4\u53d8\u91cf\u7b49</li> </ul> <p>\u56e0\u6b64\uff0c\u7ed3\u6784\u5316\u7684 memory \u88ab\u8bbe\u8ba1\u51fa\u6765\u3002\u8fd1\u671f\u8bbf\u95ee\u5230\u7684\u5185\u5b58\u5355\u5143\u548c\u5b83\u9644\u8fd1\u7684\u5185\u5bb9\u88ab\u590d\u5236\u4e00\u4efd\u653e\u5728\u79bb CPU \u66f4\u8fd1\u3001\u8bbf\u95ee\u66f4\u5feb\uff0c\u4f46\u4e5f\u66f4\u5c0f\u7684 cache \u4e2d\uff0c\u4ece\u800c\u5229\u7528\u4e0a\u8ff0\u5c40\u90e8\u6027\u52a0\u901f\u8bbf\u95ee\u3002</p> <p></p> <p>\u6211\u4eec\u79f0\u590d\u5236\u7684\u5355\u4f4d\u662f block \u6216\u8005 line\uff0c\u5b83\u901a\u5e38\u662f 2 \u7684\u82e5\u5e72\u6b21\u65b9\u4e2a word \u90a3\u4e48\u5927\uff08\u4e00\u4e2a word \u662f 4 Byte\uff09\u3002</p> <p>\u5982\u679c\u6211\u4eec\u5e0c\u671b\u8bbf\u95ee\u7684\u5185\u5b58\u5355\u5143 (\u5373\uff0c\u5b83\u6240\u5728\u7684 block) \u6070\u597d\u5728 cache \u4e2d\uff08\u4e4b\u524d\u67d0\u4e00\u6b21\u88ab\u642c\u4e0a\u6765\u4e86\uff09\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u4e00\u6b21 hit\uff0c\u8fd9\u65f6\u6211\u4eec\u53ea\u9700\u8981\u4ece\u4e2d\u8bfb\u51fa\u6765\u5c31\u53ef\u4ee5\u4e86\u3002\u5224\u65ad\u662f\u5426 hit\uff0c\u4ee5\u53ca\u8bfb\u51fa\u6765\u7684\u65f6\u95f4\u79f0\u4e3a hit time\u3002</p> <p>\u5982\u679c\u5e76\u4e0d\u5b58\u5728\uff0c\u79f0\u4e3a\u4e00\u6b21 miss\u3002\u5f53 cache miss \u65f6\uff0c\u6211\u4eec\u9700\u8981\u5148\u5c06\u5185\u5bb9\u6240\u5728\u7684 block \u4ece memory \u62ff\u5230 cache\uff0c\u7136\u540e\u518d\u5c06\u5185\u5bb9\u8bfb\u5230\u5904\u7406\u5668\uff1b\u8fd9\u4e2a\u8fc7\u7a0b\u82b1\u7684\u65f6\u95f4\u6210\u4e3a miss penalty\u3002</p> <p>\u5bf9\u5e94\u7684\u6709 hit / miss rate (\u4e5f\u79f0 ratio) \u7684\u6982\u5ff5\uff0c\u4e0d\u518d\u8d58\u8ff0\u3002</p> <p>Medium</p> <p>\u4e00\u4e2a\u6211\u8ba4\u4e3a\u8bb2\u8ff0\u7684\u975e\u5e38high level\u7684blog</p>"},{"location":"ZJU_CS/computer_organization/5_cache/#52_the_basics_of_cache","title":"5.2 The basics of Cache","text":"<p>\u4e0b\u9762\u6211\u4eec\u6765\u5177\u4f53\u8003\u8651 cache \u600e\u4e48\u5b9e\u73b0\u3002\u4e3b\u8981\u9700\u8981\u8ba8\u8bba\u7684\u95ee\u9898\u662f\uff1a\u5982\u4f55\u77e5\u9053\u4e00\u4e2a block \u662f\u5426\u5728 cache \u91cc\uff1f\u4ee5\u53ca\u5982\u679c\u77e5\u9053\u5b83\u5728\u7684\u8bdd\uff0c\u5982\u4f55\u627e\u5230\u5b83\uff1f</p>"},{"location":"ZJU_CS/computer_organization/5_cache/#531_direct_mapped_cache","title":"5.3.1 Direct Mapped Cache","text":"<p>\u5982\u4e0a\u56fe\u6240\u793a\uff0c\u5185\u5b58\u6709 32 \u4e2a block\uff0c\u5176\u7f16\u53f7 (block address) \u5206\u522b\u4e3a 00000 \u5230 11111\uff1bcache \u6709 8 \u4e2a block\u3002Direct mapped cache \u8fd9\u79cd\u65b9\u5f0f\u76f4\u63a5\u6309 block address \u7684\u540e 3 \u4f4d\u786e\u5b9a\u5b83\u5e94\u8be5\u653e\u5728 cache \u7684\u54ea\u4e2a block \u91cc\u3002</p> <p>\u5373\uff0c\u56fe\u4e0a\u7070\u8272\u7684 block \u7684\u7f16\u53f7\u672b 3 \u4f4d\u90fd\u662f 001\uff0c\u6240\u4ee5\u5c31\u5e94\u8be5\u653e\u5728 cache \u4e2d\u7f16\u53f7\u4e3a 001 \u7684\u7070\u8272 block \u91cc\uff1b\u6a59\u8272\u540c\u7406\u3002</p> <p>\u4e3a\u4ec0\u4e48\u662f\u4e09\u4f4d\u5462\uff1f\u5f88\u7b80\u5355\uff0c\u56e0\u4e3a cache \u6709 8 \u4e2a block \u7684\u8bdd\uff0c\u5176\u5bf9\u5e94\u7684\u5c31\u662f 3 \u4f4d\u4e8c\u8fdb\u5236\u6570\u3002\u6211\u4eec\u628a\u8fd9\u4e2a\u51b3\u5b9a\u6620\u5c04\u5173\u7cfb\u7684\u672b\u51e0\u4f4d\u79f0\u4e3a index\u3002\u540c\u7406\uff0c\u5982\u679c cache \u6709 64 \u4e2a block \u7684\u8bdd\uff0cindex \u5c31\u662f 6 \u4f4d\u3002Cache \u7684 block \u6570\u59cb\u7ec8\u662f 2 \u7684\u5e42\u6b21\u65b9\u3002</p> <p>\u90a3\u4e48\u6211\u4eec\u5982\u4f55\u786e\u5b9a\u653e\u5728 cache \u4e2d\u7f16\u53f7\u4e3a 001 \u7684\u4f4d\u7f6e\u7684 block \u7a76\u7adf\u662f 00001\uff0c\u8fd8\u662f 01001\uff0c\u8fd8\u662f\u5176\u4ed6\u7684\u54ea\u4e2a block \u5462\uff1f\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u5728 cache \u4e2d\u989d\u5916\u5b58\u653e\u8fd9\u4e2a block \u7684 block address \u6765\u77e5\u9053\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>\u5f53\u7136\uff0c\u5b9e\u9645\u4e0a\u6211\u4eec\u53ea\u9700\u8981\u5b58\u653e\u8fd9\u4e2a block address \u7684\u524d\u82e5\u5e72\u4f4d\uff0c\u56e0\u4e3a\u540e\u9762\u7684\u51e0\u4f4d\u5df2\u7ecf\u901a\u8fc7 index \u6765\u786e\u5b9a\u4e86\u3002\u4f8b\u5982\u56fe\u4e0a\u7684\u4f8b\u5b50\u4e2d\uff0c10001 \u5b58\u5728 index \u4e3a 001 \u7684 cache block \u4e2d\uff0c\u53ea\u9700\u8981\u989d\u5916\u5b58\u5f00\u5934\u7684 10 \u5373\u53ef\u3002\u6211\u4eec\u628a\u7528\u6765\u5224\u5b9a\u67d0\u4e2a cache block \u4e2d\u5230\u5e95\u5b58\u7684\u662f\u54ea\u4e2a memory block \u7684\u8fd9\u51e0\u4f4d\u79f0\u4e3a tag\u3002</p> <p>\u4e0b\u4e00\u4e2a\u95ee\u9898\u662f\uff0c\u5982\u4f55\u786e\u5b9a cache \u4e2d\u7684\u8fd9\u4e2a block \u662f\u5426\u6709\u6548\u5462\uff1f\u4e5f\u5c31\u662f\u8bf4\uff0c\u4efb\u4f55\u65f6\u5019\u8fd9\u4e2a block \u4e2d\u603b\u6709\u4e00\u4e2a\u503c\uff0c\u4f46\u662f\u5047\u8bbe\u8fd9\u4e2a\u503c\u662f\u542f\u52a8\u7684\u65f6\u5019\u81ea\u5e26\u7684\uff0c\u90a3\u4e48\u8bbf\u95ee\u5b83\u5c31\u4f1a\u53d1\u751f\u9519\u8bef\uff0c\u56e0\u4e3a\u5b83\u5b9e\u9645\u4e0a\u5e76\u4e0d\u662f\u5bf9\u5e94\u7684 memory block \u7684\u503c\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u5f15\u5165\u4e00\u4e2a valid bit \u6765\u8868\u793a\u8fd9\u4e2a block \u662f\u5426\u6709\u6548\uff1b\u521d\u59cb\u503c\u4e3a 0 \u8868\u793a\u65e0\u6548\uff0c\u5f53\u6709\u4e00\u6b21\u5c06 memory \u7684\u4e00\u4e2a block \u62ff\u8fdb\u6765\u4e4b\u540e\u5c31\u5c06\u5176\u7f6e\u4e3a 1\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0ccache hit \u5f53\u4e14\u4ec5\u5f53 valid bit \u662f 1 \u800c\u4e14 tag \u662f\u4e00\u81f4\u7684\u3002</p> <p>\u6211\u4eec\u5728\u5185\u5b58\u4e2d\u7684\u5730\u5740\u90fd\u662f\u4ee5\u5b57\u8282\u4e3a\u5355\u4f4d\u7684\uff0c\u800c\u4e0a\u9762\u6211\u4eec\u8ba8\u8bba\u7684 block address \u90fd\u662f\u4ee5 block \u4e3a\u5355\u4f4d\u7684\uff0c\u8fd9\u4e24\u8005\u4e4b\u95f4\u6709\u4ec0\u4e48\u6837\u7684\u5173\u7cfb\u5462\uff1f\u975e\u5e38\u7b80\u5355\uff0c\u7531\u4e8e\u4e00\u4e2a block \u603b\u662f 2 \u7684\u82e5\u5e72\u6b21\u65b9\u4e2a word \u90a3\u4e48\u5927\uff0c \u800c\u6bcf\u4e2a word \u662f 4 Byte\uff0c\u56e0\u6b64\u6bcf\u4e2a block \u7684 byte \u6570\u4e5f\u662f 2 \u7684\u82e5\u5e72\u6b21\u65b9\u3002\u56e0\u6b64\uff0c\u6211\u4eec\u53ea\u9700\u8981\u53bb\u6389 byte address \u7684\u540e\u51e0\u4f4d\uff0c\u5c31\u53ef\u4ee5\u83b7\u5f97\u5b83\u7684 block address \u4e86\u3002\u8fd9\u6837\u76f8\u90bb\u7684 2 \u7684\u82e5\u5e72\u6b21\u65b9\u4e2a byte \u5c31\u4f1a\u805a\u5408\u6210\u4e00\u4e2a block \u4e86\uff0c\u56e0\u4e3a\u5b83\u4eec\u7684 byte address \u7684\u524d\u82e5\u5e72\u4f4d\uff0c\u5373 block address\uff0c\u662f\u76f8\u540c\u7684\u3002</p> <p>\u6279\u6ce8</p> <p>\u8fd9\u91cc\u7684\u903b\u8f91\u5176\u5b9e\u662f\u975e\u5e38\u975e\u5e38\u6e05\u6670\u7684\uff0c\u4e4b\u524d\u7684\u4f5c\u8005\u5199\u7684\u7a0d\u5fae\u6709\u70b9\u70b9\u7ed5\uff1f\u4f46\u6211\u89c9\u5f97\u8ba1\u7ec4\u8fd9\u4e2a\u8bfe\u8bf4\u767d\u4e86\u5c31\u662f\u628a\u81ea\u5df1\u7684\u601d\u60f3\u5b9e\u73b0\u51fa\u6765\uff1b\u8fd9\u91ccbonus\u5efa\u8bae\u5927\u5bb6\u5b8c\u6210\u56db\u5206\u7684\u91cf\uff08\u7b2c\u4e94\u5206\u8981\u5408\u5230cpu\u91cc\u9700\u8981\u8003\u8651\u65f6\u5e8f\u7684\u95ee\u9898\u7684\uff09\uff0c\u6709\u52a9\u4e8e\u4f60\u7406\u89e3\u548c\u68b3\u7406\u903b\u8f91\u7684\u3002</p> <p>\u4e5f\u5c31\u662f\u8bf4\uff0c\u6211\u4eec\u5c06 byte address \u5206\u4e3a 2 \u4e2a\u90e8\u5206\uff1ablock address \u548c byte offset\uff0c\u5373\u6240\u5728 block \u7684\u7f16\u53f7\u4ee5\u53ca\u5728 block \u4e2d\u7684\u504f\u79fb\u91cf (in byte)\uff1b\u800c block address \u53c8\u5206\u4e3a\u4e86\u4e24\u4e2a\u90e8\u5206\uff0c\u5373 tag \u548c index\u3002\u5373\uff1a</p> <p></p> <p>\u800c\u5728 cache \u4e2d\uff0c\u6211\u4eec\u5b58\u50a8\u4ee5\u4e0b\u4fe1\u606f\uff1a</p> <p></p> <p>\u5373\uff0c\u6bcf\u4e2a cache block \u6709\u4e00\u4e2a index\uff0c\u5f53\u51fa\u73b0\u4e00\u6b21 miss \u540e\u4ece\u5185\u5b58\u4e2d\u62ff\u6240\u9700\u5185\u5b58\u8986\u76d6\u5230\u5bf9\u5e94\u7684 index \u6761\u76ee\u4e0a\u7684 data \u5b57\u6bb5\uff0c\u5c06 tag \u8bbe\u4e3a block address \u7684\u524d\u51e0\u4f4d\uff0c\u5c06 valid bit \u8bbe\u4e3a 1\u3002</p> \u4f8b 5.1 Direct Mapped Cache \u7684\u586b\u5145\u548c\u66ff\u6362 <p>\u4e0b\u9762\u662f\u4e00\u4e2a\u5177\u4f53\u7684\u4f8b\u5b50\uff1a</p> <p></p> \u4f8b 5.2 Direct Mapped Cache \u7684\u4f4d\u6570\u8ba1\u7b97\u548c\u8fde\u7ebf\u65b9\u5f0f <p>\u53c8\u4f8b\u5982\uff0c\u5bf9\u4e8e\u4e00\u4e2a 64 \u4f4d\u5730\u5740\u7684\u673a\u5668\uff0ccache \u7684\u5927\u5c0f\u4e3a 1024 \u4e2a block\uff0c\u4e00\u4e2a block \u6709 1 \u4e2a word\uff0c\u5373 4 \u4e2a byte\uff0c\u90a3\u4e48 index \u7684\u4f4d\u6570\u5c31\u662f \\(\\log_2 1024 = 10\\)\uff0cbyte offset \u7684\u4f4d\u6570\u5c31\u662f \\(\\log_2 4 = 2\\)\uff0c\u56e0\u6b64 tag \u7684\u4f4d\u6570\u5c31\u662f \\(64 - 10 - 2 = 52\\)\uff1b\u53e6\u5916\u4e00\u4e2a block \u7684\u5927\u5c0f\u662f 4 \u4e2a byte\uff0c\u5373 32 \u4f4d\uff0c\u56e0\u6b64\u4e00\u4e2a cache \u7684\u6761\u76ee\u7684\u4f4d\u6570\u5c31\u662f valid bit 1 \u4f4d + tag 52 \u4f4d + word 32 \u4f4d = 85 \u4f4d\u3002</p> <p>\uff08index \u5e76\u4e0d\u9700\u8981\u5728\u8fd9\u91cc\u88ab\u8ba1\u7b97\uff0c\u56e0\u4e3a index \u4e4b\u4e8e cache \u5c31\u50cf address \u4e4b\u4e8e main memory \u4e00\u6837\uff0c\u662f\u76f4\u63a5\u7528\u6765\u8bbf\u95ee\u7684\uff09</p> <p>\u4ea6\u5373\uff1a</p> <p></p> <p>\u5f53\u7136\uff0c\u5982\u6211\u4eec\u4e4b\u524d\u6240\u8bf4\uff0c\u4e00\u4e2a block \u6709\u53ef\u80fd\u5305\u542b\u591a\u4e2a word\uff0c\u800c\u6bcf\u6b21\u5b9e\u9645\u4e0a\u53ea\u4f1a\u8bbf\u95ee\u51fa\u4e00\u4e2a word\u3002\u56e0\u6b64\u8fd9\u65f6\u6211\u4eec\u8fd8\u9700\u8981\u5728 block \u4e2d\u9009\u62e9\u5bf9\u5e94\u7684 word\uff0c\u8fd9\u65f6\u5019\u6211\u4eec\u5c31\u53ef\u4ee5\u5c06 byte offset \u8fdb\u4e00\u6b65\u7ec6\u5206\u6210\u8868\u793a block \u4e2d\u67d0\u4e2a word \u7684 block offset\uff08\u4e3a\u4ec0\u4e48\u4e0d\u53eb word offset \u5462\uff1f\uff09\uff0c\u4ee5\u53ca\u8868\u793a word \u4e2d\u67d0\u4e2a byte \u7684 byte offset\uff1a</p> <p></p> <p>\u5373\uff0c\u5bf9\u8fd9\u4e2a\u56fe\u4e2d\u7684\u60c5\u5f62\uff0c\u5730\u5740\u662f 32 \u4f4d\u7684\uff0c\u4e00\u4e2a block \u6709 16 \u4e2a word\uff0c\u6709 256 \u4e2a cache entry\u3002\u56e0\u6b64 byte offset \u7684\u4f4d\u6570\u662f \\(\\log_2 4 = 2\\)\uff0cblock offset \u7684\u4f4d\u6570\u662f \\(\\log_2 16 = 4\\)\uff0cindex \u7684\u4f4d\u6570\u662f \\(\\log_2 256 = 8\\)\uff0ctag \u7684\u4f4d\u6570\u662f \\(32-8-4-2=18\\)\uff0c\u4e00\u4e2a cache entry \u7684\u957f\u5ea6\u662f valid bit 1 \u4f4d + tag 18 \u4f4d + data 16 word * 4 byte/word * 8 bit/byte = 531 \u4f4d\u3002</p> \u4f8b 5.3 Direct Mapped Cache \u7684\u4f4d\u6570\u8ba1\u7b97 <p>\u518d\u4f8b\u5982\uff1a</p> <p></p>"},{"location":"ZJU_CS/computer_organization/5_cache/#532_handling_cache_hits_misses","title":"5.3.2 Handling Cache Hits &amp; Misses","text":"<p>\u663e\u7136\uff0c\u8bfb\u548c\u5199\u7684\u65f6\u5019\u53d1\u751f cache miss \u7684\u5904\u7406\u65b9\u5f0f\u662f\u4e0d\u4e00\u6837\u7684\uff1b\u53e6\u5916\u8bfb\u4e5f\u6709\u8bfb\u6570\u636e\u548c\u8bfb\u6307\u4ee4\u4e4b\u5206\uff08\u6307\u4ee4 cache \u548c\u6570\u636e cache \u901a\u5e38\u662f\u5206\u79bb\u7684\uff09\u3002\u6211\u4eec\u5206\u522b\u5bf9\u5176\u8fdb\u884c\u8ba8\u8bba\uff1a</p> <ul> <li>Read<ul> <li>Hit<ul> <li>\u76f4\u63a5\u4ece cache \u91cc\u8bfb\u5c31\u597d\u4e86</li> </ul> </li> <li>Miss<ul> <li>Data cache miss<ul> <li>\u4ece memory \u91cc\u628a\u5bf9\u5e94\u7684 block \u62ff\u5230 cache\uff0c\u7136\u540e\u8bfb\u53d6\u5bf9\u5e94\u7684\u5185\u5bb9\u3002</li> </ul> </li> <li>Instruction cache miss<ul> <li>\u6682\u505c CPU \u8fd0\u884c\uff0c\u4ece memory \u91cc\u628a\u5bf9\u5e94\u7684 block \u62ff\u5230 cache\uff0c\u4ece\u7b2c\u4e00\u4e2a step \u5f00\u59cb\u91cd\u65b0\u8fd0\u884c\u5f53\u524d\u8fd9\u6761\u6307\u4ee4\u3002</li> </ul> </li> </ul> </li> </ul> </li> <li>Write<ul> <li>Hit \u6709\u4e24\u79cd\u53ef\u4ee5\u9009\u7684\u65b9\u5f0f\uff1a<ul> <li>write-through\uff0c\u5373\u6bcf\u6b21\u5199\u6570\u636e\u65f6\uff0c\u65e2\u5199\u5728 cache\uff0c\u4e5f\u5199\u5728 main memory\u3002\u8fd9\u6837\u7684\u597d\u5904\u662f cache \u548c main memory \u603b\u662f\u4e00\u81f4\u7684\uff0c\u4f46\u662f\u8fd9\u6837\u5f88\u6162\u3002<ul> <li>\u4e00\u4e2a\u6539\u8fdb\u662f\u5f15\u5165\u4e00\u4e2a write buffer\uff0c\u5373\u5f53\u9700\u8981\u5199 main memory \u7684\u65f6\u5019\u4e0d\u662f\u7acb\u5373\u53bb\u5199\uff0c\u800c\u662f\u52a0\u5165\u5230\u8fd9\u4e2a\u961f\u5217\u4e2d\uff0c\u627e\u673a\u4f1a\u5199\u8fdb\u53bb\uff1b\u6b64\u65f6 CPU \u5c31\u53ef\u4ee5\u7ee7\u7eed\u8fd0\u884c\u4e86\u3002\u5f53\u7136\uff0c\u5f53 write buffer \u6ee1\u4e86\u7684\u65f6\u5019\uff0c\u4e5f\u9700\u8981\u6682\u505c\u5904\u7406\u5668\u6765\u505a\u5199\u5165 main memory \u7684\u5de5\u4f5c\uff0c\u76f4\u5230 buffer \u4e2d\u6709\u7a7a\u95f2\u7684 entry\u3002\u56e0\u6b64\uff0c\u5982\u679c main memory \u7684\u5199\u5165\u901f\u7387\u4f4e\u4e8e CPU \u4ea7\u751f\u5199\u64cd\u4f5c\u7684\u901f\u7387\uff0c\u591a\u5927\u7684\u7f13\u51b2\u90fd\u65e0\u6d4e\u4e8e\u4e8b\u3002</li> </ul> </li> <li>write-back\uff0c\u53ea\u5c06\u4fee\u6539\u7684\u5185\u5bb9\u5199\u5728 cache \u91cc\uff0c\u7b49\u5230\u8fd9\u4e2a block \u8981\u88ab\u8986\u76d6\u6389\u7684\u65f6\u5019\u5c06\u5176\u5199\u56de\u5185\u5b58\u3002\u8fd9\u79cd\u60c5\u51b5\u9700\u8981\u4e00\u4e2a\u989d\u5916\u7684 dirty bit \u6765\u8bb0\u5f55\u8fd9\u4e2a cache block \u662f\u5426\u88ab\u66f4\u6539\u8fc7\uff0c\u4ece\u800c\u76f4\u5230\u88ab\u8986\u76d6\u524d\u662f\u5426\u9700\u8981\u88ab\u5199\u56de\u5185\u5b58\u3002\u7531\u4e8e\u5bf9\u540c\u4e00\u4e2a block \u901a\u5e38\u4f1a\u6709\u591a\u6b21\u5199\u5165\uff0c\u56e0\u6b64\u8fd9\u79cd\u65b9\u5f0f\u6d88\u8017\u7684\u603b\u5e26\u5bbd\u662f\u66f4\u5c0f\u7684\u3002</li> </ul> </li> <li>Miss \u540c\u6837\u6709\u4e24\u79cd\u65b9\u5f0f\uff1a<ul> <li>write allocate\uff0c\u5373\u50cf read miss \u4e00\u6837\u5148\u628a block \u62ff\u5230 cache \u91cc\u518d\u5199\u5165\u3002</li> <li>write around (or no write allocate)\uff0c\u8003\u8651\u5230\u65e2\u7136\u672c\u6765\u5c31\u8981\u53bb\u4e00\u6b21 main memory\uff0c\u4e0d\u5982\u76f4\u63a5\u5728\u91cc\u9762\u5199\u4e86\uff0c\u5c31\u4e0d\u518d\u62ff\u5230 cache \u91cc\u4e86\u3002</li> <li>write-back \u53ea\u80fd\u4f7f\u7528 write allocate\uff1b\u4e00\u822c\u6765\u8bf4\uff0cwrite-through \u4f7f\u7528 write around\uff0c\u5176\u539f\u56e0\u662f\u660e\u663e\u7684\u3002</li> </ul> </li> </ul> </li> </ul>"},{"location":"ZJU_CS/computer_organization/5_cache/#533","title":"5.3.3 \u5176\u4ed6\u5b9a\u4f4d\u65b9\u5f0f","text":"<p>\u5728 5.3.1 \u4e2d\uff0c\u6211\u4eec\u8ba8\u8bba\u4e86\u6700\u7b80\u5355\u7684\u6620\u5c04\u65b9\u5f0f\uff0c\u5373\u76f4\u63a5\u6620\u5c04\uff1a\u5bf9\u4e8e\u4efb\u4e00\u7ed9\u5b9a\u7684 block address\uff0c\u6709\u4e14\u4ec5\u6709\u4e00\u4e2a cache block \u53ef\u4f9b\u5b83\u5b58\u653e\u3002\u5b9e\u9645\u4e0a\uff0c\u8fd8\u6709\u4e00\u4e9b\u5176\u4ed6\u7684\u6620\u5c04\u65b9\u5f0f\u3002</p> <p>Fully associative\uff0c\u7b80\u5355\u6765\u8bf4\u5c31\u662f block can go anywhere in cache\u3002\u8fd9\u79cd\u65b9\u5f0f\u7684\u597d\u5904\u662f\u53ef\u4ee5\u964d\u4f4e miss rate\uff0c\u574f\u5904\u662f\u6bcf\u6b21\u9700\u8981\u8ddf\u6240\u6709 block \u6bd4\u8f83\u662f\u5426 hit\uff1a</p> <p></p> <p>\u8fd9\u79cd\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u9700\u8981\u989d\u5916\u8ba8\u8bba\u66ff\u6362\u65f6\u91c7\u7528\u4ec0\u4e48\u6837\u7684\u7b56\u7565\uff1b\u5373\uff1a\u66ff\u6362\u54ea\u4e00\u5757\u3002\u901a\u5e38\u6709\u4e09\u79cd\u7b56\u7565\uff1a</p> <ul> <li>Random replacement\uff0c\u968f\u673a\u6311\u9009\u4e00\u4e2a\u5e78\u8fd0 block \u8986\u76d6\u6389\uff08\u9700\u8981\u4e00\u4e2a\u968f\u673a\u6570\u751f\u6210\u5668\uff09</li> <li>LRU, Least Recently Used\uff0c\u9009\u62e9\u4e0a\u4e00\u6b21\u4f7f\u7528\u65f6\u95f4\u8ddd\u79bb\u73b0\u5728\u6700\u8fdc\u7684\u90a3\u4e2a block \u8986\u76d6\u6389\uff08\u9700\u8981\u4e00\u4e9b\u989d\u5916\u7684\u4f4d\u7528\u6765\u8bb0\u5f55\u4fe1\u606f\uff0c\u5177\u4f53\u5b9e\u73b0\u6ca1\u6709\u8bb2\uff09</li> <li>FIFO, First In First Out\uff0c\u9009\u62e9\u8fdb\u5165\u65f6\u95f4\u6700\u65e9\u7684 block \u8986\u76d6\u6389\uff08\u540c\u6837\u9700\u8981\u4e00\u4e9b\u989d\u5916\u7684\u4f4d\u8bb0\u5f55\u4fe1\u606f\uff0c\u540c\u6837\u6ca1\u8bb2\u5177\u4f53\u5b9e\u73b0\uff09</li> </ul> <p>\u4ecb\u4e8e direct mapping \u548c fully associative \u4e4b\u95f4\u7684\u662f set associative\uff0c\u5373\u6bcf\u4e2a block \u4ecd\u7136\u4f1a\u6839\u636e\u5176 address \u786e\u5b9a\u5176\u53ef\u4ee5\u5b58\u653e\u7684 cache block\uff0c\u4f46\u662f\u53ef\u4ee5\u653e\u7684\u5730\u65b9\u5e76\u4e0d\u662f\u4e00\u4e2a\uff0c\u800c\u662f\u4e00\u7ec4\u3002\u5373\uff1a</p> <p></p> <p>\u6700\u53f3\u8fb9\u662f\u4e00\u4e2a 2-way set-associative \u7684\u4f8b\u5b50\uff0c\u6bcf\u4e2a\u5730\u5740\u5bf9\u5e94 cache \u4e2d\u7684\u4e00\u7ec4\uff0c\u5728\u8fd9\u91cc\u4e00\u7ec4\u6709\u4e24\u4e2a cache block\u3002\u56e0\u6b64\u5728\u8bbf\u95ee\u65f6\u4e5f\u9700\u8981\u5206\u522b\u6bd4\u8f83\u8fd9\u4e24\u4e2a block \u662f\u5426 hit\u3002\u5728\u66ff\u6362\u65f6\u4e5f\u9700\u8981\u51b3\u5b9a\u66ff\u6362\u54ea\u4e00\u5757\uff0c\u4e5f\u53ef\u4ee5\u4f7f\u7528\u524d\u8ff0\u7684\u4e09\u4e2a\u7b56\u7565\u4e2d\u7684\u4e00\u4e2a\u5b9e\u73b0\u3002</p> <p>\u76f8\u4f3c\u5730\uff0c\u4e00\u4e2a 4-way set-associative \u7684\u8bbf\u95ee\u4e2d\u5224\u65ad hit \u548c\u83b7\u53d6 data \u7684\u8fde\u7ebf\u5982\u4e0b\uff1a</p> <p></p> <p>\u6240\u4ee5\uff0c\u4e8b\u5b9e\u4e0a\uff0cdirect mapping \u548c fully associative \u5176\u5b9e\u90fd\u662f set associative \u7684\u7279\u4f8b\uff1adirect mapping \u5176\u5b9e\u5c31\u662f 1-way set associative\uff0c\u800c fully associative \u5c31\u662f n-way set associative\uff0c\u5176\u4e2d n \u662f cache block \u7684\u4e2a\u6570\uff1b\u6211\u4eec\u79f0\u4e00\u7ec4\u7684\u5927\u5c0f\u4e3a associativity\uff0c\u90a3\u4e48\u8fd9\u4e24\u79cd\u65b9\u6cd5\u7684 associativity \u5c31\u5206\u522b\u662f 1 \u548c n\u3002</p> <p>\u663e\u7136\uff0c\u5728\u67e5\u770b\u6240\u9700 block \u662f\u5426\u5728 cache \u4e2d\u65f6\uff0c\u9700\u8981\u8bbf\u95ee\u7684 cache block \u4e2a\u6570\u5c31\u7b49\u4e8e associativity\uff0c\u5373\uff1a</p> <p></p> \u4f8b 5.4 Set associative \u7684\u4f4d\u6570\u8ba1\u7b97 <p>\u5df2\u77e5 Cache size is 4K Block, Block size is 4 words, Physical address is 32bits\uff0c\u6c42 direct-mapped, 2-way associative, 4-way associative, fully associative \u65f6 tag \u548c index \u7684\u4f4d\u6570\u3002</p> <p>\u5373\u6c42 associativity \u4e3a 1, 2, 4 \u548c 4096 \u65f6 tag \u548c index \u7684\u4f4d\u6570\u3002</p> <p>\u6211\u4eec\u77e5\u9053\uff0c\u5728 direct-mapped \u4e2d index \u662f\u7528\u6765\u786e\u5b9a memory block \u653e\u5728\u54ea\u4e2a cache block \u4e2d\u7684\uff0c\u90a3\u4e48\u5728 set-associative \u4e2d\uff0cindex \u5c31\u662f\u7528\u6765\u786e\u5b9a\u653e\u5728\u54ea\u4e2a set \u4e2d\u7684\u3002\u56e0\u6b64\uff0cindex \u7684\u4f4d\u6570\u5c31\u5bf9\u5e94\u7740 set \u7684\u4e2a\u6570\uff0c\u5373\uff1a</p> \\[\\text{index}_\\# = \\log_2(\\text{set}_\\#) = \\log_2\\frac{\\text{cache block}_\\#}{\\text{associativity}}\\] <p>\u56e0\u6b64 associativity \u4e3a 1, 2, 4, 4096 \u65f6\uff0cindex \u7684\u4f4d\u6570\u5206\u522b\u662f 12, 11, 10, 0\u3002</p> <p>\u7531\u4e8e block size \u4e3a 4 words\uff0c\u5373 16 Bytes\uff0c\u56e0\u6b64 byte offset \u9700\u8981 4 \u4f4d\uff08\u6216\u8005\uff0c\u5177\u4f53\u5730\u8bf4\uff0cblock offset 2 \u4f4d\uff0cbyte offset 2 \u4f4d\uff09\u3002\u6240\u4ee5\u5269\u4e0b\u7684\u90fd\u662f tag \u4e86\uff0c\u56e0\u6b64 tag \u7684\u4f4d\u6570\u5206\u522b\u662f 16, 17, 18, 28\u3002</p> 18 - 19 Final <p></p> <p></p> \u7b54\u6848 <p></p>"},{"location":"ZJU_CS/computer_organization/5_cache/#53_measuring_cache_performance","title":"5.3 Measuring Cache Performance","text":"<p>\u518d\u8bf4\u5427</p>"},{"location":"ZJU_CS/computer_organization/5_cache/#54_virtual_machines","title":"5.4 Virtual Machines","text":"<p>\u5148\u4e0d\u5b66\u4e86</p>"},{"location":"ZJU_CS/computer_organization/5_cache/#55_virtual_memory","title":"5.5 Virtual Memory","text":""},{"location":"ZJU_CS/computer_organization/5_cache/#551","title":"5.5.1 \u865a\u62df\u5185\u5b58\u6280\u672f","text":"<p>\u8ba1\u7ec4\u628a main memory \u63cf\u8ff0\u4e3a secondary storage (\u5373 disk) \u7684 \"cache\"\u3002\u6216\u8005\uff0c\u53cd\u8fc7\u6765\u8bf4\uff0c\u6211\u4eec\u628a\u90a3\u4e9b\u5728 main memory \u91cc\u653e\u4e0d\u4e0b\u7684\u5185\u5bb9\u5b58\u5230 disk \u91cc\uff08\u8fd9\u6837\u66f4\u80fd\u7b26\u5408\u6211\u4eec\u719f\u6089\u7684\u201c\u53ef\u6267\u884c\u6587\u4ef6\u5fc5\u987b\u52a0\u8f7d\u5230\u5185\u5b58\u624d\u80fd\u8fd0\u884c\u201d\u7684\u4e00\u8d2f\u8ba4\u77e5\uff09\u3002\u8fd9\u79cd\u6280\u672f\u79f0\u4e3a virtual memory\u3002</p> <p>\u865a\u62df\u5185\u5b58\u6280\u672f\u53ef\u4ee5\u8ba9\u591a\u4e2a\u7a0b\u5e8f\u4e4b\u95f4\u9ad8\u6548\u3001\u5b89\u5168\u5730\u5171\u4eab\u5185\u5b58\uff0c\u540c\u65f6\u5141\u8bb8\u5355\u4e2a\u7a0b\u5e8f\u4f7f\u7528\u8d85\u8fc7\u5185\u5b58\u5bb9\u91cf\u7684\u5185\u5b58\uff08\u6b63\u5982\u867d\u7136 CPU \u53d6\u6570\u636e\u65f6\u662f\u4ece cache \u4e2d\u53d6\u7684\uff0c\u4f46\u662f\u5b83\u80fd\u8bbf\u95ee\u5230\u7684\u6570\u636e\u7684\u6570\u76ee\u6bd4 cache \u7684\u5bb9\u91cf\u8981\u5927\uff09\u3002\u5728\u8fdc\u53e4\u65f6\u671f\uff0c\u5f88\u591a\u7a0b\u5e8f\u56e0\u4e3a\u9700\u8981\u4f7f\u7528\u8fc7\u5927\u7684\u5185\u5b58\u800c\u65e0\u6cd5\u88ab\u8fd0\u884c\uff1b\u4f46\u73b0\u5728\u7531\u4e8e\u865a\u62df\u5185\u5b58\u6280\u672f\u7684\u5e7f\u6cdb\u4f7f\u7528\uff0c\u8fd9\u4e9b\u7a0b\u5e8f\u90fd\u4e0d\u6210\u95ee\u9898\u4e86\u3002</p> <p>\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u5b9e\u9645\u4e0a\u7684 main memory\uff08\u6211\u4eec\u79f0\u4e4b\u4e3a \u7269\u7406\u5185\u5b58, physical memory\uff09\u4e2d\u7684\u5730\u5740\u79f0\u4e3a \u7269\u7406\u5730\u5740, physical addresses\uff1b\u800c\u6211\u4eec\u7ed9\u6bcf\u4e00\u4e2a\u7a0b\u5e8f\u5185\u90e8\u4f7f\u7528\u5230\u7684\u5185\u5b58\u53e6\u5916\u7f16\u4e00\u5957\u5730\u5740\uff0c\u79f0\u4e3a \u865a\u62df\u5730\u5740, virtual addresses\uff1b\u865a\u62df\u5185\u5b58\u6280\u672f\u8d1f\u8d23\u4e86\u8fd9\u4e24\u4e2a\u5730\u5740\u4e4b\u95f4\u7684\u8f6c\u6362 (address translation\uff0c\u6211\u4eec\u7a0d\u540e\u518d\u8ba8\u8bba\u8f6c\u6362\u7684\u65b9\u5f0f)\uff1a</p> <p></p> <p>\u4ece\u8fd9\u5f20\u56fe\u4e2d\u6211\u4eec\u4e5f\u53ef\u4ee5\u5f88\u5bb9\u6613\u5730\u770b\u51fa\u201c\u865a\u62df\u5185\u5b58\u6280\u672f\u53ef\u4ee5\u5141\u8bb8\u5355\u4e2a\u7a0b\u5e8f\u8bbf\u95ee\u8d85\u8fc7\u7269\u7406\u5185\u5b58\u5927\u5c0f\u9650\u5236\u7684\u5185\u5b58\u201d\u7684\u539f\u56e0\uff0c\u5373\u6709\u4e00\u4e9b\u5185\u5b58\u53ef\u4ee5\u88ab\u4e34\u65f6\u5730\u5b58\u653e\u5728\u78c1\u76d8\u4e0a\uff0c\u5230\u88ab\u8bbf\u95ee\u7684\u65f6\u5019\u518d\u88ab\u653e\u5230 physical memory \u4e2d\uff0c\u5c31\u50cf cache \u505a\u7684\u90a3\u6837\u3002</p> <p>\u4ece\u8fd9\u5f20\u56fe\u4e2d\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u6ce8\u610f\u5230 physical memory \u7684\u5b58\u653e\u5e76\u6ca1\u6709\u5206\u7ec4\u7684\u6982\u5ff5\uff0c\u5373\u7528 cache \u7684\u672f\u8bed\u6765\u8bf4\uff0cmain memory \u662f fully-associative \u7684\u3002</p> <p>\u865a\u62df\u5b58\u50a8\u7684\u6280\u672f\u548c cache \u7684\u539f\u7406\u662f\u4e00\u6837\u7684\uff0c\u4f46\u662f\u4e00\u4e9b\u672f\u8bed\u7684\u540d\u5b57\u5e76\u4e0d\u76f8\u540c\u3002\u5bf9\u5e94\u4e8e cache \u4e2d\u7684 block / line\uff0c\u865a\u62df\u5b58\u50a8\u7684\u5185\u5b58\u5355\u5143\u79f0\u4e3a page\uff0c\u5f53\u6211\u4eec\u8981\u8bbf\u95ee\u7684 page \u4e0d\u5728\u4e3b\u5b58\u4e2d\u800c\u662f\u5728\u78c1\u76d8\u91cc\uff0c\u4e5f\u5c31\u662f miss\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a\u4e00\u6b21 page fault\u3002</p> Info <p>\u5728\u4e00\u4e9b\u5730\u65b9\uff0cvirtual page \u79f0\u4e3a page\uff0cphysical page \u79f0\u4e3a \u5e27, frame\uff1b\u6211\u4eec\u7684\u8bfe\u672c\u5e76\u672a\u91c7\u7528\u8fd9\u79cd\u79f0\u547c\u3002\u4f46\u65e0\u8bba\u5982\u4f55\uff0c\u5728\u770b\u5230\u5355\u72ec\u51fa\u73b0\u7684 page \u65f6\uff0c\u5e94\u5f53\u53c2\u8003\u4e0a\u4e0b\u6587\u5224\u65ad\u5b83\u662f virtual \u8fd8\u662f physical\u3002</p> <p>\u5728\u4e00\u4e9b\u5730\u65b9\uff0cvirtual address \u4e5f\u88ab\u79f0\u4e3a logical address\u3002</p>"},{"location":"ZJU_CS/computer_organization/5_cache/#552","title":"5.5.2 \u5982\u4f55\u5b8c\u6210\u6620\u5c04\u5462","text":"<p>\u9996\u5148\u6211\u4eec\u8981\u8003\u8651\u7684\u4e00\u4e2a\u95ee\u9898\u5c31\u662f\uff0c\u4e00\u4e2a page \u5e94\u8be5\u6709\u591a\u5927\u3002\u6211\u4eec\u77e5\u9053\uff0c\u8bbf\u95ee\u78c1\u76d8\u76f8\u6bd4\u4e8e\u8bbf\u95ee\u5185\u5b58\u662f\u975e\u5e38\u6162\u7684\uff08\u76f8\u5dee\u5927\u7ea6\u5341\u4e07\u500d\uff09\uff0c\u8fd9\u4e2a\u4e3b\u8981\u65f6\u5ef6\u6765\u81ea\u4e8e\u78c1\u76d8\u8f6c\u5230\u6b63\u786e\u7684\u4f4d\u7f6e\u4e0a\u7684\u65f6\u95f4\u82b1\u8d39\uff1b\u6240\u4ee5\u6211\u4eec\u5e0c\u671b\u4e00\u6b21\u8bfb\u8fdb\u6765\u591a\u4e00\u70b9\u4ece\u800c\u6765\u5206\u644a\u8fd9\u4e2a\u8bbf\u95ee\u65f6\u95f4\u3002\u5178\u578b\u7684 page \u5927\u5c0f\u4ece 4KiB ~ 64KiB \u4e0d\u7b49\u3002</p> <p>\u4e0b\u9762\u6211\u4eec\u8003\u8651\u6620\u5c04\u5173\u7cfb\u3002\u6211\u4eec\u4e0d\u59a8\u5047\u8bbe\u4e00\u4e2a page \u7684\u5927\u5c0f\u662f 4KiB\uff0c\u90a3\u4e48\u5176\u9875\u5185\u7684\u504f\u79fb page offset \u5c31\u9700\u8981 12 \u4f4d\u6765\u8868\u793a\uff1b\u90a3\u4e48\u7269\u7406\u5730\u5740\u4e2d\u9664\u53bb\u540e 12 \u4f4d\u4ee5\u5916\u524d\u9762\u7684\u90e8\u5206\u5c31\u8868\u5f81\u7740\u5b83\u662f\u5c5e\u4e8e\u54ea\u4e00\u9875\u7684\uff0c\u6211\u4eec\u79f0\u4e4b\u4e3a physical page number\u3002</p> Info <p>\u5982\u6211\u4eec\u4e4b\u524d\u6240\u8bf4\uff0cmemory \u4f5c\u4e3a disk \u7684 \"cache\" \u662f fully-associative \u7684\uff0c\u56e0\u6b64 physical page number \u5176\u5b9e\u5c31\u662f cache \u4e2d\u7684 \"tag\"\uff0c\u800c page offset \u5c31\u662f cache \u4e2d\u7684 \"byte offset\"\uff0cfully-associative \u7684 cache \u5e76\u6ca1\u6709 index \u8fd9\u4e00\u5b57\u6bb5\u3002</p> <p></p> <p>\u4e3a\u4ec0\u4e48\u8981\u4f7f\u7528 fully-associative \u7684\u5b58\u50a8\u65b9\u5f0f\u5462\uff1f\u6211\u4eec\u5728 cache \u4e2d\u8ba8\u8bba\u8fc7\uff0c\u8fd9\u79cd\u65b9\u5f0f\u7684\u597d\u5904\u662f\u5931\u6548\u7387\u4f4e\uff0c\u574f\u5904\u662f\u67e5\u8be2\u96be\u5ea6\u5927\u3002\u4f46\u662f\u6211\u4eec\u4e5f\u8ba8\u8bba\u5230\u4e86\uff0cpage fault \u7684\u5f00\u9500\u662f\u975e\u5e38\u5927\u7684\uff0c\u56e0\u6b64\u6bd4\u8f83\u4f4e\u7684 page fault \u7684\u6982\u7387\u76f8\u5bf9\u4e8e\u989d\u5916\u7684\u67e5\u8be2\u6765\u8bf4\u662f\u975e\u5e38\u5212\u7b97\u7684\u3002</p> <p>\u540c\u6837\uff0c\u7531\u4e8e\u8bfb\u5199\u78c1\u76d8\u662f\u975e\u5e38\u6162\u7684\uff0cwrite through \u7684\u7b56\u7565\u5e76\u4e0d\u5408\u9002\uff0c\u56e0\u6b64\u5728 virtual memory \u7684\u6280\u672f\u4e2d\uff0c\u6211\u4eec\u91c7\u53d6 write back \u7684\u65b9\u5f0f\u3002</p> <p>\u800c virtual address \u7684\u5f62\u5f0f\u4e0e\u4e4b\u7c7b\u4f3c\uff0c\u7531\u82e5\u5e72\u4f4d page number \u548c\u82e5\u5e72\u4f4d page offset \u7ec4\u6210\u3002</p> <p>\u6211\u4eec\u4e4b\u524d\u63d0\u5230\uff0c\u6211\u4eec\u6709\u4e00\u79cd\u65b9\u5f0f\u53ef\u4ee5\u627e\u5230 virtual page \u5bf9\u5e94\u7684 physical page\uff0c\u56e0\u6b64\u5f53\u6211\u4eec\u8981\u8bbf\u95ee\u4e00\u4e2a\u865a\u62df\u5730\u5740\u65f6\uff0c\u5c06\u5176 virtual page number \u901a\u8fc7\u8fd9\u79cd translation \u8f6c\u6362\u4e3a physical page number\uff08\u8fd9\u79cd translation \u4e5f\u4f1a\u8d1f\u8d23 page fault \u7684\u5904\u7406\u5e76\u7ed9\u51fa\u6b63\u786e\u7684\u8f6c\u6362\uff09\uff0c\u800c page offset \u8868\u793a\u7684\u662f\u5728\u4e00\u9875\u5185\u7684\u504f\u79fb\uff0c\u4fdd\u6301\u4e0d\u53d8\u5373\u53ef\u3002\u8fd9\u6837\u6211\u4eec\u5c31\u83b7\u5f97\u4e86\u8fd9\u4e2a virtual address \u5bf9\u5e94\u7684 physical address\uff0c\u4e5f\u5c31\u662f\u5b83\u5728\u5b9e\u9645\u7684 main memory \u4e2d\u5b58\u50a8\u7684\u4f4d\u7f6e\u3002\u5982\u4e0b\u56fe\u6240\u793a\uff1a</p> <p></p> <p>\u540c\u65f6\u4e5f\u53ef\u4ee5\u770b\u51fa\uff0cvirtual page number \u7684\u4f4d\u6570\u6bd4 physical \u7684\u591a\uff1b\u8fd9\u4e5f\u662f\u663e\u7136\u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u5f15\u5165\u865a\u62df\u5185\u5b58\u7684\u4e00\u4e2a\u91cd\u8981\u539f\u56e0\u5c31\u662f\u4e3a\u4e86\u4f7f\u7528\u6bd4 main memory \u66f4\u5927\u7684\u5185\u5b58\u3002</p> Info <p>\u5982\u679c\u6211\u4eec\u628a translation \u770b\u6210\u4e00\u4e2a\u51fd\u6570\uff08\u4e8b\u5b9e\u4e0a\uff0c\u6211\u4eec\u4e4b\u540e\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u79cd translation \u786e\u5b9e\u7b26\u5408\u51fd\u6570\u7684\u5b9a\u4e49\uff09\uff0c\u90a3\u4e48\u4e8b\u5b9e\u4e0a virtual page number \u5230 physical page number \u7684\u8f6c\u6362\u662f direct mapped \u7684\uff0c\u56e0\u4e3a\u6211\u4eec\u4ece\u4e00\u4e2a virtual page number \u53ef\u4ee5\u786e\u5207\u5730\u627e\u5230 \u4e00\u4e2a physical page number\uff0c\u800c\u4e0d\u662f\u5728\u4e00\u7ec4\u4e2d\u518d\u53bb\u5bfb\u627e\u3002\u56e0\u6b64\uff0cvirtual page number \u5b9e\u9645\u4e0a\u5bf9\u5e94\u4e86 cache \u4e2d\u7684 \"index\"\uff0ctag \u5e76\u4e0d\u9700\u8981\u3002</p> <p>\u6240\u4ee5\u8bf4\uff0c\u6211\u4eec\u8ba4\u4e3a virtual address \u4e4b\u4e8e physical address \u662f direct mapped \u7684\uff0cvirtual page number \u5bf9\u5e94 cache \u4e2d\u7684 index\uff0cpage offset \u5bf9\u5e94 byte offset\uff1b\u800c physical address \u4e4b\u4e8e secondary storage \u662f fully associative \u7684\uff0cphysical page number \u5bf9\u5e94 cache \u4e2d\u7684 tag\uff0cpage offset \u5bf9\u5e94 byte offset\u3002</p> <p>\uff08\u4f46\u662f\u5b9e\u9645\u4e0a\uff0c\u6211\u4e2a\u4eba\u5e76\u4e0d\u8ba4\u540c\u628a virtual memory \u548c cache \u7c7b\u6bd4\u8d77\u6765\u3002\uff09</p>"},{"location":"ZJU_CS/computer_organization/5_cache/#553","title":"5.5.3 \u9875\u8868","text":"<p>\u6211\u4eec\u4e0b\u9762\u8ba8\u8bba\u8fd9\u79cd translation \u7684\u5177\u4f53\u65b9\u6848\u3002\u4e4b\u524d\u4e5f\u63d0\u5230\uff0cfully-associative \u7684\u4e00\u4e2a\u91cd\u8981\u95ee\u9898\u5c31\u662f\u5982\u4f55\u53bb\u5b9a\u4f4d\u67d0\u4e00\u9879\uff1b\u8fd9\u91cc\u6211\u4eec\u5f15\u5165 page table \u8fd9\u79cd\u7ed3\u6784\uff0c\u5b83\u88ab\u5b58\u653e\u5728 main memory \u4e2d\uff0c\u6bcf\u4e2a\u7a0b\u5e8f\uff08\u5b9e\u9645\u4e0a\u662f\u8fdb\u7a0b\uff0c\u4f46\u662f\u5199\u8bfe\u672c\u7684\u4eba\u597d\u50cf\u73b0\u5728\u5e76\u4e0d\u60f3\u5f15\u5165\u8fd9\u4e2a\u6982\u5ff5\uff09\u90fd\u6709\u4e00\u4e2a\u81ea\u5df1\u7684 page table\uff1b\u540c\u65f6\u786c\u4ef6\u4e0a\u6709\u4e00\u4e2a page table register \u4fdd\u5b58\u5f53\u524d\u8fdb\u7a0b\u8fd9\u4e2a\u9875\u8868\u7684\u5730\u5740\u3002</p> <p>\u4f7f\u7528\u9875\u8868\u65f6\uff0c\u6211\u4eec\u6839\u636e virtual page number \u627e\u5230\u5bf9\u5e94 page table entry, PTE \u5728 page table \u4e2d\u7684\u504f\u79fb\uff0c\u7136\u540e\u4e0e page table register \u76f8\u52a0\u5f97\u5230\u5bf9\u5e94 entry \u7684 physical address\uff0c\u4ece\u4e2d\u8bfb\u53d6\u5bf9\u5e94\u7684 entry\u3002\u5176\u5b9e\u5c31\u662f\u8bf4\uff0cpage table \u5c31\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c <code>page_table[i]</code> \u8868\u793a\u7b2c <code>i</code> \u4e2a virtual page \u5bf9\u5e94\u7684 physical page number\u3002</p> <p>\u5982\u4e0b\u56fe\u6240\u793a\uff0c\u6bcf\u4e2a entry \u4e2d\u5305\u542b\u4e86\u4e00\u4e2a valid bit \u548c physical page number\u3002\u5982\u679c valid bit = 1\uff0c\u90a3\u4e48\u8f6c\u6362\u5b8c\u6210\uff1b\u5426\u5219\u89e6\u53d1\u4e86 page fault\uff0chandle \u4e4b\u540e\u518d\u8fdb\u884c\u8f6c\u6362\u3002</p> <p></p> <p>Page fault \u4f1a\u5f15\u53d1\u4e00\u4e2a exception\uff0c\u7531\u64cd\u4f5c\u7cfb\u7edf\u63a5\u7ba1\u63a7\u5236\uff0c\u5904\u7406\u5b8c\u4e4b\u540e\u518d\u5c06\u63a7\u5236\u4ea4\u8fd8\u7ed9\u8fdb\u7a0b\u3002\u64cd\u4f5c\u7cfb\u7edf\u8981\u505a\u7684\u4e8b\u60c5\u662f\u5728 secondary storage \u4e2d\u627e\u5230\u8fd9\u4e00 page\uff0c\u5c06\u5176\u653e\u5230 main memory \u91cc\uff08\u53ef\u80fd\u9700\u8981\u4e0e\u5f53\u524d\u4e3b\u5b58\u4e2d\u7684\u67d0\u4e2a page \u4ea4\u6362\uff09\uff0c\u7136\u540e\u66f4\u65b0 page table\u3002</p> <p>\u64cd\u4f5c\u7cfb\u7edf\u5728\u521b\u5efa\u8fdb\u7a0b\u65f6\u5728 disk (\u6216\u8005 flash memory) \u4e0a\u521b\u5efa\u4e00\u4e2a\u865a\u62df\u5730\u5740\u7a7a\u95f4\u90a3\u4e48\u5927\u7684\u7a7a\u95f4\uff0c\u4ee5\u4fbf\u4e0a\u8ff0\u7684\u4ea4\u6362\uff1b\u8fd9\u4e2a\u7a7a\u95f4\u79f0\u4e3a \u4ea4\u6362\u533a, swap space\u3002\u4e0b\u9762\u7684\u95ee\u9898\u662f\u64cd\u4f5c\u7cfb\u7edf\u5982\u4f55\u5728 swap space \u4e2d\u627e\u5230\u9700\u8981\u7684 page\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u770b\u5230\uff0c\u5982\u679c page table entry \u7684 valid bit \u4e3a 0\uff0c\u90a3\u4e48\u540e\u9762\u7684 physical page number \u662f\u6ca1\u6709\u7528\u5230\u7684\u3002\u6211\u4eec\u53ef\u4ee5\u5229\u7528\u8fd9\u4e2a\u5b57\u6bb5\u5b58\u50a8\u5bf9\u5e94 page \u88ab\u4ea4\u6362\u5230\u4e86 disk \u7684\u54ea\u4e2a\u4f4d\u7f6e\uff1b\u6216\u8005\u53e6\u5916\u5f00\u8f9f\u4e00\u4e2a\u7d22\u5f15\u7ed3\u6784\uff0c\u5728\u5176\u4e2d\u8bb0\u5f55\u6bcf\u4e2a virtual page number \u5bf9\u5e94\u7684 disk \u4f4d\u7f6e\u3002\u4f5c\u4e3a\u524d\u8005\u7684\u4e00\u4e2a\u4f8b\u5b50\uff0c\u8bf7\u770b\u4e0b\u56fe\uff1a</p> <p></p> <p>\u64cd\u4f5c\u7cfb\u7edf\u8fd8\u4f1a\u8ddf\u8e2a\u54ea\u4e9b\u8fdb\u7a0b\u548c\u865a\u62df\u5730\u5740\u6b63\u5728\u4f7f\u7528\u54ea\u4e2a\u7269\u7406\u9875\uff0c\u56e0\u4e3a\u64cd\u4f5c\u7cfb\u7edf\u9700\u8981\u8ba9\u4ea4\u6362\u5f15\u53d1\u540e\u7eed page fault \u7684\u6b21\u6570\u5c3d\u53ef\u80fd\u5c11\u3002\u64cd\u4f5c\u7cfb\u7edf\u4f1a\u4f7f\u7528\u6211\u4eec\u4e4b\u524d\u63d0\u5230\u7684 LRU, Least Recently Used \u7684\u7b56\u7565\u5904\u7406\u4ea4\u6362\u3002</p> <p>LRU \u7684\u4ee3\u4ef7\u6709\u70b9\u592a\u5927\u4e86\uff0c\u6bd5\u7adf\u5982\u679c\u4f7f\u7528 LRU \u7684\u8bdd\u9700\u8981\u904d\u5386\u6574\u4e2a main memory\u3002\u56e0\u6b64\uff0c\u5f88\u591a\u64cd\u4f5c\u7cfb\u7edf\u5f15\u5165\u4e86 reference bit (\u6216\u8005\u79f0\u4e3a use bit) \u6765\u8fd1\u4f3c\u5730\u5b9e\u73b0 LRU\u3002\u5f53\u4e00\u4e2a page \u88ab\u8bbf\u95ee\u65f6\u8fd9\u4e2a bit \u88ab\u7f6e\u4e3a 1\uff1b\u64cd\u4f5c\u7cfb\u7edf\u5b9a\u671f\u5c06 reference bit \u6e05\u96f6\u3002\u56e0\u6b64\uff0c\u5728\u9700\u8981\u4ea4\u6362\u65f6\uff0c\u53ea\u9700\u8981\u627e\u4e00\u4e2a reference bit \u4e3a 0 \u7684\u5c31\u53ef\u4ee5\u8bf4\u660e\u5b83\u5728\u8fd9\u6bb5\u65f6\u95f4\u5185\u6ca1\u6709\u88ab\u8bbf\u95ee\u8fc7\u3002</p> <p>\u5982\u6211\u4eec\u4e4b\u524d\u6240\u8bf4\uff0cvirtual memory \u4f7f\u7528 write back \u7684\u7b56\u7565\uff0c\u56e0\u6b64\u8fd8\u9700\u8981\u4e00\u4e2a dirty bit\u3002</p>"},{"location":"ZJU_CS/computer_organization/5_cache/#554","title":"5.5.4 \u7528\u591a\u7ea7\u9875\u8868\u89e3\u51b3\u9875\u8868\u8fc7\u5927\u7684\u95ee\u9898","text":"<p>\u6211\u4eec\u4e0d\u59a8\u5173\u6ce8\u4e00\u4e0b page table \u6709\u591a\u5927\u3002\u5728\u6211\u4eec\u4e4b\u524d\u7684\u4f8b\u5b50\u4e2d\uff0cvirtual address \u6709 48 bit\uff0c\u6bcf\u4e2a page \u7684\u5927\u5c0f\u4e3a 4KiB\uff0c\u6240\u4ee5 page table entry \u7684\u6570\u76ee\u662f  \\(\\cfrac{2^{48} \\text{ B}}{4\\text{ KiB}} = \\cfrac{2^{48}}{4\\times 2^{10}} = 2^{36}\\)\uff1b\u800c RISC-V \u6bcf\u4e2a\u8868\u9879\u6709 8 Byte\uff0c\u6240\u4ee5 page table \u7684\u603b\u5927\u5c0f\u6765\u5230\u4e86 \\(2^{39}\\text{ B} = 0.5 \\text{TiB}\\)\uff0c\u8fd9\u662f\u6781\u5176\u4e0d\u5408\u7406\u7684\uff1b\u5c24\u5176\u662f\u6bcf\u4e2a\u8fdb\u7a0b\u90fd\u6709\u4e00\u4e2a page table \u7684\u524d\u63d0\u4e0b\u3002</p> <p>\u6211\u4eec\u53ef\u4ee5\u901a\u8fc7\u591a\u7ea7\u9875\u8868\u7684\u65b9\u5f0f\u89e3\u51b3\u8fd9\u4e2a\u95ee\u9898\u3002</p> <p>\u5982\u6211\u4eec\u4e4b\u524d\u6240\u8ff0\uff0c\u9875\u8868\u662f\u4e00\u4e2a\u6570\u7ec4\uff0c  <code>page_table[i]</code>  \u4e2d\u5b58\u50a8\u7684\u662f page number \u4e3a i \u7684 page \u6240\u5bf9\u5e94\u7684 frame number\u3002\u8003\u8651\u6211\u4eec\u7684\u903b\u8f91\u5730\u5740\u7ed3\u6784\uff1a</p> <p></p> <p>\u8fd9\u6837\u7684\u903b\u8f91\u5730\u5740\u7ed3\u6784\u9700\u8981\u4e00\u4e2a\u5b58\u50a8 2p\u00a0\u4e2a\u5143\u7d20\u7684 page table\uff0c\u5373\u9700\u8981\u8fd9\u4e48\u5927\u7684\u8fde\u7eed\u5185\u5b58\uff0c\u8fd9\u662f\u975e\u5e38\u5927\u7684\u6d88\u8017\u3002\u6211\u4eec\u8003\u8651\u5c06 p \u518d\u5206\u4e3a p1\u00a0\u548c p2\u00a0\uff1a</p> <p></p> <p></p> <p>\u6211\u4eec\u4f7f\u7528\u4e00\u4e2a\u4e24\u7ea7\u9875\u8868\uff0c  <code>outer_page_table[i]</code> \u00a0\u4e2d\u5b58\u50a8\u7684\u662f p1\u00a0\u4e3a i \u7684 inner page table\uff0c\u5373 <code>inner_page_table[i][]</code>  \u7684\u57fa\u5730\u5740\uff1b\u800c  <code>inner_page_table[i][j]</code>  \u4e2d\u5b58\u50a8\u7684\u5c31\u662f p1\u00a0\u4e3a i\uff0cp2\u00a0\u4e3a j \u7684 page \u5bf9\u5e94\u7684 frame number\uff0c\u5373 page number \u4e3a p1p2\u00a0\uff08\u6ca1\u6709\u5206\u5272\u65f6\u7684 p\uff09\u5bf9\u5e94\u7684 frame number\u3002</p> <p>\u8fd9\u91cc\uff0c\u6211\u4eec\u79f0 p1\u00a0\u4e3a page directory number\u00a0\uff0cp2\u00a0\u4e3a page table number\uff0cd \u4e3a page offset\u3002</p> <p></p> <p>\u8003\u8651\u8fd9\u6837\u505a\u7684\u597d\u5904\uff1ahierarchical paging \u5176\u5b9e\u5c31\u662f\u5bf9\u9875\u8868\u7684\u5206\u9875\uff08page the page table\uff09\u3002\u56e0\u6b64\uff0c\u5b83\u907f\u514d\u4e86 page table \u5fc5\u987b\u5904\u5728\u8fde\u7eed\u5185\u5b58\u7684\u95ee\u9898\uff0c\u8fd9\u4e00\u95ee\u9898\u5728 p\u00a0\u6bd4\u8f83\u5927\u65f6\u5c24\u5176\u4e25\u91cd\u3002</p> <p>\u53e6\u5916\uff0c\u8fd9\u6837\u505a\u5728\u4e00\u822c\u60c5\u51b5\u4e0b\u53ef\u4ee5\u8282\u7701\u7a7a\u95f4\u3002\u6211\u4eec\u4e4b\u524d\u63d0\u5230\uff0c\u9875\u8868\u4e0d\u4e00\u5b9a\u4f1a\u5168\u90e8\u4f7f\u7528\uff1b\u5e76\u4e14\u7531\u4e8e\u903b\u8f91\u5730\u5740\u662f\u8fde\u7eed\u7684\uff0c\u56e0\u6b64\u7528\u5230\u7684\u9875\u8868\u9879\u4e5f\u662f\u8fde\u7eed\u7684\uff0c\u90fd\u6392\u5728\u9875\u8868\u7684\u5934\u90e8\u3002\u56e0\u6b64\u5982\u679c\u6211\u4eec\u91c7\u7528\u4e86\u4e8c\u7ea7\u9875\u8868\uff0c\u90a3\u4e48\u8bb8\u591a\u6392\u5728\u540e\u9762\u7684 inner page table \u5c06\u5b8c\u5168\u4e3a\u7a7a\uff1b\u6b64\u65f6\u6211\u4eec\u53ef\u4ee5\u76f4\u63a5\u4e0d\u7ed9\u8fd9\u4e9b inner page table \u5206\u914d\u7a7a\u95f4\uff0c\u5373\u6211\u4eec\u53ea\u5206\u914d\u6700\u5927\u7684 p1\u00a0\u90a3\u4e48\u591a\u4e2a inner page table\u3002\u8fd9\u6837\u6211\u4eec\u53ef\u4ee5\u8282\u7701\u5f88\u591a\u7a7a\u95f4\u3002\u5373\u4f7f\u5728\u6700\u5dee\u7684\u60c5\u51b5\u4e0b\uff0c\u6240\u6709\u9875\u8868\u90fd\u88ab\u4f7f\u7528\u4e86\uff0c\u6211\u4eec\u7684\u9875\u8868\u6240\u7528\u7684\u603b\u6761\u76ee\u6570\u4e5f\u53ea\u6709 \\(2^{p_1}+2^{p_1}\\cdot 2^{p_2} = 2^{p_1} + 2^{p_1 + p_2}\\)\u00a0\u4e2a\uff0c\u53ea\u6bd4\u5355\u7ea7\u9875\u8868\u7ed3\u6784\u591a\u4e86 \\(2^{p_1}\\)\uff0c\u662f\u5b8c\u5168\u53ef\u4ee5\u63a5\u53d7\u7684\u3002</p> <p>\u7c7b\u4f3c\u5730\uff0c\u6211\u4eec\u53ef\u4ee5\u8bbe\u8ba1\u66f4\u591a\u7ea7\u7684\u9875\u8868\u3002\u4f8b\u5982\uff0c64 \u4f4d\u7684\u903b\u8f91\u5730\u5740\u7a7a\u95f4\u4f7f\u7528\u4e8c\u7ea7\u9875\u8868\u5c31\u662f\u4e0d\u591f\u7684\uff0c\u5426\u5219\u5b83\u7684\u9875\u8868\u5c31\u4f1a\u957f\u6210\u8fd9\u6837\uff1a</p> <p></p> <p>\u8fd9\u6837 outer page \u5c31\u4f1a\u8d85\u7ea7\u5927\u3002\u6211\u4eec\u53ef\u4ee5 page the outer page\uff1a</p> <p></p> <p>\u8fd9\u6837\uff0c\u6211\u4eec\u5c31\u5efa\u7acb\u4e86\u4e00\u4e2a\u4e09\u7ea7\u9875\u8868\u3002</p> <p>\u5b9e\u9645\u4e0a\uff0c\u6211\u4eec\u4e0d\u5fc5\u4f7f\u7528\u5168\u90e8\u7684 64 \u4f4d\uff0c\u5373\u6211\u4eec\u4e0d\u9700\u8981\u4e00\u4e2a 64 \u4f4d\u90a3\u4e48\u5de8\u5927\u7684 virtual address space\u3002AMD-64 \u652f\u6301 48-bit \u7684\u865a\u62df\u5730\u5740\uff0cARM64 \u652f\u6301 39-bit \u548c 48-bit \u7684\u865a\u62df\u5730\u5740\u7a7a\u95f4\uff1a</p> <p></p>"},{"location":"ZJU_CS/computer_organization/5_cache/#555_tlb","title":"5.5.5 \u4f7f\u7528 TLB \u52a0\u5feb\u5730\u5740\u8f6c\u6362","text":"<p>\u6211\u4eec\u4e4b\u524d\u63d0\u5230\uff0c\u4f7f\u7528\u9875\u8868\u65f6\uff0c\u6211\u4eec\u6839\u636e virtual page number \u627e\u5230\u5bf9\u5e94 page table entry \u5728 page table \u4e2d\u7684\u504f\u79fb\uff0c\u7136\u540e\u4e0e page table register \u76f8\u52a0\u5f97\u5230\u5bf9\u5e94 entry \u7684 physical address\uff0c\u4ece\u4e2d\u8bfb\u53d6\u5bf9\u5e94\u7684 entry\u3002\u4f46\u662f\u8fd9\u79cd\u65b9\u6cd5\u7684\u6548\u7387\u5b58\u5728\u95ee\u9898\u3002\u8981\u8bbf\u95ee virtual address \u5bf9\u5e94\u7684 physical address\uff0c\u6211\u4eec\u9996\u5148\u8981\u6839\u636e page table register \u548c page number \u6765\u627e\u5230\u9875\u8868\u5728\u5185\u5b58\u7684\u4f4d\u7f6e\uff0c\u5e76\u5728\u5176\u4e2d\u5f97\u5230 page \u5bf9\u5e94\u7684 frame number\uff0c\u8fd9\u9700\u8981\u4e00\u6b21\u5185\u5b58\u8bbf\u95ee\uff1b\u7136\u540e\u6211\u4eec\u6839\u636e frame number \u548c page offset \u7b97\u51fa\u771f\u5b9e\u7684 physical address\uff0c\u5e76\u8bbf\u95ee\u5bf9\u5e94\u7684\u5b57\u8282\u5185\u5bb9\u3002\u5373\uff0c\u8bbf\u95ee\u4e00\u4e2a\u5b57\u8282\u9700\u8981\u4e24\u6b21\u5185\u5b58\u8bbf\u95ee\uff0c\u8fd9\u4f1a\u52a0\u500d\u539f\u672c\u7684\u5185\u5b58\u8bbf\u95ee\u7684\u65f6\u95f4\uff0c\u8fd9\u662f\u96be\u4ee5\u63a5\u53d7\u7684\u3002</p> <p>\u8fd9\u4e2a\u95ee\u9898\u7684\u89e3\u51b3\u65b9\u6cd5\u7528\u5230\u4e00\u4e2a\u4e13\u7528\u7684\u9ad8\u901f\u67e5\u627e\u786c\u4ef6 cache\uff0c\u8fd9\u91cc\u79f0\u5b83\u4e3a translation look-aside buffer (TLB)\u3002\u5b83\u5b9e\u9645\u4e0a\u5c31\u662f page table \u7684\u4e13\u7528 cache\uff08\u5b83\u771f\u7684\u662f cache\uff1bpage table \u5e76\u4e0d\u662f cache\uff0c\u53ea\u662f\u50cf cache\uff09\uff0c\u5176 associativity \u7684\u8bbe\u8ba1\u53ef\u4ee5\u6839\u636e\u5b9e\u9645\u60c5\u51b5\u51b3\u5b9a\u3002</p> <p>\u4e0b\u56fe\u662f\u4e00\u4e2a fully-associative \u7684 TLB \u7684\u4f8b\u5b50\uff1b\u7531\u4e8e\u662f fully-associative\uff0c\u5e76\u4e0d\u9700\u8981 index\uff1a</p> <p></p> <p>\u5f53 TLB miss \u7684\u65f6\u5019\uff0c\u5904\u7406\u5668\u53bb page table \u67e5\u627e\u5bf9\u5e94\u7684\u9879\uff1b\u5982\u679c\u53d1\u73b0\u5bf9\u5e94\u9879\u662f valid \u7684\uff0c\u90a3\u4e48\u5c31\u628a\u4ed6\u62ff\u5230 TLB \u91cc\uff08\u6b64\u65f6\u88ab\u66ff\u6362\u6389\u7684 TLB entry \u7684 dirty bit \u5982\u679c\u662f 1\uff0c\u4e5f\u8981\u5199\u4f1a page table\uff09\uff1b\u5426\u5219\u5c31\u4f1a\u89e6\u53d1\u4e00\u4e2a page fault\uff0c\u7136\u540e\u5728\u505a\u4e0a\u8ff0\u7684\u4e8b\u3002</p> <p></p>"},{"location":"ZJU_CS/computer_organization/5_cache/#556_memory_protection","title":"5.5.6 Memory Protection","text":"<p>\u6682\u65f6\u4e0d\u60f3\u5b66QWQ</p>"},{"location":"ZJU_CS/computer_organization/5_cache/#56_the_three_cs_cache_miss","title":"5.6 The Three Cs | \u5bf9 cache miss \u7684\u5f52\u7c7b","text":"<p>Danger</p> <p>\u6b64\u5904\u5185\u5bb9\u5b58\u7591</p> <ul> <li>Compulsory misses / Cold-start misses\uff1a\u5bf9\u4e00\u4e2a\u5757\u7b2c\u4e00\u6b21\u8bbf\u95ee\u65f6\u5f15\u53d1\u7684 miss</li> <li>Capacity misses\uff1a\u5728 fully-associative cache \u4e2d\uff0c\u67d0\u4e2a\u5757\u867d\u7136\u8bbf\u95ee\u8fc7\uff0c\u4f46\u662f\u7531\u4e8e\u5bb9\u91cf\u4e0d\u591f\u88ab\u6362\u51fa\u53bb\u4e86\uff0c\u518d\u8bbf\u95ee\u65f6\u5c31 miss \u4e86</li> <li>Conflict misses / Collision misses\uff1a\u5728 set-associative \u6216 direct-mapped cache \u4e2d\uff0c\u67d0\u4e2a\u5757\u867d\u7136\u8bbf\u95ee\u8fc7\uff0c\u4f46\u662f\u7531\u4e8e\u8fd9\u4e2a\u7ec4\u91cc\u7684\u5bb9\u91cf\u4e0d\u591f\u88ab\u6362\u51fa\u53bb\u4e86\uff0c\u518d\u8bbf\u95ee\u65f6\u5c31 miss \u4e86</li> </ul>"},{"location":"ZJU_CS/computer_organization/5_cache/#57_using_fsm_to_control_a_simple_cache","title":"5.7 Using FSM to Control a Simple Cache","text":"<p>FSM\uff0cFinite State Machine\uff0c\u6709\u9650\u72b6\u6001\u81ea\u52a8\u673a\uff1b\u5176\u5b9e\u5c31\u662f\u6839\u636e\u5f53\u524d\u72b6\u6001\u548c\u8f93\u5165\u8f6c\u6362\u72b6\u6001\u7684\u4e1c\u897f\u3002\u8fd9\u91cc\u6839\u636e\u5f53\u524d\u7684\u72b6\u6001\u4ee5\u53ca\u53d1\u751f\u7684\u4e8b\u4ef6\u8f6c\u6362\u72b6\u6001\uff0c\u5e76\u7ed9\u51fa\u4e00\u4e9b\u63a7\u5236\u4fe1\u53f7\u7684\u8f93\u51fa\uff1a</p> <p></p> <p></p>"},{"location":"ZJU_CS/computer_organization/%E5%8E%86%E5%B9%B4%E5%8D%B7/","title":"\u5173\u4e8e\u8003\u8bd5","text":""},{"location":"ZJU_CS/computer_organization/%E5%8E%86%E5%B9%B4%E5%8D%B7/#2022","title":"2022 \u671f\u672b\u56de\u5fc6\u5377","text":""},{"location":"ZJU_CS/computer_organization/%E5%8E%86%E5%B9%B4%E5%8D%B7/#_2","title":"\u9009\u62e9\u9898","text":"<ul> <li>\u7ed9\u673a\u5668\u7801\u7ffb\u8bd1\u6210\u6307\u4ee4</li> <li>\u7ed932\u4f4d\u5927\u7acb\u5373\u6570\u5730\u5740\u53d6\u51fa\u5176\u4e2d\u5185\u5bb9\uff08lui+lw\uff09</li> <li>\u6d6e\u70b9\u6570\u52a0\u6cd5\u8fc7\u7a0b\uff1a0.1234510^2 \u548c 0.1234510^(-2) \u5bf9\u9f50\u540e 10 \u7684\u5e42\u6b21\u662f\u591a\u5c11</li> <li>\u56db\u4e2a\u9009\u9879\u9009\u5bf9\u7684\uff1a<ul> <li>PTE \u6570=\u7269\u7406\u9875\u6570</li> <li>\u589e\u52a0 associativity \u53ef\u4ee5\u51cf\u5c11 capa miss</li> <li>async bus \u7684\u6982\u5ff5</li> <li>\u5185\u5b58\u7ed3\u6784\u4e2d\u8017\u65f6\u6700\u591a\u7684\u662f\u6700\u4e0a\u5c42</li> </ul> </li> <li>IEEE 754\uff1a1.355-2.105 \u7528\u5355\u7cbe\u5ea6\u6d6e\u70b9\u6570\u8868\u793a</li> <li>\u5355\u5468\u671f\u7684\u65f6\u5019\u65f6\u949f\u5468\u671f\u5b8c\u4e0d\u6210\u54ea\u4e2a\u5de5\u4f5c(\u8bfb\u5e76\u5199\u5185\u5b58)</li> <li>TLB \u6709 tlb \u7684\u65f6\u5019\u5148\u770b\u8c01\uff1atlb pgtbl cache phymem</li> <li>RAID \u662f\u5e72\u5565\u7684</li> <li>cache \u589e\u5927 block size \u53ef\u4ee5\u51cf\u5c11\u54ea\u79cd miss</li> <li>write through \u6307\u4ec0\u4e48</li> <li>6 \u4e2a block\uff0c\u6bcf\u4e2a block 4words\uff0c\u6c42 840 \u5bf9\u5e94\u7684 block \u53f7</li> </ul>"},{"location":"ZJU_CS/computer_organization/%E5%8E%86%E5%B9%B4%E5%8D%B7/#_3","title":"\u5927\u9898","text":""},{"location":"ZJU_CS/computer_organization/%E5%8E%86%E5%B9%B4%E5%8D%B7/#1","title":"1","text":"<p>(1) \u628a\u8fd96\u4e2a\u6570\u6392\u5e8f\uff1a\u5728\u539f\u7801\u3001\u8865\u7801\u3001\u7b26\u53f7\u8868\u793a\u3001IEEE754 \u4e0b\u7684 0xF0000000\uff0c\u5728\u539f\u7801\u3001\u8865\u7801\u4e0b\u7684 0xFFFFFFFF(2) \u4e0d\u7528\u522b\u7684\u5bc4\u5b58\u5668\uff0c\u4ea4\u6362 x10 \u548c x11(3) \u4e66\u4e0aIndexOutOfBound \u90a3\u4e2a\u4f8b\u5b50\uff0c\u5224\u65ad\u6570\u7ec4\u8d8a\u754c</p>"},{"location":"ZJU_CS/computer_organization/%E5%8E%86%E5%B9%B4%E5%8D%B7/#2","title":"2 \u5199\u6c47\u7f16","text":"<pre><code>void main(char *s,int *n){\n     char c,ch;\n     c = '3';\n     ch = '5';\n     *n = replace(*s,c,ch);\n}\n\nint replace(char *u,char c,char ch){\n     int i = 0;\n     while(u[i]!=0){\n          if(u[i]==c){\n                u[i]=ch;\n                break;\n          }\n          i++;\n     }\n     return i;\n}\n</code></pre>"},{"location":"ZJU_CS/computer_organization/%E5%8E%86%E5%B9%B4%E5%8D%B7/#3_cache","title":"3 cache(\u4e0d\u786e\u5b9a\u5b8c\u5168\u4e00\u81f4)","text":"<p>(1) 32B \u7684 cache\uff0c\u4e00\u4e2a entry 8B\uff0c\u76f4\u63a5\u6620\u5c04\uff0cwrite through+write around\uff0c\u7ed9\u51fa\u5982\u4e0b\u8bbf\u95ee\uff1a0 16 48 8 56 16 8 56 32 0 60\uff0c\u95ee\u6bcf\u4e00\u6b21\u7684index, tag, \u662f\u5426hit(\u6ce8\u610f write around) (2) 128B \u7684 cache\uff0c\u4e00\u4e2a entry 16B\uff0c2\u8def\u7ec4\u5173\u8054 LRU\uff0cwrite back\uff0c\u7ed9\u51fa\u8bbf\u95ee\uff1a64 32 64 0 112 64 128 48 240 0\uff0c\u95ee\u7684\u8ddf\u4e0a\u9762\u4e00\u6837\uff0c\u5916\u52a0\u6700\u540e\u7684dirty block number</p>"},{"location":"ZJU_CS/computer_organization/%E5%8E%86%E5%B9%B4%E5%8D%B7/#4","title":"4 \u865a\u62df\u5185\u5b58","text":"<p>\u9875\u8868\u5927\u5c0f\uff0c\u4ee5\u53ca\u7ed9\u5b9a\u60c5\u51b5\u95ee TLB \u80fd\u4e0d\u80fd\u5bb9\u7eb3 8MiB \u5185\u5b58</p>"},{"location":"ZJU_CS/computer_organization/%E5%8E%86%E5%B9%B4%E5%8D%B7/#5","title":"5 \u6d41\u6c34\u7ebf","text":"<p>(1)\u5148\u95ee\u4e86 sub \u7684\u65f6\u5019\u9664\u4e86 ALUOp \u4ee5\u5916\u5404\u4e2a\u4fe1\u53f7\u7684\u503c\u7ed9\u4e86\u4e00\u6bb5\u4ee3\u7801\uff0c\u5e94\u8be5\u662f<code>sub x5,x7,x11  ld x13, 0(x5)  ld x7,0(x2)  add x13,x5,x13  sd x13, 0(x5)</code>\u95ee\uff1a(2) \u5982\u679c\u6ca1\u6709 forward \u548c hazard detection\uff0c\u5728\u4ee3\u7801\u63d2 nop \u4f7f\u5176\u80fd\u6b63\u786e(3) \u5982\u679c\u6709 forward \u6ca1\u6709 hazard detection\uff0c\u5e72(2)\u7684\u4e8b(4) \u5982\u679c\u6709 forward\uff0c\u5199\u524d7\u4e2a\u65f6\u949f\u5468\u671f ForwardA \u548c ForwardB \u7684\u4fe1\u53f7\u503c</p>"},{"location":"ZJU_CS/computer_organization/%E5%8E%86%E5%B9%B4%E5%8D%B7/#_4","title":"\u5386\u5e74\u5377","text":"<p>https://www.cc98.org/topic/5114223</p> <p>https://www.cc98.org/topic/5118209</p>"},{"location":"ZJU_CS/computer_organization/%E5%8E%86%E5%B9%B4%E5%8D%B7/#_5","title":"\u5c0f\u8003\u70b9","text":"<ul> <li>Intro &amp; Misc</li> <li>Instructions<ul> <li>machine code</li> <li>addressing method</li> <li>floating point inst</li> </ul> </li> <li>Arithmetic<ul> <li>1's complement, 2's complement</li> <li>sign extensions</li> <li>floating point calc steps</li> <li>what is underflow</li> <li>IEEE 754 </li> </ul> </li> <li>Processor</li> <li>Cache<ul> <li>write-through, etc.</li> </ul> </li> <li>Virtual Memory<ul> <li>TLB</li> <li>usage of dirty bit</li> </ul> </li> <li>I/O<ul> <li>SCSI Bus, etc.</li> <li>memory-mapped I/O system</li> </ul> </li> </ul>"},{"location":"ZJU_CS/computer_organization/%E5%8E%86%E5%B9%B4%E5%8D%B7/#_6","title":"\u5927\u9898","text":"<ul> <li>\u7ed9 C \u5199\u6c47\u7f16 [19(14)]</li> <li>Cache \u7b97\u4f4d\u6570 [19(12)]</li> </ul> <p>  D</p>"},{"location":"ZJU_CS/oop/","title":"OOP-Review","text":"<p>\u672c\u6587\u6863\u662f\u57fa\u4e8e\u5bf9\u5c0f\u89d2\u9f99\u5b66\u957f\u7b14\u8bb0\u7684\u518d\u521b\u4f5c \u8bfe\u7a0b\u662f\u7531\u8bb8\u5a01\u5a01\u8001\u5e08\u6388\u8bfe</p>"},{"location":"ZJU_CS/oop/#1_c","title":"1. C++\u7684\u65b0\u7279\u6027","text":""},{"location":"ZJU_CS/oop/#10","title":"1.0 \u8f93\u5165\u8f93\u51fa","text":"<ul> <li>C++\u53ef\u4ee5\u4f7f\u7528\u8f93\u5165\u8f93\u51fa\u6d41<code>(cin, cout)</code>\u8fdb\u884c\u8f93\u51fa\uff0c\u6bd4\u5982<code>cout&lt;&lt;\"Hello World\";</code> \u9700\u8981\u5305\u542b\u5934\u6587\u4ef6<code>#include&lt;iostream&gt;</code> </li> <li>\u6587\u4ef6\u7684\u8f93\u5165\u8f93\u51fa, \u4f7f\u7528ofstream\u548cifstream</li> </ul> <pre><code>#include &lt;iostream&gt;\n#include &lt;istream&gt;\n#include &lt;fstream&gt;\n#include &lt;string&gt;\n\nusing namespace std;\n\nint main (void) {\n    string line = \"Hello World!\";\n    ofstream outFile(\"output.txt\");\n    outFile &lt;&lt; line &lt;&lt; endl;\n    outFile.close();\n    string inputData;\n    ifstream inFile(\"input.txt\");\n    inFile &gt;&gt; inputData;\n    cout &lt;&lt; inputData &lt;&lt; endl;\n    inFile.close();\n}\n</code></pre>"},{"location":"ZJU_CS/oop/#11","title":"1.1 \u53d8\u91cf\u548c\u52a8\u6001\u5185\u5b58\u5206\u914d","text":"<ul> <li> <p>C++\u4e2d\u7684\u53d8\u91cf\u7c7b\u578b</p> </li> <li> <p>global variable \u5168\u5c40\u53d8\u91cf\uff0c\u5b58\u50a8\u5728\u5168\u5c40\u53d8\u91cf\u533a </p> <ul> <li>\u53ef\u4ee5\u5728\u4e0d\u540c\u7684cpp\u6587\u4ef6\u4e4b\u95f4\u5171\u4eab\uff0c\u53ef\u4ee5\u4f7f\u7528\u5173\u952e\u5b57<code>extern</code> \u6765\u4f7f\u7528\u522b\u7684cpp\u6587\u4ef6\u4e2d\u7684\u5168\u5c40\u53d8\u91cf</li> </ul> </li> <li>static global variable \u9759\u6001\u5168\u5c40\u53d8\u91cf\uff0c\u4e0d\u80fd\u5728cpp\u6587\u4ef6\u4e4b\u95f4\u5171\u4eab</li> <li>local variable \u5b58\u50a8\u5728\u6808\u533a\u4e0a</li> <li>static local variable \u9759\u6001\u5c40\u90e8\u53d8\u91cf<ul> <li>\u5b58\u50a8\u5728\u5168\u5c40\u53d8\u91cf\u533a</li> <li>\u5728\u521d\u6b21\u4f7f\u7528\u7684\u65f6\u5019\u521d\u59cb\u5316\uff0ckeeps its value between visit to the function</li> </ul> </li> <li>allocated variable \u52a8\u6001\u5206\u914d\u7684\u53d8\u91cf<ul> <li>\u5b58\u50a8\u5728\u5185\u5b58\u7684\u5806\u7ed3\u6784\u4e2d</li> </ul> </li> </ul> <pre><code>string s=\"hello\";\nstring *ps=&amp;s;\n(*ps).length();\nps-&gt;length();\n</code></pre> <ul> <li>C++\u52a8\u6001\u5185\u5b58\u5206\u914d</li> <li> <p>new\u7528\u4e8e\u52a8\u6001\u5206\u914d\u5185\u5b58\u7ed9\u53d8\u91cf\uff0c\u5982<code>new int</code>\uff0c<code>new double[1000]</code></p> <ul> <li> <p>\u4e0emalloc\u7684\u533a\u522b\uff1amalloc\u4e0d\u6267\u884c\u7c7b\u7684\u6784\u9020\u51fd\u6570\uff0c\u800cnew\u51fa\u65b0\u7684\u5bf9\u8c61\u7684\u65f6\u5019\u4f1a\u6267\u884c\u5bf9\u8c61\u7684\u6784\u9020\u51fd\u6570<code>new Class_Name[x]</code>\u4f1a\u6267\u884cx\u6b21Class_Name\u7684\u6784\u9020\u51fd\u6570</p> </li> <li> <p>\u5185\u5b58\u6cc4\u6f0f Memory Leak</p> </li> </ul> <pre><code>int *p = new int;\n*p = 123;\np = new int;\n</code></pre> <ul> <li>\u4e0a\u9762\u8fd9\u6bb5\u4ee3\u7801\u4e2d\u4e00\u5f00\u59cb\u4e3a\u6307\u9488p\u5206\u914d\u4e86\u4e00\u6bb5\u5185\u5b58\u7a7a\u95f4\u5e76\u8d4b\u503c\u4e86123\uff0c\u4f46\u662f\u7b2c\u4e09\u884c\u4ee3\u7801\u53c8\u4e3ap\u8d4b\u503c\u4e86\u4e00\u6bb5\u65b0\u7684\u5185\u5b58\u7a7a\u95f4\uff0c\u539f\u6765\u7684\u5185\u5b58\u7a7a\u95f4\u5b58\u50a8\u4e86123\uff0c\u4f46\u662f\u8fd9\u4e00\u6bb5\u5185\u5b58\u7a7a\u95f4\u5df2\u7ecf\u6ca1\u6709\u6307\u9488\u6307\u5411\uff0c\u56e0\u6b64\u4e0d\u80fd\u8bbf\u95ee\uff0c\u4e5f\u4e0d\u80fd\u5220\u9664\uff0c\u9020\u6210\u4e86\u5185\u5b58\u6cc4\u6f0f</li> </ul> </li> <li> <p>delete\u7528\u4e8e\u5220\u9664\u52a8\u6001\u5206\u914d\u7684\u5185\u5b58</p> <ul> <li> <p>\u7528\u6cd5 <code>delete p;</code> <code>delete[] p;</code> </p> </li> <li> <p>\u548cnew\u7c7b\u4f3c\uff0cdelete\u4f1a\u6267\u884c\u6240\u5220\u9664\u5bf9\u8c61\u7684\u6784\u9020\u51fd\u6570\uff0c\u4e0d\u80fddelete\u6ca1\u6709\u5b9a\u4e49\u8fc7\u7684\u53d8\u91cf\uff0c\u540c\u4e00\u4e2a\u53d8\u91cf\u4e0d\u80fddelete\u4e24\u6b21</p> </li> <li> <p>\u4e24\u4e2a\u6307\u9488p1,p2\u6307\u5411\u540c\u4e00\u4e2a\u6570\u636e\uff0c\u5982\u679cp1\u88abdelete\u4e86\uff0cp2\u4e5f\u4e0d\u80fd\u8bbf\u95ee\u539f\u672cp1\u6307\u5411\u7684\u53d8\u91cf\u7684\u503c\uff0c\u56e0\u4e3adelete\u5220\u9664\u7684\u662f\u5185\u5b58\u91cc\u7684\u6570\u636e</p> </li> </ul> <pre><code>int *p1 = new int;\nint *p2 = new p1;\n*p2 = 1;\ndelete p1;\ncout&lt;&lt;*p2&lt;&lt;endl; // error!!!\n</code></pre> <ul> <li>\u6307\u5411\u540c\u4e00\u4e2a\u6570\u636e\u7684\u4e24\u4e2a\u6307\u9488\u5b9e\u9645\u4e0a\u53ea\u662f\u4e24\u4e2a\u4e0d\u540c\u7684\u53d8\u91cf\u540d\u800c\u5df2\uff0cdelete\u5220\u9664\u7684\u4e0d\u662f\u53d8\u91cf\u540d\u800c\u662f\u6570\u636e</li> </ul> </li> </ul>"},{"location":"ZJU_CS/oop/#12_reference","title":"1.2 \u5f15\u7528 Reference","text":"<ul> <li>a new type in C++\uff0c \u76f8\u5f53\u4e8e\u7ed9\u53d8\u91cf\u53d6\u4e86\u4e00\u4e2a\u522b\u540d\uff0c\u4f7f\u7528\u65b9\u6cd5\u4e3a<code>type &amp;refname = name;</code> \u5f15\u7528\u7684\u5bf9\u8c61\u4e0d\u80fd\u662f\u8868\u8fbe\u5f0f</li> <li>\u5f15\u7528\u548c\u6307\u9488\u7684\u533a\u522b</li> <li>\u4e0d\u80fd\u5b9a\u4e49\u7a7a\u5f15\u7528\uff0c\u5f15\u7528\u5fc5\u987b\u8fde\u63a5\u5230\u4e00\u5757\u5408\u6cd5\u7684\u5185\u5b58</li> <li>\u4e00\u65e6\u5f15\u7528\u88ab\u521d\u59cb\u5316\u4e3a\u4e00\u4e2a\u5bf9\u8c61\u5c31\u4e0d\u80fd\u66f4\u6539 </li> <li>\u5f15\u7528\u5728\u521b\u5efa\u7684\u65f6\u5019\u5fc5\u987b\u8981\u521d\u59cb\u5316 </li> </ul> <pre><code>int *f(int *x)\n{\n    (*x)++;\n    return x;\n}\n\nint &amp;g(int &amp;x)\n{\n    x++;\n    return x;\n}\n\nint x;\nint &amp;h()\n{\n    return x;\n}\n\nint main()\n{\n    int a=0;\n    f(&amp;a);\n    g(a);\n    h()=16; //\u8fd9\u91cc\u5168\u5c40\u53d8\u91cfx\u88ab\u8d4b\u503c\u4e3a16\n}\n</code></pre>"},{"location":"ZJU_CS/oop/#13_const","title":"1.3 const\u7c7b\u578b","text":"<ul> <li> <p>\u7528\u4e8e\u5b9a\u4e49\u5e38\u91cf\u7c7b\u578b\uff0c\u5982<code>const int x=12345;</code>, const\u7c7b\u578b\u7684\u53d8\u91cf\u5728\u521d\u59cb\u5316\u4e4b\u540e\u5c31\u4e0d\u80fd\u6539\u53d8\u5176\u503c\uff0cconst\u578b\u53d8\u91cf\u4e0d\u80fd\u5728\u8fde\u63a5\u5355\u5143\u5916\u4f7f\u7528</p> </li> <li> <p>Run-time constants \u8fd0\u884c\u65f6\u5e38\u91cf</p> </li> <li> <p>\u6570\u7ec4\u7684\u5b9a\u4e49\u65f6\u7684\u957f\u5ea6\u503c\u5fc5\u987b\u5728\u7f16\u8bd1\u671f\u5c31\u5df2\u77e5\uff0c\u6240\u4ee5\u5b8f\u5b9a\u4e49\u4e2d\u7684\u5e38\u6570\u53ef\u4ee5\u4f5c\u4e3a\u6570\u7ec4\u957f\u5ea6\uff0c\u800c<code>int n; int a[n]</code>\u8fd9\u6837\u7684\u8bed\u6cd5\u5c31\u662f\u9519\u8bef\u7684\uff0c\u4e0d\u8fc7\u73b0\u5728\u4f3c\u4e4e\u6709\u4e86\u7f16\u8bd1\u5668\u4f18\u5316\uff0c\u5728Dev-cpp\u4e2d\u8fd9\u6837\u5199\u4e5f\u53ef\u4ee5\u901a\u8fc7\u7f16\u8bd1</p> </li> </ul> <pre><code>const int size=100;\nint a[size];//OK\n\nint x;\ncin&gt;&gt;x;\nconst int size=x;\nint a[size];//Error!!!\n</code></pre> <ul> <li> <p>const\u548c\u6307\u9488pointer</p> </li> <li> <p>\u5e38\u91cf\u6307\u9488\uff1a<code>char * const p = \"abc\";</code> \u4e0d\u80fd\u8d4b\u4e88\u8fd9\u4e2a\u6307\u9488\u65b0\u7684\u5730\u5740\uff0c\u76f8\u5f53\u4e8e\u5730\u5740\u662fconst\u7c7b\u578b\uff0c\u4f46\u662fp\u6307\u5411\u7684\u503c\u53ef\u4ee5\u6539\u53d8</p> </li> <li><code>const char* p = \"abc\";</code> \u8fd9\u79cd\u60c5\u51b5\u4e0bp\u6307\u5411\u7684\u662f\u4e00\u4e2aconst char\u7c7b\u578b\u7684\u503c\uff0c\u56e0\u6b64\u6307\u5411\u7684\u503c\u4e0d\u80fd\u6539\u53d8\uff0c\u800c\u6307\u9488\u6307\u5411\u7684\u5bf9\u8c61\u53ef\u4ee5\u6539\u53d8</li> </ul> <pre><code>//\u7b2c\u4e00\u79cd\u60c5\u51b5\u662fq\u662f\u4e00\u4e2aconst\u6307\u9488\uff0c\u4f46\u662fq\u6307\u5411\u7684\u4e1c\u897f\u53ef\u4ee5\u53d8\nchar * const q =\"abc\";\n*q='c'; // OK\nq++; // Error!\n//\u7b2c\u4e8c\u79cd\u60c5\u51b5\u4e0b\uff0c(*q)\u662f\u4e00\u4e2aconst\u7684\u503c\uff0c\u6b64\u65f6q\u6240\u6307\u5411\u7684\u503c\u4e0d\u80fd\u53d8\nconst char *p = \"abc\";\n*p='c';//error!\n//\u533a\u522b\u8fd9\u4e09\u79cd\u4e1c\u897f\nstring p1=\"zyc\";\nconst string *p=&amp;p1;\nstring const* p=&amp;p1;\nstring *const p=&amp;p1;\n</code></pre> <ul> <li>\u4e0d\u80fd\u5c06const\u7c7b\u578b\u7684\u53d8\u91cf\u8d4b\u503c\u7ed9\u5bf9\u5e94\u7684\u6307\u9488\uff0c\u56e0\u4e3a\u53ef\u80fd\u4f1a\u5e26\u6765const\u53d8\u91cf\u7684\u6539\u53d8\uff0c\u8fd9\u662fconst\u7c7b\u578b\u7684\u53d8\u91cf\u4e0d\u5141\u8bb8\u7684</li> <li>\u53ef\u4ee5\u628a\u975econst\u7c7b\u578b\u7684\u503c\u8d4b\u7ed9\u5bf9\u5e94\u7684const\u578b\u53d8\u91cf\uff0c\u51fd\u6570\u4e2d\u53ef\u4ee5\u5c06\u53c2\u6570\u8bbe\u7f6e\u4e3aconst\u7c7b\u578b\u8868\u660e\u8fd9\u4e9b\u53c2\u6570\u5728\u51fd\u6570\u4e2d\u4e0d\u80fd\u88ab\u4fee\u6539\u539f\u672c\u7684\u503c\uff0c\u4e5f\u53ef\u4ee5\u5c06\u8fd4\u56de\u503c\u7c7b\u578b\u8bbe\u7f6e\u4e3aconst\u8868\u793a\u8fd4\u56de\u503c\u4e0d\u80fd\u88ab\u4fee\u6539</li> </ul> <pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nstruct student{\n    int id;\n};\n\nvoid foo(const student *ps)\n{\n    //*ps could not be changed in the function\n    cout&lt;&lt;ps-&gt;id&lt;&lt;endl;\n    cout&lt;&lt;(*ps).id&lt;&lt;endl;\n}\n\nvoid bar(const student &amp;s)\n{\n    //s could not be changed in the function\n    cout&lt;&lt;s.id&lt;&lt;endl;\n}\n\nint main()\n{\n    student s;\n    s.id=2;\n    foo(&amp;s);\n    return 0;\n}\n</code></pre> <ul> <li><code>char * s=\"Hello World!\";</code>\u5b9e\u8d28\u4e0a\u662f<code>const char *</code>\u7c7b\u578b\uff0c\u4e0d\u8981\u53bb\u4fee\u6539s\u4e2d\u7684\u5185\u5bb9\uff0c\u8fd9\u662f\u4e00\u79cd\u672a\u5b9a\u4e49\u7684\u884c\u4e3a(undefined behavior)\uff0c\u5e94\u8be5\u5199\u6210 <code>char s[]=\"Hello World!\";</code> </li> </ul> <pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nint main()\n{\n    const char *s1=\"Hello World\";\n    const char *s2=\"Hello World\";\n\n    cout&lt;&lt;(void*)s1&lt;&lt;endl;\n    cout&lt;&lt;(void*)s2&lt;&lt;endl;\n    return 0;\n    //\u8f93\u51fa\u7684\u7ed3\u679c\u662fs1\u548cs2\u7684\u5730\u5740\uff0c\u4ed6\u4eec\u7684\u7ed3\u679c\u662f\u4e00\u6837\u7684\n}\n</code></pre>"},{"location":"ZJU_CS/oop/#2_class","title":"2. \u7c7b class","text":""},{"location":"ZJU_CS/oop/#20","title":"2.0 \u7c7b\u7684\u57fa\u672c\u6982\u5ff5","text":"<ul> <li>C++\u4e2d\u7684\u5bf9\u8c61=\u5c5e\u6027+\u64cd\u4f5c objects=attributes+operations\uff0c\u5bf9\u4e8e\u9762\u5411\u5bf9\u8c61\u7684\u7f16\u7a0b\u800c\u8a00\uff0c\u4efb\u4f55\u4e1c\u897f\u90fd\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4efb\u4f55\u5bf9\u8c61\u90fd\u6709\u5bf9\u5e94\u7684\u7c7b\u578b\uff0c\u7a0b\u5e8f\u5c31\u662f\u4e00\u7cfb\u5217\u5bf9\u8c61\u4e92\u76f8\u4e4b\u95f4\u4f20\u9012\u4fe1\u606f\u6765\u5b8c\u6210\u529f\u80fd</li> <li>C++\u7684\u7c7b\u5305\u542b\u6210\u5458\u53d8\u91cf\u548c\u6210\u5458\u51fd\u6570</li> <li>C++\u4e2dclass\u7684\u5b9a\u4e49\uff0c\u5177\u4f53\u5b9e\u73b0\u548c\u8c03\u7528\u53ef\u4ee5\u5206\u6210\u4e09\u4e2a\u6587\u4ef6<ul> <li>\u5934\u6587\u4ef6header\u662f\u5177\u4f53\u5b9e\u73b0\u548c\u8c03\u7528\u4e4b\u95f4\u7684\u63a5\u53e3\uff0c\u6bcf\u4e2a\u7c7b\u7684\u5b9a\u4e49\u9700\u8981\u75281\u4e2a\u5934\u6587\u4ef6</li> </ul> </li> <li><code>::</code>\u64cd\u4f5c\u7b26\u53ef\u4ee5\u7528\u6765\u8bbf\u95ee\u7c7b\u4e2d\u7684\u5185\u5bb9</li> </ul>"},{"location":"ZJU_CS/oop/#21","title":"2.1 \u6784\u9020\u51fd\u6570\u548c\u6790\u6784\u51fd\u6570","text":"<ul> <li> <p>constructor \u6784\u9020\u51fd\u6570</p> </li> <li> <p>\u6784\u9020\u51fd\u6570\u7684\u51fd\u6570\u540d\u548c\u7c7b\u7684\u540d\u5b57\u76f8\u540c\uff0c\u53ef\u4ee5\u4f20\u5165\u4e00\u4e9b\u53c2\u6570\u7528\u6765\u521d\u59cb\u5316\u4e00\u4e2a\u5bf9\u8c61\uff0c\u5728\u7c7b\u7684\u5bf9\u8c61\u88ab\u5b9a\u4e49\u7684\u65f6\u5019\u4f1a\u81ea\u52a8\u8c03\u7528\u6784\u9020\u51fd\u6570</p> </li> <li>default constructor \u9ed8\u8ba4\u6784\u9020\u51fd\u6570\uff0c\u4e0d\u9700\u8981\u53c2\u6570\u4e5f\u53ef\u4ee5\u4f7f\u7528\u7684\u6784\u9020\u51fd\u6570</li> <li> <p>\u521d\u59cb\u5316\u5217\u8868\uff1a\u5728\u51fd\u6570\u7b7e\u540d\u540e\u9762\uff0c\u5927\u62ec\u53f7\u4e4b\u524d\u76f4\u63a5\u5bf9\u7c7b\u4e2d\u5b9a\u4e49\u7684\u53d8\u91cf\u8fdb\u884c\u8d4b\u503c</p> <ul> <li>const\u7c7b\u578b\u7684\u6210\u5458\u53d8\u91cf\u521d\u59cb\u5316\u53ea\u80fd\u7528\u521d\u59cb\u5316\u5217\u8868 </li> <li>\u6784\u9020\u51fd\u6570\u7684\u6267\u884c\u5206\u4e3a\u4e24\u4e2a\u9636\u6bb5\uff1a\u521d\u59cb\u5316\u9636\u6bb5\u548c\u51fd\u6570\u6267\u884c\u9636\u6bb5\uff0c\u4f1a\u5148\u6267\u884c\u521d\u59cb\u5316\u5217\u8868\u91cc\u7684\u8d4b\u503c\uff0c\u5728\u8fdb\u5165\u51fd\u6570\u4e3b\u4f53\u8fdb\u884c\u5bf9\u5e94\u7684\u64cd\u4f5c</li> </ul> </li> <li> <p>Destructor \u6790\u6784\u51fd\u6570</p> </li> <li> <p>\u6790\u6784\u51fd\u6570\u7684\u51fd\u6570\u540d\u662f\u7c7b\u540d\u524d\u9762\u52a0\u4e00\u4e2a~\uff0c\u6790\u6784\u51fd\u6570\u4e0d\u9700\u8981\u53c2\u6570\uff0c\u5728\u7c7b\u7684\u751f\u547d\u5468\u671f\u7ed3\u675f\u7684\u65f6\u5019\u4f1a\u88ab\u7f16\u8bd1\u5668\u81ea\u52a8\u8c03\u7528 </p> </li> <li> <p>function overloading \u51fd\u6570\u91cd\u8f7d\uff1a</p> </li> <li> <p>\u51fd\u6570\u540d\u76f8\u540c\u800c\u53c2\u6570\u7684\u4e2a\u6570\u548c\u7c7b\u578b\u4e0d\u540c\u7684\u51e0\u4e2a\u51fd\u6570\u6784\u6210\u91cd\u8f7d\u5173\u7cfb\uff0c\u4e00\u4e2a\u7c7b\u53ef\u4ee5\u6709\u591a\u4e2a\u4e0d\u540c\u7684\u6784\u9020\u51fd\u6570\u6765\u89e3\u51b3\u4e0d\u540c\u60c5\u51b5\u4e0b\u7684\u6784\u9020</p> </li> <li> <p>default value\uff1a\u7f3a\u7701\u503c\uff0c\u53ef\u4ee5\u5728\u51fd\u6570\u53c2\u6570\u8868\u4e2d\u76f4\u63a5\u58f0\u660e\u4e00\u4e9b\u53c2\u6570\u7684\u503c\uff0c\u4f46\u662f\u5fc5\u987b\u8981\u4ece\u53f3\u5f80\u5de6\uff0c\u5f53\u4f20\u5165\u7684\u53c2\u6570\u7f3a\u7701\u65f6\u51fd\u6570\u9ed8\u8ba4\u5c06\u5df2\u7ecf\u58f0\u660e\u7684\u503c\u4f5c\u4e3a\u53c2\u6570\u7684\u503c</p> </li> <li> <p>constant object\u5e38\u91cf\u5bf9\u8c61</p> </li> <li> <p>\u9700\u8981\u52a0const\u58f0\u660e\uff0c\u5728\u58f0\u660e\u4e4b\u540e\u5c31\u4e0d\u80fd\u6539\u53d8\u8fd9\u4e2a\u5bf9\u8c61\u5185\u90e8\u53d8\u91cf\u7684\u503c</p> </li> <li>\u4f1a\u6709\u4e00\u4e9b\u6210\u5458\u51fd\u6570\u4e0d\u80fd\u6b63\u5e38\u4f7f\u7528</li> <li> <p>\u5728\u6210\u5458\u51fd\u6570\u53c2\u6570\u8868\u540e\u9762\u52a0const\u53ef\u4ee5\u6210\u4e3aconst\u578b\u6210\u5458\u51fd\u6570\uff0cconst\u7c7b\u578b\u7684\u6210\u5458\u51fd\u6570\u4e0d\u80fd\u4fee\u6539\u6210\u5458\u53d8\u91cf\u7684\u503c</p> <ul> <li> <p>const\u58f0\u660e\u5199\u5728\u51fd\u6570\u7684\u5f00\u5934\u8868\u793a\u51fd\u6570\u7684\u8fd4\u56de\u503c\u7c7b\u578b\u662fconst</p> </li> <li> <p>const\u58f0\u660e\u5199\u5728\u51fd\u6570\u7b7e\u540d\u7684\u672b\u5c3e\u8868\u793a\u8fd9\u4e2a\u6210\u5458\u51fd\u6570\u4e0d\u80fd\u4fee\u6539\u7c7b\u4e2d\u5b9a\u4e49\u7684\u6210\u5458\u53d8\u91cf\uff0c\u88ab\u79f0\u4e3a\u5e38\u6210\u5458\u51fd\u6570 </p> </li> <li> <p>\u4f46\u662f\u5982\u679c\u662f\u6210\u5458\u53d8\u91cf\u4e2d\u6709\u6307\u9488\uff0c\u5e76\u4e0d\u80fd\u4fdd\u8bc1\u6307\u9488\u6307\u5411\u7684\u5185\u5bb9\u4e0d\u88ab\u4fee\u6539</p> </li> <li> <p>const\u7c7b\u578b\u7684\u51fd\u6570\u548c\u975econst\u7c7b\u578b\u7684\u51fd\u6570\u4e5f\u53ef\u4ee5\u6784\u6210\u91cd\u8f7d\u5173\u7cfb\uff0c\u6bd4\u5982\uff1a</p> <pre><code>class A {\npublic:\n    void foo() {\n        cout &lt;&lt; \"A::foo();\" &lt;&lt; endl;\n    }\n    void foo() const {\n        cout &lt;&lt; \"A::foo() const;\" &lt;&lt; endl;\n    }\n};\n\nint main()\n{\n    A a;\n    a.foo(); //\u8bbf\u95ee\u7684\u662f\u975econst\u7c7b\u578b\u7684foo\n    const A aa;\n    aa.foo(); //\u8bbf\u95ee\u7684\u662fconst\u7c7b\u578b\u7684foo\n    return 0;\n}\n</code></pre> </li> <li> <p>const\u7c7b\u578b\u7684\u6210\u5458\u51fd\u6570\u7684\u4f7f\u7528\u89c4\u5219\u5982\u4e0b\uff1a</p> <ul> <li>non-const\u6210\u5458\u51fd\u6570\u4e0d\u80fd\u8c03\u7528const\u7c7b\u578b\u5bf9\u8c61\u7684\u6210\u5458\u53d8\u91cf\uff0c\u800cconst\u7c7b\u578b\u53ef\u4ee5\u8bbf\u95ee</li> <li>const\u7c7b\u578b\u51fd\u6570\u4e0d\u4f1a\u6539\u53d8\u4efb\u4f55\u6210\u5458\u53d8\u91cf\u7684\u503c</li> <li>\u6784\u6210\u91cd\u8f7d\u5173\u7cfb\u7684\u65f6\u5019\uff0cconst\u7c7b\u578b\u7684\u5bf9\u8c61\u53ea\u80fd\u8c03\u7528const\u7c7b\u578b\u7684\u6210\u5458\u51fd\u6570\uff0c\u4e0d\u80fd\u8c03\u7528non-const\uff0c\u800c\u975econst\u7c7b\u578b\u7684\u5bf9\u8c61\u4f18\u5148\u8c03\u7528non-const\u7684\u6210\u5458\u51fd\u6570\uff0c\u5982\u679c\u6ca1\u6709non-const\u518d\u8c03\u7528const\u7c7b\u578b\u7684</li> </ul> </li> </ul> </li> <li> <p>copy constructor\u62f7\u8d1d\u6784\u9020\u51fd\u6570</p> </li> <li> <p>\u628a\u4e00\u4e2a\u5bf9\u8c61\u76f4\u63a5\u8d4b\u503c\u7ed9\u53e6\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4e00\u822c\u7684\u5f62\u5f0f\u4e3a<code>class_name(const class_name &amp; copy_class_var</code>)`\uff0c\u901a\u8fc7\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u53ef\u4ee5\u5b9e\u73b0\u5bf9\u8c61\u4e4b\u95f4\u7684\u4e92\u76f8\u8d4b\u503c</p> </li> <li> <p>\u5982\u679c\u5b9a\u4e49\u53d8\u91cf\u65f6\u76f4\u63a5\u7ed9\u53d8\u91cf\u7528\u540c\u7c7b\u578b\u7684\u53d8\u91cf\u8d4b\u503c\uff0c\u8c03\u7528\u7684\u5c31\u662f\u62f7\u8d1d\u6784\u9020\u51fd\u6570\uff0c\u5982\u679c\u662f\u5b9a\u4e49\u4e4b\u540e\u518d\u8d4b\u503c\uff0c\u5c31\u662f\u8c03\u7528\u4e86\u91cd\u8f7d\u4e4b\u540e\u7684\u7b49\u53f7\uff0c\u6bd4\u5982\u4e0b\u9762\u8fd9\u4e00\u6bb5\u4ee3\u7801</p> <p><pre><code>class A {\n  A() {}  \n  A(const A&amp; a) {}\n  A&amp; operator=(const A&amp; a) {}\n};\n\nint main()\n{\n    A a; \n    A b = a; //\u8c03\u7528\u62f7\u8d1d\u6784\u9020\u51fd\u6570\n    A c;\n    c = a; //\u8c03\u7528\u91cd\u8f7d\u4e4b\u540e\u7684\u7b49\u53f7\n}\n</code></pre> - C++\u4e2d\u7684\u62f7\u8d1d\uff1a\u6d45\u62f7\u8d1d\u548c\u6df1\u62f7\u8d1d  - \u6d45\u62f7\u8d1d\uff1a\u5728\u539f\u6765\u5df2\u6709\u7684\u5185\u5b58\u4e2d\u589e\u52a0\u4e00\u4e2a\u65b0\u7684\u6307\u9488\u6307\u5411\u8fd9\u4e00\u6bb5\u5185\u5b58 - \u6bd4\u5982<code>string s1=\"zyc\"; string s2(s1);</code>  \u5c31\u662f\u4e00\u79cd\u6d45\u62f7\u8d1d  - \u6df1\u62f7\u8d1d\uff1a\u5206\u914d\u4e00\u5757\u65b0\u7684\u5185\u5b58\uff0c\u590d\u5236\u5bf9\u5e94\u7684\u503c\uff0c\u5e76\u5b9a\u4e49\u4e00\u4e2a\u65b0\u7684\u6307\u9488\u6307\u5411\u8fd9\u4e00\u5757\u5185\u5b58 - \u7f3a\u7701\u7684\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u548c\u8d4b\u503c\u8fd0\u7b97\u7b26\u8fdb\u884c\u7684\u90fd\u662f\u6d45\u62f7\u8d1d   - \u62f7\u8d1d\u6784\u9020\u51fd\u6570\u548c\u8d4b\u503c\u8fd0\u7b97\u7b26\u7684\u533a\u522b - \u62f7\u8d1d\u6784\u9020\u51fd\u6570\u662f\u5728\u5bf9\u8c61\u88ab\u521b\u5efa\u7684\u65f6\u5019\u8c03\u7528\u7684\u3001 - \u8d4b\u503c\u8fd0\u7b97\u7b26\u53ea\u80fd\u4f7f\u7528\u4e8e\u5df2\u7ecf\u5b58\u5728\u7684\u5bf9\u8c61\uff0c\u4e5f\u5c31\u662f\u8fdb\u884c\u8d4b\u503c\u4e4b\u524d\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u5df2\u7ecf\u88ab\u67d0\u4e2a\u6784\u9020\u51fd\u6570\u6784\u9020\u51fa\u6765\u4e86   - \u4f8b\u5982</p> </li> </ul> <pre><code>#include&lt;cstring&gt;\n#include&lt;iostream&gt;\nusing namespace std;\n\nstruct Person{\n    char *name;\n    Person(const char *s){\n        name=new char[strlen(s)+1];\n        strcpy(name,s);\n    }\n    ~Person(){\n        delete[] name;\n    }\n}\n\n//\u4e0d\u9700\u8981\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u7684\u4e00\u79cd\u65b9\u5f0f\nPerson bar(const char *s)\n{\n    cout&lt;&lt;\"in bar()\"&lt;&lt;endl;\n    return Person(s);\n}\n\nint main()\n{\n    Person p1(\"Trump\");\n    Person p2=p1;\n    cout&lt;&lt;(void *)p1.name&lt;&lt;endl;\n    cout&lt;&lt;(void *)p2.name&lt;&lt;endl; //\u4f1a\u53d1\u73b0\u8f93\u51fa\u7684\u5730\u5740\u662f\u4e00\u6837\u7684\uff0c\u8bf4\u660e\u6307\u9488\u5728\u9ed8\u8ba4\u60c5\u51b5\u4e0b\u4e5f\u8fdb\u884c\u4e86copy,\u82e5\u8981\u907f\u514d\u5219\u5e94\u8be5\u81ea\u5df1\u7f16\u5199\u62f7\u8d1d\u6784\u9020\u51fd\u6570\n\n    return 0;\n}\n</code></pre>"},{"location":"ZJU_CS/oop/#22_static","title":"2.2 static\u7c7b\u578b","text":"<ul> <li>\u7c7b\u4e2d\u7684\u6210\u5458(\u53d8\u91cf\u548c\u51fd\u6570)\u5206\u4e3a\u4e24\u79cd</li> <li>\u9759\u6001\u6210\u5458\uff1a\u5728\u7c7b\u5185\u6240\u6709\u5bf9\u8c61\u4e4b\u95f4\u5171\u4eab</li> <li>\u5b9e\u4f8b\u6210\u5458\uff1a\u53ea\u80fd\u5728\u67d0\u4e2a\u5177\u4f53\u7684\u5bf9\u8c61\u4e2d\u8c03\u7528</li> <li> <p>\u9759\u6001\u51fd\u6570\u4e0d\u80fd\u8bbf\u95ee\u5b9e\u4f8b\u6210\u5458 </p> </li> <li> <p>\u4e4b\u524d\u5df2\u7ecf\u8bb2\u5230\u4e86static\u7c7b\u578b\u7684\u5168\u5c40\u53d8\u91cf\u53ea\u5728\u5f53\u524d\u6587\u4ef6\u6709\u6548\uff0c\u4e0d\u80fd\u901a\u8fc7extern\u8de8\u6587\u4ef6\u8c03\u7528\uff0c\u800c\u51fd\u6570\u4e2d\u7684static\u7c7b\u578b\u7684\u53d8\u91cf\u5728\u7b2c\u4e00\u6b21\u8c03\u7528\u7684\u65f6\u5019\u4f1a\u88ab\u521d\u59cb\u5316\uff0c\u4e4b\u540e\u518d\u8c03\u7528\u8be5\u51fd\u6570\u8fd9\u4e2astatic\u7c7b\u578b\u7684\u53d8\u91cf\u4fdd\u6301\u4e0a\u4e00\u6b21\u51fd\u6570\u8c03\u7528\u7ed3\u675f\u65f6\u7684\u503c </p> </li> </ul> <pre><code>#include&lt;iostream&gt;\nusing namespace std;\n\nclass A{\n    piblic:\n        A() {cout&lt;&lt;\"A::A()\"&lt;&lt;endl;}\n        ~A(){cout&lt;&lt;\"A::~A()\"&lt;&lt;endl;}\n}\n\nvoid f(int n)\n{\n    if(x&gt;10)\n        static A a;\n    cout&lt;&lt;\"f()\"&lt;&lt;endl;\n}\nint main()\n{\n    cout&lt;&lt;\"start\"&lt;&lt;endl;\n    f(1);\n    f(11);\n    return 0;\n}\n//\u6b64\u65f6\u53ea\u6709\u5728\u7b2c\u4e8c\u6b21\u8c03\u7528\u65f6a\u624d\u4f1a\u88ab\u6784\u9020\n//\u65e0\u8bba\u4ec0\u4e48\u60c5\u51b5\uff0cA\u7684\u6784\u9020\u548c\u6790\u6784\u51fd\u6570\u53ea\u4f1a\u88ab\u6267\u884c\u4e00\u6b21\n</code></pre> <ul> <li>\u7c7b\u4e2d\u7684static</li> <li> <p>\u7c7b\u4e2d\u5b9a\u4e49\u7684static\u7c7b\u578b\u7684\u53d8\u91cf\u662f\u9759\u6001\u6210\u5458\u53d8\u91cf\uff0c\u5176\u503c\u4f1a\u5728\u8fd9\u4e2a\u7c7b\u7684\u6240\u6709\u6210\u5458\u4e4b\u95f4\u5171\u4eab </p> <ul> <li>non-const\u7c7b\u578b\u7684\u9759\u6001\u6210\u5458\u53d8\u91cf\u9700\u8981\u5728\u7c7b\u7684\u5916\u9762\u8fdb\u884c\u5b9a\u4e49\uff0c\u6bd4\u5982\uff1a</li> </ul> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass A {\npublic:\n    static int count;\n    A() {\n        A::count++;\n    }\n};\n\nint A::count = 0; // \u5728\u7c7b\u7684\u5916\u90e8\u8d4b\u503c\u7684\u65f6\u5019\u4e0d\u9700\u8981\u8bf4\u660estatic\uff0c\u4f46\u662f\u9700\u8981\u6ce8\u660eA::\uff0c\u5426\u5219\u5c31\u662f\u4e00\u4e2a\u65b0\u7684\u53d8\u91cf\n\nint main()\n{\n    A* array = new A[100];\n    cout&lt;&lt;A::count&lt;&lt;endl;\n}\n</code></pre> <ul> <li>const\u7c7b\u578b\u7684\u9759\u6001\u6210\u5458\u53d8\u91cf\u4f5c\u4e3a\u7c7b\u5185\u5171\u4eab\u7684\u4e00\u4e2a\u5e38\u91cf\uff0c\u4e5f\u9700\u8981\u5728\u7c7b\u7684\u5916\u90e8\u8fdb\u884c\u5b9a\u4e49\uff0c\u6b64\u65f6\u8981\u5199\u51fa\u5173\u952e\u5b57const\uff0c\u5e76\u4e14\u8fd9\u4e2a\u9759\u6001\u6210\u5458\u53d8\u91cf\u662f\u4e0d\u80fd\u88ab\u6539\u53d8\u7684</li> </ul> </li> <li> <p>\u9759\u6001\u6210\u5458\u51fd\u6570\uff1a</p> <ul> <li>\u53ef\u4ee5\u8bbf\u95ee\u7c7b\u5b9a\u4e49\u4e2d\u7684\u9759\u6001\u6210\u5458\u53d8\u91cf\uff0c\u4f46\u662f\u4e0d\u80fd\u76f4\u63a5\u8bbf\u95ee\u666e\u901a\u7684\u6210\u5458\u53d8\u91cf</li> <li>\u9700\u8981\u5728\u51fd\u6570\u5b9a\u4e49\u4e4b\u524d\u52a0static\u5173\u952e\u5b57</li> </ul> </li> </ul>"},{"location":"ZJU_CS/oop/#23_inline_function","title":"2.3 Inline Function\u5185\u8054\u51fd\u6570","text":"<ul> <li>\u9700\u8981\u5728\u51fd\u6570\u540d\u524d\u9762\u52a0\u5173\u952e\u5b57<code>inline</code> </li> <li>\u5185\u8054\u51fd\u6570\u5728\u7f16\u8bd1\u671f\u4f1a\u88ab\u7f16\u8bd1\u5668\u5728\u8c03\u7528\u5904\u76f4\u63a5\u6269\u5c55\u4e3a\u4e00\u4e2a\u5b8c\u6574\u7684\u51fd\u6570\uff0c\u56e0\u6b64\u53ef\u4ee5\u51cf\u5c11\u8fd0\u884c\u65f6\u8c03\u7528\u51fd\u6570\u7684cost</li> <li>\u5185\u8054\u51fd\u6570\u7684\u5b9a\u4e49\u548c\u51fd\u6570\u4e3b\u4f53\u90e8\u5206\u90fd\u5e94\u8be5\u5199\u5728\u5934\u6587\u4ef6\u4e2d</li> <li>\u672c\u8d28\u662f\u7a7a\u95f4\u6362\u65f6\u95f4</li> <li>class\u4e2d\u7684\u51fd\u6570\u90fd\u662f\u9ed8\u8ba4inline\u7684</li> <li>an inline function is expanded in place, like a preprocessormacro, so the overhead of the function call is eliminated,\u4e0d\u9700\u8981\u51fd\u6570\u8c03\u7528\u4ea7\u751f\u7684\u5f00\u9500\uff0c\u7531\u7f16\u8bd1\u5668\u76f4\u63a5\u4f18\u5316\uff0c\u4f46\u662f\u53ef\u80fd\u4f1a\u4f7f\u5f97\u9700\u8981\u7f16\u8bd1\u7684\u4ee3\u7801\u91cf\u589e\u5927(\u867d\u7136\u5199\u7684\u4eba\u662f\u770b\u4e0d\u51fa\u6765\u7684)\uff0c\u4e3b\u8981\u4f5c\u7528\u662f\u51cf\u5c0f\u51fd\u6570\u8c03\u7528\u65f6\u7684\u5f00\u9500\uff0c\u4e00\u822c\u5728\u51fd\u6570\u6bd4\u8f83\u5c0f\u7684\u65f6\u5019\u624d\u4f1a\u4f7f\u7528</li> </ul>"},{"location":"ZJU_CS/oop/#24_inheritance","title":"2.4 \u7ee7\u627fInheritance","text":"<ul> <li> <p>composition \u7ec4\u5408\uff1a\u628a\u5176\u4ed6\u7684\u7c7b\u4f5c\u4e3a\u81ea\u5df1\u7684\u6210\u5458\u53d8\u91cf</p> </li> <li> <p>Inheritance\uff1a\u4ece\u57fa\u7c7b\u4e2d\u7ee7\u627f\u751f\u6210\u6d3e\u751f\u7c7b</p> </li> <li>\u6d3e\u751f\u7c7b\u7ee7\u627f\u4e86\u57fa\u7c7b\u7684\u6240\u6709\u53d8\u91cf\u548c\u6210\u5458\u51fd\u6570 </li> <li>\u6d3e\u751f\u7c7b\u4e2d\u4e0d\u80fd\u76f4\u63a5\u8bbf\u95ee\u57fa\u7c7b\u7684private\u7684\u53d8\u91cf\u548c\u6210\u5458\u51fd\u6570\uff0c\u4f46\u662f\u53ef\u4ee5\u901a\u8fc7\u57fa\u7c7b\u7684\u6210\u5458\u51fd\u6570\u6765\u8bbf\u95ee\u8fd9\u4e9b\u6210\u5458\u51fd\u6570\u548c\u53d8\u91cf</li> <li> <p>\u6d3e\u751f\u7c7b\u7684\u6784\u9020\u51fd\u6570</p> <ul> <li> <p>\u53ef\u4ee5\u5728\u6d3e\u751f\u7c7b\u7684\u6784\u9020\u51fd\u6570\u4e2d\u8c03\u7528\u57fa\u7c7b\u7684\u6784\u9020\u51fd\u6570</p> </li> <li> <p>\u6d3e\u751f\u7c7b\u5728\u88ab\u6784\u9020\u7684\u65f6\u5019\u4f1a\u5148\u8c03\u7528\u57fa\u7c7b\u7684\u6784\u9020\u51fd\u6570\uff0c\u518d\u8c03\u7528\u6d3e\u751f\u7c7b\u7684\u6784\u9020\u51fd\u6570\uff0c\u6790\u6784\u7684\u65f6\u5019\u5148\u8c03\u7528\u6d3e\u751f\u7c7b\u7684\u6790\u6784\u51fd\u6570\uff0c\u518d\u8c03\u7528\u57fa\u7c7b\u7684\u6790\u6784\u51fd\u6570</p> </li> <li>\u5982\u679c\u6d3e\u751f\u7c7b\u6ca1\u6709\u5b9a\u4e49\u6784\u9020\u51fd\u6570\uff0c\u5219\u76f4\u63a5\u8c03\u7528\u57fa\u7c7b\u7684\u6784\u9020\u51fd\u6570</li> <li>\u5982\u679c\u6d3e\u751f\u7c7b\u5b9a\u4e49\u4e86\u6784\u9020\u51fd\u6570\uff0c\u5728\u6267\u884c\u4e4b\u524d\u4f1a\u5148\u8c03\u7528\u57fa\u7c7b\u7684\u6784\u9020\u51fd\u6570\uff0c\u5982\u679c\u6d3e\u751f\u7c7b\u7684\u6784\u9020\u51fd\u6570\u4e2d\u6ca1\u6709\u663e\u5f0f\u8c03\u7528\u57fa\u7c7b\u7684\u6784\u9020\u51fd\u6570\uff0c\u5219\u4f1a\u9009\u62e9\u8c03\u7528\u57fa\u7c7b\u7684\u65e0\u53c2\u6784\u9020\u51fd\u6570</li> </ul> <pre><code>class A {\npublic:\n    int i;\n    A(int ii = 0): i(ii) {\n        cout&lt;&lt;\"A(): \"&lt;&lt;i&lt;&lt;endl;\n    }\n};\n\nclass B: public A {\npublic:\n    int i;\n    A a;\n    B(int ii = 0): i(ii) {\n        cout&lt;&lt;\"B(): \"&lt;&lt;i&lt;&lt;endl;\n    }\n};\n\nint main()\n{\n    B b(100);\n    return 0;\n}\n</code></pre> <ul> <li> <p>\u5f53\u7ee7\u627f\u548c\u7ec4\u5408\u4e24\u79cd\u60c5\u51b5\u540c\u65f6\u51fa\u73b0\u65f6\uff0c\u5148\u6784\u9020\u57fa\u7c7b\uff0c\u518d\u6784\u9020\u6d3e\u751f\u7c7b\u4e2d\u7ec4\u5408\u7684\u5176\u4ed6\u7c7b\uff0c\u518d\u6784\u9020\u6d3e\u751f\u7c7b\uff0c\u6790\u6784\u7684\u65f6\u5019\u7c7b\u4f3c </p> </li> <li> <p>Base class is always constructed first</p> </li> <li>\u5c31\u7b97\u7ec4\u5408\u7684\u7c7b\u5728\u521d\u59cb\u5316\u5217\u8868\u6216\u8005\u6784\u9020\u51fd\u6570\u4e2d\u6ca1\u6709\u8c03\u7528\u6784\u9020\u51fd\u6570\uff0cC++\u7f16\u8bd1\u5668\u4e5f\u4f1a\u81ea\u52a8\u8c03\u7528\u8fd9\u4e2a\u7c7b\u9ed8\u8ba4\u7684\u6784\u9020\u51fd\u6570</li> <li> <p>\u6d3e\u751f\u7c7b\u4e2d\u53ef\u4ee5\u5bf9\u57fa\u7c7b\u51fd\u6570\u8fdb\u884c\u91cd\u8f7d\uff0c\u6b64\u65f6\u5982\u679c\u6d3e\u751f\u7c7b\u5bf9\u8c61\u8c03\u7528\u5bf9\u5e94\u7684\u51fd\u6570\u6309\u7167\u6d3e\u751f\u7c7b\u4e2d\u7684\u540c\u540d\u51fd\u6570\u6267\u884c</p> </li> <li> <p>\u4ecd\u7136\u8c03\u7528\u57fa\u7c7b\u7684\u65b9\u6cd5<code>object.Base::function()</code> </p> </li> <li>class\u548cstruct\u7684\u533a\u522b\uff1aclass\u4e2d\u7684\u53d8\u91cf\u548c\u51fd\u6570\u9ed8\u8ba4\u4e3aprivate\uff0cstruct\u4e2d\u7684\u51fd\u6570\u9ed8\u8ba4\u4e3apublic</li> <li>\u8bbf\u95ee\u63a7\u5236</li> <li>public\uff1a\u6240\u6709\u60c5\u51b5\u4e0b\u53ef\u89c1</li> <li>protected\uff1a\u53ef\u4ee5\u88ab\u81ea\u5df1/\u6d3e\u751f\u7c7b\u548c\u53cb\u5143\u51fd\u6570\u8bbf\u95ee</li> <li>private\uff1a\u5bf9\u4e8e\u81ea\u5df1\u548c\u53cb\u5143\u51fd\u6570\u53ef\u89c1</li> <li>\u7ee7\u627f\u7684\u79cd\u7c7b\uff1apublic\uff0cprivate\uff0cprotected\u7ee7\u627f\uff0c\u7ee7\u627f\u4e4b\u540e\u7684\u57fa\u7c7b\u53d8\u91cf\u7684\u8bbf\u95ee\u63a7\u5236\u53d6\u539f\u672c\u7c7b\u578b\u548c\u7ee7\u627f\u7c7b\u578b\u4e2d\u8f83\u4e25\u683c\u7684</li> <li>\u53ef\u4ee5\u901a\u8fc7\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u628a\u6d3e\u751f\u7c7b\u7684\u5bf9\u8c61\u8f6c\u5316\u4e3a\u57fa\u7c7b\u7684\u5bf9\u8c61</li> </ul> </li> </ul>"},{"location":"ZJU_CS/oop/#25_friend","title":"2.5 \u53cb\u5143 friend","text":"<ul> <li>\u53cb\u5143\u51fd\u6570</li> <li>\u5728\u7c7b\u4e2d\u58f0\u660e\u4e00\u4e2a\u5168\u5c40\u51fd\u6570\u6216\u8005\u5176\u4ed6\u7c7b\u7684\u6210\u5458\u51fd\u6570\u4e3a<code>friend</code></li> <li>\u53ef\u4ee5\u4f7f\u8fd9\u4e9b\u51fd\u6570\u62e5\u6709\u8bbf\u95ee\u7c7b\u5185private\u548cprotected\u7c7b\u578b\u7684\u53d8\u91cf\u548c\u51fd\u6570\u7684\u6743\u9650</li> <li>\u53cb\u5143\u51fd\u6570\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u7c7b\uff0c\u8fd9\u79cd\u60c5\u51b5\u4e0b\u88ab\u79f0\u4e3a\u662f\u53cb\u5143\u7c7b\uff0c\u6574\u4e2a\u7c7b\u548c\u6240\u6709\u7684\u6210\u5458\u90fd\u662f\u53cb\u5143</li> <li>\u53cb\u5143\u51fd\u6570\u672c\u8eab\u4e0d\u662f\u90a3\u4e2a\u7c7b\u7684\u6210\u5458\u51fd\u6570\uff0c\u51fd\u6570\u7b7e\u540d\u91cc\u4e0d\u9700\u8981<code>className::</code>\u6765\u8868\u793a\u662f\u8fd9\u4e2a\u7c7b\u7684\u6210\u5458\u51fd\u6570\uff0c\u76f4\u63a5\u4f5c\u4e3a\u666e\u901a\u51fd\u6570\u5373\u53ef</li> </ul> <pre><code>class A {\nprivate:\n    int val;\npublic:\n    A(int value): val(value) {\n        cout&lt;&lt;\"A()\"&lt;&lt;endl;\n    }\n    friend void showValue(A a);\n};\n\nvoid showValue(A a)\n{\n    cout&lt;&lt;a.val&lt;&lt;endl;\n}\n</code></pre>"},{"location":"ZJU_CS/oop/#26","title":"2.6 \u591a\u6001\u548c\u865a\u51fd\u6570","text":"<ul> <li> <p>\u591a\u6001 Polymorphism</p> </li> <li> <p>\u540c\u4e00\u6bb5\u4ee3\u7801\u53ef\u4ee5\u4ea7\u751f\u4e0d\u540c\u6548\u679c</p> </li> <li> <p>\u5bf9\u4e8e\u7ee7\u627f\u4f53\u7cfb\u4e2d\u7684\u67d0\u4e00\u7cfb\u5217\u540c\u540d\u51fd\u6570\uff0c\u4e0d\u540c\u7684\u7c7b\u578b\u4f1a\u8c03\u7528\u4e0d\u7528\u7684\u51fd\u6570</p> </li> <li> <p>\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u6709\u7ee7\u627f\u5173\u7cfb\u7684\u7c7b\u4e4b\u95f4\u6709\u51fd\u6570\u6784\u6210\u91cd\u8f7d\u5173\u7cfb\uff0c\u4f9d\u7136\u4f1a\u6839\u636e\u53d8\u91cf\u7c7b\u578b\u6765\u8c03\u7528\u5bf9\u5e94\u7684\u51fd\u6570\uff0c\u6bd4\u5982\uff1a</p> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nclass A{\npublic:\n    virtual void foo() {\n        cout&lt;&lt;1&lt;&lt;endl;\n    }\n};\n\nclass B: public A{\npublic:\n    virtual void foo() {\n        cout&lt;&lt;2&lt;&lt;endl;\n    }\n};\n\nint main()\n{\n    A a;\n    B b;\n    a.foo();\n    b.foo();\n    return 0;\n}\n</code></pre> <ul> <li>\u6b64\u65f6\u8fd0\u884c\u7684\u7ed3\u679c\u662f1\u548c2\uff0c\u5373A\u578b\u7684\u53d8\u91cf\u7684foo\u51fd\u6570\u662f\u57fa\u7c7b\u4e2d\u7684\uff0cB\u7c7b\u578b\u7684\u53d8\u91cf\u7684foo\u51fd\u6570\u662f\u6d3e\u751f\u7c7b\u4e2d\u7684</li> </ul> </li> <li> <p>\u9759\u6001\u94fe\u63a5</p> </li> <li> <p>\u51fd\u6570\u7684\u8c03\u7528\u5728\u7a0b\u5e8f\u5f00\u59cb\u8fd0\u884c\u4e4b\u524d\u5c31\u5df2\u7ecf\u786e\u5b9a\u4e86</p> </li> <li> <p>\u5bf9\u4e8e\u50cf\u4e0b\u9762\u8fd9\u6837\u7684\u60c5\u51b5\uff0c\u57fa\u7c7b\u7684\u6307\u9488(\u5f15\u7528)\u6307\u5411\u6d3e\u751f\u7c7b\uff0c\u5e76\u4e14\u8c03\u7528\u4e86\u57fa\u7c7b\u4e2d\u4e5f\u5b58\u5728\u7684\u540c\u540d\u51fd\u6570\uff0c\u6700\u7ec8\u8c03\u7528\u7684\u90fd\u662f\u57fa\u7c7b\u7684\u540c\u540d\u51fd\u6570</p> <pre><code>class Shape {\n   protected:\n      int width, height;\n   public:\n      Shape( int a=0, int b=0)\n      {\n         width = a;\n         height = b;\n      }\n      int area()\n      {\n         cout &lt;&lt; \"Parent class area :\" &lt;&lt;endl;\n         return 0;\n      }\n};\nclass Rectangle: public Shape{\n   public:\n      Rectangle( int a=0, int b=0):Shape(a, b) { }\n      int area ()\n      { \n         cout &lt;&lt; \"Rectangle class area :\" &lt;&lt;endl;\n         return (width * height); \n      }\n};\nclass Triangle: public Shape{\n   public:\n      Triangle( int a=0, int b=0):Shape(a, b) { }\n      int area ()\n      { \n         cout &lt;&lt; \"Triangle class area :\" &lt;&lt;endl;\n         return (width * height / 2); \n      }\n};\n\nint main( )\n{\n   Shape *shape;\n   Rectangle rec(10,7);\n   Triangle  tri(10,5);\n   shape = &amp;rec;\n   shape-&gt;area();\n   shape = &amp;tri;\n   shape-&gt;area();\n   return 0;\n}\n</code></pre> </li> <li> <p>\u865a\u51fd\u6570 Virtual Function</p> </li> <li> <p>\u4e00\u79cd\u7528\u4e8e\u5b9e\u73b0\u591a\u6001\u7684\u673a\u5236\uff0c\u6838\u5fc3\u7406\u5ff5\u662f\u901a\u8fc7\u57fa\u7c7b\u8bbf\u95ee\u6d3e\u751f\u7c7b\u5b9a\u4e49\u7684\u51fd\u6570</p> <ul> <li>\u8fd9\u79cd\u65b9\u5f0f\u79f0\u4e3a\u52a8\u6001\u94fe\u63a5 </li> <li> <p>\u7528\u4e8e\u533a\u5206\u6d3e\u751f\u7c7b\u4e2d\u548c\u57fa\u7c7b\u540c\u540d\u7684\u65b9\u6cd5\u51fd\u6570\uff0c\u9700\u8981\u5c06\u57fa\u7c7b\u7684\u6210\u5458\u51fd\u6570\u7c7b\u578b\u58f0\u660e\u4e3avirtual</p> </li> <li> <p>\u57fa\u7c7b\u4e2d\u7684\u6790\u6784\u51fd\u6570\u4e00\u5b9a\u8981\u4e3a\u865a\u51fd\u6570\uff0c\u5426\u5219\u4f1a\u51fa\u73b0\u5bf9\u8c61\u91ca\u653e\u9519\u8bef </p> </li> <li>\u7eaf\u865a\u51fd\u6570\uff1a<code>virtual int func() = 0;</code> \u8868\u660e\u8be5\u51fd\u6570\u6ca1\u6709\u4e3b\u4f53\uff0c\u57fa\u7c7b\u4e2d\u6ca1\u6709\u7ed9\u51fa\u6709\u610f\u4e49\u7684\u5b9e\u73b0\u65b9\u5f0f\uff0c\u9700\u8981\u5728\u6d3e\u751f\u7c7b\u4e2d\u8fdb\u884c\u6269\u5c55</li> </ul> </li> <li> <p>override\u8bed\u6cd5\uff1a\u6d3e\u751f\u7c7b\u4e2d\u53ef\u4ee5\u7528override\u5173\u952e\u5b57\u6765\u58f0\u660e\uff0c\u8868\u793a\u5bf9\u57fa\u7c7b\u865a\u51fd\u6570\u7684\u91cd\u8f7d</p> </li> <li> <p>\u865a\u51fd\u6570\u9700\u8981\u501f\u52a9\u6307\u9488\u548c\u5f15\u7528\u8fbe\u5230\u591a\u6001\u7684\u6548\u679c</p> <ul> <li>\u5982\u679c\u57fa\u7c7b\u6307\u9488/\u5f15\u7528\u6307\u5411\u57fa\u7c7b\uff0c\u90a3\u5c31\u6b63\u5e38\u8c03\u7528\u57fa\u7c7b\u7684\u76f8\u5173\u6210\u5458\u51fd\u6570</li> <li>\u5982\u679c\u57fa\u7c7b\u6307\u9488\u6307\u5411\u6d3e\u751f\u7c7b\uff0c\u5219\u8c03\u7528\u7684\u65f6\u5019\u4f1a\u8c03\u7528\u6d3e\u751f\u7c7b\u7684\u6210\u5458\u51fd\u6570</li> <li>\u6d3e\u751f\u7c7b\u6307\u9488\u4e0d\u80fd\u6307\u5411\u57fa\u7c7b</li> </ul> <pre><code>class A{\npublic:\n    virtual void foo(){\n        cout&lt;&lt;\"A\"&lt;&lt;endl;\n    }\n};\n\nclass B{\npublic:\n    virtual void foo(){\n        cout&lt;&lt;\"B\"&lt;&lt;endl;\n    }\n}\n\nint main()\n{\n  A *a=new B();\n    a-&gt;foo(); //\u7ed3\u679c\u4e3aB\n  return 0;\n}\n</code></pre> </li> <li> <p>\u865a\u51fd\u6570\u7684\u5b9e\u73b0\u65b9\u5f0f\uff1a\u865a\u51fd\u6570\u8868 virtual table </p> <ul> <li>\u6bcf\u4e00\u4e2a\u6709\u865a\u51fd\u6570\u7684\u7c7b\u90fd\u4f1a\u6709\u4e00\u4e2a\u865a\u51fd\u6570\u8868\uff0c\u8be5\u7c7b\u7684\u4efb\u4f55\u5bf9\u8c61\u4e2d\u90fd\u5b58\u653e\u7740\u865a\u51fd\u6570\u8868\u7684\u6307\u9488\uff0c\u865a\u51fd\u6570\u8868\u4e2d\u5217\u51fa\u4e86\u8be5\u7c7b\u7684\u865a\u51fd\u6570\u5730\u5740 </li> <li>\u865a\u51fd\u6570\u8868\u662f\u4e00\u4e2a\u6307\u9488\u6570\u7ec4\uff0c\u91cc\u9762\u5b58\u653e\u4e86\u4e00\u7cfb\u5217\u865a\u51fd\u6570\u7684\u6307\u9488</li> <li>\u865a\u51fd\u6570\u7684\u8c03\u7528\u9700\u8981\u7ecf\u8fc7\u865a\u51fd\u6570\u8868\u7684\u67e5\u8be2\uff0c\u975e\u865a\u51fd\u6570\u7684\u8c03\u7528\u4e0d\u9700\u8981\u7ecf\u8fc7\u865a\u51fd\u6570\u8868</li> <li>\u865a\u51fd\u6570\u8868\u5728\u4ee3\u7801\u7684\u7f16\u8bd1\u9636\u6bb5\u5c31\u5b8c\u6210\u4e86\u6784\u9020</li> <li>\u4e00\u4e2a\u7c7b\u53ea\u6709\u4e00\u5f20\u865a\u51fd\u6570\u8868\uff0c\u6bcf\u4e00\u4e2a\u5bf9\u8c61\u90fd\u6709\u6307\u5411\u865a\u51fd\u6570\u8868\u7684\u4e00\u4e2a\u6307\u9488<code>__vptr</code> </li> <li>\u591a\u6001\u7684\u51fd\u6570\u8c03\u7528\u8bed\u53e5\u88ab\u7f16\u8bd1\u6210\u4e00\u7cfb\u5217\u6839\u636e\u57fa\u7c7b\u6307\u9488\u6240\u6307\u5411\u7684\u5bf9\u8c61\u5b58\u653e\u7684\u865a\u51fd\u6570\u8868\u7684\u5730\u5740\uff0c\u5728\u4ece\u865a\u51fd\u6570\u8868\u4e2d\u67e5\u627e\u5730\u5740\u8c03\u7528\u5bf9\u5e94\u7684\u865a\u51fd\u6570</li> <li>\u4e8b\u5b9e\u4e0a\u865a\u51fd\u6570\u4f1a\u7ed9\u51fd\u6570\u52a0\u4e0a\u4e00\u4e2a\u65b0\u7684\u53c2\u6570\uff0c\u662f\u4e00\u4e2a\u6307\u9488\uff0c\u5360\u75284\u5b57\u8282</li> </ul> </li> <li> <p>\u63a5\u53e3(C++\u62bd\u8c61\u7c7b)</p> </li> <li> <p>\u63cf\u8ff0\u4e86\u4e00\u4e2a\u7c7b\u5e94\u8be5\u6709\u7684\u529f\u80fd\u548c\u884c\u4e3a\uff0c\u4f46\u662f\u4e0d\u7528\u5728\u8fd9\u4e2a\u7c7b\u4e2d\u5b9e\u73b0\uff0c\u800c\u662f\u5728\u6d3e\u751f\u7c7b\u4e2d\u5b9e\u73b0</p> </li> <li>\u53ef\u4ee5\u4f7f\u7528\u7eaf\u865a\u51fd\u6570\u6765\u5b9e\u73b0\u62bd\u8c61\u7c7b\u7684\u5b9a\u4e49\uff0c\u6bd4\u5982\uff1a</li> </ul> <pre><code>class Shape {\npublic:\n    virtual double getArea() = 0;\n    Shape(int a, int b): length(a), width(b) {}\nprotected:\n    int length;\n    int width;\n};\n\nclass Rectangle: public Shape {\npublic:\n    double getArea() {\n        return length * width;\n    }\n};\n\nclass Triangle: public Shape {\npublic:\n    double getArea() {\n        return length * width / 2;\n    }\n};\n</code></pre>"},{"location":"ZJU_CS/oop/#27","title":"2.7 \u865a\u51fd\u6570\u4f7f\u7528\u603b\u7ed3","text":"<ul> <li>\u60c5\u51b51\uff1a\u57fa\u7c7b\u548c\u6d3e\u751f\u7c7b\u90fd\u4e0d\u662fvirtual</li> <li>\u6b64\u65f6\u5bf9\u4e8e\u57fa\u7c7b\u7684\u5bf9\u8c61\u548c\u57fa\u7c7b\u7684\u6307\u9488\uff0c\u6267\u884c\u7684\u5c31\u662f\u57fa\u7c7b\u7684f\uff0c\u5bf9\u4e8e\u6d3e\u751f\u7c7b\u7684\u6267\u884c\u7684\u5c31\u662f\u6d3e\u751f\u7c7b\u7684f</li> </ul> <pre><code>class A {\npublic:\n    void f() {\n        cout &lt;&lt; \"af\" &lt;&lt; endl;\n    }\n};\n\nclass B: public A {\npublic:\n    void f() {\n        cout &lt;&lt; \"bf\" &lt;&lt;endl;\n    }\n};\n\nint main()\n{\n    A a;\n    B b;\n    a.f();\n    b.f();\n    A* pb = &amp;b;\n    pb-&gt;f();\n}\n</code></pre> <ul> <li> <p>\u60c5\u51b52\uff1a\u6d3e\u751f\u7c7b\u4e2d\u7684\u540c\u540d\u51fd\u6570\u662f\u865a\u51fd\u6570\uff1a\u65e0\u5f71\u54cd\uff0c\u548c1\u4e00\u6a21\u4e00\u6837</p> </li> <li> <p>\u60c5\u51b53\uff1a\u57fa\u7c7b\u4e2d\u7684\u662f\u865a\u51fd\u6570\uff0c\u6d3e\u751f\u7c7b\u4e2d\u4e0d\u6ce8\u660e\u662f\u865a\u51fd\u6570\uff1a\u6b64\u65f6\u6d3e\u751f\u7c7b\u7684\u5bf9\u8c61\u548c\u6307\u5411\u6d3e\u751f\u7c7b\u7684\u6307\u9488\u6267\u884c\u7684\u90fd\u662f\u6d3e\u751f\u7c7b\u7684\u51fd\u6570f\uff0c\u57fa\u7c7b\u7684\u5bf9\u8c61\u548c\u6307\u5411\u57fa\u7c7b\u5bf9\u8c61\u7684\u6307\u9488\u6267\u884c\u7684\u90fd\u662f\u57fa\u7c7b\u7684\u51fd\u6570f</p> </li> <li> <p>\u603b\u7ed3\uff1a</p> </li> <li> <p>virtual\u7684\u865a\u51fd\u6570\u5173\u952e\u5b57\u662f\u5411\u4e0b\u8d1f\u8d23\u7684\uff0c\u6d3e\u751f\u7c7b\u58f0\u660evirtual\u5bf9\u57fa\u7c7b\u65e0\u4efb\u4f55\u5f71\u54cd</p> </li> <li> <p>\u5bf9\u4e8e\u6307\u9488\u548c\u5f15\u7528\u800c\u8a00</p> <ul> <li>\u4e0d\u662f\u865a\u51fd\u6570\u7684\u65f6\u5019\uff0c\u8c03\u7528\u7684\u51fd\u6570\u53d6\u51b3\u4e8e\u6307\u9488\u548c\u5f15\u7528\u7684\u53d8\u91cf\u7c7b\u578b(\u57fa\u7c7b\u6307\u9488\u8c03\u7528\u57fa\u7c7b\uff0c\u6d3e\u751f\u7c7b\u6307\u9488\u8c03\u7528\u6d3e\u751f\u7c7b)</li> <li>\u662f\u865a\u51fd\u6570\u7684\u65f6\u5019\uff0c\u8c03\u7528\u51fd\u6570\u53d6\u51b3\u4e8e\u6307\u9488\u548c\u5f15\u7528\u6307\u5411\u7684\u53d8\u91cf\u7c7b\u578b(\u6307\u5411\u57fa\u7c7b\u8c03\u7528\u57fa\u7c7b\uff0c\u6307\u5411\u6d3e\u751f\u7c7b\u8c03\u7528\u6d3e\u751f\u7c7b)</li> <li>\u5f53\u7136\u5982\u679c\u6d3e\u751f\u7c7b\u91cc\u6ca1\u6709\u65b0\u7684\u540c\u540d\u51fd\u6570\uff0c\u90a3\u4e48\u6267\u884c\u7684\u90fd\u662f\u57fa\u7c7b\u91cc\u7684</li> <li>\u8981\u6ce8\u610f\u6d3e\u751f\u7c7b\u6307\u9488\u4e0d\u80fd\u76f4\u63a5\u6307\u5411\u57fa\u7c7b\u7684\u5bf9\u8c61</li> <li>\u5982\u679c\u865a\u51fd\u6570\u91cc\u8fd8\u9700\u8981\u8c03\u7528\u5176\u4ed6\u51fd\u6570\uff0c\u8c03\u7528\u7684\u89c4\u5219\u4e5f\u548c\u4e0a\u9762\u7684\u4e00\u6837\uff0c\u6bd4\u5982\u4e0b\u9762\u6709\u4e2a\u5386\u5e74\u5377\u4e0a\u9762\u7684\u795e\u9898\uff1a</li> </ul> </li> <li> <p>\u5386\u5e74\u5377\u4e0a\u7684\u4e00\u4e2a\u9898\u76ee\uff1a\u5199\u51fa\u7a0b\u5e8f\u7684\u8f93\u51fa</p> <pre><code>class B {\npublic:\n    void f() {\n        cout &lt;&lt; \"bf\" &lt;&lt; endl;\n    }\n    virtual void vf() {\n        cout &lt;&lt; \"bvf\" &lt;&lt; endl;\n    }\n    void ff() {\n        vf();\n        f();\n    }\n    virtual void vff() {\n        vf();\n        f();\n    }\n};\n\nclass D: public B {\npublic:\n    void f() {\n        cout &lt;&lt; \"df\" &lt;&lt; endl;\n    }\n    void ff() {\n        f();\n        vf();\n    }\n    void vf() {\n        cout &lt;&lt; \"dvf\" &lt;&lt;endl;\n    }\n};\n\nint main()\n{\n    D d;\n    B* pb = &amp;d;\n    pb-&gt;f();\n    pb-&gt;ff();\n    pb-&gt;vf();\n    pb-&gt;vff();\n}\n</code></pre> <ul> <li> <p>\u8fd9\u9053\u9898\u7684\u5206\u6790\u8fc7\u7a0b\u5982\u4e0b\uff1a</p> </li> <li> <p>\u9996\u5148\u8c03\u7528f\uff0c\u800cf\u4e0d\u662f\u865a\u51fd\u6570\uff0c\u6240\u4ee5\u6839\u636e\u6307\u9488\u7c7b\u578b\u8c03\u7528\u4e86B\u4e2d\u7684f\uff0c\u8f93\u51fabf</p> </li> <li>\u518d\u8c03\u7528ff\uff0c\u56e0\u4e3aff\u4e5f\u4e0d\u662f\u865a\u51fd\u6570\uff0c\u6240\u4ee5\u8c03\u7528B\u4e2d\u7684ff\uff0cB\u4e2d\u7684ff\u8c03\u7528\u4e86vf\u548cf\uff0c\u800cvf\u662f\u865a\u51fd\u6570\uff0cB\u7c7b\u578b\u6307\u9488\u6307\u5411\u7684\u662fD\uff0c\u6240\u4ee5\u8c03\u7528D\u4e2d\u7684vf\uff0c\u8f93\u51fadvf\uff0c\u8c03\u7528f\u5219\u548c\u4e0a\u9762\u4e00\u6837\u8f93\u51fabf</li> <li>\u518d\u8c03\u7528vf\uff0c\u7531\u4e8evf\u662f\u865a\u51fd\u6570\uff0c\u6240\u4ee5\u8981\u8c03\u7528D\u4e2d\u7684vf\uff0c\u8f93\u51fadvf</li> <li>\u518d\u8c03\u7528vff\uff0c\u867d\u7136\u662f\u865a\u51fd\u6570\u4f46\u662fD\u4e2d\u6ca1\u6709\u5b9a\u4e49\u540c\u540d\u51fd\u6570\uff0c\u6240\u4ee5\u8c03\u7528B\u4e2d\u7684vff\uff0cvff\u4e2d\u8c03\u7528vf\u548cf\uff0c\u540c2\u4e00\u6837\u8f93\u51fa\u7684\u662fdvf\u548cbf</li> <li>\u6240\u4ee5\u6700\u7ec8\u7684\u8f93\u51fa\u662f</li> </ul> <pre><code>bf\ndvf\nbf\ndvf\ndvf\nbf\n</code></pre> <ul> <li>\u8fd9\u9053\u9898\u6db5\u76d6\u4e86\u5355\u7ee7\u627f\u865a\u51fd\u6570\u7684\u6240\u6709\u60c5\u51b5</li> </ul> </li> <li> <p>\u57fa\u7c7b\u865a\u51fd\u6570\u7684\u4f18\u5148\u7ea7\u9ad8\u4e8e\u6d3e\u751f\u7c7b\u4e2d\u7684\u9700\u8981\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u7684\u540c\u540d\u51fd\u6570</p> </li> <li> <p>\u6bd4\u5982\u4e0b\u9762\u4e00\u6bb5\u4ee3\u7801\u4e2d</p> </li> </ul> <pre><code>class A {\npublic:\n    virtual void f(int i) {\n        cout &lt;&lt; 1 &lt;&lt;endl;\n    }\n};\n\nclass B: public A {\npublic:\n    virtual void f(double i) {\n        cout &lt;&lt; 2 &lt;&lt; endl;\n    }\n};\n\nint main()\n{\n    A* pa = new B;\n    pa-&gt;f(1);\n    return 0;\n}\n</code></pre> <ul> <li>\u8fd9\u91cc\u8f93\u51fa\u7684\u7ed3\u679c\u662f1\uff0c\u4e8b\u5b9e\u4e0a\u4e24\u4e2af\u5e76\u4e0d\u6784\u6210\u865a\u51fd\u6570\u7684\u5173\u7cfb\uff0c\u56e0\u4e3af(1)\u4e2d1\u662fint\u7c7b\u578b\uff0c\u6240\u4ee5\u4f18\u5148\u8c03\u7528\u4e86\u5bf9int\u5339\u914d\u5ea6\u9ad8\u7684</li> <li>\u4e8b\u5b9e\u4e0a\u5982\u679c\u662ff(1.1)\u8f93\u51fa\u7684\u7ed3\u679c\u4ecd\u7136\u662f1\uff0c\u5e76\u4e14CLion\u4f1a\u63d0\u793a\u53c2\u6570\u9700\u8981\u7c7b\u578b\u8f6c\u6362</li> <li>\u4e8b\u5b9e\u4e0a\u4e24\u4e2af\u4e0d\u6784\u6210\u865a\u51fd\u6570\u7684\u591a\u6001\u5173\u7cfb\uff0c\u6240\u4ee5\u8c03\u7528\u54ea\u4e2a\u5e76\u4e0d\u770b\u6307\u9488\u6307\u5411\u7684\u5bf9\u8c61\uff0c\u800c\u662f\u770b\u6307\u9488\u672c\u8eab\u7684\u7c7b\u578b\uff01</li> </ul>"},{"location":"ZJU_CS/oop/#28","title":"2.8 \u5f3a\u5236\u7c7b\u578b\u8f6c\u6362","text":""},{"location":"ZJU_CS/oop/#281_static_cast","title":"2.8.1 static_cast","text":"<ul> <li><code>static_cast</code> \u7528\u4e8e\u6570\u636e\u7c7b\u578b\u7684\u5f3a\u5236\u8f6c\u6362\uff0c\u6709\u8fd9\u6837\u51e0\u79cd\u7528\u6cd5</li> <li>\u57fa\u672c\u6570\u636e\u7c7b\u578b\u7684\u8f6c\u6362\uff0c\u6bd4\u5982char\u8f6c\u6362\u6210int</li> <li>\u5728\u7c7b\u7684\u4f53\u7cfb\u4e2d\u628a\u57fa\u7c7b\u548c\u6d3e\u751f\u7c7b\u7684\u6307\u9488\u548c\u5f15\u7528\u8fdb\u884c\u8f6c\u6362<ul> <li>\u5411\u4e0a\u8f6c\u6362\u662f\u5b89\u5168\u7684</li> <li>\u5411\u4e0b\u8f6c\u6362\u662f\u4e0d\u5b89\u5168\u7684</li> <li>\u53ea\u80fd\u5728\u6709\u76f8\u4e92\u8054\u7cfb\u7684\u7c7b\u578b\u4e2d\u8fdb\u884c\u76f8\u4e92\u8f6c\u6362\uff0c\u4e0d\u4e00\u5b9a\u5305\u542b\u865a\u51fd\u6570</li> </ul> </li> <li>\u628a\u7a7a\u6307\u9488\u8f6c\u6362\u6210\u76ee\u6807\u7c7b\u578b\u7684\u7a7a\u6307\u9488</li> <li> <p>\u628a\u4efb\u4f55\u7c7b\u578b\u8f6c\u6362\u6210void\u7c7b\u578b</p> </li> <li> <p>static_cast\u4e0d\u80fd\u8f6c\u6362\u6389\u6709const\u7684\u53d8\u91cf</p> </li> </ul>"},{"location":"ZJU_CS/oop/#282_const_cast","title":"2.8.2 const_cast","text":"<ul> <li><code>const_cast</code> \u53ef\u4ee5\u5f3a\u5236\u53bb\u6389const\u7684\u5e38\u6570\u7279\u6027\uff0c\u53ea\u80fd\u7528\u5728\u6307\u9488\u548c\u5f15\u7528\u4e0a\u9762</li> <li>\u5e38\u91cf\u6307\u9488\u88ab\u8f6c\u5316\u6210\u975e\u5e38\u91cf\u7684\u6307\u9488\uff0c\u4ecd\u7136\u6307\u5411\u539f\u6765\u7684\u5bf9\u8c61</li> <li>\u5e38\u91cf\u5f15\u7528\u88ab\u8f6c\u6362\u6210\u4e3a\u975e\u5e38\u91cf\u7684\u5f15\u7528\uff0c\u4ecd\u6307\u5411\u539f\u6765\u7684\u5bf9\u8c61</li> <li>\u6765\u770b\u4e00\u6bb5\u4ee3\u7801</li> <li>\u6253\u5370\u51fa\u6765\u7684\u7ed3\u679c\u662fa=10\uff0c\u800cp\u548cq\u6240\u6307\u5411\u7684\u503c\u662f20\uff0ca\u7684\u5730\u5740\u548cpq\u6307\u5411\u7684\u5730\u5740\u662f\u4e00\u6837\u7684</li> <li>\u4e8b\u5b9e\u4e0a\u7b2c\u4e94\u884c\u7684\u8d4b\u503c\u662f\u4e00\u79cd\u672a\u5b9a\u4e49\u884c\u4e3a\uff0c\u6700\u597d\u522b\u7528</li> </ul> <pre><code>const int a = 10;\nconst int *p = &amp;a;\nint *q;\nq = const_cast&lt;int *&gt;(p);\n*q = 20;\ncout &lt;&lt; a &lt;&lt; \" \" &lt;&lt; *p &lt;&lt; \" \" &lt;&lt; *q &lt;&lt; endl;\ncout &lt;&lt; &amp;a &lt;&lt; \" \" &lt;&lt; p &lt;&lt; \" \" &lt;&lt; q &lt;&lt; endl;\n</code></pre>"},{"location":"ZJU_CS/oop/#283_reinterpret_cast","title":"2.8.3 reinterpret_cast","text":"<ul> <li><code>reinterpret_cast</code> \u4e3b\u8981\u6709\u4e09\u79cd\u7528\u9014</li> <li>\u6539\u53d8\u6307\u9488\u6216\u8005\u5f15\u7528\u7684\u7c7b\u578b</li> <li>\u5c06\u6307\u9488\u6216\u8005\u5f15\u7528\u8f6c\u6362\u6210\u4e3a\u8db3\u591f\u957f\u7684\u6574\u5f62</li> <li>\u5c06\u6574\u578b\u7f16\u7a0b\u6307\u9488\u6216\u8005\u5f15\u7528\u7c7b\u578b</li> </ul>"},{"location":"ZJU_CS/oop/#284_dynamic_cast","title":"2.8.4 dynamic_cast","text":"<ul> <li> <p>\u8ddf\u5176\u4ed6\u51e0\u4e2a\u4e0d\u540c\uff0c\u5176\u4ed6\u51e0\u4e2a\u90fd\u662f\u7f16\u8bd1\u65f6\u5b8c\u6210\u7684\uff0c<code>dynamic_cast</code> \u662f\u5728\u8fd0\u884c\u65f6\u8fdb\u884c\u7c7b\u578b\u68c0\u67e5\u7684</p> </li> <li> <p>\u4e0d\u80fd\u7528\u4e8e\u5185\u7f6e\u7684\u57fa\u672c\u6570\u636e\u7c7b\u578b\u7684\u5f3a\u5236\u8f6c\u6362</p> </li> <li> <p>\u5982\u679c\u6210\u529f\u7684\uff0c\u5c06\u8fd4\u56de\u6307\u5411\u7c7b\u7684\u6307\u9488\u6216\u8005\u5f15\u7528\uff0c\u8f6c\u6362\u5931\u8d25\u7684\u8bdd\u4f1a\u8fd4\u56deNULL</p> </li> <li> <p>\u8f6c\u6362\u65f6\u57fa\u7c7b\u4e00\u5b9a\u8981\u6709\u865a\u51fd\u6570\uff0c\u5426\u5219\u65e0\u6cd5\u901a\u8fc7\u7f16\u8bd1</p> </li> <li> <p>\u539f\u56e0\u662f\u865a\u51fd\u6570\u8868\u540d\u8fd9\u4e2a\u7c7b\u5e0c\u671b\u53ef\u4ee5\u7528\u57fa\u7c7b\u6307\u9488\u6307\u5411\u6d3e\u751f\u7c7b\uff0c\u8fd9\u6837\u8f6c\u6362\u624d\u6709\u610f\u4e49</p> </li> <li> <p>\u5728\u7c7b\u7684\u5411\u4e0a\u8f6c\u6362\u7684\u65f6\u5019\uff0c\u548c<code>static_cast</code> \u6548\u679c\u4e00\u6837\uff0c\u4f46\u662f\u5411\u4e0b\u8f6c\u6362\u7684\u65f6\u5019\u6bd4<code>static_cast</code> \u66f4\u5b89\u5168\uff0c\u56e0\u6b64\u8981\u6c42\u4e5f\u66f4\u9ad8</p> </li> <li> <p>\u6765\u770b\u4e00\u6bb5\u4ee3\u7801</p> </li> </ul> <pre><code>int main()\n{\n    A a;\n    B b;\n    A *ap = &amp;a;\n    if(dynamic_cast&lt;B*&gt;(ap)) {\n        cout &lt;&lt; \"OK1\" &lt;&lt; endl;\n    }\n    else {\n        cout &lt;&lt; \"Fail\" &lt;&lt; endl;\n    }\n    if(static_cast&lt;B*&gt;(ap)) {\n        cout &lt;&lt; \"OK2\" &lt;&lt; endl;\n    }\n    else {\n        cout &lt;&lt; \"Fail\" &lt;&lt; endl;\n    }\n    ap = &amp;b;\n    if(dynamic_cast&lt;B*&gt;(ap)) {\n        cout &lt;&lt; \"OK3\" &lt;&lt; endl;\n    }\n    else {\n        cout &lt;&lt; \"Fail\" &lt;&lt; endl;\n    }\n    if(static_cast&lt;B*&gt;(ap)) {\n        cout &lt;&lt; \"OK4\" &lt;&lt; endl;\n    }\n    else {\n        cout &lt;&lt; \"Fail\" &lt;&lt; endl;\n    }\n    return 0;\n}\n</code></pre> <ul> <li>\u8fd0\u884c\u7684\u7ed3\u679c\u662f\u7b2c\u4e00\u4e2a\u5931\u8d25\uff0c\u5176\u4ed6\u7684\u90fd\u6210\u529f</li> <li>\u63a8\u6d4b\u5bfc\u81f4\u8fd9\u4e2a\u7ed3\u679c\u7684\u539f\u56e0\uff1a<ul> <li>\u5f53ap\u6307\u5411\u6d3e\u751f\u7c7b\u7684\u65f6\u5019\uff0c\u8fdb\u884c\u5f3a\u5236\u7c7b\u578b\u8f6c\u6362\u53d8\u6210\u6d3e\u751f\u7c7b\u662f\u53ef\u4ee5\u6210\u529f\u7684</li> <li>\u5f53ap\u6307\u5411\u57fa\u7c7b\u7684\u65f6\u5019\uff0c<code>dynamic_cast</code> \u8f6c\u6362\u662f\u5426\u6210\u529f\u53d6\u51b3\u4e8e\u6307\u9488\u6307\u5411\u7684\u7c7b\u578b\u548c\u5373\u5c06\u8f6c\u6362\u7684\u7c7b\u578b\u662f\u4e0d\u662f\u4e00\u6837\uff0c\u4e0d\u4e00\u6837\u5c31\u4f1a\u5931\u8d25\uff0c\u8fd4\u56de\u4e00\u4e2aNULL\uff0c\u800cstatic\u662f\u53ef\u4ee5\u6210\u529f\u7684</li> <li>\u5176\u5b9e\u662f\u66f4\u5b89\u5168\u7684\u673a\u5236\u5bfc\u81f4dynamic\u7684\u68c0\u67e5\u66f4\u591a\uff0c\u8981\u6c42\u66f4\u9ad8</li> </ul> </li> </ul>"},{"location":"ZJU_CS/oop/#3","title":"3. \u91cd\u8f7d","text":""},{"location":"ZJU_CS/oop/#30","title":"3.0 \u51fd\u6570\u7684\u91cd\u8f7d","text":"<ul> <li> <p>\u591a\u4e2a\u540c\u540d\u51fd\u6570\u7684\u53c2\u6570\u7684\u4e2a\u6570\u6216\u8005\u7c7b\u578b\u4e0d\u76f8\u540c\uff0c\u8fd9\u51e0\u4e2a\u51fd\u6570\u5c31\u6784\u6210\u91cd\u8f7d\u5173\u7cfb</p> </li> <li> <p>\u4e0d\u80fd\u4ec5\u901a\u8fc7\u8fd4\u56de\u503c\u7c7b\u578b\u7684\u4e0d\u540c\u6765\u5f62\u6210\u51fd\u6570\u7684\u91cd\u8f7d\uff0c\u4e8b\u5b9e\u4e0a\u51fd\u6570\u91cd\u8f7d\u548c\u8fd4\u56de\u503c\u7c7b\u578b\u7684\u5173\u7cfb\u4e0d\u5927</p> </li> <li> <p>\u8c03\u7528\u7684\u65f6\u5019\u4f18\u5148\u8c03\u7528\u5339\u914d\u5ea6\u6700\u9ad8\u7684\u91cd\u8f7d\u51fd\u6570\uff0c\u91cd\u8f7d\u7684\u4f18\u5148\u7ea7\u662f\uff1a</p> <ul> <li>\u5148\u627e\u5b8c\u5168\u5339\u914d\u7684\u666e\u901a\u51fd\u6570</li> <li>\u518d\u627e\u6a21\u677f\u51fd\u6570</li> <li>\u518d\u627e\u9700\u8981\u9690\u5f0f\u8f6c\u6362\u7684\u51fd\u6570</li> </ul> </li> <li> <p>\u5f53\u6ca1\u6709\u53c2\u6570\u7c7b\u578b\u6070\u597d\u5339\u914d\u7684\u91cd\u8f7d\u51fd\u6570\u7684\u65f6\u5019\uff0c\u5c31\u4f1a\u5c06\u53c2\u6570\u8fdb\u884c\u9690\u5f0f\u8f6c\u6362\u4e4b\u540e\u6765\u5bfb\u627e\u53ef\u4ee5\u8c03\u7528\u7684\u91cd\u8f7d\u51fd\u6570\uff0c\u6b64\u65f6\u5982\u679c\u91cd\u8f7d\u51fd\u6570\u6709\u591a\u4e2a\u7b26\u5408\u6761\u4ef6\uff0c\u5c31\u4f1a\u4ea7\u751ferror</p> <pre><code>#include &lt;iostream&gt;\nusing namespace std;\n\nvoid foo(int a, int b)\n{\n    cout&lt;&lt;1&lt;&lt;endl;\n}\n\nvoid foo(double a, double b)\n{\n    cout&lt;&lt;2&lt;&lt;endl;\n}\n\nint main()\n{\n    foo(1, 2);\n    foo(1.0, 2.0);\n    foo(1, 2.0); // \u8fd9\u4e00\u884c\u662f\u6709\u8bed\u6cd5\u9519\u8bef\u7684\uff01\n}\n</code></pre> </li> </ul>"},{"location":"ZJU_CS/oop/#31","title":"3.1 \u8fd0\u7b97\u7b26\u7684\u91cd\u8f7d","text":"<ul> <li> <p>\u91cd\u8f7d\u7684\u4e00\u4e9b\u57fa\u672c\u6027\u8d28</p> </li> <li> <p>\u5927\u90e8\u5206\u8fd0\u7b97\u7b26\u90fd\u53ef\u4ee5\u91cd\u8f7d</p> </li> <li><code>.    ::   ?:</code>\u4e4b\u7c7b\u7684\u8fd0\u7b97\u7b26\u4e0d\u80fd\u91cd\u8f7d\uff0csizeof\uff0ctypeid\uff0cstatic\u4e4b\u7c7b\u7684\u5173\u952e\u5b57\u4e0d\u80fd\u91cd\u8f7d </li> <li>\u4e0d\u80fd\u91cd\u8f7d\u4e0d\u5b58\u5728\u7684\u8fd0\u7b97\u7b26</li> <li>\u5fc5\u987b\u5bf9\u4e8e\u6574\u4e2aclass\u6216\u8005enumeration type\u8fdb\u884c\u8fd0\u7b97\u7b26\u7684\u91cd\u8f7d</li> <li> <p>\u91cd\u8f7d\u4e4b\u540e\u7684\u8fd0\u7b97\u7b26\u4f9d\u7136\u4fdd\u6301\u539f\u6765\u4e00\u6837\u7684\u8fd0\u7b97\u4f18\u5148\u7ea7\u548c\u64cd\u4f5c\u6570\u7684\u4e2a\u6570 </p> </li> <li> <p>\u8fd0\u7b97\u7b26\u91cd\u8f7d\u7684\u57fa\u672c\u8bed\u6cd5</p> </li> <li> <p>\u5728\u7c7b\u5b9a\u4e49\u4e2d\u5bf9member function\u8fdb\u884c\u91cd\u8f7d<code>return_type class_name::operator\u8fd0\u7b97\u7b26(parameters)</code> \u6b64\u65f6\u53c2\u6570\u4e3a\u5bf9\u5e94\u8fd0\u7b97\u7b26\u6240\u9700\u53c2\u6570-1</p> </li> <li>\u5bf9\u5916\u90e8\u51fd\u6570\u8fdb\u884c\u91cd\u8f7d<code>\u8fd4\u56de\u503c\u7c7b\u578b operator\u8fd0\u7b97\u7b26(\u53c2\u6570\u8868)</code> \u6b64\u65f6\u53c2\u6570\u4e2a\u6570\u548c\u5bf9\u5e94\u7684\u8fd0\u7b97\u7b26\u7684\u6240\u9700\u4e2a\u6570\u76f8\u540c<ul> <li>\u5982\u679c\u8981\u8bbf\u95ee\u7c7b\u7684private\u5185\u5bb9\uff0c\u9700\u8981\u58f0\u660e\u8fd9\u4e2a\u91cd\u8f7d\u51fd\u6570\u4e3a\u53cb\u5143 </li> <li>\u5355\u76ee\u8fd0\u7b97\u7b26\u4e00\u822c\u58f0\u660e\u4e3a\u6210\u5458\u51fd\u6570\uff0c\u53cc\u76ee\u8fd0\u7b97\u7b26\u4e00\u822c\u4f5c\u4e3a\u5916\u90e8\u7684\u51fd\u6570</li> <li>[ ] ( ) -&gt; \u7b49\u8fd0\u7b97\u7b26\u5fc5\u987b\u4f5c\u4e3a\u6210\u5458\u51fd\u6570</li> </ul> </li> <li>\u524d\u7f00\u7684++\u548c\u540e\u7f00\u7684++<ul> <li>\u533a\u522b\uff1a\u540e\u7f00\u7684++\u53c2\u6570\u8868\u662f\u6709\u4e2aint\u7c7b\u578b\u7684\u53d8\u91cf\u4f5c\u4e3a\u53c2\u6570\u7684</li> </ul> </li> </ul> <pre><code>Integer&amp; operator++();  //prefix++\nInteger operator++(int x); //postfix++\n</code></pre> <ul> <li> <p>\u6bd4\u8f83\u5927\u5c0f\u5173\u7cfb\u7684\u8fd0\u7b97\u7b26\u91cd\u8f7d\u65f6\uff0c\u53ef\u4ee5\u901a\u8fc7\u4ee3\u7801\u7684\u590d\u7528\u51cf\u5c11\u4e0d\u5fc5\u8981\u7684\u4ee3\u7801\u91cf</p> </li> <li> <p>\u81ea\u5b9a\u4e49\u7684\u7c7b\u578b\u8f6c\u6362 </p> </li> <li> <p>\u4f8b\u5982 <code>Rational::operator double() const {};</code></p> </li> <li>\u9690\u5f0f\u7c7b\u578b\u8f6c\u6362\uff1a<ul> <li>Single-argument constructors</li> <li>implicit type conversion operators</li> <li>\u907f\u514d\u9690\u5f0f\u8f6c\u6362\u7684\u65b9\u6cd5\uff1a\u628a\u590d\u5236\u6784\u9020\u51fd\u6570\u58f0\u660e\u4e3aexplicit\uff0c\u8868\u793a\u4e0d\u80fd\u8fdb\u884c\u9690\u5f0f\u7684\u7c7b\u578b\u8f6c\u6362</li> </ul> </li> </ul>"},{"location":"ZJU_CS/oop/#32","title":"3.2 \u8f93\u5165\u8f93\u51fa\u6d41\u7684\u91cd\u8f7d","text":"<ul> <li>stream\u7684\u79cd\u7c7b</li> <li>Text stream \u7528ASCII\u7801\u6765\u89e3\u6790\uff0c\u5305\u62ecfiles\u548ccharacter buffers</li> <li>Binary stream \u4e8c\u8fdb\u5236\u6570\u636e\uff0cno translation</li> <li>stream\u7684\u7c7b\u578b\uff1a</li> <li>cin\u6807\u51c6\u8f93\u5165\uff0c\u4f7f\u7528\u6d41\u63d0\u53d6\u8fd0\u7b97\u7b26&gt;&gt;\uff0c\u5728C++\u6807\u51c6\u5e93\u7684istream\u4e2d\u5b9a\u4e49</li> <li>cout\u6807\u51c6\u8f93\u51fa\uff0c\u4f7f\u7528\u6d41\u63d2\u5165\u8fd0\u7b97\u7b26&lt;&lt;\uff0c\u5728ostream\u4e2d\u5b9a\u4e49</li> <li>cerr\u6807\u51c6\u9519\u8bef\u63d0\u793a(unbuffered error)</li> <li> <p>clog\u6807\u51c6\u9519\u8bef\u63d0\u793a(buffered error)</p> </li> <li> <p>\u5bf9&gt;&gt;\u548c&lt;&lt;\u7684\u91cd\u8f7d</p> </li> <li>Has to be a 2-argument free function</li> </ul> <pre><code>istream&amp; operator&gt;&gt;(istream&amp; is, T&amp; obj){\n    //special way to read in obj\n    return is;\n    //Return an istream&amp; for chaining\n}\n//&lt;&lt;\u7684\u91cd\u8f7d\u65b9\u5f0f\u4e0e\u4e4b\u7c7b\u4f3c\nostream&amp; operator&lt;&lt;(ostream&amp; os, T&amp; obj){\n    return os;\n}\n</code></pre> <ul> <li>\u63a7\u5236\u8f93\u51fa\u7684\u683c\u5f0f\uff0c\u4f7f\u7528\u5934\u6587\u4ef6<code>#include&lt;iomanip&gt;</code></li> <li>\u5176\u4ed6\u7684\u8f93\u5165\u8f93\u51fa\u7684\u65b9\u5f0f\uff1a</li> <li><code>int get()</code> \u652f\u6301\u5355\u4e2a\u5b57\u7b26\u8bfb\u5165<ul> <li>Returns the next character in the stream</li> <li>Returns EOF if no characters left</li> </ul> </li> <li><code>get(char *buf, int limit, char delim='\\n')</code></li> <li><code>getline(char *buf, int limit, char delim='\\n')</code></li> </ul>"},{"location":"ZJU_CS/oop/#4","title":"4. \u6a21\u677f","text":""},{"location":"ZJU_CS/oop/#41_namespace","title":"4.1 namespace \u547d\u540d\u7a7a\u95f4","text":"<ul> <li> <p>\u4f7f\u7528\u547d\u540d\u7a7a\u95f4\u6765\u5212\u5206\u5168\u5c40\u7684\u5404\u7c7b\u7c7b\u540d\u53ef\u4ee5\u907f\u514d\u540d\u5b57\u7684\u51b2\u7a81\uff0c\u53ef\u4ee5\u5728\u4e0d\u540c\u7684\u547d\u540d\u7a7a\u95f4\u91cc\u5b9a\u4e49\u76f8\u540c\u7684\u53d8\u91cf\u540d</p> </li> <li> <p>\u5728\u5f15\u7528\u7684\u65f6\u5019\u52a0\u4e0a\u547d\u540d\u7a7a\u95f4\u7684\u9650\u5236\u7b26\u5c31\u53ef\u4ee5\u4e86</p> </li> <li>\u6216\u8005\u4e5f\u53ef\u4ee5\u7528<code>using namespace xxx</code> \u6765\u8bf4\u660e\u7a0b\u5e8f\u4e2d\u63a5\u4e0b\u6765\u7528\u54ea\u4e2a\u547d\u540d\u7a7a\u95f4\u4e2d\u7684\u4e1c\u897f</li> </ul> <pre><code>namespace space1{\n    string name = \"randomstar\";\n}\n\nnamespace space2{\n    string name = \"ToyamaKasumi\";\n}\n\nint main()\n{\n    cout&lt;&lt;space1::name&lt;&lt;endl;\n    using namespace space2;\n    cout&lt;&lt;name&lt;&lt;endl;\n}\n</code></pre>"},{"location":"ZJU_CS/oop/#42_template","title":"4.2 template\u7f16\u7a0b","text":"<ul> <li> <p>\u6a21\u677f\u7f16\u7a0b\u662f\u4e00\u79cd\u590d\u7528\u4ee3\u7801\u7684\u624b\u6bb5\uff0c\u662fgeneric programming(\u6cdb\u578b\u7f16\u7a0b)\uff0c\u628a\u53d8\u91cf\u7684\u7c7b\u578b\u5f53\u4f5c\u53c2\u6570\u6765\u58f0\u660e</p> </li> <li> <p>\u51fd\u6570\u6a21\u677f\uff1a\u4f7f\u7528\u5173\u952e\u5b57template \u540e\u9762\u52a0\u82e5\u5e72\u4e2a\u53d8\u91cf\u4f5c\u4e3a\u7c7b\u578b\u58f0\u660e\u4e00\u4e2a\u51fd\u6570\u6a21\u677f\uff0c\u7c7b\u578b\u53d8\u91cf\u53ef\u4ee5\u4ee3\u66ff\u51fd\u6570\u7684\u8fd4\u56de\u503c\u7c7b\u578b\uff0c\u53c2\u6570\u7c7b\u578b\u548c\u51fd\u6570\u4e2d\u7684\u53d8\u91cf\u7684\u7c7b\u578b</p> </li> <li> <p>\u51fd\u6570\u6a21\u677f\u9700\u8981\u5b9e\u4f8b\u5316(instantiation)\u4e4b\u540e\u518d\u4f7f\u7528\uff0c\u5982\u679c\u6ca1\u6709\u88ab\u8c03\u7528\u5c31\u4e0d\u4f1a\u88ab\u5b9e\u4f8b\u5316</p> <ul> <li>\u5b9e\u4f8b\u5316\u662f\u8bb2\u6a21\u677f\u51fd\u6570\u4e2d\u7684\u6a21\u677f\u66ff\u6362\u4e3a\u5bf9\u5e94\u7684\u53d8\u91cf\u7c7b\u578b\uff0c\u7136\u540e\u751f\u6210\u4e00\u4e2a\u5bf9\u5e94\u7684\u51fd\u6570</li> <li>\u51fd\u6570\u6a21\u677f\u5728\u4f7f\u7528\u8fc7\u7a0b\u4e2d\u4e0d\u80fd\u53d1\u751f\u53c2\u6570\u548c\u8fd4\u56de\u503c\u7684\u7c7b\u578b\u8f6c\u6362\uff0c\u5fc5\u987b\u8981\u7c7b\u578b\u5b8c\u5168\u5339\u914d\u624d\u80fd\u4f7f\u7528</li> <li> </li> <li> <p>\u5148\u627e\u662f\u5426\u6709\u5b8c\u5168\u5339\u914d\u7684\u666e\u901a\u51fd\u6570</p> </li> <li>\u518d\u627e\u662f\u5426\u6709\u5b8c\u5168\u5339\u914d\u7684\u6a21\u677f\u51fd\u6570</li> <li>\u518d\u627e\u6709\u6ca1\u6709\u901a\u8fc7\u8fdb\u884c\u9690\u5f0f\u7c7b\u578b\u8f6c\u6362\u53ef\u4ee5\u8c03\u7528\u7684\u51fd\u6570</li> </ul> </li> <li> <p>\u7c7b\u6a21\u677f</p> </li> <li> <p>\u548c\u51fd\u6570\u6a21\u677f\u5dee\u4e0d\u591a\uff0ctemplate\u4e2d\u58f0\u660e\u7684\u65e2\u53ef\u4ee5\u662f\u7c7b\u5185\u5404\u79cd\u9700\u8981\u53d8\u91cf\u7c7b\u578b\u7684\u5730\u65b9</p> </li> <li>\u6a21\u677f\u7c7b\u4e5f\u53ef\u4ee5\u7ee7\u627f\u975e\u6a21\u677f\u7c7b\uff0c\u4e5f\u53ef\u4ee5\u7ee7\u627f\u6a21\u677f\u7c7b(\u9700\u8981\u5b9e\u4f8b\u5316)</li> <li> <p>\u975e\u6a21\u677f\u7c7b\u53ef\u4ee5\u7ee7\u627f\u81ea\u6a21\u677f\u7c7b(\u9700\u8981\u5b9e\u4f8b\u5316)</p> </li> <li> <p>Expression parameter</p> </li> <li> <p>\u6a21\u677f\u4e2d\u7684\u53ef\u4ee5\u58f0\u660e\u4e00\u4e9b\u5e38\u6570\uff0cclass\u548ctypename\u7684\u7c7b\u578b\u540d\u53ef\u4ee5\u6709\u9ed8\u8ba4\u503cdefault value\uff0c\u6bd4\u5982<code>template&lt;typename T = int&gt;</code> </p> </li> </ul> <pre><code>template &lt;class T, int bounds = 100&gt;\nclass FixedVector{\npublic:\n  T&amp; operator[](int x);\n    T elements[bounds];\n};\n\ntemplate &lt;class T, int bounds&gt;\nT&amp; FixedVector&lt;T, bounds&gt;::operator[] (int i){\n  return elements[i]; //no error checking\n}\n\n//usage\nFixedVector&lt;int, 50&gt; v1;\nFixedVector&lt;int, 10*10&gt; v2;\nFixedVector&lt;int&gt; v3 //default value\n</code></pre> <ul> <li> <p>Specialization \u7279\u5316--\u7528\u4e8e\u8403\u53d6\u5668</p> </li> <li> <p>\u5168\u7279\u5316\uff1a\u5c06\u6a21\u677f\u7c7b\u4e2d\u6240\u6709\u7684\u7c7b\u578b\u53c2\u6570\u8d4b\u4e88\u660e\u786e\u7684\u7c7b\u578b\uff0c\u5e76\u5199\u4e86\u4e00\u4e2a\u7c7b\u540d\u548c\u4e3b\u6a21\u677f\u7c7b\u540d\u76f8\u540c\u7684\u7c7b\uff0c\u8fd9\u4e2a\u7c7b\u5c31\u662f\u5168\u7279\u5316\u7c7b</p> <ul> <li>\u5168\u7279\u5316\u4e4b\u540e\uff0c\u5df2\u7ecf\u5931\u53bb\u4e86template\u7684\u7279\u6027</li> </ul> <pre><code>template&lt;class T&gt; bool compare(T x, T y)\n{\n    return x&gt;y;\n}\n\n// \u8fd9\u4e2a\u5c31\u662f\u5bf9\u4e0a\u9762\u5199\u7684\u6a21\u677f\u51fd\u6570\u7684\u5168\u7279\u5316\ntemplate&lt;&gt; bool compare(int x, int y)\n{\n    return x&gt;y;\n}\n</code></pre> </li> <li> <p>\u504f\u7279\u5316\uff1a\u53ea\u7ed9\u6a21\u677f\u7c7b\u8d4b\u4e00\u90e8\u5206\u7684\u7c7b\u578b\uff0c\u5f97\u5230\u7684\u504f\u7279\u5316\u7c7b/\u51fd\u6570\u53ef\u4ee5\u4f5c\u4e3a\u4e00\u4e2a\u5b50\u6a21\u7248\u4f7f\u7528</p> <ul> <li>\u8fd8\u4fdd\u7559\u4e86\u4e00\u90e8\u5206template\u7684\u529f\u80fd</li> </ul> </li> <li> <p>\u6a21\u677f\u7c7b\u8c03\u7528\u7684\u4f18\u5148\u7ea7</p> <ul> <li>\u5168\u7279\u5316\u7c7b&gt;\u504f\u7279\u5316\u7c7b&gt;\u4e3b\u7248\u672c\u7684\u6a21\u677f\u7c7b\uff08\u5c31\u662f\u76f4\u63a5\u8c03\u7528\u6a21\u677f\u7c7b\uff0c\u6700\u5e38\u89c1\u7684\u7528\u6cd5\uff09</li> <li>\u6709\u9690\u5f0f\u8f6c\u6362\u7684\u4f18\u5148\u7ea7\u6bd4\u8f83\u4f4e\uff0c\u5148\u8003\u8651\u6240\u6709\u4e0d\u9700\u8981\u9690\u5f0f\u8f6c\u6362\u7684\u6a21\u677f\uff0c\u518d\u8003\u8651\u9700\u8981\u9690\u5f0f\u8f6c\u6362\u7684\u6a21\u677f</li> </ul> </li> </ul>"},{"location":"ZJU_CS/oop/#_1","title":"\u51fd\u6570\u91cd\u8f7d\u65f6\u5019\u7684\u4f18\u5148\u7ea7","text":""},{"location":"ZJU_CS/oop/#43_stl","title":"4.3 STL\u548c\u8fed\u4ee3\u5668","text":"<ul> <li> <p>STL=Standard Template Library \u662f\u6807\u51c6\u5e93\u7684\u4e00\u90e8\u5206\uff0c\u4f7f\u7528C++STL\u53ef\u4ee5\u51cf\u5c11\u5f00\u53d1\u65f6\u95f4\uff0c\u63d0\u9ad8\u53ef\u8bfb\u6027\u548c\u9c81\u68d2\u6027 \uff0cSTL\u5305\u542b\u4e86\uff1a</p> </li> <li> <p>\u5bb9\u5668</p> </li> <li>\u8fed\u4ee3\u5668</li> <li> <p>\u51fd\u6570</p> </li> <li> <p>STL\u5bb9\u5668\u7684\u4f7f\u7528\uff1a\u523b\u5728DNA\u91cc\uff0c\u4e0d\u9700\u8981\u6574\u7406</p> </li> <li> <p>\u5173\u4e8emap\uff1amap\u7684key\u5fc5\u987b\u662f\u53ef\u4ee5\u6ee1\u8db3\u53ef\u4ee5\u6392\u5e8f\u6027\u8d28\u7684\uff0c\u5982\u679c\u662f\u81ea\u5b9a\u4e49\u7684\u7c7b\u9700\u8981\u91cd\u8f7d&lt;\u51fd\u6570\uff0c\u5426\u5219\u8fd9\u4e2a\u7c7b\u4e0d\u80fd\u4f5c\u4e3akey\u503c</p> </li> <li> <p>\u8fed\u4ee3\u5668\uff1a<code>STL&lt;parameters&gt;::iterator  xxx</code></p> </li> <li> <p>\u8fed\u4ee3\u5668\u662f\u4e00\u79cd\u987a\u5e8f\u8bbf\u95ee\u5bb9\u5668\u7684\u65b9\u5f0f\uff1aGeneralization of pointers</p> </li> <li> <p>\u4e24\u4e2a\u7279\u6b8a\u7684\u8fed\u4ee3\u5668\uff1abegin( ) \u548c end( )\u5206\u522b\u8868\u793a\u5bb9\u5668\u7684\u5934\u548c\u5c3e </p> <ul> <li>\u5f88\u591a\u65f6\u5019end\u5e76\u4e0d\u80fd\u8fbe\u5230\uff0c\u56e0\u6b64\u5230\u7ed3\u675f\u7684\u5224\u65ad\u6761\u4ef6\u5f80\u5f80\u662f<code>!=stl.end()</code> </li> </ul> </li> <li> <p>\u8fed\u4ee3\u5668\u652f\u6301\u7684\u64cd\u4f5c</p> </li> <li> <p><code>iter++</code> <code>iter+=2</code>(\u4e0d\u662f\u4efb\u4f55\u5bb9\u5668\u7684\u8fed\u4ee3\u5668\u90fd\u53ef\u4ee5)</p> <ul> <li><code>*iter</code> </li> </ul> <pre><code>list&lt;int&gt; L;\nlist&lt;int&gt;::iterator li;\nli=L.begin();\nL.erase(li); // li=L.erase(li);\n++li;//error!!!\n</code></pre> </li> <li> <p>\u53ef\u4ee5\u770b\u6210\u662f\u4e00\u79cd\u6cdb\u5316\u7684\u6307\u9488 </p> </li> </ul>"},{"location":"ZJU_CS/oop/#5_exceptions","title":"5. Exceptions \u5f02\u5e38\u5904\u7406","text":"<ul> <li>\u7528\u4e8e\u5f02\u5e38\u5904\u7406\u7684\u8bed\u6cd5</li> <li> <p><code>try{ } catch{ }</code> \uff1a\u6355\u83b7throw\u629b\u51fa\u7684\u5f02\u5e38</p> <ul> <li><code>catch (...)</code>\u8868\u793a\u6355\u6349\u6240\u6709\u53ef\u80fd\u7684\u5f02\u5e38 </li> <li>try\u62ec\u53f7\u4e2d\u7684\u4ee3\u7801\u88ab\u79f0\u4e3a\u4fdd\u62a4\u4ee3\u7801</li> </ul> </li> <li> <p>throw\u8bed\u53e5\uff1a\u629b\u51fa\u5f02\u5e38</p> <ul> <li><code>throw exp;</code> \u629b\u51fa\u4e00\u4e2a\u8868\u8fbe\u5f0f\uff1athrow\u7684\u53c2\u6570\u53ef\u4ee5\u662f\u4efb\u4f55\u7684\u8868\u8fbe\u5f0f\uff0c\u8868\u8fbe\u5f0f\u4e2d\u7684\u7c7b\u578b\u51b3\u5b9a\u4e86\u629b\u51fa\u7684\u7ed3\u679c\u7684\u7c7b\u578b</li> <li><code>throw;</code> \u53ea\u6709\u5728catch\u5b50\u53e5\u4e2d\u6709\u6548\uff0c\u628a\u539f\u672c\u6355\u6349\u5230\u7684\u5f02\u5e38\u629b\u51fa</li> </ul> </li> <li>\u5f02\u5e38\u5904\u7406\u7684\u6267\u884c\u8fc7\u7a0b</li> <li>\u7a0b\u5e8f\u6309\u7167\u6b63\u5e38\u7684\u987a\u5e8f\u6267\u884c\uff0c\u5230\u8fbetry\u8bed\u53e5\uff0c\u5f00\u59cb\u6267\u884ctry\u5185\u7684\u4fdd\u62a4\u6bb5</li> <li>\u5982\u679c\u5728\u4fdd\u62a4\u6bb5\u6267\u884c\u671f\u95f4\u6ca1\u6709\u53d1\u751f\u5f02\u5e38\uff0c\u90a3\u4e48\u8df3\u8fc7\u6240\u6709\u7684catch</li> <li>\u5982\u679c\u4fdd\u62a4\u6bb5\u7684\u6267\u884c\u671f\u95f4\u6709\u8c03\u7528\u7684\u4efb\u4f55\u51fd\u6570\u4e2d\u6709\u5f02\u5e38\uff0c\u5219\u53ef\u4ee5\u901a\u8fc7throw\u521b\u5efa\u4e00\u4e2a\u5f02\u5e38\u5bf9\u8c61\u5e76\u629b\u51fa\uff0c\u7a0b\u5e8f\u8f6c\u5230\u5bf9\u5e94\u7684catch\u5904\u7406\u6bb5</li> <li>\u9996\u5148\u8981\u6309\u987a\u5e8f\u5bfb\u627e\u5339\u914d\u7684catch\u5904\u7406\u5668\uff0c\u5982\u679c\u6ca1\u6709\u627e\u5230\uff0c\u5219<code>terminate( )</code> \u4f1a\u88ab\u81ea\u52a8\u8c03\u7528\uff0c\u8be5\u51fd\u6570\u4f1a\u8c03\u7528abort\u7ec8\u6b62\u7a0b\u5e8f<ul> <li>\u5982\u679c\u5728\u51fd\u6570\u4e2d\u8fdb\u884c\u5f02\u5e38\u5904\u7406\u5e76\u4e14\u89e6\u53d1\u4e86terminate\uff0c\u90a3\u4e48\u7ec8\u6b62\u7684\u662f\u5f53\u524d\u51fd\u6570</li> <li>\u5f02\u5e38\u7c7b\u578b\u9700\u8981\u4e25\u683c\u7684\u5339\u914d</li> </ul> </li> <li>\u5982\u679c\u627e\u5230\u4e86\u5339\u914d\u7684catch\u5904\u7406\u7a0b\u5e8f\uff0c\u5e76\u4e14\u901a\u8fc7\u503c\u8fdb\u884c\u6355\u83b7\uff0c\u5219\u5176\u5f62\u53c2\u901a\u8fc7\u62f7\u8d1d\u5f02\u5e38\u5bf9\u8c61\u8fdb\u884c\u521d\u59cb\u5316\uff0c\u5728\u5f62\u53c2\u88ab\u521d\u59cb\u5316\u4e4b\u540e\uff0c\u5c55\u5f00\u6808\u7684\u8fc7\u7a0b\u5f00\u59cb\uff0c\u5f00\u59cb\u5bf9\u5bf9\u5e94\u7684try\u5757\u4e2d\uff0c\u4ece\u5f00\u59cb\u5230\u5f02\u5e38\u4e22\u5f03\u5730\u70b9\u4e4b\u95f4\u521b\u5efa\u7684\u6240\u6709\u5c40\u90e8\u5bf9\u8c61\u7684\u6790\u6784</li> <li>C++\u4e2d\u81ea\u5e26\u7684\u5f02\u5e38\u7684\u7ee7\u627f\u4f53\u7cfb\uff0c\u5b9a\u4e49\u5728\u5934\u6587\u4ef6<code>&lt;exception&gt;</code> \u4e2d</li> <li>what\u65b9\u6cd5\u7ed9\u51fa\u4e86\u4ea7\u751f\u5f02\u5e38\u7684\u539f\u56e0\uff0c\u662f\u5f02\u5e38\u7c7b\u4e4b\u95f4\u90fd\u6709\u7684\u516c\u5171\u65b9\u6cd5\uff0c\u5df2\u7ecf\u88ab\u6240\u6709\u7684\u5b50\u5f02\u5e38\u7c7b\u91cd\u8f7d</li> <li> <p>\u81ea\u5b9a\u4e49\u7684\u5f02\u5e38\u7c7b\uff1a\u9700\u8981\u7ee7\u627fexception\u7c7b</p> </li> <li> <p>\u51fd\u6570\u5b9a\u4e49\u7684\u5f02\u5e38\u58f0\u660e</p> </li> <li>\u53ef\u4ee5\u5728\u51fd\u6570\u540d\u540e\u9762\u52a0<code>noexcept</code>\u5173\u952e\u5b57\uff0c\u8bf4\u660e\u8be5\u51fd\u6570\u5728\u8fd0\u884c\u7684\u8fc7\u7a0b\u4e2d\u4e0d\u629b\u51fa\u4efb\u4f55\u5f02\u5e38\uff0c\u5982\u679c\u8fd8\u662f\u4ea7\u751f\u4e86\u5f02\u5e38\uff0c\u5c31\u4f1a\u8c03\u7528<code>std::terminate</code>\u7ec8\u6b62\u7a0b\u5e8f</li> <li>\u53ef\u4ee5\u5728\u51fd\u6570\u58f0\u660e\u4e2d\u5217\u51fa\u6240\u6709\u53ef\u80fd\u629b\u51fa\u7684\u5f02\u5e38\u7c7b\u578b\uff0c\u6bd4\u5982<code>double f(int, int) throw(int);</code> \u5982\u679c\u662fthrow()\u8868\u793a\u4e0d\u629b\u51fa\u4e00\u573a\uff0c\u5c31\u7b97\u51fd\u6570\u91cc\u6709throw\u4e5f\u4e0d\u4f1a\u6267\u884c</li> <li>throw\u4f1a\u5bfc\u81f4\u4e00\u4e2a\u51fd\u6570\u6ca1\u6709\u6267\u884c\u5b8c\u6bd5\uff0c\u4f46\u662f\u5728\u51fd\u6570throw\u4e4b\u524d\u4f1a\u6267\u884c\u6240\u6709\u5c40\u90e8\u53d8\u91cf\u7684\u6790\u6784\u51fd\u6570</li> <li>\u6700\u597d\u4e0d\u8981\u5728\u6790\u6784\u51fd\u6570\u4e2d\u629b\u51fa\u5f02\u5e38</li> </ul> <pre><code>class T\n{\n    T(){\n        cout&lt;&lt;\"T()\"&lt;&lt;endl;\n    }\n    ~T(){\n        cout&lt;&lt;\"~T()\"&lt;&lt;endl;\n    }\n}\n\nvoid foo()\n{\n    T t;\n    throw 1;\n}\n\nint main()\n{\n    try{\n        foo();\n    }\n    catch(...){\n        cout&lt;&lt;\"Catched!\"&lt;&lt;endl;\n    }\n    return 0;\n}\n\n//\u8fd0\u884c\u7684\u7ed3\u679c\u662f\nT()\n~T()\nCatched\n</code></pre>"},{"location":"ZJU_CS/oop/#6_smart_pointer","title":"6. Smart Pointer \u667a\u80fd\u6307\u9488","text":"<ul> <li>\u666e\u901a\u6307\u9488\u7ba1\u7406\u5185\u5b58\u5bb9\u6613\u9020\u6210\u5185\u5b58\u6cc4\u6f0f(\u6bd4\u5982\u7528\u5b8c\u5fd8\u8bb0\u91ca\u653e)\uff0cC++\u63d0\u4f9b\u4e86\u667a\u80fd\u6307\u9488\u7528\u4e8e\u5185\u5b58\u7684\u7ba1\u7406</li> <li>\u667a\u80fd\u6307\u9488\u4f7f\u7528\u4e86\u4e00\u79cdRAII(\u8d44\u6e90\u83b7\u53d6\u5373\u521d\u59cb\u5316)\u6280\u672f\u5bf9\u666e\u901a\u7684\u6307\u9488\u8fdb\u884c\u4e86\u5c01\u88c5\uff0c\u4f7f\u5f97\u667a\u80fd\u6307\u9488\u5b9e\u8d28\u4e0a\u662f\u4e00\u4e2a\u5bf9\u8c61\uff0c\u4f46\u662f\u884c\u4e3a\u8868\u73b0\u5f97\u50cf\u4e00\u4e2a\u6307\u9488</li> <li> <p>\u667a\u80fd\u6307\u9488\u7684\u76f8\u5173\u5185\u5bb9\u5305\u542b\u5728\u5934\u6587\u4ef6</p> </li> <li> <p>\u6807\u51c6\u5e93\u4e2d\u652f\u6301\u7684\u667a\u80fd\u6307\u9488\u7c7b\u578b</p> </li> <li> <p><code>std::unique_ptr</code>\u53ea\u5141\u8bb8\u8fd9\u4e2a\u6307\u9488\u6765\u7ba1\u7406\u5bf9\u5e94\u7684\u8d44\u6e90\uff0c\u4e0d\u5141\u8bb8\u6307\u9488\u4e4b\u95f4\u7684\u62f7\u8d1d\uff0c\u4f46\u662f</p> <ul> <li>\u4e0d\u5141\u8bb8\u8fdb\u884c\u6307\u9488\u7684\u8d4b\u503c\u548c\u62f7\u8d1d</li> <li>\u53ef\u4ee5\u7528<code>move</code>\u65b9\u6cd5\u6765\u79fb\u52a8\u6307\u9488\u7684\u6240\u6709\u6743\uff0c\u6bd4\u5982<code>unique_ptr&lt;int&gt; p2 = move(p1);</code> </li> <li>\u53ef\u4ee5\u7528<code>release</code>\u65b9\u6cd5\u6765\u91ca\u653e\u6307\u9488\u7684\u6240\u6709\u6743</li> </ul> </li> </ul> <pre><code>class A{\npublic:\n    A(){\n        cout&lt;&lt;\"A()\"&lt;&lt;endl;\n    }\n    ~A(){\n        cout&lt;&lt;\"~A()\"&lt;&lt;endl;\n    }\n    void foo(){\n        cout&lt;&lt;\"1\"&lt;&lt;endl;\n    }\n}\n\nint main()\n{\n    {\n        unique_ptr&lt;A&gt; pa(new (A));\n        pa-&gt;foo();\n  }\n}\n</code></pre> <ul> <li> <p><code>std::shared_ptr</code>\u975e\u72ec\u5360\u7684\u6307\u9488\uff0c\u53ef\u4ee5\u591a\u4e2a\u6307\u9488\u7ba1\u7406\u4e00\u4e2a\u5bf9\u8c61\u3002shared_ptr\u4f7f\u7528\u5f15\u7528\u8ba1\u6570\uff0c\u6bcf\u4e00\u4e2ashared_ptr\u7684\u62f7\u8d1d\u90fd\u6307\u5411\u76f8\u540c\u7684\u5185\u5b58\u3002\u6bcf\u4f7f\u7528\u4ed6\u4e00\u6b21\uff0c\u5185\u90e8\u7684\u5f15\u7528\u8ba1\u6570\u52a01\uff0c\u6bcf\u6790\u6784\u4e00\u6b21\uff0c\u5185\u90e8\u7684\u5f15\u7528\u8ba1\u6570\u51cf1\uff0c\u51cf\u4e3a0\u65f6\uff0c\u81ea\u52a8\u5220\u9664\u6240\u6307\u5411\u7684\u5806\u5185\u5b58\u3002shared_ptr\u5185\u90e8\u7684\u5f15\u7528\u8ba1\u6570\u662f\u7ebf\u7a0b\u5b89\u5168\u7684\uff0c\u4f46\u662f\u5bf9\u8c61\u7684\u8bfb\u53d6\u9700\u8981\u52a0\u9501 </p> <ul> <li>\u53ef\u4ee5\u7528<code>use_count</code>\u51fd\u6570\u6765\u67e5\u770b\u67d0\u4e2a\u5bf9\u8c61\u62e5\u6709\u7684\u6307\u9488\u7684\u4e2a\u6570</li> <li>\u53ef\u4ee5\u7528<code>get</code>\u51fd\u6570\u6765\u83b7\u53d6\u539f\u59cb\u6307\u9488</li> <li>\u4e0d\u80fd\u7528\u4e00\u4e2a\u539f\u59cb\u6307\u9488\u521d\u59cb\u5316\u591a\u4e2a<code>shared_ptr</code> \u5426\u5219\u4f1a\u9020\u6210\u5185\u5b58\u591a\u6b21\u91ca\u653e</li> </ul> <pre><code>#include&lt;iostream&gt;\n#include&lt;memory&gt;\nint main()\n{\n    int a = 10;\n    std::shared_ptr&lt;int&gt; ptra = make_shared&lt;int&gt;(a);\n    srd::shared_prt&lt;int&gt; ptrb(ptra);\n    cout&lt;&lt;ptra.use_count&lt;&lt;endl; //\u8f93\u51fa\u7684\u7ed3\u679c\u662f2\n}\n</code></pre> </li> <li> <p><code>std::weak_ptr</code>\u662f\u6ca1\u7528\u91cd\u8f7d*\u548c-&gt;\u64cd\u4f5c\u7b26\uff0c\u6ca1\u6709\u666e\u901a\u6307\u9488\u5177\u6709\u7684\u884c\u4e3a\uff0c\u6700\u5927\u7684\u4f5c\u7528\u5728\u4e8e\u534f\u52a9\u5176\u4ed6\u6307\u9488\u7684\u5de5\u4f5c\uff0c\u67e5\u770b\u5bf9\u8c61\u4e2d\u7684\u8d44\u6e90\u4f7f\u7528\u60c5\u51b5</p> <ul> <li>weak_ptr\u53ef\u4ee5\u901a\u8fc7\u4e00\u4e2ashared_ptr\u6216\u8005weak_ptr\u6765\u8fdb\u884c\u6784\u9020\uff0c\u83b7\u53d6\u89c2\u6d4b\u6743\uff0c\u4f46\u662fweak_ptr\u4e0d\u4f1a\u9020\u6210\u6307\u9488\u5f15\u7528\u8ba1\u6570\u7684\u589e\u52a0 </li> </ul> </li> </ul>"},{"location":"ZJU_CS/oop/final-review/","title":"OOP Final Review","text":"<p>PTA homework of ZJU Object Oriented Programming, 2022 Spring &amp; Summer.</p>"},{"location":"ZJU_CS/oop/final-review/#week9","title":"Week9","text":"<p>Q1. \u5bf9\u8c61\u95f4\u8d4b\u503c\u5c06\u8c03\u7528\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u3002(T/F)</p> Answer <p>F\u3002\u5bf9\u8c61\u95f4\u8d4b\u503c\uff0c\u5982\u679c\u662f\u540c\u7c7b\u5bf9\u8c61\uff0c\u6709\u76f8\u5173\u7c7b\u578b\u7684\u8d4b\u503c\u8fd0\u7b97\u7b26\u91cd\u8f7d\u7684\u8bdd\u4f18\u5148\u8c03\u7528\u91cd\u8f7d\u7684\u8d4b\u503c\u8fd0\u7b97\u7b26\uff0c\u5426\u5219\u4f1a\u8c03\u7528\u81ea\u52a8\u751f\u6210\u7684 memberwise assignment\uff0c\u5373\u81ea\u52a8\u7684\u8d4b\u503c\u8fd0\u7b97\u3002</p> <p>\u5982\u679c\u662f\u4e0d\u540c\u7c7b\u578b\u7684\u5bf9\u8c61\u8d4b\u503c\uff0c\u90a3\u4e48\u5982\u679c\u6ca1\u6709\u5199\u76f8\u5173\u7c7b\u578b\u7684\u8d4b\u503c\u8fd0\u7b97\u7b26\u7684\u91cd\u8f7d\u7684\u8bdd\uff0c\u5982\u679c\u5b58\u5728\u76f8\u5173\u7c7b\u578b\u7684\u6784\u9020\u51fd\u6570\uff0c\u90a3\u4e48\u662f\u4f1a\u8c03\u7528\u90a3\u4e2a\u6784\u9020\u51fd\u6570\u7684\u3002</p> <p>Q2. \u8bbe\u7c7bAA\u5df2\u5b9a\u4e49\uff0c\u5047\u8bbe\u4ee5\u4e0b\u8bed\u53e5\u5168\u90e8\u5408\u6cd5\uff0c\u54ea\u4e9b\u8bed\u53e5\u4f1a\u89e6\u53d1\u8c03\u7528\u62f7\u8d1d\u6784\u9020\u51fd\u6570\uff08\uff09\u3002</p> <pre><code>AA a, b; //1\nAA c(10, 20); //2\nAA d(c); //3\nAA e = d; //4\n</code></pre> <p>A.2</p> <p>B.3</p> <p>C.4</p> <p>D.3 \u548c 4</p> Answer <p>D\u30021 \u662f\u9ed8\u8ba4\u6784\u9020\uff0c2 \u662f\u542b\u53c2\u6784\u9020\uff0c</p> <p>3 \u662f\u6807\u51c6\u7684\u590d\u5236\u6784\u9020\uff0c</p> <p>4 \u867d\u7136\u770b\u4f3c\u6709 =\uff0c\u5176\u5b9e\u4e5f\u662f\u590d\u5236\u6784\u9020\u3002</p> <p>Q3. \u5047\u8bbeMyClass\u662f\u4e00\u4e2a\u7c7b\uff0c\u5219\u8be5\u7c7b\u7684\u62f7\u8d1d\u521d\u59cb\u5316\u6784\u9020\u51fd\u6570\u7684\u58f0\u660e\u8bed\u53e5\u4e3a\uff08\uff09</p> <p>A. <code>MyClass&amp;(MyClass x);</code></p> <p>B. <code>MyClass(MyClass x);</code></p> <p>C. <code>MyClass(MyClass &amp;x);</code></p> <p>D. <code>MyClass(MyClass *x);</code></p> Answer <p>C\u3002\u58f0\u660e\u62f7\u8d1d\u6784\u9020\u51fd\u6570\uff1aA(const A &amp; a) \u6216\u8005 A(A &amp; a)\u3002</p> <p>\u867d\u7136\u611f\u89c9\u52a0\u4e2a const \u66f4\u597d\uff0c\u4f46\u662f\u6ca1\u6709 const \u4e5f\u884c\u3002</p> <p>Q4. \u4e0b\u5217\u5173\u4e8e\u5f02\u5e38\u7c7b\u7684\u8bf4\u6cd5\u4e2d\uff0c\u9519\u8bef\u7684\u662f\u3002\uff08\uff09</p> <p>A. \u5f02\u5e38\u7c7b\u7531\u6807\u51c6\u5e93\u63d0\u4f9b\uff0c\u4e0d\u53ef\u4ee5\u81ea\u5b9a\u4e49</p> <p>B. C++\u7684\u5f02\u5e38\u5904\u7406\u673a\u5236\u5177\u6709\u4e3a\u629b\u51fa\u5f02\u5e38\u524d\u6784\u9020\u7684\u6240\u6709\u5c40\u90e8\u5bf9\u8c61\u81ea\u52a8\u8c03\u7528\u6790\u6784\u51fd\u6570\u7684\u80fd\u529b</p> <p>C. \u82e5catch\u5757\u91c7\u7528\u5f02\u5e38\u7c7b\u5bf9\u8c61\u63a5\u6536\u5f02\u5e38\u4fe1\u606f\uff0c\u5219\u5728\u629b\u51fa\u5f02\u5e38\u65f6\u5c06\u901a\u8fc7\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u8fdb\u884c\u5bf9\u8c61\u590d\u5236\uff0c\u5f02\u5e38\u5904\u7406\u5b8c\u540e\u624d\u5c06\u4e24\u4e2a\u5f02\u5e38\u5bf9\u8c61\u8fdb\u884c\u6790\u6784\uff0c\u91ca\u653e\u8d44\u6e90</p> <p>D. \u5f02\u5e38\u7c7b\u5bf9\u8c61\u629b\u51fa\u540e\uff0ccatch\u5757\u4f1a\u7528\u7c7b\u5bf9\u8c61\u5f15\u7528\u63a5\u6536\u5b83\u4ee5\u4fbf\u6267\u884c\u76f8\u5e94\u7684\u5904\u7406\u52a8\u4f5c</p> Answer <p>A\u3002\u53ef\u4ee5\u81ea\u5b9a\u4e49\u5f02\u5e38\u7c7b\u3002</p> <p>\u5f02\u5e38\u629b\u51fa\uff0c\u629b\u51fa\u4f4d\u7f6e\u6784\u9020\u7684\u6240\u6709\u5c40\u90e8\u5bf9\u8c61\u5e94\u8be5\u88ab\u91ca\u653e\u3002</p> <p>catch\u5757\u53ef\u4ee5\u7528\u5bf9\u8c61\u6216\u8005\u5f15\u7528\u63a5\u53d7\u5f02\u5e38\u4fe1\u606f\u3002</p> <p>\u5176\u4e2d\u4f7f\u7528\u5bf9\u8c61\u63a5\u6536\u5f02\u5e38\u5bf9\u8c61\u662f\u6bd4\u8f83\u597d\u7684\uff0c\u56e0\u4e3a\u53ef\u4ee5\u5c06\u5f02\u5e38\u5bf9\u8c61\u62f7\u8d1d\u5230 catch \u5757\u4e2d\uff0c\u7a7a\u95f4\u662f\u786e\u5b9a\u7684\uff1b</p> <p>\u800c\u5f15\u7528\u7684\u8bdd\uff0c\u53ef\u80fd\u5f02\u5e38\u5bf9\u8c61\u5c31\u5728\u67d0\u4e2a\u88ab\u91ca\u653e\u7684\u6808\u7a7a\u95f4\u4e2d\uff0c\u4e0d\u662f\u5f88\u5b89\u5168\u3002</p> <p>Q5. \u4e0b\u5217\u54ea\u4e00\u4e2a\u8bf4\u6cd5\u662f\u9519\u8bef\u7684?\uff08\uff09</p> <p>A. \u5f53\u7528\u4e00\u4e2a\u5bf9\u8c61\u53bb\u521d\u59cb\u5316\u540c\u7c7b\u7684\u53e6\u4e00\u4e2a\u5bf9\u8c61\u65f6,\u8981\u8c03\u7528\u62f7\u8d1d\u6784\u9020\u51fd\u6570</p> <p>B. \u5982\u679c\u67d0\u51fd\u6570\u6709\u4e00\u4e2a\u53c2\u6570\u662f\u7c7bA\u7684\u5bf9\u8c61,\u90a3\u4e48\u8be5\u51fd\u6570\u88ab\u8c03\u7528\u65f6,\u7c7bA\u7684\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u5c06\u88ab\u8c03\u7528</p> <p>C. \u5982\u679c\u51fd\u6570\u7684\u8fd4\u56de\u503c\u662f\u7c7bA\u7684\u5bf9\u8c61\u65f6\uff0c\u5219\u51fd\u6570\u8fd4\u56de\u65f6\uff0c\u7c7bA\u7684\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u5c06\u88ab\u8c03\u7528</p> <p>D. \u62f7\u8d1d\u6784\u9020\u51fd\u6570\u5fc5\u987b\u81ea\u5df1\u7f16\u5199</p> Answer <p>D\u3002\u8fd9\u9053\u9898\u672c\u8eab\u6ca1\u4ec0\u4e48\u96be\u5ea6\uff0c\u4f46\u662f\u4f5c\u4e3a\u590d\u4e60\u6bd4\u8f83\u9002\u5408\u3002</p> <p>A\u3001B\u3001C \u8986\u76d6\u4e86\u8bfe\u4e0a\u8bb2\u5230\u7684\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u88ab\u8c03\u7528\u7684\u4e09\u79cd\u60c5\u51b5\u3002\uff08\u5c3d\u7ba1\u7f16\u8bd1\u5668\u53ef\u80fd\u4f1a\u8fdb\u884c\u4f18\u5316\uff09</p> <p>Q6. \u5047\u8bbeA\u662f\u4e00\u4e2a\u7c7b\u7684\u540d\u5b57,\u4e0b\u9762\u54ea\u6bb5\u7a0b\u5e8f\u4e0d\u4f1a\u7528\u5230A\u7684\u62f7\u8d1d\u6784\u9020\u51fd\u6570\uff1f\uff08\uff09</p> <p>A. A a1,a2; a1=a2;</p> <p>B. void func( A a) { cout&lt;&lt;\"good\"&lt;&lt; endl; }</p> <p>C. A func() { A tmp; return tmp;}</p> <p>D. A a1; A a2(a1);</p> Answer <p>A\u3002</p> <p>A \u662f\u8d4b\u503c\u3002</p> <p>B \u7684\u53c2\u6570\u9700\u8981\u62f7\u8d1d\u6784\u9020\u3002</p> <p>C \u662f\u8fd4\u56de\u503c\u9700\u8981\u62f7\u8d1d\u6784\u9020\u3002</p> <p>D \u662f\u6700\u57fa\u672c\u7684\u62f7\u8d1d\u6784\u9020\u3002\uff08\u4ee5\u4e0a\u90fd\u4e0d\u8003\u8651\u7f16\u8bd1\u5668\u4f18\u5316\uff09</p> <p>\u5982\u679c A \u5199\u6210 <code>A a1=a2;</code>\uff0c\u90a3\u4e48\u4e5f\u662f\u4f1a\u7528\u5230\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u7684\u3002</p>"},{"location":"ZJU_CS/oop/final-review/#week10","title":"Week10","text":"<p>Q1. \u591a\u6570\u8fd0\u7b97\u7b26\u53ef\u4ee5\u91cd\u8f7d\uff0c\u4e2a\u522b\u8fd0\u7b97\u7b26\u4e0d\u80fd\u91cd\u8f7d\uff0c\u8fd0\u7b97\u7b26\u91cd\u8f7d\u662f\u901a\u8fc7\u51fd\u6570\u5b9a\u4e49\u5b9e\u73b0\u7684\u3002(T/F)</p> Answer <p>T\u3002</p> <p>\u53ef\u4ee5\u91cd\u8f7d/\u4e0d\u80fd\u91cd\u8f7d\u7684\u8fd0\u7b97\u7b26</p> <p>\u53ef\u4ee5\u91cd\u8f7d\u7684\u8fd0\u7b97\u7b26\uff0c\u6709\u7b97\u672f\u3001\u8d4b\u503c\u3001\u6bd4\u8f83\u3001\u4f4d\u8fd0\u7b97\u3001\u903b\u8f91\u4e0e\u6216\u975e\u3001+\u00b1-\u7b49\uff0c\u6bd4\u8f83\u7279\u6b8a\u7684\u6709\uff1a</p> <ul> <li>&lt;&lt; \u548c &gt;&gt;\uff0c\u6216\u5de6\u79fb/\u53f3\u79fb\uff0c\u4e5f\u53ef\u80fd\u662f\u6d41\u63d2\u5165/\u6d41\u63d0\u53d6</li> <li>\u9017\u53f7 , \u4e5f\u80fd\u91cd\u8f7d</li> <li>\u6307\u9488\u4e2d\uff0c-&gt; \u548c -&gt; \u90fd\u80fd\u91cd\u8f7d\uff08\u867d\u7136\u6211\u5e76\u4e0d\u592a\u6e05\u695a -&gt; \u7684\u91cd\u8f7d\u7684\u610f\u4e49\u662f\u4ec0\u4e48\u2026\u2026\uff09</li> <li>()\u53ef\u4ee5\u91cd\u8f7d\uff0c\u5728 minisql \u4e2d\u6bd4\u8f83\u5668\u5c31\u662f\u91cd\u8f7d\u4e86 () </li> <li>[]\u4e5f\u53ef\u4ee5\u91cd\u8f7d\uff0c\u50cf\u81ea\u5b9a\u4e49\u6570\u7ec4\u7c7b Array \u4e2d\u5c31\u7528\u5230\u4e86 [] \u7684\u91cd\u8f7d</li> <li>new, new[], delete, delete[] \u4e5f\u80fd\u91cd\u8f7d\u3002</li> </ul> <p>\u4e0d\u80fd\u91cd\u8f7d\u7684\u8fd0\u7b97\u7b26\u6709\uff1a</p> <ul> <li>\u6210\u5458\u76f8\u5173\u7684 . \u548c .*</li> <li>\u5ba3\u8a93\u4e3b\u6743\u7684 ::</li> <li>\u4e09\u76ee\u8fd0\u7b97\u7b26 ?:</li> <li>sizeof \u548c typeid\uff08\u8fd9\u4e24\u4e2a\u7adf\u7136\u4e5f\u7b97\u8fd0\u7b97\u7b26\uff09</li> <li>\u7c7b\u578b\u8f6c\u6362\u76f8\u5173\uff1astatic_cast, dynamic_cast, const_cast \u548c reinterpret_cast</li> </ul> <p>\u53ea\u6709\u5df2\u6709\u7684\u8fd0\u7b97\u7b26\u80fd\u88ab\u91cd\u8f7d\u3002\u50cf ** \u5c31\u4e0d\u80fd\u88ab\u91cd\u8f7d\uff0c\u56e0\u4e3a\u5b83\u88ab\u8ba4\u4e3a\u662f\"create\"\u3002</p> <p>Q2. \u5bf9\u6bcf\u4e2a\u53ef\u91cd\u8f7d\u7684\u8fd0\u7b97\u7b26\u6765\u8bb2\uff0c\u5b83\u65e2\u53ef\u4ee5\u91cd\u8f7d\u4e3a\u53cb\u5143\u51fd\u6570\uff0c\u53c8\u53ef\u4ee5\u91cd\u8f7d\u4e3a\u6210\u5458\u51fd\u6570\uff0c\u8fd8\u53ef\u4ee5\u91cd\u8f7d\u4e3a\u975e\u6210\u5458\u51fd\u6570\u3002(T/F)</p> Answer <p>F\u3002\u8fd0\u7b97\u7b26\u91cd\u8f7d\u53ea\u80fd\u91cd\u8f7d\u4e3a\u53cb\u5143\u51fd\u6570\u6216\u8005\u6210\u5458\u51fd\u6570\u3002</p> <p>\u975e\u53cb\u5143\u51fd\u6570\u7684\u975e\u6210\u5458\u51fd\u6570\u662f\u4e0d\u80fd\u88ab\u91cd\u8f7d\u7684\u3002</p> <p>Q3. \u5bf9\u5355\u76ee\u8fd0\u7b97\u7b26\u91cd\u8f7d\u4e3a\u53cb\u5143\u51fd\u6570\u65f6\uff0c\u53ef\u4ee5\u8bf4\u660e\u4e00\u4e2a\u5f62\u53c2\u3002\u800c\u91cd\u8f7d\u4e3a\u6210\u5458\u51fd\u6570\u65f6\uff0c\u4e0d\u80fd\u663e\u5f0f\u8bf4\u660e\u5f62\u53c2\u3002(T/F)</p> Answer <p>T\u3002\u8fd9\u91cc\u8bf4\u660e\u4e86\u91cd\u8f7d\u4e3a\u53cb\u5143\u51fd\u6570\u548c\u6210\u5458\u51fd\u6570\u7684\u533a\u522b\u3002</p> <p>\u53cc\u76ee\u8fd0\u7b97\u7b26\u7684\u91cd\u8f7d\uff0c\u53cb\u5143\u51fd\u6570\u9700\u8981\u8bf4\u660e\u4e24\u4e2a\u5f62\u53c2\uff0c\u6210\u5458\u51fd\u6570\u53ea\u9700\u8981\u8bf4\u660e\u4e00\u4e2a\u5f62\u53c2\u3002</p> <p>\u4e09\u76ee\u8fd0\u7b97\u7b26\u4e0d\u80fd\u91cd\u8f7d\u3002</p> <p>\u7136\u800c\uff0c\u4e00\u822c\u5730\uff0c\u5355\u76ee\u8fd0\u7b97\u7b26\u5e94\u8be5\u91cd\u8f7d\u4e3a\u6210\u5458\u51fd\u6570\uff0c\u53cc\u76ee\u8fd0\u7b97\u7b26\u5e94\u8be5\u91cd\u8f7d\u4e3a\u53cb\u5143\u51fd\u6570\u3002</p> <p>\u7279\u522b\u5730\uff0c ()\u3001[]\u3001-&gt;\u3001-&gt;* \uff0c\u4ee5\u53ca = \u7b49\u8d4b\u503c\u8fd0\u7b97\u7b26\u90fd\u5fc5\u987b\u88ab\u91cd\u8f7d\u4e3a\u6210\u5458\u51fd\u6570\u3002</p> <p>Q4. \u91cd\u8f7d\u8fd0\u7b97\u7b26\u53ef\u4ee5\u4fdd\u6301\u539f\u8fd0\u7b97\u7b26\u7684\u4f18\u5148\u7ea7\u548c\u7ed3\u5408\u6027\u4e0d\u53d8\u3002(T/F)</p> Answer <p>T\u3002</p> <p>Q5. \u91cd\u8f7d <code>operator+</code> \u65f6\uff0c\u8fd4\u56de\u503c\u7684\u7c7b\u578b\u5e94\u5f53\u4e0e\u5f62\u53c2\u7c7b\u578b\u4e00\u81f4\u3002\u6bd4\u5982\u4ee5\u4e0b\u7a0b\u5e8f\u4e2d\uff0c<code>operator+</code> \u7684\u8fd4\u56de\u503c\u7c7b\u578b\u6709\u9519\uff1a(T/F)</p> <pre><code>class A {\n\nint x;\npublic:\n\n    A(int t=0): x(t) {     }\n\n    int operator+(const A&amp; a1){ return x+a1.x;  }\n};\n</code></pre> Answer <p>F\u3002\u91cd\u8f7d operator+\uff0c\u8fd4\u56de\u503c\u7c7b\u578b\u4e0d\u4e00\u5b9a\u8981\u548c\u5f62\u53c2\u7c7b\u578b\u4e00\u81f4\u3002</p> <p>Q6. \u4e0b\u5217\u5173\u4e8e\u8fd0\u7b97\u7b26\u91cd\u8f7d\u7684\u63cf\u8ff0\u4e2d\uff0c\uff08\uff09\u662f\u6b63\u786e\u7684\u3002</p> <p>A. \u8fd0\u7b97\u7b26\u91cd\u8f7d\u53ef\u4ee5\u6539\u53d8\u64cd\u4f5c\u6570\u7684\u4e2a\u6570</p> <p>B. \u8fd0\u7b97\u7b26\u91cd\u8f7d\u53ef\u4ee5\u6539\u53d8\u4f18\u5148\u7ea7</p> <p>C. \u8fd0\u7b97\u7b26\u91cd\u8f7d\u53ef\u4ee5\u6539\u53d8\u7ed3\u5408\u6027</p> <p>D. \u8fd0\u7b97\u7b26\u91cd\u8f7d\u4e0d\u53ef\u4ee5\u6539\u53d8\u8bed\u6cd5\u7ed3\u6784</p> Answer <p>D\u3002\u4e0d\u592a\u6e05\u695a\u8bed\u6cd5\u7ed3\u6784\u662f\u4ec0\u4e48\u610f\u601d\uff0c\u53ef\u80fd\u662f\u6307 A\u3001B\u3001C \u90fd\u4e0d\u80fd\u6539\uff1f</p> <p>\u8fd0\u7b97\u7b26\u91cd\u8f7d\u8fd8\u5982\u539f\u6765\u7684\u8fd0\u7b97\u7b26\u4e00\u822c\uff0c\u64cd\u4f5c\u6570\u4e2a\u6570\u3001\u4f18\u5148\u7ea7\u3001\u7ed3\u5408\u6027\u90fd\u662f\u4e0d\u53d8\u7684\u3002</p> <p>Q7. \u4e0b\u5217\u5173\u4e8e\u8fd0\u7b97\u7b26\u91cd\u8f7d\u7684\u8868\u8ff0\u4e2d\uff0c\u6b63\u786e\u7684\u662f\uff08\uff09\u3002</p> <p>A. C++\u5df2\u6709\u7684\u4efb\u4f55\u8fd0\u7b97\u7b26\u90fd\u53ef\u4ee5\u91cd\u8f7d</p> <p>B. \u8fd0\u7b97\u7b26\u51fd\u6570\u7684\u8fd4\u56de\u7c7b\u578b\u4e0d\u80fd\u58f0\u660e\u4e3a\u57fa\u672c\u6570\u636e\u7c7b\u578b</p> <p>C. \u5728\u7c7b\u578b\u8f6c\u6362\u7b26\u51fd\u6570\u7684\u5b9a\u4e49\u4e2d\u4e0d\u9700\u8981\u58f0\u660e\u8fd4\u56de\u7c7b\u578b</p> <p>D. \u53ef\u4ee5\u901a\u8fc7\u8fd0\u7b97\u7b26\u91cd\u8f7d\u6765\u521b\u5efaC++\u4e2d\u539f\u6765\u6ca1\u6709\u7684\u8fd0\u7b97\u7b26</p> Answer <p>C\u3002\u7c7b\u578b\u8f6c\u6362\u8fd0\u7b97\u7b26\u91cd\u8f7d\uff0c\u5982 double \u5e94\u58f0\u660e\u4e3a <code>operator double() const;</code>\uff0c\u53ef\u89c1\u662f\u4e0d\u9700\u8981\u58f0\u660e\u8fd4\u56de\u7c7b\u578b\u7684\u3002</p> <p>Q8. \u80fd\u7528\u53cb\u5143\u51fd\u6570\u91cd\u8f7d\u7684\u8fd0\u7b97\u7b26\u662f\uff08\uff09\u3002</p> <p>A. +</p> <p>B. =</p> <p>C. []</p> <p>D.-&gt;</p> Answer <p>A\u3002BCD \u90fd\u662f\u88ab\u8981\u6c42\u201c\u5fc5\u987b\u201d\u7528\u6210\u5458\u51fd\u6570\u91cd\u8f7d\u7684\u3002</p> <p>\u53e6\u5916\uff0cA \u4f5c\u4e3a\u4e8c\u5143\u8fd0\u7b97\u7b26\u4e5f\u53ea\u662f\u201c\u5e94\u8be5\u201d\u7528\u53cb\u5143\u51fd\u6570\u91cd\u8f7d\u3002</p> <p>\u5176\u4ed6\u201c\u5fc5\u987b\u201d\u7528\u6210\u5458\u51fd\u6570\u91cd\u8f7d\u7684\u8fd0\u7b97\u7b26\u662f-&gt;*\u548c()\u3002</p> <p>Q9. \u4e0b\u5217\u54ea\u4e00\u9879\u8bf4\u6cd5\u662f\u4e0d\u6b63\u786e\u7684?()</p> <p>A. \u8fd0\u7b97\u7b26\u91cd\u8f7d\u7684\u5b9e\u8d28\u662f\u51fd\u6570\u91cd\u8f7d</p> <p>B. \u8fd0\u7b97\u7b26\u91cd\u8f7d\u53ef\u4ee5\u91cd\u8f7d\u4e3a\u666e\u901a\u51fd\u6570,\u4e5f\u6210\u5458\u53ef\u4ee5\u91cd\u8f7d\u4e3a\u6210\u5458\u51fd\u6570</p> <p>C. \u8fd0\u7b97\u7b26\u88ab\u591a\u6b21\u91cd\u8f7d\u65f6,\u6839\u636e\u5b9e\u53c2\u7684\u7c7b\u578b\u51b3\u5b9a\u8c03\u7528\u54ea\u4e2a\u8fd0\u7b97\u7b26\u91cd\u8f7d\u51fd\u6570</p> <p>D. \u8fd0\u7b97\u7b26\u88ab\u591a\u6b21\u91cd\u8f7d\u65f6,\u6839\u636e\u51fd\u6570\u7c7b\u578b\u51b3\u5b9a\u8c03\u7528\u54ea\u4e2a\u91cd\u8f7d\u51fd\u6570</p> Answer <p>D\u3002C \u5bf9 D \u9519\u3002</p> <p>B \u4e25\u683c\u6765\u8bf4\uff0c\u5e94\u8be5\u662f\u201c\u53cb\u5143\u51fd\u6570\u201d\u800c\u4e0d\u662f\u5355\u7eaf\u7684\u666e\u901a\u51fd\u6570\u3002</p> <p>\u5982 A \u6240\u8bf4\uff0c\u8fd0\u7b97\u7b26\u91cd\u8f7d\u5b9e\u8d28\u662f\u51fd\u6570\u91cd\u8f7d\uff0c\u51fd\u6570\u91cd\u8f7d\u662f\u4e0d\u80fd\u4ec5\u6839\u636e\u8fd4\u56de\u7c7b\u578b\u533a\u5206\u7684\uff0c\u800c\u662f\u901a\u8fc7\u53c2\u6570\u5217\u8868\u533a\u5206\u7684\u3002</p> <p>Q10. \u5982\u4f55\u533a\u5206\u81ea\u589e\u8fd0\u7b97\u7b26\u91cd\u8f7d\u7684\u524d\u7f6e\u5f62\u5f0f\u548c\u540e\u7f6e\u5f62\u5f0f\uff1f\uff08\uff09</p> <p>A. \u91cd\u8f7d\u65f6\uff0c\u524d\u7f6e\u5f62\u5f0f\u7684\u51fd\u6570\u540d\u662f ++operator\uff0c\u540e\u7f6e\u5f62\u5f0f\u7684\u51fd\u6570\u540d\u662f operator ++</p> <p>B. \u540e\u7f6e\u5f62\u5f0f\u6bd4\u524d\u7f6e\u5f62\u5f0f\u591a\u4e00\u4e2a int \u7c7b\u578b\u7684\u53c2\u6570</p> <p>C. \u65e0\u6cd5\u533a\u5206\uff0c\u4f7f\u7528\u65f6\u4e0d\u7ba1\u524d\u7f6e\u5f62\u5f0f\u8fd8\u662f\u540e\u7f6e\u5f62\u5f0f\uff0c\u90fd\u8c03\u7528\u76f8\u540c\u7684\u91cd\u8f7d\u51fd\u6570</p> <p>D. \u524d\u7f6e\u5f62\u5f0f\u6bd4\u540e\u7f6e\u5f62\u5f0f\u591a\u4e00\u4e2a int \u7c7b\u578b\u7684\u53c2\u6570</p> Answer <p>B\u3002\u524d\u7f6e\u5f62\u5f0f\u4e3a operater++()\uff0c\u540e\u7f6e\u5f62\u5f0f\u4e3a operator++(int)\u3002</p> <p>Q11. \u4e0b\u5217\u8fd0\u7b97\u7b26\u4e2d\uff0c\u4e0d\u53ef\u4ee5\u91cd\u8f7d\u7684\u662f\uff08\uff09\u3002</p> <p>A. new</p> <p>B. ++</p> <p>C. .*</p> <p>D. []</p> Answer <p>C\u3002\u6bd4\u8f83\u5bb9\u6613\u8003\u5230\u7684\u4e0d\u80fd\u91cd\u8f7d\u7684\u8fd0\u7b97\u7b26\u6709</p> <ul> <li>\u6210\u5458\u76f8\u5173\u7684 . \u548c .*</li> <li>Resolver ::</li> <li>\u4e09\u76ee\u8fd0\u7b97\u7b26 ?:</li> <li>sizeof\u3001typeid \u548c\u7c7b\u578b\u8f6c\u6362\u76f8\u5173\u8fd8\u6ca1\u6709\u89c1\u8fc7</li> </ul>"},{"location":"ZJU_CS/oop/final-review/#week11","title":"Week11","text":"<p>Q1. \u82e5\u91cd\u8f7d\u4e3a\u53cb\u5143\u51fd\u6570\uff0c\u51fd\u6570\u5b9a\u4e49\u683c\u5f0f\u5982\u4e0b\uff1a()</p> <pre><code>&lt;\u7c7b\u578b&gt;operator&lt;\u8fd0\u7b97\u7b26&gt;\uff08&lt;\u53c2\u6570\u5217\u8868&gt;\uff09\n{\n&lt;\u51fd\u6570\u4f53&gt;\n}\n</code></pre> Answer <p>PTA \u4e0a\u7b54\u6848\u4e3a F\u3002\u7f51\u7edc\u89e3\u91ca\u662f\u9700\u8981 friend\u3002\u6211\u89c9\u5f97\u6ca1\u6709\u9053\u7406\uff0c\u672c\u5e94\u8be5\u5c31\u662f T\u3002\u8bb0\u5f55\u6b64\u602a\u9898\u3002</p>"},{"location":"ZJU_CS/oop/final-review/#week12","title":"Week12","text":"<p>Q1. Given:</p> <pre><code>void f(int i) { cout &lt;&lt; \"Func1\" &lt;&lt; endl; }\ntemplate&lt;class T&gt;\nvoid f(T t) { cout &lt;&lt; \"Func2\" &lt;&lt; endl; }\nmain() {\n    f(2);\n}\n</code></pre> <p>The result is :</p> <p>A. Func1</p> <p>B. Func2</p> <p>C. nothing</p> <p>D. undetermined</p> Answer <p>A\u3002\u5728\u6709\u591a\u4e2a\u51fd\u6570\u548c\u51fd\u6570\u6a21\u677f\u540d\u5b57\u76f8\u540c\u7684\u60c5\u51b5\u4e0b\uff0c\u7f16\u8bd1\u5668\u5982\u4e0b\u5904\u7406\u4e00\u6761\u51fd\u6570\u8c03\u7528\u8bed\u53e5\uff1a</p> <ol> <li>\u5148\u627e\u53c2\u6570\u5b8c\u5168\u5339\u914d\u7684\u666e\u901a\u51fd\u6570\uff08\u975e\u7531\u6a21\u677f\u5b9e\u4f8b\u5316\u800c\u5f97\u7684\u51fd\u6570\uff09</li> <li>\u518d\u627e\u53c2\u6570\u5b8c\u5168\u5339\u914d\u7684\u6a21\u677f\u51fd\u6570</li> <li>\u518d\u627e\u7ecf\u8fc7\u81ea\u52a8\u7c7b\u578b\u8f6c\u6362\u540e\u80fd\u591f\u5339\u914d\u7684\u666e\u901a\u51fd\u6570</li> <li>\u90fd\u627e\u4e0d\u5230\uff0c\u5219\u62a5\u9519</li> </ol> <p>\u5339\u914d\u6a21\u677f\u51fd\u6570\u65f6\uff0c\u4e0d\u4f1a\u8fdb\u884c\u81ea\u52a8\u7c7b\u578b\u8f6c\u6362\u3002</p> <p>\u6b64\u5904\u5df2\u5b58\u5728\u53c2\u6570\u5b8c\u5168\u5339\u914d\u7684\u666e\u901a\u51fd\u6570\uff0c\u5219\u4e0d\u4f1a\u518d\u627e\u6a21\u677f\u51fd\u6570\uff0c\u6240\u4ee5\u8f93\u51faFunc1\u3002</p> <p>Q2. \u4e0b\u5217\u7684\u6a21\u677f\u8bf4\u660e\u4e2d\uff0c\u6b63\u786e\u7684\u662f()\u3002</p> <p>A. <code>template &lt; typename T1, T2 &gt;</code></p> <p>B. <code>template &lt; class T1, T2 &gt;</code></p> <p>C. <code>template &lt; typename T1, typename T2 &gt;</code></p> <p>D. <code>template ( typedef T1, typedef T2 )</code></p> Answer <p>C\u3002\u7528 typename \u548c class \u90fd\u53ef\u4ee5\uff0c\u4f46\u662f\u4e0d\u80fd\u7f3a\u6216\u8005\u5176\u4ed6\u7684\u3002</p> <p>Q3. \u5173\u4e8e\u7c7b\u6a21\u677f\uff0c\u63cf\u8ff0\u9519\u8bef\u7684\u662f()\u3002</p> <p>A. \u4e00\u4e2a\u666e\u901a\u57fa\u7c7b\u4e0d\u80fd\u6d3e\u751f\u7c7b\u6a21\u677f</p> <p>B. \u7c7b\u6a21\u677f\u53ef\u4ee5\u4ece\u666e\u901a\u7c7b\u6d3e\u751f\uff0c\u4e5f\u53ef\u4ee5\u4ece\u7c7b\u6a21\u677f\u6d3e\u751f</p> <p>C. \u6839\u636e\u5efa\u7acb\u5bf9\u8c61\u65f6\u7684\u5b9e\u9645\u6570\u636e\u7c7b\u578b\uff0c\u7f16\u8bd1\u5668\u628a\u7c7b\u6a21\u677f\u5b9e\u4f8b\u5316\u4e3a\u6a21\u677f\u7c7b</p> <p>D. \u51fd\u6570\u7684\u7c7b\u6a21\u677f\u53c2\u6570\u9700\u751f\u6210\u6a21\u677f\u7c7b\u5e76\u901a\u8fc7\u6784\u9020\u51fd\u6570\u5b9e\u4f8b\u5316</p> Answer <p>A\u3002B \u53cd\u9a73\u4e86 A\u3002</p> <p>\u50cfminisql\u7684B+\u6811\u4e2d\uff0cB+\u6811\u57fa\u672c\u6570\u636e\u9875\u7c7b\u5c31\u662f\u666e\u901a\u57fa\u7c7b\uff0c\u800c\u5176\u6d3e\u751f\u7c7b\u4e2d\u95f4\u7ed3\u70b9\u9875\u7c7b\u3001\u53f6\u7ed3\u70b9\u9875\u7c7b\u90fd\u662f\u7c7b\u6a21\u677f\u3002</p> <p>\u5728\u8fd9\u91cc\u7684\u63cf\u8ff0\u4e2d\uff0c\u7c7b\u6a21\u677f\u6307\u7684\u662f\u539f\u59cb\u7684\u5e26\u4e07\u80fd\u7c7b\u578b\u7684\u6a21\u677f\uff0c\u6a21\u677f\u7c7b\u662f\u5411\u7c7b\u6a21\u677f\u8f93\u5165\u6a21\u677f\u53c2\u6570\u540e\u5b9e\u4f8b\u5316\u5f97\u5230\u7684\u7c7b\u3002</p> <p>Q4. \u4e0b\u5217\u6709\u5173\u6a21\u677f\u7684\u63cf\u8ff0\uff0c\u9519\u8bef\u7684\u662f____\u3002</p> <p>A. \u6a21\u677f\u628a\u6570\u636e\u7c7b\u578b\u4f5c\u4e3a\u4e00\u4e2a\u8bbe\u8ba1\u53c2\u6570\uff0c\u79f0\u4e3a\u53c2\u6570\u5316\u7a0b\u5e8f\u8bbe\u8ba1</p> <p>B. \u4f7f\u7528\u65f6\uff0c\u6a21\u677f\u53c2\u6570\u4e0e\u51fd\u6570\u53c2\u6570\u76f8\u540c\uff0c\u662f\u6309\u4f4d\u7f6e\u800c\u4e0d\u662f\u540d\u79f0\u5bf9\u5e94\u7684</p> <p>C. \u6a21\u677f\u53c2\u6570\u8868\u4e2d\u53ef\u4ee5\u6709\u7c7b\u578b\u53c2\u6570\u548c\u975e\u7c7b\u578b\u53c2\u6570</p> <p>D. \u7c7b\u6a21\u677f\u4e0e\u6a21\u677f\u7c7b\u662f\u540c\u4e00\u4e2a\u6982\u5ff5</p> Answer <p>D\u3002\u7c7b\u6a21\u677f - \u6a21\u677f\u7c7b - \u5bf9\u8c61\u3002</p> <p>\u6a21\u677f\u53c2\u6570\u8868\u4e2d\u7684\u7c7b\u578b\u53c2\u6570\u5c31\u662fclass\u6216\u8005typename\u6240\u6307\u660e\u7684\u4e07\u80fd\u7c7b\u578b\uff0c\u800c\u975e\u7c7b\u578b\u53c2\u6570\u662f\u76f4\u63a5\u5728\u6a21\u677f\u53c2\u6570\u8868\u4e2d\u89c4\u5b9a\u4e86\u7c7b\u578b\u7684\u6a21\u677f\u53c2\u6570\u3002</p> <p>\u6bd4\u5982\u6a21\u677f\u53c2\u6570\u8868\u53ef\u4ee5\u662f\u3002 <p>Q5. \u6a21\u677f\u51fd\u6570\u7684\u771f\u6b63\u4ee3\u7801\u662f\u5728\u54ea\u4e2a\u65f6\u671f\u4ea7\u751f\u7684____\u3002</p> <p>A. \u6e90\u7a0b\u5e8f\u4e2d\u58f0\u660e\u51fd\u6570\u65f6</p> <p>B. \u6e90\u7a0b\u5e8f\u4e2d\u5b9a\u4e49\u51fd\u6570\u65f6</p> <p>C. \u6e90\u7a0b\u5e8f\u4e2d\u8c03\u7528\u51fd\u6570\u65f6</p> <p>D. \u8fd0\u884c\u6267\u884c\u51fd\u6570\u65f6</p> Answer <p>C\u3002\u6e90\u7a0b\u5e8f\u8c03\u7528\u51fd\u6570\u6a21\u677f\uff0c\u624d\u4f1a\u751f\u6210\u5bf9\u5e94\u53c2\u6570\u7c7b\u578b\u7684\u6a21\u677f\u51fd\u6570\u7684\u4ee3\u7801\u3002</p> <p>Q6. \u7c7b\u6a21\u677f\u7684\u4f7f\u7528\u5b9e\u9645\u4e0a\u662f\u5c06\u7c7b\u6a21\u677f\u5b9e\u4f8b\u5316\u6210\u4e00\u4e2a____\u3002</p> <p>A. \u51fd\u6570</p> <p>B. \u5bf9\u8c61</p> <p>C. \u7c7b</p> <p>D. \u62bd\u8c61\u7c7b</p> Answer <p>C\u3002\u6a21\u677f\u7c7b\u672c\u8d28\u5c31\u662f\u4e00\u4e2a\u7c7b\uff0c\u6a21\u677f\u7c7b\u7ee7\u7eed\u5b9e\u4f8b\u5316\u53ef\u4ee5\u5f97\u5230\u5bf9\u8c61\u3002</p> <p>\u62bd\u8c61\u7c7b\u5219\u662f\u6839\u636e\u6709\u65e0\u7eaf\u865a\u51fd\u6570\u5212\u5206\u7684\u3002</p> <p>Q7. \u4e0b\u5217\u9009\u9879\u4e2d\uff0c\u54ea\u4e00\u9879\u662f\u7c7b\u6a21\u677f\u5b9e\u4f8b\u5316\u7684\u65f6\u671f___\u3002</p> <p>A. \u5728\u7f16\u8bd1\u65f6\u671f\u8fdb\u884c</p> <p>B. \u5c5e\u4e8e\u52a8\u6001\u8054\u7f16</p> <p>C. \u5728\u8fd0\u884c\u65f6\u8fdb\u884c</p> <p>D. \u5728\u8fde\u63a5\u65f6\u8fdb\u884c</p> Answer <p>A\u3002\u7c7b\u6a21\u677f\u5b9e\u4f8b\u5316\u4e3a\u6a21\u677f\u7c7b\u662f\u8981\u4ea7\u751f\u76f8\u5e94\u7684\u4ee3\u7801\u7684\uff0c\u53ea\u80fd\u5728\u7f16\u8bd1\u9636\u6bb5\u8fdb\u884c\u3002</p> <p>\u52a8\u6001\u8054\u7f16\u5c31\u662f\u52a8\u6001\u7ed1\u5b9a\uff0c\u4e0e\u591a\u6001\u6709\u5173\uff0c\u4e0e\u7c7b\u6a21\u677f\u5b9e\u4f8b\u5316\u65e0\u5173\u3002</p> <p>Q8. \u4e0b\u5217\u5173\u4e8e <code>pair&lt;&gt;</code> \u7c7b\u6a21\u677f\u7684\u63cf\u8ff0\u4e2d\uff0c\u9519\u8bef\u7684\u662f\u3002</p> <p>A. <code>pair&lt;&gt;</code> \u7c7b\u6a21\u677f\u5b9a\u4e49\u5934\u6587\u4ef6 <code>utility</code> \u4e2d</p> <p>B. <code>pair&lt;&gt;</code> \u7c7b\u6a21\u677f\u4f5c\u7528\u662f\u5c06\u4e24\u4e2a\u6570\u636e\u7ec4\u6210\u4e00\u4e2a\u6570\u636e\uff0c\u4e24\u4e2a\u6570\u636e\u53ef\u4ee5\u662f\u540c\u4e00\u4e2a\u7c7b\u578b\u4e5f\u53ef\u4ee5\u662f\u4e0d\u540c\u7684\u7c7b\u578b</p> <p>C. \u521b\u5efa <code>pair&lt;&gt;</code> \u5bf9\u8c61\u53ea\u80fd\u8c03\u7528\u5176\u6784\u9020\u51fd\u6570</p> <p>D. <code>pair&lt;&gt;</code> \u7c7b\u6a21\u62df\u63d0\u4f9b\u4e86\u4e24\u4e2a\u6210\u5458\u51fd\u6570 <code>first</code> \u4e0e <code>second</code> \u6765\u8bbf\u95ee\u8fd9\u7684\u4e24\u4e2a\u6570\u636e</p> Answer <p>C\u3002\u521b\u5efa <code>pair&lt;&gt;</code> \u5bf9\u8c61\u8fd8\u53ef\u4ee5\u4f7f\u7528 <code>make_pair</code> \u65b9\u6cd5\u3002</p>"},{"location":"ZJU_CS/oop/final-review/#week13","title":"Week13","text":"<p>Q1. If you are not interested in the contents of an exception object, the catch block parameter may be omitted. (T/F)</p> Answer <p>T\u3002\u8fd9\u91cc\u7684\u610f\u601d\u5e94\u8be5\u662f catch(int) \u8fd9\u79cd\u3002</p> <p>\u56e0\u4e3a catch() \u662f\u4e0d\u5141\u8bb8\u7684\uff0ccatch(...) \u53c8\u4e0d\u592a\u7b26\u5408\u8fd9\u91cc\u7684\u610f\u601d\u3002</p> <p>catch(int) \u80fd\u591f\u68c0\u6d4b\u5230\u629b\u51fa\u7684int\uff0c\u4f46\u662f\u53c8\u53ef\u4ee5\u8bf4\u6ca1\u6709\u53c2\u6570\u3002</p> <p>Q2. \u5f02\u5e38\u5904\u7406\u7684 <code>catch{ }</code> \u8bed\u53e5\u5757\u5fc5\u987b\u7d27\u8ddf <code>try{ }</code> \u8bed\u53e5\u5757\u4e4b\u540e\uff0c\u8fd9\u4e24\u4e2a\u8bed\u53e5\u4e4b\u95f4\u4e0d\u80fd\u63d2\u5165\u53e6\u5916\u8bed\u53e5\u3002(T/F)</p> Answer <p>T\u3002</p> <p>Q3. What is wrong in the following code?</p> <pre><code>  vector&lt;int&gt; v;\n  v[0] = 2.5;\n</code></pre> <p>A. The program has a compile error because there are no elements in the vector.</p> <p>B. The program has a compile error because you cannot assign a double value to <code>v[0]</code>.</p> <p>C. The program has a runtime error because there are no elements in the vector.</p> <p>D. The program has a runtime error because you cannot assign a double value to <code>v[0]</code>.</p> Answer <p>C\u3002\u7a0b\u5e8f\u51fa\u9519\u7684\u539f\u56e0\u5728\u4e8e v \u662f\u7a7a\u7684\uff0c\u4f46\u662f\u5374\u8981\u5f3a\u884c\u5bf9\u5176\u4e2d\u7b2c\u4e00\u4e2a\u5143\u7d20\u8d4b\u503c\uff0c\u5bfc\u81f4 runtime error\u3002</p> <p>2.5 \u539f\u672c\u6570\u636e\u7c7b\u578b\u4e3a double\uff0c\u4f46\u662f\u53ef\u4ee5\u81ea\u52a8\u7c7b\u578b\u8f6c\u6362\u4e3a int\uff0c\u5982\u679c\u6709\u7a7a\u95f4\u7684\u8bdd\uff0cv[0] \u5c06\u4f1a\u88ab\u8d4b\u503c\u4e3a 2\uff0cB\u3001D \u9519\u8bef\u3002</p> <p>\u7f16\u8bd1\u9636\u6bb5\u65e0\u6cd5\u53d1\u73b0\u201c\u7ed9 vetcor \u4e2d\u4e0d\u5b58\u5728\u7684\u5143\u7d20\u8d4b\u503c\u201d\u7684\u8fd9\u79cd\u9519\u8bef\uff0c\u56e0\u6b64\u4e0d\u662f compile error\uff0cA \u9519\u8bef\u3002</p> <p>Q4. The function <code>what()</code> is defined in __.</p> <p>A. <code>exception</code></p> <p>B. <code>runtime_error</code></p> <p>C. <code>overflow_error</code></p> <p>D. <code>bad_exception</code></p> Answer <p>A\u3002what() \u7528\u6765\u67e5 error \u4fe1\u606f\u7684\uff0c\u5f53\u7136\u662f\u5728 exception \u4e2d\u4e86\u3002</p> <p>Q5. Which of the following statements are true?</p> <p>A. A custom exception class is just like a regular class.</p> <p>B. A custom exception class must always be derived from <code>class exception</code>.</p> <p>C. A custom exception class must always be derived from a derived class of <code>class exception</code>.</p> <p>D. A custom exception class must always be derived from <code>class runtime_error</code>.</p> Answer <p>A\u3002\u53ef\u4ee5\u5c06\u4efb\u4f55\u4e1c\u897f\u629b\u51fa\u4e3a\u5f02\u5e38\uff0c\u90a3\u4e48\u81ea\u5b9a\u4e49\u5f02\u5e38\u7c7b\u5f53\u7136\u5c31\u50cf\u4e00\u4e2a\u666e\u901a\u7c7b\u4e86\u3002</p> <p>Q6. Suppose <code>Exception2</code> is derived from <code>Exception1</code>. Analyze the following code.</p> <pre><code>try {\n\nstatement1;\n\nstatement2;\n\nstatement3;\n}\n\ncatch (Exception1 ex1)\n{\n}\n\ncatch (Exception2 ex2)\n{\n}\n</code></pre> <p>A. If an exception of the <code>Exeception2</code> type occurs, this exception is caught by the first catch block.</p> <p>B. If an exception of the <code>Exeception2</code> type occurs, this exception is caught by the second catch block.</p> <p>C. The program has a compile error because these two catch blocks are in wrong order.</p> <p>D. The program has a runtime error because these two catch blocks are in wrong order.</p> Answer <p>A\u3002\u7cdf\u7cd5\u7684\u4ee3\u7801\u3002</p> <p>catch \u7684\u987a\u5e8f\u4e2d\uff0c\u7531\u4e8e is-A \u5173\u7cfb\uff0c\u57fa\u7c7b\u5728\u524d\u5c31\u4f1a\u5bfc\u81f4\u76f4\u63a5\u88ab\u57fa\u7c7b\u7ed9 catch \u4e86\u3002</p> <p>\u4e0d\u8fc7\u7f16\u8bd1\u8fd8\u662f\u4f1a\u901a\u8fc7\u7684\uff0c\u4e0d\u8fc7\u5e94\u8be5\u4f1a\u7ed9warning\u3002</p> <p>Q7. Suppose that statement2 throws an exception of type Exception2 in the following statement:</p> <pre><code>try {\n\nstatement1;\n\nstatement2;\n\nstatement3;\n}\n\ncatch (Exception1 ex1)\n{\n}\n\ncatch (Exception2 ex2)\n{\n}\n\ncatch (Exception3 ex3)\n{\nstatement4;\nthrow;\n}\n\nstatement5;\n</code></pre> <p>A. statement2</p> <p>B. statement3</p> <p>C. statement4</p> <p>D. statement5</p> Answer <p>D\u3002\u731c\u60f3\u95ee\u9898\u662f\uff1a\uff08\u539f\u9898\u6ca1\u7ed9\u95ee\u9898\uff09statement2 \u6267\u884c\u5b8c\u540e\uff0c\u4e0b\u4e00\u6761\u88ab\u6267\u884c\u7684\u8bed\u53e5\u662f\u4ec0\u4e48\uff1f</p> <p>Exception2 \u5728 statement2 \u88ab\u629b\u51fa\uff0c\u8bed\u53e5\u5757\u540e\u9762\u7684 statement3 \u88ab\u629b\u5f03\u4e0d\u518d\u6267\u884c\uff0c\u800c Exception2 \u5f88\u5feb\u88ab catch\uff0c\u4f46\u662f\u4ec0\u4e48\u90fd\u6ca1\u6709\u505a\u3002</p> <p>\u51fa\u4e86 try-catch\uff0c\u6267\u884c statement5\uff0c\u4e5f\u5c31\u662f statement2 \u4e0b\u4e00\u6761\u8bed\u53e5\u3002</p> <p>Q8. Suppose that statement2 throws an exception of type Exception2 in the following statement:</p> <pre><code>try {\n\nstatement1;\n\nstatement2;\n\nstatement3;\n}\n\ncatch (Exception1 ex1)\n{\n}\n\ncatch (Exception2 ex2)\n{\n}\n\ncatch (Exception3 ex3)\n{\nstatement4;\nthrow;\n}\n\nstatement5;\n</code></pre> <p>A. statement2</p> <p>B. statement3</p> <p>C. statement4</p> <p>D. statement5</p> Answer <p>C\u3002\u4e0e\u4e0a\u4e00\u9898\u6709\u6240\u4e0d\u540c\u7684\u662f\uff0cException3 \u7684 catch \u5757\u4e2d\u662f\u6709\u8bed\u53e5\u7684\uff0c\u56e0\u6b64\u4f1a\u7ee7\u7eed\u6267\u884c statement4\u3002</p> <p>\u8fd9\u91cc\u6709\u8da3\u7684\u662f throw;</p> <p>\u5373\u91cd\u629b\u5f02\u5e38\uff0c\u4e00\u822c\u8868\u793a\u8fd9\u91cc\u65e0\u6cd5\u5904\u7406\u8be5\u5f02\u5e38\uff0c\u9700\u8981\u5c06\u5176\u629b\u81f3\u66f4\u4e0a\u5c42\u8fdb\u884c\u5904\u7406\u3002</p> <p>Q9. \u4e0b\u5217\u5173\u4e8e\u5f02\u5e38\u7684\u63cf\u8ff0\u4e2d\uff0c\u9519\u8bef\u7684\u662f\uff08\uff09\u3002</p> <p>A. \u7f16\u8bd1\u9519\u5c5e\u4e8e\u5f02\u5e38\uff0c\u53ef\u4ee5\u629b\u51fa</p> <p>B. \u8fd0\u884c\u9519\u5c5e\u4e8e\u5f02\u5e38</p> <p>C. \u786c\u4ef6\u6545\u969c\u4e5f\u53ef\u5f53\u5f02\u5e38\u629b\u51fa</p> <p>D. \u53ea\u8981\u662f\u7f16\u7a0b\u8005\u8ba4\u4e3a\u662f\u5f02\u5e38\u7684\u90fd\u53ef\u5f53\u5f02\u5e38\u629b\u51fa</p> Answer <p>A\u3002\u7f16\u8bd1\u9636\u6bb5\u662f\u65e0\u6cd5\u629b\u51fa\u5f02\u5e38\u7684\uff0c\u6240\u4ee5\u7f16\u8bd1\u9519\u8bef\u4e0d\u53ef\u4ee5\u5f53\u4f5c\u5f02\u5e38\u629b\u51fa\u3002</p> <p>Q10. \u4e0b\u5217\u5173\u4e8e\u91cd\u629b\u5f02\u5e38\u7684\u63cf\u8ff0\u4e2d\uff0c\u9519\u8bef\u7684\u662f\u3002()</p> <p>A. \u5904\u7406\u4e0d\u4e86\u7684\u5f02\u5e38\uff0c\u53ef\u4ee5\u901a\u8fc7\u5728 <code>catch</code> \u7ed3\u6784\u4e2d\u8c03\u7528 <code>throw</code> \u91cd\u65b0\u629b\u51fa\u5f02\u5e38\uff0c\u5c06\u5f53\u524d\u5f02\u5e38\u4f20\u9012\u5230\u5916\u90e8\u7684 <code>try-catch</code> \u7ed3\u6784\u4e2d</p> <p>B. \u91cd\u629b\u5f02\u5e38\u65f6\u53ea\u80fd\u4ece <code>catch</code> \u8bed\u53e5\u5757\u6216\u4ece <code>catch</code> \u5757\u4e2d\u7684\u8c03\u7528\u51fd\u6570\u4e2d\u5b8c\u6210</p> <p>C. \u91cd\u629b\u7684\u5f02\u5e38\u53ef\u4ee5\u88ab\u540c\u4e00\u4e2a <code>catch</code> \u8bed\u53e5\u6355\u6349</p> <p>D. \u53ef\u4ee5\u5355\u72ec\u4f7f\u7528 <code>throw</code> \u5173\u952e\u5b57\u5b8c\u6210\u5f02\u5e38\u91cd\u629b</p> Answer <p>C\u3002\u629b\u5230\u66f4\u5916\u5c42\u4e86\uff0c\u53ea\u80fd\u88ab\u66f4\u5916\u5c42\u7684 catch \u6355\u6349\u3002</p> <p>Q11. \u4e0b\u5217\u5173\u4e8e\u65ad\u8a00\u7684\u63cf\u8ff0\u4e2d\uff0c\u9519\u8bef\u7684\u662f\u3002()</p> <p>A. \u65ad\u8a00\u662f\u8c03\u8bd5\u7a0b\u5e8f\u7684\u4e00\u79cd\u624b\u6bb5</p> <p>B. \u82e5\u65ad\u8a00\u60c5\u51b5\u53d1\u751f\uff0c\u4e00\u822c\u4f1a\u7ec8\u6b62\u7a0b\u5e8f</p> <p>C. \u5728 C++ \u4e2d\uff0c\u5b8f <code>assert()</code> \u7528\u6765\u5728\u8c03\u8bd5\u9636\u6bb5\u5b9e\u73b0\u65ad\u8a00</p> <p>D. \u65ad\u8a00\u5728\u7a0b\u5e8f\u8c03\u8bd5\u4e0e\u53d1\u5e03\u7248\u672c\u4e2d\u90fd\u53ef\u4ee5\u4f7f\u7528\u65ad\u8a00</p> Answer <p>D\u3002\u4ec5\u5728\u8c03\u8bd5 (debug) \u7248\u672c\u4e2d\u5b58\u5728\u65ad\u8a00\uff0c\u53d1\u5e03 (release) \u7248\u672c\u4e2d\u7684\u65ad\u8a00\u4f1a\u88ab\u53bb\u6389\u3002</p> <p>Q12. C++\u5904\u7406\u5f02\u5e38\u7684\u673a\u5236\u662f\u7531\uff08\uff093\u90e8\u5206\u7ec4\u6210\u3002</p> <p>A. \u7f16\u8f91\u3001\u7f16\u8bd1\u548c\u8fd0\u884c</p> <p>B. \u68c0\u67e5\u3001\u629b\u51fa\u548c\u6355\u83b7</p> <p>C. \u7f16\u8f91\u3001\u7f16\u8bd1\u548c\u6355\u83b7</p> <p>D. \u68c0\u67e5\u3001\u629b\u51fa\u548c\u8fd0\u884c</p> Answer <p>B\u3002</p>"},{"location":"ZJU_CS/oop/mid-review/","title":"OOP Midterm Review","text":"<p>PTA homework of ZJU Object Oriented Programming, 2022 Spring &amp; Summer.</p>"},{"location":"ZJU_CS/oop/mid-review/#week1","title":"Week1","text":"<p>Q1. \uff08 \uff09\u4e0d\u662f\u9762\u5411\u5bf9\u8c61\u7a0b\u5e8f\u8bbe\u8ba1\u7684\u4e3b\u8981\u7279\u5f81\u3002</p> <p>A. \u5c01\u88c5</p> <p>B. \u7ee7\u627f</p> <p>C. \u591a\u6001</p> <p>D. \u7ed3\u6784</p> Answer <p>D\u3002OOP \u7684\u4e3b\u8981\u7279\u5f81\u4e3a\u5c01\u88c5 (encapsulation)\u3001\u7ee7\u627f (inheritance)\u3001\u591a\u6001 (polymorphism)</p> <p>\u7b2c 1 \u8bfe\u91cd\u8981\u6982\u5ff5</p> <p>\u56de\u987e\u7b2c 1 \u8bfe\u8bb2\u8ff0\u7684\u51e0\u4e2a\u91cd\u8981\u6982\u5ff5\uff1a</p> <ul> <li>\u805a\u5408 (cohesion)\uff0c\u4e0e\u7ec4\u5408 (coupling)\u7c7b\u4f3c\uff0c\u90fd\u76f8\u5f53\u4e8e Has-A \u5173\u7cfb\u3002\u4e24\u8005\u7684\u5dee\u5f02\u5728\u4e8e\uff0c\u8bbe\u7c7b B has \u7c7b A \u7684\u67d0\u4e2a\u5bf9\u8c61\uff0c\u90a3\u4e48\u5982\u679c\u662f\u7ec4\u5408\u5173\u7cfb\uff0cB \u6d88\u4ea1\u65f6 A \u4e5f\u4f1a\u6d88\u4ea1\uff1b\u5982\u679c\u662f\u805a\u5408\u5173\u7cfb\uff0cB \u6d88\u4ea1\u65f6 A \u4f9d\u7136\u5b58\u5728\u3002\u4e00\u822c\u5730\uff0c\u7ec4\u5408\u662f\u76f4\u63a5\u4ee5\u53e6\u4e00\u4e2a\u7c7b\u7684\u5bf9\u8c61\u4e3a\u6210\u5458\uff0c\u805a\u5408\u662f\u4ee5\u53e6\u4e00\u4e2a\u7c7b\u7684\u5bf9\u8c61\u7684\u6307\u9488\u4e3a\u6210\u5458\u3002</li> <li>\u7ee7\u627f (inheritance) \u5219\u662f\u7ecf\u5178\u7684 Is-A \u5173\u7cfb\u3002</li> <li>\u8fed\u4ee3\u5668 (iterator)\uff1a\u987e\u540d\u601d\u4e49\uff0c\u7528\u6765\u8fed\u4ee3</li> <li>\u91cd\u8f7d (override)\uff1a\u51fd\u6570\u91cd\u8f7d\uff0c\u5373\u540c\u540d\u51fd\u6570\uff0c\u7528\u4e0d\u540c\u53c2\u6570\u533a\u5206\uff0c\u53ef\u4ee5\u6709\u4e0d\u540c\u7c7b\u578b\u7684\u8fd4\u56de\u503c\uff0c\u4f46\u662f\u53c2\u6570\u76f8\u540c\u65f6\u4e0d\u80fd\u4ec5\u9760\u8fd4\u56de\u503c\u533a\u5206\u3002\u53e6\u5916\u8fd8\u6709\u8fd0\u7b97\u7b26\u91cd\u8f7d\uff0c\u76f8\u5f53\u4e8e\u5b9a\u4e49\u7c7b\u7684\u8fd0\u7b97\uff0c\u65b9\u4fbf\u4e00\u4e9b\u5427\u3002</li> <li>\u6a21\u677f (template)\uff1a\u628a\u4e0d\u540c\u7684\u7c7b\u578b\u90fd\u80fd\u88c5\u8fdb\u53bb\u3002</li> <li>interface\uff0c\u5373\u63a5\u53e3\u6216\u7aef\u53e3\uff1a\u6211\u8ba4\u4e3a\u6307\u7684\u5c31\u662f <code>virtual</code> \uff0c\u5728\u9876\u5c42\u57fa\u7c7b\u5b9a\u4e49\u865a\u7aef\u53e3\uff0c\u5728\u6d3e\u751f\u7684\u5b50\u7c7b\u4e2d\u91cd\u5b9a\u4e49\u5b9e\u73b0\u591a\u6001 (polymorphism)\u3002</li> </ul> <p>Q2. <code>*ptr = new B(5); delete ptr;</code></p> <p>\u5047\u8bbe\u4e0a\u8ff0\u8bed\u53e5\u4e2d\uff0c<code>new</code> \u7533\u8bf7\u7684\u5185\u5b58\u7a7a\u95f4\u9996\u5730\u5740\u4e3a <code>Addr</code>, \u5b58\u653e<code>ptr</code> \u6307\u9488\u53d8\u91cf\u503c\u7684\u5185\u5b58\u7a7a\u95f4\u9996\u5730\u5740\u4e3a <code>PAddr</code>\uff0c\u5219\u6267\u884c <code>delete ptr</code> \u8bed\u53e5\u540e\uff0c<code>Addr</code>\u3001<code>PAddr</code> \u6307\u5411\u7684\u5185\u5b58\u533a\u57df\u5747\u4f1a\u88ab\u7cfb\u7edf\u6536\u56de\u3002(T/F)</p> Answer <p>F\u3002\u53ea\u4f1a\u6536\u56de PAddr \u7684\u7a7a\u95f4\u3002</p> <p>delete \u5e76\u4e0d\u4f1a\u9012\u5f52\u91ca\u653e\u7a7a\u95f4\uff0c\u5b83\u7684\u4f5c\u7528\u662f\u975e\u5e38\u76f4\u63a5\u7684\u3002</p> <p>Q3. \u7528 <code>new</code> \u5173\u952e\u5b57\u52a8\u6001\u7533\u8bf7\u4e00\u4e2a\u4e09\u7ef4\u6570\u7ec4\uff0c\u5219\u4e0b\u5217\u8bed\u53e5\u6b63\u786e\u7684\u662f\uff08\uff09</p> <p>A. <code>float *fp; fp = new float[10][25][10];</code></p> <p>B. <code>float (* fp)[25][10]; fp = new float[10][25][10];</code></p> <p>C. <code>float (* fp)[10]; fp = new float[10][25][10];</code></p> <p>D. <code>float *fp [25][10]; fp = new float[10][25][10];</code></p> Answer <p>B\u3002\u4e8b\u5b9e\u4e0a\u6d89\u53ca\u4e86C\u7684\u77e5\u8bc6\u3002</p> <p>A \u5b9a\u4e49\u7684 p \u662f\u4e00\u4e2a float \u6307\u9488\uff0c\u53ef\u4ee5\u770b\u4f5c\u4e00\u7ef4\u6570\u7ec4\u7684\u9690\u5f0f\u8f6c\u5316\u3002</p> <p>B \u5b9a\u4e49\u7684 fp \u6070\u662f\u4e09\u7ef4\u6570\u7ec4\u5bf9\u5e94\u7684\u7c7b\u578b\uff0c</p> <p>\u5bf9\u5e94 D \u5b9a\u4e49\u7684 fp \u662f\u4e8c\u7ef4\u6307\u9488\u6570\u7ec4\u7684\u7c7b\u578b\u3002</p> <p>C \u5b9a\u4e49\u7684\u662f\u4e8c\u7ef4\u6570\u7ec4\u3002</p>"},{"location":"ZJU_CS/oop/mid-review/#week2","title":"Week2","text":"<p>Q1. <code>this</code> \u6307\u9488\u662f\u5bf9\u8c61\u7684\u975e\u9759\u6001\u6210\u5458\u51fd\u6570\u7684\u9690\u542b\u53c2\u6570\uff0c\u5176\u6307\u5411\u5bf9\u8c61\u81ea\u5df1\u3002(T/F)</p> Answer <p>T\u3002\u5bf9\u8c61\u7684\u9759\u6001\u6210\u5458\u51fd\u6570\u662f\u6ca1\u6709 this \u6307\u9488\u7684\uff0c\u4e0d\u80fd\u901a\u8fc7\u5bf9\u8c61\u8c03\u7528\uff0c\u9700\u8981\u76f4\u63a5\u901a\u8fc7\u7c7b\u8c03\u7528\u3002</p> <p>Q2. Resolver <code>::</code> is used to:</p> <p>A. Define a member function outside class declaration</p> <p>B. Access a member of a namespace</p> <p>C. Access a static member of a class</p> <p>D. All of the others</p> Answer <p>D\u3002ABC \u90fd\u662f Resolver \u7684\u7528\u9014\uff1a</p> <ol> <li>\u5728\u7c7b\u58f0\u660e\u5916\u90e8\u5b9a\u4e49\u6210\u5458\u51fd\u6570</li> <li>\u83b7\u53d6 namespace \u7684\u6210\u5458</li> <li>\u83b7\u53d6\u7c7b\u7684\u9759\u6001\u6210\u5458\uff08\u53d8\u91cf\u6216\u51fd\u6570\uff09</li> </ol> <p>\u603b\u5730\u6765\u8bf4\u5c31\u662f\u8868\u660e\u4ece\u5c5e\u5173\u7cfb\u5427\u3002</p> <p>Q3. \u5728\u9762\u5411\u5bf9\u8c61\u7684\u7a0b\u5e8f\u8bbe\u8ba1\u4e2d\uff0c\u9996\u5148\u9700\u8981\u5728\u95ee\u9898\u57df\u4e2d\u8bc6\u522b\u51fa\u82e5\u5e72\u4e2a\uff08 \uff09</p> <p>A. \u51fd\u6570</p> <p>B. \u7c7b</p> <p>C. \u6587\u4ef6</p> <p>D. \u8fc7\u7a0b</p> Answer <p>B\u3002OOP \u601d\u60f3\u3002</p>"},{"location":"ZJU_CS/oop/mid-review/#week3","title":"Week3","text":"<p>Q1. \u7ed9\u5b9a\u4ee5\u4e0b\u7c7b\u58f0\u660e\uff0c\u54ea\u4e2a\u6210\u5458\u51fd\u6570\u53ef\u80fd\u6539\u53d8\u6210\u5458\u53d8\u91cf <code>data</code>?</p> <pre><code>class A {\npublic:\n    void f1 (int d);\n    void f2 (const int &amp;d);\n    void f3 (int d) const;\nprivate:\n    int data;\n};\n</code></pre> <p>A. <code>f1</code></p> <p>B. <code>f2</code></p> <p>C. <code>f3</code></p> <p>D. <code>f1</code> \u548c <code>f2</code></p> Answer <p>D\u3002</p> <p>f3 \u662f const \u6210\u5458\u51fd\u6570\uff0c\u4e0d\u80fd\u4fee\u6539\u7c7b\u5185\u7684\u6210\u5458\u3002</p> <p>f2 \u53c2\u6570\u91cc\u7684 const \u8868\u793a\u7684\u662f\u53c2\u6570d\u662f\u5e38\u5f15\u7528\uff0c\u4e0d\u80fd\u901a\u8fc7d\u4fee\u6539\u5916\u9762\u5bf9\u5e94\u7ed1\u5b9a\u7684\u53d8\u91cf\u503c\uff0c\u4f46\u662f\u8fd9\u5e76\u4e0d\u5f71\u54cdf2\u4fee\u6539\u7c7b\u5185\u6210\u5458data\u7684\u6743\u9650\u3002</p>"},{"location":"ZJU_CS/oop/mid-review/#week4","title":"Week4","text":"<p>Q1. \u8bbe\u6709\u5982\u4e0b\u4ee3\u7801\u6bb5:</p> <pre><code>std::map&lt;char *, int&gt; m;\nconst int MAX_SIZE = 100;\nint main() {\n    char str[MAX_SIZE];\n    for (int i = 0; i &lt; 10; i++) {\n        std::cin &gt;&gt; str;\n        m[str] = i;\n    }\n    std::cout &lt;&lt; m.size() &lt;&lt; std::endl;\n}\n</code></pre> <p>\u8bfb\u516510\u4e2a\u5b57\u7b26\u4e32\uff0c\u5219\u8f93\u51fa\u7684 m.size() \u4e3a</p> <p>A. 0</p> <p>B. 1</p> <p>C. 10</p> Answer <p>B\u3002</p> <p>\u6ce8\u610f\u5230\uff0c\u5c3d\u7ba1\u8bfb\u4e86 10 \u4e2a\u5b57\u7b26\u4e32\uff0c\u4f46\u90fd\u53ea\u662f\u8bfb\u8fdb\u56fa\u5b9a\u7684 str\u3002</p> <p>\u5b9e\u9645\u4e0a\u524d\u4e00\u6b21\u8bfb\u5165\u7684\u4fe1\u606f\u90fd\u88ab\u540e\u4e00\u6b21\u8bfb\u5165\u7ed9\u8986\u76d6\u4e86\u3002\u6bcf\u6b21\u7684 <code>m[str]=i</code>\uff0cstr \u90fd\u662f\u76f8\u540c\u7684 <code>char*</code>\uff0c\u76f8\u5f53\u4e8e\u53ea\u662f\u4fee\u6539\u8fd9\u4e2a\u6620\u5c04\u9879\u7684\u503c\uff0c\u800c\u6ca1\u6709\u589e\u52a0\u65b0\u7684\u6620\u5c04\u9879\u3002</p> <p>\u6240\u4ee5 map \u5f53\u4e2d\u59cb\u7ec8\u53ea\u6709 1 \u4e2a\u9879\uff0c\u8fd9\u4e2a\u9879\u7684 <code>char*</code> \u4ee3\u8868\u7684\u5b57\u7b26\u4e32\u662f\u6700\u540e\u4e00\u6b21\u8f93\u5165\u7684\u5b57\u7b26\u4e32\uff0c\u6620\u5c04\u5230\u7684 value \u4e3a 9\u3002</p> <p>Q2. \u4e0b\u5217\u5173\u4e8eSTL\u7684\u63cf\u8ff0\u4e2d\uff0c\u9519\u8bef\u7684\u662f\u3002</p> <p>A. STL\u7684\u5185\u5bb9\u4ece\u5e7f\u4e49\u4e0a\u8bb2\u5206\u4e3a\u5bb9\u5668\u3001\u8fed\u4ee3\u5668\u3001\u7b97\u6cd5\u4e09\u4e2a\u4e3b\u8981\u90e8\u5206</p> <p>B. STL\u7684\u4e00\u4e2a\u57fa\u672c\u7406\u5ff5\u5c31\u662f\u5c06\u6570\u636e\u548c\u64cd\u4f5c\u5206\u79bb</p> <p>C. STL\u4e2d\u7684\u6240\u6709\u7ec4\u4ef6\u90fd\u7531\u6a21\u677f\u6784\u6210\uff0c\u5176\u5143\u7d20\u53ef\u4ee5\u662f\u4efb\u610f\u7c7b\u578b</p> <p>D. STL\u7684\u5bb9\u5668\u3001\u8fed\u4ee3\u5668\u3001\u7b97\u6cd5\u662f\u4e09\u4e2a\u5b8c\u5168\u72ec\u7acb\u7684\u90e8\u5206\uff0c\u5f7c\u6b64\u4e5f\u65e0\u4efb\u4f55\u8054\u7cfb</p> Answer <p>D\u3002\u6ca1\u6709\u96be\u5ea6\u7684\u4e00\u9053\u9898\uff0c\u5355\u7eaf\u7528\u4e8e\u590d\u4e60 STL \u76f8\u5173\u7406\u8bba\u3002</p> <p>Q3. \u4e0b\u5217\u521b\u5efa <code>vector</code> \u5bb9\u5668\u5bf9\u8c61\u7684\u65b9\u6cd5\u4e2d\uff0c\u9519\u8bef\u7684\u662f\u3002</p> <p>A. <code>vector&lt;int&gt; v(10);</code></p> <p>B. <code>vector&lt;int&gt; v(10, 1);</code></p> <p>C. <code>vector&lt;int&gt; v{10, 1};</code></p> <p>D. <code>vector&lt;int&gt; v = (10, 1);</code></p> Answer <p>D\u3002</p> <p>A \u6307\u521b\u5efa\u542b\u6709 10 \u4e2a int \u5143\u7d20\u7684 vector\uff0c\u53ef\u80fd\u4f1a\u628a\u6bcf\u4e2a int \u9ed8\u8ba4\u521d\u59cb\u5316\u4e3a 0\u3002</p> <p>B \u6307\u521b\u5efa\u542b\u6709 10 \u4e2a int \u5143\u7d20\u7684 vector\uff0c\u6bcf\u4e2a int \u90fd\u521d\u59cb\u5316\u4e3a 1\u3002</p> <p>C \u5219\u7c7b\u4f3cC\u8bed\u8a00\u7684 int v[] = {10, 1} \u7684\u96c6\u5408\u521d\u59cb\u5316\u3002</p> <p>D \u662f\u4e0d\u884c\u7684\uff0c\u987a\u9053\u4e00\u63d0\uff0cv = 10 \u4e5f\u662f\u4e0d\u884c\u7684\uff0c\u4f46\u662f v = {10, 1} \u5c31\u548c C \u662f\u7b49\u4ef7\u7684\u3002</p> <p>\uff08\u636e floatshadow \u8bf4\uff0cv{10, 1} \u5728 98 \u6807\u51c6\u4e0b\u662f\u4e0d\u884c\u7684\uff0c\u6216\u8bb8\u9009\u9879 C \u5e94\u8be5\u6539\u6210 v = {10, 1} \u66f4\u597d\uff09</p> <p>Q4. \u4e0b\u5217\u9009\u9879\u4e2d\uff0c\u54ea\u4e00\u9879\u4e0d\u662f\u8fed\u4ee3\u5668\u3002</p> <p>A. \u8f93\u5165\u8fed\u4ee3\u5668</p> <p>B. \u524d\u5411\u8fed\u4ee3\u5668</p> <p>C. \u53cc\u5411\u8fed\u4ee3\u5668</p> <p>D. \u5220\u9664\u8fed\u4ee3\u5668</p> Answer <p>D\u3002\u5176\u4ed6\u4e09\u4e2a\u90fd\u662f\u6709\u7684\u3002</p> <p>\u8fed\u4ee3\u5668</p> <p>\u56de\u987e\u8fed\u4ee3\u5668 (iterator)\uff0c\u7c7b\u4f3c\u4e8e\u6307\u9488\uff0c\u6709\u975e const (\u5bb9\u5668::iterator)\u548c const (\u5bb9\u5668::const_iterator)\u4e24\u79cd\uff0cconst \u53ea\u8bfb\uff0c\u975econst\u53ef\u4ee5\u4fee\u6539\u5bf9\u5e94\u5143\u7d20\u3002\u8fed\u4ee3\u5668\u4e00\u822c\u7528 <code>begin()</code> \u548c <code>end()</code> \u6765\u8fed\u4ee3\u63a7\u5236\uff08 <code>vector</code> \u91cd\u8f7d\u4e86 <code>[]</code>\uff0c\u6240\u4ee5\u53ef\u4ee5\u50cf\u6570\u7ec4\u4e00\u6837\u8fed\u4ee3\uff09\uff0c\u90fd\u91cd\u8f7d\u4e86 <code>++</code> \u8fd0\u7b97\u3002</p> <p>\u4e00\u822c\u7684\u8fed\u4ee3\u5668\u662f\u6b63\u5411\u7684\uff0c\u6709\u7684\u5bb9\u5668\u8fd8\u4f1a\u63d0\u4f9b\u53cd\u5411\u8fed\u4ee3\u5668 reverse_iterator\uff0c\u90a3\u5c31\u9700\u8981\u7528 <code>rbegin()</code> \u548c <code>rend()</code> \u6765\u8fed\u4ee3\u63a7\u5236\u3002</p> <p>\u8fed\u4ee3\u5668\u53ef\u4ee5\u5206\u4e3a\u4ee5\u4e0b\u4e94\u79cd\uff1a</p> <ol> <li>\u8f93\u5165\u8fed\u4ee3\u5668\uff1a\u53ea\u8bfb\uff0c\u53ea\u652f\u6301\u81ea\u589e</li> <li>\u8f93\u51fa\u8fed\u4ee3\u5668\uff1a\u53ea\u5199\uff0c\u53ea\u652f\u6301\u81ea\u589e</li> <li>\u524d\u5411\u8fed\u4ee3\u5668\uff1a\u8bfb\u5199\uff0c\u53ea\u652f\u6301\u81ea\u589e</li> <li>\u53cc\u5411\u8fed\u4ee3\u5668\uff1a\u8bfb\u5199\uff0c\u53ef\u81ea\u589e\u53ef\u81ea\u51cf</li> <li>\u968f\u673a\u8bbf\u95ee\u8fed\u4ee3\u5668\uff1a\u8bfb\u5199\uff0c\u53ef\u4ee5\u4e71\u641e</li> </ol> <p>\u4ee5\u53cc\u5411\u8fed\u4ee3\u5668\u4e3a\u4f8b\u4ecb\u7ecd\u64cd\u4f5c\uff1a</p> <ol> <li>\u81ea\u589e\uff1a\u91cd\u8f7d\u4e86 <code>++</code>\uff0c\u53ef\u4ee5\u8fdb\u884c <code>p++</code>\uff0c<code>++p</code> \u64cd\u4f5c</li> <li>\u81ea\u51cf\uff1a\u91cd\u8f7d\u4e86 <code>--</code>\uff0c\u53ef\u4ee5\u8fdb\u884c <code>p--</code>\uff0c<code>--p</code>\u64cd\u4f5c</li> <li>\u6bd4\u8f83\u662f\u5426\u76f8\u7b49\uff1a<code>p == p1</code>\uff0c<code>p != p1</code>\uff08\u6ca1\u6709\u91cd\u8f7d <code>&lt;</code>\uff0c<code>&gt;</code> \u4e4b\u7c7b\uff09</li> <li>\u8bfb\u5199\uff1a<code>*p</code>\uff0c\u5199\u5219 <code>*p=value</code></li> </ol> <p>\u5728\u968f\u673a\u8bbf\u95ee\u8fed\u4ee3\u5668\u4e2d\uff0c\u4e0d\u4ec5\u53cc\u5411\u8fed\u4ee3\u5668\u7684\u6240\u6709\u64cd\u4f5c\u90fd\u53ef\u4ee5\u8fdb\u884c\uff0c\u800c\u4e14\u8fd8\u53ef\u4ee5\u8fdb\u884c <code>p += i</code> (<code>p = p + i</code>)\uff0c<code>p -= i</code>  (<code>p = p - i</code>)\uff0c<code>p[i]</code>\uff0c\u5927\u4e8e\u5c0f\u4e8e\u64cd\u4f5c\uff0c\u4ee5\u53ca\u6307\u9488\u76f8\u51cf\u4e5f\u5177\u6709\u4e86\u610f\u4e49\uff08\u4e24\u4e2a\u6307\u9488\u4e4b\u95f4\u7684\u5143\u7d20\u6570\u91cf\uff09\u3002</p> <p>\u7ed9\u51fa\u5e38\u7528\u5bb9\u5668\u4e0a\u7684\u8fed\u4ee3\u5668\u7c7b\u578b\uff1a</p> \u5bb9\u5668 \u5bb9\u5668\u4e0a\u7684\u8fed\u4ee3\u5668\u7c7b\u522b vector \u968f\u673a\u8bbf\u95ee deque \u968f\u673a\u8bbf\u95ee list \u53cc\u5411 set/multiset \u53cc\u5411 map/multimap \u53cc\u5411 stack/queue \u4e0d\u652f\u6301\u8fed\u4ee3\u5668 priority_queue \u4e0d\u652f\u6301\u8fed\u4ee3\u5668"},{"location":"ZJU_CS/oop/mid-review/#week5","title":"Week5","text":"<p>Q1. \u4e3b\u7a0b\u5e8f\u8c03\u7528\u5185\u8054\u51fd\u6570\uff08 <code>inline</code> \uff09\u65f6\uff0c\u4e0d\u53d1\u751f\u63a7\u5236\u8f6c\u79fb\uff0c\u65e0\u9700\u4fdd\u5b58\u548c\u6062\u590d\u73af\u5883\u53d8\u91cf\u7b49\uff0c\u56e0\u6b64\uff0c\u8282\u7701\u4e86\u7cfb\u7edf\u5f00\u9500\u3002\u5185\u8054\u51fd\u6570\u7684\u58f0\u660e\u4ee5\u53ca\u6700\u7ec8\u7684\u751f\u6548\uff0c\u662f\u7531\u7a0b\u5e8f\u5458\u51b3\u5b9a\u7684\u3002(T/F)</p> Answer <p>F\u3002\u5185\u8054\u51fd\u6570\u7684\u751f\u6548\u662f\u7531\u7f16\u8bd1\u5668\u6267\u884c\u7684\u3002</p> <p>Q2. \u4e24\u4e2a\u4ee5\u4e0a\u7684\u51fd\u6570\uff0c\u5177\u6709\u76f8\u540c\u7684\u51fd\u6570\u540d\uff0c\u4e14\u5f62\u53c2\u7684\u4e2a\u6570\u6216\u5f62\u53c2\u7684\u7c7b\u578b\u4e0d\u540c\uff0c\u6216\u8fd4\u56de\u7684\u6570\u636e\u7c7b\u578b\u4e0d\u540c\uff0c\u5219\u79f0\u4e4b\u4e3a\u51fd\u6570\u7684\u91cd\u8f7d\u3002(T/F)</p> Answer <p>F\u3002\u4e0d\u80fd\u4ec5\u6839\u636e\u8fd4\u56de\u503c\u7c7b\u578b\u533a\u5206\u91cd\u8f7d\u7684\u51fd\u6570\u3002</p> <p>Q3. \u4ee5\u4e0b\u9009\u9879\u4e2d\uff0c\u662f\u6b63\u786e\u7684\u51fd\u6570\u9ed8\u8ba4\u5f62\u53c2\u8bbe\u7f6e\u7684\u662f\u3002</p> <p>A. <code>int fun(int a,int b,int c);</code></p> <p>B. <code>int fun(int a,int b,int c=1);</code></p> <p>C. <code>int fun(int a,int b=1,int c);</code></p> <p>D. <code>int fun(int a=1,int b,int c);</code></p> Answer <p>B\u3002\u8bb0\u5f55\u602a\u9898\u4e00\u9053\uff0c\u5927\u6982\u662f\u56e0\u4e3a A \u6ca1\u6709\u8fdb\u884c\u9ed8\u8ba4\u5f62\u53c2\u8bbe\u7f6e\u6240\u4ee5\u662f\u9519\u7684\u5427\u2026\u2026</p>"},{"location":"ZJU_CS/oop/mid-review/#week6","title":"Week6","text":"<p>Q1. Order of initialization in the initial list is the order of their declaration in the list.(T/F)</p> Answer <p>F\u3002\u5e94\u5f53\u662f\u76f8\u5173\u6210\u5458\u58f0\u660e\u7684\u987a\u5e8f\u3002</p> <p>Q2. \u7c7b\u7684\u7ec4\u5408\u5173\u7cfb\u53ef\u4ee5\u7528\u201cHas-A\u201d\u63cf\u8ff0\uff1b\u7c7b\u95f4\u7684\u7ee7\u627f\u4e0e\u6d3e\u751f\u5173\u7cfb\u53ef\u4ee5\u7528\u201cIs-A\u201d\u63cf\u8ff0\u3002(T/F)</p> Answer <p>T\u3002\u5f53\u65f6\u7b2c\u4e00\u6b21\u63a5\u89e6\u8fd9\u79cd\u8bf4\u6cd5\uff0c\u5728\u6b64\u8bb0\u5f55\u3002</p> <p>Q3. \u5bf9\u4e8e\u7c7b\u4e4b\u95f4\u7684\u53cb\u5143\u5173\u7cfb\uff1a</p> <p>A. \u5982\u679c\u7c7bA\u662f\u7c7bB\u7684\u53cb\u5143\uff0c\u5219B\u7684\u6210\u5458\u51fd\u6570\u53ef\u4ee5\u8bbf\u95eeA\u7684\u79c1\u6709\u6210\u5458</p> <p>B. \u5982\u679c\u7c7bA\u662f\u7c7bB\u7684\u53cb\u5143\uff0c\u5219B\u4e5f\u662fA\u7684\u53cb\u5143\u3002</p> <p>C. \u5982\u679c\u7c7bA\u662f\u7c7bB\u7684\u53cb\u5143\uff0c\u5e76\u4e14\u7c7bB\u662f\u7c7bC\u7684\u53cb\u5143\uff0c\u5219\u7c7bA\u4e5f\u662f\u7c7bC\u7684\u53cb\u5143\u3002</p> <p>D. \u4ee5\u4e0a\u7b54\u6848\u90fd\u4e0d\u5bf9\u3002</p> Answer <p>D\u3002</p> <p>A\uff0c\u5199\u53cd\u4e86\u3002</p> <p>B\uff0c\u5982\u679c\u53ea\u5b9a\u4e49\u4e86\u5355\u5411\u7684\u53cb\u5143\u5173\u7cfb\uff0c\u90a3\u4e48\u4e0d\u4f1a\u662f\u76f8\u4e92\u7684\u3002</p> <p>\uff08\u6211\u8ba4\u4e3a\u4f60\u662f\u6211\u7684\u670b\u53cb\uff0c\u4f60\u5374\u4e0d\u8ba4\u4e3a\uff0c\u5509\u771f\u662f\u4ee4\u4eba\u60b2\u4f24\uff09</p> <p>C\uff0c\u53cb\u5143\u5173\u7cfb\u4e0d\u80fd\u7ee7\u627f\u3001\u4e0d\u80fd\u4f20\u9012</p> <p>\uff08\u670b\u53cb\u7684\u5b50\u5973\u4e0d\u4e00\u5b9a\u662f\u670b\u53cb\uff0c\u670b\u53cb\u7684\u670b\u53cb\u4e0d\u4e00\u5b9a\u662f\u670b\u53cb\uff09</p> <p>\u53cb\u5143\u76f8\u5173\u9898\u5916\u8bdd</p> <ol> <li> <p>\u53cb\u5143\u5173\u7cfb\u4e0d\u80fd\u7ee7\u627f\u5305\u542b\u4e24\u91cd\u610f\u601d\uff1aA \u5c06 B \u8bbe\u4e3a\u53cb\u5143\uff0cC \u662f A \u7684\u6d3e\u751f\u7c7b\uff0cD \u662f B \u7684\u6d3e\u751f\u7c7b\uff0c\u5219 B \u4e0d\u662f C  \u7684\u53cb\u5143\uff0cD \u4e5f\u4e0d\u662f A \u7684\u53cb\u5143\u3002\uff08\u957f\u8f88\u4e4b\u95f4\u7684\u5355\u5411\u670b\u53cb\u5173\u7cfb\uff0c\u5b50\u5973\u5747\u4e0d\u53ef\u7ee7\u627f\uff09</p> </li> <li> <p>\u4f46\u662f\u53cb\u5143\u7c7b\u7684\u6d3e\u751f\u7c7b\uff0c\u4f9d\u7136\u53ef\u4ee5\u901a\u8fc7\u5176\u57fa\u7c7b\u63a5\u53e3\u53bb\u8bbf\u95ee\u8bbe\u7f6e\u5176\u57fa\u7c7b\u4e3a\u53cb\u5143\u7c7b\u7684\u7c7b\u7684\u79c1\u6709\u6210\u5458\u3002\uff08\u670b\u53cb\u7684\u5b50\u5973\u4ee5\u5b50\u5973\u7684\u540d\u4e49\u4e0d\u4e00\u5b9a\u662f\u670b\u53cb\uff0c\u4f46\u662f\u5982\u679c\u670b\u53cb\u7684\u5b50\u5973\u62ff\u7740\u5b83\u8001\u7239\u7684\u4fe1\u7269\u90a3\u4e5f\u53ea\u80fd\u5f53\u670b\u53cb\u5bf9\u5f85\uff09</p> </li> <li> <p>\u4f46\u662f\u6ce8\u610f\uff0c\u5982\u679c\u6d3e\u751f\u7c7b\u91cd\u8f7d\u4e86\u57fa\u7c7b\u7684\u67d0\u4e2a\u865a\u51fd\u6570\uff0c\u90a3\u4e48\u8fd9\u4e2a\u88ab\u91cd\u8f7d\u7684\u865a\u51fd\u6570\u5728\u6d3e\u751f\u7c7b\u4e2d\u4e5f\u65e0\u6cd5\u8bbf\u95ee\u8bbe\u7f6e\u5176\u57fa\u7c7b\u4e3a\u53cb\u5143\u7c7b\u7684\u79c1\u6709\u6210\u5458\u3002\u5373\u4f7f\u4f7f\u7528\u591a\u6001\uff0c\u8fd9\u79cd\u91cd\u8f7d\u4e5f\u65e0\u6cd5\u5728\u7f16\u8bd1\u65f6\u901a\u8fc7\u3002\uff08\u670b\u53cb\u7684\u5b50\u5973\u53ea\u6709\u62ff\u7740\u5b83\u8001\u7239\u7684\u4fe1\u7269\u624d\u4f1a\u88ab\u5f53\u670b\u53cb\u5bf9\u5f85\uff0c\u8981\u662f\u5b83\u6539\u9020\u4e86\u4fe1\u7269\u8fd8\u662f\u4e0d\u8ba4\u7684\uff09</p> </li> </ol> <p>Q4. \u53cb\u5143\u7684\u4f5c\u7528\u662f</p> <p>A. \u63d0\u9ad8\u7a0b\u5e8f\u7684\u8fd0\u7528\u6548\u7387</p> <p>B. \u52a0\u5f3a\u7c7b\u7684\u5c01\u88c5\u6027</p> <p>C. \u5b9e\u73b0\u6570\u636e\u7684\u9690\u85cf\u6027</p> <p>D. \u589e\u52a0\u6210\u5458\u51fd\u6570\u7684\u79cd\u7c7b</p> Answer <p>A\u3002\u6253\u7834\u5c01\u88c5\uff0c\u8d70\u5411 C-like\u3002</p> <p>Q5. \u4e00\u4e2a\u7c7b\u7684\u53cb\u5143\u7c7b\u4e2d\u7684\u6210\u5458\u51fd\u6570\u90fd\u662f\u8fd9\u4e2a\u7c7b\u7684\u53cb\u5143\u51fd\u6570 (T/F)</p> Answer <p>T\u3002</p> <p>Q6. Suppose a class is defined without any keywords such as public, private and protected, all members default to</p> <p>A. public</p> <p>B. protected</p> <p>C. private</p> <p>D. static</p> Answer <p>C\u3002class \u9ed8\u8ba4\u4e3a private\uff0cstruct \u9ed8\u8ba4\u4e3a public\u3002</p> <p>Q7. Who can access a private member of a class?</p> <p>A. Only member functions of that class.</p> <p>B. Only member functions of that class and friend functions or member functions of friend classes</p> <p>C. Only member functions of that class and derived classes</p> <p>D. None of the others</p> Answer <p>B\u3002</p> <p>Q8. \u9759\u6001\u6210\u5458\u51fd\u6570\u6ca1\u6709\uff1a</p> <p>A. \u8fd4\u56de\u503c</p> <p>B. this\u6307\u9488</p> <p>C. \u6307\u9488\u53c2\u6570</p> <p>D. \u8fd4\u56de\u7c7b\u578b</p> Answer <p>B\u3002\u9759\u6001\u6210\u5458\u51fd\u6570\u4e0d\u7279\u522b\u64cd\u4f5c\u64cd\u4f5c\u67d0\u4e2a\u5b9e\u4f8b\u5316\u7684\u7c7b\u5bf9\u8c61\uff0c\u53ea\u80fd\u5bf9\u9759\u6001\u6210\u5458\u53d8\u91cf\u8fdb\u884c\u64cd\u4f5c\uff0c\u4e0d\u9700\u8981\u6709 this \u6307\u9488\u3002</p> <p>\uff08\u751f\u5b58\u57df\u4e0e\u5168\u5c40\u51fd\u6570\u76f8\u540c\uff0c\u53ea\u662f\u4f5c\u7528\u57df\u88ab\u9650\u5236\u5728\u7c7b\u5185\uff09</p> <p>Q9. For the code below:</p> <p><pre><code>class A {\n  static int i;\n  //...\n};\n</code></pre> Which statement is NOT true?</p> <p>A. All objects of <code>class A</code> reserve a space for <code>i</code></p> <p>B. All objects of <code>class A</code> share the space of <code>i</code></p> <p>C. <code>i</code> is a member variable of <code>class A</code></p> <p>D. <code>i</code> is allocated in global data space</p> Answer <p>A\u3002\u9759\u6001\u6210\u5458\u53d8\u91cf\u7531\u7c7b\u7684\u6240\u6709\u5bf9\u8c61\u5171\u4eab\u3002\u672c\u8d28\u4e0a\u662f\u5168\u5c40\u53d8\u91cf\uff08\u5305\u62ec\u5b58\u50a8\u7a7a\u95f4\uff09\uff0c\u53ea\u662f\u88ab\u5c01\u88c5\u5728\u7c7b\u5185\u3002</p>"},{"location":"ZJU_CS/oop/mid-review/#week7","title":"Week7","text":"<p>Q1. In C++, inheritance allows a derived class to directly access all of the functions and data of its base class. (T/F)</p> Answer <p>F\u3002\u6d3e\u751f\u7c7b\u53ea\u80fd\u76f4\u63a5\u8bbf\u95ee\u57fa\u7c7b\u7684\u516c\u5171 (public) \u548c\u4fdd\u62a4 (protected) \u5bf9\u8c61\uff0c\u79c1\u6709 (private) \u5bf9\u8c61\u662f\u65e0\u6cd5\u76f4\u63a5\u8bbf\u95ee\u7684\u3002</p> <p>\u5bf9\u6bd4 public, protected \u548c private \u4e09\u79cd\u7ee7\u627f\u65b9\u5f0f</p> \u7ee7\u627f\u65b9\u5f0f \u57fa\u7c7bpublic \u57fa\u7c7bprotected \u57fa\u7c7bprivate public\u7ee7\u627f public protected \u4e0d\u53ef\u8bbf\u95ee protected\u7ee7\u627f protected protected \u4e0d\u53ef\u8bbf\u95ee private\u7ee7\u627f private private \u4e0d\u53ef\u8bbf\u95ee <p>Q2. One class can have more than one super classes.(T/F)</p> Answer <p>T\u3002\u8fd9\u9898\u7684\u610f\u56fe\u5e94\u8be5\u5728\u4e8e\uff0cC++\u662f\u6709\u591a\u91cd\u7ee7\u627f\u7684\u3002</p> <p>Q3. \u7ed9\u51fa//1, //2, //3, //4, //5\u5904\u4ea7\u751f\u7684\u8f93\u51fa\u3002</p> <pre><code>#include &lt;iostream&gt;\n#include &lt;string&gt;\nusing namespace std ;\n\nclass Testing\n{\nprivate:\n    string words; \n    int number ;\npublic:\n    Testing(const string &amp; s = \"Testing\")\n    {\n        words = s ;\n        number = words.length();\n        if (words.compare(\"Testing\")==0)\n            cout &lt;&lt; 1;\n        else if (words.compare(\"Heap1\")==0)\n            cout &lt;&lt; 2;\n        else\n            cout &lt;&lt; 3;\n    }\n    ~Testing()\n    {\n        cout &lt;&lt; 0;\n    }\n    void show() const\n    {\n        cout &lt;&lt; number;\n    }\n};\nint main()\n{\n    Testing *pc1 , *pc2;\n    pc1 = new Testing ;          //1\n    pc2 = new Testing(\"Heap1\");  //2\n    pc1-&gt;show();   //3\n    delete pc1 ;   //4\n    delete pc2 ;   //5\n    return 0;\n}\n</code></pre> Answer <ul> <li>//1: 1</li> <li>//2: 2</li> <li>//3: 7</li> <li>//4: 0</li> <li>//5: 0</li> </ul> <p>new \u8c03\u7528\u6784\u9020\u51fd\u6570\u5e76\u5206\u914d\u7a7a\u95f4\u3002</p> <p>pc1 \u7684\u6784\u9020\u6ca1\u6709\u7ed9\u53c2\u6570\uff0c\u5c06\u8c03\u7528\u9ed8\u8ba4\u6784\u9020\u51fd\u6570\uff0c\u8fd9\u91cc\u5b9a\u4e49\u7684\u6784\u9020\u51fd\u6570\u867d\u7136\u6709\u4e00\u4e2a\u53c2\u6570\uff0c\u4f46\u662f\u5b58\u5728\u9ed8\u8ba4\u53c2\u6570\u503c\uff0c\u56e0\u6b64\u4e0e\u9ed8\u8ba4\u6784\u9020\u51fd\u6570\u76f8\u5bb9\uff0c\u4f1a\u8c03\u7528\u5b9a\u4e49\u7684\u6784\u9020\u51fd\u6570\u3002\uff08\u56e0\u6b64\u7f16\u8bd1\u5668\u5e76\u4e0d\u4f1a\u518d\u751f\u6210\u4e00\u4e2a\u9ed8\u8ba4\u6784\u9020\u51fd\u6570\uff09</p> <p>\u56e0\u6b64\u6784\u9020\u65f6\u7684\u53c2\u6570\u4e3a\u9ed8\u8ba4\u7684 Testing\uff0c\u5219 //1 \u5904\u8f93\u51fa 1\u3002\u636e\u6b64\uff0c\u4e5f\u5c31\u53ef\u77e5 //3 \u5904\u8f93\u51fa 7\u3002</p> <p>2 \u662f\u6709\u53c2\u6570\u7684\u6784\u9020\uff0c\u53c2\u6570\u4e3a Heap1\uff0c\u6784\u9020\u65f6\u4f1a\u8f93\u51fa 2\uff0c\u5373 //2 \u7684\u8f93\u51fa\u3002</p> <p>//4\uff0c//5 \u5904\u90fd\u662f delete\uff0c\u4f1a\u8c03\u7528\u6790\u6784\u51fd\u6570\u5e76\u91ca\u653e\u5185\u5b58\u7a7a\u95f4\uff0c\u56e0\u6b64\u90fd\u8f93\u51fa0\u3002</p> <p>Q4. \u7ed9\u51fa//1, //2, //3, //4\u5904\u4ea7\u751f\u7684\u8f93\u51fa\u3002</p> <pre><code>class A{\n    int i;\npublic:\n    A(int ii=0):i(ii) { cout &lt;&lt; 1; }\n    A(const A&amp; a) {\n        i = a.i;\n        cout &lt;&lt; 2;     \n    }\n    void print() const { cout &lt;&lt; 3 &lt;&lt; i; }\n};\n\nclass B : public A {\n    int i;\n    A a;\npublic:\n    B(int ii = 0) : i(ii) { cout &lt;&lt; 4; }\n    B(const B&amp; b) {\n        i = b.i;\n        cout &lt;&lt; 5;\n    }\n    void print() const {\n        A::print();\n        a.print();\n        cout &lt;&lt; 6 &lt;&lt; i;    \n    }\n};\n\nint main()\n{\n    B b(2);        //1\n    b.print();    //2\n    B c(b);        //3\n    c.print();    //4\n}\n</code></pre> Answer <ul> <li>//1: 114</li> <li>//2: 303062</li> <li>//3: 115</li> <li>//4: 303062</li> </ul> <p>//1 \u5904\uff0c\u8c03\u7528\u666e\u901a\u542b\u53c2\u6784\u9020\u51fd\u6570\u6784\u9020 b\u3002</p> <ul> <li>\u5728 b \u7684\u8be5\u6784\u9020\u51fd\u6570\u4e2d\u6ca1\u6709\u521d\u59cb\u5316\u57fa\u7c7b A\uff0c\u56e0\u6b64\u57fa\u7c7b A \u9ed8\u8ba4\u6784\u9020\uff0ci \u521d\u59cb\u5316\u4e3a 0\uff0c\u8f93\u51fa 1</li> <li>\u63a5\u7740\u662f b \u7684\u6210\u5458\u53d8\u91cf\u7684\u521d\u59cb\u5316\uff0c\u5148\u662f b.i \u901a\u8fc7\u521d\u59cb\u5316\u5217\u8868\u521d\u59cb\u5316\u4e3a 2\uff0c\u7136\u540e\u662f b.A \u8c03\u7528\u6784\u9020\u51fd\u6570\uff0c\u56e0\u4e3a\u6ca1\u6709\u521d\u59cb\u5316\u5217\u8868\u6307\u5b9a\uff0c\u56e0\u6b64\u4e5f\u662f\u9ed8\u8ba4\u6784\u9020\uff0cb.A.i \u521d\u59cb\u5316\u4e3a 0\uff0c\u8f93\u51fa 1</li> <li>\u6700\u540e\u662f b \u7684\u6784\u9020\u51fd\u6570\u7684\u5269\u4f59\u90e8\u5206\uff0c\u8f93\u51fa 4</li> </ul> <p>//2 \u5904\uff0c\u8c03\u7528 B \u7c7b\u7684 print()\u3002</p> <ul> <li>\u9996\u5148\u662f\u57fa\u7c7b A \u7684 print\uff0c\u8f93\u51fa 3 \u548c\u57fa\u7c7b A \u7684 i\uff08\u4e4b\u524d\u5df2\u7ecf\u786e\u8ba4\u5b83\u662f 0\uff09</li> <li>\u7136\u540e\u662f b \u7684\u6210\u5458 A\uff0c\u4e5f\u662f\u8f93\u51fa 3 \u548c 0</li> <li>\u6700\u540e\u662f\u8f93\u51fa 6 \u548c b.i\uff0cb.i \u662f 2</li> </ul> <p>//3 \u5904\uff0c\u8c03\u7528\u62f7\u8d1d\u6784\u9020\u51fd\u6570\u6784\u9020 c\u3002</p> <ul> <li>\u53ef\u4ee5\u770b\u5230\uff0c\u8fd9\u4e2a\u62f7\u8d1d\u6784\u9020\u662f\u76d7\u7248\u7684\uff0c\u5b9e\u9645\u4e0a\u53ea\u62f7\u8d1d\u4e86 c.i=b.i\uff0cc \u7684\u57fa\u7c7b A \u548c c.A \u90fd\u662f\u9ed8\u8ba4\u6784\u9020\uff0c\u4e0d\u8fc7\u7531\u4e8e b \u7684\u57fa\u7c7b\u548c b.A \u4e5f\u662f\u8fd9\u4e48\u6784\u9020\u7684\uff0c\u5bfc\u81f4\u6700\u7ec8 b \u548c c \u786e\u5b9e\u662f\u4e00\u6837\u7684</li> <li>\u4e0d\u8fc7\u5728\u8fd9\u4e00\u6b65\u7684\u8f93\u51fa\u5e76\u4e0d\u4e00\u6837\uff0c\u5c3d\u7ba1\u4e24\u4e2a A \u7684\u8f93\u51fa\u4f9d\u7136\u90fd\u662f 1\uff0c\u4f46\u662f\u7531\u4e8e\u8c03\u7528\u7684 B \u7c7b\u6784\u9020\u51fd\u6570\u662f\u62f7\u8d1d\u6784\u9020\uff0c\u56e0\u6b64\u6700\u540e\u8f93\u51fa\u7684\u662f5</li> </ul> <p>//4 \u5904\uff0c\u7531\u4e8e c \u6700\u540e\u548c b \u662f\u4e00\u6837\u7684\uff0c\u90a3\u4e48 c.print() \u7684\u7ed3\u679c\u548c b.print() \u7684\u7ed3\u679c\u4e5f\u5c31\u662f\u4e00\u6837\u7684\u3002</p> <p>const \u7684\u5bf9\u8c61\u548c\u6210\u5458\u51fd\u6570</p> <p>\u8fd9\u91cc\u6709\u8da3\u7684\u662f\uff0c\u975e const \u7684\u5bf9\u8c61\u8c03\u7528\u4e86 const \u7684\u6210\u5458\u51fd\u6570\u3002</p> <p>\u8fd9\u662f\u56e0\u4e3a const \u7684\u6210\u5458\u51fd\u6570\u5b9e\u9645\u4e0a\u662f\u8ba9 this \u6307\u9488\u662f const \u7684\uff0c\u7531\u4e8e\u4e00\u4e2a\u975e const \u7684\u6307\u9488\u662f\u53ef\u4ee5\u4f20\u53c2\u7ed9\u4e00\u4e2a const \u7684\u6307\u9488\u7684\uff0c\u56e0\u6b64\u53ef\u4ee5\u8fd9\u4e48\u505a\u3002</p> <p>\u76f8\u53cd\u5730\uff0cconst \u7684\u6307\u9488\u4e0d\u80fd\u4f20\u53c2\u7ed9\u975e const \u7684\u6307\u9488\uff0c\u56e0\u6b64 const \u7684\u5bf9\u8c61\u4e0d\u80fd\u8c03\u7528\u975e const \u7684\u6210\u5458\u51fd\u6570\u3002</p>"},{"location":"ZJU_CS/oop/mid-review/#week8","title":"Week8","text":"<p>Q1. \u865a\u51fd\u6570\u662f\u7528 <code>virtual</code> \u5173\u952e\u5b57\u8bf4\u660e\u7684\u6210\u5458\u51fd\u6570\u3002(T/F)</p> Answer <p>T\u3002virtual \u53ea\u80fd\u4fee\u9970\u7c7b\u7684\u6210\u5458\u51fd\u6570\u3002</p> <p>Q2. \u5c06\u6784\u9020\u51fd\u6570\u8bf4\u660e\u4e3a\u7eaf\u865a\u51fd\u6570\u662f\u6ca1\u6709\u610f\u4e49\u7684\u3002(T/F)</p> Answer <p>T\u3002\u6784\u9020\u51fd\u6570\u4e0d\u80fd\u662f\u865a\u51fd\u6570\uff0c\u8fd9\u4e2a\u65f6\u5019 vtable \u90fd\u8fd8\u6ca1\u6709\u5efa\u7acb\u3002</p> <p>\u6790\u6784\u51fd\u6570\u9700\u8981\u662f\u865a\u51fd\u6570\u3002</p> <p>Q3. \u62bd\u8c61\u7c7b\u662f\u6307\u4e00\u4e9b\u6ca1\u6709\u8bf4\u660e\u5bf9\u8c61\u7684\u7c7b\u3002(T/F)</p> Answer <p>F\u3002\u62bd\u8c61\u7c7b\u662f\u542b\u6709\u7eaf\u865a\u51fd\u6570\u7684\u7c7b\u3002</p> <p>Q4. \u52a8\u6001\u7ed1\u5b9a\u662f\u5728\u8fd0\u884c\u65f6\u9009\u5b9a\u8c03\u7528\u7684\u6210\u5458\u51fd\u6570\u7684\u3002(T/F)</p> Answer <p>T\u3002\u4e0d\u540c\u4e8e\u9759\u6001\u7ed1\u5b9a\uff0c\u9759\u6001\u7ed1\u5b9a\u662f\u5728\u7f16\u8bd1\u65f6\u5c31\u786e\u5b9a\u4e86\u7684\u3002</p> <p>Q5. \u56e0\u4e3a\u9759\u6001\u6210\u5458\u51fd\u6570\u4e0d\u80fd\u662f\u865a\u51fd\u6570\uff0c\u6240\u4ee5\u5b83\u4eec\u4e0d\u80fd\u5b9e\u73b0\u591a\u6001\u3002(T/F)</p> Answer <p>T\u3002\u9759\u6001\u6210\u5458\u51fd\u6570\u662f\u6ca1\u6709 this \u6307\u9488\u7684\uff0c\u800c\u865a\u51fd\u6570\u9700\u8981 this \u6307\u9488\u627e\u5230 vptr\uff0c\u6240\u4ee5\u9759\u6001\u6210\u5458\u51fd\u6570\u4e0d\u80fd\u662f\u865a\u51fd\u6570\u3002</p> <p>Q6. \u5728\u591a\u7ee7\u627f\u4e2d\uff0c\u6d3e\u751f\u7c7b\u7684\u6784\u9020\u51fd\u6570\u9700\u8981\u4f9d\u6b21\u8c03\u7528\u5176\u57fa\u7c7b\u7684\u6784\u9020\u51fd\u6570\uff0c\u8c03\u7528\u987a\u5e8f\u53d6\u51b3\u4e8e\u5b9a\u4e49\u6d3e\u751f\u7c7b\u65f6\u6240\u6307\u5b9a\u7684\u5404\u57fa\u7c7b\u7684\u987a\u5e8f\u3002</p> Answer <p>T\u3002</p> <p>Q7. \u865a\u51fd\u6570\u5177\u6709\u7ee7\u627f\u6027\u3002(T/F)</p> Answer <p>T\u3002\u6307\u67d0\u4e2a\u7c7b\u7684\u67d0\u4e2a\u51fd\u6570\u88ab\u58f0\u660e\u4e3a\u865a\u51fd\u6570\u4e4b\u540e\uff0c\u5b83\u7684\u6240\u6709\u76f4\u63a5\u6216\u95f4\u63a5\u57fa\u7c7b\u4e2d\u7684\u540c\u540d\u51fd\u6570\uff0c\u5373\u4f7f\u524d\u9762\u4e0d\u52a0 virtual \u5173\u952e\u5b57\uff0c\u4e5f\u4f1a\u88ab\u8ba4\u4e3a\u662f\u865a\u51fd\u6570\u3002</p> <p>(\u4f46\u662f wk \u5efa\u8bae\u8fd8\u662f\u8be5\u52a0 virtual \u7684\u90fd\u52a0 virtual\uff0c\u51cf\u5c11\u5411\u7236\u7c7b\u67e5\u627e\u662f\u5426 virtual \u7684\u5f00\u9500)</p> <p>Q8. \u5982\u679c\u4e00\u4e2a\u7c7b\u7684\u51fd\u6570\u5168\u90e8\u90fd\u662f\u7eaf\u865a\u51fd\u6570\uff0c\u5219\u8fd9\u4e2a\u7c7b\u4e0d\u80fd\u6709\u81ea\u5df1\u7c7b\u7684\u5b9e\u73b0\uff08\u5305\u62ec\u5f15\u7528\u548c\u6307\u9488\uff09\uff0c\u53ea\u80fd\u901a\u8fc7\u6d3e\u751f\u7c7b\u7ee7\u627f\u5b9e\u73b0\u3002(T/F)</p> Answer <p>F\u3002\u542b\u6709\u4e00\u4e2a\u7eaf\u865a\u51fd\u6570\u7684\u7c7b\u5c31\u662f\u62bd\u8c61\u7c7b\u4e86\u3002</p> <p>\u62bd\u8c61\u7c7b\u4e0d\u80fd\u6709\u81ea\u5df1\u7c7b\u7684\u5b9e\u73b0\uff0c\u4f46\u662f\u53ef\u4ee5\u6709\u5f15\u7528\u548c\u6307\u9488\u3002</p> <p>Q9. Given:</p> <p><pre><code>class A {\n    A() {};\n    virtual f() {};\n    int i;\n};\n</code></pre> which statement is NOT true:</p> <p>A. i is private</p> <p>B. f() is an inline function</p> <p>C. i is a member of class A</p> <p>D. sizeof(A) == sizeof(int)</p> Answer <p>D\u3002</p> <p>\u9ed8\u8ba4private\uff0cA\u6b63\u786e\u3002</p> <p>\u9ed8\u8ba4inline\uff0cB\u6b63\u786e\u3002</p> <p>D\uff0cA\u8fd8\u8981\u5305\u62ecvptr\u7684\u7a7a\u95f4\uff0c\u56e0\u6b64\u4e0d\u6b63\u786e\u3002</p> <p>Q10. \u4ee5\u4e0b\u8bf4\u6cd5\u6b63\u786e\u7684\u662f\uff1f</p> <p>A. \u5728\u865a\u51fd\u6570\u4e2d\u4e0d\u80fd\u4f7f\u7528this\u6307\u9488</p> <p>B. \u5728\u6784\u9020\u51fd\u6570\u4e2d\u8c03\u7528\u865a\u51fd\u6570\uff0c\u4e0d\u662f\u52a8\u6001\u8054\u7f16</p> <p>C. \u62bd\u8c61\u7c7b\u7684\u6210\u5458\u51fd\u6570\u90fd\u662f\u7eaf\u865a\u51fd\u6570</p> <p>D. \u6784\u9020\u51fd\u6570\u548c\u6790\u6784\u51fd\u6570\u90fd\u4e0d\u80fd\u662f\u865a\u51fd\u6570</p> Answer <p>B\u3002\u5728\u6784\u9020\u51fd\u6570\u4e2d\u8c03\u7528\u865a\u51fd\u6570\u662f\u9759\u6001\u7ed1\u5b9a\uff0c\u4e0d\u662f\u52a8\u6001\u8054\u7f16\uff08\u52a8\u6001\u7ed1\u5b9a\uff09\u3002</p> <p>A\uff0c\u865a\u51fd\u6570\u7684\u52a8\u6001\u7ed1\u5b9a\u9700\u8981\u901a\u8fc7 this \u6307\u9488\u627e\u5230 vptr\uff0c\u9700\u8981\u4f7f\u7528 this \u6307\u9488\uff0c\u5f53\u7136\u4e5f\u53ef\u4ee5\u5728\u865a\u51fd\u6570\u4e2d\u4f7f\u7528\u3002</p> <p>\uff08\u53cd\u800c\u662f\u6ca1\u6709this\u6307\u9488\u7684\u9759\u6001\u6210\u5458\u51fd\u6570\u4e0d\u80fd\u662f\u865a\u51fd\u6570\uff09</p> <p>C\uff0c\u62bd\u8c61\u7c7b\u53ea\u8981\u5305\u542b\u7eaf\u865a\u51fd\u6570\u5c31\u884c\uff0c\u4e0d\u9700\u8981\u5168\u90e8\u90fd\u662f\u7eaf\u865a\u51fd\u6570\u3002</p> <p>D\uff0c\u6784\u9020\u51fd\u6570\u4e0d\u80fd\u662f\u865a\u51fd\u6570\uff0c\u6790\u6784\u51fd\u6570\u6700\u597d\u662f\u865a\u51fd\u6570\u3002</p>"},{"location":"spark%20in%20life/","title":"My Life","text":"<p>\u8fd9\u91cc\u8bb0\u5f55\u4e00\u4e9b\u6211\u751f\u547d\u4e2d\u7684\u6240\u601d\u6240\u60f3</p>"},{"location":"spark%20in%20life/college%20life/competition/","title":"\u7ade\u8d5b","text":""},{"location":"spark%20in%20life/college%20life/competition/#timetable","title":"\u4e00\u4e9b\u4e9btimetable\u7f51\u7ad9","text":"<p>CS\uff1a\u4e2d\u56fd\u9ad8\u6821\u8ba1\u7b97\u673a\u5927\u8d5b (c4best.cn)</p> <p>ZJU:\u9ad8\u6821\u7ade\u8d5b\u7ba1\u7406\u7cfb\u7edf (zju.edu.cn)</p>"},{"location":"spark%20in%20life/college%20life/competition/#_2","title":"\u4e00\u6708","text":"<p>\u56e2\u4f53\u7a0b\u5e8f\u8bbe\u8ba1\u5929\u68af\u8d5b (patest.cn)</p>"},{"location":"spark%20in%20life/college%20life/competition/#_3","title":"\u4e8c\u6708","text":"<p>\u6d59\u6c5f\u5927\u5b66\u82f1\u8bed\u542c\u529b\u7ade\u8d5b</p> <p>\u5168\u56fd\u5927\u5b66\u751f\u82f1\u8bed\u7ade\u8d5b</p>"},{"location":"spark%20in%20life/college%20life/competition/#_4","title":"\u4e09\u6708","text":"<p>\u5468\u57f9\u6e90\u7269\u7406\u7ade\u8d5b</p> <p>\u6d59\u6c5f\u5927\u5b66\u5de5\u7a0b\u80fd\u529b\u521b\u65b0\u7ade\u8d5b</p> <p>\u4e2d\u56fd\u9ad8\u6821\u8ba1\u7b97\u673a\u5927\u8d5b-\u7f51\u7edc\u6280\u672f\u6311\u6218\u8d5b (c4best.cn)\uff08\u56db\u5230\u516b\u6708\uff09</p> <p>\u5fae\u4fe1\u5c0f\u7a0b\u5e8f\u5e94\u7528\u5f00\u53d1\u8d5b (qq.com)\uff08\u56db\u6708\u5230\u516d\u6708\uff09</p> <p>\u79fb\u52a8\u5e94\u7528\u521b\u65b0\u8d5b (appcontest.net)\uff08\u4e09\u6708\u5230\u516d\u6708\uff09</p>"},{"location":"spark%20in%20life/college%20life/competition/#_5","title":"\u56db\u6708","text":"<p>\u5927\u6570\u636e\u7cfb\u7edf\u8f6f\u4ef6\u56fd\u5bb6\u5de5\u7a0b\u7814\u7a76\u4e2d\u5fc3 (tsinghua.edu.cn)\uff08\u56db\u6708\u5f00\u59cb\u5230\u516d\u6708\u4efd\uff09</p> <p>[\u6d59\u6c5f\u7701\u4ee5\u53ca\u6d59\u6c5f\u5927\u5b66\u6570\u5b66\u5efa\u6a21\u7ade\u8d5b]</p>"},{"location":"spark%20in%20life/college%20life/competition/#_6","title":"\u4e94\u6708","text":"<p>\u6d59\u6c5f\u7701\u5927\u5b66\u751f\u6570\u5b66\u7ade\u8d5b</p> <p>\u4e2d\u56fd\u9ad8\u6821\u8ba1\u7b97\u673a\u5927\u8d5b-\u667a\u80fd\u4ea4\u4e92\u521b\u65b0\u8d5b (oppo.com)\uff08\u4e94\u5230\u516b\u6708\uff09</p>"},{"location":"spark%20in%20life/college%20life/competition/#_7","title":"\u516b\u6708","text":"<p>\u6570\u5b66\u5efa\u6a21</p> <p>2023 \u9ad8\u6821\u4eba\u5de5\u667a\u80fd\u521b\u610f\u8d5b\uff08C4-AI\uff09 (baidu.com)\uff08\u516b\u6708\u5230\u5341\u4e00\u6708\uff09</p>"},{"location":"spark%20in%20life/college%20life/competition/#_8","title":"\u4e5d\u6708","text":"<p>\u6d59\u6c5f\u5927\u5b66\u82f1\u8bed\u9605\u8bfb\u548c\u5199\u4f5c\u7ade\u8d5b</p>"},{"location":"spark%20in%20life/college%20life/competition/#_9","title":"\u5341\u6708","text":"<p>\u5168\u56fd\u6570\u5b66\u7ade\u8d5b</p>"},{"location":"spark%20in%20life/college%20life/competition/#_10","title":"\u5341\u4e00\u6708","text":"<p>\u6570\u6a21\u7f8e\u8d5b\u62a5\u540d\uff08\u4e00\u822c\u4e8c\u6708\u4efd\u8003\uff09</p>"},{"location":"spark%20in%20life/college%20life/competition/#_11","title":"\u5341\u4e8c\u6708","text":"<p>\u6d59\u6c5f\u7701\u5927\u5b66\u751f \u7269\u7406\u5b66\u672f\u7ade\u8d5b</p>"},{"location":"spark%20in%20life/college%20life/competition/#_12","title":"\u4e00\u4e9b\u4e9b\u8bb0\u5f55","text":"<p>\u7b49\u6211\u53c2\u52a0\u4e86\u518d\u5199\uff08\u72d7\u5934</p>"},{"location":"spark%20in%20life/college%20life/freshman/","title":"\u6d45\u8bb0\u6211\u7684\u5927\u4e00\u751f\u6d3b","text":"<p>\u604d\u60da\u95f4\uff0c\u5927\u4e00\u7b2c\u4e00\u5e74\u5c31\u8fd9\u4e48\u8fc7\u53bb\u4e86\u3002\u6216\u8bb8\u662f\u53d7\u75ab\u60c5\u7684\u5f71\u54cd\uff0c\u4ea6\u6216\u662f\u4eab\u53d7\u4e86\u8db3\u591f\u5feb\u4e50\u7684\u65f6\u5149\uff0c\u611f\u89c9\u4e0a\u4e00\u79d2\u8fd8\u662f\u81ea\u5df1\u521a\u5165\u5b66\u7684\u90a3\u4e00\u5929\u3002\u89c9\u5f97zjg\u597d\u5927\u597d\u5927\uff0c\u751a\u81f3\u8bf4\u89c9\u5f97\u7389\u6e56\u90fd\u5f88\u5927\uff0c\u770b\u7740\u4e00\u5e45\u5e45\u719f\u6089\u53c8\u964c\u751f\u7684\u9762\u5b54\uff0c\u611f\u53d7\u5e76\u9010\u6e10\u878d\u5165\u5230\u5168\u65b0\u7684\u751f\u6d3b\u5f53\u4e2d\u2026\u2026</p> <p>\u6211\u65f6\u5e38\u89c9\u5f97\u81ea\u5df1\u662f\u4e00\u4e2a\u5f88\u65e0\u611f\u7684\u4eba\uff08\u662f\u6307\u611f\u60c5\u4e0a\u6ca1\u6709\u592a\u5927\u7684\u6ce2\u52a8\uff0c\u4e0d\u6613\u60b2\u4f24\u4e5f\u4e0d\u6613\u559c\u60a6\uff09\uff0c\u53ef\u5f88\u591a\u65f6\u5019\u81ea\u5df1\u603b\u4f1a\u6709\u4e00\u809a\u5b50\u7684\u8bdd\u60f3\u8bf4\u3002\u6211\u4e00\u76f4\u5c06\u81ea\u5df1\u7684\u4eba\u751f\u7684\u91cd\u70b9\u653e\u5728\u611f\u53d7\u5916\u754c\u7684\u8fc7\u7a0b\uff0c\u4e5f\u4e0d\u559c\u8bb0\u5f55\u4e9b\u4ec0\u4e48\u3002\u4f46\u5750\u5728\u56de\u5bb6\u52a8\u8f66\u4e0a\u7684\u6211\uff0c\u4f9d\u65e7\u60f3\u5bf9\u8fc7\u53bb\u4e00\u5e74\u6709\u4e2a\u5927\u4f53\u7684\u56de\u987e\uff0c\u5e0c\u671b\u81ea\u5df1\u8001\u4e86\u4e4b\u540e\u8fd8\u80fd\u770b\u7740\u8fd9\u4e9b\u6587\u5b57\u56de\u60f3\u8d77\u6765\u3002</p> <p>\u6211\u4e00\u76f4\u7ed9\u81ea\u5df1\u5927\u5b66\u751f\u6d3b\u7684\u76ee\u6807\u5c31\u662f\u2014\u2014\u4e60\u60ef\u72ec\u7acb\u7684\u751f\u6d3b\uff0c\u627e\u5230\u81ea\u5df1\u4e4b\u540e\u4eba\u751f\u7684\u65b9\u5411\uff0c\u6700\u597d\u80fd\u591f\u4e58\u7740\u8fd9\u4e2a\u201c\u5598\u606f\u4e4b\u9645\u201d\u80fd\u591f\u5feb\u4e50\u7684\u4eab\u53d7\u751f\u6d3b\u3002\u63a5\u4e0b\u6765\u6211\u4e5f\u4f1a\u5927\u81f4\u56f4\u7ed5\u8fd9\u51e0\u4e2a\u65b9\u5411\u8bb0\u5f55\u4e00\u4e0b\u3002</p>"},{"location":"spark%20in%20life/college%20life/freshman/#_2","title":"\u5173\u4e8e\u5b66\u4e60","text":"<p>\u5b66\u4e60\u662f\u4e2a\u907f\u4e0d\u5f00\u7684\u8bdd\u9898\uff0c\u90a3\u5c31\u5148\u6765\u8bf4\u8bf4\u5b83\u5427\u3002</p>"},{"location":"spark%20in%20life/college%20life/freshman/#_3","title":"\u8eab\u8fb9\u7684\u4eba","text":"<p>\u9996\u5148\uff0c\u6211\u8bda\u631a\u5730\u5728\u6b64\u611f\u8c22\u4e09\u4f4d\u5b66\u957f\uff0c\u4ed6\u4eec\u53ef\u4ee5\u8bf4\u5bf9\u6211\u7684\u4eba\u751f\u8d77\u5230\u4e86\u65b9\u5411\u7684\u6307\u5f15\u3002zhongyinmin\uff08csdiy\u7684\u521b\u4f5c\u8005\uff09\uff0c\u4e00\u4e2a\u6211\u7d20\u672a\u8c0b\u9762\u4f46\u662f\u8ba9\u6211\u771f\u771f\u5207\u5207\u770b\u5230cs\u4e30\u5bcc\u7684\u4e16\u754c\uff0c\u5728\u5f53\u4e0bzju\u4e00\u8a00\u96be\u5c3d\u7684\u6559\u80b2\u4e2d\uff0c\u6211\u6bc5\u7136\u51b3\u7136\u7684\u8e0f\u4e0a\u4e86\u81ea\u5b66\u4e4b\u8def\uff1b\u738b\u5f00\u70ab\u5b66\u957f\uff0c\u5176\u5b9e\u6211\u548c\u4ed6\u7684\u4ea4\u9645\u7b97\u4e0d\u4e0a\u90a3\u4e48\u7684\u591a\uff0c\u4f46\u4ed6\u662f\u6211\u771f\u6b63\u6765\u5230\u6d59\u5927\u6df1\u53d7\u611f\u52a8\u7684\u4eba\u2014\u2014\u6df1\u8c19\u5728zju\u7684\u751f\u5b58\u4e4b\u9053\uff0c\u4ee5\u53ca\u65e0\u79c1\u7684\u201c\u5f00\u6e90\u201d\uff1f\u7cbe\u795e\uff0c\u4ed6\u81ea\u8eab\u975e\u5e38\u7684\u4f18\u79c0\uff0c\u65e0\u8bba\u5b66\u4e60\u8fd8\u662f\u8bfe\u4e1a\uff0c\u4f46\u4ed6\u603b\u80fd\u5728\u5fd9\u788c\u7684\u65f6\u5019\u4e3a\u6211\u4eec\u8010\u5fc3\u7684\u7b54\u7591\u89e3\u60d1\uff0c\u8ba9\u6211\u987a\u987a\u5229\u5229\uff08\u751a\u81f3\u8bf4\u6bd4\u8f83\u8f7b\u677e\uff09\u5ea6\u8fc7\u4e86\u81ea\u5df1\u7684\u5927\u4e00\u751f\u6d3b\uff0c\u53ef\u4ee5\u8bf4\u6ca1\u6709\u4ed6\u6211\u7684\u5927\u4e00\u6216\u8bb8\u8fc7\u7684\u4f1a\u66f4\u52a0\u5e73\u5eb8\u4e14\u8ff7\u832b\u5427\uff0c\u611f\u8c22\u8fd9\u4efd\u76f8\u9047\uff01\uff08\u5f53\u7136\u6211\u77e5\u9053\u8fd9\u4efd\u611f\u8c22\u662f\u7528\u8bed\u8a00\u65e0\u6cd5\u5b8c\u5168\u8868\u8fbe\u7684\uff0c\u6211\u4e5f\u5c3d\u529b\u5c06\u4ed6\u7684\u8fd9\u4efd\u77e5\u8bc6\u4e0e\u667a\u6167\u4f20\u627f\u4e0b\u53bb\uff09\uff1b\u6700\u540e\u4e00\u4f4d\u4fbf\u662f\u6211\u7684\u76f4\u7cfb\u5b66\u957f\u5434\u660a\u6cfd\u3002\u6211\u4eec\u5927\u4f53\u4e00\u5171\u5c31\u89c1\u8fc7\u4e09\u9762\u3002\u4ed6\u5f88\u4f18\u79c0\uff0c\u90a3\u79cd\u4f18\u79c0\u662f\u4e00\u79cd\u600e\u4e48\u8bf4\uff0c\u4eba\u751f\u89c4\u5212\u7684\u6e05\u6670\u4e0e\u6de1\u7136\u7684\u5fc3\u5883\u4e0e\u975e\u5e38\u9ad8\u7684\u773c\u754c\u3002\u6211\u548c\u4ed6\u7684\u6bcf\u6b21\u89c1\u9762\u90fd\u80fd\u6df1\u53d7\u542f\u53d1\uff0c\u8ba9\u6211\u6e05\u9664\u8fd9\u4e2a\u9636\u6bb5\u5e94\u8be5\u505a\u4ec0\u4e48\u3002\u6211\u5f88\u96be\u60f3\u8c61\u4e00\u4e2a\u5e73\u65f6\u4e0d\u6253\u793e\u4ea4\u7684\u4eba\u662f\u5982\u4f55\u505a\u5230\u5bf9\u81ea\u6211\u6709\u5982\u6b64\u6e05\u6670\u7684\u89c4\u5212\uff08\u53ef\u80fd\u6b63\u662f\u8fd9\u4e2a\u539f\u56e0\u5427\uff09</p> <p>\u5f53\u7136\u8fd8\u6709\u5f88\u591a\u5176\u4ed6\u4f18\u79c0\u5b66\u957f\u5bf9\u6211\u7684\u5e2e\u52a9\u2014\u2014pchgg\uff0c\u74dc\u74dc\uff0cwyy\u2026\u2026\u53ef\u80fdzju\u7684\u6559\u80b2\u8d28\u91cf\u5e76\u6ca1\u6709\u5927\u5bb6\u521a\u6765\u7684\u65f6\u5019\u60f3\u7684\u90a3\u4e48\u9ad8\uff0c\u4f46\u5468\u56f4\u8fd9\u7fa4\u76f8\u5f53\u4f18\u79c0\u7684\u4eba\uff0c\u4ee5\u53ca\u4ed6\u4eec\u613f\u610f\u5206\u4eab\u4e00\u4e9b\u7ecf\u9a8c\u771f\u7684\u80fd\u8ba9\u4f60\u611f\u53d7\u5230\u8fd9\u4e2a\u5b66\u6821\u5e95\u8574\u4e0e\u5f3a\u5927\u3002</p> <p>\u6700\u540e\u6211\u60f3\u8bf4\u7684\u662f\uff0c\u6839\u636e\u6211\u7684\u89c2\u5bdf\uff0c\u4f60\u4f1a\u611f\u53d7\u5230\u8eab\u8fb9\u5927\u4f6c\u4eec\u7684\u5f3a\uff0c\u751a\u81f3\u662f\u8ddf\u4f60\u540c\u4e00\u5c4a\u7684\u5927\u4f6c\u3002\u4f46\u6211\u60f3\u8bf4\u7684\u662f\uff0c\u6211\u4eec\u9700\u8981\u5bf9\u8fd9\u4e2a\u5f3a\u6709\u4e2a\u6e05\u6670\u7684\u8ba4\u8bc6\uff0c\u522b\u4eba\u5982\u679c\u6bd4\u4f60\u5728\u67d0\u65b9\u9762\u4f18\u79c0\uff0c\u4e00\u5b9a\u662f\u4ed6\u5728\u8fd9\u4e2a\u65b9\u9762\u7684\u79ef\u7d2f\u6210\u672c\u6bd4\u4f60\u66f4\u591a\uff08\u4e0d\u6307\u65f6\u95f4\uff09\uff1b\u6b64\u5916\uff0c\u4f60\u89c2\u5bdf\u540e\u4f1a\u770b\u5230\uff0c\u5176\u5b9e\u5927\u4f6c\u4eec\u662f\u5728\u67d0\u4e2a\u65b9\u9762\u4ea6\u6216\u8005\u8bf4\u662f\u5177\u6709\u67d0\u4e2a\u7279\u8d28\u7684\u4f18\u79c0\u3002\u6765\u5230\u5927\u5b66\u540e\uff0c\u4f60\u4f1a\u53d1\u73b0\u4e00\u4e2a\u4eba\u80fd\u6709\u5f88\u591a\u6761\u8def\u8d70\uff0c\u4f60\u4e0d\u9700\u8981\u8ddf\u4efb\u4f55\u4eba\u6bd4\uff08\u5c24\u6307\u7ee9\u70b9\uff0c\u5982\u679c\u4f60\u5728ckc\uff0c\u8fd9\u4e2a\u4e1c\u897f\u591f\u7528\u5c31\u884c\uff0c\u9664\u975e\u4f60\u9700\u8981\u51fa\u56fd\uff09\uff0c\u4f60\u66f4\u9700\u8981\u627e\u5230\u81ea\u5df1\u7684\u8def\uff0c\u5728\u8fd9\u4e2a\u65b9\u9762\u80fd\u591f\u6210\u4e3a\u201c\u5927\u4f6c\u201d\uff0c\u5b83\u4f1a\u4ea7\u751f\u4e00\u79cd\u5e26\u52a8\u4f5c\u7528\u5728\u4f60\u7684\u5176\u4ed6\u65b9\u9762\u3002</p>"},{"location":"spark%20in%20life/college%20life/freshman/#_4","title":"\u5173\u4e8e\u81ea\u5df1","text":"<p>\u6765\u5230\u6d59\u5927\u7684\u540c\u5b66\u5176\u5b9e\u2026\u2026\u5f88\u591a\u90fd\u662f\u201c\u8003\u8d25\u6765\u6d59\u201d\u7684\u5427\uff0c\u4f46\u6211\u786e\u786e\u5b9e\u5b9e\u60f3\u8bf4\u7684\u662f\uff0c\u4f60\u8d8a\u662f\u80fd\u5feb\u901f\u653e\u5e73\u81ea\u5df1\u7684\u5fc3\u6001\u4f60\u8d8a\u80fd\u66f4\u5feb\u7684\u53d8\u4f18\u79c0\u3002\u8eab\u8fb9\u4f1a\u6709\u5f88\u591a\u5f88\u5f3a\u7684\u4eba\u503c\u5f97\u4f60\u53bb\u5b66\u4e60\u3002</p> <p>\u6b64\u5916\uff0c\u5927\u5bb6\u4f1a\u770b\u5230\u8eab\u8fb9\u4f1a\u6709\u5f88\u591a\u6446\u70c2\u7684\u4eba\uff0c\u4e5f\u4f1a\u6709\u4eba\u8bf4\u201c\u5f88\u5377\u5f88\u5377\u2026\u2026\u201d\u4e4b\u7c7b\u7684\u8bdd\uff0c\u6211\u5bf9\u6b64\u8fd8\u662f\u6709\u4e9b\u60f3\u6cd5\u7684\u3002\u6446\u70c2\u6211\u89c9\u5f97\u65e0\u53ef\u539a\u975e\uff0c\u5c24\u4e3a\u662f\u5728\u5f53\u4e0b\u751f\u5b58\u6210\u672c\u9010\u6e10\u53d8\u9ad8\uff08\u5c24\u6307\u623f\u4ef7\uff09\uff0c\u4ea6\u5982\u4e4b\u524d\u6240\u8c13\u7684\u9760\u5b66\u4e60\u6765\u6539\u53d8\u9636\u7ea7\u5df2\u7136\u4e0d\u90a3\u4e48\u663e\u793a\uff0c\u6446\u5728\u5927\u5bb6\u773c\u524d\u7684\u4eff\u4f5b\u662f\u4e00\u6761\u201c\u6709\u65e0\u6b62\u5883\uff0c\u4e0d\u505c\u52aa\u529b\u201d\u7684\u4e00\u6761\u8def\uff0c\u5982\u679c\u4f60\u7d2f\u4e86\uff0c\u5e76\u4e14\u80fd\u591f\u5b89\u5fc3\u7684\u4f11\u606f\uff0c\u90a3\u6211\u66f4\u5e0c\u671b\u5927\u5bb6\u80fd\u505c\u4e0b\u811a\u6b65\u8c03\u6574\u4e0b\u81ea\u5df1\uff1b\u4f46\u5bf9\u4e8e\u90a3\u4e9b\u201c\u6446\u53c8\u6446\u4e0d\u5e73\uff0c\u5377\u53c8\u5377\u4e0d\u8d62\u201d\u7684\u540c\u5b66\uff0c\u6211\u89c9\u5f97\u5bf9\u4e8e\u8fd9\u4e9b\u4eba\u66f4\u9700\u8981\u7684\u662f\u627e\u5230\u81ea\u5df1\u7684\u5b9a\u4f4d\u5427\uff08\u6211\u5c31\u662f\u8fd9\u7fa4\u4eba\u5f53\u4e2d\u7684\u4e00\u5458\uff09\uff1b\u4f46\u5bf9\u4e8e\u540e\u8005\uff0c\u8bf4\u201c\u5f88\u5377\u5f88\u5377\u2026\u2026\u201d\uff0c\u6211\u60f3\u8bb2\u4e2a\u6545\u4e8b\u3002\u5c31\u662f\u5728\u6211\u4eca\u5929\u56de\u5bb6\u7684\u51fa\u79df\u8f66\u4e0a\u53f8\u673a\u5e08\u5085\u5c31\u8bf4\u4ed6\u4eec\u597d\u5377\u597d\u5377\uff0c\u65e9\u4e0a\u8981\u4e94\u70b9\u949f\u8d77\u6765\u5237\u9884\u7ea6\u5355\u7684\u4e1a\u7ee9\uff0c\u53ef\u6211\u786e\u5b9e\u60f3\u8bf4\u7684\u662f\uff0c\u6211\u4eec\u9700\u8981\u6b63\u786e\u770b\u5f85\u201c\u5377\u548c\u6446\u70c2\u201d\uff08\u8fd9\u4e2a\u8fd1\u4e9b\u5e74\u51fa\u73b0\u7684\u8bcd\uff09\uff0c\u6211\u627f\u8ba4\u67d0\u4e9b\u65f6\u5019\u786e\u5b9e\u5b58\u5728\u6076\u6027\u7ade\u4e89\u7684\u73b0\u8c61\uff0c\u4f46\u4e0d\u8981\u628a\u6709\u4e9b\u4f60\u9700\u8981\u63d0\u5347\u81ea\u5df1\u7684\u52aa\u529b\u5f52\u7eb3\u5230\u201c\u5377\u201d\u4e00\u7c7b\u5f53\u4e2d\u53bb\u3002</p> <p>\u6211\u8bf4\u7684\u6709\u70b9\u5f2f\u5f2f\u7ed5\u4e86\uff0c\u4f46\u603b\u5f97\u6765\u8bf4\u8fd8\u662f\u5e0c\u671b\u5927\u5bb6\u6bcf\u4e2a\u4eba\u90fd\u80fd\u627e\u5230\u4e00\u4e2a\u5e73\u8861\u7684\u5fc3\u6001\uff0c\u8fd9\u6837\u4f60\u80fd\u8fc7\u7684\u771f\u7684\u8212\u5fc3\u4e0e\u5feb\u4e50\u3002</p>"},{"location":"spark%20in%20life/college%20life/freshman/#_5","title":"\u5173\u4e8e\u6df7\u5408","text":"<p>\u6df7\u5408\u73ed\uff0c\u600e\u4e48\u8bf4\u5462\u2026\u2026\u786e\u5b9e\u5927\u591a\u6570\u4eba\u4f1a\u9009\u62e9cs\uff0c\u4e0d\u6e05\u695a23\u5c4a\u7684\u540c\u5b66\u4f1a\u600e\u4e48\u60c5\u51b5\uff08\u636e\u8bf4\u6709\u6539\u9769\uff09</p> <p>\u5176\u5b9e\u4ece\u7ee9\u70b9\u6765\u770b\u6211\u7684\u6210\u7ee9\u8bf4\u4e0d\u4e0a\u4f18\u79c0\uff0c\u53ea\u80fd\u7b97\u9a6c\u9a6c\u864e\u864e\u5427\u3002\u4f46\u786e\u5b9e\u6709\u4e9b\u5403\u4e8f\u7684\u7ecf\u9a8c\u60f3\u8981\u5728\u8fd9\u91cc\u8bf4\u8bf4\u3002</p> <p>\u5148\u8c08\u9009\u8bfe\uff01\u4eba\u4eec\u5e38\u8bf4\u201c\u9009\u62e9\u5927\u4e8e\u52aa\u529b\u201d\uff0c\u5927\u5bb6\u4f1a\u5728\u9009\u8bfe\u4e0a\u5c24\u4e3a\u6e05\u6670\u7684\u770b\u5230\u3002\u6211\u8eab\u8fb9\u6709\u4f4d\u540c\u5b66\uff0c\u771f\u7684\u76f8\u5f53\u4f1a\u9009\u8bfe\uff08\u6307\u9009\u8001\u5e08\uff09\uff0c\u5979\u80fd\u505a\u5230\u671f\u672b\u52aa\u529b\u51e0\u5929\u7ee9\u70b9\u80fd\u591f\u4e0a4\uff08\u6307\u6bcf\u4e00\u95e8\uff01\uff01\uff01\uff09\u8eab\u5728\u8003\u6838\u6559\u80b2\u7684\u73af\u5883\u4e0b\uff0c\u867d\u7136\u6211\u89c9\u5f97\u5b66\u4e60\u662f\u63d0\u5347\u81ea\u5df1\u7684\u8fc7\u7a0b\uff0c\u4f46\u771f\u7684\u6709\u4e9b\u65f6\u5019\u529f\u5229\u70b9\u80fd\u591f\u8ba9\u4f60\u51cf\u8f7b\u5f88\u591a\u52aa\u529b\u3002\u5f53\u7136\u5f88\u591a\u540c\u5b66\u53ef\u80fd\u5bb3\u6015\u9000\u4e86\u8bfe\u9009\u4e0d\u4e0a\u600e\u4e48\u529e\uff1f\u6211\u7684\u8bc4\u4ef7\u8fd8\u662f\u4e0d\u8981\u592a\u62c5\u5fc3\uff0c\u4f60\u80af\u5b9a\u4f1a\u6709\u8bfe\u4e0a\uff0c\u4f46\u4f60\u53ef\u4ee5\u91cd\u6392\u81ea\u5df1\u7684\u8bfe\u8868\uff0c\u9009\u62e9\u4e00\u4e2a\u76f8\u5bf9\u5bb9\u6613\u62ff\u9ad8\u5206\u7684\u8001\u5e08\uff0c\u4ed6\u771f\u7684\u4f1a\u8ba9\u4f60\u8f7b\u677e\u5f88\u591a\u3002\uff08\u6709\u4e9b\u95e8\u9053\u5c31\u4e0d\u5728\u8fd9\u91cc\u8bf4\u4e86\uff09</p> <p>\u6b64\u5916\u8c08\u6210\u7ee9\u7684\u8bdd\uff0c\u9996\u5148\u60f3\u8bf4\u7684\u662f\uff0c\u6210\u7ee9\u5176\u5b9e\u591f\u7528\u5c31\u884c\uff0c\u6ca1\u5fc5\u8981\u6709\u592a\u5927\u538b\u529b\uff08\u5f53\u7136\u80fd\u5c3d\u91cf\u9ad8\u5f53\u7136\u66f4\u597d\u554a\uff09\u6b64\u5916\u6309\u7167\u6211\u5bf9\u81ea\u5df1\u8eab\u8fb9\u4e00\u4e2a\u57fa\u672c\u95e8\u95e8\u4e3b\u4fee\u79d1\u76ee\u6ee1\u7ee9\u7684\u540c\u5b66\u89c2\u5bdf\uff0c\u5176\u5b9e\u73b0\u5728\u7afa\u9662\u7684\u8bfe\u7a0b\u6ca1\u6709\u90a3\u4e48\u96be\uff0c\u5982\u679c\u4f60\u7b97\u6bd4\u8f83\u7075\u5149\u7684\u540c\u5b66\uff0c\u4f60\u80fd\u591f\u505a\u5230\u4e0a\u8bfe\u6309\u65f6\u542c\u8bb2\uff08\u4e5f\u4e0d\u4e00\u5b9a\uff0c\u81ea\u5b66\u4e5f\u53ef\u4ee5\uff0c\u4f46\u6ce8\u610f\u8981\u8ddf\u4e0a\u8fdb\u5ea6\uff09\uff0c\u8bfe\u540e\u5b8c\u6210\u4f5c\u4e1a\uff08\u771f\u7684\u76f8\u5f53\u91cd\u8981\uff01\uff01\uff01\uff09\uff0c\u8003\u524d\u5bf9\u77e5\u8bc6\u70b9\u8fdb\u884c\u4e00\u4e2a\u603b\u7ed3\u68b3\u7406\uff0c\u4f60\u5c31\u53ef\u4ee5\u62ff\u5230\u5f88\u597d\u7684\u6210\u7ee9\u4e86\u3002</p> <p>\u6b64\u5916\u5c31\u662f\uff0c\u5927\u4e00\u4e0a\u7684\u6210\u7ee9\u771f\u7684\u6709\u4e9b\u65f6\u5019\u4f5c\u7528\u5f88\u5927\u554a\u554a\u554a\u554a\u554a\u554a\u554a\u554a\uff01\u6dd1\u82ac\u8003\u8bd5\u771f\u7684\u5c31\u662f\u770b\u4f60\u671f\u672b\uff0c\u6240\u4ee5\u4e4b\u540e\u7684\u540c\u5b66\u4e00\u5b9a\u4e00\u5b9a\u8981\u597d\u597d\u8003\u3002\u5c31\u662f\u5927\u4e00\u4e0a\u5176\u5b9e\u60f3\u6709\u4e2a\u5f88\u9ad8\u7684\u7ee9\u70b9\u8fd8\u662f\u76f8\u5bf9\u6bd4\u8f83\u8f7b\u677e\u7684\uff0c\u4f46\u5927\u4e00\u4e0b\u5c31\u4e0d\u90a3\u4e48\u5bb9\u6613\u4e86\u3002\u5230\u5927\u4e8c\u4e13\u4e1a\u8bfe\uff08\u6307cs\uff09\u65b9\u5dee\u53c8\u6ca1\u90a3\u4e48\u5927\u3002\u6240\u4ee5\u5927\u4e00\u7684\u65f6\u5019\u8fd8\u662f\u8981\u597d\u597d\u52aa\u529b\u7684\u3002</p> <p>\u907f\u96f7\u7684\u4e00\u70b9\u5c31\u662f\u7ebf\u6027\u4ee3\u6570\uff0c\u53d7\u8fc73b1b\u548c18.06\u7684\u6d17\u793c\uff0c\u6211\u89c9\u5f97\u81ea\u5df1\u5df2\u7ecf\u4e86\u7136\u638c\u63e1\u4e86\u201c\u7ebf\u6027\u4ee3\u6570\u7684\u672c\u8d28\u201d\uff08\u7b11\u6b7b\uff09\uff1b\u4f46\u4ece\u6210\u7ee9\u6765\u770b\uff08\u7a33\u5b9a\u768478\u5206\uff09\uff0c\u771f\u7684\u5bf9\u4e8e\u8fd9\u95e8\u79d1\u76ee\u7684\u5b66\u4e60\uff0c\u5927\u5bb6\u4e00\u5b9a\u4e00\u5b9a\u662f\u8981\u591a\u7ec3\u4e60\u9898\u76ee\u7684\u3002\u5b66\u4f1a\u7528\u8001\u5e08\u80fd\u770b\u61c2\u7684\u8bed\u8a00\u8868\u8fbe\u51fa\u6765\u662f\u5341\u5206\u91cd\u8981\u7684\u3002</p> <p>\u6211\u5f88\u611f\u8c22\u8fd9\u4e9b\u5927\u4e00\u6559\u6211\u8bfe\u7a0b\u7684\u8001\u5e08\uff0c\u793e\u4f1a\u5b66\u5165\u95e8\u7684lq\u8001\u5e08\uff08\u4e00\u4e2a\u6211\u5927\u5b66\u552f\u4e00\u975e\u5e38\u6709\u6536\u83b7\u7684\u8bfe\u7a0b\uff09\uff0c\u4ee5\u53ca\u7fc1\u607a\u8001\u5e08\u751f\u52a8\u7684\u8bfe\u5802\u2026\u2026\u2026\u2026\uff08\u4f46\u76f8\u5f53\u591a\u7684\u8bfe\u7a0b\u6211\u90fd\u6ca1\u600e\u4e48\u542c\u8fc7\u8bfe\uff0c\u6240\u4ee5\u6211\u4e5f\u5c31\u4e0d\u5efa\u8bae\u4ec0\u4e48\u4e86\uff09\u800c\u5173\u4e8e\u6df7\u5408\u73ed\u5f88\u591a\u8ba9\u4eba\u5410\u69fd\u7684\u8bfe\u7a0b\uff0c\u5bf9\u4e8e\u90a3\u4e9b\u6ca1\u6709\u5b66\u8fc7\u5316\u5b66\u7684\u540c\u5b66\u6211\u89c9\u5f97\u786e\u5b9e\u662f\u8270\u96be\u7684\uff0c\u4f46\u5176\u4ed6\u8bfe\u7a0b\u5176\u5b9e\u633a\u4e00\u633a\u71ac\u4e00\u71ac\u5c31\u8fc7\u6765\u4e86\u3002\u6df7\u5408\u6709\u6df7\u5408\u7684\u597d\uff0c\u9662\u5916\u6709\u9662\u5916\u7684\u597d\uff0c\u8fd9\u4e2a\u5927\u5bb6\u81ea\u5df1\u8861\u91cf\u5229\u5f0a\uff0c\u5982\u679c\u51b3\u5b9a\u9000\u9662\u8fd8\u662f\u5c3d\u65e9\u9000\u3002</p>"},{"location":"spark%20in%20life/college%20life/freshman/#_6","title":"\u5173\u4e8e\u751f\u6d3b","text":"<p>\u5bf9\u4e8e\u751f\u6d3b\u800c\u8a00\uff0c\u6211\u81ea\u5df1\u662f\u4e00\u4e2a\u5c24\u4e3a\u6ce8\u91cd\u751f\u6d3b\u54c1\u8d28\u7684\u4eba\uff0c\u89c9\u5f97\u5feb\u4e50\u662f\u73b0\u5728\u975e\u5e38\u91cd\u8981\u7684\u4e8b\u60c5\u3002\u8fd9\u6837\u4f7f\u6211\u5e73\u65f6\u751f\u6d3b\u5c24\u4e3a\u201c\u4e30\u5bcc\u201d\u5427\uff0c\u53f0\u7403\u3001\u5531\u6b4c\u3001\u5065\u8eab\u2026\u2026\u4f46\u6709\u65f6\u53c8\u4f1a\u89c9\u5f97\u5927\u5b66\u751f\u6d3b\u9664\u4e86\u8fd9\u4e9b\u597d\u50cf\u4e5f\u6ca1\u592a\u591a\u5feb\u4e50\u7684\u4e8b\u60c5\u53ef\u4ee5\u505a\uff08\u53ef\u4ee5\u7ed9\u6211\u5efa\u8bae\uff09\uff0c\u6240\u4ee5\u5bf9\u6e38\u620f\u4e5f\u662f\u70ed\u60c5\u4e00\u6bb5\u65f6\u95f4\u5c31\u53c8\u4e0d\u73a9\u4e86\u2026\u2026</p> <p>\u4eba\u9645\u4ea4\u5f80\u662f\u5927\u4e00\u7684\u4e00\u4e2a\u91cd\u8981\u7684\u90e8\u5206\u5427\uff0c\u4f46\u8fd8\u662f\u5e0c\u671b\u5927\u5bb6\u80fd\u6d3b\u51fa\u771f\u5b9e\u7684\u81ea\u5df1\uff0c\u7136\u540e\u4e0d\u4f46\u6539\u8fdb\u5e76\u5f52\u675f\u81ea\u5df1\u7684\u8a00\u884c\u3002\u80fd\u591f\u4eab\u53d7\u5feb\u4e50\u7684\u751f\u6d3b</p>"},{"location":"spark%20in%20life/college%20life/freshman/#_7","title":"\u793e\u56e2","text":"<p>\u793e\u56e2\u662f\u5927\u5bb6\u5927\u4e00\u9762\u4e34\u7684\u7b2c\u4e00\u9879\u5bf9\u5916\u793e\u4ea4\u7684\u6d3b\u52a8\u5427\u2026\u2026\u5f53\u65f6\u5e74\u5c11\u7684\u6211\u9762\u4e86\u4e24\u4e2a\u90e8\u95e8\uff08\u5b66\u7814\u548c\u89c6\u89c9\uff09\uff0c\u7136\u800c\u4e24\u4e2a\u90e8\u95e8\u90fd\u63d0\u524d\u8981\u4e86\u6211\uff0c\u540e\u6765\u7ecf\u8fc7\u4e00\u756a\u601d\u60f3\u6597\u4e89\u540e\uff0c\u8fd8\u662f\u51b3\u5b9a\u4e24\u4e2a\u90fd\u7559\u4e0b\u6765\u3002\u6211\u627f\u8ba4\u4f1a\u8ba4\u8bc6\u975e\u5e38\u591a\u7684\u4eba\uff0c\u4f46\u5ba2\u89c2\u800c\u8a00\u4f60\u7684\u5b66\u751f\u5de5\u4f5c\u8fd8\u662f\u6709\u4e9b\u7e41\u91cd\u7684\u3002\u4f46\u6211\u8fd8\u662f\u4e0d\u5f97\u4e0d\u5b89\u5229\u8fd9\u4e24\u4e2a\u90e8\u95e8\uff0c\u771f\u7684\u5e26\u7ed9\u4e86\u6211\u5f88\u591a\u522b\u6837\u7684\u6536\u83b7\u4e0e\u56de\u5fc6\u2026\u2026</p>"},{"location":"spark%20in%20life/college%20life/freshman/#_8","title":"\u5c0f\u56e2\u4f53","text":"<p>\u53d7\u5230\u75ab\u60c5\u539f\u56e0\u7684\u5f71\u54cd\uff0c\u8d77\u521d\u6211\u4eec\u516d\u4e2a\u4eba\u4ee5\u7ea6\u4e52\u4e53\u7403\u5efa\u8d77\u4e86\u8fd9\u4e2a\u7fa4\uff0c\u540e\u6765\u57fa\u672c\u4e0a\u6bcf\u5468\u90fd\u4f1a\u4e00\u8d77\u5403\u996d\u805a\u9910\uff0c\u75ab\u60c5\u7684\u65f6\u5019\u751a\u81f3\u7531\u4e8e\u7ebf\u4e0a\u4e0a\u8bfe\uff0c\u6211\u4eec\u51e0\u4e4e\u5929\u5929\u89c1\u9762\u3002\u6211\u5bf9\u6211\u4eec\u51e0\u4e2a\u4eba\u6709\u7740\u522b\u6837\u7684\u611f\u60c5\uff0c\u4e5f\u6709\u7740\u522b\u6837\u7684\u56de\u5fc6\uff0c\u4e5f\u6559\u4f1a\u4e86\u6211\u5f88\u591a\u4e1c\u897f\u3002\u6211\u4eec\u516d\u4e2a\u4eba\uff0c\u6211\u80fd\u6e05\u6670\u611f\u53d7\u5230\u6211\u4eec\u6bcf\u4e2a\u4eba\u7684\u601d\u60f3\u4e0e\u6027\u683c\u4ece\u6839\u672c\u4e0a\u800c\u8a00\u662f\u622a\u7136\u4e0d\u540c\u7684\u516d\u4e2a\u4eba\uff1b\u6b64\u5916\u4fbf\u662f\u6211\u4eec\u4e0d\u8981\u5bf9\u8fd9\u79cd\u5173\u7cfb\u5728\u601d\u60f3\u4e0a\u8fdb\u884c\u67d0\u79cd\u675f\u7f1a\uff08\u4e0d\u8981\u8ba4\u4e3a\u51e0\u4e2a\u4eba\u5728\u4e00\u8d77\u73a9\u4f60\u4eec\u7684\u5173\u7cfb\u5c31\u4e00\u5b9a\u5f88\u597d\uff09\u8fd9\u91cc\u4e0d\u662f\u8bf4\u6211\u4eec\u51e0\u4e2a\u4e0d\u597d\uff0c\u800c\u662f\u8bf4\u4e0d\u8981\u5728\u6700\u521d\u7684\u65f6\u5019\u8fdb\u884c\u8fd9\u79cd\u5b9a\u4e49\uff0c\u4ed6\u4f1a\u8ba9\u4f60\u89c9\u5f97\u4f60\u4eec\u5f88\u719f\uff0c\u771f\u6b63\u5173\u7cfb\u7684\u8f6c\u53d8\u8fd8\u662f\u9700\u8981\u5efa\u7acb\u5728\u67d0\u4e9b\u4e8b\u60c5\u7684\u53d1\u751f\u4e0e\u76f8\u4e92\u66f4\u6df1\u5165\u7684\u4e86\u89e3\u7684\u3002</p> <p>\u6211\u5f88\u6000\u5ff5\u6211\u4eec\u5728\u4e00\u8d77\u7684\u65f6\u5149\uff0c\u4e5f\u611f\u8c22\u6700\u521d\u7684\u9047\u89c1\u3002\u6bd5\u7adf\u4f60\u4eec\u4fbf\u51e0\u4e4e\u5145\u6ee1\u4e86\u6211\u7684\u5927\u4e00\u751f\u6d3b\u3002</p>"},{"location":"spark%20in%20life/college%20life/freshman/#cs","title":"\u5173\u4e8eCS","text":"<p>\u5927\u5bb6\u6765\u5230\u6d59\u5927\u4e86\u4e4b\u540e\u6211\u5e38\u5e38\u4f1a\u542c\u5230\u5bf9\u5927\u4e00\u6559\u592a\u5c11\u76f8\u5173\u4e13\u4e1a\u6027\u77e5\u8bc6\u3002\u6211\u627f\u8ba4C\u5c0f\u4e0eC\u5927\u6559\u7684\u4e1c\u897f\u662f\u6bd4\u8f83\u5c11\u7684\uff08\u867d\u7136\u4e0b\u5c4a\u5c31\u8bfe\u6539\u4e860\uff0c\u4f46\u5176\u5b9e\u6211\u4eec\u81ea\u5df1\u5728\u8bfe\u5916\u662f\u53ef\u4ee5\u6709\u5f88\u591a\u8d44\u6e90\u53bb\u5b66\u4e60\u7684\u3002\u6bd4\u5982csdiy.wiki\u3002\u6b64\u5916\u4fbf\u662f\u6211\u89c9\u5f97\u5927\u5bb6\u53ef\u4ee5\u9002\u5f53\u7684\u5728\u5927\u4e00\u79ef\u7d2f\u4e00\u4e9b\u5de5\u5177\u6027\u7684\u4e1c\u897f\uff0c\u6bd4\u5982missing semester\u3002\u4f46\u4e0d\u8981\u628a\u8fd9\u4e9b\u5de5\u5177\u770b\u7684\u592a\u91cd\uff0c\u5f88\u591a\u77e5\u8bc6\u9700\u8981\u4f60\u4f1a\u7684\u65f6\u5019\u4f60\u81ea\u7136\u5c31\u4f1a\u4e86\u3002</p> <p>\u9a6c\u4e0a\u5927\u4e8c\u4e86\uff0c\u6211\u4e5f\u6253\u7b97\u8d2d\u7f6e\u663e\u793a\u5668\u548c\u4e3b\u673a\uff0c\u5728\u5bbf\u820d\u6b63\u5f0f\u5f00\u59cb\u81ea\u5b66\u4e4b\u65c5\u4e86\uff08\u72d7\u5934\uff09\u3002\u6211\u4f1a\u5728\u6211\u7684\u7b14\u8bb0\u4e2d\u8bb0\u5f55\u81ea\u5b66\u8fc7\u7a0b\uff0c\u5f53\u7136\u4e5f\u66f4\u591a\u53bb\u63a2\u7d22\u5199\u56fd\u5916\u522b\u7684\u65b9\u5411\u7684\u8bfe\u7a0b\uff08\u5982 UCB CS294\u7b49\u7b49\uff09\u5e0c\u671b\u5927\u5bb6\u80fd\u591f\u7ed9\u6211\u4e9b\u76f8\u5173\u7684\u5efa\u8bae\u2026\u2026</p> <p>\uff08\u76ee\u524d\u51c6\u5907CSAPP\u3001CS106L\u3001 CS61B\u3001CS50-AI\uff09</p>"},{"location":"spark%20in%20life/college%20life/freshman/#_9","title":"\u4e00\u70b9\u70b9\u79d1\u7814","text":"<p>\u5173\u4e8e\u8fd9\u4e2a\u65b9\u9762\u6211\u81ea\u5df1\u4e86\u89e3\u4e86\u5f88\u591a\u65b9\u5411\uff0c\u73b0\u5728\u603b\u5f97\u6765\u8bf4\u81ea\u5df1\u662f\u5bf9MLSys\u8fd9\u4e2a\u65b9\u5411\u5f88\u611f\u5174\u8da3\uff0c\u5df2\u77e5\u738b\u5219\u53ef\u8001\u5e08\u5728\u505a\u8fd9\u4e2a\u65b9\u5411\u3002\uff08\u4e0d\u77e5\u9053\u5927\u5bb6\u8fd8\u6709\u6ca1\u6709\u4ec0\u4e48\u5efa\u8bae\u7684\u8001\u5e08\uff09\uff1b\u6b64\u5916\u4fbf\u662f\u6768\u6613\u8001\u5e08\u5728\u505a\u7684\u591a\u6a21\u6001\u5b66\u4e60\uff1b\u5982\u679c\u53ef\u4ee5\u7684\u8bdd\u80fd\u591f\u52a0\u5165\u5230ZJUSCT\uff08\u8d85\u7b97\u961f\uff09\u4e2d\u53bb\u8fdb\u884c\u66f4\u8fdb\u4e00\u6b65\u7684\u5b66\u4e60\u3002</p>"},{"location":"spark%20in%20life/college%20life/freshman/#_10","title":"\u7ed3\u8bed","text":"<p>\u4e00\u8def\u4e0a\u5199\u5199\u505c\u505c\uff0c\u4e0d\u77e5\u4e0d\u89c9\u5c31\u5230\u7ad9\u4e86\u3002\u6211\u60f3\u8bf4\uff0c\u4eba\u751f\u5c31\u4eff\u4f5b\u8fd9\u8f86\u56de\u5bb6\u7684\u52a8\u8f66\u4e00\u6837\uff0c\u77e5\u9053\u8d77\u70b9\u4e0e\u7ec8\u70b9\uff0c\u4f46\u66f4\u91cd\u8981\u7684\u662f\u611f\u53d7\u6cbf\u9014\u7684\u7cbe\u5f69\uff1b\u4eba\u751f\u53c8\u597d\u50cf\u4e00\u573a\u6ca1\u6709\u5f69\u6392\u7684\u8868\u6f14\uff0c\u6bcf\u65f6\u6bcf\u523b\u90fd\u662f\u73b0\u573a\u76f4\u64ad\u3002\u6211\u7684\u5927\u4e00\u4e5f\u63a5\u8fd1\u5c3e\u58f0\u4e86\uff0c\u8fd9\u4e2a\u6691\u5047\u60f3\u591a\u56de\u53bb\u597d\u597d\u966a\u966a\u7236\u6bcd\u3002\u6211\u4e5f\u5bf9\u81ea\u5df1\u7684\u5927\u4e00\u505a\u4e86\u4e00\u4e2a\u7b80\u5355\u7684\u603b\u7ed3\uff0c\u5e0c\u671b\u6211\u4eec\u6bcf\u4e2a\u4eba\u90fd\u80fd\u6d3b\u51fa\u81ea\u5df1\u7cbe\u5f69\u7684\u4eba\u751f\uff01</p>"},{"location":"spark%20in%20life/college%20life/sophomore/","title":"\u516b\u6708\u7684\u4e00\u4e9b\u788e\u788e\u5ff5","text":"<p>\u4e00\u573a\u79cb\u96e8\uff0c\u8ba9\u6211\u7a81\u7136\u95f4\u610f\u8bc6\u5230\u4fe8\u7136\u5df2\u662f\u79cb\u5929\uff0c\u604d\u60da\u95f4\u5185\u5fc3\u7684\u5e73\u9759\u3002\u4e0d\u4f3c\u8fc7\u5f80\uff0c\u76f8\u89c1\u6216\u662f\u79bb\u522b\u65f6\u60c5\u7eea\u6700\u662f\u6d53\u7a20\uff1b\u53ef\u5728\u8fd9\u573a\u79cb\u96e8\u4e4b\u540e\uff0c\u6211\u5374\u60f3\u518d\u8bf4\u4e9b\u4ec0\u4e48\uff0c\u5199\u4e9b\u4ec0\u4e48\uff0c\u8c28\u6b64\u7eaa\u5ff5\u6211\u5927\u4e8c\u7684\u65f6\u5149\u3002</p>"},{"location":"spark%20in%20life/college%20life/sophomore/#_2","title":"\u79cb\u96e8","text":"<p>\u60f3\u5148\u5b95\u5f00\u7b14\u53bb\u5199\u5199\u79cb\u96e8\uff0c\u5374\u53d1\u73b0\u601d\u5982\u67af\u4e95\uff1b\u4eca\u5e74\u56de\u5bb6\u540e\u6211\u53c8\u53d1\u73b0\u4e86\u89d2\u843d\u4e2d\u7684\u79cb\u96e8\u5148\u751f\u5199\u7684\u4e66\uff0c\u53ea\u8bb0\u5f97\u521d\u4e2d\u65f6\u9177\u7231\u8bfb\u4ed6\u5199\u7684\u6587\u5b57\uff1b\u4f46\u53ef\u60dc\u5f53\u65f6\u7684\u6211\u53ea\u987e\u5f97\u4e0a\u8bb0\u5f55\u4e9b\u9a88\u4fea\u3001\u865a\u5f25\u7684\u8bed\u53e5\uff0c\u5374\u4e0d\u66fe\u771f\u6b63\u4f53\u4f1a\u4ed6\u6587\u5b57\u4e2d\u7684\u610f\u5883\u3002</p> <p>\u6211\u91cd\u65b0\u6253\u5f00\u4e86\u300a\u4e2d\u56fd\u6587\u8109\u300b\uff0c\u611f\u53d7\u5230\u4e0e\u6211\u800c\u8a00\u6d41\u9038\u8bb8\u4e45\u7684\u6587\u5b57\uff1b\u8857\u79cb\u96e8\u5148\u751f\u7684\u773c\u775b\u518d\u770b\u6587\u8109\u2026\u2026\u604d\u60da\u95f4\u53c8\u60f3\u5230\u4e16\u4eba\u5bf9\u4ed6\u8912\u8d2c\u4e0d\u4e00\u7684\u8bc4\u4ef7\uff1b\u6211\u4e0d\u518d\u50cf\u5e7c\u65f6\u76f2\u76ee\u7684\u5d07\u62dc\uff0c\u53ef\u91cd\u65b0\u5ba1\u89c6\u4ed6\u7684\u6587\u5b57\u4ee5\u53ca\u4ed6\u60f3\u8868\u8fbe\u7684\u4e1c\u897f\u540e\uff0c\u4e5f\u80fd\u6709\u4e9b\u6279\u5224\u7684\u601d\u8003\u3002\u4f46\u603b\u5f97\u6765\u8bf4\uff0c\u6211\u662f\u8ba4\u53ef\u4ed6\u7684\u6587\u5b57\u7684\uff0c\u4e0e\u5185\u5fc3\u4e2d\u67d0\u4e2a\u6e3a\u5c0f\u7684\u6211\u6709\u4e9b\u8bb8\u76f8\u901a\u5427</p> <p>\u4e66\u4e2d\u60f3\u5728\u8fd9\u91cc\u63d0\u5230\u7684\uff0c\u53ea\u6709\u201c\u5148\u79e6\u8bf8\u5b50\u201d\u8fd9\u4e00\u7247\u6bb5\u4e86\u3002\u4e0e\u4ed6\u5728\u5bf9\u8bf8\u5b50\u767e\u5bb6\u7684\u8bc4\u8bae\u76f8\u53cd\uff1b\u6211\u60f3\u8bf4\u5176\u5b9e\u8fd9\u4e00\u65f6\u4ee3\u7684\u4eba\u4eec\uff0c\u662f\u5c06\u4eba\u7c7b\u4e0d\u540c\u601d\u60f3\u5927\u81f4\u5f52\u7c7b\u7684\u5199\u7167\uff1b\u4e16\u754c\u5c31\u662f\u4e00\u4e2a\u5de8\u5927\u7684\u821e\u53f0\uff0c\u603b\u6709\u7740\u5f62\u5f62\u8272\u8272\u7684\u6211\u4eec\uff1b\u6211\u4eec\u4e00\u8d77\u8c31\u5199\u7740\u6545\u4e8b\uff0c\u7f3a\u4e00\u4e2a\u4eba\uff0c\u4e16\u754c\u7ee7\u7eed\u8fd0\u8f6c\uff1b\u53ef\u8fd9\u4e2a\u96c6\u56e2\u4e0d\u80fd\u7f3a\u5931\u4efb\u4f55\u4e00\u7fa4\u4eba\u2026\u2026\u8fd9\u5f88\u7f8e\u5999\u8bb2\u771f</p>"},{"location":"spark%20in%20life/college%20life/sophomore/#_3","title":"\u6211\u3001\u4f60\u548c\u4ed6\u4eec","text":"<p>\u5982\u679c\u8bf4\u5927\u4e00\u662f\u5bf9\u793e\u4f1a\u7684\u63a2\u7d22\uff0c\u90a3\u6211\u89c9\u5f97\u81ea\u5df1\u7684\u5927\u4e8c\u771f\u7684\u8fd8\u86ee\u4e30\u5bcc\u7684\u3002\u4e0a\u534a\u5e74\u6df1\u523b\u4f53\u4f1a\u4e86\u201c\u4eba\u4e16\u95f4\u7684\u5947\u5999\u201d\uff08\u8fd9\u662f\u4e00\u4e2a\u5f88\u602a\u7684\u5f62\u5bb9\uff0c\u4f46\u4e00\u8a00\u4ee5\u853d\u4e4b\u5c31\u59d1\u4e14\u5141\u8bb8\u6211\u8fd9\u6837\u5199\u5427\uff09\uff1b\u4e0b\u534a\u5e74\u5219\u662f\u5bf9\u672a\u6765\u7684\u4e00\u4e9b\u63a2\u7d22\u3002</p> <p>\u7ec6\u7ec6\u60f3\u6765\uff0c\u5176\u5b9e\u8fd9\u4e00\u5e74\u5065\u8eab\u7684\u8fdb\u6b65\u662f\u957f\u8db3\u7684\uff08\u867d\u7136\u8fd9\u534a\u5e74\u803d\u6401\u5f88\u591a\u4e86\u54c8\u54c8\u54c8\u54c8\uff09\uff1b\u6211\u5e94\u5f53\u662f\u5f7b\u5e95\u7231\u4e0a\u4e86\u65af\u8bfa\u514b\uff08\u663e\u5f97\u5355\u8c03\u7684\u662f\uff0c\u9664\u4e86\u5b83\u6211\u4eff\u4f5b\u6ca1\u4ec0\u4e48\u7231\u597d\u4e86\u5176\u5b9e\uff09\uff1b\u4ee5\u53ca\u4e5f\u7b97\u662f\u521d\u7aa5\u4e86\u4e00\u4e9b\u79d1\u7814\u7684\u95e8\u5f84\u5427\uff08\u9a6c\u9a6c\u864e\u864e\u53ea\u80fd\u8bf4\uff09</p> <p>\u4e0a\u534a\u5e74\u6211\u8ba4\u8bc6\u4e86\u5f88\u591a\u4eba\uff1b\u4e24\u4e2a\u4f4e\u4e00\u7ea7\u7684\u5b66\u5f1f\uff08\u59d1\u4e14\u8fd9\u4e48\u79f0\u547c\u5427hhh\uff09\uff0c\u4e00\u4e2a\u662f\u53f0\u7403\u7684\u631a\u53cb\uff1b\u53e6\u4e00\u4e2a\u662f\u4e00\u4e2a\u975e\u5e38\u6709\u8da3\u7684\u4eba\uff08\u54c8\u54c8\u54c8\u54c8\u6709\u70b9\u5fae\u5999\u4e0d\u77e5\u9053\u600e\u4e48\u5f62\u5bb9\u5c31\u8fd9\u6837\u5427\uff09\u6211\u60f3\u6211\u548c\u4ed6\u4eec\u80fd\u8d70\u4e0b\u53bb\u5f88\u4e45\u5f88\u4e45\u5427</p> <p>\u4e0b\u534a\u5e74\u53ef\u80fd\u5c31\u96c6\u4e2d\u4e8e\u5b9e\u9a8c\u5ba4\u7684\u5e08\u5144\u5e08\u59d0\u4eec\u4e86\uff0c\u4ee5\u53ca\u5bf9\u6211\u5e2e\u52a9\u4e0e\u5f71\u54cd\u9887\u5927\u7684\u9648\u8001\u5e08\uff08\u5168\u77e5\u5168\u80fd\u7684\u660a\u54e5\ud83d\ude2d\uff09\uff1b\u771f\u7684\u975e\u5e38\u975e\u5e38\u611f\u8c22\u4f60\u4eec\u65e0\u79c1\u7684\u5e2e\u52a9\u4ee5\u53ca\u4ea4\u6d41\uff1b\u8ba9\u6211\u5145\u5206\u5bf9\u672a\u6765\u7684\u8bb8\u591a\u4e8b\u60c5\u6709\u4e86\u4e86\u89e3</p> <p>\u5f53\u7136\u6211\u8fd8\u60f3\u5728\u8fd9\u91cc\u63d0\u7684\u662f\u5927\u5b66\u521d\u65f6\u4fbf\u8ba4\u8bc6\u7684\u516d\u4e2a\u597d\u670b\u53cb\uff1b\u6211\u4eec\u4e00\u8d77\u966a\u4f34\u73a9\u800d\u4e86\u4e24\u5e74\u65f6\u5149\uff0c\u73b0\u5728\u5927\u5bb6\u4e5f\u5c06\u4f1a\u5728\u4e0b\u4e00\u5e74\u5954\u8d74\u5404\u81ea\u7684\u524d\u8def\u4e86\uff1b\u611f\u8c22\u4f60\u4eec\u7684\u5305\u5bb9\u4e0e\u966a\u4f34\uff0c\u5e0c\u671b\u6211\u4eec\u90fd\u80fd\u5728\u672a\u6765\u7684\u65e5\u5b50\u91cc\u8fc7\u5f97\u66f4\u597d\u554a\uff08\u4e00\u5b9a\u8981\u5c3d\u53ef\u80fd\u591a\u7684\u805a\u8bf6\uff01\uff09\ud83c\udf89</p>"},{"location":"spark%20in%20life/college%20life/sophomore/#_4","title":"\u6700\u8fd1\u7684\u4e00\u4e9b\u5927\u5c0f\u4e8b","text":"<p>\u4e0d\u77e5\u9053\u5927\u5bb6\u6700\u8fd1\u6709\u770b\u674e\u6c90\u561b\uff1b\u5728\u79d1\u7814\u4e4b\u5904\u4ed6\u7684paper reading\u771f\u7684\u6709\u5e2e\u52a9\u5230\u6211\u5f88\u591a\u3002 \u53ef\u8ba9\u6211\u771f\u6b63\u6ca1\u60f3\u5230\u7684\u4e8b\u662f\u2026\u2026\u4ed6\u5728\u4e92\u8054\u7f51\u6d88\u5931\u7684\u8fd9\u4e00\u5e74\u4ed6\u7adf\u7136\u53bb\u521b\u4e1a\u4e86\uff08\u4ed6\u7684\u6587\u5b57\u771f\u7684\u6709\u5f88\u591a\u5171\u9e23\uff09\uff1b\u8bfb\u5b8c\u4ed6\u6700\u8fd1\u7684\u54ea\u7247\u535a\u5ba2\u5206\u4eab\u6211\u771f\u7684\u611f\u89e6\u826f\u591a\uff0c\u6216\u8bb8\u6211\u7ec8\u7a76\u4f1a\u8d70\u548c\u4ed6\u76f8\u4f3c\u7684\u4e00\u6761\u8def\uff1b\u751a\u81f3\u5728\u90a3\u665a\u7247\u523b\u6fc0\u52a8\u95f4\u6211\u90fd\u60f3\u7ed9\u4ed6\u5199\u90ae\u4ef6\u662f\u5426\u80fd\u53bb\u5b9e\u4e60\uff1f\uff08\u6709\u70b9\u5f02\u60f3\u5929\u5f00\u5c5e\u4e8e\u662f\uff0c\u540e\u6765\u610f\u8bc6\u5230\u81ea\u5df1\u592a\u83dc\u4e86\u9042\u653e\u5f03\uff09 \u6211\u5e0c\u671b\u8fd9\u4e00\u5929\u80fd\u65e9\u4e00\u70b9\uff08\u671f\u5f85\uff09\u53c8\u6216\u662f\u80fd\u665a\u4e00\u70b9\u5230\u6765\uff08\u80fd\u7ed9\u6211\u66f4\u591a\u65f6\u95f4\u51c6\u5907\uff09\uff0c\u5f53\u7136\u6211\u77e5\u9053\u65f6\u95f4\u4e0d\u7b49\u4eba\uff1b\u5e0c\u671b\u81ea\u5df1\u5728\u4e4b\u540e\u4e00\u5e74\u91cc\u80fd\u6709\u4e9b\u8bb8\u7a81\u7834\u5427\u3002</p> <p>\u53ef\u60b2\u7684\u662f\u6211\u56e0\u4e3a\u81ea\u5df1\u5927\u4e00\u5927\u4e8c\u592a\u8d2a\u73a9\u4e86\u4e9b\uff0c\u53ef\u80fd\u4e0b\u4e2a\u5b66\u671f\u5f97\u62fc\u547d\u597d\u597d\u5b66\u4e60\u4e86\ud83d\ude2d \u4e16\u95f4\u6700\u96be\u5f97\u507f\u6240\u613f\uff0c\u4f46\u6211\u5c3d\u529b\u4e3a\u4e4b\u5427\u53ea\u80fd\u8bf4</p> <p>\u5f53\u7136\u8fd8\u6709\u4e00\u4e2a\u5927\u4e8b\uff1f\uff08\u6211\u89c9\u5f97\u8fd8\u86ee\u9707\u60ca\u7684\uff09\u524dGoogle CEO \u65bd\u5bc6\u7279\u5728Stanford\u7684\u6f14\u8bb2\uff0c\u4e0d\u77e5\u9053\u600e\u4e48\u80fd\u6d41\u4f20\u51fa\u6765\uff0c\u53ef\u5f53\u770b\u5230\u8fd9\u6837\u7684\u5927\u4f6c\uff08\u5728\u4ed6\u7684\u8eab\u4efd\u89c6\u89d2\u4e0b\uff09\u8c08\u8bba\u7684AI\u4e0e\u653f\u6cbb\u7ecf\u6d4e\u7b49\u7b49\uff0c\u6211\u610f\u8bc6\u5230\u81ea\u5df1\u5bf9\u672a\u6765\u8981\u53d1\u751f\u7684\u6240\u505a\u7684\u51c6\u5907\u8fd8\u8fdc\u8fdc\u4e0d\u591f</p> <p>\u975e\u5e38\u771f\u5fc3\u63a8\u8350\u5927\u5bb6\u6bcf\u4e2a\u4eba\u80fd\u6709\u7a7a\u53bb\u770b\u770b</p>"},{"location":"spark%20in%20life/college%20life/sophomore/#_5","title":"\u7434\u745f","text":"<p>\u4eca\u5e74\u56de\u5bb6\u540e\u53d1\u73b0\uff0c\u7236\u6bcd\u7684\u5ff5\u53e8\u5728\u8fd9\u65b9\u9762\u7adf\u7136\u51fa\u5947\u7684\u591a\uff08hhhhh\uff09\uff1b\u6211\u59cb\u7ec8\u8ba4\u4e3a\u5c31\u50cf\u6211\u4e4b\u524d\u53d1\u8fc7\u7684\uff0c\u6211\u662f\u4e00\u4e2a\u5728\u611f\u60c5\u4e0a\u662f\u5426\u611a\u949d\u548c\u5e7c\u7a1a\u7684\u5c0f\u5b69\u3002\u5728\u4eca\u5e74\u53d1\u751f\u4e86\u5f88\u591a\u4e8b\u60c5\u6211\u60f3\u5199\u4e0b\u6765</p> <p>\u53bb\u5e74\u590f\u5929\u6211\u8ba4\u8bc6\u4e86\u4e00\u4f4d\u59d0\u59d0\uff0c\u5979\u662f\u4f4d\u5947\u5973\u5b50\uff0c\u662f\u6211\u6b64\u751f\u6700\u8981\u597d\u670b\u53cb\u7684\u524d\u5973\u53cb\uff08\u6709\u70b9\u5947\u602a\u54c8\uff09\u3002\u5979\u5f88\u4f18\u79c0\uff0c\u4e5f\u5bf9\u6211\u5f88\u597d\uff1b\u53ef\u6211\u8fd9\u4e2a\u4eba\u7d20\u6765\u6709\u4e2a\u6bdb\u75c5\u5c31\u662f\uff0c\u6240\u6709\u4eba\u51e0\u4e4e\u5728\u6211\u8ba4\u8bc6\u6700\u5f00\u59cb\u4fbf\u4f1a\u5b9a\u4e49\u597d\u5173\u7cfb\uff1b\u53ef\u662f\u4e8b\u60c5\u53d1\u751f\u7684\u6108\u6f14\u6108\u602a\uff0c\u8131\u79bb\u4e86\u638c\u63a7\uff0c\u5f53\u5979\u8de8\u5e74\u90a3\u5929\u4f1a\u5230\u676d\u5dde\u6765\u627e\u6211\u7684\u65f6\u5019\uff0c\u6211\u53d8\u610f\u8bc6\u5230\u522b\u79bb\u7684\u6700\u7ec8\u5bbf\u547d\u3002\u6211\u5f88\u611f\u8c22\u76f8\u8bc6\uff0c\u4f46\u96be\u514d\u6ca1\u6709\u544a\u522b\u7684\u7ed3\u5c40\u3002</p> <p>\u79cb\u5929\u7684\u65f6\u5019\u5728\u673a\u7f18\u5de7\u5408\uff08\u8bf4\u662f\u84c4\u8c0b\u5df2\u4e45\u4e5f\u597d\u5427\uff09\uff0c\u8ba4\u8bc6\u4e86\u4e00\u4f4d\u676d\u5dde\u7684\u5973\u751f\uff0c\u771f\u7684\u975e\u5e38\u975e\u5e38\u662f\u7406\u60f3\u4e2d\u6c5f\u5357\u5973\u5b50\u7684\u5f62\u8c61\uff1b\u6211\u627f\u8ba4\u81ea\u5df1\u96be\u9003\u8fd9\u79cd\u559c\u6b22\uff08\u751a\u81f3\u6709\u8fc7\u4e8e\u767d\u6708\u5149\u5bf9\u6211\u7684\u6740\u4f24\u529b\uff09\uff0c\u53ef\u4e0e\u6b64\u540c\u65f6\u7684\u4fbf\u662f\u81ea\u5df1\u7684\u5e7c\u7a1a\u4e0e\u626d\u634f\uff08ok\uff0c\u8fd9\u53ef\u80fd\u4e0e\u6211\u4e4b\u524d\u6240\u8bf4\u7684\u5173\u7cfb\u7684\u5b9a\u4e49\u6709\u5173\u5427\uff09\u6240\u4ee5\u7ed3\u5c40\u4e5f\u662f\u6ce8\u5b9a\u7684\u3002</p> <p>\u6211\u60f3\uff0c\u65f6\u95f4\u4f1a\u629a\u5e73\u4e00\u5207\u7684\u5427</p>"},{"location":"spark%20in%20life/college%20life/sophomore/#_6","title":"\u540e\u8bb0","text":"<p>\u53c8\u662f\u4e00\u5e74\u65f6\u5149\uff0c\u5f88\u5feb\u6211\u5c06\u8fce\u676520\u5c81\u751f\u65e5\u5566\uff08\u6211\u597d\u5e74\u8f7b\ud83d\ude1d\uff09\u5c0f\u65f6\u5019\u603b\u5e0c\u671b\u81ea\u5df1\u6162\u70b9\u957f\u5927\uff0c\u800c\u73b0\u5728\u603b\u5e0c\u671b\u81ea\u5df1\u80fd\u5c3d\u53ef\u80fd\u591a\u7684\u627f\u62c5\u672a\u6765\u7684\u8d23\u4efb\u3002\u4e94\u6708\u7684\u4ed3\u7687\u5e26\u6765\u7684\u540e\u9057\u75c7\u4fbf\u662f\u5bf9\u6b7b\u4ea1\u7684\u6050\u60e7\u4e0e\u656c\u754f\u6108\u6f14\u6108\u70c8\uff0c\u5bf9\u751f\u547d\u7b54\u6848\u7684\u627e\u5bfb\u7559\u7ed9\u6211\u7684\u65f6\u95f4\u4fe8\u7136\u4e0d\u591a\u4e86\u3002</p> <p>\u751f\u547d\u7684\u6545\u4e8b\u4e0e\u7bc7\u7ae0\u8fd8\u5728\u4e66\u5199\uff0c\u65e0\u8bba\u771f\u4e0e\u5047\uff0c\u6211\u60f3\u6211\u4eec\u90fd\u8be5\u6c89\u6d78\u5176\u4e2d\u3002\u5728\u6b7b\u4e00\u6837\u7684\u9ed1\u6697\u91cc\u7115\u7740\u6e05\u5bc2\u7684\u5149\uff0c\u6211\u7741\u5f00\u773c\u6765\uff0c\u5fc3\u4e2d\u5b89\u5b9a\u3002</p>"},{"location":"spark%20in%20life/skills/cook/","title":"\u7f8e\u98df\u8bb0\u5f55","text":"<p>\u867d\u7136\u7a0b\u5e8f\u5458\u5728\u5929\u5929\u6572\u4ee3\u7801\uff0c\u4f46\u6211\u4eec\u4e5f\u4e0d\u80fd\u5fd8\u8bb0\u751f\u6d3b\u554a\uff01\u8fd9\u91cc\u5206\u4eab\u4e00\u4e2alink\uff0c\u91cc\u9762\u975e\u5e38\u5168\u7684\u6559\u7a0b\u3002\u5f53\u7136\u6211\u4e5f\u63a8\u8350\u5927\u5bb6\u53ef\u4ee5\u901a\u8fc7\u5c0f\u7ea2\u4e66\u6216\u8005\u6296\u97f3\u6765\u89c6\u9891\u5b66\u4e60\uff01</p>"},{"location":"spark%20in%20life/skills/driver%20license/","title":"\u9a7e\u7167","text":""},{"location":"spark%20in%20life/skills/driver%20license/#_2","title":"\u79d1\u4e00","text":"<p>\u8003\u8bd5\u6280\u5de7\uff1a\u5927\u5bb6\u53ef\u4ee5\u5148\u628a\u4e0d\u4f1a\u7684\u9898\u7a7a\u7740\uff0c\u4e0d\u8981\u56e0\u4e3a\u731c\u9519\u5f71\u54cd\u5fc3\u60c5\u3002\u7b49\u5168\u90e8\u7b54\u5b8c\u540e\u5982\u679c\u4e0d\u4f1a\u7684\u9898\u5c0f\u4e8e\u7b49\u4e8e10\u9053\u7684\u8bdd\u90a3\u4e48\u4f60\u53ef\u4ee5\u76f4\u63a5\u8499\u5566\uff01</p> <ol> <li> <p>\u670990\u900990\uff0c\u6ca190\u900930\uff1b\u5224\u65ad\u9898\u51fa\u73b030\u90fd\u662f\u6b63\u786e\u7684</p> </li> <li> <p>\u5468\u671f\u6216\u8005\u5b9e\u4e60\u671f\u5c31\u662f12\u4e2a\u6708</p> </li> <li> <p>\u6709\u6548\u671f3\u5e74\u2026\u2026</p> </li> <li> <p>\u201c\u6bcf\u4e24\u5e74\u201d\u90fd\u662f\u9519\u7684\uff0c\u662f\u201c\u6bcf\u5e74\u201d</p> </li> <li> <p>\u76f4\u63a5\u627e\u8fdd\u6cd5\u884c\u4e3a\uff5c\u8d23\u4efb\u627e\u5211\u4e8b\u6216\u8005\u5168\u90e8</p> </li> <li> <p>\u9057\u5931\u3001\u8865\u9886\u53bb\u2014\u2014\u6838\u53d1\u5730\uff1b\u671f\u6ee1\u6362\u8bc1\u53ef\u4ee5\u5c45\u4f4f\u5730\uff08\u8f66\u767b\u8bb0\u3001\u7167\u6838\u53d1\uff09</p> </li> <li> <p>\u88ab\u540a\u9500\u3001\u88ab\u6ce8\u9500\u90fd\u662f\u6b63\u786e\u7684\uff0c\u4e0d\u5408\u9002\u5c31\u4e0d\u80fd\u5f00\u8f66</p> </li> <li> <p>\u4e0d\u5f97\u7533\u8bf7\u9a7e\u9a76\u8bc1\u7684\u65f6\u95f4\u2014\u2014\u50471\u3001\u9a97\u626f\u6bd23\u3001\u91895\u3001\u9003\u7f6a\u7ec8\u751f\uff1b\u5047\u6750\u6599500\uff0c\u5047\u8003\u8bd52000.</p> </li> <li> <p>\u901f\u5ea6\uff1a\u7ea2\u9ad8\u84dd\u4f4e\u9ec4\u5efa\u8bae\u2014\u2014\u5730\u4e0a\u9ec4\u9ad8\u767d\u4f4e\uff1a\u5371\u9669\u9053\u8def\u901f\u5ea6\u226430km</p> </li> </ol> <p>2 6 1</p> <p>1 4 5</p> <p>5 2 \u79bb</p> <ol> <li> <p>\u9ad8\u901f\u516c\u8def 11-12 11-9 9-6\uff5c\uff5c10-12 6-10</p> <p>\u6709\u7ebf\u2014\u2014\u57ce5\u516c7</p> <p>\u65e0\u7ebf\u2014\u2014\u57ce3\u516c4</p> </li> <li> <p>\u7279\u6b8a\u5929\u6c14\u2014\u2014\u96e8\u5929\u627e\u6ed1\u3001\u51b0\u96ea\u627e\u5236\u52a8\u3001\u96ea\u5929\u627e\u8f66\u8f99\u3001\u6ce5\u6cde\u627e\u8f66\u8f6e\u3001\u96fe\u5929\u591c\u665a\u56de\u5e94\u5587\u53ed</p> </li> <li> <p>abs\u2014\u2014\u7d27\u6025\u5236\u52a8\uff1b\u5b89\u5168\u5e26\u2014\u2014\u51cf\u8f7b\u4f24\u5bb3\uff1b\u5b89\u5168\u5934\u2014\u2014\u6795\u4fdd\u62a4\u9888\u90e8\uff1b\u5b89\u5168\u6c14\u56ca\u2014\u2014\u8f85\u52a9\uff1b</p> </li> <li> <p>\u6709\u6ed1\u884c\u5c31\u662f\u9519</p> </li> <li> <p>\u6c7d\u6cb9\u4e0d\u8db3 \u2014\u2014&gt;\u71c3\u6cb9\u4e0d\u8db3</p> </li> <li> <p>\u4ea4\u8b66\u624b\u52bf\u2014\u2014\u6342\u4f4f\u80f8\u53e3\u662f\u53d8\u9053\uff0c\u6478\u5230\u4f1e\u6746\u662f\u4ee3\u8f6c\uff0c\u8f6c\u5f2f\u770b\u54ea\u4e2a\u624b\u4f4e\uff0c\u4e00\u53ea\u624b\u4e00\u9ad8\u4e00\u4f4e\u662f\u51cf\u901f</p> </li> <li> <p>\u4e09\u6846\u9ec4\u706f\u2014\u2014\u4fe1\u53f7\u89e3\u9664\uff1b\u4e00\u4e2a\u6846\u9ec4\u706f\u2014\u2014\u6ce8\u610f\u5b89\u5168</p> </li> <li> <p>\u7ea2\u6846\u4e09\u89d2\u2014\u2014\u54ea\u8fb9\u6709\u4e09\u89d2\u54ea\u8fb9\u901a\u884c</p> </li> <li> <p>\u8def\u8fb9\u9ec4\u8272\u865a\u7ebf\u6216\u8005\u4e00\u4e2a\u7ea2\u8272\u659c\u6760\u2014\u2014\u7981\u6b62\u957f\u65f6\u95f4\u505c\u8f66</p> <p>\u9ec4\u8272\u5b9e\u7ebf\u6216\u8005\u7ea2\u8272\u274c\u2014\u2014\u5b8c\u5168\u7981\u6b62\u505c\u8f66</p> </li> <li> <p>\u8def\u53e3\u2014\u2014\u6709\u9f7f\u53ef\u53d8\uff1b\u65e0\u9f7f\u5bfc\u5411</p> </li> <li> <p>\u51cf\u901f\u6807\u5fd7\u7ebf\u6709\u4e09\u79cd</p> </li> <li> <p>\u83f1\u5f62\u662f\u4eba\u884c\u6a2a\u9053\u7684\u9884\u544a\u3002</p> </li> <li> <p>\u8def\u4e0a\u9ec4\u8272\u865a\u7ebf\u662f\u6307\u793a\u6807\u7ebf\uff1b\u5982\u679c\u662f\u5b9e\u7ebf\u90a3\u4e48\u5b8c\u5168\u4e0d\u80fd\u538b\u3002</p> </li> <li> <p>\u4e00\u6025\u4e8c\u53cd\u4e09\u8fde\u7eed</p> </li> <li> <p>\u4e24\u8f66\u76f8\u649e\u627e\u4e8b\u6545\u6613\u53d1</p> </li> <li> <p>\u5e26\u201c\u9053\u201d\u5b57\u662f\u84dd\u8272\u6807\u5fd7</p> </li> <li> <p>\u4e0a\u4e0b\u662f\u53cc\u5411\uff0c\u5de6\u53f3\u662f\u5206\u79bb</p> </li> <li> <p>\u5c0f\u706b\u7bad\u662f\u5e72\u8def\u5148\u884c</p> </li> <li> <p>\u8def\u53e3\u524d\u7aef\u53cc\u767d\u5b9e\u7ebf\u662f\u505c\u8f66\u8ba9\u884c\u7684\u610f\u601d</p> </li> <li> <p>\u505c\u8f66\u8ddd\u79bb\uff1a\u53e35 \u7ad93</p> </li> <li> <p>\u78b0\u89c1\u5835\u8f66\u5c31\u4e0d\u8d70</p> </li> <li> <p>\u4e24\u6761\u8f66\u9053\u524d\u65b9\u505c\u8981\u7b49</p> </li> <li> <p>\u5e86\u5e78\u7275\u5f15\u6302\u8f66\u51c6\u9a7e\u8f66\u578b\uff08C6\uff09\u8981c1\uff0cc2\u4e00\u5e74\u4ee5\u4e0a\uff0c20\u5468\u5c81\u4ee5\u4e0a\u3002</p> </li> <li> <p>\u4e24\u8bc1\u4e24\u6807\uff08\u68c0\u9a8c\u6807\u548c\u4fdd\u9669\u6807\uff09\u4e00\u53f7\u724c</p> </li> <li> <p>\u5371\u9669\u9a7e\u9a76\u7f6a\uff1a\u7ade\u9a76\u6216\u9189\u9a7e\uff0c\u5904\u62d8\u5f79\u7f5a\u91d1\u3002</p> </li> <li> <p>\u6821\u8f66\u5ba2\u8fd0\u8f66\uff0c\u8d85\u8f7d20%\u626312\u5206\uff0c\u4ee5\u4e0b\u62636\u5206</p> </li> <li> <p>\u5ba2\u6302\u4e0d\u80fd\u521d\u7533\u9886\uff0c\u589e\u9a7e\u8981\u627e\u6838\u53d1\u5730\u3002</p> </li> </ol>"},{"location":"spark%20in%20life/skills/driver%20license/#_3","title":"\u6263\u5206\uff1a","text":"<p>\u9ad8\u901f\u516c\u8def\u9006\u884c12\u3001\u8fdd\u505c9\u3001\u5e94\u60256\u3001\u4f4e\u4fd73</p> <p>\u5047\u8bc1\u5047\u724c12\u5206\uff0c\u906e\u6321\u4e0d\u6302\u62639\u5206\uff0c\u8fdd\u89c4\u5b89\u88c53\u5206\u3002</p> <p>\u672a\u8fbe12\u6263\u5206\uff0c\u53ef\u4ee5\u5b66\u6cd5\u51cf\u5206\uff0c\u6700\u9ad8\u51cf6\u5206</p> <p>\u8fdd\u6807\u8fdd\u7ebf\uff0c\u8fdd\u89c4\u7528\u706f\uff0c\u672a\u6309\u65f6\u5e74\u68c0\uff0c\u90fd\u62631\u5206</p>"},{"location":"spark%20in%20life/skills/kickboxing/","title":"KickBoxing \u81ea\u7531\u640f\u51fb","text":"<p>\u56e0\u4e3a\u81ea\u5df1\u4e00\u76f4\u60f3\u5b66\u640f\u51fb\uff0c\u5948\u4f55\u4e00\u76f4\u6ca1\u6709\u627e\u5230\u6bd4\u8f83\u5408\u9002\u7684\u673a\u4f1a\uff0c\u6070\u9022\u5927\u4e00\u6691\u5047\u76f8\u5bf9\u8fd8\u7b97\u7a7a\u95f2\uff0c\u6545\u817e\u51fa\u4e00\u4e2a\u6708\u7684\u65f6\u95f4\u6bcf\u5929\u4e00\u4e2a\u591a\u5c0f\u65f6\u8fdb\u884c\u79c1\u6559\u7ec3\u4e60\uff0c\u6211\u4e5f\u4f1a\u8bb0\u5f55\u4e00\u4e9b\u5176\u4e2d\u7684\u5173\u952e\u70b9\u3002</p>"},{"location":"spark%20in%20life/skills/kickboxing/#_1","title":"\u521d\u4f53\u9a8c","text":"<ol> <li>\u70ed\u8eab\u4f1a\u6d3b\u52a8\u80a9\u3001\u8de8\u3001\u4ee5\u53ca\u817f\u811a\u7684\u7075\u6d3b\u6027\u3002</li> <li>\u7b80\u5355\u7684\u524d\u624b\u548c\u540e\u624b\u7684\u8bad\u7ec3\u3002\u524d\u624b\u770b\u4f3c\u7b80\u5355\u4f46\u5b9e\u5219\u5b9e\u7528\u6027\u8f83\u9ad8\uff0c\u5e76\u4e14\u5728\u62f3\u51fb\u8fc7\u7a0b\u4e2d\u8d77\u5230\u8bd5\u63a2\u548c\u628a\u63e1\u8ddd\u79bb\u7684\u4f5c\u7528\u3002\u540e\u624b\u8981\u6ce8\u610f\u8f6c\u80ef\u9001\u80a9\uff0c\u91cd\u5fc3\u653e\u7a33\uff0c\u811a\u5916\u65cb\uff0c\u6253\u5b8c\u5373\u6536\uff08\u7c7b\u4f3c\u4e8e\u97ad\u6253\u7684\u52b2\uff09\u3002</li> <li>\u6253\u62f3\u65f6\u8981\u8db3\u4ee5\u811a\u4e0b\u7684\u7075\u6d3b\u6027\u4ee5\u53ca\u52a8\u4f5c\uff0c\u505a\u5230\u8fdb\u9000\u81ea\u5982\u7075\u6d3b\u3002\u51fa\u62f3\u65f6\u8981\u6709\u8282\u594f\u7684\u5410\u6c14\u3002</li> <li>\u51c6\u5907\u5f0f\u8981\u6ce8\u610f\u62a4\u4e0b\u5df4\u4ee5\u53ca\u5939\u8098\uff0c\u7531\u4e8e\u81ea\u5df1\u4e2a\u5b50\u76f8\u5bf9\u8f83\u9ad8\uff0c\u6211\u4eec\u4e0d\u9700\u8981\u538b\u91cd\u5fc3\uff0c\u53ea\u9700\u8981\u505a\u5230\u5c48\u819d\u6536\u7d27\u6838\u5fc3\uff08\u4e0d\u8981\u6485\u5c41\u80a1\uff09\uff0c\u8fd9\u6837\u53ef\u4ee5\u964d\u4f4e\u88ab\u51fb\u6253\u7684\u9762\u79ef\u3002</li> </ol>"},{"location":"spark%20in%20life/skills/kickboxing/#_2","title":"\u4f53\u6001\uff08\u6708\u521d\uff09","text":"<p>\u4f53\u91cd72.9 \u5e73\u677f\u652f\u64911.22 \u4fef\u5367\u649130 \u6df1\u8e7260 \u5f15\u4f536</p>"},{"location":"spark%20in%20life/skills/kickboxing/#_3","title":"\u70ed\u8eab\uff08\u6ce1\u6cab\u8f74\uff09","text":"<p>\u4e3b\u8981\u7684\u653e\u677e\u90e8\u4f4d\uff1a\u5c0f\u817f\uff0c\u81c0\u90e8\uff0c\u5927\u817f\u524d\u4fa7\uff0c\u80cc\u90e8\uff0c\u8170\u690e\u7b49\u3002 \u53c2\u8003\u89c6\u9891\uff1a</p>"},{"location":"spark%20in%20life/skills/kickboxing/#_4","title":"\u6b65\u4f10\u7ed3\u5408\u624b\u90e8","text":"<ol> <li>\u524d\u8fdb\u540e\u9000\u662f\u5206\u522b\u540e\u811a\u548c\u524d\u811a\u53d1\u529b\uff0c\u4e0d\u8981\u62d6\u6c93\uff0c\u91cd\u5fc3\u653e\u7a33</li> <li>\u6b65\u4f10\u7684\u5173\u952e\u662f\u638c\u63e1\u81ea\u5df1\u548c\u5bf9\u624b\u4e4b\u95f4\u7684\u8ddd\u79bb\u611f\u3002</li> <li>\u53ef\u4ee5\u540e\u9000\u540e\u6293\u7a7a\u9699\u51fa\u540e\u624b\u3002</li> </ol>"},{"location":"spark%20in%20life/skills/virtual%20location/","title":"\u865a\u62df\u5b9a\u4f4d","text":""},{"location":"spark%20in%20life/skills/virtual%20location/#ios","title":"ios\u624b\u673a\u7528\u6237","text":"<p>\u4e0b\u8f7d\u7231\u601d\u52a9\u624b\uff0c\u5728\u7231\u601d\u52a9\u624b\u7684\u5de5\u5177\u7bb1\u4e2d\u70b9\u51fb\u201c\u865a\u62df\u5b9a\u4f4d\u201d\u529f\u80fd\uff0c\u53ef\u4ee5\u8fdb\u884c\u4fee\u6539\u624b\u673a\u7684\u5b9a\u4f4d\u3002</p> <p>\u4fee\u6539\u524d\u9700\u8981\u901a\u8fc7\u6570\u636e\u7ebf\u8fde\u63a5\u624b\u673a\u8bbe\u5907\u3002(\u4e00\u4e9b\u8f83\u65b0\u7684ios\u7248\u672c\u4e0d\u652f\u6301\u66f4\u6539)</p> <p>\u7231\u601d\u52a9\u624b \u76ee\u524d\u652f\u6301 windows\u548cmac</p> <p>\u7231\u601d\u52a9\u624b\u5b98\u7f51\u4e0b\u8f7d\uff1ahttps://www.i4.cn/pro_pc.html</p> <p></p> <p>\u4e00\u822c\u6765\u8bf4\u9700\u8981\u6253\u5f00\u624b\u673a\u7684\u5f00\u53d1\u8005\u529f\u80fd</p> <p>\u8fde\u63a5\u540e\uff0c\u901a\u8fc7\u641c\u7d22\u5c31\u53ef\u4ee5\u627e\u5230\u5730\u5740\uff0c\u5e76\u76f4\u63a5\u5b9a\u4f4d\uff0c\u70b9\u51fb\u201c\u4fee\u6539\u865a\u62df\u5b9a\u4f4d\u201d\u6309\u94ae\u5373\u53ef\u7acb\u5373\u5b9a\u4f4d\uff0c\u4f60\u53ef\u4ee5\u6253\u5f00iOS\u9ed8\u8ba4\u5730\u56fe\u67e5\u770b\u5b9a\u4f4d\u662f\u5426\u6210\u529f\u3002 </p> <p>\u6b64\u5916\uff0c\u5982\u679c\u641c\u7d22\u4e0d\u5230\u7684\u5730\u5740\uff0c\u6216\u8005\u56fd\u5916\u65e0\u6cd5\u641c\u7d22\u7684\u5730\u5740\uff0c\u53ef\u4ee5\u5728\u5176\u5b83\u5730\u56fe\u4e0a\u83b7\u53d6\u5b9a\u4f4d\uff0c\u7136\u540e\u624b\u52a8\u8f93\u5165\u5750\u6807\u5c31\u53ef\u4ee5\u76f4\u63a5\u5b9a\u4f4d\u3002</p> <p>\u4e00\u822c\u6765\u8bf4\u6301\u7eed\u65f6\u95f4\u5927\u7ea6\u4e3a3-6h\u5de6\u53f3</p> <p>\u5982\u679c\u4e0d\u60f3\u518d\u5b9a\u4f4d\uff0c\u60f3\u8981\u6062\u590d\u539f\u72b6\uff0c\u70b9\u51fb\u201c\u8fd8\u539f\u771f\u5b9e\u5750\u6807\u201d\u5373\u53ef\u3002</p> <p></p>"},{"location":"spark%20in%20life/skills/virtual%20location/#_2","title":"\u5b89\u5353\u7528\u6237","text":""},{"location":"spark%20in%20life/skills/virtual%20location/#_3","title":"\u6253\u5361","text":"<p>\u7531\u4e8e\u865a\u62df\u5b9a\u4f4d\u4ee5\u53ca\u8f68\u8ff9\u7b49\u529f\u80fd\uff0c\u662f\u53ef\u4ee5\u5b9e\u73b0\u201c\u6253\u5361\u201d\u7684\uff0c\u4f46\u5efa\u8bae\u8c28\u614e\u4f7f\u7528\uff0c\u540e\u679c\u81ea\u8d1f\u3002</p> <p>\uff08\u6211\u4f1a\u5728\u4e4b\u540e\u62bd\u7a7a\u5199\u4e2a\u811a\u672c\u3002</p>"},{"location":"spark%20in%20life/travel/GuiZhou/","title":"\u5927\u4e00\u6691\u5047\u8d35\u5dde\u65c5\u884c","text":""},{"location":"spark%20in%20life/travel/GuiZhou/#_2","title":"\u51fa\u884c\u5efa\u8bae","text":"<ol> <li>\u643a\u7a0b\u4e0a\u53ef\u4ee5\u81ea\u5b9a\u4e49\u884c\u7a0b\uff0c\u4ed6\u4f1a\u7ed9\u4f60\u8ba2\u597d\u9152\u5e97\u548c\u5305\u8f66\u7684\u670d\u52a1\uff1a\u4f46\u5305\u8f66\u643a\u7a0b\u4f1a\u62bd\u76f8\u5f53\u591a\u7684\u4e2d\u4ecb\u8d39\u5176\u4e2d\uff0c\u6211\u4eec\u5305\u8f666000\u5143\uff0c\u643a\u7a0b\u4f1a\u5176\u4e2d\u62bd\u53d62000\uff0c\u4f18\u70b9\u662f\u56db\u4eba\u4ee5\u4e0b\u7684\u8bdd\u76f8\u5bf9\u4f1a\u66f4\u65b9\u4fbf\uff0c\u4f46\u7f3a\u70b9\u5c31\u662f\u8d39\u7528\u8f83\u9ad8\u5e76\u4e14\u5982\u679c\u4f60\u4e2d\u95f4\u884c\u7a0b\u6709\u53d8\u5316\u53f8\u673a\u53ef\u80fd\u4f1a\u8981\u6c42\u52a0\u94b1\u4e4b\u7c7b\u7684\uff09\u3002\u56e0\u6b64\u5982\u679c\u6761\u4ef6\u5141\u8bb8\u7684\u8bdd\u53ef\u4ee5\u9009\u62e9\u79df\u8f66\u81ea\u9a7e\u7684\u65b9\u5f0f\u3002</li> <li>\u5927\u5bb6\u6700\u597d\u5e26\u4e0a\u80c3\u836f\u4e4b\u7c7b\u7684\uff0c\u6211\u81ea\u8ba4\u4e3a\u81ea\u5df1\u8fd8\u7b97\u53ef\u4ee5\u5403\u8fa3\u4f46\u662f\u4f9d\u65e7\u6709\u88ab\u8fa3\u5230\u3002</li> <li>\u6574\u4f53\u5929\u6c14\u8fd8\u662f\u6bd4\u8f83\u51c9\u5feb\u7684\uff0c\u53ef\u4ee5\u8003\u8651\u5e26\u4e0a\u4e00\u5957\u79cb\u8863\u3002\u6700\u597d\u81ea\u5907\u4e0aEVA\u96e8\u8863\uff0c\u51c9\u978b\u548c\u901f\u5e72\u7684\u8863\u670d\uff0c\u4f1a\u65b9\u4fbf\u5f88\u591a</li> <li>\u5982\u679c\u662f\u5b66\u751f\u7684\u8bdd\u8bb0\u5f97\u5e26\u5b66\u751f\u8bc1\uff0c\u80fd\u7701\u5f88\u591a\u94b1\u54df\uff01</li> <li>\u7f8e\u98df\u65b9\u9762\u8d35\u5dde\u5403\u7684\u771f\u7684\u76f8\u5f53\u5b9e\u60e0\uff0c\u6b63\u9910\u6211\u4eec\u4eba\u5747\u90fd\u572840\u5de6\u53f3\u3002</li> <li>\u503c\u5f97\u4e00\u63d0\u7684\u662f\u8d35\u5dde\u51b0\u7c89\u76f8\u5f53\u597d\u5403\uff0c\u7ed9\u6211\u7559\u4e0b\u4e86\u5f88\u6df1\u7684\u5370\u8c61\u3002</li> </ol>"},{"location":"spark%20in%20life/travel/GuiZhou/#726","title":"7\u670826\u65e5 \u9075\u4e49","text":"<p>\u6e38\u73a9\uff1a\u9075\u4e49\u600e\u4e48\u8bf4\u5462\uff0c\u53ef\u80fd\u662f\u7531\u4e8e\u6e38\u73a9\u65f6\u95f4\u5b89\u6392\u7684\u539f\u56e0\uff0c\u6211\u5728\u8fd9\u91cc\u5403\u5230\u4e86\u76f8\u5f53\u591a\u7684\u8d35\u5dde\u5c0f\u5403\u3002\u6bd4\u8f83\u63a8\u8350\u5728\u9075\u4e49\u6c47\u5740\u9644\u8fd1\u6e38\u73a9\uff0c\u611f\u53d7\u7ea2\u8272\u3001\u5386\u53f2\u610f\u4e49\u7684\u540c\u65f6\u9644\u8fd1\u5546\u4e1a\u5316\u6bd4\u8f83\u91cd\uff0c\u6709\u5c0f\u5403\u8857\u76f8\u5f53\u597d\u5403\u3002</p> <p>\u4f4f\u5bbf\uff1a\u63a8\u8350\u4f4f\u5728\u82cf\u5dde\u8def\u9644\u8fd1\uff0c\u665a\u4e0a\u591c\u5bb5\u5c0f\u5403\u975e\u5e38\u65b9\u4fbf\uff0c\u6211\u4f4f\u7684\u9152\u5e97\u662f\u201c\u9075\u4e49\u5929\u5b89\u5927\u9152\u5e97\u201d\uff0c\u73af\u5883\u4e0e\u5b83\u7684\u4ef7\u4f4d\u662f\u6bd4\u8f83\u5339\u914d\u7684\uff0c\u9152\u5e97\u65e9\u9910\u4e5f\u4e0d\u9519\u3002</p> <p>\u51fa\u884c\uff1a\u6253\u8f66\u975e\u5e38\u65b9\u4fbf\uff0c\u5927\u6982\u90fd\u572820\u5143\u5de6\u53f3\u3002</p> <p>\u7f8e\u98df\uff1a\u6d2a\u6865\u70e4\u9e21\u3001\u51b0\u7c89\u3001\u725b\u8089\u7c89\u3001\u70e7\u70e4\u3001\u70b8\u7c7b\u5c0f\u5403\u7b49\u7b49</p> <p>\u9644\uff1a\u6b64\u5916\u5c31\u662f\u670b\u53cb\u6709\u63a8\u8350\u53bb\u9644\u8fd1\u7684\u4e4c\u6c5f\u5be8\uff0c\u4f46\u7531\u4e8e\u65f6\u95f4\u7684\u539f\u56e0\u6211\u4eec\u6ca1\u6709\u53bb\uff0c\u4f46\u770b\u7f51\u8bc4\u6765\u8bf4\u8fd8\u662f\u6bd4\u8f83\u4e0d\u9519\u7684\u3002</p>"},{"location":"spark%20in%20life/travel/GuiZhou/#727","title":"7\u670827\u65e5 \u9ec4\u679c\u6811","text":"<p>\u6e38\u73a9\uff1a\u9ec4\u679c\u6811\u91cc\u6709\u4e09\u4e2a\u666f\u533a\uff0c\u7531\u4e8e\u6211\u4eec\u4e0a\u5348\u4ece\u8d35\u9633\u51fa\u53d1\u4e2d\u5348\u624d\u5230\uff0c\u6240\u4ee5\u65f6\u95f4\u7565\u663e\u7d27\u5f20\uff0c\u53ea\u770b\u4e86\u5927\u7011\u5e03\u548c\u5929\u661f\u6865\u3002\u89c2\u5149\u8f66\u5efa\u8bae\u4e70\uff0c\u7535\u68af\u53ef\u4ee5\u6839\u636e\u81ea\u5df1\u4f53\u529b\uff08\u6ca1\u5fc5\u8981\u4e70\u4e0b\u53bb\u7684\u7535\u68af\uff0c\u4e0a\u53bb\u7684\u7535\u68af\u53ef\u4ee5\u8d70\u5230\u7535\u68af\u53e3\u4e86\u518d\u4e70\uff09\u3002\u5929\u661f\u6865\u524d\u534a\u6bb5\u7684\u666f\u8272\u4e5f\u662f\u975e\u5e38\u597d\u770b\u7684\u3002</p> <p>\u503c\u5f97\u4e00\u63d0\u7684\u662f\u56e0\u4e3a\u6211\u4eec\u53bb\u7684\u65f6\u5019\u4e0b\u96e8\u6da8\u6c34\uff0c\u7011\u5e03\u7684\u6c34\u7279\u522b\u5927\uff0c\u56e0\u6b64\u4e0d\u5efa\u8bae\u53bb\u76f4\u5bf9\u6700\u9ad8\u7684\u90a3\u4e2a\u89c2\u666f\u53f0\uff08\u662f\u4f1e\u90fd\u6321\u4e0d\u4f4f\u7684\u96e8\uff09</p> <p>\u4f4f\u5bbf\uff1a\u56e0\u4e3a\u53f8\u673a\u662f\u5b89\u987a\u4eba\uff0c\u6211\u4eec\u4fbf\u76f4\u63a5\u4f4f\u5728\u4e86\u5b89\u987a\u3002</p> <p>\u7f8e\u98df\uff1a\u975e\u5e38\u63a8\u8350\u5b89\u987a\u7684\u8c46\u7c73\u706b\u9505\u6216\u8005\u725b\u8089\u8c46\u7c73\u706b\u9505</p>"},{"location":"spark%20in%20life/travel/GuiZhou/#728","title":"7\u670828\u65e5 \u9a6c\u5cad\u6cb3","text":"<p>\u6e38\u73a9\uff1a\u4ece\u5b89\u987a\u5230\u5174\u4e49\u8f66\u7a0b\u5927\u81f4\u6709\u4e09\u4e2a\u5c0f\u65f6\u5de6\u53f3\u3002\u6211\u4eec\u53bb\u8fd9\u91cc\u7684\u76ee\u7684\u5c31\u662f\u6f02\u6d41\uff0c\u5f53\u7136\u6f02\u6d41\u4e5f\u662f\u76f8\u5f53\u7684\u523a\u6fc0\uff08\u6307\u6da8\u6c34\u671f\uff09\uff0c\u975e\u5e38\u5efa\u8bae\u5750\u524d\u4e24\u6392\u5176\u4e2d\u503c\u5f97\u5fc5\u5751\u7684\u662f\uff0c\u4f60\u53ef\u4ee5\u4e0d\u7528\u4e70\u666f\u533a\u95e8\u7968\uff01\uff01\uff01\u6f02\u6d41\u7684\u51fa\u53e3\u5c31\u5728\u666f\u533a\u91cc\u9762\uff0c\u800c\u4e14\u6f02\u6d41\u8d70\u5230\u666f\u533a\u7684\u90a3\u6761\u8def\u4f60\u53ef\u4ee5\u5f88\u597d\u7684\u770b\u5230\u4e07\u9a6c\u5954\u817e\u7011\u5e03\u3002\u751a\u81f3\u53ef\u4ee5\u8bf4\u8fd9\u4e2a\u7011\u5e03\u662f\u8981\u6bd4\u9ec4\u679c\u6811\u597d\u770b\u5f88\u591a\u7684\u3002</p> <p>\u4f4f\u5bbf\uff1a\u6211\u4eec\u5f53\u665a\u76f4\u63a5\u4f4f\u5728\u4e86\u5174\u4e49\u5e02\uff0c\u975e\u5e38\u63a8\u8350\u5f53\u5730\u7684\u4e00\u4e2a\u8fde\u9501\u9152\u5e97\u53eb\u201c\u9e93\u67ab\u9152\u5e97\u201d</p> <p>\u7f8e\u98df\uff1a\u63a8\u8350\u5e72\u9505\u725b\u8089\uff0c\u771f\u7684\u597d\u5403\uff01\uff01\uff01\u5c24\u5176\u8981\u627e\u5730\u9053\u7684\u8001\u7ba1\u5b50\u3002</p>"},{"location":"spark%20in%20life/travel/GuiZhou/#729","title":"7\u670829\u65e5 \u4e07\u5cf0\u6797\u4e0e\u4e0b\u53f8\u53e4\u9547","text":"<p>\u6e38\u73a9\uff1a\u65e9\u6668\u53ef\u4ee5\u53bb\u4e07\u5cf0\u6797\u98ce\u666f\u533a\uff0c\u57fa\u672c\u6ca1\u4ec0\u4e48\u538b\u529b\uff0c\u62cd\u62cd\u7167\u5565\u7684\u522b\u6709\u7279\u8272\u3002\u4e2d\u5348\u5de6\u53f3\u6211\u4eec\u51fa\u53d1\u53bb\u4e0b\u53f8\u53e4\u9547\uff08\u9884\u8ba1\u8f66\u7a0b5h\u5de6\u53f3\uff0c\u65f6\u95f4\u5176\u5b9e\u6709\u70b9\u4e45\u7684\uff09\u665a\u4e0a\u5230\u8fbe\u540e\u53ef\u4ee5\u5728\u53e4\u9547\u73a9\u800d\u4f4f\u5bbf\u3002\u665a\u4e0a\u7684\u65f6\u5019\u53ef\u4ee5\u79df\u5f53\u5730\u6c11\u65cf\u670d\u88c5\uff0c\u7167\u7247\u975e\u5e38\u51fa\u7247\uff01\uff01\uff01</p> <p>\u4f4f\u5bbf\uff1a\u6211\u4eec\u5f53\u665a\u4f4f\u5728\u4e86\u4e0b\u53f8\u53e4\u9547\u5185\u7684\u6c11\u5bbf\uff0c\u611f\u89c9\u975e\u5e38\u597d\u3002</p> <p>\u7f8e\u98df\uff1a\u4e2d\u5348\u53ef\u4ee5\u76f4\u63a5\u5728\u4e07\u5cf0\u6797\u5403\u201c\u82d7\u738b\u9c7c\u201d\u975e\u5e38\u597d\u5403\uff01\uff01\uff01\u665a\u4e0a\u53e4\u9547\u5185\u6709\u5f88\u591a\u5c0f\u5403\u7684\uff08\u5f53\u5730\u975e\u5e38\u7231\u5403\u72d7\u8089\uff0c\u4e0d\u80fd\u63a5\u53d7\u7684\u4eba\u6ce8\u610f\u54df\uff09</p>"},{"location":"spark%20in%20life/travel/GuiZhou/#730","title":"7\u670830\u65e5 \u4e0b\u53f8\u53e4\u9547\u4e0e\u8d35\u9633","text":"<p>\u6e38\u73a9\uff1a\u6211\u4eec\u65e9\u4e0a\u4e5d\u70b9\u53bb\u5212\u4e86\u8239\uff1a\u975e\u5e38\u5efa\u8bae\uff0c\u662f\u7c7b\u4f3c\u4e8e\u5c0f\u6c5f\u7684\u90a3\u79cd\u3002\u8d85\u65f6\u57281h30min\u5de6\u53f3\uff0c\u4f60\u4e0d\u542d\u58f0\u57fa\u672c\u90fd\u662f\u53ef\u4ee5\u7684\u3002\u4e2d\u5348\u51fa\u53d1\u53bb\u8d35\u9633\u5927\u69822h\u5de6\u53f3\uff0c\u6211\u4eec\u6e38\u73a9\u4e86\u7532\u79c0\u697c\uff08\u6211\u5728\u91cc\u9762\u7ed9\u5bb6\u4eba\u5e26\u4e86\u9996\u9970\uff0c\u611f\u89c9\u633a\u6709\u8bbe\u8ba1\u611f\u4e5f\u4e0d\u662f\u5f88\u5751\uff0c\u53ef\u4ee5\u8bb2\u4ef7\uff09\uff1b\u6bd4\u8f83\u9057\u61be\u7684\u662f\u6ca1\u80fd\u53bb\u8d35\u9633\u535a\u7269\u9986\uff08\u56e0\u4e3a4\u70b9\u505c\u6b62\u5165\u9662\uff09\u3002\uff08\u9ed4\u7075\u5c71\u516c\u56ed\u4e5f\u662f\u975e\u5e38\u597d\u7684\u54df\uff0c\u9664\u4e86\u4eba\u591a\uff09\uff08\u5982\u679c\u60f3\u5403\u5c0f\u5403\u53ef\u4ee5\u53bb\u6b63\u65b0\u8857\uff0c\u6296\u97f3\u4e0a\u6709\u5f88\u591a\u63a8\u8350\uff09</p> <p>\u4f4f\u5bbf\uff1a\u6211\u4eec\u5f53\u665a\u4f4f\u5728\u8d35\u9633\u5317\u7ad9\u9644\u8fd1\u3002</p> <p>\u7f8e\u98df\uff1a\u65e9\u9910\u53ef\u4ee5\u5728\u53e4\u9547\u5403\u5f53\u5730\u7279\u8272\u62cc\u9762\uff08\u975e\u5e38\u6709\u7279\u8272\uff01\uff01\uff01\uff09\uff0c\u5e76\u4e14\u84dd\u8393\u5356\u7684\u975e\u5e38\u4fbf\u5b9c\uff08\u4e0d\u5efa\u8bae\u84dd\u8393\u6c41\uff09\uff0c\u975e\u5e38\u63a8\u8350\u84dd\u8393\u51b0\u7c89\u8d35\u9633\u8fa3\u5b50\u9e21\u53ef\u4ee5\u5c1d\u8bd5\uff0c\u591c\u5bb5\u975e\u5e38\u63a8\u8350\u4f53\u9a8c\u4e0b\u70d9\uff08luo\uff09\u9505</p>"},{"location":"spark%20in%20life/travel/GuiZhou/#_3","title":"\u5c0f\u7ed3","text":"<p>\u56e0\u4e3a\u7b97\u662f\u7b2c\u4e00\u6b21\u81ea\u5df1\u8bbe\u5b9a\u51fa\u884c\u8ba1\u5212\u51fa\u53bb\u73a9\u5427\uff0c\u867d\u7136\u5403\u4e86\u4e9b\u4e8f\uff0c\u4f46\u6574\u4f53\u8fd8\u662f\u76f8\u5f53\u987a\u5229\u7684\u3002</p> <p>\u6211\u975e\u5e38\u63a8\u8350\u5927\u5bb6\u53bb\u8d35\u5dde\u6e38\u73a9\uff0c\u7f8e\u98df\u975e\u5e38\u591a\uff0c\u4ef7\u683c\u5b9e\u60e0\u5e76\u4e14\u6c11\u98ce\u6df3\u6734\uff08\u751a\u81f3\u4f1a\u8ba9\u70df\uff09\u3002\u7ed9\u6211\u7559\u4e0b\u4e86\u76f8\u5f53\u597d\u7684\u5370\u8c61\u3002</p> <p>\u5f53\u7136\u901a\u8fc7\u6211\u4eec\u7684\u884c\u7a0b\u5b89\u6392\uff0c\u4f60\u80fd\u770b\u5230\u6211\u4eec\u53ef\u80fd\u6ca1\u53bb\u975e\u5e38\u706b\u7684\u5927\u5c0f\u4e03\u5b54\uff0c\u5343\u6237\u82d7\u5be8\uff0c\u68b5\u51c0\u5c71\u2026\u2026\u53ef\u80fd\u662f\u4e0d\u60f3\u4eba\u6324\u4eba\u7684\u7f18\u6545\uff0c\u4ea6\u6216\u662f\u60f3\u63a2\u7d22\u4e9b\u5c0f\u4f17\u666f\u70b9\u3002\u8d35\u5dde\u7684\u5c71\u6c34\u975e\u5e38\u79c0\u7f8e\uff0c\u5c31\u662f\u4f60\u6cbf\u9014\u62cd\u7167\u90fd\u80fd\u5f88\u51fa\u7247\u7684\u90a3\u79cd\u3002</p> <p>\u8d76\u5feb\u5e26\u4e0a\u76f8\u673a\u51fa\u53d1\u54df\uff0c\u6765\u8d35\u5dde\u907f\u6691\u5427~</p>"},{"location":"spark%20in%20life/travel/chongqing/","title":"\u91cd\u5e86","text":"<p>\u91cd\u5e86\u771f\u7684\u662f\u4e00\u4e2a\u7269\u4ef7\u5f88\u4f4e\uff0c\u6c11\u98ce\u975e\u5e38\u6df3\u6734\u7684\u57ce\u5e02\u3002</p>"}]}